# Comparing `tmp/odoo14_addon_stock_available_to_promise_release-14.0.3.0.1.dev1-py3-none-any.whl.zip` & `tmp/odoo14_addon_stock_available_to_promise_release-14.0.3.1.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,49 +1,50 @@
-Zip file size: 78628 bytes, number of entries: 47
--rw-r--r--  2.0 unx     7068 b- defN 24-Feb-06 06:45 odoo/addons/stock_available_to_promise_release/README.rst
--rw-r--r--  2.0 unx       43 b- defN 24-Feb-06 06:45 odoo/addons/stock_available_to_promise_release/__init__.py
--rw-r--r--  2.0 unx      967 b- defN 24-Feb-06 06:45 odoo/addons/stock_available_to_promise_release/__manifest__.py
--rw-r--r--  2.0 unx    29209 b- defN 24-Feb-06 06:45 odoo/addons/stock_available_to_promise_release/i18n/es_AR.po
--rw-r--r--  2.0 unx    29061 b- defN 24-Feb-06 06:45 odoo/addons/stock_available_to_promise_release/i18n/it.po
--rw-r--r--  2.0 unx    24718 b- defN 24-Feb-06 06:45 odoo/addons/stock_available_to_promise_release/i18n/stock_available_to_promise_release.pot
--rw-r--r--  2.0 unx     1096 b- defN 24-Feb-06 06:45 odoo/addons/stock_available_to_promise_release/migrations/14.0.2.0.0/post-migrate.py
--rw-r--r--  2.0 unx      428 b- defN 24-Feb-06 06:45 odoo/addons/stock_available_to_promise_release/migrations/14.0.2.5.0/post-migrate.py
--rw-r--r--  2.0 unx      236 b- defN 24-Feb-06 06:45 odoo/addons/stock_available_to_promise_release/models/__init__.py
--rw-r--r--  2.0 unx     1085 b- defN 24-Feb-06 06:45 odoo/addons/stock_available_to_promise_release/models/product_product.py
--rw-r--r--  2.0 unx      805 b- defN 24-Feb-06 06:45 odoo/addons/stock_available_to_promise_release/models/res_company.py
--rw-r--r--  2.0 unx      520 b- defN 24-Feb-06 06:45 odoo/addons/stock_available_to_promise_release/models/res_config_settings.py
--rw-r--r--  2.0 unx      792 b- defN 24-Feb-06 06:45 odoo/addons/stock_available_to_promise_release/models/stock_location_route.py
--rw-r--r--  2.0 unx    26926 b- defN 24-Feb-06 06:45 odoo/addons/stock_available_to_promise_release/models/stock_move.py
--rw-r--r--  2.0 unx     7669 b- defN 24-Feb-06 06:45 odoo/addons/stock_available_to_promise_release/models/stock_picking.py
--rw-r--r--  2.0 unx     2818 b- defN 24-Feb-06 06:45 odoo/addons/stock_available_to_promise_release/models/stock_picking_type.py
--rw-r--r--  2.0 unx     2901 b- defN 24-Feb-06 06:45 odoo/addons/stock_available_to_promise_release/models/stock_rule.py
--rw-r--r--  2.0 unx      240 b- defN 24-Feb-06 06:45 odoo/addons/stock_available_to_promise_release/readme/CONFIGURE.rst
--rw-r--r--  2.0 unx      220 b- defN 24-Feb-06 06:45 odoo/addons/stock_available_to_promise_release/readme/CONTRIBUTORS.rst
--rw-r--r--  2.0 unx       80 b- defN 24-Feb-06 06:45 odoo/addons/stock_available_to_promise_release/readme/CREDITS.rst
--rw-r--r--  2.0 unx     2257 b- defN 24-Feb-06 06:45 odoo/addons/stock_available_to_promise_release/readme/DESCRIPTION.rst
--rw-r--r--  2.0 unx     1435 b- defN 24-Feb-06 06:45 odoo/addons/stock_available_to_promise_release/readme/USAGE.rst
--rw-r--r--  2.0 unx      297 b- defN 24-Feb-06 06:45 odoo/addons/stock_available_to_promise_release/security/ir.model.access.csv
--rw-r--r--  2.0 unx     9455 b- defN 24-Feb-06 06:45 odoo/addons/stock_available_to_promise_release/static/description/icon.png
--rw-r--r--  2.0 unx    17450 b- defN 24-Feb-06 06:45 odoo/addons/stock_available_to_promise_release/static/description/index.html
--rw-r--r--  2.0 unx      174 b- defN 24-Feb-06 06:45 odoo/addons/stock_available_to_promise_release/tests/__init__.py
--rw-r--r--  2.0 unx     4629 b- defN 24-Feb-06 06:45 odoo/addons/stock_available_to_promise_release/tests/common.py
--rw-r--r--  2.0 unx    51410 b- defN 24-Feb-06 06:45 odoo/addons/stock_available_to_promise_release/tests/test_reservation.py
--rw-r--r--  2.0 unx     5855 b- defN 24-Feb-06 06:45 odoo/addons/stock_available_to_promise_release/tests/test_unrelease.py
--rw-r--r--  2.0 unx     3396 b- defN 24-Feb-06 06:45 odoo/addons/stock_available_to_promise_release/tests/test_unrelease_2steps.py
--rw-r--r--  2.0 unx     2862 b- defN 24-Feb-06 06:45 odoo/addons/stock_available_to_promise_release/tests/test_unrelease_3steps.py
--rw-r--r--  2.0 unx     2108 b- defN 24-Feb-06 06:45 odoo/addons/stock_available_to_promise_release/tests/test_unrelease_merged_moves.py
--rw-r--r--  2.0 unx     1122 b- defN 24-Feb-06 06:45 odoo/addons/stock_available_to_promise_release/views/product_product_views.xml
--rw-r--r--  2.0 unx     2787 b- defN 24-Feb-06 06:45 odoo/addons/stock_available_to_promise_release/views/res_config_settings.xml
--rw-r--r--  2.0 unx      611 b- defN 24-Feb-06 06:45 odoo/addons/stock_available_to_promise_release/views/stock_location_route_views.xml
--rw-r--r--  2.0 unx     4736 b- defN 24-Feb-06 06:45 odoo/addons/stock_available_to_promise_release/views/stock_move_views.xml
--rw-r--r--  2.0 unx     1998 b- defN 24-Feb-06 06:45 odoo/addons/stock_available_to_promise_release/views/stock_picking_type_views.xml
--rw-r--r--  2.0 unx     6951 b- defN 24-Feb-06 06:45 odoo/addons/stock_available_to_promise_release/views/stock_picking_views.xml
--rw-r--r--  2.0 unx       58 b- defN 24-Feb-06 06:45 odoo/addons/stock_available_to_promise_release/wizards/__init__.py
--rw-r--r--  2.0 unx      640 b- defN 24-Feb-06 06:45 odoo/addons/stock_available_to_promise_release/wizards/stock_release.py
--rw-r--r--  2.0 unx     1856 b- defN 24-Feb-06 06:45 odoo/addons/stock_available_to_promise_release/wizards/stock_release_views.xml
--rw-r--r--  2.0 unx      646 b- defN 24-Feb-06 06:45 odoo/addons/stock_available_to_promise_release/wizards/stock_unrelease.py
--rw-r--r--  2.0 unx     1888 b- defN 24-Feb-06 06:45 odoo/addons/stock_available_to_promise_release/wizards/stock_unrelease_views.xml
--rw-r--r--  2.0 unx     7701 b- defN 24-Feb-06 06:46 odoo14_addon_stock_available_to_promise_release-14.0.3.0.1.dev1.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 24-Feb-06 06:46 odoo14_addon_stock_available_to_promise_release-14.0.3.0.1.dev1.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 24-Feb-06 06:46 odoo14_addon_stock_available_to_promise_release-14.0.3.0.1.dev1.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     6023 b- defN 24-Feb-06 06:46 odoo14_addon_stock_available_to_promise_release-14.0.3.0.1.dev1.dist-info/RECORD
-47 files, 275324 bytes uncompressed, 68202 bytes compressed:  75.2%
+Zip file size: 79584 bytes, number of entries: 48
+-rw-r--r--  2.0 unx     7068 b- defN 24-May-06 15:54 odoo/addons/stock_available_to_promise_release/README.rst
+-rw-r--r--  2.0 unx       43 b- defN 24-May-06 15:54 odoo/addons/stock_available_to_promise_release/__init__.py
+-rw-r--r--  2.0 unx      967 b- defN 24-May-06 15:54 odoo/addons/stock_available_to_promise_release/__manifest__.py
+-rw-r--r--  2.0 unx    29209 b- defN 24-May-06 15:54 odoo/addons/stock_available_to_promise_release/i18n/es_AR.po
+-rw-r--r--  2.0 unx    29061 b- defN 24-May-06 15:54 odoo/addons/stock_available_to_promise_release/i18n/it.po
+-rw-r--r--  2.0 unx    25923 b- defN 24-May-06 15:54 odoo/addons/stock_available_to_promise_release/i18n/stock_available_to_promise_release.pot
+-rw-r--r--  2.0 unx     1096 b- defN 24-May-06 15:54 odoo/addons/stock_available_to_promise_release/migrations/14.0.2.0.0/post-migrate.py
+-rw-r--r--  2.0 unx      428 b- defN 24-May-06 15:54 odoo/addons/stock_available_to_promise_release/migrations/14.0.2.5.0/post-migrate.py
+-rw-r--r--  2.0 unx      265 b- defN 24-May-06 15:54 odoo/addons/stock_available_to_promise_release/models/__init__.py
+-rw-r--r--  2.0 unx     1085 b- defN 24-May-06 15:54 odoo/addons/stock_available_to_promise_release/models/product_product.py
+-rw-r--r--  2.0 unx      805 b- defN 24-May-06 15:54 odoo/addons/stock_available_to_promise_release/models/res_company.py
+-rw-r--r--  2.0 unx      520 b- defN 24-May-06 15:54 odoo/addons/stock_available_to_promise_release/models/res_config_settings.py
+-rw-r--r--  2.0 unx      584 b- defN 24-May-06 15:54 odoo/addons/stock_available_to_promise_release/models/stock_location.py
+-rw-r--r--  2.0 unx      792 b- defN 24-May-06 15:54 odoo/addons/stock_available_to_promise_release/models/stock_location_route.py
+-rw-r--r--  2.0 unx    27367 b- defN 24-May-06 15:54 odoo/addons/stock_available_to_promise_release/models/stock_move.py
+-rw-r--r--  2.0 unx     7668 b- defN 24-May-06 15:54 odoo/addons/stock_available_to_promise_release/models/stock_picking.py
+-rw-r--r--  2.0 unx     3147 b- defN 24-May-06 15:54 odoo/addons/stock_available_to_promise_release/models/stock_picking_type.py
+-rw-r--r--  2.0 unx     2901 b- defN 24-May-06 15:54 odoo/addons/stock_available_to_promise_release/models/stock_rule.py
+-rw-r--r--  2.0 unx      240 b- defN 24-May-06 15:54 odoo/addons/stock_available_to_promise_release/readme/CONFIGURE.rst
+-rw-r--r--  2.0 unx      220 b- defN 24-May-06 15:54 odoo/addons/stock_available_to_promise_release/readme/CONTRIBUTORS.rst
+-rw-r--r--  2.0 unx       80 b- defN 24-May-06 15:54 odoo/addons/stock_available_to_promise_release/readme/CREDITS.rst
+-rw-r--r--  2.0 unx     2257 b- defN 24-May-06 15:54 odoo/addons/stock_available_to_promise_release/readme/DESCRIPTION.rst
+-rw-r--r--  2.0 unx     1435 b- defN 24-May-06 15:54 odoo/addons/stock_available_to_promise_release/readme/USAGE.rst
+-rw-r--r--  2.0 unx      297 b- defN 24-May-06 15:54 odoo/addons/stock_available_to_promise_release/security/ir.model.access.csv
+-rw-r--r--  2.0 unx     9455 b- defN 24-May-06 15:54 odoo/addons/stock_available_to_promise_release/static/description/icon.png
+-rw-r--r--  2.0 unx    17450 b- defN 24-May-06 15:54 odoo/addons/stock_available_to_promise_release/static/description/index.html
+-rw-r--r--  2.0 unx      174 b- defN 24-May-06 15:54 odoo/addons/stock_available_to_promise_release/tests/__init__.py
+-rw-r--r--  2.0 unx     4676 b- defN 24-May-06 15:54 odoo/addons/stock_available_to_promise_release/tests/common.py
+-rw-r--r--  2.0 unx    51410 b- defN 24-May-06 15:54 odoo/addons/stock_available_to_promise_release/tests/test_reservation.py
+-rw-r--r--  2.0 unx     5855 b- defN 24-May-06 15:54 odoo/addons/stock_available_to_promise_release/tests/test_unrelease.py
+-rw-r--r--  2.0 unx     3396 b- defN 24-May-06 15:54 odoo/addons/stock_available_to_promise_release/tests/test_unrelease_2steps.py
+-rw-r--r--  2.0 unx     2862 b- defN 24-May-06 15:54 odoo/addons/stock_available_to_promise_release/tests/test_unrelease_3steps.py
+-rw-r--r--  2.0 unx     2108 b- defN 24-May-06 15:54 odoo/addons/stock_available_to_promise_release/tests/test_unrelease_merged_moves.py
+-rw-r--r--  2.0 unx     1122 b- defN 24-May-06 15:54 odoo/addons/stock_available_to_promise_release/views/product_product_views.xml
+-rw-r--r--  2.0 unx     2787 b- defN 24-May-06 15:54 odoo/addons/stock_available_to_promise_release/views/res_config_settings.xml
+-rw-r--r--  2.0 unx      611 b- defN 24-May-06 15:54 odoo/addons/stock_available_to_promise_release/views/stock_location_route_views.xml
+-rw-r--r--  2.0 unx     4736 b- defN 24-May-06 15:54 odoo/addons/stock_available_to_promise_release/views/stock_move_views.xml
+-rw-r--r--  2.0 unx     1996 b- defN 24-May-06 15:54 odoo/addons/stock_available_to_promise_release/views/stock_picking_type_views.xml
+-rw-r--r--  2.0 unx     6951 b- defN 24-May-06 15:54 odoo/addons/stock_available_to_promise_release/views/stock_picking_views.xml
+-rw-r--r--  2.0 unx       58 b- defN 24-May-06 15:54 odoo/addons/stock_available_to_promise_release/wizards/__init__.py
+-rw-r--r--  2.0 unx      640 b- defN 24-May-06 15:54 odoo/addons/stock_available_to_promise_release/wizards/stock_release.py
+-rw-r--r--  2.0 unx     1856 b- defN 24-May-06 15:54 odoo/addons/stock_available_to_promise_release/wizards/stock_release_views.xml
+-rw-r--r--  2.0 unx      646 b- defN 24-May-06 15:54 odoo/addons/stock_available_to_promise_release/wizards/stock_unrelease.py
+-rw-r--r--  2.0 unx     1888 b- defN 24-May-06 15:54 odoo/addons/stock_available_to_promise_release/wizards/stock_unrelease_views.xml
+-rw-r--r--  2.0 unx     7696 b- defN 24-May-06 15:55 odoo14_addon_stock_available_to_promise_release-14.0.3.1.0.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 24-May-06 15:55 odoo14_addon_stock_available_to_promise_release-14.0.3.1.0.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 24-May-06 15:55 odoo14_addon_stock_available_to_promise_release-14.0.3.1.0.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     6130 b- defN 24-May-06 15:55 odoo14_addon_stock_available_to_promise_release-14.0.3.1.0.dist-info/RECORD
+48 files, 278058 bytes uncompressed, 68980 bytes compressed:  75.2%
```

## zipnote {}

```diff
@@ -30,14 +30,17 @@
 
 Filename: odoo/addons/stock_available_to_promise_release/models/res_company.py
 Comment: 
 
 Filename: odoo/addons/stock_available_to_promise_release/models/res_config_settings.py
 Comment: 
 
+Filename: odoo/addons/stock_available_to_promise_release/models/stock_location.py
+Comment: 
+
 Filename: odoo/addons/stock_available_to_promise_release/models/stock_location_route.py
 Comment: 
 
 Filename: odoo/addons/stock_available_to_promise_release/models/stock_move.py
 Comment: 
 
 Filename: odoo/addons/stock_available_to_promise_release/models/stock_picking.py
@@ -123,20 +126,20 @@
 
 Filename: odoo/addons/stock_available_to_promise_release/wizards/stock_unrelease.py
 Comment: 
 
 Filename: odoo/addons/stock_available_to_promise_release/wizards/stock_unrelease_views.xml
 Comment: 
 
-Filename: odoo14_addon_stock_available_to_promise_release-14.0.3.0.1.dev1.dist-info/METADATA
+Filename: odoo14_addon_stock_available_to_promise_release-14.0.3.1.0.dist-info/METADATA
 Comment: 
 
-Filename: odoo14_addon_stock_available_to_promise_release-14.0.3.0.1.dev1.dist-info/WHEEL
+Filename: odoo14_addon_stock_available_to_promise_release-14.0.3.1.0.dist-info/WHEEL
 Comment: 
 
-Filename: odoo14_addon_stock_available_to_promise_release-14.0.3.0.1.dev1.dist-info/top_level.txt
+Filename: odoo14_addon_stock_available_to_promise_release-14.0.3.1.0.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo14_addon_stock_available_to_promise_release-14.0.3.0.1.dev1.dist-info/RECORD
+Filename: odoo14_addon_stock_available_to_promise_release-14.0.3.1.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/stock_available_to_promise_release/README.rst

```diff
@@ -3,15 +3,15 @@
 ==================================
 
 .. 
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
    !! This file is generated by oca-gen-addon-readme !!
    !! changes will be overwritten.                   !!
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
-   !! source digest: sha256:534172706439fb6cacb255284d389aeca8fe01d563b7a03142412dcb360910f4
+   !! source digest: sha256:20bbea4fdcc02ba9f7991482cbb4053188f7cf07e351b06e6af70df1a91684d8
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
 
 .. |badge1| image:: https://img.shields.io/badge/maturity-Beta-yellow.png
     :target: https://odoo-community.org/page/development-status
     :alt: Beta
 .. |badge2| image:: https://img.shields.io/badge/licence-LGPL--3-blue.png
     :target: http://www.gnu.org/licenses/lgpl-3.0-standalone.html
```

## odoo/addons/stock_available_to_promise_release/__manifest__.py

```diff
@@ -1,13 +1,13 @@
 # Copyright 2019 Camptocamp (https://www.camptocamp.com)
 # License LGPL-3.0 or later (http://www.gnu.org/licenses/lgpl.html)
 
 {
     "name": "Stock Available to Promise Release",
-    "version": "14.0.3.0.0",
+    "version": "14.0.3.1.0",
     "summary": "Release Operations based on available to promise",
     "author": "Camptocamp, BCIM, Odoo Community Association (OCA)",
     "website": "https://github.com/OCA/wms",
     "category": "Stock Management",
     "depends": ["stock"],
     "data": [
         "security/ir.model.access.csv",
```

## odoo/addons/stock_available_to_promise_release/i18n/stock_available_to_promise_release.pot

```diff
@@ -10,14 +10,31 @@
 "Language-Team: \n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: \n"
 "Plural-Forms: \n"
 
 #. module: stock_available_to_promise_release
+#: code:addons/stock_available_to_promise_release/models/stock_move.py:0
+#, python-format
+msgid ""
+"\n"
+"- Origin picking(s):\n"
+"\t -%(picking_names)s."
+msgstr ""
+
+#. module: stock_available_to_promise_release
+#: code:addons/stock_available_to_promise_release/models/stock_move.py:0
+#, python-format
+msgid ""
+"\n"
+"- Picking: %(picking_name)s."
+msgstr ""
+
+#. module: stock_available_to_promise_release
 #: model:ir.model.fields,field_description:stock_available_to_promise_release.field_stock_picking__release_ready_count
 msgid "# of moves ready"
 msgstr ""
 
 #. module: stock_available_to_promise_release
 #: model:ir.model.fields,field_description:stock_available_to_promise_release.field_stock_picking__need_release_count
 msgid "# of need release moves"
@@ -126,14 +143,15 @@
 msgstr ""
 
 #. module: stock_available_to_promise_release
 #: model:ir.model.fields,field_description:stock_available_to_promise_release.field_procurement_group__display_name
 #: model:ir.model.fields,field_description:stock_available_to_promise_release.field_product_product__display_name
 #: model:ir.model.fields,field_description:stock_available_to_promise_release.field_res_company__display_name
 #: model:ir.model.fields,field_description:stock_available_to_promise_release.field_res_config_settings__display_name
+#: model:ir.model.fields,field_description:stock_available_to_promise_release.field_stock_location__display_name
 #: model:ir.model.fields,field_description:stock_available_to_promise_release.field_stock_location_route__display_name
 #: model:ir.model.fields,field_description:stock_available_to_promise_release.field_stock_move__display_name
 #: model:ir.model.fields,field_description:stock_available_to_promise_release.field_stock_picking__display_name
 #: model:ir.model.fields,field_description:stock_available_to_promise_release.field_stock_picking_type__display_name
 #: model:ir.model.fields,field_description:stock_available_to_promise_release.field_stock_release__display_name
 #: model:ir.model.fields,field_description:stock_available_to_promise_release.field_stock_rule__display_name
 #: model:ir.model.fields,field_description:stock_available_to_promise_release.field_stock_unrelease__display_name
@@ -149,36 +167,46 @@
 msgstr ""
 
 #. module: stock_available_to_promise_release
 #: model:ir.model.fields,field_description:stock_available_to_promise_release.field_procurement_group__id
 #: model:ir.model.fields,field_description:stock_available_to_promise_release.field_product_product__id
 #: model:ir.model.fields,field_description:stock_available_to_promise_release.field_res_company__id
 #: model:ir.model.fields,field_description:stock_available_to_promise_release.field_res_config_settings__id
+#: model:ir.model.fields,field_description:stock_available_to_promise_release.field_stock_location__id
 #: model:ir.model.fields,field_description:stock_available_to_promise_release.field_stock_location_route__id
 #: model:ir.model.fields,field_description:stock_available_to_promise_release.field_stock_move__id
 #: model:ir.model.fields,field_description:stock_available_to_promise_release.field_stock_picking__id
 #: model:ir.model.fields,field_description:stock_available_to_promise_release.field_stock_picking_type__id
 #: model:ir.model.fields,field_description:stock_available_to_promise_release.field_stock_release__id
 #: model:ir.model.fields,field_description:stock_available_to_promise_release.field_stock_rule__id
 #: model:ir.model.fields,field_description:stock_available_to_promise_release.field_stock_unrelease__id
 msgid "ID"
 msgstr ""
 
 #. module: stock_available_to_promise_release
-#: model:ir.model.fields,help:stock_available_to_promise_release.field_stock_picking_type__unrelease_on_backorder
+#: model:ir.model.fields,help:stock_available_to_promise_release.field_stock_picking_type__prevent_new_move_after_release
 msgid ""
-"If checked, when a backorder is created the moves into the backorder are "
-"unreleased if they come from a route configured to manually release moves"
+"If checked, once a delivery picking has been released, no more moves will be"
+" added to it. For example, if you add lines in the origin sales order, the "
+"new moves will be added to a new delivery."
 msgstr ""
 
 #. module: stock_available_to_promise_release
-#: model:ir.model.fields,help:stock_available_to_promise_release.field_stock_picking_type__prevent_new_move_after_release
+#: model:ir.model.fields,help:stock_available_to_promise_release.field_stock_picking_type__unrelease_on_backorder
 msgid ""
-"If checked, when a picking is released it's no more possible to assign new "
-"moves to it."
+"If checked, when a backorder is created (i.e. at the validation of the "
+"delivery), the moves into the backorder are unreleased as long as they came "
+"from a route configured to manually release moves. This means that the moves"
+" that were not delivered are put back in need for release and the "
+"unprocessed internal pulled moves are canceled."
+msgstr ""
+
+#. module: stock_available_to_promise_release
+#: model:ir.model,name:stock_available_to_promise_release.model_stock_location
+msgid "Inventory Locations"
 msgstr ""
 
 #. module: stock_available_to_promise_release
 #: model:ir.model,name:stock_available_to_promise_release.model_stock_location_route
 msgid "Inventory Routes"
 msgstr ""
 
@@ -188,14 +216,15 @@
 msgstr ""
 
 #. module: stock_available_to_promise_release
 #: model:ir.model.fields,field_description:stock_available_to_promise_release.field_procurement_group____last_update
 #: model:ir.model.fields,field_description:stock_available_to_promise_release.field_product_product____last_update
 #: model:ir.model.fields,field_description:stock_available_to_promise_release.field_res_company____last_update
 #: model:ir.model.fields,field_description:stock_available_to_promise_release.field_res_config_settings____last_update
+#: model:ir.model.fields,field_description:stock_available_to_promise_release.field_stock_location____last_update
 #: model:ir.model.fields,field_description:stock_available_to_promise_release.field_stock_location_route____last_update
 #: model:ir.model.fields,field_description:stock_available_to_promise_release.field_stock_move____last_update
 #: model:ir.model.fields,field_description:stock_available_to_promise_release.field_stock_picking____last_update
 #: model:ir.model.fields,field_description:stock_available_to_promise_release.field_stock_picking_type____last_update
 #: model:ir.model.fields,field_description:stock_available_to_promise_release.field_stock_release____last_update
 #: model:ir.model.fields,field_description:stock_available_to_promise_release.field_stock_rule____last_update
 #: model:ir.model.fields,field_description:stock_available_to_promise_release.field_stock_unrelease____last_update
```

## odoo/addons/stock_available_to_promise_release/models/__init__.py

```diff
@@ -2,7 +2,8 @@
 from . import stock_move
 from . import stock_location_route
 from . import stock_picking
 from . import stock_picking_type
 from . import stock_rule
 from . import res_company
 from . import res_config_settings
+from . import stock_location
```

## odoo/addons/stock_available_to_promise_release/models/stock_move.py

```diff
@@ -112,20 +112,31 @@
             )
             <= 0
         )
 
     def _check_unrelease_allowed(self):
         for move in self:
             if not move.unrelease_allowed:
-                raise UserError(
-                    _(
-                        "You are not allowed to unrelease this move %(move_name)s.",
-                        move_name=move.display_name,
+                message = _(
+                    "You are not allowed to unrelease this move %(move_name)s.",
+                    move_name=move.display_name,
+                )
+                if move.picking_id:
+                    message += _(
+                        "\n- Picking: %(picking_name)s.",
+                        picking_name=move.picking_id.name,
                     )
-                )
+                if move.move_orig_ids and move.move_orig_ids.picking_id:
+                    message += _(
+                        "\n- Origin picking(s):\n\t -%(picking_names)s.",
+                        picking_names="\n\t- ".join(
+                            move.move_orig_ids.picking_id.mapped("name")
+                        ),
+                    )
+                raise UserError(message)
 
     def _previous_promised_qty_sql_main_query(self):
         return """
             SELECT move.id,
                    COALESCE(SUM(previous_moves.previous_qty), 0.0)
             FROM stock_move move
             LEFT JOIN LATERAL (
@@ -317,21 +328,15 @@
             for move in self:
                 res[move] = {
                     "ordered_available_to_promise_uom_qty": 0,
                     "ordered_available_to_promise_qty": 0,
                 }
             return res
 
-        location_domain = [
-            (
-                "location_id.parent_path",
-                "=like",
-                warehouse.view_location_id.parent_path + "%",
-            )
-        ]
+        location_domain = warehouse.view_location_id._get_available_to_promise_domain()
         domain_quant = expression.AND(
             [[("product_id", "in", self.product_id.ids)], location_domain]
         )
         location_quants = self.env["stock.quant"].read_group(
             domain_quant, ["product_id", "quantity"], ["product_id"], orderby="id"
         )
         quants_available = {
```

## odoo/addons/stock_available_to_promise_release/models/stock_picking.py

```diff
@@ -184,11 +184,11 @@
         if backorders_to_unrelease:
             backorders_to_unrelease.unrelease()
         return backorders
 
     def unrelease(self, safe_unrelease=False):
         """Unrelease the moves of the picking.
 
-        If safe_unrelease is True, the unreleasaable moves for which the
+        If safe_unrelease is True, the unreleasable moves for which the
         processing has already started will be ignored
         """
         self.mapped("move_lines").unrelease(safe_unrelease=safe_unrelease)
```

## odoo/addons/stock_available_to_promise_release/models/stock_picking_type.py

```diff
@@ -6,22 +6,25 @@
 
 class StockPickingType(models.Model):
     _inherit = "stock.picking.type"
 
     count_picking_need_release = fields.Integer(compute="_compute_picking_count")
     unrelease_on_backorder = fields.Boolean(
         string="Unrelease on backorder",
-        help="If checked, when a backorder is created the moves into the "
-        "backorder are unreleased if they come from a route configured "
-        "to manually release moves",
+        help="If checked, when a backorder is created (i.e. at the validation of "
+        "the delivery), the moves into the backorder are unreleased as long as "
+        "they came from a route configured to manually release moves. This means "
+        "that the moves that were not delivered are put back in need for release "
+        "and the unprocessed internal pulled moves are canceled.",
     )
     prevent_new_move_after_release = fields.Boolean(
         string="Prevent new move after release",
-        help="If checked, when a picking is released it's no more possible to "
-        "assign new moves to it.",
+        help="If checked, once a delivery picking has been released, no more "
+        "moves will be added to it. For example, if you add lines in the origin "
+        "sales order, the new moves will be added to a new delivery.",
     )
 
     def _compute_picking_count_need_release_domains(self):
         return {
             "count_picking_waiting": [
                 ("state", "in", ("confirmed", "waiting")),
                 ("need_release", "=", False),
```

## odoo/addons/stock_available_to_promise_release/static/description/index.html

```diff
@@ -362,15 +362,15 @@
 <div class="document" id="stock-available-to-promise-release">
 <h1 class="title">Stock Available to Promise Release</h1>
 
 <!-- !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
 !! This file is generated by oca-gen-addon-readme !!
 !! changes will be overwritten.                   !!
 !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
-!! source digest: sha256:534172706439fb6cacb255284d389aeca8fe01d563b7a03142412dcb360910f4
+!! source digest: sha256:20bbea4fdcc02ba9f7991482cbb4053188f7cf07e351b06e6af70df1a91684d8
 !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! -->
 <p><a class="reference external image-reference" href="https://odoo-community.org/page/development-status"><img alt="Beta" src="https://img.shields.io/badge/maturity-Beta-yellow.png" /></a> <a class="reference external image-reference" href="http://www.gnu.org/licenses/lgpl-3.0-standalone.html"><img alt="License: LGPL-3" src="https://img.shields.io/badge/licence-LGPL--3-blue.png" /></a> <a class="reference external image-reference" href="https://github.com/OCA/wms/tree/14.0/stock_available_to_promise_release"><img alt="OCA/wms" src="https://img.shields.io/badge/github-OCA%2Fwms-lightgray.png?logo=github" /></a> <a class="reference external image-reference" href="https://translation.odoo-community.org/projects/wms-14-0/wms-14-0-stock_available_to_promise_release"><img alt="Translate me on Weblate" src="https://img.shields.io/badge/weblate-Translate%20me-F47D42.png" /></a> <a class="reference external image-reference" href="https://runboat.odoo-community.org/builds?repo=OCA/wms&amp;target_branch=14.0"><img alt="Try me on Runboat" src="https://img.shields.io/badge/runboat-Try%20me-875A7B.png" /></a></p>
 <p>Currently the reservation is performed by adding reserved quantities on quants,
 which is fine as long as the reservation is made right after the order
 confirmation. This way, the first arrived, first served principle is always
 applied. But if you release warehouse operations in a chosen order (through
 deliver round for example), then you need to be sure the reservations are made
```

## odoo/addons/stock_available_to_promise_release/tests/common.py

```diff
@@ -1,14 +1,15 @@
 # Copyright 2019 Camptocamp (https://www.camptocamp.com)
 # License LGPL-3.0 or later (http://www.gnu.org/licenses/lgpl.html).
 
 from odoo import fields
-from odoo.tests import common
+from odoo.tests import common, tagged
 
 
+@tagged("post_install", "-at_install")
 class PromiseReleaseCommonCase(common.SavepointCase):
     @classmethod
     def setUpClass(cls):
         super().setUpClass()
         cls.env = cls.env(context=dict(cls.env.context, tracking_disable=True))
         cls.wh = cls.env["stock.warehouse"].create(
             {
```

## odoo/addons/stock_available_to_promise_release/views/stock_picking_type_views.xml

### odoo/addons/stock_available_to_promise_release/views/stock_picking_type_views.xml

```diff
@@ -17,15 +17,15 @@
             <field name="count_picking_need_release"/>
           </div>
         </div>
       </xpath>
     </field>
   </record>
   <record id="stock_picking_type_form" model="ir.ui.view">
-    <field name="name">stock.picking.type.kanban</field>
+    <field name="name">stock.picking.type.form</field>
     <field name="model">stock.picking.type</field>
     <field name="inherit_id" ref="stock.view_picking_type_form"/>
     <field name="arch" type="xml">
       <xpath expr="//group[@groups='stock.group_stock_multi_locations']" position="after">
         <group name="release" string="Chained moves release process">
           <field name="unrelease_on_backorder" attrs="{&quot;invisible&quot;: [(&quot;code&quot;, &quot;!=&quot;, &quot;outgoing&quot;)]}"/>
           <field name="prevent_new_move_after_release"/>
```

## Comparing `odoo14_addon_stock_available_to_promise_release-14.0.3.0.1.dev1.dist-info/METADATA` & `odoo14_addon_stock_available_to_promise_release-14.0.3.1.0.dist-info/METADATA`

 * *Files 2% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: odoo14-addon-stock-available-to-promise-release
-Version: 14.0.3.0.1.dev1
+Version: 14.0.3.1.0
 Summary: Release Operations based on available to promise
 Home-page: https://github.com/OCA/wms
 Author: Camptocamp, BCIM, Odoo Community Association (OCA)
 Author-email: support@odoo-community.org
 License: LGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
@@ -20,15 +20,15 @@
 ==================================
 
 .. 
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
    !! This file is generated by oca-gen-addon-readme !!
    !! changes will be overwritten.                   !!
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
-   !! source digest: sha256:534172706439fb6cacb255284d389aeca8fe01d563b7a03142412dcb360910f4
+   !! source digest: sha256:20bbea4fdcc02ba9f7991482cbb4053188f7cf07e351b06e6af70df1a91684d8
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
 
 .. |badge1| image:: https://img.shields.io/badge/maturity-Beta-yellow.png
     :target: https://odoo-community.org/page/development-status
     :alt: Beta
 .. |badge2| image:: https://img.shields.io/badge/licence-LGPL--3-blue.png
     :target: http://www.gnu.org/licenses/lgpl-3.0-standalone.html
```

## Comparing `odoo14_addon_stock_available_to_promise_release-14.0.3.0.1.dev1.dist-info/RECORD` & `odoo14_addon_stock_available_to_promise_release-14.0.3.1.0.dist-info/RECORD`

 * *Files 4% similar despite different names*

```diff
@@ -1,47 +1,48 @@
-odoo/addons/stock_available_to_promise_release/README.rst,sha256=WtFpMSlZlOtmWx50Ow6f0P4WTluHj3rgw9ngpBUKsEM,7068
+odoo/addons/stock_available_to_promise_release/README.rst,sha256=fN9YAkdGEFZiokNVJYJNBPv-IvNqEOFEZEEG-Tnyxug,7068
 odoo/addons/stock_available_to_promise_release/__init__.py,sha256=0XNpxETgFdVxFDEw03O8oL3NtTSk3we-HEZW2sPKzIU,43
-odoo/addons/stock_available_to_promise_release/__manifest__.py,sha256=SWwTaBKflrEttqCfMTjZebAZXcYqWC-tJuMnYLwzU-w,967
+odoo/addons/stock_available_to_promise_release/__manifest__.py,sha256=n6g8pOwtU9EQjfcgOlBzt48ED8vmHAkyR4dR0yRkxsI,967
 odoo/addons/stock_available_to_promise_release/i18n/es_AR.po,sha256=so0YJmWc3-RBxptO2PmTYK892PABgF90eADtEla30qs,29209
 odoo/addons/stock_available_to_promise_release/i18n/it.po,sha256=LM_Ec3ynYvmkKdE5K2g21WWeccxjrwZWyl_1TZ8P_oE,29061
-odoo/addons/stock_available_to_promise_release/i18n/stock_available_to_promise_release.pot,sha256=YrdVH_UkbFF4Zd_OZpQjIdk1XnGB_7pD2SFkclLn-WU,24718
+odoo/addons/stock_available_to_promise_release/i18n/stock_available_to_promise_release.pot,sha256=_VaWcXPHlr-0bED1NKF4VEPUWywfCPfCBQLsZ57uuIE,25923
 odoo/addons/stock_available_to_promise_release/migrations/14.0.2.0.0/post-migrate.py,sha256=aHzEfYQPSa4W1IdFAkddgZH-lHfoAW_Yw39ZuC_i0i8,1096
 odoo/addons/stock_available_to_promise_release/migrations/14.0.2.5.0/post-migrate.py,sha256=7nAp07z05qx9UDz7CEIquRXIWZ-IpwZCl56t0J-S1QQ,428
-odoo/addons/stock_available_to_promise_release/models/__init__.py,sha256=uqJY4EIj4uSpHAIzXgd7sHs0cXs9lPGZk_Cvo6OWW2A,236
+odoo/addons/stock_available_to_promise_release/models/__init__.py,sha256=-s21y9wuhWx9XTXggheSbRVUKAZgI4AGZtINZEwPuI4,265
 odoo/addons/stock_available_to_promise_release/models/product_product.py,sha256=bijVQAUrQijedgKjy8uNi-nIAUCYRE-S0hnVfewRkFQ,1085
 odoo/addons/stock_available_to_promise_release/models/res_company.py,sha256=dI7V3bVwGflDOf6VR6EEjKHxS2ocQEeei_Fflz6tDBQ,805
 odoo/addons/stock_available_to_promise_release/models/res_config_settings.py,sha256=9eJIIqr5fwIoVJs4sc6kZaPO8pbjRkI3mjsJXbPFv_g,520
+odoo/addons/stock_available_to_promise_release/models/stock_location.py,sha256=EP8PskejYwnnLpl5lzPtn-8TG49DMz3ETMGzZsUxl14,584
 odoo/addons/stock_available_to_promise_release/models/stock_location_route.py,sha256=0QeZvhXfxqAPir5VFWjKYOGAgnkNwaIemgi5GRCkKn0,792
-odoo/addons/stock_available_to_promise_release/models/stock_move.py,sha256=fVJudg8eodPLpsZPuU9p7V92jFhcDTa2EAa6Yry81nQ,26926
-odoo/addons/stock_available_to_promise_release/models/stock_picking.py,sha256=O8mV3jL8bNuSrgEoUFhGkGedyXGVVwKKiqxzqzpgnE8,7669
-odoo/addons/stock_available_to_promise_release/models/stock_picking_type.py,sha256=FIR7udaqQ12uGQEotbhOF-kME8gyn5M-I7y5_JxNBX4,2818
+odoo/addons/stock_available_to_promise_release/models/stock_move.py,sha256=0nJlH3tFQbUWR45WojtgHNFN9YwGorQxXo8FdC0KtLk,27367
+odoo/addons/stock_available_to_promise_release/models/stock_picking.py,sha256=rOPBFbPgqoWaLvsn0Thgu9HCoqqClQA3mZ9DxGl8IXo,7668
+odoo/addons/stock_available_to_promise_release/models/stock_picking_type.py,sha256=F_AsQl4dWGwb2QiQE9kmp-rpT44rH8KcTe0rUdV2OWY,3147
 odoo/addons/stock_available_to_promise_release/models/stock_rule.py,sha256=le7OPXOA4qKV08F2mUb0BzsxDSrEGHfoa8sBEQU1QTo,2901
 odoo/addons/stock_available_to_promise_release/readme/CONFIGURE.rst,sha256=mHbRKM4EEAoatUNuyYJ05Hmv1qCXvpblFJuanrCuNvQ,240
 odoo/addons/stock_available_to_promise_release/readme/CONTRIBUTORS.rst,sha256=Twumo9shetCt0CaTEa5h2ebgkVk6RwkSiWw-FDDBDSc,220
 odoo/addons/stock_available_to_promise_release/readme/CREDITS.rst,sha256=qJic0c2qWDTloupuq6j69JdIEo70Xpy6-b4MZho00Og,80
 odoo/addons/stock_available_to_promise_release/readme/DESCRIPTION.rst,sha256=KDVC8EyvHbBI0J0NYRZySuvgMdhX-CetKnGD3LKMjUg,2257
 odoo/addons/stock_available_to_promise_release/readme/USAGE.rst,sha256=X0GVvslcQfQqXJZzsO04eoJFrNfFNvtA9qwTEiBpd8U,1435
 odoo/addons/stock_available_to_promise_release/security/ir.model.access.csv,sha256=KAldr7h33qGLg6Pkc9r6g_jIx1JWCZErF0O7vp8LU_Y,297
 odoo/addons/stock_available_to_promise_release/static/description/icon.png,sha256=6xBPJauaFOF0KDHfHgQopSc28kKvxMaeoQFQWZtfZDo,9455
-odoo/addons/stock_available_to_promise_release/static/description/index.html,sha256=OQ5JJ2oVoOD2mdUoCwkkPWAEgln8g6FXo25IGQDwHxc,17450
+odoo/addons/stock_available_to_promise_release/static/description/index.html,sha256=vYf2brkYSTNQvbCvs_WqIiS-rCmZiBznoKfUSPwojnc,17450
 odoo/addons/stock_available_to_promise_release/tests/__init__.py,sha256=hmVMoCt_AFhIZEY8ljHe1591DKObD4csAfKddsoeomA,174
-odoo/addons/stock_available_to_promise_release/tests/common.py,sha256=8XwZlL1Ziab4TkZZXaHZQUMU2gZi56GqXlTszPvyhtM,4629
+odoo/addons/stock_available_to_promise_release/tests/common.py,sha256=mE5g1-ISQeFeihyWs_sxE1K3OJ6AV-RuuNbvVCPFisk,4676
 odoo/addons/stock_available_to_promise_release/tests/test_reservation.py,sha256=hrhyEKu14UOwvquFhAiwAKTvViWiojO1P26ZE2dzzWo,51410
 odoo/addons/stock_available_to_promise_release/tests/test_unrelease.py,sha256=jVzrwCVyuSWB_LuPwcsmK0PZ26SgcpEQTda4f0fcGIo,5855
 odoo/addons/stock_available_to_promise_release/tests/test_unrelease_2steps.py,sha256=9gybWl8DcP9pwfrChZxlryROMTQwfZlfDUh-XdtdCoA,3396
 odoo/addons/stock_available_to_promise_release/tests/test_unrelease_3steps.py,sha256=gWFyPYcsc3OjOOVXI-4ekvR-wqt_i8VzD-zInwbNGLs,2862
 odoo/addons/stock_available_to_promise_release/tests/test_unrelease_merged_moves.py,sha256=oc3UMrHOUTU20idNZhKIZTUwyoP-MOTynoaBpJq-f-U,2108
 odoo/addons/stock_available_to_promise_release/views/product_product_views.xml,sha256=kVHGepbyB5kBrCLKufZf4L4Dp_JycobC3j1Wk6WiWPI,1122
 odoo/addons/stock_available_to_promise_release/views/res_config_settings.xml,sha256=W6y5nUMGtquYMwRdw53Gy3hzOcb7Nt7PBvHrONDYwsA,2787
 odoo/addons/stock_available_to_promise_release/views/stock_location_route_views.xml,sha256=X81u6joQ8Zh9dgOyrQylkaMHHXwGHkvcauoYtpBAEiI,611
 odoo/addons/stock_available_to_promise_release/views/stock_move_views.xml,sha256=_m0vsE904QBKd4s_P9QNXYSVHMccW0iZxyNz7v1FErg,4736
-odoo/addons/stock_available_to_promise_release/views/stock_picking_type_views.xml,sha256=MTPJk0vbXNYJr59f6ZnLaQcjIeg84It9dHbHKaNo31A,1998
+odoo/addons/stock_available_to_promise_release/views/stock_picking_type_views.xml,sha256=NbHXFbwmnnN4LmjlQlBvh5mc1ZH4615-XXCzBvFPTPA,1996
 odoo/addons/stock_available_to_promise_release/views/stock_picking_views.xml,sha256=Shf3o-FbteoR9_M6wyvx4bJy_dzpCkoOMFiDn73pWCo,6951
 odoo/addons/stock_available_to_promise_release/wizards/__init__.py,sha256=wu2Gdq1bgromFuK-i0Ezz8K6GZw7GnYKYKfeD8ceV08,58
 odoo/addons/stock_available_to_promise_release/wizards/stock_release.py,sha256=uhWdd747jF1Omr74NBUQhge4JyAiMvrQJvMO-sSyWfs,640
 odoo/addons/stock_available_to_promise_release/wizards/stock_release_views.xml,sha256=viqqxc488JH0RzkI4i3kjX9IatCwOUDE8-iqbrBZWss,1856
 odoo/addons/stock_available_to_promise_release/wizards/stock_unrelease.py,sha256=TV15Vid4NET7q0skXC8DZPM4tH9kV2jShWi5HrF5BXg,646
 odoo/addons/stock_available_to_promise_release/wizards/stock_unrelease_views.xml,sha256=e6nJ3dPibK6GLQfsWal-nWHqtTAGI-XXf33L0hZRlPA,1888
-odoo14_addon_stock_available_to_promise_release-14.0.3.0.1.dev1.dist-info/METADATA,sha256=sTx9qNDzrymfnKFBsv4rYya2KFJ9ujMV65QNTAN_HF8,7701
-odoo14_addon_stock_available_to_promise_release-14.0.3.0.1.dev1.dist-info/WHEEL,sha256=oiQVh_5PnQM0E3gPdiz09WCNmwiHDMaGer_elqB3coM,92
-odoo14_addon_stock_available_to_promise_release-14.0.3.0.1.dev1.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo14_addon_stock_available_to_promise_release-14.0.3.0.1.dev1.dist-info/RECORD,,
+odoo14_addon_stock_available_to_promise_release-14.0.3.1.0.dist-info/METADATA,sha256=8Jb_mBur_bCYlmjI2DxntTV7JEvxygrDH01ftN6o7XY,7696
+odoo14_addon_stock_available_to_promise_release-14.0.3.1.0.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
+odoo14_addon_stock_available_to_promise_release-14.0.3.1.0.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo14_addon_stock_available_to_promise_release-14.0.3.1.0.dist-info/RECORD,,
```

