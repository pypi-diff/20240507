# Comparing `tmp/ip_check-1.5.9-py3-none-any.whl.zip` & `tmp/ip_check-1.6.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,32 +1,32 @@
-Zip file size: 38794 bytes, number of entries: 30
+Zip file size: 38829 bytes, number of entries: 30
 -rw-rw-r--  2.0 unx      383 b- defN 24-Mar-19 08:00 ipcheck/__init__.py
 -rw-rw-r--  2.0 unx     6208 b- defN 24-Apr-11 01:20 ipcheck/geoinfo.py
--rw-rw-r--  2.0 unx    10949 b- defN 24-Apr-12 06:40 ipcheck/main.py
+-rw-rw-r--  2.0 unx    10913 b- defN 24-May-07 01:46 ipcheck/main.py
 -rw-rw-r--  2.0 unx        0 b- defN 24-Mar-14 08:04 ipcheck/app/__init__.py
 -rw-rw-r--  2.0 unx      726 b- defN 24-Mar-14 08:04 ipcheck/app/base_config.py
 -rw-rw-r--  2.0 unx      462 b- defN 24-Apr-11 06:34 ipcheck/app/common_config.py
 -rw-rw-r--  2.0 unx     6182 b- defN 24-Apr-12 06:34 ipcheck/app/config.py
 -rw-rw-r--  2.0 unx     1773 b- defN 24-Mar-19 08:00 ipcheck/app/default_config.py
 -rw-rw-r--  2.0 unx     2193 b- defN 24-Apr-11 01:20 ipcheck/app/gen_ip_utils.py
 -rw-rw-r--  2.0 unx     2078 b- defN 24-Apr-11 06:34 ipcheck/app/ip_info.py
 -rw-rw-r--  2.0 unx     2546 b- defN 24-Mar-14 08:04 ipcheck/app/rtt_test.py
 -rw-rw-r--  2.0 unx      223 b- defN 24-Mar-14 08:04 ipcheck/app/rtt_test_config.py
 -rw-rw-r--  2.0 unx     5656 b- defN 24-Apr-09 08:53 ipcheck/app/speed_test.py
 -rw-rw-r--  2.0 unx      223 b- defN 24-Mar-14 08:04 ipcheck/app/speed_test_config.py
--rw-rw-r--  2.0 unx     3149 b- defN 24-Apr-11 01:20 ipcheck/app/utils.py
+-rw-rw-r--  2.0 unx     3350 b- defN 24-May-07 01:52 ipcheck/app/utils.py
 -rw-rw-r--  2.0 unx     3765 b- defN 24-Apr-11 01:20 ipcheck/app/valid_test.py
 -rw-rw-r--  2.0 unx      362 b- defN 24-Apr-09 08:53 ipcheck/app/valid_test_config.py
 -rw-rw-r--  2.0 unx        0 b- defN 24-Apr-09 08:53 ipcheck/app/ipparser/__init__.py
 -rw-rw-r--  2.0 unx     1058 b- defN 24-Apr-12 07:35 ipcheck/app/ipparser/base_parser.py
 -rw-rw-r--  2.0 unx      673 b- defN 24-Apr-11 01:20 ipcheck/app/ipparser/ip_cidr_parser.py
 -rw-rw-r--  2.0 unx      835 b- defN 24-Apr-11 01:20 ipcheck/app/ipparser/ip_dir_parser.py
 -rw-rw-r--  2.0 unx     1138 b- defN 24-Apr-12 07:02 ipcheck/app/ipparser/ip_file_parser.py
 -rw-rw-r--  2.0 unx      526 b- defN 24-Apr-11 01:20 ipcheck/app/ipparser/ip_parser.py
--rw-rw-r--  2.0 unx     1407 b- defN 24-Apr-12 07:34 ipcheck/app/ipparser/ip_port_parser.py
--rw-rw-r--  2.0 unx    35148 b- defN 24-Apr-12 07:49 ip_check-1.5.9.dist-info/LICENSE
--rw-rw-r--  2.0 unx     6361 b- defN 24-Apr-12 07:49 ip_check-1.5.9.dist-info/METADATA
--rw-rw-r--  2.0 unx       92 b- defN 24-Apr-12 07:49 ip_check-1.5.9.dist-info/WHEEL
--rw-r--r--  2.0 unx      201 b- defN 24-Apr-12 07:49 ip_check-1.5.9.dist-info/entry_points.txt
--rw-r--r--  2.0 unx        8 b- defN 24-Apr-12 07:49 ip_check-1.5.9.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     2508 b- defN 24-Apr-12 07:49 ip_check-1.5.9.dist-info/RECORD
-30 files, 96833 bytes uncompressed, 34750 bytes compressed:  64.1%
+-rw-rw-r--  2.0 unx     1370 b- defN 24-May-07 01:52 ipcheck/app/ipparser/ip_port_parser.py
+-rw-rw-r--  2.0 unx    35148 b- defN 24-May-07 01:58 ip_check-1.6.0.dist-info/LICENSE
+-rw-rw-r--  2.0 unx     6361 b- defN 24-May-07 01:58 ip_check-1.6.0.dist-info/METADATA
+-rw-rw-r--  2.0 unx       92 b- defN 24-May-07 01:58 ip_check-1.6.0.dist-info/WHEEL
+-rw-r--r--  2.0 unx      201 b- defN 24-May-07 01:58 ip_check-1.6.0.dist-info/entry_points.txt
+-rw-r--r--  2.0 unx        8 b- defN 24-May-07 01:58 ip_check-1.6.0.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     2508 b- defN 24-May-07 01:58 ip_check-1.6.0.dist-info/RECORD
+30 files, 96961 bytes uncompressed, 34785 bytes compressed:  64.1%
```

## zipnote {}

```diff
@@ -66,26 +66,26 @@
 
 Filename: ipcheck/app/ipparser/ip_parser.py
 Comment: 
 
 Filename: ipcheck/app/ipparser/ip_port_parser.py
 Comment: 
 
-Filename: ip_check-1.5.9.dist-info/LICENSE
+Filename: ip_check-1.6.0.dist-info/LICENSE
 Comment: 
 
-Filename: ip_check-1.5.9.dist-info/METADATA
+Filename: ip_check-1.6.0.dist-info/METADATA
 Comment: 
 
-Filename: ip_check-1.5.9.dist-info/WHEEL
+Filename: ip_check-1.6.0.dist-info/WHEEL
 Comment: 
 
-Filename: ip_check-1.5.9.dist-info/entry_points.txt
+Filename: ip_check-1.6.0.dist-info/entry_points.txt
 Comment: 
 
-Filename: ip_check-1.5.9.dist-info/top_level.txt
+Filename: ip_check-1.6.0.dist-info/top_level.txt
 Comment: 
 
-Filename: ip_check-1.5.9.dist-info/RECORD
+Filename: ip_check-1.6.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## ipcheck/main.py

```diff
@@ -11,41 +11,38 @@
 from ipcheck.app.ip_info import IpInfo
 import argparse
 from ipcheck.app.gen_ip_utils import gen_ip_list_by_arg
 from ipcheck.app.valid_test import ValidTest
 from ipcheck.app.rtt_test import RttTest
 from ipcheck.app.speed_test import SpeedTest
 from typing import List
-from ipcheck.app.utils import is_ip_address, is_ip_network, gen_time_desc, write_file
+from ipcheck.app.utils import is_ip_address, is_ip_network, gen_time_desc, write_file, parse_list, parse_port
 
 
 # 注册全局退出监听
 def signal_handler(sig, frame):
     print('You pressed Ctrl+C!')
     os._exit(0)
 
 signal.signal(signal.SIGINT, signal_handler)
 
-def parse_list(input_str):
-    return input_str.split(',')
-
 def check_or_gen_def_config(def_cfg_path):
     if not os.path.exists(def_cfg_path):
         print('警告: 配置文件不存在，正在生成默认配置... ...')
         from ipcheck.app.default_config import DEFAULT_CONFIG
         write_file(DEFAULT_CONFIG, def_cfg_path)
         print('配置文件已生成位于 {}'.format(def_cfg_path))
 
 # 从手动参数中覆盖默认config
 def load_config():
     parser = argparse.ArgumentParser(description='ip-check 参数')
     parser.add_argument("-w", "--white_list", type=parse_list, default=None, help='偏好ip参数, 格式为: "expr1,expr2", 如"8,9" 会筛选8和9开头的ip')
     parser.add_argument("-b", "--block_list", type=parse_list, default=None, help='屏蔽ip参数, 格式为: "expr1,expr2", 如"8,9" 会过滤8和9开头的ip')
     parser.add_argument("-pl", "--prefer_locs", type=parse_list, default=None, help='偏好国家地区选择, 格式为: "expr1,expr2", 如"hongkong,japan" 会筛选HongKong 和Japan 地区的ip')
-    parser.add_argument("-pp", "--prefer_ports", type=parse_list, default=None, help='针对ip:port 格式的测试源筛选端口, 格式为: "expr1,expr2", 如"443,8443" 会筛选出443 和8443 端口的ip')
+    parser.add_argument("-pp", "--prefer_ports", type=parse_port, default=None, help='针对ip:port 格式的测试源筛选端口, 格式为: "expr1,expr2", 如"443,8443" 会筛选出443 和8443 端口的ip')
     parser.add_argument("-lv", "--max_vt_ip_count", type=int, default=0, help="最大用来检测有效(valid) ip数量限制,0表示使用config.ini中的配置")
     parser.add_argument("-lr", "--max_rt_ip_count", type=int, default=0, help="最大用来检测rtt ip数量限制,0表示使用config.ini中的配置")
     parser.add_argument("-ls", "--max_st_ip_count", type=int, default=0, help="最大用来检测下载(speed) 速度的ip数量限制,0表示使用config.ini中的配置")
     parser.add_argument("-p", "--port", type=int, default=0, help="用来检测的端口")
     parser.add_argument("-H", "--host", type=str, default=None, help="可用性域名")
     parser.add_argument("-dr", "--disable_rt", action="store_true", default=False, help="是否禁用RTT 测试")
     parser.add_argument("-dv", "--disable_vt", action="store_true", default=False, help="是否禁用可用性测试")
```

## ipcheck/app/utils.py

```diff
@@ -34,14 +34,22 @@
 def is_valid_port(port_str):
     try:
         port = int(port_str)
         return 0 < port <= 65535
     except ValueError:
         return False
 
+def parse_list(input_str):
+    return input_str.split(',')
+
+def parse_port(input_str: str):
+    lst = parse_list(input_str)
+    res = [int(port) for port in lst if is_valid_port(port)]
+    return res
+
 def find_txt_in_dir(dir):
     L = []
     if os.path.isdir(dir):
         for f in os.listdir(dir):
             file = os.path.join(dir, f)
             if os.path.isfile(file) and file.endswith('.txt'):
                 L.append(file)
```

## ipcheck/app/ipparser/ip_port_parser.py

```diff
@@ -34,17 +34,16 @@
 
     def parse(self) -> List[IpInfo]:
         ip_list = []
         if self.is_valid:
             ip_list.append(IpInfo(self.ip, self.port))
         return ip_list
 
-        # IpPortParser use only
+    # IpPortParser use only
     def extra_check(self) -> bool:
-        port_str = str(self.port)
         res = False
         prefer_ports = Config().prefer_ports
         if prefer_ports:
-            res = port_str in prefer_ports
+            res = self.port in prefer_ports
         else:
             res = True
         return res
```

## Comparing `ip_check-1.5.9.dist-info/LICENSE` & `ip_check-1.6.0.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `ip_check-1.5.9.dist-info/METADATA` & `ip_check-1.6.0.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: ip-check
-Version: 1.5.9
+Version: 1.6.0
 Summary: Powerful cdn network speed test utils.
 Author: nobitaqaq
 Author-email: xiaoleigs@gmail.com
 Keywords: cdn,speed test,network speed
 Requires-Python: >=3.8
 Description-Content-Type: text/markdown
 License-File: LICENSE
```

## Comparing `ip_check-1.5.9.dist-info/RECORD` & `ip_check-1.6.0.dist-info/RECORD`

 * *Files 12% similar despite different names*

```diff
@@ -1,30 +1,30 @@
 ipcheck/__init__.py,sha256=mjRHWAo73u50fxwseCRsTdvj9pPNZuTmsKW8Qpj-cNk,383
 ipcheck/geoinfo.py,sha256=SF6jmsKEMj7MMqfPn70LoJvqm4wy8SC0bpcSZuWfcfo,6208
-ipcheck/main.py,sha256=FVjG0MpUJKCt8QxHsq9Qkfr1XPodv0NkN3UDB2k9KFQ,10949
+ipcheck/main.py,sha256=3nDuBLiZSn6NBdlV21d20m7YgUlhQGChAFngQRltNkQ,10913
 ipcheck/app/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 ipcheck/app/base_config.py,sha256=PxNW4PXHagvULNc9FgDwMtu7aCn91RYx2SqBYd4-nd4,726
 ipcheck/app/common_config.py,sha256=mCaZ6Hc46WQZFuaWSf2wY8s6ux0V7e7nPyomrp0jW6k,462
 ipcheck/app/config.py,sha256=lKVVqljrGmG7z5T_iq0zEtaZLee-dSJzRnLo85kAHhI,6182
 ipcheck/app/default_config.py,sha256=7OP6pibA78-xkmVGZ4kLsmWzV8fKRff8bCXd9sceFPU,1773
 ipcheck/app/gen_ip_utils.py,sha256=OSDu-OIwydyBrBn3bcH7CyDo0q1b_wMEdGQvWmBVmCc,2193
 ipcheck/app/ip_info.py,sha256=AzAUCV_wY8lgQOAce10AT8NtLPAnFxWr3-IcS5oWXo4,2078
 ipcheck/app/rtt_test.py,sha256=d1_iC3OFeqBAFqqHBdRN_IH5jlRgtd5USn0vV0_CM8M,2546
 ipcheck/app/rtt_test_config.py,sha256=PK7M7uLst4Zi3v2DgKA8rfpZsXIRnwfTxYa12bPDeb8,223
 ipcheck/app/speed_test.py,sha256=LKolSAPbkIkDrfJyW5fVHlMzWuGXaPOckat6S8kqebY,5656
 ipcheck/app/speed_test_config.py,sha256=Ji1jUEqSjAIqkzUzeE1BBHPfoJ2E-JeG36DJiHJ3CYA,223
-ipcheck/app/utils.py,sha256=xXc_6aCN4-lRZ5fUOc4g6cmy3_E1jWhwTWp_X8z625I,3149
+ipcheck/app/utils.py,sha256=ExFjmLywBzUXu3SBttL_d4-oYf4uWzjWn2fsdmSbJvE,3350
 ipcheck/app/valid_test.py,sha256=BIrC1P8_B1fATRzueWRRaQPWFmuFcPT_uDXOEfLuJzs,3765
 ipcheck/app/valid_test_config.py,sha256=akRLXfL1XAFVwIQKvszMRj9TfdI1oQkob3HUEr_grvQ,362
 ipcheck/app/ipparser/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 ipcheck/app/ipparser/base_parser.py,sha256=kIbAKAPV9fE6g2cHj9HQAgDhGPQ6nbE5kGdYLa9Y_1Y,1058
 ipcheck/app/ipparser/ip_cidr_parser.py,sha256=N1z0YycVvizUBRpuvvgQ5YjPv5VPA3npQZfEOawGTzE,673
 ipcheck/app/ipparser/ip_dir_parser.py,sha256=KZnmBh5JArVVuumb9WoIt-iYp6LAYeqbOmmFVUFaop8,835
 ipcheck/app/ipparser/ip_file_parser.py,sha256=HFt7gPZz5miGtX5TGoT5GuJTOagdSCA5TJuNeiV60Xg,1138
 ipcheck/app/ipparser/ip_parser.py,sha256=gE5mLxEMzoEkMKn9n_QIalIrkGCbw9tm9XdKbOtnZWs,526
-ipcheck/app/ipparser/ip_port_parser.py,sha256=zn-W0-Cueb18O2d3-gW0M9B36Xm4XHk1xrcdL2dcfa4,1407
-ip_check-1.5.9.dist-info/LICENSE,sha256=ixuiBLtpoK3iv89l7ylKkg9rs2GzF9ukPH7ynZYzK5s,35148
-ip_check-1.5.9.dist-info/METADATA,sha256=Xikd4GQgkf96eBTkHFlUmEn89Js2yoHu5cUXweDgaM4,6361
-ip_check-1.5.9.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
-ip_check-1.5.9.dist-info/entry_points.txt,sha256=LbstGY5z6sejWLCwyd9pTq4qRdfCsligLhJHjwp-Pd0,201
-ip_check-1.5.9.dist-info/top_level.txt,sha256=24binHFMOV_-4WIWZrtgRz4y7uY3vUxlJBq2UXMMfvY,8
-ip_check-1.5.9.dist-info/RECORD,,
+ipcheck/app/ipparser/ip_port_parser.py,sha256=y29ReVN7APo5ohHXKYnKQYvjtHqUrj81wEREvwYGP8M,1370
+ip_check-1.6.0.dist-info/LICENSE,sha256=ixuiBLtpoK3iv89l7ylKkg9rs2GzF9ukPH7ynZYzK5s,35148
+ip_check-1.6.0.dist-info/METADATA,sha256=MoJynzWQxaWvtnIClZTTSy8BUxLwItvDwmGj8wOGwAg,6361
+ip_check-1.6.0.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
+ip_check-1.6.0.dist-info/entry_points.txt,sha256=LbstGY5z6sejWLCwyd9pTq4qRdfCsligLhJHjwp-Pd0,201
+ip_check-1.6.0.dist-info/top_level.txt,sha256=24binHFMOV_-4WIWZrtgRz4y7uY3vUxlJBq2UXMMfvY,8
+ip_check-1.6.0.dist-info/RECORD,,
```

