# Comparing `tmp/everai-0.1.43-py3-none-any.whl.zip` & `tmp/everai-0.1.44-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,18 +1,18 @@
-Zip file size: 436125 bytes, number of entries: 419
+Zip file size: 436208 bytes, number of entries: 419
 -rw-r--r--  2.0 unx       66 b- defN 24-Apr-24 07:43 everai/__init__.py
 -rw-r--r--  2.0 unx     1214 b- defN 24-Apr-28 08:33 everai/constants.py
--rw-r--r--  2.0 unx       23 b- defN 24-May-06 13:42 everai/version.py
+-rw-r--r--  2.0 unx       23 b- defN 24-May-06 13:57 everai/version.py
 -rw-r--r--  2.0 unx       40 b- defN 24-Mar-15 10:09 everai/api/__init__.py
 -rw-r--r--  2.0 unx    15087 b- defN 24-May-06 13:23 everai/api/api.py
 -rw-r--r--  2.0 unx      208 b- defN 24-Apr-15 11:24 everai/app/__init__.py
 -rw-r--r--  2.0 unx     3696 b- defN 24-May-06 11:08 everai/app/app.py
--rw-r--r--  2.0 unx    12226 b- defN 24-May-06 13:42 everai/app/app_manager.py
+-rw-r--r--  2.0 unx    12389 b- defN 24-May-06 13:56 everai/app/app_manager.py
 -rw-r--r--  2.0 unx     1791 b- defN 24-Apr-24 07:37 everai/app/app_runner.py
--rw-r--r--  2.0 unx     3223 b- defN 24-Apr-24 05:08 everai/app/app_runtime.py
+-rw-r--r--  2.0 unx     3486 b- defN 24-May-06 13:55 everai/app/app_runtime.py
 -rw-r--r--  2.0 unx     2568 b- defN 24-Apr-23 14:51 everai/app/app_setup.py
 -rw-r--r--  2.0 unx     1116 b- defN 24-Apr-24 04:14 everai/app/autocaling_handler.py
 -rw-r--r--  2.0 unx     2320 b- defN 24-Apr-23 14:26 everai/app/context.py
 -rw-r--r--  2.0 unx     3004 b- defN 24-Apr-28 08:38 everai/app/service.py
 -rw-r--r--  2.0 unx      210 b- defN 24-Mar-28 12:25 everai/app/typing.py
 -rw-r--r--  2.0 unx      327 b- defN 24-Mar-12 08:39 everai/app/volume_request.py
 -rw-r--r--  2.0 unx      310 b- defN 24-Apr-23 15:52 everai/autoscaling/__init__.py
@@ -408,14 +408,14 @@
 -rw-r--r--  2.0 unx     1912 b- defN 24-Mar-28 14:39 generated/volumes/test/test_volume_service_commit_file_body_file.py
 -rw-r--r--  2.0 unx     2548 b- defN 24-Mar-28 14:39 generated/volumes/test/test_volume_service_commit_revision_body.py
 -rw-r--r--  2.0 unx     2233 b- defN 24-Mar-28 14:39 generated/volumes/test/test_volume_service_complete_multipart_upload_body.py
 -rw-r--r--  2.0 unx     1624 b- defN 24-Mar-28 14:39 generated/volumes/test/test_volume_service_create_body.py
 -rw-r--r--  2.0 unx     2149 b- defN 24-Mar-28 14:39 generated/volumes/test/test_volume_service_initialize_multipart_upload_body.py
 -rw-r--r--  2.0 unx     1769 b- defN 24-Mar-28 14:39 generated/volumes/test/test_volume_service_sign_multipart_upload_body.py
 -rw-r--r--  2.0 unx     1968 b- defN 24-Mar-28 14:39 generated/volumes/test/test_volume_service_sign_upload_body.py
--rw-r--r--  2.0 unx        0 b- defN 24-May-06 13:42 everai-0.1.43.dist-info/LICENSE
--rw-r--r--  2.0 unx     1951 b- defN 24-May-06 13:42 everai-0.1.43.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 24-May-06 13:42 everai-0.1.43.dist-info/WHEEL
--rw-r--r--  2.0 unx       98 b- defN 24-May-06 13:42 everai-0.1.43.dist-info/entry_points.txt
--rw-r--r--  2.0 unx       17 b- defN 24-May-06 13:42 everai-0.1.43.dist-info/top_level.txt
--rw-rw-r--  2.0 unx    41888 b- defN 24-May-06 13:42 everai-0.1.43.dist-info/RECORD
-419 files, 1351041 bytes uncompressed, 367895 bytes compressed:  72.8%
+-rw-r--r--  2.0 unx        0 b- defN 24-May-06 13:57 everai-0.1.44.dist-info/LICENSE
+-rw-r--r--  2.0 unx     1951 b- defN 24-May-06 13:57 everai-0.1.44.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 24-May-06 13:57 everai-0.1.44.dist-info/WHEEL
+-rw-r--r--  2.0 unx       98 b- defN 24-May-06 13:57 everai-0.1.44.dist-info/entry_points.txt
+-rw-r--r--  2.0 unx       17 b- defN 24-May-06 13:57 everai-0.1.44.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx    41888 b- defN 24-May-06 13:57 everai-0.1.44.dist-info/RECORD
+419 files, 1351467 bytes uncompressed, 367978 bytes compressed:  72.8%
```

## zipnote {}

```diff
@@ -1233,26 +1233,26 @@
 
 Filename: generated/volumes/test/test_volume_service_sign_multipart_upload_body.py
 Comment: 
 
 Filename: generated/volumes/test/test_volume_service_sign_upload_body.py
 Comment: 
 
-Filename: everai-0.1.43.dist-info/LICENSE
+Filename: everai-0.1.44.dist-info/LICENSE
 Comment: 
 
-Filename: everai-0.1.43.dist-info/METADATA
+Filename: everai-0.1.44.dist-info/METADATA
 Comment: 
 
-Filename: everai-0.1.43.dist-info/WHEEL
+Filename: everai-0.1.44.dist-info/WHEEL
 Comment: 
 
-Filename: everai-0.1.43.dist-info/entry_points.txt
+Filename: everai-0.1.44.dist-info/entry_points.txt
 Comment: 
 
-Filename: everai-0.1.43.dist-info/top_level.txt
+Filename: everai-0.1.44.dist-info/top_level.txt
 Comment: 
 
-Filename: everai-0.1.43.dist-info/RECORD
+Filename: everai-0.1.44.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## everai/version.py

```diff
@@ -1 +1 @@
-__version__ = "0.1.43"
+__version__ = "0.1.44"
```

## everai/app/app_manager.py

```diff
@@ -1,8 +1,8 @@
-import os
+import _thread
 import typing
 
 import deprecation
 
 from everai import constants
 from everai.api.api import ValueFromSecret
 from everai.app import VolumeRequest
@@ -187,24 +187,28 @@
         app.runtime = runtime
         return app, runtime
 
     def prepare(self,
                 app: typing.Optional[App] = None,
                 is_prepare_mode: bool = True,
                 *args, **kwargs):
-        app, runtime = self.prepare_secrets_configmaps(app)
+        try:
+            app, runtime = self.prepare_secrets_configmaps(app)
 
-        runtime.is_prepare_mode = is_prepare_mode
-        self.prepare_volumes(app, runtime)
+            runtime.is_prepare_mode = is_prepare_mode
+            self.prepare_volumes(app, runtime)
 
-        app.do_prepare()
-        print('prepare finished')
-        if len(app.service.routes) > 0 and not is_prepare_mode:
-            self._running = True
-            runtime.start_update()
+            app.do_prepare()
+            print('prepare finished')
+            if len(app.service.routes) > 0 and not is_prepare_mode:
+                self._running = True
+                runtime.start_update()
+        except Exception as e:
+            print(f'prepare got error ${e}')
+            _thread.interrupt_main()
 
     def delete(self, app_name: str) -> None:
         self.api.delete_app(app_name)
 
     def list(self) -> typing.List[App]:
         return [App.from_proto(app) for app in self.api.list_apps()]
```

## everai/app/app_runtime.py

```diff
@@ -33,14 +33,22 @@
     #         cls.instance = super(AppRuntime, cls).__new__(cls, *args, **kwargs)
     #     return cls.instance
 
     def __init__(self):
         self._lock = threading.Lock()
         self.tl = Timeloop()
         self._update_running = False
+
+        self.secrets = {}
+        self.configmaps = {}
+        self.volumes = {}
+        self.volume_manager = VolumeManager()
+        self.secret_manager = SecretManager()
+        self.configmap_manager = ConfigMapManager()
+        self.is_prepare_mode = False
         print('AppRuntime construct')
         tl.job(interval=datetime.timedelta(seconds=30))(self._update_routine)
 
     def context(self) -> Context:
         return Context(secrets=self.secrets,
                        configmaps=self.configmaps,
                        volumes=self.volumes,
```

## Comparing `everai-0.1.43.dist-info/METADATA` & `everai-0.1.44.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: everai
-Version: 0.1.43
+Version: 0.1.44
 Summary: Client library to manage everai infrastructure
 Author-email: mc <mc@expvent.com>
 Maintainer-email: mc <mc@expvent.com>
 Project-URL: Homepage, https://everai.expvent.com
 Project-URL: Documentation, https://everai.expvent.com
 Project-URL: Repository, https://github.com/expvent/everai
 Project-URL: Issues, https://github.com/expvent/everai/issues
```

## Comparing `everai-0.1.43.dist-info/RECORD` & `everai-0.1.44.dist-info/RECORD`

 * *Files 1% similar despite different names*

```diff
@@ -1,17 +1,17 @@
 everai/__init__.py,sha256=AbgR3tVRy6TETgwXyJITEnET1TSFpEAEqQJJqzReYqQ,66
 everai/constants.py,sha256=6tvPKHYvL1H5ippD2YkwCerLhKftIiOg-SVtFLtVYN4,1214
-everai/version.py,sha256=PwEipAcIgfEks4UpVgOERoR8Az-FCfCGocVnb0rkncM,23
+everai/version.py,sha256=AoJtnEXXv6E20uj57ChQUsGoLfKG8mvSQpdz97tcyis,23
 everai/api/__init__.py,sha256=2WLrQ_PpJ35__yOVHC89MhILujyGioyaGir-5n6hxCc,40
 everai/api/api.py,sha256=9xem34hxwiTxQfS_japWMHPxC-Oby5pEwHbEQ1A8LYQ,15087
 everai/app/__init__.py,sha256=A-USWcj6TDAW_hxG6wT3Qb8m3d5Tq733WWC9McNhlGI,208
 everai/app/app.py,sha256=tj9UcYX_0HLggUq0F_OSLnoit49ZW7NAJVEI65K_Jeo,3696
-everai/app/app_manager.py,sha256=rXRf5kqw98Pvinxafew7OeE9SX17B0C_tlZQ3QMPohA,12226
+everai/app/app_manager.py,sha256=-ZLsk8-Ln2NUyipyvxMRH9EgkHLy9KBw56GH68wtEuI,12389
 everai/app/app_runner.py,sha256=HVlOLweFX-C2kBbgyVwuDz4vfGzQ6uzHpNVzikQhRfA,1791
-everai/app/app_runtime.py,sha256=zyj63A6VfM1P3WL7LVW_mcy9xmMwKueKzTcJduGMwSo,3223
+everai/app/app_runtime.py,sha256=2wFrZLtfNgG6uPR5LP4ID6XlNTOOu0Cy7nHT0wbvWlQ,3486
 everai/app/app_setup.py,sha256=CLXAC83OyTqEjAEKNLHQaCT3UPhvw149mD1VQr-AEEg,2568
 everai/app/autocaling_handler.py,sha256=Exsdti0N16GlcqXIILJ1qa6_DN9cBwzWpahukDKiqEo,1116
 everai/app/context.py,sha256=BIZ0FOozDTVCZg-cWMUnpf9DEjKF2r5T1MRF8yWreG4,2320
 everai/app/service.py,sha256=vlyKTK0PBAMPvL06AbDKFedHA9hyxaCLVU-b-6RGYj0,3004
 everai/app/typing.py,sha256=d7tPA7VoDY771u-v0DLwD6TTMfPotg8u_PAshDcHRQo,210
 everai/app/volume_request.py,sha256=BjyGnehuqDxXVqdc1Xq0CL0GMT-r2IExe2bmyCMVXSU,327
 everai/autoscaling/__init__.py,sha256=7KlzpxRDIFkIdEoh5Rjw32rhCGtbIqv_oN_JSHajqFY,310
@@ -407,13 +407,13 @@
 generated/volumes/test/test_volume_service_commit_file_body_file.py,sha256=F4jWVTlpo82x5j68w3hYpaHvaUZhCiFrmBSo1SVZOu0,1912
 generated/volumes/test/test_volume_service_commit_revision_body.py,sha256=UizO6O0rY4b9isgc_d2lKBUwTlCn0kiefccAD86nCcs,2548
 generated/volumes/test/test_volume_service_complete_multipart_upload_body.py,sha256=Ek6ZP78kDn1ol-guEmhm2zA42c_6XkArQf8G-_L5MgI,2233
 generated/volumes/test/test_volume_service_create_body.py,sha256=2MA4PEVNwPpMGuvpwMu4qeYvDAjrZjyUaeuo9p3qJ1c,1624
 generated/volumes/test/test_volume_service_initialize_multipart_upload_body.py,sha256=G58739S9489bMEXfaefcWch_GqgV-PTw4QCewOzxhSs,2149
 generated/volumes/test/test_volume_service_sign_multipart_upload_body.py,sha256=3b5ULrWgH38nEWU0s_MISEyj4j6LV8doFAx3CfQ6XjY,1769
 generated/volumes/test/test_volume_service_sign_upload_body.py,sha256=xX2B1LCvIu0OHX0AkyL8dXPClBTDgmZwmgPJOjjz96g,1968
-everai-0.1.43.dist-info/LICENSE,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-everai-0.1.43.dist-info/METADATA,sha256=oRLBh8xec4Sg-EA4AYWi7Re7QTL5RfC3W6jsoOn-JVA,1951
-everai-0.1.43.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
-everai-0.1.43.dist-info/entry_points.txt,sha256=JB8rwg4N4ctezo4f9O0QbWJkivM_s-wUhOn0mPM9xug,98
-everai-0.1.43.dist-info/top_level.txt,sha256=UNE90t4nA-FVpeYLiqPcJVSFyaKbZ-ERHUNI0Qd6co8,17
-everai-0.1.43.dist-info/RECORD,,
+everai-0.1.44.dist-info/LICENSE,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
+everai-0.1.44.dist-info/METADATA,sha256=0CvZZncnkt88pvdznxnyGSp5C-YJDsIemcO1IKTphRU,1951
+everai-0.1.44.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
+everai-0.1.44.dist-info/entry_points.txt,sha256=JB8rwg4N4ctezo4f9O0QbWJkivM_s-wUhOn0mPM9xug,98
+everai-0.1.44.dist-info/top_level.txt,sha256=UNE90t4nA-FVpeYLiqPcJVSFyaKbZ-ERHUNI0Qd6co8,17
+everai-0.1.44.dist-info/RECORD,,
```

