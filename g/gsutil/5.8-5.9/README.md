# Comparing `tmp/gsutil-5.8.tar.gz` & `tmp/gsutil-5.9.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "gsutil-5.8.tar", last modified: Mon Mar  7 20:41:08 2022, max compression
+gzip compressed data, was "dist/gsutil-5.9.tar", last modified: Thu Apr  7 15:58:49 2022, max compression
```

## Comparing `gsutil-5.8.tar` & `gsutil-5.9.tar`

### file list

```diff
@@ -1,1364 +1,1364 @@
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.944944 gsutil-5.8/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)   112175 2022-03-07 20:29:28.000000 gsutil-5.8/CHANGES.md
--rw-r-----   0 dpednekar (760847) primarygroup (89939)       33 2022-03-07 20:40:15.000000 gsutil-5.8/CHECKSUM
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      130 2022-03-07 20:24:16.000000 gsutil-5.8/CONTRIBUTING.md
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    11358 2022-03-07 20:24:16.000000 gsutil-5.8/LICENSE
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      422 2022-03-07 20:24:16.000000 gsutil-5.8/MANIFEST.in
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1567 2022-03-07 20:41:08.944944 gsutil-5.8/PKG-INFO
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1063 2022-03-07 20:24:16.000000 gsutil-5.8/README.md
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        4 2022-03-07 20:40:15.000000 gsutil-5.8/VERSION
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.944944 gsutil-5.8/gslib/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)       33 2022-03-07 20:41:08.944944 gsutil-5.8/gslib/CHECKSUM
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      378 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/README
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        3 2022-03-07 20:41:08.944944 gsutil-5.8/gslib/VERSION
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     6454 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    34238 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/__main__.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.848945 gsutil-5.8/gslib/addlhelp/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      797 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/addlhelp/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     9876 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/addlhelp/acls.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     7896 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/addlhelp/command_opts.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     6474 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/addlhelp/crc32c.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     9108 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/addlhelp/creds.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     6337 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/addlhelp/dev.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     8535 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/addlhelp/encoding.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3831 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/addlhelp/metadata.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     9040 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/addlhelp/naming.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     8311 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/addlhelp/prod.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    11465 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/addlhelp/security.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4597 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/addlhelp/support.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4056 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/addlhelp/versions.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     9354 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/addlhelp/wildcards.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    25283 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/boto_resumable_upload.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    87221 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/boto_translation.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3990 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/bucket_listing_ref.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    41796 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/cloud_api.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    30667 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/cloud_api_delegator.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)   110962 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/command.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4451 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/command_argument.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    23760 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/command_runner.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.852944 gsutil-5.8/gslib/commands/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      797 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/commands/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    21641 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/commands/acl.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     7145 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/commands/autoclass.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     8437 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/commands/bucketpolicyonly.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     5093 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/commands/cat.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     6210 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/commands/compose.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    60563 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/commands/config.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     7979 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/commands/cors.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    58823 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/commands/cp.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    12720 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/commands/defacl.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     6966 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/commands/defstorageclass.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    10043 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/commands/du.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     8596 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/commands/hash.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     9401 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/commands/help.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    13792 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/commands/hmac.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    27794 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/commands/iam.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    19073 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/commands/kms.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    14951 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/commands/label.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     7543 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/commands/lifecycle.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    10956 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/commands/logging.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    27305 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/commands/ls.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    15098 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/commands/mb.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     6215 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/commands/mv.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    32959 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/commands/notification.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     7728 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/commands/pap.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    95372 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/commands/perfdiag.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     5558 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/commands/rb.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     6877 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/commands/requesterpays.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    25883 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/commands/retention.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    25521 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/commands/rewrite.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    16429 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/commands/rm.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     7419 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/commands/rpo.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    78163 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/commands/rsync.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    14809 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/commands/setmeta.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    25530 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/commands/signurl.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     6441 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/commands/stat.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    28960 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/commands/test.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     8314 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/commands/ubla.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     7115 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/commands/version.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     6801 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/commands/versioning.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     8322 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/commands/web.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     8318 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/context_config.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1108 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/cred_types.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3390 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/cs_api_map.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    14732 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/daisy_chain_wrapper.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.852944 gsutil-5.8/gslib/data/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)   235626 2022-03-07 20:35:48.000000 gsutil-5.8/gslib/data/cacerts.txt
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1734 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/devshell_auth_plugin.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1323 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/discard_messages_queue.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     5301 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/exception.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3475 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/file_part.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)   105959 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/gcs_json_api.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    17382 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/gcs_json_credentials.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    29180 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/gcs_json_media.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4358 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/help_provider.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    11838 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/iamcredentials_api.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2566 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/impersonation_credentials.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    13558 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/kms_api.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2311 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/lazy_wrapper.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    39799 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/metrics.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4724 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/metrics_reporter.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1471 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/metrics_tuple.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    29353 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/name_expansion.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1217 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/no_op_auth_plugin.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1059 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/no_op_credentials.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    12431 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/parallel_tracker_file.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4504 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/plurality_checkable_iterator.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     6225 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/progress_callback.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1728 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/project_id.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    11440 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/pubsub_api.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     8730 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/resumable_streaming_upload.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     5236 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/seek_ahead_thread.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     5772 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/sig_handling.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2070 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/storage_uri_builder.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    15637 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/storage_url.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    11032 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tab_complete.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.860944 gsutil-5.8/gslib/tests/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      808 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     8163 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/mock_cloud_api.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1308 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/mock_logging_handler.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2867 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/rewrite_helper.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     5833 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/signurl_signatures.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     8950 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_Doption.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    33748 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_acl.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     6599 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_autoclass.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     5382 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_boto_util.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     5102 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_bucketconfig.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3870 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_bucketpolicyonly.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     7072 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_cat.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2051 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_cloud_api_delegator.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3484 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_command.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    21157 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_command_runner.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    13501 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_compose.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    17143 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_context_config.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    36977 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_copy_helper_funcs.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4445 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_copy_objects_iterator.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    12120 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_cors.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)   207670 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_cp.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     8852 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_creds_config.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    14471 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_daisy_chain_wrapper.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.860944 gsutil-5.8/gslib/tests/test_data/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     5692 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_data/favicon.ico.gz
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      810 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_data/test.gif
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1917 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_data/test.json
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     9436 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_data/test.mp3
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2549 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_data/test.p12
--rw-r-----   0 dpednekar (760847) primarygroup (89939)   524288 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_data/test.txt
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      330 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_data/test_external_account_credentials.json
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     9224 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_defacl.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     5106 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_defstorageclass.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    10634 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_du.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4732 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_encryption_helper.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3974 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_execution_util.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3461 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_file_part.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2969 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_gcs_json_api.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     7842 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_gcs_json_credentials.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     7623 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_gcs_json_media.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2806 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_gsutil.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     5887 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_hash.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    11039 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_hashing_helper.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3589 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_help.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    14032 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_hmac.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    57448 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_iam.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    11229 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_kms.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    10743 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_label.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    10868 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_lifecycle.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3157 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_logging.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    52440 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_ls.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    15382 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_mb.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    52450 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_metrics.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2061 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_mtls.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     8490 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_mv.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    61874 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_naming.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     6042 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_notification.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     5155 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_notification_pubsub.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     5773 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_pap.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    10391 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_parallel_cp.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    33791 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_parallelism_framework.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    12919 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_perfdiag.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     7717 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_plurality_checkable_iterator.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     6017 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_psc.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2814 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_rb.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    11879 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_requester_pays.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    12656 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_resumable_streaming.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    28651 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_retention.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     5772 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_retention_util.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    32105 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_rewrite.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    34177 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_rm.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     8007 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_rpo.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)   138975 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_rsync.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3457 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_rsync_funcs.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     9002 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_seek_ahead_thread.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    11311 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_setmeta.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    46569 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_shim_util.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    21323 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_signurl.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    11659 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_stat.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     5909 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_stet_cp.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     7560 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_stet_util.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4491 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_storage_url.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    14512 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_tabcomplete.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1581 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_temporary_file_util.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1798 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_trace.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    10140 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_tracker_file.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3975 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_ubla.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    69057 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_ui.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    10615 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_update.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     5680 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_user_agent_helper.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    20251 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_util.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3697 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_versioning.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3538 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_web.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    21560 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_wildcard_iterator.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4593 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/test_wrapped_credentials.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.860944 gsutil-5.8/gslib/tests/testcase/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1047 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/testcase/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     9861 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/testcase/base.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    56155 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/testcase/integration_testcase.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    17333 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/testcase/unit_testcase.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    24310 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tests/util.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.860944 gsutil-5.8/gslib/third_party/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/third_party/__init__.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.860944 gsutil-5.8/gslib/third_party/iamcredentials_apitools/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/third_party/iamcredentials_apitools/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     7653 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/third_party/iamcredentials_apitools/iamcredentials_v1_client.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    10709 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/third_party/iamcredentials_apitools/iamcredentials_v1_messages.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.860944 gsutil-5.8/gslib/third_party/kms_apitools/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/third_party/kms_apitools/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    33482 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/third_party/kms_apitools/cloudkms_v1_client.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    38336 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/third_party/kms_apitools/cloudkms_v1_messages.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2072 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/third_party/kms_apitools/resources.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.860944 gsutil-5.8/gslib/third_party/pubsub_apitools/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/third_party/pubsub_apitools/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    31918 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/third_party/pubsub_apitools/pubsub_v1_client.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    31928 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/third_party/pubsub_apitools/pubsub_v1_messages.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.860944 gsutil-5.8/gslib/third_party/storage_apitools/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/third_party/storage_apitools/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1210 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/third_party/storage_apitools/credentials_lib.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    62198 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/third_party/storage_apitools/storage_v1_client.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)   128554 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/third_party/storage_apitools/storage_v1_messages.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    14039 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/thread_message.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    24810 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tracker_file.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2254 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/tz_utc.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    48563 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/ui_controller.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.864944 gsutil-5.8/gslib/utils/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/utils/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    12791 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/utils/acl_helper.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1457 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/utils/arg_helper.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    25783 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/utils/boto_util.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     6095 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/utils/cat_helper.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4060 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/utils/cloud_api_helper.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4947 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/utils/constants.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)   182082 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/utils/copy_helper.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     7169 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/utils/encryption_helper.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1845 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/utils/execution_util.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    18760 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/utils/hashing_helper.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    10393 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/utils/iam_helper.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    18324 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/utils/ls_helper.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4510 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/utils/metadata_util.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    16093 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/utils/parallelism_framework_util.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    18831 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/utils/posix_util.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    10723 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/utils/retention_util.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3189 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/utils/retry_util.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1885 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/utils/rsync_util.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    20284 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/utils/shim_util.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     5288 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/utils/signurl_helper.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3925 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/utils/stet_util.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    10009 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/utils/system_util.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1253 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/utils/temporary_file_util.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    13303 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/utils/text_util.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    38833 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/utils/translation_helper.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     7914 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/utils/unit_util.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     5002 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/utils/update_util.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2468 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/utils/user_agent_helper.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2260 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/utils/version_check.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     5768 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/utils/wrapped_credentials.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.864944 gsutil-5.8/gslib/vendored/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/vendored/__init__.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.864944 gsutil-5.8/gslib/vendored/boto/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1452 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/.travis.yml
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3233 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/CONTRIBUTING
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1007 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/LICENSE
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      343 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/MANIFEST.in
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     6517 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/README.rst
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.868944 gsutil-5.8/gslib/vendored/boto/boto/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    41904 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    42140 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/auth.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2064 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/auth_handler.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.868944 gsutil-5.8/gslib/vendored/boto/boto/awslambda/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1753 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/awslambda/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1411 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/awslambda/exceptions.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    21546 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/awslambda/layer1.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.868944 gsutil-5.8/gslib/vendored/boto/boto/beanstalk/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1727 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/beanstalk/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2131 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/beanstalk/exception.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    56366 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/beanstalk/layer1.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    28051 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/beanstalk/response.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1078 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/beanstalk/wrapper.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.868944 gsutil-5.8/gslib/vendored/boto/boto/cacerts/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1097 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/cacerts/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)   268839 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/cacerts/cacerts.txt
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.868944 gsutil-5.8/gslib/vendored/boto/boto/cloudformation/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2185 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/cloudformation/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    42922 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/cloudformation/connection.py
--rwxr-x---   0 dpednekar (760847) primarygroup (89939)    14230 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/cloudformation/stack.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1686 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/cloudformation/template.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.868944 gsutil-5.8/gslib/vendored/boto/boto/cloudfront/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    15176 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/cloudfront/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    31285 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/cloudfront/distribution.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1205 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/cloudfront/exception.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4483 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/cloudfront/identity.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     8106 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/cloudfront/invalidation.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1557 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/cloudfront/logging.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1798 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/cloudfront/object.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     6060 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/cloudfront/origin.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2074 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/cloudfront/signers.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.868944 gsutil-5.8/gslib/vendored/boto/boto/cloudhsm/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1726 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/cloudhsm/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1347 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/cloudhsm/exceptions.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    16187 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/cloudhsm/layer1.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.868944 gsutil-5.8/gslib/vendored/boto/boto/cloudsearch/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1750 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/cloudsearch/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     9780 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/cloudsearch/document.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    15607 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/cloudsearch/domain.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    34141 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/cloudsearch/layer1.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3010 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/cloudsearch/layer2.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     8711 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/cloudsearch/optionstatus.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    13775 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/cloudsearch/search.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3156 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/cloudsearch/sourceattribute.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.872944 gsutil-5.8/gslib/vendored/boto/boto/cloudsearch2/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1743 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/cloudsearch2/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    11630 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/cloudsearch2/document.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    21247 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/cloudsearch2/domain.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      818 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/cloudsearch2/exceptions.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    32565 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/cloudsearch2/layer1.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3814 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/cloudsearch2/layer2.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     8121 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/cloudsearch2/optionstatus.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    16222 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/cloudsearch2/search.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.872944 gsutil-5.8/gslib/vendored/boto/boto/cloudsearchdomain/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1832 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/cloudsearchdomain/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1276 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/cloudsearchdomain/exceptions.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    29110 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/cloudsearchdomain/layer1.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.872944 gsutil-5.8/gslib/vendored/boto/boto/cloudtrail/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1744 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/cloudtrail/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2246 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/cloudtrail/exceptions.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    17002 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/cloudtrail/layer1.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.872944 gsutil-5.8/gslib/vendored/boto/boto/codedeploy/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1743 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/codedeploy/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4103 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/codedeploy/exceptions.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    40600 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/codedeploy/layer1.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.872944 gsutil-5.8/gslib/vendored/boto/boto/cognito/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1123 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/cognito/__init__.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.872944 gsutil-5.8/gslib/vendored/boto/boto/cognito/identity/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1820 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/cognito/identity/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1125 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/cognito/identity/exceptions.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    24701 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/cognito/identity/layer1.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.872944 gsutil-5.8/gslib/vendored/boto/boto/cognito/sync/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1761 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/cognito/sync/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1648 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/cognito/sync/exceptions.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    21122 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/cognito/sync/layer1.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4380 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/compat.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.872944 gsutil-5.8/gslib/vendored/boto/boto/configservice/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1764 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/configservice/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2528 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/configservice/exceptions.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    17243 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/configservice/layer1.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    57524 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/connection.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.872944 gsutil-5.8/gslib/vendored/boto/boto/contrib/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1105 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/contrib/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1885 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/contrib/ymlmessage.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.872944 gsutil-5.8/gslib/vendored/boto/boto/datapipeline/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1750 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/datapipeline/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1471 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/datapipeline/exceptions.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    29022 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/datapipeline/layer1.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.872944 gsutil-5.8/gslib/vendored/boto/boto/directconnect/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1771 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/directconnect/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1239 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/directconnect/exceptions.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    23592 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/directconnect/layer1.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.872944 gsutil-5.8/gslib/vendored/boto/boto/dynamodb/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1717 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/dynamodb/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     9810 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/dynamodb/batch.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3881 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/dynamodb/condition.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1687 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/dynamodb/exceptions.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     8280 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/dynamodb/item.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    24057 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/dynamodb/layer1.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    33814 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/dynamodb/layer2.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3978 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/dynamodb/schema.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    21808 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/dynamodb/table.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    12493 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/dynamodb/types.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.872944 gsutil-5.8/gslib/vendored/boto/boto/dynamodb2/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1786 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/dynamodb2/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1990 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/dynamodb2/exceptions.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     8292 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/dynamodb2/fields.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    14656 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/dynamodb2/items.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)   152740 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/dynamodb2/layer1.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     6602 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/dynamodb2/results.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    61606 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/dynamodb2/table.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      932 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/dynamodb2/types.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.876944 gsutil-5.8/gslib/vendored/boto/boto/ec2/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3094 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     5348 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/address.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2710 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/attributes.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.876944 gsutil-5.8/gslib/vendored/boto/boto/ec2/autoscale/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    37122 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/autoscale/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3058 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/autoscale/activity.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    13612 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/autoscale/group.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2428 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/autoscale/instance.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    10807 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/autoscale/launchconfig.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1958 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/autoscale/limits.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     6230 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/autoscale/policy.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1549 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/autoscale/request.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3060 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/autoscale/scheduled.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3379 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/autoscale/tag.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     6372 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/blockdevicemapping.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2754 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/bundleinstance.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3838 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/buyreservation.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.876944 gsutil-5.8/gslib/vendored/boto/boto/ec2/cloudwatch/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    24487 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/cloudwatch/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    12192 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/cloudwatch/alarm.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1668 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/cloudwatch/datapoint.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1533 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/cloudwatch/dimension.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1309 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/cloudwatch/listelement.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     7512 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/cloudwatch/metric.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)   178945 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/connection.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     5554 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/ec2object.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.880944 gsutil-5.8/gslib/vendored/boto/boto/ec2/elb/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    32543 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/elb/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     5103 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/elb/attributes.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3775 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/elb/healthcheck.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2658 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/elb/instancestate.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1512 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/elb/listelement.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3377 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/elb/listener.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    16388 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/elb/loadbalancer.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3856 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/elb/policies.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1576 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/elb/securitygroup.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1559 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/group.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    16344 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/image.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    23438 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/instance.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1893 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/instanceinfo.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     6854 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/instancestatus.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2273 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/instancetype.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4351 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/keypair.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3829 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/launchspecification.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    13597 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/networkinterface.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2002 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/placementgroup.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1568 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/regioninfo.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    13047 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/reservedinstance.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    14687 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/securitygroup.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     7539 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/snapshot.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2434 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/spotdatafeedsubscription.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     7288 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/spotinstancerequest.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2093 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/spotpricehistory.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3076 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/tag.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    10436 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/volume.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     6329 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/volumestatus.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2601 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2/zone.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.880944 gsutil-5.8/gslib/vendored/boto/boto/ec2containerservice/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1833 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2containerservice/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1269 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2containerservice/exceptions.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    31044 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ec2containerservice/layer1.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.880944 gsutil-5.8/gslib/vendored/boto/boto/ecs/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4177 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ecs/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     5510 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ecs/item.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.880944 gsutil-5.8/gslib/vendored/boto/boto/elasticache/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1753 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/elasticache/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    73538 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/elasticache/layer1.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.880944 gsutil-5.8/gslib/vendored/boto/boto/elastictranscoder/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1831 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/elastictranscoder/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1595 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/elastictranscoder/exceptions.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    44082 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/elastictranscoder/layer1.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.880944 gsutil-5.8/gslib/vendored/boto/boto/emr/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1963 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/emr/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1830 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/emr/bootstrap_action.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    29087 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/emr/connection.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    12903 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/emr/emrobject.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2079 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/emr/instance_group.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     9011 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/emr/step.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    33374 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/endpoints.json
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     9744 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/endpoints.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    18685 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/exception.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.880944 gsutil-5.8/gslib/vendored/boto/boto/file/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2644 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/file/README
--rwxr-x---   0 dpednekar (760847) primarygroup (89939)     1258 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/file/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4085 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/file/bucket.py
--rwxr-x---   0 dpednekar (760847) primarygroup (89939)     1490 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/file/connection.py
--rwxr-x---   0 dpednekar (760847) primarygroup (89939)     6882 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/file/key.py
--rwxr-x---   0 dpednekar (760847) primarygroup (89939)     1321 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/file/simpleresultset.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.880944 gsutil-5.8/gslib/vendored/boto/boto/fps/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1101 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/fps/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    14335 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/fps/connection.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     8704 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/fps/exception.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     7866 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/fps/response.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.880944 gsutil-5.8/gslib/vendored/boto/boto/glacier/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1712 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/glacier/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    17241 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/glacier/concurrent.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2195 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/glacier/exceptions.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     7999 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/glacier/job.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    60801 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/glacier/layer1.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3745 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/glacier/layer2.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2246 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/glacier/response.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     6310 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/glacier/utils.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    17601 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/glacier/vault.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     9668 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/glacier/writer.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.884944 gsutil-5.8/gslib/vendored/boto/boto/gs/
--rwxr-x---   0 dpednekar (760847) primarygroup (89939)     1076 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/gs/__init__.py
--rwxr-x---   0 dpednekar (760847) primarygroup (89939)    11457 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/gs/acl.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    48387 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/gs/bucket.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2923 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/gs/bucketlistresultset.py
--rwxr-x---   0 dpednekar (760847) primarygroup (89939)     5818 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/gs/connection.py
--rwxr-x---   0 dpednekar (760847) primarygroup (89939)     7717 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/gs/cors.py
--rwxr-x---   0 dpednekar (760847) primarygroup (89939)     3263 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/gs/encryptionconfig.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    42726 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/gs/key.py
--rwxr-x---   0 dpednekar (760847) primarygroup (89939)     9054 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/gs/lifecycle.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    31471 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/gs/resumable_upload_handler.py
--rwxr-x---   0 dpednekar (760847) primarygroup (89939)     1947 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/gs/user.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2382 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/handler.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     6125 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/https_connection.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.884944 gsutil-5.8/gslib/vendored/boto/boto/iam/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3312 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/iam/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    71706 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/iam/connection.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1660 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/iam/summarymap.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     6032 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/jsonresponse.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.884944 gsutil-5.8/gslib/vendored/boto/boto/kinesis/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1720 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/kinesis/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1611 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/kinesis/exceptions.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    41004 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/kinesis/layer1.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.884944 gsutil-5.8/gslib/vendored/boto/boto/kms/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1692 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/kms/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1523 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/kms/exceptions.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    33975 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/kms/layer1.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.884944 gsutil-5.8/gslib/vendored/boto/boto/logs/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1725 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/logs/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1732 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/logs/exceptions.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    22588 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/logs/layer1.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.884944 gsutil-5.8/gslib/vendored/boto/boto/machinelearning/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1808 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/machinelearning/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1596 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/machinelearning/exceptions.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    59588 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/machinelearning/layer1.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.884944 gsutil-5.8/gslib/vendored/boto/boto/manage/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1108 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/manage/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    14739 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/manage/cmdshell.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2502 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/manage/propget.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    21863 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/manage/server.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     6781 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/manage/task.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      806 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/manage/test_manage.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    16296 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/manage/volume.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.884944 gsutil-5.8/gslib/vendored/boto/boto/mashups/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1108 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/mashups/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2783 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/mashups/interactive.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4191 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/mashups/iobject.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     7584 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/mashups/order.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    14068 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/mashups/server.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.884944 gsutil-5.8/gslib/vendored/boto/boto/mturk/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1108 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/mturk/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    42356 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/mturk/connection.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2045 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/mturk/layoutparam.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4194 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/mturk/notification.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1967 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/mturk/price.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     8064 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/mturk/qualification.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    16126 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/mturk/question.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.884944 gsutil-5.8/gslib/vendored/boto/boto/mws/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1101 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/mws/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    49808 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/mws/connection.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2396 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/mws/exception.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    23191 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/mws/response.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.884944 gsutil-5.8/gslib/vendored/boto/boto/opsworks/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1729 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/opsworks/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1288 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/opsworks/exceptions.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)   129869 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/opsworks/layer1.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2711 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/plugin.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    22626 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/provider.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.888944 gsutil-5.8/gslib/vendored/boto/boto/pyami/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1107 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/pyami/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     5748 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/pyami/bootstrap.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     8665 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/pyami/config.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1707 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/pyami/copybot.cfg
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4261 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/pyami/copybot.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1238 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/pyami/helloworld.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.888944 gsutil-5.8/gslib/vendored/boto/boto/pyami/installers/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2047 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/pyami/installers/__init__.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.888944 gsutil-5.8/gslib/vendored/boto/boto/pyami/installers/ubuntu/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1112 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/pyami/installers/ubuntu/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1929 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/pyami/installers/ubuntu/apache.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     9942 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/pyami/installers/ubuntu/ebs.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3545 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/pyami/installers/ubuntu/installer.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4857 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/pyami/installers/ubuntu/mysql.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     6270 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/pyami/installers/ubuntu/trac.py
--rwxr-x---   0 dpednekar (760847) primarygroup (89939)     7585 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/pyami/launch_ami.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1427 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/pyami/scriptbase.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2475 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/pyami/startup.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.888944 gsutil-5.8/gslib/vendored/boto/boto/rds/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    68399 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/rds/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    17366 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/rds/dbinstance.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     6651 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/rds/dbsecuritygroup.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     6398 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/rds/dbsnapshot.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2825 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/rds/dbsubnetgroup.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1876 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/rds/event.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2533 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/rds/logfile.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    15665 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/rds/optiongroup.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     7037 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/rds/parametergroup.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1513 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/rds/regioninfo.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2011 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/rds/statusinfo.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3131 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/rds/vpcsecuritygroupmembership.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.888944 gsutil-5.8/gslib/vendored/boto/boto/rds2/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2127 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/rds2/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4451 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/rds2/exceptions.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)   159622 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/rds2/layer1.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.888944 gsutil-5.8/gslib/vendored/boto/boto/redshift/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1726 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/redshift/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     8236 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/redshift/exceptions.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)   138582 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/redshift/layer1.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     9475 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/regioninfo.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1486 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/requestlog.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     6556 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/resultset.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.888944 gsutil-5.8/gslib/vendored/boto/boto/roboto/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        2 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/roboto/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    18579 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/roboto/awsqueryrequest.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4453 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/roboto/awsqueryservice.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4529 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/roboto/param.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.888944 gsutil-5.8/gslib/vendored/boto/boto/route53/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3393 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/route53/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    23355 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/route53/connection.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.888944 gsutil-5.8/gslib/vendored/boto/boto/route53/domains/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1808 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/route53/domains/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1482 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/route53/domains/exceptions.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    32418 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/route53/domains/layer1.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1239 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/route53/exception.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     5824 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/route53/healthcheck.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1961 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/route53/hostedzone.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    14689 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/route53/record.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1841 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/route53/status.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    16231 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/route53/zone.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.892944 gsutil-5.8/gslib/vendored/boto/boto/s3/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2784 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/s3/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     5716 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/s3/acl.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    79628 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/s3/bucket.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     6887 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/s3/bucketlistresultset.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3183 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/s3/bucketlogging.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    26562 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/s3/connection.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     8941 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/s3/cors.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2087 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/s3/deletemarker.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    83773 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/s3/key.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4427 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/s3/keyfile.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    10883 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/s3/lifecycle.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4757 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/s3/multidelete.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    12049 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/s3/multipart.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1661 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/s3/prefix.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    15622 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/s3/resumable_download_handler.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1732 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/s3/tagging.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1968 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/s3/user.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    10607 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/s3/website.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.892944 gsutil-5.8/gslib/vendored/boto/boto/sdb/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1963 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/sdb/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    26088 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/sdb/connection.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.892944 gsutil-5.8/gslib/vendored/boto/boto/sdb/db/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1108 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/sdb/db/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2437 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/sdb/db/blob.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2036 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/sdb/db/key.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.892944 gsutil-5.8/gslib/vendored/boto/boto/sdb/db/manager/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4210 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/sdb/db/manager/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    27253 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/sdb/db/manager/sdbmanager.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    18612 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/sdb/db/manager/xmlmanager.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    10158 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/sdb/db/model.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    25086 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/sdb/db/property.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3072 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/sdb/db/query.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     8223 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/sdb/db/sequence.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     5427 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/sdb/db/test_db.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    14351 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/sdb/domain.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     6885 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/sdb/item.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3674 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/sdb/queryresultset.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1524 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/sdb/regioninfo.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.892944 gsutil-5.8/gslib/vendored/boto/boto/services/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1108 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/services/__init__.py
--rwxr-x---   0 dpednekar (760847) primarygroup (89939)     8144 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/services/bs.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2393 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/services/message.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     5596 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/services/result.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     6632 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/services/service.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3375 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/services/servicedef.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1524 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/services/sonofmmm.cfg
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3498 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/services/sonofmmm.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3555 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/services/submit.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.892944 gsutil-5.8/gslib/vendored/boto/boto/ses/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2019 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ses/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    23685 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ses/connection.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1830 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/ses/exceptions.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.892944 gsutil-5.8/gslib/vendored/boto/boto/sns/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2123 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/sns/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    32905 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/sns/connection.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.896944 gsutil-5.8/gslib/vendored/boto/boto/sqs/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1787 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/sqs/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1718 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/sqs/attributes.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3515 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/sqs/batchresults.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4729 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/sqs/bigmessage.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    24799 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/sqs/connection.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1755 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/sqs/jsonmessage.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     9892 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/sqs/message.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2487 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/sqs/messageattributes.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    20084 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/sqs/queue.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1524 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/sqs/regioninfo.py
--rwxr-x---   0 dpednekar (760847) primarygroup (89939)    41807 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/storage_uri.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.896944 gsutil-5.8/gslib/vendored/boto/boto/sts/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2026 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/sts/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    32142 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/sts/connection.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     8210 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/sts/credentials.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.896944 gsutil-5.8/gslib/vendored/boto/boto/support/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1720 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/support/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1715 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/support/exceptions.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    29434 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/support/layer1.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.896944 gsutil-5.8/gslib/vendored/boto/boto/swf/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1807 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/swf/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      958 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/swf/exceptions.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    63991 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/swf/layer1.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    11938 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/swf/layer1_decisions.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    13056 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/swf/layer2.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    40850 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/utils.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.896944 gsutil-5.8/gslib/vendored/boto/boto/vendored/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/vendored/__init__.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.896944 gsutil-5.8/gslib/vendored/boto/boto/vendored/regions/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      893 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/vendored/regions/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      958 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/vendored/regions/exceptions.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     8433 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/vendored/regions/regions.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    32447 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/vendored/six.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.896944 gsutil-5.8/gslib/vendored/boto/boto/vpc/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    68463 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/vpc/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1968 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/vpc/customergateway.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2472 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/vpc/dhcpoptions.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2585 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/vpc/internetgateway.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4976 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/vpc/networkacl.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4033 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/vpc/routetable.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2101 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/vpc/subnet.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     7868 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/vpc/vpc.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     5423 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/vpc/vpc_peering_connection.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     7722 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/vpc/vpnconnection.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2853 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/boto/vpc/vpngateway.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     8865 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/pylintrc
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      118 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/requirements-docs.txt
--rw-r-----   0 dpednekar (760847) primarygroup (89939)       22 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/requirements-py33.txt
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      176 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/requirements.txt
--rw-r-----   0 dpednekar (760847) primarygroup (89939)       28 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/setup.cfg
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4899 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/setup.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.896944 gsutil-5.8/gslib/vendored/boto/tests/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1103 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1560 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/compat.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.896944 gsutil-5.8/gslib/vendored/boto/tests/db/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3474 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/db/test_lists.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4429 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/db/test_password.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4971 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/db/test_query.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4065 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/db/test_sequence.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.896944 gsutil-5.8/gslib/vendored/boto/tests/devpay/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/devpay/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     7412 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/devpay/test_s3.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.896944 gsutil-5.8/gslib/vendored/boto/tests/fps/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/fps/__init__.py
--rwxr-x---   0 dpednekar (760847) primarygroup (89939)     3792 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/fps/test.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      951 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/fps/test_verify_signature.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.900944 gsutil-5.8/gslib/vendored/boto/tests/integration/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2340 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/__init__.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.900944 gsutil-5.8/gslib/vendored/boto/tests/integration/awslambda/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1123 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/awslambda/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1668 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/awslambda/test_awslambda.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.900944 gsutil-5.8/gslib/vendored/boto/tests/integration/beanstalk/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     9286 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/beanstalk/test_wrapper.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.900944 gsutil-5.8/gslib/vendored/boto/tests/integration/cloudformation/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1175 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/cloudformation/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1588 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/cloudformation/test_cert_verification.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     5409 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/cloudformation/test_connection.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.900944 gsutil-5.8/gslib/vendored/boto/tests/integration/cloudhsm/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1123 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/cloudhsm/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1883 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/cloudhsm/test_cloudhsm.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.900944 gsutil-5.8/gslib/vendored/boto/tests/integration/cloudsearch/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1175 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/cloudsearch/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1577 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/cloudsearch/test_cert_verification.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2742 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/cloudsearch/test_layers.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.900944 gsutil-5.8/gslib/vendored/boto/tests/integration/cloudsearch2/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1175 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/cloudsearch2/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1579 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/cloudsearch2/test_cert_verification.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2846 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/cloudsearch2/test_layers.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.900944 gsutil-5.8/gslib/vendored/boto/tests/integration/cloudtrail/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/cloudtrail/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1517 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/cloudtrail/test_cert_verification.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3057 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/cloudtrail/test_cloudtrail.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.900944 gsutil-5.8/gslib/vendored/boto/tests/integration/codedeploy/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1123 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/codedeploy/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1884 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/codedeploy/test_codedeploy.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.900944 gsutil-5.8/gslib/vendored/boto/tests/integration/cognito/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1779 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/cognito/__init__.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.900944 gsutil-5.8/gslib/vendored/boto/tests/integration/cognito/identity/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1123 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/cognito/identity/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2545 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/cognito/identity/test_cognito_identity.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.900944 gsutil-5.8/gslib/vendored/boto/tests/integration/cognito/sync/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1123 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/cognito/sync/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2198 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/cognito/sync/test_cognito_sync.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.900944 gsutil-5.8/gslib/vendored/boto/tests/integration/configservice/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1123 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/configservice/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2081 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/configservice/test_configservice.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.900944 gsutil-5.8/gslib/vendored/boto/tests/integration/datapipeline/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/datapipeline/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1524 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/datapipeline/test_cert_verification.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     5445 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/datapipeline/test_layer1.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.900944 gsutil-5.8/gslib/vendored/boto/tests/integration/directconnect/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/directconnect/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1570 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/directconnect/test_directconnect.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.904944 gsutil-5.8/gslib/vendored/boto/tests/integration/dynamodb/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1099 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/dynamodb/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1567 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/dynamodb/test_cert_verification.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    11776 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/dynamodb/test_layer1.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    19814 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/dynamodb/test_layer2.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3553 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/dynamodb/test_table.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.904944 gsutil-5.8/gslib/vendored/boto/tests/integration/dynamodb2/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/dynamodb2/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1968 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/dynamodb2/forum_test_data.json
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1564 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/dynamodb2/test_cert_verification.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    26329 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/dynamodb2/test_highlevel.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    13004 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/dynamodb2/test_layer1.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.904944 gsutil-5.8/gslib/vendored/boto/tests/integration/ec2/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1103 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/ec2/__init__.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.904944 gsutil-5.8/gslib/vendored/boto/tests/integration/ec2/autoscale/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1098 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/ec2/autoscale/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1575 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/ec2/autoscale/test_cert_verification.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     6560 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/ec2/autoscale/test_connection.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.908944 gsutil-5.8/gslib/vendored/boto/tests/integration/ec2/cloudwatch/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1103 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/ec2/cloudwatch/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1597 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/ec2/cloudwatch/test_cert_verification.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    11614 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/ec2/cloudwatch/test_connection.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.908944 gsutil-5.8/gslib/vendored/boto/tests/integration/ec2/elb/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1103 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/ec2/elb/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1577 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/ec2/elb/test_cert_verification.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    12554 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/ec2/elb/test_connection.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1549 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/ec2/test_cert_verification.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     9106 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/ec2/test_connection.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.908944 gsutil-5.8/gslib/vendored/boto/tests/integration/ec2/vpc/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/ec2/vpc/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     8619 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/ec2/vpc/test_connection.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.908944 gsutil-5.8/gslib/vendored/boto/tests/integration/ec2containerservice/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1122 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/ec2containerservice/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1749 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/ec2containerservice/test_ec2containerservice.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.908944 gsutil-5.8/gslib/vendored/boto/tests/integration/elasticache/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/elasticache/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2728 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/elasticache/test_layer1.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.908944 gsutil-5.8/gslib/vendored/boto/tests/integration/elastictranscoder/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/elastictranscoder/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1490 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/elastictranscoder/test_cert_verification.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4984 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/elastictranscoder/test_layer1.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.908944 gsutil-5.8/gslib/vendored/boto/tests/integration/emr/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1104 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/emr/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1542 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/emr/test_cert_verification.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.908944 gsutil-5.8/gslib/vendored/boto/tests/integration/glacier/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1132 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/glacier/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1556 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/glacier/test_cert_verification.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2028 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/glacier/test_layer1.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2025 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/glacier/test_layer2.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.908944 gsutil-5.8/gslib/vendored/boto/tests/integration/gs/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/gs/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3473 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/gs/cb_test_harness.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    22170 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/gs/test_basic.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    14317 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/gs/test_generation_conditionals.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    16183 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/gs/test_resumable_downloads.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    25820 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/gs/test_resumable_uploads.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     6568 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/gs/test_storage_uri.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     9786 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/gs/test_versioning.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4981 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/gs/testcase.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3244 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/gs/util.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.908944 gsutil-5.8/gslib/vendored/boto/tests/integration/iam/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1098 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/iam/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1542 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/iam/test_cert_verification.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1746 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/iam/test_connection.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3943 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/iam/test_password_policy.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3942 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/iam/test_policy.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.912944 gsutil-5.8/gslib/vendored/boto/tests/integration/kinesis/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/kinesis/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1502 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/kinesis/test_cert_verification.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4404 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/kinesis/test_kinesis.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.912944 gsutil-5.8/gslib/vendored/boto/tests/integration/kms/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1669 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/kms/test_kms.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.912944 gsutil-5.8/gslib/vendored/boto/tests/integration/logs/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/logs/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1509 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/logs/test_cert_verification.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1814 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/logs/test_layer1.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.912944 gsutil-5.8/gslib/vendored/boto/tests/integration/mws/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/mws/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4682 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/mws/test.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.912944 gsutil-5.8/gslib/vendored/boto/tests/integration/opsworks/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/opsworks/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2121 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/opsworks/test_layer1.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.912944 gsutil-5.8/gslib/vendored/boto/tests/integration/rds/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1175 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/rds/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1548 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/rds/test_cert_verification.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3841 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/rds/test_db_subnet_group.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     5433 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/rds/test_promote_modify.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.912944 gsutil-5.8/gslib/vendored/boto/tests/integration/rds2/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1175 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/rds2/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1552 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/rds2/test_cert_verification.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3638 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/rds2/test_connection.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.912944 gsutil-5.8/gslib/vendored/boto/tests/integration/redshift/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/redshift/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1447 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/redshift/test_cert_verification.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     5384 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/redshift/test_layer1.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.912944 gsutil-5.8/gslib/vendored/boto/tests/integration/route53/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1661 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/route53/__init__.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.912944 gsutil-5.8/gslib/vendored/boto/tests/integration/route53/domains/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1122 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/route53/domains/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1887 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/route53/domains/test_route53domains.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4876 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/route53/test_alias_resourcerecordsets.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1640 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/route53/test_cert_verification.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    10681 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/route53/test_health_check.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3293 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/route53/test_resourcerecordsets.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     7729 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/route53/test_zone.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.916944 gsutil-5.8/gslib/vendored/boto/tests/integration/s3/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1104 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/s3/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    23698 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/s3/mock_storage_service.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3541 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/s3/other_cacerts.txt
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    12530 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/s3/test_bucket.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1532 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/s3/test_cert_verification.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3311 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/s3/test_connect_to_region.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    10065 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/s3/test_connection.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3108 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/s3/test_cors.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3736 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/s3/test_encryption.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     6172 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/s3/test_https_cert_validation.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    21476 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/s3/test_key.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3629 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/s3/test_mfa.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     6770 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/s3/test_multidelete.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     8408 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/s3/test_multipart.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     8255 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/s3/test_pool.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     6218 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/s3/test_versioning.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.916944 gsutil-5.8/gslib/vendored/boto/tests/integration/sdb/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1104 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/sdb/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1544 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/sdb/test_cert_verification.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4320 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/sdb/test_connection.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.916944 gsutil-5.8/gslib/vendored/boto/tests/integration/ses/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/ses/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1558 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/ses/test_cert_verification.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1495 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/ses/test_connection.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.916944 gsutil-5.8/gslib/vendored/boto/tests/integration/sns/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1104 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/sns/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1535 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/sns/test_cert_verification.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2585 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/sns/test_connection.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3836 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/sns/test_sns_sqs_subscription.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.916944 gsutil-5.8/gslib/vendored/boto/tests/integration/sqs/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1104 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/sqs/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2688 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/sqs/test_bigmessage.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1535 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/sqs/test_cert_verification.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    11205 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/sqs/test_connection.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.916944 gsutil-5.8/gslib/vendored/boto/tests/integration/storage_uri/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/storage_uri/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2355 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/storage_uri/test_storage_uri.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.916944 gsutil-5.8/gslib/vendored/boto/tests/integration/sts/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1099 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/sts/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1546 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/sts/test_cert_verification.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3405 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/sts/test_session_token.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.916944 gsutil-5.8/gslib/vendored/boto/tests/integration/support/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/support/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1435 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/support/test_cert_verification.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3029 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/support/test_layer1.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.916944 gsutil-5.8/gslib/vendored/boto/tests/integration/swf/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/swf/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1553 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/swf/test_cert_verification.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    10743 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/swf/test_layer1.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     6866 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/integration/swf/test_layer1_workflow_execution.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.916944 gsutil-5.8/gslib/vendored/boto/tests/mturk/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/mturk/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      934 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/mturk/_init_environment.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      587 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/mturk/all_tests.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1491 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/mturk/cleanup_tests.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1792 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/mturk/common.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3365 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/mturk/create_free_text_question_regex.doctest
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2987 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/mturk/create_hit.doctest
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3146 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/mturk/create_hit_binary.doctest
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      965 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/mturk/create_hit_external.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3246 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/mturk/create_hit_from_hit_type.doctest
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      505 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/mturk/create_hit_test.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      947 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/mturk/create_hit_with_qualifications.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      747 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/mturk/hit_persistence.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      430 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/mturk/mocks.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3967 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/mturk/reviewable_hits.doctest
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      262 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/mturk/run-doctest.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      398 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/mturk/search_hits.doctest
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1743 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/mturk/selenium_support.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      148 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/mturk/support.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      314 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/mturk/test_disable_hit.py
--rwxr-x---   0 dpednekar (760847) primarygroup (89939)     2922 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/test.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.920944 gsutil-5.8/gslib/vendored/boto/tests/unit/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4121 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/__init__.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.920944 gsutil-5.8/gslib/vendored/boto/tests/unit/auth/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/auth/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    27694 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/auth/test_sigv4.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3324 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/auth/test_stsanon.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.920944 gsutil-5.8/gslib/vendored/boto/tests/unit/awslambda/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1123 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/awslambda/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4303 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/awslambda/test_awslambda.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.920944 gsutil-5.8/gslib/vendored/boto/tests/unit/beanstalk/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/beanstalk/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2085 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/beanstalk/test_exception.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     6971 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/beanstalk/test_layer1.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.920944 gsutil-5.8/gslib/vendored/boto/tests/unit/cloudformation/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/cloudformation/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    30695 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/cloudformation/test_connection.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     9168 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/cloudformation/test_stack.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.920944 gsutil-5.8/gslib/vendored/boto/tests/unit/cloudfront/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/cloudfront/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     9736 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/cloudfront/test_connection.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      611 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/cloudfront/test_distribution.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      849 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/cloudfront/test_invalidation.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4051 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/cloudfront/test_invalidation_list.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    16806 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/cloudfront/test_signed_urls.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.920944 gsutil-5.8/gslib/vendored/boto/tests/unit/cloudsearch/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        1 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/cloudsearch/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     8513 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/cloudsearch/test_connection.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    12029 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/cloudsearch/test_document.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1466 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/cloudsearch/test_exceptions.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    13726 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/cloudsearch/test_search.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.920944 gsutil-5.8/gslib/vendored/boto/tests/unit/cloudsearch2/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      533 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/cloudsearch2/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     8278 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/cloudsearch2/test_connection.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    12068 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/cloudsearch2/test_document.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1469 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/cloudsearch2/test_exceptions.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    12329 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/cloudsearch2/test_search.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.920944 gsutil-5.8/gslib/vendored/boto/tests/unit/cloudsearchdomain/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/cloudsearchdomain/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4869 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/cloudsearchdomain/test_cloudsearchdomain.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.920944 gsutil-5.8/gslib/vendored/boto/tests/unit/cloudtrail/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/cloudtrail/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2731 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/cloudtrail/test_layer1.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.920944 gsutil-5.8/gslib/vendored/boto/tests/unit/data/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    33374 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/data/new_endpoints.json
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    34623 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/data/old_endpoints.json
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.920944 gsutil-5.8/gslib/vendored/boto/tests/unit/directconnect/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/directconnect/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2202 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/directconnect/test_layer1.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.920944 gsutil-5.8/gslib/vendored/boto/tests/unit/dynamodb/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/dynamodb/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4073 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/dynamodb/test_batch.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4826 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/dynamodb/test_layer2.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     7271 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/dynamodb/test_types.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.920944 gsutil-5.8/gslib/vendored/boto/tests/unit/dynamodb2/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/dynamodb2/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2275 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/dynamodb2/test_layer1.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)   103923 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/dynamodb2/test_table.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.924944 gsutil-5.8/gslib/vendored/boto/tests/unit/ec2/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/ec2/__init__.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.924944 gsutil-5.8/gslib/vendored/boto/tests/unit/ec2/autoscale/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/ec2/autoscale/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    36594 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/ec2/autoscale/test_group.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.924944 gsutil-5.8/gslib/vendored/boto/tests/unit/ec2/cloudwatch/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/ec2/cloudwatch/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3787 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/ec2/cloudwatch/test_connection.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.924944 gsutil-5.8/gslib/vendored/boto/tests/unit/ec2/elb/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/ec2/elb/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     8314 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/ec2/elb/test_attribute.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4478 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/ec2/elb/test_listener.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     5660 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/ec2/elb/test_loadbalancer.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     5950 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/ec2/test_address.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     6739 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/ec2/test_blockdevicemapping.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    76351 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/ec2/test_connection.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     7770 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/ec2/test_ec2object.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    11050 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/ec2/test_instance.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1811 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/ec2/test_instancestatus.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     5221 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/ec2/test_instancetype.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    12575 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/ec2/test_networkinterface.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1670 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/ec2/test_reservedinstance.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     8556 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/ec2/test_securitygroup.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2733 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/ec2/test_snapshot.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     5101 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/ec2/test_spotinstance.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    11441 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/ec2/test_volume.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.924944 gsutil-5.8/gslib/vendored/boto/tests/unit/ec2containerservice/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/ec2containerservice/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1917 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/ec2containerservice/test_connection.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.924944 gsutil-5.8/gslib/vendored/boto/tests/unit/ecs/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/ecs/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2750 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/ecs/test_connection.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.924944 gsutil-5.8/gslib/vendored/boto/tests/unit/elasticache/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/elasticache/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      691 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/elasticache/test_api_interface.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.924944 gsutil-5.8/gslib/vendored/boto/tests/unit/emr/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    39107 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/emr/test_connection.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    17266 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/emr/test_emr_responses.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2056 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/emr/test_instance_group_args.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.924944 gsutil-5.8/gslib/vendored/boto/tests/unit/glacier/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/glacier/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     7560 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/glacier/test_concurrent.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3711 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/glacier/test_job.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     5631 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/glacier/test_layer1.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    14402 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/glacier/test_layer2.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1656 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/glacier/test_response.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     6952 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/glacier/test_utils.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     7480 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/glacier/test_vault.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     8370 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/glacier/test_writer.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.924944 gsutil-5.8/gslib/vendored/boto/tests/unit/iam/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/iam/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    19292 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/iam/test_connection.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    24931 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/iam/test_policy.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.924944 gsutil-5.8/gslib/vendored/boto/tests/unit/kinesis/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/kinesis/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2971 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/kinesis/test_kinesis.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.924944 gsutil-5.8/gslib/vendored/boto/tests/unit/kms/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1123 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/kms/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2636 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/kms/test_kms.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.924944 gsutil-5.8/gslib/vendored/boto/tests/unit/logs/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/logs/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      655 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/logs/test_layer1.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.924944 gsutil-5.8/gslib/vendored/boto/tests/unit/machinelearning/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1123 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/machinelearning/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2076 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/machinelearning/test_machinelearning.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.924944 gsutil-5.8/gslib/vendored/boto/tests/unit/manage/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/manage/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2004 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/manage/test_ssh.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.924944 gsutil-5.8/gslib/vendored/boto/tests/unit/mturk/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/mturk/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      860 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/mturk/test_connection.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     5954 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/mturk/test_locale_qualification_in.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     5971 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/mturk/test_locale_qualification_notin.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2931 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/mturk/test_qualification_doesnotexist.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2901 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/mturk/test_qualification_exists.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3191 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/mturk/test_qualification_qualtypewithscore_in.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.928944 gsutil-5.8/gslib/vendored/boto/tests/unit/mws/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/mws/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     8457 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/mws/test_connection.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     8822 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/mws/test_response.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.928944 gsutil-5.8/gslib/vendored/boto/tests/unit/provider/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/provider/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    18277 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/provider/test_provider.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.928944 gsutil-5.8/gslib/vendored/boto/tests/unit/pyami/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/pyami/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2608 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/pyami/test_config.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.928944 gsutil-5.8/gslib/vendored/boto/tests/unit/rds/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/rds/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    35025 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/rds/test_connection.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    14445 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/rds/test_snapshot.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.928944 gsutil-5.8/gslib/vendored/boto/tests/unit/rds2/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/rds2/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     8806 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/rds2/test_connection.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.928944 gsutil-5.8/gslib/vendored/boto/tests/unit/route53/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/route53/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    32801 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/route53/test_connection.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2548 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/route53/test_zone.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.928944 gsutil-5.8/gslib/vendored/boto/tests/unit/s3/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/s3/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     8298 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/s3/test_bucket.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2454 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/s3/test_bucketlistresultset.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    27567 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/s3/test_connection.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2461 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/s3/test_cors_configuration.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     9132 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/s3/test_key.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4589 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/s3/test_keyfile.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     7103 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/s3/test_lifecycle.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1526 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/s3/test_tagging.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    12504 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/s3/test_uri.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     9219 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/s3/test_website.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.928944 gsutil-5.8/gslib/vendored/boto/tests/unit/ses/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/ses/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     7581 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/ses/test_identity.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.928944 gsutil-5.8/gslib/vendored/boto/tests/unit/sns/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/sns/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    11190 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/sns/test_connection.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.928944 gsutil-5.8/gslib/vendored/boto/tests/unit/sqs/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/sqs/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    12787 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/sqs/test_connection.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4281 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/sqs/test_message.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1944 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/sqs/test_queue.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.928944 gsutil-5.8/gslib/vendored/boto/tests/unit/sts/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/sts/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     8961 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/sts/test_connection.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1081 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/sts/test_credentials.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.932944 gsutil-5.8/gslib/vendored/boto/tests/unit/swf/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/swf/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1181 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/swf/test_layer1_decisions.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4041 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/swf/test_layer2_actors.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1022 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/swf/test_layer2_base.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     6008 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/swf/test_layer2_domain.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1739 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/swf/test_layer2_types.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    24173 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/test_connect_to_region.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    23981 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/test_connection.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)       68 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/test_endpoints.json
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    13751 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/test_endpoints.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     5224 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/test_exception.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     8229 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/test_regioninfo.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.932944 gsutil-5.8/gslib/vendored/boto/tests/unit/utils/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/utils/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    14461 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/utils/test_utils.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.932944 gsutil-5.8/gslib/vendored/boto/tests/unit/vpc/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)       29 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/vpc/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4610 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/vpc/test_customergateway.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     8767 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/vpc/test_dhcpoptions.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     6080 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/vpc/test_internetgateway.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    20957 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/vpc/test_networkacl.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    20511 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/vpc/test_routetable.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     5485 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/vpc/test_subnet.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    13752 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/vpc/test_vpc.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    13164 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/vpc/test_vpc_peering_connection.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    10421 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/vpc/test_vpnconnection.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     8709 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tests/unit/vpc/test_vpngateway.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      836 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/boto/tox.ini
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.932944 gsutil-5.8/gslib/vendored/oauth2client/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      379 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/.coveragerc
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.932944 gsutil-5.8/gslib/vendored/oauth2client/.github/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      233 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/.github/ISSUE_TEMPLATE.md
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      237 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/.github/PULL_REQUEST_TEMPLATE.md
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1025 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/.travis.yml
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    19859 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/CHANGELOG.md
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1981 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/CODE_OF_CONDUCT.md
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     8163 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/CONTRIBUTING.md
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3476 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/CONTRIBUTORS.md
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    11507 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/LICENSE
--rw-r-----   0 dpednekar (760847) primarygroup (89939)       65 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/MANIFEST.in
--rw-r-----   0 dpednekar (760847) primarygroup (89939)       37 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/Makefile
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1494 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/README.md
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.932944 gsutil-5.8/gslib/vendored/oauth2client/docs/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     6789 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/docs/Makefile
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.932944 gsutil-5.8/gslib/vendored/oauth2client/docs/_static/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     5709 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/docs/_static/favicon.ico
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1226 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/docs/_static/google_logo.png
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3357 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/docs/conf.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4945 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/docs/index.rst
--rw-r-----   0 dpednekar (760847) primarygroup (89939)       91 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/docs/requirements.txt
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.936944 gsutil-5.8/gslib/vendored/oauth2client/docs/source/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      150 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/docs/source/oauth2client.client.rst
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      171 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/docs/source/oauth2client.clientsecrets.rst
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      185 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/docs/source/oauth2client.contrib.appengine.rst
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      182 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/docs/source/oauth2client.contrib.devshell.rst
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      214 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/docs/source/oauth2client.contrib.dictionary_storage.rst
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      210 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/docs/source/oauth2client.contrib.django_util.apps.rst
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      228 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/docs/source/oauth2client.contrib.django_util.decorators.rst
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      216 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/docs/source/oauth2client.contrib.django_util.models.rst
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      568 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/docs/source/oauth2client.contrib.django_util.rst
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      219 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/docs/source/oauth2client.contrib.django_util.signals.rst
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      210 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/docs/source/oauth2client.contrib.django_util.site.rst
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      219 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/docs/source/oauth2client.contrib.django_util.storage.rst
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      213 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/docs/source/oauth2client.contrib.django_util.views.rst
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      190 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/docs/source/oauth2client.contrib.flask_util.rst
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      167 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/docs/source/oauth2client.contrib.gce.rst
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      205 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/docs/source/oauth2client.contrib.keyring_storage.rst
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      237 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/docs/source/oauth2client.contrib.multiprocess_file_storage.rst
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      634 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/docs/source/oauth2client.contrib.rst
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      188 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/docs/source/oauth2client.contrib.sqlalchemy.rst
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      182 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/docs/source/oauth2client.contrib.xsrfutil.rst
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      147 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/docs/source/oauth2client.crypt.rst
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      144 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/docs/source/oauth2client.file.rst
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      441 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/docs/source/oauth2client.rst
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      179 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/docs/source/oauth2client.service_account.rst
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      147 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/docs/source/oauth2client.tools.rst
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      159 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/docs/source/oauth2client.transport.rst
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.936944 gsutil-5.8/gslib/vendored/oauth2client/oauth2client/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1002 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/oauth2client/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    10852 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/oauth2client/_helpers.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4556 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/oauth2client/_openssl_crypt.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2198 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/oauth2client/_pkce.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     6367 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/oauth2client/_pure_python_crypt.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4118 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/oauth2client/_pycrypto_crypt.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    83289 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/oauth2client/client.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     5281 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/oauth2client/clientsecrets.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.936944 gsutil-5.8/gslib/vendored/oauth2client/oauth2client/contrib/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      220 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/oauth2client/contrib/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     5381 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/oauth2client/contrib/_appengine_ndb.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4463 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/oauth2client/contrib/_metadata.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    33941 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/oauth2client/contrib/appengine.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4991 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/oauth2client/contrib/devshell.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2278 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/oauth2client/contrib/dictionary_storage.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.936944 gsutil-5.8/gslib/vendored/oauth2client/oauth2client/contrib/django_util/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    18152 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/oauth2client/contrib/django_util/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1213 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/oauth2client/contrib/django_util/apps.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     5564 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/oauth2client/contrib/django_util/decorators.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2742 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/oauth2client/contrib/django_util/models.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1050 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/oauth2client/contrib/django_util/signals.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      960 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/oauth2client/contrib/django_util/site.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3070 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/oauth2client/contrib/django_util/storage.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     6785 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/oauth2client/contrib/django_util/views.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    19413 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/oauth2client/contrib/flask_util.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     5431 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/oauth2client/contrib/gce.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3091 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/oauth2client/contrib/keyring_storage.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    11785 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/oauth2client/contrib/multiprocess_file_storage.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     5246 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/oauth2client/contrib/sqlalchemy.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3470 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/oauth2client/contrib/xsrfutil.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     8447 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/oauth2client/crypt.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2730 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/oauth2client/file.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    28210 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/oauth2client/service_account.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     9069 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/oauth2client/tools.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    10367 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/oauth2client/transport.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.936944 gsutil-5.8/gslib/vendored/oauth2client/samples/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      712 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/samples/call_compute_service.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.936944 gsutil-5.8/gslib/vendored/oauth2client/samples/googleappengine/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      160 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/samples/googleappengine/app.yaml
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      771 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/samples/googleappengine/call_compute_service_from_gae.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1261 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/samples/oauth2_for_devices.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.940944 gsutil-5.8/gslib/vendored/oauth2client/scripts/
--rwxr-x---   0 dpednekar (760847) primarygroup (89939)     1028 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/scripts/build_docs.sh
--rwxr-x---   0 dpednekar (760847) primarygroup (89939)     1196 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/scripts/install.sh
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      413 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/scripts/local_test_setup.sample
--rwxr-x---   0 dpednekar (760847) primarygroup (89939)      839 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/scripts/run.sh
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2001 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/scripts/run_gce_system_tests.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3875 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/scripts/run_system_tests.py
--rwxr-x---   0 dpednekar (760847) primarygroup (89939)     1803 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/scripts/run_system_tests.sh
--rw-r-----   0 dpednekar (760847) primarygroup (89939)       28 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/setup.cfg
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2555 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/setup.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.940944 gsutil-5.8/gslib/vendored/oauth2client/tests/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1124 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/conftest.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.940944 gsutil-5.8/gslib/vendored/oauth2client/tests/contrib/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/contrib/__init__.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.940944 gsutil-5.8/gslib/vendored/oauth2client/tests/contrib/appengine/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/contrib/appengine/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1814 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/contrib/appengine/conftest.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     6087 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/contrib/appengine/test__appengine_ndb.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    45276 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/contrib/appengine/test_appengine.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.940944 gsutil-5.8/gslib/vendored/oauth2client/tests/contrib/django_util/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1442 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/contrib/django_util/__init__.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      969 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/contrib/django_util/apps.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      890 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/contrib/django_util/models.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1511 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/contrib/django_util/settings.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     9648 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/contrib/django_util/test_decorators.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3575 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/contrib/django_util/test_django_models.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     5763 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/contrib/django_util/test_django_storage.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     7260 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/contrib/django_util/test_django_util.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    12619 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/contrib/django_util/test_views.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    10361 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/contrib/test_devshell.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     3487 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/contrib/test_dictionary_storage.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    21608 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/contrib/test_flask_util.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     7817 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/contrib/test_gce.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     6950 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/contrib/test_keyring_storage.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4042 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/contrib/test_metadata.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    11874 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/contrib/test_multiprocess_file_storage.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4827 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/contrib/test_sqlalchemy.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    13065 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/contrib/test_xsrfutil.py
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.944944 gsutil-5.8/gslib/vendored/oauth2client/tests/data/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      164 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/data/app.yaml
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1218 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/data/certs.json
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      297 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/data/client_secrets.json
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.944944 gsutil-5.8/gslib/vendored/oauth2client/tests/data/gcloud/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2024 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/data/gcloud/application_default_credentials.json
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      122 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/data/gcloud/application_default_credentials_authorized_user.json
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2090 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/data/gcloud/application_default_credentials_malformed_1.json
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2061 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/data/gcloud/application_default_credentials_malformed_2.json
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2090 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/data/gcloud/application_default_credentials_malformed_3.json
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1248 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/data/key.json.enc
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1744 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/data/key.p12.enc
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1850 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/data/pem_from_pkcs12.pem
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1679 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/data/pem_from_pkcs12_alternate.pem
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2452 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/data/privatekey.p12
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1679 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/data/privatekey.pem
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      426 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/data/privatekey.pub
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1147 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/data/public_cert.pem
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      451 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/data/publickey_openssl.pem
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      263 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/data/unfilled_client_secrets.json
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      256 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/data/user-key.json.enc
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     4000 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/http_mock.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     9043 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/test__helpers.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1954 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/test__pkce.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     7521 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/test__pure_python_crypt.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2715 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/test__pycrypto_crypt.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)   103591 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/test_client.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    10368 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/test_clientsecrets.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    11871 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/test_crypt.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    10276 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/test_file.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    12308 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/test_jwt.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    28969 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/test_service_account.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     7557 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/test_tools.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     6157 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tests/test_transport.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     2569 2022-03-07 20:24:44.000000 gsutil-5.8/gslib/vendored/oauth2client/tox.ini
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    36661 2022-03-07 20:24:16.000000 gsutil-5.8/gslib/wildcard_iterator.py
--rwxr-x---   0 dpednekar (760847) primarygroup (89939)      785 2022-03-07 20:24:16.000000 gsutil-5.8/gsutil
-drwxr-x---   0 dpednekar (760847) primarygroup (89939)        0 2022-03-07 20:41:08.944944 gsutil-5.8/gsutil.egg-info/
--rw-r-----   0 dpednekar (760847) primarygroup (89939)     1567 2022-03-07 20:41:08.000000 gsutil-5.8/gsutil.egg-info/PKG-INFO
--rw-r-----   0 dpednekar (760847) primarygroup (89939)    55102 2022-03-07 20:41:08.000000 gsutil-5.8/gsutil.egg-info/SOURCES.txt
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        1 2022-03-07 20:41:08.000000 gsutil-5.8/gsutil.egg-info/dependency_links.txt
--rw-r-----   0 dpednekar (760847) primarygroup (89939)       48 2022-03-07 20:41:08.000000 gsutil-5.8/gsutil.egg-info/entry_points.txt
--rw-r-----   0 dpednekar (760847) primarygroup (89939)      280 2022-03-07 20:41:08.000000 gsutil-5.8/gsutil.egg-info/requires.txt
--rw-r-----   0 dpednekar (760847) primarygroup (89939)       11 2022-03-07 20:41:08.000000 gsutil-5.8/gsutil.egg-info/top_level.txt
--rw-r-----   0 dpednekar (760847) primarygroup (89939)        1 2022-03-07 20:41:08.000000 gsutil-5.8/gsutil.egg-info/zip-safe
--rwxr-x---   0 dpednekar (760847) primarygroup (89939)     6284 2022-03-07 20:24:16.000000 gsutil-5.8/gsutil.py
--rw-r-----   0 dpednekar (760847) primarygroup (89939)       38 2022-03-07 20:41:08.944944 gsutil-5.8/setup.cfg
--rwxr-x---   0 dpednekar (760847) primarygroup (89939)     5426 2022-03-07 20:24:16.000000 gsutil-5.8/setup.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)   112882 2022-04-07 15:46:16.000000 gsutil-5.9/CHANGES.md
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)       33 2022-04-07 15:58:06.000000 gsutil-5.9/CHECKSUM
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      130 2022-04-07 15:28:56.000000 gsutil-5.9/CONTRIBUTING.md
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    11358 2022-04-07 15:28:56.000000 gsutil-5.9/LICENSE
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      422 2022-04-07 15:28:56.000000 gsutil-5.9/MANIFEST.in
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1567 2022-04-07 15:58:49.000000 gsutil-5.9/PKG-INFO
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1063 2022-04-07 15:28:56.000000 gsutil-5.9/README.md
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        4 2022-04-07 15:58:06.000000 gsutil-5.9/VERSION
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)       33 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/CHECKSUM
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      378 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/README
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        3 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/VERSION
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     6454 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    34238 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/__main__.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/addlhelp/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      797 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/addlhelp/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     9876 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/addlhelp/acls.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     7896 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/addlhelp/command_opts.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     6474 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/addlhelp/crc32c.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     9108 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/addlhelp/creds.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     6337 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/addlhelp/dev.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     8535 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/addlhelp/encoding.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3831 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/addlhelp/metadata.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     9040 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/addlhelp/naming.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     8311 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/addlhelp/prod.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    11465 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/addlhelp/security.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4597 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/addlhelp/support.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4056 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/addlhelp/versions.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     9354 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/addlhelp/wildcards.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    25283 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/boto_resumable_upload.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    87221 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/boto_translation.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3990 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/bucket_listing_ref.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    41796 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/cloud_api.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    30667 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/cloud_api_delegator.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)   111176 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/command.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4451 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/command_argument.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    23760 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/command_runner.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/commands/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      797 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/commands/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    21641 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/commands/acl.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     7145 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/commands/autoclass.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     8437 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/commands/bucketpolicyonly.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     5093 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/commands/cat.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     6210 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/commands/compose.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    60563 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/commands/config.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     7979 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/commands/cors.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    59813 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/commands/cp.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    12720 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/commands/defacl.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     6966 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/commands/defstorageclass.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    10043 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/commands/du.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     8596 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/commands/hash.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     9401 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/commands/help.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    13792 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/commands/hmac.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    27794 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/commands/iam.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    19073 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/commands/kms.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    14951 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/commands/label.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     7543 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/commands/lifecycle.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    10956 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/commands/logging.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    26887 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/commands/ls.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    14319 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/commands/mb.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     6215 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/commands/mv.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    32959 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/commands/notification.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     7728 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/commands/pap.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    95372 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/commands/perfdiag.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     5558 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/commands/rb.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     6877 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/commands/requesterpays.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    25883 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/commands/retention.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    25521 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/commands/rewrite.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    16429 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/commands/rm.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     7419 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/commands/rpo.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    78403 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/commands/rsync.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    14809 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/commands/setmeta.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    25530 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/commands/signurl.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     6441 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/commands/stat.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    28960 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/commands/test.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     8314 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/commands/ubla.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     7115 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/commands/version.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     6801 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/commands/versioning.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     8322 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/commands/web.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     8318 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/context_config.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1108 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/cred_types.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3390 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/cs_api_map.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    14732 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/daisy_chain_wrapper.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/data/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)   235626 2022-04-07 15:55:05.000000 gsutil-5.9/gslib/data/cacerts.txt
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1734 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/devshell_auth_plugin.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1323 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/discard_messages_queue.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     5301 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/exception.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3475 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/file_part.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)   105959 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/gcs_json_api.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    17378 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/gcs_json_credentials.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    29180 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/gcs_json_media.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4358 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/help_provider.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    11838 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/iamcredentials_api.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2566 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/impersonation_credentials.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    13558 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/kms_api.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2311 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/lazy_wrapper.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    39799 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/metrics.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4724 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/metrics_reporter.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1471 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/metrics_tuple.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    30685 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/name_expansion.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1217 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/no_op_auth_plugin.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1059 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/no_op_credentials.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    12431 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/parallel_tracker_file.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4504 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/plurality_checkable_iterator.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     6225 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/progress_callback.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1728 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/project_id.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    11440 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/pubsub_api.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     8730 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/resumable_streaming_upload.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     5236 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/seek_ahead_thread.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     5772 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/sig_handling.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2070 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/storage_uri_builder.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    15685 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/storage_url.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    11032 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tab_complete.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/tests/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      808 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     8163 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/mock_cloud_api.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1308 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/mock_logging_handler.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2867 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/rewrite_helper.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     5833 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/signurl_signatures.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     8950 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_Doption.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    33748 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_acl.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     6599 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_autoclass.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     5382 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_boto_util.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     5102 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_bucketconfig.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3870 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_bucketpolicyonly.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     7072 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_cat.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2051 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_cloud_api_delegator.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3484 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_command.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    21157 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_command_runner.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    13501 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_compose.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    17143 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_context_config.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    36977 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_copy_helper_funcs.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4602 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_copy_objects_iterator.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    12120 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_cors.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)   214874 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_cp.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     8852 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_creds_config.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    14471 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_daisy_chain_wrapper.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/tests/test_data/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     5692 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_data/favicon.ico.gz
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      810 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_data/test.gif
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1917 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_data/test.json
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     9436 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_data/test.mp3
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2549 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_data/test.p12
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)   524288 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_data/test.txt
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      330 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_data/test_external_account_credentials.json
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     9224 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_defacl.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     5106 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_defstorageclass.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    10634 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_du.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4732 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_encryption_helper.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3974 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_execution_util.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3461 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_file_part.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2969 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_gcs_json_api.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     7842 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_gcs_json_credentials.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     7623 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_gcs_json_media.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2832 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_gsutil.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     5887 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_hash.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    11039 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_hashing_helper.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3589 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_help.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    14032 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_hmac.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    57448 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_iam.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    11229 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_kms.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    10743 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_label.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    10868 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_lifecycle.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3157 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_logging.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    52322 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_ls.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    14444 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_mb.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    52450 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_metrics.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2061 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_mtls.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    12038 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_mv.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    64343 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_naming.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     6042 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_notification.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     5155 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_notification_pubsub.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     5773 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_pap.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    10391 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_parallel_cp.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    33791 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_parallelism_framework.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    12919 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_perfdiag.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     7717 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_plurality_checkable_iterator.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     6017 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_psc.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2814 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_rb.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    11879 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_requester_pays.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    12656 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_resumable_streaming.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    28651 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_retention.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     5772 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_retention_util.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    32105 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_rewrite.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    34177 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_rm.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     8007 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_rpo.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)   138975 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_rsync.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3457 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_rsync_funcs.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     9002 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_seek_ahead_thread.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    11311 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_setmeta.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    46569 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_shim_util.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    21323 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_signurl.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    11659 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_stat.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     5909 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_stet_cp.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     7560 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_stet_util.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4491 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_storage_url.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    14512 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_tabcomplete.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1581 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_temporary_file_util.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1798 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_trace.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    10140 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_tracker_file.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3975 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_ubla.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    69057 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_ui.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    10615 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_update.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     5680 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_user_agent_helper.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    20251 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_util.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3697 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_versioning.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3538 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_web.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    21560 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_wildcard_iterator.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4593 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/test_wrapped_credentials.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/tests/testcase/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1047 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/testcase/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     9861 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/testcase/base.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    56155 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/testcase/integration_testcase.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    17333 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/testcase/unit_testcase.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    24310 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tests/util.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/third_party/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/third_party/__init__.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/third_party/iamcredentials_apitools/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/third_party/iamcredentials_apitools/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     7653 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/third_party/iamcredentials_apitools/iamcredentials_v1_client.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    10709 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/third_party/iamcredentials_apitools/iamcredentials_v1_messages.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/third_party/kms_apitools/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/third_party/kms_apitools/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    33482 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/third_party/kms_apitools/cloudkms_v1_client.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    38336 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/third_party/kms_apitools/cloudkms_v1_messages.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2072 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/third_party/kms_apitools/resources.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/third_party/pubsub_apitools/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/third_party/pubsub_apitools/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    31918 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/third_party/pubsub_apitools/pubsub_v1_client.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    31928 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/third_party/pubsub_apitools/pubsub_v1_messages.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/third_party/storage_apitools/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/third_party/storage_apitools/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1210 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/third_party/storage_apitools/credentials_lib.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    62198 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/third_party/storage_apitools/storage_v1_client.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)   128554 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/third_party/storage_apitools/storage_v1_messages.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    14039 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/thread_message.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    24810 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tracker_file.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2254 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/tz_utc.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    48563 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/ui_controller.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/utils/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/utils/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    12791 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/utils/acl_helper.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1457 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/utils/arg_helper.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    25783 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/utils/boto_util.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     6095 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/utils/cat_helper.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4060 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/utils/cloud_api_helper.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4947 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/utils/constants.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)   183470 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/utils/copy_helper.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     7169 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/utils/encryption_helper.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1845 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/utils/execution_util.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    18760 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/utils/hashing_helper.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    10393 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/utils/iam_helper.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    18324 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/utils/ls_helper.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4510 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/utils/metadata_util.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    16093 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/utils/parallelism_framework_util.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    18831 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/utils/posix_util.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    10723 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/utils/retention_util.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3189 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/utils/retry_util.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1885 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/utils/rsync_util.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    20255 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/utils/shim_util.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     5288 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/utils/signurl_helper.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3925 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/utils/stet_util.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    10009 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/utils/system_util.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1253 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/utils/temporary_file_util.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    13303 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/utils/text_util.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    38833 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/utils/translation_helper.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     7914 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/utils/unit_util.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     5002 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/utils/update_util.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2468 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/utils/user_agent_helper.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2260 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/utils/version_check.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     5768 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/utils/wrapped_credentials.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/vendored/__init__.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1452 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/.travis.yml
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3233 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/CONTRIBUTING
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1007 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/LICENSE
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      343 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/MANIFEST.in
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     6517 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/README.rst
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    41904 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    42140 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/auth.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2064 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/auth_handler.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/awslambda/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1753 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/awslambda/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1411 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/awslambda/exceptions.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    21546 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/awslambda/layer1.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/beanstalk/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1727 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/beanstalk/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2131 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/beanstalk/exception.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    56366 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/beanstalk/layer1.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    28051 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/beanstalk/response.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1078 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/beanstalk/wrapper.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/cacerts/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1097 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/cacerts/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)   268839 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/cacerts/cacerts.txt
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/cloudformation/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2185 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/cloudformation/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    42922 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/cloudformation/connection.py
+-rwxr-x---   0 rrauber  (785948) primarygroup (89939)    14230 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/cloudformation/stack.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1686 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/cloudformation/template.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/cloudfront/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    15176 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/cloudfront/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    31285 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/cloudfront/distribution.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1205 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/cloudfront/exception.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4483 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/cloudfront/identity.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     8106 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/cloudfront/invalidation.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1557 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/cloudfront/logging.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1798 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/cloudfront/object.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     6060 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/cloudfront/origin.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2074 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/cloudfront/signers.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/cloudhsm/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1726 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/cloudhsm/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1347 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/cloudhsm/exceptions.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    16187 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/cloudhsm/layer1.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/cloudsearch/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1750 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/cloudsearch/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     9780 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/cloudsearch/document.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    15607 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/cloudsearch/domain.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    34141 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/cloudsearch/layer1.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3010 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/cloudsearch/layer2.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     8711 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/cloudsearch/optionstatus.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    13775 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/cloudsearch/search.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3156 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/cloudsearch/sourceattribute.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/cloudsearch2/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1743 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/cloudsearch2/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    11630 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/cloudsearch2/document.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    21247 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/cloudsearch2/domain.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      818 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/cloudsearch2/exceptions.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    32565 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/cloudsearch2/layer1.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3814 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/cloudsearch2/layer2.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     8121 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/cloudsearch2/optionstatus.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    16222 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/cloudsearch2/search.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/cloudsearchdomain/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1832 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/cloudsearchdomain/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1276 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/cloudsearchdomain/exceptions.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    29110 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/cloudsearchdomain/layer1.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/cloudtrail/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1744 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/cloudtrail/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2246 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/cloudtrail/exceptions.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    17002 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/cloudtrail/layer1.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/codedeploy/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1743 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/codedeploy/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4103 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/codedeploy/exceptions.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    40600 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/codedeploy/layer1.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/cognito/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1123 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/cognito/__init__.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/cognito/identity/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1820 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/cognito/identity/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1125 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/cognito/identity/exceptions.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    24701 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/cognito/identity/layer1.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/cognito/sync/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1761 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/cognito/sync/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1648 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/cognito/sync/exceptions.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    21122 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/cognito/sync/layer1.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4380 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/compat.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/configservice/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1764 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/configservice/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2528 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/configservice/exceptions.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    17243 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/configservice/layer1.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    57524 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/connection.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/contrib/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1105 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/contrib/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1885 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/contrib/ymlmessage.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/datapipeline/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1750 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/datapipeline/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1471 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/datapipeline/exceptions.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    29022 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/datapipeline/layer1.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/directconnect/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1771 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/directconnect/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1239 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/directconnect/exceptions.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    23592 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/directconnect/layer1.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/dynamodb/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1717 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/dynamodb/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     9810 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/dynamodb/batch.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3881 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/dynamodb/condition.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1687 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/dynamodb/exceptions.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     8280 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/dynamodb/item.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    24057 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/dynamodb/layer1.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    33814 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/dynamodb/layer2.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3978 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/dynamodb/schema.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    21808 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/dynamodb/table.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    12493 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/dynamodb/types.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/dynamodb2/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1786 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/dynamodb2/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1990 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/dynamodb2/exceptions.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     8292 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/dynamodb2/fields.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    14656 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/dynamodb2/items.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)   152740 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/dynamodb2/layer1.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     6602 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/dynamodb2/results.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    61606 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/dynamodb2/table.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      932 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/dynamodb2/types.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3094 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     5348 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/address.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2710 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/attributes.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/autoscale/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    37122 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/autoscale/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3058 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/autoscale/activity.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    13612 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/autoscale/group.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2428 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/autoscale/instance.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    10807 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/autoscale/launchconfig.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1958 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/autoscale/limits.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     6230 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/autoscale/policy.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1549 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/autoscale/request.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3060 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/autoscale/scheduled.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3379 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/autoscale/tag.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     6372 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/blockdevicemapping.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2754 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/bundleinstance.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3838 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/buyreservation.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/cloudwatch/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    24487 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/cloudwatch/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    12192 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/cloudwatch/alarm.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1668 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/cloudwatch/datapoint.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1533 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/cloudwatch/dimension.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1309 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/cloudwatch/listelement.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     7512 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/cloudwatch/metric.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)   178945 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/connection.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     5554 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/ec2object.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/elb/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    32543 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/elb/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     5103 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/elb/attributes.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3775 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/elb/healthcheck.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2658 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/elb/instancestate.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1512 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/elb/listelement.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3377 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/elb/listener.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    16388 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/elb/loadbalancer.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3856 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/elb/policies.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1576 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/elb/securitygroup.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1559 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/group.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    16344 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/image.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    23438 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/instance.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1893 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/instanceinfo.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     6854 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/instancestatus.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2273 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/instancetype.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4351 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/keypair.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3829 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/launchspecification.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    13597 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/networkinterface.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2002 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/placementgroup.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1568 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/regioninfo.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    13047 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/reservedinstance.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    14687 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/securitygroup.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     7539 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/snapshot.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2434 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/spotdatafeedsubscription.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     7288 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/spotinstancerequest.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2093 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/spotpricehistory.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3076 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/tag.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    10436 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/volume.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     6329 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/volumestatus.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2601 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2/zone.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2containerservice/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1833 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2containerservice/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1269 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2containerservice/exceptions.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    31044 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ec2containerservice/layer1.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/ecs/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4177 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ecs/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     5510 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ecs/item.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/elasticache/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1753 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/elasticache/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    73538 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/elasticache/layer1.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/elastictranscoder/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1831 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/elastictranscoder/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1595 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/elastictranscoder/exceptions.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    44082 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/elastictranscoder/layer1.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/emr/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1963 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/emr/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1830 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/emr/bootstrap_action.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    29087 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/emr/connection.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    12903 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/emr/emrobject.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2079 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/emr/instance_group.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     9011 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/emr/step.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    33374 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/endpoints.json
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     9744 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/endpoints.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    18685 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/exception.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/file/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2644 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/file/README
+-rwxr-x---   0 rrauber  (785948) primarygroup (89939)     1258 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/file/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4085 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/file/bucket.py
+-rwxr-x---   0 rrauber  (785948) primarygroup (89939)     1490 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/file/connection.py
+-rwxr-x---   0 rrauber  (785948) primarygroup (89939)     6882 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/file/key.py
+-rwxr-x---   0 rrauber  (785948) primarygroup (89939)     1321 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/file/simpleresultset.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/fps/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1101 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/fps/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    14335 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/fps/connection.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     8704 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/fps/exception.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     7866 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/fps/response.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/glacier/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1712 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/glacier/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    17241 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/glacier/concurrent.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2195 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/glacier/exceptions.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     7999 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/glacier/job.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    60801 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/glacier/layer1.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3745 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/glacier/layer2.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2246 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/glacier/response.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     6310 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/glacier/utils.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    17601 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/glacier/vault.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     9668 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/glacier/writer.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/gs/
+-rwxr-x---   0 rrauber  (785948) primarygroup (89939)     1076 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/gs/__init__.py
+-rwxr-x---   0 rrauber  (785948) primarygroup (89939)    11457 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/gs/acl.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    48387 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/gs/bucket.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2923 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/gs/bucketlistresultset.py
+-rwxr-x---   0 rrauber  (785948) primarygroup (89939)     5818 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/gs/connection.py
+-rwxr-x---   0 rrauber  (785948) primarygroup (89939)     7717 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/gs/cors.py
+-rwxr-x---   0 rrauber  (785948) primarygroup (89939)     3263 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/gs/encryptionconfig.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    42726 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/gs/key.py
+-rwxr-x---   0 rrauber  (785948) primarygroup (89939)     9054 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/gs/lifecycle.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    31471 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/gs/resumable_upload_handler.py
+-rwxr-x---   0 rrauber  (785948) primarygroup (89939)     1947 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/gs/user.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2382 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/handler.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     6125 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/https_connection.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/iam/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3312 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/iam/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    71706 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/iam/connection.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1660 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/iam/summarymap.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     6032 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/jsonresponse.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/kinesis/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1720 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/kinesis/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1611 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/kinesis/exceptions.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    41004 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/kinesis/layer1.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/kms/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1692 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/kms/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1523 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/kms/exceptions.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    33975 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/kms/layer1.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/logs/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1725 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/logs/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1732 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/logs/exceptions.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    22588 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/logs/layer1.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/machinelearning/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1808 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/machinelearning/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1596 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/machinelearning/exceptions.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    59588 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/machinelearning/layer1.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/manage/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1108 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/manage/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    14739 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/manage/cmdshell.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2502 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/manage/propget.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    21863 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/manage/server.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     6781 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/manage/task.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      806 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/manage/test_manage.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    16296 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/manage/volume.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/mashups/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1108 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/mashups/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2783 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/mashups/interactive.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4191 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/mashups/iobject.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     7584 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/mashups/order.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    14068 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/mashups/server.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/mturk/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1108 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/mturk/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    42356 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/mturk/connection.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2045 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/mturk/layoutparam.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4194 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/mturk/notification.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1967 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/mturk/price.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     8064 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/mturk/qualification.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    16126 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/mturk/question.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/mws/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1101 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/mws/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    49808 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/mws/connection.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2396 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/mws/exception.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    23191 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/mws/response.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/opsworks/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1729 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/opsworks/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1288 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/opsworks/exceptions.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)   129869 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/opsworks/layer1.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2711 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/plugin.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    22626 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/provider.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/pyami/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1107 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/pyami/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     5748 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/pyami/bootstrap.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     8665 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/pyami/config.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1707 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/pyami/copybot.cfg
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4261 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/pyami/copybot.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1238 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/pyami/helloworld.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/pyami/installers/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2047 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/pyami/installers/__init__.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/pyami/installers/ubuntu/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1112 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/pyami/installers/ubuntu/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1929 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/pyami/installers/ubuntu/apache.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     9942 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/pyami/installers/ubuntu/ebs.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3545 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/pyami/installers/ubuntu/installer.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4857 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/pyami/installers/ubuntu/mysql.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     6270 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/pyami/installers/ubuntu/trac.py
+-rwxr-x---   0 rrauber  (785948) primarygroup (89939)     7585 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/pyami/launch_ami.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1427 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/pyami/scriptbase.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2475 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/pyami/startup.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/rds/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    68399 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/rds/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    17366 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/rds/dbinstance.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     6651 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/rds/dbsecuritygroup.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     6398 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/rds/dbsnapshot.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2825 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/rds/dbsubnetgroup.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1876 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/rds/event.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2533 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/rds/logfile.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    15665 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/rds/optiongroup.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     7037 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/rds/parametergroup.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1513 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/rds/regioninfo.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2011 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/rds/statusinfo.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3131 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/rds/vpcsecuritygroupmembership.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/rds2/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2127 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/rds2/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4451 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/rds2/exceptions.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)   159622 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/rds2/layer1.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/redshift/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1726 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/redshift/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     8236 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/redshift/exceptions.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)   138582 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/redshift/layer1.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     9475 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/regioninfo.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1486 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/requestlog.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     6556 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/resultset.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/roboto/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        2 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/roboto/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    18579 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/roboto/awsqueryrequest.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4453 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/roboto/awsqueryservice.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4529 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/roboto/param.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/route53/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3393 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/route53/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    23355 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/route53/connection.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/route53/domains/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1808 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/route53/domains/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1482 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/route53/domains/exceptions.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    32418 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/route53/domains/layer1.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1239 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/route53/exception.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     5824 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/route53/healthcheck.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1961 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/route53/hostedzone.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    14689 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/route53/record.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1841 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/route53/status.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    16231 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/route53/zone.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/s3/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2784 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/s3/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     5716 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/s3/acl.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    79628 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/s3/bucket.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     6887 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/s3/bucketlistresultset.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3183 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/s3/bucketlogging.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    26562 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/s3/connection.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     8941 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/s3/cors.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2087 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/s3/deletemarker.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    83773 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/s3/key.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4427 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/s3/keyfile.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    10883 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/s3/lifecycle.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4757 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/s3/multidelete.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    12049 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/s3/multipart.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1661 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/s3/prefix.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    15622 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/s3/resumable_download_handler.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1732 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/s3/tagging.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1968 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/s3/user.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    10607 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/s3/website.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:48.000000 gsutil-5.9/gslib/vendored/boto/boto/sdb/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1963 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/sdb/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    26088 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/sdb/connection.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/boto/sdb/db/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1108 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/sdb/db/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2437 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/sdb/db/blob.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2036 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/sdb/db/key.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/boto/sdb/db/manager/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4210 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/sdb/db/manager/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    27253 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/sdb/db/manager/sdbmanager.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    18612 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/sdb/db/manager/xmlmanager.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    10158 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/sdb/db/model.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    25086 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/sdb/db/property.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3072 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/sdb/db/query.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     8223 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/sdb/db/sequence.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     5427 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/sdb/db/test_db.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    14351 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/sdb/domain.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     6885 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/sdb/item.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3674 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/sdb/queryresultset.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1524 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/sdb/regioninfo.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/boto/services/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1108 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/services/__init__.py
+-rwxr-x---   0 rrauber  (785948) primarygroup (89939)     8144 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/services/bs.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2393 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/services/message.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     5596 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/services/result.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     6632 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/services/service.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3375 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/services/servicedef.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1524 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/services/sonofmmm.cfg
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3498 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/services/sonofmmm.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3555 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/services/submit.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/boto/ses/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2019 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ses/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    23685 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ses/connection.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1830 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/ses/exceptions.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/boto/sns/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2123 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/sns/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    32905 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/sns/connection.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/boto/sqs/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1787 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/sqs/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1718 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/sqs/attributes.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3515 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/sqs/batchresults.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4729 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/sqs/bigmessage.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    24799 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/sqs/connection.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1755 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/sqs/jsonmessage.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     9892 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/sqs/message.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2487 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/sqs/messageattributes.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    20084 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/sqs/queue.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1524 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/sqs/regioninfo.py
+-rwxr-x---   0 rrauber  (785948) primarygroup (89939)    41807 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/storage_uri.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/boto/sts/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2026 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/sts/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    32142 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/sts/connection.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     8210 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/sts/credentials.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/boto/support/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1720 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/support/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1715 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/support/exceptions.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    29434 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/support/layer1.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/boto/swf/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1807 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/swf/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      958 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/swf/exceptions.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    63991 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/swf/layer1.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    11938 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/swf/layer1_decisions.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    13056 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/swf/layer2.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    40850 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/utils.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/boto/vendored/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/vendored/__init__.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/boto/vendored/regions/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      893 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/vendored/regions/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      958 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/vendored/regions/exceptions.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     8433 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/vendored/regions/regions.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    32447 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/vendored/six.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/boto/vpc/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    68463 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/vpc/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1968 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/vpc/customergateway.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2472 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/vpc/dhcpoptions.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2585 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/vpc/internetgateway.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4976 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/vpc/networkacl.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4033 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/vpc/routetable.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2101 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/vpc/subnet.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     7868 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/vpc/vpc.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     5423 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/vpc/vpc_peering_connection.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     7722 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/vpc/vpnconnection.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2853 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/boto/vpc/vpngateway.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     8865 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/pylintrc
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      118 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/requirements-docs.txt
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)       22 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/requirements-py33.txt
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      176 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/requirements.txt
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)       28 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/setup.cfg
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4899 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/setup.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1103 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1560 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/compat.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/db/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3474 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/db/test_lists.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4429 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/db/test_password.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4971 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/db/test_query.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4065 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/db/test_sequence.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/devpay/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/devpay/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     7412 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/devpay/test_s3.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/fps/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/fps/__init__.py
+-rwxr-x---   0 rrauber  (785948) primarygroup (89939)     3792 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/fps/test.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      951 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/fps/test_verify_signature.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2340 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/__init__.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/awslambda/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1123 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/awslambda/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1668 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/awslambda/test_awslambda.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/beanstalk/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     9286 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/beanstalk/test_wrapper.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/cloudformation/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1175 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/cloudformation/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1588 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/cloudformation/test_cert_verification.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     5409 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/cloudformation/test_connection.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/cloudhsm/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1123 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/cloudhsm/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1883 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/cloudhsm/test_cloudhsm.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/cloudsearch/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1175 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/cloudsearch/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1577 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/cloudsearch/test_cert_verification.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2742 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/cloudsearch/test_layers.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/cloudsearch2/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1175 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/cloudsearch2/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1579 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/cloudsearch2/test_cert_verification.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2846 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/cloudsearch2/test_layers.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/cloudtrail/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/cloudtrail/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1517 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/cloudtrail/test_cert_verification.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3057 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/cloudtrail/test_cloudtrail.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/codedeploy/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1123 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/codedeploy/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1884 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/codedeploy/test_codedeploy.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/cognito/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1779 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/cognito/__init__.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/cognito/identity/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1123 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/cognito/identity/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2545 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/cognito/identity/test_cognito_identity.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/cognito/sync/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1123 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/cognito/sync/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2198 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/cognito/sync/test_cognito_sync.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/configservice/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1123 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/configservice/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2081 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/configservice/test_configservice.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/datapipeline/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/datapipeline/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1524 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/datapipeline/test_cert_verification.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     5445 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/datapipeline/test_layer1.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/directconnect/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/directconnect/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1570 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/directconnect/test_directconnect.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/dynamodb/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1099 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/dynamodb/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1567 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/dynamodb/test_cert_verification.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    11776 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/dynamodb/test_layer1.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    19814 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/dynamodb/test_layer2.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3553 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/dynamodb/test_table.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/dynamodb2/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/dynamodb2/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1968 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/dynamodb2/forum_test_data.json
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1564 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/dynamodb2/test_cert_verification.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    26329 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/dynamodb2/test_highlevel.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    13004 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/dynamodb2/test_layer1.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/ec2/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1103 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/ec2/__init__.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/ec2/autoscale/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1098 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/ec2/autoscale/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1575 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/ec2/autoscale/test_cert_verification.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     6560 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/ec2/autoscale/test_connection.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/ec2/cloudwatch/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1103 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/ec2/cloudwatch/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1597 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/ec2/cloudwatch/test_cert_verification.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    11614 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/ec2/cloudwatch/test_connection.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/ec2/elb/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1103 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/ec2/elb/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1577 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/ec2/elb/test_cert_verification.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    12554 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/ec2/elb/test_connection.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1549 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/ec2/test_cert_verification.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     9106 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/ec2/test_connection.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/ec2/vpc/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/ec2/vpc/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     8619 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/ec2/vpc/test_connection.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/ec2containerservice/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1122 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/ec2containerservice/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1749 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/ec2containerservice/test_ec2containerservice.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/elasticache/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/elasticache/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2728 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/elasticache/test_layer1.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/elastictranscoder/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/elastictranscoder/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1490 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/elastictranscoder/test_cert_verification.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4984 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/elastictranscoder/test_layer1.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/emr/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1104 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/emr/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1542 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/emr/test_cert_verification.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/glacier/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1132 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/glacier/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1556 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/glacier/test_cert_verification.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2028 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/glacier/test_layer1.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2025 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/glacier/test_layer2.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/gs/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/gs/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3473 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/gs/cb_test_harness.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    22170 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/gs/test_basic.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    14317 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/gs/test_generation_conditionals.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    16183 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/gs/test_resumable_downloads.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    25820 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/gs/test_resumable_uploads.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     6568 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/gs/test_storage_uri.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     9786 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/gs/test_versioning.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4981 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/gs/testcase.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3244 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/gs/util.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/iam/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1098 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/iam/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1542 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/iam/test_cert_verification.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1746 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/iam/test_connection.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3943 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/iam/test_password_policy.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3942 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/iam/test_policy.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/kinesis/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/kinesis/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1502 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/kinesis/test_cert_verification.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4404 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/kinesis/test_kinesis.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/kms/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1669 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/kms/test_kms.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/logs/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/logs/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1509 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/logs/test_cert_verification.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1814 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/logs/test_layer1.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/mws/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/mws/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4682 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/mws/test.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/opsworks/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/opsworks/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2121 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/opsworks/test_layer1.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/rds/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1175 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/rds/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1548 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/rds/test_cert_verification.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3841 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/rds/test_db_subnet_group.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     5433 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/rds/test_promote_modify.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/rds2/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1175 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/rds2/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1552 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/rds2/test_cert_verification.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3638 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/rds2/test_connection.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/redshift/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/redshift/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1447 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/redshift/test_cert_verification.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     5384 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/redshift/test_layer1.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/route53/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1661 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/route53/__init__.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/route53/domains/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1122 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/route53/domains/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1887 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/route53/domains/test_route53domains.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4876 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/route53/test_alias_resourcerecordsets.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1640 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/route53/test_cert_verification.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    10681 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/route53/test_health_check.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3293 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/route53/test_resourcerecordsets.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     7729 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/route53/test_zone.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/s3/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1104 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/s3/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    23698 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/s3/mock_storage_service.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3541 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/s3/other_cacerts.txt
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    12530 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/s3/test_bucket.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1532 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/s3/test_cert_verification.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3311 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/s3/test_connect_to_region.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    10065 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/s3/test_connection.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3108 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/s3/test_cors.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3736 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/s3/test_encryption.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     6172 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/s3/test_https_cert_validation.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    21476 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/s3/test_key.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3629 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/s3/test_mfa.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     6770 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/s3/test_multidelete.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     8408 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/s3/test_multipart.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     8255 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/s3/test_pool.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     6218 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/s3/test_versioning.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/sdb/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1104 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/sdb/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1544 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/sdb/test_cert_verification.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4320 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/sdb/test_connection.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/ses/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/ses/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1558 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/ses/test_cert_verification.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1495 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/ses/test_connection.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/sns/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1104 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/sns/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1535 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/sns/test_cert_verification.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2585 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/sns/test_connection.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3836 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/sns/test_sns_sqs_subscription.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/sqs/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1104 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/sqs/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2688 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/sqs/test_bigmessage.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1535 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/sqs/test_cert_verification.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    11205 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/sqs/test_connection.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/storage_uri/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/storage_uri/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2355 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/storage_uri/test_storage_uri.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/sts/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1099 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/sts/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1546 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/sts/test_cert_verification.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3405 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/sts/test_session_token.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/support/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/support/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1435 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/support/test_cert_verification.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3029 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/support/test_layer1.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/swf/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/swf/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1553 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/swf/test_cert_verification.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    10743 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/swf/test_layer1.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     6866 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/integration/swf/test_layer1_workflow_execution.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/mturk/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/mturk/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      934 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/mturk/_init_environment.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      587 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/mturk/all_tests.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1491 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/mturk/cleanup_tests.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1792 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/mturk/common.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3365 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/mturk/create_free_text_question_regex.doctest
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2987 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/mturk/create_hit.doctest
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3146 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/mturk/create_hit_binary.doctest
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      965 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/mturk/create_hit_external.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3246 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/mturk/create_hit_from_hit_type.doctest
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      505 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/mturk/create_hit_test.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      947 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/mturk/create_hit_with_qualifications.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      747 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/mturk/hit_persistence.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      430 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/mturk/mocks.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3967 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/mturk/reviewable_hits.doctest
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      262 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/mturk/run-doctest.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      398 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/mturk/search_hits.doctest
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1743 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/mturk/selenium_support.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      148 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/mturk/support.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      314 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/mturk/test_disable_hit.py
+-rwxr-x---   0 rrauber  (785948) primarygroup (89939)     2922 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/test.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4121 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/__init__.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/auth/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/auth/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    27694 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/auth/test_sigv4.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3324 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/auth/test_stsanon.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/awslambda/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1123 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/awslambda/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4303 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/awslambda/test_awslambda.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/beanstalk/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/beanstalk/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2085 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/beanstalk/test_exception.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     6971 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/beanstalk/test_layer1.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/cloudformation/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/cloudformation/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    30695 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/cloudformation/test_connection.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     9168 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/cloudformation/test_stack.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/cloudfront/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/cloudfront/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     9736 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/cloudfront/test_connection.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      611 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/cloudfront/test_distribution.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      849 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/cloudfront/test_invalidation.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4051 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/cloudfront/test_invalidation_list.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    16806 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/cloudfront/test_signed_urls.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/cloudsearch/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        1 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/cloudsearch/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     8513 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/cloudsearch/test_connection.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    12029 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/cloudsearch/test_document.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1466 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/cloudsearch/test_exceptions.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    13726 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/cloudsearch/test_search.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/cloudsearch2/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      533 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/cloudsearch2/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     8278 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/cloudsearch2/test_connection.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    12068 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/cloudsearch2/test_document.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1469 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/cloudsearch2/test_exceptions.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    12329 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/cloudsearch2/test_search.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/cloudsearchdomain/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/cloudsearchdomain/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4869 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/cloudsearchdomain/test_cloudsearchdomain.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/cloudtrail/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/cloudtrail/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2731 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/cloudtrail/test_layer1.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/data/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    33374 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/data/new_endpoints.json
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    34623 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/data/old_endpoints.json
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/directconnect/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/directconnect/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2202 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/directconnect/test_layer1.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/dynamodb/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/dynamodb/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4073 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/dynamodb/test_batch.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4826 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/dynamodb/test_layer2.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     7271 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/dynamodb/test_types.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/dynamodb2/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/dynamodb2/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2275 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/dynamodb2/test_layer1.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)   103923 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/dynamodb2/test_table.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/ec2/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/ec2/__init__.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/ec2/autoscale/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/ec2/autoscale/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    36594 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/ec2/autoscale/test_group.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/ec2/cloudwatch/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/ec2/cloudwatch/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3787 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/ec2/cloudwatch/test_connection.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/ec2/elb/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/ec2/elb/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     8314 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/ec2/elb/test_attribute.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4478 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/ec2/elb/test_listener.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     5660 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/ec2/elb/test_loadbalancer.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     5950 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/ec2/test_address.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     6739 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/ec2/test_blockdevicemapping.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    76351 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/ec2/test_connection.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     7770 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/ec2/test_ec2object.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    11050 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/ec2/test_instance.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1811 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/ec2/test_instancestatus.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     5221 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/ec2/test_instancetype.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    12575 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/ec2/test_networkinterface.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1670 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/ec2/test_reservedinstance.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     8556 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/ec2/test_securitygroup.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2733 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/ec2/test_snapshot.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     5101 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/ec2/test_spotinstance.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    11441 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/ec2/test_volume.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/ec2containerservice/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/ec2containerservice/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1917 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/ec2containerservice/test_connection.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/ecs/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/ecs/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2750 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/ecs/test_connection.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/elasticache/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/elasticache/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      691 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/elasticache/test_api_interface.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/emr/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    39107 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/emr/test_connection.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    17266 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/emr/test_emr_responses.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2056 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/emr/test_instance_group_args.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/glacier/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/glacier/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     7560 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/glacier/test_concurrent.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3711 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/glacier/test_job.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     5631 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/glacier/test_layer1.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    14402 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/glacier/test_layer2.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1656 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/glacier/test_response.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     6952 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/glacier/test_utils.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     7480 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/glacier/test_vault.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     8370 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/glacier/test_writer.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/iam/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/iam/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    19292 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/iam/test_connection.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    24931 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/iam/test_policy.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/kinesis/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/kinesis/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2971 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/kinesis/test_kinesis.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/kms/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1123 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/kms/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2636 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/kms/test_kms.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/logs/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/logs/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      655 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/logs/test_layer1.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/machinelearning/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1123 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/machinelearning/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2076 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/machinelearning/test_machinelearning.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/manage/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/manage/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2004 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/manage/test_ssh.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/mturk/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/mturk/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      860 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/mturk/test_connection.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     5954 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/mturk/test_locale_qualification_in.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     5971 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/mturk/test_locale_qualification_notin.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2931 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/mturk/test_qualification_doesnotexist.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2901 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/mturk/test_qualification_exists.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3191 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/mturk/test_qualification_qualtypewithscore_in.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/mws/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/mws/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     8457 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/mws/test_connection.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     8822 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/mws/test_response.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/provider/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/provider/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    18277 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/provider/test_provider.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/pyami/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/pyami/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2608 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/pyami/test_config.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/rds/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/rds/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    35025 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/rds/test_connection.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    14445 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/rds/test_snapshot.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/rds2/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/rds2/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     8806 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/rds2/test_connection.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/route53/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/route53/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    32801 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/route53/test_connection.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2548 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/route53/test_zone.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/s3/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/s3/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     8298 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/s3/test_bucket.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2454 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/s3/test_bucketlistresultset.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    27567 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/s3/test_connection.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2461 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/s3/test_cors_configuration.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     9132 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/s3/test_key.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4589 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/s3/test_keyfile.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     7103 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/s3/test_lifecycle.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1526 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/s3/test_tagging.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    12504 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/s3/test_uri.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     9219 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/s3/test_website.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/ses/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/ses/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     7581 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/ses/test_identity.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/sns/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/sns/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    11190 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/sns/test_connection.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/sqs/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/sqs/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    12787 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/sqs/test_connection.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4281 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/sqs/test_message.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1944 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/sqs/test_queue.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/sts/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/sts/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     8961 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/sts/test_connection.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1081 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/sts/test_credentials.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/swf/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/swf/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1181 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/swf/test_layer1_decisions.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4041 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/swf/test_layer2_actors.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1022 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/swf/test_layer2_base.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     6008 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/swf/test_layer2_domain.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1739 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/swf/test_layer2_types.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    24173 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/test_connect_to_region.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    23981 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/test_connection.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)       68 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/test_endpoints.json
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    13751 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/test_endpoints.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     5224 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/test_exception.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     8229 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/test_regioninfo.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/utils/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/utils/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    14461 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/utils/test_utils.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/vpc/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)       29 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/vpc/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4610 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/vpc/test_customergateway.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     8767 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/vpc/test_dhcpoptions.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     6080 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/vpc/test_internetgateway.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    20957 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/vpc/test_networkacl.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    20511 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/vpc/test_routetable.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     5485 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/vpc/test_subnet.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    13752 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/vpc/test_vpc.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    13164 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/vpc/test_vpc_peering_connection.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    10421 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/vpc/test_vpnconnection.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     8709 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tests/unit/vpc/test_vpngateway.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      836 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/boto/tox.ini
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/oauth2client/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      379 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/.coveragerc
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/oauth2client/.github/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      233 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/.github/ISSUE_TEMPLATE.md
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      237 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/.github/PULL_REQUEST_TEMPLATE.md
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1025 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/.travis.yml
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    19859 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/CHANGELOG.md
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1981 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/CODE_OF_CONDUCT.md
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     8163 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/CONTRIBUTING.md
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3476 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/CONTRIBUTORS.md
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    11507 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/LICENSE
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)       65 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/MANIFEST.in
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)       37 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/Makefile
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1494 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/README.md
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/oauth2client/docs/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     6789 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/docs/Makefile
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/oauth2client/docs/_static/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     5709 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/docs/_static/favicon.ico
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1226 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/docs/_static/google_logo.png
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3357 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/docs/conf.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4945 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/docs/index.rst
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)       91 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/docs/requirements.txt
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/oauth2client/docs/source/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      150 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/docs/source/oauth2client.client.rst
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      171 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/docs/source/oauth2client.clientsecrets.rst
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      185 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/docs/source/oauth2client.contrib.appengine.rst
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      182 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/docs/source/oauth2client.contrib.devshell.rst
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      214 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/docs/source/oauth2client.contrib.dictionary_storage.rst
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      210 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/docs/source/oauth2client.contrib.django_util.apps.rst
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      228 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/docs/source/oauth2client.contrib.django_util.decorators.rst
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      216 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/docs/source/oauth2client.contrib.django_util.models.rst
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      568 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/docs/source/oauth2client.contrib.django_util.rst
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      219 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/docs/source/oauth2client.contrib.django_util.signals.rst
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      210 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/docs/source/oauth2client.contrib.django_util.site.rst
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      219 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/docs/source/oauth2client.contrib.django_util.storage.rst
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      213 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/docs/source/oauth2client.contrib.django_util.views.rst
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      190 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/docs/source/oauth2client.contrib.flask_util.rst
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      167 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/docs/source/oauth2client.contrib.gce.rst
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      205 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/docs/source/oauth2client.contrib.keyring_storage.rst
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      237 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/docs/source/oauth2client.contrib.multiprocess_file_storage.rst
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      634 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/docs/source/oauth2client.contrib.rst
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      188 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/docs/source/oauth2client.contrib.sqlalchemy.rst
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      182 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/docs/source/oauth2client.contrib.xsrfutil.rst
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      147 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/docs/source/oauth2client.crypt.rst
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      144 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/docs/source/oauth2client.file.rst
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      441 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/docs/source/oauth2client.rst
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      179 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/docs/source/oauth2client.service_account.rst
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      147 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/docs/source/oauth2client.tools.rst
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      159 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/docs/source/oauth2client.transport.rst
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/oauth2client/oauth2client/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1002 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/oauth2client/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    10852 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/oauth2client/_helpers.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4556 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/oauth2client/_openssl_crypt.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2198 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/oauth2client/_pkce.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     6367 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/oauth2client/_pure_python_crypt.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4118 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/oauth2client/_pycrypto_crypt.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    83289 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/oauth2client/client.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     5281 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/oauth2client/clientsecrets.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/oauth2client/oauth2client/contrib/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      220 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/oauth2client/contrib/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     5381 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/oauth2client/contrib/_appengine_ndb.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4463 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/oauth2client/contrib/_metadata.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    33941 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/oauth2client/contrib/appengine.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4991 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/oauth2client/contrib/devshell.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2278 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/oauth2client/contrib/dictionary_storage.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/oauth2client/oauth2client/contrib/django_util/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    18152 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/oauth2client/contrib/django_util/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1213 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/oauth2client/contrib/django_util/apps.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     5564 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/oauth2client/contrib/django_util/decorators.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2742 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/oauth2client/contrib/django_util/models.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1050 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/oauth2client/contrib/django_util/signals.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      960 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/oauth2client/contrib/django_util/site.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3070 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/oauth2client/contrib/django_util/storage.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     6785 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/oauth2client/contrib/django_util/views.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    19413 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/oauth2client/contrib/flask_util.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     5431 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/oauth2client/contrib/gce.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3091 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/oauth2client/contrib/keyring_storage.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    11785 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/oauth2client/contrib/multiprocess_file_storage.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     5246 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/oauth2client/contrib/sqlalchemy.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3470 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/oauth2client/contrib/xsrfutil.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     8447 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/oauth2client/crypt.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2730 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/oauth2client/file.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    28210 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/oauth2client/service_account.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     9069 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/oauth2client/tools.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    10367 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/oauth2client/transport.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/oauth2client/samples/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      712 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/samples/call_compute_service.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/oauth2client/samples/googleappengine/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      160 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/samples/googleappengine/app.yaml
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      771 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/samples/googleappengine/call_compute_service_from_gae.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1261 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/samples/oauth2_for_devices.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/oauth2client/scripts/
+-rwxr-x---   0 rrauber  (785948) primarygroup (89939)     1028 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/scripts/build_docs.sh
+-rwxr-x---   0 rrauber  (785948) primarygroup (89939)     1196 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/scripts/install.sh
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      413 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/scripts/local_test_setup.sample
+-rwxr-x---   0 rrauber  (785948) primarygroup (89939)      839 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/scripts/run.sh
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2001 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/scripts/run_gce_system_tests.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3875 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/scripts/run_system_tests.py
+-rwxr-x---   0 rrauber  (785948) primarygroup (89939)     1803 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/scripts/run_system_tests.sh
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)       28 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/setup.cfg
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2555 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/setup.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1124 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/conftest.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/contrib/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/contrib/__init__.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/contrib/appengine/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/contrib/appengine/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1814 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/contrib/appengine/conftest.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     6087 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/contrib/appengine/test__appengine_ndb.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    45276 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/contrib/appengine/test_appengine.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/contrib/django_util/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1442 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/contrib/django_util/__init__.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      969 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/contrib/django_util/apps.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      890 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/contrib/django_util/models.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1511 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/contrib/django_util/settings.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     9648 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/contrib/django_util/test_decorators.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3575 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/contrib/django_util/test_django_models.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     5763 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/contrib/django_util/test_django_storage.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     7260 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/contrib/django_util/test_django_util.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    12619 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/contrib/django_util/test_views.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    10361 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/contrib/test_devshell.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     3487 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/contrib/test_dictionary_storage.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    21608 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/contrib/test_flask_util.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     7817 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/contrib/test_gce.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     6950 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/contrib/test_keyring_storage.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4042 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/contrib/test_metadata.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    11874 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/contrib/test_multiprocess_file_storage.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4827 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/contrib/test_sqlalchemy.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    13065 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/contrib/test_xsrfutil.py
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/data/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      164 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/data/app.yaml
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1218 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/data/certs.json
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      297 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/data/client_secrets.json
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/data/gcloud/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2024 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/data/gcloud/application_default_credentials.json
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      122 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/data/gcloud/application_default_credentials_authorized_user.json
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2090 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/data/gcloud/application_default_credentials_malformed_1.json
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2061 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/data/gcloud/application_default_credentials_malformed_2.json
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2090 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/data/gcloud/application_default_credentials_malformed_3.json
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1248 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/data/key.json.enc
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1744 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/data/key.p12.enc
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1850 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/data/pem_from_pkcs12.pem
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1679 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/data/pem_from_pkcs12_alternate.pem
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2452 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/data/privatekey.p12
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1679 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/data/privatekey.pem
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      426 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/data/privatekey.pub
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1147 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/data/public_cert.pem
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      451 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/data/publickey_openssl.pem
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      263 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/data/unfilled_client_secrets.json
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      256 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/data/user-key.json.enc
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     4000 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/http_mock.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     9043 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/test__helpers.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1954 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/test__pkce.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     7521 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/test__pure_python_crypt.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2715 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/test__pycrypto_crypt.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)   103591 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/test_client.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    10368 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/test_clientsecrets.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    11871 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/test_crypt.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    10276 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/test_file.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    12308 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/test_jwt.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    28969 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/test_service_account.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     7557 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/test_tools.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     6157 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tests/test_transport.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     2569 2022-04-07 15:29:21.000000 gsutil-5.9/gslib/vendored/oauth2client/tox.ini
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    36661 2022-04-07 15:28:56.000000 gsutil-5.9/gslib/wildcard_iterator.py
+-rwxr-x---   0 rrauber  (785948) primarygroup (89939)      785 2022-04-07 15:28:56.000000 gsutil-5.9/gsutil
+drwxr-x---   0 rrauber  (785948) primarygroup (89939)        0 2022-04-07 15:58:49.000000 gsutil-5.9/gsutil.egg-info/
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)     1567 2022-04-07 15:58:48.000000 gsutil-5.9/gsutil.egg-info/PKG-INFO
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)    55102 2022-04-07 15:58:48.000000 gsutil-5.9/gsutil.egg-info/SOURCES.txt
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        1 2022-04-07 15:58:48.000000 gsutil-5.9/gsutil.egg-info/dependency_links.txt
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)       47 2022-04-07 15:58:48.000000 gsutil-5.9/gsutil.egg-info/entry_points.txt
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)      280 2022-04-07 15:58:48.000000 gsutil-5.9/gsutil.egg-info/requires.txt
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)       11 2022-04-07 15:58:48.000000 gsutil-5.9/gsutil.egg-info/top_level.txt
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)        1 2022-04-07 15:58:48.000000 gsutil-5.9/gsutil.egg-info/zip-safe
+-rwxr-x---   0 rrauber  (785948) primarygroup (89939)     6284 2022-04-07 15:28:56.000000 gsutil-5.9/gsutil.py
+-rw-r-----   0 rrauber  (785948) primarygroup (89939)       38 2022-04-07 15:58:49.000000 gsutil-5.9/setup.cfg
+-rwxr-x---   0 rrauber  (785948) primarygroup (89939)     5426 2022-04-07 15:28:56.000000 gsutil-5.9/setup.py
```

### filetype from file(1)

```diff
@@ -1 +1 @@
-POSIX tar archive
+POSIX tar archive (GNU)
```

### Comparing `gsutil-5.8/CHANGES.md` & `gsutil-5.9/CHANGES.md`

 * *Files 0% similar despite different names*

```diff
@@ -1,7011 +1,7056 @@
-00000000: 5265 6c65 6173 6520 352e 3820 2872 656c  Release 5.8 (rel
+00000000: 5265 6c65 6173 6520 352e 3920 2872 656c  Release 5.9 (rel
 00000010: 6561 7365 2064 6174 653a 2032 3032 322d  ease date: 2022-
-00000020: 3033 2d30 3729 0a3d 3d3d 3d3d 3d3d 3d3d  03-07).=========
+00000020: 3034 2d30 3729 0a3d 3d3d 3d3d 3d3d 3d3d  04-07).=========
 00000030: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
 00000040: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d0a 4e65  =============.Ne
 00000050: 7720 4665 6174 7572 6573 0a2d 2d2d 2d2d  w Features.-----
 00000060: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 2d20  -------------.- 
-00000070: 416c 6c6f 7720 6773 7574 696c 2074 6f20  Allow gsutil to 
-00000080: 7472 616e 7370 6172 656e 746c 7920 6361  transparently ca
-00000090: 6c6c 2067 636c 6f75 6420 7374 6f72 6167  ll gcloud storag
-000000a0: 6520 6370 206f 7220 726d 2074 6872 6f75  e cp or rm throu
-000000b0: 6768 2061 2073 6869 6d20 2865 6e61 626c  gh a shim (enabl
-000000c0: 6520 7669 6120 7468 6520 426f 746f 2063  e via the Boto c
-000000d0: 6f6e 6669 6775 7261 7469 6f6e 2047 5355  onfiguration GSU
-000000e0: 5469 6c3a 7573 655f 6763 6c6f 7564 5f73  Til:use_gcloud_s
-000000f0: 746f 7261 6765 3d54 7275 6529 0a2d 2041  torage=True).- A
-00000100: 6c6c 6f77 2065 7874 6572 6e61 6c20 6163  llow external ac
-00000110: 636f 756e 7420 6261 7365 6420 6372 6564  count based cred
-00000120: 656e 7469 616c 7320 2823 3134 3532 290a  entials (#1452).
-00000130: 0a42 7567 2046 6978 6573 0a2d 2d2d 2d2d  .Bug Fixes.-----
-00000140: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 2d20  -------------.- 
-00000150: 5072 6576 656e 7420 6572 726f 7220 6279  Prevent error by
-00000160: 206f 6e6c 7920 616c 6c6f 7769 6e67 2073   only allowing s
-00000170: 7570 6572 2d75 7365 7220 6672 6f6d 2063  uper-user from c
-00000180: 6861 6e67 696e 6720 6669 6c65 2075 7365  hanging file use
-00000190: 7220 7768 656e 2070 7265 7365 7276 6520  r when preserve 
-000001a0: 504f 5349 5820 6973 2065 6e61 626c 6564  POSIX is enabled
-000001b0: 2e20 2823 3134 3631 290a 0a4f 7468 6572  . (#1461)..Other
-000001c0: 2043 6861 6e67 6573 0a2d 2d2d 2d2d 2d2d   Changes.-------
-000001d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 2d20 5365  -----------.- Se
-000001e0: 7665 7261 6c20 646f 6375 6d65 6e74 6174  veral documentat
-000001f0: 696f 6e20 7570 6461 7465 7320 616e 6420  ion updates and 
-00000200: 636c 6172 6966 6963 6174 696f 6e73 2e0a  clarifications..
-00000210: 0a52 656c 6561 7365 2035 2e36 2028 7265  .Release 5.6 (re
-00000220: 6c65 6173 6520 6461 7465 3a20 3230 3232  lease date: 2022
-00000230: 2d30 312d 3036 290a 3d3d 3d3d 3d3d 3d3d  -01-06).========
-00000240: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00000250: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 0a4e  ==============.N
-00000260: 6577 2046 6561 7475 7265 730a 2d2d 2d2d  ew Features.----
-00000270: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d  --------------.-
-00000280: 2043 6865 636b 2060 4743 455f 4d45 5441   Check `GCE_META
-00000290: 4441 5441 5f48 4f53 5460 2065 6e76 6972  DATA_HOST` envir
-000002a0: 6f6e 6d65 6e74 2076 6172 6961 626c 6520  onment variable 
-000002b0: 2823 3134 3236 290a 2d20 416c 6c6f 7720  (#1426).- Allow 
-000002c0: 7365 7276 6963 6520 6163 636f 756e 7420  service account 
-000002d0: 746f 2075 7365 2070 7269 7661 7465 2074  to use private t
-000002e0: 6f6b 656e 2065 6e64 706f 696e 7420 2823  oken endpoint (#
-000002f0: 3134 3137 290a 2d20 4164 6420 6465 6661  1417).- Add defa
-00000300: 756c 7420 656e 6372 7970 7469 6f6e 206b  ult encryption k
-00000310: 6579 206f 7074 696f 6e20 282d 6b29 2074  ey option (-k) t
-00000320: 6f20 6d62 2063 6f6d 6d61 6e64 2028 2331  o mb command (#1
-00000330: 3431 3429 0a0a 4275 6720 4669 7865 730a  414)..Bug Fixes.
-00000340: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00000350: 2d2d 0a2d 2050 4150 3a20 4861 6e64 6c65  --.- PAP: Handle
-00000360: 2075 6e73 7065 6369 6669 6564 2061 7320   unspecified as 
-00000370: 7765 6c6c 2061 7320 696e 6865 7269 7465  well as inherite
-00000380: 6420 2823 3134 3034 290a 0a4f 7468 6572  d (#1404)..Other
-00000390: 2043 6861 6e67 6573 0a2d 2d2d 2d2d 2d2d   Changes.-------
-000003a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 2d20 5365  -----------.- Se
-000003b0: 7665 7261 6c20 646f 6375 6d65 6e74 6174  veral documentat
-000003c0: 696f 6e20 7570 6461 7465 7320 616e 6420  ion updates and 
-000003d0: 636c 6172 6966 6963 6174 696f 6e73 2e0a  clarifications..
-000003e0: 0a52 656c 6561 7365 2035 2e35 2028 7265  .Release 5.5 (re
-000003f0: 6c65 6173 6520 6461 7465 3a20 3230 3231  lease date: 2021
-00000400: 2d31 312d 3131 290a 3d3d 3d3d 3d3d 3d3d  -11-11).========
-00000410: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00000420: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 0a42  ==============.B
-00000430: 7567 2046 6978 6573 0a2d 2d2d 2d2d 2d2d  ug Fixes.-------
-00000440: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 2d20 436c  -----------.- Cl
-00000450: 6f73 6520 7570 6c6f 6164 2073 7472 6561  ose upload strea
-00000460: 6d20 6265 666f 7265 2077 6520 7472 7920  m before we try 
-00000470: 746f 2075 6e6c 696e 6b20 7465 6d70 2066  to unlink temp f
-00000480: 696c 6520 2823 3131 3434 290a 2d20 446f  ile (#1144).- Do
-00000490: 206e 6f74 2070 6572 666f 726d 2068 6173   not perform has
-000004a0: 6820 7661 6c69 6461 7469 6f6e 2069 6620  h validation if 
-000004b0: 6368 6563 6b5f 6861 7368 6573 3d6e 6576  check_hashes=nev
-000004c0: 6572 2065 7665 6e20 6966 2043 6f6e 7465  er even if Conte
-000004d0: 6e74 2d4d 4435 2069 7320 7365 7420 2823  nt-MD5 is set (#
-000004e0: 3133 3832 290a 0a4f 7468 6572 2043 6861  1382)..Other Cha
-000004f0: 6e67 6573 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d  nges.-----------
-00000500: 2d2d 2d2d 2d2d 2d0a 2d20 4164 6420 7761  -------.- Add wa
-00000510: 726e 696e 6720 666f 7220 756e 7375 7070  rning for unsupp
-00000520: 6f72 7465 6420 646f 7562 6c65 2077 696c  orted double wil
-00000530: 6463 6172 6420 7573 652e 2028 2331 3338  dcard use. (#138
-00000540: 3629 0a2d 2043 6861 6e67 696e 6720 7465  6).- Changing te
-00000550: 7374 2065 6d61 696c 2061 6e64 2075 7365  st email and use
-00000560: 7220 7265 6665 7265 6e63 6573 2074 6f20  r references to 
-00000570: 7361 6665 7220 7661 6c75 6573 2e20 2823  safer values. (#
-00000580: 3133 3936 290a 2d20 5365 7665 7261 6c20  1396).- Several 
-00000590: 646f 6375 6d65 6e74 6174 696f 6e20 7570  documentation up
-000005a0: 6461 7465 7320 616e 6420 636c 6172 6966  dates and clarif
-000005b0: 6963 6174 696f 6e73 2e0a 0a52 656c 6561  ications...Relea
-000005c0: 7365 2035 2e34 2028 7265 6c65 6173 6520  se 5.4 (release 
-000005d0: 6461 7465 3a20 3230 3231 2d31 302d 3131  date: 2021-10-11
-000005e0: 290a 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ).==============
-000005f0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00000600: 3d3d 3d3d 3d3d 3d3d 0a4e 6577 2046 6561  ========.New Fea
-00000610: 7475 7265 730a 2d2d 2d2d 2d2d 2d2d 2d2d  tures.----------
-00000620: 2d2d 2d2d 2d2d 2d2d 0a2d 2053 7570 706f  --------.- Suppo
-00000630: 7274 2066 6f72 206e 6577 2062 6163 6b65  rt for new backe
-00000640: 6e64 2066 6561 7475 7265 732e 0a2d 2052  nd features..- R
-00000650: 652d 696d 706c 656d 656e 7420 7265 6d6f  e-implement remo
-00000660: 7661 6c20 6f66 2070 726f 6a65 6374 2063  val of project c
-00000670: 6f6e 7665 6e69 656e 6365 2067 726f 7570  onvenience group
-00000680: 7320 2823 3133 3635 290a 2d20 4164 6420  s (#1365).- Add 
-00000690: 7375 6666 6978 2074 6f20 7573 6572 2061  suffix to user a
-000006a0: 6765 6e74 2074 6f20 6469 6666 6572 656e  gent to differen
-000006b0: 7469 6174 6520 6265 7477 6565 6e20 7479  tiate between ty
-000006c0: 7065 7320 6f66 2072 6577 7269 7465 2063  pes of rewrite c
-000006d0: 6f6d 6d61 6e64 2028 2331 3335 3929 0a2d  ommand (#1359).-
-000006e0: 206d 6220 636f 6d6d 616e 643a 2072 6169   mb command: rai
-000006f0: 7365 2065 7272 6f72 2069 6620 6a73 6f6e  se error if json
-00000700: 206f 6e6c 7920 666c 6167 7320 6172 6520   only flags are 
-00000710: 7573 6564 2066 6f72 2078 6d6c 2041 5049  used for xml API
-00000720: 2020 2823 3133 3538 290a 2d20 496d 7072    (#1358).- Impr
-00000730: 6f76 6520 6067 7375 7469 6c20 726d 6020  ove `gsutil rm` 
-00000740: 616e 6420 6067 7375 7469 6c20 7265 7772  and `gsutil rewr
-00000750: 6974 6560 2068 656c 7020 7061 6765 732e  ite` help pages.
-00000760: 2028 2331 3335 3529 0a2d 204c 696e 6b20   (#1355).- Link 
-00000770: 6669 7820 616e 6420 7465 726d 2075 7064  fix and term upd
-00000780: 6174 6520 696e 2068 656c 7020 646f 6373  ate in help docs
-00000790: 2028 2331 3335 3429 0a0a 4f74 6865 7220   (#1354)..Other 
-000007a0: 4368 616e 6765 730a 2d2d 2d2d 2d2d 2d2d  Changes.--------
-000007b0: 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d 2049 6d70  ----------.- Imp
-000007c0: 726f 7665 6d65 6e74 7320 746f 2074 6865  rovements to the
-000007d0: 2057 696c 6463 6172 6420 6865 6c70 2074   Wildcard help t
-000007e0: 6f70 6963 2028 2331 3336 3729 0a2d 2049  opic (#1367).- I
-000007f0: 6d70 726f 7665 2060 6773 7574 696c 2072  mprove `gsutil r
-00000800: 6d60 2061 6e64 2060 6773 7574 696c 2072  m` and `gsutil r
-00000810: 6577 7269 7465 6020 6865 6c70 2070 6167  ewrite` help pag
-00000820: 6573 2e20 2823 3133 3535 290a 2d20 4c69  es. (#1355).- Li
-00000830: 6e6b 2066 6978 2061 6e64 2074 6572 6d20  nk fix and term 
-00000840: 7570 6461 7465 2069 6e20 6865 6c70 2064  update in help d
-00000850: 6f63 7320 2823 3133 3534 290a 0a52 656c  ocs (#1354)..Rel
-00000860: 6561 7365 2035 2e33 2028 7265 6c65 6173  ease 5.3 (releas
-00000870: 6520 6461 7465 3a20 3230 3231 2d30 392d  e date: 2021-09-
-00000880: 3330 290a 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  30).============
-00000890: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000008a0: 3d3d 3d3d 3d3d 3d3d 3d3d 0a4e 6577 2046  ==========.New F
-000008b0: 6561 7475 7265 730a 2d2d 2d2d 2d2d 2d2d  eatures.--------
-000008c0: 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d 2041 6464  ----------.- Add
-000008d0: 2073 7570 706f 7274 2066 6f72 2054 7572   support for Tur
-000008e0: 626f 2052 6570 6c69 6361 7469 6f6e 2028  bo Replication (
-000008f0: 5250 4f29 2e20 2823 3133 3531 290a 0a42  RPO). (#1351)..B
-00000900: 7567 2046 6978 6573 0a2d 2d2d 2d2d 2d2d  ug Fixes.-------
-00000910: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 2d20 416c  -----------.- Al
-00000920: 6c6f 7720 7468 6520 7265 6d6f 7661 6c20  low the removal 
-00000930: 6f66 2070 726f 6a65 6374 2063 6f6e 7665  of project conve
-00000940: 6e69 656e 6365 2067 726f 7570 732e 2028  nience groups. (
-00000950: 2331 3335 3029 0a0a 4f74 6865 7220 4368  #1350)..Other Ch
-00000960: 616e 6765 730a 2d2d 2d2d 2d2d 2d2d 2d2d  anges.----------
-00000970: 2d2d 2d2d 2d2d 2d2d 0a2d 2053 6576 6572  --------.- Sever
-00000980: 616c 2064 6f63 756d 656e 7461 7469 6f6e  al documentation
-00000990: 2075 7064 6174 6573 2061 6e64 2063 6c61   updates and cla
-000009a0: 7269 6669 6361 7469 6f6e 732e 0a0a 5265  rifications...Re
-000009b0: 6c65 6173 6520 352e 3220 2872 656c 6561  lease 5.2 (relea
-000009c0: 7365 2064 6174 653a 2032 3032 312d 3039  se date: 2021-09
-000009d0: 2d32 3329 0a3d 3d3d 3d3d 3d3d 3d3d 3d3d  -23).===========
-000009e0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000009f0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d0a 4e65 7720  ===========.New 
-00000a00: 4665 6174 7572 6573 0a2d 2d2d 2d2d 2d2d  Features.-------
-00000a10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 2d20 4164  -----------.- Ad
-00000a20: 6420 6370 2073 7570 706f 7274 2066 6f72  d cp support for
-00000a30: 2065 6e64 2d74 6f2d 656e 6420 656e 6372   end-to-end encr
-00000a40: 7970 7469 6f6e 2076 6961 2074 6865 2073  yption via the s
-00000a50: 706c 6974 2d74 7275 7374 2065 6e63 7279  plit-trust encry
-00000a60: 7074 696f 6e20 746f 6f6c 2028 5354 4554  ption tool (STET
-00000a70: 292e 2028 2331 3333 3829 0a0a 4275 6720  ). (#1338)..Bug 
-00000a80: 4669 7865 730a 2d2d 2d2d 2d2d 2d2d 2d2d  Fixes.----------
-00000a90: 2d2d 2d2d 2d2d 2d2d 0a2d 2055 7365 2063  --------.- Use c
-00000aa0: 7573 746f 6d20 656e 6470 6f69 6e74 7320  ustom endpoints 
-00000ab0: 666f 7220 7265 7375 6d61 626c 6520 7570  for resumable up
-00000ac0: 646c 6f61 6473 206f 6e20 7468 6520 584d  dloads on the XM
-00000ad0: 4c20 4150 492e 2028 2331 3333 3329 0a0a  L API. (#1333)..
-00000ae0: 4f74 6865 7220 4368 616e 6765 730a 2d2d  Other Changes.--
-00000af0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00000b00: 0a2d 2044 726f 7070 6564 2073 7570 706f  .- Dropped suppo
-00000b10: 7274 2066 6f72 2050 7974 686f 6e20 3220  rt for Python 2 
-00000b20: 746f 2070 6174 6368 2052 5341 2073 6563  to patch RSA sec
-00000b30: 7572 6974 7920 6973 7375 6573 2e20 2823  urity issues. (#
-00000b40: 3133 3339 290a 2d20 5365 7665 7261 6c20  1339).- Several 
-00000b50: 646f 6375 6d65 6e74 6174 696f 6e20 7570  documentation up
-00000b60: 6461 7465 7320 616e 6420 636c 6172 6966  dates and clarif
-00000b70: 6963 6174 696f 6e73 2e0a 0a52 656c 6561  ications...Relea
-00000b80: 7365 2034 2e36 3820 2872 656c 6561 7365  se 4.68 (release
-00000b90: 2064 6174 653a 2032 3032 312d 3039 2d31   date: 2021-09-1
-00000ba0: 3429 0a3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  4).=============
-00000bb0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00000bc0: 3d3d 3d3d 3d3d 3d3d 3d3d 0a42 7567 2046  ==========.Bug F
-00000bd0: 6978 6573 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d  ixes.-----------
-00000be0: 2d2d 2d2d 2d2d 2d0a 2d20 496d 7072 6f76  -------.- Improv
-00000bf0: 6520 636f 6e74 656e 7420 7479 7065 2069  e content type i
-00000c00: 6e66 6572 656e 6365 2066 6f72 2073 6f6d  nference for som
-00000c10: 6520 636f 6d6d 6f6e 2065 7874 656e 7369  e common extensi
-00000c20: 6f6e 732e 2028 2331 3332 3129 0a2d 2043  ons. (#1321).- C
-00000c30: 6f70 7920 436f 6e74 656e 742d 456e 636f  opy Content-Enco
-00000c40: 6469 6e67 2066 726f 6d20 6669 7273 7420  ding from first 
-00000c50: 6f62 6a65 6374 2069 6e20 636f 6d70 6f73  object in compos
-00000c60: 6520 636f 6d6d 616e 642e 2028 2331 3332  e command. (#132
-00000c70: 3029 0a2d 2053 7570 706f 7274 2067 656e  0).- Support gen
-00000c80: 6572 6174 696f 6e20 7175 6572 7969 6e67  eration querying
-00000c90: 2066 6f72 206c 7320 636f 6d6d 616e 642e   for ls command.
-00000ca0: 2028 2331 3331 3929 0a0a 4f74 6865 7220   (#1319)..Other 
-00000cb0: 4368 616e 6765 730a 2d2d 2d2d 2d2d 2d2d  Changes.--------
-00000cc0: 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d 2041 6464  ----------.- Add
-00000cd0: 2061 206d 6573 7361 6765 2065 6e63 6f75   a message encou
-00000ce0: 7261 6769 6e67 2070 7933 2075 7067 7261  raging py3 upgra
-00000cf0: 6465 2e20 2823 3133 3232 290a 2d20 5570  de. (#1322).- Up
-00000d00: 6461 7465 206d 6f63 6b20 6c69 6272 6172  date mock librar
-00000d10: 7920 7665 7273 696f 6e2e 2028 2331 3331  y version. (#131
-00000d20: 3529 0a2d 2053 6576 6572 616c 2064 6f63  5).- Several doc
-00000d30: 756d 656e 7461 7469 6f6e 2075 7064 6174  umentation updat
-00000d40: 6573 2061 6e64 2063 6c61 7269 6669 6361  es and clarifica
-00000d50: 7469 6f6e 732e 0a0a 5265 6c65 6173 6520  tions...Release 
-00000d60: 342e 3637 2028 7265 6c65 6173 6520 6461  4.67 (release da
-00000d70: 7465 3a20 3230 3231 2d30 382d 3136 290a  te: 2021-08-16).
-00000d80: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00000d90: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00000da0: 3d3d 3d3d 3d3d 3d0a 4275 6720 4669 7865  =======.Bug Fixe
-00000db0: 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  s.--------------
-00000dc0: 2d2d 2d2d 0a2d 2055 7064 6174 6520 7079  ----.- Update py
-00000dd0: 7532 6620 746f 206c 6174 6573 7420 7665  u2f to latest ve
-00000de0: 7273 696f 6e20 746f 2066 6978 2061 2073  rsion to fix a s
-00000df0: 6563 7572 6974 7920 6b65 7920 7265 6175  ecurity key reau
-00000e00: 7468 2062 7567 2028 2331 3331 3029 0a0a  th bug (#1310)..
-00000e10: 4f74 6865 7220 4368 616e 6765 730a 2d2d  Other Changes.--
-00000e20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00000e30: 0a20 2d20 5365 7665 7261 6c20 646f 6375  . - Several docu
-00000e40: 6d65 6e74 6174 696f 6e20 7570 6461 7465  mentation update
-00000e50: 7320 616e 6420 636c 6172 6966 6963 6174  s and clarificat
-00000e60: 696f 6e73 2e0a 0a52 656c 6561 7365 2034  ions...Release 4
-00000e70: 2e36 3620 2872 656c 6561 7365 2064 6174  .66 (release dat
-00000e80: 653a 2032 3032 312d 3037 2d32 3929 0a3d  e: 2021-07-29).=
-00000e90: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00000ea0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00000eb0: 3d3d 3d3d 3d3d 0a4e 6577 2046 6561 7475  ======.New Featu
-00000ec0: 7265 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  res.------------
-00000ed0: 2d2d 2d2d 2d2d 0a20 2d20 4f6e 626f 6172  ------. - Onboar
-00000ee0: 6420 6d54 4c53 2073 7570 706f 7274 2077  d mTLS support w
-00000ef0: 6974 6820 4149 502d 3431 3134 2066 6f72  ith AIP-4114 for
-00000f00: 2067 7375 7469 6c20 2823 3133 3032 290a   gsutil (#1302).
-00000f10: 0a4f 7468 6572 2043 6861 6e67 6573 0a2d  .Other Changes.-
-00000f20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00000f30: 2d0a 202d 2053 6576 6572 616c 2064 6f63  -. - Several doc
-00000f40: 756d 656e 7461 7469 6f6e 2075 7064 6174  umentation updat
-00000f50: 6573 2061 6e64 2063 6c61 7269 6669 6361  es and clarifica
-00000f60: 7469 6f6e 732e 0a0a 5265 6c65 6173 6520  tions...Release 
-00000f70: 342e 3635 2028 7265 6c65 6173 6520 6461  4.65 (release da
-00000f80: 7465 3a20 3230 3231 2d30 372d 3032 290a  te: 2021-07-02).
-00000f90: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00000fa0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00000fb0: 3d3d 3d3d 3d3d 3d0a 4e65 7720 4665 6174  =======.New Feat
-00000fc0: 7572 6573 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d  ures.-----------
-00000fd0: 2d2d 2d2d 2d2d 2d0a 202d 2041 6464 2067  -------. - Add g
-00000fe0: 7375 7469 6c20 7375 7070 6f72 7420 666f  sutil support fo
-00000ff0: 7220 5075 626c 6963 2041 6363 6573 7320  r Public Access 
-00001000: 5072 6576 656e 7469 6f6e 2028 2331 3235  Prevention (#125
-00001010: 3529 0a0a 4275 6720 4669 7865 730a 2d2d  5)..Bug Fixes.--
-00001020: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00001030: 0a20 2d20 4669 7820 7261 6973 696e 672d  . - Fix raising-
-00001040: 6261 642d 7479 7065 2079 6170 6620 6572  bad-type yapf er
-00001050: 726f 7273 2e20 2823 3133 3033 290a 0a4f  rors. (#1303)..O
-00001060: 7468 6572 2043 6861 6e67 6573 0a2d 2d2d  ther Changes.---
-00001070: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a  ---------------.
-00001080: 202d 204c 696e 6b20 6669 7820 706f 696e   - Link fix poin
-00001090: 7469 6e67 2074 6f20 4347 4320 646f 6373  ting to CGC docs
-000010a0: 2061 6761 696e 2028 2331 3239 3129 2e0a   again (#1291)..
-000010b0: 202d 2042 6163 6b66 696c 6c20 736f 6d65   - Backfill some
-000010c0: 2073 6d61 6c6c 2064 6f63 2063 6861 6e67   small doc chang
-000010d0: 6573 2028 2331 3239 3429 0a20 2d20 536d  es (#1294). - Sm
-000010e0: 616c 6c20 7465 7874 2074 7765 616b 2028  all text tweak (
-000010f0: 2331 3239 3329 0a20 2d20 5570 6461 7465  #1293). - Update
-00001100: 2043 4845 434b 5355 4d20 616e 6420 5645   CHECKSUM and VE
-00001110: 5253 494f 4e20 666f 7220 342e 3634 2072  RSION for 4.64 r
-00001120: 656c 6561 7365 2e0a 202d 2055 7064 6174  elease.. - Updat
-00001130: 6520 4348 414e 4745 532e 6d64 2066 6f72  e CHANGES.md for
-00001140: 2034 2e36 3420 7265 6c65 6173 652e 0a20   4.64 release.. 
-00001150: 2d20 4465 6c65 7465 2065 6e63 7279 7074  - Delete encrypt
-00001160: 696f 6e20 6164 6468 656c 7020 7061 6765  ion addhelp page
-00001170: 2028 2331 3239 3729 0a20 2d20 5075 7474   (#1297). - Putt
-00001180: 696e 6720 636c 2f33 3831 3033 3532 3531  ing cl/381035251
-00001190: 2069 6e74 6f20 6769 7468 7562 2028 2331   into github (#1
-000011a0: 3239 3629 0a20 2d20 4261 636b 6669 6c6c  296). - Backfill
-000011b0: 2063 6c2f 3338 3139 3332 3936 3120 2823   cl/381932961 (#
-000011c0: 3132 3938 290a 0a52 656c 6561 7365 2034  1298)..Release 4
-000011d0: 2e36 3420 2872 656c 6561 7365 2064 6174  .64 (release dat
-000011e0: 653a 2032 3032 312d 3036 2d31 3829 0a3d  e: 2021-06-18).=
-000011f0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00001200: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00001210: 3d3d 3d3d 3d3d 0a42 7567 2046 6978 6573  ======.Bug Fixes
-00001220: 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  .---------------
-00001230: 2d2d 2d0a 202d 204e 6f6e 650a 0a4f 7468  ---. - None..Oth
-00001240: 6572 2043 6861 6e67 6573 0a2d 2d2d 2d2d  er Changes.-----
-00001250: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 202d  -------------. -
-00001260: 204c 696e 6b20 6669 7820 706f 696e 7469   Link fix pointi
-00001270: 6e67 2074 6f20 4347 4320 646f 6373 2e0a  ng to CGC docs..
-00001280: 0a52 656c 6561 7365 2034 2e36 3320 2872  .Release 4.63 (r
-00001290: 656c 6561 7365 2064 6174 653a 2032 3032  elease date: 202
-000012a0: 312d 3036 2d30 3929 0a3d 3d3d 3d3d 3d3d  1-06-09).=======
-000012b0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000012c0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000012d0: 0a42 7567 2046 6978 6573 0a2d 2d2d 2d2d  .Bug Fixes.-----
-000012e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 202d  -------------. -
-000012f0: 2055 7064 6174 6520 7761 726e 696e 6720   Update warning 
-00001300: 7465 7874 206f 6e20 4b4d 5320 6163 6365  text on KMS acce
-00001310: 7373 2064 656e 6965 6420 2823 3132 3738  ss denied (#1278
-00001320: 290a 202d 204d 616b 6520 2a2a 2074 6f20  ). - Make ** to 
-00001330: 7265 7072 6573 656e 7420 7a65 726f 206f  represent zero o
-00001340: 7220 6d6f 7265 2066 6f6c 6465 7273 2066  r more folders f
-00001350: 6f72 2063 6c6f 7564 2075 726c 7320 2823  or cloud urls (#
-00001360: 3132 3737 290a 202d 2052 6169 7365 2065  1277). - Raise e
-00001370: 7272 6f72 2069 6620 6669 6e61 6c20 6465  rror if final de
-00001380: 7374 696e 6174 696f 6e20 7061 7468 2065  stination path e
-00001390: 6e64 7320 7769 7468 2061 2064 656c 696d  nds with a delim
-000013a0: 6974 6572 2e20 2823 3132 3733 290a 0a4f  iter. (#1273)..O
-000013b0: 7468 6572 2043 6861 6e67 6573 0a2d 2d2d  ther Changes.---
-000013c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a  ---------------.
-000013d0: 202d 2046 6978 2066 6c61 6b79 2074 6573   - Fix flaky tes
-000013e0: 7420 666f 7220 726d 2075 7369 6e67 2070  t for rm using p
-000013f0: 7265 636f 6e64 6974 696f 6e73 2028 2331  reconditions (#1
-00001400: 3238 3829 0a20 2d20 4669 7820 7079 656e  288). - Fix pyen
-00001410: 7620 6973 7375 6520 666f 7220 6d61 634f  v issue for macO
-00001420: 5320 2823 3132 3830 290a 202d 2046 6978  S (#1280). - Fix
-00001430: 2072 6577 7269 7465 2074 6573 7473 2028   rewrite tests (
-00001440: 2331 3237 3929 0a20 2d20 5265 6d6f 7665  #1279). - Remove
-00001450: 2075 6e75 7365 6420 7072 6f67 7265 7373   unused progress
-00001460: 2063 616c 6c62 6163 6b2e 2028 2331 3237   callback. (#127
-00001470: 3429 0a20 2d20 5365 7665 7261 6c20 646f  4). - Several do
-00001480: 6375 6d65 6e74 6174 696f 6e20 7570 6461  cumentation upda
-00001490: 7465 7320 616e 6420 636c 6172 6966 6963  tes and clarific
-000014a0: 6174 696f 6e73 2e0a 0a52 656c 6561 7365  ations...Release
-000014b0: 2034 2e36 3220 2872 656c 6561 7365 2064   4.62 (release d
-000014c0: 6174 653a 2032 3032 312d 3035 2d31 3329  ate: 2021-05-13)
-000014d0: 0a3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  .===============
-000014e0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000014f0: 3d3d 3d3d 3d3d 3d3d 0a4e 6577 2046 6561  ========.New Fea
-00001500: 7475 7265 730a 2d2d 2d2d 2d2d 2d2d 2d2d  tures.----------
-00001510: 2d2d 2d2d 2d2d 2d2d 0a20 2d20 4164 6420  --------. - Add 
-00001520: 6967 6e6f 7265 2d65 7869 7374 696e 6720  ignore-existing 
-00001530: 6f70 7469 6f6e 2066 6f72 2072 7379 6e63  option for rsync
-00001540: 2028 2331 3138 3329 2e0a 202d 2053 686f   (#1183).. - Sho
-00001550: 7720 7361 7469 7369 6669 6573 505a 5320  w satisifiesPZS 
-00001560: 696e 666f 2069 6e20 6275 636b 6574 2069  info in bucket i
-00001570: 6e66 6f20 6c69 7374 696e 6720 286c 7320  nfo listing (ls 
-00001580: 2d4c 6229 2e20 2823 3131 3931 290a 202d  -Lb). (#1191). -
-00001590: 2053 7570 706f 7274 2063 6f6d 706f 7369   Support composi
-000015a0: 7465 2075 706c 6f61 6473 2077 6974 6820  te uploads with 
-000015b0: 4b4d 532e 2028 2331 3231 3429 0a20 2d20  KMS. (#1214). - 
-000015c0: 456e 666f 7263 6520 6375 7374 6f6d 2065  Enforce custom e
-000015d0: 6e64 706f 696e 7473 2074 6872 6f75 6768  ndpoints through
-000015e0: 206d 756c 7469 7061 7274 2063 6f70 6965   multipart copie
-000015f0: 7320 616e 6420 636f 6d70 6c65 7820 646f  s and complex do
-00001600: 776e 6c6f 6164 732e 2028 2331 3234 372c  wnloads. (#1247,
-00001610: 2023 3132 3530 290a 0a42 7567 2046 6978   #1250)..Bug Fix
-00001620: 6573 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  es.-------------
-00001630: 2d2d 2d2d 2d0a 202d 2072 6d20 7769 6c6c  -----. - rm will
-00001640: 2063 6f6e 7469 6e75 6520 6f6e 206f 626a   continue on obj
-00001650: 6563 7420 3430 3473 2e20 2823 3130 3333  ect 404s. (#1033
-00001660: 290a 202d 2055 7064 6174 6520 626f 746f  ). - Update boto
-00001670: 2073 7562 6d6f 6475 6c65 2074 6f20 696e   submodule to in
-00001680: 636c 7564 6520 6120 6669 7820 666f 7220  clude a fix for 
-00001690: 696e 7465 6772 6974 7920 6368 6563 6b73  integrity checks
-000016a0: 2077 6974 6820 4b4d 532e 2028 2331 3235   with KMS. (#125
-000016b0: 3829 0a20 2d20 6961 6d20 6368 2069 7320  8). - iam ch is 
-000016c0: 6e6f 7720 6361 7365 2d69 6e73 656e 7369  now case-insensi
-000016d0: 7469 7665 2066 6f72 2070 7562 6c69 6320  tive for public 
-000016e0: 6d65 6d62 6572 7320 616e 6420 6d65 6d62  members and memb
-000016f0: 6572 2074 7970 6573 2e20 2823 3132 3431  er types. (#1241
-00001700: 290a 202d 2053 7570 706f 7274 2073 6b69  ). - Support ski
-00001710: 7070 696e 6720 696e 7465 6772 6974 7920  pping integrity 
-00001720: 6368 6563 6b73 2069 6e20 6461 6973 7920  checks in daisy 
-00001730: 6368 6169 6e20 7472 616e 7366 6572 732e  chain transfers.
-00001740: 2028 2331 3235 3729 0a20 2d20 456e 7375   (#1257). - Ensu
-00001750: 7265 2074 6865 2063 6f72 7265 6374 2063  re the correct c
-00001760: 6f6e 7465 6e74 2d6c 656e 6774 6820 6973  ontent-length is
-00001770: 2070 726f 7669 6465 6420 666f 7220 696e   provided for in
-00001780: 636f 6d70 6c65 7465 2064 6f77 6e6c 6f61  complete downloa
-00001790: 6473 2e20 2823 3132 3331 290a 202d 2046  ds. (#1231). - F
-000017a0: 6978 2064 6169 7379 2063 6861 696e 2066  ix daisy chain f
-000017b0: 6f72 2077 696e 646f 7773 2e20 2823 3132  or windows. (#12
-000017c0: 3531 290a 202d 2046 6978 2073 7461 7473  51). - Fix stats
-000017d0: 2063 7261 7368 696e 6720 6265 6361 7573   crashing becaus
-000017e0: 6520 6f66 206e 616e 6f73 6563 7320 696e  e of nanosecs in
-000017f0: 2063 7573 746f 6d2d 7469 6d65 2e20 2823   custom-time. (#
-00001800: 3132 3436 290a 202d 2044 656c 6574 6520  1246). - Delete 
-00001810: 636f 6e6e 6563 7469 6f6e 7320 6166 7465  connections afte
-00001820: 7220 666f 726b 2e20 2823 3132 3338 290a  r fork. (#1238).
-00001830: 202d 2050 6174 6368 206d 6435 2069 6d70   - Patch md5 imp
-00001840: 6f72 7420 666f 7220 636f 6d70 6c69 616e  ort for complian
-00001850: 6365 206f 6e20 5265 6420 4861 7420 4649  ce on Red Hat FI
-00001860: 5053 206d 6f64 6520 6469 7374 7269 6275  PS mode distribu
-00001870: 7469 6f6e 732e 2028 2331 3232 3429 0a20  tions. (#1224). 
-00001880: 2d20 4861 6e64 6c65 2063 6173 6520 7768  - Handle case wh
-00001890: 6572 6520 7468 6572 6520 6172 6520 746f  ere there are to
-000018a0: 6f20 6d61 6e79 2073 6c61 7368 6573 2061  o many slashes a
-000018b0: 6674 6572 2043 6c6f 7564 5572 6c20 7363  fter CloudUrl sc
-000018c0: 6865 6d65 2e20 2823 3132 3337 290a 202d  heme. (#1237). -
-000018d0: 2041 6c6c 6f77 2073 7065 6369 6679 696e   Allow specifyin
-000018e0: 6720 6f62 6a65 6374 2067 656e 6572 6174  g object generat
-000018f0: 696f 6e73 2069 6e20 636f 6d70 6f73 652e  ions in compose.
-00001900: 2028 2331 3232 3929 0a20 2d20 5261 6973   (#1229). - Rais
-00001910: 6520 6572 726f 7220 696e 2073 6574 6d65  e error in setme
-00001920: 7461 2069 6620 6e6f 2068 6561 6465 7273  ta if no headers
-00001930: 2061 7265 2070 726f 7669 6465 642e 2028   are provided. (
-00001940: 2331 3232 3729 0a20 2d20 4669 7820 656e  #1227). - Fix en
-00001950: 636f 6469 6e67 2069 7373 7565 2066 6f72  coding issue for
-00001960: 2072 6663 3832 3220 6d65 7373 6167 6573   rfc822 messages
-00001970: 2e20 2823 3132 3334 290a 202d 2046 6978  . (#1234). - Fix
-00001980: 2053 7472 6561 6d45 7868 6175 7374 6564   StreamExhausted
-00001990: 2045 7272 6f72 2068 616e 646c 696e 6720   Error handling 
-000019a0: 666f 7220 5265 7375 6d61 626c 6520 7570  for Resumable up
-000019b0: 6c6f 6164 732e 2028 2331 3233 3229 0a20  loads. (#1232). 
-000019c0: 2d20 4669 7820 7769 6c64 6361 7264 202a  - Fix wildcard *
-000019d0: 2a20 6275 672e 2028 2331 3233 3529 0a20  * bug. (#1235). 
-000019e0: 2d20 4669 7820 616c 6967 6e6d 656e 7420  - Fix alignment 
-000019f0: 6f66 206c 7320 2d6c 206f 7574 7075 742e  of ls -l output.
-00001a00: 2028 2331 3231 3929 0a20 2d20 4669 7820   (#1219). - Fix 
-00001a10: 6e65 776c 696e 6573 2061 726f 756e 6420  newlines around 
-00001a20: 6c69 7374 732e 2028 2331 3232 3029 0a0a  lists. (#1220)..
-00001a30: 4f74 6865 7220 4368 616e 6765 730a 2d2d  Other Changes.--
-00001a40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00001a50: 0a20 2d20 4669 7820 736f 6e61 7479 7065  . - Fix sonatype
-00001a60: 2065 7272 6f72 732e 2028 2331 3236 3629   errors. (#1266)
-00001a70: 0a20 2d20 6773 6c69 623a 2062 6f74 6f5c  . - gslib: boto\
-00001a80: 5f75 7469 6c3a 2069 6d70 6c65 6d65 6e74  _util: implement
-00001a90: 2061 2048 6173 5573 6572 5370 6563 6966   a HasUserSpecif
-00001aa0: 6965 6447 7348 6f73 7428 2920 6865 6c70  iedGsHost() help
-00001ab0: 6572 2e20 2823 3132 3635 290a 202d 2041  er. (#1265). - A
-00001ac0: 6464 696e 6720 7761 726e 696e 6720 746f  dding warning to
-00001ad0: 2072 7379 6e63 2069 6620 7374 7265 616d   rsync if stream
-00001ae0: 7320 6f72 206e 616d 6564 2070 6174 6873  s or named paths
-00001af0: 2061 7265 2069 6e63 6c75 6465 6420 696e   are included in
-00001b00: 2061 2066 6f6c 6465 722e 2028 2331 3033   a folder. (#103
-00001b10: 3129 0a20 2d20 496d 7072 6f76 6520 7061  1). - Improve pa
-00001b20: 7261 6c6c 656c 6973 6d20 7761 726e 696e  rallelism warnin
-00001b30: 6773 2e20 2823 3132 3236 290a 202d 2053  gs. (#1226). - S
-00001b40: 6576 6572 616c 2064 6f63 756d 656e 7461  everal documenta
-00001b50: 7469 6f6e 2075 7064 6174 6573 2061 6e64  tion updates and
-00001b60: 2063 6c61 7269 6669 6361 7469 6f6e 732e   clarifications.
-00001b70: 0a0a 5265 6c65 6173 6520 342e 3631 2028  ..Release 4.61 (
-00001b80: 7265 6c65 6173 6520 6461 7465 3a20 3230  release date: 20
-00001b90: 3231 2d30 342d 3036 290a 3d3d 3d3d 3d3d  21-04-06).======
-00001ba0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00001bb0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00001bc0: 3d0a 4275 6720 4669 7865 730a 2d2d 2d2d  =.Bug Fixes.----
-00001bd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a20  --------------. 
-00001be0: 2d20 5570 6461 7465 2074 6f20 5253 4120  - Update to RSA 
-00001bf0: 7634 2e35 2e0a 202d 2043 6f70 7948 656c  v4.5.. - CopyHel
-00001c00: 7065 7220 6163 6365 7074 7320 6b6d 7320  per accepts kms 
-00001c10: 6368 6563 6b20 6279 7061 7373 2e20 2823  check bypass. (#
-00001c20: 3132 3137 290a 0a4f 7468 6572 2043 6861  1217)..Other Cha
-00001c30: 6e67 6573 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d  nges.-----------
-00001c40: 2d2d 2d2d 2d2d 2d0a 202d 2044 6f63 2075  -------. - Doc u
-00001c50: 7064 6174 6573 2e0a 0a52 656c 6561 7365  pdates...Release
-00001c60: 2034 2e36 3020 2872 656c 6561 7365 2064   4.60 (release d
-00001c70: 6174 653a 2032 3032 312d 3033 2d31 3129  ate: 2021-03-11)
-00001c80: 0a3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  .===============
-00001c90: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00001ca0: 3d3d 3d3d 3d3d 3d3d 0a42 7567 2046 6978  ========.Bug Fix
-00001cb0: 6573 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  es.-------------
-00001cc0: 2d2d 2d2d 2d0a 202d 2046 6978 6564 2070  -----. - Fixed p
-00001cd0: 726f 7879 2063 6f6e 6e65 6374 696f 6e73  roxy connections
-00001ce0: 2077 6865 6e20 7573 696e 6720 7468 6520   when using the 
-00001cf0: 4743 5320 584d 4c20 4150 492e 0a20 2d20  GCS XML API.. - 
-00001d00: 496d 7072 6f76 6520 7265 6c69 6162 696c  Improve reliabil
-00001d10: 6974 7920 7768 656e 206d 756c 7469 706c  ity when multipl
-00001d20: 6520 696e 7374 616e 6365 7320 6f66 2067  e instances of g
-00001d30: 7375 7469 6c20 7472 616e 7366 6572 2074  sutil transfer t
-00001d40: 6f20 7468 6520 7361 6d65 2064 6573 7469  o the same desti
-00001d50: 6e61 7469 6f6e 2e20 2823 3132 3032 290a  nation. (#1202).
-00001d60: 0a4f 7468 6572 2043 6861 6e67 6573 0a2d  .Other Changes.-
-00001d70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00001d80: 2d0a 202d 2052 656d 6f76 6520 5472 6176  -. - Remove Trav
-00001d90: 6973 4349 2061 6e64 2075 7064 6174 6520  isCI and update 
-00001da0: 2263 6865 636b 2066 6f72 2043 4922 2072  "check for CI" r
-00001db0: 6566 6572 656e 6365 7320 746f 2075 7365  eferences to use
-00001dc0: 2047 6974 4875 6220 4349 2e20 2823 3132   GitHub CI. (#12
-00001dd0: 3030 290a 202d 2053 6576 6572 616c 2064  00). - Several d
-00001de0: 6f63 756d 656e 7461 7469 6f6e 2075 7064  ocumentation upd
-00001df0: 6174 6573 2061 6e64 2063 6c61 7269 6669  ates and clarifi
-00001e00: 6361 7469 6f6e 732e 0a0a 5265 6c65 6173  cations...Releas
-00001e10: 6520 342e 3539 2028 7265 6c65 6173 6520  e 4.59 (release 
-00001e20: 6461 7465 3a20 3230 3231 2d30 322d 3130  date: 2021-02-10
-00001e30: 290a 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ).==============
-00001e40: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00001e50: 3d3d 3d3d 3d3d 3d3d 0a4e 6577 2046 6561  ========.New Fea
-00001e60: 7475 7265 730a 2d2d 2d2d 2d2d 2d2d 2d2d  tures.----------
-00001e70: 2d2d 2d2d 2d2d 2d2d 0a20 2d20 4164 6420  --------. - Add 
-00001e80: 6967 6e6f 7265 2d65 7869 7374 696e 6720  ignore-existing 
-00001e90: 6f70 7469 6f6e 2066 6f72 2072 7379 6e63  option for rsync
-00001ea0: 2028 2331 3138 3329 2e0a 202d 2053 686f   (#1183).. - Sho
-00001eb0: 7720 7361 7469 7369 6669 6573 505a 5320  w satisifiesPZS 
-00001ec0: 696e 666f 2069 6e20 6275 636b 6574 2069  info in bucket i
-00001ed0: 6e66 6f20 6c69 7374 696e 6720 286c 7320  nfo listing (ls 
-00001ee0: 2d4c 6229 2028 2331 3139 3129 2e0a 0a42  -Lb) (#1191)...B
-00001ef0: 7567 2046 6978 6573 0a2d 2d2d 2d2d 2d2d  ug Fixes.-------
-00001f00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 202d 2052  -----------. - R
-00001f10: 6567 6973 7465 7220 696e 7465 6772 6174  egister integrat
-00001f20: 696f 6e20 7465 7374 2066 6169 6c75 7265  ion test failure
-00001f30: 7320 696e 206b 6f6b 6f72 6f20 7363 7269  s in kokoro scri
-00001f40: 7074 2028 2331 3138 3929 2e0a 0a4f 7468  pt (#1189)...Oth
-00001f50: 6572 2043 6861 6e67 6573 0a2d 2d2d 2d2d  er Changes.-----
-00001f60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 202d  -------------. -
-00001f70: 2055 7365 2072 6573 7065 6374 6675 6c20   Use respectful 
-00001f80: 636f 6465 2028 2331 3139 3029 2e0a 202d  code (#1190).. -
-00001f90: 2053 6576 6572 616c 2064 6f63 756d 656e   Several documen
-00001fa0: 7461 7469 6f6e 2075 7064 6174 6573 2061  tation updates a
-00001fb0: 6e64 2063 6c61 7269 6669 6361 7469 6f6e  nd clarification
-00001fc0: 732e 0a0a 5265 6c65 6173 6520 342e 3538  s...Release 4.58
-00001fd0: 2028 7265 6c65 6173 6520 6461 7465 3a20   (release date: 
-00001fe0: 3230 3231 2d30 312d 3231 290a 3d3d 3d3d  2021-01-21).====
-00001ff0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00002000: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00002010: 3d3d 0a42 7567 2046 6978 6573 0a2d 2d2d  ==.Bug Fixes.---
-00002020: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a  ---------------.
-00002030: 202d 2046 6978 206d 6f72 6520 6f63 6375   - Fix more occu
-00002040: 7272 656e 6365 7320 6f66 2065 6e63 6f64  rrences of encod
-00002050: 6573 7472 696e 672f 6465 636f 6465 7374  estring/decodest
-00002060: 7269 6e67 2028 2331 3137 3729 0a20 2d20  ring (#1177). - 
-00002070: 4967 6e6f 7265 2074 6865 202e 6769 7468  Ignore the .gith
-00002080: 7562 2064 6972 6563 746f 7279 2066 6f72  ub directory for
-00002090: 2075 7064 6174 6573 2028 2331 3136 3429   updates (#1164)
-000020a0: 0a20 2d20 4d61 6b65 2073 6967 6e75 726c  . - Make signurl
-000020b0: 2075 7365 2067 656e 6572 6174 696f 6e20   use generation 
-000020c0: 696e 666f 726d 6174 696f 6e2e 2028 2331  information. (#1
-000020d0: 3136 3929 0a20 2d20 4669 7820 556e 6963  169). - Fix Unic
-000020e0: 6f64 6545 6e63 6f64 6545 7272 6f72 2069  odeEncodeError i
-000020f0: 6e20 5079 7468 6f6e 3220 666f 7220 6865  n Python2 for he
-00002100: 6c70 206d 6574 6164 6174 6120 636f 6d6d  lp metadata comm
-00002110: 616e 6420 2823 3131 3732 290a 202d 204f  and (#1172). - O
-00002120: 7065 6e20 6669 6c65 7320 696e 206e 6f6e  pen files in non
-00002130: 2d61 7070 656e 6420 6d6f 6465 2074 6f20  -append mode to 
-00002140: 6d61 6b65 2073 7472 6970 6520 6675 6e63  make stripe func
-00002150: 7469 6f6e 616c 6974 7920 776f 726b 2069  tionality work i
-00002160: 6e20 4c75 7374 7265 2066 696c 6520 7379  n Lustre file sy
-00002170: 7374 656d 7320 2823 3131 3731 290a 202d  stems (#1171). -
-00002180: 2050 6572 7369 7374 2072 6571 7565 7374   Persist request
-00002190: 2072 6561 736f 6e20 6865 6164 6572 2066   reason header f
-000021a0: 6f72 2072 6573 756d 6162 6c65 2075 706c  or resumable upl
-000021b0: 6f61 6473 2061 6e64 2064 6f77 6e6c 6f61  oads and downloa
-000021c0: 6473 2e20 2823 3131 3730 290a 202d 2069  ds. (#1170). - i
-000021d0: 6d70 726f 7665 2075 706c 6f61 6420 7370  mprove upload sp
-000021e0: 6565 6420 7369 676e 6966 6963 616e 746c  eed significantl
-000021f0: 7920 7768 656e 2069 7420 7275 6e73 206f  y when it runs o
-00002200: 6e20 5769 6e64 6f77 7320 2823 3131 3436  n Windows (#1146
-00002210: 290a 202d 2041 6464 2070 6572 662d 7472  ). - Add perf-tr
-00002220: 6163 652d 746f 6b65 6e20 7375 7070 6f72  ace-token suppor
-00002230: 7420 666f 7220 7265 7375 6d61 626c 6520  t for resumable 
-00002240: 7570 6c6f 6164 732e 2028 2331 3136 3829  uploads. (#1168)
-00002250: 0a20 2d20 496d 7072 6f76 6520 6572 726f  . - Improve erro
-00002260: 7220 6d65 7373 6167 6520 7768 656e 2061  r message when a
-00002270: 2062 7563 6b65 7427 7320 6e61 6d65 2063   bucket's name c
-00002280: 6f6c 6c69 6465 7320 7769 7468 2061 6e6f  ollides with ano
-00002290: 7468 6572 2e20 2823 3131 3636 290a 202d  ther. (#1166). -
-000022a0: 2046 6978 2066 6f72 6d61 7474 696e 6720   Fix formatting 
-000022b0: 666f 7220 656d 7074 7920 434f 5253 204a  for empty CORS J
-000022c0: 534f 4e20 646f 6375 6d65 6e74 2028 2331  SON document (#1
-000022d0: 3135 3629 0a0a 4f74 6865 7220 4368 616e  156)..Other Chan
-000022e0: 6765 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ges.------------
-000022f0: 2d2d 2d2d 2d2d 0a20 2d20 5365 7665 7261  ------. - Severa
-00002300: 6c20 646f 6375 6d65 6e74 6174 696f 6e20  l documentation 
-00002310: 7570 6461 7465 7320 616e 6420 636c 6172  updates and clar
-00002320: 6966 6963 6174 696f 6e73 2e0a 202d 2041  ifications.. - A
-00002330: 6464 2043 4920 6368 6563 6b73 2066 6f72  dd CI checks for
-00002340: 2050 7974 686f 6e20 332e 3820 2823 3131   Python 3.8 (#11
-00002350: 3637 290a 0a20 5265 6c65 6173 6520 342e  67).. Release 4.
-00002360: 3537 2028 7265 6c65 6173 6520 6461 7465  57 (release date
-00002370: 3a20 3230 3230 2d31 322d 3038 290a 3d3d  : 2020-12-08).==
-00002380: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00002390: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000023a0: 3d3d 3d3d 0a42 7567 2046 6978 6573 0a2d  ====.Bug Fixes.-
-000023b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000023c0: 2d0a 202d 2052 656d 6f76 6520 556e 6963  -. - Remove Unic
-000023d0: 6f64 6520 6368 6172 6163 7465 7220 6672  ode character fr
-000023e0: 6f6d 2063 6f6e 6669 6720 636f 6d6d 616e  om config comman
-000023f0: 6420 7468 6174 2077 6173 2063 6175 7369  d that was causi
-00002400: 6e67 2050 7974 686f 6e20 3220 6973 7375  ng Python 2 issu
-00002410: 6573 2e0a 202d 2053 796e 6320 646f 6373  es.. - Sync docs
-00002420: 2077 6974 6820 7765 622e 0a0a 5265 6c65   with web...Rele
-00002430: 6173 6520 342e 3536 2028 7265 6c65 6173  ase 4.56 (releas
-00002440: 6520 6461 7465 3a20 3230 3230 2d31 322d  e date: 2020-12-
-00002450: 3033 290a 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  03).============
-00002460: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00002470: 3d3d 3d3d 3d3d 3d3d 3d3d 0a4e 6577 2046  ==========.New F
-00002480: 6561 7475 7265 730a 2d2d 2d2d 2d2d 2d2d  eatures.--------
-00002490: 2d2d 2d2d 2d2d 2d2d 2d2d 0a20 2d20 6d54  ----------. - mT
-000024a0: 4c53 2f44 4341 2041 7574 6865 6e74 6963  LS/DCA Authentic
-000024b0: 6174 696f 6e20 2823 3131 3431 2c20 2331  ation (#1141, #1
-000024c0: 3132 322c 2023 3131 3432 290a 202d 2041  122, #1142). - A
-000024d0: 6464 2047 6974 4875 6220 4163 7469 6f6e  dd GitHub Action
-000024e0: 7320 4349 2028 2331 3135 3329 0a0a 4275  s CI (#1153)..Bu
-000024f0: 6720 4669 7865 730a 2d2d 2d2d 2d2d 2d2d  g Fixes.--------
-00002500: 2d2d 2d2d 2d2d 2d2d 2d2d 0a20 2d20 4465  ----------. - De
-00002510: 6c65 7465 2074 6865 2070 726f 6a65 6374  lete the project
-00002520: 732e 7079 2068 656c 7020 746f 7069 6320  s.py help topic 
-00002530: 2823 3131 3534 290a 202d 2046 6f72 6d61  (#1154). - Forma
-00002540: 7420 6669 7820 666f 7220 6370 2e70 7920  t fix for cp.py 
-00002550: 2823 3131 3532 290a 0a52 656c 6561 7365  (#1152)..Release
-00002560: 2034 2e35 3520 2872 656c 6561 7365 2064   4.55 (release d
-00002570: 6174 653a 2032 3032 302d 3131 2d31 3229  ate: 2020-11-12)
-00002580: 0a3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  .===============
-00002590: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000025a0: 3d3d 3d3d 3d3d 3d0a 4275 6720 4669 7865  =======.Bug Fixe
-000025b0: 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  s.--------------
-000025c0: 2d2d 2d2d 0a20 2d20 5072 6576 656e 7420  ----. - Prevent 
-000025d0: 7472 6169 6c69 6e67 2073 7061 6365 7320  trailing spaces 
-000025e0: 696e 206a 736f 6e20 6f75 7470 7574 206f  in json output o
-000025f0: 6620 6961 6d20 6765 7420 2823 3937 3729  f iam get (#977)
-00002600: 0a20 2d20 4669 7820 6465 7072 6563 6174  . - Fix deprecat
-00002610: 696f 6e20 7761 726e 696e 6773 2064 7565  ion warnings due
-00002620: 2074 6f20 696e 7661 6c69 6420 6573 6361   to invalid esca
-00002630: 7065 2073 6571 7565 6e63 6573 2e20 2823  pe sequences. (#
-00002640: 3131 3139 290a 202d 2055 7365 2069 735f  1119). - Use is_
-00002650: 616c 6976 6520 696e 2066 6176 6f75 7220  alive in favour 
-00002660: 6f66 2069 7341 6c69 7665 2066 6f72 2050  of isAlive for P
-00002670: 7974 686f 6e20 332e 3920 636f 6d70 6174  ython 3.9 compat
-00002680: 6962 696c 6974 792e 2028 2331 3132 3129  ibility. (#1121)
-00002690: 0a20 2d20 4669 7820 666f 7220 6261 7365  . - Fix for base
-000026a0: 3634 2e7b 656e 636f 6465 2f64 6563 6f64  64.{encode/decod
-000026b0: 657d 7374 7269 6e67 2069 6e20 7079 7468  e}string in pyth
-000026c0: 6f6e 2033 2e39 2028 2331 3132 3929 0a0a  on 3.9 (#1129)..
-000026d0: 4f74 6865 7220 4368 616e 6765 730a 2d2d  Other Changes.--
-000026e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000026f0: 0a20 2d20 5365 7665 7261 6c20 646f 6375  . - Several docu
-00002700: 6d65 6e74 6174 696f 6e20 7570 6461 7465  mentation update
-00002710: 7320 616e 6420 636c 6172 6966 6963 6174  s and clarificat
-00002720: 696f 6e73 2e0a 0a52 656c 6561 7365 2034  ions...Release 4
-00002730: 2e35 3420 2872 656c 6561 7365 2064 6174  .54 (release dat
-00002740: 653a 2032 3032 302d 3130 2d32 3229 0a3d  e: 2020-10-22).=
-00002750: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00002760: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00002770: 3d3d 3d3d 3d0a 4e65 7720 4665 6174 7572  =====.New Featur
-00002780: 6573 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  es.-------------
-00002790: 2d2d 2d2d 2d0a 202d 2041 6464 2075 7365  -----. - Add use
-000027a0: 7250 726f 6a65 6374 2073 7570 706f 7274  rProject support
-000027b0: 2074 6f20 7369 676e 7572 6c20 2823 3130   to signurl (#10
-000027c0: 3638 290a 0a42 7567 2046 6978 6573 0a2d  68)..Bug Fixes.-
-000027d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000027e0: 2d0a 202d 2045 7870 6c69 6369 746c 7920  -. - Explicitly 
-000027f0: 7365 7420 6d75 6c74 6970 726f 6365 7373  set multiprocess
-00002800: 696e 6720 7374 6172 7420 6d65 7468 6f64  ing start method
-00002810: 2074 6f20 2766 6f72 6b27 2028 2331 3130   to 'fork' (#110
-00002820: 3729 0a20 2d20 4865 6164 6572 7320 6361  7). - Headers ca
-00002830: 6e20 6e6f 7720 6265 2072 656d 6f76 6564  n now be removed
-00002840: 2028 2331 3039 3129 0a20 2d20 4669 7820   (#1091). - Fix 
-00002850: 436f 6d6d 616e 6445 7863 6570 7469 6f6e  CommandException
-00002860: 2e69 6e66 6f72 6d61 7469 6f6e 616c 2061  .informational a
-00002870: 7474 7269 6275 7465 2065 7272 6f72 2028  ttribute error (
-00002880: 2331 3130 3929 0a20 2d20 4669 7820 6272  #1109). - Fix br
-00002890: 6f6b 656e 2073 6967 6e75 726c 2065 7272  oken signurl err
-000028a0: 6f72 206d 6573 7361 6765 2e20 2823 3130  or message. (#10
-000028b0: 3937 290a 0a4f 7468 6572 2043 6861 6e67  97)..Other Chang
-000028c0: 6573 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  es.-------------
-000028d0: 2d2d 2d2d 2d0a 202d 2057 6172 6e20 7768  -----. - Warn wh
-000028e0: 656e 2064 6973 6162 6c69 6e67 2070 6172  en disabling par
-000028f0: 616c 6c65 6c20 636f 6d70 6f73 6974 6520  allel composite 
-00002900: 7570 6c6f 6164 7320 666f 7220 4b4d 5320  uploads for KMS 
-00002910: 656e 6372 7970 7469 6f6e 2e20 2823 3131  encryption. (#11
-00002920: 3032 290a 202d 2048 616e 646c 6520 5341  02). - Handle SA
-00002930: 4d4c 2072 6561 7574 6820 6368 616c 6c65  ML reauth challe
-00002940: 6e67 652e 2028 2331 3130 3629 0a20 2d20  nge. (#1106). - 
-00002950: 5365 7665 7261 6c20 646f 6375 6d65 6e74  Several document
-00002960: 6174 696f 6e20 7570 6461 7465 7320 616e  ation updates an
-00002970: 6420 636c 6172 6966 6963 6174 696f 6e73  d clarifications
-00002980: 2e0a 0a52 656c 6561 7365 2034 2e35 3320  ...Release 4.53 
-00002990: 2872 656c 6561 7365 2064 6174 653a 2032  (release date: 2
-000029a0: 3032 302d 3038 2d31 3929 0a3d 3d3d 3d3d  020-08-19).=====
-000029b0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000029c0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000029d0: 3d0a 4275 6720 4669 7865 730a 2d2d 2d2d  =.Bug Fixes.----
-000029e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d  --------------.-
-000029f0: 2052 656d 6f76 6520 736f 636b 7369 7079   Remove socksipy
-00002a00: 2064 6570 656e 6465 6e63 7920 746f 2066   dependency to f
-00002a10: 6978 2070 726f 7879 2061 7574 6865 6e74  ix proxy authent
-00002a20: 6963 6174 696f 6e20 2823 3130 3834 290a  ication (#1084).
-00002a30: 2d20 5265 7472 7920 6f6e 2065 7272 6f72  - Retry on error
-00002a40: 7320 7265 6c61 7469 6e67 2074 6f20 7265  s relating to re
-00002a50: 6769 6f6e 2073 7065 6369 6669 6361 7469  gion specificati
-00002a60: 6f6e 2066 6f72 2053 3320 2823 3130 3439  on for S3 (#1049
-00002a70: 290a 0a4f 7468 6572 2043 6861 6e67 6573  )..Other Changes
-00002a80: 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  .---------------
-00002a90: 2d2d 2d0a 2d20 5072 6f6d 7074 2044 6169  ---.- Prompt Dai
-00002aa0: 7379 2063 6861 696e 2075 7365 7273 2074  sy chain users t
-00002ab0: 6f20 7472 7920 5354 5320 2823 3130 3737  o try STS (#1077
-00002ac0: 290a 2d20 4164 6420 6e65 7720 4941 4d20  ).- Add new IAM 
-00002ad0: 7479 7065 732c 2061 6e64 2064 6973 6162  types, and disab
-00002ae0: 6c65 2055 524c 2070 6172 7369 6e67 2066  le URL parsing f
-00002af0: 6f72 2020 4941 4d20 622f 6320 6974 2068  or  IAM b/c it h
-00002b00: 6173 2073 7562 636f 6d6d 616e 6473 2e20  as subcommands. 
-00002b10: 2823 3130 3637 290a 2d20 4d61 6e79 2074  (#1067).- Many t
-00002b20: 6578 7420 7570 6461 7465 7320 616e 6420  ext updates and 
-00002b30: 636c 6172 6966 6963 6174 696f 6e73 2e0a  clarifications..
-00002b40: 0a52 656c 6561 7365 2034 2e35 3220 2872  .Release 4.52 (r
-00002b50: 656c 6561 7365 2064 6174 653a 2032 3032  elease date: 202
-00002b60: 302d 3037 2d30 3729 0a3d 3d3d 3d3d 3d3d  0-07-07).=======
-00002b70: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00002b80: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d0a  ===============.
-00002b90: 4275 6720 4669 7865 730a 2d2d 2d2d 2d2d  Bug Fixes.------
-00002ba0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d 2046  ------------.- F
-00002bb0: 6978 2074 6573 7473 2075 7369 6e67 2077  ix tests using w
-00002bc0: 726f 6e67 2041 5753 2063 7265 6465 6e74  rong AWS credent
-00002bd0: 6961 6c73 2069 6620 4157 5320 434c 4920  ials if AWS CLI 
-00002be0: 6973 2069 6e73 7461 6c6c 6564 2e20 2823  is installed. (#
-00002bf0: 3130 3536 290a 2d20 4669 7820 6041 7474  1056).- Fix `Att
-00002c00: 7269 6275 7465 4572 726f 723a 206d 6f64  ributeError: mod
-00002c10: 756c 6520 2767 736c 6962 2720 6861 7320  ule 'gslib' has 
-00002c20: 6e6f 2061 7474 7269 6275 7465 2027 5553  no attribute 'US
-00002c30: 4552 5f41 4745 4e54 2760 2e20 2823 3130  ER_AGENT'`. (#10
-00002c40: 3532 290a 2d20 4669 7820 656e 636f 6469  52).- Fix encodi
-00002c50: 6e67 2065 7272 6f72 2069 6e20 6075 7365  ng error in `use
-00002c60: 725f 6167 656e 745f 6865 6c70 6572 602e  r_agent_helper`.
-00002c70: 2028 2331 3035 3529 0a2d 2046 6978 2073   (#1055).- Fix s
-00002c80: 7464 6f75 7420 6f72 6465 7269 6e67 2069  tdout ordering i
-00002c90: 7373 7565 2069 6e20 6861 7368 2063 6f6d  ssue in hash com
-00002ca0: 6d61 6e64 2e20 2823 3130 3337 290a 2d20  mand. (#1037).- 
-00002cb0: 4669 7820 6d75 6c74 6974 6872 6561 6420  Fix multithread 
-00002cc0: 7261 6365 2063 6f6e 6469 7469 6f6e 2066  race condition f
-00002cd0: 6f72 2063 702f 6d76 2063 6f6d 6d61 6e64  or cp/mv command
-00002ce0: 2077 6865 6e20 6d75 6c74 6970 6c65 206f   when multiple o
-00002cf0: 7065 7261 7469 6f6e 7320 6172 6520 6174  perations are at
-00002d00: 7465 6d70 7469 6e67 2074 6f20 6372 6561  tempting to crea
-00002d10: 7465 2074 6865 2073 616d 6520 6469 7265  te the same dire
-00002d20: 6374 6f72 792e 2028 2331 3032 3729 0a2d  ctory. (#1027).-
-00002d30: 2046 6978 204f 5345 7272 6f72 206f 6e20   Fix OSError on 
-00002d40: 696e 7465 7272 7570 7465 6420 7273 796e  interrupted rsyn
-00002d50: 6320 2d64 2e20 2823 3130 3432 290a 0a4f  c -d. (#1042)..O
-00002d60: 7468 6572 2043 6861 6e67 6573 0a2d 2d2d  ther Changes.---
-00002d70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a  ---------------.
-00002d80: 2d20 4d61 6e79 2074 6578 7420 7570 6461  - Many text upda
-00002d90: 7465 7320 616e 6420 636c 6172 6966 6963  tes and clarific
-00002da0: 6174 696f 6e73 2e0a 0a52 656c 6561 7365  ations...Release
-00002db0: 2034 2e35 3120 2872 656c 6561 7365 2064   4.51 (release d
-00002dc0: 6174 653a 2032 3032 302d 3035 2d31 3929  ate: 2020-05-19)
-00002dd0: 0a3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  .===============
-00002de0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00002df0: 3d3d 3d3d 3d3d 3d0a 4275 6720 4669 7865  =======.Bug Fixe
-00002e00: 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  s.--------------
-00002e10: 2d2d 2d2d 0a2d 2046 6978 6564 2066 696c  ----.- Fixed fil
-00002e20: 6520 7065 726d 6973 7369 6f6e 7320 666f  e permissions fo
-00002e30: 7220 6372 6564 7374 6f72 3220 616e 6420  r credstor2 and 
-00002e40: 7472 6163 6b65 7220 6669 6c65 7320 2823  tracker files (#
-00002e50: 3130 3032 2061 6e64 2023 2031 3030 3529  1002 and # 1005)
-00002e60: 0a2d 2041 6464 6564 2061 2063 6865 636b  .- Added a check
-00002e70: 2074 6f20 7265 7374 7269 6374 2074 6865   to restrict the
-00002e80: 2064 7572 6174 696f 6e20 282d 6420 6f70   duration (-d op
-00002e90: 7469 6f6e 2920 666f 7220 7369 676e 7572  tion) for signur
-00002ea0: 6c20 636f 6d6d 616e 640a 2020 746f 2031  l command.  to 1
-00002eb0: 3220 686f 7572 7320 6966 202d 7520 666c  2 hours if -u fl
-00002ec0: 6167 2069 7320 7573 6564 2e20 2823 3130  ag is used. (#10
-00002ed0: 3134 290a 2d20 5570 6461 7465 6420 7273  14).- Updated rs
-00002ee0: 796e 6320 636f 6d6d 616e 6420 746f 2074  ync command to t
-00002ef0: 7279 2070 6174 6368 696e 6720 6265 666f  ry patching befo
-00002f00: 7265 206f 7665 7277 7269 7469 6e67 2c0a  re overwriting,.
-00002f10: 2020 7261 7468 6572 2074 6861 6e20 6368    rather than ch
-00002f20: 6563 6b69 6e67 2041 434c 2028 2331 3031  ecking ACL (#101
-00002f30: 3629 0a0a 4f74 6865 7220 4368 616e 6765  6)..Other Change
-00002f40: 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  s.--------------
-00002f50: 2d2d 2d2d 0a2d 2053 6576 6572 616c 2064  ----.- Several d
-00002f60: 6f63 756d 656e 7461 7469 6f6e 2075 7064  ocumentation upd
-00002f70: 6174 6573 2061 6e64 2063 6c61 7269 6669  ates and clarifi
-00002f80: 6361 7469 6f6e 732e 0a0a 5265 6c65 6173  cations...Releas
-00002f90: 6520 342e 3530 2028 7265 6c65 6173 6520  e 4.50 (release 
-00002fa0: 6461 7465 3a20 3230 3230 2d30 342d 3330  date: 2020-04-30
-00002fb0: 290a 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ).==============
-00002fc0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00002fd0: 3d3d 3d3d 3d3d 3d3d 0a4e 6577 2046 6561  ========.New Fea
-00002fe0: 7475 7265 730a 2d2d 2d2d 2d2d 2d2d 2d2d  tures.----------
-00002ff0: 2d2d 2d2d 2d2d 2d2d 0a2d 2053 7769 7463  --------.- Switc
-00003000: 6865 6420 746f 2055 7369 6e67 2056 3420  hed to Using V4 
-00003010: 7369 676e 6174 7572 6520 6173 2064 6566  signature as def
-00003020: 6175 6c74 2066 6f72 2053 3320 2823 3938  ault for S3 (#98
-00003030: 3129 0a0a 4275 6720 4669 7865 730a 2d2d  1)..Bug Fixes.--
-00003040: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00003050: 0a2d 2055 7064 6174 6564 2072 7361 206c  .- Updated rsa l
-00003060: 6962 7261 7279 2074 6f20 7265 6c65 6173  ibrary to releas
-00003070: 652d 342e 3020 2823 3939 3229 0a2d 2055  e-4.0 (#992).- U
-00003080: 7064 6174 6564 2074 6573 7420 7363 7269  pdated test scri
-00003090: 7074 2074 6f20 696e 7374 616c 6c20 7079  pt to install py
-000030a0: 656e 7620 6966 206d 6973 7369 6e67 2066  env if missing f
-000030b0: 6f72 206b 6f6b 6f72 6f20 2823 3939 3029  or kokoro (#990)
-000030c0: 0a2d 2046 6978 6564 2070 7269 6e74 206f  .- Fixed print o
-000030d0: 7264 6572 696e 6720 696e 206b 6d73 2073  rdering in kms s
-000030e0: 6574 2062 7920 7573 696e 6720 7072 696e  et by using prin
-000030f0: 7420 696e 7374 6561 6420 6f66 0a20 2074  t instead of.  t
-00003100: 6578 745f 7574 696c 2e70 7269 6e74 5f74  ext_util.print_t
-00003110: 6f5f 6664 2028 2339 3734 290a 0a4f 7468  o_fd (#974)..Oth
-00003120: 6572 2043 6861 6e67 6573 0a2d 2d2d 2d2d  er Changes.-----
-00003130: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 2d20  -------------.- 
-00003140: 5365 7665 7261 6c20 646f 6375 6d65 6e74  Several document
-00003150: 6174 696f 6e20 7570 6461 7465 7320 616e  ation updates an
-00003160: 6420 636c 6172 6966 6963 6174 696f 6e73  d clarifications
-00003170: 2028 2339 3639 2920 2823 3938 3729 0a0a   (#969) (#987)..
-00003180: 5265 6c65 6173 6520 342e 3439 2028 7265  Release 4.49 (re
-00003190: 6c65 6173 6520 6461 7465 3a20 3230 3230  lease date: 2020
-000031a0: 2d30 332d 3236 290a 3d3d 3d3d 3d3d 3d3d  -03-26).========
-000031b0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000031c0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 0a4e  ==============.N
-000031d0: 6577 2046 6561 7475 7265 730a 2d2d 2d2d  ew Features.----
-000031e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d  --------------.-
-000031f0: 2041 6464 6564 2073 7570 706f 7274 2066   Added support f
-00003200: 6f72 2073 6572 7669 6365 2061 6363 6f75  or service accou
-00003210: 6e74 2069 6d70 6572 736f 6e61 7469 6f6e  nt impersonation
-00003220: 2066 6f72 2073 6967 6e75 726c 2e0a 0a42   for signurl...B
-00003230: 7567 2046 6978 6573 0a2d 2d2d 2d2d 2d2d  ug Fixes.-------
-00003240: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 2d20 4669  -----------.- Fi
-00003250: 7865 6420 616e 2069 7373 7565 2077 6974  xed an issue wit
-00003260: 6820 7273 796e 6320 7468 726f 7769 6e67  h rsync throwing
-00003270: 2065 7272 6f72 2077 6865 6e20 7468 6520   error when the 
-00003280: 6465 7374 696e 6174 696f 6e20 7572 6c20  destination url 
-00003290: 6973 2061 2070 7265 6669 7820 6f66 0a20  is a prefix of. 
-000032a0: 2061 6e20 6578 6973 7469 6e67 206f 626a   an existing obj
-000032b0: 6563 742e 0a0a 4f74 6865 7220 4368 616e  ect...Other Chan
-000032c0: 6765 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ges.------------
-000032d0: 2d2d 2d2d 2d2d 0a2d 2053 6576 6572 616c  ------.- Several
-000032e0: 2064 6f63 756d 656e 7461 7469 6f6e 2075   documentation u
-000032f0: 7064 6174 6573 2061 6e64 2063 6c61 7269  pdates and clari
-00003300: 6669 6361 7469 6f6e 732e 0a0a 5265 6c65  fications...Rele
-00003310: 6173 6520 342e 3438 2028 7265 6c65 6173  ase 4.48 (releas
-00003320: 6520 6461 7465 3a20 3230 3230 2d30 322d  e date: 2020-02-
-00003330: 3238 290a 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  28).============
-00003340: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00003350: 3d3d 3d3d 3d3d 3d3d 3d3d 0a42 7567 2046  ==========.Bug F
-00003360: 6978 6573 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d  ixes.-----------
-00003370: 2d2d 2d2d 2d2d 2d0a 2d20 4669 7865 6420  -------.- Fixed 
-00003380: 7370 6563 6961 6c20 6368 6172 6163 7465  special characte
-00003390: 7220 6861 6e64 6c69 6e67 2069 6e20 6669  r handling in fi
-000033a0: 6c65 6e61 6d65 7320 6f6e 2057 696e 646f  lenames on Windo
-000033b0: 7773 2077 6974 6820 5079 7468 6f6e 332e  ws with Python3.
-000033c0: 0a2d 2046 6978 6564 2069 7373 7565 2077  .- Fixed issue w
-000033d0: 6869 6c65 2074 7261 6e73 6665 7272 696e  hile transferrin
-000033e0: 6720 6269 6e61 7279 2066 696c 6573 2066  g binary files f
-000033f0: 726f 6d20 5333 2077 6974 6820 5079 7468  rom S3 with Pyth
-00003400: 6f6e 332e 0a2d 2046 6978 6564 204b 4d53  on3..- Fixed KMS
-00003410: 2074 6573 7473 2c20 736f 2074 6861 7420   tests, so that 
-00003420: 6b65 7973 2061 7265 2063 7265 6174 6564  keys are created
-00003430: 2069 6e20 7468 6520 7361 6d65 2072 6567   in the same reg
-00003440: 696f 6e20 6173 2074 6865 6972 2062 7563  ion as their buc
-00003450: 6b65 7473 2e0a 0a4f 7468 6572 2043 6861  kets...Other Cha
-00003460: 6e67 6573 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d  nges.-----------
-00003470: 2d2d 2d2d 2d2d 2d0a 2d20 5365 7665 7261  -------.- Severa
-00003480: 6c20 646f 6375 6d65 6e74 6174 696f 6e20  l documentation 
-00003490: 7570 6461 7465 7320 616e 6420 636c 6172  updates and clar
-000034a0: 6966 6963 6174 696f 6e73 2e0a 0a52 656c  ifications...Rel
-000034b0: 6561 7365 2034 2e34 3720 2872 656c 6561  ease 4.47 (relea
-000034c0: 7365 2064 6174 653a 2032 3032 302d 3031  se date: 2020-01
-000034d0: 2d31 3029 0a3d 3d3d 3d3d 3d3d 3d3d 3d3d  -10).===========
-000034e0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000034f0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d0a 4e65 7720  ===========.New 
-00003500: 4665 6174 7572 6573 0a2d 2d2d 2d2d 2d2d  Features.-------
-00003510: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 2d20 4164  -----------.- Ad
-00003520: 6465 6420 7375 7070 6f72 7420 666f 7220  ded support for 
-00003530: 7468 6520 6e65 7720 6172 6368 6976 6520  the new archive 
-00003540: 7374 6f72 6167 6520 636c 6173 732e 0a0a  storage class...
-00003550: 4f74 6865 7220 4368 616e 6765 730a 2d2d  Other Changes.--
-00003560: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00003570: 0a2d 2053 6576 6572 616c 2064 6f63 756d  .- Several docum
-00003580: 656e 7461 7469 6f6e 2075 7064 6174 6573  entation updates
-00003590: 2061 6e64 2063 6c61 7269 6669 6361 7469   and clarificati
-000035a0: 6f6e 732e 0a0a 5265 6c65 6173 6520 342e  ons...Release 4.
-000035b0: 3436 2028 7265 6c65 6173 6520 6461 7465  46 (release date
-000035c0: 3a20 3230 3139 2d31 302d 3331 290a 3d3d  : 2019-10-31).==
-000035d0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000035e0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000035f0: 3d3d 3d3d 3d0a 4275 6720 4669 7865 730a  =====.Bug Fixes.
-00003600: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00003610: 2d2d 0a20 2d20 4669 7865 6420 6973 7375  --. - Fixed issu
-00003620: 6520 7769 7468 2064 6f6d 6169 6e20 7065  e with domain pe
-00003630: 726d 6973 7369 6f6e 7320 6675 6e63 7469  rmissions functi
-00003640: 6f6e 616c 6974 792e 0a0a 5265 6c65 6173  onality...Releas
-00003650: 6520 342e 3435 2028 7265 6c65 6173 6520  e 4.45 (release 
-00003660: 6461 7465 3a20 3230 3139 2d31 302d 3138  date: 2019-10-18
-00003670: 290a 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ).==============
-00003680: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00003690: 3d3d 3d3d 3d3d 3d3d 3d0a 4275 6720 4669  =========.Bug Fi
-000036a0: 7865 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  xes.------------
-000036b0: 2d2d 2d2d 2d2d 0a20 2d20 4669 7865 6420  ------. - Fixed 
-000036c0: 6578 6365 7074 696f 6e20 7768 656e 2075  exception when u
-000036d0: 7369 6e67 2043 4d45 4b20 7769 7468 2072  sing CMEK with r
-000036e0: 6573 756d 6162 6c65 2075 706c 6f61 6473  esumable uploads
-000036f0: 2e0a 202d 2046 6978 6564 2061 6c69 6173  .. - Fixed alias
-00003700: 2066 6f72 206e 6577 2075 626c 6120 636f   for new ubla co
-00003710: 6d6d 616e 642e 0a20 2d20 4669 7865 6420  mmand.. - Fixed 
-00003720: 6465 6661 756c 7420 5244 4e53 2062 6568  default RDNS beh
-00003730: 6176 696f 7220 666f 7220 6261 636b 7761  avior for backwa
-00003740: 7264 7320 636f 6d70 6174 6962 696c 6974  rds compatibilit
-00003750: 7920 7769 7468 2034 2e34 3220 616e 6420  y with 4.42 and 
-00003760: 6561 726c 6965 722e 0a0a 4f74 6865 7220  earlier...Other 
-00003770: 4368 616e 6765 730a 2d2d 2d2d 2d2d 2d2d  Changes.--------
-00003780: 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d 2049 6d70  ----------.- Imp
-00003790: 726f 7665 6d65 6e74 7320 746f 2063 6f6e  rovements to con
-000037a0: 7469 6e75 6f75 7320 696e 7465 6772 6174  tinuous integrat
-000037b0: 696f 6e20 776f 726b 666c 6f77 2e0a 0a52  ion workflow...R
-000037c0: 656c 6561 7365 2034 2e34 3420 2872 656c  elease 4.44 (rel
-000037d0: 6561 7365 2064 6174 653a 2032 3031 392d  ease date: 2019-
-000037e0: 3130 2d30 3229 0a3d 3d3d 3d3d 3d3d 3d3d  10-02).=========
-000037f0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00003800: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 0a4e  ==============.N
-00003810: 6577 2046 6561 7475 7265 730a 2d2d 2d2d  ew Features.----
-00003820: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d  --------------.-
-00003830: 2041 6464 6564 2073 7570 706f 7274 2066   Added support f
-00003840: 6f72 2073 6572 7669 6365 2061 6363 6f75  or service accou
-00003850: 6e74 2069 6d70 6572 736f 6e61 7469 6f6e  nt impersonation
-00003860: 2074 6872 6f75 6768 2061 206e 6577 2060   through a new `
-00003870: 2d69 6020 6f70 7469 6f6e 2074 6f0a 2020  -i` option to.  
-00003880: 7370 6563 6966 7920 6120 7365 7276 6963  specify a servic
-00003890: 6520 6163 636f 756e 7420 746f 2069 6d70  e account to imp
-000038a0: 6572 736f 6e61 7465 2e0a 2d20 4164 6465  ersonate..- Adde
-000038b0: 6420 7375 7070 6f72 7420 666f 7220 6d65  d support for me
-000038c0: 6d62 6572 7320 7573 696e 6720 7468 6520  mbers using the 
-000038d0: 6465 6c65 7465 6420 7379 6e74 6178 2028  deleted syntax (
-000038e0: 692e 652e 2060 6465 6c65 7465 643a 7573  i.e. `deleted:us
-000038f0: 6572 3a2e 2e2e 602c 0a20 2060 6465 6c65  er:...`,.  `dele
-00003900: 7465 643a 6772 6f75 703a 2e2e 2e60 2c20  ted:group:...`, 
-00003910: 6064 656c 6574 6564 3a73 6572 7669 6365  `deleted:service
-00003920: 4163 636f 756e 743a 2e2e 2e60 292e 0a2d  Account:...`)..-
-00003930: 2041 6464 6564 2073 7570 706f 7274 2066   Added support f
-00003940: 6f72 2074 6865 206e 6577 2075 6e69 666f  or the new unifo
-00003950: 726d 2062 7563 6b65 742d 6c65 7665 6c20  rm bucket-level 
-00003960: 6163 6365 7373 2028 6075 626c 6160 2920  access (`ubla`) 
-00003970: 636f 6d6d 616e 640a 2020 2863 7572 7265  command.  (curre
-00003980: 6e74 6c79 2061 6e20 616c 6961 7320 6f66  ntly an alias of
-00003990: 2060 6275 636b 6574 706f 6c69 6379 6f6e   `bucketpolicyon
-000039a0: 6c79 6029 2e0a 2d20 4164 6465 6420 602d  ly`)..- Added `-
-000039b0: 7760 2066 6c61 6720 746f 2060 6b6d 7360  w` flag to `kms`
-000039c0: 2063 6f6d 6d61 6e64 2c20 7768 6963 6820   command, which 
-000039d0: 7368 6f77 7320 6120 7761 726e 696e 6720  shows a warning 
-000039e0: 7261 7468 6572 2074 6861 6e20 6661 696c  rather than fail
-000039f0: 696e 670a 2020 7768 656e 2075 7064 6174  ing.  when updat
-00003a00: 696e 6720 6b65 7920 7065 726d 6973 7369  ing key permissi
-00003a10: 6f6e 7320 646f 6573 206e 6f74 2073 7563  ons does not suc
-00003a20: 6365 6564 2e0a 0a42 7567 2046 6978 6573  ceed...Bug Fixes
-00003a30: 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  .---------------
-00003a40: 2d2d 2d0a 2d20 4669 7865 6420 7265 6772  ---.- Fixed regr
-00003a50: 6573 7369 6f6e 2069 6e20 6370 2077 6865  ession in cp whe
-00003a60: 7265 2061 2073 7461 7465 6d65 6e74 206c  re a statement l
-00003a70: 696b 650a 2020 6063 7020 6d79 2d66 696c  ike.  `cp my-fil
-00003a80: 6520 6773 3a2f 2f6d 792d 6275 636b 6574  e gs://my-bucket
-00003a90: 2f6e 6f6e 2d65 7869 7374 656e 742d 666f  /non-existent-fo
-00003aa0: 6c64 6572 2f60 2077 6f75 6c64 2063 7265  lder/` would cre
-00003ab0: 6174 6520 6120 6669 6c65 2063 616c 6c65  ate a file calle
-00003ac0: 640a 2020 606e 6f6e 2d65 7869 7374 656e  d.  `non-existen
-00003ad0: 742d 666f 6c64 6572 6020 7261 7468 6572  t-folder` rather
-00003ae0: 2074 6861 6e20 606e 6f6e 2d65 7869 7374   than `non-exist
-00003af0: 656e 742d 666f 6c64 6572 2f6d 792d 6669  ent-folder/my-fi
-00003b00: 6c65 602e 0a2d 2046 6978 6564 2073 7472  le`..- Fixed str
-00003b10: 6561 6d69 6e67 2075 706c 6f61 6473 2066  eaming uploads f
-00003b20: 6f72 2050 7974 686f 6e20 332e 0a0a 0a52  or Python 3....R
-00003b30: 656c 6561 7365 2034 2e34 3320 2872 656c  elease 4.43 (rel
-00003b40: 6561 7365 2064 6174 653a 2032 3031 392d  ease date: 2019-
-00003b50: 3039 2d32 3029 0a3d 3d3d 3d3d 3d3d 3d3d  09-20).=========
-00003b60: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00003b70: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 0a4e  ==============.N
-00003b80: 6577 2046 6561 7475 7265 730a 2d2d 2d2d  ew Features.----
-00003b90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d  --------------.-
-00003ba0: 2041 6464 6564 2073 7570 706f 7274 2066   Added support f
-00003bb0: 6f72 2073 6f63 6b73 2070 726f 7869 6573  or socks proxies
-00003bc0: 2c20 696e 636c 7564 696e 6720 736f 636b  , including sock
-00003bd0: 7334 2061 6e64 2073 6f63 6b73 352e 0a0a  s4 and socks5...
-00003be0: 4275 6720 4669 7865 730a 2d2d 2d2d 2d2d  Bug Fixes.------
-00003bf0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d 2046  ------------.- F
-00003c00: 6978 6564 2063 702f 6d76 2065 7272 6f72  ixed cp/mv error
-00003c10: 7320 7468 6174 206f 6363 7572 2077 6865  s that occur whe
-00003c20: 6e20 2064 6573 7469 6e61 7469 6f6e 2064  n  destination d
-00003c30: 6972 6563 746f 7279 2069 7320 6120 7375  irectory is a su
-00003c40: 6273 7472 696e 6720 6f66 0a20 2061 6e6f  bstring of.  ano
-00003c50: 7468 6572 2064 6972 6563 746f 7279 2e20  ther directory. 
-00003c60: 4265 6861 7669 6f72 206e 6f77 206d 6f72  Behavior now mor
-00003c70: 6520 636c 6f73 656c 7920 6d61 7463 6865  e closely matche
-00003c80: 7320 4f53 2063 702f 6d76 2063 6f6d 6d61  s OS cp/mv comma
-00003c90: 6e64 732e 0a2d 2046 6978 6564 2069 7373  nds..- Fixed iss
-00003ca0: 7565 2077 6865 7265 2073 6574 2049 414d  ue where set IAM
-00003cb0: 2070 6f6c 6963 7920 6f6e 206f 626a 6563   policy on objec
-00003cc0: 7473 2074 6872 6577 2065 7272 6f72 732e  ts threw errors.
-00003cd0: 0a2d 2046 6978 6564 2069 7373 7565 2077  .- Fixed issue w
-00003ce0: 6865 6e20 7368 6f77 696e 6720 6865 6c70  hen showing help
-00003cf0: 2069 6e20 6120 7061 6765 7220 696e 2050   in a pager in P
-00003d00: 7974 686f 6e20 3320 656e 7669 726f 6e6d  ython 3 environm
-00003d10: 656e 7473 2e0a 0a4f 7468 6572 2043 6861  ents...Other Cha
-00003d20: 6e67 6573 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d  nges.-----------
-00003d30: 2d2d 2d2d 2d2d 2d0a 2d20 5365 7665 7261  -------.- Severa
-00003d40: 6c20 646f 6375 6d65 6e74 6174 696f 6e20  l documentation 
-00003d50: 7570 6461 7465 7320 616e 6420 636c 6172  updates and clar
-00003d60: 6966 6963 6174 696f 6e73 2e0a 0a52 656c  ifications...Rel
-00003d70: 6561 7365 2034 2e34 3220 2872 656c 6561  ease 4.42 (relea
-00003d80: 7365 2064 6174 653a 2032 3031 392d 3038  se date: 2019-08
-00003d90: 2d30 3529 0a3d 3d3d 3d3d 3d3d 3d3d 3d3d  -05).===========
-00003da0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00003db0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 0a20 4275  ============. Bu
-00003dc0: 6720 4669 7865 730a 2d2d 2d2d 2d2d 2d2d  g Fixes.--------
-00003dd0: 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d 2046 6978  ----------.- Fix
-00003de0: 6564 2073 6f6d 6520 7465 7874 2065 6e63  ed some text enc
-00003df0: 6f64 696e 672f 6465 636f 6469 6e67 2069  oding/decoding i
-00003e00: 7373 7565 7320 696e 2063 6572 7461 696e  ssues in certain
-00003e10: 2050 7974 686f 6e20 3320 656e 7669 726f   Python 3 enviro
-00003e20: 6e6d 656e 7473 2e0a 2d20 4669 7865 6420  nments..- Fixed 
-00003e30: 6973 7375 6520 7768 6572 6520 6275 6e64  issue where bund
-00003e40: 6c65 6420 6372 636d 6f64 2066 6f72 206d  led crcmod for m
-00003e50: 6163 4f53 2063 6f75 6c64 206e 6f74 2062  acOS could not b
-00003e60: 6520 696d 706f 7274 6564 2061 6e64 2077  e imported and w
-00003e70: 6f75 6c64 0a20 2063 7261 7368 2067 7375  ould.  crash gsu
-00003e80: 7469 6c20 6f6e 2050 7974 686f 6e20 332e  til on Python 3.
-00003e90: 0a2d 2046 6978 6564 2069 7373 7565 2077  .- Fixed issue w
-00003ea0: 6865 7265 2074 7279 696e 6720 746f 2072  here trying to r
-00003eb0: 756e 2067 7375 7469 6c20 6f6e 2061 6e20  un gsutil on an 
-00003ec0: 756e 7375 7070 6f72 7465 6420 7665 7273  unsupported vers
-00003ed0: 696f 6e20 6f66 2050 7974 686f 6e20 330a  ion of Python 3.
-00003ee0: 2020 2833 2e34 206f 7220 6265 6c6f 7729    (3.4 or below)
-00003ef0: 2077 6f75 6c64 2063 7261 7368 2069 6e73   would crash ins
-00003f00: 7465 6164 206f 6620 7072 6573 656e 7469  tead of presenti
-00003f10: 6e67 2061 6e20 696e 666f 726d 6174 6976  ng an informativ
-00003f20: 6520 6572 726f 722e 0a0a 4f74 6865 7220  e error...Other 
-00003f30: 4368 616e 6765 730a 2d2d 2d2d 2d2d 2d2d  Changes.--------
-00003f40: 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d 2053 6576  ----------.- Sev
-00003f50: 6572 616c 2064 6f63 756d 656e 7461 7469  eral documentati
-00003f60: 6f6e 2075 7064 6174 6573 2061 6e64 2063  on updates and c
-00003f70: 6c61 7269 6669 6361 7469 6f6e 732e 0a0a  larifications...
-00003f80: 0a52 656c 6561 7365 2034 2e34 3120 2872  .Release 4.41 (r
-00003f90: 656c 6561 7365 2064 6174 653a 2032 3031  elease date: 201
-00003fa0: 392d 3037 2d31 3629 0a3d 3d3d 3d3d 3d3d  9-07-16).=======
-00003fb0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00003fc0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00003fd0: 0a4e 6577 2046 6561 7475 7265 730a 2d2d  .New Features.--
-00003fe0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00003ff0: 0a2d 2041 6464 6564 2048 4d41 4320 6b65  .- Added HMAC ke
-00004000: 7920 6d61 6e61 6765 6d65 6e74 2066 6f72  y management for
-00004010: 2073 6572 7669 6365 2061 6363 6f75 6e74   service account
-00004020: 732e 2054 6869 7320 696e 636c 7564 6573  s. This includes
-00004030: 2061 206e 6577 2022 686d 6163 220a 2020   a new "hmac".  
-00004040: 636f 6d6d 616e 6420 746f 2063 7265 6174  command to creat
-00004050: 652f 6765 742f 6c69 7374 2f75 7064 6174  e/get/list/updat
-00004060: 652f 6465 6c65 7465 2048 4d41 4320 6b65  e/delete HMAC ke
-00004070: 7973 206f 6e20 7365 7276 6963 6520 6163  ys on service ac
-00004080: 636f 756e 7473 2e0a 2020 4375 7272 656e  counts..  Curren
-00004090: 746c 792c 2079 6f75 7220 7072 6f6a 6563  tly, your projec
-000040a0: 7420 6d75 7374 2062 6520 6164 6465 6420  t must be added 
-000040b0: 746f 2074 6865 2061 6c6c 6f77 6c69 7374  to the allowlist
-000040c0: 2066 6f72 2075 7365 2077 6974 6820 7468   for use with th
-000040d0: 6973 206e 6577 2048 4d41 430a 2020 6675  is new HMAC.  fu
-000040e0: 6e63 7469 6f6e 616c 6974 792e 2054 6869  nctionality. Thi
-000040f0: 7320 7265 7374 7269 6374 696f 6e20 7769  s restriction wi
-00004100: 6c6c 2062 6520 6c69 6674 6564 2069 6e20  ll be lifted in 
-00004110: 7468 6520 6e65 6172 2066 7574 7572 652e  the near future.
-00004120: 0a0a 2042 7567 2046 6978 6573 0a2d 2d2d  .. Bug Fixes.---
-00004130: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a  ---------------.
-00004140: 2d20 4669 7865 6420 6275 6720 7768 6572  - Fixed bug wher
-00004150: 6520 636f 7079 696e 6720 6669 6c65 7320  e copying files 
-00004160: 3e20 3130 304d 6942 2066 726f 6d20 4743  > 100MiB from GC
-00004170: 5320 746f 2053 3320 7761 7320 6861 6e67  S to S3 was hang
-00004180: 696e 672e 0a2d 2046 6978 6564 2069 7373  ing..- Fixed iss
-00004190: 7565 2077 6865 7265 2063 6f6e 7465 6e74  ue where content
-000041a0: 2074 7970 6520 7761 7320 736f 6d65 7469   type was someti
-000041b0: 6d65 7320 7365 7420 696d 7072 6f70 6572  mes set improper
-000041c0: 6c79 2e0a 0a0a 5265 6c65 6173 6520 342e  ly....Release 4.
-000041d0: 3430 2028 7265 6c65 6173 6520 6461 7465  40 (release date
-000041e0: 3a20 3230 3139 2d30 372d 3031 290a 3d3d  : 2019-07-01).==
-000041f0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00004200: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00004210: 3d3d 3d3d 3d0a 4e65 7720 4665 6174 7572  =====.New Featur
-00004220: 6573 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  es.-------------
-00004230: 2d2d 2d2d 2d0a 2d20 4164 6465 6420 7375  -----.- Added su
-00004240: 7070 6f72 7420 666f 7220 7275 6e6e 696e  pport for runnin
-00004250: 6720 6773 7574 696c 206f 6e20 5079 7468  g gsutil on Pyth
-00004260: 6f6e 2033 2e35 2b2e 2050 7974 686f 6e20  on 3.5+. Python 
-00004270: 3220 7769 6c6c 2072 6561 6368 2069 7473  2 will reach its
-00004280: 2045 4f4c 0a20 2028 456e 6420 6f66 204c   EOL.  (End of L
-00004290: 6966 6529 206f 6e20 4a61 6e2e 2031 2c20  ife) on Jan. 1, 
-000042a0: 3230 3230 2c20 616e 6420 6773 7574 696c  2020, and gsutil
-000042b0: 2077 696c 6c20 7374 6f70 2073 7570 706f   will stop suppo
-000042c0: 7274 696e 6720 5079 7468 6f6e 2032 2e37  rting Python 2.7
-000042d0: 2061 740a 2020 736f 6d65 2070 6f69 6e74   at.  some point
-000042e0: 2061 6674 6572 7761 7264 2028 5442 4429   afterward (TBD)
-000042f0: 2e0a 0a20 4275 6720 4669 7865 730a 2d2d  ... Bug Fixes.--
-00004300: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004310: 0a2d 2046 6978 6564 2062 7567 2069 6e74  .- Fixed bug int
-00004320: 726f 6475 6365 6420 696e 2076 342e 3339  roduced in v4.39
-00004330: 2077 6865 7265 2072 7379 6e63 2077 6f75   where rsync wou
-00004340: 6c64 206e 6f74 2063 6f72 7265 6374 6c79  ld not correctly
-00004350: 2073 796e 6320 6f62 6a65 6374 2f66 696c   sync object/fil
-00004360: 650a 2020 6e61 6d65 7320 636f 6e74 6169  e.  names contai
-00004370: 6e69 6e67 2073 6f6d 6520 7370 6563 6961  ning some specia
-00004380: 6c20 5552 4c2d 656e 636f 6461 626c 6520  l URL-encodable 
-00004390: 6368 6172 6163 7465 7273 2028 652e 672e  characters (e.g.
-000043a0: 2022 2b22 2061 6e64 0a20 2077 6869 7465   "+" and.  white
-000043b0: 7370 6163 6520 6368 6172 6163 7465 7273  space characters
-000043c0: 292e 0a2d 2046 6978 6564 2074 6865 2075  )..- Fixed the u
-000043d0: 7064 6174 6520 636f 6d6d 616e 6420 736f  pdate command so
-000043e0: 2074 6861 7420 6974 206e 6f20 6c6f 6e67   that it no long
-000043f0: 6572 2066 6169 6c73 2077 6865 6e20 6974  er fails when it
-00004400: 2064 6574 6563 7473 2074 6865 0a20 2070   detects the.  p
-00004410: 7265 7365 6e63 6520 6f66 2061 6464 6974  resence of addit
-00004420: 696f 6e61 6c20 746f 702d 6c65 7665 6c20  ional top-level 
-00004430: 6669 6c65 7320 7468 6174 2077 6572 6520  files that were 
-00004440: 6164 6465 6420 696e 2074 6865 2076 342e  added in the v4.
-00004450: 3339 2072 656c 6561 7365 2e0a 0a20 4f74  39 release... Ot
-00004460: 6865 7220 4368 616e 6765 730a 2d2d 2d2d  her Changes.----
-00004470: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d  --------------.-
-00004480: 2053 6576 6572 616c 2064 6f63 756d 656e   Several documen
-00004490: 7461 7469 6f6e 2075 7064 6174 6573 2061  tation updates a
-000044a0: 6e64 2063 6c61 7269 6669 6361 7469 6f6e  nd clarification
-000044b0: 732e 0a0a 0a52 656c 6561 7365 2034 2e33  s....Release 4.3
-000044c0: 3920 2872 656c 6561 7365 2064 6174 653a  9 (release date:
-000044d0: 2032 3031 392d 3036 2d31 3329 0a3d 3d3d   2019-06-13).===
-000044e0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000044f0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00004500: 3d3d 3d3d 0a4e 6577 2046 6561 7475 7265  ====.New Feature
-00004510: 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  s.--------------
-00004520: 2d2d 2d2d 0a2d 2043 6f6d 7072 6573 7369  ----.- Compressi
-00004530: 6f6e 206c 6576 656c 2069 7320 6e6f 7720  on level is now 
-00004540: 636f 6e66 6967 7572 6162 6c65 2062 7920  configurable by 
-00004550: 7365 7474 696e 6720 2267 7a69 705f 636f  setting "gzip_co
-00004560: 6d70 7265 7373 696f 6e5f 6c65 7665 6c22  mpression_level"
-00004570: 0a20 2075 6e64 6572 2074 6865 2022 4753  .  under the "GS
-00004580: 5574 696c 2220 7365 6374 696f 6e20 696e  Util" section in
-00004590: 2074 6865 2062 6f74 6f20 636f 6e66 6967   the boto config
-000045a0: 2066 696c 652e 2054 6865 2064 6566 6175   file. The defau
-000045b0: 6c74 2076 616c 7565 2069 7320 392e 0a0a  lt value is 9...
-000045c0: 2042 7567 2046 6978 6573 0a2d 2d2d 2d2d   Bug Fixes.-----
-000045d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 2d20  -------------.- 
-000045e0: 4669 7865 6420 6275 6720 7768 6572 6520  Fixed bug where 
-000045f0: 4941 4d20 6f70 6572 6174 696f 6e73 2066  IAM operations f
-00004600: 6169 6c65 6420 6f6e 2062 7563 6b65 7473  ailed on buckets
-00004610: 2077 686f 7365 206e 616d 6573 206c 6163   whose names lac
-00004620: 6b65 6420 616e 790a 2020 6c65 7474 6572  ked any.  letter
-00004630: 732e 0a0a 204f 7468 6572 2043 6861 6e67  s... Other Chang
-00004640: 6573 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  es.-------------
-00004650: 2d2d 2d2d 2d0a 2d20 5265 7669 7365 6420  -----.- Revised 
-00004660: 636f 6e74 7269 6275 7469 6f6e 2067 7569  contribution gui
-00004670: 6465 6c69 6e65 7320 746f 2064 6972 6563  delines to direc
-00004680: 7420 6465 7665 6c6f 7065 7273 2074 6f20  t developers to 
-00004690: 7375 626d 6974 2047 6974 4875 6220 7075  submit GitHub pu
-000046a0: 6c6c 0a20 2072 6571 7565 7374 7320 696e  ll.  requests in
-000046b0: 7374 6561 6420 6f66 2075 7369 6e67 2074  stead of using t
-000046c0: 6865 2052 6965 7476 656c 6420 636f 6465  he Rietveld code
-000046d0: 2072 6576 6965 7720 746f 6f6c 2e0a 2d20   review tool..- 
-000046e0: 5365 7665 7261 6c20 636f 6465 2063 6861  Several code cha
-000046f0: 6e67 6573 2074 6f20 776f 726b 2074 6f77  nges to work tow
-00004700: 6172 6420 5079 7468 6f6e 2033 2073 7570  ard Python 3 sup
-00004710: 706f 7274 2028 636f 6d69 6e67 2069 6e20  port (coming in 
-00004720: 6120 7375 6273 6571 7565 6e74 0a20 2072  a subsequent.  r
-00004730: 656c 6561 7365 292e 0a2d 2053 6576 6572  elease)..- Sever
-00004740: 616c 2064 6f63 756d 656e 7461 7469 6f6e  al documentation
-00004750: 2061 6e64 2063 6f6d 6d61 6e64 2068 656c   and command hel
-00004760: 7020 696d 7072 6f76 656d 656e 7473 2e0a  p improvements..
-00004770: 2d20 5661 7269 6f75 7320 696d 7072 6f76  - Various improv
-00004780: 656d 656e 7473 2074 6f20 7465 7374 2073  ements to test s
-00004790: 7461 6269 6c69 7479 2061 6e64 2066 6565  tability and fee
-000047a0: 6462 6163 6b2e 0a0a 0a52 656c 6561 7365  dback....Release
-000047b0: 2034 2e33 3820 2872 656c 6561 7365 2064   4.38 (release d
-000047c0: 6174 653a 2032 3031 392d 3033 2d32 3529  ate: 2019-03-25)
-000047d0: 0a3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  .===============
-000047e0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000047f0: 3d3d 3d3d 3d3d 3d3d 0a42 7567 2046 6978  ========.Bug Fix
-00004800: 6573 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  es.-------------
-00004810: 2d2d 2d2d 2d0a 2d20 4669 7865 6420 6973  -----.- Fixed is
-00004820: 7375 6520 7768 6572 6520 6d75 6c74 6970  sue where multip
-00004830: 726f 6365 7373 696e 6720 6368 6563 6b20  rocessing check 
-00004840: 776f 756c 6420 7261 6973 6520 616e 2065  would raise an e
-00004850: 7863 6570 7469 6f6e 2069 660a 2020 2f65  xception if.  /e
-00004860: 7463 2f6f 732d 7265 6c65 6173 6520 7761  tc/os-release wa
-00004870: 7320 6e6f 7420 696e 2074 6865 2065 7870  s not in the exp
-00004880: 6563 7465 6420 666f 726d 6174 2e0a 0a4f  ected format...O
-00004890: 7468 6572 2043 6861 6e67 6573 0a2d 2d2d  ther Changes.---
-000048a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a  ---------------.
-000048b0: 2d20 496d 7072 6f76 6564 2065 7272 6f72  - Improved error
-000048c0: 206d 6573 7361 6765 2066 6f72 2074 7279   message for try
-000048d0: 696e 6720 746f 2072 6574 7269 6576 6520  ing to retrieve 
-000048e0: 6465 6661 756c 7420 6f62 6a65 6374 2041  default object A
-000048f0: 434c 7320 6f6e 2061 2062 7563 6b65 740a  CLs on a bucket.
-00004900: 2020 7769 7468 2042 7563 6b65 7420 506f    with Bucket Po
-00004910: 6c69 6379 204f 6e6c 7920 656e 6162 6c65  licy Only enable
-00004920: 642e 0a2d 2057 6865 6e20 7275 6e6e 696e  d..- When runnin
-00004930: 6720 2267 7375 7469 6c20 2d44 2072 7379  g "gsutil -D rsy
-00004940: 6e63 202e 2e2e 2220 616e 6420 656e 636f  nc ..." and enco
-00004950: 756e 7465 7269 6e67 2061 6e20 6572 726f  untering an erro
-00004960: 7220 6c69 7374 696e 6720 6c6f 6361 6c0a  r listing local.
-00004970: 2020 6669 6c65 732c 2067 7375 7469 6c20    files, gsutil 
-00004980: 7769 6c6c 206e 6f77 2070 7269 6e74 2061  will now print a
-00004990: 2073 7461 636b 2074 7261 6365 2061 7320   stack trace as 
-000049a0: 6465 6275 672d 6c65 7665 6c20 6f75 7470  debug-level outp
-000049b0: 7574 2e0a 2d20 5365 7665 7261 6c20 646f  ut..- Several do
-000049c0: 6375 6d65 6e74 6174 696f 6e20 7570 6461  cumentation upda
-000049d0: 7465 7320 616e 6420 636c 6172 6966 6963  tes and clarific
-000049e0: 6174 696f 6e73 2e0a 0a0a 5265 6c65 6173  ations....Releas
-000049f0: 6520 342e 3337 2028 7265 6c65 6173 6520  e 4.37 (release 
-00004a00: 6461 7465 3a20 3230 3139 2d30 322d 3236  date: 2019-02-26
-00004a10: 290a 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ).==============
-00004a20: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00004a30: 3d3d 3d3d 3d3d 3d3d 3d0a 4275 6720 4669  =========.Bug Fi
-00004a40: 7865 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  xes.------------
-00004a50: 2d2d 2d2d 2d2d 0a2d 2046 6978 6564 2061  ------.- Fixed a
-00004a60: 2062 7567 2077 6865 7265 2058 4d4c 2041   bug where XML A
-00004a70: 5049 2072 6571 7565 7374 7320 776f 756c  PI requests woul
-00004a80: 6420 736f 6d65 7469 6d65 7320 6661 696c  d sometimes fail
-00004a90: 2077 6974 6820 5353 4c45 7272 6f72 0a20   with SSLError. 
-00004aa0: 2065 7863 6570 7469 6f6e 7320 6475 6520   exceptions due 
-00004ab0: 746f 2053 4e49 206e 6f74 2062 6569 6e67  to SNI not being
-00004ac0: 2075 7365 6420 666f 7220 6874 7470 7320   used for https 
-00004ad0: 636f 6e6e 6563 7469 6f6e 732e 0a2d 2046  connections..- F
-00004ae0: 6978 6564 2022 6475 2220 6f75 7470 7574  ixed "du" output
-00004af0: 2073 7061 6369 6e67 2066 6f72 2036 2d64   spacing for 6-d
-00004b00: 6967 6974 2073 697a 6573 2e0a 0a4f 7468  igit sizes...Oth
-00004b10: 6572 2043 6861 6e67 6573 0a2d 2d2d 2d2d  er Changes.-----
-00004b20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 2d20  -------------.- 
-00004b30: 5570 6461 7465 6420 6372 636d 6f64 2069  Updated crcmod i
-00004b40: 6e73 7461 6c6c 6174 696f 6e20 696e 7374  nstallation inst
-00004b50: 7275 6374 696f 6e73 2066 6f72 2043 656e  ructions for Cen
-00004b60: 744f 5320 362e 0a0a 0a52 656c 6561 7365  tOS 6....Release
-00004b70: 2034 2e33 3620 2872 656c 6561 7365 2064   4.36 (release d
-00004b80: 6174 653a 2032 3031 392d 3031 2d32 3829  ate: 2019-01-28)
-00004b90: 0a3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  .===============
-00004ba0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00004bb0: 3d3d 3d3d 3d3d 3d3d 0a4e 6577 2066 6561  ========.New fea
-00004bc0: 7475 7265 730a 2d2d 2d2d 2d2d 2d2d 2d2d  tures.----------
-00004bd0: 2d2d 2d2d 2d2d 2d2d 0a2d 2041 6464 6564  --------.- Added
-00004be0: 2042 7563 6b65 7420 506f 6c69 6379 204f   Bucket Policy O
-00004bf0: 6e6c 7920 7375 7070 6f72 7420 746f 2067  nly support to g
-00004c00: 7375 7469 6c2e 2054 6869 7320 696e 636c  sutil. This incl
-00004c10: 7564 6573 2061 206e 6577 0a20 2022 6275  udes a new.  "bu
-00004c20: 636b 6574 706f 6c69 6379 6f6e 6c79 2220  cketpolicyonly" 
-00004c30: 636f 6d6d 616e 6420 746f 2067 6574 2f73  command to get/s
-00004c40: 6574 2042 504f 206f 6e20 6578 6973 7469  et BPO on existi
-00004c50: 6e67 2062 7563 6b65 7473 2c20 6173 2077  ng buckets, as w
-00004c60: 656c 6c20 6164 6469 6e67 0a20 2074 6865  ell adding.  the
-00004c70: 2061 6269 6c69 7479 2074 6f20 7365 7420   ability to set 
-00004c80: 4250 4f20 6174 2062 7563 6b65 7420 6372  BPO at bucket cr
-00004c90: 6561 7469 6f6e 2074 696d 6520 7769 7468  eation time with
-00004ca0: 2022 6d62 202d 6222 2e20 4375 7272 656e   "mb -b". Curren
-00004cb0: 746c 792c 2079 6f75 720a 2020 7072 6f6a  tly, your.  proj
-00004cc0: 6563 7420 6d75 7374 2062 6520 6164 6465  ect must be adde
-00004cd0: 6420 746f 2074 6865 2061 6c6c 6f77 6c69  d to the allowli
-00004ce0: 7374 2066 6f72 2075 7365 2077 6974 6820  st for use with 
-00004cf0: 7468 6520 6e65 7720 4250 4f20 6675 6e63  the new BPO func
-00004d00: 7469 6f6e 616c 6974 792e 0a20 2054 6869  tionality..  Thi
-00004d10: 7320 7265 7374 7269 6374 696f 6e20 7769  s restriction wi
-00004d20: 6c6c 2062 6520 6c69 6674 6564 2069 6e20  ll be lifted in 
-00004d30: 7468 6520 6e65 6172 2066 7574 7572 652e  the near future.
-00004d40: 0a0a 4275 6720 4669 7865 730a 2d2d 2d2d  ..Bug Fixes.----
-00004d50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d  --------------.-
-00004d60: 2046 6978 6564 2061 2062 7567 2077 6865   Fixed a bug whe
-00004d70: 7265 2022 6370 202d 6e22 2077 6f75 6c64  re "cp -n" would
-00004d80: 206f 7665 7277 7269 7465 2061 206c 6f63   overwrite a loc
-00004d90: 616c 2066 696c 6520 6174 2074 6865 2064  al file at the d
-00004da0: 6573 7469 6e61 7469 6f6e 2069 660a 2020  estination if.  
-00004db0: 6974 7320 7369 7a65 2064 6966 6665 7265  its size differe
-00004dc0: 6420 6672 6f6d 2074 6865 2073 6f75 7263  d from the sourc
-00004dd0: 6527 7320 7369 7a65 2e0a 0a4f 7468 6572  e's size...Other
-00004de0: 2043 6861 6e67 6573 0a2d 2d2d 2d2d 2d2d   Changes.-------
-00004df0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 2d20 5570  -----------.- Up
-00004e00: 6461 7465 6420 6372 636d 6f64 2069 6e73  dated crcmod ins
-00004e10: 7461 6c6c 6174 696f 6e20 696e 7374 7275  tallation instru
-00004e20: 6374 696f 6e73 2066 6f72 2065 6e74 6572  ctions for enter
-00004e30: 7072 6973 6520 5355 5345 2073 7973 7465  prise SUSE syste
-00004e40: 6d73 2e0a 0a0a 5265 6c65 6173 6520 342e  ms....Release 4.
-00004e50: 3335 2028 7265 6c65 6173 6520 6461 7465  35 (release date
-00004e60: 3a20 3230 3138 2d31 322d 3138 290a 3d3d  : 2018-12-18).==
-00004e70: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00004e80: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00004e90: 3d3d 3d3d 3d0a 4e65 7720 6665 6174 7572  =====.New featur
-00004ea0: 6573 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  es.-------------
-00004eb0: 2d2d 2d2d 2d0a 2d20 4164 6465 6420 2d75  -----.- Added -u
-00004ec0: 206f 7074 696f 6e20 746f 2072 7379 6e63   option to rsync
-00004ed0: 3b20 7468 6973 2077 696c 6c20 736b 6970  ; this will skip
-00004ee0: 2063 6f70 7969 6e67 2066 696c 6573 2f6f   copying files/o
-00004ef0: 626a 6563 7473 2074 6861 7420 6172 6520  bjects that are 
-00004f00: 6e65 7765 720a 2020 2861 7320 6465 7465  newer.  (as dete
-00004f10: 726d 696e 6564 2062 7920 6368 6563 6b69  rmined by checki
-00004f20: 6e67 206d 7469 6d65 2920 6174 2074 6865  ng mtime) at the
-00004f30: 2064 6573 7469 6e61 7469 6f6e 2e0a 0a42   destination...B
-00004f40: 7567 2046 6978 6573 0a2d 2d2d 2d2d 2d2d  ug Fixes.-------
-00004f50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 2d20 5468  -----------.- Th
-00004f60: 6520 2269 616d 2063 6822 2063 6f6d 6d61  e "iam ch" comma
-00004f70: 6e64 206e 6f77 2061 6c6c 6f77 7320 7375  nd now allows su
-00004f80: 7070 6c79 696e 6720 6375 7374 6f6d 2049  pplying custom I
-00004f90: 414d 2072 6f6c 6573 2e0a 2d20 4669 7865  AM roles..- Fixe
-00004fa0: 6420 616e 2069 7373 7565 2077 6865 7265  d an issue where
-00004fb0: 2064 6562 7567 206f 7574 7075 7420 7761   debug output wa
-00004fc0: 7320 6e6f 7420 6469 7370 6c61 7969 6e67  s not displaying
-00004fd0: 2061 6c6c 206f 6620 7468 6520 6c6f 6164   all of the load
-00004fe0: 6564 2063 6f6e 6669 670a 2020 6669 6c65  ed config.  file
-00004ff0: 7320 756e 6465 7220 7468 6520 2263 6f6e  s under the "con
-00005000: 6669 6720 7061 7468 2873 2922 206c 6162  fig path(s)" lab
-00005010: 656c 2e0a 2d20 4469 7361 626c 6564 2072  el..- Disabled r
-00005020: 756e 6e69 6e67 2077 6974 6820 6d75 6c74  unning with mult
-00005030: 6970 6c65 2070 726f 6365 7373 6573 2077  iple processes w
-00005040: 6865 6e20 7275 6e6e 696e 6720 6f6e 2041  hen running on A
-00005050: 6c70 696e 6520 4c69 6e75 782c 2061 7320  lpine Linux, as 
-00005060: 7468 6973 0a20 2077 6f75 6c64 2073 6f6d  this.  would som
-00005070: 6574 696d 6573 2063 6175 7365 2067 7375  etimes cause gsu
-00005080: 7469 6c20 746f 2068 616e 6720 666f 7265  til to hang fore
-00005090: 7665 722e 2052 756e 6e69 6e67 2077 6974  ver. Running wit
-000050a0: 6820 6d75 6c74 6970 6c65 2074 6872 6561  h multiple threa
-000050b0: 6473 2069 730a 2020 7374 696c 6c20 616c  ds is.  still al
-000050c0: 6c6f 7765 642e 0a2d 2054 6865 2022 7273  lowed..- The "rs
-000050d0: 796e 6322 2063 6f6d 6d61 6e64 206e 6f77  ync" command now
-000050e0: 2070 7269 6e74 7320 6c6f 6720 6d65 7373   prints log mess
-000050f0: 6167 6573 2064 7572 696e 6720 7379 6e63  ages during sync
-00005100: 6872 6f6e 697a 6174 696f 6e20 746f 2069  hronization to i
-00005110: 6e64 6963 6174 650a 2020 7768 656e 2073  ndicate.  when s
-00005120: 796d 6c69 6e6b 7320 6172 6520 6265 696e  ymlinks are bein
-00005130: 6720 736b 6970 7065 642e 0a2d 2054 6865  g skipped..- The
-00005140: 2022 426f 746f 3a63 615f 6365 7274 6966   "Boto:ca_certif
-00005150: 6963 6174 6573 5f66 696c 6522 2063 6f6e  icates_file" con
-00005160: 6669 6720 6f70 7469 6f6e 2063 616e 206e  fig option can n
-00005170: 6f77 2062 6520 6f76 6572 7269 6464 656e  ow be overridden
-00005180: 2075 7369 6e67 0a20 2074 6865 202d 6f20   using.  the -o 
-00005190: 6f70 7469 6f6e 2e0a 0a4f 7468 6572 2043  option...Other C
-000051a0: 6861 6e67 6573 0a2d 2d2d 2d2d 2d2d 2d2d  hanges.---------
-000051b0: 2d2d 2d2d 2d2d 2d2d 2d0a 2d20 4469 7361  ---------.- Disa
-000051c0: 6c6c 6f77 6564 2069 6e73 7461 6c6c 696e  llowed installin
-000051d0: 6720 6773 7574 696c 206f 6e20 5079 7468  g gsutil on Pyth
-000051e0: 6f6e 2076 6572 7369 6f6e 7320 213d 2032  on versions != 2
-000051f0: 2e37 2e0a 2d20 5365 7665 7261 6c20 646f  .7..- Several do
-00005200: 6375 6d65 6e74 6174 696f 6e20 7570 6461  cumentation upda
-00005210: 7465 7320 616e 6420 636c 6172 6966 6963  tes and clarific
-00005220: 6174 696f 6e73 2e0a 0a0a 5265 6c65 6173  ations....Releas
-00005230: 6520 342e 3334 2028 7265 6c65 6173 6520  e 4.34 (release 
-00005240: 6461 7465 3a20 3230 3138 2d30 392d 3131  date: 2018-09-11
-00005250: 290a 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ).==============
-00005260: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00005270: 3d3d 3d3d 3d3d 3d3d 3d0a 4e65 7720 6665  =========.New fe
-00005280: 6174 7572 6573 0a2d 2d2d 2d2d 2d2d 2d2d  atures.---------
-00005290: 2d2d 2d2d 2d2d 2d2d 2d0a 2d20 4164 6465  ---------.- Adde
-000052a0: 6420 6275 636b 6574 206c 6f63 6b20 7375  d bucket lock su
-000052b0: 7070 6f72 7420 746f 2067 7375 7469 6c2e  pport to gsutil.
-000052c0: 2043 7572 7265 6e74 6c79 2c20 796f 7572   Currently, your
-000052d0: 2070 726f 6a65 6374 206d 7573 7420 6265   project must be
-000052e0: 2061 6464 6564 2074 6f0a 2020 7468 6520   added to.  the 
-000052f0: 616c 6c6f 776c 6973 7420 666f 7220 7573  allowlist for us
-00005300: 6520 7769 7468 2074 6865 206e 6577 2062  e with the new b
-00005310: 7563 6b65 7420 6c6f 636b 2066 756e 6374  ucket lock funct
-00005320: 696f 6e61 6c69 7479 2e20 5468 6973 2072  ionality. This r
-00005330: 6573 7472 6963 7469 6f6e 0a20 2077 696c  estriction.  wil
-00005340: 6c20 6265 206c 6966 7465 6420 696e 2074  l be lifted in t
-00005350: 6865 206e 6561 7220 6675 7475 7265 2e0a  he near future..
-00005360: 0a42 7567 2046 6978 6573 0a2d 2d2d 2d2d  .Bug Fixes.-----
-00005370: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 2d20  -------------.- 
-00005380: 4669 7865 6420 6973 7375 6520 7768 6572  Fixed issue wher
-00005390: 6520 2272 7379 6e63 202d 5022 2077 6f75  e "rsync -P" wou
-000053a0: 6c64 2066 6169 6c20 6966 2072 756e 2061  ld fail if run a
-000053b0: 7320 7468 6520 726f 6f74 2075 7365 722e  s the root user.
-000053c0: 0a2d 2046 6978 6564 2061 6e20 6973 7375  .- Fixed an issu
-000053d0: 6520 7769 7468 2063 7265 6465 6e74 6961  e with credentia
-000053e0: 6c20 6361 6368 696e 6720 7768 6572 6520  l caching where 
-000053f0: 7468 6520 736f 7572 6365 2063 7265 6465  the source crede
-00005400: 6e74 6961 6c73 2066 6f72 2061 6e0a 2020  ntials for an.  
-00005410: 656e 7469 7479 2077 6f75 6c64 2063 6861  entity would cha
-00005420: 6e67 6520 6275 7420 7468 6520 6f6c 6420  nge but the old 
-00005430: 6361 6368 6564 2063 7265 6465 6e74 6961  cached credentia
-00005440: 6c73 2077 6f75 6c64 2073 7469 6c6c 2062  ls would still b
-00005450: 6520 7573 6564 2e0a 0a4f 7468 6572 2043  e used...Other C
-00005460: 6861 6e67 6573 0a2d 2d2d 2d2d 2d2d 2d2d  hanges.---------
-00005470: 2d2d 2d2d 2d2d 2d2d 2d0a 2d20 4f41 7574  ---------.- OAut
-00005480: 6832 2074 6f6b 656e 2065 7863 6861 6e67  h2 token exchang
-00005490: 6573 206e 6f77 2067 6f20 746f 2068 7474  es now go to htt
-000054a0: 7073 3a2f 2f6f 6175 7468 322e 676f 6f67  ps://oauth2.goog
-000054b0: 6c65 6170 6973 2e63 6f6d 2f74 6f6b 656e  leapis.com/token
-000054c0: 2069 6e73 7465 6164 0a20 206f 6620 6874   instead.  of ht
-000054d0: 7470 733a 2f2f 6163 636f 756e 7473 2e67  tps://accounts.g
-000054e0: 6f6f 676c 652e 636f 6d2f 6f2f 6f61 7574  oogle.com/o/oaut
-000054f0: 6832 2f74 6f6b 656e 2e20 5573 6572 7320  h2/token. Users 
-00005500: 7573 696e 6720 6773 7574 696c 2062 6568  using gsutil beh
-00005510: 696e 6420 610a 2020 6669 7265 7761 6c6c  ind a.  firewall
-00005520: 206d 6179 206e 6565 6420 746f 2061 646a   may need to adj
-00005530: 7573 7420 7468 6569 7220 6669 7265 7761  ust their firewa
-00005540: 6c6c 2072 756c 6573 2e0a 2d20 4966 2069  ll rules..- If i
-00005550: 6e76 6f6b 6564 2076 6961 2074 6865 2043  nvoked via the C
-00005560: 6c6f 7564 2053 444b 2c20 6773 7574 696c  loud SDK, gsutil
-00005570: 2773 2064 6562 7567 206f 7574 7075 7420  's debug output 
-00005580: 6e6f 7720 6469 7370 6c61 7973 2074 6865  now displays the
-00005590: 2070 6174 6820 746f 0a20 2067 636c 6f75   path to.  gclou
-000055a0: 6427 7320 6773 7574 696c 2077 7261 7070  d's gsutil wrapp
-000055b0: 6572 2073 6372 6970 7420 666f 7220 2267  er script for "g
-000055c0: 7375 7469 6c20 7061 7468 222c 2072 6174  sutil path", rat
-000055d0: 6865 7220 7468 616e 2074 6865 2061 6374  her than the act
-000055e0: 7561 6c20 656e 7472 790a 2020 706f 696e  ual entry.  poin
-000055f0: 7420 666f 7220 7468 6520 6275 6e64 6c65  t for the bundle
-00005600: 6420 6773 7574 696c 2063 6f6d 706f 6e65  d gsutil compone
-00005610: 6e74 2e0a 2d20 496d 7072 6f76 6564 2065  nt..- Improved e
-00005620: 7272 6f72 206d 6573 7361 6765 7320 666f  rror messages fo
-00005630: 7220 6661 696c 6564 2043 6c6f 7564 204b  r failed Cloud K
-00005640: 4d53 2072 6571 7565 7374 732e 0a2d 2049  MS requests..- I
-00005650: 6d70 726f 7665 6420 6572 726f 7220 6d65  mproved error me
-00005660: 7373 6167 6573 2066 6f72 2022 6961 6d20  ssages for "iam 
-00005670: 6368 2220 636f 6d6d 616e 6420 746f 2063  ch" command to c
-00005680: 6c61 7269 6679 2074 6861 7420 6173 7369  larify that assi
-00005690: 676e 696e 670a 2020 726f 6c65 7320 746f  gning.  roles to
-000056a0: 2070 726f 6a65 6374 2063 6f6e 7665 6e69   project conveni
-000056b0: 656e 6365 2067 726f 7570 7320 2865 2e67  ence groups (e.g
-000056c0: 2e20 2270 726f 6a65 6374 4564 6974 6f72  . "projectEditor
-000056d0: 2229 2069 7320 6e6f 7420 616c 6c6f 7765  ") is not allowe
-000056e0: 642e 0a2d 2045 6e68 616e 6365 6420 7065  d..- Enhanced pe
-000056f0: 7266 6469 6167 2063 6f6d 6d61 6e64 2074  rfdiag command t
-00005700: 6f20 696e 636c 7564 6520 4743 4520 696e  o include GCE in
-00005710: 7374 616e 6365 2064 6574 6169 6c73 2028  stance details (
-00005720: 6966 2061 7070 6c69 6361 626c 6529 0a20  if applicable). 
-00005730: 2061 6e64 2074 6865 2074 6172 6765 7420   and the target 
-00005740: 6275 636b 6574 2773 206c 6f63 6174 696f  bucket's locatio
-00005750: 6e20 616e 6420 7374 6f72 6167 6520 636c  n and storage cl
-00005760: 6173 732e 0a2d 2053 6576 6572 616c 2064  ass..- Several d
-00005770: 6f63 756d 656e 7461 7469 6f6e 2075 7064  ocumentation upd
-00005780: 6174 6573 2061 6e64 2063 6c61 7269 6669  ates and clarifi
-00005790: 6361 7469 6f6e 732e 0a0a 0a52 656c 6561  cations....Relea
-000057a0: 7365 2034 2e33 3320 2872 656c 6561 7365  se 4.33 (release
-000057b0: 2064 6174 653a 2032 3031 382d 3036 2d32   date: 2018-06-2
-000057c0: 3129 0a3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  1).=============
-000057d0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000057e0: 3d3d 3d3d 3d3d 3d3d 3d3d 0a42 7567 2046  ==========.Bug F
-000057f0: 6978 6573 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d  ixes.-----------
-00005800: 2d2d 2d2d 2d2d 2d0a 2d20 4669 7865 6420  -------.- Fixed 
-00005810: 616e 2069 7373 7565 2077 6974 6820 7468  an issue with th
-00005820: 6520 2272 7379 6e63 2220 636f 6d6d 616e  e "rsync" comman
-00005830: 6420 6f6e 2057 696e 646f 7773 2074 6861  d on Windows tha
-00005840: 7420 776f 756c 6420 6361 7573 6520 6773  t would cause gs
-00005850: 7574 696c 0a20 2074 6f20 696e 636f 7272  util.  to incorr
-00005860: 6563 746c 7920 6a6f 696e 2066 696c 6520  ectly join file 
-00005870: 7061 7468 2073 6567 6d65 6e74 7320 7768  path segments wh
-00005880: 656e 2074 6865 2073 6f75 7263 6520 6769  en the source gi
-00005890: 7665 6e20 7761 7320 7468 6520 726f 6f74  ven was the root
-000058a0: 0a20 206f 6620 6120 6472 6976 652c 2065  .  of a drive, e
-000058b0: 2e67 2e20 2243 3a22 2e0a 2d20 4669 7865  .g. "C:"..- Fixe
-000058c0: 6420 7365 7665 7261 6c20 706c 6163 6573  d several places
-000058d0: 2077 6865 7265 2067 7375 7469 6c20 7265   where gsutil re
-000058e0: 6665 7265 6e63 6564 2061 2076 6172 6961  ferenced a varia
-000058f0: 626c 6520 7468 6174 2068 6164 206e 6f74  ble that had not
-00005900: 2062 6565 6e0a 2020 636f 7272 6563 746c   been.  correctl
-00005910: 7920 696d 706f 7274 6564 2e0a 0a4f 7468  y imported...Oth
-00005920: 6572 2043 6861 6e67 6573 0a2d 2d2d 2d2d  er Changes.-----
-00005930: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 2d20  -------------.- 
-00005940: 5365 7665 7261 6c20 646f 6375 6d65 6e74  Several document
-00005950: 6174 696f 6e20 7570 6461 7465 7320 616e  ation updates an
-00005960: 6420 636c 6172 6966 6963 6174 696f 6e73  d clarifications
-00005970: 2e0a 0a0a 5265 6c65 6173 6520 342e 3332  ....Release 4.32
-00005980: 2028 7265 6c65 6173 6520 6461 7465 3a20   (release date: 
-00005990: 3230 3138 2d30 362d 3031 290a 3d3d 3d3d  2018-06-01).====
-000059a0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000059b0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000059c0: 3d3d 3d0a 4275 6720 4669 7865 730a 2d2d  ===.Bug Fixes.--
-000059d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000059e0: 0a2d 2046 6978 6564 2061 2066 696c 6520  .- Fixed a file 
-000059f0: 7061 7468 2072 6573 6f6c 7574 696f 6e20  path resolution 
-00005a00: 6973 7375 6520 6f6e 2057 696e 646f 7773  issue on Windows
-00005a10: 2074 6861 7420 6166 6665 6374 6564 206c   that affected l
-00005a20: 6f63 616c 2d74 6f2d 636c 6f75 640a 2020  ocal-to-cloud.  
-00005a30: 636f 7079 2d62 6173 6564 206f 7065 7261  copy-based opera
-00005a40: 7469 6f6e 7320 2822 6370 222c 2022 6d76  tions ("cp", "mv
-00005a50: 222c 2022 7273 796e 6322 292e 2049 6620  ", "rsync"). If 
-00005a60: 6120 6c6f 6361 6c20 6669 6c65 2055 5249  a local file URI
-00005a70: 2063 6f6e 7461 696e 696e 670a 2020 7265   containing.  re
-00005a80: 6c61 7469 7665 2070 6174 6820 636f 6d70  lative path comp
-00005a90: 6f6e 656e 7473 2028 222e 2220 6f72 2022  onents ("." or "
-00005aa0: 2e2e 2229 206f 7220 666f 7277 6172 6420  ..") or forward 
-00005ab0: 736c 6173 6865 7320 2872 6174 6865 7220  slashes (rather 
-00005ac0: 7468 616e 0a20 2062 6163 6b73 6c61 7368  than.  backslash
-00005ad0: 6573 2920 7761 7320 7072 6f76 6964 6564  es) was provided
-00005ae0: 2061 7320 6120 736f 7572 6365 2061 7267   as a source arg
-00005af0: 756d 656e 742c 2074 6865 2072 6573 756c  ument, the resul
-00005b00: 7469 6e67 2064 6573 7469 6e61 7469 6f6e  ting destination
-00005b10: 0a20 206f 626a 6563 7428 7329 2077 6173  .  object(s) was
-00005b20: 2069 6e63 6f72 7265 6374 6c79 206e 616d   incorrectly nam
-00005b30: 6564 2e20 466f 7220 7265 6375 7273 6976  ed. For recursiv
-00005b40: 6520 6f70 6572 6174 696f 6e73 2c20 7468  e operations, th
-00005b50: 6973 2072 6573 756c 7465 6420 696e 0a20  is resulted in. 
-00005b60: 2073 6576 6572 616c 2066 696c 6573 2062   several files b
-00005b70: 6569 6e67 2063 6f70 6965 6420 746f 2074  eing copied to t
-00005b80: 6865 2073 616d 6520 6f62 6a65 6374 2070  he same object p
-00005b90: 6174 682c 206f 7665 7277 7269 7469 6e67  ath, overwriting
-00005ba0: 2065 6163 6820 6f74 6865 722e 0a2d 2046   each other..- F
-00005bb0: 6978 6564 2061 6e20 6973 7375 6520 7769  ixed an issue wi
-00005bc0: 7468 2074 6865 2022 7273 796e 6322 2063  th the "rsync" c
-00005bd0: 6f6d 6d61 6e64 206f 6e20 5769 6e64 6f77  ommand on Window
-00005be0: 7320 7468 6174 2072 6573 756c 7465 6420  s that resulted 
-00005bf0: 696e 2065 6163 6820 7273 796e 630a 2020  in each rsync.  
-00005c00: 696e 766f 6361 7469 6f6e 206e 6f74 2062  invocation not b
-00005c10: 6569 6e67 2061 626c 6520 746f 2064 656c  eing able to del
-00005c20: 6574 6520 6974 7320 7465 6d70 6f72 6172  ete its temporar
-00005c30: 7920 7379 6e63 6872 6f6e 697a 6174 696f  y synchronizatio
-00005c40: 6e20 6669 6c65 7320 6f6e 0a20 2064 6973  n files on.  dis
-00005c50: 6b2e 0a2d 2046 6978 6564 2061 6e20 6973  k..- Fixed an is
-00005c60: 7375 6520 7768 6572 6520 7265 6164 696e  sue where readin
-00005c70: 6720 6120 7370 6563 6966 6963 2067 656e  g a specific gen
-00005c80: 6572 6174 696f 6e20 6f66 2061 6e20 6f62  eration of an ob
-00005c90: 6a65 6374 2066 726f 6d20 5333 2077 6f75  ject from S3 wou
-00005ca0: 6c64 0a20 2066 6169 6c2e 0a2d 2046 6978  ld.  fail..- Fix
-00005cb0: 6564 2061 6e20 6973 7375 6520 7768 6572  ed an issue wher
-00005cc0: 6520 7275 6e6e 696e 6720 6773 7574 696c  e running gsutil
-00005cd0: 2077 6974 6820 7468 6520 746f 702d 6c65   with the top-le
-00005ce0: 7665 6c20 222d 7122 2066 6c61 6720 776f  vel "-q" flag wo
-00005cf0: 756c 6420 7265 7375 6c74 0a20 2069 6e20  uld result.  in 
-00005d00: 6372 6564 656e 7469 616c 2d72 656c 6174  credential-relat
-00005d10: 6564 206c 6f67 6769 6e67 2073 7461 7465  ed logging state
-00005d20: 6d65 6e74 7320 6265 696e 6720 656d 6974  ments being emit
-00005d30: 7465 6420 746f 2073 7464 6572 722e 0a2d  ted to stderr..-
-00005d40: 2047 7375 7469 6c20 6e6f 206c 6f6e 6765   Gsutil no longe
-00005d50: 7220 616c 6c6f 7773 2063 6f70 7969 6e67  r allows copying
-00005d60: 2066 726f 6d20 7374 7265 616d 6564 2069   from streamed i
-00005d70: 6e70 7574 2069 6620 7468 6520 746f 702d  nput if the top-
-00005d80: 6c65 7665 6c20 222d 6d22 2066 6c61 670a  level "-m" flag.
-00005d90: 2020 6973 2073 7065 6369 6669 6564 2e20    is specified. 
-00005da0: 5768 696c 6520 7468 6973 2077 6173 2070  While this was p
-00005db0: 7265 7669 6f75 736c 7920 616c 6c6f 7765  reviously allowe
-00005dc0: 642c 2069 7420 6469 6420 6e6f 7420 776f  d, it did not wo
-00005dd0: 726b 2063 6f72 7265 6374 6c79 2e0a 0a4f  rk correctly...O
-00005de0: 7468 6572 2043 6861 6e67 6573 0a2d 2d2d  ther Changes.---
-00005df0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a  ---------------.
-00005e00: 2d20 5365 7665 7261 6c20 646f 6375 6d65  - Several docume
-00005e10: 6e74 6174 696f 6e20 7570 6461 7465 7320  ntation updates 
-00005e20: 616e 6420 636c 6172 6966 6963 6174 696f  and clarificatio
-00005e30: 6e73 2e0a 0a0a 5265 6c65 6173 6520 342e  ns....Release 4.
-00005e40: 3331 2028 7265 6c65 6173 6520 6461 7465  31 (release date
-00005e50: 3a20 3230 3138 2d30 342d 3236 290a 3d3d  : 2018-04-26).==
-00005e60: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00005e70: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00005e80: 3d3d 3d3d 3d0a 4e65 7720 6665 6174 7572  =====.New featur
-00005e90: 6573 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  es.-------------
-00005ea0: 2d2d 2d2d 2d0a 2d20 4164 6465 6420 7375  -----.- Added su
-00005eb0: 7070 6f72 7420 666f 7220 7265 6175 7468  pport for reauth
-00005ec0: 656e 7469 6361 7469 6f6e 2077 6974 6869  entication withi
-00005ed0: 6e20 6773 7574 696c 2e20 4e6f 7465 2074  n gsutil. Note t
-00005ee0: 6861 7420 7468 6973 206f 6e6c 7920 6166  hat this only af
-00005ef0: 6665 6374 730a 2020 6175 7468 656e 7469  fects.  authenti
-00005f00: 6361 7469 6f6e 2077 6865 6e20 2267 735f  cation when "gs_
-00005f10: 6f61 7574 6832 5f72 6566 7265 7368 5f74  oauth2_refresh_t
-00005f20: 6f6b 656e 2220 6973 2063 6f6e 6669 6775  oken" is configu
-00005f30: 7265 6420 756e 6465 7220 7468 650a 2020  red under the.  
-00005f40: 2243 7265 6465 6e74 6961 6c73 2220 7365  "Credentials" se
-00005f50: 6374 696f 6e20 6f66 2074 6865 2062 6f74  ction of the bot
-00005f60: 6f20 636f 6e66 6967 2066 696c 6520 616e  o config file an
-00005f70: 6420 7468 6174 2074 6f6b 656e 2063 6f72  d that token cor
-00005f80: 7265 7370 6f6e 6473 2074 6f20 610a 2020  responds to a.  
-00005f90: 7573 6572 2061 6363 6f75 6e74 2065 6e72  user account enr
-00005fa0: 6f6c 6c65 6420 696e 2032 2d73 7465 7020  olled in 2-step 
-00005fb0: 7665 7269 6669 6361 7469 6f6e 2e0a 0a42  verification...B
-00005fc0: 7567 2046 6978 6573 0a2d 2d2d 2d2d 2d2d  ug Fixes.-------
-00005fd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 2d20 5768  -----------.- Wh
-00005fe0: 656e 2063 7265 6174 696e 6720 6120 7369  en creating a si
-00005ff0: 676e 6564 2055 524c 2076 6961 2074 6865  gned URL via the
-00006000: 2022 7369 676e 7572 6c22 2063 6f6d 6d61   "signurl" comma
-00006010: 6e64 2c20 6773 7574 696c 206e 6f77 2076  nd, gsutil now v
-00006020: 6572 6966 6965 7320 7468 6174 0a20 2074  erifies that.  t
-00006030: 6865 2073 7065 6369 6669 6564 2065 7870  he specified exp
-00006040: 6972 6174 696f 6e20 6973 6e27 7420 6c6f  iration isn't lo
-00006050: 6e67 6572 2074 6861 6e20 3720 6461 7973  nger than 7 days
-00006060: 2028 7468 6520 6d61 7869 6d75 6d20 616c   (the maximum al
-00006070: 6c6f 7765 6420 6279 2074 6865 0a20 2073  lowed by the.  s
-00006080: 6572 7669 6365 292e 0a2d 2054 6f20 7375  ervice)..- To su
-00006090: 7070 6f72 7420 7265 7772 6974 696e 6720  pport rewriting 
-000060a0: 6f62 6a65 6374 7320 746f 2062 6520 656e  objects to be en
-000060b0: 6372 7970 7465 6420 7573 696e 6720 6120  crypted using a 
-000060c0: 6275 636b 6574 2773 2064 6566 6175 6c74  bucket's default
-000060d0: 204b 4d53 206b 6579 2c0a 2020 7468 6520   KMS key,.  the 
-000060e0: 2272 6577 7269 7465 2220 636f 6d6d 616e  "rewrite" comman
-000060f0: 6420 6e6f 7720 7265 7772 6974 6573 2061  d now rewrites a
-00006100: 6c6c 2073 7065 6369 6669 6564 206f 626a  ll specified obj
-00006110: 6563 7473 2069 6620 6e6f 2076 616c 7565  ects if no value
-00006120: 2069 730a 2020 7370 6563 6966 6965 6420   is.  specified 
-00006130: 666f 7220 2265 6e63 7279 7074 696f 6e5f  for "encryption_
-00006140: 6b65 7922 2075 6e64 6572 2074 6865 2022  key" under the "
-00006150: 4753 5574 696c 2220 7365 6374 696f 6e20  GSUtil" section 
-00006160: 696e 2074 6865 2062 6f74 6f20 636f 6e66  in the boto conf
-00006170: 6967 0a20 2066 696c 652e 0a0a 4f74 6865  ig.  file...Othe
-00006180: 7220 4368 616e 6765 730a 2d2d 2d2d 2d2d  r Changes.------
-00006190: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d 2053  ------------.- S
-000061a0: 6576 6572 616c 2064 6f63 756d 656e 7461  everal documenta
-000061b0: 7469 6f6e 2075 7064 6174 6573 2061 6e64  tion updates and
-000061c0: 2063 6c61 7269 6669 6361 7469 6f6e 732e   clarifications.
-000061d0: 0a0a 0a52 656c 6561 7365 2034 2e33 3020  ...Release 4.30 
-000061e0: 2872 656c 6561 7365 2064 6174 653a 2032  (release date: 2
-000061f0: 3031 382d 3033 2d32 3829 0a3d 3d3d 3d3d  018-03-28).=====
-00006200: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00006210: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00006220: 3d3d 0a4e 6577 2066 6561 7475 7265 730a  ==.New features.
-00006230: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00006240: 2d2d 0a2d 2041 6464 6564 2043 6c6f 7564  --.- Added Cloud
-00006250: 204b 4d53 2073 7570 706f 7274 2066 6f72   KMS support for
-00006260: 2047 6f6f 676c 6520 436c 6f75 6420 5374   Google Cloud St
-00006270: 6f72 6167 6520 7265 736f 7572 6365 732c  orage resources,
-00006280: 2061 6c6c 6f77 696e 6720 7468 6520 7573   allowing the us
-00006290: 650a 2020 6f66 2063 7573 746f 6d65 722d  e.  of customer-
-000062a0: 6d61 6e61 6765 6420 656e 6372 7970 7469  managed encrypti
-000062b0: 6f6e 206b 6579 7320 2843 4d45 4b73 292e  on keys (CMEKs).
-000062c0: 2042 7563 6b65 742d 7265 6c61 7465 6420   Bucket-related 
-000062d0: 6675 6e63 7469 6f6e 616c 6974 790a 2020  functionality.  
-000062e0: 696e 636c 7564 6573 2074 6865 206e 6577  includes the new
-000062f0: 2022 6b6d 7322 2063 6f6d 6d61 6e64 2c20   "kms" command, 
-00006300: 7768 6963 6820 6361 6e20 6265 2075 7365  which can be use
-00006310: 6420 746f 2067 6574 206f 7220 7365 7420  d to get or set 
-00006320: 6120 6275 636b 6574 2773 0a20 2064 6566  a bucket's.  def
-00006330: 6175 6c74 204b 4d53 206b 6579 2e20 436f  ault KMS key. Co
-00006340: 6e63 6572 6e69 6e67 206f 626a 6563 7473  ncerning objects
-00006350: 2c20 7573 6572 7320 6d61 7920 6e6f 7720  , users may now 
-00006360: 7370 6563 6966 7920 7468 6520 434d 454b  specify the CMEK
-00006370: 2074 6f20 6265 2075 7365 640a 2020 666f   to be used.  fo
-00006380: 7220 656e 6372 7970 7469 6f6e 2076 6961  r encryption via
-00006390: 2074 6865 6972 2062 6f74 6f20 636f 6e66   their boto conf
-000063a0: 6967 2066 696c 652c 2069 6e20 7468 6520  ig file, in the 
-000063b0: 2265 6e63 7279 7074 696f 6e5f 6b65 7922  "encryption_key"
-000063c0: 2061 7474 7269 6275 7465 2e0a 2020 496e   attribute..  In
-000063d0: 2074 6869 7320 7761 792c 2075 7365 7273   this way, users
-000063e0: 206d 6179 2073 7065 6369 6679 2065 6974   may specify eit
-000063f0: 6865 7220 6120 4353 454b 206f 7220 6120  her a CSEK or a 
-00006400: 434d 454b 2074 6f20 656e 6372 7970 7420  CMEK to encrypt 
-00006410: 6e65 7720 6f62 6a65 6374 732c 0a20 2062  new objects,.  b
-00006420: 7574 206e 6f74 2062 6f74 682e 2046 6f72  ut not both. For
-00006430: 206d 6f72 6520 696e 666f 726d 6174 696f   more informatio
-00006440: 6e2c 2073 6565 2022 6773 7574 696c 2068  n, see "gsutil h
-00006450: 656c 7020 656e 6372 7970 7469 6f6e 222e  elp encryption".
-00006460: 0a0a 4f74 6865 7220 4368 616e 6765 730a  ..Other Changes.
-00006470: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00006480: 2d2d 0a2d 2053 6576 6572 616c 2064 6f63  --.- Several doc
-00006490: 756d 656e 7461 7469 6f6e 2075 7064 6174  umentation updat
-000064a0: 6573 2061 6e64 2063 6c61 7269 6669 6361  es and clarifica
-000064b0: 7469 6f6e 732e 0a0a 0a52 656c 6561 7365  tions....Release
-000064c0: 2034 2e32 3920 2872 656c 6561 7365 2064   4.29 (release d
-000064d0: 6174 653a 2032 3031 382d 3033 2d31 3429  ate: 2018-03-14)
-000064e0: 0a3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  .===============
-000064f0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00006500: 3d3d 3d3d 3d3d 3d3d 0a4e 6577 2066 6561  ========.New fea
-00006510: 7475 7265 730a 2d2d 2d2d 2d2d 2d2d 2d2d  tures.----------
-00006520: 2d2d 2d2d 2d2d 2d2d 0a2d 2041 6464 6564  --------.- Added
-00006530: 2074 7261 6e73 706f 7274 2063 6f6d 7072   transport compr
-00006540: 6573 7369 6f6e 2073 7570 706f 7274 2c20  ession support, 
-00006550: 6176 6169 6c61 626c 6520 7468 726f 7567  available throug
-00006560: 6820 7468 6520 222d 6a22 2061 6e64 2022  h the "-j" and "
-00006570: 2d4a 220a 2020 6f70 7469 6f6e 7320 666f  -J".  options fo
-00006580: 7220 7468 6520 2263 7022 2c20 226d 7622  r the "cp", "mv"
-00006590: 2c20 616e 6420 2272 7379 6e63 2220 636f  , and "rsync" co
-000065a0: 6d6d 616e 6473 2e20 5468 6973 2069 7320  mmands. This is 
-000065b0: 7573 6566 756c 2077 6865 6e0a 2020 7570  useful when.  up
-000065c0: 6c6f 6164 696e 6720 6669 6c65 7320 7769  loading files wi
-000065d0: 7468 2068 6967 686c 792d 636f 6d70 7265  th highly-compre
-000065e0: 7373 6962 6c65 2063 6f6e 7465 6e74 2e20  ssible content. 
-000065f0: 5768 656e 2073 7065 6369 6669 6365 642c  When specificed,
-00006600: 2066 696c 6573 2062 6569 6e67 0a20 2075   files being.  u
-00006610: 706c 6f61 6465 6420 6172 6520 636f 6d70  ploaded are comp
-00006620: 7265 7373 6564 206f 6e2d 7468 652d 666c  ressed on-the-fl
-00006630: 7920 696e 206d 656d 6f72 792c 2073 656e  y in memory, sen
-00006640: 7420 746f 2047 4353 2c20 616e 6420 756e  t to GCS, and un
-00006650: 636f 6d70 7265 7373 6564 2062 790a 2020  compressed by.  
-00006660: 4743 5320 6265 666f 7265 2074 6865 7920  GCS before they 
-00006670: 6172 6520 7374 6f72 6564 2e20 5365 6520  are stored. See 
-00006680: 2267 7375 7469 6c20 6865 6c70 2063 7022  "gsutil help cp"
-00006690: 2066 6f72 2061 6464 6974 696f 6e61 6c20   for additional 
-000066a0: 696e 666f 726d 6174 696f 6e2e 0a2d 2057  information..- W
-000066b0: 6865 6e20 2275 7365 5f6d 6167 6963 6669  hen "use_magicfi
-000066c0: 6c65 3d54 7275 6522 2069 7320 7365 7420  le=True" is set 
-000066d0: 696e 2074 6865 2062 6f74 6f20 636f 6e66  in the boto conf
-000066e0: 6967 2066 696c 652c 2067 7375 7469 6c20  ig file, gsutil 
-000066f0: 7769 6c6c 206e 6f77 0a20 2061 7070 656e  will now.  appen
-00006700: 6420 7468 6520 6465 7465 6374 6564 2063  d the detected c
-00006710: 6861 7273 6574 2c20 6966 2070 7265 7365  harset, if prese
-00006720: 6e74 2c20 746f 2074 6865 206f 626a 6563  nt, to the objec
-00006730: 7427 7320 436f 6e74 656e 742d 5479 7065  t's Content-Type
-00006740: 206d 6574 6164 6174 610a 2020 6669 656c   metadata.  fiel
-00006750: 642e 2046 6f72 2065 7861 6d70 6c65 2c20  d. For example, 
-00006760: 6120 436f 6e74 656e 742d 5479 7065 206d  a Content-Type m
-00006770: 6967 6874 2062 6520 706f 7075 6c61 7465  ight be populate
-00006780: 6420 7769 7468 0a20 2022 7465 7874 2f68  d with.  "text/h
-00006790: 746d 6c3b 2063 6861 7273 6574 3d75 732d  tml; charset=us-
-000067a0: 6173 6369 6922 2072 6174 6865 7220 7468  ascii" rather th
-000067b0: 616e 2073 696d 706c 7920 2274 6578 742f  an simply "text/
-000067c0: 6874 6d6c 222e 0a0a 4275 6720 4669 7865  html"...Bug Fixe
-000067d0: 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  s.--------------
-000067e0: 2d2d 2d2d 0a2d 2049 6d70 726f 7665 6420  ----.- Improved 
-000067f0: 6572 726f 7220 6861 6e64 6c69 6e67 2061  error handling a
-00006800: 6e64 206c 6f67 6769 6e67 2066 6f72 2075  nd logging for u
-00006810: 706c 6f61 6420 7265 7375 6d70 7469 6f6e  pload resumption
-00006820: 2e0a 2d20 4166 7465 7220 656e 636f 756e  ..- After encoun
-00006830: 7465 7269 6e67 2061 2050 7265 636f 6e64  tering a Precond
-00006840: 6974 696f 6e45 7863 6570 7469 6f6e 2c20  itionException, 
-00006850: 7468 6520 2261 636c 2063 6822 2063 6f6d  the "acl ch" com
-00006860: 6d61 6e64 2077 696c 6c20 6e6f 770a 2020  mand will now.  
-00006870: 7265 2d66 6574 6368 2074 6865 206f 626a  re-fetch the obj
-00006880: 6563 7420 6765 6e65 7261 7469 6f6e 2062  ect generation b
-00006890: 6566 6f72 6520 7265 7472 7969 6e67 2e0a  efore retrying..
-000068a0: 2d20 4669 7865 6420 6973 7375 6520 7769  - Fixed issue wi
-000068b0: 7468 2070 6172 7369 6e67 206c 6966 6563  th parsing lifec
-000068c0: 7963 6c65 2063 6f6e 6469 7469 6f6e 7320  ycle conditions 
-000068d0: 7768 656e 2075 7369 6e67 2074 6865 2058  when using the X
-000068e0: 4d4c 2041 5049 2e0a 2020 436f 6e64 6974  ML API..  Condit
-000068f0: 696f 6e73 2077 686f 7365 2076 616c 7565  ions whose value
-00006900: 7320 636f 756c 6420 6265 2065 7661 6c75  s could be evalu
-00006910: 6174 6564 2062 7920 5079 7468 6f6e 2061  ated by Python a
-00006920: 7320 2266 616c 7379 2220 2865 2e67 2e20  s "falsy" (e.g. 
-00006930: 7365 7474 696e 670a 2020 616e 2022 6167  setting.  an "ag
-00006940: 6522 2063 6f6e 6469 7469 6f6e 2074 6f20  e" condition to 
-00006950: 7468 6520 6e75 6d62 6572 2030 206f 7220  the number 0 or 
-00006960: 2269 734c 6976 6522 2074 6f20 6661 6c73  "isLive" to fals
-00006970: 6529 2077 6f75 6c64 2062 6520 6f6d 6974  e) would be omit
-00006980: 7465 6420 6672 6f6d 0a20 2074 6865 206c  ted from.  the l
-00006990: 6966 6563 7963 6c65 2063 6f6e 6669 6775  ifecycle configu
-000069a0: 7261 7469 6f6e 2077 6865 6e20 2270 7265  ration when "pre
-000069b0: 6665 725f 6170 693d 786d 6c22 2077 6173  fer_api=xml" was
-000069c0: 2073 6574 2069 6e20 7468 6520 626f 746f   set in the boto
-000069d0: 2063 6f6e 6669 670a 2020 6669 6c65 2e20   config.  file. 
-000069e0: 4e6f 7465 2074 6861 7420 7468 6520 4a53  Note that the JS
-000069f0: 4f4e 2041 5049 2069 7320 7072 6566 6572  ON API is prefer
-00006a00: 7265 6420 6279 2064 6566 6175 6c74 2c20  red by default, 
-00006a10: 736f 206d 6f73 7420 7573 6572 7320 7765  so most users we
-00006a20: 7265 0a20 2075 6e6c 696b 656c 7920 746f  re.  unlikely to
-00006a30: 2065 6e63 6f75 6e74 6572 2074 6869 7320   encounter this 
-00006a40: 6973 7375 652e 0a2d 2046 6f72 2063 6f6d  issue..- For com
-00006a50: 6d61 6e64 7320 7468 6174 2066 6574 6368  mands that fetch
-00006a60: 2062 7563 6b65 7420 4143 4c73 206f 7220   bucket ACLs or 
-00006a70: 6465 6661 756c 7420 4143 4c73 2c20 7768  default ACLs, wh
-00006a80: 656e 2074 6865 2075 7365 7220 646f 6573  en the user does
-00006a90: 206e 6f74 0a20 2068 6176 6520 7374 6f72   not.  have stor
-00006aa0: 6167 652e 6275 636b 6574 732e 6765 7449  age.buckets.getI
-00006ab0: 616d 506f 6c69 6379 206f 6e20 7468 6520  amPolicy on the 
-00006ac0: 4743 5320 6275 636b 6574 2c20 7573 696e  GCS bucket, usin
-00006ad0: 6720 7468 6520 584d 4c20 4150 4920 7769  g the XML API wi
-00006ae0: 6c6c 0a20 206e 6f77 2062 6568 6176 6520  ll.  now behave 
-00006af0: 636f 6e73 6973 7465 6e74 6c79 2077 6974  consistently wit
-00006b00: 6820 7468 6520 4a53 4f4e 2041 5049 2061  h the JSON API a
-00006b10: 6e64 2064 6973 706c 6179 2041 434c 2f64  nd display ACL/d
-00006b20: 6566 6175 6c74 2041 434c 2066 6965 6c64  efault ACL field
-00006b30: 730a 2020 6173 2065 6d70 7479 2c20 7261  s.  as empty, ra
-00006b40: 7468 6572 2074 6861 6e20 7468 726f 7769  ther than throwi
-00006b50: 6e67 2061 2043 6f6d 6d61 6e64 4578 6365  ng a CommandExce
-00006b60: 7074 696f 6e2e 0a0a 4f74 6865 7220 4368  ption...Other Ch
-00006b70: 616e 6765 730a 2d2d 2d2d 2d2d 2d2d 2d2d  anges.----------
-00006b80: 2d2d 2d2d 2d2d 2d2d 0a2d 2053 6576 6572  --------.- Sever
-00006b90: 616c 2064 6f63 756d 656e 7461 7469 6f6e  al documentation
-00006ba0: 2075 7064 6174 6573 2061 6e64 2063 6c61   updates and cla
-00006bb0: 7269 6669 6361 7469 6f6e 732e 0a2d 2054  rifications..- T
-00006bc0: 6865 2022 7369 676e 7572 6c22 2063 6f6d  he "signurl" com
-00006bd0: 6d61 6e64 206e 6f77 2075 7365 7320 7369  mand now uses si
-00006be0: 676e 6174 7572 6520 5634 2073 6967 6e69  gnature V4 signi
-00006bf0: 6e67 2066 6f72 6d61 7420 746f 2067 656e  ng format to gen
-00006c00: 6572 6174 6520 5552 4c73 2e0a 0a0a 5265  erate URLs....Re
-00006c10: 6c65 6173 6520 342e 3238 2028 7265 6c65  lease 4.28 (rele
-00006c20: 6173 6520 6461 7465 3a20 3230 3137 2d31  ase date: 2017-1
-00006c30: 302d 3131 290a 3d3d 3d3d 3d3d 3d3d 3d3d  0-11).==========
-00006c40: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00006c50: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d0a 4e65  =============.Ne
-00006c60: 7720 6665 6174 7572 6573 0a2d 2d2d 2d2d  w features.-----
-00006c70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 2d20  -------------.- 
-00006c80: 4164 6465 6420 6e65 7765 7374 2076 6572  Added newest ver
-00006c90: 7369 6f6e 206f 6620 7468 6520 426f 746f  sion of the Boto
-00006ca0: 206c 6962 7261 7279 2c20 7768 6963 6820   library, which 
-00006cb0: 696e 636c 7564 6573 2073 7570 706f 7274  includes support
-00006cc0: 2066 6f72 2075 7369 6e67 0a20 2053 6967   for using.  Sig
-00006cd0: 6e61 7475 7265 2056 6572 7369 6f6e 2034  nature Version 4
-00006ce0: 2074 6f20 636f 6e6e 6563 7420 746f 2053   to connect to S
-00006cf0: 3320 6275 636b 6574 7320 7669 6120 7468  3 buckets via th
-00006d00: 6520 2275 7365 2d73 6967 7634 203d 2054  e "use-sigv4 = T
-00006d10: 7275 6522 2061 6e64 0a20 2022 686f 7374  rue" and.  "host
-00006d20: 203d 2073 332e 3c72 6567 696f 6e3e 2e61   = s3.<region>.a
-00006d30: 6d61 7a6f 6e61 7773 2e63 6f6d 2220 426f  mazonaws.com" Bo
-00006d40: 746f 206f 7074 696f 6e73 2075 6e64 6572  to options under
-00006d50: 2074 6865 2022 5b73 335d 2220 7365 6374   the "[s3]" sect
-00006d60: 696f 6e2e 0a2d 2041 6464 6564 2073 7570  ion..- Added sup
-00006d70: 706f 7274 2066 6f72 2052 6571 7565 7374  port for Request
-00006d80: 6572 2050 6179 7320 6675 6e63 7469 6f6e  er Pays function
-00006d90: 616c 6974 7920 7768 656e 206d 616b 696e  ality when makin
-00006da0: 6720 7265 7175 6573 7473 2074 6f20 4743  g requests to GC
-00006db0: 530a 2020 6275 636b 6574 7320 7769 7468  S.  buckets with
-00006dc0: 2074 6869 7320 6665 6174 7572 6520 656e   this feature en
-00006dd0: 6162 6c65 642e 2046 6f72 2065 7861 6d70  abled. For examp
-00006de0: 6c65 2075 7361 6765 2c20 7365 6520 7468  le usage, see th
-00006df0: 6520 656e 7472 7920 666f 7220 222d 7522  e entry for "-u"
-00006e00: 0a20 2069 6e20 2267 7375 7469 6c20 6865  .  in "gsutil he
-00006e10: 6c70 206f 7074 696f 6e73 222e 2052 6571  lp options". Req
-00006e20: 7565 7374 6572 2050 6179 7320 6973 2063  uester Pays is c
-00006e30: 7572 7265 6e74 6c79 206f 6e6c 7920 7375  urrently only su
-00006e40: 7070 6f72 7465 6420 666f 720a 2020 7265  pported for.  re
-00006e50: 7175 6573 7473 2075 7369 6e67 2074 6865  quests using the
-00006e60: 2047 4353 204a 534f 4e20 4150 493b 2058   GCS JSON API; X
-00006e70: 4d4c 2041 5049 2073 7570 706f 7274 2077  ML API support w
-00006e80: 696c 6c20 6265 2061 6464 6564 2069 6e20  ill be added in 
-00006e90: 6120 6c61 7465 720a 2020 7665 7273 696f  a later.  versio
-00006ea0: 6e2e 0a0a 4275 6720 4669 7865 730a 2d2d  n...Bug Fixes.--
-00006eb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00006ec0: 0a2d 2046 6978 6564 2069 7373 7565 2077  .- Fixed issue w
-00006ed0: 6865 7265 2061 7474 656d 7074 696e 6720  here attempting 
-00006ee0: 746f 2070 7265 7365 7276 6520 4143 4c73  to preserve ACLs
-00006ef0: 2062 7920 7573 696e 6720 222d 7022 2077   by using "-p" w
-00006f00: 6974 6820 6370 2f6d 762f 7273 796e 630a  ith cp/mv/rsync.
-00006f10: 2020 776f 756c 6420 6661 696c 2077 6865    would fail whe
-00006f20: 6e20 7468 6520 6465 7374 696e 6174 696f  n the destinatio
-00006f30: 6e20 6973 2061 206c 6f63 616c 2066 696c  n is a local fil
-00006f40: 652e 0a2d 2049 6d70 726f 7665 6420 7175  e..- Improved qu
-00006f50: 616c 6974 7920 6f66 2073 6576 6572 616c  ality of several
-00006f60: 2061 6d62 6967 756f 7573 2065 7272 6f72   ambiguous error
-00006f70: 206d 6573 7361 6765 732e 0a0a 4f74 6865   messages...Othe
-00006f80: 7220 4368 616e 6765 730a 2d2d 2d2d 2d2d  r Changes.------
-00006f90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d 2054  ------------.- T
-00006fa0: 6865 2070 726f 7879 5f72 646e 7320 6f70  he proxy_rdns op
-00006fb0: 7469 6f6e 2069 7320 6e6f 7720 5472 7565  tion is now True
-00006fc0: 2062 7920 6465 6661 756c 7420 7768 656e   by default when
-00006fd0: 2061 2070 726f 7879 2069 7320 7365 742e   a proxy is set.
-00006fe0: 2041 6c73 6f20 6164 6465 640a 2020 426f   Also added.  Bo
-00006ff0: 746f 2063 6f6e 6669 6720 6669 6c65 2063  to config file c
-00007000: 6f6d 6d65 6e74 7320 6578 706c 6169 6e69  omments explaini
-00007010: 6e67 2074 6861 7420 6763 6c6f 7564 2070  ng that gcloud p
-00007020: 726f 7879 206f 7074 696f 6e73 2c20 6966  roxy options, if
-00007030: 2070 7265 7365 6e74 2c0a 2020 7461 6b65   present,.  take
-00007040: 2070 7265 6365 6465 6e63 6520 6f76 6572   precedence over
-00007050: 2063 6f72 7265 7370 6f6e 6469 6e67 2042   corresponding B
-00007060: 6f74 6f20 7365 7474 696e 6773 2061 6e64  oto settings and
-00007070: 2065 6e76 6972 6f6e 6d65 6e74 2076 6172   environment var
-00007080: 6961 626c 650a 2020 7365 7474 696e 6773  iable.  settings
-00007090: 2e0a 2d20 466f 6c6c 6f77 696e 6720 7468  ..- Following th
-000070a0: 6520 6465 7072 6563 6174 696f 6e20 6f66  e deprecation of
-000070b0: 2050 7974 686f 6e20 322e 3620 7375 7070   Python 2.6 supp
-000070c0: 6f72 7420 666f 7220 6773 7574 696c 2c20  ort for gsutil, 
-000070d0: 636f 6465 2073 6563 7469 6f6e 7320 7468  code sections th
-000070e0: 6174 0a20 2077 6572 6520 6f6e 6c79 2070  at.  were only p
-000070f0: 7265 7365 6e74 2074 6f20 7375 7070 6f72  resent to suppor
-00007100: 7420 5079 7468 6f6e 2032 2e36 2068 6176  t Python 2.6 hav
-00007110: 6520 6265 656e 2072 656d 6f76 6564 2e0a  e been removed..
-00007120: 2d20 5365 7665 7261 6c20 646f 6375 6d65  - Several docume
-00007130: 6e74 6174 696f 6e20 7570 6461 7465 7320  ntation updates 
-00007140: 616e 6420 636c 6172 6966 6963 6174 696f  and clarificatio
-00007150: 6e73 2e0a 0a0a 5265 6c65 6173 6520 342e  ns....Release 4.
-00007160: 3237 2028 7265 6c65 6173 6520 6461 7465  27 (release date
-00007170: 3a20 3230 3137 2d30 362d 3239 290a 3d3d  : 2017-06-29).==
-00007180: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00007190: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000071a0: 3d3d 3d3d 3d0a 4e65 7720 6665 6174 7572  =====.New featur
-000071b0: 6573 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  es.-------------
-000071c0: 2d2d 2d2d 2d0a 2d20 5768 656e 2075 7369  -----.- When usi
-000071d0: 6e67 2074 6865 204a 534f 4e20 4150 492c  ng the JSON API,
-000071e0: 2074 6865 2022 6c73 202d 4c22 2061 6e64   the "ls -L" and
-000071f0: 2022 7374 6174 2220 636f 6d6d 616e 6473   "stat" commands
-00007200: 206e 6f77 2070 7269 6e74 2061 6e20 6f62   now print an ob
-00007210: 6a65 6374 2773 0a20 2073 746f 7261 6765  ject's.  storage
-00007220: 2063 6c61 7373 2075 7064 6174 6520 7469   class update ti
-00007230: 6d65 2069 6620 6974 2064 6966 6665 7273  me if it differs
-00007240: 2066 726f 6d20 7468 6520 6f62 6a65 6374   from the object
-00007250: 2773 2063 7265 6174 696f 6e20 7469 6d65  's creation time
-00007260: 3b20 7468 6973 0a20 206f 6363 7572 7320  ; this.  occurs 
-00007270: 7768 656e 2074 6865 2073 746f 7261 6765  when the storage
-00007280: 2063 6c61 7373 2068 6173 2062 6565 6e20   class has been 
-00007290: 6368 616e 6765 6420 6475 6520 746f 2074  changed due to t
-000072a0: 6865 2062 7563 6b65 7427 7320 6c69 6665  he bucket's life
-000072b0: 6379 636c 650a 2020 6d61 6e61 6765 6d65  cycle.  manageme
-000072c0: 6e74 2063 6f6e 6669 6775 7261 7469 6f6e  nt configuration
-000072d0: 2e0a 2d20 4c69 7374 696e 6720 6120 6275  ..- Listing a bu
-000072e0: 636b 6574 2773 206d 6574 6164 6174 6120  cket's metadata 
-000072f0: 7669 6120 226c 7320 2d4c 6222 206e 6f77  via "ls -Lb" now
-00007300: 2070 7269 6e74 7320 6974 7320 6d65 7461   prints its meta
-00007310: 6765 6e65 7261 7469 6f6e 2e0a 0a42 7567  generation...Bug
-00007320: 2046 6978 6573 0a2d 2d2d 2d2d 2d2d 2d2d   Fixes.---------
-00007330: 2d2d 2d2d 2d2d 2d2d 2d0a 2d20 5768 656e  ---------.- When
-00007340: 2073 7065 6369 6679 696e 6720 6375 7374   specifying cust
-00007350: 6f6d 206d 6574 6164 6174 6120 7661 6c75  om metadata valu
-00007360: 6573 2075 7369 6e67 2074 6865 2074 6f70  es using the top
-00007370: 2d6c 6576 656c 202d 6820 6f70 7469 6f6e  -level -h option
-00007380: 2c20 7375 6368 0a20 2076 616c 7565 7320  , such.  values 
-00007390: 6d61 7920 6e6f 7720 696e 636c 7564 6520  may now include 
-000073a0: 756e 6963 6f64 6520 6368 6172 6163 7465  unicode characte
-000073b0: 7273 2061 7320 7765 6c6c 2061 7320 6d75  rs as well as mu
-000073c0: 6c74 6970 6c65 2022 3a22 2063 6861 7261  ltiple ":" chara
-000073d0: 6374 6572 732e 0a2d 2046 6f72 2043 6c6f  cters..- For Clo
-000073e0: 7564 2053 444b 2028 6763 6c6f 7564 2920  ud SDK (gcloud) 
-000073f0: 6469 7374 7269 6275 7469 6f6e 7320 6f66  distributions of
-00007400: 2067 7375 7469 6c2c 2069 6620 796f 7520   gsutil, if you 
-00007410: 6861 7665 2063 6f6e 6669 6775 7265 6420  have configured 
-00007420: 7468 650a 2020 436c 6f75 6420 5344 4b20  the.  Cloud SDK 
-00007430: 746f 206e 6f74 2070 6173 7320 6372 6564  to not pass cred
-00007440: 656e 7469 616c 7320 746f 2067 7375 7469  entials to gsuti
-00007450: 6c20 2862 7920 7275 6e6e 696e 6720 2267  l (by running "g
-00007460: 636c 6f75 6420 636f 6e66 6967 2073 6574  cloud config set
-00007470: 0a20 2070 6173 735f 6372 6564 656e 7469  .  pass_credenti
-00007480: 616c 735f 746f 5f67 7375 7469 6c20 6661  als_to_gsutil fa
-00007490: 6c73 6522 292c 2067 7375 7469 6c20 7769  lse"), gsutil wi
-000074a0: 6c6c 206e 6f77 2063 6f72 7265 6374 6c79  ll now correctly
-000074b0: 2077 6f72 6b20 7769 7468 0a20 2063 7265   work with.  cre
-000074c0: 6465 6e74 6961 6c73 206f 6274 6169 6e65  dentials obtaine
-000074d0: 6420 7669 6120 2267 7375 7469 6c20 636f  d via "gsutil co
-000074e0: 6e66 6967 222e 2054 6869 7320 776f 756c  nfig". This woul
-000074f0: 6420 7072 6576 696f 7573 6c79 2072 6573  d previously res
-00007500: 756c 7420 696e 2061 6e0a 2020 6572 726f  ult in an.  erro
-00007510: 7220 7769 7468 2061 206d 6573 7361 6765  r with a message
-00007520: 2074 6f20 7275 6e20 2267 636c 6f75 6420   to run "gcloud 
-00007530: 6175 7468 206c 6f67 696e 222e 2041 6464  auth login". Add
-00007540: 6974 696f 6e61 6c6c 792c 2074 6865 2022  itionally, the "
-00007550: 6773 7574 696c 0a20 2063 6f6e 6669 6722  gsutil.  config"
-00007560: 2063 6f6d 6d61 6e64 206e 6f20 6c6f 6e67   command no long
-00007570: 6572 2070 726f 6d70 7473 2075 7365 7273  er prompts users
-00007580: 2074 6f20 7275 6e20 2267 636c 6f75 6420   to run "gcloud 
-00007590: 6175 7468 206c 6f67 696e 2220 6966 2074  auth login" if t
-000075a0: 6869 730a 2020 6f70 7469 6f6e 2069 7320  his.  option is 
-000075b0: 7365 7420 746f 2066 616c 7365 2e20 5468  set to false. Th
-000075c0: 6973 2073 686f 756c 6420 616c 6c6f 7720  is should allow 
-000075d0: 7377 6974 6368 696e 6720 6265 7477 6565  switching betwee
-000075e0: 6e20 7374 616e 642d 616c 6f6e 650a 2020  n stand-alone.  
-000075f0: 6773 7574 696c 2069 6e73 7461 6c6c 6174  gsutil installat
-00007600: 696f 6e73 2061 6e64 2067 636c 6f75 642d  ions and gcloud-
-00007610: 7061 636b 6167 6564 2067 7375 7469 6c20  packaged gsutil 
-00007620: 696e 7374 616c 6c61 7469 6f6e 7320 6d6f  installations mo
-00007630: 7265 2065 6173 696c 792e 0a2d 2054 6865  re easily..- The
-00007640: 2063 6f6e 6669 675f 6669 6c65 5f6c 6973   config_file_lis
-00007650: 7420 7365 6374 696f 6e20 696e 2064 6562  t section in deb
-00007660: 7567 206f 7574 7075 7420 6e6f 7720 6469  ug output now di
-00007670: 7370 6c61 7973 2066 696c 6573 2069 6e20  splays files in 
-00007680: 7468 6520 6f72 6465 720a 2020 7468 6174  the order.  that
-00007690: 2074 6865 7920 6172 6520 6c6f 6164 6564   they are loaded
-000076a0: 2e0a 0a4f 7468 6572 2043 6861 6e67 6573  ...Other Changes
-000076b0: 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  .---------------
-000076c0: 2d2d 2d0a 2d20 4164 6465 6420 584d 4c20  ---.- Added XML 
-000076d0: 7375 7070 6f72 7420 666f 7220 736f 6d65  support for some
-000076e0: 2063 6f6d 6d61 6e64 7320 7768 6963 6820   commands which 
-000076f0: 7072 6576 696f 7573 6c79 206f 6e6c 7920  previously only 
-00007700: 776f 726b 6564 2076 6961 2074 6865 204a  worked via the J
-00007710: 534f 4e0a 2020 4150 4920 2822 6c69 6665  SON.  API ("life
-00007720: 6379 636c 6522 2061 6e64 2022 6465 6673  cycle" and "defs
-00007730: 746f 7261 6765 636c 6173 7322 292e 0a2d  torageclass")..-
-00007740: 2053 6576 6572 616c 2064 6f63 756d 656e   Several documen
-00007750: 7461 7469 6f6e 2075 7064 6174 6573 2061  tation updates a
-00007760: 6e64 2063 6c61 7269 6669 6361 7469 6f6e  nd clarification
-00007770: 732e 0a0a 0a52 656c 6561 7365 2034 2e32  s....Release 4.2
-00007780: 3620 2872 656c 6561 7365 2064 6174 653a  6 (release date:
-00007790: 2032 3031 372d 3035 2d30 3329 0a3d 3d3d   2017-05-03).===
-000077a0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000077b0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000077c0: 3d3d 3d3d 0a4e 6577 2066 6561 7475 7265  ====.New feature
-000077d0: 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  s.--------------
-000077e0: 2d2d 2d2d 0a2d 2054 6865 2063 7020 636f  ----.- The cp co
-000077f0: 6d6d 616e 6420 6e6f 7720 7375 7070 6f72  mmand now suppor
-00007800: 7473 2072 6561 6469 6e67 2066 726f 6d20  ts reading from 
-00007810: 616e 6420 7772 6974 696e 6720 746f 206e  and writing to n
-00007820: 616d 6564 2070 6970 6573 2e0a 0a42 7567  amed pipes...Bug
-00007830: 2046 6978 6573 0a2d 2d2d 2d2d 2d2d 2d2d   Fixes.---------
-00007840: 2d2d 2d2d 2d2d 2d2d 2d0a 2d20 4669 7865  ---------.- Fixe
-00007850: 6420 6973 7375 6520 7768 6572 6520 7461  d issue where ta
-00007860: 6220 636f 6d70 6c65 7469 6f6e 2077 6173  b completion was
-00007870: 6e27 7420 776f 726b 696e 672e 0a2d 2046  n't working..- F
-00007880: 6978 6564 2069 7373 7565 2077 6865 6e20  ixed issue when 
-00007890: 7573 696e 6720 7468 6520 584d 4c20 4150  using the XML AP
-000078a0: 4920 7768 6572 6520 6773 7574 696c 2077  I where gsutil w
-000078b0: 6f75 6c64 2066 6169 6c20 746f 2070 6172  ould fail to par
-000078c0: 7365 2062 7563 6b65 740a 2020 6d65 7461  se bucket.  meta
-000078d0: 6461 7461 2066 6f72 2062 7563 6b65 7473  data for buckets
-000078e0: 2075 7369 6e67 204c 6966 6563 7963 6c65   using Lifecycle
-000078f0: 2072 756c 6573 2063 6f6e 7461 696e 696e   rules containin
-00007900: 6720 7468 6520 5365 7453 746f 7261 6765  g the SetStorage
-00007910: 436c 6173 730a 2020 6163 7469 6f6e 206f  Class.  action o
-00007920: 7220 4d61 7463 6865 7353 746f 7261 6765  r MatchesStorage
-00007930: 436c 6173 7320 636f 6e64 6974 696f 6e2e  Class condition.
-00007940: 0a0a 4f74 6865 7220 4368 616e 6765 730a  ..Other Changes.
-00007950: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00007960: 2d2d 0a2d 2052 656d 6f76 6564 202d 6f20  --.- Removed -o 
-00007970: 666c 6167 2066 726f 6d20 226e 6f74 6966  flag from "notif
-00007980: 6963 6174 696f 6e20 6372 6561 7465 2220  ication create" 
-00007990: 636f 6d6d 616e 642e 2054 6865 2073 616d  command. The sam
-000079a0: 6520 6675 6e63 7469 6f6e 616c 6974 7920  e functionality 
-000079b0: 6973 0a20 2061 7661 696c 6162 6c65 2077  is.  available w
-000079c0: 6974 6820 7468 6520 2d70 2066 6c61 673b  ith the -p flag;
-000079d0: 2074 6865 202d 6f20 666c 6167 2068 6164   the -o flag had
-000079e0: 2062 6565 6e20 6d69 7374 616b 656e 6c79   been mistakenly
-000079f0: 2061 6464 6564 2069 6e20 610a 2020 7072   added in a.  pr
-00007a00: 6576 696f 7573 2063 6861 6e67 652e 0a2d  evious change..-
-00007a10: 2052 656d 6f76 6564 2074 6865 2061 6c70   Removed the alp
-00007a20: 6861 2064 6973 636c 6169 6d65 7220 6672  ha disclaimer fr
-00007a30: 6f6d 2074 6865 2069 616d 2063 6f6d 6d61  om the iam comma
-00007a40: 6e64 2068 656c 7020 7465 7874 2e0a 2d20  nd help text..- 
-00007a50: 5365 7665 7261 6c20 646f 6375 6d65 6e74  Several document
-00007a60: 6174 696f 6e20 7570 6461 7465 7320 616e  ation updates an
-00007a70: 6420 636c 6172 6966 6963 6174 696f 6e73  d clarifications
-00007a80: 2e0a 0a0a 5265 6c65 6173 6520 342e 3235  ....Release 4.25
-00007a90: 2028 7265 6c65 6173 6520 6461 7465 3a20   (release date: 
-00007aa0: 3230 3137 2d30 342d 3035 290a 3d3d 3d3d  2017-04-05).====
-00007ab0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00007ac0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00007ad0: 3d3d 3d0a 4e65 7720 6665 6174 7572 6573  ===.New features
-00007ae0: 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  .---------------
-00007af0: 2d2d 2d0a 2d20 4164 6465 6420 6275 636b  ---.- Added buck
-00007b00: 6574 206c 6162 656c 2073 7570 706f 7274  et label support
-00007b10: 2074 6f20 6773 7574 696c 2e20 466f 7220   to gsutil. For 
-00007b20: 6d6f 7265 2064 6574 6169 6c73 2c20 7365  more details, se
-00007b30: 650a 2020 6874 7470 733a 2f2f 636c 6f75  e.  https://clou
-00007b40: 642e 676f 6f67 6c65 2e63 6f6d 2f63 6f6d  d.google.com/com
-00007b50: 7075 7465 2f64 6f63 732f 6c61 6265 6c2d  pute/docs/label-
-00007b60: 6f72 2d74 6167 2d72 6573 6f75 7263 6573  or-tag-resources
-00007b70: 2e0a 2d20 4164 6465 6420 7468 6520 6c61  ..- Added the la
-00007b80: 6265 6c20 636f 6d6d 616e 642c 2077 6869  bel command, whi
-00007b90: 6368 2063 616e 2062 6520 7573 6564 2074  ch can be used t
-00007ba0: 6f20 6765 742c 2073 6574 2c20 616e 6420  o get, set, and 
-00007bb0: 6368 616e 6765 2074 6865 206c 6162 656c  change the label
-00007bc0: 730a 2020 666f 7220 616e 2065 7869 7374  s.  for an exist
-00007bd0: 696e 6720 6275 636b 6574 2028 6b6e 6f77  ing bucket (know
-00007be0: 6e20 6173 2022 7461 6773 2220 666f 7220  n as "tags" for 
-00007bf0: 5333 2062 7563 6b65 7473 292e 0a2d 204c  S3 buckets)..- L
-00007c00: 6973 7469 6e67 2061 2062 7563 6b65 7420  isting a bucket 
-00007c10: 7669 6120 2267 7375 7469 6c20 6c73 202d  via "gsutil ls -
-00007c20: 4c62 2220 6e6f 7720 616c 736f 2064 6973  Lb" now also dis
-00007c30: 706c 6179 7320 7468 6520 6c61 6265 6c73  plays the labels
-00007c40: 2c20 6966 2061 6e79 0a20 2065 7869 7374  , if any.  exist
-00007c50: 2c20 7468 6174 2061 7265 2063 7572 7265  , that are curre
-00007c60: 6e74 6c79 2073 6574 206f 6e20 6974 2e0a  ntly set on it..
-00007c70: 0a0a 5265 6c65 6173 6520 342e 3234 2028  ..Release 4.24 (
-00007c80: 7265 6c65 6173 6520 6461 7465 3a20 3230  release date: 20
-00007c90: 3137 2d30 332d 3237 290a 3d3d 3d3d 3d3d  17-03-27).======
-00007ca0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00007cb0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00007cc0: 3d0a 4e65 7720 4665 6174 7572 6573 0a2d  =.New Features.-
-00007cd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00007ce0: 2d0a 2d20 4164 6465 6420 7375 7070 6f72  -.- Added suppor
-00007cf0: 7420 666f 7220 636f 6e66 6967 7572 696e  t for configurin
-00007d00: 6720 4743 5320 436c 6f75 6420 5075 622f  g GCS Cloud Pub/
-00007d10: 5375 6220 6e6f 7469 6669 6361 7469 6f6e  Sub notification
-00007d20: 732e 2046 6f72 206d 6f72 650a 2020 6465  s. For more.  de
-00007d30: 7461 696c 732c 2073 6565 2068 7474 7073  tails, see https
-00007d40: 3a2f 2f63 6c6f 7564 2e67 6f6f 676c 652e  ://cloud.google.
-00007d50: 636f 6d2f 7374 6f72 6167 652f 646f 6373  com/storage/docs
-00007d60: 2f70 7562 7375 622d 6e6f 7469 6669 6361  /pubsub-notifica
-00007d70: 7469 6f6e 732e 0a2d 2041 6464 6564 2073  tions..- Added s
-00007d80: 7570 706f 7274 2066 6f72 2073 7065 6369  upport for speci
-00007d90: 6679 696e 6720 6361 6e6e 6564 2041 434c  fying canned ACL
-00007da0: 7320 7768 656e 2075 7369 6e67 2074 6865  s when using the
-00007db0: 2072 7379 6e63 2063 6f6d 6d61 6e64 2e0a   rsync command..
-00007dc0: 0a42 7567 2046 6978 6573 0a2d 2d2d 2d2d  .Bug Fixes.-----
-00007dd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 2d20  -------------.- 
-00007de0: 4669 7865 6420 6120 6275 6720 7768 6572  Fixed a bug wher
-00007df0: 6520 6572 726f 7220 6d65 7373 6167 6573  e error messages
-00007e00: 2061 626f 7574 2069 6e76 616c 6964 206f   about invalid o
-00007e10: 626a 6563 7420 6e61 6d65 7320 6469 6420  bject names did 
-00007e20: 6e6f 7420 636f 7272 6563 746c 790a 2020  not correctly.  
-00007e30: 6469 7370 6c61 7920 7468 6520 7072 6f62  display the prob
-00007e40: 6c65 6d61 7469 6320 6f62 6a65 6374 206e  lematic object n
-00007e50: 616d 652e 0a0a 0a52 656c 6561 7365 2034  ame....Release 4
-00007e60: 2e32 3320 2872 656c 6561 7365 2064 6174  .23 (release dat
-00007e70: 653a 2032 3031 372d 3033 2d30 3929 0a3d  e: 2017-03-09).=
-00007e80: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00007e90: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00007ea0: 3d3d 3d3d 3d3d 0a42 7567 2046 6978 6573  ======.Bug Fixes
-00007eb0: 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  .---------------
-00007ec0: 2d2d 2d0a 2d20 4669 7865 6420 2272 6566  ---.- Fixed "ref
-00007ed0: 6572 656e 6365 6420 6265 666f 7265 2061  erenced before a
-00007ee0: 7373 6967 6e6d 656e 7422 2065 7272 6f72  ssignment" error
-00007ef0: 2069 6e20 736f 6d65 2063 6f70 795f 6865   in some copy_he
-00007f00: 6c70 6572 2065 7863 6570 7469 6f6e 7320  lper exceptions 
-00007f10: 666f 720a 2020 7265 7375 6d61 626c 6520  for.  resumable 
-00007f20: 7570 6c6f 6164 7320 616e 6420 6e6f 6e2d  uploads and non-
-00007f30: 7265 7375 6d61 626c 6520 636c 6f75 642d  resumable cloud-
-00007f40: 746f 2d6c 6f63 616c 2064 6f77 6e6c 6f61  to-local downloa
-00007f50: 6473 2e0a 2d20 5468 6520 7365 746d 6574  ds..- The setmet
-00007f60: 6120 636f 6d6d 616e 6420 6e6f 7720 7072  a command now pr
-00007f70: 6f70 6572 6c79 2073 7570 706f 7274 7320  operly supports 
-00007f80: 6361 7365 2073 656e 7369 7469 7669 7479  case sensitivity
-00007f90: 2069 6e20 6375 7374 6f6d 206d 6574 6164   in custom metad
-00007fa0: 6174 610a 2020 6b65 7973 2077 6865 6e20  ata.  keys when 
-00007fb0: 7573 696e 6720 7468 6520 4a53 4f4e 2041  using the JSON A
-00007fc0: 5049 2e0a 2d20 4669 7865 6420 6120 7265  PI..- Fixed a re
-00007fd0: 736f 7572 6365 206c 6561 6b20 6166 6665  source leak affe
-00007fe0: 6374 696e 6720 5769 6e64 6f77 7320 696e  cting Windows in
-00007ff0: 2063 6173 6573 2077 6865 7265 2073 696e   cases where sin
-00008000: 676c 652d 7072 6f63 6573 732c 0a20 206d  gle-process,.  m
-00008010: 756c 7469 7468 7265 6164 6564 2070 6172  ultithreaded par
-00008020: 616c 6c65 6c69 736d 2069 7320 7573 6564  allelism is used
-00008030: 2074 6861 7420 776f 756c 6420 7265 7375   that would resu
-00008040: 6c74 2069 6e20 616e 204f 5345 7272 6f72  lt in an OSError
-00008050: 2077 6974 6820 7468 650a 2020 6d65 7373   with the.  mess
-00008060: 6167 6520 2254 6f6f 206d 616e 7920 6f70  age "Too many op
-00008070: 656e 2066 696c 6573 222e 0a2d 2046 6978  en files"..- Fix
-00008080: 6564 2048 5454 5045 7272 6f72 2069 6e69  ed HTTPError ini
-00008090: 7469 616c 697a 6174 696f 6e20 6661 696c  tialization fail
-000080a0: 7572 6520 696e 2073 6967 6e75 726c 2063  ure in signurl c
-000080b0: 6f6d 6d61 6e64 2e0a 2d20 4669 7865 6420  ommand..- Fixed 
-000080c0: 7369 676e 7572 6c20 6973 7375 6520 7768  signurl issue wh
-000080d0: 6572 6520 6174 7465 6d70 7469 6e67 2074  ere attempting t
-000080e0: 6f20 7661 6c69 6461 7465 2073 686f 7274  o validate short
-000080f0: 2d6c 6976 6564 2055 524c 7320 6f6e 2061  -lived URLs on a
-00008100: 2073 6c6f 770a 2020 636f 6e6e 6563 7469   slow.  connecti
-00008110: 6f6e 2077 6f75 6c64 2066 6169 6c20 6265  on would fail be
-00008120: 6361 7573 6520 6f66 2055 524c 2065 7870  cause of URL exp
-00008130: 6972 6174 696f 6e2e 0a2d 2046 6978 6564  iration..- Fixed
-00008140: 2061 2062 7567 2077 6865 7265 2063 7020   a bug where cp 
-00008150: 2d72 2077 6f75 6c64 206e 6f74 2070 726f  -r would not pro
-00008160: 7065 726c 7920 7265 736f 6c76 6520 7769  perly resolve wi
-00008170: 6c64 6361 7264 7320 666f 720a 2020 636c  ldcards for.  cl
-00008180: 6f75 642d 746f 2d63 6c6f 7564 2063 6f70  oud-to-cloud cop
-00008190: 6965 732e 0a2d 2046 6978 6564 2061 2062  ies..- Fixed a b
-000081a0: 7567 2077 6865 7265 2063 7020 2d65 202d  ug where cp -e -
-000081b0: 7220 776f 756c 6420 636f 7079 2073 796d  r would copy sym
-000081c0: 6c69 6e6b 732e 0a2d 2046 6978 6564 2061  links..- Fixed a
-000081d0: 2062 7567 2077 6865 7265 2063 7020 2d50   bug where cp -P
-000081e0: 2077 6f75 6c64 2066 6169 6c20 6f6e 2057   would fail on W
-000081f0: 696e 646f 7773 2e0a 2d20 4669 7865 6420  indows..- Fixed 
-00008200: 6120 6275 6720 7768 6572 6520 7665 7273  a bug where vers
-00008210: 696f 6e20 2d6c 206d 6967 6874 206e 6f74  ion -l might not
-00008220: 2073 686f 7720 616c 6c20 626f 746f 2063   show all boto c
-00008230: 6f6e 6669 6775 7261 7469 6f6e 2066 696c  onfiguration fil
-00008240: 6573 2e0a 2d20 5275 6e6e 696e 6720 7065  es..- Running pe
-00008250: 7266 6469 6167 206e 6f77 206f 6e6c 7920  rfdiag now only 
-00008260: 6c69 7374 7320 7468 6520 6f62 6a65 6374  lists the object
-00008270: 7320 7468 6174 2077 6572 6520 6372 6561  s that were crea
-00008280: 7465 6420 6279 2074 6861 7420 7275 6e20  ted by that run 
-00008290: 6f66 0a20 2070 6572 6664 6961 672e 2054  of.  perfdiag. T
-000082a0: 6869 7320 6669 7865 7320 616e 2069 7373  his fixes an iss
-000082b0: 7565 2077 6865 7265 2072 756e 6e69 6e67  ue where running
-000082c0: 2070 6572 6664 6961 6720 6167 6169 6e73   perfdiag agains
-000082d0: 7420 616e 2065 7869 7374 696e 670a 2020  t an existing.  
-000082e0: 6275 636b 6574 2077 6974 6820 6d61 6e79  bucket with many
-000082f0: 206f 626a 6563 7473 2069 6e20 6974 2063   objects in it c
-00008300: 6f75 6c64 2074 616b 6520 6120 6c6f 6e67  ould take a long
-00008310: 2074 696d 652e 0a0a 0a4f 7468 6572 2043   time....Other C
-00008320: 6861 6e67 6573 0a2d 2d2d 2d2d 2d2d 2d2d  hanges.---------
-00008330: 2d2d 2d2d 2d2d 2d2d 2d0a 2d20 5369 6d70  ---------.- Simp
-00008340: 6c69 6669 6564 2070 6172 616c 6c65 6c69  lified paralleli
-00008350: 736d 2077 6865 6e20 7573 696e 6720 6120  sm when using a 
-00008360: 7369 6e67 6c65 2070 726f 6365 7373 2077  single process w
-00008370: 6974 6820 6d75 6c74 6970 6c65 2074 6872  ith multiple thr
-00008380: 6561 6473 2e0a 2020 5769 7468 2074 6869  eads..  With thi
-00008390: 7320 6368 616e 6765 2c20 6773 7574 696c  s change, gsutil
-000083a0: 2077 696c 6c20 7370 6177 6e20 6120 6e65   will spawn a ne
-000083b0: 7720 7468 7265 6164 2070 6f6f 6c20 7065  w thread pool pe
-000083c0: 7220 6c65 7665 6c20 6f66 0a20 2070 6172  r level of.  par
-000083d0: 616c 6c65 6c69 736d 2e20 4173 2061 6e20  allelism. As an 
-000083e0: 6578 616d 706c 652c 2069 6620 796f 7520  example, if you 
-000083f0: 7370 6563 6966 7920 7468 6174 2079 6f75  specify that you
-00008400: 2077 616e 7420 610a 2020 7061 7265 6c6c   want a.  parell
-00008410: 656c 5f74 6872 6561 645f 636f 756e 7420  el_thread_count 
-00008420: 6f66 2032 342c 2074 6869 7320 7769 6c6c  of 24, this will
-00008430: 2072 6573 756c 7420 696e 2032 3420 776f   result in 24 wo
-00008440: 726b 6572 2074 6872 6561 6473 2c20 6578  rker threads, ex
-00008450: 6365 7074 0a20 2077 6865 6e20 796f 7527  cept.  when you'
-00008460: 7265 2075 7369 6e67 2070 6172 616c 6c65  re using paralle
-00008470: 6c20 636f 6d70 6f73 6974 6520 7570 6c6f  l composite uplo
-00008480: 6164 7320 6f72 2073 6c69 6365 6420 646f  ads or sliced do
-00008490: 776e 6c6f 6164 732c 2069 6e20 7768 6963  wnloads, in whic
-000084a0: 680a 2020 6361 7365 2034 3820 2832 3420  h.  case 48 (24 
-000084b0: 2a20 3229 2077 6f72 6b65 7220 7468 7265  * 2) worker thre
-000084c0: 6164 7320 7769 6c6c 2062 6520 7573 6564  ads will be used
-000084d0: 2e0a 2d20 4578 7465 6e64 6564 2074 6865  ..- Extended the
-000084e0: 2065 6172 6c79 2064 656c 6574 696f 6e20   early deletion 
-000084f0: 7761 726e 696e 6720 7468 7265 7368 6f6c  warning threshol
-00008500: 6420 7768 656e 206d 6f76 696e 6720 436f  d when moving Co
-00008510: 6c64 6c69 6e65 206f 626a 6563 7473 0a20  ldline objects. 
-00008520: 2074 6f20 3930 2064 6179 7320 6166 7465   to 90 days afte
-00008530: 7220 6f62 6a65 6374 2063 7265 6174 696f  r object creatio
-00008540: 6e2e 0a2d 2049 6d70 726f 7665 6420 7365  n..- Improved se
-00008550: 7665 7261 6c20 6572 726f 7220 6d65 7373  veral error mess
-00008560: 6167 6573 2061 6e64 2077 6172 6e69 6e67  ages and warning
-00008570: 732e 0a2d 2053 6576 6572 616c 2064 6f63  s..- Several doc
-00008580: 756d 656e 7461 7469 6f6e 2075 7064 6174  umentation updat
-00008590: 6573 2061 6e64 2063 6c61 7269 6669 6361  es and clarifica
-000085a0: 7469 6f6e 732e 0a0a 5265 6c65 6173 6520  tions...Release 
-000085b0: 342e 3232 2028 7265 6c65 6173 6520 6461  4.22 (release da
-000085c0: 7465 3a20 3230 3136 2d31 302d 3230 290a  te: 2016-10-20).
-000085d0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000085e0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000085f0: 3d3d 3d3d 3d3d 3d0a 4e65 7720 6665 6174  =======.New feat
-00008600: 7572 6573 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d  ures.-----------
-00008610: 2d2d 2d2d 2d2d 2d0a 2d20 4164 6465 6420  -------.- Added 
-00008620: 7065 722d 6f62 6a65 6374 2073 746f 7261  per-object stora
-00008630: 6765 2063 6c61 7373 2066 756e 6374 696f  ge class functio
-00008640: 6e61 6c69 7479 2074 6f20 6773 7574 696c  nality to gsutil
-00008650: 2e20 466f 7220 6d6f 7265 2064 6574 6169  . For more detai
-00008660: 6c73 2c20 7365 650a 2020 6874 7470 733a  ls, see.  https:
-00008670: 2f2f 636c 6f75 642e 676f 6f67 6c65 2e63  //cloud.google.c
-00008680: 6f6d 2f73 746f 7261 6765 2f64 6f63 732f  om/storage/docs/
-00008690: 7065 722d 6f62 6a65 6374 2d73 746f 7261  per-object-stora
-000086a0: 6765 2d63 6c61 7373 2e0a 2d20 4164 6465  ge-class..- Adde
-000086b0: 6420 7468 6520 6465 6673 746f 7261 6765  d the defstorage
-000086c0: 636c 6173 7320 636f 6d6d 616e 642c 2077  class command, w
-000086d0: 6869 6368 2063 616e 2062 6520 7573 6564  hich can be used
-000086e0: 2074 6f20 6765 7420 616e 6420 7365 7420   to get and set 
-000086f0: 616e 0a20 2065 7869 7374 696e 6720 6275  an.  existing bu
-00008700: 636b 6574 2773 2064 6566 6175 6c74 2073  cket's default s
-00008710: 746f 7261 6765 2063 6c61 7373 2e0a 2d20  torage class..- 
-00008720: 5468 6520 6370 2c20 6d76 2c20 616e 6420  The cp, mv, and 
-00008730: 7265 7772 6974 6520 636f 6d6d 616e 6473  rewrite commands
-00008740: 206e 6f77 2073 7570 706f 7274 2074 6865   now support the
-00008750: 2022 2d73 2220 6f70 7469 6f6e 2c20 616c   "-s" option, al
-00008760: 6c6f 7769 6e67 2075 7365 7273 0a20 2074  lowing users.  t
-00008770: 6f20 7370 6563 6966 7920 7468 6520 7374  o specify the st
-00008780: 6f72 6167 6520 636c 6173 7320 666f 7220  orage class for 
-00008790: 6465 7374 696e 6174 696f 6e20 6f62 6a65  destination obje
-000087a0: 6374 2873 292e 2057 6865 6e20 6e6f 2073  ct(s). When no s
-000087b0: 746f 7261 6765 2063 6c61 7373 0a20 2069  torage class.  i
-000087c0: 7320 7370 6563 6966 6965 642c 2074 6865  s specified, the
-000087d0: 206f 626a 6563 7427 7320 7374 6f72 6167   object's storag
-000087e0: 6520 636c 6173 7320 7769 6c6c 2062 6520  e class will be 
-000087f0: 6173 7369 676e 6564 2066 726f 6d20 6569  assigned from ei
-00008800: 7468 6572 2069 7473 0a20 2062 7563 6b65  ther its.  bucke
-00008810: 7427 7320 6465 6661 756c 7420 7374 6f72  t's default stor
-00008820: 6167 6520 636c 6173 7320 2863 702f 6d76  age class (cp/mv
-00008830: 2063 6f6d 6d61 6e64 7329 206f 7220 7468   commands) or th
-00008840: 6520 736f 7572 6365 206f 626a 6563 7427  e source object'
-00008850: 730a 2020 7374 6f72 6167 6520 636c 6173  s.  storage clas
-00008860: 7320 2872 6577 7269 7465 2063 6f6d 6d61  s (rewrite comma
-00008870: 6e64 292e 0a0a 4275 6720 4669 7865 730a  nd)...Bug Fixes.
-00008880: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00008890: 2d2d 0a2d 2046 6978 6564 2061 2062 7567  --.- Fixed a bug
-000088a0: 2069 6e20 504f 5349 5820 7072 6573 6572   in POSIX preser
-000088b0: 7661 7469 6f6e 2066 6f72 2074 6865 2063  vation for the c
-000088c0: 7020 616e 6420 6d76 2063 6f6d 6d61 6e64  p and mv command
-000088d0: 7320 7768 6572 6520 504f 5349 580a 2020  s where POSIX.  
-000088e0: 6174 7472 6962 7574 6573 2077 6572 6520  attributes were 
-000088f0: 6e6f 7420 7072 6f70 6167 6174 6564 2074  not propagated t
-00008900: 6f20 636c 6f75 6420 6f62 6a65 6374 732c  o cloud objects,
-00008910: 2065 7665 6e20 7768 656e 2074 6865 202d   even when the -
-00008920: 5020 666c 6167 2077 6173 0a20 2070 7265  P flag was.  pre
-00008930: 7365 6e74 2e0a 2d20 4669 7865 6420 6120  sent..- Fixed a 
-00008940: 6275 6720 696e 2073 6574 6d65 7461 2077  bug in setmeta w
-00008950: 6865 7265 2072 656d 6f76 696e 6720 6375  here removing cu
-00008960: 7374 6f6d 206d 6574 6164 6174 6120 776f  stom metadata wo
-00008970: 756c 6420 6164 6420 616e 0a20 2065 6d70  uld add an.  emp
-00008980: 7479 2d73 7472 696e 6720 7661 6c75 6520  ty-string value 
-00008990: 6966 2074 6865 206b 6579 2064 6964 206e  if the key did n
-000089a0: 6f74 2061 6c72 6561 6479 2065 7869 7374  ot already exist
-000089b0: 2e0a 2d20 436f 6e74 656e 742d 5479 7065  ..- Content-Type
-000089c0: 2069 7320 6e6f 7720 6f62 7461 696e 6564   is now obtained
-000089d0: 2066 726f 6d20 7379 6d6c 696e 6b20 7461   from symlink ta
-000089e0: 7267 6574 732c 2072 6174 6865 7220 7468  rgets, rather th
-000089f0: 616e 2073 796d 6c69 6e6b 730a 2020 7468  an symlinks.  th
-00008a00: 656d 7365 6c76 6573 2c20 7768 656e 2074  emselves, when t
-00008a10: 6865 2075 7365 5f6d 6167 6963 6669 6c65  he use_magicfile
-00008a20: 206f 7074 696f 6e20 6973 2073 6574 2069   option is set i
-00008a30: 6e20 7468 6520 2e62 6f74 6f20 636f 6e66  n the .boto conf
-00008a40: 6967 7572 6174 696f 6e0a 2020 6669 6c65  iguration.  file
-00008a50: 2e0a 0a4f 7468 6572 2043 6861 6e67 6573  ...Other Changes
-00008a60: 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  .---------------
-00008a70: 2d2d 2d0a 2d20 416e 616c 7974 6963 7320  ---.- Analytics 
-00008a80: 7265 706f 7274 696e 6720 6e6f 7720 696e  reporting now in
-00008a90: 636c 7564 6573 2070 6572 666f 726d 616e  cludes performan
-00008aa0: 6365 206d 6574 7269 6373 2073 7563 6820  ce metrics such 
-00008ab0: 6173 2061 7665 7261 6765 0a20 2074 6872  as average.  thr
-00008ac0: 6f75 6768 7075 7420 616e 6420 7468 7265  oughput and thre
-00008ad0: 6164 2069 646c 6520 7469 6d65 2e0a 2d20  ad idle time..- 
-00008ae0: 5468 6520 6961 6d20 7365 7420 636f 6d6d  The iam set comm
-00008af0: 616e 6420 6e6f 7720 7375 7070 6f72 7473  and now supports
-00008b00: 2061 202d 6520 6f70 7469 6f6e 2074 6f20   a -e option to 
-00008b10: 7370 6563 6966 7920 616e 2065 7461 6720  specify an etag 
-00008b20: 7072 6563 6f6e 6469 7469 6f6e 0a20 2063  precondition.  c
-00008b30: 6865 636b 2e20 5468 6520 4941 4d20 706f  heck. The IAM po
-00008b40: 6c69 6379 2066 696c 6520 7265 7475 726e  licy file return
-00008b50: 6564 2062 7920 6961 6d20 6765 7420 616e  ed by iam get an
-00008b60: 6420 7573 6564 2062 7920 6961 6d20 7365  d used by iam se
-00008b70: 7420 6861 7320 616c 736f 0a20 2062 6565  t has also.  bee
-00008b80: 6e20 616c 7465 7265 6420 746f 2069 6e63  n altered to inc
-00008b90: 6c75 6465 2074 6869 7320 6669 656c 642e  lude this field.
-00008ba0: 0a2d 2044 6566 6175 6c74 206c 696d 6974  .- Default limit
-00008bb0: 2066 6f72 206d 6178 206e 756d 6265 7220   for max number 
-00008bc0: 6f66 2070 726f 6365 7373 6573 2063 6861  of processes cha
-00008bd0: 6e67 6564 2074 6f20 3634 2e0a 2d20 5365  nged to 64..- Se
-00008be0: 7665 7261 6c20 646f 6375 6d65 6e74 6174  veral documentat
-00008bf0: 696f 6e20 7570 6461 7465 7320 616e 6420  ion updates and 
-00008c00: 636c 6172 6966 6963 6174 696f 6e73 2e0a  clarifications..
-00008c10: 0a52 656c 6561 7365 2034 2e32 3120 2872  .Release 4.21 (r
-00008c20: 656c 6561 7365 2064 6174 653a 2032 3031  elease date: 201
-00008c30: 362d 3038 2d31 3629 0a3d 3d3d 3d3d 3d3d  6-08-16).=======
-00008c40: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00008c50: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00008c60: 0a4e 6577 2046 6561 7475 7265 730a 2d2d  .New Features.--
-00008c70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00008c80: 0a2d 2054 6865 2063 6f6e 736f 6c65 206f  .- The console o
-00008c90: 7574 7075 7420 666f 7220 6d61 6e79 2063  utput for many c
-00008ca0: 6f6d 6d61 6e64 7320 6861 7320 6265 656e  ommands has been
-00008cb0: 2069 6d70 726f 7665 6420 746f 2064 6973   improved to dis
-00008cc0: 706c 6179 0a20 2063 6f6d 6d61 6e64 2070  play.  command p
-00008cd0: 726f 6772 6573 732e 0a2d 2054 6865 2063  rogress..- The c
-00008ce0: 702c 206d 762c 2061 6e64 2072 7379 6e63  p, mv, and rsync
-00008cf0: 2063 6f6d 6d61 6e64 7320 6e6f 7720 7375   commands now su
-00008d00: 7070 6f72 7420 6120 2d50 206f 7074 696f  pport a -P optio
-00008d10: 6e20 7468 6174 2070 7265 7365 7276 6573  n that preserves
-00008d20: 0a20 2050 4f53 4958 2066 696c 6520 6174  .  POSIX file at
-00008d30: 7472 6962 7574 6573 2066 726f 6d20 7468  tributes from th
-00008d40: 6520 736f 7572 6365 2e20 4375 7272 656e  e source. Curren
-00008d50: 746c 792c 206d 6f64 652c 2067 6964 2c20  tly, mode, gid, 
-00008d60: 7569 642c 0a20 2061 7469 6d65 2c20 616e  uid,.  atime, an
-00008d70: 6420 6d74 696d 6520 6174 7472 6962 7574  d mtime attribut
-00008d80: 6573 2061 7265 2073 7570 706f 7274 6564  es are supported
-00008d90: 2066 6f72 2075 706c 6f61 6473 2c20 646f   for uploads, do
-00008da0: 776e 6c6f 6164 732c 0a20 2061 6e64 2063  wnloads,.  and c
-00008db0: 6f70 6965 732e 0a2d 2067 7375 7469 6c20  opies..- gsutil 
-00008dc0: 6361 6e20 6e6f 7720 6f70 7469 6f6e 616c  can now optional
-00008dd0: 6c79 2072 6570 6f72 7420 616e 6f6e 796d  ly report anonym
-00008de0: 6f75 7320 7573 6167 6520 7374 6174 6973  ous usage statis
-00008df0: 7469 6373 2074 6861 7420 6865 6c70 0a20  tics that help. 
-00008e00: 2067 7375 7469 6c20 6465 7665 6c6f 7065   gsutil develope
-00008e10: 7273 2069 6d70 726f 7665 2074 6865 2074  rs improve the t
-00008e20: 6f6f 6c2e 2046 6f72 206e 6f6e 2d67 636c  ool. For non-gcl
-00008e30: 6f75 6420 6469 7374 7269 6275 7469 6f6e  oud distribution
-00008e40: 732c 0a20 2070 726f 6d70 7473 2068 6176  s,.  prompts hav
-00008e50: 6520 6265 656e 2061 6464 6564 2074 6f20  e been added to 
-00008e60: 7468 6520 636f 6e66 6967 2061 6e64 2075  the config and u
-00008e70: 7064 6174 6520 636f 6d6d 616e 6473 2e20  pdate commands. 
-00008e80: 5072 6f6d 7074 7320 6361 6e0a 2020 6265  Prompts can.  be
-00008e90: 2064 6973 6162 6c65 6420 7669 6120 7468   disabled via th
-00008ea0: 6520 6469 7361 626c 655f 616e 616c 7974  e disable_analyt
-00008eb0: 6963 735f 7072 6f6d 7074 2076 616c 7565  ics_prompt value
-00008ec0: 2069 6e20 7468 6520 2e62 6f74 6f0a 2020   in the .boto.  
-00008ed0: 636f 6e66 6967 7572 6174 696f 6e20 6669  configuration fi
-00008ee0: 6c65 2e0a 2d20 4164 6465 6420 7468 6520  le..- Added the 
-00008ef0: 6961 6d20 636f 6d6d 6d61 6e64 2c20 7768  iam commmand, wh
-00008f00: 6963 6820 6361 6e20 6265 2075 7365 6420  ich can be used 
-00008f10: 746f 2073 6574 2049 414d 2070 6f6c 6963  to set IAM polic
-00008f20: 6965 7320 6f6e 0a20 2047 6f6f 676c 6520  ies on.  Google 
-00008f30: 436c 6f75 6420 5374 6f72 6167 6520 6275  Cloud Storage bu
-00008f40: 636b 6574 7320 616e 6420 6f62 6a65 6374  ckets and object
-00008f50: 732e 2054 6869 7320 6665 6174 7572 6520  s. This feature 
-00008f60: 6973 2063 7572 7265 6e74 6c79 2069 6e0a  is currently in.
-00008f70: 2020 616c 7068 6120 616e 6420 7265 7175    alpha and requ
-00008f80: 6972 6573 2061 2073 6166 656c 6973 7420  ires a safelist 
-00008f90: 6170 706c 6963 6174 696f 6e20 746f 2075  application to u
-00008fa0: 7365 2069 7420 2d20 7365 650a 2020 2267  se it - see.  "g
-00008fb0: 7375 7469 6c20 6865 6c70 2069 616d 2220  sutil help iam" 
-00008fc0: 666f 7220 2064 6574 6169 6c73 2e0a 2d20  for  details..- 
-00008fd0: 5468 6520 6861 7368 2063 6f6d 6d61 6e64  The hash command
-00008fe0: 206e 6f77 2073 7570 706f 7274 7320 7265   now supports re
-00008ff0: 7472 6965 7669 6e67 2068 6173 6865 7320  trieving hashes 
-00009000: 666f 7220 636c 6f75 6420 6f62 6a65 6374  for cloud object
-00009010: 732e 0a0a 4275 6720 4669 7865 730a 2d2d  s...Bug Fixes.--
-00009020: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009030: 0a2d 2046 6978 6564 2061 2062 7567 2077  .- Fixed a bug w
-00009040: 6865 7265 2072 7379 6e63 202d 6520 2d72  here rsync -e -r
-00009050: 2063 6f75 6c64 2066 6169 6c20 666f 7220   could fail for 
-00009060: 7375 6264 6972 6563 746f 7269 6573 2077  subdirectories w
-00009070: 6974 680a 2020 6272 6f6b 656e 2073 796d  ith.  broken sym
-00009080: 6c69 6e6b 732e 0a2d 2046 6978 6564 2061  links..- Fixed a
-00009090: 6e20 6163 6365 7373 2065 7272 6f72 2077  n access error w
-000090a0: 6865 6e20 696e 7465 7261 6374 696e 6720  hen interacting 
-000090b0: 7769 7468 2053 3320 7573 6572 2d73 7065  with S3 user-spe
-000090c0: 6369 6669 630a 2020 6469 7265 6374 6f72  cific.  director
-000090d0: 6965 732e 0a0a 4f74 6865 7220 4368 616e  ies...Other Chan
-000090e0: 6765 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ges.------------
-000090f0: 2d2d 2d2d 2d2d 0a2d 2055 7064 6174 6564  ------.- Updated
-00009100: 2062 6f74 6f20 6c69 6272 6172 7920 6465   boto library de
-00009110: 7065 6e64 656e 6379 2074 6f20 322e 3432  pendency to 2.42
-00009120: 2e30 2e0a 0a52 656c 6561 7365 2034 2e32  .0...Release 4.2
-00009130: 3020 2872 656c 6561 7365 2064 6174 653a  0 (release date:
-00009140: 2032 3031 362d 3037 2d32 3029 0a3d 3d3d   2016-07-20).===
-00009150: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00009160: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00009170: 3d3d 3d3d 0a4e 6577 2046 6561 7475 7265  ====.New Feature
-00009180: 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  s.--------------
-00009190: 2d2d 2d2d 0a2d 2067 7375 7469 6c20 6e6f  ----.- gsutil no
-000091a0: 7720 6f75 7470 7574 7320 6120 6d65 7373  w outputs a mess
-000091b0: 6167 6520 7468 6174 2065 7374 696d 6174  age that estimat
-000091c0: 6573 2074 6865 2074 6f74 616c 206e 756d  es the total num
-000091d0: 6265 7220 6f66 206f 626a 6563 7473 2066  ber of objects f
-000091e0: 6f72 0a20 2063 6f6d 6d61 6e64 7320 6166  or.  commands af
-000091f0: 6665 6374 696e 6720 6d6f 7265 2074 6861  fecting more tha
-00009200: 6e20 3330 2c30 3030 206f 626a 6563 7473  n 30,000 objects
-00009210: 2e20 5468 6973 2076 616c 7565 2063 616e  . This value can
-00009220: 2062 6520 6164 6a75 7374 6564 2076 6961   be adjusted via
-00009230: 0a20 2074 6173 6b5f 6573 7469 6d61 7469  .  task_estimati
-00009240: 6f6e 5f74 6872 6573 686f 6c64 2069 6e20  on_threshold in 
-00009250: 7468 6520 2e62 6f74 6f20 636f 6e66 6967  the .boto config
-00009260: 7572 6174 696f 6e20 6669 6c65 2e0a 0a42  uration file...B
-00009270: 7567 2046 6978 6573 0a2d 2d2d 2d2d 2d2d  ug Fixes.-------
-00009280: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 2d20 4669  -----------.- Fi
-00009290: 7865 6420 6120 6275 6720 696e 2072 6573  xed a bug in res
-000092a0: 756d 6162 6c65 2064 6f77 6e6c 6f61 6473  umable downloads
-000092b0: 2074 6861 7420 636f 756c 6420 7261 6973   that could rais
-000092c0: 6520 556e 626f 756e 644c 6f63 616c 4572  e UnboundLocalEr
-000092d0: 726f 7220 6966 0a20 2074 6865 2064 6f77  ror if.  the dow
-000092e0: 6e6c 6f61 6420 6669 6c65 2077 6173 206e  nload file was n
-000092f0: 6f74 2072 6561 6461 626c 652e 0a2d 2055  ot readable..- U
-00009300: 7064 6174 6564 206f 6175 7468 3263 6c69  pdated oauth2cli
-00009310: 656e 7420 746f 2076 6572 7369 6f6e 2032  ent to version 2
-00009320: 2e32 2e30 2c20 6669 7869 6e67 2073 6f6d  .2.0, fixing som
-00009330: 6520 494f 4572 726f 7220 616e 6420 4f53  e IOError and OS
-00009340: 4572 726f 7220 6361 7365 732e 0a2d 2046  Error cases..- F
-00009350: 6978 6564 2062 7567 2069 6e20 6773 7574  ixed bug in gsut
-00009360: 696c 206c 7320 7468 6174 2077 6f75 6c64  il ls that would
-00009370: 2073 686f 7720 7570 6461 7465 2074 696d   show update tim
-00009380: 6520 696e 7374 6561 6420 6f66 2063 7265  e instead of cre
-00009390: 6174 696f 6e0a 2020 7469 6d65 2077 6865  ation.  time whe
-000093a0: 6e20 7573 696e 6720 7468 6520 4a53 4f4e  n using the JSON
-000093b0: 2041 5049 2061 6e64 202d 4c20 6f72 202d   API and -L or -
-000093c0: 6c20 666c 6167 732e 0a2d 2046 6978 6564  l flags..- Fixed
-000093d0: 2061 2062 7567 2069 6e20 6773 7574 696c   a bug in gsutil
-000093e0: 2072 7379 6e63 202d 6420 7468 6174 2063   rsync -d that c
-000093f0: 6f75 6c64 2063 6175 7365 2065 7272 6f6e  ould cause erron
-00009400: 656f 7573 2072 656d 6f76 616c 206f 660a  eous removal of.
-00009410: 2020 616e 2065 7874 7261 2064 6573 7469    an extra desti
-00009420: 6e61 7469 6f6e 206f 626a 6563 742e 0a2d  nation object..-
-00009430: 2046 6978 6564 2064 6f77 6e6c 6f61 6473   Fixed downloads
-00009440: 2074 6f20 696e 636c 7564 6520 6163 6365   to include acce
-00009450: 7074 2d65 6e63 6f64 696e 673a 677a 6970  pt-encoding:gzip
-00009460: 206c 6f67 6963 2077 6865 6e20 6170 7072   logic when appr
-00009470: 6f70 7269 6174 652e 0a0a 4f74 6865 7220  opriate...Other 
-00009480: 4368 616e 6765 730a 2d2d 2d2d 2d2d 2d2d  Changes.--------
-00009490: 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d 2067 7375  ----------.- gsu
-000094a0: 7469 6c20 7273 796e 6320 6e6f 7720 7374  til rsync now st
-000094b0: 6f72 6573 206d 6f64 6966 6963 6174 696f  ores modificatio
-000094c0: 6e20 7469 6d65 2028 6d74 696d 6529 2066  n time (mtime) f
-000094d0: 6f72 2063 6c6f 7564 206f 626a 6563 7473  or cloud objects
-000094e0: 2e0a 2d20 4368 616e 6765 6420 7468 6520  ..- Changed the 
-000094f0: 6465 6661 756c 7420 6368 616e 6765 2064  default change d
-00009500: 6574 6563 7469 6f6e 2061 6c67 6f72 6974  etection algorit
-00009510: 686d 206f 6620 6773 7574 696c 2072 7379  hm of gsutil rsy
-00009520: 6e63 2066 726f 6d20 6669 6c65 0a20 2073  nc from file.  s
-00009530: 697a 6520 746f 2066 696c 6520 6d74 696d  ize to file mtim
-00009540: 652c 2066 616c 6c69 6e67 2062 6163 6b20  e, falling back 
-00009550: 746f 2063 6865 636b 7375 6d20 616e 6420  to checksum and 
-00009560: 6669 6e61 6c6c 7920 6669 6c65 0a20 2073  finally file.  s
-00009570: 697a 6520 6173 2061 6c74 6572 6e61 7469  ize as alternati
-00009580: 7665 732e 2054 6869 7320 616c 6c6f 7773  ves. This allows
-00009590: 2066 6f72 2069 6e63 7265 6173 6564 2061   for increased a
-000095a0: 6363 7572 6163 7920 6f66 2072 7379 6e63  ccuracy of rsync
-000095b0: 2077 6974 686f 7574 0a20 2074 6865 2073   without.  the s
-000095c0: 7065 6564 2073 6163 7269 6669 6365 2074  peed sacrifice t
-000095d0: 6861 7420 636f 6d65 7320 6672 6f6d 2063  hat comes from c
-000095e0: 6865 636b 7375 6d20 6361 6c63 756c 6174  hecksum calculat
-000095f0: 696f 6e2c 2061 6e64 206d 616b 6573 2067  ion, and makes g
-00009600: 7375 7469 6c0a 2020 7273 796e 6320 776f  sutil.  rsync wo
-00009610: 726b 206d 6f72 6520 7369 6d69 6c61 726c  rk more similarl
-00009620: 7920 746f 2068 6f77 204c 696e 7578 2072  y to how Linux r
-00009630: 7379 6e63 2077 6f72 6b73 2e20 4e6f 7465  sync works. Note
-00009640: 2074 6861 7420 7468 6520 6669 7273 740a   that the first.
-00009650: 2020 7275 6e20 6f66 2061 206c 6f63 616c    run of a local
-00009660: 2d74 6f2d 636c 6f75 6420 7273 796e 6320  -to-cloud rsync 
-00009670: 7573 696e 6720 7468 6973 206e 6577 2061  using this new a
-00009680: 6c67 6f72 6974 686d 206d 6179 2062 6520  lgorithm may be 
-00009690: 736c 6f77 6572 2074 6861 6e0a 2020 7375  slower than.  su
-000096a0: 6273 6571 7565 6e74 2072 756e 732c 2061  bsequent runs, a
-000096b0: 7320 7468 6520 636c 6f75 6420 6f62 6a65  s the cloud obje
-000096c0: 6374 7320 7769 6c6c 206e 6f74 2069 6e69  cts will not ini
-000096d0: 7469 616c 6c79 2068 6176 6520 616e 206d  tially have an m
-000096e0: 7469 6d65 2c20 616e 640a 2020 7468 6520  time, and.  the 
-000096f0: 616c 676f 7269 7468 6d20 7769 6c6c 2066  algorithm will f
-00009700: 616c 6c20 6261 636b 2074 6f20 7468 6520  all back to the 
-00009710: 736c 6f77 6572 2063 6865 636b 7375 6d2d  slower checksum-
-00009720: 6261 7365 6420 616c 7465 726e 6174 6976  based alternativ
-00009730: 6520 696e 0a20 2061 6464 6974 696f 6e20  e in.  addition 
-00009740: 746f 2061 6464 696e 6720 6d74 696d 6520  to adding mtime 
-00009750: 746f 2074 6865 2063 6c6f 7564 206f 626a  to the cloud obj
-00009760: 6563 7473 2e0a 2d20 5768 656e 2075 7369  ects..- When usi
-00009770: 6e67 2074 6865 204a 534f 4e20 4150 492c  ng the JSON API,
-00009780: 2067 7375 7469 6c20 7769 6c6c 206f 7574   gsutil will out
-00009790: 7075 7420 6120 7072 6f67 7265 7373 206d  put a progress m
-000097a0: 6573 7361 6765 2062 6566 6f72 650a 2020  essage before.  
-000097b0: 7265 7472 7969 6e67 2061 2072 6571 7565  retrying a reque
-000097c0: 7374 2069 6620 656e 6f75 6768 2074 696d  st if enough tim
-000097d0: 6520 6861 7320 7061 7373 6564 2073 696e  e has passed sin
-000097e0: 6365 2074 6865 2066 6972 7374 2061 7474  ce the first att
-000097f0: 656d 7074 2e0a 2d20 496d 7072 6f76 6564  empt..- Improved
-00009800: 2065 7272 6f72 2064 6574 6563 7469 6f6e   error detection
-00009810: 2069 6e20 6472 7920 7275 6e73 206f 6620   in dry runs of 
-00009820: 6773 7574 696c 2072 7379 6e63 2062 7920  gsutil rsync by 
-00009830: 6174 7465 6d70 7469 6e67 2074 6f20 6f70  attempting to op
-00009840: 656e 0a20 2066 696c 6573 2074 6861 7420  en.  files that 
-00009850: 776f 756c 6420 6265 2063 6f70 6965 642e  would be copied.
-00009860: 0a2d 2041 6464 6564 2074 696d 6520 6372  .- Added time cr
-00009870: 6561 7465 6420 616e 6420 7469 6d65 2075  eated and time u
-00009880: 7064 6174 6564 2070 726f 7065 7274 6965  pdated propertie
-00009890: 7320 746f 206f 7574 7075 7420 6f66 2067  s to output of g
-000098a0: 7375 7469 6c20 6c73 202d 4c62 2e0a 2d20  sutil ls -Lb..- 
-000098b0: 4164 6465 6420 6172 6368 6976 6564 2074  Added archived t
-000098c0: 696d 6520 7072 6f70 6572 7479 2074 6f20  ime property to 
-000098d0: 6f75 7470 7574 206f 6620 6773 7574 696c  output of gsutil
-000098e0: 206c 7320 2d4c 6120 616e 6420 6773 7574   ls -La and gsut
-000098f0: 696c 2073 7461 742e 0a2d 2043 6861 6e67  il stat..- Chang
-00009900: 6564 206d 696e 696d 756d 206e 756d 6265  ed minimum numbe
-00009910: 7220 6f66 2073 6f75 7263 6520 6f62 6a65  r of source obje
-00009920: 6374 7320 666f 7220 6773 7574 696c 2063  cts for gsutil c
-00009930: 6f6d 706f 7365 2066 726f 6d20 3220 746f  ompose from 2 to
-00009940: 2031 2e0a 2d20 5265 6d6f 7665 6420 616e   1..- Removed an
-00009950: 2048 5454 5020 6d65 7461 6461 7461 2067   HTTP metadata g
-00009960: 6574 2063 616c 6c20 6672 6f6d 2063 702c  et call from cp,
-00009970: 2061 636c 2c20 616e 6420 7365 746d 6574   acl, and setmet
-00009980: 6120 636f 6d6d 616e 6473 2e20 5468 6973  a commands. This
-00009990: 0a20 2069 6d70 726f 7665 7320 7468 6520  .  improves the 
-000099a0: 7370 6565 6420 6f66 2067 7375 7469 6c20  speed of gsutil 
-000099b0: 6370 2066 6f72 2073 6d61 6c6c 206f 626a  cp for small obj
-000099c0: 6563 7473 2062 7920 6f76 6572 2035 3025  ects by over 50%
-000099d0: 2e0a 2d20 5365 7665 7261 6c20 646f 6375  ..- Several docu
-000099e0: 6d65 6e74 6174 696f 6e20 7570 6461 7465  mentation update
-000099f0: 7320 616e 6420 636c 6172 6966 6963 6174  s and clarificat
-00009a00: 696f 6e73 2e0a 0a52 656c 6561 7365 2034  ions...Release 4
-00009a10: 2e31 3920 2872 656c 6561 7365 2064 6174  .19 (release dat
-00009a20: 653a 2032 3031 362d 3034 2d31 3329 0a3d  e: 2016-04-13).=
-00009a30: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00009a40: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00009a50: 3d3d 3d3d 3d3d 0a44 6570 7265 6361 7469  ======.Deprecati
-00009a60: 6f6e 204e 6f74 6963 650a 2d2d 2d2d 2d2d  on Notice.------
-00009a70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d 2067  ------------.- g
-00009a80: 7375 7469 6c20 7375 7070 6f72 7420 666f  sutil support fo
-00009a90: 7220 5079 7468 6f6e 2032 2e36 2069 7320  r Python 2.6 is 
-00009aa0: 6465 7072 6563 6174 6564 2c20 616e 6420  deprecated, and 
-00009ab0: 6773 7574 696c 2077 696c 6c20 7374 6f70  gsutil will stop
-00009ac0: 0a20 2073 7570 706f 7274 696e 6720 5079  .  supporting Py
-00009ad0: 7468 6f6e 2032 2e36 206f 6e20 5365 7074  thon 2.6 on Sept
-00009ae0: 656d 6265 7220 312c 2032 3031 362e 2054  ember 1, 2016. T
-00009af0: 6869 7320 6368 616e 6765 2069 730a 2020  his change is.  
-00009b00: 6265 696e 6720 6d61 6465 2066 6f72 2074  being made for t
-00009b10: 776f 2072 6561 736f 6e73 2e20 4669 7273  wo reasons. Firs
-00009b20: 742c 2050 7974 686f 6e20 322e 3620 7374  t, Python 2.6 st
-00009b30: 6f70 7065 640a 2020 7265 6365 6976 696e  opped.  receivin
-00009b40: 6720 7365 6375 7269 7479 2070 6174 6368  g security patch
-00009b50: 6573 2073 696e 6365 204f 6374 6f62 6572  es since October
-00009b60: 2032 3031 332e 2053 6563 6f6e 642c 0a20   2013. Second,. 
-00009b70: 2072 656d 6f76 696e 6720 5079 7468 6f6e   removing Python
-00009b80: 2032 2e36 2073 7570 706f 7274 2077 696c   2.6 support wil
-00009b90: 6c20 656e 6162 6c65 2067 7375 7469 6c20  l enable gsutil 
-00009ba0: 746f 2061 6464 2073 7570 706f 7274 0a20  to add support. 
-00009bb0: 2066 6f72 2050 7974 686f 6e20 332e 2056   for Python 3. V
-00009bc0: 6572 7369 6f6e 7320 6f66 2067 7375 7469  ersions of gsuti
-00009bd0: 6c20 7265 6c65 6173 6564 2070 7269 6f72  l released prior
-00009be0: 2074 6f20 5365 7074 656d 6265 7220 312c   to September 1,
-00009bf0: 0a20 2032 3031 3620 7769 6c6c 2063 6f6e  .  2016 will con
-00009c00: 7469 6e75 6520 746f 2077 6f72 6b20 7769  tinue to work wi
-00009c10: 7468 2050 7974 686f 6e20 322e 362e 2048  th Python 2.6. H
-00009c20: 6f77 6576 6572 2c20 6275 6720 6669 7865  owever, bug fixe
-00009c30: 730a 2020 7769 6c6c 206e 6f74 2062 6520  s.  will not be 
-00009c40: 6d61 6465 2072 6574 726f 6163 7469 7665  made retroactive
-00009c50: 6c79 2074 6f20 6f6c 6465 7220 6773 7574  ly to older gsut
-00009c60: 696c 2076 6572 7369 6f6e 732c 2061 6e64  il versions, and
-00009c70: 2075 7365 7273 0a20 2072 6570 6f72 7469   users.  reporti
-00009c80: 6e67 2062 7567 7320 7769 6c6c 2062 6520  ng bugs will be 
-00009c90: 6173 6b65 6420 746f 2075 7067 7261 6465  asked to upgrade
-00009ca0: 2074 6f20 7468 6520 6375 7272 656e 7420   to the current 
-00009cb0: 6773 7574 696c 0a20 2076 6572 7369 6f6e  gsutil.  version
-00009cc0: 2028 7573 696e 6720 5079 7468 6f6e 2032   (using Python 2
-00009cd0: 2e37 2c20 6f72 2c20 7768 656e 2069 7420  .7, or, when it 
-00009ce0: 6973 2073 7570 706f 7274 6564 2c20 5079  is supported, Py
-00009cf0: 7468 6f6e 2033 292e 0a0a 4f74 6865 7220  thon 3)...Other 
-00009d00: 4368 616e 6765 730a 2d2d 2d2d 2d2d 2d2d  Changes.--------
-00009d10: 2d2d 2d2d 2d0a 2d20 496d 7072 6f76 6564  -----.- Improved
-00009d20: 2064 6f63 756d 656e 7461 7469 6f6e 2061   documentation a
-00009d30: 726f 756e 6420 436c 6f75 6420 5344 4b20  round Cloud SDK 
-00009d40: 2867 636c 6f75 6429 2069 6e73 7461 6c6c  (gcloud) install
-00009d50: 732e 0a0a 5265 6c65 6173 6520 342e 3138  s...Release 4.18
-00009d60: 2028 7265 6c65 6173 6520 6461 7465 3a20   (release date: 
-00009d70: 3230 3136 2d30 332d 3232 290a 3d3d 3d3d  2016-03-22).====
-00009d80: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00009d90: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00009da0: 3d3d 3d0a 4e65 7720 4665 6174 7572 6573  ===.New Features
-00009db0: 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 2d20  .------------.- 
-00009dc0: 6773 7574 696c 206e 6f77 2073 7570 706f  gsutil now suppo
-00009dd0: 7274 7320 7468 6520 6265 7461 2043 7573  rts the beta Cus
-00009de0: 746f 6d65 722d 5375 7070 6c69 6564 2045  tomer-Supplied E
-00009df0: 6e63 7279 7074 696f 6e20 4b65 7973 0a20  ncryption Keys. 
-00009e00: 2066 6561 7475 7265 7320 666f 7220 476f   features for Go
-00009e10: 6f67 6c65 2043 6c6f 7564 2053 746f 7261  ogle Cloud Stora
-00009e20: 6765 206f 626a 6563 7473 2c20 7669 6120  ge objects, via 
-00009e30: 7468 6520 4a53 4f4e 2041 5049 2e0a 2020  the JSON API..  
-00009e40: 5468 6973 2066 6561 7475 7265 2061 6c6c  This feature all
-00009e50: 6f77 7320 796f 7520 746f 2065 6e63 7279  ows you to encry
-00009e60: 7074 2079 6f75 7220 6461 7461 2077 6974  pt your data wit
-00009e70: 6820 6b65 7973 2074 6861 740a 2020 6172  h keys that.  ar
-00009e80: 6520 6e6f 7420 7065 726d 616e 656e 746c  e not permanentl
-00009e90: 7920 7374 6f72 6564 206f 6e20 476f 6f67  y stored on Goog
-00009ea0: 6c65 2773 2073 6572 7665 7273 2e20 596f  le's servers. Yo
-00009eb0: 7520 6361 6e20 7072 6f76 6964 650a 2020  u can provide.  
-00009ec0: 656e 6372 7970 7469 6f6e 2061 6e64 2064  encryption and d
-00009ed0: 6563 7279 7074 696f 6e20 6b65 7973 2069  ecryption keys i
-00009ee0: 6e20 796f 7572 202e 626f 746f 2063 6f6e  n your .boto con
-00009ef0: 6669 6775 7261 7469 6f6e 2066 696c 652e  figuration file.
-00009f00: 0a20 2041 7320 6c6f 6e67 2061 7320 616e  .  As long as an
-00009f10: 2065 6e63 7279 7074 696f 6e20 6b65 7920   encryption key 
-00009f20: 6973 2073 7065 6369 6669 6564 2069 6e20  is specified in 
-00009f30: 7468 6520 636f 6e66 6967 7572 6174 696f  the configuratio
-00009f40: 6e20 6669 6c65 2c0a 2020 616c 6c20 6773  n file,.  all gs
-00009f50: 3a2f 2f20 6f62 6a65 6374 7320 7468 6174  :// objects that
-00009f60: 2067 7375 7469 6c20 6372 6561 7465 7320   gsutil creates 
-00009f70: 7769 6c6c 2062 6520 7374 6f72 6564 2065  will be stored e
-00009f80: 6e63 7279 7074 6564 0a20 2077 6974 6820  ncrypted.  with 
-00009f90: 7468 6174 206b 6579 2c20 616e 6420 616c  that key, and al
-00009fa0: 6c20 656e 6372 7970 7465 6420 6f62 6a65  l encrypted obje
-00009fb0: 6374 7320 7769 6c6c 2062 6520 6465 6372  cts will be decr
-00009fc0: 7970 7465 6420 7768 656e 0a20 2064 6f77  ypted when.  dow
-00009fd0: 6e6c 6f61 6465 642e 2053 6565 2022 6773  nloaded. See "gs
-00009fe0: 7574 696c 2068 656c 7020 6373 656b 2220  util help csek" 
-00009ff0: 666f 7220 6d6f 7265 2069 6e66 6f72 6d61  for more informa
-0000a000: 7469 6f6e 2e0a 2d20 4164 6465 6420 7468  tion..- Added th
-0000a010: 6520 7265 7772 6974 6520 636f 6d6d 616e  e rewrite comman
-0000a020: 642c 2077 6869 6368 2063 616e 2062 6520  d, which can be 
-0000a030: 7573 6564 2074 6f20 7065 7266 6f72 6d0a  used to perform.
-0000a040: 2020 6b65 7920 726f 7461 7469 6f6e 2066    key rotation f
-0000a050: 6f72 206f 626a 6563 7473 2065 6e63 7279  or objects encry
-0000a060: 7074 6564 2077 6974 6820 6375 7374 6f6d  pted with custom
-0000a070: 6572 2d73 7570 706c 6965 640a 2020 656e  er-supplied.  en
-0000a080: 6372 7970 7469 6f6e 206b 6579 732e 0a0a  cryption keys...
-0000a090: 4275 6720 4669 7865 730a 2d2d 2d2d 2d2d  Bug Fixes.------
-0000a0a0: 2d2d 2d0a 2d20 4669 7865 6420 616e 2041  ---.- Fixed an A
-0000a0b0: 7474 7269 6275 7465 4572 726f 7220 7468  ttributeError th
-0000a0c0: 6174 2063 6f75 6c64 206f 6363 7572 2077  at could occur w
-0000a0d0: 6865 6e20 7275 6e6e 696e 6720 696e 2064  hen running in d
-0000a0e0: 6562 7567 206d 6f64 650a 2020 666f 7220  ebug mode.  for 
-0000a0f0: 6f70 6572 6174 696f 6e73 2069 6e76 6f6c  operations invol
-0000a100: 7669 6e67 2077 696c 6463 6172 6473 2c20  ving wildcards, 
-0000a110: 7265 6375 7273 696f 6e2c 206f 7220 6c69  recursion, or li
-0000a120: 7374 696e 672e 0a2d 2046 6978 6564 2061  sting..- Fixed a
-0000a130: 6e20 4172 6775 6d65 6e74 4578 6365 7074  n ArgumentExcept
-0000a140: 696f 6e20 7468 6174 2063 6f75 6c64 206f  ion that could o
-0000a150: 6363 7572 2077 6865 6e20 7573 696e 6720  ccur when using 
-0000a160: 7065 7266 6469 6167 0a20 2077 7269 7465  perfdiag.  write
-0000a170: 2074 6872 6f75 6768 7075 7420 7465 7374   throughput test
-0000a180: 7320 7769 7468 2070 6172 616c 6c65 6c69  s with paralleli
-0000a190: 736d 2e0a 2d20 5265 7374 6f72 6564 2064  sm..- Restored d
-0000a1a0: 6562 7567 206d 6f64 6520 6f75 7470 7574  ebug mode output
-0000a1b0: 2066 6f72 2072 6573 756d 6162 6c65 2075   for resumable u
-0000a1c0: 706c 6f61 6473 2075 7369 6e67 2074 6865  ploads using the
-0000a1d0: 204a 534f 4e20 4150 492e 0a2d 2046 6978   JSON API..- Fix
-0000a1e0: 6564 2061 2062 7567 2077 6865 7265 2072  ed a bug where r
-0000a1f0: 6d20 2d72 206f 6e20 6120 6275 636b 6574  m -r on a bucket
-0000a200: 2073 7562 6469 7265 6374 6f72 7920 776f   subdirectory wo
-0000a210: 756c 6420 6578 6974 2077 6974 680a 2020  uld exit with.  
-0000a220: 636f 6465 2031 2065 7665 6e20 7468 6f75  code 1 even thou
-0000a230: 6768 2069 7420 7375 6363 6565 6465 642e  gh it succeeded.
-0000a240: 0a2d 2046 6978 6564 2061 2062 7567 2077  .- Fixed a bug w
-0000a250: 6865 7265 2063 7020 2d52 206f 6620 6120  here cp -R of a 
-0000a260: 7369 6e67 6c65 2066 696c 6520 7769 7468  single file with
-0000a270: 2061 2064 6573 7469 6e61 7469 6f6e 206f   a destination o
-0000a280: 7468 6572 0a20 2074 6861 6e20 7468 6520  ther.  than the 
-0000a290: 6275 636b 6574 2072 6f6f 7420 776f 756c  bucket root woul
-0000a2a0: 6420 636f 7079 2074 6f20 7468 6520 6275  d copy to the bu
-0000a2b0: 636b 6574 2072 6f6f 742e 0a2d 2046 6978  cket root..- Fix
-0000a2c0: 6564 2061 2062 7567 2077 6865 6e20 7573  ed a bug when us
-0000a2d0: 696e 6720 6120 7369 6e67 6c65 2070 726f  ing a single pro
-0000a2e0: 6365 7373 2077 6974 6820 6d75 6c74 6970  cess with multip
-0000a2f0: 6c65 2074 6872 6561 6473 0a20 2077 6865  le threads.  whe
-0000a300: 7265 2043 5452 4c2d 4320 776f 756c 6420  re CTRL-C would 
-0000a310: 6e6f 7420 7374 6f70 2074 6865 2070 726f  not stop the pro
-0000a320: 6365 7373 2075 6e74 696c 206f 6e65 2074  cess until one t
-0000a330: 6872 6561 6420 636f 6d70 6c65 7465 640a  hread completed.
-0000a340: 2020 6120 7461 736b 2e0a 0a4f 7468 6572    a task...Other
-0000a350: 2043 6861 6e67 6573 0a2d 2d2d 2d2d 2d2d   Changes.-------
-0000a360: 2d2d 2d2d 2d2d 0a2d 2049 6d70 726f 7665  ------.- Improve
-0000a370: 6420 6578 6365 7074 696f 6e20 6c6f 6767  d exception logg
-0000a380: 696e 6720 696e 2064 6562 7567 206d 6f64  ing in debug mod
-0000a390: 652e 0a2d 2041 6464 6564 2022 6361 6368  e..- Added "cach
-0000a3a0: 652d 636f 6e74 726f 6c3a 206e 6f2d 7472  e-control: no-tr
-0000a3b0: 616e 7366 6f72 6d22 2074 6f20 616c 6c20  ansform" to all 
-0000a3c0: 7570 6c6f 6164 730a 2020 7573 696e 6720  uploads.  using 
-0000a3d0: 636f 6d70 7265 7373 696f 6e20 2822 6773  compression ("gs
-0000a3e0: 7574 696c 2063 7020 2d7a 2220 6f72 2022  util cp -z" or "
-0000a3f0: 6773 7574 696c 2063 7020 2d5a 2229 2074  gsutil cp -Z") t
-0000a400: 6f20 656e 7375 7265 2074 6861 740a 2020  o ensure that.  
-0000a410: 646f 7562 6c79 2d63 6f6d 7072 6573 7365  doubly-compresse
-0000a420: 6420 6f62 6a65 6374 7320 6361 6e20 6265  d objects can be
-0000a430: 2064 6f77 6e6c 6f61 6465 6420 7769 7468   downloaded with
-0000a440: 2064 6174 6120 696e 7465 6772 6974 790a   data integrity.
-0000a450: 2020 6368 6563 6b69 6e67 2e0a 2d20 5265    checking..- Re
-0000a460: 6475 6365 6420 7468 6520 6465 6661 756c  duced the defaul
-0000a470: 7420 6e75 6d62 6572 206f 6620 7468 7265  t number of thre
-0000a480: 6164 7320 7065 722d 7072 6f63 6573 7320  ads per-process 
-0000a490: 6f6e 204c 696e 7578 2073 7973 7465 6d73  on Linux systems
-0000a4a0: 0a20 2066 726f 6d20 3130 2074 6f20 352e  .  from 10 to 5.
-0000a4b0: 0a2d 2044 6f63 756d 656e 7465 6420 6164  .- Documented ad
-0000a4c0: 6469 7469 6f6e 616c 204f 5320 5820 556e  ditional OS X Un
-0000a4d0: 6963 6f64 6520 6c69 6d69 7461 7469 6f6e  icode limitation
-0000a4e0: 732e 0a2d 2054 6865 2063 6f6e 6669 6720  s..- The config 
-0000a4f0: 636f 6d6d 616e 6420 6e6f 7720 696e 636c  command now incl
-0000a500: 7564 6573 2074 6865 2063 7573 746f 6d20  udes the custom 
-0000a510: 636c 6965 6e74 2049 4420 616e 6420 7365  client ID and se
-0000a520: 6372 6574 2069 6e20 7468 650a 2020 636f  cret in the.  co
-0000a530: 6e66 6967 7572 6174 696f 6e20 6669 6c65  nfiguration file
-0000a540: 206f 7574 7075 7420 6966 2074 6865 2063   output if the c
-0000a550: 6f6d 6d61 6e64 2069 7320 7275 6e20 7769  ommand is run wi
-0000a560: 7468 2074 686f 7365 2076 616c 7565 730a  th those values.
-0000a570: 2020 636f 6e66 6967 7572 6564 2e0a 0a52    configured...R
-0000a580: 656c 6561 7365 2034 2e31 3720 2872 656c  elease 4.17 (rel
-0000a590: 6561 7365 2064 6174 653a 2032 3031 362d  ease date: 2016-
-0000a5a0: 3032 2d31 3829 0a3d 3d3d 3d3d 3d3d 3d3d  02-18).=========
-0000a5b0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0000a5c0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 0a42  ==============.B
-0000a5d0: 7567 2046 6978 6573 0a2d 2d2d 2d2d 2d2d  ug Fixes.-------
-0000a5e0: 2d2d 0a2d 2046 6978 6564 2061 6e20 6f61  --.- Fixed an oa
-0000a5f0: 7574 6832 636c 6965 6e74 2064 6570 656e  uth2client depen
-0000a600: 6465 6e63 7920 6272 6561 6b20 7468 6174  dency break that
-0000a610: 2063 6175 7365 640a 2020 7468 6520 5079   caused.  the Py
-0000a620: 5069 2064 6973 7472 6962 7574 696f 6e20  Pi distribution 
-0000a630: 6f66 2067 7375 7469 6c20 746f 2061 6c6c  of gsutil to all
-0000a640: 6f77 206f 6175 7468 3263 6c69 656e 7420  ow oauth2client 
-0000a650: 322e 302e 302c 0a20 2063 6175 7369 6e67  2.0.0,.  causing
-0000a660: 2061 6c6c 2063 6f6d 6d61 6e64 7320 746f   all commands to
-0000a670: 2066 6169 6c20 7769 7468 2061 6e20 496d   fail with an Im
-0000a680: 706f 7274 4572 726f 722e 0a2d 2046 6978  portError..- Fix
-0000a690: 6564 2061 2062 7567 2077 6865 7265 2067  ed a bug where g
-0000a6a0: 7375 7469 6c20 636f 756c 6420 6c65 616b  sutil could leak
-0000a6b0: 206d 756c 7469 7072 6f63 6573 7369 6e67   multiprocessing
-0000a6c0: 2e4d 616e 6167 6572 0a20 2070 726f 6365  .Manager.  proce
-0000a6d0: 7373 6573 2077 6865 6e20 7465 726d 696e  sses when termin
-0000a6e0: 6174 696e 6720 7369 676e 616c 7320 2873  ating signals (s
-0000a6f0: 7563 6820 6173 2043 5452 4c2d 4329 2077  uch as CTRL-C) w
-0000a700: 6572 6520 7365 6e74 2e0a 2d20 4669 7865  ere sent..- Fixe
-0000a710: 6420 6120 6275 6720 7768 6572 6520 7468  d a bug where th
-0000a720: 6520 2d71 206f 7074 696f 6e20 6469 6420  e -q option did 
-0000a730: 6e6f 7420 7375 7070 7265 7373 206f 7574  not suppress out
-0000a740: 7075 740a 2020 6672 6f6d 2074 6865 2073  put.  from the s
-0000a750: 7461 7420 636f 6d6d 616e 642e 0a2d 2046  tat command..- F
-0000a760: 6978 6564 2061 2062 7567 2077 6865 7265  ixed a bug where
-0000a770: 2064 656c 6574 696e 6720 616e 2065 6d70   deleting an emp
-0000a780: 7479 2062 7563 6b65 7420 7769 7468 2072  ty bucket with r
-0000a790: 6d20 2d72 0a20 2077 6f75 6c64 2072 6574  m -r.  would ret
-0000a7a0: 7572 6e20 6120 6e6f 6e2d 7a65 726f 2065  urn a non-zero e
-0000a7b0: 7869 7420 636f 6465 2065 7665 6e20 7768  xit code even wh
-0000a7c0: 656e 2073 7563 6365 7373 6675 6c2e 0a2d  en successful..-
-0000a7d0: 2046 6978 6564 2055 6e69 636f 6465 456e   Fixed UnicodeEn
-0000a7e0: 636f 6465 4572 726f 7273 2074 6861 7420  codeErrors that 
-0000a7f0: 636f 756c 6420 6f63 6375 7220 7768 656e  could occur when
-0000a800: 2075 7369 6e67 2074 6865 2064 750a 2020   using the du.  
-0000a810: 636f 6d6d 616e 6420 7769 7468 2061 2070  command with a p
-0000a820: 6970 6520 6f6e 206f 626a 6563 7473 2063  ipe on objects c
-0000a830: 6f6e 7461 696e 696e 6720 6e6f 6e2d 4153  ontaining non-AS
-0000a840: 4349 4920 6368 6172 6163 7465 7273 2e0a  CII characters..
-0000a850: 0a4f 7468 6572 2043 6861 6e67 6573 0a2d  .Other Changes.-
-0000a860: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d 204d  ------------.- M
-0000a870: 616e 7920 646f 6375 6d65 6e74 6174 696f  any documentatio
-0000a880: 6e20 696d 7072 6f76 656d 656e 7473 2061  n improvements a
-0000a890: 6e64 2063 6c61 7269 6669 6361 7469 6f6e  nd clarification
-0000a8a0: 732e 0a0a 5265 6c65 6173 6520 342e 3136  s...Release 4.16
-0000a8b0: 2028 7265 6c65 6173 6520 6461 7465 3a20   (release date: 
-0000a8c0: 3230 3135 2d31 312d 3235 290a 3d3d 3d3d  2015-11-25).====
-0000a8d0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0000a8e0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0000a8f0: 3d3d 3d0a 4e65 7720 4665 6174 7572 6573  ===.New Features
-0000a900: 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 2d20  .------------.- 
-0000a910: 5468 6520 6c73 2063 6f6d 6d61 6e64 206e  The ls command n
-0000a920: 6f77 2073 7570 706f 7274 7320 6120 2d64  ow supports a -d
-0000a930: 206f 7074 696f 6e20 2873 696d 696c 6172   option (similar
-0000a940: 2074 6f20 556e 6978 206c 7320 2d64 290a   to Unix ls -d).
-0000a950: 2020 666f 7220 7375 7070 7265 7373 696e    for suppressin
-0000a960: 6720 7265 6375 7273 696f 6e20 696e 746f  g recursion into
-0000a970: 2073 7562 6469 7265 6374 6f72 6965 732e   subdirectories.
-0000a980: 0a2d 2054 6865 2073 6967 6e75 726c 2063  .- The signurl c
-0000a990: 6f6d 6d61 6e64 206e 6f77 2061 6363 6570  ommand now accep
-0000a9a0: 7473 204a 534f 4e2d 666f 726d 6174 2070  ts JSON-format p
-0000a9b0: 7269 7661 7465 206b 6579 2066 696c 6573  rivate key files
-0000a9c0: 0a20 2067 656e 6572 6174 6564 2062 7920  .  generated by 
-0000a9d0: 7468 6520 476f 6f67 6c65 2044 6576 656c  the Google Devel
-0000a9e0: 6f70 6572 7320 436f 6e73 6f6c 652e 0a2d  opers Console..-
-0000a9f0: 2054 6865 2073 6967 6e75 726c 2063 6f6d   The signurl com
-0000aa00: 6d61 6e64 206e 6f77 2073 7570 706f 7274  mand now support
-0000aa10: 7320 6765 6e65 7261 7469 6e67 2072 6573  s generating res
-0000aa20: 756d 6162 6c65 2075 706c 6f61 640a 2020  umable upload.  
-0000aa30: 7374 6172 7420 5552 4c73 2e0a 2d20 5468  start URLs..- Th
-0000aa40: 6520 6370 2063 6f6d 6d61 6e64 206e 6f77  e cp command now
-0000aa50: 2073 7570 706f 7274 7320 6120 2d5a 206f   supports a -Z o
-0000aa60: 7074 696f 6e20 7768 6963 6820 7769 6c6c  ption which will
-0000aa70: 2067 7a69 702d 636f 6d70 7265 7373 2061   gzip-compress a
-0000aa80: 6c6c 0a20 2066 696c 6573 2028 7265 6761  ll.  files (rega
-0000aa90: 7264 6c65 7373 206f 6620 7468 6569 7220  rdless of their 
-0000aaa0: 6578 7465 6e73 696f 6e73 2920 6173 2074  extensions) as t
-0000aab0: 6865 7920 6172 6520 7570 6c6f 6164 6564  hey are uploaded
-0000aac0: 2e0a 0a42 7567 2046 6978 6573 0a2d 2d2d  ...Bug Fixes.---
-0000aad0: 2d2d 2d2d 2d2d 0a2d 2046 6978 6564 2061  ------.- Fixed a
-0000aae0: 2062 7567 2077 6865 7265 2061 6e20 6578   bug where an ex
-0000aaf0: 7069 7265 6420 4f41 7574 6832 2074 6f6b  pired OAuth2 tok
-0000ab00: 656e 2063 6f75 6c64 2069 6e63 6c75 6465  en could include
-0000ab10: 2074 6865 204f 4175 7468 320a 2020 746f   the OAuth2.  to
-0000ab20: 6b65 6e20 7265 7370 6f6e 7365 2061 7320  ken response as 
-0000ab30: 7061 7274 206f 6620 7468 6520 646f 776e  part of the down
-0000ab40: 6c6f 6164 2c20 6361 7573 696e 6720 6974  load, causing it
-0000ab50: 2074 6f20 6661 696c 2065 6e64 2d74 6f2d   to fail end-to-
-0000ab60: 656e 640a 2020 696e 7465 6772 6974 7920  end.  integrity 
-0000ab70: 6368 6563 6b73 2061 6e64 2062 6520 6465  checks and be de
-0000ab80: 6c65 7465 642e 0a2d 2046 6978 6564 2061  leted..- Fixed a
-0000ab90: 2062 7567 2077 6865 7265 2073 7472 6561   bug where strea
-0000aba0: 6d69 6e67 2064 6f77 6e6c 6f61 6473 2075  ming downloads u
-0000abb0: 7369 6e67 2074 6865 204a 534f 4e20 4150  sing the JSON AP
-0000abc0: 4920 776f 756c 6420 7265 7374 6172 740a  I would restart.
-0000abd0: 2020 6672 6f6d 2074 6865 2062 6567 696e    from the begin
-0000abe0: 6e69 6e67 206f 6620 7468 6520 7374 7265  ning of the stre
-0000abf0: 616d 2069 6620 7468 6520 636f 6e6e 6563  am if the connec
-0000ac00: 7469 6f6e 2062 726f 6b65 2e20 5468 6973  tion broke. This
-0000ac10: 2062 7567 0a20 2063 6f75 6c64 2061 6c73   bug.  could als
-0000ac20: 6f20 6361 7573 6520 6461 7461 2063 6f72  o cause data cor
-0000ac30: 7275 7074 696f 6e20 696e 2073 7472 6561  ruption in strea
-0000ac40: 6d69 6e67 2064 6f77 6e6c 6f61 6473 2c20  ming downloads, 
-0000ac50: 6265 6361 7573 650a 2020 7374 7265 616d  because.  stream
-0000ac60: 696e 6720 646f 776e 6c6f 6164 7320 6172  ing downloads ar
-0000ac70: 6520 6e6f 7420 7661 6c69 6461 7465 6420  e not validated 
-0000ac80: 7769 7468 2065 6e64 2d74 6f2d 656e 6420  with end-to-end 
-0000ac90: 696e 7465 6772 6974 7920 6368 6563 6b73  integrity checks
-0000aca0: 2e0a 2d20 4669 7865 6420 616e 2069 6e74  ..- Fixed an int
-0000acb0: 6572 6e61 6c5f 6661 696c 7572 6520 6578  ernal_failure ex
-0000acc0: 6365 7074 696f 6e20 7468 6174 2063 6f75  ception that cou
-0000acd0: 6c64 206f 6363 7572 2077 6865 6e20 616e  ld occur when an
-0000ace0: 204f 4175 7468 320a 2020 746f 6b65 6e20   OAuth2.  token 
-0000acf0: 7265 6672 6573 6820 7265 7475 726e 6564  refresh returned
-0000ad00: 2061 2074 7261 6e73 6965 6e74 2065 7272   a transient err
-0000ad10: 6f72 2c20 7375 6368 2061 7320 616e 2048  or, such as an H
-0000ad20: 5454 5020 3530 332e 0a2d 2046 6978 6564  TTP 503..- Fixed
-0000ad30: 2061 2072 6573 6f75 7263 6520 6465 6164   a resource dead
-0000ad40: 6c6f 636b 2065 7863 6570 7469 6f6e 2069  lock exception i
-0000ad50: 6e20 6f61 7574 6832 636c 6965 6e74 2074  n oauth2client t
-0000ad60: 6861 7420 636f 756c 6420 6361 7573 650a  hat could cause.
-0000ad70: 2020 736c 6963 6564 2064 6f77 6e6c 6f61    sliced downloa
-0000ad80: 6473 2074 6f20 6861 6e67 2e0a 2d20 4669  ds to hang..- Fi
-0000ad90: 7865 6420 6120 6275 6720 7768 6572 6520  xed a bug where 
-0000ada0: 6370 2f72 7379 6e63 202d 7020 776f 756c  cp/rsync -p woul
-0000adb0: 6420 7573 6520 7468 6520 6465 6661 756c  d use the defaul
-0000adc0: 7420 6f62 6a65 6374 0a20 2041 434c 2066  t object.  ACL f
-0000add0: 6f72 2074 6865 2064 6573 7469 6e61 7469  or the destinati
-0000ade0: 6f6e 206f 626a 6563 7420 6966 2074 6865  on object if the
-0000adf0: 2063 616c 6c65 7220 6469 6420 6e6f 7420   caller did not 
-0000ae00: 6861 7665 204f 574e 4552 0a20 2070 6572  have OWNER.  per
-0000ae10: 6d69 7373 696f 6e20 6f6e 2074 6865 2073  mission on the s
-0000ae20: 6f75 7263 6520 6f62 6a65 6374 2e0a 2d20  ource object..- 
-0000ae30: 4669 7865 6420 6120 706f 7465 6e74 6961  Fixed a potentia
-0000ae40: 6c20 7261 6365 2063 6f6e 6469 7469 6f6e  l race condition
-0000ae50: 2077 6865 6e20 7573 696e 6720 7065 7266   when using perf
-0000ae60: 6469 6167 2077 6974 6820 6d75 6c74 6970  diag with multip
-0000ae70: 6c65 0a20 2074 6872 6561 6473 2061 6e64  le.  threads and
-0000ae80: 2f6f 7220 7072 6f63 6573 7365 732e 0a2d  /or processes..-
-0000ae90: 2046 6978 6564 2061 6e20 4174 7472 6962   Fixed an Attrib
-0000aea0: 7574 6545 7272 6f72 2074 6861 7420 636f  uteError that co
-0000aeb0: 756c 6420 6f63 6375 7220 7768 656e 2075  uld occur when u
-0000aec0: 7369 6e67 2061 636c 2063 6820 2d70 2e0a  sing acl ch -p..
-0000aed0: 2d20 4669 7865 6420 6120 6275 6720 7768  - Fixed a bug wh
-0000aee0: 6572 6520 7468 6520 6d76 2063 6f6d 6d61  ere the mv comma
-0000aef0: 6e64 2064 6964 206e 6f74 2070 726f 7065  nd did not prope
-0000af00: 726c 7920 6861 6e64 6c65 2074 6865 2067  rly handle the g
-0000af10: 6c6f 6261 6c0a 2020 2d6d 2066 6c61 672e  lobal.  -m flag.
-0000af20: 0a2d 2046 6978 6564 2061 2055 6e69 636f  .- Fixed a Unico
-0000af30: 6465 456e 636f 6465 4572 726f 7220 7468  deEncodeError th
-0000af40: 6174 2063 6f75 6c64 206f 6363 7572 2077  at could occur w
-0000af50: 6865 6e20 6974 6572 6174 696e 6720 6f76  hen iterating ov
-0000af60: 6572 0a20 206e 6f6e 2d55 6e69 636f 6465  er.  non-Unicode
-0000af70: 2d6e 616d 6564 2064 6972 6563 746f 7269  -named directori
-0000af80: 6573 2e0a 2d20 4669 7865 6420 6120 6275  es..- Fixed a bu
-0000af90: 6720 7768 6572 6520 616e 206f 626a 6563  g where an objec
-0000afa0: 7420 6e61 6d65 2069 6e63 6c75 6469 6e67  t name including
-0000afb0: 2061 2077 696c 6463 6172 6420 636f 756c   a wildcard coul
-0000afc0: 6420 6361 7573 650a 2020 616e 2069 6e66  d cause.  an inf
-0000afd0: 696e 6974 6520 6c6f 6f70 2064 7572 696e  inite loop durin
-0000afe0: 6720 6120 7265 6375 7273 6976 6520 6c69  g a recursive li
-0000aff0: 7374 696e 672e 0a2d 2046 6978 6564 2061  sting..- Fixed a
-0000b000: 2055 6e69 636f 6465 2062 7567 2077 6865   Unicode bug whe
-0000b010: 6e20 7573 696e 6720 6370 206f 7220 6c73  n using cp or ls
-0000b020: 206f 6e20 5769 6e64 6f77 7320 6f6e 2061   on Windows on a
-0000b030: 6e20 6f62 6a65 6374 0a20 2063 6f6e 7461  n object.  conta
-0000b040: 696e 696e 6720 6365 7274 6169 6e20 556e  ining certain Un
-0000b050: 6963 6f64 6520 6368 6172 6163 7465 7273  icode characters
-0000b060: 2e20 486f 7765 7665 722c 2065 7665 6e20  . However, even 
-0000b070: 7769 7468 2074 6869 7320 6669 780a 2020  with this fix.  
-0000b080: 556e 6963 6f64 6520 6361 6e20 7374 696c  Unicode can stil
-0000b090: 6c20 6265 2070 726f 626c 656d 6174 6963  l be problematic
-0000b0a0: 206f 6e20 5769 6e64 6f77 733b 2063 6f6e   on Windows; con
-0000b0b0: 7375 6c74 0a20 2022 6773 7574 696c 2068  sult.  "gsutil h
-0000b0c0: 656c 7020 656e 636f 6469 6e67 2220 666f  elp encoding" fo
-0000b0d0: 7220 6465 7461 696c 732e 0a2d 2046 6978  r details..- Fix
-0000b0e0: 6564 2061 2057 696e 646f 7773 2070 6572  ed a Windows per
-0000b0f0: 666f 726d 616e 6365 2069 7373 7565 2064  formance issue d
-0000b100: 7572 696e 6720 7273 796e 6320 6469 6666  uring rsync diff
-0000b110: 2067 656e 6572 6174 696f 6e2e 0a2d 2046   generation..- F
-0000b120: 6978 6564 2061 2062 7567 2069 6e20 7468  ixed a bug in th
-0000b130: 6520 6f72 6465 7269 6e67 206f 6620 6c73  e ordering of ls
-0000b140: 206f 7574 7075 742e 0a2d 2046 6978 6564   output..- Fixed
-0000b150: 2061 2062 7567 2077 6865 7265 2057 696e   a bug where Win
-0000b160: 646f 7773 2068 656c 7020 6f75 7470 7574  dows help output
-0000b170: 2069 6e63 6c75 6465 6420 414e 5349 2065   included ANSI e
-0000b180: 7363 6170 6520 636f 6465 732e 0a2d 2046  scape codes..- F
-0000b190: 6978 6564 2061 2063 6f6d 7061 7469 6269  ixed a compatibi
-0000b1a0: 6c69 7479 2062 7567 2077 6974 6820 7065  lity bug with pe
-0000b1b0: 7266 6469 6167 202d 6920 7769 7468 2069  rfdiag -i with i
-0000b1c0: 6e70 7574 2067 656e 6572 6174 6564 2070  nput generated p
-0000b1d0: 7269 6f72 0a20 2074 6f20 6773 7574 696c  rior.  to gsutil
-0000b1e0: 2034 2e31 342e 0a0a 4f74 6865 7220 4368   4.14...Other Ch
-0000b1f0: 616e 6765 730a 2d2d 2d2d 2d2d 2d2d 2d2d  anges.----------
-0000b200: 2d2d 2d0a 2d20 5365 7665 7261 6c20 646f  ---.- Several do
-0000b210: 6375 6d65 6e74 6174 696f 6e20 7570 6461  cumentation upda
-0000b220: 7465 732c 2069 6e63 6c75 6469 6e67 2072  tes, including r
-0000b230: 7379 6e63 2065 7863 6c75 7369 6f6e 2070  sync exclusion p
-0000b240: 6174 7465 726e 206d 6174 6368 696e 672c  attern matching,
-0000b250: 0a20 2073 6572 7669 6365 2061 6363 6f75  .  service accou
-0000b260: 6e74 2063 6f6e 6669 6775 7261 7469 6f6e  nt configuration
-0000b270: 2c20 6370 2f72 7379 6e63 2072 6563 7572  , cp/rsync recur
-0000b280: 7369 6f6e 2066 6c61 6773 2c20 6d75 6c74  sion flags, mult
-0000b290: 692d 6f62 6a65 6374 2072 6d2c 0a20 2076  i-object rm,.  v
-0000b2a0: 6572 7369 6f6e 6564 2055 524c 2072 656d  ersioned URL rem
-0000b2b0: 6f76 616c 2c20 6465 7374 696e 6174 696f  oval, destinatio
-0000b2c0: 6e20 7375 6264 6972 6563 746f 7279 206e  n subdirectory n
-0000b2d0: 616d 696e 672c 2077 696c 6463 6172 6420  aming, wildcard 
-0000b2e0: 6265 6861 7669 6f72 2c0a 2020 7265 6769  behavior,.  regi
-0000b2f0: 6f6e 616c 2062 7563 6b65 7473 2c20 616e  onal buckets, an
-0000b300: 6420 7333 2063 6f6e 6e65 6374 696f 6e20  d s3 connection 
-0000b310: 7265 7365 742e 0a2d 2049 6d70 726f 7665  reset..- Improve
-0000b320: 6d65 6e74 7320 746f 2055 6e69 636f 6465  ments to Unicode
-0000b330: 2064 6f63 756d 656e 7461 7469 6f6e 2069   documentation i
-0000b340: 6e63 6c75 6469 6e67 204c 414e 4720 7661  ncluding LANG va
-0000b350: 7269 6162 6c65 2061 6e64 2069 636f 6e76  riable and iconv
-0000b360: 0a20 2074 6f6f 6c2e 0a0a 5265 6c65 6173  .  tool...Releas
-0000b370: 6520 342e 3135 2028 7265 6c65 6173 6520  e 4.15 (release 
-0000b380: 6461 7465 3a20 3230 3135 2d30 392d 3038  date: 2015-09-08
-0000b390: 290a 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ).==============
-0000b3a0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0000b3b0: 3d3d 3d3d 3d3d 3d3d 3d0a 4275 6720 4669  =========.Bug Fi
-0000b3c0: 7865 730a 2d2d 2d2d 2d2d 2d2d 2d0a 2d20  xes.---------.- 
-0000b3d0: 4669 7865 6420 616e 204f 7665 7266 6c6f  Fixed an Overflo
-0000b3e0: 7745 7272 6f72 2069 6e20 6170 6974 6f6f  wError in apitoo
-0000b3f0: 6c73 2074 6861 7420 6361 7573 6564 2064  ls that caused d
-0000b400: 6f77 6e6c 6f61 640a 2020 6661 696c 7572  ownload.  failur
-0000b410: 6573 2066 6f72 206c 6172 6765 2066 696c  es for large fil
-0000b420: 6573 206f 6e20 3332 2d62 6974 206d 6163  es on 32-bit mac
-0000b430: 6869 6e65 732e 0a2d 2052 656d 6f76 6564  hines..- Removed
-0000b440: 2075 6e6e 6563 6573 7361 7279 2073 656e   unnecessary sen
-0000b450: 6469 6e67 206f 6620 7261 6e67 6520 6865  ding of range he
-0000b460: 6164 6572 7320 666f 7220 646f 776e 6c6f  aders for downlo
-0000b470: 6164 7320 7768 656e 0a20 2075 7369 6e67  ads when.  using
-0000b480: 2074 6865 2058 4d4c 2041 5049 2e0a 2d20   the XML API..- 
-0000b490: 4669 7865 6420 6120 6275 6720 7468 6174  Fixed a bug that
-0000b4a0: 2063 6175 7365 6420 7065 7266 6469 6167   caused perfdiag
-0000b4b0: 2074 6f20 7265 706f 7274 2065 7874 7265   to report extre
-0000b4c0: 6d65 6c79 2068 6967 6820 7468 726f 7567  mely high throug
-0000b4d0: 6870 7574 0a20 2077 6865 6e20 7468 6520  hput.  when the 
-0000b4e0: 2d70 2066 6c61 6720 7761 7320 756e 7370  -p flag was unsp
-0000b4f0: 6563 6966 6965 6420 616e 6420 6578 6163  ecified and exac
-0000b500: 746c 7920 6f6e 6520 6f66 2074 6865 202d  tly one of the -
-0000b510: 6320 6f72 202d 6b20 666c 6167 730a 2020  c or -k flags.  
-0000b520: 7765 7265 2073 7065 6369 6669 6564 2e0a  were specified..
-0000b530: 2d20 4669 7865 6420 6120 5661 6c75 6545  - Fixed a ValueE
-0000b540: 7272 6f72 2074 6861 7420 6f63 6375 7272  rror that occurr
-0000b550: 6564 206f 6e20 5079 7468 6f6e 2032 2e36  ed on Python 2.6
-0000b560: 2077 6974 6820 736c 6963 6564 206f 626a   with sliced obj
-0000b570: 6563 7420 646f 776e 6c6f 6164 732e 0a0a  ect downloads...
-0000b580: 4f74 6865 7220 4368 616e 6765 730a 2d2d  Other Changes.--
-0000b590: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 2d20 4854  -----------.- HT
-0000b5a0: 5450 2063 6f6e 6e65 6374 696f 6e73 2066  TP connections f
-0000b5b0: 6f72 2064 6f77 6e6c 6f61 6473 2061 6e64  or downloads and
-0000b5c0: 2075 706c 6f61 6473 2069 6e20 7468 6520   uploads in the 
-0000b5d0: 4a53 4f4e 2041 5049 2061 7265 206e 6f77  JSON API are now
-0000b5e0: 0a20 2072 652d 7573 6564 2070 6572 2d74  .  re-used per-t
-0000b5f0: 6872 6561 642e 0a2d 2057 6865 6e20 6773  hread..- When gs
-0000b600: 7574 696c 2773 2061 7574 6f6d 6174 6963  util's automatic
-0000b610: 2075 7064 6174 6520 6665 6174 7572 6520   update feature 
-0000b620: 7072 6f6d 7074 7320 616e 6420 7468 6520  prompts and the 
-0000b630: 7573 6572 0a20 2063 686f 6f73 6573 2074  user.  chooses t
-0000b640: 6f20 7570 6461 7465 2c20 6773 7574 696c  o update, gsutil
-0000b650: 2077 696c 6c20 6e6f 7720 6578 6974 2077   will now exit w
-0000b660: 6974 6820 7374 6174 7573 2063 6f64 6520  ith status code 
-0000b670: 3120 6166 7465 720a 2020 7570 6461 7469  1 after.  updati
-0000b680: 6e67 2028 6265 6361 7573 6520 7468 6520  ng (because the 
-0000b690: 6f72 6967 696e 616c 2063 6f6d 6d61 6e64  original command
-0000b6a0: 2077 6173 206e 6f74 2065 7865 6375 7465   was not execute
-0000b6b0: 6429 2e0a 2d20 5468 6520 6370 202d 4120  d)..- The cp -A 
-0000b6c0: 666c 6167 2069 7320 6469 7361 626c 6564  flag is disabled
-0000b6d0: 2077 6865 6e20 7573 696e 6720 6773 7574   when using gsut
-0000b6e0: 696c 202d 6d20 746f 2065 6e73 7572 6520  il -m to ensure 
-0000b6f0: 7468 6174 0a20 206f 7264 6572 696e 6720  that.  ordering 
-0000b700: 6973 2070 7265 7365 7276 6564 2077 6865  is preserved whe
-0000b710: 6e20 636f 7079 696e 6720 6265 7477 6565  n copying betwee
-0000b720: 6e20 7665 7273 696f 6e65 6420 6275 636b  n versioned buck
-0000b730: 6574 732e 0a0a 5265 6c65 6173 6520 342e  ets...Release 4.
-0000b740: 3134 2028 7265 6c65 6173 6520 6461 7465  14 (release date
-0000b750: 3a20 3230 3135 2d30 382d 3234 290a 3d3d  : 2015-08-24).==
-0000b760: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0000b770: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0000b780: 3d3d 3d3d 3d0a 4e65 7720 4665 6174 7572  =====.New Featur
-0000b790: 6573 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a  es.------------.
-0000b7a0: 2d20 496d 706c 656d 656e 7465 6420 536c  - Implemented Sl
-0000b7b0: 6963 6564 204f 626a 6563 7420 446f 776e  iced Object Down
-0000b7c0: 6c6f 6164 2066 6561 7475 7265 2e0a 2020  load feature..  
-0000b7d0: 5468 6973 2062 7265 616b 7320 7570 2061  This breaks up a
-0000b7e0: 2073 696e 676c 6520 6c61 7267 6520 6f62   single large ob
-0000b7f0: 6a65 6374 2069 6e74 6f20 6d75 6c74 6970  ject into multip
-0000b800: 6c65 2070 6965 6365 7320 616e 640a 2020  le pieces and.  
-0000b810: 646f 776e 6c6f 6164 7320 7468 656d 2069  downloads them i
-0000b820: 6e20 7061 7261 6c6c 656c 2c20 696d 7072  n parallel, impr
-0000b830: 6f76 696e 6720 7065 7266 6f72 6d61 6e63  oving performanc
-0000b840: 652e 2054 6865 2067 7375 7469 6c20 6370  e. The gsutil cp
-0000b850: 2c20 6d76 0a20 2061 6e64 2072 7379 6e63  , mv.  and rsync
-0000b860: 2063 6f6d 6d61 6e64 7320 6e6f 7720 7573   commands now us
-0000b870: 6520 7468 6973 2062 7920 6465 6661 756c  e this by defaul
-0000b880: 7420 7768 656e 2063 6f6d 7069 6c65 6420  t when compiled 
-0000b890: 6372 636d 6f64 0a20 2069 7320 6176 6169  crcmod.  is avai
-0000b8a0: 6c61 626c 6520 666f 7220 7065 7266 6f72  lable for perfor
-0000b8b0: 6d69 6e67 2066 6173 7420 656e 642d 746f  ming fast end-to
-0000b8c0: 2d65 6e64 2069 6e74 6567 7269 7479 2063  -end integrity c
-0000b8d0: 6865 636b 732e 0a20 2049 6620 636f 6d70  hecks..  If comp
-0000b8e0: 696c 6564 2063 7263 6d6f 6420 6973 206e  iled crcmod is n
-0000b8f0: 6f74 2061 7661 696c 6162 6c65 2c20 6e6f  ot available, no
-0000b900: 726d 616c 206f 626a 6563 7420 646f 776e  rmal object down
-0000b910: 6c6f 6164 2077 696c 6c0a 2020 6265 2075  load will.  be u
-0000b920: 7365 642e 2053 6c69 6365 6420 646f 776e  sed. Sliced down
-0000b930: 6c6f 6164 2063 616e 2062 6520 7573 6564  load can be used
-0000b940: 2069 6e20 636f 6e6a 756e 6374 696f 6e20   in conjunction 
-0000b950: 7769 7468 2074 6865 2067 6c6f 6261 6c20  with the global 
-0000b960: 2d6d 0a20 2066 6c61 6720 666f 7220 6d61  -m.  flag for ma
-0000b970: 7869 6d75 6d20 7065 7266 6f72 6d61 6e63  ximum performanc
-0000b980: 6520 746f 2064 6f77 6e6c 6f61 6420 6d75  e to download mu
-0000b990: 6c74 6970 6c65 206f 626a 6563 7473 2069  ltiple objects i
-0000b9a0: 6e0a 2020 7061 7261 6c6c 656c 2077 6869  n.  parallel whi
-0000b9b0: 6c65 2061 6464 6974 696f 6e61 6c6c 7920  le additionally 
-0000b9c0: 736c 6963 696e 6720 6561 6368 206f 626a  slicing each obj
-0000b9d0: 6563 742e 0a20 2053 6565 2074 6865 2022  ect..  See the "
-0000b9e0: 534c 4943 4544 204f 424a 4543 5420 444f  SLICED OBJECT DO
-0000b9f0: 574e 4c4f 4144 2220 7365 6374 696f 6e20  WNLOAD" section 
-0000ba00: 6f66 2022 6773 7574 696c 2068 656c 7020  of "gsutil help 
-0000ba10: 6370 2220 666f 720a 2020 6465 7461 696c  cp" for.  detail
-0000ba20: 732e 0a20 204e 6f74 653a 2073 6c69 6365  s..  Note: slice
-0000ba30: 6420 646f 776e 6c6f 6164 206d 6179 2063  d download may c
-0000ba40: 6175 7365 2070 6572 666f 726d 616e 6365  ause performance
-0000ba50: 2064 6567 7261 6461 7469 6f6e 2066 6f72   degradation for
-0000ba60: 2064 6973 6b73 0a20 2077 6974 6820 7665   disks.  with ve
-0000ba70: 7279 2073 6c6f 7720 7365 656b 2074 696d  ry slow seek tim
-0000ba80: 6573 2e20 596f 7520 6361 6e20 6469 7361  es. You can disa
-0000ba90: 626c 6520 7468 6973 2066 6561 7475 7265  ble this feature
-0000baa0: 2062 7920 7365 7474 696e 670a 2020 736c   by setting.  sl
-0000bab0: 6963 6564 5f6f 626a 6563 745f 646f 776e  iced_object_down
-0000bac0: 6c6f 6164 5f74 6872 6573 686f 6c64 203d  load_threshold =
-0000bad0: 2030 2069 6e20 796f 7572 202e 626f 746f   0 in your .boto
-0000bae0: 2063 6f6e 6669 6775 7261 7469 6f6e 2066   configuration f
-0000baf0: 696c 652e 0a2d 2041 6464 6564 2072 7468  ile..- Added rth
-0000bb00: 7275 5f66 696c 6520 616e 6420 7774 6872  ru_file and wthr
-0000bb10: 755f 6669 6c65 2074 6573 7420 6d6f 6465  u_file test mode
-0000bb20: 7320 746f 2070 6572 6664 6961 672c 2061  s to perfdiag, a
-0000bb30: 6c6c 6f77 696e 670a 2020 6d65 6173 7572  llowing.  measur
-0000bb40: 656d 656e 7420 6f66 2072 6561 6473 2061  ement of reads a
-0000bb50: 6e64 2077 7269 7465 7320 6672 6f6d 2061  nd writes from a
-0000bb60: 2064 6973 6b2e 2054 6869 7320 616c 736f   disk. This also
-0000bb70: 2061 6c6c 6f77 730a 2020 6d65 6173 7572   allows.  measur
-0000bb80: 656d 656e 7420 6f66 2074 7261 6e73 6665  ement of transfe
-0000bb90: 7272 696e 6720 6f62 6a65 6374 7320 746f  rring objects to
-0000bba0: 6f20 6c61 7267 6520 746f 2066 6974 2069  o large to fit i
-0000bbb0: 6e20 6d65 6d6f 7279 2e0a 2020 5468 6520  n memory..  The 
-0000bbc0: 7369 7a65 2072 6573 7472 6963 7469 6f6e  size restriction
-0000bbd0: 206f 6620 3230 4769 4220 6861 7320 6265   of 20GiB has be
-0000bbe0: 656e 206c 6966 7465 642e 0a2d 2070 6572  en lifted..- per
-0000bbf0: 6664 6961 6720 6e6f 7720 7375 7070 6f72  fdiag now suppor
-0000bc00: 7473 2061 202d 7020 666c 6167 2074 6f20  ts a -p flag to 
-0000bc10: 6368 6f6f 7365 2061 2070 6172 616c 6c65  choose a paralle
-0000bc20: 6c69 736d 2073 7472 6174 6567 790a 2020  lism strategy.  
-0000bc30: 2873 6c69 6365 2c20 6661 6e2c 206f 7220  (slice, fan, or 
-0000bc40: 626f 7468 2920 7768 656e 2075 7369 6e67  both) when using
-0000bc50: 206d 756c 7469 706c 6520 7468 7265 6164   multiple thread
-0000bc60: 7320 616e 642f 6f72 2070 726f 6365 7373  s and/or process
-0000bc70: 6573 2e0a 0a42 7567 2046 6978 6573 0a2d  es...Bug Fixes.-
-0000bc80: 2d2d 2d2d 2d2d 2d2d 0a2d 2046 6978 6564  --------.- Fixed
-0000bc90: 2061 6e20 494f 4572 726f 7220 7468 6174   an IOError that
-0000bca0: 2063 6f75 6c64 206f 6363 7572 2069 6e20   could occur in 
-0000bcb0: 6170 6974 6f6f 6c73 2077 6865 6e20 6163  apitools when ac
-0000bcc0: 7175 6972 696e 6720 6372 6564 656e 7469  quiring credenti
-0000bcd0: 616c 730a 2020 7573 696e 6720 6d75 6c74  als.  using mult
-0000bce0: 6970 6c65 2074 6872 6561 6473 2061 6e64  iple threads and
-0000bcf0: 2f6f 7220 7072 6f63 6573 7365 7320 6f6e  /or processes on
-0000bd00: 2047 6f6f 676c 6520 436f 6d70 7574 6520   Google Compute 
-0000bd10: 456e 6769 6e65 2e0a 2d20 4669 7865 6420  Engine..- Fixed 
-0000bd20: 6120 6275 6720 7768 6572 6520 726d 202d  a bug where rm -
-0000bd30: 7220 776f 756c 6420 6174 7465 6d70 7420  r would attempt 
-0000bd40: 746f 2064 656c 6574 6520 6120 6e6f 6e65  to delete a none
-0000bd50: 7869 7374 656e 7420 6275 636b 6574 2e0a  xistent bucket..
-0000bd60: 2d20 4669 7865 6420 6120 6275 6720 7768  - Fixed a bug wh
-0000bd70: 6572 6520 6120 6465 6661 756c 7420 6f62  ere a default ob
-0000bd80: 6a65 6374 2041 434c 2063 6f75 6c64 206e  ject ACL could n
-0000bd90: 6f74 2062 6520 7365 7420 6f72 2063 6861  ot be set or cha
-0000bda0: 6e67 6564 2074 6f20 656d 7074 792e 0a2d  nged to empty..-
-0000bdb0: 2046 6978 6564 2061 2062 7567 2077 6865   Fixed a bug whe
-0000bdc0: 7265 2063 6163 6865 6420 6372 6564 656e  re cached creden
-0000bdd0: 7469 616c 7320 636f 7272 6573 706f 6e64  tials correspond
-0000bde0: 696e 6720 746f 2061 6e20 6f6c 6420 6163  ing to an old ac
-0000bdf0: 636f 756e 7420 636f 756c 640a 2020 6265  count could.  be
-0000be00: 2075 7365 6420 2866 6f72 2065 7861 6d70   used (for examp
-0000be10: 6c65 2c20 6372 6564 656e 7469 616c 7320  le, credentials 
-0000be20: 6173 736f 6369 6174 6564 2077 6974 6820  associated with 
-0000be30: 6120 7072 696f 7220 2e62 6f74 6f0a 2020  a prior .boto.  
-0000be40: 636f 6e66 6967 7572 6174 696f 6e20 6669  configuration fi
-0000be50: 6c65 292e 0a2d 2046 6978 6564 2061 2062  le)..- Fixed a b
-0000be60: 7567 2069 6e20 6170 6974 6f6f 6c73 2066  ug in apitools f
-0000be70: 6f72 2072 6574 7269 6576 696e 6720 6279  or retrieving by
-0000be80: 7465 2072 616e 6765 7320 6f66 2073 697a  te ranges of siz
-0000be90: 6520 3120 2866 6f72 2065 7861 6d70 6c65  e 1 (for example
-0000bea0: 2c0a 2020 2263 6174 202d 7220 312d 3120  ,.  "cat -r 1-1 
-0000beb0: 2e2e 2e22 290a 2d20 4669 7865 6420 6120  ...").- Fixed a 
-0000bec0: 6275 6720 7468 6174 2063 6175 7365 6420  bug that caused 
-0000bed0: 7468 6520 6d61 696e 2067 7375 7469 6c20  the main gsutil 
-0000bee0: 7072 6f63 6573 7320 746f 2070 6572 666f  process to perfo
-0000bef0: 726d 2061 6c6c 2077 6f72 6b20 6c65 6176  rm all work leav
-0000bf00: 696e 670a 2020 616c 6c20 6773 7574 696c  ing.  all gsutil
-0000bf10: 2063 6869 6c64 2070 726f 6365 7373 6573   child processes
-0000bf20: 2069 646c 652e 0a2d 2046 6978 6564 2061   idle..- Fixed a
-0000bf30: 2062 7567 2074 6861 7420 6361 7573 6564   bug that caused
-0000bf40: 206d 756c 7469 706c 6520 7468 7265 6164   multiple thread
-0000bf50: 7320 6e6f 7420 746f 2062 6520 7573 6564  s not to be used
-0000bf60: 2077 6865 6e0a 2020 6d75 6c74 6970 726f   when.  multipro
-0000bf70: 6365 7373 696e 6720 7761 7320 756e 6176  cessing was unav
-0000bf80: 6169 6c61 626c 652e 0a2d 2046 6978 6564  ailable..- Fixed
-0000bf90: 2061 2062 7567 2074 6861 7420 6361 7573   a bug that caus
-0000bfa0: 6564 2072 7379 6e63 2074 6f20 736b 6970  ed rsync to skip
-0000bfb0: 2066 696c 6573 2074 6861 7420 7374 6172   files that star
-0000bfc0: 7420 7769 7468 2022 2e22 2077 6865 6e20  t with "." when 
-0000bfd0: 7468 650a 2020 2d72 206f 7074 696f 6e20  the.  -r option 
-0000bfe0: 7761 7320 6e6f 7420 7573 6564 2e0a 2d20  was not used..- 
-0000bff0: 4669 7865 6420 6120 6275 6720 7468 6174  Fixed a bug that
-0000c000: 2063 6175 7365 6420 7273 796e 6320 2d43   caused rsync -C
-0000c010: 2074 6f20 6261 696c 206f 7574 2077 6865   to bail out whe
-0000c020: 6e20 6974 2066 6169 6c65 6420 746f 2072  n it failed to r
-0000c030: 6561 640a 2020 6120 736f 7572 6365 2066  ead.  a source f
-0000c040: 696c 652e 0a2d 2046 6978 6564 2061 2062  ile..- Fixed a b
-0000c050: 7567 2077 6865 7265 2067 7375 7469 6c20  ug where gsutil 
-0000c060: 7374 6174 2070 7269 6e74 6564 2075 6e77  stat printed unw
-0000c070: 616e 7465 6420 6f75 7470 7574 2074 6f20  anted output to 
-0000c080: 7374 6465 7272 2e0a 2d20 4669 7865 6420  stderr..- Fixed 
-0000c090: 6120 6275 6720 7768 6572 6520 6120 7061  a bug where a pa
-0000c0a0: 7261 6c6c 656c 2063 6f6d 706f 7369 7465  rallel composite
-0000c0b0: 2075 706c 6f61 6420 636f 756c 6420 7265   upload could re
-0000c0c0: 7475 726e 2061 206e 6f6e 7a65 726f 2065  turn a nonzero e
-0000c0d0: 7869 740a 2020 636f 6465 2065 7665 6e20  xit.  code even 
-0000c0e0: 7468 6f75 6768 2074 6865 2075 706c 6f61  though the uploa
-0000c0f0: 6420 636f 6d70 6c65 7465 6420 7375 6363  d completed succ
-0000c100: 6573 7366 756c 6c79 2e20 5468 6973 206f  essfully. This o
-0000c110: 6363 7572 7265 6420 6966 0a20 2074 656d  ccurred if.  tem
-0000c120: 706f 7261 7279 2063 6f6d 706f 6e65 6e74  porary component
-0000c130: 2064 656c 6574 696f 6e20 7472 6967 6765   deletion trigge
-0000c140: 7265 6420 6120 7265 7472 7920 6275 7420  red a retry but 
-0000c150: 7468 6520 6f72 6967 696e 616c 2072 6571  the original req
-0000c160: 7565 7374 0a20 2073 7563 6365 6564 6564  uest.  succeeded
-0000c170: 2e0a 2d20 4669 7865 6420 6120 6275 6720  ..- Fixed a bug 
-0000c180: 7768 6572 6520 6773 7574 696c 2077 6f75  where gsutil wou
-0000c190: 6c64 2065 7869 7420 7769 7468 2063 6f64  ld exit with cod
-0000c1a0: 6520 3020 7768 656e 2062 6f74 6820 7275  e 0 when both ru
-0000c1b0: 6e6e 696e 6720 696e 0a20 2064 6562 7567  nning in.  debug
-0000c1c0: 206d 6f64 6520 616e 6420 656e 636f 756e   mode and encoun
-0000c1d0: 7465 7269 6e67 2061 6e20 756e 6861 6e64  tering an unhand
-0000c1e0: 6c65 6420 6578 6365 7074 696f 6e2e 0a2d  led exception..-
-0000c1f0: 2046 6978 6564 2061 2062 7567 2077 6865   Fixed a bug whe
-0000c200: 7265 2067 7375 7469 6c20 776f 756c 6420  re gsutil would 
-0000c210: 7375 6767 6573 7420 7573 696e 6720 7061  suggest using pa
-0000c220: 7261 6c6c 656c 2063 6f6d 706f 7369 7465  rallel composite
-0000c230: 2075 706c 6f61 6473 0a20 206d 756c 7469   uploads.  multi
-0000c240: 706c 6520 7469 6d65 732e 0a0a 4f74 6865  ple times...Othe
-0000c250: 7220 4368 616e 6765 730a 2d2d 2d2d 2d2d  r Changes.------
-0000c260: 2d2d 2d2d 2d2d 2d0a 2d20 4275 636b 6574  -------.- Bucket
-0000c270: 2072 656d 6f76 616c 2069 7320 6e6f 7720   removal is now 
-0000c280: 7375 7070 6f72 7465 6420 6576 656e 2069  supported even i
-0000c290: 6620 6269 6c6c 696e 6720 6973 2064 6973  f billing is dis
-0000c2a0: 6162 6c65 6420 666f 7220 7468 6174 2062  abled for that b
-0000c2b0: 7563 6b65 742e 0a2d 2052 6566 6163 746f  ucket..- Refacto
-0000c2c0: 7265 6420 5769 6e64 6f77 7320 696e 7374  red Windows inst
-0000c2d0: 616c 6c73 2074 6f20 6e6f 206c 6f6e 6765  alls to no longe
-0000c2e0: 7220 7573 6520 616e 7920 6d75 6c74 6970  r use any multip
-0000c2f0: 726f 6365 7373 696e 6720 6d6f 6475 6c65  rocessing module
-0000c300: 0a20 2066 756e 6374 696f 6e73 2c20 6173  .  functions, as
-0000c310: 2067 7375 7469 6c20 6861 7320 6e65 7665   gsutil has neve
-0000c320: 7220 7375 7070 6f72 7465 6420 6d75 6c74  r supported mult
-0000c330: 6970 6c65 2070 726f 6365 7373 6573 206f  iple processes o
-0000c340: 6e20 5769 6e64 6f77 732e 0a20 204d 756c  n Windows..  Mul
-0000c350: 7469 7468 7265 6164 696e 6720 6973 2075  tithreading is u
-0000c360: 6e61 6666 6563 7465 6420 616e 6420 7374  naffected and st
-0000c370: 696c 6c20 6176 6169 6c61 626c 6520 6f6e  ill available on
-0000c380: 2057 696e 646f 7773 2e0a 2d20 416c 6c20   Windows..- All 
-0000c390: 646f 776e 6c6f 6164 7320 6172 6520 6e6f  downloads are no
-0000c3a0: 7720 7772 6974 7465 6e20 746f 2061 2074  w written to a t
-0000c3b0: 656d 706f 7261 7279 2066 696c 6520 7769  emporary file wi
-0000c3c0: 7468 2061 2022 5f2e 6773 746d 7022 2073  th a "_.gstmp" s
-0000c3d0: 7566 6669 780a 2020 7768 696c 6520 7468  uffix.  while th
-0000c3e0: 6520 646f 776e 6c6f 6164 2069 7320 7374  e download is st
-0000c3f0: 696c 6c20 696e 2070 726f 6772 6573 732e  ill in progress.
-0000c400: 0a2d 2052 652d 6861 7368 696e 6720 6f66  .- Re-hashing of
-0000c410: 2065 7869 7374 696e 6720 6279 7465 7320   existing bytes 
-0000c420: 7768 656e 2072 6573 756d 696e 6720 646f  when resuming do
-0000c430: 776e 6c6f 6164 7320 6e6f 7720 6469 7370  wnloads now disp
-0000c440: 6c61 7973 2070 726f 6772 6573 732e 0a2d  lays progress..-
-0000c450: 2052 6564 7563 6564 2074 6865 2074 6f74   Reduced the tot
-0000c460: 616c 206e 756d 6265 7220 6f66 206d 756c  al number of mul
-0000c470: 7469 7072 6f63 6573 7369 6e67 2e4d 616e  tiprocessing.Man
-0000c480: 6167 6572 2070 726f 6365 7373 6573 2074  ager processes t
-0000c490: 6f20 7477 6f2e 0a2d 2054 6865 2072 6d20  o two..- The rm 
-0000c4a0: 636f 6d6d 616e 6420 6e6f 7720 636f 7272  command now corr
-0000c4b0: 6563 746c 7920 636f 756e 7473 2074 6865  ectly counts the
-0000c4c0: 206e 756d 6265 7220 6f66 206f 626a 6563   number of objec
-0000c4d0: 7473 2074 6861 7420 636f 756c 640a 2020  ts that could.  
-0000c4e0: 6e6f 7420 6265 2072 656d 6f76 6564 2e0a  not be removed..
-0000c4f0: 2d20 496e 6372 6561 7365 6420 7468 6520  - Increased the 
-0000c500: 6465 6661 756c 7420 7265 7472 6965 7320  default retries 
-0000c510: 746f 206d 6174 6368 2074 6865 2047 6f6f  to match the Goo
-0000c520: 676c 6520 436c 6f75 6420 5374 6f72 6167  gle Cloud Storag
-0000c530: 6520 534c 412e 0a20 2042 7920 6465 6661  e SLA..  By defa
-0000c540: 756c 742c 2067 7375 7469 6c20 7769 6c6c  ult, gsutil will
-0000c550: 206e 6f77 2072 6574 7279 2032 3320 7469   now retry 23 ti
-0000c560: 6d65 7320 7769 7468 2065 7870 6f6e 656e  mes with exponen
-0000c570: 7469 616c 2062 6163 6b6f 6666 2075 700a  tial backoff up.
-0000c580: 2020 746f 2033 3220 7365 636f 6e64 732c    to 32 seconds,
-0000c590: 2066 6f72 2061 2074 6f74 616c 2074 696d   for a total tim
-0000c5a0: 6573 7061 6e20 6f66 207e 3130 206d 696e  espan of ~10 min
-0000c5b0: 7574 6573 2e0a 2d20 496d 7072 6f76 6564  utes..- Improved
-0000c5c0: 2062 7563 6b65 7420 7375 6264 6972 6563   bucket subdirec
-0000c5d0: 746f 7279 2063 6865 636b 7320 746f 2061  tory checks to a
-0000c5e0: 2073 696e 676c 6520 4854 5450 2063 616c   single HTTP cal
-0000c5f0: 6c2e 2044 6574 6563 7469 6f6e 206f 660a  l. Detection of.
-0000c600: 2020 5f24 666f 6c64 6572 2420 706c 6163    _$folder$ plac
-0000c610: 6568 6f6c 6465 7220 6f62 6a65 6374 7320  eholder objects 
-0000c620: 6973 206e 6f77 2065 7665 6e74 7561 6c6c  is now eventuall
-0000c630: 7920 636f 6e73 6973 7465 6e74 2e0a 2d20  y consistent..- 
-0000c640: 456c 696d 696e 6174 6564 2074 776f 2075  Eliminated two u
-0000c650: 6e6e 6563 6573 7361 7279 2048 5454 5020  nnecessary HTTP 
-0000c660: 6361 6c6c 7320 7768 656e 2070 6572 666f  calls when perfo
-0000c670: 726d 696e 6720 7570 6c6f 6164 7320 7669  rming uploads vi
-0000c680: 610a 2020 7468 6520 6370 2c20 6d76 2c20  a.  the cp, mv, 
-0000c690: 6f72 2072 7379 6e63 2063 6f6d 6d61 6e64  or rsync command
-0000c6a0: 732e 0a2d 2055 7064 6174 6564 2064 6f63  s..- Updated doc
-0000c6b0: 756d 656e 7461 7469 6f6e 2066 6f72 2073  umentation for s
-0000c6c0: 6576 6572 616c 2074 6f70 6963 7320 696e  everal topics in
-0000c6d0: 636c 7564 696e 6720 6163 6c2c 2063 6163  cluding acl, cac
-0000c6e0: 6865 2d63 6f6e 7472 6f6c 2c0a 2020 6372  he-control,.  cr
-0000c6f0: 636d 6f64 2c20 6370 2c20 6d62 2c20 7273  cmod, cp, mb, rs
-0000c700: 796e 632c 2061 6e64 2073 7562 6469 7273  ync, and subdirs
-0000c710: 2e0a 2d20 4164 6465 6420 6120 7761 726e  ..- Added a warn
-0000c720: 696e 6720 6162 6f75 7420 7573 696e 6720  ing about using 
-0000c730: 7061 7261 6c6c 656c 2063 6f6d 706f 7369  parallel composi
-0000c740: 7465 2075 706c 6f61 6420 7769 7468 204e  te upload with N
-0000c750: 4541 524c 494e 450a 2020 7374 6f72 6167  EARLINE.  storag
-0000c760: 652d 636c 6173 7320 6275 636b 6574 732e  e-class buckets.
-0000c770: 0a0a 5265 6c65 6173 6520 342e 3133 2028  ..Release 4.13 (
-0000c780: 7265 6c65 6173 6520 6461 7465 3a20 3230  release date: 20
-0000c790: 3135 2d30 362d 3033 290a 3d3d 3d3d 3d3d  15-06-03).======
-0000c7a0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0000c7b0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0000c7c0: 3d0a 4e65 7720 4665 6174 7572 6573 0a2d  =.New Features.-
-0000c7d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 2d20 4164  -----------.- Ad
-0000c7e0: 6465 6420 2d55 2066 6c61 6720 746f 2063  ded -U flag to c
-0000c7f0: 7020 616e 6420 7273 796e 6320 636f 6d6d  p and rsync comm
-0000c800: 616e 6473 2074 6f20 616c 6c6f 7720 736b  ands to allow sk
-0000c810: 6970 7069 6e67 206f 6620 756e 7375 7070  ipping of unsupp
-0000c820: 6f72 7465 640a 2020 6f62 6a65 6374 2074  orted.  object t
-0000c830: 7970 6573 2e0a 2d20 4164 6465 6420 7375  ypes..- Added su
-0000c840: 7070 6f72 7420 666f 7220 476f 6f67 6c65  pport for Google
-0000c850: 2044 6576 656c 6f70 6572 2053 6865 6c6c   Developer Shell
-0000c860: 2063 7265 6465 6e74 6961 6c73 2e0a 0a42   credentials...B
-0000c870: 7567 2046 6978 6573 0a2d 2d2d 2d2d 2d2d  ug Fixes.-------
-0000c880: 2d2d 0a2d 2050 7265 636f 6e64 6974 696f  --.- Preconditio
-0000c890: 6e20 6865 6164 6572 7320 2878 2d67 6f6f  n headers (x-goo
-0000c8a0: 672d 6966 2d2e 2e2e 2920 6172 6520 6e6f  g-if-...) are no
-0000c8b0: 7720 7265 7370 6563 7465 6420 666f 7220  w respected for 
-0000c8c0: 7468 6520 7365 746d 6574 610a 2020 636f  the setmeta.  co
-0000c8d0: 6d6d 616e 642e 0a2d 2046 6978 6564 2061  mmand..- Fixed a
-0000c8e0: 6e20 696e 6465 7820 6f75 7420 6f66 2072  n index out of r
-0000c8f0: 616e 6765 2065 7272 6f72 2074 6861 7420  ange error that 
-0000c900: 636f 756c 6420 6f63 6375 7220 7769 7468  could occur with
-0000c910: 2061 6e20 656d 7074 790a 2020 7061 7261   an empty.  para
-0000c920: 6c6c 656c 2063 6f6d 706f 7369 7465 2075  llel composite u
-0000c930: 706c 6f61 6420 7472 6163 6b65 7220 6669  pload tracker fi
-0000c940: 6c65 2e0a 2d20 5468 6520 7374 6174 2063  le..- The stat c
-0000c950: 6f6d 6d61 6e64 206f 7574 7075 7473 2065  ommand outputs e
-0000c960: 7272 6f72 7320 746f 2073 7464 6572 7220  rrors to stderr 
-0000c970: 696e 7374 6561 6420 6f66 2073 7464 6f75  instead of stdou
-0000c980: 742e 0a2d 2046 6978 6564 2074 776f 2070  t..- Fixed two p
-0000c990: 6f73 7369 626c 6520 736f 7572 6365 7320  ossible sources 
-0000c9a0: 6f66 2052 6573 756d 6162 6c65 5570 6c6f  of ResumableUplo
-0000c9b0: 6164 5374 6172 744f 7665 7245 7863 6570  adStartOverExcep
-0000c9c0: 7469 6f6e 2066 726f 6d0a 2020 6874 7470  tion from.  http
-0000c9d0: 6c69 6232 2061 6e64 206f 6175 7468 3263  lib2 and oauth2c
-0000c9e0: 6c69 656e 742e 0a2d 2046 6978 6564 2061  lient..- Fixed a
-0000c9f0: 2062 7567 2069 6e20 7468 6520 636f 6d70   bug in the comp
-0000ca00: 6f73 6520 636f 6d6d 616e 6420 7768 6572  ose command wher
-0000ca10: 6520 6120 6d69 7373 696e 6720 736f 7572  e a missing sour
-0000ca20: 6365 206f 626a 6563 7420 7265 7375 6c74  ce object result
-0000ca30: 6564 0a20 2069 6e20 616e 2065 7272 6f72  ed.  in an error
-0000ca40: 206d 6573 7361 6765 2063 6c61 696d 696e   message claimin
-0000ca50: 6720 7468 6520 6465 7374 696e 6174 696f  g the destinatio
-0000ca60: 6e20 6f62 6a65 6374 2077 6173 206d 6973  n object was mis
-0000ca70: 7369 6e67 2e0a 0a4f 7468 6572 2043 6861  sing...Other Cha
-0000ca80: 6e67 6573 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d  nges.-----------
-0000ca90: 2d2d 0a2d 2041 6464 6564 2061 2068 656c  --.- Added a hel
-0000caa0: 7020 7365 6374 696f 6e20 6f6e 2074 6872  p section on thr
-0000cab0: 6f74 746c 696e 6720 6773 7574 696c 2e0a  ottling gsutil..
-0000cac0: 2d20 5265 7375 6d61 626c 6520 7570 6c6f  - Resumable uplo
-0000cad0: 6164 7320 7769 6c6c 206e 6f77 2073 7461  ads will now sta
-0000cae0: 7274 206f 7665 7220 6966 2061 2050 5554  rt over if a PUT
-0000caf0: 2074 6f20 7468 6520 7570 6c6f 6164 2049   to the upload I
-0000cb00: 4420 7265 7475 726e 730a 2020 616e 2048  D returns.  an H
-0000cb10: 5454 5020 3430 342e 2050 7265 7669 6f75  TTP 404. Previou
-0000cb20: 736c 7920 7468 6973 2062 6568 6176 696f  sly this behavio
-0000cb30: 7220 6170 706c 6965 6420 6f6e 6c79 2074  r applied only t
-0000cb40: 6f20 616e 2048 5454 5020 3431 302e 0a2d  o an HTTP 410..-
-0000cb50: 2058 4d4c 2041 5049 2072 6573 756d 6162   XML API resumab
-0000cb60: 6c65 2075 706c 6f61 6473 206e 6f77 2072  le uploads now r
-0000cb70: 6574 7279 206f 6e20 4854 5450 2034 3239  etry on HTTP 429
-0000cb80: 2065 7272 6f72 732c 206d 6174 6368 696e   errors, matchin
-0000cb90: 6720 7468 650a 2020 6265 6861 7669 6f72  g the.  behavior
-0000cba0: 206f 6620 4a53 4f4e 2041 5049 2072 6573   of JSON API res
-0000cbb0: 756d 6162 6c65 2075 706c 6f61 6473 2e0a  umable uploads..
-0000cbc0: 2d20 496d 7072 6f76 6564 2072 6573 706f  - Improved respo
-0000cbd0: 6e73 6520 746f 2070 726f 6365 7373 206b  nse to process k
-0000cbe0: 696c 6c20 7369 676e 616c 732c 2072 6564  ill signals, red
-0000cbf0: 7563 696e 6720 7468 6520 6c69 6b65 6c69  ucing the likeli
-0000cc00: 686f 6f64 206f 660a 2020 6c65 6176 696e  hood of.  leavin
-0000cc10: 6720 6f72 7068 616e 6564 2063 6869 6c64  g orphaned child
-0000cc20: 2070 726f 6365 7373 6573 2061 6e64 2074   processes and t
-0000cc30: 656d 706f 7261 7279 2066 696c 6573 2e0a  emporary files..
-0000cc40: 2d20 4275 636b 6574 206c 6966 6563 7963  - Bucket lifecyc
-0000cc50: 6c65 2063 6f6e 6669 6775 7261 7469 6f6e  le configuration
-0000cc60: 206e 6f77 2077 6f72 6b73 2066 6f72 2053   now works for S
-0000cc70: 332e 0a2d 2052 656d 6f76 6564 2074 6865  3..- Removed the
-0000cc80: 2064 6570 7265 6361 7465 6420 7365 746d   deprecated setm
-0000cc90: 6574 6120 2d6e 206f 7074 696f 6e2e 0a0a  eta -n option...
-0000cca0: 0a52 656c 6561 7365 2034 2e31 3220 2872  .Release 4.12 (r
-0000ccb0: 656c 6561 7365 2064 6174 653a 2032 3031  elease date: 201
-0000ccc0: 352d 3034 2d32 3029 0a3d 3d3d 3d3d 3d3d  5-04-20).=======
-0000ccd0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0000cce0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0000ccf0: 0a4e 6577 2046 6561 7475 7265 730a 2d2d  .New Features.--
-0000cd00: 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d 2041 6464  ----------.- Add
-0000cd10: 6564 2073 7570 706f 7274 2066 6f72 204a  ed support for J
-0000cd20: 534f 4e2d 666f 726d 6174 2073 6572 7669  SON-format servi
-0000cd30: 6365 2061 6363 6f75 6e74 2070 7269 7661  ce account priva
-0000cd40: 7465 206b 6579 2066 696c 6573 2e0a 2d20  te key files..- 
-0000cd50: 4164 6465 6420 7375 7070 6f72 7420 666f  Added support fo
-0000cd60: 7220 7468 6520 5265 7772 6974 6520 4150  r the Rewrite AP
-0000cd70: 4920 284a 534f 4e20 4150 4920 6f6e 6c79  I (JSON API only
-0000cd80: 292e 2054 6869 7320 6973 2075 7365 6420  ). This is used 
-0000cd90: 666f 720a 2020 616c 6c20 636f 7069 6573  for.  all copies
-0000cda0: 2077 6974 6869 6e20 7468 6520 476f 6f67   within the Goog
-0000cdb0: 6c65 2043 6c6f 7564 2061 6e64 2073 7570  le Cloud and sup
-0000cdc0: 706f 7274 7320 636f 7079 696e 6720 6f62  ports copying ob
-0000cdd0: 6a65 6374 7320 6163 726f 7373 0a20 2073  jects across.  s
-0000cde0: 746f 7261 6765 2063 6c61 7373 6573 2061  torage classes a
-0000cdf0: 6e64 2f6f 7220 6c6f 6361 7469 6f6e 732e  nd/or locations.
-0000ce00: 0a0a 4275 6720 4669 7865 730a 2d2d 2d2d  ..Bug Fixes.----
-0000ce10: 2d2d 2d2d 2d0a 2d20 4669 7865 6420 6120  -----.- Fixed a 
-0000ce20: 6275 6720 7468 6174 2063 6f75 6c64 2063  bug that could c
-0000ce30: 6175 7365 2064 6f77 6e6c 6f61 6473 2074  ause downloads t
-0000ce40: 6f20 6861 7665 2061 2068 6173 6820 6d69  o have a hash mi
-0000ce50: 736d 6174 6368 2028 616e 6420 6465 6c65  smatch (and dele
-0000ce60: 7469 6f6e 0a20 206f 6620 7468 6520 636f  tion.  of the co
-0000ce70: 7272 7570 7465 6420 6669 6c65 2920 7768  rrupted file) wh
-0000ce80: 656e 2072 6573 756d 6564 2061 6372 6f73  en resumed acros
-0000ce90: 7320 7072 6f63 6573 7320 6272 6561 6b73  s process breaks
-0000cea0: 2076 6961 2061 2074 7261 636b 6572 2066   via a tracker f
-0000ceb0: 696c 652e 0a0a 4f74 6865 7220 4368 616e  ile...Other Chan
-0000cec0: 6765 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ges.------------
-0000ced0: 2d0a 2d20 5570 6461 7465 6420 646f 6375  -.- Updated docu
-0000cee0: 6d65 6e74 6174 696f 6e20 616e 6420 6578  mentation and ex
-0000cef0: 616d 706c 6573 2066 6f72 2073 6576 6572  amples for sever
-0000cf00: 616c 2074 6f70 6963 7320 696e 636c 7564  al topics includ
-0000cf10: 696e 670a 2020 6163 6c2c 2063 702c 2064  ing.  acl, cp, d
-0000cf20: 6576 2c20 7369 676e 7572 6c2c 2073 7461  ev, signurl, sta
-0000cf30: 742c 2061 6e64 2077 696c 6463 6172 6473  t, and wildcards
-0000cf40: 2e0a 0a0a 5265 6c65 6173 6520 342e 3131  ....Release 4.11
-0000cf50: 2028 7265 6c65 6173 6520 6461 7465 3a20   (release date: 
-0000cf60: 3230 3135 2d30 332d 3130 290a 3d3d 3d3d  2015-03-10).====
-0000cf70: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0000cf80: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0000cf90: 3d3d 3d0a 4e65 7720 4665 6174 7572 6573  ===.New Features
-0000cfa0: 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 2d20  .------------.- 
-0000cfb0: 4164 6465 6420 4e65 6172 6c69 6e65 2073  Added Nearline s
-0000cfc0: 746f 7261 6765 2063 6c61 7373 2073 7570  torage class sup
-0000cfd0: 706f 7274 2074 6f20 7468 6520 6d62 2063  port to the mb c
-0000cfe0: 6f6d 6d61 6e64 2e0a 0a42 7567 2046 6978  ommand...Bug Fix
-0000cff0: 6573 0a2d 2d2d 2d2d 2d2d 2d2d 0a2d 2046  es.---------.- F
-0000d000: 6978 6564 2061 2062 7567 2066 6f72 2073  ixed a bug for s
-0000d010: 7472 6561 6d69 6e67 2075 706c 6f61 6473  treaming uploads
-0000d020: 2074 6861 7420 636f 756c 6420 6f63 6361   that could occa
-0000d030: 7369 6f6e 616c 6c79 2063 6175 7365 2061  sionally cause a
-0000d040: 2048 5454 5020 3431 300a 2020 6672 6f6d   HTTP 410.  from
-0000d050: 2074 6865 2073 6572 7669 6365 206f 7220   the service or 
-0000d060: 6120 6861 7368 206d 6973 6d61 7463 6820  a hash mismatch 
-0000d070: 2861 6e64 2064 656c 6574 696f 6e20 6f66  (and deletion of
-0000d080: 2074 6865 2063 6f72 7275 7470 6564 2066   the corrutped f
-0000d090: 696c 6529 2e0a 2d20 4669 7865 6420 616e  ile)..- Fixed an
-0000d0a0: 204f 7665 7266 6c6f 7745 7272 6f72 2074   OverflowError t
-0000d0b0: 6861 7420 6f63 6375 7272 6564 2077 6865  hat occurred whe
-0000d0c0: 6e20 7570 6c6f 6164 696e 6720 6669 6c65  n uploading file
-0000d0d0: 7320 3e20 3447 6942 206f 6e20 6120 3332  s > 4GiB on a 32
-0000d0e0: 2d62 6974 0a20 206f 7065 7261 7469 6e67  -bit.  operating
-0000d0f0: 2073 7973 7465 6d2e 0a0a 4f74 6865 7220   system...Other 
-0000d100: 4368 616e 6765 730a 2d2d 2d2d 2d2d 2d2d  Changes.--------
-0000d110: 2d2d 2d2d 2d0a 2d20 4164 6465 6420 646f  -----.- Added do
-0000d120: 6375 6d65 6e74 6174 696f 6e20 6172 6f75  cumentation arou
-0000d130: 6e64 2075 7369 6e67 2074 6865 2043 6f6e  nd using the Con
-0000d140: 7465 6e74 2d4d 4435 2068 6561 6465 7220  tent-MD5 header 
-0000d150: 746f 2065 7874 656e 6420 696e 7465 6772  to extend integr
-0000d160: 6974 790a 2020 6368 6563 6b69 6e67 2074  ity.  checking t
-0000d170: 6f20 696e 636c 7564 6520 6368 6563 6b73  o include checks
-0000d180: 756d 7320 636f 6d70 7574 6564 2062 7920  ums computed by 
-0000d190: 6120 636c 6965 6e74 2d73 6964 6520 636f  a client-side co
-0000d1a0: 6e74 656e 7420 7069 7065 6c69 6e65 2e0a  ntent pipeline..
-0000d1b0: 0a0a 5265 6c65 6173 6520 342e 3130 2028  ..Release 4.10 (
-0000d1c0: 7265 6c65 6173 6520 6461 7465 3a20 3230  release date: 20
-0000d1d0: 3135 2d30 332d 3033 290a 3d3d 3d3d 3d3d  15-03-03).======
-0000d1e0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0000d1f0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0000d200: 3d0a 4275 6720 4669 7865 730a 2d2d 2d2d  =.Bug Fixes.----
-0000d210: 2d2d 2d2d 2d0a 2d20 4669 7865 6420 6120  -----.- Fixed a 
-0000d220: 6275 6720 7468 6174 2063 6f75 6c64 2063  bug that could c
-0000d230: 6175 7365 2075 6e64 6574 6563 7465 6420  ause undetected 
-0000d240: 6461 7461 2063 6f72 7275 7074 696f 6e20  data corruption 
-0000d250: 2870 7265 7365 7276 696e 6720 696e 636f  (preserving inco
-0000d260: 7272 6563 740a 2020 6461 7461 2920 6966  rrect.  data) if
-0000d270: 2061 2073 7472 6561 6d69 6e67 2075 706c   a streaming upl
-0000d280: 6f61 6420 656e 636f 756e 7465 7265 6420  oad encountered 
-0000d290: 6120 7365 7276 6963 6520 6572 726f 7220  a service error 
-0000d2a0: 6f6e 206e 6f6e 2d38 4b69 422d 616c 6967  on non-8KiB-alig
-0000d2b0: 6e65 640a 2020 626f 756e 6461 7279 2e0a  ned.  boundary..
-0000d2c0: 2d20 4669 7865 6420 6120 6275 6720 7468  - Fixed a bug th
-0000d2d0: 6174 2063 6175 7365 6420 646f 776e 6c6f  at caused downlo
-0000d2e0: 6164 7320 746f 2062 6520 7472 756e 6361  ads to be trunca
-0000d2f0: 7465 6420 6966 2074 6865 2063 6f6e 6e65  ted if the conne
-0000d300: 6374 696f 6e20 6272 6f6b 652c 0a20 2072  ction broke,.  r
-0000d310: 6573 756c 7469 6e67 2069 6e20 6120 6861  esulting in a ha
-0000d320: 7368 206d 6973 6d61 7463 6820 2861 6e64  sh mismatch (and
-0000d330: 2064 656c 6574 696f 6e20 6f66 2074 6865   deletion of the
-0000d340: 2063 6f72 7275 7074 6564 2066 696c 6529   corrupted file)
-0000d350: 2066 6f72 2074 6861 740a 2020 646f 776e   for that.  down
-0000d360: 6c6f 6164 2e0a 2d20 4669 7865 6420 6120  load..- Fixed a 
-0000d370: 666f 726d 6174 2073 7472 696e 6720 6172  format string ar
-0000d380: 6775 6d65 6e74 7320 6572 726f 7220 7468  guments error th
-0000d390: 6174 206f 6363 7572 7265 6420 6966 2061  at occurred if a
-0000d3a0: 2064 6f77 6e6c 6f61 6420 6578 6861 7573   download exhaus
-0000d3b0: 7465 640a 2020 616c 6c20 7265 7472 6965  ted.  all retrie
-0000d3c0: 732e 0a0a 4f74 6865 7220 4368 616e 6765  s...Other Change
-0000d3d0: 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a  s.-------------.
-0000d3e0: 2d20 5468 6520 6c69 6665 6379 636c 6520  - The lifecycle 
-0000d3f0: 636f 6d6d 616e 6420 6e6f 7720 6163 6365  command now acce
-0000d400: 7074 7320 4a53 4f4e 2069 6e70 7574 2069  pts JSON input i
-0000d410: 6e20 7468 6520 666f 726d 206f 660a 2020  n the form of.  
-0000d420: 227b 2022 6c69 6665 6379 636c 6522 3a20  "{ "lifecycle": 
-0000d430: 7b20 2272 756c 6522 202e 2e2e 2220 696e  { "rule" ..." in
-0000d440: 2061 6464 6974 696f 6e20 746f 2022 7b20   addition to "{ 
-0000d450: 2272 756c 6522 3a20 2e2e 2e22 2e0a 2d20  "rule": ..."..- 
-0000d460: 496d 7072 6f76 6564 2061 6363 6573 7320  Improved access 
-0000d470: 746f 6b65 6e20 6578 7069 7279 206c 6f67  token expiry log
-0000d480: 6963 2066 6f72 2047 4345 2063 7265 6465  ic for GCE crede
-0000d490: 6e74 6961 6c73 2e0a 0a0a 5265 6c65 6173  ntials....Releas
-0000d4a0: 6520 342e 3920 2872 656c 6561 7365 2064  e 4.9 (release d
-0000d4b0: 6174 653a 2032 3031 352d 3032 2d31 3329  ate: 2015-02-13)
-0000d4c0: 0a3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  .===============
-0000d4d0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0000d4e0: 3d3d 3d3d 3d3d 3d3d 0a4e 6577 2046 6561  ========.New Fea
-0000d4f0: 7475 7265 730a 2d2d 2d2d 2d2d 2d2d 2d2d  tures.----------
-0000d500: 2d2d 0a2d 2057 6865 6e20 7573 696e 6720  --.- When using 
-0000d510: 7468 6520 4a53 4f4e 2041 5049 2c20 7468  the JSON API, th
-0000d520: 6520 6368 2061 636c 2f64 6566 6163 6c20  e ch acl/defacl 
-0000d530: 7375 6263 6f6d 6d61 6e64 206e 6f77 2073  subcommand now s
-0000d540: 7570 706f 7274 730a 2020 7072 6f6a 6563  upports.  projec
-0000d550: 7420 6772 6f75 7073 2076 6961 2074 6865  t groups via the
-0000d560: 202d 7020 666c 6167 2e20 466f 7220 6465   -p flag. For de
-0000d570: 7461 696c 732c 2073 6565 2022 6773 7574  tails, see "gsut
-0000d580: 696c 2068 656c 7020 6163 6c20 6368 222e  il help acl ch".
-0000d590: 0a0a 4275 6720 4669 7865 730a 2d2d 2d2d  ..Bug Fixes.----
-0000d5a0: 2d2d 2d2d 2d0a 2d20 4669 7865 6420 6120  -----.- Fixed a 
-0000d5b0: 6275 6720 7468 6174 2063 6175 7365 6420  bug that caused 
-0000d5c0: 6461 6973 792d 6368 6169 6e20 636f 7069  daisy-chain copi
-0000d5d0: 6573 2028 696e 636c 7564 696e 6720 6372  es (including cr
-0000d5e0: 6f73 732d 7072 6f76 6964 6572 0a20 2063  oss-provider.  c
-0000d5f0: 6f70 6965 7329 2066 6f72 2066 696c 6573  opies) for files
-0000d600: 206c 6172 6765 2074 6861 6e20 3130 304d   large than 100M
-0000d610: 6942 2074 6f20 6661 696c 2e0a 2d20 4669  iB to fail..- Fi
-0000d620: 7865 6420 6120 6275 6720 7468 6174 2063  xed a bug that c
-0000d630: 6175 7365 6420 7374 7265 616d 696e 6720  aused streaming 
-0000d640: 7570 6c6f 6164 7320 7468 616e 2072 616e  uploads than ran
-0000d650: 2066 6f72 206c 6f6e 6765 7220 7468 616e   for longer than
-0000d660: 0a20 2061 6e20 686f 7572 2074 6f20 6661  .  an hour to fa
-0000d670: 696c 2077 6974 6820 4854 5450 2034 3030  il with HTTP 400
-0000d680: 732e 0a2d 2046 6978 6564 2061 2062 7567  s..- Fixed a bug
-0000d690: 2077 6865 7265 2070 6572 6664 6961 6720   where perfdiag 
-0000d6a0: 776f 756c 6420 6e6f 7420 7072 6f70 6572  would not proper
-0000d6b0: 6c79 2063 6c65 616e 2075 7020 6974 7320  ly clean up its 
-0000d6c0: 7465 7374 2066 696c 6573 2e0a 2d20 4669  test files..- Fi
-0000d6d0: 7865 6420 6120 6275 6720 7768 6572 6520  xed a bug where 
-0000d6e0: 7573 696e 6720 6c73 2077 6974 6820 7468  using ls with th
-0000d6f0: 6520 584d 4c20 4150 4920 636f 756c 6420  e XML API could 
-0000d700: 6d69 7374 616b 656e 6c79 2072 6570 6f72  mistakenly repor
-0000d710: 7420 6275 636b 6574 0a20 2063 6f6e 6669  t bucket.  confi
-0000d720: 6775 7261 7469 6f6e 2061 7320 7072 6573  guration as pres
-0000d730: 656e 742e 0a0a 4f74 6865 7220 4368 616e  ent...Other Chan
-0000d740: 6765 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ges.------------
-0000d750: 2d0a 2d20 5570 6461 7465 6420 646f 6375  -.- Updated docu
-0000d760: 6d65 6e74 6174 696f 6e20 666f 7220 6d65  mentation for me
-0000d770: 7461 6461 7461 2c20 7265 7472 6965 732c  tadata, retries,
-0000d780: 2073 6563 7572 6974 792c 2061 6e64 2073   security, and s
-0000d790: 7562 6469 7273 2e0a 2d20 5472 6163 6b65  ubdirs..- Tracke
-0000d7a0: 7220 6669 6c65 7320 6172 6520 6e6f 206c  r files are no l
-0000d7b0: 6f6e 6765 7220 7772 6974 7465 6e20 666f  onger written fo
-0000d7c0: 7220 736d 616c 6c20 646f 776e 6c6f 6164  r small download
-0000d7d0: 732e 0a0a 0a52 656c 6561 7365 2034 2e38  s....Release 4.8
-0000d7e0: 2028 7265 6c65 6173 6520 6461 7465 3a20   (release date: 
-0000d7f0: 3230 3135 2d30 312d 3233 290a 3d3d 3d3d  2015-01-23).====
-0000d800: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0000d810: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0000d820: 3d3d 3d0a 4e65 7720 4665 6174 7572 6573  ===.New Features
-0000d830: 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 2d20  .------------.- 
-0000d840: 6773 7574 696c 206e 6f77 2073 7570 706f  gsutil now suppo
-0000d850: 7274 7320 4854 5450 2070 726f 7879 2063  rts HTTP proxy c
-0000d860: 6f6e 6669 6775 7261 7469 6f6e 2076 6961  onfiguration via
-0000d870: 2074 6865 2068 7474 705f 7072 6f78 792c   the http_proxy,
-0000d880: 0a20 2068 7474 7073 5f70 726f 7879 2c20  .  https_proxy, 
-0000d890: 6f72 2048 5454 5053 5f50 524f 5859 2065  or HTTPS_PROXY e
-0000d8a0: 6e76 6972 6f6e 6d65 6e74 2076 6172 6961  nvironment varia
-0000d8b0: 626c 6573 2e20 5468 6973 2063 6f6e 6669  bles. This confi
-0000d8c0: 6775 7261 7469 6f6e 0a20 2069 7320 7573  guration.  is us
-0000d8d0: 6564 206f 6e6c 7920 6966 2070 726f 7879  ed only if proxy
-0000d8e0: 2063 6f6e 6669 6775 7261 7469 6f6e 2069   configuration i
-0000d8f0: 7320 6e6f 7420 7072 6573 656e 7420 696e  s not present in
-0000d900: 2074 6865 202e 626f 746f 0a20 2063 6f6e   the .boto.  con
-0000d910: 6669 6775 7261 7469 6f6e 2066 696c 652e  figuration file.
-0000d920: 0a2d 2067 7375 7469 6c20 7273 796e 6320  .- gsutil rsync 
-0000d930: 6e6f 7720 7375 7070 6f72 7473 2072 6567  now supports reg
-0000d940: 6578 2d62 6173 6564 2073 6f75 7263 6520  ex-based source 
-0000d950: 616e 6420 6465 7374 696e 6174 696f 6e20  and destination 
-0000d960: 5552 4c0a 2020 6578 636c 7573 696f 6e20  URL.  exclusion 
-0000d970: 7669 6120 7468 6520 2d78 2066 6c61 672e  via the -x flag.
-0000d980: 0a2d 2054 6865 2072 6d20 636f 6d6d 616e  .- The rm comman
-0000d990: 6420 6e6f 7720 7375 7070 6f72 7473 2061  d now supports a
-0000d9a0: 7267 756d 656e 7473 206f 6e20 7374 6469  rguments on stdi
-0000d9b0: 6e20 7669 6120 7468 6520 2d49 2066 6c61  n via the -I fla
-0000d9c0: 672e 0a0a 4275 6720 4669 7865 730a 2d2d  g...Bug Fixes.--
-0000d9d0: 2d2d 2d2d 2d2d 2d0a 2d20 4669 7865 6420  -------.- Fixed 
-0000d9e0: 6120 6275 6720 7768 6572 6520 7065 7266  a bug where perf
-0000d9f0: 6469 6167 2077 6f75 6c64 2066 6169 6c20  diag would fail 
-0000da00: 6966 206e 6574 7374 6174 2077 6173 206e  if netstat was n
-0000da10: 6f74 2061 7661 696c 6162 6c65 2e0a 2d20  ot available..- 
-0000da20: 4669 7865 6420 6120 6275 6720 7768 6572  Fixed a bug wher
-0000da30: 6520 7465 6d70 6f72 6172 7920 6361 5f63  e temporary ca_c
-0000da40: 6572 7473 2066 696c 6573 2077 6572 6520  erts files were 
-0000da50: 6e6f 7420 6265 696e 6720 636c 6561 6e65  not being cleane
-0000da60: 6420 7570 2e0a 2d20 4669 7865 6420 6120  d up..- Fixed a 
-0000da70: 6275 6720 696e 2072 7379 6e63 2074 6f20  bug in rsync to 
-0000da80: 756e 6e65 6365 7373 6172 696c 7920 7265  unnecessarily re
-0000da90: 6d6f 7665 206f 7220 7772 6974 6520 6f62  move or write ob
-0000daa0: 6a65 6374 732c 2069 6e20 736f 6d65 0a20  jects, in some. 
-0000dab0: 2063 6173 6573 206c 6561 7669 6e67 2074   cases leaving t
-0000dac0: 6865 2064 6573 7469 6e61 7469 6f6e 2069  he destination i
-0000dad0: 6e20 6120 6e6f 6e2d 7379 6e63 6872 6f6e  n a non-synchron
-0000dae0: 697a 6564 2073 7461 7465 2e0a 2020 6361  ized state..  ca
-0000daf0: 7573 6564 2072 7379 6e63 2074 6f20 756e  used rsync to un
-0000db00: 6e65 6365 7373 6172 696c 7920 7265 6d6f  necessarily remo
-0000db10: 7665 206f 7220 7265 7772 6974 6520 6f62  ve or rewrite ob
-0000db20: 6a65 6374 732e 0a2d 2046 6978 6564 2061  jects..- Fixed a
-0000db30: 2062 7567 2077 6865 7265 2072 7379 6e63   bug where rsync
-0000db40: 2074 656d 706f 7261 7279 206c 6973 7469   temporary listi
-0000db50: 6e67 2066 696c 6573 2077 6572 6520 6e6f  ng files were no
-0000db60: 7420 6265 696e 670a 2020 636c 6561 6e65  t being.  cleane
-0000db70: 6420 7570 2077 6865 6e20 7468 6520 7273  d up when the rs
-0000db80: 796e 6320 7072 6f63 6573 7320 7761 7320  ync process was 
-0000db90: 6b69 6c6c 6564 2e0a 2d20 4669 7865 6420  killed..- Fixed 
-0000dba0: 6120 6275 6720 7768 6572 6520 7273 796e  a bug where rsyn
-0000dbb0: 6320 776f 756c 6420 7265 6d6f 7665 2064  c would remove d
-0000dbc0: 6573 7469 6e61 7469 6f6e 2055 524c 7320  estination URLs 
-0000dbd0: 6966 206c 6973 7469 6e67 2074 6865 0a20  if listing the. 
-0000dbe0: 2073 6f75 7263 6520 656e 636f 756e 7465   source encounte
-0000dbf0: 7265 6420 6120 6e6f 6e2d 7265 7472 7961  red a non-retrya
-0000dc00: 626c 6520 6661 696c 7572 6520 2866 6f72  ble failure (for
-0000dc10: 2065 7861 6d70 6c65 2c20 6966 2074 6865   example, if the
-0000dc20: 2073 6f75 7263 650a 2020 6469 6420 6e6f   source.  did no
-0000dc30: 7420 6578 6973 7429 2e0a 2d20 4669 7865  t exist)..- Fixe
-0000dc40: 6420 6120 6275 6720 7768 6572 6520 6d76  d a bug where mv
-0000dc50: 2077 6f75 6c64 2066 6169 6c20 666f 7220   would fail for 
-0000dc60: 736f 6d65 2055 6e69 636f 6465 2066 696c  some Unicode fil
-0000dc70: 656e 616d 6573 2e0a 2d20 4669 7865 6420  enames..- Fixed 
-0000dc80: 6120 6275 6720 7768 6572 6520 6d76 2077  a bug where mv w
-0000dc90: 6f75 6c64 2072 656d 6f76 6520 7468 6520  ould remove the 
-0000dca0: 736f 7572 6365 2055 524c 2061 6674 6572  source URL after
-0000dcb0: 2073 6b69 7070 696e 6720 7468 650a 2020   skipping the.  
-0000dcc0: 6465 7374 696e 6174 696f 6e20 5552 4c2e  destination URL.
-0000dcd0: 0a2d 2046 6978 6564 2061 2062 7567 2074  .- Fixed a bug t
-0000dce0: 6861 7420 6361 7573 6564 2064 6169 7379  hat caused daisy
-0000dcf0: 2063 6861 696e 2075 706c 6f61 6473 2074   chain uploads t
-0000dd00: 6f20 6861 6e67 2069 6620 7468 6520 646f  o hang if the do
-0000dd10: 776e 6c6f 6164 2074 6872 6561 640a 2020  wnload thread.  
-0000dd20: 7261 6973 6564 2061 6e20 6578 6365 7074  raised an except
-0000dd30: 696f 6e2e 0a2d 2046 6978 6564 2061 2062  ion..- Fixed a b
-0000dd40: 7567 2077 6865 7265 2061 636c 2063 6820  ug where acl ch 
-0000dd50: 776f 756c 6420 7265 7475 726e 2061 207a  would return a z
-0000dd60: 6572 6f20 6578 6974 2063 6f64 6520 6576  ero exit code ev
-0000dd70: 656e 2069 6620 6974 2066 6169 6c65 642e  en if it failed.
-0000dd80: 0a2d 2046 6978 6564 2061 2062 7567 2074  .- Fixed a bug t
-0000dd90: 6861 7420 736f 6d65 7469 6d65 7320 6361  hat sometimes ca
-0000dda0: 7573 6564 2074 6865 2070 726f 6772 6573  used the progres
-0000ddb0: 7320 6469 7370 6c61 7920 746f 2072 656e  s display to ren
-0000ddc0: 6465 7220 6d75 6c74 6970 6c65 0a20 2074  der multiple.  t
-0000ddd0: 696d 6573 2061 7420 7468 6520 656e 6420  imes at the end 
-0000dde0: 6f66 2061 6e20 7570 6c6f 6164 206f 7220  of an upload or 
-0000ddf0: 646f 776e 6c6f 6164 2e0a 0a4f 7468 6572  download...Other
-0000de00: 2043 6861 6e67 6573 0a2d 2d2d 2d2d 2d2d   Changes.-------
-0000de10: 2d2d 2d2d 2d2d 0a2d 2052 6573 756d 6162  ------.- Resumab
-0000de20: 6c65 2075 706c 6f61 6473 206f 6620 6669  le uploads of fi
-0000de30: 6c65 7320 7573 696e 6720 7468 6520 4a53  les using the JS
-0000de40: 4f4e 2041 5049 206e 6f77 2073 656e 6420  ON API now send 
-0000de50: 7468 6569 7220 6461 7461 2069 6e20 610a  their data in a.
-0000de60: 2020 7369 6e67 6c65 2072 6571 7565 7374    single request
-0000de70: 2c20 6d61 6b69 6e67 2073 6570 6172 6174  , making separat
-0000de80: 6520 4854 5450 2063 616c 6c73 206f 6e6c  e HTTP calls onl
-0000de90: 7920 7768 656e 2072 6573 756d 696e 6720  y when resuming 
-0000dea0: 6973 206e 6563 6573 7361 7279 2e0a 2d20  is necessary..- 
-0000deb0: 5468 6520 7465 7374 2063 6f6d 6d61 6e64  The test command
-0000dec0: 206e 6f77 2072 756e 7320 7465 7374 7320   now runs tests 
-0000ded0: 696e 2070 6172 616c 6c65 6c20 6279 2064  in parallel by d
-0000dee0: 6566 6175 6c74 2c20 616e 6420 7465 7374  efault, and test
-0000def0: 0a20 2070 6172 616c 6c65 6c69 736d 206f  .  parallelism o
-0000df00: 6e20 5769 6e64 6f77 7320 6973 206e 6f77  n Windows is now
-0000df10: 2073 7570 706f 7274 6564 2e0a 2d20 416c   supported..- Al
-0000df20: 6c20 6e6f 6e2d 7374 7265 616d 696e 6720  l non-streaming 
-0000df30: 646f 776e 6c6f 6164 7320 6172 6520 6e6f  downloads are no
-0000df40: 7720 7265 7375 6d61 626c 6520 2861 6e64  w resumable (and
-0000df50: 2072 6574 7279 6162 6c65 2920 6279 2064   retryable) by d
-0000df60: 6566 6175 6c74 2c0a 2020 7265 6761 7264  efault,.  regard
-0000df70: 6c65 7373 206f 6620 7369 7a65 2e0a 2d20  less of size..- 
-0000df80: 4361 6e6e 6564 2041 434c 7320 616e 6420  Canned ACLs and 
-0000df90: 6361 6e6e 6564 2064 6566 6175 6c74 206f  canned default o
-0000dfa0: 626a 6563 7420 4143 4c73 2061 7265 206e  bject ACLs are n
-0000dfb0: 6f77 2073 7570 706f 7274 6564 2069 6e20  ow supported in 
-0000dfc0: 7468 6520 4a53 4f4e 0a20 2041 5049 2028  the JSON.  API (
-0000dfd0: 7072 6576 696f 7573 6c79 2074 6865 7920  previously they 
-0000dfe0: 776f 756c 6420 6661 6c6c 2062 6163 6b20  would fall back 
-0000dff0: 746f 2075 7369 6e67 2074 6865 2058 4d4c  to using the XML
-0000e000: 2041 5049 292e 0a2d 2047 6f6f 676c 6520   API)..- Google 
-0000e010: 436f 6d70 7574 6520 456e 6769 6e65 2073  Compute Engine s
-0000e020: 6572 7669 6365 2061 6363 6f75 6e74 2063  ervice account c
-0000e030: 7265 6465 6e74 6961 6c20 746f 6b65 6e73  redential tokens
-0000e040: 2061 7265 206e 6f77 2063 6163 6865 642c   are now cached,
-0000e050: 0a20 2061 766f 6964 696e 6720 756e 6e65  .  avoiding unne
-0000e060: 6365 7373 6172 7920 7265 6672 6573 6865  cessary refreshe
-0000e070: 732e 0a2d 2049 6d70 726f 7665 6420 6465  s..- Improved de
-0000e080: 7465 6374 696f 6e20 6f66 2074 6865 2047  tection of the G
-0000e090: 6f6f 676c 6520 436f 6d70 7574 6520 456e  oogle Compute En
-0000e0a0: 6769 6e65 206d 6574 6164 6174 6120 7365  gine metadata se
-0000e0b0: 7276 6572 2c0a 2020 7061 7274 6963 756c  rver,.  particul
-0000e0c0: 6172 6c79 2077 6865 6e20 7573 696e 6720  arly when using 
-0000e0d0: 7468 6520 2d6d 2066 6c61 6720 666f 7220  the -m flag for 
-0000e0e0: 6d75 6c74 6970 726f 6365 7373 696e 672e  multiprocessing.
-0000e0f0: 0a2d 2041 6464 6564 206e 6577 2068 656c  .- Added new hel
-0000e100: 7020 7365 6374 696f 6e73 2061 626f 7574  p sections about
-0000e110: 2066 696c 656e 616d 6520 656e 636f 6469   filename encodi
-0000e120: 6e67 2061 6e64 2073 6563 7572 6974 792f  ng and security/
-0000e130: 7072 6976 6163 790a 2020 636f 6e73 6964  privacy.  consid
-0000e140: 6572 6174 696f 6e73 2e0a 2d20 446f 776e  erations..- Down
-0000e150: 6c6f 6164 2070 726f 6772 6573 7320 6973  load progress is
-0000e160: 206e 6f77 2064 6973 706c 6179 6564 2066   now displayed f
-0000e170: 6f72 2073 6d61 6c6c 2058 4d4c 2041 5049  or small XML API
-0000e180: 2064 6f77 6e6c 6f61 6473 2e0a 0a0a 5265   downloads....Re
-0000e190: 6c65 6173 6520 342e 3720 2872 656c 6561  lease 4.7 (relea
-0000e1a0: 7365 2064 6174 653a 2032 3031 342d 3131  se date: 2014-11
-0000e1b0: 2d31 3729 0a3d 3d3d 3d3d 3d3d 3d3d 3d3d  -17).===========
-0000e1c0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0000e1d0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 0a4e 6577  ============.New
-0000e1e0: 2046 6561 7475 7265 730a 2d2d 2d2d 2d2d   Features.------
-0000e1f0: 2d2d 2d2d 2d2d 0a2d 2054 6162 2063 6f6d  ------.- Tab com
-0000e200: 706c 6574 696f 6e20 6e6f 7720 776f 726b  pletion now work
-0000e210: 7320 6f6e 2067 733a 2f2f 2055 524c 7320  s on gs:// URLs 
-0000e220: 2866 6f72 2043 6c6f 7564 2053 444b 2069  (for Cloud SDK i
-0000e230: 6e73 7461 6c6c 7320 6f6e 6c79 292e 0a20  nstalls only).. 
-0000e240: 2054 6f20 696e 7374 616c 6c20 7669 6120   To install via 
-0000e250: 436c 6f75 6420 5344 4b2c 2073 6565 2068  Cloud SDK, see h
-0000e260: 7474 7073 3a2f 2f63 6c6f 7564 2e67 6f6f  ttps://cloud.goo
-0000e270: 676c 652e 636f 6d2f 7364 6b2f 2351 7569  gle.com/sdk/#Qui
-0000e280: 636b 5f53 7461 7274 0a2d 2053 7472 6561  ck_Start.- Strea
-0000e290: 6d69 6e67 2075 706c 6f61 6473 2028 7769  ming uploads (wi
-0000e2a0: 7468 2073 6f75 7263 6520 5552 4c20 222d  th source URL "-
-0000e2b0: 2229 2075 7369 6e67 2074 6865 204a 534f  ") using the JSO
-0000e2c0: 4e20 4150 4920 6e6f 7720 6275 6666 6572  N API now buffer
-0000e2d0: 0a20 2069 6e2d 6d65 6d6f 7279 2075 7020  .  in-memory up 
-0000e2e0: 746f 2031 3030 4d42 2c20 616c 6c6f 7769  to 100MB, allowi
-0000e2f0: 6e67 206c 6172 6765 2073 7472 6561 6d73  ng large streams
-0000e300: 2074 6f20 6265 2072 6574 7269 6564 2069   to be retried i
-0000e310: 6e20 7468 6520 6576 656e 740a 2020 6f66  n the event.  of
-0000e320: 206e 6574 776f 726b 2066 6c61 6b69 6e65   network flakine
-0000e330: 7373 206f 7220 7365 7276 6963 6520 6572  ss or service er
-0000e340: 726f 7273 2e0a 2d20 5265 7375 6d61 626c  rors..- Resumabl
-0000e350: 6520 7570 6c6f 6164 7320 7468 6174 2072  e uploads that r
-0000e360: 6563 6569 7665 2061 2066 6174 616c 2073  eceive a fatal s
-0000e370: 6572 7669 6365 2065 7272 6f72 2028 7479  ervice error (ty
-0000e380: 7069 6361 6c6c 7920 6120 3431 3029 0a20  pically a 410). 
-0000e390: 2061 7265 206e 6f77 2061 7574 6f6d 6174   are now automat
-0000e3a0: 6963 616c 6c79 2072 6574 7269 6564 2066  ically retried f
-0000e3b0: 726f 6d20 7468 6520 6265 6769 6e6e 696e  rom the beginnin
-0000e3c0: 672e 0a0a 4275 6720 4669 7865 730a 2d2d  g...Bug Fixes.--
-0000e3d0: 2d2d 2d2d 2d2d 2d0a 2d20 4669 7865 6420  -------.- Fixed 
-0000e3e0: 616e 2061 7069 746f 6f6c 7320 6275 6720  an apitools bug 
-0000e3f0: 7468 6174 2069 6d70 6163 7465 6420 7570  that impacted up
-0000e400: 6c6f 6164 2070 6572 666f 726d 616e 6365  load performance
-0000e410: 2061 6e64 2063 6175 7365 640a 2020 2252   and caused.  "R
-0000e420: 6574 7279 696e 6720 6672 6f6d 2062 7974  etrying from byt
-0000e430: 6520 5f5f 2061 6674 6572 2065 7863 6570  e __ after excep
-0000e440: 7469 6f6e 2220 746f 2070 7269 6e74 2061  tion" to print a
-0000e450: 6674 6572 2065 7665 7279 2031 3030 4d69  fter every 100Mi
-0000e460: 422e 0a2d 2046 6978 6564 205f 2466 6f6c  B..- Fixed _$fol
-0000e470: 6465 7224 2070 6c61 6365 686f 6c64 6572  der$ placeholder
-0000e480: 206f 626a 6563 7420 6465 7465 6374 696f   object detectio
-0000e490: 6e20 6f6e 2076 6572 7369 6f6e 6564 2062  n on versioned b
-0000e4a0: 7563 6b65 7473 2e0a 2d20 5265 6d6f 7665  uckets..- Remove
-0000e4b0: 6420 616e 2075 6e6e 6563 6573 7361 7279  d an unnecessary
-0000e4c0: 2063 7265 6465 6e74 6961 6c20 6368 6563   credential chec
-0000e4d0: 6b20 6f6e 206c 6f61 6420 7768 6963 6820  k on load which 
-0000e4e0: 696e 6372 6561 7365 640a 2020 7374 6172  increased.  star
-0000e4f0: 7475 7020 7469 6d65 2062 7920 6f76 6572  tup time by over
-0000e500: 206f 6e65 2073 6563 6f6e 6420 696e 2073   one second in s
-0000e510: 6f6d 6520 6361 7365 732e 0a2d 2053 6967  ome cases..- Sig
-0000e520: 6e55 524c 206e 6f77 2070 726f 7065 726c  nURL now properl
-0000e530: 7920 7265 7472 6965 7320 7768 656e 2063  y retries when c
-0000e540: 6865 636b 696e 6720 6966 2074 6865 2073  hecking if the s
-0000e550: 6967 6e65 6420 6f62 6a65 6374 2069 730a  igned object is.
-0000e560: 2020 7265 6164 6162 6c65 2e0a 2d20 4669    readable..- Fi
-0000e570: 6c65 7320 7769 7468 2062 6f74 6820 436f  les with both Co
-0000e580: 6e74 656e 742d 456e 636f 6469 6e67 2061  ntent-Encoding a
-0000e590: 6e64 2043 6f6e 7465 6e74 2d54 7970 6520  nd Content-Type 
-0000e5a0: 677a 6970 2061 7265 206e 6f77 2070 726f  gzip are now pro
-0000e5b0: 7065 726c 790a 2020 7265 6d6f 7665 6420  perly.  removed 
-0000e5c0: 7768 656e 2068 6173 6820 7661 6c69 6461  when hash valida
-0000e5d0: 7469 6f6e 2066 6169 6c73 2028 6f6e 6c79  tion fails (only
-0000e5e0: 206f 6e65 206f 6620 7468 6520 7477 6f20   one of the two 
-0000e5f0: 7368 6f75 6c64 2062 6520 7365 7429 2e0a  should be set)..
-0000e600: 2d20 5468 6520 782d 676f 6f67 2d69 662d  - The x-goog-if-
-0000e610: 6765 6e65 7261 7469 6f6e 2d6d 6174 6368  generation-match
-0000e620: 3a30 2068 6561 6465 7220 6e6f 7720 776f  :0 header now wo
-0000e630: 726b 7320 7072 6f70 6572 6c79 2077 6974  rks properly wit
-0000e640: 6820 7468 6520 584d 4c20 4150 492e 0a2d  h the XML API..-
-0000e650: 2046 6978 6564 2061 2062 7567 2074 6861   Fixed a bug tha
-0000e660: 7420 6361 7573 6564 2022 6465 6661 636c  t caused "defacl
-0000e670: 2063 6822 206f 6e20 6120 6275 636b 6574   ch" on a bucket
-0000e680: 2077 6974 6820 6120 7072 6976 6174 6520   with a private 
-0000e690: 4143 4c20 746f 2066 6169 6c2e 0a2d 2054  ACL to fail..- T
-0000e6a0: 6865 2072 6d20 636f 6d6d 616e 6420 6e6f  he rm command no
-0000e6b0: 7720 7072 6f70 6572 6c79 2073 7570 706f  w properly suppo
-0000e6c0: 7274 7320 7072 6563 6f6e 6469 7469 6f6e  rts precondition
-0000e6d0: 2068 6561 6465 7273 2e0a 2d20 4669 7865   headers..- Fixe
-0000e6e0: 6420 6120 6275 6720 7468 6174 2063 6175  d a bug that cau
-0000e6f0: 7365 6420 6c61 7267 6520 7374 7265 616d  sed large stream
-0000e700: 696e 6720 7570 6c6f 6164 7320 746f 2066  ing uploads to f
-0000e710: 6169 6c20 7769 7468 2074 6865 206d 6573  ail with the mes
-0000e720: 7361 6765 0a20 2022 4661 696c 7572 653a  sage.  "Failure:
-0000e730: 206c 656e 6774 6820 746f 6f20 6c61 7267   length too larg
-0000e740: 6522 2077 6865 6e20 7573 696e 6720 7468  e" when using th
-0000e750: 6520 4a53 4f4e 2041 5049 2e0a 2d20 4669  e JSON API..- Fi
-0000e760: 7865 6420 6120 6275 6720 7468 6174 2063  xed a bug that c
-0000e770: 6175 7365 6420 4a53 4f4e 206c 6966 6563  aused JSON lifec
-0000e780: 7963 6c65 2063 6f6e 6669 6775 7261 7469  ycle configurati
-0000e790: 6f6e 7320 7769 7468 2063 7265 6174 6564  ons with created
-0000e7a0: 4265 666f 7265 0a20 2063 6f6e 6469 7469  Before.  conditi
-0000e7b0: 6f6e 7320 746f 2066 6169 6c20 7769 7468  ons to fail with
-0000e7c0: 2061 2044 6563 6f64 6545 7272 6f72 2e0a   a DecodeError..
-0000e7d0: 0a4f 7468 6572 2043 6861 6e67 6573 0a2d  .Other Changes.-
-0000e7e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d 2042  ------------.- B
-0000e7f0: 7974 6520 636f 756e 7473 206e 6f77 2064  yte counts now d
-0000e800: 6973 706c 6179 2061 6363 7572 6174 6520  isplay accurate 
-0000e810: 6162 6272 6576 6961 7469 6f6e 7320 6f66  abbreviations of
-0000e820: 2062 696e 6172 7920 7369 7a69 6e67 2e20   binary sizing. 
-0000e830: 466f 7220 6578 616d 706c 652c 0a20 206d  For example,.  m
-0000e840: 6573 7361 6765 7320 7072 6576 696f 7573  essages previous
-0000e850: 6c79 206c 6162 656c 6564 204d 4220 6172  ly labeled MB ar
-0000e860: 6520 6e6f 7720 7072 6f70 6572 6c79 206c  e now properly l
-0000e870: 6162 656c 6564 204d 6942 2074 6f20 696e  abeled MiB to in
-0000e880: 6469 6361 7465 0a20 2032 2a2a 3230 2062  dicate.  2**20 b
-0000e890: 7974 6573 2e20 4f6e 6c79 2074 6865 206c  ytes. Only the l
-0000e8a0: 6162 656c 696e 6720 6368 616e 6765 6420  abeling changed 
-0000e8b0: 2d20 7468 6520 6163 7475 616c 2073 697a  - the actual siz
-0000e8c0: 6573 2077 6572 6520 616c 7761 7973 2062  es were always b
-0000e8d0: 696e 6172 792e 0a2d 2049 6d70 726f 7665  inary..- Improve
-0000e8e0: 6420 436c 6f75 6420 5344 4b20 696e 7465  d Cloud SDK inte
-0000e8f0: 6772 6174 696f 6e2c 2069 6e63 6c75 6469  gration, includi
-0000e900: 6e67 2069 6d70 726f 7665 6420 6572 726f  ng improved erro
-0000e910: 7220 6d65 7373 6167 6573 0a20 2061 6e64  r messages.  and
-0000e920: 2069 6e73 7472 7563 7469 6f6e 732e 0a2d   instructions..-
-0000e930: 2054 6865 206e 756d 5f72 6574 7269 6573   The num_retries
-0000e940: 202e 626f 746f 2063 6f6e 6669 6775 7261   .boto configura
-0000e950: 7469 6f6e 2076 616c 7565 206e 6f77 2061  tion value now a
-0000e960: 7070 6c69 6573 2074 6f20 616c 6c20 7265  pplies to all re
-0000e970: 7175 6573 7473 0a20 2028 7072 6576 696f  quests.  (previo
-0000e980: 7573 6c79 2069 7420 7761 7320 6967 6e6f  usly it was igno
-0000e990: 7265 6420 666f 7220 4a53 4f4e 2041 5049  red for JSON API
-0000e9a0: 2072 6571 7565 7374 7329 2e0a 2d20 7273   requests)..- rs
-0000e9b0: 796e 6320 6e6f 7720 776f 726b 7320 7769  ync now works wi
-0000e9c0: 7468 206e 6f6e 2d65 7869 7374 656e 7420  th non-existent 
-0000e9d0: 6465 7374 696e 6174 696f 6e20 7375 6264  destination subd
-0000e9e0: 6972 6563 746f 7269 6573 2e0a 2d20 5261  irectories..- Ra
-0000e9f0: 6973 6564 2074 6865 2064 6566 6175 6c74  ised the default
-0000ea00: 2072 6573 756d 6162 6c65 2075 706c 6f61   resumable uploa
-0000ea10: 6420 7468 7265 7368 6f6c 6420 6672 6f6d  d threshold from
-0000ea20: 2032 4d42 2074 6f20 384d 4220 746f 0a20   2MB to 8MB to. 
-0000ea30: 2069 6d70 726f 7665 2070 6572 666f 726d   improve perform
-0000ea40: 616e 6365 2e0a 2d20 4265 6e69 676e 2072  ance..- Benign r
-0000ea50: 6574 7279 206d 6573 7361 6765 7320 6e6f  etry messages no
-0000ea60: 7720 7072 696e 7420 6f6e 6c79 2077 6865  w print only whe
-0000ea70: 6e20 6465 6275 6720 6d6f 6465 2069 7320  n debug mode is 
-0000ea80: 656e 6162 6c65 6420 7669 6120 7468 650a  enabled via the.
-0000ea90: 2020 746f 702d 6c65 7665 6c20 2d64 2066    top-level -d f
-0000eaa0: 6c61 672e 0a2d 2054 6865 2074 6f70 2d6c  lag..- The top-l
-0000eab0: 6576 656c 202d 7120 666c 6167 206e 6f77  evel -q flag now
-0000eac0: 2073 7570 7072 6573 7365 7320 7375 6767   suppresses sugg
-0000ead0: 6573 7469 6f6e 7320 746f 2075 7365 2074  estions to use t
-0000eae0: 6865 202d 6d20 666c 6167 2e0a 2d20 436f  he -m flag..- Co
-0000eaf0: 6d6d 616e 6420 7379 6e6f 7073 6973 2069  mmand synopsis i
-0000eb00: 7320 6e6f 7720 6f75 7470 7574 2077 6865  s now output whe
-0000eb10: 6e20 7468 6520 7772 6f6e 6720 6e75 6d62  n the wrong numb
-0000eb20: 6572 206f 6620 6172 6775 6d65 6e74 7320  er of arguments 
-0000eb30: 6172 650a 2020 7072 6f76 6964 6564 2e0a  are.  provided..
-0000eb40: 2d20 5265 6d6f 7665 6420 6465 7065 6e64  - Removed depend
-0000eb50: 656e 6379 206f 6e20 676f 6f67 6c65 2d61  ency on google-a
-0000eb60: 7069 2d70 7974 686f 6e2d 636c 6965 6e74  pi-python-client
-0000eb70: 206d 6f64 756c 652c 2061 6464 6564 2064   module, added d
-0000eb80: 6570 656e 6465 6e63 6965 7320 6f6e 0a20  ependencies on. 
-0000eb90: 206f 6175 7468 3263 6c69 656e 7420 616e   oauth2client an
-0000eba0: 6420 7369 7820 6d6f 6475 6c65 732e 0a0a  d six modules...
-0000ebb0: 5265 6c65 6173 6520 342e 3620 2872 656c  Release 4.6 (rel
-0000ebc0: 6561 7365 2064 6174 653a 2032 3031 342d  ease date: 2014-
-0000ebd0: 3039 2d30 3829 0a3d 3d3d 3d3d 3d3d 3d3d  09-08).=========
-0000ebe0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0000ebf0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 0a0a  ==============..
-0000ec00: 4275 6720 4669 7865 730a 2d2d 2d2d 2d2d  Bug Fixes.------
-0000ec10: 2d2d 2d0a 2d20 4669 7865 6420 6120 5479  ---.- Fixed a Ty
-0000ec20: 7065 4572 726f 7220 6275 6720 7468 6174  peError bug that
-0000ec30: 206f 6363 7572 7265 6420 696e 2070 6572   occurred in per
-0000ec40: 6664 6961 6720 7772 6974 6520 7468 726f  fdiag write thro
-0000ec50: 7567 6870 7574 2074 6573 7473 2e0a 2d20  ughput tests..- 
-0000ec60: 4669 7865 6420 616e 2072 7379 6e63 2062  Fixed an rsync b
-0000ec70: 7567 2074 6861 7420 6361 7573 6564 2069  ug that caused i
-0000ec80: 6e76 616c 6964 2073 796d 6c69 6e6b 7320  nvalid symlinks 
-0000ec90: 746f 2061 626f 7274 2074 6865 2074 7261  to abort the tra
-0000eca0: 6e73 6665 720a 2020 6576 656e 2077 6865  nsfer.  even whe
-0000ecb0: 6e20 2d65 206f 7074 696f 6e20 7761 7320  n -e option was 
-0000ecc0: 7370 6563 6966 6965 642e 0a2d 2046 6978  specified..- Fix
-0000ecd0: 6564 2061 2070 6572 6664 6961 6720 6173  ed a perfdiag as
-0000ece0: 7375 6d70 7469 6f6e 2074 6861 7420 6970  sumption that ip
-0000ecf0: 6164 6472 6c69 7374 2077 6173 2070 6f70  addrlist was pop
-0000ed00: 756c 6174 6564 2e0a 2d20 4669 7865 6420  ulated..- Fixed 
-0000ed10: 616e 2041 7474 7269 6275 7465 4572 726f  an AttributeErro
-0000ed20: 7220 7768 656e 2073 6574 7469 6e67 2061  r when setting a
-0000ed30: 6e20 696e 7661 6c69 6420 6361 6e6e 6564  n invalid canned
-0000ed40: 2041 434c 2077 6974 6820 6465 6661 636c   ACL with defacl
-0000ed50: 2073 6574 2e0a 2d20 4669 7865 6420 6120   set..- Fixed a 
-0000ed60: 6275 6720 7768 6572 6520 6e6f 6e2d 7265  bug where non-re
-0000ed70: 7375 6d61 626c 6520 7570 6c6f 6164 7320  sumable uploads 
-0000ed80: 776f 756c 6420 696e 636c 7564 6520 7061  would include pa
-0000ed90: 796c 6f61 6420 696e 2064 6562 7567 206f  yload in debug o
-0000eda0: 7574 7075 740a 2020 7768 656e 2066 6f72  utput.  when for
-0000edb0: 2072 756e 6e69 6e67 2069 6e20 6465 6275   running in debu
-0000edc0: 6720 6d6f 6465 2028 2d44 292e 0a0a 4f74  g mode (-D)...Ot
-0000edd0: 6865 7220 4368 616e 6765 730a 2d2d 2d2d  her Changes.----
-0000ede0: 2d2d 2d2d 2d2d 2d2d 2d0a 2d20 4164 6465  ---------.- Adde
-0000edf0: 6420 7468 6520 7072 6f78 795f 7264 6e73  d the proxy_rdns
-0000ee00: 2063 6f6e 6669 6775 7261 7469 6f6e 2076   configuration v
-0000ee10: 6172 6961 626c 6520 666f 7220 636c 6965  ariable for clie
-0000ee20: 6e74 7320 7468 6174 0a20 2064 6f20 444e  nts that.  do DN
-0000ee30: 5320 6c6f 6f6b 7570 7320 7669 6120 6120  S lookups via a 
-0000ee40: 7072 6f78 792e 0a2d 2041 6464 6564 2074  proxy..- Added t
-0000ee50: 6865 2073 7461 7465 5f64 6972 2063 6f6e  he state_dir con
-0000ee60: 6669 6775 7261 7469 6f6e 2076 6172 6961  figuration varia
-0000ee70: 626c 6520 666f 7220 6368 6f6f 7369 6e67  ble for choosing
-0000ee80: 2074 6865 206c 6f63 6174 696f 6e20 6f66   the location of
-0000ee90: 0a20 2067 7375 7469 6c27 7320 696e 7465  .  gsutil's inte
-0000eea0: 726e 616c 2073 7461 7465 2066 696c 6573  rnal state files
-0000eeb0: 2c20 696e 636c 7564 696e 6720 7265 7375  , including resu
-0000eec0: 6d61 626c 6520 7472 616e 7366 6572 2074  mable transfer t
-0000eed0: 7261 636b 6572 2066 696c 6573 2e0a 2020  racker files..  
-0000eee0: 7265 7375 6d61 626c 655f 7472 6163 6b65  resumable_tracke
-0000eef0: 725f 6469 7220 636f 6e66 6967 7572 6174  r_dir configurat
-0000ef00: 696f 6e20 7661 7269 6162 6c65 2069 7320  ion variable is 
-0000ef10: 6e6f 7720 6465 7072 6563 6174 6564 2e0a  now deprecated..
-0000ef20: 2d20 4164 6465 6420 444e 532c 2063 6f6e  - Added DNS, con
-0000ef30: 6e65 6374 696f 6e20 6c61 7465 6e63 792c  nection latency,
-0000ef40: 2061 6e64 2070 726f 7879 2075 7365 2069   and proxy use i
-0000ef50: 6e66 6f72 6d61 7469 6f6e 2074 6f20 7065  nformation to pe
-0000ef60: 7266 6469 6167 0a20 2063 6f6d 6d61 6e64  rfdiag.  command
-0000ef70: 2e0a 2d20 7065 7266 6469 6167 2063 6f6d  ..- perfdiag com
-0000ef80: 6d61 6e64 2077 696c 6c20 6e6f 7420 7065  mand will not pe
-0000ef90: 7266 6f72 6d20 444e 5320 6c6f 6f6b 7570  rform DNS lookup
-0000efa0: 7320 6966 2074 6865 7920 6172 6520 6469  s if they are di
-0000efb0: 7361 626c 6564 2069 6e0a 2020 626f 746f  sabled in.  boto
-0000efc0: 2063 6f6e 6669 672e 0a2d 2070 6572 6664   config..- perfd
-0000efd0: 6961 6720 636f 6d6d 616e 6420 7769 6c6c  iag command will
-0000efe0: 206e 6f77 206f 6e6c 7920 6174 7465 6d70   now only attemp
-0000eff0: 7420 746f 2064 656c 6574 6520 7570 6c6f  t to delete uplo
-0000f000: 6164 6564 206f 626a 6563 7473 2077 6865  aded objects whe
-0000f010: 6e0a 2020 7275 6e6e 696e 6720 7772 6974  n.  running writ
-0000f020: 6520 7465 7374 732e 0a2d 2041 6464 6564  e tests..- Added
-0000f030: 2063 6f64 6520 636f 7665 7261 6765 2073   code coverage s
-0000f040: 7570 706f 7274 2074 6f20 7465 7374 2063  upport to test c
-0000f050: 6f6d 6d61 6e64 2e0a 2d20 7273 796e 6320  ommand..- rsync 
-0000f060: 2d64 206e 6f77 2073 7563 6365 6564 7320  -d now succeeds 
-0000f070: 6f6e 2061 2034 3034 2066 6f72 2061 2074  on a 404 for a t
-0000f080: 6f2d 6265 2d64 656c 6574 6564 206f 626a  o-be-deleted obj
-0000f090: 6563 7420 2866 6f72 2065 7861 6d70 6c65  ect (for example
-0000f0a0: 2c20 7768 656e 0a20 2074 6865 206f 626a  , when.  the obj
-0000f0b0: 6563 7420 7761 7320 616c 7265 6164 7920  ect was already 
-0000f0c0: 6465 6c65 7465 6420 6279 2061 6e20 6578  deleted by an ex
-0000f0d0: 7465 726e 616c 2070 726f 6365 7373 292e  ternal process).
-0000f0e0: 0a0a 5265 6c65 6173 6520 342e 3520 2872  ..Release 4.5 (r
-0000f0f0: 656c 6561 7365 2064 6174 653a 2032 3031  elease date: 201
-0000f100: 342d 3038 2d31 3429 0a3d 3d3d 3d3d 3d3d  4-08-14).=======
-0000f110: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0000f120: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0000f130: 0a0a 4275 6720 4669 7865 730a 2d2d 2d2d  ..Bug Fixes.----
-0000f140: 2d2d 2d2d 2d0a 2d20 4669 7865 6420 6120  -----.- Fixed a 
-0000f150: 6275 6720 7468 6174 2063 6175 7365 6420  bug that caused 
-0000f160: 7265 7375 6d61 626c 6520 7570 6c6f 6164  resumable upload
-0000f170: 7320 746f 2072 6573 7461 7274 2069 6620  s to restart if 
-0000f180: 6773 7574 696c 2077 6173 0a20 2074 6572  gsutil was.  ter
-0000f190: 6d69 6e61 7465 6420 7769 7468 2043 5452  minated with CTR
-0000f1a0: 4c2d 432e 0a2d 2046 6978 6564 2061 2062  L-C..- Fixed a b
-0000f1b0: 7567 2069 6e20 6465 6661 636c 2063 6820  ug in defacl ch 
-0000f1c0: 636f 6d6d 616e 6420 7468 6174 2063 6175  command that cau
-0000f1d0: 7365 6420 6120 6661 696c 7572 6520 7768  sed a failure wh
-0000f1e0: 656e 2075 7064 6174 696e 670a 2020 616e  en updating.  an
-0000f1f0: 2065 7869 7374 696e 6720 6465 6661 756c   existing defaul
-0000f200: 7420 6f62 6a65 6374 2041 434c 2065 6e74  t object ACL ent
-0000f210: 7279 2e0a 2d20 4669 7865 6420 616e 2069  ry..- Fixed an i
-0000f220: 6e76 616c 6964 206c 6974 6572 616c 2062  nvalid literal b
-0000f230: 7567 2064 7572 696e 6720 7273 796e 6320  ug during rsync 
-0000f240: 6669 6c65 206c 6973 7469 6e67 2e0a 2d20  file listing..- 
-0000f250: 4d61 6465 2073 6576 6572 616c 2069 6d70  Made several imp
-0000f260: 726f 7665 6d65 6e74 7320 746f 204a 534f  rovements to JSO
-0000f270: 4e20 7570 6c6f 6164 2073 7461 6269 6c69  N upload stabili
-0000f280: 7479 2c20 696e 636c 7564 696e 6720 6669  ty, including fi
-0000f290: 7869 6e67 2061 2062 7567 0a20 2077 6869  xing a bug.  whi
-0000f2a0: 6368 206f 6363 6173 696f 6e61 6c6c 7920  ch occasionally 
-0000f2b0: 6361 7573 6564 2072 6573 756d 6162 6c65  caused resumable
-0000f2c0: 2075 706c 6f61 6420 6861 7368 6573 206e   upload hashes n
-0000f2d0: 6f74 2074 6f20 6361 7463 6820 7570 2070  ot to catch up p
-0000f2e0: 726f 7065 726c 792e 0a2d 2041 6c6c 204a  roperly..- All J
-0000f2f0: 534f 4e20 6361 6c6c 7320 6e6f 7720 6861  SON calls now ha
-0000f300: 7665 2073 6f63 6b65 7420 7469 6d65 6f75  ve socket timeou
-0000f310: 7473 2c20 656c 696d 696e 6174 696e 6720  ts, eliminating 
-0000f320: 6861 6e67 7320 756e 6465 720a 2020 666c  hangs under.  fl
-0000f330: 616b 7920 6e65 7477 6f72 6b20 636f 6e64  aky network cond
-0000f340: 6974 696f 6e73 2e0a 2d20 4669 7865 6420  itions..- Fixed 
-0000f350: 6120 6275 6720 7768 6572 6520 6163 6c20  a bug where acl 
-0000f360: 6368 202d 6720 416c 6c41 7574 6865 6e74  ch -g AllAuthent
-0000f370: 6963 6174 6564 5573 6572 7320 776f 756c  icatedUsers woul
-0000f380: 6420 696e 7374 6561 6420 6164 640a 2020  d instead add.  
-0000f390: 416c 6c55 7365 7273 2e0a 2d20 4669 7865  AllUsers..- Fixe
-0000f3a0: 6420 6120 6275 6720 7468 6174 2063 6175  d a bug that cau
-0000f3b0: 7365 6420 6f62 6a65 6374 2063 7573 746f  sed object custo
-0000f3c0: 6d20 6d65 7461 6461 7461 206e 6f74 2074  m metadata not t
-0000f3d0: 6f20 6265 2070 7265 7365 7276 6564 2077  o be preserved w
-0000f3e0: 6865 6e0a 2020 636f 7079 696e 6720 696e  hen.  copying in
-0000f3f0: 2074 6865 2063 6c6f 7564 2e0a 2d20 4669   the cloud..- Fi
-0000f400: 7865 6420 6120 6275 6720 7768 6572 6520  xed a bug where 
-0000f410: 6475 202d 7320 6469 6420 6e6f 7420 7072  du -s did not pr
-0000f420: 6f70 6572 6c79 2065 6c69 6465 2073 7562  operly elide sub
-0000f430: 6469 7265 6374 6f72 6965 732e 0a0a 4f74  directories...Ot
-0000f440: 6865 7220 4368 616e 6765 730a 2d2d 2d2d  her Changes.----
-0000f450: 2d2d 2d2d 2d2d 2d2d 2d0a 2d20 5061 7261  ---------.- Para
-0000f460: 6c6c 656c 2063 6f6d 706f 7369 7465 2075  llel composite u
-0000f470: 706c 6f61 6473 2061 7265 206e 6f77 2064  ploads are now d
-0000f480: 6973 6162 6c65 6420 6279 2064 6566 6175  isabled by defau
-0000f490: 6c74 2075 6e74 696c 2063 7263 6d6f 6420  lt until crcmod 
-0000f4a0: 6973 0a20 2061 7661 696c 6162 6c65 2069  is.  available i
-0000f4b0: 6e20 6d61 6a6f 7220 4c69 6e75 7820 6469  n major Linux di
-0000f4c0: 7374 7269 6275 7469 6f6e 732e 2054 6f20  stributions. To 
-0000f4d0: 7265 2d65 6e61 626c 6520 7468 6520 7365  re-enable the se
-0000f4e0: 7474 696e 6720 6672 6f6d 0a20 2070 7269  tting from.  pri
-0000f4f0: 6f72 2076 6572 7369 6f6e 732c 2069 6e20  or versions, in 
-0000f500: 7468 6520 5b47 5355 7469 6c5d 2073 6563  the [GSUtil] sec
-0000f510: 7469 6f6e 206f 6620 796f 7572 202e 626f  tion of your .bo
-0000f520: 746f 2063 6f6e 6669 6720 6669 6c65 2c20  to config file, 
-0000f530: 6164 643a 0a20 2070 6172 616c 6c65 6c5f  add:.  parallel_
-0000f540: 636f 6d70 6f73 6974 655f 7570 6c6f 6164  composite_upload
-0000f550: 5f74 6872 6573 686f 6c64 3d31 3530 4d0a  _threshold=150M.
-0000f560: 2d20 4e6f 6e2d 7769 6c64 6361 7264 6564  - Non-wildcarded
-0000f570: 2055 524c 7320 666f 7220 6578 6973 7469   URLs for existi
-0000f580: 6e67 206f 626a 6563 7473 206e 6f77 2075  ng objects now u
-0000f590: 7365 2047 6574 2062 6566 6f72 6520 7472  se Get before tr
-0000f5a0: 7969 6e67 204c 6973 740a 2020 2861 7320  ying List.  (as 
-0000f5b0: 696e 2067 7375 7469 6c33 292c 2061 6e64  in gsutil3), and
-0000f5c0: 2074 6875 7320 6172 6520 6e6f 7420 7375   thus are not su
-0000f5d0: 626a 6563 7420 746f 2065 7665 6e74 7561  bject to eventua
-0000f5e0: 6c20 6c69 7374 696e 6720 636f 6e73 6973  l listing consis
-0000f5f0: 7465 6e63 792e 0a2d 2067 7375 7469 6c20  tency..- gsutil 
-0000f600: 2d44 206e 6f77 2072 6564 6163 7473 2070  -D now redacts p
-0000f610: 726f 7879 2063 6f6e 6669 6775 7261 7469  roxy configurati
-0000f620: 6f6e 2076 616c 7565 7320 696e 2074 6865  on values in the
-0000f630: 206f 7574 7075 742e 0a0a 5265 6c65 6173   output...Releas
-0000f640: 6520 342e 3420 2872 656c 6561 7365 2064  e 4.4 (release d
-0000f650: 6174 653a 2032 3031 342d 3037 2d31 3729  ate: 2014-07-17)
-0000f660: 0a3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  .===============
-0000f670: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0000f680: 3d3d 3d3d 3d3d 3d3d 0a0a 4e65 7720 4665  ========..New Fe
-0000f690: 6174 7572 6573 0a2d 2d2d 2d2d 2d2d 2d2d  atures.---------
-0000f6a0: 2d2d 2d0a 2d20 4164 6465 6420 7468 6520  ---.- Added the 
-0000f6b0: 6861 7368 2063 6f6d 6d61 6e64 2c20 7768  hash command, wh
-0000f6c0: 6963 6820 6361 6e20 6361 6c63 756c 6174  ich can calculat
-0000f6d0: 6520 6861 7368 6573 206f 6620 6c6f 6361  e hashes of loca
-0000f6e0: 6c20 6669 6c65 732e 0a20 2067 7375 7469  l files..  gsuti
-0000f6f0: 6c20 616c 7265 6164 7920 6361 6c63 756c  l already calcul
-0000f700: 6174 6573 2068 6173 6865 7320 666f 7220  ates hashes for 
-0000f710: 696e 7465 6772 6974 7920 6368 6563 6b69  integrity checki
-0000f720: 6e67 2c20 6275 7420 7468 6973 2061 6c6c  ng, but this all
-0000f730: 6f77 730a 2020 7468 6520 7573 6572 2074  ows.  the user t
-0000f740: 6f20 7365 7061 7261 7465 6c79 2063 616c  o separately cal
-0000f750: 6375 6c61 7465 2074 6865 204d 4435 2061  culate the MD5 a
-0000f760: 6e64 2043 5243 3332 6320 6861 7368 6573  nd CRC32c hashes
-0000f770: 206f 6620 6120 6c6f 6361 6c20 6669 6c65   of a local file
-0000f780: 2e0a 0a42 7567 2046 6978 6573 0a2d 2d2d  ...Bug Fixes.---
-0000f790: 2d2d 2d2d 2d2d 0a2d 204d 616e 7920 696d  ------.- Many im
-0000f7a0: 7072 6f76 656d 656e 7473 2074 6f20 4a53  provements to JS
-0000f7b0: 4f4e 2041 5049 206d 6564 6961 2074 7261  ON API media tra
-0000f7c0: 6e73 6665 7273 2c20 696e 636c 7564 696e  nsfers, includin
-0000f7d0: 6720 6661 720a 2020 6d6f 7265 2072 6f62  g far.  more rob
-0000f7e0: 7573 7420 7265 7472 7920 6c6f 6769 632e  ust retry logic.
-0000f7f0: 0a2d 2046 6978 6564 2022 4669 6c65 2063  .- Fixed "File c
-0000f800: 6861 6e67 6564 2064 7572 696e 6720 7570  hanged during up
-0000f810: 6c6f 6164 3a20 454f 462e 2e2e 2220 6572  load: EOF..." er
-0000f820: 726f 7273 206f 6e20 584d 4c20 7265 7375  rors on XML resu
-0000f830: 6d61 626c 6520 7570 6c6f 6164 732e 0a2d  mable uploads..-
-0000f840: 2046 6978 6564 2072 7379 6e63 2063 6f6d   Fixed rsync com
-0000f850: 6d61 6e64 2074 6f20 7265 6164 2061 6e64  mand to read and
-0000f860: 2077 7269 7465 2069 6e64 6578 2066 696c   write index fil
-0000f870: 6573 2069 6e20 6269 6e61 7279 206d 6f64  es in binary mod
-0000f880: 652e 0a2d 2046 6978 2070 6f74 656e 7469  e..- Fix potenti
-0000f890: 616c 2054 7970 6545 7272 6f72 2069 6e20  al TypeError in 
-0000f8a0: 5f43 6865 636b 416e 6448 616e 646c 6543  _CheckAndHandleC
-0000f8b0: 7265 6465 6e74 6961 6c45 7863 6570 7469  redentialExcepti
-0000f8c0: 6f6e 2e0a 2d20 4669 7865 6420 706f 7373  on..- Fixed poss
-0000f8d0: 6962 6c65 2064 6174 6120 636f 7272 7570  ible data corrup
-0000f8e0: 7469 6f6e 2077 6865 6e20 7573 696e 6720  tion when using 
-0000f8f0: 4a53 4f4e 2041 5049 2075 706c 6f61 6473  JSON API uploads
-0000f900: 2066 6f72 0a20 2073 6d61 6c6c 2066 696c   for.  small fil
-0000f910: 6573 2077 6974 6820 6c69 6e65 7320 7374  es with lines st
-0000f920: 6172 7469 6e67 2077 6974 6820 2246 726f  arting with "Fro
-0000f930: 6d3a 222c 2077 6869 6368 2077 6f75 6c64  m:", which would
-0000f940: 2063 6175 7365 0a20 2069 6e74 6567 7269   cause.  integri
-0000f950: 7479 2063 6865 636b 7320 746f 2066 6169  ty checks to fai
-0000f960: 6c2e 0a2d 2046 6978 6564 2067 7375 7469  l..- Fixed gsuti
-0000f970: 6c20 6370 2074 6f20 736b 6970 2064 6972  l cp to skip dir
-0000f980: 6563 746f 7279 2070 6c61 6365 686f 6c64  ectory placehold
-0000f990: 6572 7320 7768 656e 2064 6f77 6e6c 6f61  ers when downloa
-0000f9a0: 6469 6e67 2c20 6176 6f69 6469 6e67 0a20  ding, avoiding. 
-0000f9b0: 2022 6469 7265 6374 6f72 7920 6578 6973   "directory exis
-0000f9c0: 7473 2077 6865 7265 2074 6865 2066 696c  ts where the fil
-0000f9d0: 6520 6e65 6564 7320 746f 2062 6520 6372  e needs to be cr
-0000f9e0: 6561 7465 6422 2065 7272 6f72 732e 0a2d  eated" errors..-
-0000f9f0: 2046 6978 6564 2064 6169 7379 2063 6861   Fixed daisy cha
-0000fa00: 696e 2063 702f 7273 796e 6320 666f 7220  in cp/rsync for 
-0000fa10: 6669 6c65 7320 3e3d 2031 3030 4d42 2e0a  files >= 100MB..
-0000fa20: 2d20 4669 7865 6420 6120 6275 6720 696e  - Fixed a bug in
-0000fa30: 204a 534f 4e20 7072 6f78 7920 7375 7070   JSON proxy supp
-0000fa40: 6f72 7420 7768 6572 6520 7468 6520 7072  ort where the pr
-0000fa50: 6f78 7920 696e 666f 2077 6173 2073 6f6d  oxy info was som
-0000fa60: 6574 696d 6573 2075 6e75 7365 642e 0a2d  etimes unused..-
-0000fa70: 2046 6978 6564 2061 2062 7567 2077 6865   Fixed a bug whe
-0000fa80: 7265 2061 6e20 6163 6c20 6765 7420 6f6e  re an acl get on
-0000fa90: 2061 2070 7269 7661 7465 2064 6566 6175   a private defau
-0000faa0: 6c74 206f 626a 6563 7420 4143 4c20 7265  lt object ACL re
-0000fab0: 7475 726e 6564 2061 6e0a 2020 6572 726f  turned an.  erro
-0000fac0: 7220 696e 7374 6561 6420 6f66 2061 2062  r instead of a b
-0000fad0: 6c61 6e6b 2041 434c 2e0a 2d20 4669 7865  lank ACL..- Fixe
-0000fae0: 6420 6120 4a53 4f4e 2041 5049 2069 7373  d a JSON API iss
-0000faf0: 7565 2077 6974 6820 6c61 7267 6520 4854  ue with large HT
-0000fb00: 5450 2072 6573 706f 6e73 6573 206f 6e20  TP responses on 
-0000fb10: 3332 2d62 6974 2073 7973 7465 6d73 2e0a  32-bit systems..
-0000fb20: 0a4f 7468 6572 2043 6861 6e67 6573 0a2d  .Other Changes.-
-0000fb30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d 2049  ------------.- I
-0000fb40: 6d70 726f 7665 6420 6f62 6a65 6374 206c  mproved object l
-0000fb50: 6973 7469 6e67 2070 6572 666f 726d 616e  isting performan
-0000fb60: 6365 2077 6865 6e20 7573 696e 6720 7468  ce when using th
-0000fb70: 6520 584d 4c20 4150 492e 0a2d 2049 6d70  e XML API..- Imp
-0000fb80: 726f 7665 6420 7661 7269 6f75 7320 6572  roved various er
-0000fb90: 726f 7220 6d65 7373 6167 6573 2e0a 2d20  ror messages..- 
-0000fba0: 496d 7072 6f76 6564 2070 726f 6772 6573  Improved progres
-0000fbb0: 7320 6469 7370 6c61 7920 6475 7269 6e67  s display during
-0000fbc0: 206d 6564 6961 2074 7261 6e73 6665 722e   media transfer.
-0000fbd0: 0a2d 2053 7769 7463 6865 6420 746f 2074  .- Switched to t
-0000fbe0: 7275 6e63 6174 6564 2065 7870 6f6e 656e  runcated exponen
-0000fbf0: 7469 616c 2062 6163 6b6f 6666 2066 6f72  tial backoff for
-0000fc00: 2072 6574 7269 6573 2e0a 2d20 496d 7072   retries..- Impr
-0000fc10: 6f76 6564 204f 532d 7370 6563 6966 6963  oved OS-specific
-0000fc20: 2075 6c69 6d69 7420 6368 6563 6b73 2e0a   ulimit checks..
-0000fc30: 2d20 4164 6465 6420 736f 6d65 2069 6e66  - Added some inf
-0000fc40: 6f72 6d61 7469 6f6e 2073 7563 6820 6173  ormation such as
-0000fc50: 204f 5320 616e 6420 436c 6f75 6420 5344   OS and Cloud SD
-0000fc60: 4b20 7772 6170 7069 6e67 2074 6f20 6773  K wrapping to gs
-0000fc70: 7574 696c 2076 6572 7369 6f6e 2c0a 2020  util version,.  
-0000fc80: 616e 6420 6368 616e 6765 6420 7468 6520  and changed the 
-0000fc90: 6f75 7470 7574 2066 6f72 6d61 7420 746f  output format to
-0000fca0: 2062 6520 6d6f 7265 2075 6e69 666f 726d   be more uniform
-0000fcb0: 2e0a 2d20 4461 6973 7920 6368 6169 6e20  ..- Daisy chain 
-0000fcc0: 6370 2f72 7379 6e63 206e 6f77 2073 7570  cp/rsync now sup
-0000fcd0: 706f 7274 7320 7265 7375 6d61 626c 6520  ports resumable 
-0000fce0: 7570 6c6f 6164 732e 0a2d 2049 6d70 726f  uploads..- Impro
-0000fcf0: 7665 6420 7072 6f78 7920 7375 7070 6f72  ved proxy suppor
-0000fd00: 7420 666f 7220 7072 6f78 7920 7573 6572  t for proxy user
-0000fd10: 6e61 6d65 2061 6e64 2070 6173 7377 6f72  name and passwor
-0000fd20: 6473 2e0a 2d20 782d 616d 7a20 6865 6164  ds..- x-amz head
-0000fd30: 6572 7320 6172 6520 6e6f 7720 7375 7070  ers are now supp
-0000fd40: 6f72 7465 6420 666f 7220 6370 2c20 7273  orted for cp, rs
-0000fd50: 796e 632c 2061 6e64 2073 6574 6d65 7461  ync, and setmeta
-0000fd60: 2e20 2078 2d61 6d7a 2d6d 6574 610a 2020  .  x-amz-meta.  
-0000fd70: 6865 6164 6572 7320 636f 6e74 696e 7565  headers continue
-0000fd80: 2074 6f20 6265 2073 7570 706f 7274 6564   to be supported
-0000fd90: 2061 7320 7765 6c6c 2e0a 0a52 656c 6561   as well...Relea
-0000fda0: 7365 2034 2e33 2028 7265 6c65 6173 6520  se 4.3 (release 
-0000fdb0: 6461 7465 3a20 3230 3134 2d30 362d 3130  date: 2014-06-10
-0000fdc0: 290a 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ).==============
-0000fdd0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0000fde0: 3d3d 3d3d 3d3d 3d3d 3d0a 0a42 7567 2046  =========..Bug F
-0000fdf0: 6978 6573 0a2d 2d2d 2d2d 2d2d 2d2d 0a2d  ixes.---------.-
-0000fe00: 2046 6978 2061 636c 2f64 6566 6163 6c20   Fix acl/defacl 
-0000fe10: 6368 2063 6861 6e67 696e 6720 7468 6520  ch changing the 
-0000fe20: 726f 6c65 206f 6620 616e 2065 7869 7374  role of an exist
-0000fe30: 696e 6720 6772 6f75 702e 0a2d 2046 6978  ing group..- Fix
-0000fe40: 2075 6e69 636f 6465 2061 6e64 2034 3034   unicode and 404
-0000fe50: 2065 7272 6f72 7320 7768 656e 2075 7369   errors when usi
-0000fe60: 6e67 206d 616e 6966 6573 7473 2e0a 2d20  ng manifests..- 
-0000fe70: 4669 7820 7061 7261 6c6c 656c 6973 6d20  Fix parallelism 
-0000fe80: 636f 6e66 6967 7572 6174 696f 6e20 6275  configuration bu
-0000fe90: 6720 7468 6174 206c 696d 6974 6564 2067  g that limited g
-0000fea0: 7375 7469 6c20 7273 796e 6320 746f 2074  sutil rsync to t
-0000feb0: 776f 2074 6872 6561 6473 0a20 2061 6e64  wo threads.  and
-0000fec0: 2063 6f75 6c64 206c 6561 6420 746f 2072   could lead to r
-0000fed0: 7379 6e63 2068 616e 6773 2e20 2267 7375  sync hangs. "gsu
-0000fee0: 7469 6c20 2d6d 2072 7379 6e63 2220 7275  til -m rsync" ru
-0000fef0: 6e73 206d 7563 6820 6661 7374 6572 2c20  ns much faster, 
-0000ff00: 616e 6420 7273 796e 630a 2020 7570 6c6f  and rsync.  uplo
-0000ff10: 6164 7320 6f66 206c 6172 6765 206c 6f63  ads of large loc
-0000ff20: 616c 2066 696c 6573 2061 7265 206e 6f77  al files are now
-0000ff30: 2066 6173 7465 7220 7669 6120 7061 7261   faster via para
-0000ff40: 6c6c 656c 2063 6f6d 706f 7369 7465 2075  llel composite u
-0000ff50: 706c 6f61 642e 0a20 2050 6172 616c 6c65  pload..  Paralle
-0000ff60: 6c20 636f 6d70 6f73 6974 6520 7570 6c6f  l composite uplo
-0000ff70: 6164 7320 6f66 206c 6172 6765 2066 696c  ads of large fil
-0000ff80: 6573 2061 7265 2061 6c73 6f20 6661 7374  es are also fast
-0000ff90: 6572 2e0a 2d20 4669 7820 7273 796e 6320  er..- Fix rsync 
-0000ffa0: 6275 6720 7769 7468 2070 6172 616c 6c65  bug with paralle
-0000ffb0: 6c20 636f 6d70 6f73 6974 6520 7570 6c6f  l composite uplo
-0000ffc0: 6164 732e 0a2d 2046 6978 2054 7970 6545  ads..- Fix TypeE
-0000ffd0: 7272 6f72 2074 6861 7420 636f 756c 6420  rror that could 
-0000ffe0: 6f63 6375 7220 7768 656e 2072 756e 6e69  occur when runni
-0000fff0: 6e67 2074 6865 2063 7020 636f 6d6d 616e  ng the cp comman
-00010000: 6420 7769 7468 206e 6f0a 2020 6372 6564  d with no.  cred
-00010010: 656e 7469 616c 732e 0a0a 4f74 6865 7220  entials...Other 
-00010020: 4368 616e 6765 730a 2d2d 2d2d 2d2d 2d2d  Changes.--------
-00010030: 2d2d 2d2d 2d0a 2d20 5072 6f67 7265 7373  -----.- Progress
-00010040: 2069 6e64 6963 6174 6f72 7320 666f 7220   indicators for 
-00010050: 2d6d 2063 702f 7273 796e 6320 636f 6d6d  -m cp/rsync comm
-00010060: 616e 6473 2061 7265 206e 6f77 206d 6f72  ands are now mor
-00010070: 6520 7265 6164 6162 6c65 2e0a 2d20 4164  e readable..- Ad
-00010080: 6465 6420 636f 6d6d 616e 6420 6265 696e  ded command bein
-00010090: 6720 7275 6e20 746f 2067 7375 7469 6c20  g run to gsutil 
-000100a0: 2d64 2f2d 4420 6f75 7470 7574 2e0a 2d20  -d/-D output..- 
-000100b0: 4c6f 7765 7265 6420 6465 6661 756c 7420  Lowered default 
-000100c0: 7061 7261 6c6c 656c 6973 6d20 666f 7220  parallelism for 
-000100d0: 2767 7375 7469 6c20 2d6d 2074 6573 7427  'gsutil -m test'
-000100e0: 2061 6e64 2061 6464 6564 2068 616e 6720   and added hang 
-000100f0: 6465 7465 6374 696f 6e2e 0a0a 5265 6c65  detection...Rele
-00010100: 6173 6520 342e 3220 2872 656c 6561 7365  ase 4.2 (release
-00010110: 2064 6174 653a 2032 3031 342d 3036 2d30   date: 2014-06-0
-00010120: 3529 0a3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  5).=============
-00010130: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00010140: 3d3d 3d3d 3d3d 3d3d 3d3d 0a0a 4e65 7720  ==========..New 
-00010150: 4665 6174 7572 6573 0a2d 2d2d 2d2d 2d2d  Features.-------
-00010160: 2d2d 2d2d 2d0a 2d20 4164 6465 6420 7061  -----.- Added pa
-00010170: 7261 6c6c 656c 2074 6573 7420 6578 6563  rallel test exec
-00010180: 7574 696f 6e20 7375 7070 6f72 7420 746f  ution support to
-00010190: 2074 6573 7420 636f 6d6d 616e 642c 2065   test command, e
-000101a0: 783a 2022 6773 7574 696c 202d 6d20 7465  x: "gsutil -m te
-000101b0: 7374 220a 0a42 7567 2046 6978 6573 0a2d  st"..Bug Fixes.-
-000101c0: 2d2d 2d2d 2d2d 2d2d 0a2d 2046 6978 2066  --------.- Fix f
-000101d0: 6169 6c75 7265 2064 7572 696e 6720 7265  ailure during re
-000101e0: 7472 7920 6f66 2061 6e20 584d 4c20 646f  try of an XML do
-000101f0: 776e 6c6f 6164 2e0a 2d20 4d6f 7665 6420  wnload..- Moved 
-00010200: 746f 2062 6f74 6f20 7265 6c65 6173 6520  to boto release 
-00010210: 322e 3239 2e31 2066 6978 696e 6720 626f  2.29.1 fixing bo
-00010220: 746f 2061 7574 6865 6e74 6963 6174 696f  to authenticatio
-00010230: 6e20 6572 726f 6e65 6f75 736c 790a 2020  n erroneously.  
-00010240: 7265 706f 7274 696e 6720 4f41 7574 6832  reporting OAuth2
-00010250: 2063 7265 6465 6e74 6961 6c73 2061 7320   credentials as 
-00010260: 696e 7661 6c69 642e 0a2d 2046 6978 2070  invalid..- Fix p
-00010270: 6172 616c 6c65 6c20 636f 6d70 6f73 6974  arallel composit
-00010280: 6520 7570 6c6f 6164 7320 7768 656e 2075  e uploads when u
-00010290: 7369 6e67 206f 6e6c 7920 6120 7369 6e67  sing only a sing
-000102a0: 6c65 2070 726f 6365 7373 2061 6e64 2074  le process and t
-000102b0: 6872 6561 642e 0a2d 2046 6978 2061 6e20  hread..- Fix an 
-000102c0: 696e 7661 6c69 6420 7365 656b 2064 7572  invalid seek dur
-000102d0: 696e 6720 6461 6973 7920 6368 6169 6e20  ing daisy chain 
-000102e0: 6f70 6572 6174 696f 6e20 7468 6174 2061  operation that a
-000102f0: 6666 6563 7465 6420 6669 6c65 2063 6f70  ffected file cop
-00010300: 790a 2020 6672 6f6d 2047 6f6f 676c 6520  y.  from Google 
-00010310: 436c 6f75 6420 5374 6f72 6167 6520 2d3e  Cloud Storage ->
-00010320: 2053 3320 666f 7220 6669 6c65 7320 6772   S3 for files gr
-00010330: 6561 7465 7220 7468 616e 2038 4b42 2069  eater than 8KB i
-00010340: 6e20 7369 7a65 2e0a 2d20 4669 7820 2267  n size..- Fix "g
-00010350: 7375 7469 6c20 6163 6c20 6368 2220 7769  sutil acl ch" wi
-00010360: 7468 2041 6c6c 5573 6572 7320 6f72 2041  th AllUsers or A
-00010370: 6c6c 4175 7468 656e 7469 6361 7465 6455  llAuthenticatedU
-00010380: 7365 7273 2067 726f 7570 732e 0a2d 2046  sers groups..- F
-00010390: 6978 2073 6f6d 6520 636f 7079 2065 7272  ix some copy err
-000103a0: 6f72 7320 7772 6974 696e 6720 6e65 7720  ors writing new 
-000103b0: 6c69 6e65 7320 746f 2074 6865 206d 616e  lines to the man
-000103c0: 6966 6573 7420 6669 6c65 2e0a 2d20 4669  ifest file..- Fi
-000103d0: 7820 2267 7375 7469 6c20 7465 7374 2220  x "gsutil test" 
-000103e0: 7265 7475 726e 2063 6f64 6520 746f 2070  return code to p
-000103f0: 726f 7065 726c 7920 6265 2030 206f 6e20  roperly be 0 on 
-00010400: 7375 6363 6573 732e 0a0a 4f74 6865 7220  success...Other 
-00010410: 4368 616e 6765 730a 2d2d 2d2d 2d2d 2d2d  Changes.--------
-00010420: 2d2d 2d2d 2d0a 2d20 2267 7375 7469 6c20  -----.- "gsutil 
-00010430: 6370 202d 7a22 206e 6f77 2069 676e 6f72  cp -z" now ignor
-00010440: 6573 2077 6869 7465 7370 6163 6520 696e  es whitespace in
-00010450: 2074 6865 2065 7874 656e 7369 6f6e 206c   the extension l
-00010460: 6973 742e 0a0a 5265 6c65 6173 6520 342e  ist...Release 4.
-00010470: 3120 2872 656c 6561 7365 2064 6174 653a  1 (release date:
-00010480: 2032 3031 342d 3035 2d32 3829 0a3d 3d3d   2014-05-28).===
-00010490: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000104a0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000104b0: 3d3d 3d3d 0a0a 4275 6720 4669 7865 730a  ====..Bug Fixes.
-000104c0: 2d2d 2d2d 2d2d 2d2d 2d0a 2d20 4669 7865  ---------.- Fixe
-000104d0: 6420 6120 6275 6720 696e 2070 6172 616c  d a bug in paral
-000104e0: 6c65 6c20 636f 6d70 6f73 6974 6520 7570  lel composite up
-000104f0: 6c6f 6164 7320 7768 6572 6520 7570 6c6f  loads where uplo
-00010500: 6164 7320 7769 7468 0a20 2065 7869 7374  ads with.  exist
-00010510: 696e 6720 636f 6d70 6f6e 656e 7473 2077  ing components w
-00010520: 6f75 6c64 2066 6169 6c2e 0a2d 204d 6f76  ould fail..- Mov
-00010530: 6564 2067 6373 2d6f 6175 7468 322d 626f  ed gcs-oauth2-bo
-00010540: 746f 2d70 6c75 6769 6e20 746f 2076 6572  to-plugin to ver
-00010550: 7369 6f6e 2031 2e35 2c20 6669 7869 6e67  sion 1.5, fixing
-00010560: 2061 2062 7567 2069 6e20 7468 6520 5079   a bug in the Py
-00010570: 5069 2067 7375 7469 6c0a 2020 6469 7374  Pi gsutil.  dist
-00010580: 7269 6275 7469 6f6e 2074 6861 7420 776f  ribution that wo
-00010590: 756c 6420 6361 7573 6520 6773 7574 696c  uld cause gsutil
-000105a0: 2074 6f20 756e 6e65 6365 7373 6172 696c   to unnecessaril
-000105b0: 7920 6174 7465 6d70 7420 746f 2071 7565  y attempt to que
-000105c0: 7279 0a20 2074 6865 2047 6f6f 676c 6520  ry.  the Google 
-000105d0: 436f 6d70 7574 6520 456e 6769 6e65 206d  Compute Engine m
-000105e0: 6574 6164 6174 6120 7365 7276 6963 652e  etadata service.
-000105f0: 0a0a 4f74 6865 7220 4368 616e 6765 730a  ..Other Changes.
-00010600: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 2d20  -------------.- 
-00010610: 5061 7261 6c6c 656c 2063 6f6d 706f 7369  Parallel composi
-00010620: 7465 2075 706c 6f61 6473 206e 6f20 6c6f  te uploads no lo
-00010630: 6e67 6572 2073 7065 6369 6679 2061 6e20  nger specify an 
-00010640: 6966 2d6e 6f74 2d6d 6174 6368 2070 7265  if-not-match pre
-00010650: 636f 6e64 6974 696f 6e0a 2020 7768 656e  condition.  when
-00010660: 2075 706c 6f61 6469 6e67 2063 6f6d 706f   uploading compo
-00010670: 6e65 6e74 2070 6172 7473 2e0a 2d20 5061  nent parts..- Pa
-00010680: 7261 6c6c 656c 2063 6f6d 706f 7369 7465  rallel composite
-00010690: 2075 706c 6f61 6473 206e 6f20 6c6f 6e67   uploads no long
-000106a0: 6572 2063 616c 6375 6c61 7465 2061 2043  er calculate a C
-000106b0: 5243 3332 6320 6861 7368 2070 7269 6f72  RC32c hash prior
-000106c0: 2074 6f0a 2020 7570 6c6f 6164 696e 6720   to.  uploading 
-000106d0: 636f 6d70 6f6e 656e 7420 7061 7274 7320  component parts 
-000106e0: 2874 6865 7365 2061 7265 2073 7469 6c6c  (these are still
-000106f0: 2076 616c 6964 6174 6564 2062 7920 616e   validated by an
-00010700: 204d 4435 2068 6173 6829 2e0a 2d20 5265   MD5 hash)..- Re
-00010710: 6d6f 7665 6420 6170 6974 6f6f 6c73 2064  moved apitools d
-00010720: 6570 656e 6465 6e63 7920 6f6e 2067 666c  ependency on gfl
-00010730: 6167 732e 0a0a 5265 6c65 6173 6520 342e  ags...Release 4.
-00010740: 3020 2872 656c 6561 7365 2064 6174 653a  0 (release date:
-00010750: 2032 3031 342d 3035 2d32 3729 0a3d 3d3d   2014-05-27).===
+00000070: 4164 6420 6370 202d 7620 616e 6420 2d6e  Add cp -v and -n
+00000080: 2066 6c61 6773 2066 6f72 2073 6869 6d20   flags for shim 
+00000090: 7472 616e 736c 6174 696f 6e2e 2028 2331  translation. (#1
+000000a0: 3439 3029 0a2d 2041 6464 2063 7020 2d73  490).- Add cp -s
+000000b0: 2066 6c61 6720 746f 2073 6869 6d20 7472   flag to shim tr
+000000c0: 616e 736c 6174 696f 6e2e 2028 2331 3438  anslation. (#148
+000000d0: 3829 0a0a 4275 6720 4669 7865 730a 2d2d  8)..Bug Fixes.--
+000000e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000000f0: 0a2d 2050 7265 7665 6e74 2063 6f70 6965  .- Prevent copie
+00000100: 7320 6f75 7473 6964 6520 6f66 2064 6573  s outside of des
+00000110: 7469 6e61 7469 6f6e 2064 6972 6563 746f  tination directo
+00000120: 7279 2e20 2823 3134 3931 290a 2d20 4669  ry. (#1491).- Fi
+00000130: 7820 636f 7079 696e 6720 6475 706c 6963  x copying duplic
+00000140: 6174 6520 6669 6c65 206e 616d 6520 636f  ate file name co
+00000150: 6e66 6c69 6374 7320 6279 2070 7265 7365  nflicts by prese
+00000160: 7276 696e 6720 7265 6375 7273 6976 6520  rving recursive 
+00000170: 636f 7079 2028 2331 3436 3529 0a0a 4f74  copy (#1465)..Ot
+00000180: 6865 7220 4368 616e 6765 730a 2d2d 2d2d  her Changes.----
+00000190: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d  --------------.-
+000001a0: 2052 756e 2050 7974 686f 6e20 332e 3520   Run Python 3.5 
+000001b0: 7465 7374 7320 7769 7468 2033 2e35 2e32  tests with 3.5.2
+000001c0: 2028 2331 3438 3229 0a2d 2042 6163 6b66   (#1482).- Backf
+000001d0: 696c 6c20 7468 6520 6368 616e 6765 7320  ill the changes 
+000001e0: 7265 7175 6972 6564 2074 6f20 736b 6970  required to skip
+000001f0: 2074 6865 2074 6573 745c 5f67 7375 7469   the test\_gsuti
+00000200: 6c20 7465 7374 7320 666f 7220 6773 7574  l tests for gsut
+00000210: 696c 2e70 6172 2074 6573 7473 2e20 2823  il.par tests. (#
+00000220: 3134 3831 290a 2d20 4375 7374 6f6d 2064  1481).- Custom d
+00000230: 7561 6c20 7265 6769 6f6e 3a20 4472 6f70  ual region: Drop
+00000240: 2070 6c61 6365 6d65 6e74 2066 6c61 6720   placement flag 
+00000250: 6173 206d 756c 7469 706c 6520 6c6f 6361  as multiple loca
+00000260: 7469 6f6e 7320 6361 6e20 6e6f 7720 6265  tions can now be
+00000270: 2070 726f 7669 6465 6420 7669 6120 2d6c   provided via -l
+00000280: 2066 6c61 6720 2823 3134 3830 290a 2d20   flag (#1480).- 
+00000290: 5365 7665 7261 6c20 646f 6375 6d65 6e74  Several document
+000002a0: 6174 696f 6e20 7570 6461 7465 7320 616e  ation updates an
+000002b0: 6420 636c 6172 6966 6963 6174 696f 6e73  d clarifications
+000002c0: 2e0a 0a52 656c 6561 7365 2035 2e38 2028  ...Release 5.8 (
+000002d0: 7265 6c65 6173 6520 6461 7465 3a20 3230  release date: 20
+000002e0: 3232 2d30 332d 3037 290a 3d3d 3d3d 3d3d  22-03-07).======
+000002f0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00000300: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00000310: 0a4e 6577 2046 6561 7475 7265 730a 2d2d  .New Features.--
+00000320: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00000330: 0a2d 2041 6c6c 6f77 2067 7375 7469 6c20  .- Allow gsutil 
+00000340: 746f 2074 7261 6e73 7061 7265 6e74 6c79  to transparently
+00000350: 2063 616c 6c20 6763 6c6f 7564 2073 746f   call gcloud sto
+00000360: 7261 6765 2063 7020 6f72 2072 6d20 7468  rage cp or rm th
+00000370: 726f 7567 6820 6120 7368 696d 2028 656e  rough a shim (en
+00000380: 6162 6c65 2076 6961 2074 6865 2042 6f74  able via the Bot
+00000390: 6f20 636f 6e66 6967 7572 6174 696f 6e20  o configuration 
+000003a0: 4753 5554 696c 3a75 7365 5f67 636c 6f75  GSUTil:use_gclou
+000003b0: 645f 7374 6f72 6167 653d 5472 7565 290a  d_storage=True).
+000003c0: 2d20 416c 6c6f 7720 6578 7465 726e 616c  - Allow external
+000003d0: 2061 6363 6f75 6e74 2062 6173 6564 2063   account based c
+000003e0: 7265 6465 6e74 6961 6c73 2028 2331 3435  redentials (#145
+000003f0: 3229 0a0a 4275 6720 4669 7865 730a 2d2d  2)..Bug Fixes.--
+00000400: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00000410: 0a2d 2050 7265 7665 6e74 2065 7272 6f72  .- Prevent error
+00000420: 2062 7920 6f6e 6c79 2061 6c6c 6f77 696e   by only allowin
+00000430: 6720 7375 7065 722d 7573 6572 2066 726f  g super-user fro
+00000440: 6d20 6368 616e 6769 6e67 2066 696c 6520  m changing file 
+00000450: 7573 6572 2077 6865 6e20 7072 6573 6572  user when preser
+00000460: 7665 2050 4f53 4958 2069 7320 656e 6162  ve POSIX is enab
+00000470: 6c65 642e 2028 2331 3436 3129 0a0a 4f74  led. (#1461)..Ot
+00000480: 6865 7220 4368 616e 6765 730a 2d2d 2d2d  her Changes.----
+00000490: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d  --------------.-
+000004a0: 2053 6576 6572 616c 2064 6f63 756d 656e   Several documen
+000004b0: 7461 7469 6f6e 2075 7064 6174 6573 2061  tation updates a
+000004c0: 6e64 2063 6c61 7269 6669 6361 7469 6f6e  nd clarification
+000004d0: 732e 0a0a 5265 6c65 6173 6520 352e 3620  s...Release 5.6 
+000004e0: 2872 656c 6561 7365 2064 6174 653a 2032  (release date: 2
+000004f0: 3032 322d 3031 2d30 3629 0a3d 3d3d 3d3d  022-01-06).=====
+00000500: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00000510: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00000520: 3d0a 4e65 7720 4665 6174 7572 6573 0a2d  =.New Features.-
+00000530: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00000540: 2d0a 2d20 4368 6563 6b20 6047 4345 5f4d  -.- Check `GCE_M
+00000550: 4554 4144 4154 415f 484f 5354 6020 656e  ETADATA_HOST` en
+00000560: 7669 726f 6e6d 656e 7420 7661 7269 6162  vironment variab
+00000570: 6c65 2028 2331 3432 3629 0a2d 2041 6c6c  le (#1426).- All
+00000580: 6f77 2073 6572 7669 6365 2061 6363 6f75  ow service accou
+00000590: 6e74 2074 6f20 7573 6520 7072 6976 6174  nt to use privat
+000005a0: 6520 746f 6b65 6e20 656e 6470 6f69 6e74  e token endpoint
+000005b0: 2028 2331 3431 3729 0a2d 2041 6464 2064   (#1417).- Add d
+000005c0: 6566 6175 6c74 2065 6e63 7279 7074 696f  efault encryptio
+000005d0: 6e20 6b65 7920 6f70 7469 6f6e 2028 2d6b  n key option (-k
+000005e0: 2920 746f 206d 6220 636f 6d6d 616e 6420  ) to mb command 
+000005f0: 2823 3134 3134 290a 0a42 7567 2046 6978  (#1414)..Bug Fix
+00000600: 6573 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  es.-------------
+00000610: 2d2d 2d2d 2d0a 2d20 5041 503a 2048 616e  -----.- PAP: Han
+00000620: 646c 6520 756e 7370 6563 6966 6965 6420  dle unspecified 
+00000630: 6173 2077 656c 6c20 6173 2069 6e68 6572  as well as inher
+00000640: 6974 6564 2028 2331 3430 3429 0a0a 4f74  ited (#1404)..Ot
+00000650: 6865 7220 4368 616e 6765 730a 2d2d 2d2d  her Changes.----
+00000660: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d  --------------.-
+00000670: 2053 6576 6572 616c 2064 6f63 756d 656e   Several documen
+00000680: 7461 7469 6f6e 2075 7064 6174 6573 2061  tation updates a
+00000690: 6e64 2063 6c61 7269 6669 6361 7469 6f6e  nd clarification
+000006a0: 732e 0a0a 5265 6c65 6173 6520 352e 3520  s...Release 5.5 
+000006b0: 2872 656c 6561 7365 2064 6174 653a 2032  (release date: 2
+000006c0: 3032 312d 3131 2d31 3129 0a3d 3d3d 3d3d  021-11-11).=====
+000006d0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+000006e0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+000006f0: 3d0a 4275 6720 4669 7865 730a 2d2d 2d2d  =.Bug Fixes.----
+00000700: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d  --------------.-
+00000710: 2043 6c6f 7365 2075 706c 6f61 6420 7374   Close upload st
+00000720: 7265 616d 2062 6566 6f72 6520 7765 2074  ream before we t
+00000730: 7279 2074 6f20 756e 6c69 6e6b 2074 656d  ry to unlink tem
+00000740: 7020 6669 6c65 2028 2331 3134 3429 0a2d  p file (#1144).-
+00000750: 2044 6f20 6e6f 7420 7065 7266 6f72 6d20   Do not perform 
+00000760: 6861 7368 2076 616c 6964 6174 696f 6e20  hash validation 
+00000770: 6966 2063 6865 636b 5f68 6173 6865 733d  if check_hashes=
+00000780: 6e65 7665 7220 6576 656e 2069 6620 436f  never even if Co
+00000790: 6e74 656e 742d 4d44 3520 6973 2073 6574  ntent-MD5 is set
+000007a0: 2028 2331 3338 3229 0a0a 4f74 6865 7220   (#1382)..Other 
+000007b0: 4368 616e 6765 730a 2d2d 2d2d 2d2d 2d2d  Changes.--------
+000007c0: 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d 2041 6464  ----------.- Add
+000007d0: 2077 6172 6e69 6e67 2066 6f72 2075 6e73   warning for uns
+000007e0: 7570 706f 7274 6564 2064 6f75 626c 6520  upported double 
+000007f0: 7769 6c64 6361 7264 2075 7365 2e20 2823  wildcard use. (#
+00000800: 3133 3836 290a 2d20 4368 616e 6769 6e67  1386).- Changing
+00000810: 2074 6573 7420 656d 6169 6c20 616e 6420   test email and 
+00000820: 7573 6572 2072 6566 6572 656e 6365 7320  user references 
+00000830: 746f 2073 6166 6572 2076 616c 7565 732e  to safer values.
+00000840: 2028 2331 3339 3629 0a2d 2053 6576 6572   (#1396).- Sever
+00000850: 616c 2064 6f63 756d 656e 7461 7469 6f6e  al documentation
+00000860: 2075 7064 6174 6573 2061 6e64 2063 6c61   updates and cla
+00000870: 7269 6669 6361 7469 6f6e 732e 0a0a 5265  rifications...Re
+00000880: 6c65 6173 6520 352e 3420 2872 656c 6561  lease 5.4 (relea
+00000890: 7365 2064 6174 653a 2032 3032 312d 3130  se date: 2021-10
+000008a0: 2d31 3129 0a3d 3d3d 3d3d 3d3d 3d3d 3d3d  -11).===========
+000008b0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+000008c0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d0a 4e65 7720  ===========.New 
+000008d0: 4665 6174 7572 6573 0a2d 2d2d 2d2d 2d2d  Features.-------
+000008e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 2d20 5375  -----------.- Su
+000008f0: 7070 6f72 7420 666f 7220 6e65 7720 6261  pport for new ba
+00000900: 636b 656e 6420 6665 6174 7572 6573 2e0a  ckend features..
+00000910: 2d20 5265 2d69 6d70 6c65 6d65 6e74 2072  - Re-implement r
+00000920: 656d 6f76 616c 206f 6620 7072 6f6a 6563  emoval of projec
+00000930: 7420 636f 6e76 656e 6965 6e63 6520 6772  t convenience gr
+00000940: 6f75 7073 2028 2331 3336 3529 0a2d 2041  oups (#1365).- A
+00000950: 6464 2073 7566 6669 7820 746f 2075 7365  dd suffix to use
+00000960: 7220 6167 656e 7420 746f 2064 6966 6665  r agent to diffe
+00000970: 7265 6e74 6961 7465 2062 6574 7765 656e  rentiate between
+00000980: 2074 7970 6573 206f 6620 7265 7772 6974   types of rewrit
+00000990: 6520 636f 6d6d 616e 6420 2823 3133 3539  e command (#1359
+000009a0: 290a 2d20 6d62 2063 6f6d 6d61 6e64 3a20  ).- mb command: 
+000009b0: 7261 6973 6520 6572 726f 7220 6966 206a  raise error if j
+000009c0: 736f 6e20 6f6e 6c79 2066 6c61 6773 2061  son only flags a
+000009d0: 7265 2075 7365 6420 666f 7220 786d 6c20  re used for xml 
+000009e0: 4150 4920 2028 2331 3335 3829 0a2d 2049  API  (#1358).- I
+000009f0: 6d70 726f 7665 2060 6773 7574 696c 2072  mprove `gsutil r
+00000a00: 6d60 2061 6e64 2060 6773 7574 696c 2072  m` and `gsutil r
+00000a10: 6577 7269 7465 6020 6865 6c70 2070 6167  ewrite` help pag
+00000a20: 6573 2e20 2823 3133 3535 290a 2d20 4c69  es. (#1355).- Li
+00000a30: 6e6b 2066 6978 2061 6e64 2074 6572 6d20  nk fix and term 
+00000a40: 7570 6461 7465 2069 6e20 6865 6c70 2064  update in help d
+00000a50: 6f63 7320 2823 3133 3534 290a 0a4f 7468  ocs (#1354)..Oth
+00000a60: 6572 2043 6861 6e67 6573 0a2d 2d2d 2d2d  er Changes.-----
+00000a70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 2d20  -------------.- 
+00000a80: 496d 7072 6f76 656d 656e 7473 2074 6f20  Improvements to 
+00000a90: 7468 6520 5769 6c64 6361 7264 2068 656c  the Wildcard hel
+00000aa0: 7020 746f 7069 6320 2823 3133 3637 290a  p topic (#1367).
+00000ab0: 2d20 496d 7072 6f76 6520 6067 7375 7469  - Improve `gsuti
+00000ac0: 6c20 726d 6020 616e 6420 6067 7375 7469  l rm` and `gsuti
+00000ad0: 6c20 7265 7772 6974 6560 2068 656c 7020  l rewrite` help 
+00000ae0: 7061 6765 732e 2028 2331 3335 3529 0a2d  pages. (#1355).-
+00000af0: 204c 696e 6b20 6669 7820 616e 6420 7465   Link fix and te
+00000b00: 726d 2075 7064 6174 6520 696e 2068 656c  rm update in hel
+00000b10: 7020 646f 6373 2028 2331 3335 3429 0a0a  p docs (#1354)..
+00000b20: 5265 6c65 6173 6520 352e 3320 2872 656c  Release 5.3 (rel
+00000b30: 6561 7365 2064 6174 653a 2032 3032 312d  ease date: 2021-
+00000b40: 3039 2d33 3029 0a3d 3d3d 3d3d 3d3d 3d3d  09-30).=========
+00000b50: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00000b60: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d0a 4e65  =============.Ne
+00000b70: 7720 4665 6174 7572 6573 0a2d 2d2d 2d2d  w Features.-----
+00000b80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 2d20  -------------.- 
+00000b90: 4164 6420 7375 7070 6f72 7420 666f 7220  Add support for 
+00000ba0: 5475 7262 6f20 5265 706c 6963 6174 696f  Turbo Replicatio
+00000bb0: 6e20 2852 504f 292e 2028 2331 3335 3129  n (RPO). (#1351)
+00000bc0: 0a0a 4275 6720 4669 7865 730a 2d2d 2d2d  ..Bug Fixes.----
+00000bd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d  --------------.-
+00000be0: 2041 6c6c 6f77 2074 6865 2072 656d 6f76   Allow the remov
+00000bf0: 616c 206f 6620 7072 6f6a 6563 7420 636f  al of project co
+00000c00: 6e76 656e 6965 6e63 6520 6772 6f75 7073  nvenience groups
+00000c10: 2e20 2823 3133 3530 290a 0a4f 7468 6572  . (#1350)..Other
+00000c20: 2043 6861 6e67 6573 0a2d 2d2d 2d2d 2d2d   Changes.-------
+00000c30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 2d20 5365  -----------.- Se
+00000c40: 7665 7261 6c20 646f 6375 6d65 6e74 6174  veral documentat
+00000c50: 696f 6e20 7570 6461 7465 7320 616e 6420  ion updates and 
+00000c60: 636c 6172 6966 6963 6174 696f 6e73 2e0a  clarifications..
+00000c70: 0a52 656c 6561 7365 2035 2e32 2028 7265  .Release 5.2 (re
+00000c80: 6c65 6173 6520 6461 7465 3a20 3230 3231  lease date: 2021
+00000c90: 2d30 392d 3233 290a 3d3d 3d3d 3d3d 3d3d  -09-23).========
+00000ca0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00000cb0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 0a4e  ==============.N
+00000cc0: 6577 2046 6561 7475 7265 730a 2d2d 2d2d  ew Features.----
+00000cd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d  --------------.-
+00000ce0: 2041 6464 2063 7020 7375 7070 6f72 7420   Add cp support 
+00000cf0: 666f 7220 656e 642d 746f 2d65 6e64 2065  for end-to-end e
+00000d00: 6e63 7279 7074 696f 6e20 7669 6120 7468  ncryption via th
+00000d10: 6520 7370 6c69 742d 7472 7573 7420 656e  e split-trust en
+00000d20: 6372 7970 7469 6f6e 2074 6f6f 6c20 2853  cryption tool (S
+00000d30: 5445 5429 2e20 2823 3133 3338 290a 0a42  TET). (#1338)..B
+00000d40: 7567 2046 6978 6573 0a2d 2d2d 2d2d 2d2d  ug Fixes.-------
+00000d50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 2d20 5573  -----------.- Us
+00000d60: 6520 6375 7374 6f6d 2065 6e64 706f 696e  e custom endpoin
+00000d70: 7473 2066 6f72 2072 6573 756d 6162 6c65  ts for resumable
+00000d80: 2075 7064 6c6f 6164 7320 6f6e 2074 6865   updloads on the
+00000d90: 2058 4d4c 2041 5049 2e20 2823 3133 3333   XML API. (#1333
+00000da0: 290a 0a4f 7468 6572 2043 6861 6e67 6573  )..Other Changes
+00000db0: 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  .---------------
+00000dc0: 2d2d 2d0a 2d20 4472 6f70 7065 6420 7375  ---.- Dropped su
+00000dd0: 7070 6f72 7420 666f 7220 5079 7468 6f6e  pport for Python
+00000de0: 2032 2074 6f20 7061 7463 6820 5253 4120   2 to patch RSA 
+00000df0: 7365 6375 7269 7479 2069 7373 7565 732e  security issues.
+00000e00: 2028 2331 3333 3929 0a2d 2053 6576 6572   (#1339).- Sever
+00000e10: 616c 2064 6f63 756d 656e 7461 7469 6f6e  al documentation
+00000e20: 2075 7064 6174 6573 2061 6e64 2063 6c61   updates and cla
+00000e30: 7269 6669 6361 7469 6f6e 732e 0a0a 5265  rifications...Re
+00000e40: 6c65 6173 6520 342e 3638 2028 7265 6c65  lease 4.68 (rele
+00000e50: 6173 6520 6461 7465 3a20 3230 3231 2d30  ase date: 2021-0
+00000e60: 392d 3134 290a 3d3d 3d3d 3d3d 3d3d 3d3d  9-14).==========
+00000e70: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00000e80: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d0a 4275  =============.Bu
+00000e90: 6720 4669 7865 730a 2d2d 2d2d 2d2d 2d2d  g Fixes.--------
+00000ea0: 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d 2049 6d70  ----------.- Imp
+00000eb0: 726f 7665 2063 6f6e 7465 6e74 2074 7970  rove content typ
+00000ec0: 6520 696e 6665 7265 6e63 6520 666f 7220  e inference for 
+00000ed0: 736f 6d65 2063 6f6d 6d6f 6e20 6578 7465  some common exte
+00000ee0: 6e73 696f 6e73 2e20 2823 3133 3231 290a  nsions. (#1321).
+00000ef0: 2d20 436f 7079 2043 6f6e 7465 6e74 2d45  - Copy Content-E
+00000f00: 6e63 6f64 696e 6720 6672 6f6d 2066 6972  ncoding from fir
+00000f10: 7374 206f 626a 6563 7420 696e 2063 6f6d  st object in com
+00000f20: 706f 7365 2063 6f6d 6d61 6e64 2e20 2823  pose command. (#
+00000f30: 3133 3230 290a 2d20 5375 7070 6f72 7420  1320).- Support 
+00000f40: 6765 6e65 7261 7469 6f6e 2071 7565 7279  generation query
+00000f50: 696e 6720 666f 7220 6c73 2063 6f6d 6d61  ing for ls comma
+00000f60: 6e64 2e20 2823 3133 3139 290a 0a4f 7468  nd. (#1319)..Oth
+00000f70: 6572 2043 6861 6e67 6573 0a2d 2d2d 2d2d  er Changes.-----
+00000f80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 2d20  -------------.- 
+00000f90: 4164 6420 6120 6d65 7373 6167 6520 656e  Add a message en
+00000fa0: 636f 7572 6167 696e 6720 7079 3320 7570  couraging py3 up
+00000fb0: 6772 6164 652e 2028 2331 3332 3229 0a2d  grade. (#1322).-
+00000fc0: 2055 7064 6174 6520 6d6f 636b 206c 6962   Update mock lib
+00000fd0: 7261 7279 2076 6572 7369 6f6e 2e20 2823  rary version. (#
+00000fe0: 3133 3135 290a 2d20 5365 7665 7261 6c20  1315).- Several 
+00000ff0: 646f 6375 6d65 6e74 6174 696f 6e20 7570  documentation up
+00001000: 6461 7465 7320 616e 6420 636c 6172 6966  dates and clarif
+00001010: 6963 6174 696f 6e73 2e0a 0a52 656c 6561  ications...Relea
+00001020: 7365 2034 2e36 3720 2872 656c 6561 7365  se 4.67 (release
+00001030: 2064 6174 653a 2032 3032 312d 3038 2d31   date: 2021-08-1
+00001040: 3629 0a3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  6).=============
+00001050: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00001060: 3d3d 3d3d 3d3d 3d3d 3d3d 0a42 7567 2046  ==========.Bug F
+00001070: 6978 6573 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d  ixes.-----------
+00001080: 2d2d 2d2d 2d2d 2d0a 2d20 5570 6461 7465  -------.- Update
+00001090: 2070 7975 3266 2074 6f20 6c61 7465 7374   pyu2f to latest
+000010a0: 2076 6572 7369 6f6e 2074 6f20 6669 7820   version to fix 
+000010b0: 6120 7365 6375 7269 7479 206b 6579 2072  a security key r
+000010c0: 6561 7574 6820 6275 6720 2823 3133 3130  eauth bug (#1310
+000010d0: 290a 0a4f 7468 6572 2043 6861 6e67 6573  )..Other Changes
+000010e0: 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  .---------------
+000010f0: 2d2d 2d0a 202d 2053 6576 6572 616c 2064  ---. - Several d
+00001100: 6f63 756d 656e 7461 7469 6f6e 2075 7064  ocumentation upd
+00001110: 6174 6573 2061 6e64 2063 6c61 7269 6669  ates and clarifi
+00001120: 6361 7469 6f6e 732e 0a0a 5265 6c65 6173  cations...Releas
+00001130: 6520 342e 3636 2028 7265 6c65 6173 6520  e 4.66 (release 
+00001140: 6461 7465 3a20 3230 3231 2d30 372d 3239  date: 2021-07-29
+00001150: 290a 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ).==============
+00001160: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00001170: 3d3d 3d3d 3d3d 3d3d 3d0a 4e65 7720 4665  =========.New Fe
+00001180: 6174 7572 6573 0a2d 2d2d 2d2d 2d2d 2d2d  atures.---------
+00001190: 2d2d 2d2d 2d2d 2d2d 2d0a 202d 204f 6e62  ---------. - Onb
+000011a0: 6f61 7264 206d 544c 5320 7375 7070 6f72  oard mTLS suppor
+000011b0: 7420 7769 7468 2041 4950 2d34 3131 3420  t with AIP-4114 
+000011c0: 666f 7220 6773 7574 696c 2028 2331 3330  for gsutil (#130
+000011d0: 3229 0a0a 4f74 6865 7220 4368 616e 6765  2)..Other Change
+000011e0: 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  s.--------------
+000011f0: 2d2d 2d2d 0a20 2d20 5365 7665 7261 6c20  ----. - Several 
+00001200: 646f 6375 6d65 6e74 6174 696f 6e20 7570  documentation up
+00001210: 6461 7465 7320 616e 6420 636c 6172 6966  dates and clarif
+00001220: 6963 6174 696f 6e73 2e0a 0a52 656c 6561  ications...Relea
+00001230: 7365 2034 2e36 3520 2872 656c 6561 7365  se 4.65 (release
+00001240: 2064 6174 653a 2032 3032 312d 3037 2d30   date: 2021-07-0
+00001250: 3229 0a3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  2).=============
+00001260: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00001270: 3d3d 3d3d 3d3d 3d3d 3d3d 0a4e 6577 2046  ==========.New F
+00001280: 6561 7475 7265 730a 2d2d 2d2d 2d2d 2d2d  eatures.--------
+00001290: 2d2d 2d2d 2d2d 2d2d 2d2d 0a20 2d20 4164  ----------. - Ad
+000012a0: 6420 6773 7574 696c 2073 7570 706f 7274  d gsutil support
+000012b0: 2066 6f72 2050 7562 6c69 6320 4163 6365   for Public Acce
+000012c0: 7373 2050 7265 7665 6e74 696f 6e20 2823  ss Prevention (#
+000012d0: 3132 3535 290a 0a42 7567 2046 6978 6573  1255)..Bug Fixes
+000012e0: 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  .---------------
+000012f0: 2d2d 2d0a 202d 2046 6978 2072 6169 7369  ---. - Fix raisi
+00001300: 6e67 2d62 6164 2d74 7970 6520 7961 7066  ng-bad-type yapf
+00001310: 2065 7272 6f72 732e 2028 2331 3330 3329   errors. (#1303)
+00001320: 0a0a 4f74 6865 7220 4368 616e 6765 730a  ..Other Changes.
+00001330: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00001340: 2d2d 0a20 2d20 4c69 6e6b 2066 6978 2070  --. - Link fix p
+00001350: 6f69 6e74 696e 6720 746f 2043 4743 2064  ointing to CGC d
+00001360: 6f63 7320 6167 6169 6e20 2823 3132 3931  ocs again (#1291
+00001370: 292e 0a20 2d20 4261 636b 6669 6c6c 2073  ).. - Backfill s
+00001380: 6f6d 6520 736d 616c 6c20 646f 6320 6368  ome small doc ch
+00001390: 616e 6765 7320 2823 3132 3934 290a 202d  anges (#1294). -
+000013a0: 2053 6d61 6c6c 2074 6578 7420 7477 6561   Small text twea
+000013b0: 6b20 2823 3132 3933 290a 202d 2055 7064  k (#1293). - Upd
+000013c0: 6174 6520 4348 4543 4b53 554d 2061 6e64  ate CHECKSUM and
+000013d0: 2056 4552 5349 4f4e 2066 6f72 2034 2e36   VERSION for 4.6
+000013e0: 3420 7265 6c65 6173 652e 0a20 2d20 5570  4 release.. - Up
+000013f0: 6461 7465 2043 4841 4e47 4553 2e6d 6420  date CHANGES.md 
+00001400: 666f 7220 342e 3634 2072 656c 6561 7365  for 4.64 release
+00001410: 2e0a 202d 2044 656c 6574 6520 656e 6372  .. - Delete encr
+00001420: 7970 7469 6f6e 2061 6464 6865 6c70 2070  yption addhelp p
+00001430: 6167 6520 2823 3132 3937 290a 202d 2050  age (#1297). - P
+00001440: 7574 7469 6e67 2063 6c2f 3338 3130 3335  utting cl/381035
+00001450: 3235 3120 696e 746f 2067 6974 6875 6220  251 into github 
+00001460: 2823 3132 3936 290a 202d 2042 6163 6b66  (#1296). - Backf
+00001470: 696c 6c20 636c 2f33 3831 3933 3239 3631  ill cl/381932961
+00001480: 2028 2331 3239 3829 0a0a 5265 6c65 6173   (#1298)..Releas
+00001490: 6520 342e 3634 2028 7265 6c65 6173 6520  e 4.64 (release 
+000014a0: 6461 7465 3a20 3230 3231 2d30 362d 3138  date: 2021-06-18
+000014b0: 290a 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ).==============
+000014c0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+000014d0: 3d3d 3d3d 3d3d 3d3d 3d0a 4275 6720 4669  =========.Bug Fi
+000014e0: 7865 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  xes.------------
+000014f0: 2d2d 2d2d 2d2d 0a20 2d20 4e6f 6e65 0a0a  ------. - None..
+00001500: 4f74 6865 7220 4368 616e 6765 730a 2d2d  Other Changes.--
+00001510: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00001520: 0a20 2d20 4c69 6e6b 2066 6978 2070 6f69  . - Link fix poi
+00001530: 6e74 696e 6720 746f 2043 4743 2064 6f63  nting to CGC doc
+00001540: 732e 0a0a 5265 6c65 6173 6520 342e 3633  s...Release 4.63
+00001550: 2028 7265 6c65 6173 6520 6461 7465 3a20   (release date: 
+00001560: 3230 3231 2d30 362d 3039 290a 3d3d 3d3d  2021-06-09).====
+00001570: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00001580: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00001590: 3d3d 3d0a 4275 6720 4669 7865 730a 2d2d  ===.Bug Fixes.--
+000015a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000015b0: 0a20 2d20 5570 6461 7465 2077 6172 6e69  . - Update warni
+000015c0: 6e67 2074 6578 7420 6f6e 204b 4d53 2061  ng text on KMS a
+000015d0: 6363 6573 7320 6465 6e69 6564 2028 2331  ccess denied (#1
+000015e0: 3237 3829 0a20 2d20 4d61 6b65 202a 2a20  278). - Make ** 
+000015f0: 746f 2072 6570 7265 7365 6e74 207a 6572  to represent zer
+00001600: 6f20 6f72 206d 6f72 6520 666f 6c64 6572  o or more folder
+00001610: 7320 666f 7220 636c 6f75 6420 7572 6c73  s for cloud urls
+00001620: 2028 2331 3237 3729 0a20 2d20 5261 6973   (#1277). - Rais
+00001630: 6520 6572 726f 7220 6966 2066 696e 616c  e error if final
+00001640: 2064 6573 7469 6e61 7469 6f6e 2070 6174   destination pat
+00001650: 6820 656e 6473 2077 6974 6820 6120 6465  h ends with a de
+00001660: 6c69 6d69 7465 722e 2028 2331 3237 3329  limiter. (#1273)
+00001670: 0a0a 4f74 6865 7220 4368 616e 6765 730a  ..Other Changes.
+00001680: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00001690: 2d2d 0a20 2d20 4669 7820 666c 616b 7920  --. - Fix flaky 
+000016a0: 7465 7374 2066 6f72 2072 6d20 7573 696e  test for rm usin
+000016b0: 6720 7072 6563 6f6e 6469 7469 6f6e 7320  g preconditions 
+000016c0: 2823 3132 3838 290a 202d 2046 6978 2070  (#1288). - Fix p
+000016d0: 7965 6e76 2069 7373 7565 2066 6f72 206d  yenv issue for m
+000016e0: 6163 4f53 2028 2331 3238 3029 0a20 2d20  acOS (#1280). - 
+000016f0: 4669 7820 7265 7772 6974 6520 7465 7374  Fix rewrite test
+00001700: 7320 2823 3132 3739 290a 202d 2052 656d  s (#1279). - Rem
+00001710: 6f76 6520 756e 7573 6564 2070 726f 6772  ove unused progr
+00001720: 6573 7320 6361 6c6c 6261 636b 2e20 2823  ess callback. (#
+00001730: 3132 3734 290a 202d 2053 6576 6572 616c  1274). - Several
+00001740: 2064 6f63 756d 656e 7461 7469 6f6e 2075   documentation u
+00001750: 7064 6174 6573 2061 6e64 2063 6c61 7269  pdates and clari
+00001760: 6669 6361 7469 6f6e 732e 0a0a 5265 6c65  fications...Rele
+00001770: 6173 6520 342e 3632 2028 7265 6c65 6173  ase 4.62 (releas
+00001780: 6520 6461 7465 3a20 3230 3231 2d30 352d  e date: 2021-05-
+00001790: 3133 290a 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  13).============
+000017a0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+000017b0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d0a 4e65 7720  ===========.New 
+000017c0: 4665 6174 7572 6573 0a2d 2d2d 2d2d 2d2d  Features.-------
+000017d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 202d 2041  -----------. - A
+000017e0: 6464 2069 676e 6f72 652d 6578 6973 7469  dd ignore-existi
+000017f0: 6e67 206f 7074 696f 6e20 666f 7220 7273  ng option for rs
+00001800: 796e 6320 2823 3131 3833 292e 0a20 2d20  ync (#1183).. - 
+00001810: 5368 6f77 2073 6174 6973 6966 6965 7350  Show satisifiesP
+00001820: 5a53 2069 6e66 6f20 696e 2062 7563 6b65  ZS info in bucke
+00001830: 7420 696e 666f 206c 6973 7469 6e67 2028  t info listing (
+00001840: 6c73 202d 4c62 292e 2028 2331 3139 3129  ls -Lb). (#1191)
+00001850: 0a20 2d20 5375 7070 6f72 7420 636f 6d70  . - Support comp
+00001860: 6f73 6974 6520 7570 6c6f 6164 7320 7769  osite uploads wi
+00001870: 7468 204b 4d53 2e20 2823 3132 3134 290a  th KMS. (#1214).
+00001880: 202d 2045 6e66 6f72 6365 2063 7573 746f   - Enforce custo
+00001890: 6d20 656e 6470 6f69 6e74 7320 7468 726f  m endpoints thro
+000018a0: 7567 6820 6d75 6c74 6970 6172 7420 636f  ugh multipart co
+000018b0: 7069 6573 2061 6e64 2063 6f6d 706c 6578  pies and complex
+000018c0: 2064 6f77 6e6c 6f61 6473 2e20 2823 3132   downloads. (#12
+000018d0: 3437 2c20 2331 3235 3029 0a0a 4275 6720  47, #1250)..Bug 
+000018e0: 4669 7865 730a 2d2d 2d2d 2d2d 2d2d 2d2d  Fixes.----------
+000018f0: 2d2d 2d2d 2d2d 2d2d 0a20 2d20 726d 2077  --------. - rm w
+00001900: 696c 6c20 636f 6e74 696e 7565 206f 6e20  ill continue on 
+00001910: 6f62 6a65 6374 2034 3034 732e 2028 2331  object 404s. (#1
+00001920: 3033 3329 0a20 2d20 5570 6461 7465 2062  033). - Update b
+00001930: 6f74 6f20 7375 626d 6f64 756c 6520 746f  oto submodule to
+00001940: 2069 6e63 6c75 6465 2061 2066 6978 2066   include a fix f
+00001950: 6f72 2069 6e74 6567 7269 7479 2063 6865  or integrity che
+00001960: 636b 7320 7769 7468 204b 4d53 2e20 2823  cks with KMS. (#
+00001970: 3132 3538 290a 202d 2069 616d 2063 6820  1258). - iam ch 
+00001980: 6973 206e 6f77 2063 6173 652d 696e 7365  is now case-inse
+00001990: 6e73 6974 6976 6520 666f 7220 7075 626c  nsitive for publ
+000019a0: 6963 206d 656d 6265 7273 2061 6e64 206d  ic members and m
+000019b0: 656d 6265 7220 7479 7065 732e 2028 2331  ember types. (#1
+000019c0: 3234 3129 0a20 2d20 5375 7070 6f72 7420  241). - Support 
+000019d0: 736b 6970 7069 6e67 2069 6e74 6567 7269  skipping integri
+000019e0: 7479 2063 6865 636b 7320 696e 2064 6169  ty checks in dai
+000019f0: 7379 2063 6861 696e 2074 7261 6e73 6665  sy chain transfe
+00001a00: 7273 2e20 2823 3132 3537 290a 202d 2045  rs. (#1257). - E
+00001a10: 6e73 7572 6520 7468 6520 636f 7272 6563  nsure the correc
+00001a20: 7420 636f 6e74 656e 742d 6c65 6e67 7468  t content-length
+00001a30: 2069 7320 7072 6f76 6964 6564 2066 6f72   is provided for
+00001a40: 2069 6e63 6f6d 706c 6574 6520 646f 776e   incomplete down
+00001a50: 6c6f 6164 732e 2028 2331 3233 3129 0a20  loads. (#1231). 
+00001a60: 2d20 4669 7820 6461 6973 7920 6368 6169  - Fix daisy chai
+00001a70: 6e20 666f 7220 7769 6e64 6f77 732e 2028  n for windows. (
+00001a80: 2331 3235 3129 0a20 2d20 4669 7820 7374  #1251). - Fix st
+00001a90: 6174 7320 6372 6173 6869 6e67 2062 6563  ats crashing bec
+00001aa0: 6175 7365 206f 6620 6e61 6e6f 7365 6373  ause of nanosecs
+00001ab0: 2069 6e20 6375 7374 6f6d 2d74 696d 652e   in custom-time.
+00001ac0: 2028 2331 3234 3629 0a20 2d20 4465 6c65   (#1246). - Dele
+00001ad0: 7465 2063 6f6e 6e65 6374 696f 6e73 2061  te connections a
+00001ae0: 6674 6572 2066 6f72 6b2e 2028 2331 3233  fter fork. (#123
+00001af0: 3829 0a20 2d20 5061 7463 6820 6d64 3520  8). - Patch md5 
+00001b00: 696d 706f 7274 2066 6f72 2063 6f6d 706c  import for compl
+00001b10: 6961 6e63 6520 6f6e 2052 6564 2048 6174  iance on Red Hat
+00001b20: 2046 4950 5320 6d6f 6465 2064 6973 7472   FIPS mode distr
+00001b30: 6962 7574 696f 6e73 2e20 2823 3132 3234  ibutions. (#1224
+00001b40: 290a 202d 2048 616e 646c 6520 6361 7365  ). - Handle case
+00001b50: 2077 6865 7265 2074 6865 7265 2061 7265   where there are
+00001b60: 2074 6f6f 206d 616e 7920 736c 6173 6865   too many slashe
+00001b70: 7320 6166 7465 7220 436c 6f75 6455 726c  s after CloudUrl
+00001b80: 2073 6368 656d 652e 2028 2331 3233 3729   scheme. (#1237)
+00001b90: 0a20 2d20 416c 6c6f 7720 7370 6563 6966  . - Allow specif
+00001ba0: 7969 6e67 206f 626a 6563 7420 6765 6e65  ying object gene
+00001bb0: 7261 7469 6f6e 7320 696e 2063 6f6d 706f  rations in compo
+00001bc0: 7365 2e20 2823 3132 3239 290a 202d 2052  se. (#1229). - R
+00001bd0: 6169 7365 2065 7272 6f72 2069 6e20 7365  aise error in se
+00001be0: 746d 6574 6120 6966 206e 6f20 6865 6164  tmeta if no head
+00001bf0: 6572 7320 6172 6520 7072 6f76 6964 6564  ers are provided
+00001c00: 2e20 2823 3132 3237 290a 202d 2046 6978  . (#1227). - Fix
+00001c10: 2065 6e63 6f64 696e 6720 6973 7375 6520   encoding issue 
+00001c20: 666f 7220 7266 6338 3232 206d 6573 7361  for rfc822 messa
+00001c30: 6765 732e 2028 2331 3233 3429 0a20 2d20  ges. (#1234). - 
+00001c40: 4669 7820 5374 7265 616d 4578 6861 7573  Fix StreamExhaus
+00001c50: 7465 6420 4572 726f 7220 6861 6e64 6c69  ted Error handli
+00001c60: 6e67 2066 6f72 2052 6573 756d 6162 6c65  ng for Resumable
+00001c70: 2075 706c 6f61 6473 2e20 2823 3132 3332   uploads. (#1232
+00001c80: 290a 202d 2046 6978 2077 696c 6463 6172  ). - Fix wildcar
+00001c90: 6420 2a2a 2062 7567 2e20 2823 3132 3335  d ** bug. (#1235
+00001ca0: 290a 202d 2046 6978 2061 6c69 676e 6d65  ). - Fix alignme
+00001cb0: 6e74 206f 6620 6c73 202d 6c20 6f75 7470  nt of ls -l outp
+00001cc0: 7574 2e20 2823 3132 3139 290a 202d 2046  ut. (#1219). - F
+00001cd0: 6978 206e 6577 6c69 6e65 7320 6172 6f75  ix newlines arou
+00001ce0: 6e64 206c 6973 7473 2e20 2823 3132 3230  nd lists. (#1220
+00001cf0: 290a 0a4f 7468 6572 2043 6861 6e67 6573  )..Other Changes
+00001d00: 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  .---------------
+00001d10: 2d2d 2d0a 202d 2046 6978 2073 6f6e 6174  ---. - Fix sonat
+00001d20: 7970 6520 6572 726f 7273 2e20 2823 3132  ype errors. (#12
+00001d30: 3636 290a 202d 2067 736c 6962 3a20 626f  66). - gslib: bo
+00001d40: 746f 5c5f 7574 696c 3a20 696d 706c 656d  to\_util: implem
+00001d50: 656e 7420 6120 4861 7355 7365 7253 7065  ent a HasUserSpe
+00001d60: 6369 6669 6564 4773 486f 7374 2829 2068  cifiedGsHost() h
+00001d70: 656c 7065 722e 2028 2331 3236 3529 0a20  elper. (#1265). 
+00001d80: 2d20 4164 6469 6e67 2077 6172 6e69 6e67  - Adding warning
+00001d90: 2074 6f20 7273 796e 6320 6966 2073 7472   to rsync if str
+00001da0: 6561 6d73 206f 7220 6e61 6d65 6420 7061  eams or named pa
+00001db0: 7468 7320 6172 6520 696e 636c 7564 6564  ths are included
+00001dc0: 2069 6e20 6120 666f 6c64 6572 2e20 2823   in a folder. (#
+00001dd0: 3130 3331 290a 202d 2049 6d70 726f 7665  1031). - Improve
+00001de0: 2070 6172 616c 6c65 6c69 736d 2077 6172   parallelism war
+00001df0: 6e69 6e67 732e 2028 2331 3232 3629 0a20  nings. (#1226). 
+00001e00: 2d20 5365 7665 7261 6c20 646f 6375 6d65  - Several docume
+00001e10: 6e74 6174 696f 6e20 7570 6461 7465 7320  ntation updates 
+00001e20: 616e 6420 636c 6172 6966 6963 6174 696f  and clarificatio
+00001e30: 6e73 2e0a 0a52 656c 6561 7365 2034 2e36  ns...Release 4.6
+00001e40: 3120 2872 656c 6561 7365 2064 6174 653a  1 (release date:
+00001e50: 2032 3032 312d 3034 2d30 3629 0a3d 3d3d   2021-04-06).===
+00001e60: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00001e70: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00001e80: 3d3d 3d3d 0a42 7567 2046 6978 6573 0a2d  ====.Bug Fixes.-
+00001e90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00001ea0: 2d0a 202d 2055 7064 6174 6520 746f 2052  -. - Update to R
+00001eb0: 5341 2076 342e 352e 0a20 2d20 436f 7079  SA v4.5.. - Copy
+00001ec0: 4865 6c70 6572 2061 6363 6570 7473 206b  Helper accepts k
+00001ed0: 6d73 2063 6865 636b 2062 7970 6173 732e  ms check bypass.
+00001ee0: 2028 2331 3231 3729 0a0a 4f74 6865 7220   (#1217)..Other 
+00001ef0: 4368 616e 6765 730a 2d2d 2d2d 2d2d 2d2d  Changes.--------
+00001f00: 2d2d 2d2d 2d2d 2d2d 2d2d 0a20 2d20 446f  ----------. - Do
+00001f10: 6320 7570 6461 7465 732e 0a0a 5265 6c65  c updates...Rele
+00001f20: 6173 6520 342e 3630 2028 7265 6c65 6173  ase 4.60 (releas
+00001f30: 6520 6461 7465 3a20 3230 3231 2d30 332d  e date: 2021-03-
+00001f40: 3131 290a 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  11).============
+00001f50: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00001f60: 3d3d 3d3d 3d3d 3d3d 3d3d 3d0a 4275 6720  ===========.Bug 
+00001f70: 4669 7865 730a 2d2d 2d2d 2d2d 2d2d 2d2d  Fixes.----------
+00001f80: 2d2d 2d2d 2d2d 2d2d 0a20 2d20 4669 7865  --------. - Fixe
+00001f90: 6420 7072 6f78 7920 636f 6e6e 6563 7469  d proxy connecti
+00001fa0: 6f6e 7320 7768 656e 2075 7369 6e67 2074  ons when using t
+00001fb0: 6865 2047 4353 2058 4d4c 2041 5049 2e0a  he GCS XML API..
+00001fc0: 202d 2049 6d70 726f 7665 2072 656c 6961   - Improve relia
+00001fd0: 6269 6c69 7479 2077 6865 6e20 6d75 6c74  bility when mult
+00001fe0: 6970 6c65 2069 6e73 7461 6e63 6573 206f  iple instances o
+00001ff0: 6620 6773 7574 696c 2074 7261 6e73 6665  f gsutil transfe
+00002000: 7220 746f 2074 6865 2073 616d 6520 6465  r to the same de
+00002010: 7374 696e 6174 696f 6e2e 2028 2331 3230  stination. (#120
+00002020: 3229 0a0a 4f74 6865 7220 4368 616e 6765  2)..Other Change
+00002030: 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  s.--------------
+00002040: 2d2d 2d2d 0a20 2d20 5265 6d6f 7665 2054  ----. - Remove T
+00002050: 7261 7669 7343 4920 616e 6420 7570 6461  ravisCI and upda
+00002060: 7465 2022 6368 6563 6b20 666f 7220 4349  te "check for CI
+00002070: 2220 7265 6665 7265 6e63 6573 2074 6f20  " references to 
+00002080: 7573 6520 4769 7448 7562 2043 492e 2028  use GitHub CI. (
+00002090: 2331 3230 3029 0a20 2d20 5365 7665 7261  #1200). - Severa
+000020a0: 6c20 646f 6375 6d65 6e74 6174 696f 6e20  l documentation 
+000020b0: 7570 6461 7465 7320 616e 6420 636c 6172  updates and clar
+000020c0: 6966 6963 6174 696f 6e73 2e0a 0a52 656c  ifications...Rel
+000020d0: 6561 7365 2034 2e35 3920 2872 656c 6561  ease 4.59 (relea
+000020e0: 7365 2064 6174 653a 2032 3032 312d 3032  se date: 2021-02
+000020f0: 2d31 3029 0a3d 3d3d 3d3d 3d3d 3d3d 3d3d  -10).===========
+00002100: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00002110: 3d3d 3d3d 3d3d 3d3d 3d3d 3d0a 4e65 7720  ===========.New 
+00002120: 4665 6174 7572 6573 0a2d 2d2d 2d2d 2d2d  Features.-------
+00002130: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 202d 2041  -----------. - A
+00002140: 6464 2069 676e 6f72 652d 6578 6973 7469  dd ignore-existi
+00002150: 6e67 206f 7074 696f 6e20 666f 7220 7273  ng option for rs
+00002160: 796e 6320 2823 3131 3833 292e 0a20 2d20  ync (#1183).. - 
+00002170: 5368 6f77 2073 6174 6973 6966 6965 7350  Show satisifiesP
+00002180: 5a53 2069 6e66 6f20 696e 2062 7563 6b65  ZS info in bucke
+00002190: 7420 696e 666f 206c 6973 7469 6e67 2028  t info listing (
+000021a0: 6c73 202d 4c62 2920 2823 3131 3931 292e  ls -Lb) (#1191).
+000021b0: 0a0a 4275 6720 4669 7865 730a 2d2d 2d2d  ..Bug Fixes.----
+000021c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a20  --------------. 
+000021d0: 2d20 5265 6769 7374 6572 2069 6e74 6567  - Register integ
+000021e0: 7261 7469 6f6e 2074 6573 7420 6661 696c  ration test fail
+000021f0: 7572 6573 2069 6e20 6b6f 6b6f 726f 2073  ures in kokoro s
+00002200: 6372 6970 7420 2823 3131 3839 292e 0a0a  cript (#1189)...
+00002210: 4f74 6865 7220 4368 616e 6765 730a 2d2d  Other Changes.--
+00002220: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00002230: 0a20 2d20 5573 6520 7265 7370 6563 7466  . - Use respectf
+00002240: 756c 2063 6f64 6520 2823 3131 3930 292e  ul code (#1190).
+00002250: 0a20 2d20 5365 7665 7261 6c20 646f 6375  . - Several docu
+00002260: 6d65 6e74 6174 696f 6e20 7570 6461 7465  mentation update
+00002270: 7320 616e 6420 636c 6172 6966 6963 6174  s and clarificat
+00002280: 696f 6e73 2e0a 0a52 656c 6561 7365 2034  ions...Release 4
+00002290: 2e35 3820 2872 656c 6561 7365 2064 6174  .58 (release dat
+000022a0: 653a 2032 3032 312d 3031 2d32 3129 0a3d  e: 2021-01-21).=
+000022b0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+000022c0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+000022d0: 3d3d 3d3d 3d0a 4275 6720 4669 7865 730a  =====.Bug Fixes.
+000022e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000022f0: 2d2d 0a20 2d20 4669 7820 6d6f 7265 206f  --. - Fix more o
+00002300: 6363 7572 7265 6e63 6573 206f 6620 656e  ccurrences of en
+00002310: 636f 6465 7374 7269 6e67 2f64 6563 6f64  codestring/decod
+00002320: 6573 7472 696e 6720 2823 3131 3737 290a  estring (#1177).
+00002330: 202d 2049 676e 6f72 6520 7468 6520 2e67   - Ignore the .g
+00002340: 6974 6875 6220 6469 7265 6374 6f72 7920  ithub directory 
+00002350: 666f 7220 7570 6461 7465 7320 2823 3131  for updates (#11
+00002360: 3634 290a 202d 204d 616b 6520 7369 676e  64). - Make sign
+00002370: 7572 6c20 7573 6520 6765 6e65 7261 7469  url use generati
+00002380: 6f6e 2069 6e66 6f72 6d61 7469 6f6e 2e20  on information. 
+00002390: 2823 3131 3639 290a 202d 2046 6978 2055  (#1169). - Fix U
+000023a0: 6e69 636f 6465 456e 636f 6465 4572 726f  nicodeEncodeErro
+000023b0: 7220 696e 2050 7974 686f 6e32 2066 6f72  r in Python2 for
+000023c0: 2068 656c 7020 6d65 7461 6461 7461 2063   help metadata c
+000023d0: 6f6d 6d61 6e64 2028 2331 3137 3229 0a20  ommand (#1172). 
+000023e0: 2d20 4f70 656e 2066 696c 6573 2069 6e20  - Open files in 
+000023f0: 6e6f 6e2d 6170 7065 6e64 206d 6f64 6520  non-append mode 
+00002400: 746f 206d 616b 6520 7374 7269 7065 2066  to make stripe f
+00002410: 756e 6374 696f 6e61 6c69 7479 2077 6f72  unctionality wor
+00002420: 6b20 696e 204c 7573 7472 6520 6669 6c65  k in Lustre file
+00002430: 2073 7973 7465 6d73 2028 2331 3137 3129   systems (#1171)
+00002440: 0a20 2d20 5065 7273 6973 7420 7265 7175  . - Persist requ
+00002450: 6573 7420 7265 6173 6f6e 2068 6561 6465  est reason heade
+00002460: 7220 666f 7220 7265 7375 6d61 626c 6520  r for resumable 
+00002470: 7570 6c6f 6164 7320 616e 6420 646f 776e  uploads and down
+00002480: 6c6f 6164 732e 2028 2331 3137 3029 0a20  loads. (#1170). 
+00002490: 2d20 696d 7072 6f76 6520 7570 6c6f 6164  - improve upload
+000024a0: 2073 7065 6564 2073 6967 6e69 6669 6361   speed significa
+000024b0: 6e74 6c79 2077 6865 6e20 6974 2072 756e  ntly when it run
+000024c0: 7320 6f6e 2057 696e 646f 7773 2028 2331  s on Windows (#1
+000024d0: 3134 3629 0a20 2d20 4164 6420 7065 7266  146). - Add perf
+000024e0: 2d74 7261 6365 2d74 6f6b 656e 2073 7570  -trace-token sup
+000024f0: 706f 7274 2066 6f72 2072 6573 756d 6162  port for resumab
+00002500: 6c65 2075 706c 6f61 6473 2e20 2823 3131  le uploads. (#11
+00002510: 3638 290a 202d 2049 6d70 726f 7665 2065  68). - Improve e
+00002520: 7272 6f72 206d 6573 7361 6765 2077 6865  rror message whe
+00002530: 6e20 6120 6275 636b 6574 2773 206e 616d  n a bucket's nam
+00002540: 6520 636f 6c6c 6964 6573 2077 6974 6820  e collides with 
+00002550: 616e 6f74 6865 722e 2028 2331 3136 3629  another. (#1166)
+00002560: 0a20 2d20 4669 7820 666f 726d 6174 7469  . - Fix formatti
+00002570: 6e67 2066 6f72 2065 6d70 7479 2043 4f52  ng for empty COR
+00002580: 5320 4a53 4f4e 2064 6f63 756d 656e 7420  S JSON document 
+00002590: 2823 3131 3536 290a 0a4f 7468 6572 2043  (#1156)..Other C
+000025a0: 6861 6e67 6573 0a2d 2d2d 2d2d 2d2d 2d2d  hanges.---------
+000025b0: 2d2d 2d2d 2d2d 2d2d 2d0a 202d 2053 6576  ---------. - Sev
+000025c0: 6572 616c 2064 6f63 756d 656e 7461 7469  eral documentati
+000025d0: 6f6e 2075 7064 6174 6573 2061 6e64 2063  on updates and c
+000025e0: 6c61 7269 6669 6361 7469 6f6e 732e 0a20  larifications.. 
+000025f0: 2d20 4164 6420 4349 2063 6865 636b 7320  - Add CI checks 
+00002600: 666f 7220 5079 7468 6f6e 2033 2e38 2028  for Python 3.8 (
+00002610: 2331 3136 3729 0a0a 2052 656c 6561 7365  #1167).. Release
+00002620: 2034 2e35 3720 2872 656c 6561 7365 2064   4.57 (release d
+00002630: 6174 653a 2032 3032 302d 3132 2d30 3829  ate: 2020-12-08)
+00002640: 0a3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  .===============
+00002650: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00002660: 3d3d 3d3d 3d3d 3d0a 4275 6720 4669 7865  =======.Bug Fixe
+00002670: 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  s.--------------
+00002680: 2d2d 2d2d 0a20 2d20 5265 6d6f 7665 2055  ----. - Remove U
+00002690: 6e69 636f 6465 2063 6861 7261 6374 6572  nicode character
+000026a0: 2066 726f 6d20 636f 6e66 6967 2063 6f6d   from config com
+000026b0: 6d61 6e64 2074 6861 7420 7761 7320 6361  mand that was ca
+000026c0: 7573 696e 6720 5079 7468 6f6e 2032 2069  using Python 2 i
+000026d0: 7373 7565 732e 0a20 2d20 5379 6e63 2064  ssues.. - Sync d
+000026e0: 6f63 7320 7769 7468 2077 6562 2e0a 0a52  ocs with web...R
+000026f0: 656c 6561 7365 2034 2e35 3620 2872 656c  elease 4.56 (rel
+00002700: 6561 7365 2064 6174 653a 2032 3032 302d  ease date: 2020-
+00002710: 3132 2d30 3329 0a3d 3d3d 3d3d 3d3d 3d3d  12-03).=========
+00002720: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00002730: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d0a 4e65  =============.Ne
+00002740: 7720 4665 6174 7572 6573 0a2d 2d2d 2d2d  w Features.-----
+00002750: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 202d  -------------. -
+00002760: 206d 544c 532f 4443 4120 4175 7468 656e   mTLS/DCA Authen
+00002770: 7469 6361 7469 6f6e 2028 2331 3134 312c  tication (#1141,
+00002780: 2023 3131 3232 2c20 2331 3134 3229 0a20   #1122, #1142). 
+00002790: 2d20 4164 6420 4769 7448 7562 2041 6374  - Add GitHub Act
+000027a0: 696f 6e73 2043 4920 2823 3131 3533 290a  ions CI (#1153).
+000027b0: 0a42 7567 2046 6978 6573 0a2d 2d2d 2d2d  .Bug Fixes.-----
+000027c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 202d  -------------. -
+000027d0: 2044 656c 6574 6520 7468 6520 7072 6f6a   Delete the proj
+000027e0: 6563 7473 2e70 7920 6865 6c70 2074 6f70  ects.py help top
+000027f0: 6963 2028 2331 3135 3429 0a20 2d20 466f  ic (#1154). - Fo
+00002800: 726d 6174 2066 6978 2066 6f72 2063 702e  rmat fix for cp.
+00002810: 7079 2028 2331 3135 3229 0a0a 5265 6c65  py (#1152)..Rele
+00002820: 6173 6520 342e 3535 2028 7265 6c65 6173  ase 4.55 (releas
+00002830: 6520 6461 7465 3a20 3230 3230 2d31 312d  e date: 2020-11-
+00002840: 3132 290a 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  12).============
+00002850: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00002860: 3d3d 3d3d 3d3d 3d3d 3d3d 0a42 7567 2046  ==========.Bug F
+00002870: 6978 6573 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d  ixes.-----------
+00002880: 2d2d 2d2d 2d2d 2d0a 202d 2050 7265 7665  -------. - Preve
+00002890: 6e74 2074 7261 696c 696e 6720 7370 6163  nt trailing spac
+000028a0: 6573 2069 6e20 6a73 6f6e 206f 7574 7075  es in json outpu
+000028b0: 7420 6f66 2069 616d 2067 6574 2028 2339  t of iam get (#9
+000028c0: 3737 290a 202d 2046 6978 2064 6570 7265  77). - Fix depre
+000028d0: 6361 7469 6f6e 2077 6172 6e69 6e67 7320  cation warnings 
+000028e0: 6475 6520 746f 2069 6e76 616c 6964 2065  due to invalid e
+000028f0: 7363 6170 6520 7365 7175 656e 6365 732e  scape sequences.
+00002900: 2028 2331 3131 3929 0a20 2d20 5573 6520   (#1119). - Use 
+00002910: 6973 5f61 6c69 7665 2069 6e20 6661 766f  is_alive in favo
+00002920: 7572 206f 6620 6973 416c 6976 6520 666f  ur of isAlive fo
+00002930: 7220 5079 7468 6f6e 2033 2e39 2063 6f6d  r Python 3.9 com
+00002940: 7061 7469 6269 6c69 7479 2e20 2823 3131  patibility. (#11
+00002950: 3231 290a 202d 2046 6978 2066 6f72 2062  21). - Fix for b
+00002960: 6173 6536 342e 7b65 6e63 6f64 652f 6465  ase64.{encode/de
+00002970: 636f 6465 7d73 7472 696e 6720 696e 2070  code}string in p
+00002980: 7974 686f 6e20 332e 3920 2823 3131 3239  ython 3.9 (#1129
+00002990: 290a 0a4f 7468 6572 2043 6861 6e67 6573  )..Other Changes
+000029a0: 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  .---------------
+000029b0: 2d2d 2d0a 202d 2053 6576 6572 616c 2064  ---. - Several d
+000029c0: 6f63 756d 656e 7461 7469 6f6e 2075 7064  ocumentation upd
+000029d0: 6174 6573 2061 6e64 2063 6c61 7269 6669  ates and clarifi
+000029e0: 6361 7469 6f6e 732e 0a0a 5265 6c65 6173  cations...Releas
+000029f0: 6520 342e 3534 2028 7265 6c65 6173 6520  e 4.54 (release 
+00002a00: 6461 7465 3a20 3230 3230 2d31 302d 3232  date: 2020-10-22
+00002a10: 290a 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ).==============
+00002a20: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00002a30: 3d3d 3d3d 3d3d 3d3d 0a4e 6577 2046 6561  ========.New Fea
+00002a40: 7475 7265 730a 2d2d 2d2d 2d2d 2d2d 2d2d  tures.----------
+00002a50: 2d2d 2d2d 2d2d 2d2d 0a20 2d20 4164 6420  --------. - Add 
+00002a60: 7573 6572 5072 6f6a 6563 7420 7375 7070  userProject supp
+00002a70: 6f72 7420 746f 2073 6967 6e75 726c 2028  ort to signurl (
+00002a80: 2331 3036 3829 0a0a 4275 6720 4669 7865  #1068)..Bug Fixe
+00002a90: 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  s.--------------
+00002aa0: 2d2d 2d2d 0a20 2d20 4578 706c 6963 6974  ----. - Explicit
+00002ab0: 6c79 2073 6574 206d 756c 7469 7072 6f63  ly set multiproc
+00002ac0: 6573 7369 6e67 2073 7461 7274 206d 6574  essing start met
+00002ad0: 686f 6420 746f 2027 666f 726b 2720 2823  hod to 'fork' (#
+00002ae0: 3131 3037 290a 202d 2048 6561 6465 7273  1107). - Headers
+00002af0: 2063 616e 206e 6f77 2062 6520 7265 6d6f   can now be remo
+00002b00: 7665 6420 2823 3130 3931 290a 202d 2046  ved (#1091). - F
+00002b10: 6978 2043 6f6d 6d61 6e64 4578 6365 7074  ix CommandExcept
+00002b20: 696f 6e2e 696e 666f 726d 6174 696f 6e61  ion.informationa
+00002b30: 6c20 6174 7472 6962 7574 6520 6572 726f  l attribute erro
+00002b40: 7220 2823 3131 3039 290a 202d 2046 6978  r (#1109). - Fix
+00002b50: 2062 726f 6b65 6e20 7369 676e 7572 6c20   broken signurl 
+00002b60: 6572 726f 7220 6d65 7373 6167 652e 2028  error message. (
+00002b70: 2331 3039 3729 0a0a 4f74 6865 7220 4368  #1097)..Other Ch
+00002b80: 616e 6765 730a 2d2d 2d2d 2d2d 2d2d 2d2d  anges.----------
+00002b90: 2d2d 2d2d 2d2d 2d2d 0a20 2d20 5761 726e  --------. - Warn
+00002ba0: 2077 6865 6e20 6469 7361 626c 696e 6720   when disabling 
+00002bb0: 7061 7261 6c6c 656c 2063 6f6d 706f 7369  parallel composi
+00002bc0: 7465 2075 706c 6f61 6473 2066 6f72 204b  te uploads for K
+00002bd0: 4d53 2065 6e63 7279 7074 696f 6e2e 2028  MS encryption. (
+00002be0: 2331 3130 3229 0a20 2d20 4861 6e64 6c65  #1102). - Handle
+00002bf0: 2053 414d 4c20 7265 6175 7468 2063 6861   SAML reauth cha
+00002c00: 6c6c 656e 6765 2e20 2823 3131 3036 290a  llenge. (#1106).
+00002c10: 202d 2053 6576 6572 616c 2064 6f63 756d   - Several docum
+00002c20: 656e 7461 7469 6f6e 2075 7064 6174 6573  entation updates
+00002c30: 2061 6e64 2063 6c61 7269 6669 6361 7469   and clarificati
+00002c40: 6f6e 732e 0a0a 5265 6c65 6173 6520 342e  ons...Release 4.
+00002c50: 3533 2028 7265 6c65 6173 6520 6461 7465  53 (release date
+00002c60: 3a20 3230 3230 2d30 382d 3139 290a 3d3d  : 2020-08-19).==
+00002c70: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00002c80: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00002c90: 3d3d 3d3d 0a42 7567 2046 6978 6573 0a2d  ====.Bug Fixes.-
+00002ca0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00002cb0: 2d0a 2d20 5265 6d6f 7665 2073 6f63 6b73  -.- Remove socks
+00002cc0: 6970 7920 6465 7065 6e64 656e 6379 2074  ipy dependency t
+00002cd0: 6f20 6669 7820 7072 6f78 7920 6175 7468  o fix proxy auth
+00002ce0: 656e 7469 6361 7469 6f6e 2028 2331 3038  entication (#108
+00002cf0: 3429 0a2d 2052 6574 7279 206f 6e20 6572  4).- Retry on er
+00002d00: 726f 7273 2072 656c 6174 696e 6720 746f  rors relating to
+00002d10: 2072 6567 696f 6e20 7370 6563 6966 6963   region specific
+00002d20: 6174 696f 6e20 666f 7220 5333 2028 2331  ation for S3 (#1
+00002d30: 3034 3929 0a0a 4f74 6865 7220 4368 616e  049)..Other Chan
+00002d40: 6765 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ges.------------
+00002d50: 2d2d 2d2d 2d2d 0a2d 2050 726f 6d70 7420  ------.- Prompt 
+00002d60: 4461 6973 7920 6368 6169 6e20 7573 6572  Daisy chain user
+00002d70: 7320 746f 2074 7279 2053 5453 2028 2331  s to try STS (#1
+00002d80: 3037 3729 0a2d 2041 6464 206e 6577 2049  077).- Add new I
+00002d90: 414d 2074 7970 6573 2c20 616e 6420 6469  AM types, and di
+00002da0: 7361 626c 6520 5552 4c20 7061 7273 696e  sable URL parsin
+00002db0: 6720 666f 7220 2049 414d 2062 2f63 2069  g for  IAM b/c i
+00002dc0: 7420 6861 7320 7375 6263 6f6d 6d61 6e64  t has subcommand
+00002dd0: 732e 2028 2331 3036 3729 0a2d 204d 616e  s. (#1067).- Man
+00002de0: 7920 7465 7874 2075 7064 6174 6573 2061  y text updates a
+00002df0: 6e64 2063 6c61 7269 6669 6361 7469 6f6e  nd clarification
+00002e00: 732e 0a0a 5265 6c65 6173 6520 342e 3532  s...Release 4.52
+00002e10: 2028 7265 6c65 6173 6520 6461 7465 3a20   (release date: 
+00002e20: 3230 3230 2d30 372d 3037 290a 3d3d 3d3d  2020-07-07).====
+00002e30: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00002e40: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00002e50: 3d3d 0a42 7567 2046 6978 6573 0a2d 2d2d  ==.Bug Fixes.---
+00002e60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a  ---------------.
+00002e70: 2d20 4669 7820 7465 7374 7320 7573 696e  - Fix tests usin
+00002e80: 6720 7772 6f6e 6720 4157 5320 6372 6564  g wrong AWS cred
+00002e90: 656e 7469 616c 7320 6966 2041 5753 2043  entials if AWS C
+00002ea0: 4c49 2069 7320 696e 7374 616c 6c65 642e  LI is installed.
+00002eb0: 2028 2331 3035 3629 0a2d 2046 6978 2060   (#1056).- Fix `
+00002ec0: 4174 7472 6962 7574 6545 7272 6f72 3a20  AttributeError: 
+00002ed0: 6d6f 6475 6c65 2027 6773 6c69 6227 2068  module 'gslib' h
+00002ee0: 6173 206e 6f20 6174 7472 6962 7574 6520  as no attribute 
+00002ef0: 2755 5345 525f 4147 454e 5427 602e 2028  'USER_AGENT'`. (
+00002f00: 2331 3035 3229 0a2d 2046 6978 2065 6e63  #1052).- Fix enc
+00002f10: 6f64 696e 6720 6572 726f 7220 696e 2060  oding error in `
+00002f20: 7573 6572 5f61 6765 6e74 5f68 656c 7065  user_agent_helpe
+00002f30: 7260 2e20 2823 3130 3535 290a 2d20 4669  r`. (#1055).- Fi
+00002f40: 7820 7374 646f 7574 206f 7264 6572 696e  x stdout orderin
+00002f50: 6720 6973 7375 6520 696e 2068 6173 6820  g issue in hash 
+00002f60: 636f 6d6d 616e 642e 2028 2331 3033 3729  command. (#1037)
+00002f70: 0a2d 2046 6978 206d 756c 7469 7468 7265  .- Fix multithre
+00002f80: 6164 2072 6163 6520 636f 6e64 6974 696f  ad race conditio
+00002f90: 6e20 666f 7220 6370 2f6d 7620 636f 6d6d  n for cp/mv comm
+00002fa0: 616e 6420 7768 656e 206d 756c 7469 706c  and when multipl
+00002fb0: 6520 6f70 6572 6174 696f 6e73 2061 7265  e operations are
+00002fc0: 2061 7474 656d 7074 696e 6720 746f 2063   attempting to c
+00002fd0: 7265 6174 6520 7468 6520 7361 6d65 2064  reate the same d
+00002fe0: 6972 6563 746f 7279 2e20 2823 3130 3237  irectory. (#1027
+00002ff0: 290a 2d20 4669 7820 4f53 4572 726f 7220  ).- Fix OSError 
+00003000: 6f6e 2069 6e74 6572 7275 7074 6564 2072  on interrupted r
+00003010: 7379 6e63 202d 642e 2028 2331 3034 3229  sync -d. (#1042)
+00003020: 0a0a 4f74 6865 7220 4368 616e 6765 730a  ..Other Changes.
+00003030: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00003040: 2d2d 0a2d 204d 616e 7920 7465 7874 2075  --.- Many text u
+00003050: 7064 6174 6573 2061 6e64 2063 6c61 7269  pdates and clari
+00003060: 6669 6361 7469 6f6e 732e 0a0a 5265 6c65  fications...Rele
+00003070: 6173 6520 342e 3531 2028 7265 6c65 6173  ase 4.51 (releas
+00003080: 6520 6461 7465 3a20 3230 3230 2d30 352d  e date: 2020-05-
+00003090: 3139 290a 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  19).============
+000030a0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+000030b0: 3d3d 3d3d 3d3d 3d3d 3d3d 0a42 7567 2046  ==========.Bug F
+000030c0: 6978 6573 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d  ixes.-----------
+000030d0: 2d2d 2d2d 2d2d 2d0a 2d20 4669 7865 6420  -------.- Fixed 
+000030e0: 6669 6c65 2070 6572 6d69 7373 696f 6e73  file permissions
+000030f0: 2066 6f72 2063 7265 6473 746f 7232 2061   for credstor2 a
+00003100: 6e64 2074 7261 636b 6572 2066 696c 6573  nd tracker files
+00003110: 2028 2331 3030 3220 616e 6420 2320 3130   (#1002 and # 10
+00003120: 3035 290a 2d20 4164 6465 6420 6120 6368  05).- Added a ch
+00003130: 6563 6b20 746f 2072 6573 7472 6963 7420  eck to restrict 
+00003140: 7468 6520 6475 7261 7469 6f6e 2028 2d64  the duration (-d
+00003150: 206f 7074 696f 6e29 2066 6f72 2073 6967   option) for sig
+00003160: 6e75 726c 2063 6f6d 6d61 6e64 0a20 2074  nurl command.  t
+00003170: 6f20 3132 2068 6f75 7273 2069 6620 2d75  o 12 hours if -u
+00003180: 2066 6c61 6720 6973 2075 7365 642e 2028   flag is used. (
+00003190: 2331 3031 3429 0a2d 2055 7064 6174 6564  #1014).- Updated
+000031a0: 2072 7379 6e63 2063 6f6d 6d61 6e64 2074   rsync command t
+000031b0: 6f20 7472 7920 7061 7463 6869 6e67 2062  o try patching b
+000031c0: 6566 6f72 6520 6f76 6572 7772 6974 696e  efore overwritin
+000031d0: 672c 0a20 2072 6174 6865 7220 7468 616e  g,.  rather than
+000031e0: 2063 6865 636b 696e 6720 4143 4c20 2823   checking ACL (#
+000031f0: 3130 3136 290a 0a4f 7468 6572 2043 6861  1016)..Other Cha
+00003200: 6e67 6573 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d  nges.-----------
+00003210: 2d2d 2d2d 2d2d 2d0a 2d20 5365 7665 7261  -------.- Severa
+00003220: 6c20 646f 6375 6d65 6e74 6174 696f 6e20  l documentation 
+00003230: 7570 6461 7465 7320 616e 6420 636c 6172  updates and clar
+00003240: 6966 6963 6174 696f 6e73 2e0a 0a52 656c  ifications...Rel
+00003250: 6561 7365 2034 2e35 3020 2872 656c 6561  ease 4.50 (relea
+00003260: 7365 2064 6174 653a 2032 3032 302d 3034  se date: 2020-04
+00003270: 2d33 3029 0a3d 3d3d 3d3d 3d3d 3d3d 3d3d  -30).===========
+00003280: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00003290: 3d3d 3d3d 3d3d 3d3d 3d3d 3d0a 4e65 7720  ===========.New 
+000032a0: 4665 6174 7572 6573 0a2d 2d2d 2d2d 2d2d  Features.-------
+000032b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 2d20 5377  -----------.- Sw
+000032c0: 6974 6368 6564 2074 6f20 5573 696e 6720  itched to Using 
+000032d0: 5634 2073 6967 6e61 7475 7265 2061 7320  V4 signature as 
+000032e0: 6465 6661 756c 7420 666f 7220 5333 2028  default for S3 (
+000032f0: 2339 3831 290a 0a42 7567 2046 6978 6573  #981)..Bug Fixes
+00003300: 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  .---------------
+00003310: 2d2d 2d0a 2d20 5570 6461 7465 6420 7273  ---.- Updated rs
+00003320: 6120 6c69 6272 6172 7920 746f 2072 656c  a library to rel
+00003330: 6561 7365 2d34 2e30 2028 2339 3932 290a  ease-4.0 (#992).
+00003340: 2d20 5570 6461 7465 6420 7465 7374 2073  - Updated test s
+00003350: 6372 6970 7420 746f 2069 6e73 7461 6c6c  cript to install
+00003360: 2070 7965 6e76 2069 6620 6d69 7373 696e   pyenv if missin
+00003370: 6720 666f 7220 6b6f 6b6f 726f 2028 2339  g for kokoro (#9
+00003380: 3930 290a 2d20 4669 7865 6420 7072 696e  90).- Fixed prin
+00003390: 7420 6f72 6465 7269 6e67 2069 6e20 6b6d  t ordering in km
+000033a0: 7320 7365 7420 6279 2075 7369 6e67 2070  s set by using p
+000033b0: 7269 6e74 2069 6e73 7465 6164 206f 660a  rint instead of.
+000033c0: 2020 7465 7874 5f75 7469 6c2e 7072 696e    text_util.prin
+000033d0: 745f 746f 5f66 6420 2823 3937 3429 0a0a  t_to_fd (#974)..
+000033e0: 4f74 6865 7220 4368 616e 6765 730a 2d2d  Other Changes.--
+000033f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00003400: 0a2d 2053 6576 6572 616c 2064 6f63 756d  .- Several docum
+00003410: 656e 7461 7469 6f6e 2075 7064 6174 6573  entation updates
+00003420: 2061 6e64 2063 6c61 7269 6669 6361 7469   and clarificati
+00003430: 6f6e 7320 2823 3936 3929 2028 2339 3837  ons (#969) (#987
+00003440: 290a 0a52 656c 6561 7365 2034 2e34 3920  )..Release 4.49 
+00003450: 2872 656c 6561 7365 2064 6174 653a 2032  (release date: 2
+00003460: 3032 302d 3033 2d32 3629 0a3d 3d3d 3d3d  020-03-26).=====
+00003470: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00003480: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00003490: 3d0a 4e65 7720 4665 6174 7572 6573 0a2d  =.New Features.-
+000034a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000034b0: 2d0a 2d20 4164 6465 6420 7375 7070 6f72  -.- Added suppor
+000034c0: 7420 666f 7220 7365 7276 6963 6520 6163  t for service ac
+000034d0: 636f 756e 7420 696d 7065 7273 6f6e 6174  count impersonat
+000034e0: 696f 6e20 666f 7220 7369 676e 7572 6c2e  ion for signurl.
+000034f0: 0a0a 4275 6720 4669 7865 730a 2d2d 2d2d  ..Bug Fixes.----
+00003500: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d  --------------.-
+00003510: 2046 6978 6564 2061 6e20 6973 7375 6520   Fixed an issue 
+00003520: 7769 7468 2072 7379 6e63 2074 6872 6f77  with rsync throw
+00003530: 696e 6720 6572 726f 7220 7768 656e 2074  ing error when t
+00003540: 6865 2064 6573 7469 6e61 7469 6f6e 2075  he destination u
+00003550: 726c 2069 7320 6120 7072 6566 6978 206f  rl is a prefix o
+00003560: 660a 2020 616e 2065 7869 7374 696e 6720  f.  an existing 
+00003570: 6f62 6a65 6374 2e0a 0a4f 7468 6572 2043  object...Other C
+00003580: 6861 6e67 6573 0a2d 2d2d 2d2d 2d2d 2d2d  hanges.---------
+00003590: 2d2d 2d2d 2d2d 2d2d 2d0a 2d20 5365 7665  ---------.- Seve
+000035a0: 7261 6c20 646f 6375 6d65 6e74 6174 696f  ral documentatio
+000035b0: 6e20 7570 6461 7465 7320 616e 6420 636c  n updates and cl
+000035c0: 6172 6966 6963 6174 696f 6e73 2e0a 0a52  arifications...R
+000035d0: 656c 6561 7365 2034 2e34 3820 2872 656c  elease 4.48 (rel
+000035e0: 6561 7365 2064 6174 653a 2032 3032 302d  ease date: 2020-
+000035f0: 3032 2d32 3829 0a3d 3d3d 3d3d 3d3d 3d3d  02-28).=========
+00003600: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00003610: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d0a 4275  =============.Bu
+00003620: 6720 4669 7865 730a 2d2d 2d2d 2d2d 2d2d  g Fixes.--------
+00003630: 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d 2046 6978  ----------.- Fix
+00003640: 6564 2073 7065 6369 616c 2063 6861 7261  ed special chara
+00003650: 6374 6572 2068 616e 646c 696e 6720 696e  cter handling in
+00003660: 2066 696c 656e 616d 6573 206f 6e20 5769   filenames on Wi
+00003670: 6e64 6f77 7320 7769 7468 2050 7974 686f  ndows with Pytho
+00003680: 6e33 2e0a 2d20 4669 7865 6420 6973 7375  n3..- Fixed issu
+00003690: 6520 7768 696c 6520 7472 616e 7366 6572  e while transfer
+000036a0: 7269 6e67 2062 696e 6172 7920 6669 6c65  ring binary file
+000036b0: 7320 6672 6f6d 2053 3320 7769 7468 2050  s from S3 with P
+000036c0: 7974 686f 6e33 2e0a 2d20 4669 7865 6420  ython3..- Fixed 
+000036d0: 4b4d 5320 7465 7374 732c 2073 6f20 7468  KMS tests, so th
+000036e0: 6174 206b 6579 7320 6172 6520 6372 6561  at keys are crea
+000036f0: 7465 6420 696e 2074 6865 2073 616d 6520  ted in the same 
+00003700: 7265 6769 6f6e 2061 7320 7468 6569 7220  region as their 
+00003710: 6275 636b 6574 732e 0a0a 4f74 6865 7220  buckets...Other 
+00003720: 4368 616e 6765 730a 2d2d 2d2d 2d2d 2d2d  Changes.--------
+00003730: 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d 2053 6576  ----------.- Sev
+00003740: 6572 616c 2064 6f63 756d 656e 7461 7469  eral documentati
+00003750: 6f6e 2075 7064 6174 6573 2061 6e64 2063  on updates and c
+00003760: 6c61 7269 6669 6361 7469 6f6e 732e 0a0a  larifications...
+00003770: 5265 6c65 6173 6520 342e 3437 2028 7265  Release 4.47 (re
+00003780: 6c65 6173 6520 6461 7465 3a20 3230 3230  lease date: 2020
+00003790: 2d30 312d 3130 290a 3d3d 3d3d 3d3d 3d3d  -01-10).========
+000037a0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+000037b0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 0a4e  ==============.N
+000037c0: 6577 2046 6561 7475 7265 730a 2d2d 2d2d  ew Features.----
+000037d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d  --------------.-
+000037e0: 2041 6464 6564 2073 7570 706f 7274 2066   Added support f
+000037f0: 6f72 2074 6865 206e 6577 2061 7263 6869  or the new archi
+00003800: 7665 2073 746f 7261 6765 2063 6c61 7373  ve storage class
+00003810: 2e0a 0a4f 7468 6572 2043 6861 6e67 6573  ...Other Changes
+00003820: 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  .---------------
+00003830: 2d2d 2d0a 2d20 5365 7665 7261 6c20 646f  ---.- Several do
+00003840: 6375 6d65 6e74 6174 696f 6e20 7570 6461  cumentation upda
+00003850: 7465 7320 616e 6420 636c 6172 6966 6963  tes and clarific
+00003860: 6174 696f 6e73 2e0a 0a52 656c 6561 7365  ations...Release
+00003870: 2034 2e34 3620 2872 656c 6561 7365 2064   4.46 (release d
+00003880: 6174 653a 2032 3031 392d 3130 2d33 3129  ate: 2019-10-31)
+00003890: 0a3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  .===============
+000038a0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+000038b0: 3d3d 3d3d 3d3d 3d3d 0a42 7567 2046 6978  ========.Bug Fix
+000038c0: 6573 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  es.-------------
+000038d0: 2d2d 2d2d 2d0a 202d 2046 6978 6564 2069  -----. - Fixed i
+000038e0: 7373 7565 2077 6974 6820 646f 6d61 696e  ssue with domain
+000038f0: 2070 6572 6d69 7373 696f 6e73 2066 756e   permissions fun
+00003900: 6374 696f 6e61 6c69 7479 2e0a 0a52 656c  ctionality...Rel
+00003910: 6561 7365 2034 2e34 3520 2872 656c 6561  ease 4.45 (relea
+00003920: 7365 2064 6174 653a 2032 3031 392d 3130  se date: 2019-10
+00003930: 2d31 3829 0a3d 3d3d 3d3d 3d3d 3d3d 3d3d  -18).===========
+00003940: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00003950: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 0a42 7567  ============.Bug
+00003960: 2046 6978 6573 0a2d 2d2d 2d2d 2d2d 2d2d   Fixes.---------
+00003970: 2d2d 2d2d 2d2d 2d2d 2d0a 202d 2046 6978  ---------. - Fix
+00003980: 6564 2065 7863 6570 7469 6f6e 2077 6865  ed exception whe
+00003990: 6e20 7573 696e 6720 434d 454b 2077 6974  n using CMEK wit
+000039a0: 6820 7265 7375 6d61 626c 6520 7570 6c6f  h resumable uplo
+000039b0: 6164 732e 0a20 2d20 4669 7865 6420 616c  ads.. - Fixed al
+000039c0: 6961 7320 666f 7220 6e65 7720 7562 6c61  ias for new ubla
+000039d0: 2063 6f6d 6d61 6e64 2e0a 202d 2046 6978   command.. - Fix
+000039e0: 6564 2064 6566 6175 6c74 2052 444e 5320  ed default RDNS 
+000039f0: 6265 6861 7669 6f72 2066 6f72 2062 6163  behavior for bac
+00003a00: 6b77 6172 6473 2063 6f6d 7061 7469 6269  kwards compatibi
+00003a10: 6c69 7479 2077 6974 6820 342e 3432 2061  lity with 4.42 a
+00003a20: 6e64 2065 6172 6c69 6572 2e0a 0a4f 7468  nd earlier...Oth
+00003a30: 6572 2043 6861 6e67 6573 0a2d 2d2d 2d2d  er Changes.-----
+00003a40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 2d20  -------------.- 
+00003a50: 496d 7072 6f76 656d 656e 7473 2074 6f20  Improvements to 
+00003a60: 636f 6e74 696e 756f 7573 2069 6e74 6567  continuous integ
+00003a70: 7261 7469 6f6e 2077 6f72 6b66 6c6f 772e  ration workflow.
+00003a80: 0a0a 5265 6c65 6173 6520 342e 3434 2028  ..Release 4.44 (
+00003a90: 7265 6c65 6173 6520 6461 7465 3a20 3230  release date: 20
+00003aa0: 3139 2d31 302d 3032 290a 3d3d 3d3d 3d3d  19-10-02).======
+00003ab0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00003ac0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00003ad0: 3d0a 4e65 7720 4665 6174 7572 6573 0a2d  =.New Features.-
+00003ae0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00003af0: 2d0a 2d20 4164 6465 6420 7375 7070 6f72  -.- Added suppor
+00003b00: 7420 666f 7220 7365 7276 6963 6520 6163  t for service ac
+00003b10: 636f 756e 7420 696d 7065 7273 6f6e 6174  count impersonat
+00003b20: 696f 6e20 7468 726f 7567 6820 6120 6e65  ion through a ne
+00003b30: 7720 602d 6960 206f 7074 696f 6e20 746f  w `-i` option to
+00003b40: 0a20 2073 7065 6369 6679 2061 2073 6572  .  specify a ser
+00003b50: 7669 6365 2061 6363 6f75 6e74 2074 6f20  vice account to 
+00003b60: 696d 7065 7273 6f6e 6174 652e 0a2d 2041  impersonate..- A
+00003b70: 6464 6564 2073 7570 706f 7274 2066 6f72  dded support for
+00003b80: 206d 656d 6265 7273 2075 7369 6e67 2074   members using t
+00003b90: 6865 2064 656c 6574 6564 2073 796e 7461  he deleted synta
+00003ba0: 7820 2869 2e65 2e20 6064 656c 6574 6564  x (i.e. `deleted
+00003bb0: 3a75 7365 723a 2e2e 2e60 2c0a 2020 6064  :user:...`,.  `d
+00003bc0: 656c 6574 6564 3a67 726f 7570 3a2e 2e2e  eleted:group:...
+00003bd0: 602c 2060 6465 6c65 7465 643a 7365 7276  `, `deleted:serv
+00003be0: 6963 6541 6363 6f75 6e74 3a2e 2e2e 6029  iceAccount:...`)
+00003bf0: 2e0a 2d20 4164 6465 6420 7375 7070 6f72  ..- Added suppor
+00003c00: 7420 666f 7220 7468 6520 6e65 7720 756e  t for the new un
+00003c10: 6966 6f72 6d20 6275 636b 6574 2d6c 6576  iform bucket-lev
+00003c20: 656c 2061 6363 6573 7320 2860 7562 6c61  el access (`ubla
+00003c30: 6029 2063 6f6d 6d61 6e64 0a20 2028 6375  `) command.  (cu
+00003c40: 7272 656e 746c 7920 616e 2061 6c69 6173  rrently an alias
+00003c50: 206f 6620 6062 7563 6b65 7470 6f6c 6963   of `bucketpolic
+00003c60: 796f 6e6c 7960 292e 0a2d 2041 6464 6564  yonly`)..- Added
+00003c70: 2060 2d77 6020 666c 6167 2074 6f20 606b   `-w` flag to `k
+00003c80: 6d73 6020 636f 6d6d 616e 642c 2077 6869  ms` command, whi
+00003c90: 6368 2073 686f 7773 2061 2077 6172 6e69  ch shows a warni
+00003ca0: 6e67 2072 6174 6865 7220 7468 616e 2066  ng rather than f
+00003cb0: 6169 6c69 6e67 0a20 2077 6865 6e20 7570  ailing.  when up
+00003cc0: 6461 7469 6e67 206b 6579 2070 6572 6d69  dating key permi
+00003cd0: 7373 696f 6e73 2064 6f65 7320 6e6f 7420  ssions does not 
+00003ce0: 7375 6363 6565 642e 0a0a 4275 6720 4669  succeed...Bug Fi
+00003cf0: 7865 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  xes.------------
+00003d00: 2d2d 2d2d 2d2d 0a2d 2046 6978 6564 2072  ------.- Fixed r
+00003d10: 6567 7265 7373 696f 6e20 696e 2063 7020  egression in cp 
+00003d20: 7768 6572 6520 6120 7374 6174 656d 656e  where a statemen
+00003d30: 7420 6c69 6b65 0a20 2060 6370 206d 792d  t like.  `cp my-
+00003d40: 6669 6c65 2067 733a 2f2f 6d79 2d62 7563  file gs://my-buc
+00003d50: 6b65 742f 6e6f 6e2d 6578 6973 7465 6e74  ket/non-existent
+00003d60: 2d66 6f6c 6465 722f 6020 776f 756c 6420  -folder/` would 
+00003d70: 6372 6561 7465 2061 2066 696c 6520 6361  create a file ca
+00003d80: 6c6c 6564 0a20 2060 6e6f 6e2d 6578 6973  lled.  `non-exis
+00003d90: 7465 6e74 2d66 6f6c 6465 7260 2072 6174  tent-folder` rat
+00003da0: 6865 7220 7468 616e 2060 6e6f 6e2d 6578  her than `non-ex
+00003db0: 6973 7465 6e74 2d66 6f6c 6465 722f 6d79  istent-folder/my
+00003dc0: 2d66 696c 6560 2e0a 2d20 4669 7865 6420  -file`..- Fixed 
+00003dd0: 7374 7265 616d 696e 6720 7570 6c6f 6164  streaming upload
+00003de0: 7320 666f 7220 5079 7468 6f6e 2033 2e0a  s for Python 3..
+00003df0: 0a0a 5265 6c65 6173 6520 342e 3433 2028  ..Release 4.43 (
+00003e00: 7265 6c65 6173 6520 6461 7465 3a20 3230  release date: 20
+00003e10: 3139 2d30 392d 3230 290a 3d3d 3d3d 3d3d  19-09-20).======
+00003e20: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00003e30: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00003e40: 3d0a 4e65 7720 4665 6174 7572 6573 0a2d  =.New Features.-
+00003e50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00003e60: 2d0a 2d20 4164 6465 6420 7375 7070 6f72  -.- Added suppor
+00003e70: 7420 666f 7220 736f 636b 7320 7072 6f78  t for socks prox
+00003e80: 6965 732c 2069 6e63 6c75 6469 6e67 2073  ies, including s
+00003e90: 6f63 6b73 3420 616e 6420 736f 636b 7335  ocks4 and socks5
+00003ea0: 2e0a 0a42 7567 2046 6978 6573 0a2d 2d2d  ...Bug Fixes.---
+00003eb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a  ---------------.
+00003ec0: 2d20 4669 7865 6420 6370 2f6d 7620 6572  - Fixed cp/mv er
+00003ed0: 726f 7273 2074 6861 7420 6f63 6375 7220  rors that occur 
+00003ee0: 7768 656e 2020 6465 7374 696e 6174 696f  when  destinatio
+00003ef0: 6e20 6469 7265 6374 6f72 7920 6973 2061  n directory is a
+00003f00: 2073 7562 7374 7269 6e67 206f 660a 2020   substring of.  
+00003f10: 616e 6f74 6865 7220 6469 7265 6374 6f72  another director
+00003f20: 792e 2042 6568 6176 696f 7220 6e6f 7720  y. Behavior now 
+00003f30: 6d6f 7265 2063 6c6f 7365 6c79 206d 6174  more closely mat
+00003f40: 6368 6573 204f 5320 6370 2f6d 7620 636f  ches OS cp/mv co
+00003f50: 6d6d 616e 6473 2e0a 2d20 4669 7865 6420  mmands..- Fixed 
+00003f60: 6973 7375 6520 7768 6572 6520 7365 7420  issue where set 
+00003f70: 4941 4d20 706f 6c69 6379 206f 6e20 6f62  IAM policy on ob
+00003f80: 6a65 6374 7320 7468 7265 7720 6572 726f  jects threw erro
+00003f90: 7273 2e0a 2d20 4669 7865 6420 6973 7375  rs..- Fixed issu
+00003fa0: 6520 7768 656e 2073 686f 7769 6e67 2068  e when showing h
+00003fb0: 656c 7020 696e 2061 2070 6167 6572 2069  elp in a pager i
+00003fc0: 6e20 5079 7468 6f6e 2033 2065 6e76 6972  n Python 3 envir
+00003fd0: 6f6e 6d65 6e74 732e 0a0a 4f74 6865 7220  onments...Other 
+00003fe0: 4368 616e 6765 730a 2d2d 2d2d 2d2d 2d2d  Changes.--------
+00003ff0: 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d 2053 6576  ----------.- Sev
+00004000: 6572 616c 2064 6f63 756d 656e 7461 7469  eral documentati
+00004010: 6f6e 2075 7064 6174 6573 2061 6e64 2063  on updates and c
+00004020: 6c61 7269 6669 6361 7469 6f6e 732e 0a0a  larifications...
+00004030: 5265 6c65 6173 6520 342e 3432 2028 7265  Release 4.42 (re
+00004040: 6c65 6173 6520 6461 7465 3a20 3230 3139  lease date: 2019
+00004050: 2d30 382d 3035 290a 3d3d 3d3d 3d3d 3d3d  -08-05).========
+00004060: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00004070: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d0a  ===============.
+00004080: 2042 7567 2046 6978 6573 0a2d 2d2d 2d2d   Bug Fixes.-----
+00004090: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 2d20  -------------.- 
+000040a0: 4669 7865 6420 736f 6d65 2074 6578 7420  Fixed some text 
+000040b0: 656e 636f 6469 6e67 2f64 6563 6f64 696e  encoding/decodin
+000040c0: 6720 6973 7375 6573 2069 6e20 6365 7274  g issues in cert
+000040d0: 6169 6e20 5079 7468 6f6e 2033 2065 6e76  ain Python 3 env
+000040e0: 6972 6f6e 6d65 6e74 732e 0a2d 2046 6978  ironments..- Fix
+000040f0: 6564 2069 7373 7565 2077 6865 7265 2062  ed issue where b
+00004100: 756e 646c 6564 2063 7263 6d6f 6420 666f  undled crcmod fo
+00004110: 7220 6d61 634f 5320 636f 756c 6420 6e6f  r macOS could no
+00004120: 7420 6265 2069 6d70 6f72 7465 6420 616e  t be imported an
+00004130: 6420 776f 756c 640a 2020 6372 6173 6820  d would.  crash 
+00004140: 6773 7574 696c 206f 6e20 5079 7468 6f6e  gsutil on Python
+00004150: 2033 2e0a 2d20 4669 7865 6420 6973 7375   3..- Fixed issu
+00004160: 6520 7768 6572 6520 7472 7969 6e67 2074  e where trying t
+00004170: 6f20 7275 6e20 6773 7574 696c 206f 6e20  o run gsutil on 
+00004180: 616e 2075 6e73 7570 706f 7274 6564 2076  an unsupported v
+00004190: 6572 7369 6f6e 206f 6620 5079 7468 6f6e  ersion of Python
+000041a0: 2033 0a20 2028 332e 3420 6f72 2062 656c   3.  (3.4 or bel
+000041b0: 6f77 2920 776f 756c 6420 6372 6173 6820  ow) would crash 
+000041c0: 696e 7374 6561 6420 6f66 2070 7265 7365  instead of prese
+000041d0: 6e74 696e 6720 616e 2069 6e66 6f72 6d61  nting an informa
+000041e0: 7469 7665 2065 7272 6f72 2e0a 0a4f 7468  tive error...Oth
+000041f0: 6572 2043 6861 6e67 6573 0a2d 2d2d 2d2d  er Changes.-----
+00004200: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 2d20  -------------.- 
+00004210: 5365 7665 7261 6c20 646f 6375 6d65 6e74  Several document
+00004220: 6174 696f 6e20 7570 6461 7465 7320 616e  ation updates an
+00004230: 6420 636c 6172 6966 6963 6174 696f 6e73  d clarifications
+00004240: 2e0a 0a0a 5265 6c65 6173 6520 342e 3431  ....Release 4.41
+00004250: 2028 7265 6c65 6173 6520 6461 7465 3a20   (release date: 
+00004260: 3230 3139 2d30 372d 3136 290a 3d3d 3d3d  2019-07-16).====
+00004270: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00004280: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00004290: 3d3d 3d0a 4e65 7720 4665 6174 7572 6573  ===.New Features
+000042a0: 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  .---------------
+000042b0: 2d2d 2d0a 2d20 4164 6465 6420 484d 4143  ---.- Added HMAC
+000042c0: 206b 6579 206d 616e 6167 656d 656e 7420   key management 
+000042d0: 666f 7220 7365 7276 6963 6520 6163 636f  for service acco
+000042e0: 756e 7473 2e20 5468 6973 2069 6e63 6c75  unts. This inclu
+000042f0: 6465 7320 6120 6e65 7720 2268 6d61 6322  des a new "hmac"
+00004300: 0a20 2063 6f6d 6d61 6e64 2074 6f20 6372  .  command to cr
+00004310: 6561 7465 2f67 6574 2f6c 6973 742f 7570  eate/get/list/up
+00004320: 6461 7465 2f64 656c 6574 6520 484d 4143  date/delete HMAC
+00004330: 206b 6579 7320 6f6e 2073 6572 7669 6365   keys on service
+00004340: 2061 6363 6f75 6e74 732e 0a20 2043 7572   accounts..  Cur
+00004350: 7265 6e74 6c79 2c20 796f 7572 2070 726f  rently, your pro
+00004360: 6a65 6374 206d 7573 7420 6265 2061 6464  ject must be add
+00004370: 6564 2074 6f20 7468 6520 616c 6c6f 776c  ed to the allowl
+00004380: 6973 7420 666f 7220 7573 6520 7769 7468  ist for use with
+00004390: 2074 6869 7320 6e65 7720 484d 4143 0a20   this new HMAC. 
+000043a0: 2066 756e 6374 696f 6e61 6c69 7479 2e20   functionality. 
+000043b0: 5468 6973 2072 6573 7472 6963 7469 6f6e  This restriction
+000043c0: 2077 696c 6c20 6265 206c 6966 7465 6420   will be lifted 
+000043d0: 696e 2074 6865 206e 6561 7220 6675 7475  in the near futu
+000043e0: 7265 2e0a 0a20 4275 6720 4669 7865 730a  re... Bug Fixes.
+000043f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00004400: 2d2d 0a2d 2046 6978 6564 2062 7567 2077  --.- Fixed bug w
+00004410: 6865 7265 2063 6f70 7969 6e67 2066 696c  here copying fil
+00004420: 6573 203e 2031 3030 4d69 4220 6672 6f6d  es > 100MiB from
+00004430: 2047 4353 2074 6f20 5333 2077 6173 2068   GCS to S3 was h
+00004440: 616e 6769 6e67 2e0a 2d20 4669 7865 6420  anging..- Fixed 
+00004450: 6973 7375 6520 7768 6572 6520 636f 6e74  issue where cont
+00004460: 656e 7420 7479 7065 2077 6173 2073 6f6d  ent type was som
+00004470: 6574 696d 6573 2073 6574 2069 6d70 726f  etimes set impro
+00004480: 7065 726c 792e 0a0a 0a52 656c 6561 7365  perly....Release
+00004490: 2034 2e34 3020 2872 656c 6561 7365 2064   4.40 (release d
+000044a0: 6174 653a 2032 3031 392d 3037 2d30 3129  ate: 2019-07-01)
+000044b0: 0a3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  .===============
+000044c0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+000044d0: 3d3d 3d3d 3d3d 3d3d 0a4e 6577 2046 6561  ========.New Fea
+000044e0: 7475 7265 730a 2d2d 2d2d 2d2d 2d2d 2d2d  tures.----------
+000044f0: 2d2d 2d2d 2d2d 2d2d 0a2d 2041 6464 6564  --------.- Added
+00004500: 2073 7570 706f 7274 2066 6f72 2072 756e   support for run
+00004510: 6e69 6e67 2067 7375 7469 6c20 6f6e 2050  ning gsutil on P
+00004520: 7974 686f 6e20 332e 352b 2e20 5079 7468  ython 3.5+. Pyth
+00004530: 6f6e 2032 2077 696c 6c20 7265 6163 6820  on 2 will reach 
+00004540: 6974 7320 454f 4c0a 2020 2845 6e64 206f  its EOL.  (End o
+00004550: 6620 4c69 6665 2920 6f6e 204a 616e 2e20  f Life) on Jan. 
+00004560: 312c 2032 3032 302c 2061 6e64 2067 7375  1, 2020, and gsu
+00004570: 7469 6c20 7769 6c6c 2073 746f 7020 7375  til will stop su
+00004580: 7070 6f72 7469 6e67 2050 7974 686f 6e20  pporting Python 
+00004590: 322e 3720 6174 0a20 2073 6f6d 6520 706f  2.7 at.  some po
+000045a0: 696e 7420 6166 7465 7277 6172 6420 2854  int afterward (T
+000045b0: 4244 292e 0a0a 2042 7567 2046 6978 6573  BD)... Bug Fixes
+000045c0: 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  .---------------
+000045d0: 2d2d 2d0a 2d20 4669 7865 6420 6275 6720  ---.- Fixed bug 
+000045e0: 696e 7472 6f64 7563 6564 2069 6e20 7634  introduced in v4
+000045f0: 2e33 3920 7768 6572 6520 7273 796e 6320  .39 where rsync 
+00004600: 776f 756c 6420 6e6f 7420 636f 7272 6563  would not correc
+00004610: 746c 7920 7379 6e63 206f 626a 6563 742f  tly sync object/
+00004620: 6669 6c65 0a20 206e 616d 6573 2063 6f6e  file.  names con
+00004630: 7461 696e 696e 6720 736f 6d65 2073 7065  taining some spe
+00004640: 6369 616c 2055 524c 2d65 6e63 6f64 6162  cial URL-encodab
+00004650: 6c65 2063 6861 7261 6374 6572 7320 2865  le characters (e
+00004660: 2e67 2e20 222b 2220 616e 640a 2020 7768  .g. "+" and.  wh
+00004670: 6974 6573 7061 6365 2063 6861 7261 6374  itespace charact
+00004680: 6572 7329 2e0a 2d20 4669 7865 6420 7468  ers)..- Fixed th
+00004690: 6520 7570 6461 7465 2063 6f6d 6d61 6e64  e update command
+000046a0: 2073 6f20 7468 6174 2069 7420 6e6f 206c   so that it no l
+000046b0: 6f6e 6765 7220 6661 696c 7320 7768 656e  onger fails when
+000046c0: 2069 7420 6465 7465 6374 7320 7468 650a   it detects the.
+000046d0: 2020 7072 6573 656e 6365 206f 6620 6164    presence of ad
+000046e0: 6469 7469 6f6e 616c 2074 6f70 2d6c 6576  ditional top-lev
+000046f0: 656c 2066 696c 6573 2074 6861 7420 7765  el files that we
+00004700: 7265 2061 6464 6564 2069 6e20 7468 6520  re added in the 
+00004710: 7634 2e33 3920 7265 6c65 6173 652e 0a0a  v4.39 release...
+00004720: 204f 7468 6572 2043 6861 6e67 6573 0a2d   Other Changes.-
+00004730: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00004740: 2d0a 2d20 5365 7665 7261 6c20 646f 6375  -.- Several docu
+00004750: 6d65 6e74 6174 696f 6e20 7570 6461 7465  mentation update
+00004760: 7320 616e 6420 636c 6172 6966 6963 6174  s and clarificat
+00004770: 696f 6e73 2e0a 0a0a 5265 6c65 6173 6520  ions....Release 
+00004780: 342e 3339 2028 7265 6c65 6173 6520 6461  4.39 (release da
+00004790: 7465 3a20 3230 3139 2d30 362d 3133 290a  te: 2019-06-13).
+000047a0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+000047b0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+000047c0: 3d3d 3d3d 3d3d 3d0a 4e65 7720 4665 6174  =======.New Feat
+000047d0: 7572 6573 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d  ures.-----------
+000047e0: 2d2d 2d2d 2d2d 2d0a 2d20 436f 6d70 7265  -------.- Compre
+000047f0: 7373 696f 6e20 6c65 7665 6c20 6973 206e  ssion level is n
+00004800: 6f77 2063 6f6e 6669 6775 7261 626c 6520  ow configurable 
+00004810: 6279 2073 6574 7469 6e67 2022 677a 6970  by setting "gzip
+00004820: 5f63 6f6d 7072 6573 7369 6f6e 5f6c 6576  _compression_lev
+00004830: 656c 220a 2020 756e 6465 7220 7468 6520  el".  under the 
+00004840: 2247 5355 7469 6c22 2073 6563 7469 6f6e  "GSUtil" section
+00004850: 2069 6e20 7468 6520 626f 746f 2063 6f6e   in the boto con
+00004860: 6669 6720 6669 6c65 2e20 5468 6520 6465  fig file. The de
+00004870: 6661 756c 7420 7661 6c75 6520 6973 2039  fault value is 9
+00004880: 2e0a 0a20 4275 6720 4669 7865 730a 2d2d  ... Bug Fixes.--
+00004890: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000048a0: 0a2d 2046 6978 6564 2062 7567 2077 6865  .- Fixed bug whe
+000048b0: 7265 2049 414d 206f 7065 7261 7469 6f6e  re IAM operation
+000048c0: 7320 6661 696c 6564 206f 6e20 6275 636b  s failed on buck
+000048d0: 6574 7320 7768 6f73 6520 6e61 6d65 7320  ets whose names 
+000048e0: 6c61 636b 6564 2061 6e79 0a20 206c 6574  lacked any.  let
+000048f0: 7465 7273 2e0a 0a20 4f74 6865 7220 4368  ters... Other Ch
+00004900: 616e 6765 730a 2d2d 2d2d 2d2d 2d2d 2d2d  anges.----------
+00004910: 2d2d 2d2d 2d2d 2d2d 0a2d 2052 6576 6973  --------.- Revis
+00004920: 6564 2063 6f6e 7472 6962 7574 696f 6e20  ed contribution 
+00004930: 6775 6964 656c 696e 6573 2074 6f20 6469  guidelines to di
+00004940: 7265 6374 2064 6576 656c 6f70 6572 7320  rect developers 
+00004950: 746f 2073 7562 6d69 7420 4769 7448 7562  to submit GitHub
+00004960: 2070 756c 6c0a 2020 7265 7175 6573 7473   pull.  requests
+00004970: 2069 6e73 7465 6164 206f 6620 7573 696e   instead of usin
+00004980: 6720 7468 6520 5269 6574 7665 6c64 2063  g the Rietveld c
+00004990: 6f64 6520 7265 7669 6577 2074 6f6f 6c2e  ode review tool.
+000049a0: 0a2d 2053 6576 6572 616c 2063 6f64 6520  .- Several code 
+000049b0: 6368 616e 6765 7320 746f 2077 6f72 6b20  changes to work 
+000049c0: 746f 7761 7264 2050 7974 686f 6e20 3320  toward Python 3 
+000049d0: 7375 7070 6f72 7420 2863 6f6d 696e 6720  support (coming 
+000049e0: 696e 2061 2073 7562 7365 7175 656e 740a  in a subsequent.
+000049f0: 2020 7265 6c65 6173 6529 2e0a 2d20 5365    release)..- Se
+00004a00: 7665 7261 6c20 646f 6375 6d65 6e74 6174  veral documentat
+00004a10: 696f 6e20 616e 6420 636f 6d6d 616e 6420  ion and command 
+00004a20: 6865 6c70 2069 6d70 726f 7665 6d65 6e74  help improvement
+00004a30: 732e 0a2d 2056 6172 696f 7573 2069 6d70  s..- Various imp
+00004a40: 726f 7665 6d65 6e74 7320 746f 2074 6573  rovements to tes
+00004a50: 7420 7374 6162 696c 6974 7920 616e 6420  t stability and 
+00004a60: 6665 6564 6261 636b 2e0a 0a0a 5265 6c65  feedback....Rele
+00004a70: 6173 6520 342e 3338 2028 7265 6c65 6173  ase 4.38 (releas
+00004a80: 6520 6461 7465 3a20 3230 3139 2d30 332d  e date: 2019-03-
+00004a90: 3235 290a 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  25).============
+00004aa0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00004ab0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d0a 4275 6720  ===========.Bug 
+00004ac0: 4669 7865 730a 2d2d 2d2d 2d2d 2d2d 2d2d  Fixes.----------
+00004ad0: 2d2d 2d2d 2d2d 2d2d 0a2d 2046 6978 6564  --------.- Fixed
+00004ae0: 2069 7373 7565 2077 6865 7265 206d 756c   issue where mul
+00004af0: 7469 7072 6f63 6573 7369 6e67 2063 6865  tiprocessing che
+00004b00: 636b 2077 6f75 6c64 2072 6169 7365 2061  ck would raise a
+00004b10: 6e20 6578 6365 7074 696f 6e20 6966 0a20  n exception if. 
+00004b20: 202f 6574 632f 6f73 2d72 656c 6561 7365   /etc/os-release
+00004b30: 2077 6173 206e 6f74 2069 6e20 7468 6520   was not in the 
+00004b40: 6578 7065 6374 6564 2066 6f72 6d61 742e  expected format.
+00004b50: 0a0a 4f74 6865 7220 4368 616e 6765 730a  ..Other Changes.
+00004b60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00004b70: 2d2d 0a2d 2049 6d70 726f 7665 6420 6572  --.- Improved er
+00004b80: 726f 7220 6d65 7373 6167 6520 666f 7220  ror message for 
+00004b90: 7472 7969 6e67 2074 6f20 7265 7472 6965  trying to retrie
+00004ba0: 7665 2064 6566 6175 6c74 206f 626a 6563  ve default objec
+00004bb0: 7420 4143 4c73 206f 6e20 6120 6275 636b  t ACLs on a buck
+00004bc0: 6574 0a20 2077 6974 6820 4275 636b 6574  et.  with Bucket
+00004bd0: 2050 6f6c 6963 7920 4f6e 6c79 2065 6e61   Policy Only ena
+00004be0: 626c 6564 2e0a 2d20 5768 656e 2072 756e  bled..- When run
+00004bf0: 6e69 6e67 2022 6773 7574 696c 202d 4420  ning "gsutil -D 
+00004c00: 7273 796e 6320 2e2e 2e22 2061 6e64 2065  rsync ..." and e
+00004c10: 6e63 6f75 6e74 6572 696e 6720 616e 2065  ncountering an e
+00004c20: 7272 6f72 206c 6973 7469 6e67 206c 6f63  rror listing loc
+00004c30: 616c 0a20 2066 696c 6573 2c20 6773 7574  al.  files, gsut
+00004c40: 696c 2077 696c 6c20 6e6f 7720 7072 696e  il will now prin
+00004c50: 7420 6120 7374 6163 6b20 7472 6163 6520  t a stack trace 
+00004c60: 6173 2064 6562 7567 2d6c 6576 656c 206f  as debug-level o
+00004c70: 7574 7075 742e 0a2d 2053 6576 6572 616c  utput..- Several
+00004c80: 2064 6f63 756d 656e 7461 7469 6f6e 2075   documentation u
+00004c90: 7064 6174 6573 2061 6e64 2063 6c61 7269  pdates and clari
+00004ca0: 6669 6361 7469 6f6e 732e 0a0a 0a52 656c  fications....Rel
+00004cb0: 6561 7365 2034 2e33 3720 2872 656c 6561  ease 4.37 (relea
+00004cc0: 7365 2064 6174 653a 2032 3031 392d 3032  se date: 2019-02
+00004cd0: 2d32 3629 0a3d 3d3d 3d3d 3d3d 3d3d 3d3d  -26).===========
+00004ce0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00004cf0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 0a42 7567  ============.Bug
+00004d00: 2046 6978 6573 0a2d 2d2d 2d2d 2d2d 2d2d   Fixes.---------
+00004d10: 2d2d 2d2d 2d2d 2d2d 2d0a 2d20 4669 7865  ---------.- Fixe
+00004d20: 6420 6120 6275 6720 7768 6572 6520 584d  d a bug where XM
+00004d30: 4c20 4150 4920 7265 7175 6573 7473 2077  L API requests w
+00004d40: 6f75 6c64 2073 6f6d 6574 696d 6573 2066  ould sometimes f
+00004d50: 6169 6c20 7769 7468 2053 534c 4572 726f  ail with SSLErro
+00004d60: 720a 2020 6578 6365 7074 696f 6e73 2064  r.  exceptions d
+00004d70: 7565 2074 6f20 534e 4920 6e6f 7420 6265  ue to SNI not be
+00004d80: 696e 6720 7573 6564 2066 6f72 2068 7474  ing used for htt
+00004d90: 7073 2063 6f6e 6e65 6374 696f 6e73 2e0a  ps connections..
+00004da0: 2d20 4669 7865 6420 2264 7522 206f 7574  - Fixed "du" out
+00004db0: 7075 7420 7370 6163 696e 6720 666f 7220  put spacing for 
+00004dc0: 362d 6469 6769 7420 7369 7a65 732e 0a0a  6-digit sizes...
+00004dd0: 4f74 6865 7220 4368 616e 6765 730a 2d2d  Other Changes.--
+00004de0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00004df0: 0a2d 2055 7064 6174 6564 2063 7263 6d6f  .- Updated crcmo
+00004e00: 6420 696e 7374 616c 6c61 7469 6f6e 2069  d installation i
+00004e10: 6e73 7472 7563 7469 6f6e 7320 666f 7220  nstructions for 
+00004e20: 4365 6e74 4f53 2036 2e0a 0a0a 5265 6c65  CentOS 6....Rele
+00004e30: 6173 6520 342e 3336 2028 7265 6c65 6173  ase 4.36 (releas
+00004e40: 6520 6461 7465 3a20 3230 3139 2d30 312d  e date: 2019-01-
+00004e50: 3238 290a 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  28).============
+00004e60: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00004e70: 3d3d 3d3d 3d3d 3d3d 3d3d 3d0a 4e65 7720  ===========.New 
+00004e80: 6665 6174 7572 6573 0a2d 2d2d 2d2d 2d2d  features.-------
+00004e90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 2d20 4164  -----------.- Ad
+00004ea0: 6465 6420 4275 636b 6574 2050 6f6c 6963  ded Bucket Polic
+00004eb0: 7920 4f6e 6c79 2073 7570 706f 7274 2074  y Only support t
+00004ec0: 6f20 6773 7574 696c 2e20 5468 6973 2069  o gsutil. This i
+00004ed0: 6e63 6c75 6465 7320 6120 6e65 770a 2020  ncludes a new.  
+00004ee0: 2262 7563 6b65 7470 6f6c 6963 796f 6e6c  "bucketpolicyonl
+00004ef0: 7922 2063 6f6d 6d61 6e64 2074 6f20 6765  y" command to ge
+00004f00: 742f 7365 7420 4250 4f20 6f6e 2065 7869  t/set BPO on exi
+00004f10: 7374 696e 6720 6275 636b 6574 732c 2061  sting buckets, a
+00004f20: 7320 7765 6c6c 2061 6464 696e 670a 2020  s well adding.  
+00004f30: 7468 6520 6162 696c 6974 7920 746f 2073  the ability to s
+00004f40: 6574 2042 504f 2061 7420 6275 636b 6574  et BPO at bucket
+00004f50: 2063 7265 6174 696f 6e20 7469 6d65 2077   creation time w
+00004f60: 6974 6820 226d 6220 2d62 222e 2043 7572  ith "mb -b". Cur
+00004f70: 7265 6e74 6c79 2c20 796f 7572 0a20 2070  rently, your.  p
+00004f80: 726f 6a65 6374 206d 7573 7420 6265 2061  roject must be a
+00004f90: 6464 6564 2074 6f20 7468 6520 616c 6c6f  dded to the allo
+00004fa0: 776c 6973 7420 666f 7220 7573 6520 7769  wlist for use wi
+00004fb0: 7468 2074 6865 206e 6577 2042 504f 2066  th the new BPO f
+00004fc0: 756e 6374 696f 6e61 6c69 7479 2e0a 2020  unctionality..  
+00004fd0: 5468 6973 2072 6573 7472 6963 7469 6f6e  This restriction
+00004fe0: 2077 696c 6c20 6265 206c 6966 7465 6420   will be lifted 
+00004ff0: 696e 2074 6865 206e 6561 7220 6675 7475  in the near futu
+00005000: 7265 2e0a 0a42 7567 2046 6978 6573 0a2d  re...Bug Fixes.-
+00005010: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00005020: 2d0a 2d20 4669 7865 6420 6120 6275 6720  -.- Fixed a bug 
+00005030: 7768 6572 6520 2263 7020 2d6e 2220 776f  where "cp -n" wo
+00005040: 756c 6420 6f76 6572 7772 6974 6520 6120  uld overwrite a 
+00005050: 6c6f 6361 6c20 6669 6c65 2061 7420 7468  local file at th
+00005060: 6520 6465 7374 696e 6174 696f 6e20 6966  e destination if
+00005070: 0a20 2069 7473 2073 697a 6520 6469 6666  .  its size diff
+00005080: 6572 6564 2066 726f 6d20 7468 6520 736f  ered from the so
+00005090: 7572 6365 2773 2073 697a 652e 0a0a 4f74  urce's size...Ot
+000050a0: 6865 7220 4368 616e 6765 730a 2d2d 2d2d  her Changes.----
+000050b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d  --------------.-
+000050c0: 2055 7064 6174 6564 2063 7263 6d6f 6420   Updated crcmod 
+000050d0: 696e 7374 616c 6c61 7469 6f6e 2069 6e73  installation ins
+000050e0: 7472 7563 7469 6f6e 7320 666f 7220 656e  tructions for en
+000050f0: 7465 7270 7269 7365 2053 5553 4520 7379  terprise SUSE sy
+00005100: 7374 656d 732e 0a0a 0a52 656c 6561 7365  stems....Release
+00005110: 2034 2e33 3520 2872 656c 6561 7365 2064   4.35 (release d
+00005120: 6174 653a 2032 3031 382d 3132 2d31 3829  ate: 2018-12-18)
+00005130: 0a3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  .===============
+00005140: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00005150: 3d3d 3d3d 3d3d 3d3d 0a4e 6577 2066 6561  ========.New fea
+00005160: 7475 7265 730a 2d2d 2d2d 2d2d 2d2d 2d2d  tures.----------
+00005170: 2d2d 2d2d 2d2d 2d2d 0a2d 2041 6464 6564  --------.- Added
+00005180: 202d 7520 6f70 7469 6f6e 2074 6f20 7273   -u option to rs
+00005190: 796e 633b 2074 6869 7320 7769 6c6c 2073  ync; this will s
+000051a0: 6b69 7020 636f 7079 696e 6720 6669 6c65  kip copying file
+000051b0: 732f 6f62 6a65 6374 7320 7468 6174 2061  s/objects that a
+000051c0: 7265 206e 6577 6572 0a20 2028 6173 2064  re newer.  (as d
+000051d0: 6574 6572 6d69 6e65 6420 6279 2063 6865  etermined by che
+000051e0: 636b 696e 6720 6d74 696d 6529 2061 7420  cking mtime) at 
+000051f0: 7468 6520 6465 7374 696e 6174 696f 6e2e  the destination.
+00005200: 0a0a 4275 6720 4669 7865 730a 2d2d 2d2d  ..Bug Fixes.----
+00005210: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d  --------------.-
+00005220: 2054 6865 2022 6961 6d20 6368 2220 636f   The "iam ch" co
+00005230: 6d6d 616e 6420 6e6f 7720 616c 6c6f 7773  mmand now allows
+00005240: 2073 7570 706c 7969 6e67 2063 7573 746f   supplying custo
+00005250: 6d20 4941 4d20 726f 6c65 732e 0a2d 2046  m IAM roles..- F
+00005260: 6978 6564 2061 6e20 6973 7375 6520 7768  ixed an issue wh
+00005270: 6572 6520 6465 6275 6720 6f75 7470 7574  ere debug output
+00005280: 2077 6173 206e 6f74 2064 6973 706c 6179   was not display
+00005290: 696e 6720 616c 6c20 6f66 2074 6865 206c  ing all of the l
+000052a0: 6f61 6465 6420 636f 6e66 6967 0a20 2066  oaded config.  f
+000052b0: 696c 6573 2075 6e64 6572 2074 6865 2022  iles under the "
+000052c0: 636f 6e66 6967 2070 6174 6828 7329 2220  config path(s)" 
+000052d0: 6c61 6265 6c2e 0a2d 2044 6973 6162 6c65  label..- Disable
+000052e0: 6420 7275 6e6e 696e 6720 7769 7468 206d  d running with m
+000052f0: 756c 7469 706c 6520 7072 6f63 6573 7365  ultiple processe
+00005300: 7320 7768 656e 2072 756e 6e69 6e67 206f  s when running o
+00005310: 6e20 416c 7069 6e65 204c 696e 7578 2c20  n Alpine Linux, 
+00005320: 6173 2074 6869 730a 2020 776f 756c 6420  as this.  would 
+00005330: 736f 6d65 7469 6d65 7320 6361 7573 6520  sometimes cause 
+00005340: 6773 7574 696c 2074 6f20 6861 6e67 2066  gsutil to hang f
+00005350: 6f72 6576 6572 2e20 5275 6e6e 696e 6720  orever. Running 
+00005360: 7769 7468 206d 756c 7469 706c 6520 7468  with multiple th
+00005370: 7265 6164 7320 6973 0a20 2073 7469 6c6c  reads is.  still
+00005380: 2061 6c6c 6f77 6564 2e0a 2d20 5468 6520   allowed..- The 
+00005390: 2272 7379 6e63 2220 636f 6d6d 616e 6420  "rsync" command 
+000053a0: 6e6f 7720 7072 696e 7473 206c 6f67 206d  now prints log m
+000053b0: 6573 7361 6765 7320 6475 7269 6e67 2073  essages during s
+000053c0: 796e 6368 726f 6e69 7a61 7469 6f6e 2074  ynchronization t
+000053d0: 6f20 696e 6469 6361 7465 0a20 2077 6865  o indicate.  whe
+000053e0: 6e20 7379 6d6c 696e 6b73 2061 7265 2062  n symlinks are b
+000053f0: 6569 6e67 2073 6b69 7070 6564 2e0a 2d20  eing skipped..- 
+00005400: 5468 6520 2242 6f74 6f3a 6361 5f63 6572  The "Boto:ca_cer
+00005410: 7469 6669 6361 7465 735f 6669 6c65 2220  tificates_file" 
+00005420: 636f 6e66 6967 206f 7074 696f 6e20 6361  config option ca
+00005430: 6e20 6e6f 7720 6265 206f 7665 7272 6964  n now be overrid
+00005440: 6465 6e20 7573 696e 670a 2020 7468 6520  den using.  the 
+00005450: 2d6f 206f 7074 696f 6e2e 0a0a 4f74 6865  -o option...Othe
+00005460: 7220 4368 616e 6765 730a 2d2d 2d2d 2d2d  r Changes.------
+00005470: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d 2044  ------------.- D
+00005480: 6973 616c 6c6f 7765 6420 696e 7374 616c  isallowed instal
+00005490: 6c69 6e67 2067 7375 7469 6c20 6f6e 2050  ling gsutil on P
+000054a0: 7974 686f 6e20 7665 7273 696f 6e73 2021  ython versions !
+000054b0: 3d20 322e 372e 0a2d 2053 6576 6572 616c  = 2.7..- Several
+000054c0: 2064 6f63 756d 656e 7461 7469 6f6e 2075   documentation u
+000054d0: 7064 6174 6573 2061 6e64 2063 6c61 7269  pdates and clari
+000054e0: 6669 6361 7469 6f6e 732e 0a0a 0a52 656c  fications....Rel
+000054f0: 6561 7365 2034 2e33 3420 2872 656c 6561  ease 4.34 (relea
+00005500: 7365 2064 6174 653a 2032 3031 382d 3039  se date: 2018-09
+00005510: 2d31 3129 0a3d 3d3d 3d3d 3d3d 3d3d 3d3d  -11).===========
+00005520: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00005530: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 0a4e 6577  ============.New
+00005540: 2066 6561 7475 7265 730a 2d2d 2d2d 2d2d   features.------
+00005550: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d 2041  ------------.- A
+00005560: 6464 6564 2062 7563 6b65 7420 6c6f 636b  dded bucket lock
+00005570: 2073 7570 706f 7274 2074 6f20 6773 7574   support to gsut
+00005580: 696c 2e20 4375 7272 656e 746c 792c 2079  il. Currently, y
+00005590: 6f75 7220 7072 6f6a 6563 7420 6d75 7374  our project must
+000055a0: 2062 6520 6164 6465 6420 746f 0a20 2074   be added to.  t
+000055b0: 6865 2061 6c6c 6f77 6c69 7374 2066 6f72  he allowlist for
+000055c0: 2075 7365 2077 6974 6820 7468 6520 6e65   use with the ne
+000055d0: 7720 6275 636b 6574 206c 6f63 6b20 6675  w bucket lock fu
+000055e0: 6e63 7469 6f6e 616c 6974 792e 2054 6869  nctionality. Thi
+000055f0: 7320 7265 7374 7269 6374 696f 6e0a 2020  s restriction.  
+00005600: 7769 6c6c 2062 6520 6c69 6674 6564 2069  will be lifted i
+00005610: 6e20 7468 6520 6e65 6172 2066 7574 7572  n the near futur
+00005620: 652e 0a0a 4275 6720 4669 7865 730a 2d2d  e...Bug Fixes.--
+00005630: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00005640: 0a2d 2046 6978 6564 2069 7373 7565 2077  .- Fixed issue w
+00005650: 6865 7265 2022 7273 796e 6320 2d50 2220  here "rsync -P" 
+00005660: 776f 756c 6420 6661 696c 2069 6620 7275  would fail if ru
+00005670: 6e20 6173 2074 6865 2072 6f6f 7420 7573  n as the root us
+00005680: 6572 2e0a 2d20 4669 7865 6420 616e 2069  er..- Fixed an i
+00005690: 7373 7565 2077 6974 6820 6372 6564 656e  ssue with creden
+000056a0: 7469 616c 2063 6163 6869 6e67 2077 6865  tial caching whe
+000056b0: 7265 2074 6865 2073 6f75 7263 6520 6372  re the source cr
+000056c0: 6564 656e 7469 616c 7320 666f 7220 616e  edentials for an
+000056d0: 0a20 2065 6e74 6974 7920 776f 756c 6420  .  entity would 
+000056e0: 6368 616e 6765 2062 7574 2074 6865 206f  change but the o
+000056f0: 6c64 2063 6163 6865 6420 6372 6564 656e  ld cached creden
+00005700: 7469 616c 7320 776f 756c 6420 7374 696c  tials would stil
+00005710: 6c20 6265 2075 7365 642e 0a0a 4f74 6865  l be used...Othe
+00005720: 7220 4368 616e 6765 730a 2d2d 2d2d 2d2d  r Changes.------
+00005730: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d 204f  ------------.- O
+00005740: 4175 7468 3220 746f 6b65 6e20 6578 6368  Auth2 token exch
+00005750: 616e 6765 7320 6e6f 7720 676f 2074 6f20  anges now go to 
+00005760: 6874 7470 733a 2f2f 6f61 7574 6832 2e67  https://oauth2.g
+00005770: 6f6f 676c 6561 7069 732e 636f 6d2f 746f  oogleapis.com/to
+00005780: 6b65 6e20 696e 7374 6561 640a 2020 6f66  ken instead.  of
+00005790: 2068 7474 7073 3a2f 2f61 6363 6f75 6e74   https://account
+000057a0: 732e 676f 6f67 6c65 2e63 6f6d 2f6f 2f6f  s.google.com/o/o
+000057b0: 6175 7468 322f 746f 6b65 6e2e 2055 7365  auth2/token. Use
+000057c0: 7273 2075 7369 6e67 2067 7375 7469 6c20  rs using gsutil 
+000057d0: 6265 6869 6e64 2061 0a20 2066 6972 6577  behind a.  firew
+000057e0: 616c 6c20 6d61 7920 6e65 6564 2074 6f20  all may need to 
+000057f0: 6164 6a75 7374 2074 6865 6972 2066 6972  adjust their fir
+00005800: 6577 616c 6c20 7275 6c65 732e 0a2d 2049  ewall rules..- I
+00005810: 6620 696e 766f 6b65 6420 7669 6120 7468  f invoked via th
+00005820: 6520 436c 6f75 6420 5344 4b2c 2067 7375  e Cloud SDK, gsu
+00005830: 7469 6c27 7320 6465 6275 6720 6f75 7470  til's debug outp
+00005840: 7574 206e 6f77 2064 6973 706c 6179 7320  ut now displays 
+00005850: 7468 6520 7061 7468 2074 6f0a 2020 6763  the path to.  gc
+00005860: 6c6f 7564 2773 2067 7375 7469 6c20 7772  loud's gsutil wr
+00005870: 6170 7065 7220 7363 7269 7074 2066 6f72  apper script for
+00005880: 2022 6773 7574 696c 2070 6174 6822 2c20   "gsutil path", 
+00005890: 7261 7468 6572 2074 6861 6e20 7468 6520  rather than the 
+000058a0: 6163 7475 616c 2065 6e74 7279 0a20 2070  actual entry.  p
+000058b0: 6f69 6e74 2066 6f72 2074 6865 2062 756e  oint for the bun
+000058c0: 646c 6564 2067 7375 7469 6c20 636f 6d70  dled gsutil comp
+000058d0: 6f6e 656e 742e 0a2d 2049 6d70 726f 7665  onent..- Improve
+000058e0: 6420 6572 726f 7220 6d65 7373 6167 6573  d error messages
+000058f0: 2066 6f72 2066 6169 6c65 6420 436c 6f75   for failed Clou
+00005900: 6420 4b4d 5320 7265 7175 6573 7473 2e0a  d KMS requests..
+00005910: 2d20 496d 7072 6f76 6564 2065 7272 6f72  - Improved error
+00005920: 206d 6573 7361 6765 7320 666f 7220 2269   messages for "i
+00005930: 616d 2063 6822 2063 6f6d 6d61 6e64 2074  am ch" command t
+00005940: 6f20 636c 6172 6966 7920 7468 6174 2061  o clarify that a
+00005950: 7373 6967 6e69 6e67 0a20 2072 6f6c 6573  ssigning.  roles
+00005960: 2074 6f20 7072 6f6a 6563 7420 636f 6e76   to project conv
+00005970: 656e 6965 6e63 6520 6772 6f75 7073 2028  enience groups (
+00005980: 652e 672e 2022 7072 6f6a 6563 7445 6469  e.g. "projectEdi
+00005990: 746f 7222 2920 6973 206e 6f74 2061 6c6c  tor") is not all
+000059a0: 6f77 6564 2e0a 2d20 456e 6861 6e63 6564  owed..- Enhanced
+000059b0: 2070 6572 6664 6961 6720 636f 6d6d 616e   perfdiag comman
+000059c0: 6420 746f 2069 6e63 6c75 6465 2047 4345  d to include GCE
+000059d0: 2069 6e73 7461 6e63 6520 6465 7461 696c   instance detail
+000059e0: 7320 2869 6620 6170 706c 6963 6162 6c65  s (if applicable
+000059f0: 290a 2020 616e 6420 7468 6520 7461 7267  ).  and the targ
+00005a00: 6574 2062 7563 6b65 7427 7320 6c6f 6361  et bucket's loca
+00005a10: 7469 6f6e 2061 6e64 2073 746f 7261 6765  tion and storage
+00005a20: 2063 6c61 7373 2e0a 2d20 5365 7665 7261   class..- Severa
+00005a30: 6c20 646f 6375 6d65 6e74 6174 696f 6e20  l documentation 
+00005a40: 7570 6461 7465 7320 616e 6420 636c 6172  updates and clar
+00005a50: 6966 6963 6174 696f 6e73 2e0a 0a0a 5265  ifications....Re
+00005a60: 6c65 6173 6520 342e 3333 2028 7265 6c65  lease 4.33 (rele
+00005a70: 6173 6520 6461 7465 3a20 3230 3138 2d30  ase date: 2018-0
+00005a80: 362d 3231 290a 3d3d 3d3d 3d3d 3d3d 3d3d  6-21).==========
+00005a90: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00005aa0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d0a 4275  =============.Bu
+00005ab0: 6720 4669 7865 730a 2d2d 2d2d 2d2d 2d2d  g Fixes.--------
+00005ac0: 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d 2046 6978  ----------.- Fix
+00005ad0: 6564 2061 6e20 6973 7375 6520 7769 7468  ed an issue with
+00005ae0: 2074 6865 2022 7273 796e 6322 2063 6f6d   the "rsync" com
+00005af0: 6d61 6e64 206f 6e20 5769 6e64 6f77 7320  mand on Windows 
+00005b00: 7468 6174 2077 6f75 6c64 2063 6175 7365  that would cause
+00005b10: 2067 7375 7469 6c0a 2020 746f 2069 6e63   gsutil.  to inc
+00005b20: 6f72 7265 6374 6c79 206a 6f69 6e20 6669  orrectly join fi
+00005b30: 6c65 2070 6174 6820 7365 676d 656e 7473  le path segments
+00005b40: 2077 6865 6e20 7468 6520 736f 7572 6365   when the source
+00005b50: 2067 6976 656e 2077 6173 2074 6865 2072   given was the r
+00005b60: 6f6f 740a 2020 6f66 2061 2064 7269 7665  oot.  of a drive
+00005b70: 2c20 652e 672e 2022 433a 222e 0a2d 2046  , e.g. "C:"..- F
+00005b80: 6978 6564 2073 6576 6572 616c 2070 6c61  ixed several pla
+00005b90: 6365 7320 7768 6572 6520 6773 7574 696c  ces where gsutil
+00005ba0: 2072 6566 6572 656e 6365 6420 6120 7661   referenced a va
+00005bb0: 7269 6162 6c65 2074 6861 7420 6861 6420  riable that had 
+00005bc0: 6e6f 7420 6265 656e 0a20 2063 6f72 7265  not been.  corre
+00005bd0: 6374 6c79 2069 6d70 6f72 7465 642e 0a0a  ctly imported...
+00005be0: 4f74 6865 7220 4368 616e 6765 730a 2d2d  Other Changes.--
+00005bf0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00005c00: 0a2d 2053 6576 6572 616c 2064 6f63 756d  .- Several docum
+00005c10: 656e 7461 7469 6f6e 2075 7064 6174 6573  entation updates
+00005c20: 2061 6e64 2063 6c61 7269 6669 6361 7469   and clarificati
+00005c30: 6f6e 732e 0a0a 0a52 656c 6561 7365 2034  ons....Release 4
+00005c40: 2e33 3220 2872 656c 6561 7365 2064 6174  .32 (release dat
+00005c50: 653a 2032 3031 382d 3036 2d30 3129 0a3d  e: 2018-06-01).=
+00005c60: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00005c70: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00005c80: 3d3d 3d3d 3d3d 0a42 7567 2046 6978 6573  ======.Bug Fixes
+00005c90: 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  .---------------
+00005ca0: 2d2d 2d0a 2d20 4669 7865 6420 6120 6669  ---.- Fixed a fi
+00005cb0: 6c65 2070 6174 6820 7265 736f 6c75 7469  le path resoluti
+00005cc0: 6f6e 2069 7373 7565 206f 6e20 5769 6e64  on issue on Wind
+00005cd0: 6f77 7320 7468 6174 2061 6666 6563 7465  ows that affecte
+00005ce0: 6420 6c6f 6361 6c2d 746f 2d63 6c6f 7564  d local-to-cloud
+00005cf0: 0a20 2063 6f70 792d 6261 7365 6420 6f70  .  copy-based op
+00005d00: 6572 6174 696f 6e73 2028 2263 7022 2c20  erations ("cp", 
+00005d10: 226d 7622 2c20 2272 7379 6e63 2229 2e20  "mv", "rsync"). 
+00005d20: 4966 2061 206c 6f63 616c 2066 696c 6520  If a local file 
+00005d30: 5552 4920 636f 6e74 6169 6e69 6e67 0a20  URI containing. 
+00005d40: 2072 656c 6174 6976 6520 7061 7468 2063   relative path c
+00005d50: 6f6d 706f 6e65 6e74 7320 2822 2e22 206f  omponents ("." o
+00005d60: 7220 222e 2e22 2920 6f72 2066 6f72 7761  r "..") or forwa
+00005d70: 7264 2073 6c61 7368 6573 2028 7261 7468  rd slashes (rath
+00005d80: 6572 2074 6861 6e0a 2020 6261 636b 736c  er than.  backsl
+00005d90: 6173 6865 7329 2077 6173 2070 726f 7669  ashes) was provi
+00005da0: 6465 6420 6173 2061 2073 6f75 7263 6520  ded as a source 
+00005db0: 6172 6775 6d65 6e74 2c20 7468 6520 7265  argument, the re
+00005dc0: 7375 6c74 696e 6720 6465 7374 696e 6174  sulting destinat
+00005dd0: 696f 6e0a 2020 6f62 6a65 6374 2873 2920  ion.  object(s) 
+00005de0: 7761 7320 696e 636f 7272 6563 746c 7920  was incorrectly 
+00005df0: 6e61 6d65 642e 2046 6f72 2072 6563 7572  named. For recur
+00005e00: 7369 7665 206f 7065 7261 7469 6f6e 732c  sive operations,
+00005e10: 2074 6869 7320 7265 7375 6c74 6564 2069   this resulted i
+00005e20: 6e0a 2020 7365 7665 7261 6c20 6669 6c65  n.  several file
+00005e30: 7320 6265 696e 6720 636f 7069 6564 2074  s being copied t
+00005e40: 6f20 7468 6520 7361 6d65 206f 626a 6563  o the same objec
+00005e50: 7420 7061 7468 2c20 6f76 6572 7772 6974  t path, overwrit
+00005e60: 696e 6720 6561 6368 206f 7468 6572 2e0a  ing each other..
+00005e70: 2d20 4669 7865 6420 616e 2069 7373 7565  - Fixed an issue
+00005e80: 2077 6974 6820 7468 6520 2272 7379 6e63   with the "rsync
+00005e90: 2220 636f 6d6d 616e 6420 6f6e 2057 696e  " command on Win
+00005ea0: 646f 7773 2074 6861 7420 7265 7375 6c74  dows that result
+00005eb0: 6564 2069 6e20 6561 6368 2072 7379 6e63  ed in each rsync
+00005ec0: 0a20 2069 6e76 6f63 6174 696f 6e20 6e6f  .  invocation no
+00005ed0: 7420 6265 696e 6720 6162 6c65 2074 6f20  t being able to 
+00005ee0: 6465 6c65 7465 2069 7473 2074 656d 706f  delete its tempo
+00005ef0: 7261 7279 2073 796e 6368 726f 6e69 7a61  rary synchroniza
+00005f00: 7469 6f6e 2066 696c 6573 206f 6e0a 2020  tion files on.  
+00005f10: 6469 736b 2e0a 2d20 4669 7865 6420 616e  disk..- Fixed an
+00005f20: 2069 7373 7565 2077 6865 7265 2072 6561   issue where rea
+00005f30: 6469 6e67 2061 2073 7065 6369 6669 6320  ding a specific 
+00005f40: 6765 6e65 7261 7469 6f6e 206f 6620 616e  generation of an
+00005f50: 206f 626a 6563 7420 6672 6f6d 2053 3320   object from S3 
+00005f60: 776f 756c 640a 2020 6661 696c 2e0a 2d20  would.  fail..- 
+00005f70: 4669 7865 6420 616e 2069 7373 7565 2077  Fixed an issue w
+00005f80: 6865 7265 2072 756e 6e69 6e67 2067 7375  here running gsu
+00005f90: 7469 6c20 7769 7468 2074 6865 2074 6f70  til with the top
+00005fa0: 2d6c 6576 656c 2022 2d71 2220 666c 6167  -level "-q" flag
+00005fb0: 2077 6f75 6c64 2072 6573 756c 740a 2020   would result.  
+00005fc0: 696e 2063 7265 6465 6e74 6961 6c2d 7265  in credential-re
+00005fd0: 6c61 7465 6420 6c6f 6767 696e 6720 7374  lated logging st
+00005fe0: 6174 656d 656e 7473 2062 6569 6e67 2065  atements being e
+00005ff0: 6d69 7474 6564 2074 6f20 7374 6465 7272  mitted to stderr
+00006000: 2e0a 2d20 4773 7574 696c 206e 6f20 6c6f  ..- Gsutil no lo
+00006010: 6e67 6572 2061 6c6c 6f77 7320 636f 7079  nger allows copy
+00006020: 696e 6720 6672 6f6d 2073 7472 6561 6d65  ing from streame
+00006030: 6420 696e 7075 7420 6966 2074 6865 2074  d input if the t
+00006040: 6f70 2d6c 6576 656c 2022 2d6d 2220 666c  op-level "-m" fl
+00006050: 6167 0a20 2069 7320 7370 6563 6966 6965  ag.  is specifie
+00006060: 642e 2057 6869 6c65 2074 6869 7320 7761  d. While this wa
+00006070: 7320 7072 6576 696f 7573 6c79 2061 6c6c  s previously all
+00006080: 6f77 6564 2c20 6974 2064 6964 206e 6f74  owed, it did not
+00006090: 2077 6f72 6b20 636f 7272 6563 746c 792e   work correctly.
+000060a0: 0a0a 4f74 6865 7220 4368 616e 6765 730a  ..Other Changes.
+000060b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000060c0: 2d2d 0a2d 2053 6576 6572 616c 2064 6f63  --.- Several doc
+000060d0: 756d 656e 7461 7469 6f6e 2075 7064 6174  umentation updat
+000060e0: 6573 2061 6e64 2063 6c61 7269 6669 6361  es and clarifica
+000060f0: 7469 6f6e 732e 0a0a 0a52 656c 6561 7365  tions....Release
+00006100: 2034 2e33 3120 2872 656c 6561 7365 2064   4.31 (release d
+00006110: 6174 653a 2032 3031 382d 3034 2d32 3629  ate: 2018-04-26)
+00006120: 0a3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  .===============
+00006130: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00006140: 3d3d 3d3d 3d3d 3d3d 0a4e 6577 2066 6561  ========.New fea
+00006150: 7475 7265 730a 2d2d 2d2d 2d2d 2d2d 2d2d  tures.----------
+00006160: 2d2d 2d2d 2d2d 2d2d 0a2d 2041 6464 6564  --------.- Added
+00006170: 2073 7570 706f 7274 2066 6f72 2072 6561   support for rea
+00006180: 7574 6865 6e74 6963 6174 696f 6e20 7769  uthentication wi
+00006190: 7468 696e 2067 7375 7469 6c2e 204e 6f74  thin gsutil. Not
+000061a0: 6520 7468 6174 2074 6869 7320 6f6e 6c79  e that this only
+000061b0: 2061 6666 6563 7473 0a20 2061 7574 6865   affects.  authe
+000061c0: 6e74 6963 6174 696f 6e20 7768 656e 2022  ntication when "
+000061d0: 6773 5f6f 6175 7468 325f 7265 6672 6573  gs_oauth2_refres
+000061e0: 685f 746f 6b65 6e22 2069 7320 636f 6e66  h_token" is conf
+000061f0: 6967 7572 6564 2075 6e64 6572 2074 6865  igured under the
+00006200: 0a20 2022 4372 6564 656e 7469 616c 7322  .  "Credentials"
+00006210: 2073 6563 7469 6f6e 206f 6620 7468 6520   section of the 
+00006220: 626f 746f 2063 6f6e 6669 6720 6669 6c65  boto config file
+00006230: 2061 6e64 2074 6861 7420 746f 6b65 6e20   and that token 
+00006240: 636f 7272 6573 706f 6e64 7320 746f 2061  corresponds to a
+00006250: 0a20 2075 7365 7220 6163 636f 756e 7420  .  user account 
+00006260: 656e 726f 6c6c 6564 2069 6e20 322d 7374  enrolled in 2-st
+00006270: 6570 2076 6572 6966 6963 6174 696f 6e2e  ep verification.
+00006280: 0a0a 4275 6720 4669 7865 730a 2d2d 2d2d  ..Bug Fixes.----
+00006290: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d  --------------.-
+000062a0: 2057 6865 6e20 6372 6561 7469 6e67 2061   When creating a
+000062b0: 2073 6967 6e65 6420 5552 4c20 7669 6120   signed URL via 
+000062c0: 7468 6520 2273 6967 6e75 726c 2220 636f  the "signurl" co
+000062d0: 6d6d 616e 642c 2067 7375 7469 6c20 6e6f  mmand, gsutil no
+000062e0: 7720 7665 7269 6669 6573 2074 6861 740a  w verifies that.
+000062f0: 2020 7468 6520 7370 6563 6966 6965 6420    the specified 
+00006300: 6578 7069 7261 7469 6f6e 2069 736e 2774  expiration isn't
+00006310: 206c 6f6e 6765 7220 7468 616e 2037 2064   longer than 7 d
+00006320: 6179 7320 2874 6865 206d 6178 696d 756d  ays (the maximum
+00006330: 2061 6c6c 6f77 6564 2062 7920 7468 650a   allowed by the.
+00006340: 2020 7365 7276 6963 6529 2e0a 2d20 546f    service)..- To
+00006350: 2073 7570 706f 7274 2072 6577 7269 7469   support rewriti
+00006360: 6e67 206f 626a 6563 7473 2074 6f20 6265  ng objects to be
+00006370: 2065 6e63 7279 7074 6564 2075 7369 6e67   encrypted using
+00006380: 2061 2062 7563 6b65 7427 7320 6465 6661   a bucket's defa
+00006390: 756c 7420 4b4d 5320 6b65 792c 0a20 2074  ult KMS key,.  t
+000063a0: 6865 2022 7265 7772 6974 6522 2063 6f6d  he "rewrite" com
+000063b0: 6d61 6e64 206e 6f77 2072 6577 7269 7465  mand now rewrite
+000063c0: 7320 616c 6c20 7370 6563 6966 6965 6420  s all specified 
+000063d0: 6f62 6a65 6374 7320 6966 206e 6f20 7661  objects if no va
+000063e0: 6c75 6520 6973 0a20 2073 7065 6369 6669  lue is.  specifi
+000063f0: 6564 2066 6f72 2022 656e 6372 7970 7469  ed for "encrypti
+00006400: 6f6e 5f6b 6579 2220 756e 6465 7220 7468  on_key" under th
+00006410: 6520 2247 5355 7469 6c22 2073 6563 7469  e "GSUtil" secti
+00006420: 6f6e 2069 6e20 7468 6520 626f 746f 2063  on in the boto c
+00006430: 6f6e 6669 670a 2020 6669 6c65 2e0a 0a4f  onfig.  file...O
+00006440: 7468 6572 2043 6861 6e67 6573 0a2d 2d2d  ther Changes.---
+00006450: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a  ---------------.
+00006460: 2d20 5365 7665 7261 6c20 646f 6375 6d65  - Several docume
+00006470: 6e74 6174 696f 6e20 7570 6461 7465 7320  ntation updates 
+00006480: 616e 6420 636c 6172 6966 6963 6174 696f  and clarificatio
+00006490: 6e73 2e0a 0a0a 5265 6c65 6173 6520 342e  ns....Release 4.
+000064a0: 3330 2028 7265 6c65 6173 6520 6461 7465  30 (release date
+000064b0: 3a20 3230 3138 2d30 332d 3238 290a 3d3d  : 2018-03-28).==
+000064c0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+000064d0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+000064e0: 3d3d 3d3d 3d0a 4e65 7720 6665 6174 7572  =====.New featur
+000064f0: 6573 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  es.-------------
+00006500: 2d2d 2d2d 2d0a 2d20 4164 6465 6420 436c  -----.- Added Cl
+00006510: 6f75 6420 4b4d 5320 7375 7070 6f72 7420  oud KMS support 
+00006520: 666f 7220 476f 6f67 6c65 2043 6c6f 7564  for Google Cloud
+00006530: 2053 746f 7261 6765 2072 6573 6f75 7263   Storage resourc
+00006540: 6573 2c20 616c 6c6f 7769 6e67 2074 6865  es, allowing the
+00006550: 2075 7365 0a20 206f 6620 6375 7374 6f6d   use.  of custom
+00006560: 6572 2d6d 616e 6167 6564 2065 6e63 7279  er-managed encry
+00006570: 7074 696f 6e20 6b65 7973 2028 434d 454b  ption keys (CMEK
+00006580: 7329 2e20 4275 636b 6574 2d72 656c 6174  s). Bucket-relat
+00006590: 6564 2066 756e 6374 696f 6e61 6c69 7479  ed functionality
+000065a0: 0a20 2069 6e63 6c75 6465 7320 7468 6520  .  includes the 
+000065b0: 6e65 7720 226b 6d73 2220 636f 6d6d 616e  new "kms" comman
+000065c0: 642c 2077 6869 6368 2063 616e 2062 6520  d, which can be 
+000065d0: 7573 6564 2074 6f20 6765 7420 6f72 2073  used to get or s
+000065e0: 6574 2061 2062 7563 6b65 7427 730a 2020  et a bucket's.  
+000065f0: 6465 6661 756c 7420 4b4d 5320 6b65 792e  default KMS key.
+00006600: 2043 6f6e 6365 726e 696e 6720 6f62 6a65   Concerning obje
+00006610: 6374 732c 2075 7365 7273 206d 6179 206e  cts, users may n
+00006620: 6f77 2073 7065 6369 6679 2074 6865 2043  ow specify the C
+00006630: 4d45 4b20 746f 2062 6520 7573 6564 0a20  MEK to be used. 
+00006640: 2066 6f72 2065 6e63 7279 7074 696f 6e20   for encryption 
+00006650: 7669 6120 7468 6569 7220 626f 746f 2063  via their boto c
+00006660: 6f6e 6669 6720 6669 6c65 2c20 696e 2074  onfig file, in t
+00006670: 6865 2022 656e 6372 7970 7469 6f6e 5f6b  he "encryption_k
+00006680: 6579 2220 6174 7472 6962 7574 652e 0a20  ey" attribute.. 
+00006690: 2049 6e20 7468 6973 2077 6179 2c20 7573   In this way, us
+000066a0: 6572 7320 6d61 7920 7370 6563 6966 7920  ers may specify 
+000066b0: 6569 7468 6572 2061 2043 5345 4b20 6f72  either a CSEK or
+000066c0: 2061 2043 4d45 4b20 746f 2065 6e63 7279   a CMEK to encry
+000066d0: 7074 206e 6577 206f 626a 6563 7473 2c0a  pt new objects,.
+000066e0: 2020 6275 7420 6e6f 7420 626f 7468 2e20    but not both. 
+000066f0: 466f 7220 6d6f 7265 2069 6e66 6f72 6d61  For more informa
+00006700: 7469 6f6e 2c20 7365 6520 2267 7375 7469  tion, see "gsuti
+00006710: 6c20 6865 6c70 2065 6e63 7279 7074 696f  l help encryptio
+00006720: 6e22 2e0a 0a4f 7468 6572 2043 6861 6e67  n"...Other Chang
+00006730: 6573 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  es.-------------
+00006740: 2d2d 2d2d 2d0a 2d20 5365 7665 7261 6c20  -----.- Several 
+00006750: 646f 6375 6d65 6e74 6174 696f 6e20 7570  documentation up
+00006760: 6461 7465 7320 616e 6420 636c 6172 6966  dates and clarif
+00006770: 6963 6174 696f 6e73 2e0a 0a0a 5265 6c65  ications....Rele
+00006780: 6173 6520 342e 3239 2028 7265 6c65 6173  ase 4.29 (releas
+00006790: 6520 6461 7465 3a20 3230 3138 2d30 332d  e date: 2018-03-
+000067a0: 3134 290a 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  14).============
+000067b0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+000067c0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d0a 4e65 7720  ===========.New 
+000067d0: 6665 6174 7572 6573 0a2d 2d2d 2d2d 2d2d  features.-------
+000067e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 2d20 4164  -----------.- Ad
+000067f0: 6465 6420 7472 616e 7370 6f72 7420 636f  ded transport co
+00006800: 6d70 7265 7373 696f 6e20 7375 7070 6f72  mpression suppor
+00006810: 742c 2061 7661 696c 6162 6c65 2074 6872  t, available thr
+00006820: 6f75 6768 2074 6865 2022 2d6a 2220 616e  ough the "-j" an
+00006830: 6420 222d 4a22 0a20 206f 7074 696f 6e73  d "-J".  options
+00006840: 2066 6f72 2074 6865 2022 6370 222c 2022   for the "cp", "
+00006850: 6d76 222c 2061 6e64 2022 7273 796e 6322  mv", and "rsync"
+00006860: 2063 6f6d 6d61 6e64 732e 2054 6869 7320   commands. This 
+00006870: 6973 2075 7365 6675 6c20 7768 656e 0a20  is useful when. 
+00006880: 2075 706c 6f61 6469 6e67 2066 696c 6573   uploading files
+00006890: 2077 6974 6820 6869 6768 6c79 2d63 6f6d   with highly-com
+000068a0: 7072 6573 7369 626c 6520 636f 6e74 656e  pressible conten
+000068b0: 742e 2057 6865 6e20 7370 6563 6966 6963  t. When specific
+000068c0: 6564 2c20 6669 6c65 7320 6265 696e 670a  ed, files being.
+000068d0: 2020 7570 6c6f 6164 6564 2061 7265 2063    uploaded are c
+000068e0: 6f6d 7072 6573 7365 6420 6f6e 2d74 6865  ompressed on-the
+000068f0: 2d66 6c79 2069 6e20 6d65 6d6f 7279 2c20  -fly in memory, 
+00006900: 7365 6e74 2074 6f20 4743 532c 2061 6e64  sent to GCS, and
+00006910: 2075 6e63 6f6d 7072 6573 7365 6420 6279   uncompressed by
+00006920: 0a20 2047 4353 2062 6566 6f72 6520 7468  .  GCS before th
+00006930: 6579 2061 7265 2073 746f 7265 642e 2053  ey are stored. S
+00006940: 6565 2022 6773 7574 696c 2068 656c 7020  ee "gsutil help 
+00006950: 6370 2220 666f 7220 6164 6469 7469 6f6e  cp" for addition
+00006960: 616c 2069 6e66 6f72 6d61 7469 6f6e 2e0a  al information..
+00006970: 2d20 5768 656e 2022 7573 655f 6d61 6769  - When "use_magi
+00006980: 6366 696c 653d 5472 7565 2220 6973 2073  cfile=True" is s
+00006990: 6574 2069 6e20 7468 6520 626f 746f 2063  et in the boto c
+000069a0: 6f6e 6669 6720 6669 6c65 2c20 6773 7574  onfig file, gsut
+000069b0: 696c 2077 696c 6c20 6e6f 770a 2020 6170  il will now.  ap
+000069c0: 7065 6e64 2074 6865 2064 6574 6563 7465  pend the detecte
+000069d0: 6420 6368 6172 7365 742c 2069 6620 7072  d charset, if pr
+000069e0: 6573 656e 742c 2074 6f20 7468 6520 6f62  esent, to the ob
+000069f0: 6a65 6374 2773 2043 6f6e 7465 6e74 2d54  ject's Content-T
+00006a00: 7970 6520 6d65 7461 6461 7461 0a20 2066  ype metadata.  f
+00006a10: 6965 6c64 2e20 466f 7220 6578 616d 706c  ield. For exampl
+00006a20: 652c 2061 2043 6f6e 7465 6e74 2d54 7970  e, a Content-Typ
+00006a30: 6520 6d69 6768 7420 6265 2070 6f70 756c  e might be popul
+00006a40: 6174 6564 2077 6974 680a 2020 2274 6578  ated with.  "tex
+00006a50: 742f 6874 6d6c 3b20 6368 6172 7365 743d  t/html; charset=
+00006a60: 7573 2d61 7363 6969 2220 7261 7468 6572  us-ascii" rather
+00006a70: 2074 6861 6e20 7369 6d70 6c79 2022 7465   than simply "te
+00006a80: 7874 2f68 746d 6c22 2e0a 0a42 7567 2046  xt/html"...Bug F
+00006a90: 6978 6573 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d  ixes.-----------
+00006aa0: 2d2d 2d2d 2d2d 2d0a 2d20 496d 7072 6f76  -------.- Improv
+00006ab0: 6564 2065 7272 6f72 2068 616e 646c 696e  ed error handlin
+00006ac0: 6720 616e 6420 6c6f 6767 696e 6720 666f  g and logging fo
+00006ad0: 7220 7570 6c6f 6164 2072 6573 756d 7074  r upload resumpt
+00006ae0: 696f 6e2e 0a2d 2041 6674 6572 2065 6e63  ion..- After enc
+00006af0: 6f75 6e74 6572 696e 6720 6120 5072 6563  ountering a Prec
+00006b00: 6f6e 6469 7469 6f6e 4578 6365 7074 696f  onditionExceptio
+00006b10: 6e2c 2074 6865 2022 6163 6c20 6368 2220  n, the "acl ch" 
+00006b20: 636f 6d6d 616e 6420 7769 6c6c 206e 6f77  command will now
+00006b30: 0a20 2072 652d 6665 7463 6820 7468 6520  .  re-fetch the 
+00006b40: 6f62 6a65 6374 2067 656e 6572 6174 696f  object generatio
+00006b50: 6e20 6265 666f 7265 2072 6574 7279 696e  n before retryin
+00006b60: 672e 0a2d 2046 6978 6564 2069 7373 7565  g..- Fixed issue
+00006b70: 2077 6974 6820 7061 7273 696e 6720 6c69   with parsing li
+00006b80: 6665 6379 636c 6520 636f 6e64 6974 696f  fecycle conditio
+00006b90: 6e73 2077 6865 6e20 7573 696e 6720 7468  ns when using th
+00006ba0: 6520 584d 4c20 4150 492e 0a20 2043 6f6e  e XML API..  Con
+00006bb0: 6469 7469 6f6e 7320 7768 6f73 6520 7661  ditions whose va
+00006bc0: 6c75 6573 2063 6f75 6c64 2062 6520 6576  lues could be ev
+00006bd0: 616c 7561 7465 6420 6279 2050 7974 686f  aluated by Pytho
+00006be0: 6e20 6173 2022 6661 6c73 7922 2028 652e  n as "falsy" (e.
+00006bf0: 672e 2073 6574 7469 6e67 0a20 2061 6e20  g. setting.  an 
+00006c00: 2261 6765 2220 636f 6e64 6974 696f 6e20  "age" condition 
+00006c10: 746f 2074 6865 206e 756d 6265 7220 3020  to the number 0 
+00006c20: 6f72 2022 6973 4c69 7665 2220 746f 2066  or "isLive" to f
+00006c30: 616c 7365 2920 776f 756c 6420 6265 206f  alse) would be o
+00006c40: 6d69 7474 6564 2066 726f 6d0a 2020 7468  mitted from.  th
+00006c50: 6520 6c69 6665 6379 636c 6520 636f 6e66  e lifecycle conf
+00006c60: 6967 7572 6174 696f 6e20 7768 656e 2022  iguration when "
+00006c70: 7072 6566 6572 5f61 7069 3d78 6d6c 2220  prefer_api=xml" 
+00006c80: 7761 7320 7365 7420 696e 2074 6865 2062  was set in the b
+00006c90: 6f74 6f20 636f 6e66 6967 0a20 2066 696c  oto config.  fil
+00006ca0: 652e 204e 6f74 6520 7468 6174 2074 6865  e. Note that the
+00006cb0: 204a 534f 4e20 4150 4920 6973 2070 7265   JSON API is pre
+00006cc0: 6665 7272 6564 2062 7920 6465 6661 756c  ferred by defaul
+00006cd0: 742c 2073 6f20 6d6f 7374 2075 7365 7273  t, so most users
+00006ce0: 2077 6572 650a 2020 756e 6c69 6b65 6c79   were.  unlikely
+00006cf0: 2074 6f20 656e 636f 756e 7465 7220 7468   to encounter th
+00006d00: 6973 2069 7373 7565 2e0a 2d20 466f 7220  is issue..- For 
+00006d10: 636f 6d6d 616e 6473 2074 6861 7420 6665  commands that fe
+00006d20: 7463 6820 6275 636b 6574 2041 434c 7320  tch bucket ACLs 
+00006d30: 6f72 2064 6566 6175 6c74 2041 434c 732c  or default ACLs,
+00006d40: 2077 6865 6e20 7468 6520 7573 6572 2064   when the user d
+00006d50: 6f65 7320 6e6f 740a 2020 6861 7665 2073  oes not.  have s
+00006d60: 746f 7261 6765 2e62 7563 6b65 7473 2e67  torage.buckets.g
+00006d70: 6574 4961 6d50 6f6c 6963 7920 6f6e 2074  etIamPolicy on t
+00006d80: 6865 2047 4353 2062 7563 6b65 742c 2075  he GCS bucket, u
+00006d90: 7369 6e67 2074 6865 2058 4d4c 2041 5049  sing the XML API
+00006da0: 2077 696c 6c0a 2020 6e6f 7720 6265 6861   will.  now beha
+00006db0: 7665 2063 6f6e 7369 7374 656e 746c 7920  ve consistently 
+00006dc0: 7769 7468 2074 6865 204a 534f 4e20 4150  with the JSON AP
+00006dd0: 4920 616e 6420 6469 7370 6c61 7920 4143  I and display AC
+00006de0: 4c2f 6465 6661 756c 7420 4143 4c20 6669  L/default ACL fi
+00006df0: 656c 6473 0a20 2061 7320 656d 7074 792c  elds.  as empty,
+00006e00: 2072 6174 6865 7220 7468 616e 2074 6872   rather than thr
+00006e10: 6f77 696e 6720 6120 436f 6d6d 616e 6445  owing a CommandE
+00006e20: 7863 6570 7469 6f6e 2e0a 0a4f 7468 6572  xception...Other
+00006e30: 2043 6861 6e67 6573 0a2d 2d2d 2d2d 2d2d   Changes.-------
+00006e40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 2d20 5365  -----------.- Se
+00006e50: 7665 7261 6c20 646f 6375 6d65 6e74 6174  veral documentat
+00006e60: 696f 6e20 7570 6461 7465 7320 616e 6420  ion updates and 
+00006e70: 636c 6172 6966 6963 6174 696f 6e73 2e0a  clarifications..
+00006e80: 2d20 5468 6520 2273 6967 6e75 726c 2220  - The "signurl" 
+00006e90: 636f 6d6d 616e 6420 6e6f 7720 7573 6573  command now uses
+00006ea0: 2073 6967 6e61 7475 7265 2056 3420 7369   signature V4 si
+00006eb0: 676e 696e 6720 666f 726d 6174 2074 6f20  gning format to 
+00006ec0: 6765 6e65 7261 7465 2055 524c 732e 0a0a  generate URLs...
+00006ed0: 0a52 656c 6561 7365 2034 2e32 3820 2872  .Release 4.28 (r
+00006ee0: 656c 6561 7365 2064 6174 653a 2032 3031  elease date: 201
+00006ef0: 372d 3130 2d31 3129 0a3d 3d3d 3d3d 3d3d  7-10-11).=======
+00006f00: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00006f10: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00006f20: 0a4e 6577 2066 6561 7475 7265 730a 2d2d  .New features.--
+00006f30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00006f40: 0a2d 2041 6464 6564 206e 6577 6573 7420  .- Added newest 
+00006f50: 7665 7273 696f 6e20 6f66 2074 6865 2042  version of the B
+00006f60: 6f74 6f20 6c69 6272 6172 792c 2077 6869  oto library, whi
+00006f70: 6368 2069 6e63 6c75 6465 7320 7375 7070  ch includes supp
+00006f80: 6f72 7420 666f 7220 7573 696e 670a 2020  ort for using.  
+00006f90: 5369 676e 6174 7572 6520 5665 7273 696f  Signature Versio
+00006fa0: 6e20 3420 746f 2063 6f6e 6e65 6374 2074  n 4 to connect t
+00006fb0: 6f20 5333 2062 7563 6b65 7473 2076 6961  o S3 buckets via
+00006fc0: 2074 6865 2022 7573 652d 7369 6776 3420   the "use-sigv4 
+00006fd0: 3d20 5472 7565 2220 616e 640a 2020 2268  = True" and.  "h
+00006fe0: 6f73 7420 3d20 7333 2e3c 7265 6769 6f6e  ost = s3.<region
+00006ff0: 3e2e 616d 617a 6f6e 6177 732e 636f 6d22  >.amazonaws.com"
+00007000: 2042 6f74 6f20 6f70 7469 6f6e 7320 756e   Boto options un
+00007010: 6465 7220 7468 6520 225b 7333 5d22 2073  der the "[s3]" s
+00007020: 6563 7469 6f6e 2e0a 2d20 4164 6465 6420  ection..- Added 
+00007030: 7375 7070 6f72 7420 666f 7220 5265 7175  support for Requ
+00007040: 6573 7465 7220 5061 7973 2066 756e 6374  ester Pays funct
+00007050: 696f 6e61 6c69 7479 2077 6865 6e20 6d61  ionality when ma
+00007060: 6b69 6e67 2072 6571 7565 7374 7320 746f  king requests to
+00007070: 2047 4353 0a20 2062 7563 6b65 7473 2077   GCS.  buckets w
+00007080: 6974 6820 7468 6973 2066 6561 7475 7265  ith this feature
+00007090: 2065 6e61 626c 6564 2e20 466f 7220 6578   enabled. For ex
+000070a0: 616d 706c 6520 7573 6167 652c 2073 6565  ample usage, see
+000070b0: 2074 6865 2065 6e74 7279 2066 6f72 2022   the entry for "
+000070c0: 2d75 220a 2020 696e 2022 6773 7574 696c  -u".  in "gsutil
+000070d0: 2068 656c 7020 6f70 7469 6f6e 7322 2e20   help options". 
+000070e0: 5265 7175 6573 7465 7220 5061 7973 2069  Requester Pays i
+000070f0: 7320 6375 7272 656e 746c 7920 6f6e 6c79  s currently only
+00007100: 2073 7570 706f 7274 6564 2066 6f72 0a20   supported for. 
+00007110: 2072 6571 7565 7374 7320 7573 696e 6720   requests using 
+00007120: 7468 6520 4743 5320 4a53 4f4e 2041 5049  the GCS JSON API
+00007130: 3b20 584d 4c20 4150 4920 7375 7070 6f72  ; XML API suppor
+00007140: 7420 7769 6c6c 2062 6520 6164 6465 6420  t will be added 
+00007150: 696e 2061 206c 6174 6572 0a20 2076 6572  in a later.  ver
+00007160: 7369 6f6e 2e0a 0a42 7567 2046 6978 6573  sion...Bug Fixes
+00007170: 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  .---------------
+00007180: 2d2d 2d0a 2d20 4669 7865 6420 6973 7375  ---.- Fixed issu
+00007190: 6520 7768 6572 6520 6174 7465 6d70 7469  e where attempti
+000071a0: 6e67 2074 6f20 7072 6573 6572 7665 2041  ng to preserve A
+000071b0: 434c 7320 6279 2075 7369 6e67 2022 2d70  CLs by using "-p
+000071c0: 2220 7769 7468 2063 702f 6d76 2f72 7379  " with cp/mv/rsy
+000071d0: 6e63 0a20 2077 6f75 6c64 2066 6169 6c20  nc.  would fail 
+000071e0: 7768 656e 2074 6865 2064 6573 7469 6e61  when the destina
+000071f0: 7469 6f6e 2069 7320 6120 6c6f 6361 6c20  tion is a local 
+00007200: 6669 6c65 2e0a 2d20 496d 7072 6f76 6564  file..- Improved
+00007210: 2071 7561 6c69 7479 206f 6620 7365 7665   quality of seve
+00007220: 7261 6c20 616d 6269 6775 6f75 7320 6572  ral ambiguous er
+00007230: 726f 7220 6d65 7373 6167 6573 2e0a 0a4f  ror messages...O
+00007240: 7468 6572 2043 6861 6e67 6573 0a2d 2d2d  ther Changes.---
+00007250: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a  ---------------.
+00007260: 2d20 5468 6520 7072 6f78 795f 7264 6e73  - The proxy_rdns
+00007270: 206f 7074 696f 6e20 6973 206e 6f77 2054   option is now T
+00007280: 7275 6520 6279 2064 6566 6175 6c74 2077  rue by default w
+00007290: 6865 6e20 6120 7072 6f78 7920 6973 2073  hen a proxy is s
+000072a0: 6574 2e20 416c 736f 2061 6464 6564 0a20  et. Also added. 
+000072b0: 2042 6f74 6f20 636f 6e66 6967 2066 696c   Boto config fil
+000072c0: 6520 636f 6d6d 656e 7473 2065 7870 6c61  e comments expla
+000072d0: 696e 696e 6720 7468 6174 2067 636c 6f75  ining that gclou
+000072e0: 6420 7072 6f78 7920 6f70 7469 6f6e 732c  d proxy options,
+000072f0: 2069 6620 7072 6573 656e 742c 0a20 2074   if present,.  t
+00007300: 616b 6520 7072 6563 6564 656e 6365 206f  ake precedence o
+00007310: 7665 7220 636f 7272 6573 706f 6e64 696e  ver correspondin
+00007320: 6720 426f 746f 2073 6574 7469 6e67 7320  g Boto settings 
+00007330: 616e 6420 656e 7669 726f 6e6d 656e 7420  and environment 
+00007340: 7661 7269 6162 6c65 0a20 2073 6574 7469  variable.  setti
+00007350: 6e67 732e 0a2d 2046 6f6c 6c6f 7769 6e67  ngs..- Following
+00007360: 2074 6865 2064 6570 7265 6361 7469 6f6e   the deprecation
+00007370: 206f 6620 5079 7468 6f6e 2032 2e36 2073   of Python 2.6 s
+00007380: 7570 706f 7274 2066 6f72 2067 7375 7469  upport for gsuti
+00007390: 6c2c 2063 6f64 6520 7365 6374 696f 6e73  l, code sections
+000073a0: 2074 6861 740a 2020 7765 7265 206f 6e6c   that.  were onl
+000073b0: 7920 7072 6573 656e 7420 746f 2073 7570  y present to sup
+000073c0: 706f 7274 2050 7974 686f 6e20 322e 3620  port Python 2.6 
+000073d0: 6861 7665 2062 6565 6e20 7265 6d6f 7665  have been remove
+000073e0: 642e 0a2d 2053 6576 6572 616c 2064 6f63  d..- Several doc
+000073f0: 756d 656e 7461 7469 6f6e 2075 7064 6174  umentation updat
+00007400: 6573 2061 6e64 2063 6c61 7269 6669 6361  es and clarifica
+00007410: 7469 6f6e 732e 0a0a 0a52 656c 6561 7365  tions....Release
+00007420: 2034 2e32 3720 2872 656c 6561 7365 2064   4.27 (release d
+00007430: 6174 653a 2032 3031 372d 3036 2d32 3929  ate: 2017-06-29)
+00007440: 0a3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  .===============
+00007450: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00007460: 3d3d 3d3d 3d3d 3d3d 0a4e 6577 2066 6561  ========.New fea
+00007470: 7475 7265 730a 2d2d 2d2d 2d2d 2d2d 2d2d  tures.----------
+00007480: 2d2d 2d2d 2d2d 2d2d 0a2d 2057 6865 6e20  --------.- When 
+00007490: 7573 696e 6720 7468 6520 4a53 4f4e 2041  using the JSON A
+000074a0: 5049 2c20 7468 6520 226c 7320 2d4c 2220  PI, the "ls -L" 
+000074b0: 616e 6420 2273 7461 7422 2063 6f6d 6d61  and "stat" comma
+000074c0: 6e64 7320 6e6f 7720 7072 696e 7420 616e  nds now print an
+000074d0: 206f 626a 6563 7427 730a 2020 7374 6f72   object's.  stor
+000074e0: 6167 6520 636c 6173 7320 7570 6461 7465  age class update
+000074f0: 2074 696d 6520 6966 2069 7420 6469 6666   time if it diff
+00007500: 6572 7320 6672 6f6d 2074 6865 206f 626a  ers from the obj
+00007510: 6563 7427 7320 6372 6561 7469 6f6e 2074  ect's creation t
+00007520: 696d 653b 2074 6869 730a 2020 6f63 6375  ime; this.  occu
+00007530: 7273 2077 6865 6e20 7468 6520 7374 6f72  rs when the stor
+00007540: 6167 6520 636c 6173 7320 6861 7320 6265  age class has be
+00007550: 656e 2063 6861 6e67 6564 2064 7565 2074  en changed due t
+00007560: 6f20 7468 6520 6275 636b 6574 2773 206c  o the bucket's l
+00007570: 6966 6563 7963 6c65 0a20 206d 616e 6167  ifecycle.  manag
+00007580: 656d 656e 7420 636f 6e66 6967 7572 6174  ement configurat
+00007590: 696f 6e2e 0a2d 204c 6973 7469 6e67 2061  ion..- Listing a
+000075a0: 2062 7563 6b65 7427 7320 6d65 7461 6461   bucket's metada
+000075b0: 7461 2076 6961 2022 6c73 202d 4c62 2220  ta via "ls -Lb" 
+000075c0: 6e6f 7720 7072 696e 7473 2069 7473 206d  now prints its m
+000075d0: 6574 6167 656e 6572 6174 696f 6e2e 0a0a  etageneration...
+000075e0: 4275 6720 4669 7865 730a 2d2d 2d2d 2d2d  Bug Fixes.------
+000075f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d 2057  ------------.- W
+00007600: 6865 6e20 7370 6563 6966 7969 6e67 2063  hen specifying c
+00007610: 7573 746f 6d20 6d65 7461 6461 7461 2076  ustom metadata v
+00007620: 616c 7565 7320 7573 696e 6720 7468 6520  alues using the 
+00007630: 746f 702d 6c65 7665 6c20 2d68 206f 7074  top-level -h opt
+00007640: 696f 6e2c 2073 7563 680a 2020 7661 6c75  ion, such.  valu
+00007650: 6573 206d 6179 206e 6f77 2069 6e63 6c75  es may now inclu
+00007660: 6465 2075 6e69 636f 6465 2063 6861 7261  de unicode chara
+00007670: 6374 6572 7320 6173 2077 656c 6c20 6173  cters as well as
+00007680: 206d 756c 7469 706c 6520 223a 2220 6368   multiple ":" ch
+00007690: 6172 6163 7465 7273 2e0a 2d20 466f 7220  aracters..- For 
+000076a0: 436c 6f75 6420 5344 4b20 2867 636c 6f75  Cloud SDK (gclou
+000076b0: 6429 2064 6973 7472 6962 7574 696f 6e73  d) distributions
+000076c0: 206f 6620 6773 7574 696c 2c20 6966 2079   of gsutil, if y
+000076d0: 6f75 2068 6176 6520 636f 6e66 6967 7572  ou have configur
+000076e0: 6564 2074 6865 0a20 2043 6c6f 7564 2053  ed the.  Cloud S
+000076f0: 444b 2074 6f20 6e6f 7420 7061 7373 2063  DK to not pass c
+00007700: 7265 6465 6e74 6961 6c73 2074 6f20 6773  redentials to gs
+00007710: 7574 696c 2028 6279 2072 756e 6e69 6e67  util (by running
+00007720: 2022 6763 6c6f 7564 2063 6f6e 6669 6720   "gcloud config 
+00007730: 7365 740a 2020 7061 7373 5f63 7265 6465  set.  pass_crede
+00007740: 6e74 6961 6c73 5f74 6f5f 6773 7574 696c  ntials_to_gsutil
+00007750: 2066 616c 7365 2229 2c20 6773 7574 696c   false"), gsutil
+00007760: 2077 696c 6c20 6e6f 7720 636f 7272 6563   will now correc
+00007770: 746c 7920 776f 726b 2077 6974 680a 2020  tly work with.  
+00007780: 6372 6564 656e 7469 616c 7320 6f62 7461  credentials obta
+00007790: 696e 6564 2076 6961 2022 6773 7574 696c  ined via "gsutil
+000077a0: 2063 6f6e 6669 6722 2e20 5468 6973 2077   config". This w
+000077b0: 6f75 6c64 2070 7265 7669 6f75 736c 7920  ould previously 
+000077c0: 7265 7375 6c74 2069 6e20 616e 0a20 2065  result in an.  e
+000077d0: 7272 6f72 2077 6974 6820 6120 6d65 7373  rror with a mess
+000077e0: 6167 6520 746f 2072 756e 2022 6763 6c6f  age to run "gclo
+000077f0: 7564 2061 7574 6820 6c6f 6769 6e22 2e20  ud auth login". 
+00007800: 4164 6469 7469 6f6e 616c 6c79 2c20 7468  Additionally, th
+00007810: 6520 2267 7375 7469 6c0a 2020 636f 6e66  e "gsutil.  conf
+00007820: 6967 2220 636f 6d6d 616e 6420 6e6f 206c  ig" command no l
+00007830: 6f6e 6765 7220 7072 6f6d 7074 7320 7573  onger prompts us
+00007840: 6572 7320 746f 2072 756e 2022 6763 6c6f  ers to run "gclo
+00007850: 7564 2061 7574 6820 6c6f 6769 6e22 2069  ud auth login" i
+00007860: 6620 7468 6973 0a20 206f 7074 696f 6e20  f this.  option 
+00007870: 6973 2073 6574 2074 6f20 6661 6c73 652e  is set to false.
+00007880: 2054 6869 7320 7368 6f75 6c64 2061 6c6c   This should all
+00007890: 6f77 2073 7769 7463 6869 6e67 2062 6574  ow switching bet
+000078a0: 7765 656e 2073 7461 6e64 2d61 6c6f 6e65  ween stand-alone
+000078b0: 0a20 2067 7375 7469 6c20 696e 7374 616c  .  gsutil instal
+000078c0: 6c61 7469 6f6e 7320 616e 6420 6763 6c6f  lations and gclo
+000078d0: 7564 2d70 6163 6b61 6765 6420 6773 7574  ud-packaged gsut
+000078e0: 696c 2069 6e73 7461 6c6c 6174 696f 6e73  il installations
+000078f0: 206d 6f72 6520 6561 7369 6c79 2e0a 2d20   more easily..- 
+00007900: 5468 6520 636f 6e66 6967 5f66 696c 655f  The config_file_
+00007910: 6c69 7374 2073 6563 7469 6f6e 2069 6e20  list section in 
+00007920: 6465 6275 6720 6f75 7470 7574 206e 6f77  debug output now
+00007930: 2064 6973 706c 6179 7320 6669 6c65 7320   displays files 
+00007940: 696e 2074 6865 206f 7264 6572 0a20 2074  in the order.  t
+00007950: 6861 7420 7468 6579 2061 7265 206c 6f61  hat they are loa
+00007960: 6465 642e 0a0a 4f74 6865 7220 4368 616e  ded...Other Chan
+00007970: 6765 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ges.------------
+00007980: 2d2d 2d2d 2d2d 0a2d 2041 6464 6564 2058  ------.- Added X
+00007990: 4d4c 2073 7570 706f 7274 2066 6f72 2073  ML support for s
+000079a0: 6f6d 6520 636f 6d6d 616e 6473 2077 6869  ome commands whi
+000079b0: 6368 2070 7265 7669 6f75 736c 7920 6f6e  ch previously on
+000079c0: 6c79 2077 6f72 6b65 6420 7669 6120 7468  ly worked via th
+000079d0: 6520 4a53 4f4e 0a20 2041 5049 2028 226c  e JSON.  API ("l
+000079e0: 6966 6563 7963 6c65 2220 616e 6420 2264  ifecycle" and "d
+000079f0: 6566 7374 6f72 6167 6563 6c61 7373 2229  efstorageclass")
+00007a00: 2e0a 2d20 5365 7665 7261 6c20 646f 6375  ..- Several docu
+00007a10: 6d65 6e74 6174 696f 6e20 7570 6461 7465  mentation update
+00007a20: 7320 616e 6420 636c 6172 6966 6963 6174  s and clarificat
+00007a30: 696f 6e73 2e0a 0a0a 5265 6c65 6173 6520  ions....Release 
+00007a40: 342e 3236 2028 7265 6c65 6173 6520 6461  4.26 (release da
+00007a50: 7465 3a20 3230 3137 2d30 352d 3033 290a  te: 2017-05-03).
+00007a60: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00007a70: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00007a80: 3d3d 3d3d 3d3d 3d0a 4e65 7720 6665 6174  =======.New feat
+00007a90: 7572 6573 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d  ures.-----------
+00007aa0: 2d2d 2d2d 2d2d 2d0a 2d20 5468 6520 6370  -------.- The cp
+00007ab0: 2063 6f6d 6d61 6e64 206e 6f77 2073 7570   command now sup
+00007ac0: 706f 7274 7320 7265 6164 696e 6720 6672  ports reading fr
+00007ad0: 6f6d 2061 6e64 2077 7269 7469 6e67 2074  om and writing t
+00007ae0: 6f20 6e61 6d65 6420 7069 7065 732e 0a0a  o named pipes...
+00007af0: 4275 6720 4669 7865 730a 2d2d 2d2d 2d2d  Bug Fixes.------
+00007b00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d 2046  ------------.- F
+00007b10: 6978 6564 2069 7373 7565 2077 6865 7265  ixed issue where
+00007b20: 2074 6162 2063 6f6d 706c 6574 696f 6e20   tab completion 
+00007b30: 7761 736e 2774 2077 6f72 6b69 6e67 2e0a  wasn't working..
+00007b40: 2d20 4669 7865 6420 6973 7375 6520 7768  - Fixed issue wh
+00007b50: 656e 2075 7369 6e67 2074 6865 2058 4d4c  en using the XML
+00007b60: 2041 5049 2077 6865 7265 2067 7375 7469   API where gsuti
+00007b70: 6c20 776f 756c 6420 6661 696c 2074 6f20  l would fail to 
+00007b80: 7061 7273 6520 6275 636b 6574 0a20 206d  parse bucket.  m
+00007b90: 6574 6164 6174 6120 666f 7220 6275 636b  etadata for buck
+00007ba0: 6574 7320 7573 696e 6720 4c69 6665 6379  ets using Lifecy
+00007bb0: 636c 6520 7275 6c65 7320 636f 6e74 6169  cle rules contai
+00007bc0: 6e69 6e67 2074 6865 2053 6574 5374 6f72  ning the SetStor
+00007bd0: 6167 6543 6c61 7373 0a20 2061 6374 696f  ageClass.  actio
+00007be0: 6e20 6f72 204d 6174 6368 6573 5374 6f72  n or MatchesStor
+00007bf0: 6167 6543 6c61 7373 2063 6f6e 6469 7469  ageClass conditi
+00007c00: 6f6e 2e0a 0a4f 7468 6572 2043 6861 6e67  on...Other Chang
+00007c10: 6573 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  es.-------------
+00007c20: 2d2d 2d2d 2d0a 2d20 5265 6d6f 7665 6420  -----.- Removed 
+00007c30: 2d6f 2066 6c61 6720 6672 6f6d 2022 6e6f  -o flag from "no
+00007c40: 7469 6669 6361 7469 6f6e 2063 7265 6174  tification creat
+00007c50: 6522 2063 6f6d 6d61 6e64 2e20 5468 6520  e" command. The 
+00007c60: 7361 6d65 2066 756e 6374 696f 6e61 6c69  same functionali
+00007c70: 7479 2069 730a 2020 6176 6169 6c61 626c  ty is.  availabl
+00007c80: 6520 7769 7468 2074 6865 202d 7020 666c  e with the -p fl
+00007c90: 6167 3b20 7468 6520 2d6f 2066 6c61 6720  ag; the -o flag 
+00007ca0: 6861 6420 6265 656e 206d 6973 7461 6b65  had been mistake
+00007cb0: 6e6c 7920 6164 6465 6420 696e 2061 0a20  nly added in a. 
+00007cc0: 2070 7265 7669 6f75 7320 6368 616e 6765   previous change
+00007cd0: 2e0a 2d20 5265 6d6f 7665 6420 7468 6520  ..- Removed the 
+00007ce0: 616c 7068 6120 6469 7363 6c61 696d 6572  alpha disclaimer
+00007cf0: 2066 726f 6d20 7468 6520 6961 6d20 636f   from the iam co
+00007d00: 6d6d 616e 6420 6865 6c70 2074 6578 742e  mmand help text.
+00007d10: 0a2d 2053 6576 6572 616c 2064 6f63 756d  .- Several docum
+00007d20: 656e 7461 7469 6f6e 2075 7064 6174 6573  entation updates
+00007d30: 2061 6e64 2063 6c61 7269 6669 6361 7469   and clarificati
+00007d40: 6f6e 732e 0a0a 0a52 656c 6561 7365 2034  ons....Release 4
+00007d50: 2e32 3520 2872 656c 6561 7365 2064 6174  .25 (release dat
+00007d60: 653a 2032 3031 372d 3034 2d30 3529 0a3d  e: 2017-04-05).=
+00007d70: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00007d80: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00007d90: 3d3d 3d3d 3d3d 0a4e 6577 2066 6561 7475  ======.New featu
+00007da0: 7265 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  res.------------
+00007db0: 2d2d 2d2d 2d2d 0a2d 2041 6464 6564 2062  ------.- Added b
+00007dc0: 7563 6b65 7420 6c61 6265 6c20 7375 7070  ucket label supp
+00007dd0: 6f72 7420 746f 2067 7375 7469 6c2e 2046  ort to gsutil. F
+00007de0: 6f72 206d 6f72 6520 6465 7461 696c 732c  or more details,
+00007df0: 2073 6565 0a20 2068 7474 7073 3a2f 2f63   see.  https://c
+00007e00: 6c6f 7564 2e67 6f6f 676c 652e 636f 6d2f  loud.google.com/
+00007e10: 636f 6d70 7574 652f 646f 6373 2f6c 6162  compute/docs/lab
+00007e20: 656c 2d6f 722d 7461 672d 7265 736f 7572  el-or-tag-resour
+00007e30: 6365 732e 0a2d 2041 6464 6564 2074 6865  ces..- Added the
+00007e40: 206c 6162 656c 2063 6f6d 6d61 6e64 2c20   label command, 
+00007e50: 7768 6963 6820 6361 6e20 6265 2075 7365  which can be use
+00007e60: 6420 746f 2067 6574 2c20 7365 742c 2061  d to get, set, a
+00007e70: 6e64 2063 6861 6e67 6520 7468 6520 6c61  nd change the la
+00007e80: 6265 6c73 0a20 2066 6f72 2061 6e20 6578  bels.  for an ex
+00007e90: 6973 7469 6e67 2062 7563 6b65 7420 286b  isting bucket (k
+00007ea0: 6e6f 776e 2061 7320 2274 6167 7322 2066  nown as "tags" f
+00007eb0: 6f72 2053 3320 6275 636b 6574 7329 2e0a  or S3 buckets)..
+00007ec0: 2d20 4c69 7374 696e 6720 6120 6275 636b  - Listing a buck
+00007ed0: 6574 2076 6961 2022 6773 7574 696c 206c  et via "gsutil l
+00007ee0: 7320 2d4c 6222 206e 6f77 2061 6c73 6f20  s -Lb" now also 
+00007ef0: 6469 7370 6c61 7973 2074 6865 206c 6162  displays the lab
+00007f00: 656c 732c 2069 6620 616e 790a 2020 6578  els, if any.  ex
+00007f10: 6973 742c 2074 6861 7420 6172 6520 6375  ist, that are cu
+00007f20: 7272 656e 746c 7920 7365 7420 6f6e 2069  rrently set on i
+00007f30: 742e 0a0a 0a52 656c 6561 7365 2034 2e32  t....Release 4.2
+00007f40: 3420 2872 656c 6561 7365 2064 6174 653a  4 (release date:
+00007f50: 2032 3031 372d 3033 2d32 3729 0a3d 3d3d   2017-03-27).===
+00007f60: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00007f70: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00007f80: 3d3d 3d3d 0a4e 6577 2046 6561 7475 7265  ====.New Feature
+00007f90: 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  s.--------------
+00007fa0: 2d2d 2d2d 0a2d 2041 6464 6564 2073 7570  ----.- Added sup
+00007fb0: 706f 7274 2066 6f72 2063 6f6e 6669 6775  port for configu
+00007fc0: 7269 6e67 2047 4353 2043 6c6f 7564 2050  ring GCS Cloud P
+00007fd0: 7562 2f53 7562 206e 6f74 6966 6963 6174  ub/Sub notificat
+00007fe0: 696f 6e73 2e20 466f 7220 6d6f 7265 0a20  ions. For more. 
+00007ff0: 2064 6574 6169 6c73 2c20 7365 6520 6874   details, see ht
+00008000: 7470 733a 2f2f 636c 6f75 642e 676f 6f67  tps://cloud.goog
+00008010: 6c65 2e63 6f6d 2f73 746f 7261 6765 2f64  le.com/storage/d
+00008020: 6f63 732f 7075 6273 7562 2d6e 6f74 6966  ocs/pubsub-notif
+00008030: 6963 6174 696f 6e73 2e0a 2d20 4164 6465  ications..- Adde
+00008040: 6420 7375 7070 6f72 7420 666f 7220 7370  d support for sp
+00008050: 6563 6966 7969 6e67 2063 616e 6e65 6420  ecifying canned 
+00008060: 4143 4c73 2077 6865 6e20 7573 696e 6720  ACLs when using 
+00008070: 7468 6520 7273 796e 6320 636f 6d6d 616e  the rsync comman
+00008080: 642e 0a0a 4275 6720 4669 7865 730a 2d2d  d...Bug Fixes.--
+00008090: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000080a0: 0a2d 2046 6978 6564 2061 2062 7567 2077  .- Fixed a bug w
+000080b0: 6865 7265 2065 7272 6f72 206d 6573 7361  here error messa
+000080c0: 6765 7320 6162 6f75 7420 696e 7661 6c69  ges about invali
+000080d0: 6420 6f62 6a65 6374 206e 616d 6573 2064  d object names d
+000080e0: 6964 206e 6f74 2063 6f72 7265 6374 6c79  id not correctly
+000080f0: 0a20 2064 6973 706c 6179 2074 6865 2070  .  display the p
+00008100: 726f 626c 656d 6174 6963 206f 626a 6563  roblematic objec
+00008110: 7420 6e61 6d65 2e0a 0a0a 5265 6c65 6173  t name....Releas
+00008120: 6520 342e 3233 2028 7265 6c65 6173 6520  e 4.23 (release 
+00008130: 6461 7465 3a20 3230 3137 2d30 332d 3039  date: 2017-03-09
+00008140: 290a 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ).==============
+00008150: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00008160: 3d3d 3d3d 3d3d 3d3d 3d0a 4275 6720 4669  =========.Bug Fi
+00008170: 7865 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  xes.------------
+00008180: 2d2d 2d2d 2d2d 0a2d 2046 6978 6564 2022  ------.- Fixed "
+00008190: 7265 6665 7265 6e63 6564 2062 6566 6f72  referenced befor
+000081a0: 6520 6173 7369 676e 6d65 6e74 2220 6572  e assignment" er
+000081b0: 726f 7220 696e 2073 6f6d 6520 636f 7079  ror in some copy
+000081c0: 5f68 656c 7065 7220 6578 6365 7074 696f  _helper exceptio
+000081d0: 6e73 2066 6f72 0a20 2072 6573 756d 6162  ns for.  resumab
+000081e0: 6c65 2075 706c 6f61 6473 2061 6e64 206e  le uploads and n
+000081f0: 6f6e 2d72 6573 756d 6162 6c65 2063 6c6f  on-resumable clo
+00008200: 7564 2d74 6f2d 6c6f 6361 6c20 646f 776e  ud-to-local down
+00008210: 6c6f 6164 732e 0a2d 2054 6865 2073 6574  loads..- The set
+00008220: 6d65 7461 2063 6f6d 6d61 6e64 206e 6f77  meta command now
+00008230: 2070 726f 7065 726c 7920 7375 7070 6f72   properly suppor
+00008240: 7473 2063 6173 6520 7365 6e73 6974 6976  ts case sensitiv
+00008250: 6974 7920 696e 2063 7573 746f 6d20 6d65  ity in custom me
+00008260: 7461 6461 7461 0a20 206b 6579 7320 7768  tadata.  keys wh
+00008270: 656e 2075 7369 6e67 2074 6865 204a 534f  en using the JSO
+00008280: 4e20 4150 492e 0a2d 2046 6978 6564 2061  N API..- Fixed a
+00008290: 2072 6573 6f75 7263 6520 6c65 616b 2061   resource leak a
+000082a0: 6666 6563 7469 6e67 2057 696e 646f 7773  ffecting Windows
+000082b0: 2069 6e20 6361 7365 7320 7768 6572 6520   in cases where 
+000082c0: 7369 6e67 6c65 2d70 726f 6365 7373 2c0a  single-process,.
+000082d0: 2020 6d75 6c74 6974 6872 6561 6465 6420    multithreaded 
+000082e0: 7061 7261 6c6c 656c 6973 6d20 6973 2075  parallelism is u
+000082f0: 7365 6420 7468 6174 2077 6f75 6c64 2072  sed that would r
+00008300: 6573 756c 7420 696e 2061 6e20 4f53 4572  esult in an OSEr
+00008310: 726f 7220 7769 7468 2074 6865 0a20 206d  ror with the.  m
+00008320: 6573 7361 6765 2022 546f 6f20 6d61 6e79  essage "Too many
+00008330: 206f 7065 6e20 6669 6c65 7322 2e0a 2d20   open files"..- 
+00008340: 4669 7865 6420 4854 5450 4572 726f 7220  Fixed HTTPError 
+00008350: 696e 6974 6961 6c69 7a61 7469 6f6e 2066  initialization f
+00008360: 6169 6c75 7265 2069 6e20 7369 676e 7572  ailure in signur
+00008370: 6c20 636f 6d6d 616e 642e 0a2d 2046 6978  l command..- Fix
+00008380: 6564 2073 6967 6e75 726c 2069 7373 7565  ed signurl issue
+00008390: 2077 6865 7265 2061 7474 656d 7074 696e   where attemptin
+000083a0: 6720 746f 2076 616c 6964 6174 6520 7368  g to validate sh
+000083b0: 6f72 742d 6c69 7665 6420 5552 4c73 206f  ort-lived URLs o
+000083c0: 6e20 6120 736c 6f77 0a20 2063 6f6e 6e65  n a slow.  conne
+000083d0: 6374 696f 6e20 776f 756c 6420 6661 696c  ction would fail
+000083e0: 2062 6563 6175 7365 206f 6620 5552 4c20   because of URL 
+000083f0: 6578 7069 7261 7469 6f6e 2e0a 2d20 4669  expiration..- Fi
+00008400: 7865 6420 6120 6275 6720 7768 6572 6520  xed a bug where 
+00008410: 6370 202d 7220 776f 756c 6420 6e6f 7420  cp -r would not 
+00008420: 7072 6f70 6572 6c79 2072 6573 6f6c 7665  properly resolve
+00008430: 2077 696c 6463 6172 6473 2066 6f72 0a20   wildcards for. 
+00008440: 2063 6c6f 7564 2d74 6f2d 636c 6f75 6420   cloud-to-cloud 
+00008450: 636f 7069 6573 2e0a 2d20 4669 7865 6420  copies..- Fixed 
+00008460: 6120 6275 6720 7768 6572 6520 6370 202d  a bug where cp -
+00008470: 6520 2d72 2077 6f75 6c64 2063 6f70 7920  e -r would copy 
+00008480: 7379 6d6c 696e 6b73 2e0a 2d20 4669 7865  symlinks..- Fixe
+00008490: 6420 6120 6275 6720 7768 6572 6520 6370  d a bug where cp
+000084a0: 202d 5020 776f 756c 6420 6661 696c 206f   -P would fail o
+000084b0: 6e20 5769 6e64 6f77 732e 0a2d 2046 6978  n Windows..- Fix
+000084c0: 6564 2061 2062 7567 2077 6865 7265 2076  ed a bug where v
+000084d0: 6572 7369 6f6e 202d 6c20 6d69 6768 7420  ersion -l might 
+000084e0: 6e6f 7420 7368 6f77 2061 6c6c 2062 6f74  not show all bot
+000084f0: 6f20 636f 6e66 6967 7572 6174 696f 6e20  o configuration 
+00008500: 6669 6c65 732e 0a2d 2052 756e 6e69 6e67  files..- Running
+00008510: 2070 6572 6664 6961 6720 6e6f 7720 6f6e   perfdiag now on
+00008520: 6c79 206c 6973 7473 2074 6865 206f 626a  ly lists the obj
+00008530: 6563 7473 2074 6861 7420 7765 7265 2063  ects that were c
+00008540: 7265 6174 6564 2062 7920 7468 6174 2072  reated by that r
+00008550: 756e 206f 660a 2020 7065 7266 6469 6167  un of.  perfdiag
+00008560: 2e20 5468 6973 2066 6978 6573 2061 6e20  . This fixes an 
+00008570: 6973 7375 6520 7768 6572 6520 7275 6e6e  issue where runn
+00008580: 696e 6720 7065 7266 6469 6167 2061 6761  ing perfdiag aga
+00008590: 696e 7374 2061 6e20 6578 6973 7469 6e67  inst an existing
+000085a0: 0a20 2062 7563 6b65 7420 7769 7468 206d  .  bucket with m
+000085b0: 616e 7920 6f62 6a65 6374 7320 696e 2069  any objects in i
+000085c0: 7420 636f 756c 6420 7461 6b65 2061 206c  t could take a l
+000085d0: 6f6e 6720 7469 6d65 2e0a 0a0a 4f74 6865  ong time....Othe
+000085e0: 7220 4368 616e 6765 730a 2d2d 2d2d 2d2d  r Changes.------
+000085f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d 2053  ------------.- S
+00008600: 696d 706c 6966 6965 6420 7061 7261 6c6c  implified parall
+00008610: 656c 6973 6d20 7768 656e 2075 7369 6e67  elism when using
+00008620: 2061 2073 696e 676c 6520 7072 6f63 6573   a single proces
+00008630: 7320 7769 7468 206d 756c 7469 706c 6520  s with multiple 
+00008640: 7468 7265 6164 732e 0a20 2057 6974 6820  threads..  With 
+00008650: 7468 6973 2063 6861 6e67 652c 2067 7375  this change, gsu
+00008660: 7469 6c20 7769 6c6c 2073 7061 776e 2061  til will spawn a
+00008670: 206e 6577 2074 6872 6561 6420 706f 6f6c   new thread pool
+00008680: 2070 6572 206c 6576 656c 206f 660a 2020   per level of.  
+00008690: 7061 7261 6c6c 656c 6973 6d2e 2041 7320  parallelism. As 
+000086a0: 616e 2065 7861 6d70 6c65 2c20 6966 2079  an example, if y
+000086b0: 6f75 2073 7065 6369 6679 2074 6861 7420  ou specify that 
+000086c0: 796f 7520 7761 6e74 2061 0a20 2070 6172  you want a.  par
+000086d0: 656c 6c65 6c5f 7468 7265 6164 5f63 6f75  ellel_thread_cou
+000086e0: 6e74 206f 6620 3234 2c20 7468 6973 2077  nt of 24, this w
+000086f0: 696c 6c20 7265 7375 6c74 2069 6e20 3234  ill result in 24
+00008700: 2077 6f72 6b65 7220 7468 7265 6164 732c   worker threads,
+00008710: 2065 7863 6570 740a 2020 7768 656e 2079   except.  when y
+00008720: 6f75 2772 6520 7573 696e 6720 7061 7261  ou're using para
+00008730: 6c6c 656c 2063 6f6d 706f 7369 7465 2075  llel composite u
+00008740: 706c 6f61 6473 206f 7220 736c 6963 6564  ploads or sliced
+00008750: 2064 6f77 6e6c 6f61 6473 2c20 696e 2077   downloads, in w
+00008760: 6869 6368 0a20 2063 6173 6520 3438 2028  hich.  case 48 (
+00008770: 3234 202a 2032 2920 776f 726b 6572 2074  24 * 2) worker t
+00008780: 6872 6561 6473 2077 696c 6c20 6265 2075  hreads will be u
+00008790: 7365 642e 0a2d 2045 7874 656e 6465 6420  sed..- Extended 
+000087a0: 7468 6520 6561 726c 7920 6465 6c65 7469  the early deleti
+000087b0: 6f6e 2077 6172 6e69 6e67 2074 6872 6573  on warning thres
+000087c0: 686f 6c64 2077 6865 6e20 6d6f 7669 6e67  hold when moving
+000087d0: 2043 6f6c 646c 696e 6520 6f62 6a65 6374   Coldline object
+000087e0: 730a 2020 746f 2039 3020 6461 7973 2061  s.  to 90 days a
+000087f0: 6674 6572 206f 626a 6563 7420 6372 6561  fter object crea
+00008800: 7469 6f6e 2e0a 2d20 496d 7072 6f76 6564  tion..- Improved
+00008810: 2073 6576 6572 616c 2065 7272 6f72 206d   several error m
+00008820: 6573 7361 6765 7320 616e 6420 7761 726e  essages and warn
+00008830: 696e 6773 2e0a 2d20 5365 7665 7261 6c20  ings..- Several 
+00008840: 646f 6375 6d65 6e74 6174 696f 6e20 7570  documentation up
+00008850: 6461 7465 7320 616e 6420 636c 6172 6966  dates and clarif
+00008860: 6963 6174 696f 6e73 2e0a 0a52 656c 6561  ications...Relea
+00008870: 7365 2034 2e32 3220 2872 656c 6561 7365  se 4.22 (release
+00008880: 2064 6174 653a 2032 3031 362d 3130 2d32   date: 2016-10-2
+00008890: 3029 0a3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  0).=============
+000088a0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+000088b0: 3d3d 3d3d 3d3d 3d3d 3d3d 0a4e 6577 2066  ==========.New f
+000088c0: 6561 7475 7265 730a 2d2d 2d2d 2d2d 2d2d  eatures.--------
+000088d0: 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d 2041 6464  ----------.- Add
+000088e0: 6564 2070 6572 2d6f 626a 6563 7420 7374  ed per-object st
+000088f0: 6f72 6167 6520 636c 6173 7320 6675 6e63  orage class func
+00008900: 7469 6f6e 616c 6974 7920 746f 2067 7375  tionality to gsu
+00008910: 7469 6c2e 2046 6f72 206d 6f72 6520 6465  til. For more de
+00008920: 7461 696c 732c 2073 6565 0a20 2068 7474  tails, see.  htt
+00008930: 7073 3a2f 2f63 6c6f 7564 2e67 6f6f 676c  ps://cloud.googl
+00008940: 652e 636f 6d2f 7374 6f72 6167 652f 646f  e.com/storage/do
+00008950: 6373 2f70 6572 2d6f 626a 6563 742d 7374  cs/per-object-st
+00008960: 6f72 6167 652d 636c 6173 732e 0a2d 2041  orage-class..- A
+00008970: 6464 6564 2074 6865 2064 6566 7374 6f72  dded the defstor
+00008980: 6167 6563 6c61 7373 2063 6f6d 6d61 6e64  ageclass command
+00008990: 2c20 7768 6963 6820 6361 6e20 6265 2075  , which can be u
+000089a0: 7365 6420 746f 2067 6574 2061 6e64 2073  sed to get and s
+000089b0: 6574 2061 6e0a 2020 6578 6973 7469 6e67  et an.  existing
+000089c0: 2062 7563 6b65 7427 7320 6465 6661 756c   bucket's defaul
+000089d0: 7420 7374 6f72 6167 6520 636c 6173 732e  t storage class.
+000089e0: 0a2d 2054 6865 2063 702c 206d 762c 2061  .- The cp, mv, a
+000089f0: 6e64 2072 6577 7269 7465 2063 6f6d 6d61  nd rewrite comma
+00008a00: 6e64 7320 6e6f 7720 7375 7070 6f72 7420  nds now support 
+00008a10: 7468 6520 222d 7322 206f 7074 696f 6e2c  the "-s" option,
+00008a20: 2061 6c6c 6f77 696e 6720 7573 6572 730a   allowing users.
+00008a30: 2020 746f 2073 7065 6369 6679 2074 6865    to specify the
+00008a40: 2073 746f 7261 6765 2063 6c61 7373 2066   storage class f
+00008a50: 6f72 2064 6573 7469 6e61 7469 6f6e 206f  or destination o
+00008a60: 626a 6563 7428 7329 2e20 5768 656e 206e  bject(s). When n
+00008a70: 6f20 7374 6f72 6167 6520 636c 6173 730a  o storage class.
+00008a80: 2020 6973 2073 7065 6369 6669 6564 2c20    is specified, 
+00008a90: 7468 6520 6f62 6a65 6374 2773 2073 746f  the object's sto
+00008aa0: 7261 6765 2063 6c61 7373 2077 696c 6c20  rage class will 
+00008ab0: 6265 2061 7373 6967 6e65 6420 6672 6f6d  be assigned from
+00008ac0: 2065 6974 6865 7220 6974 730a 2020 6275   either its.  bu
+00008ad0: 636b 6574 2773 2064 6566 6175 6c74 2073  cket's default s
+00008ae0: 746f 7261 6765 2063 6c61 7373 2028 6370  torage class (cp
+00008af0: 2f6d 7620 636f 6d6d 616e 6473 2920 6f72  /mv commands) or
+00008b00: 2074 6865 2073 6f75 7263 6520 6f62 6a65   the source obje
+00008b10: 6374 2773 0a20 2073 746f 7261 6765 2063  ct's.  storage c
+00008b20: 6c61 7373 2028 7265 7772 6974 6520 636f  lass (rewrite co
+00008b30: 6d6d 616e 6429 2e0a 0a42 7567 2046 6978  mmand)...Bug Fix
+00008b40: 6573 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  es.-------------
+00008b50: 2d2d 2d2d 2d0a 2d20 4669 7865 6420 6120  -----.- Fixed a 
+00008b60: 6275 6720 696e 2050 4f53 4958 2070 7265  bug in POSIX pre
+00008b70: 7365 7276 6174 696f 6e20 666f 7220 7468  servation for th
+00008b80: 6520 6370 2061 6e64 206d 7620 636f 6d6d  e cp and mv comm
+00008b90: 616e 6473 2077 6865 7265 2050 4f53 4958  ands where POSIX
+00008ba0: 0a20 2061 7474 7269 6275 7465 7320 7765  .  attributes we
+00008bb0: 7265 206e 6f74 2070 726f 7061 6761 7465  re not propagate
+00008bc0: 6420 746f 2063 6c6f 7564 206f 626a 6563  d to cloud objec
+00008bd0: 7473 2c20 6576 656e 2077 6865 6e20 7468  ts, even when th
+00008be0: 6520 2d50 2066 6c61 6720 7761 730a 2020  e -P flag was.  
+00008bf0: 7072 6573 656e 742e 0a2d 2046 6978 6564  present..- Fixed
+00008c00: 2061 2062 7567 2069 6e20 7365 746d 6574   a bug in setmet
+00008c10: 6120 7768 6572 6520 7265 6d6f 7669 6e67  a where removing
+00008c20: 2063 7573 746f 6d20 6d65 7461 6461 7461   custom metadata
+00008c30: 2077 6f75 6c64 2061 6464 2061 6e0a 2020   would add an.  
+00008c40: 656d 7074 792d 7374 7269 6e67 2076 616c  empty-string val
+00008c50: 7565 2069 6620 7468 6520 6b65 7920 6469  ue if the key di
+00008c60: 6420 6e6f 7420 616c 7265 6164 7920 6578  d not already ex
+00008c70: 6973 742e 0a2d 2043 6f6e 7465 6e74 2d54  ist..- Content-T
+00008c80: 7970 6520 6973 206e 6f77 206f 6274 6169  ype is now obtai
+00008c90: 6e65 6420 6672 6f6d 2073 796d 6c69 6e6b  ned from symlink
+00008ca0: 2074 6172 6765 7473 2c20 7261 7468 6572   targets, rather
+00008cb0: 2074 6861 6e20 7379 6d6c 696e 6b73 0a20   than symlinks. 
+00008cc0: 2074 6865 6d73 656c 7665 732c 2077 6865   themselves, whe
+00008cd0: 6e20 7468 6520 7573 655f 6d61 6769 6366  n the use_magicf
+00008ce0: 696c 6520 6f70 7469 6f6e 2069 7320 7365  ile option is se
+00008cf0: 7420 696e 2074 6865 202e 626f 746f 2063  t in the .boto c
+00008d00: 6f6e 6669 6775 7261 7469 6f6e 0a20 2066  onfiguration.  f
+00008d10: 696c 652e 0a0a 4f74 6865 7220 4368 616e  ile...Other Chan
+00008d20: 6765 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ges.------------
+00008d30: 2d2d 2d2d 2d2d 0a2d 2041 6e61 6c79 7469  ------.- Analyti
+00008d40: 6373 2072 6570 6f72 7469 6e67 206e 6f77  cs reporting now
+00008d50: 2069 6e63 6c75 6465 7320 7065 7266 6f72   includes perfor
+00008d60: 6d61 6e63 6520 6d65 7472 6963 7320 7375  mance metrics su
+00008d70: 6368 2061 7320 6176 6572 6167 650a 2020  ch as average.  
+00008d80: 7468 726f 7567 6870 7574 2061 6e64 2074  throughput and t
+00008d90: 6872 6561 6420 6964 6c65 2074 696d 652e  hread idle time.
+00008da0: 0a2d 2054 6865 2069 616d 2073 6574 2063  .- The iam set c
+00008db0: 6f6d 6d61 6e64 206e 6f77 2073 7570 706f  ommand now suppo
+00008dc0: 7274 7320 6120 2d65 206f 7074 696f 6e20  rts a -e option 
+00008dd0: 746f 2073 7065 6369 6679 2061 6e20 6574  to specify an et
+00008de0: 6167 2070 7265 636f 6e64 6974 696f 6e0a  ag precondition.
+00008df0: 2020 6368 6563 6b2e 2054 6865 2049 414d    check. The IAM
+00008e00: 2070 6f6c 6963 7920 6669 6c65 2072 6574   policy file ret
+00008e10: 7572 6e65 6420 6279 2069 616d 2067 6574  urned by iam get
+00008e20: 2061 6e64 2075 7365 6420 6279 2069 616d   and used by iam
+00008e30: 2073 6574 2068 6173 2061 6c73 6f0a 2020   set has also.  
+00008e40: 6265 656e 2061 6c74 6572 6564 2074 6f20  been altered to 
+00008e50: 696e 636c 7564 6520 7468 6973 2066 6965  include this fie
+00008e60: 6c64 2e0a 2d20 4465 6661 756c 7420 6c69  ld..- Default li
+00008e70: 6d69 7420 666f 7220 6d61 7820 6e75 6d62  mit for max numb
+00008e80: 6572 206f 6620 7072 6f63 6573 7365 7320  er of processes 
+00008e90: 6368 616e 6765 6420 746f 2036 342e 0a2d  changed to 64..-
+00008ea0: 2053 6576 6572 616c 2064 6f63 756d 656e   Several documen
+00008eb0: 7461 7469 6f6e 2075 7064 6174 6573 2061  tation updates a
+00008ec0: 6e64 2063 6c61 7269 6669 6361 7469 6f6e  nd clarification
+00008ed0: 732e 0a0a 5265 6c65 6173 6520 342e 3231  s...Release 4.21
+00008ee0: 2028 7265 6c65 6173 6520 6461 7465 3a20   (release date: 
+00008ef0: 3230 3136 2d30 382d 3136 290a 3d3d 3d3d  2016-08-16).====
+00008f00: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00008f10: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00008f20: 3d3d 3d0a 4e65 7720 4665 6174 7572 6573  ===.New Features
+00008f30: 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  .---------------
+00008f40: 2d2d 2d0a 2d20 5468 6520 636f 6e73 6f6c  ---.- The consol
+00008f50: 6520 6f75 7470 7574 2066 6f72 206d 616e  e output for man
+00008f60: 7920 636f 6d6d 616e 6473 2068 6173 2062  y commands has b
+00008f70: 6565 6e20 696d 7072 6f76 6564 2074 6f20  een improved to 
+00008f80: 6469 7370 6c61 790a 2020 636f 6d6d 616e  display.  comman
+00008f90: 6420 7072 6f67 7265 7373 2e0a 2d20 5468  d progress..- Th
+00008fa0: 6520 6370 2c20 6d76 2c20 616e 6420 7273  e cp, mv, and rs
+00008fb0: 796e 6320 636f 6d6d 616e 6473 206e 6f77  ync commands now
+00008fc0: 2073 7570 706f 7274 2061 202d 5020 6f70   support a -P op
+00008fd0: 7469 6f6e 2074 6861 7420 7072 6573 6572  tion that preser
+00008fe0: 7665 730a 2020 504f 5349 5820 6669 6c65  ves.  POSIX file
+00008ff0: 2061 7474 7269 6275 7465 7320 6672 6f6d   attributes from
+00009000: 2074 6865 2073 6f75 7263 652e 2043 7572   the source. Cur
+00009010: 7265 6e74 6c79 2c20 6d6f 6465 2c20 6769  rently, mode, gi
+00009020: 642c 2075 6964 2c0a 2020 6174 696d 652c  d, uid,.  atime,
+00009030: 2061 6e64 206d 7469 6d65 2061 7474 7269   and mtime attri
+00009040: 6275 7465 7320 6172 6520 7375 7070 6f72  butes are suppor
+00009050: 7465 6420 666f 7220 7570 6c6f 6164 732c  ted for uploads,
+00009060: 2064 6f77 6e6c 6f61 6473 2c0a 2020 616e   downloads,.  an
+00009070: 6420 636f 7069 6573 2e0a 2d20 6773 7574  d copies..- gsut
+00009080: 696c 2063 616e 206e 6f77 206f 7074 696f  il can now optio
+00009090: 6e61 6c6c 7920 7265 706f 7274 2061 6e6f  nally report ano
+000090a0: 6e79 6d6f 7573 2075 7361 6765 2073 7461  nymous usage sta
+000090b0: 7469 7374 6963 7320 7468 6174 2068 656c  tistics that hel
+000090c0: 700a 2020 6773 7574 696c 2064 6576 656c  p.  gsutil devel
+000090d0: 6f70 6572 7320 696d 7072 6f76 6520 7468  opers improve th
+000090e0: 6520 746f 6f6c 2e20 466f 7220 6e6f 6e2d  e tool. For non-
+000090f0: 6763 6c6f 7564 2064 6973 7472 6962 7574  gcloud distribut
+00009100: 696f 6e73 2c0a 2020 7072 6f6d 7074 7320  ions,.  prompts 
+00009110: 6861 7665 2062 6565 6e20 6164 6465 6420  have been added 
+00009120: 746f 2074 6865 2063 6f6e 6669 6720 616e  to the config an
+00009130: 6420 7570 6461 7465 2063 6f6d 6d61 6e64  d update command
+00009140: 732e 2050 726f 6d70 7473 2063 616e 0a20  s. Prompts can. 
+00009150: 2062 6520 6469 7361 626c 6564 2076 6961   be disabled via
+00009160: 2074 6865 2064 6973 6162 6c65 5f61 6e61   the disable_ana
+00009170: 6c79 7469 6373 5f70 726f 6d70 7420 7661  lytics_prompt va
+00009180: 6c75 6520 696e 2074 6865 202e 626f 746f  lue in the .boto
+00009190: 0a20 2063 6f6e 6669 6775 7261 7469 6f6e  .  configuration
+000091a0: 2066 696c 652e 0a2d 2041 6464 6564 2074   file..- Added t
+000091b0: 6865 2069 616d 2063 6f6d 6d6d 616e 642c  he iam commmand,
+000091c0: 2077 6869 6368 2063 616e 2062 6520 7573   which can be us
+000091d0: 6564 2074 6f20 7365 7420 4941 4d20 706f  ed to set IAM po
+000091e0: 6c69 6369 6573 206f 6e0a 2020 476f 6f67  licies on.  Goog
+000091f0: 6c65 2043 6c6f 7564 2053 746f 7261 6765  le Cloud Storage
+00009200: 2062 7563 6b65 7473 2061 6e64 206f 626a   buckets and obj
+00009210: 6563 7473 2e20 5468 6973 2066 6561 7475  ects. This featu
+00009220: 7265 2069 7320 6375 7272 656e 746c 7920  re is currently 
+00009230: 696e 0a20 2061 6c70 6861 2061 6e64 2072  in.  alpha and r
+00009240: 6571 7569 7265 7320 6120 7361 6665 6c69  equires a safeli
+00009250: 7374 2061 7070 6c69 6361 7469 6f6e 2074  st application t
+00009260: 6f20 7573 6520 6974 202d 2073 6565 0a20  o use it - see. 
+00009270: 2022 6773 7574 696c 2068 656c 7020 6961   "gsutil help ia
+00009280: 6d22 2066 6f72 2020 6465 7461 696c 732e  m" for  details.
+00009290: 0a2d 2054 6865 2068 6173 6820 636f 6d6d  .- The hash comm
+000092a0: 616e 6420 6e6f 7720 7375 7070 6f72 7473  and now supports
+000092b0: 2072 6574 7269 6576 696e 6720 6861 7368   retrieving hash
+000092c0: 6573 2066 6f72 2063 6c6f 7564 206f 626a  es for cloud obj
+000092d0: 6563 7473 2e0a 0a42 7567 2046 6978 6573  ects...Bug Fixes
+000092e0: 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  .---------------
+000092f0: 2d2d 2d0a 2d20 4669 7865 6420 6120 6275  ---.- Fixed a bu
+00009300: 6720 7768 6572 6520 7273 796e 6320 2d65  g where rsync -e
+00009310: 202d 7220 636f 756c 6420 6661 696c 2066   -r could fail f
+00009320: 6f72 2073 7562 6469 7265 6374 6f72 6965  or subdirectorie
+00009330: 7320 7769 7468 0a20 2062 726f 6b65 6e20  s with.  broken 
+00009340: 7379 6d6c 696e 6b73 2e0a 2d20 4669 7865  symlinks..- Fixe
+00009350: 6420 616e 2061 6363 6573 7320 6572 726f  d an access erro
+00009360: 7220 7768 656e 2069 6e74 6572 6163 7469  r when interacti
+00009370: 6e67 2077 6974 6820 5333 2075 7365 722d  ng with S3 user-
+00009380: 7370 6563 6966 6963 0a20 2064 6972 6563  specific.  direc
+00009390: 746f 7269 6573 2e0a 0a4f 7468 6572 2043  tories...Other C
+000093a0: 6861 6e67 6573 0a2d 2d2d 2d2d 2d2d 2d2d  hanges.---------
+000093b0: 2d2d 2d2d 2d2d 2d2d 2d0a 2d20 5570 6461  ---------.- Upda
+000093c0: 7465 6420 626f 746f 206c 6962 7261 7279  ted boto library
+000093d0: 2064 6570 656e 6465 6e63 7920 746f 2032   dependency to 2
+000093e0: 2e34 322e 302e 0a0a 5265 6c65 6173 6520  .42.0...Release 
+000093f0: 342e 3230 2028 7265 6c65 6173 6520 6461  4.20 (release da
+00009400: 7465 3a20 3230 3136 2d30 372d 3230 290a  te: 2016-07-20).
+00009410: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00009420: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00009430: 3d3d 3d3d 3d3d 3d0a 4e65 7720 4665 6174  =======.New Feat
+00009440: 7572 6573 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d  ures.-----------
+00009450: 2d2d 2d2d 2d2d 2d0a 2d20 6773 7574 696c  -------.- gsutil
+00009460: 206e 6f77 206f 7574 7075 7473 2061 206d   now outputs a m
+00009470: 6573 7361 6765 2074 6861 7420 6573 7469  essage that esti
+00009480: 6d61 7465 7320 7468 6520 746f 7461 6c20  mates the total 
+00009490: 6e75 6d62 6572 206f 6620 6f62 6a65 6374  number of object
+000094a0: 7320 666f 720a 2020 636f 6d6d 616e 6473  s for.  commands
+000094b0: 2061 6666 6563 7469 6e67 206d 6f72 6520   affecting more 
+000094c0: 7468 616e 2033 302c 3030 3020 6f62 6a65  than 30,000 obje
+000094d0: 6374 732e 2054 6869 7320 7661 6c75 6520  cts. This value 
+000094e0: 6361 6e20 6265 2061 646a 7573 7465 6420  can be adjusted 
+000094f0: 7669 610a 2020 7461 736b 5f65 7374 696d  via.  task_estim
+00009500: 6174 696f 6e5f 7468 7265 7368 6f6c 6420  ation_threshold 
+00009510: 696e 2074 6865 202e 626f 746f 2063 6f6e  in the .boto con
+00009520: 6669 6775 7261 7469 6f6e 2066 696c 652e  figuration file.
+00009530: 0a0a 4275 6720 4669 7865 730a 2d2d 2d2d  ..Bug Fixes.----
+00009540: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d  --------------.-
+00009550: 2046 6978 6564 2061 2062 7567 2069 6e20   Fixed a bug in 
+00009560: 7265 7375 6d61 626c 6520 646f 776e 6c6f  resumable downlo
+00009570: 6164 7320 7468 6174 2063 6f75 6c64 2072  ads that could r
+00009580: 6169 7365 2055 6e62 6f75 6e64 4c6f 6361  aise UnboundLoca
+00009590: 6c45 7272 6f72 2069 660a 2020 7468 6520  lError if.  the 
+000095a0: 646f 776e 6c6f 6164 2066 696c 6520 7761  download file wa
+000095b0: 7320 6e6f 7420 7265 6164 6162 6c65 2e0a  s not readable..
+000095c0: 2d20 5570 6461 7465 6420 6f61 7574 6832  - Updated oauth2
+000095d0: 636c 6965 6e74 2074 6f20 7665 7273 696f  client to versio
+000095e0: 6e20 322e 322e 302c 2066 6978 696e 6720  n 2.2.0, fixing 
+000095f0: 736f 6d65 2049 4f45 7272 6f72 2061 6e64  some IOError and
+00009600: 204f 5345 7272 6f72 2063 6173 6573 2e0a   OSError cases..
+00009610: 2d20 4669 7865 6420 6275 6720 696e 2067  - Fixed bug in g
+00009620: 7375 7469 6c20 6c73 2074 6861 7420 776f  sutil ls that wo
+00009630: 756c 6420 7368 6f77 2075 7064 6174 6520  uld show update 
+00009640: 7469 6d65 2069 6e73 7465 6164 206f 6620  time instead of 
+00009650: 6372 6561 7469 6f6e 0a20 2074 696d 6520  creation.  time 
+00009660: 7768 656e 2075 7369 6e67 2074 6865 204a  when using the J
+00009670: 534f 4e20 4150 4920 616e 6420 2d4c 206f  SON API and -L o
+00009680: 7220 2d6c 2066 6c61 6773 2e0a 2d20 4669  r -l flags..- Fi
+00009690: 7865 6420 6120 6275 6720 696e 2067 7375  xed a bug in gsu
+000096a0: 7469 6c20 7273 796e 6320 2d64 2074 6861  til rsync -d tha
+000096b0: 7420 636f 756c 6420 6361 7573 6520 6572  t could cause er
+000096c0: 726f 6e65 6f75 7320 7265 6d6f 7661 6c20  roneous removal 
+000096d0: 6f66 0a20 2061 6e20 6578 7472 6120 6465  of.  an extra de
+000096e0: 7374 696e 6174 696f 6e20 6f62 6a65 6374  stination object
+000096f0: 2e0a 2d20 4669 7865 6420 646f 776e 6c6f  ..- Fixed downlo
+00009700: 6164 7320 746f 2069 6e63 6c75 6465 2061  ads to include a
+00009710: 6363 6570 742d 656e 636f 6469 6e67 3a67  ccept-encoding:g
+00009720: 7a69 7020 6c6f 6769 6320 7768 656e 2061  zip logic when a
+00009730: 7070 726f 7072 6961 7465 2e0a 0a4f 7468  ppropriate...Oth
+00009740: 6572 2043 6861 6e67 6573 0a2d 2d2d 2d2d  er Changes.-----
+00009750: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 2d20  -------------.- 
+00009760: 6773 7574 696c 2072 7379 6e63 206e 6f77  gsutil rsync now
+00009770: 2073 746f 7265 7320 6d6f 6469 6669 6361   stores modifica
+00009780: 7469 6f6e 2074 696d 6520 286d 7469 6d65  tion time (mtime
+00009790: 2920 666f 7220 636c 6f75 6420 6f62 6a65  ) for cloud obje
+000097a0: 6374 732e 0a2d 2043 6861 6e67 6564 2074  cts..- Changed t
+000097b0: 6865 2064 6566 6175 6c74 2063 6861 6e67  he default chang
+000097c0: 6520 6465 7465 6374 696f 6e20 616c 676f  e detection algo
+000097d0: 7269 7468 6d20 6f66 2067 7375 7469 6c20  rithm of gsutil 
+000097e0: 7273 796e 6320 6672 6f6d 2066 696c 650a  rsync from file.
+000097f0: 2020 7369 7a65 2074 6f20 6669 6c65 206d    size to file m
+00009800: 7469 6d65 2c20 6661 6c6c 696e 6720 6261  time, falling ba
+00009810: 636b 2074 6f20 6368 6563 6b73 756d 2061  ck to checksum a
+00009820: 6e64 2066 696e 616c 6c79 2066 696c 650a  nd finally file.
+00009830: 2020 7369 7a65 2061 7320 616c 7465 726e    size as altern
+00009840: 6174 6976 6573 2e20 5468 6973 2061 6c6c  atives. This all
+00009850: 6f77 7320 666f 7220 696e 6372 6561 7365  ows for increase
+00009860: 6420 6163 6375 7261 6379 206f 6620 7273  d accuracy of rs
+00009870: 796e 6320 7769 7468 6f75 740a 2020 7468  ync without.  th
+00009880: 6520 7370 6565 6420 7361 6372 6966 6963  e speed sacrific
+00009890: 6520 7468 6174 2063 6f6d 6573 2066 726f  e that comes fro
+000098a0: 6d20 6368 6563 6b73 756d 2063 616c 6375  m checksum calcu
+000098b0: 6c61 7469 6f6e 2c20 616e 6420 6d61 6b65  lation, and make
+000098c0: 7320 6773 7574 696c 0a20 2072 7379 6e63  s gsutil.  rsync
+000098d0: 2077 6f72 6b20 6d6f 7265 2073 696d 696c   work more simil
+000098e0: 6172 6c79 2074 6f20 686f 7720 4c69 6e75  arly to how Linu
+000098f0: 7820 7273 796e 6320 776f 726b 732e 204e  x rsync works. N
+00009900: 6f74 6520 7468 6174 2074 6865 2066 6972  ote that the fir
+00009910: 7374 0a20 2072 756e 206f 6620 6120 6c6f  st.  run of a lo
+00009920: 6361 6c2d 746f 2d63 6c6f 7564 2072 7379  cal-to-cloud rsy
+00009930: 6e63 2075 7369 6e67 2074 6869 7320 6e65  nc using this ne
+00009940: 7720 616c 676f 7269 7468 6d20 6d61 7920  w algorithm may 
+00009950: 6265 2073 6c6f 7765 7220 7468 616e 0a20  be slower than. 
+00009960: 2073 7562 7365 7175 656e 7420 7275 6e73   subsequent runs
+00009970: 2c20 6173 2074 6865 2063 6c6f 7564 206f  , as the cloud o
+00009980: 626a 6563 7473 2077 696c 6c20 6e6f 7420  bjects will not 
+00009990: 696e 6974 6961 6c6c 7920 6861 7665 2061  initially have a
+000099a0: 6e20 6d74 696d 652c 2061 6e64 0a20 2074  n mtime, and.  t
+000099b0: 6865 2061 6c67 6f72 6974 686d 2077 696c  he algorithm wil
+000099c0: 6c20 6661 6c6c 2062 6163 6b20 746f 2074  l fall back to t
+000099d0: 6865 2073 6c6f 7765 7220 6368 6563 6b73  he slower checks
+000099e0: 756d 2d62 6173 6564 2061 6c74 6572 6e61  um-based alterna
+000099f0: 7469 7665 2069 6e0a 2020 6164 6469 7469  tive in.  additi
+00009a00: 6f6e 2074 6f20 6164 6469 6e67 206d 7469  on to adding mti
+00009a10: 6d65 2074 6f20 7468 6520 636c 6f75 6420  me to the cloud 
+00009a20: 6f62 6a65 6374 732e 0a2d 2057 6865 6e20  objects..- When 
+00009a30: 7573 696e 6720 7468 6520 4a53 4f4e 2041  using the JSON A
+00009a40: 5049 2c20 6773 7574 696c 2077 696c 6c20  PI, gsutil will 
+00009a50: 6f75 7470 7574 2061 2070 726f 6772 6573  output a progres
+00009a60: 7320 6d65 7373 6167 6520 6265 666f 7265  s message before
+00009a70: 0a20 2072 6574 7279 696e 6720 6120 7265  .  retrying a re
+00009a80: 7175 6573 7420 6966 2065 6e6f 7567 6820  quest if enough 
+00009a90: 7469 6d65 2068 6173 2070 6173 7365 6420  time has passed 
+00009aa0: 7369 6e63 6520 7468 6520 6669 7273 7420  since the first 
+00009ab0: 6174 7465 6d70 742e 0a2d 2049 6d70 726f  attempt..- Impro
+00009ac0: 7665 6420 6572 726f 7220 6465 7465 6374  ved error detect
+00009ad0: 696f 6e20 696e 2064 7279 2072 756e 7320  ion in dry runs 
+00009ae0: 6f66 2067 7375 7469 6c20 7273 796e 6320  of gsutil rsync 
+00009af0: 6279 2061 7474 656d 7074 696e 6720 746f  by attempting to
+00009b00: 206f 7065 6e0a 2020 6669 6c65 7320 7468   open.  files th
+00009b10: 6174 2077 6f75 6c64 2062 6520 636f 7069  at would be copi
+00009b20: 6564 2e0a 2d20 4164 6465 6420 7469 6d65  ed..- Added time
+00009b30: 2063 7265 6174 6564 2061 6e64 2074 696d   created and tim
+00009b40: 6520 7570 6461 7465 6420 7072 6f70 6572  e updated proper
+00009b50: 7469 6573 2074 6f20 6f75 7470 7574 206f  ties to output o
+00009b60: 6620 6773 7574 696c 206c 7320 2d4c 622e  f gsutil ls -Lb.
+00009b70: 0a2d 2041 6464 6564 2061 7263 6869 7665  .- Added archive
+00009b80: 6420 7469 6d65 2070 726f 7065 7274 7920  d time property 
+00009b90: 746f 206f 7574 7075 7420 6f66 2067 7375  to output of gsu
+00009ba0: 7469 6c20 6c73 202d 4c61 2061 6e64 2067  til ls -La and g
+00009bb0: 7375 7469 6c20 7374 6174 2e0a 2d20 4368  sutil stat..- Ch
+00009bc0: 616e 6765 6420 6d69 6e69 6d75 6d20 6e75  anged minimum nu
+00009bd0: 6d62 6572 206f 6620 736f 7572 6365 206f  mber of source o
+00009be0: 626a 6563 7473 2066 6f72 2067 7375 7469  bjects for gsuti
+00009bf0: 6c20 636f 6d70 6f73 6520 6672 6f6d 2032  l compose from 2
+00009c00: 2074 6f20 312e 0a2d 2052 656d 6f76 6564   to 1..- Removed
+00009c10: 2061 6e20 4854 5450 206d 6574 6164 6174   an HTTP metadat
+00009c20: 6120 6765 7420 6361 6c6c 2066 726f 6d20  a get call from 
+00009c30: 6370 2c20 6163 6c2c 2061 6e64 2073 6574  cp, acl, and set
+00009c40: 6d65 7461 2063 6f6d 6d61 6e64 732e 2054  meta commands. T
+00009c50: 6869 730a 2020 696d 7072 6f76 6573 2074  his.  improves t
+00009c60: 6865 2073 7065 6564 206f 6620 6773 7574  he speed of gsut
+00009c70: 696c 2063 7020 666f 7220 736d 616c 6c20  il cp for small 
+00009c80: 6f62 6a65 6374 7320 6279 206f 7665 7220  objects by over 
+00009c90: 3530 252e 0a2d 2053 6576 6572 616c 2064  50%..- Several d
+00009ca0: 6f63 756d 656e 7461 7469 6f6e 2075 7064  ocumentation upd
+00009cb0: 6174 6573 2061 6e64 2063 6c61 7269 6669  ates and clarifi
+00009cc0: 6361 7469 6f6e 732e 0a0a 5265 6c65 6173  cations...Releas
+00009cd0: 6520 342e 3139 2028 7265 6c65 6173 6520  e 4.19 (release 
+00009ce0: 6461 7465 3a20 3230 3136 2d30 342d 3133  date: 2016-04-13
+00009cf0: 290a 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ).==============
+00009d00: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00009d10: 3d3d 3d3d 3d3d 3d3d 3d0a 4465 7072 6563  =========.Deprec
+00009d20: 6174 696f 6e20 4e6f 7469 6365 0a2d 2d2d  ation Notice.---
+00009d30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a  ---------------.
+00009d40: 2d20 6773 7574 696c 2073 7570 706f 7274  - gsutil support
+00009d50: 2066 6f72 2050 7974 686f 6e20 322e 3620   for Python 2.6 
+00009d60: 6973 2064 6570 7265 6361 7465 642c 2061  is deprecated, a
+00009d70: 6e64 2067 7375 7469 6c20 7769 6c6c 2073  nd gsutil will s
+00009d80: 746f 700a 2020 7375 7070 6f72 7469 6e67  top.  supporting
+00009d90: 2050 7974 686f 6e20 322e 3620 6f6e 2053   Python 2.6 on S
+00009da0: 6570 7465 6d62 6572 2031 2c20 3230 3136  eptember 1, 2016
+00009db0: 2e20 5468 6973 2063 6861 6e67 6520 6973  . This change is
+00009dc0: 0a20 2062 6569 6e67 206d 6164 6520 666f  .  being made fo
+00009dd0: 7220 7477 6f20 7265 6173 6f6e 732e 2046  r two reasons. F
+00009de0: 6972 7374 2c20 5079 7468 6f6e 2032 2e36  irst, Python 2.6
+00009df0: 2073 746f 7070 6564 0a20 2072 6563 6569   stopped.  recei
+00009e00: 7669 6e67 2073 6563 7572 6974 7920 7061  ving security pa
+00009e10: 7463 6865 7320 7369 6e63 6520 4f63 746f  tches since Octo
+00009e20: 6265 7220 3230 3133 2e20 5365 636f 6e64  ber 2013. Second
+00009e30: 2c0a 2020 7265 6d6f 7669 6e67 2050 7974  ,.  removing Pyt
+00009e40: 686f 6e20 322e 3620 7375 7070 6f72 7420  hon 2.6 support 
+00009e50: 7769 6c6c 2065 6e61 626c 6520 6773 7574  will enable gsut
+00009e60: 696c 2074 6f20 6164 6420 7375 7070 6f72  il to add suppor
+00009e70: 740a 2020 666f 7220 5079 7468 6f6e 2033  t.  for Python 3
+00009e80: 2e20 5665 7273 696f 6e73 206f 6620 6773  . Versions of gs
+00009e90: 7574 696c 2072 656c 6561 7365 6420 7072  util released pr
+00009ea0: 696f 7220 746f 2053 6570 7465 6d62 6572  ior to September
+00009eb0: 2031 2c0a 2020 3230 3136 2077 696c 6c20   1,.  2016 will 
+00009ec0: 636f 6e74 696e 7565 2074 6f20 776f 726b  continue to work
+00009ed0: 2077 6974 6820 5079 7468 6f6e 2032 2e36   with Python 2.6
+00009ee0: 2e20 486f 7765 7665 722c 2062 7567 2066  . However, bug f
+00009ef0: 6978 6573 0a20 2077 696c 6c20 6e6f 7420  ixes.  will not 
+00009f00: 6265 206d 6164 6520 7265 7472 6f61 6374  be made retroact
+00009f10: 6976 656c 7920 746f 206f 6c64 6572 2067  ively to older g
+00009f20: 7375 7469 6c20 7665 7273 696f 6e73 2c20  sutil versions, 
+00009f30: 616e 6420 7573 6572 730a 2020 7265 706f  and users.  repo
+00009f40: 7274 696e 6720 6275 6773 2077 696c 6c20  rting bugs will 
+00009f50: 6265 2061 736b 6564 2074 6f20 7570 6772  be asked to upgr
+00009f60: 6164 6520 746f 2074 6865 2063 7572 7265  ade to the curre
+00009f70: 6e74 2067 7375 7469 6c0a 2020 7665 7273  nt gsutil.  vers
+00009f80: 696f 6e20 2875 7369 6e67 2050 7974 686f  ion (using Pytho
+00009f90: 6e20 322e 372c 206f 722c 2077 6865 6e20  n 2.7, or, when 
+00009fa0: 6974 2069 7320 7375 7070 6f72 7465 642c  it is supported,
+00009fb0: 2050 7974 686f 6e20 3329 2e0a 0a4f 7468   Python 3)...Oth
+00009fc0: 6572 2043 6861 6e67 6573 0a2d 2d2d 2d2d  er Changes.-----
+00009fd0: 2d2d 2d2d 2d2d 2d2d 0a2d 2049 6d70 726f  --------.- Impro
+00009fe0: 7665 6420 646f 6375 6d65 6e74 6174 696f  ved documentatio
+00009ff0: 6e20 6172 6f75 6e64 2043 6c6f 7564 2053  n around Cloud S
+0000a000: 444b 2028 6763 6c6f 7564 2920 696e 7374  DK (gcloud) inst
+0000a010: 616c 6c73 2e0a 0a52 656c 6561 7365 2034  alls...Release 4
+0000a020: 2e31 3820 2872 656c 6561 7365 2064 6174  .18 (release dat
+0000a030: 653a 2032 3031 362d 3033 2d32 3229 0a3d  e: 2016-03-22).=
+0000a040: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0000a050: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0000a060: 3d3d 3d3d 3d3d 0a4e 6577 2046 6561 7475  ======.New Featu
+0000a070: 7265 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  res.------------
+0000a080: 0a2d 2067 7375 7469 6c20 6e6f 7720 7375  .- gsutil now su
+0000a090: 7070 6f72 7473 2074 6865 2062 6574 6120  pports the beta 
+0000a0a0: 4375 7374 6f6d 6572 2d53 7570 706c 6965  Customer-Supplie
+0000a0b0: 6420 456e 6372 7970 7469 6f6e 204b 6579  d Encryption Key
+0000a0c0: 730a 2020 6665 6174 7572 6573 2066 6f72  s.  features for
+0000a0d0: 2047 6f6f 676c 6520 436c 6f75 6420 5374   Google Cloud St
+0000a0e0: 6f72 6167 6520 6f62 6a65 6374 732c 2076  orage objects, v
+0000a0f0: 6961 2074 6865 204a 534f 4e20 4150 492e  ia the JSON API.
+0000a100: 0a20 2054 6869 7320 6665 6174 7572 6520  .  This feature 
+0000a110: 616c 6c6f 7773 2079 6f75 2074 6f20 656e  allows you to en
+0000a120: 6372 7970 7420 796f 7572 2064 6174 6120  crypt your data 
+0000a130: 7769 7468 206b 6579 7320 7468 6174 0a20  with keys that. 
+0000a140: 2061 7265 206e 6f74 2070 6572 6d61 6e65   are not permane
+0000a150: 6e74 6c79 2073 746f 7265 6420 6f6e 2047  ntly stored on G
+0000a160: 6f6f 676c 6527 7320 7365 7276 6572 732e  oogle's servers.
+0000a170: 2059 6f75 2063 616e 2070 726f 7669 6465   You can provide
+0000a180: 0a20 2065 6e63 7279 7074 696f 6e20 616e  .  encryption an
+0000a190: 6420 6465 6372 7970 7469 6f6e 206b 6579  d decryption key
+0000a1a0: 7320 696e 2079 6f75 7220 2e62 6f74 6f20  s in your .boto 
+0000a1b0: 636f 6e66 6967 7572 6174 696f 6e20 6669  configuration fi
+0000a1c0: 6c65 2e0a 2020 4173 206c 6f6e 6720 6173  le..  As long as
+0000a1d0: 2061 6e20 656e 6372 7970 7469 6f6e 206b   an encryption k
+0000a1e0: 6579 2069 7320 7370 6563 6966 6965 6420  ey is specified 
+0000a1f0: 696e 2074 6865 2063 6f6e 6669 6775 7261  in the configura
+0000a200: 7469 6f6e 2066 696c 652c 0a20 2061 6c6c  tion file,.  all
+0000a210: 2067 733a 2f2f 206f 626a 6563 7473 2074   gs:// objects t
+0000a220: 6861 7420 6773 7574 696c 2063 7265 6174  hat gsutil creat
+0000a230: 6573 2077 696c 6c20 6265 2073 746f 7265  es will be store
+0000a240: 6420 656e 6372 7970 7465 640a 2020 7769  d encrypted.  wi
+0000a250: 7468 2074 6861 7420 6b65 792c 2061 6e64  th that key, and
+0000a260: 2061 6c6c 2065 6e63 7279 7074 6564 206f   all encrypted o
+0000a270: 626a 6563 7473 2077 696c 6c20 6265 2064  bjects will be d
+0000a280: 6563 7279 7074 6564 2077 6865 6e0a 2020  ecrypted when.  
+0000a290: 646f 776e 6c6f 6164 6564 2e20 5365 6520  downloaded. See 
+0000a2a0: 2267 7375 7469 6c20 6865 6c70 2063 7365  "gsutil help cse
+0000a2b0: 6b22 2066 6f72 206d 6f72 6520 696e 666f  k" for more info
+0000a2c0: 726d 6174 696f 6e2e 0a2d 2041 6464 6564  rmation..- Added
+0000a2d0: 2074 6865 2072 6577 7269 7465 2063 6f6d   the rewrite com
+0000a2e0: 6d61 6e64 2c20 7768 6963 6820 6361 6e20  mand, which can 
+0000a2f0: 6265 2075 7365 6420 746f 2070 6572 666f  be used to perfo
+0000a300: 726d 0a20 206b 6579 2072 6f74 6174 696f  rm.  key rotatio
+0000a310: 6e20 666f 7220 6f62 6a65 6374 7320 656e  n for objects en
+0000a320: 6372 7970 7465 6420 7769 7468 2063 7573  crypted with cus
+0000a330: 746f 6d65 722d 7375 7070 6c69 6564 0a20  tomer-supplied. 
+0000a340: 2065 6e63 7279 7074 696f 6e20 6b65 7973   encryption keys
+0000a350: 2e0a 0a42 7567 2046 6978 6573 0a2d 2d2d  ...Bug Fixes.---
+0000a360: 2d2d 2d2d 2d2d 0a2d 2046 6978 6564 2061  ------.- Fixed a
+0000a370: 6e20 4174 7472 6962 7574 6545 7272 6f72  n AttributeError
+0000a380: 2074 6861 7420 636f 756c 6420 6f63 6375   that could occu
+0000a390: 7220 7768 656e 2072 756e 6e69 6e67 2069  r when running i
+0000a3a0: 6e20 6465 6275 6720 6d6f 6465 0a20 2066  n debug mode.  f
+0000a3b0: 6f72 206f 7065 7261 7469 6f6e 7320 696e  or operations in
+0000a3c0: 766f 6c76 696e 6720 7769 6c64 6361 7264  volving wildcard
+0000a3d0: 732c 2072 6563 7572 7369 6f6e 2c20 6f72  s, recursion, or
+0000a3e0: 206c 6973 7469 6e67 2e0a 2d20 4669 7865   listing..- Fixe
+0000a3f0: 6420 616e 2041 7267 756d 656e 7445 7863  d an ArgumentExc
+0000a400: 6570 7469 6f6e 2074 6861 7420 636f 756c  eption that coul
+0000a410: 6420 6f63 6375 7220 7768 656e 2075 7369  d occur when usi
+0000a420: 6e67 2070 6572 6664 6961 670a 2020 7772  ng perfdiag.  wr
+0000a430: 6974 6520 7468 726f 7567 6870 7574 2074  ite throughput t
+0000a440: 6573 7473 2077 6974 6820 7061 7261 6c6c  ests with parall
+0000a450: 656c 6973 6d2e 0a2d 2052 6573 746f 7265  elism..- Restore
+0000a460: 6420 6465 6275 6720 6d6f 6465 206f 7574  d debug mode out
+0000a470: 7075 7420 666f 7220 7265 7375 6d61 626c  put for resumabl
+0000a480: 6520 7570 6c6f 6164 7320 7573 696e 6720  e uploads using 
+0000a490: 7468 6520 4a53 4f4e 2041 5049 2e0a 2d20  the JSON API..- 
+0000a4a0: 4669 7865 6420 6120 6275 6720 7768 6572  Fixed a bug wher
+0000a4b0: 6520 726d 202d 7220 6f6e 2061 2062 7563  e rm -r on a buc
+0000a4c0: 6b65 7420 7375 6264 6972 6563 746f 7279  ket subdirectory
+0000a4d0: 2077 6f75 6c64 2065 7869 7420 7769 7468   would exit with
+0000a4e0: 0a20 2063 6f64 6520 3120 6576 656e 2074  .  code 1 even t
+0000a4f0: 686f 7567 6820 6974 2073 7563 6365 6564  hough it succeed
+0000a500: 6564 2e0a 2d20 4669 7865 6420 6120 6275  ed..- Fixed a bu
+0000a510: 6720 7768 6572 6520 6370 202d 5220 6f66  g where cp -R of
+0000a520: 2061 2073 696e 676c 6520 6669 6c65 2077   a single file w
+0000a530: 6974 6820 6120 6465 7374 696e 6174 696f  ith a destinatio
+0000a540: 6e20 6f74 6865 720a 2020 7468 616e 2074  n other.  than t
+0000a550: 6865 2062 7563 6b65 7420 726f 6f74 2077  he bucket root w
+0000a560: 6f75 6c64 2063 6f70 7920 746f 2074 6865  ould copy to the
+0000a570: 2062 7563 6b65 7420 726f 6f74 2e0a 2d20   bucket root..- 
+0000a580: 4669 7865 6420 6120 6275 6720 7768 656e  Fixed a bug when
+0000a590: 2075 7369 6e67 2061 2073 696e 676c 6520   using a single 
+0000a5a0: 7072 6f63 6573 7320 7769 7468 206d 756c  process with mul
+0000a5b0: 7469 706c 6520 7468 7265 6164 730a 2020  tiple threads.  
+0000a5c0: 7768 6572 6520 4354 524c 2d43 2077 6f75  where CTRL-C wou
+0000a5d0: 6c64 206e 6f74 2073 746f 7020 7468 6520  ld not stop the 
+0000a5e0: 7072 6f63 6573 7320 756e 7469 6c20 6f6e  process until on
+0000a5f0: 6520 7468 7265 6164 2063 6f6d 706c 6574  e thread complet
+0000a600: 6564 0a20 2061 2074 6173 6b2e 0a0a 4f74  ed.  a task...Ot
+0000a610: 6865 7220 4368 616e 6765 730a 2d2d 2d2d  her Changes.----
+0000a620: 2d2d 2d2d 2d2d 2d2d 2d0a 2d20 496d 7072  ---------.- Impr
+0000a630: 6f76 6564 2065 7863 6570 7469 6f6e 206c  oved exception l
+0000a640: 6f67 6769 6e67 2069 6e20 6465 6275 6720  ogging in debug 
+0000a650: 6d6f 6465 2e0a 2d20 4164 6465 6420 2263  mode..- Added "c
+0000a660: 6163 6865 2d63 6f6e 7472 6f6c 3a20 6e6f  ache-control: no
+0000a670: 2d74 7261 6e73 666f 726d 2220 746f 2061  -transform" to a
+0000a680: 6c6c 2075 706c 6f61 6473 0a20 2075 7369  ll uploads.  usi
+0000a690: 6e67 2063 6f6d 7072 6573 7369 6f6e 2028  ng compression (
+0000a6a0: 2267 7375 7469 6c20 6370 202d 7a22 206f  "gsutil cp -z" o
+0000a6b0: 7220 2267 7375 7469 6c20 6370 202d 5a22  r "gsutil cp -Z"
+0000a6c0: 2920 746f 2065 6e73 7572 6520 7468 6174  ) to ensure that
+0000a6d0: 0a20 2064 6f75 626c 792d 636f 6d70 7265  .  doubly-compre
+0000a6e0: 7373 6564 206f 626a 6563 7473 2063 616e  ssed objects can
+0000a6f0: 2062 6520 646f 776e 6c6f 6164 6564 2077   be downloaded w
+0000a700: 6974 6820 6461 7461 2069 6e74 6567 7269  ith data integri
+0000a710: 7479 0a20 2063 6865 636b 696e 672e 0a2d  ty.  checking..-
+0000a720: 2052 6564 7563 6564 2074 6865 2064 6566   Reduced the def
+0000a730: 6175 6c74 206e 756d 6265 7220 6f66 2074  ault number of t
+0000a740: 6872 6561 6473 2070 6572 2d70 726f 6365  hreads per-proce
+0000a750: 7373 206f 6e20 4c69 6e75 7820 7379 7374  ss on Linux syst
+0000a760: 656d 730a 2020 6672 6f6d 2031 3020 746f  ems.  from 10 to
+0000a770: 2035 2e0a 2d20 446f 6375 6d65 6e74 6564   5..- Documented
+0000a780: 2061 6464 6974 696f 6e61 6c20 4f53 2058   additional OS X
+0000a790: 2055 6e69 636f 6465 206c 696d 6974 6174   Unicode limitat
+0000a7a0: 696f 6e73 2e0a 2d20 5468 6520 636f 6e66  ions..- The conf
+0000a7b0: 6967 2063 6f6d 6d61 6e64 206e 6f77 2069  ig command now i
+0000a7c0: 6e63 6c75 6465 7320 7468 6520 6375 7374  ncludes the cust
+0000a7d0: 6f6d 2063 6c69 656e 7420 4944 2061 6e64  om client ID and
+0000a7e0: 2073 6563 7265 7420 696e 2074 6865 0a20   secret in the. 
+0000a7f0: 2063 6f6e 6669 6775 7261 7469 6f6e 2066   configuration f
+0000a800: 696c 6520 6f75 7470 7574 2069 6620 7468  ile output if th
+0000a810: 6520 636f 6d6d 616e 6420 6973 2072 756e  e command is run
+0000a820: 2077 6974 6820 7468 6f73 6520 7661 6c75   with those valu
+0000a830: 6573 0a20 2063 6f6e 6669 6775 7265 642e  es.  configured.
+0000a840: 0a0a 5265 6c65 6173 6520 342e 3137 2028  ..Release 4.17 (
+0000a850: 7265 6c65 6173 6520 6461 7465 3a20 3230  release date: 20
+0000a860: 3136 2d30 322d 3138 290a 3d3d 3d3d 3d3d  16-02-18).======
+0000a870: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0000a880: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0000a890: 3d0a 4275 6720 4669 7865 730a 2d2d 2d2d  =.Bug Fixes.----
+0000a8a0: 2d2d 2d2d 2d0a 2d20 4669 7865 6420 616e  -----.- Fixed an
+0000a8b0: 206f 6175 7468 3263 6c69 656e 7420 6465   oauth2client de
+0000a8c0: 7065 6e64 656e 6379 2062 7265 616b 2074  pendency break t
+0000a8d0: 6861 7420 6361 7573 6564 0a20 2074 6865  hat caused.  the
+0000a8e0: 2050 7950 6920 6469 7374 7269 6275 7469   PyPi distributi
+0000a8f0: 6f6e 206f 6620 6773 7574 696c 2074 6f20  on of gsutil to 
+0000a900: 616c 6c6f 7720 6f61 7574 6832 636c 6965  allow oauth2clie
+0000a910: 6e74 2032 2e30 2e30 2c0a 2020 6361 7573  nt 2.0.0,.  caus
+0000a920: 696e 6720 616c 6c20 636f 6d6d 616e 6473  ing all commands
+0000a930: 2074 6f20 6661 696c 2077 6974 6820 616e   to fail with an
+0000a940: 2049 6d70 6f72 7445 7272 6f72 2e0a 2d20   ImportError..- 
+0000a950: 4669 7865 6420 6120 6275 6720 7768 6572  Fixed a bug wher
+0000a960: 6520 6773 7574 696c 2063 6f75 6c64 206c  e gsutil could l
+0000a970: 6561 6b20 6d75 6c74 6970 726f 6365 7373  eak multiprocess
+0000a980: 696e 672e 4d61 6e61 6765 720a 2020 7072  ing.Manager.  pr
+0000a990: 6f63 6573 7365 7320 7768 656e 2074 6572  ocesses when ter
+0000a9a0: 6d69 6e61 7469 6e67 2073 6967 6e61 6c73  minating signals
+0000a9b0: 2028 7375 6368 2061 7320 4354 524c 2d43   (such as CTRL-C
+0000a9c0: 2920 7765 7265 2073 656e 742e 0a2d 2046  ) were sent..- F
+0000a9d0: 6978 6564 2061 2062 7567 2077 6865 7265  ixed a bug where
+0000a9e0: 2074 6865 202d 7120 6f70 7469 6f6e 2064   the -q option d
+0000a9f0: 6964 206e 6f74 2073 7570 7072 6573 7320  id not suppress 
+0000aa00: 6f75 7470 7574 0a20 2066 726f 6d20 7468  output.  from th
+0000aa10: 6520 7374 6174 2063 6f6d 6d61 6e64 2e0a  e stat command..
+0000aa20: 2d20 4669 7865 6420 6120 6275 6720 7768  - Fixed a bug wh
+0000aa30: 6572 6520 6465 6c65 7469 6e67 2061 6e20  ere deleting an 
+0000aa40: 656d 7074 7920 6275 636b 6574 2077 6974  empty bucket wit
+0000aa50: 6820 726d 202d 720a 2020 776f 756c 6420  h rm -r.  would 
+0000aa60: 7265 7475 726e 2061 206e 6f6e 2d7a 6572  return a non-zer
+0000aa70: 6f20 6578 6974 2063 6f64 6520 6576 656e  o exit code even
+0000aa80: 2077 6865 6e20 7375 6363 6573 7366 756c   when successful
+0000aa90: 2e0a 2d20 4669 7865 6420 556e 6963 6f64  ..- Fixed Unicod
+0000aaa0: 6545 6e63 6f64 6545 7272 6f72 7320 7468  eEncodeErrors th
+0000aab0: 6174 2063 6f75 6c64 206f 6363 7572 2077  at could occur w
+0000aac0: 6865 6e20 7573 696e 6720 7468 6520 6475  hen using the du
+0000aad0: 0a20 2063 6f6d 6d61 6e64 2077 6974 6820  .  command with 
+0000aae0: 6120 7069 7065 206f 6e20 6f62 6a65 6374  a pipe on object
+0000aaf0: 7320 636f 6e74 6169 6e69 6e67 206e 6f6e  s containing non
+0000ab00: 2d41 5343 4949 2063 6861 7261 6374 6572  -ASCII character
+0000ab10: 732e 0a0a 4f74 6865 7220 4368 616e 6765  s...Other Change
+0000ab20: 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a  s.-------------.
+0000ab30: 2d20 4d61 6e79 2064 6f63 756d 656e 7461  - Many documenta
+0000ab40: 7469 6f6e 2069 6d70 726f 7665 6d65 6e74  tion improvement
+0000ab50: 7320 616e 6420 636c 6172 6966 6963 6174  s and clarificat
+0000ab60: 696f 6e73 2e0a 0a52 656c 6561 7365 2034  ions...Release 4
+0000ab70: 2e31 3620 2872 656c 6561 7365 2064 6174  .16 (release dat
+0000ab80: 653a 2032 3031 352d 3131 2d32 3529 0a3d  e: 2015-11-25).=
+0000ab90: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0000aba0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0000abb0: 3d3d 3d3d 3d3d 0a4e 6577 2046 6561 7475  ======.New Featu
+0000abc0: 7265 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  res.------------
+0000abd0: 0a2d 2054 6865 206c 7320 636f 6d6d 616e  .- The ls comman
+0000abe0: 6420 6e6f 7720 7375 7070 6f72 7473 2061  d now supports a
+0000abf0: 202d 6420 6f70 7469 6f6e 2028 7369 6d69   -d option (simi
+0000ac00: 6c61 7220 746f 2055 6e69 7820 6c73 202d  lar to Unix ls -
+0000ac10: 6429 0a20 2066 6f72 2073 7570 7072 6573  d).  for suppres
+0000ac20: 7369 6e67 2072 6563 7572 7369 6f6e 2069  sing recursion i
+0000ac30: 6e74 6f20 7375 6264 6972 6563 746f 7269  nto subdirectori
+0000ac40: 6573 2e0a 2d20 5468 6520 7369 676e 7572  es..- The signur
+0000ac50: 6c20 636f 6d6d 616e 6420 6e6f 7720 6163  l command now ac
+0000ac60: 6365 7074 7320 4a53 4f4e 2d66 6f72 6d61  cepts JSON-forma
+0000ac70: 7420 7072 6976 6174 6520 6b65 7920 6669  t private key fi
+0000ac80: 6c65 730a 2020 6765 6e65 7261 7465 6420  les.  generated 
+0000ac90: 6279 2074 6865 2047 6f6f 676c 6520 4465  by the Google De
+0000aca0: 7665 6c6f 7065 7273 2043 6f6e 736f 6c65  velopers Console
+0000acb0: 2e0a 2d20 5468 6520 7369 676e 7572 6c20  ..- The signurl 
+0000acc0: 636f 6d6d 616e 6420 6e6f 7720 7375 7070  command now supp
+0000acd0: 6f72 7473 2067 656e 6572 6174 696e 6720  orts generating 
+0000ace0: 7265 7375 6d61 626c 6520 7570 6c6f 6164  resumable upload
+0000acf0: 0a20 2073 7461 7274 2055 524c 732e 0a2d  .  start URLs..-
+0000ad00: 2054 6865 2063 7020 636f 6d6d 616e 6420   The cp command 
+0000ad10: 6e6f 7720 7375 7070 6f72 7473 2061 202d  now supports a -
+0000ad20: 5a20 6f70 7469 6f6e 2077 6869 6368 2077  Z option which w
+0000ad30: 696c 6c20 677a 6970 2d63 6f6d 7072 6573  ill gzip-compres
+0000ad40: 7320 616c 6c0a 2020 6669 6c65 7320 2872  s all.  files (r
+0000ad50: 6567 6172 646c 6573 7320 6f66 2074 6865  egardless of the
+0000ad60: 6972 2065 7874 656e 7369 6f6e 7329 2061  ir extensions) a
+0000ad70: 7320 7468 6579 2061 7265 2075 706c 6f61  s they are uploa
+0000ad80: 6465 642e 0a0a 4275 6720 4669 7865 730a  ded...Bug Fixes.
+0000ad90: 2d2d 2d2d 2d2d 2d2d 2d0a 2d20 4669 7865  ---------.- Fixe
+0000ada0: 6420 6120 6275 6720 7768 6572 6520 616e  d a bug where an
+0000adb0: 2065 7870 6972 6564 204f 4175 7468 3220   expired OAuth2 
+0000adc0: 746f 6b65 6e20 636f 756c 6420 696e 636c  token could incl
+0000add0: 7564 6520 7468 6520 4f41 7574 6832 0a20  ude the OAuth2. 
+0000ade0: 2074 6f6b 656e 2072 6573 706f 6e73 6520   token response 
+0000adf0: 6173 2070 6172 7420 6f66 2074 6865 2064  as part of the d
+0000ae00: 6f77 6e6c 6f61 642c 2063 6175 7369 6e67  ownload, causing
+0000ae10: 2069 7420 746f 2066 6169 6c20 656e 642d   it to fail end-
+0000ae20: 746f 2d65 6e64 0a20 2069 6e74 6567 7269  to-end.  integri
+0000ae30: 7479 2063 6865 636b 7320 616e 6420 6265  ty checks and be
+0000ae40: 2064 656c 6574 6564 2e0a 2d20 4669 7865   deleted..- Fixe
+0000ae50: 6420 6120 6275 6720 7768 6572 6520 7374  d a bug where st
+0000ae60: 7265 616d 696e 6720 646f 776e 6c6f 6164  reaming download
+0000ae70: 7320 7573 696e 6720 7468 6520 4a53 4f4e  s using the JSON
+0000ae80: 2041 5049 2077 6f75 6c64 2072 6573 7461   API would resta
+0000ae90: 7274 0a20 2066 726f 6d20 7468 6520 6265  rt.  from the be
+0000aea0: 6769 6e6e 696e 6720 6f66 2074 6865 2073  ginning of the s
+0000aeb0: 7472 6561 6d20 6966 2074 6865 2063 6f6e  tream if the con
+0000aec0: 6e65 6374 696f 6e20 6272 6f6b 652e 2054  nection broke. T
+0000aed0: 6869 7320 6275 670a 2020 636f 756c 6420  his bug.  could 
+0000aee0: 616c 736f 2063 6175 7365 2064 6174 6120  also cause data 
+0000aef0: 636f 7272 7570 7469 6f6e 2069 6e20 7374  corruption in st
+0000af00: 7265 616d 696e 6720 646f 776e 6c6f 6164  reaming download
+0000af10: 732c 2062 6563 6175 7365 0a20 2073 7472  s, because.  str
+0000af20: 6561 6d69 6e67 2064 6f77 6e6c 6f61 6473  eaming downloads
+0000af30: 2061 7265 206e 6f74 2076 616c 6964 6174   are not validat
+0000af40: 6564 2077 6974 6820 656e 642d 746f 2d65  ed with end-to-e
+0000af50: 6e64 2069 6e74 6567 7269 7479 2063 6865  nd integrity che
+0000af60: 636b 732e 0a2d 2046 6978 6564 2061 6e20  cks..- Fixed an 
+0000af70: 696e 7465 726e 616c 5f66 6169 6c75 7265  internal_failure
+0000af80: 2065 7863 6570 7469 6f6e 2074 6861 7420   exception that 
+0000af90: 636f 756c 6420 6f63 6375 7220 7768 656e  could occur when
+0000afa0: 2061 6e20 4f41 7574 6832 0a20 2074 6f6b   an OAuth2.  tok
+0000afb0: 656e 2072 6566 7265 7368 2072 6574 7572  en refresh retur
+0000afc0: 6e65 6420 6120 7472 616e 7369 656e 7420  ned a transient 
+0000afd0: 6572 726f 722c 2073 7563 6820 6173 2061  error, such as a
+0000afe0: 6e20 4854 5450 2035 3033 2e0a 2d20 4669  n HTTP 503..- Fi
+0000aff0: 7865 6420 6120 7265 736f 7572 6365 2064  xed a resource d
+0000b000: 6561 646c 6f63 6b20 6578 6365 7074 696f  eadlock exceptio
+0000b010: 6e20 696e 206f 6175 7468 3263 6c69 656e  n in oauth2clien
+0000b020: 7420 7468 6174 2063 6f75 6c64 2063 6175  t that could cau
+0000b030: 7365 0a20 2073 6c69 6365 6420 646f 776e  se.  sliced down
+0000b040: 6c6f 6164 7320 746f 2068 616e 672e 0a2d  loads to hang..-
+0000b050: 2046 6978 6564 2061 2062 7567 2077 6865   Fixed a bug whe
+0000b060: 7265 2063 702f 7273 796e 6320 2d70 2077  re cp/rsync -p w
+0000b070: 6f75 6c64 2075 7365 2074 6865 2064 6566  ould use the def
+0000b080: 6175 6c74 206f 626a 6563 740a 2020 4143  ault object.  AC
+0000b090: 4c20 666f 7220 7468 6520 6465 7374 696e  L for the destin
+0000b0a0: 6174 696f 6e20 6f62 6a65 6374 2069 6620  ation object if 
+0000b0b0: 7468 6520 6361 6c6c 6572 2064 6964 206e  the caller did n
+0000b0c0: 6f74 2068 6176 6520 4f57 4e45 520a 2020  ot have OWNER.  
+0000b0d0: 7065 726d 6973 7369 6f6e 206f 6e20 7468  permission on th
+0000b0e0: 6520 736f 7572 6365 206f 626a 6563 742e  e source object.
+0000b0f0: 0a2d 2046 6978 6564 2061 2070 6f74 656e  .- Fixed a poten
+0000b100: 7469 616c 2072 6163 6520 636f 6e64 6974  tial race condit
+0000b110: 696f 6e20 7768 656e 2075 7369 6e67 2070  ion when using p
+0000b120: 6572 6664 6961 6720 7769 7468 206d 756c  erfdiag with mul
+0000b130: 7469 706c 650a 2020 7468 7265 6164 7320  tiple.  threads 
+0000b140: 616e 642f 6f72 2070 726f 6365 7373 6573  and/or processes
+0000b150: 2e0a 2d20 4669 7865 6420 616e 2041 7474  ..- Fixed an Att
+0000b160: 7269 6275 7465 4572 726f 7220 7468 6174  ributeError that
+0000b170: 2063 6f75 6c64 206f 6363 7572 2077 6865   could occur whe
+0000b180: 6e20 7573 696e 6720 6163 6c20 6368 202d  n using acl ch -
+0000b190: 702e 0a2d 2046 6978 6564 2061 2062 7567  p..- Fixed a bug
+0000b1a0: 2077 6865 7265 2074 6865 206d 7620 636f   where the mv co
+0000b1b0: 6d6d 616e 6420 6469 6420 6e6f 7420 7072  mmand did not pr
+0000b1c0: 6f70 6572 6c79 2068 616e 646c 6520 7468  operly handle th
+0000b1d0: 6520 676c 6f62 616c 0a20 202d 6d20 666c  e global.  -m fl
+0000b1e0: 6167 2e0a 2d20 4669 7865 6420 6120 556e  ag..- Fixed a Un
+0000b1f0: 6963 6f64 6545 6e63 6f64 6545 7272 6f72  icodeEncodeError
+0000b200: 2074 6861 7420 636f 756c 6420 6f63 6375   that could occu
+0000b210: 7220 7768 656e 2069 7465 7261 7469 6e67  r when iterating
+0000b220: 206f 7665 720a 2020 6e6f 6e2d 556e 6963   over.  non-Unic
+0000b230: 6f64 652d 6e61 6d65 6420 6469 7265 6374  ode-named direct
+0000b240: 6f72 6965 732e 0a2d 2046 6978 6564 2061  ories..- Fixed a
+0000b250: 2062 7567 2077 6865 7265 2061 6e20 6f62   bug where an ob
+0000b260: 6a65 6374 206e 616d 6520 696e 636c 7564  ject name includ
+0000b270: 696e 6720 6120 7769 6c64 6361 7264 2063  ing a wildcard c
+0000b280: 6f75 6c64 2063 6175 7365 0a20 2061 6e20  ould cause.  an 
+0000b290: 696e 6669 6e69 7465 206c 6f6f 7020 6475  infinite loop du
+0000b2a0: 7269 6e67 2061 2072 6563 7572 7369 7665  ring a recursive
+0000b2b0: 206c 6973 7469 6e67 2e0a 2d20 4669 7865   listing..- Fixe
+0000b2c0: 6420 6120 556e 6963 6f64 6520 6275 6720  d a Unicode bug 
+0000b2d0: 7768 656e 2075 7369 6e67 2063 7020 6f72  when using cp or
+0000b2e0: 206c 7320 6f6e 2057 696e 646f 7773 206f   ls on Windows o
+0000b2f0: 6e20 616e 206f 626a 6563 740a 2020 636f  n an object.  co
+0000b300: 6e74 6169 6e69 6e67 2063 6572 7461 696e  ntaining certain
+0000b310: 2055 6e69 636f 6465 2063 6861 7261 6374   Unicode charact
+0000b320: 6572 732e 2048 6f77 6576 6572 2c20 6576  ers. However, ev
+0000b330: 656e 2077 6974 6820 7468 6973 2066 6978  en with this fix
+0000b340: 0a20 2055 6e69 636f 6465 2063 616e 2073  .  Unicode can s
+0000b350: 7469 6c6c 2062 6520 7072 6f62 6c65 6d61  till be problema
+0000b360: 7469 6320 6f6e 2057 696e 646f 7773 3b20  tic on Windows; 
+0000b370: 636f 6e73 756c 740a 2020 2267 7375 7469  consult.  "gsuti
+0000b380: 6c20 6865 6c70 2065 6e63 6f64 696e 6722  l help encoding"
+0000b390: 2066 6f72 2064 6574 6169 6c73 2e0a 2d20   for details..- 
+0000b3a0: 4669 7865 6420 6120 5769 6e64 6f77 7320  Fixed a Windows 
+0000b3b0: 7065 7266 6f72 6d61 6e63 6520 6973 7375  performance issu
+0000b3c0: 6520 6475 7269 6e67 2072 7379 6e63 2064  e during rsync d
+0000b3d0: 6966 6620 6765 6e65 7261 7469 6f6e 2e0a  iff generation..
+0000b3e0: 2d20 4669 7865 6420 6120 6275 6720 696e  - Fixed a bug in
+0000b3f0: 2074 6865 206f 7264 6572 696e 6720 6f66   the ordering of
+0000b400: 206c 7320 6f75 7470 7574 2e0a 2d20 4669   ls output..- Fi
+0000b410: 7865 6420 6120 6275 6720 7768 6572 6520  xed a bug where 
+0000b420: 5769 6e64 6f77 7320 6865 6c70 206f 7574  Windows help out
+0000b430: 7075 7420 696e 636c 7564 6564 2041 4e53  put included ANS
+0000b440: 4920 6573 6361 7065 2063 6f64 6573 2e0a  I escape codes..
+0000b450: 2d20 4669 7865 6420 6120 636f 6d70 6174  - Fixed a compat
+0000b460: 6962 696c 6974 7920 6275 6720 7769 7468  ibility bug with
+0000b470: 2070 6572 6664 6961 6720 2d69 2077 6974   perfdiag -i wit
+0000b480: 6820 696e 7075 7420 6765 6e65 7261 7465  h input generate
+0000b490: 6420 7072 696f 720a 2020 746f 2067 7375  d prior.  to gsu
+0000b4a0: 7469 6c20 342e 3134 2e0a 0a4f 7468 6572  til 4.14...Other
+0000b4b0: 2043 6861 6e67 6573 0a2d 2d2d 2d2d 2d2d   Changes.-------
+0000b4c0: 2d2d 2d2d 2d2d 0a2d 2053 6576 6572 616c  ------.- Several
+0000b4d0: 2064 6f63 756d 656e 7461 7469 6f6e 2075   documentation u
+0000b4e0: 7064 6174 6573 2c20 696e 636c 7564 696e  pdates, includin
+0000b4f0: 6720 7273 796e 6320 6578 636c 7573 696f  g rsync exclusio
+0000b500: 6e20 7061 7474 6572 6e20 6d61 7463 6869  n pattern matchi
+0000b510: 6e67 2c0a 2020 7365 7276 6963 6520 6163  ng,.  service ac
+0000b520: 636f 756e 7420 636f 6e66 6967 7572 6174  count configurat
+0000b530: 696f 6e2c 2063 702f 7273 796e 6320 7265  ion, cp/rsync re
+0000b540: 6375 7273 696f 6e20 666c 6167 732c 206d  cursion flags, m
+0000b550: 756c 7469 2d6f 626a 6563 7420 726d 2c0a  ulti-object rm,.
+0000b560: 2020 7665 7273 696f 6e65 6420 5552 4c20    versioned URL 
+0000b570: 7265 6d6f 7661 6c2c 2064 6573 7469 6e61  removal, destina
+0000b580: 7469 6f6e 2073 7562 6469 7265 6374 6f72  tion subdirector
+0000b590: 7920 6e61 6d69 6e67 2c20 7769 6c64 6361  y naming, wildca
+0000b5a0: 7264 2062 6568 6176 696f 722c 0a20 2072  rd behavior,.  r
+0000b5b0: 6567 696f 6e61 6c20 6275 636b 6574 732c  egional buckets,
+0000b5c0: 2061 6e64 2073 3320 636f 6e6e 6563 7469   and s3 connecti
+0000b5d0: 6f6e 2072 6573 6574 2e0a 2d20 496d 7072  on reset..- Impr
+0000b5e0: 6f76 656d 656e 7473 2074 6f20 556e 6963  ovements to Unic
+0000b5f0: 6f64 6520 646f 6375 6d65 6e74 6174 696f  ode documentatio
+0000b600: 6e20 696e 636c 7564 696e 6720 4c41 4e47  n including LANG
+0000b610: 2076 6172 6961 626c 6520 616e 6420 6963   variable and ic
+0000b620: 6f6e 760a 2020 746f 6f6c 2e0a 0a52 656c  onv.  tool...Rel
+0000b630: 6561 7365 2034 2e31 3520 2872 656c 6561  ease 4.15 (relea
+0000b640: 7365 2064 6174 653a 2032 3031 352d 3039  se date: 2015-09
+0000b650: 2d30 3829 0a3d 3d3d 3d3d 3d3d 3d3d 3d3d  -08).===========
+0000b660: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0000b670: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 0a42 7567  ============.Bug
+0000b680: 2046 6978 6573 0a2d 2d2d 2d2d 2d2d 2d2d   Fixes.---------
+0000b690: 0a2d 2046 6978 6564 2061 6e20 4f76 6572  .- Fixed an Over
+0000b6a0: 666c 6f77 4572 726f 7220 696e 2061 7069  flowError in api
+0000b6b0: 746f 6f6c 7320 7468 6174 2063 6175 7365  tools that cause
+0000b6c0: 6420 646f 776e 6c6f 6164 0a20 2066 6169  d download.  fai
+0000b6d0: 6c75 7265 7320 666f 7220 6c61 7267 6520  lures for large 
+0000b6e0: 6669 6c65 7320 6f6e 2033 322d 6269 7420  files on 32-bit 
+0000b6f0: 6d61 6368 696e 6573 2e0a 2d20 5265 6d6f  machines..- Remo
+0000b700: 7665 6420 756e 6e65 6365 7373 6172 7920  ved unnecessary 
+0000b710: 7365 6e64 696e 6720 6f66 2072 616e 6765  sending of range
+0000b720: 2068 6561 6465 7273 2066 6f72 2064 6f77   headers for dow
+0000b730: 6e6c 6f61 6473 2077 6865 6e0a 2020 7573  nloads when.  us
+0000b740: 696e 6720 7468 6520 584d 4c20 4150 492e  ing the XML API.
+0000b750: 0a2d 2046 6978 6564 2061 2062 7567 2074  .- Fixed a bug t
+0000b760: 6861 7420 6361 7573 6564 2070 6572 6664  hat caused perfd
+0000b770: 6961 6720 746f 2072 6570 6f72 7420 6578  iag to report ex
+0000b780: 7472 656d 656c 7920 6869 6768 2074 6872  tremely high thr
+0000b790: 6f75 6768 7075 740a 2020 7768 656e 2074  oughput.  when t
+0000b7a0: 6865 202d 7020 666c 6167 2077 6173 2075  he -p flag was u
+0000b7b0: 6e73 7065 6369 6669 6564 2061 6e64 2065  nspecified and e
+0000b7c0: 7861 6374 6c79 206f 6e65 206f 6620 7468  xactly one of th
+0000b7d0: 6520 2d63 206f 7220 2d6b 2066 6c61 6773  e -c or -k flags
+0000b7e0: 0a20 2077 6572 6520 7370 6563 6966 6965  .  were specifie
+0000b7f0: 642e 0a2d 2046 6978 6564 2061 2056 616c  d..- Fixed a Val
+0000b800: 7565 4572 726f 7220 7468 6174 206f 6363  ueError that occ
+0000b810: 7572 7265 6420 6f6e 2050 7974 686f 6e20  urred on Python 
+0000b820: 322e 3620 7769 7468 2073 6c69 6365 6420  2.6 with sliced 
+0000b830: 6f62 6a65 6374 2064 6f77 6e6c 6f61 6473  object downloads
+0000b840: 2e0a 0a4f 7468 6572 2043 6861 6e67 6573  ...Other Changes
+0000b850: 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d  .-------------.-
+0000b860: 2048 5454 5020 636f 6e6e 6563 7469 6f6e   HTTP connection
+0000b870: 7320 666f 7220 646f 776e 6c6f 6164 7320  s for downloads 
+0000b880: 616e 6420 7570 6c6f 6164 7320 696e 2074  and uploads in t
+0000b890: 6865 204a 534f 4e20 4150 4920 6172 6520  he JSON API are 
+0000b8a0: 6e6f 770a 2020 7265 2d75 7365 6420 7065  now.  re-used pe
+0000b8b0: 722d 7468 7265 6164 2e0a 2d20 5768 656e  r-thread..- When
+0000b8c0: 2067 7375 7469 6c27 7320 6175 746f 6d61   gsutil's automa
+0000b8d0: 7469 6320 7570 6461 7465 2066 6561 7475  tic update featu
+0000b8e0: 7265 2070 726f 6d70 7473 2061 6e64 2074  re prompts and t
+0000b8f0: 6865 2075 7365 720a 2020 6368 6f6f 7365  he user.  choose
+0000b900: 7320 746f 2075 7064 6174 652c 2067 7375  s to update, gsu
+0000b910: 7469 6c20 7769 6c6c 206e 6f77 2065 7869  til will now exi
+0000b920: 7420 7769 7468 2073 7461 7475 7320 636f  t with status co
+0000b930: 6465 2031 2061 6674 6572 0a20 2075 7064  de 1 after.  upd
+0000b940: 6174 696e 6720 2862 6563 6175 7365 2074  ating (because t
+0000b950: 6865 206f 7269 6769 6e61 6c20 636f 6d6d  he original comm
+0000b960: 616e 6420 7761 7320 6e6f 7420 6578 6563  and was not exec
+0000b970: 7574 6564 292e 0a2d 2054 6865 2063 7020  uted)..- The cp 
+0000b980: 2d41 2066 6c61 6720 6973 2064 6973 6162  -A flag is disab
+0000b990: 6c65 6420 7768 656e 2075 7369 6e67 2067  led when using g
+0000b9a0: 7375 7469 6c20 2d6d 2074 6f20 656e 7375  sutil -m to ensu
+0000b9b0: 7265 2074 6861 740a 2020 6f72 6465 7269  re that.  orderi
+0000b9c0: 6e67 2069 7320 7072 6573 6572 7665 6420  ng is preserved 
+0000b9d0: 7768 656e 2063 6f70 7969 6e67 2062 6574  when copying bet
+0000b9e0: 7765 656e 2076 6572 7369 6f6e 6564 2062  ween versioned b
+0000b9f0: 7563 6b65 7473 2e0a 0a52 656c 6561 7365  uckets...Release
+0000ba00: 2034 2e31 3420 2872 656c 6561 7365 2064   4.14 (release d
+0000ba10: 6174 653a 2032 3031 352d 3038 2d32 3429  ate: 2015-08-24)
+0000ba20: 0a3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  .===============
+0000ba30: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0000ba40: 3d3d 3d3d 3d3d 3d3d 0a4e 6577 2046 6561  ========.New Fea
+0000ba50: 7475 7265 730a 2d2d 2d2d 2d2d 2d2d 2d2d  tures.----------
+0000ba60: 2d2d 0a2d 2049 6d70 6c65 6d65 6e74 6564  --.- Implemented
+0000ba70: 2053 6c69 6365 6420 4f62 6a65 6374 2044   Sliced Object D
+0000ba80: 6f77 6e6c 6f61 6420 6665 6174 7572 652e  ownload feature.
+0000ba90: 0a20 2054 6869 7320 6272 6561 6b73 2075  .  This breaks u
+0000baa0: 7020 6120 7369 6e67 6c65 206c 6172 6765  p a single large
+0000bab0: 206f 626a 6563 7420 696e 746f 206d 756c   object into mul
+0000bac0: 7469 706c 6520 7069 6563 6573 2061 6e64  tiple pieces and
+0000bad0: 0a20 2064 6f77 6e6c 6f61 6473 2074 6865  .  downloads the
+0000bae0: 6d20 696e 2070 6172 616c 6c65 6c2c 2069  m in parallel, i
+0000baf0: 6d70 726f 7669 6e67 2070 6572 666f 726d  mproving perform
+0000bb00: 616e 6365 2e20 5468 6520 6773 7574 696c  ance. The gsutil
+0000bb10: 2063 702c 206d 760a 2020 616e 6420 7273   cp, mv.  and rs
+0000bb20: 796e 6320 636f 6d6d 616e 6473 206e 6f77  ync commands now
+0000bb30: 2075 7365 2074 6869 7320 6279 2064 6566   use this by def
+0000bb40: 6175 6c74 2077 6865 6e20 636f 6d70 696c  ault when compil
+0000bb50: 6564 2063 7263 6d6f 640a 2020 6973 2061  ed crcmod.  is a
+0000bb60: 7661 696c 6162 6c65 2066 6f72 2070 6572  vailable for per
+0000bb70: 666f 726d 696e 6720 6661 7374 2065 6e64  forming fast end
+0000bb80: 2d74 6f2d 656e 6420 696e 7465 6772 6974  -to-end integrit
+0000bb90: 7920 6368 6563 6b73 2e0a 2020 4966 2063  y checks..  If c
+0000bba0: 6f6d 7069 6c65 6420 6372 636d 6f64 2069  ompiled crcmod i
+0000bbb0: 7320 6e6f 7420 6176 6169 6c61 626c 652c  s not available,
+0000bbc0: 206e 6f72 6d61 6c20 6f62 6a65 6374 2064   normal object d
+0000bbd0: 6f77 6e6c 6f61 6420 7769 6c6c 0a20 2062  ownload will.  b
+0000bbe0: 6520 7573 6564 2e20 536c 6963 6564 2064  e used. Sliced d
+0000bbf0: 6f77 6e6c 6f61 6420 6361 6e20 6265 2075  ownload can be u
+0000bc00: 7365 6420 696e 2063 6f6e 6a75 6e63 7469  sed in conjuncti
+0000bc10: 6f6e 2077 6974 6820 7468 6520 676c 6f62  on with the glob
+0000bc20: 616c 202d 6d0a 2020 666c 6167 2066 6f72  al -m.  flag for
+0000bc30: 206d 6178 696d 756d 2070 6572 666f 726d   maximum perform
+0000bc40: 616e 6365 2074 6f20 646f 776e 6c6f 6164  ance to download
+0000bc50: 206d 756c 7469 706c 6520 6f62 6a65 6374   multiple object
+0000bc60: 7320 696e 0a20 2070 6172 616c 6c65 6c20  s in.  parallel 
+0000bc70: 7768 696c 6520 6164 6469 7469 6f6e 616c  while additional
+0000bc80: 6c79 2073 6c69 6369 6e67 2065 6163 6820  ly slicing each 
+0000bc90: 6f62 6a65 6374 2e0a 2020 5365 6520 7468  object..  See th
+0000bca0: 6520 2253 4c49 4345 4420 4f42 4a45 4354  e "SLICED OBJECT
+0000bcb0: 2044 4f57 4e4c 4f41 4422 2073 6563 7469   DOWNLOAD" secti
+0000bcc0: 6f6e 206f 6620 2267 7375 7469 6c20 6865  on of "gsutil he
+0000bcd0: 6c70 2063 7022 2066 6f72 0a20 2064 6574  lp cp" for.  det
+0000bce0: 6169 6c73 2e0a 2020 4e6f 7465 3a20 736c  ails..  Note: sl
+0000bcf0: 6963 6564 2064 6f77 6e6c 6f61 6420 6d61  iced download ma
+0000bd00: 7920 6361 7573 6520 7065 7266 6f72 6d61  y cause performa
+0000bd10: 6e63 6520 6465 6772 6164 6174 696f 6e20  nce degradation 
+0000bd20: 666f 7220 6469 736b 730a 2020 7769 7468  for disks.  with
+0000bd30: 2076 6572 7920 736c 6f77 2073 6565 6b20   very slow seek 
+0000bd40: 7469 6d65 732e 2059 6f75 2063 616e 2064  times. You can d
+0000bd50: 6973 6162 6c65 2074 6869 7320 6665 6174  isable this feat
+0000bd60: 7572 6520 6279 2073 6574 7469 6e67 0a20  ure by setting. 
+0000bd70: 2073 6c69 6365 645f 6f62 6a65 6374 5f64   sliced_object_d
+0000bd80: 6f77 6e6c 6f61 645f 7468 7265 7368 6f6c  ownload_threshol
+0000bd90: 6420 3d20 3020 696e 2079 6f75 7220 2e62  d = 0 in your .b
+0000bda0: 6f74 6f20 636f 6e66 6967 7572 6174 696f  oto configuratio
+0000bdb0: 6e20 6669 6c65 2e0a 2d20 4164 6465 6420  n file..- Added 
+0000bdc0: 7274 6872 755f 6669 6c65 2061 6e64 2077  rthru_file and w
+0000bdd0: 7468 7275 5f66 696c 6520 7465 7374 206d  thru_file test m
+0000bde0: 6f64 6573 2074 6f20 7065 7266 6469 6167  odes to perfdiag
+0000bdf0: 2c20 616c 6c6f 7769 6e67 0a20 206d 6561  , allowing.  mea
+0000be00: 7375 7265 6d65 6e74 206f 6620 7265 6164  surement of read
+0000be10: 7320 616e 6420 7772 6974 6573 2066 726f  s and writes fro
+0000be20: 6d20 6120 6469 736b 2e20 5468 6973 2061  m a disk. This a
+0000be30: 6c73 6f20 616c 6c6f 7773 0a20 206d 6561  lso allows.  mea
+0000be40: 7375 7265 6d65 6e74 206f 6620 7472 616e  surement of tran
+0000be50: 7366 6572 7269 6e67 206f 626a 6563 7473  sferring objects
+0000be60: 2074 6f6f 206c 6172 6765 2074 6f20 6669   too large to fi
+0000be70: 7420 696e 206d 656d 6f72 792e 0a20 2054  t in memory..  T
+0000be80: 6865 2073 697a 6520 7265 7374 7269 6374  he size restrict
+0000be90: 696f 6e20 6f66 2032 3047 6942 2068 6173  ion of 20GiB has
+0000bea0: 2062 6565 6e20 6c69 6674 6564 2e0a 2d20   been lifted..- 
+0000beb0: 7065 7266 6469 6167 206e 6f77 2073 7570  perfdiag now sup
+0000bec0: 706f 7274 7320 6120 2d70 2066 6c61 6720  ports a -p flag 
+0000bed0: 746f 2063 686f 6f73 6520 6120 7061 7261  to choose a para
+0000bee0: 6c6c 656c 6973 6d20 7374 7261 7465 6779  llelism strategy
+0000bef0: 0a20 2028 736c 6963 652c 2066 616e 2c20  .  (slice, fan, 
+0000bf00: 6f72 2062 6f74 6829 2077 6865 6e20 7573  or both) when us
+0000bf10: 696e 6720 6d75 6c74 6970 6c65 2074 6872  ing multiple thr
+0000bf20: 6561 6473 2061 6e64 2f6f 7220 7072 6f63  eads and/or proc
+0000bf30: 6573 7365 732e 0a0a 4275 6720 4669 7865  esses...Bug Fixe
+0000bf40: 730a 2d2d 2d2d 2d2d 2d2d 2d0a 2d20 4669  s.---------.- Fi
+0000bf50: 7865 6420 616e 2049 4f45 7272 6f72 2074  xed an IOError t
+0000bf60: 6861 7420 636f 756c 6420 6f63 6375 7220  hat could occur 
+0000bf70: 696e 2061 7069 746f 6f6c 7320 7768 656e  in apitools when
+0000bf80: 2061 6371 7569 7269 6e67 2063 7265 6465   acquiring crede
+0000bf90: 6e74 6961 6c73 0a20 2075 7369 6e67 206d  ntials.  using m
+0000bfa0: 756c 7469 706c 6520 7468 7265 6164 7320  ultiple threads 
+0000bfb0: 616e 642f 6f72 2070 726f 6365 7373 6573  and/or processes
+0000bfc0: 206f 6e20 476f 6f67 6c65 2043 6f6d 7075   on Google Compu
+0000bfd0: 7465 2045 6e67 696e 652e 0a2d 2046 6978  te Engine..- Fix
+0000bfe0: 6564 2061 2062 7567 2077 6865 7265 2072  ed a bug where r
+0000bff0: 6d20 2d72 2077 6f75 6c64 2061 7474 656d  m -r would attem
+0000c000: 7074 2074 6f20 6465 6c65 7465 2061 206e  pt to delete a n
+0000c010: 6f6e 6578 6973 7465 6e74 2062 7563 6b65  onexistent bucke
+0000c020: 742e 0a2d 2046 6978 6564 2061 2062 7567  t..- Fixed a bug
+0000c030: 2077 6865 7265 2061 2064 6566 6175 6c74   where a default
+0000c040: 206f 626a 6563 7420 4143 4c20 636f 756c   object ACL coul
+0000c050: 6420 6e6f 7420 6265 2073 6574 206f 7220  d not be set or 
+0000c060: 6368 616e 6765 6420 746f 2065 6d70 7479  changed to empty
+0000c070: 2e0a 2d20 4669 7865 6420 6120 6275 6720  ..- Fixed a bug 
+0000c080: 7768 6572 6520 6361 6368 6564 2063 7265  where cached cre
+0000c090: 6465 6e74 6961 6c73 2063 6f72 7265 7370  dentials corresp
+0000c0a0: 6f6e 6469 6e67 2074 6f20 616e 206f 6c64  onding to an old
+0000c0b0: 2061 6363 6f75 6e74 2063 6f75 6c64 0a20   account could. 
+0000c0c0: 2062 6520 7573 6564 2028 666f 7220 6578   be used (for ex
+0000c0d0: 616d 706c 652c 2063 7265 6465 6e74 6961  ample, credentia
+0000c0e0: 6c73 2061 7373 6f63 6961 7465 6420 7769  ls associated wi
+0000c0f0: 7468 2061 2070 7269 6f72 202e 626f 746f  th a prior .boto
+0000c100: 0a20 2063 6f6e 6669 6775 7261 7469 6f6e  .  configuration
+0000c110: 2066 696c 6529 2e0a 2d20 4669 7865 6420   file)..- Fixed 
+0000c120: 6120 6275 6720 696e 2061 7069 746f 6f6c  a bug in apitool
+0000c130: 7320 666f 7220 7265 7472 6965 7669 6e67  s for retrieving
+0000c140: 2062 7974 6520 7261 6e67 6573 206f 6620   byte ranges of 
+0000c150: 7369 7a65 2031 2028 666f 7220 6578 616d  size 1 (for exam
+0000c160: 706c 652c 0a20 2022 6361 7420 2d72 2031  ple,.  "cat -r 1
+0000c170: 2d31 202e 2e2e 2229 0a2d 2046 6978 6564  -1 ...").- Fixed
+0000c180: 2061 2062 7567 2074 6861 7420 6361 7573   a bug that caus
+0000c190: 6564 2074 6865 206d 6169 6e20 6773 7574  ed the main gsut
+0000c1a0: 696c 2070 726f 6365 7373 2074 6f20 7065  il process to pe
+0000c1b0: 7266 6f72 6d20 616c 6c20 776f 726b 206c  rform all work l
+0000c1c0: 6561 7669 6e67 0a20 2061 6c6c 2067 7375  eaving.  all gsu
+0000c1d0: 7469 6c20 6368 696c 6420 7072 6f63 6573  til child proces
+0000c1e0: 7365 7320 6964 6c65 2e0a 2d20 4669 7865  ses idle..- Fixe
+0000c1f0: 6420 6120 6275 6720 7468 6174 2063 6175  d a bug that cau
+0000c200: 7365 6420 6d75 6c74 6970 6c65 2074 6872  sed multiple thr
+0000c210: 6561 6473 206e 6f74 2074 6f20 6265 2075  eads not to be u
+0000c220: 7365 6420 7768 656e 0a20 206d 756c 7469  sed when.  multi
+0000c230: 7072 6f63 6573 7369 6e67 2077 6173 2075  processing was u
+0000c240: 6e61 7661 696c 6162 6c65 2e0a 2d20 4669  navailable..- Fi
+0000c250: 7865 6420 6120 6275 6720 7468 6174 2063  xed a bug that c
+0000c260: 6175 7365 6420 7273 796e 6320 746f 2073  aused rsync to s
+0000c270: 6b69 7020 6669 6c65 7320 7468 6174 2073  kip files that s
+0000c280: 7461 7274 2077 6974 6820 222e 2220 7768  tart with "." wh
+0000c290: 656e 2074 6865 0a20 202d 7220 6f70 7469  en the.  -r opti
+0000c2a0: 6f6e 2077 6173 206e 6f74 2075 7365 642e  on was not used.
+0000c2b0: 0a2d 2046 6978 6564 2061 2062 7567 2074  .- Fixed a bug t
+0000c2c0: 6861 7420 6361 7573 6564 2072 7379 6e63  hat caused rsync
+0000c2d0: 202d 4320 746f 2062 6169 6c20 6f75 7420   -C to bail out 
+0000c2e0: 7768 656e 2069 7420 6661 696c 6564 2074  when it failed t
+0000c2f0: 6f20 7265 6164 0a20 2061 2073 6f75 7263  o read.  a sourc
+0000c300: 6520 6669 6c65 2e0a 2d20 4669 7865 6420  e file..- Fixed 
+0000c310: 6120 6275 6720 7768 6572 6520 6773 7574  a bug where gsut
+0000c320: 696c 2073 7461 7420 7072 696e 7465 6420  il stat printed 
+0000c330: 756e 7761 6e74 6564 206f 7574 7075 7420  unwanted output 
+0000c340: 746f 2073 7464 6572 722e 0a2d 2046 6978  to stderr..- Fix
+0000c350: 6564 2061 2062 7567 2077 6865 7265 2061  ed a bug where a
+0000c360: 2070 6172 616c 6c65 6c20 636f 6d70 6f73   parallel compos
+0000c370: 6974 6520 7570 6c6f 6164 2063 6f75 6c64  ite upload could
+0000c380: 2072 6574 7572 6e20 6120 6e6f 6e7a 6572   return a nonzer
+0000c390: 6f20 6578 6974 0a20 2063 6f64 6520 6576  o exit.  code ev
+0000c3a0: 656e 2074 686f 7567 6820 7468 6520 7570  en though the up
+0000c3b0: 6c6f 6164 2063 6f6d 706c 6574 6564 2073  load completed s
+0000c3c0: 7563 6365 7373 6675 6c6c 792e 2054 6869  uccessfully. Thi
+0000c3d0: 7320 6f63 6375 7272 6564 2069 660a 2020  s occurred if.  
+0000c3e0: 7465 6d70 6f72 6172 7920 636f 6d70 6f6e  temporary compon
+0000c3f0: 656e 7420 6465 6c65 7469 6f6e 2074 7269  ent deletion tri
+0000c400: 6767 6572 6564 2061 2072 6574 7279 2062  ggered a retry b
+0000c410: 7574 2074 6865 206f 7269 6769 6e61 6c20  ut the original 
+0000c420: 7265 7175 6573 740a 2020 7375 6363 6565  request.  succee
+0000c430: 6465 642e 0a2d 2046 6978 6564 2061 2062  ded..- Fixed a b
+0000c440: 7567 2077 6865 7265 2067 7375 7469 6c20  ug where gsutil 
+0000c450: 776f 756c 6420 6578 6974 2077 6974 6820  would exit with 
+0000c460: 636f 6465 2030 2077 6865 6e20 626f 7468  code 0 when both
+0000c470: 2072 756e 6e69 6e67 2069 6e0a 2020 6465   running in.  de
+0000c480: 6275 6720 6d6f 6465 2061 6e64 2065 6e63  bug mode and enc
+0000c490: 6f75 6e74 6572 696e 6720 616e 2075 6e68  ountering an unh
+0000c4a0: 616e 646c 6564 2065 7863 6570 7469 6f6e  andled exception
+0000c4b0: 2e0a 2d20 4669 7865 6420 6120 6275 6720  ..- Fixed a bug 
+0000c4c0: 7768 6572 6520 6773 7574 696c 2077 6f75  where gsutil wou
+0000c4d0: 6c64 2073 7567 6765 7374 2075 7369 6e67  ld suggest using
+0000c4e0: 2070 6172 616c 6c65 6c20 636f 6d70 6f73   parallel compos
+0000c4f0: 6974 6520 7570 6c6f 6164 730a 2020 6d75  ite uploads.  mu
+0000c500: 6c74 6970 6c65 2074 696d 6573 2e0a 0a4f  ltiple times...O
+0000c510: 7468 6572 2043 6861 6e67 6573 0a2d 2d2d  ther Changes.---
+0000c520: 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d 2042 7563  ----------.- Buc
+0000c530: 6b65 7420 7265 6d6f 7661 6c20 6973 206e  ket removal is n
+0000c540: 6f77 2073 7570 706f 7274 6564 2065 7665  ow supported eve
+0000c550: 6e20 6966 2062 696c 6c69 6e67 2069 7320  n if billing is 
+0000c560: 6469 7361 626c 6564 2066 6f72 2074 6861  disabled for tha
+0000c570: 7420 6275 636b 6574 2e0a 2d20 5265 6661  t bucket..- Refa
+0000c580: 6374 6f72 6564 2057 696e 646f 7773 2069  ctored Windows i
+0000c590: 6e73 7461 6c6c 7320 746f 206e 6f20 6c6f  nstalls to no lo
+0000c5a0: 6e67 6572 2075 7365 2061 6e79 206d 756c  nger use any mul
+0000c5b0: 7469 7072 6f63 6573 7369 6e67 206d 6f64  tiprocessing mod
+0000c5c0: 756c 650a 2020 6675 6e63 7469 6f6e 732c  ule.  functions,
+0000c5d0: 2061 7320 6773 7574 696c 2068 6173 206e   as gsutil has n
+0000c5e0: 6576 6572 2073 7570 706f 7274 6564 206d  ever supported m
+0000c5f0: 756c 7469 706c 6520 7072 6f63 6573 7365  ultiple processe
+0000c600: 7320 6f6e 2057 696e 646f 7773 2e0a 2020  s on Windows..  
+0000c610: 4d75 6c74 6974 6872 6561 6469 6e67 2069  Multithreading i
+0000c620: 7320 756e 6166 6665 6374 6564 2061 6e64  s unaffected and
+0000c630: 2073 7469 6c6c 2061 7661 696c 6162 6c65   still available
+0000c640: 206f 6e20 5769 6e64 6f77 732e 0a2d 2041   on Windows..- A
+0000c650: 6c6c 2064 6f77 6e6c 6f61 6473 2061 7265  ll downloads are
+0000c660: 206e 6f77 2077 7269 7474 656e 2074 6f20   now written to 
+0000c670: 6120 7465 6d70 6f72 6172 7920 6669 6c65  a temporary file
+0000c680: 2077 6974 6820 6120 225f 2e67 7374 6d70   with a "_.gstmp
+0000c690: 2220 7375 6666 6978 0a20 2077 6869 6c65  " suffix.  while
+0000c6a0: 2074 6865 2064 6f77 6e6c 6f61 6420 6973   the download is
+0000c6b0: 2073 7469 6c6c 2069 6e20 7072 6f67 7265   still in progre
+0000c6c0: 7373 2e0a 2d20 5265 2d68 6173 6869 6e67  ss..- Re-hashing
+0000c6d0: 206f 6620 6578 6973 7469 6e67 2062 7974   of existing byt
+0000c6e0: 6573 2077 6865 6e20 7265 7375 6d69 6e67  es when resuming
+0000c6f0: 2064 6f77 6e6c 6f61 6473 206e 6f77 2064   downloads now d
+0000c700: 6973 706c 6179 7320 7072 6f67 7265 7373  isplays progress
+0000c710: 2e0a 2d20 5265 6475 6365 6420 7468 6520  ..- Reduced the 
+0000c720: 746f 7461 6c20 6e75 6d62 6572 206f 6620  total number of 
+0000c730: 6d75 6c74 6970 726f 6365 7373 696e 672e  multiprocessing.
+0000c740: 4d61 6e61 6765 7220 7072 6f63 6573 7365  Manager processe
+0000c750: 7320 746f 2074 776f 2e0a 2d20 5468 6520  s to two..- The 
+0000c760: 726d 2063 6f6d 6d61 6e64 206e 6f77 2063  rm command now c
+0000c770: 6f72 7265 6374 6c79 2063 6f75 6e74 7320  orrectly counts 
+0000c780: 7468 6520 6e75 6d62 6572 206f 6620 6f62  the number of ob
+0000c790: 6a65 6374 7320 7468 6174 2063 6f75 6c64  jects that could
+0000c7a0: 0a20 206e 6f74 2062 6520 7265 6d6f 7665  .  not be remove
+0000c7b0: 642e 0a2d 2049 6e63 7265 6173 6564 2074  d..- Increased t
+0000c7c0: 6865 2064 6566 6175 6c74 2072 6574 7269  he default retri
+0000c7d0: 6573 2074 6f20 6d61 7463 6820 7468 6520  es to match the 
+0000c7e0: 476f 6f67 6c65 2043 6c6f 7564 2053 746f  Google Cloud Sto
+0000c7f0: 7261 6765 2053 4c41 2e0a 2020 4279 2064  rage SLA..  By d
+0000c800: 6566 6175 6c74 2c20 6773 7574 696c 2077  efault, gsutil w
+0000c810: 696c 6c20 6e6f 7720 7265 7472 7920 3233  ill now retry 23
+0000c820: 2074 696d 6573 2077 6974 6820 6578 706f   times with expo
+0000c830: 6e65 6e74 6961 6c20 6261 636b 6f66 6620  nential backoff 
+0000c840: 7570 0a20 2074 6f20 3332 2073 6563 6f6e  up.  to 32 secon
+0000c850: 6473 2c20 666f 7220 6120 746f 7461 6c20  ds, for a total 
+0000c860: 7469 6d65 7370 616e 206f 6620 7e31 3020  timespan of ~10 
+0000c870: 6d69 6e75 7465 732e 0a2d 2049 6d70 726f  minutes..- Impro
+0000c880: 7665 6420 6275 636b 6574 2073 7562 6469  ved bucket subdi
+0000c890: 7265 6374 6f72 7920 6368 6563 6b73 2074  rectory checks t
+0000c8a0: 6f20 6120 7369 6e67 6c65 2048 5454 5020  o a single HTTP 
+0000c8b0: 6361 6c6c 2e20 4465 7465 6374 696f 6e20  call. Detection 
+0000c8c0: 6f66 0a20 205f 2466 6f6c 6465 7224 2070  of.  _$folder$ p
+0000c8d0: 6c61 6365 686f 6c64 6572 206f 626a 6563  laceholder objec
+0000c8e0: 7473 2069 7320 6e6f 7720 6576 656e 7475  ts is now eventu
+0000c8f0: 616c 6c79 2063 6f6e 7369 7374 656e 742e  ally consistent.
+0000c900: 0a2d 2045 6c69 6d69 6e61 7465 6420 7477  .- Eliminated tw
+0000c910: 6f20 756e 6e65 6365 7373 6172 7920 4854  o unnecessary HT
+0000c920: 5450 2063 616c 6c73 2077 6865 6e20 7065  TP calls when pe
+0000c930: 7266 6f72 6d69 6e67 2075 706c 6f61 6473  rforming uploads
+0000c940: 2076 6961 0a20 2074 6865 2063 702c 206d   via.  the cp, m
+0000c950: 762c 206f 7220 7273 796e 6320 636f 6d6d  v, or rsync comm
+0000c960: 616e 6473 2e0a 2d20 5570 6461 7465 6420  ands..- Updated 
+0000c970: 646f 6375 6d65 6e74 6174 696f 6e20 666f  documentation fo
+0000c980: 7220 7365 7665 7261 6c20 746f 7069 6373  r several topics
+0000c990: 2069 6e63 6c75 6469 6e67 2061 636c 2c20   including acl, 
+0000c9a0: 6361 6368 652d 636f 6e74 726f 6c2c 0a20  cache-control,. 
+0000c9b0: 2063 7263 6d6f 642c 2063 702c 206d 622c   crcmod, cp, mb,
+0000c9c0: 2072 7379 6e63 2c20 616e 6420 7375 6264   rsync, and subd
+0000c9d0: 6972 732e 0a2d 2041 6464 6564 2061 2077  irs..- Added a w
+0000c9e0: 6172 6e69 6e67 2061 626f 7574 2075 7369  arning about usi
+0000c9f0: 6e67 2070 6172 616c 6c65 6c20 636f 6d70  ng parallel comp
+0000ca00: 6f73 6974 6520 7570 6c6f 6164 2077 6974  osite upload wit
+0000ca10: 6820 4e45 4152 4c49 4e45 0a20 2073 746f  h NEARLINE.  sto
+0000ca20: 7261 6765 2d63 6c61 7373 2062 7563 6b65  rage-class bucke
+0000ca30: 7473 2e0a 0a52 656c 6561 7365 2034 2e31  ts...Release 4.1
+0000ca40: 3320 2872 656c 6561 7365 2064 6174 653a  3 (release date:
+0000ca50: 2032 3031 352d 3036 2d30 3329 0a3d 3d3d   2015-06-03).===
+0000ca60: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0000ca70: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0000ca80: 3d3d 3d3d 0a4e 6577 2046 6561 7475 7265  ====.New Feature
+0000ca90: 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d  s.------------.-
+0000caa0: 2041 6464 6564 202d 5520 666c 6167 2074   Added -U flag t
+0000cab0: 6f20 6370 2061 6e64 2072 7379 6e63 2063  o cp and rsync c
+0000cac0: 6f6d 6d61 6e64 7320 746f 2061 6c6c 6f77  ommands to allow
+0000cad0: 2073 6b69 7070 696e 6720 6f66 2075 6e73   skipping of uns
+0000cae0: 7570 706f 7274 6564 0a20 206f 626a 6563  upported.  objec
+0000caf0: 7420 7479 7065 732e 0a2d 2041 6464 6564  t types..- Added
+0000cb00: 2073 7570 706f 7274 2066 6f72 2047 6f6f   support for Goo
+0000cb10: 676c 6520 4465 7665 6c6f 7065 7220 5368  gle Developer Sh
+0000cb20: 656c 6c20 6372 6564 656e 7469 616c 732e  ell credentials.
+0000cb30: 0a0a 4275 6720 4669 7865 730a 2d2d 2d2d  ..Bug Fixes.----
+0000cb40: 2d2d 2d2d 2d0a 2d20 5072 6563 6f6e 6469  -----.- Precondi
+0000cb50: 7469 6f6e 2068 6561 6465 7273 2028 782d  tion headers (x-
+0000cb60: 676f 6f67 2d69 662d 2e2e 2e29 2061 7265  goog-if-...) are
+0000cb70: 206e 6f77 2072 6573 7065 6374 6564 2066   now respected f
+0000cb80: 6f72 2074 6865 2073 6574 6d65 7461 0a20  or the setmeta. 
+0000cb90: 2063 6f6d 6d61 6e64 2e0a 2d20 4669 7865   command..- Fixe
+0000cba0: 6420 616e 2069 6e64 6578 206f 7574 206f  d an index out o
+0000cbb0: 6620 7261 6e67 6520 6572 726f 7220 7468  f range error th
+0000cbc0: 6174 2063 6f75 6c64 206f 6363 7572 2077  at could occur w
+0000cbd0: 6974 6820 616e 2065 6d70 7479 0a20 2070  ith an empty.  p
+0000cbe0: 6172 616c 6c65 6c20 636f 6d70 6f73 6974  arallel composit
+0000cbf0: 6520 7570 6c6f 6164 2074 7261 636b 6572  e upload tracker
+0000cc00: 2066 696c 652e 0a2d 2054 6865 2073 7461   file..- The sta
+0000cc10: 7420 636f 6d6d 616e 6420 6f75 7470 7574  t command output
+0000cc20: 7320 6572 726f 7273 2074 6f20 7374 6465  s errors to stde
+0000cc30: 7272 2069 6e73 7465 6164 206f 6620 7374  rr instead of st
+0000cc40: 646f 7574 2e0a 2d20 4669 7865 6420 7477  dout..- Fixed tw
+0000cc50: 6f20 706f 7373 6962 6c65 2073 6f75 7263  o possible sourc
+0000cc60: 6573 206f 6620 5265 7375 6d61 626c 6555  es of ResumableU
+0000cc70: 706c 6f61 6453 7461 7274 4f76 6572 4578  ploadStartOverEx
+0000cc80: 6365 7074 696f 6e20 6672 6f6d 0a20 2068  ception from.  h
+0000cc90: 7474 706c 6962 3220 616e 6420 6f61 7574  ttplib2 and oaut
+0000cca0: 6832 636c 6965 6e74 2e0a 2d20 4669 7865  h2client..- Fixe
+0000ccb0: 6420 6120 6275 6720 696e 2074 6865 2063  d a bug in the c
+0000ccc0: 6f6d 706f 7365 2063 6f6d 6d61 6e64 2077  ompose command w
+0000ccd0: 6865 7265 2061 206d 6973 7369 6e67 2073  here a missing s
+0000cce0: 6f75 7263 6520 6f62 6a65 6374 2072 6573  ource object res
+0000ccf0: 756c 7465 640a 2020 696e 2061 6e20 6572  ulted.  in an er
+0000cd00: 726f 7220 6d65 7373 6167 6520 636c 6169  ror message clai
+0000cd10: 6d69 6e67 2074 6865 2064 6573 7469 6e61  ming the destina
+0000cd20: 7469 6f6e 206f 626a 6563 7420 7761 7320  tion object was 
+0000cd30: 6d69 7373 696e 672e 0a0a 4f74 6865 7220  missing...Other 
+0000cd40: 4368 616e 6765 730a 2d2d 2d2d 2d2d 2d2d  Changes.--------
+0000cd50: 2d2d 2d2d 2d0a 2d20 4164 6465 6420 6120  -----.- Added a 
+0000cd60: 6865 6c70 2073 6563 7469 6f6e 206f 6e20  help section on 
+0000cd70: 7468 726f 7474 6c69 6e67 2067 7375 7469  throttling gsuti
+0000cd80: 6c2e 0a2d 2052 6573 756d 6162 6c65 2075  l..- Resumable u
+0000cd90: 706c 6f61 6473 2077 696c 6c20 6e6f 7720  ploads will now 
+0000cda0: 7374 6172 7420 6f76 6572 2069 6620 6120  start over if a 
+0000cdb0: 5055 5420 746f 2074 6865 2075 706c 6f61  PUT to the uploa
+0000cdc0: 6420 4944 2072 6574 7572 6e73 0a20 2061  d ID returns.  a
+0000cdd0: 6e20 4854 5450 2034 3034 2e20 5072 6576  n HTTP 404. Prev
+0000cde0: 696f 7573 6c79 2074 6869 7320 6265 6861  iously this beha
+0000cdf0: 7669 6f72 2061 7070 6c69 6564 206f 6e6c  vior applied onl
+0000ce00: 7920 746f 2061 6e20 4854 5450 2034 3130  y to an HTTP 410
+0000ce10: 2e0a 2d20 584d 4c20 4150 4920 7265 7375  ..- XML API resu
+0000ce20: 6d61 626c 6520 7570 6c6f 6164 7320 6e6f  mable uploads no
+0000ce30: 7720 7265 7472 7920 6f6e 2048 5454 5020  w retry on HTTP 
+0000ce40: 3432 3920 6572 726f 7273 2c20 6d61 7463  429 errors, matc
+0000ce50: 6869 6e67 2074 6865 0a20 2062 6568 6176  hing the.  behav
+0000ce60: 696f 7220 6f66 204a 534f 4e20 4150 4920  ior of JSON API 
+0000ce70: 7265 7375 6d61 626c 6520 7570 6c6f 6164  resumable upload
+0000ce80: 732e 0a2d 2049 6d70 726f 7665 6420 7265  s..- Improved re
+0000ce90: 7370 6f6e 7365 2074 6f20 7072 6f63 6573  sponse to proces
+0000cea0: 7320 6b69 6c6c 2073 6967 6e61 6c73 2c20  s kill signals, 
+0000ceb0: 7265 6475 6369 6e67 2074 6865 206c 696b  reducing the lik
+0000cec0: 656c 6968 6f6f 6420 6f66 0a20 206c 6561  elihood of.  lea
+0000ced0: 7669 6e67 206f 7270 6861 6e65 6420 6368  ving orphaned ch
+0000cee0: 696c 6420 7072 6f63 6573 7365 7320 616e  ild processes an
+0000cef0: 6420 7465 6d70 6f72 6172 7920 6669 6c65  d temporary file
+0000cf00: 732e 0a2d 2042 7563 6b65 7420 6c69 6665  s..- Bucket life
+0000cf10: 6379 636c 6520 636f 6e66 6967 7572 6174  cycle configurat
+0000cf20: 696f 6e20 6e6f 7720 776f 726b 7320 666f  ion now works fo
+0000cf30: 7220 5333 2e0a 2d20 5265 6d6f 7665 6420  r S3..- Removed 
+0000cf40: 7468 6520 6465 7072 6563 6174 6564 2073  the deprecated s
+0000cf50: 6574 6d65 7461 202d 6e20 6f70 7469 6f6e  etmeta -n option
+0000cf60: 2e0a 0a0a 5265 6c65 6173 6520 342e 3132  ....Release 4.12
+0000cf70: 2028 7265 6c65 6173 6520 6461 7465 3a20   (release date: 
+0000cf80: 3230 3135 2d30 342d 3230 290a 3d3d 3d3d  2015-04-20).====
+0000cf90: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0000cfa0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0000cfb0: 3d3d 3d0a 4e65 7720 4665 6174 7572 6573  ===.New Features
+0000cfc0: 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 2d20  .------------.- 
+0000cfd0: 4164 6465 6420 7375 7070 6f72 7420 666f  Added support fo
+0000cfe0: 7220 4a53 4f4e 2d66 6f72 6d61 7420 7365  r JSON-format se
+0000cff0: 7276 6963 6520 6163 636f 756e 7420 7072  rvice account pr
+0000d000: 6976 6174 6520 6b65 7920 6669 6c65 732e  ivate key files.
+0000d010: 0a2d 2041 6464 6564 2073 7570 706f 7274  .- Added support
+0000d020: 2066 6f72 2074 6865 2052 6577 7269 7465   for the Rewrite
+0000d030: 2041 5049 2028 4a53 4f4e 2041 5049 206f   API (JSON API o
+0000d040: 6e6c 7929 2e20 5468 6973 2069 7320 7573  nly). This is us
+0000d050: 6564 2066 6f72 0a20 2061 6c6c 2063 6f70  ed for.  all cop
+0000d060: 6965 7320 7769 7468 696e 2074 6865 2047  ies within the G
+0000d070: 6f6f 676c 6520 436c 6f75 6420 616e 6420  oogle Cloud and 
+0000d080: 7375 7070 6f72 7473 2063 6f70 7969 6e67  supports copying
+0000d090: 206f 626a 6563 7473 2061 6372 6f73 730a   objects across.
+0000d0a0: 2020 7374 6f72 6167 6520 636c 6173 7365    storage classe
+0000d0b0: 7320 616e 642f 6f72 206c 6f63 6174 696f  s and/or locatio
+0000d0c0: 6e73 2e0a 0a42 7567 2046 6978 6573 0a2d  ns...Bug Fixes.-
+0000d0d0: 2d2d 2d2d 2d2d 2d2d 0a2d 2046 6978 6564  --------.- Fixed
+0000d0e0: 2061 2062 7567 2074 6861 7420 636f 756c   a bug that coul
+0000d0f0: 6420 6361 7573 6520 646f 776e 6c6f 6164  d cause download
+0000d100: 7320 746f 2068 6176 6520 6120 6861 7368  s to have a hash
+0000d110: 206d 6973 6d61 7463 6820 2861 6e64 2064   mismatch (and d
+0000d120: 656c 6574 696f 6e0a 2020 6f66 2074 6865  eletion.  of the
+0000d130: 2063 6f72 7275 7074 6564 2066 696c 6529   corrupted file)
+0000d140: 2077 6865 6e20 7265 7375 6d65 6420 6163   when resumed ac
+0000d150: 726f 7373 2070 726f 6365 7373 2062 7265  ross process bre
+0000d160: 616b 7320 7669 6120 6120 7472 6163 6b65  aks via a tracke
+0000d170: 7220 6669 6c65 2e0a 0a4f 7468 6572 2043  r file...Other C
+0000d180: 6861 6e67 6573 0a2d 2d2d 2d2d 2d2d 2d2d  hanges.---------
+0000d190: 2d2d 2d2d 0a2d 2055 7064 6174 6564 2064  ----.- Updated d
+0000d1a0: 6f63 756d 656e 7461 7469 6f6e 2061 6e64  ocumentation and
+0000d1b0: 2065 7861 6d70 6c65 7320 666f 7220 7365   examples for se
+0000d1c0: 7665 7261 6c20 746f 7069 6373 2069 6e63  veral topics inc
+0000d1d0: 6c75 6469 6e67 0a20 2061 636c 2c20 6370  luding.  acl, cp
+0000d1e0: 2c20 6465 762c 2073 6967 6e75 726c 2c20  , dev, signurl, 
+0000d1f0: 7374 6174 2c20 616e 6420 7769 6c64 6361  stat, and wildca
+0000d200: 7264 732e 0a0a 0a52 656c 6561 7365 2034  rds....Release 4
+0000d210: 2e31 3120 2872 656c 6561 7365 2064 6174  .11 (release dat
+0000d220: 653a 2032 3031 352d 3033 2d31 3029 0a3d  e: 2015-03-10).=
+0000d230: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0000d240: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0000d250: 3d3d 3d3d 3d3d 0a4e 6577 2046 6561 7475  ======.New Featu
+0000d260: 7265 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  res.------------
+0000d270: 0a2d 2041 6464 6564 204e 6561 726c 696e  .- Added Nearlin
+0000d280: 6520 7374 6f72 6167 6520 636c 6173 7320  e storage class 
+0000d290: 7375 7070 6f72 7420 746f 2074 6865 206d  support to the m
+0000d2a0: 6220 636f 6d6d 616e 642e 0a0a 4275 6720  b command...Bug 
+0000d2b0: 4669 7865 730a 2d2d 2d2d 2d2d 2d2d 2d0a  Fixes.---------.
+0000d2c0: 2d20 4669 7865 6420 6120 6275 6720 666f  - Fixed a bug fo
+0000d2d0: 7220 7374 7265 616d 696e 6720 7570 6c6f  r streaming uplo
+0000d2e0: 6164 7320 7468 6174 2063 6f75 6c64 206f  ads that could o
+0000d2f0: 6363 6173 696f 6e61 6c6c 7920 6361 7573  ccasionally caus
+0000d300: 6520 6120 4854 5450 2034 3130 0a20 2066  e a HTTP 410.  f
+0000d310: 726f 6d20 7468 6520 7365 7276 6963 6520  rom the service 
+0000d320: 6f72 2061 2068 6173 6820 6d69 736d 6174  or a hash mismat
+0000d330: 6368 2028 616e 6420 6465 6c65 7469 6f6e  ch (and deletion
+0000d340: 206f 6620 7468 6520 636f 7272 7574 7065   of the corrutpe
+0000d350: 6420 6669 6c65 292e 0a2d 2046 6978 6564  d file)..- Fixed
+0000d360: 2061 6e20 4f76 6572 666c 6f77 4572 726f   an OverflowErro
+0000d370: 7220 7468 6174 206f 6363 7572 7265 6420  r that occurred 
+0000d380: 7768 656e 2075 706c 6f61 6469 6e67 2066  when uploading f
+0000d390: 696c 6573 203e 2034 4769 4220 6f6e 2061  iles > 4GiB on a
+0000d3a0: 2033 322d 6269 740a 2020 6f70 6572 6174   32-bit.  operat
+0000d3b0: 696e 6720 7379 7374 656d 2e0a 0a4f 7468  ing system...Oth
+0000d3c0: 6572 2043 6861 6e67 6573 0a2d 2d2d 2d2d  er Changes.-----
+0000d3d0: 2d2d 2d2d 2d2d 2d2d 0a2d 2041 6464 6564  --------.- Added
+0000d3e0: 2064 6f63 756d 656e 7461 7469 6f6e 2061   documentation a
+0000d3f0: 726f 756e 6420 7573 696e 6720 7468 6520  round using the 
+0000d400: 436f 6e74 656e 742d 4d44 3520 6865 6164  Content-MD5 head
+0000d410: 6572 2074 6f20 6578 7465 6e64 2069 6e74  er to extend int
+0000d420: 6567 7269 7479 0a20 2063 6865 636b 696e  egrity.  checkin
+0000d430: 6720 746f 2069 6e63 6c75 6465 2063 6865  g to include che
+0000d440: 636b 7375 6d73 2063 6f6d 7075 7465 6420  cksums computed 
+0000d450: 6279 2061 2063 6c69 656e 742d 7369 6465  by a client-side
+0000d460: 2063 6f6e 7465 6e74 2070 6970 656c 696e   content pipelin
+0000d470: 652e 0a0a 0a52 656c 6561 7365 2034 2e31  e....Release 4.1
+0000d480: 3020 2872 656c 6561 7365 2064 6174 653a  0 (release date:
+0000d490: 2032 3031 352d 3033 2d30 3329 0a3d 3d3d   2015-03-03).===
+0000d4a0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0000d4b0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0000d4c0: 3d3d 3d3d 0a42 7567 2046 6978 6573 0a2d  ====.Bug Fixes.-
+0000d4d0: 2d2d 2d2d 2d2d 2d2d 0a2d 2046 6978 6564  --------.- Fixed
+0000d4e0: 2061 2062 7567 2074 6861 7420 636f 756c   a bug that coul
+0000d4f0: 6420 6361 7573 6520 756e 6465 7465 6374  d cause undetect
+0000d500: 6564 2064 6174 6120 636f 7272 7570 7469  ed data corrupti
+0000d510: 6f6e 2028 7072 6573 6572 7669 6e67 2069  on (preserving i
+0000d520: 6e63 6f72 7265 6374 0a20 2064 6174 6129  ncorrect.  data)
+0000d530: 2069 6620 6120 7374 7265 616d 696e 6720   if a streaming 
+0000d540: 7570 6c6f 6164 2065 6e63 6f75 6e74 6572  upload encounter
+0000d550: 6564 2061 2073 6572 7669 6365 2065 7272  ed a service err
+0000d560: 6f72 206f 6e20 6e6f 6e2d 384b 6942 2d61  or on non-8KiB-a
+0000d570: 6c69 676e 6564 0a20 2062 6f75 6e64 6172  ligned.  boundar
+0000d580: 792e 0a2d 2046 6978 6564 2061 2062 7567  y..- Fixed a bug
+0000d590: 2074 6861 7420 6361 7573 6564 2064 6f77   that caused dow
+0000d5a0: 6e6c 6f61 6473 2074 6f20 6265 2074 7275  nloads to be tru
+0000d5b0: 6e63 6174 6564 2069 6620 7468 6520 636f  ncated if the co
+0000d5c0: 6e6e 6563 7469 6f6e 2062 726f 6b65 2c0a  nnection broke,.
+0000d5d0: 2020 7265 7375 6c74 696e 6720 696e 2061    resulting in a
+0000d5e0: 2068 6173 6820 6d69 736d 6174 6368 2028   hash mismatch (
+0000d5f0: 616e 6420 6465 6c65 7469 6f6e 206f 6620  and deletion of 
+0000d600: 7468 6520 636f 7272 7570 7465 6420 6669  the corrupted fi
+0000d610: 6c65 2920 666f 7220 7468 6174 0a20 2064  le) for that.  d
+0000d620: 6f77 6e6c 6f61 642e 0a2d 2046 6978 6564  ownload..- Fixed
+0000d630: 2061 2066 6f72 6d61 7420 7374 7269 6e67   a format string
+0000d640: 2061 7267 756d 656e 7473 2065 7272 6f72   arguments error
+0000d650: 2074 6861 7420 6f63 6375 7272 6564 2069   that occurred i
+0000d660: 6620 6120 646f 776e 6c6f 6164 2065 7868  f a download exh
+0000d670: 6175 7374 6564 0a20 2061 6c6c 2072 6574  austed.  all ret
+0000d680: 7269 6573 2e0a 0a4f 7468 6572 2043 6861  ries...Other Cha
+0000d690: 6e67 6573 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d  nges.-----------
+0000d6a0: 2d2d 0a2d 2054 6865 206c 6966 6563 7963  --.- The lifecyc
+0000d6b0: 6c65 2063 6f6d 6d61 6e64 206e 6f77 2061  le command now a
+0000d6c0: 6363 6570 7473 204a 534f 4e20 696e 7075  ccepts JSON inpu
+0000d6d0: 7420 696e 2074 6865 2066 6f72 6d20 6f66  t in the form of
+0000d6e0: 0a20 2022 7b20 226c 6966 6563 7963 6c65  .  "{ "lifecycle
+0000d6f0: 223a 207b 2022 7275 6c65 2220 2e2e 2e22  ": { "rule" ..."
+0000d700: 2069 6e20 6164 6469 7469 6f6e 2074 6f20   in addition to 
+0000d710: 227b 2022 7275 6c65 223a 202e 2e2e 222e  "{ "rule": ...".
+0000d720: 0a2d 2049 6d70 726f 7665 6420 6163 6365  .- Improved acce
+0000d730: 7373 2074 6f6b 656e 2065 7870 6972 7920  ss token expiry 
+0000d740: 6c6f 6769 6320 666f 7220 4743 4520 6372  logic for GCE cr
+0000d750: 6564 656e 7469 616c 732e 0a0a 0a52 656c  edentials....Rel
+0000d760: 6561 7365 2034 2e39 2028 7265 6c65 6173  ease 4.9 (releas
+0000d770: 6520 6461 7465 3a20 3230 3135 2d30 322d  e date: 2015-02-
+0000d780: 3133 290a 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  13).============
+0000d790: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0000d7a0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d0a 4e65 7720  ===========.New 
+0000d7b0: 4665 6174 7572 6573 0a2d 2d2d 2d2d 2d2d  Features.-------
+0000d7c0: 2d2d 2d2d 2d0a 2d20 5768 656e 2075 7369  -----.- When usi
+0000d7d0: 6e67 2074 6865 204a 534f 4e20 4150 492c  ng the JSON API,
+0000d7e0: 2074 6865 2063 6820 6163 6c2f 6465 6661   the ch acl/defa
+0000d7f0: 636c 2073 7562 636f 6d6d 616e 6420 6e6f  cl subcommand no
+0000d800: 7720 7375 7070 6f72 7473 0a20 2070 726f  w supports.  pro
+0000d810: 6a65 6374 2067 726f 7570 7320 7669 6120  ject groups via 
+0000d820: 7468 6520 2d70 2066 6c61 672e 2046 6f72  the -p flag. For
+0000d830: 2064 6574 6169 6c73 2c20 7365 6520 2267   details, see "g
+0000d840: 7375 7469 6c20 6865 6c70 2061 636c 2063  sutil help acl c
+0000d850: 6822 2e0a 0a42 7567 2046 6978 6573 0a2d  h"...Bug Fixes.-
+0000d860: 2d2d 2d2d 2d2d 2d2d 0a2d 2046 6978 6564  --------.- Fixed
+0000d870: 2061 2062 7567 2074 6861 7420 6361 7573   a bug that caus
+0000d880: 6564 2064 6169 7379 2d63 6861 696e 2063  ed daisy-chain c
+0000d890: 6f70 6965 7320 2869 6e63 6c75 6469 6e67  opies (including
+0000d8a0: 2063 726f 7373 2d70 726f 7669 6465 720a   cross-provider.
+0000d8b0: 2020 636f 7069 6573 2920 666f 7220 6669    copies) for fi
+0000d8c0: 6c65 7320 6c61 7267 6520 7468 616e 2031  les large than 1
+0000d8d0: 3030 4d69 4220 746f 2066 6169 6c2e 0a2d  00MiB to fail..-
+0000d8e0: 2046 6978 6564 2061 2062 7567 2074 6861   Fixed a bug tha
+0000d8f0: 7420 6361 7573 6564 2073 7472 6561 6d69  t caused streami
+0000d900: 6e67 2075 706c 6f61 6473 2074 6861 6e20  ng uploads than 
+0000d910: 7261 6e20 666f 7220 6c6f 6e67 6572 2074  ran for longer t
+0000d920: 6861 6e0a 2020 616e 2068 6f75 7220 746f  han.  an hour to
+0000d930: 2066 6169 6c20 7769 7468 2048 5454 5020   fail with HTTP 
+0000d940: 3430 3073 2e0a 2d20 4669 7865 6420 6120  400s..- Fixed a 
+0000d950: 6275 6720 7768 6572 6520 7065 7266 6469  bug where perfdi
+0000d960: 6167 2077 6f75 6c64 206e 6f74 2070 726f  ag would not pro
+0000d970: 7065 726c 7920 636c 6561 6e20 7570 2069  perly clean up i
+0000d980: 7473 2074 6573 7420 6669 6c65 732e 0a2d  ts test files..-
+0000d990: 2046 6978 6564 2061 2062 7567 2077 6865   Fixed a bug whe
+0000d9a0: 7265 2075 7369 6e67 206c 7320 7769 7468  re using ls with
+0000d9b0: 2074 6865 2058 4d4c 2041 5049 2063 6f75   the XML API cou
+0000d9c0: 6c64 206d 6973 7461 6b65 6e6c 7920 7265  ld mistakenly re
+0000d9d0: 706f 7274 2062 7563 6b65 740a 2020 636f  port bucket.  co
+0000d9e0: 6e66 6967 7572 6174 696f 6e20 6173 2070  nfiguration as p
+0000d9f0: 7265 7365 6e74 2e0a 0a4f 7468 6572 2043  resent...Other C
+0000da00: 6861 6e67 6573 0a2d 2d2d 2d2d 2d2d 2d2d  hanges.---------
+0000da10: 2d2d 2d2d 0a2d 2055 7064 6174 6564 2064  ----.- Updated d
+0000da20: 6f63 756d 656e 7461 7469 6f6e 2066 6f72  ocumentation for
+0000da30: 206d 6574 6164 6174 612c 2072 6574 7269   metadata, retri
+0000da40: 6573 2c20 7365 6375 7269 7479 2c20 616e  es, security, an
+0000da50: 6420 7375 6264 6972 732e 0a2d 2054 7261  d subdirs..- Tra
+0000da60: 636b 6572 2066 696c 6573 2061 7265 206e  cker files are n
+0000da70: 6f20 6c6f 6e67 6572 2077 7269 7474 656e  o longer written
+0000da80: 2066 6f72 2073 6d61 6c6c 2064 6f77 6e6c   for small downl
+0000da90: 6f61 6473 2e0a 0a0a 5265 6c65 6173 6520  oads....Release 
+0000daa0: 342e 3820 2872 656c 6561 7365 2064 6174  4.8 (release dat
+0000dab0: 653a 2032 3031 352d 3031 2d32 3329 0a3d  e: 2015-01-23).=
+0000dac0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0000dad0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0000dae0: 3d3d 3d3d 3d3d 0a4e 6577 2046 6561 7475  ======.New Featu
+0000daf0: 7265 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  res.------------
+0000db00: 0a2d 2067 7375 7469 6c20 6e6f 7720 7375  .- gsutil now su
+0000db10: 7070 6f72 7473 2048 5454 5020 7072 6f78  pports HTTP prox
+0000db20: 7920 636f 6e66 6967 7572 6174 696f 6e20  y configuration 
+0000db30: 7669 6120 7468 6520 6874 7470 5f70 726f  via the http_pro
+0000db40: 7879 2c0a 2020 6874 7470 735f 7072 6f78  xy,.  https_prox
+0000db50: 792c 206f 7220 4854 5450 535f 5052 4f58  y, or HTTPS_PROX
+0000db60: 5920 656e 7669 726f 6e6d 656e 7420 7661  Y environment va
+0000db70: 7269 6162 6c65 732e 2054 6869 7320 636f  riables. This co
+0000db80: 6e66 6967 7572 6174 696f 6e0a 2020 6973  nfiguration.  is
+0000db90: 2075 7365 6420 6f6e 6c79 2069 6620 7072   used only if pr
+0000dba0: 6f78 7920 636f 6e66 6967 7572 6174 696f  oxy configuratio
+0000dbb0: 6e20 6973 206e 6f74 2070 7265 7365 6e74  n is not present
+0000dbc0: 2069 6e20 7468 6520 2e62 6f74 6f0a 2020   in the .boto.  
+0000dbd0: 636f 6e66 6967 7572 6174 696f 6e20 6669  configuration fi
+0000dbe0: 6c65 2e0a 2d20 6773 7574 696c 2072 7379  le..- gsutil rsy
+0000dbf0: 6e63 206e 6f77 2073 7570 706f 7274 7320  nc now supports 
+0000dc00: 7265 6765 782d 6261 7365 6420 736f 7572  regex-based sour
+0000dc10: 6365 2061 6e64 2064 6573 7469 6e61 7469  ce and destinati
+0000dc20: 6f6e 2055 524c 0a20 2065 7863 6c75 7369  on URL.  exclusi
+0000dc30: 6f6e 2076 6961 2074 6865 202d 7820 666c  on via the -x fl
+0000dc40: 6167 2e0a 2d20 5468 6520 726d 2063 6f6d  ag..- The rm com
+0000dc50: 6d61 6e64 206e 6f77 2073 7570 706f 7274  mand now support
+0000dc60: 7320 6172 6775 6d65 6e74 7320 6f6e 2073  s arguments on s
+0000dc70: 7464 696e 2076 6961 2074 6865 202d 4920  tdin via the -I 
+0000dc80: 666c 6167 2e0a 0a42 7567 2046 6978 6573  flag...Bug Fixes
+0000dc90: 0a2d 2d2d 2d2d 2d2d 2d2d 0a2d 2046 6978  .---------.- Fix
+0000dca0: 6564 2061 2062 7567 2077 6865 7265 2070  ed a bug where p
+0000dcb0: 6572 6664 6961 6720 776f 756c 6420 6661  erfdiag would fa
+0000dcc0: 696c 2069 6620 6e65 7473 7461 7420 7761  il if netstat wa
+0000dcd0: 7320 6e6f 7420 6176 6169 6c61 626c 652e  s not available.
+0000dce0: 0a2d 2046 6978 6564 2061 2062 7567 2077  .- Fixed a bug w
+0000dcf0: 6865 7265 2074 656d 706f 7261 7279 2063  here temporary c
+0000dd00: 615f 6365 7274 7320 6669 6c65 7320 7765  a_certs files we
+0000dd10: 7265 206e 6f74 2062 6569 6e67 2063 6c65  re not being cle
+0000dd20: 616e 6564 2075 702e 0a2d 2046 6978 6564  aned up..- Fixed
+0000dd30: 2061 2062 7567 2069 6e20 7273 796e 6320   a bug in rsync 
+0000dd40: 746f 2075 6e6e 6563 6573 7361 7269 6c79  to unnecessarily
+0000dd50: 2072 656d 6f76 6520 6f72 2077 7269 7465   remove or write
+0000dd60: 206f 626a 6563 7473 2c20 696e 2073 6f6d   objects, in som
+0000dd70: 650a 2020 6361 7365 7320 6c65 6176 696e  e.  cases leavin
+0000dd80: 6720 7468 6520 6465 7374 696e 6174 696f  g the destinatio
+0000dd90: 6e20 696e 2061 206e 6f6e 2d73 796e 6368  n in a non-synch
+0000dda0: 726f 6e69 7a65 6420 7374 6174 652e 0a20  ronized state.. 
+0000ddb0: 2063 6175 7365 6420 7273 796e 6320 746f   caused rsync to
+0000ddc0: 2075 6e6e 6563 6573 7361 7269 6c79 2072   unnecessarily r
+0000ddd0: 656d 6f76 6520 6f72 2072 6577 7269 7465  emove or rewrite
+0000dde0: 206f 626a 6563 7473 2e0a 2d20 4669 7865   objects..- Fixe
+0000ddf0: 6420 6120 6275 6720 7768 6572 6520 7273  d a bug where rs
+0000de00: 796e 6320 7465 6d70 6f72 6172 7920 6c69  ync temporary li
+0000de10: 7374 696e 6720 6669 6c65 7320 7765 7265  sting files were
+0000de20: 206e 6f74 2062 6569 6e67 0a20 2063 6c65   not being.  cle
+0000de30: 616e 6564 2075 7020 7768 656e 2074 6865  aned up when the
+0000de40: 2072 7379 6e63 2070 726f 6365 7373 2077   rsync process w
+0000de50: 6173 206b 696c 6c65 642e 0a2d 2046 6978  as killed..- Fix
+0000de60: 6564 2061 2062 7567 2077 6865 7265 2072  ed a bug where r
+0000de70: 7379 6e63 2077 6f75 6c64 2072 656d 6f76  sync would remov
+0000de80: 6520 6465 7374 696e 6174 696f 6e20 5552  e destination UR
+0000de90: 4c73 2069 6620 6c69 7374 696e 6720 7468  Ls if listing th
+0000dea0: 650a 2020 736f 7572 6365 2065 6e63 6f75  e.  source encou
+0000deb0: 6e74 6572 6564 2061 206e 6f6e 2d72 6574  ntered a non-ret
+0000dec0: 7279 6162 6c65 2066 6169 6c75 7265 2028  ryable failure (
+0000ded0: 666f 7220 6578 616d 706c 652c 2069 6620  for example, if 
+0000dee0: 7468 6520 736f 7572 6365 0a20 2064 6964  the source.  did
+0000def0: 206e 6f74 2065 7869 7374 292e 0a2d 2046   not exist)..- F
+0000df00: 6978 6564 2061 2062 7567 2077 6865 7265  ixed a bug where
+0000df10: 206d 7620 776f 756c 6420 6661 696c 2066   mv would fail f
+0000df20: 6f72 2073 6f6d 6520 556e 6963 6f64 6520  or some Unicode 
+0000df30: 6669 6c65 6e61 6d65 732e 0a2d 2046 6978  filenames..- Fix
+0000df40: 6564 2061 2062 7567 2077 6865 7265 206d  ed a bug where m
+0000df50: 7620 776f 756c 6420 7265 6d6f 7665 2074  v would remove t
+0000df60: 6865 2073 6f75 7263 6520 5552 4c20 6166  he source URL af
+0000df70: 7465 7220 736b 6970 7069 6e67 2074 6865  ter skipping the
+0000df80: 0a20 2064 6573 7469 6e61 7469 6f6e 2055  .  destination U
+0000df90: 524c 2e0a 2d20 4669 7865 6420 6120 6275  RL..- Fixed a bu
+0000dfa0: 6720 7468 6174 2063 6175 7365 6420 6461  g that caused da
+0000dfb0: 6973 7920 6368 6169 6e20 7570 6c6f 6164  isy chain upload
+0000dfc0: 7320 746f 2068 616e 6720 6966 2074 6865  s to hang if the
+0000dfd0: 2064 6f77 6e6c 6f61 6420 7468 7265 6164   download thread
+0000dfe0: 0a20 2072 6169 7365 6420 616e 2065 7863  .  raised an exc
+0000dff0: 6570 7469 6f6e 2e0a 2d20 4669 7865 6420  eption..- Fixed 
+0000e000: 6120 6275 6720 7768 6572 6520 6163 6c20  a bug where acl 
+0000e010: 6368 2077 6f75 6c64 2072 6574 7572 6e20  ch would return 
+0000e020: 6120 7a65 726f 2065 7869 7420 636f 6465  a zero exit code
+0000e030: 2065 7665 6e20 6966 2069 7420 6661 696c   even if it fail
+0000e040: 6564 2e0a 2d20 4669 7865 6420 6120 6275  ed..- Fixed a bu
+0000e050: 6720 7468 6174 2073 6f6d 6574 696d 6573  g that sometimes
+0000e060: 2063 6175 7365 6420 7468 6520 7072 6f67   caused the prog
+0000e070: 7265 7373 2064 6973 706c 6179 2074 6f20  ress display to 
+0000e080: 7265 6e64 6572 206d 756c 7469 706c 650a  render multiple.
+0000e090: 2020 7469 6d65 7320 6174 2074 6865 2065    times at the e
+0000e0a0: 6e64 206f 6620 616e 2075 706c 6f61 6420  nd of an upload 
+0000e0b0: 6f72 2064 6f77 6e6c 6f61 642e 0a0a 4f74  or download...Ot
+0000e0c0: 6865 7220 4368 616e 6765 730a 2d2d 2d2d  her Changes.----
+0000e0d0: 2d2d 2d2d 2d2d 2d2d 2d0a 2d20 5265 7375  ---------.- Resu
+0000e0e0: 6d61 626c 6520 7570 6c6f 6164 7320 6f66  mable uploads of
+0000e0f0: 2066 696c 6573 2075 7369 6e67 2074 6865   files using the
+0000e100: 204a 534f 4e20 4150 4920 6e6f 7720 7365   JSON API now se
+0000e110: 6e64 2074 6865 6972 2064 6174 6120 696e  nd their data in
+0000e120: 2061 0a20 2073 696e 676c 6520 7265 7175   a.  single requ
+0000e130: 6573 742c 206d 616b 696e 6720 7365 7061  est, making sepa
+0000e140: 7261 7465 2048 5454 5020 6361 6c6c 7320  rate HTTP calls 
+0000e150: 6f6e 6c79 2077 6865 6e20 7265 7375 6d69  only when resumi
+0000e160: 6e67 2069 7320 6e65 6365 7373 6172 792e  ng is necessary.
+0000e170: 0a2d 2054 6865 2074 6573 7420 636f 6d6d  .- The test comm
+0000e180: 616e 6420 6e6f 7720 7275 6e73 2074 6573  and now runs tes
+0000e190: 7473 2069 6e20 7061 7261 6c6c 656c 2062  ts in parallel b
+0000e1a0: 7920 6465 6661 756c 742c 2061 6e64 2074  y default, and t
+0000e1b0: 6573 740a 2020 7061 7261 6c6c 656c 6973  est.  parallelis
+0000e1c0: 6d20 6f6e 2057 696e 646f 7773 2069 7320  m on Windows is 
+0000e1d0: 6e6f 7720 7375 7070 6f72 7465 642e 0a2d  now supported..-
+0000e1e0: 2041 6c6c 206e 6f6e 2d73 7472 6561 6d69   All non-streami
+0000e1f0: 6e67 2064 6f77 6e6c 6f61 6473 2061 7265  ng downloads are
+0000e200: 206e 6f77 2072 6573 756d 6162 6c65 2028   now resumable (
+0000e210: 616e 6420 7265 7472 7961 626c 6529 2062  and retryable) b
+0000e220: 7920 6465 6661 756c 742c 0a20 2072 6567  y default,.  reg
+0000e230: 6172 646c 6573 7320 6f66 2073 697a 652e  ardless of size.
+0000e240: 0a2d 2043 616e 6e65 6420 4143 4c73 2061  .- Canned ACLs a
+0000e250: 6e64 2063 616e 6e65 6420 6465 6661 756c  nd canned defaul
+0000e260: 7420 6f62 6a65 6374 2041 434c 7320 6172  t object ACLs ar
+0000e270: 6520 6e6f 7720 7375 7070 6f72 7465 6420  e now supported 
+0000e280: 696e 2074 6865 204a 534f 4e0a 2020 4150  in the JSON.  AP
+0000e290: 4920 2870 7265 7669 6f75 736c 7920 7468  I (previously th
+0000e2a0: 6579 2077 6f75 6c64 2066 616c 6c20 6261  ey would fall ba
+0000e2b0: 636b 2074 6f20 7573 696e 6720 7468 6520  ck to using the 
+0000e2c0: 584d 4c20 4150 4929 2e0a 2d20 476f 6f67  XML API)..- Goog
+0000e2d0: 6c65 2043 6f6d 7075 7465 2045 6e67 696e  le Compute Engin
+0000e2e0: 6520 7365 7276 6963 6520 6163 636f 756e  e service accoun
+0000e2f0: 7420 6372 6564 656e 7469 616c 2074 6f6b  t credential tok
+0000e300: 656e 7320 6172 6520 6e6f 7720 6361 6368  ens are now cach
+0000e310: 6564 2c0a 2020 6176 6f69 6469 6e67 2075  ed,.  avoiding u
+0000e320: 6e6e 6563 6573 7361 7279 2072 6566 7265  nnecessary refre
+0000e330: 7368 6573 2e0a 2d20 496d 7072 6f76 6564  shes..- Improved
+0000e340: 2064 6574 6563 7469 6f6e 206f 6620 7468   detection of th
+0000e350: 6520 476f 6f67 6c65 2043 6f6d 7075 7465  e Google Compute
+0000e360: 2045 6e67 696e 6520 6d65 7461 6461 7461   Engine metadata
+0000e370: 2073 6572 7665 722c 0a20 2070 6172 7469   server,.  parti
+0000e380: 6375 6c61 726c 7920 7768 656e 2075 7369  cularly when usi
+0000e390: 6e67 2074 6865 202d 6d20 666c 6167 2066  ng the -m flag f
+0000e3a0: 6f72 206d 756c 7469 7072 6f63 6573 7369  or multiprocessi
+0000e3b0: 6e67 2e0a 2d20 4164 6465 6420 6e65 7720  ng..- Added new 
+0000e3c0: 6865 6c70 2073 6563 7469 6f6e 7320 6162  help sections ab
+0000e3d0: 6f75 7420 6669 6c65 6e61 6d65 2065 6e63  out filename enc
+0000e3e0: 6f64 696e 6720 616e 6420 7365 6375 7269  oding and securi
+0000e3f0: 7479 2f70 7269 7661 6379 0a20 2063 6f6e  ty/privacy.  con
+0000e400: 7369 6465 7261 7469 6f6e 732e 0a2d 2044  siderations..- D
+0000e410: 6f77 6e6c 6f61 6420 7072 6f67 7265 7373  ownload progress
+0000e420: 2069 7320 6e6f 7720 6469 7370 6c61 7965   is now displaye
+0000e430: 6420 666f 7220 736d 616c 6c20 584d 4c20  d for small XML 
+0000e440: 4150 4920 646f 776e 6c6f 6164 732e 0a0a  API downloads...
+0000e450: 0a52 656c 6561 7365 2034 2e37 2028 7265  .Release 4.7 (re
+0000e460: 6c65 6173 6520 6461 7465 3a20 3230 3134  lease date: 2014
+0000e470: 2d31 312d 3137 290a 3d3d 3d3d 3d3d 3d3d  -11-17).========
+0000e480: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0000e490: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d0a  ===============.
+0000e4a0: 4e65 7720 4665 6174 7572 6573 0a2d 2d2d  New Features.---
+0000e4b0: 2d2d 2d2d 2d2d 2d2d 2d0a 2d20 5461 6220  ---------.- Tab 
+0000e4c0: 636f 6d70 6c65 7469 6f6e 206e 6f77 2077  completion now w
+0000e4d0: 6f72 6b73 206f 6e20 6773 3a2f 2f20 5552  orks on gs:// UR
+0000e4e0: 4c73 2028 666f 7220 436c 6f75 6420 5344  Ls (for Cloud SD
+0000e4f0: 4b20 696e 7374 616c 6c73 206f 6e6c 7929  K installs only)
+0000e500: 2e0a 2020 546f 2069 6e73 7461 6c6c 2076  ..  To install v
+0000e510: 6961 2043 6c6f 7564 2053 444b 2c20 7365  ia Cloud SDK, se
+0000e520: 6520 6874 7470 733a 2f2f 636c 6f75 642e  e https://cloud.
+0000e530: 676f 6f67 6c65 2e63 6f6d 2f73 646b 2f23  google.com/sdk/#
+0000e540: 5175 6963 6b5f 5374 6172 740a 2d20 5374  Quick_Start.- St
+0000e550: 7265 616d 696e 6720 7570 6c6f 6164 7320  reaming uploads 
+0000e560: 2877 6974 6820 736f 7572 6365 2055 524c  (with source URL
+0000e570: 2022 2d22 2920 7573 696e 6720 7468 6520   "-") using the 
+0000e580: 4a53 4f4e 2041 5049 206e 6f77 2062 7566  JSON API now buf
+0000e590: 6665 720a 2020 696e 2d6d 656d 6f72 7920  fer.  in-memory 
+0000e5a0: 7570 2074 6f20 3130 304d 422c 2061 6c6c  up to 100MB, all
+0000e5b0: 6f77 696e 6720 6c61 7267 6520 7374 7265  owing large stre
+0000e5c0: 616d 7320 746f 2062 6520 7265 7472 6965  ams to be retrie
+0000e5d0: 6420 696e 2074 6865 2065 7665 6e74 0a20  d in the event. 
+0000e5e0: 206f 6620 6e65 7477 6f72 6b20 666c 616b   of network flak
+0000e5f0: 696e 6573 7320 6f72 2073 6572 7669 6365  iness or service
+0000e600: 2065 7272 6f72 732e 0a2d 2052 6573 756d   errors..- Resum
+0000e610: 6162 6c65 2075 706c 6f61 6473 2074 6861  able uploads tha
+0000e620: 7420 7265 6365 6976 6520 6120 6661 7461  t receive a fata
+0000e630: 6c20 7365 7276 6963 6520 6572 726f 7220  l service error 
+0000e640: 2874 7970 6963 616c 6c79 2061 2034 3130  (typically a 410
+0000e650: 290a 2020 6172 6520 6e6f 7720 6175 746f  ).  are now auto
+0000e660: 6d61 7469 6361 6c6c 7920 7265 7472 6965  matically retrie
+0000e670: 6420 6672 6f6d 2074 6865 2062 6567 696e  d from the begin
+0000e680: 6e69 6e67 2e0a 0a42 7567 2046 6978 6573  ning...Bug Fixes
+0000e690: 0a2d 2d2d 2d2d 2d2d 2d2d 0a2d 2046 6978  .---------.- Fix
+0000e6a0: 6564 2061 6e20 6170 6974 6f6f 6c73 2062  ed an apitools b
+0000e6b0: 7567 2074 6861 7420 696d 7061 6374 6564  ug that impacted
+0000e6c0: 2075 706c 6f61 6420 7065 7266 6f72 6d61   upload performa
+0000e6d0: 6e63 6520 616e 6420 6361 7573 6564 0a20  nce and caused. 
+0000e6e0: 2022 5265 7472 7969 6e67 2066 726f 6d20   "Retrying from 
+0000e6f0: 6279 7465 205f 5f20 6166 7465 7220 6578  byte __ after ex
+0000e700: 6365 7074 696f 6e22 2074 6f20 7072 696e  ception" to prin
+0000e710: 7420 6166 7465 7220 6576 6572 7920 3130  t after every 10
+0000e720: 304d 6942 2e0a 2d20 4669 7865 6420 5f24  0MiB..- Fixed _$
+0000e730: 666f 6c64 6572 2420 706c 6163 6568 6f6c  folder$ placehol
+0000e740: 6465 7220 6f62 6a65 6374 2064 6574 6563  der object detec
+0000e750: 7469 6f6e 206f 6e20 7665 7273 696f 6e65  tion on versione
+0000e760: 6420 6275 636b 6574 732e 0a2d 2052 656d  d buckets..- Rem
+0000e770: 6f76 6564 2061 6e20 756e 6e65 6365 7373  oved an unnecess
+0000e780: 6172 7920 6372 6564 656e 7469 616c 2063  ary credential c
+0000e790: 6865 636b 206f 6e20 6c6f 6164 2077 6869  heck on load whi
+0000e7a0: 6368 2069 6e63 7265 6173 6564 0a20 2073  ch increased.  s
+0000e7b0: 7461 7274 7570 2074 696d 6520 6279 206f  tartup time by o
+0000e7c0: 7665 7220 6f6e 6520 7365 636f 6e64 2069  ver one second i
+0000e7d0: 6e20 736f 6d65 2063 6173 6573 2e0a 2d20  n some cases..- 
+0000e7e0: 5369 676e 5552 4c20 6e6f 7720 7072 6f70  SignURL now prop
+0000e7f0: 6572 6c79 2072 6574 7269 6573 2077 6865  erly retries whe
+0000e800: 6e20 6368 6563 6b69 6e67 2069 6620 7468  n checking if th
+0000e810: 6520 7369 676e 6564 206f 626a 6563 7420  e signed object 
+0000e820: 6973 0a20 2072 6561 6461 626c 652e 0a2d  is.  readable..-
+0000e830: 2046 696c 6573 2077 6974 6820 626f 7468   Files with both
+0000e840: 2043 6f6e 7465 6e74 2d45 6e63 6f64 696e   Content-Encodin
+0000e850: 6720 616e 6420 436f 6e74 656e 742d 5479  g and Content-Ty
+0000e860: 7065 2067 7a69 7020 6172 6520 6e6f 7720  pe gzip are now 
+0000e870: 7072 6f70 6572 6c79 0a20 2072 656d 6f76  properly.  remov
+0000e880: 6564 2077 6865 6e20 6861 7368 2076 616c  ed when hash val
+0000e890: 6964 6174 696f 6e20 6661 696c 7320 286f  idation fails (o
+0000e8a0: 6e6c 7920 6f6e 6520 6f66 2074 6865 2074  nly one of the t
+0000e8b0: 776f 2073 686f 756c 6420 6265 2073 6574  wo should be set
+0000e8c0: 292e 0a2d 2054 6865 2078 2d67 6f6f 672d  )..- The x-goog-
+0000e8d0: 6966 2d67 656e 6572 6174 696f 6e2d 6d61  if-generation-ma
+0000e8e0: 7463 683a 3020 6865 6164 6572 206e 6f77  tch:0 header now
+0000e8f0: 2077 6f72 6b73 2070 726f 7065 726c 7920   works properly 
+0000e900: 7769 7468 2074 6865 2058 4d4c 2041 5049  with the XML API
+0000e910: 2e0a 2d20 4669 7865 6420 6120 6275 6720  ..- Fixed a bug 
+0000e920: 7468 6174 2063 6175 7365 6420 2264 6566  that caused "def
+0000e930: 6163 6c20 6368 2220 6f6e 2061 2062 7563  acl ch" on a buc
+0000e940: 6b65 7420 7769 7468 2061 2070 7269 7661  ket with a priva
+0000e950: 7465 2041 434c 2074 6f20 6661 696c 2e0a  te ACL to fail..
+0000e960: 2d20 5468 6520 726d 2063 6f6d 6d61 6e64  - The rm command
+0000e970: 206e 6f77 2070 726f 7065 726c 7920 7375   now properly su
+0000e980: 7070 6f72 7473 2070 7265 636f 6e64 6974  pports precondit
+0000e990: 696f 6e20 6865 6164 6572 732e 0a2d 2046  ion headers..- F
+0000e9a0: 6978 6564 2061 2062 7567 2074 6861 7420  ixed a bug that 
+0000e9b0: 6361 7573 6564 206c 6172 6765 2073 7472  caused large str
+0000e9c0: 6561 6d69 6e67 2075 706c 6f61 6473 2074  eaming uploads t
+0000e9d0: 6f20 6661 696c 2077 6974 6820 7468 6520  o fail with the 
+0000e9e0: 6d65 7373 6167 650a 2020 2246 6169 6c75  message.  "Failu
+0000e9f0: 7265 3a20 6c65 6e67 7468 2074 6f6f 206c  re: length too l
+0000ea00: 6172 6765 2220 7768 656e 2075 7369 6e67  arge" when using
+0000ea10: 2074 6865 204a 534f 4e20 4150 492e 0a2d   the JSON API..-
+0000ea20: 2046 6978 6564 2061 2062 7567 2074 6861   Fixed a bug tha
+0000ea30: 7420 6361 7573 6564 204a 534f 4e20 6c69  t caused JSON li
+0000ea40: 6665 6379 636c 6520 636f 6e66 6967 7572  fecycle configur
+0000ea50: 6174 696f 6e73 2077 6974 6820 6372 6561  ations with crea
+0000ea60: 7465 6442 6566 6f72 650a 2020 636f 6e64  tedBefore.  cond
+0000ea70: 6974 696f 6e73 2074 6f20 6661 696c 2077  itions to fail w
+0000ea80: 6974 6820 6120 4465 636f 6465 4572 726f  ith a DecodeErro
+0000ea90: 722e 0a0a 4f74 6865 7220 4368 616e 6765  r...Other Change
+0000eaa0: 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a  s.-------------.
+0000eab0: 2d20 4279 7465 2063 6f75 6e74 7320 6e6f  - Byte counts no
+0000eac0: 7720 6469 7370 6c61 7920 6163 6375 7261  w display accura
+0000ead0: 7465 2061 6262 7265 7669 6174 696f 6e73  te abbreviations
+0000eae0: 206f 6620 6269 6e61 7279 2073 697a 696e   of binary sizin
+0000eaf0: 672e 2046 6f72 2065 7861 6d70 6c65 2c0a  g. For example,.
+0000eb00: 2020 6d65 7373 6167 6573 2070 7265 7669    messages previ
+0000eb10: 6f75 736c 7920 6c61 6265 6c65 6420 4d42  ously labeled MB
+0000eb20: 2061 7265 206e 6f77 2070 726f 7065 726c   are now properl
+0000eb30: 7920 6c61 6265 6c65 6420 4d69 4220 746f  y labeled MiB to
+0000eb40: 2069 6e64 6963 6174 650a 2020 322a 2a32   indicate.  2**2
+0000eb50: 3020 6279 7465 732e 204f 6e6c 7920 7468  0 bytes. Only th
+0000eb60: 6520 6c61 6265 6c69 6e67 2063 6861 6e67  e labeling chang
+0000eb70: 6564 202d 2074 6865 2061 6374 7561 6c20  ed - the actual 
+0000eb80: 7369 7a65 7320 7765 7265 2061 6c77 6179  sizes were alway
+0000eb90: 7320 6269 6e61 7279 2e0a 2d20 496d 7072  s binary..- Impr
+0000eba0: 6f76 6564 2043 6c6f 7564 2053 444b 2069  oved Cloud SDK i
+0000ebb0: 6e74 6567 7261 7469 6f6e 2c20 696e 636c  ntegration, incl
+0000ebc0: 7564 696e 6720 696d 7072 6f76 6564 2065  uding improved e
+0000ebd0: 7272 6f72 206d 6573 7361 6765 730a 2020  rror messages.  
+0000ebe0: 616e 6420 696e 7374 7275 6374 696f 6e73  and instructions
+0000ebf0: 2e0a 2d20 5468 6520 6e75 6d5f 7265 7472  ..- The num_retr
+0000ec00: 6965 7320 2e62 6f74 6f20 636f 6e66 6967  ies .boto config
+0000ec10: 7572 6174 696f 6e20 7661 6c75 6520 6e6f  uration value no
+0000ec20: 7720 6170 706c 6965 7320 746f 2061 6c6c  w applies to all
+0000ec30: 2072 6571 7565 7374 730a 2020 2870 7265   requests.  (pre
+0000ec40: 7669 6f75 736c 7920 6974 2077 6173 2069  viously it was i
+0000ec50: 676e 6f72 6564 2066 6f72 204a 534f 4e20  gnored for JSON 
+0000ec60: 4150 4920 7265 7175 6573 7473 292e 0a2d  API requests)..-
+0000ec70: 2072 7379 6e63 206e 6f77 2077 6f72 6b73   rsync now works
+0000ec80: 2077 6974 6820 6e6f 6e2d 6578 6973 7465   with non-existe
+0000ec90: 6e74 2064 6573 7469 6e61 7469 6f6e 2073  nt destination s
+0000eca0: 7562 6469 7265 6374 6f72 6965 732e 0a2d  ubdirectories..-
+0000ecb0: 2052 6169 7365 6420 7468 6520 6465 6661   Raised the defa
+0000ecc0: 756c 7420 7265 7375 6d61 626c 6520 7570  ult resumable up
+0000ecd0: 6c6f 6164 2074 6872 6573 686f 6c64 2066  load threshold f
+0000ece0: 726f 6d20 324d 4220 746f 2038 4d42 2074  rom 2MB to 8MB t
+0000ecf0: 6f0a 2020 696d 7072 6f76 6520 7065 7266  o.  improve perf
+0000ed00: 6f72 6d61 6e63 652e 0a2d 2042 656e 6967  ormance..- Benig
+0000ed10: 6e20 7265 7472 7920 6d65 7373 6167 6573  n retry messages
+0000ed20: 206e 6f77 2070 7269 6e74 206f 6e6c 7920   now print only 
+0000ed30: 7768 656e 2064 6562 7567 206d 6f64 6520  when debug mode 
+0000ed40: 6973 2065 6e61 626c 6564 2076 6961 2074  is enabled via t
+0000ed50: 6865 0a20 2074 6f70 2d6c 6576 656c 202d  he.  top-level -
+0000ed60: 6420 666c 6167 2e0a 2d20 5468 6520 746f  d flag..- The to
+0000ed70: 702d 6c65 7665 6c20 2d71 2066 6c61 6720  p-level -q flag 
+0000ed80: 6e6f 7720 7375 7070 7265 7373 6573 2073  now suppresses s
+0000ed90: 7567 6765 7374 696f 6e73 2074 6f20 7573  uggestions to us
+0000eda0: 6520 7468 6520 2d6d 2066 6c61 672e 0a2d  e the -m flag..-
+0000edb0: 2043 6f6d 6d61 6e64 2073 796e 6f70 7369   Command synopsi
+0000edc0: 7320 6973 206e 6f77 206f 7574 7075 7420  s is now output 
+0000edd0: 7768 656e 2074 6865 2077 726f 6e67 206e  when the wrong n
+0000ede0: 756d 6265 7220 6f66 2061 7267 756d 656e  umber of argumen
+0000edf0: 7473 2061 7265 0a20 2070 726f 7669 6465  ts are.  provide
+0000ee00: 642e 0a2d 2052 656d 6f76 6564 2064 6570  d..- Removed dep
+0000ee10: 656e 6465 6e63 7920 6f6e 2067 6f6f 676c  endency on googl
+0000ee20: 652d 6170 692d 7079 7468 6f6e 2d63 6c69  e-api-python-cli
+0000ee30: 656e 7420 6d6f 6475 6c65 2c20 6164 6465  ent module, adde
+0000ee40: 6420 6465 7065 6e64 656e 6369 6573 206f  d dependencies o
+0000ee50: 6e0a 2020 6f61 7574 6832 636c 6965 6e74  n.  oauth2client
+0000ee60: 2061 6e64 2073 6978 206d 6f64 756c 6573   and six modules
+0000ee70: 2e0a 0a52 656c 6561 7365 2034 2e36 2028  ...Release 4.6 (
+0000ee80: 7265 6c65 6173 6520 6461 7465 3a20 3230  release date: 20
+0000ee90: 3134 2d30 392d 3038 290a 3d3d 3d3d 3d3d  14-09-08).======
+0000eea0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0000eeb0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0000eec0: 3d0a 0a42 7567 2046 6978 6573 0a2d 2d2d  =..Bug Fixes.---
+0000eed0: 2d2d 2d2d 2d2d 0a2d 2046 6978 6564 2061  ------.- Fixed a
+0000eee0: 2054 7970 6545 7272 6f72 2062 7567 2074   TypeError bug t
+0000eef0: 6861 7420 6f63 6375 7272 6564 2069 6e20  hat occurred in 
+0000ef00: 7065 7266 6469 6167 2077 7269 7465 2074  perfdiag write t
+0000ef10: 6872 6f75 6768 7075 7420 7465 7374 732e  hroughput tests.
+0000ef20: 0a2d 2046 6978 6564 2061 6e20 7273 796e  .- Fixed an rsyn
+0000ef30: 6320 6275 6720 7468 6174 2063 6175 7365  c bug that cause
+0000ef40: 6420 696e 7661 6c69 6420 7379 6d6c 696e  d invalid symlin
+0000ef50: 6b73 2074 6f20 6162 6f72 7420 7468 6520  ks to abort the 
+0000ef60: 7472 616e 7366 6572 0a20 2065 7665 6e20  transfer.  even 
+0000ef70: 7768 656e 202d 6520 6f70 7469 6f6e 2077  when -e option w
+0000ef80: 6173 2073 7065 6369 6669 6564 2e0a 2d20  as specified..- 
+0000ef90: 4669 7865 6420 6120 7065 7266 6469 6167  Fixed a perfdiag
+0000efa0: 2061 7373 756d 7074 696f 6e20 7468 6174   assumption that
+0000efb0: 2069 7061 6464 726c 6973 7420 7761 7320   ipaddrlist was 
+0000efc0: 706f 7075 6c61 7465 642e 0a2d 2046 6978  populated..- Fix
+0000efd0: 6564 2061 6e20 4174 7472 6962 7574 6545  ed an AttributeE
+0000efe0: 7272 6f72 2077 6865 6e20 7365 7474 696e  rror when settin
+0000eff0: 6720 616e 2069 6e76 616c 6964 2063 616e  g an invalid can
+0000f000: 6e65 6420 4143 4c20 7769 7468 2064 6566  ned ACL with def
+0000f010: 6163 6c20 7365 742e 0a2d 2046 6978 6564  acl set..- Fixed
+0000f020: 2061 2062 7567 2077 6865 7265 206e 6f6e   a bug where non
+0000f030: 2d72 6573 756d 6162 6c65 2075 706c 6f61  -resumable uploa
+0000f040: 6473 2077 6f75 6c64 2069 6e63 6c75 6465  ds would include
+0000f050: 2070 6179 6c6f 6164 2069 6e20 6465 6275   payload in debu
+0000f060: 6720 6f75 7470 7574 0a20 2077 6865 6e20  g output.  when 
+0000f070: 666f 7220 7275 6e6e 696e 6720 696e 2064  for running in d
+0000f080: 6562 7567 206d 6f64 6520 282d 4429 2e0a  ebug mode (-D)..
+0000f090: 0a4f 7468 6572 2043 6861 6e67 6573 0a2d  .Other Changes.-
+0000f0a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d 2041  ------------.- A
+0000f0b0: 6464 6564 2074 6865 2070 726f 7879 5f72  dded the proxy_r
+0000f0c0: 646e 7320 636f 6e66 6967 7572 6174 696f  dns configuratio
+0000f0d0: 6e20 7661 7269 6162 6c65 2066 6f72 2063  n variable for c
+0000f0e0: 6c69 656e 7473 2074 6861 740a 2020 646f  lients that.  do
+0000f0f0: 2044 4e53 206c 6f6f 6b75 7073 2076 6961   DNS lookups via
+0000f100: 2061 2070 726f 7879 2e0a 2d20 4164 6465   a proxy..- Adde
+0000f110: 6420 7468 6520 7374 6174 655f 6469 7220  d the state_dir 
+0000f120: 636f 6e66 6967 7572 6174 696f 6e20 7661  configuration va
+0000f130: 7269 6162 6c65 2066 6f72 2063 686f 6f73  riable for choos
+0000f140: 696e 6720 7468 6520 6c6f 6361 7469 6f6e  ing the location
+0000f150: 206f 660a 2020 6773 7574 696c 2773 2069   of.  gsutil's i
+0000f160: 6e74 6572 6e61 6c20 7374 6174 6520 6669  nternal state fi
+0000f170: 6c65 732c 2069 6e63 6c75 6469 6e67 2072  les, including r
+0000f180: 6573 756d 6162 6c65 2074 7261 6e73 6665  esumable transfe
+0000f190: 7220 7472 6163 6b65 7220 6669 6c65 732e  r tracker files.
+0000f1a0: 0a20 2072 6573 756d 6162 6c65 5f74 7261  .  resumable_tra
+0000f1b0: 636b 6572 5f64 6972 2063 6f6e 6669 6775  cker_dir configu
+0000f1c0: 7261 7469 6f6e 2076 6172 6961 626c 6520  ration variable 
+0000f1d0: 6973 206e 6f77 2064 6570 7265 6361 7465  is now deprecate
+0000f1e0: 642e 0a2d 2041 6464 6564 2044 4e53 2c20  d..- Added DNS, 
+0000f1f0: 636f 6e6e 6563 7469 6f6e 206c 6174 656e  connection laten
+0000f200: 6379 2c20 616e 6420 7072 6f78 7920 7573  cy, and proxy us
+0000f210: 6520 696e 666f 726d 6174 696f 6e20 746f  e information to
+0000f220: 2070 6572 6664 6961 670a 2020 636f 6d6d   perfdiag.  comm
+0000f230: 616e 642e 0a2d 2070 6572 6664 6961 6720  and..- perfdiag 
+0000f240: 636f 6d6d 616e 6420 7769 6c6c 206e 6f74  command will not
+0000f250: 2070 6572 666f 726d 2044 4e53 206c 6f6f   perform DNS loo
+0000f260: 6b75 7073 2069 6620 7468 6579 2061 7265  kups if they are
+0000f270: 2064 6973 6162 6c65 6420 696e 0a20 2062   disabled in.  b
+0000f280: 6f74 6f20 636f 6e66 6967 2e0a 2d20 7065  oto config..- pe
+0000f290: 7266 6469 6167 2063 6f6d 6d61 6e64 2077  rfdiag command w
+0000f2a0: 696c 6c20 6e6f 7720 6f6e 6c79 2061 7474  ill now only att
+0000f2b0: 656d 7074 2074 6f20 6465 6c65 7465 2075  empt to delete u
+0000f2c0: 706c 6f61 6465 6420 6f62 6a65 6374 7320  ploaded objects 
+0000f2d0: 7768 656e 0a20 2072 756e 6e69 6e67 2077  when.  running w
+0000f2e0: 7269 7465 2074 6573 7473 2e0a 2d20 4164  rite tests..- Ad
+0000f2f0: 6465 6420 636f 6465 2063 6f76 6572 6167  ded code coverag
+0000f300: 6520 7375 7070 6f72 7420 746f 2074 6573  e support to tes
+0000f310: 7420 636f 6d6d 616e 642e 0a2d 2072 7379  t command..- rsy
+0000f320: 6e63 202d 6420 6e6f 7720 7375 6363 6565  nc -d now succee
+0000f330: 6473 206f 6e20 6120 3430 3420 666f 7220  ds on a 404 for 
+0000f340: 6120 746f 2d62 652d 6465 6c65 7465 6420  a to-be-deleted 
+0000f350: 6f62 6a65 6374 2028 666f 7220 6578 616d  object (for exam
+0000f360: 706c 652c 2077 6865 6e0a 2020 7468 6520  ple, when.  the 
+0000f370: 6f62 6a65 6374 2077 6173 2061 6c72 6561  object was alrea
+0000f380: 6479 2064 656c 6574 6564 2062 7920 616e  dy deleted by an
+0000f390: 2065 7874 6572 6e61 6c20 7072 6f63 6573   external proces
+0000f3a0: 7329 2e0a 0a52 656c 6561 7365 2034 2e35  s)...Release 4.5
+0000f3b0: 2028 7265 6c65 6173 6520 6461 7465 3a20   (release date: 
+0000f3c0: 3230 3134 2d30 382d 3134 290a 3d3d 3d3d  2014-08-14).====
+0000f3d0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0000f3e0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0000f3f0: 3d3d 3d0a 0a42 7567 2046 6978 6573 0a2d  ===..Bug Fixes.-
+0000f400: 2d2d 2d2d 2d2d 2d2d 0a2d 2046 6978 6564  --------.- Fixed
+0000f410: 2061 2062 7567 2074 6861 7420 6361 7573   a bug that caus
+0000f420: 6564 2072 6573 756d 6162 6c65 2075 706c  ed resumable upl
+0000f430: 6f61 6473 2074 6f20 7265 7374 6172 7420  oads to restart 
+0000f440: 6966 2067 7375 7469 6c20 7761 730a 2020  if gsutil was.  
+0000f450: 7465 726d 696e 6174 6564 2077 6974 6820  terminated with 
+0000f460: 4354 524c 2d43 2e0a 2d20 4669 7865 6420  CTRL-C..- Fixed 
+0000f470: 6120 6275 6720 696e 2064 6566 6163 6c20  a bug in defacl 
+0000f480: 6368 2063 6f6d 6d61 6e64 2074 6861 7420  ch command that 
+0000f490: 6361 7573 6564 2061 2066 6169 6c75 7265  caused a failure
+0000f4a0: 2077 6865 6e20 7570 6461 7469 6e67 0a20   when updating. 
+0000f4b0: 2061 6e20 6578 6973 7469 6e67 2064 6566   an existing def
+0000f4c0: 6175 6c74 206f 626a 6563 7420 4143 4c20  ault object ACL 
+0000f4d0: 656e 7472 792e 0a2d 2046 6978 6564 2061  entry..- Fixed a
+0000f4e0: 6e20 696e 7661 6c69 6420 6c69 7465 7261  n invalid litera
+0000f4f0: 6c20 6275 6720 6475 7269 6e67 2072 7379  l bug during rsy
+0000f500: 6e63 2066 696c 6520 6c69 7374 696e 672e  nc file listing.
+0000f510: 0a2d 204d 6164 6520 7365 7665 7261 6c20  .- Made several 
+0000f520: 696d 7072 6f76 656d 656e 7473 2074 6f20  improvements to 
+0000f530: 4a53 4f4e 2075 706c 6f61 6420 7374 6162  JSON upload stab
+0000f540: 696c 6974 792c 2069 6e63 6c75 6469 6e67  ility, including
+0000f550: 2066 6978 696e 6720 6120 6275 670a 2020   fixing a bug.  
+0000f560: 7768 6963 6820 6f63 6361 7369 6f6e 616c  which occasional
+0000f570: 6c79 2063 6175 7365 6420 7265 7375 6d61  ly caused resuma
+0000f580: 626c 6520 7570 6c6f 6164 2068 6173 6865  ble upload hashe
+0000f590: 7320 6e6f 7420 746f 2063 6174 6368 2075  s not to catch u
+0000f5a0: 7020 7072 6f70 6572 6c79 2e0a 2d20 416c  p properly..- Al
+0000f5b0: 6c20 4a53 4f4e 2063 616c 6c73 206e 6f77  l JSON calls now
+0000f5c0: 2068 6176 6520 736f 636b 6574 2074 696d   have socket tim
+0000f5d0: 656f 7574 732c 2065 6c69 6d69 6e61 7469  eouts, eliminati
+0000f5e0: 6e67 2068 616e 6773 2075 6e64 6572 0a20  ng hangs under. 
+0000f5f0: 2066 6c61 6b79 206e 6574 776f 726b 2063   flaky network c
+0000f600: 6f6e 6469 7469 6f6e 732e 0a2d 2046 6978  onditions..- Fix
+0000f610: 6564 2061 2062 7567 2077 6865 7265 2061  ed a bug where a
+0000f620: 636c 2063 6820 2d67 2041 6c6c 4175 7468  cl ch -g AllAuth
+0000f630: 656e 7469 6361 7465 6455 7365 7273 2077  enticatedUsers w
+0000f640: 6f75 6c64 2069 6e73 7465 6164 2061 6464  ould instead add
+0000f650: 0a20 2041 6c6c 5573 6572 732e 0a2d 2046  .  AllUsers..- F
+0000f660: 6978 6564 2061 2062 7567 2074 6861 7420  ixed a bug that 
+0000f670: 6361 7573 6564 206f 626a 6563 7420 6375  caused object cu
+0000f680: 7374 6f6d 206d 6574 6164 6174 6120 6e6f  stom metadata no
+0000f690: 7420 746f 2062 6520 7072 6573 6572 7665  t to be preserve
+0000f6a0: 6420 7768 656e 0a20 2063 6f70 7969 6e67  d when.  copying
+0000f6b0: 2069 6e20 7468 6520 636c 6f75 642e 0a2d   in the cloud..-
+0000f6c0: 2046 6978 6564 2061 2062 7567 2077 6865   Fixed a bug whe
+0000f6d0: 7265 2064 7520 2d73 2064 6964 206e 6f74  re du -s did not
+0000f6e0: 2070 726f 7065 726c 7920 656c 6964 6520   properly elide 
+0000f6f0: 7375 6264 6972 6563 746f 7269 6573 2e0a  subdirectories..
+0000f700: 0a4f 7468 6572 2043 6861 6e67 6573 0a2d  .Other Changes.-
+0000f710: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d 2050  ------------.- P
+0000f720: 6172 616c 6c65 6c20 636f 6d70 6f73 6974  arallel composit
+0000f730: 6520 7570 6c6f 6164 7320 6172 6520 6e6f  e uploads are no
+0000f740: 7720 6469 7361 626c 6564 2062 7920 6465  w disabled by de
+0000f750: 6661 756c 7420 756e 7469 6c20 6372 636d  fault until crcm
+0000f760: 6f64 2069 730a 2020 6176 6169 6c61 626c  od is.  availabl
+0000f770: 6520 696e 206d 616a 6f72 204c 696e 7578  e in major Linux
+0000f780: 2064 6973 7472 6962 7574 696f 6e73 2e20   distributions. 
+0000f790: 546f 2072 652d 656e 6162 6c65 2074 6865  To re-enable the
+0000f7a0: 2073 6574 7469 6e67 2066 726f 6d0a 2020   setting from.  
+0000f7b0: 7072 696f 7220 7665 7273 696f 6e73 2c20  prior versions, 
+0000f7c0: 696e 2074 6865 205b 4753 5574 696c 5d20  in the [GSUtil] 
+0000f7d0: 7365 6374 696f 6e20 6f66 2079 6f75 7220  section of your 
+0000f7e0: 2e62 6f74 6f20 636f 6e66 6967 2066 696c  .boto config fil
+0000f7f0: 652c 2061 6464 3a0a 2020 7061 7261 6c6c  e, add:.  parall
+0000f800: 656c 5f63 6f6d 706f 7369 7465 5f75 706c  el_composite_upl
+0000f810: 6f61 645f 7468 7265 7368 6f6c 643d 3135  oad_threshold=15
+0000f820: 304d 0a2d 204e 6f6e 2d77 696c 6463 6172  0M.- Non-wildcar
+0000f830: 6465 6420 5552 4c73 2066 6f72 2065 7869  ded URLs for exi
+0000f840: 7374 696e 6720 6f62 6a65 6374 7320 6e6f  sting objects no
+0000f850: 7720 7573 6520 4765 7420 6265 666f 7265  w use Get before
+0000f860: 2074 7279 696e 6720 4c69 7374 0a20 2028   trying List.  (
+0000f870: 6173 2069 6e20 6773 7574 696c 3329 2c20  as in gsutil3), 
+0000f880: 616e 6420 7468 7573 2061 7265 206e 6f74  and thus are not
+0000f890: 2073 7562 6a65 6374 2074 6f20 6576 656e   subject to even
+0000f8a0: 7475 616c 206c 6973 7469 6e67 2063 6f6e  tual listing con
+0000f8b0: 7369 7374 656e 6379 2e0a 2d20 6773 7574  sistency..- gsut
+0000f8c0: 696c 202d 4420 6e6f 7720 7265 6461 6374  il -D now redact
+0000f8d0: 7320 7072 6f78 7920 636f 6e66 6967 7572  s proxy configur
+0000f8e0: 6174 696f 6e20 7661 6c75 6573 2069 6e20  ation values in 
+0000f8f0: 7468 6520 6f75 7470 7574 2e0a 0a52 656c  the output...Rel
+0000f900: 6561 7365 2034 2e34 2028 7265 6c65 6173  ease 4.4 (releas
+0000f910: 6520 6461 7465 3a20 3230 3134 2d30 372d  e date: 2014-07-
+0000f920: 3137 290a 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  17).============
+0000f930: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0000f940: 3d3d 3d3d 3d3d 3d3d 3d3d 3d0a 0a4e 6577  ===========..New
+0000f950: 2046 6561 7475 7265 730a 2d2d 2d2d 2d2d   Features.------
+0000f960: 2d2d 2d2d 2d2d 0a2d 2041 6464 6564 2074  ------.- Added t
+0000f970: 6865 2068 6173 6820 636f 6d6d 616e 642c  he hash command,
+0000f980: 2077 6869 6368 2063 616e 2063 616c 6375   which can calcu
+0000f990: 6c61 7465 2068 6173 6865 7320 6f66 206c  late hashes of l
+0000f9a0: 6f63 616c 2066 696c 6573 2e0a 2020 6773  ocal files..  gs
+0000f9b0: 7574 696c 2061 6c72 6561 6479 2063 616c  util already cal
+0000f9c0: 6375 6c61 7465 7320 6861 7368 6573 2066  culates hashes f
+0000f9d0: 6f72 2069 6e74 6567 7269 7479 2063 6865  or integrity che
+0000f9e0: 636b 696e 672c 2062 7574 2074 6869 7320  cking, but this 
+0000f9f0: 616c 6c6f 7773 0a20 2074 6865 2075 7365  allows.  the use
+0000fa00: 7220 746f 2073 6570 6172 6174 656c 7920  r to separately 
+0000fa10: 6361 6c63 756c 6174 6520 7468 6520 4d44  calculate the MD
+0000fa20: 3520 616e 6420 4352 4333 3263 2068 6173  5 and CRC32c has
+0000fa30: 6865 7320 6f66 2061 206c 6f63 616c 2066  hes of a local f
+0000fa40: 696c 652e 0a0a 4275 6720 4669 7865 730a  ile...Bug Fixes.
+0000fa50: 2d2d 2d2d 2d2d 2d2d 2d0a 2d20 4d61 6e79  ---------.- Many
+0000fa60: 2069 6d70 726f 7665 6d65 6e74 7320 746f   improvements to
+0000fa70: 204a 534f 4e20 4150 4920 6d65 6469 6120   JSON API media 
+0000fa80: 7472 616e 7366 6572 732c 2069 6e63 6c75  transfers, inclu
+0000fa90: 6469 6e67 2066 6172 0a20 206d 6f72 6520  ding far.  more 
+0000faa0: 726f 6275 7374 2072 6574 7279 206c 6f67  robust retry log
+0000fab0: 6963 2e0a 2d20 4669 7865 6420 2246 696c  ic..- Fixed "Fil
+0000fac0: 6520 6368 616e 6765 6420 6475 7269 6e67  e changed during
+0000fad0: 2075 706c 6f61 643a 2045 4f46 2e2e 2e22   upload: EOF..."
+0000fae0: 2065 7272 6f72 7320 6f6e 2058 4d4c 2072   errors on XML r
+0000faf0: 6573 756d 6162 6c65 2075 706c 6f61 6473  esumable uploads
+0000fb00: 2e0a 2d20 4669 7865 6420 7273 796e 6320  ..- Fixed rsync 
+0000fb10: 636f 6d6d 616e 6420 746f 2072 6561 6420  command to read 
+0000fb20: 616e 6420 7772 6974 6520 696e 6465 7820  and write index 
+0000fb30: 6669 6c65 7320 696e 2062 696e 6172 7920  files in binary 
+0000fb40: 6d6f 6465 2e0a 2d20 4669 7820 706f 7465  mode..- Fix pote
+0000fb50: 6e74 6961 6c20 5479 7065 4572 726f 7220  ntial TypeError 
+0000fb60: 696e 205f 4368 6563 6b41 6e64 4861 6e64  in _CheckAndHand
+0000fb70: 6c65 4372 6564 656e 7469 616c 4578 6365  leCredentialExce
+0000fb80: 7074 696f 6e2e 0a2d 2046 6978 6564 2070  ption..- Fixed p
+0000fb90: 6f73 7369 626c 6520 6461 7461 2063 6f72  ossible data cor
+0000fba0: 7275 7074 696f 6e20 7768 656e 2075 7369  ruption when usi
+0000fbb0: 6e67 204a 534f 4e20 4150 4920 7570 6c6f  ng JSON API uplo
+0000fbc0: 6164 7320 666f 720a 2020 736d 616c 6c20  ads for.  small 
+0000fbd0: 6669 6c65 7320 7769 7468 206c 696e 6573  files with lines
+0000fbe0: 2073 7461 7274 696e 6720 7769 7468 2022   starting with "
+0000fbf0: 4672 6f6d 3a22 2c20 7768 6963 6820 776f  From:", which wo
+0000fc00: 756c 6420 6361 7573 650a 2020 696e 7465  uld cause.  inte
+0000fc10: 6772 6974 7920 6368 6563 6b73 2074 6f20  grity checks to 
+0000fc20: 6661 696c 2e0a 2d20 4669 7865 6420 6773  fail..- Fixed gs
+0000fc30: 7574 696c 2063 7020 746f 2073 6b69 7020  util cp to skip 
+0000fc40: 6469 7265 6374 6f72 7920 706c 6163 6568  directory placeh
+0000fc50: 6f6c 6465 7273 2077 6865 6e20 646f 776e  olders when down
+0000fc60: 6c6f 6164 696e 672c 2061 766f 6964 696e  loading, avoidin
+0000fc70: 670a 2020 2264 6972 6563 746f 7279 2065  g.  "directory e
+0000fc80: 7869 7374 7320 7768 6572 6520 7468 6520  xists where the 
+0000fc90: 6669 6c65 206e 6565 6473 2074 6f20 6265  file needs to be
+0000fca0: 2063 7265 6174 6564 2220 6572 726f 7273   created" errors
+0000fcb0: 2e0a 2d20 4669 7865 6420 6461 6973 7920  ..- Fixed daisy 
+0000fcc0: 6368 6169 6e20 6370 2f72 7379 6e63 2066  chain cp/rsync f
+0000fcd0: 6f72 2066 696c 6573 203e 3d20 3130 304d  or files >= 100M
+0000fce0: 422e 0a2d 2046 6978 6564 2061 2062 7567  B..- Fixed a bug
+0000fcf0: 2069 6e20 4a53 4f4e 2070 726f 7879 2073   in JSON proxy s
+0000fd00: 7570 706f 7274 2077 6865 7265 2074 6865  upport where the
+0000fd10: 2070 726f 7879 2069 6e66 6f20 7761 7320   proxy info was 
+0000fd20: 736f 6d65 7469 6d65 7320 756e 7573 6564  sometimes unused
+0000fd30: 2e0a 2d20 4669 7865 6420 6120 6275 6720  ..- Fixed a bug 
+0000fd40: 7768 6572 6520 616e 2061 636c 2067 6574  where an acl get
+0000fd50: 206f 6e20 6120 7072 6976 6174 6520 6465   on a private de
+0000fd60: 6661 756c 7420 6f62 6a65 6374 2041 434c  fault object ACL
+0000fd70: 2072 6574 7572 6e65 6420 616e 0a20 2065   returned an.  e
+0000fd80: 7272 6f72 2069 6e73 7465 6164 206f 6620  rror instead of 
+0000fd90: 6120 626c 616e 6b20 4143 4c2e 0a2d 2046  a blank ACL..- F
+0000fda0: 6978 6564 2061 204a 534f 4e20 4150 4920  ixed a JSON API 
+0000fdb0: 6973 7375 6520 7769 7468 206c 6172 6765  issue with large
+0000fdc0: 2048 5454 5020 7265 7370 6f6e 7365 7320   HTTP responses 
+0000fdd0: 6f6e 2033 322d 6269 7420 7379 7374 656d  on 32-bit system
+0000fde0: 732e 0a0a 4f74 6865 7220 4368 616e 6765  s...Other Change
+0000fdf0: 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a  s.-------------.
+0000fe00: 2d20 496d 7072 6f76 6564 206f 626a 6563  - Improved objec
+0000fe10: 7420 6c69 7374 696e 6720 7065 7266 6f72  t listing perfor
+0000fe20: 6d61 6e63 6520 7768 656e 2075 7369 6e67  mance when using
+0000fe30: 2074 6865 2058 4d4c 2041 5049 2e0a 2d20   the XML API..- 
+0000fe40: 496d 7072 6f76 6564 2076 6172 696f 7573  Improved various
+0000fe50: 2065 7272 6f72 206d 6573 7361 6765 732e   error messages.
+0000fe60: 0a2d 2049 6d70 726f 7665 6420 7072 6f67  .- Improved prog
+0000fe70: 7265 7373 2064 6973 706c 6179 2064 7572  ress display dur
+0000fe80: 696e 6720 6d65 6469 6120 7472 616e 7366  ing media transf
+0000fe90: 6572 2e0a 2d20 5377 6974 6368 6564 2074  er..- Switched t
+0000fea0: 6f20 7472 756e 6361 7465 6420 6578 706f  o truncated expo
+0000feb0: 6e65 6e74 6961 6c20 6261 636b 6f66 6620  nential backoff 
+0000fec0: 666f 7220 7265 7472 6965 732e 0a2d 2049  for retries..- I
+0000fed0: 6d70 726f 7665 6420 4f53 2d73 7065 6369  mproved OS-speci
+0000fee0: 6669 6320 756c 696d 6974 2063 6865 636b  fic ulimit check
+0000fef0: 732e 0a2d 2041 6464 6564 2073 6f6d 6520  s..- Added some 
+0000ff00: 696e 666f 726d 6174 696f 6e20 7375 6368  information such
+0000ff10: 2061 7320 4f53 2061 6e64 2043 6c6f 7564   as OS and Cloud
+0000ff20: 2053 444b 2077 7261 7070 696e 6720 746f   SDK wrapping to
+0000ff30: 2067 7375 7469 6c20 7665 7273 696f 6e2c   gsutil version,
+0000ff40: 0a20 2061 6e64 2063 6861 6e67 6564 2074  .  and changed t
+0000ff50: 6865 206f 7574 7075 7420 666f 726d 6174  he output format
+0000ff60: 2074 6f20 6265 206d 6f72 6520 756e 6966   to be more unif
+0000ff70: 6f72 6d2e 0a2d 2044 6169 7379 2063 6861  orm..- Daisy cha
+0000ff80: 696e 2063 702f 7273 796e 6320 6e6f 7720  in cp/rsync now 
+0000ff90: 7375 7070 6f72 7473 2072 6573 756d 6162  supports resumab
+0000ffa0: 6c65 2075 706c 6f61 6473 2e0a 2d20 496d  le uploads..- Im
+0000ffb0: 7072 6f76 6564 2070 726f 7879 2073 7570  proved proxy sup
+0000ffc0: 706f 7274 2066 6f72 2070 726f 7879 2075  port for proxy u
+0000ffd0: 7365 726e 616d 6520 616e 6420 7061 7373  sername and pass
+0000ffe0: 776f 7264 732e 0a2d 2078 2d61 6d7a 2068  words..- x-amz h
+0000fff0: 6561 6465 7273 2061 7265 206e 6f77 2073  eaders are now s
+00010000: 7570 706f 7274 6564 2066 6f72 2063 702c  upported for cp,
+00010010: 2072 7379 6e63 2c20 616e 6420 7365 746d   rsync, and setm
+00010020: 6574 612e 2020 782d 616d 7a2d 6d65 7461  eta.  x-amz-meta
+00010030: 0a20 2068 6561 6465 7273 2063 6f6e 7469  .  headers conti
+00010040: 6e75 6520 746f 2062 6520 7375 7070 6f72  nue to be suppor
+00010050: 7465 6420 6173 2077 656c 6c2e 0a0a 5265  ted as well...Re
+00010060: 6c65 6173 6520 342e 3320 2872 656c 6561  lease 4.3 (relea
+00010070: 7365 2064 6174 653a 2032 3031 342d 3036  se date: 2014-06
+00010080: 2d31 3029 0a3d 3d3d 3d3d 3d3d 3d3d 3d3d  -10).===========
+00010090: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+000100a0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 0a0a 4275  ============..Bu
+000100b0: 6720 4669 7865 730a 2d2d 2d2d 2d2d 2d2d  g Fixes.--------
+000100c0: 2d0a 2d20 4669 7820 6163 6c2f 6465 6661  -.- Fix acl/defa
+000100d0: 636c 2063 6820 6368 616e 6769 6e67 2074  cl ch changing t
+000100e0: 6865 2072 6f6c 6520 6f66 2061 6e20 6578  he role of an ex
+000100f0: 6973 7469 6e67 2067 726f 7570 2e0a 2d20  isting group..- 
+00010100: 4669 7820 756e 6963 6f64 6520 616e 6420  Fix unicode and 
+00010110: 3430 3420 6572 726f 7273 2077 6865 6e20  404 errors when 
+00010120: 7573 696e 6720 6d61 6e69 6665 7374 732e  using manifests.
+00010130: 0a2d 2046 6978 2070 6172 616c 6c65 6c69  .- Fix paralleli
+00010140: 736d 2063 6f6e 6669 6775 7261 7469 6f6e  sm configuration
+00010150: 2062 7567 2074 6861 7420 6c69 6d69 7465   bug that limite
+00010160: 6420 6773 7574 696c 2072 7379 6e63 2074  d gsutil rsync t
+00010170: 6f20 7477 6f20 7468 7265 6164 730a 2020  o two threads.  
+00010180: 616e 6420 636f 756c 6420 6c65 6164 2074  and could lead t
+00010190: 6f20 7273 796e 6320 6861 6e67 732e 2022  o rsync hangs. "
+000101a0: 6773 7574 696c 202d 6d20 7273 796e 6322  gsutil -m rsync"
+000101b0: 2072 756e 7320 6d75 6368 2066 6173 7465   runs much faste
+000101c0: 722c 2061 6e64 2072 7379 6e63 0a20 2075  r, and rsync.  u
+000101d0: 706c 6f61 6473 206f 6620 6c61 7267 6520  ploads of large 
+000101e0: 6c6f 6361 6c20 6669 6c65 7320 6172 6520  local files are 
+000101f0: 6e6f 7720 6661 7374 6572 2076 6961 2070  now faster via p
+00010200: 6172 616c 6c65 6c20 636f 6d70 6f73 6974  arallel composit
+00010210: 6520 7570 6c6f 6164 2e0a 2020 5061 7261  e upload..  Para
+00010220: 6c6c 656c 2063 6f6d 706f 7369 7465 2075  llel composite u
+00010230: 706c 6f61 6473 206f 6620 6c61 7267 6520  ploads of large 
+00010240: 6669 6c65 7320 6172 6520 616c 736f 2066  files are also f
+00010250: 6173 7465 722e 0a2d 2046 6978 2072 7379  aster..- Fix rsy
+00010260: 6e63 2062 7567 2077 6974 6820 7061 7261  nc bug with para
+00010270: 6c6c 656c 2063 6f6d 706f 7369 7465 2075  llel composite u
+00010280: 706c 6f61 6473 2e0a 2d20 4669 7820 5479  ploads..- Fix Ty
+00010290: 7065 4572 726f 7220 7468 6174 2063 6f75  peError that cou
+000102a0: 6c64 206f 6363 7572 2077 6865 6e20 7275  ld occur when ru
+000102b0: 6e6e 696e 6720 7468 6520 6370 2063 6f6d  nning the cp com
+000102c0: 6d61 6e64 2077 6974 6820 6e6f 0a20 2063  mand with no.  c
+000102d0: 7265 6465 6e74 6961 6c73 2e0a 0a4f 7468  redentials...Oth
+000102e0: 6572 2043 6861 6e67 6573 0a2d 2d2d 2d2d  er Changes.-----
+000102f0: 2d2d 2d2d 2d2d 2d2d 0a2d 2050 726f 6772  --------.- Progr
+00010300: 6573 7320 696e 6469 6361 746f 7273 2066  ess indicators f
+00010310: 6f72 202d 6d20 6370 2f72 7379 6e63 2063  or -m cp/rsync c
+00010320: 6f6d 6d61 6e64 7320 6172 6520 6e6f 7720  ommands are now 
+00010330: 6d6f 7265 2072 6561 6461 626c 652e 0a2d  more readable..-
+00010340: 2041 6464 6564 2063 6f6d 6d61 6e64 2062   Added command b
+00010350: 6569 6e67 2072 756e 2074 6f20 6773 7574  eing run to gsut
+00010360: 696c 202d 642f 2d44 206f 7574 7075 742e  il -d/-D output.
+00010370: 0a2d 204c 6f77 6572 6564 2064 6566 6175  .- Lowered defau
+00010380: 6c74 2070 6172 616c 6c65 6c69 736d 2066  lt parallelism f
+00010390: 6f72 2027 6773 7574 696c 202d 6d20 7465  or 'gsutil -m te
+000103a0: 7374 2720 616e 6420 6164 6465 6420 6861  st' and added ha
+000103b0: 6e67 2064 6574 6563 7469 6f6e 2e0a 0a52  ng detection...R
+000103c0: 656c 6561 7365 2034 2e32 2028 7265 6c65  elease 4.2 (rele
+000103d0: 6173 6520 6461 7465 3a20 3230 3134 2d30  ase date: 2014-0
+000103e0: 362d 3035 290a 3d3d 3d3d 3d3d 3d3d 3d3d  6-05).==========
+000103f0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00010400: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d0a 0a4e  =============..N
+00010410: 6577 2046 6561 7475 7265 730a 2d2d 2d2d  ew Features.----
+00010420: 2d2d 2d2d 2d2d 2d2d 0a2d 2041 6464 6564  --------.- Added
+00010430: 2070 6172 616c 6c65 6c20 7465 7374 2065   parallel test e
+00010440: 7865 6375 7469 6f6e 2073 7570 706f 7274  xecution support
+00010450: 2074 6f20 7465 7374 2063 6f6d 6d61 6e64   to test command
+00010460: 2c20 6578 3a20 2267 7375 7469 6c20 2d6d  , ex: "gsutil -m
+00010470: 2074 6573 7422 0a0a 4275 6720 4669 7865   test"..Bug Fixe
+00010480: 730a 2d2d 2d2d 2d2d 2d2d 2d0a 2d20 4669  s.---------.- Fi
+00010490: 7820 6661 696c 7572 6520 6475 7269 6e67  x failure during
+000104a0: 2072 6574 7279 206f 6620 616e 2058 4d4c   retry of an XML
+000104b0: 2064 6f77 6e6c 6f61 642e 0a2d 204d 6f76   download..- Mov
+000104c0: 6564 2074 6f20 626f 746f 2072 656c 6561  ed to boto relea
+000104d0: 7365 2032 2e32 392e 3120 6669 7869 6e67  se 2.29.1 fixing
+000104e0: 2062 6f74 6f20 6175 7468 656e 7469 6361   boto authentica
+000104f0: 7469 6f6e 2065 7272 6f6e 656f 7573 6c79  tion erroneously
+00010500: 0a20 2072 6570 6f72 7469 6e67 204f 4175  .  reporting OAu
+00010510: 7468 3220 6372 6564 656e 7469 616c 7320  th2 credentials 
+00010520: 6173 2069 6e76 616c 6964 2e0a 2d20 4669  as invalid..- Fi
+00010530: 7820 7061 7261 6c6c 656c 2063 6f6d 706f  x parallel compo
+00010540: 7369 7465 2075 706c 6f61 6473 2077 6865  site uploads whe
+00010550: 6e20 7573 696e 6720 6f6e 6c79 2061 2073  n using only a s
+00010560: 696e 676c 6520 7072 6f63 6573 7320 616e  ingle process an
+00010570: 6420 7468 7265 6164 2e0a 2d20 4669 7820  d thread..- Fix 
+00010580: 616e 2069 6e76 616c 6964 2073 6565 6b20  an invalid seek 
+00010590: 6475 7269 6e67 2064 6169 7379 2063 6861  during daisy cha
+000105a0: 696e 206f 7065 7261 7469 6f6e 2074 6861  in operation tha
+000105b0: 7420 6166 6665 6374 6564 2066 696c 6520  t affected file 
+000105c0: 636f 7079 0a20 2066 726f 6d20 476f 6f67  copy.  from Goog
+000105d0: 6c65 2043 6c6f 7564 2053 746f 7261 6765  le Cloud Storage
+000105e0: 202d 3e20 5333 2066 6f72 2066 696c 6573   -> S3 for files
+000105f0: 2067 7265 6174 6572 2074 6861 6e20 384b   greater than 8K
+00010600: 4220 696e 2073 697a 652e 0a2d 2046 6978  B in size..- Fix
+00010610: 2022 6773 7574 696c 2061 636c 2063 6822   "gsutil acl ch"
+00010620: 2077 6974 6820 416c 6c55 7365 7273 206f   with AllUsers o
+00010630: 7220 416c 6c41 7574 6865 6e74 6963 6174  r AllAuthenticat
+00010640: 6564 5573 6572 7320 6772 6f75 7073 2e0a  edUsers groups..
+00010650: 2d20 4669 7820 736f 6d65 2063 6f70 7920  - Fix some copy 
+00010660: 6572 726f 7273 2077 7269 7469 6e67 206e  errors writing n
+00010670: 6577 206c 696e 6573 2074 6f20 7468 6520  ew lines to the 
+00010680: 6d61 6e69 6665 7374 2066 696c 652e 0a2d  manifest file..-
+00010690: 2046 6978 2022 6773 7574 696c 2074 6573   Fix "gsutil tes
+000106a0: 7422 2072 6574 7572 6e20 636f 6465 2074  t" return code t
+000106b0: 6f20 7072 6f70 6572 6c79 2062 6520 3020  o properly be 0 
+000106c0: 6f6e 2073 7563 6365 7373 2e0a 0a4f 7468  on success...Oth
+000106d0: 6572 2043 6861 6e67 6573 0a2d 2d2d 2d2d  er Changes.-----
+000106e0: 2d2d 2d2d 2d2d 2d2d 0a2d 2022 6773 7574  --------.- "gsut
+000106f0: 696c 2063 7020 2d7a 2220 6e6f 7720 6967  il cp -z" now ig
+00010700: 6e6f 7265 7320 7768 6974 6573 7061 6365  nores whitespace
+00010710: 2069 6e20 7468 6520 6578 7465 6e73 696f   in the extensio
+00010720: 6e20 6c69 7374 2e0a 0a52 656c 6561 7365  n list...Release
+00010730: 2034 2e31 2028 7265 6c65 6173 6520 6461   4.1 (release da
+00010740: 7465 3a20 3230 3134 2d30 352d 3238 290a  te: 2014-05-28).
+00010750: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
 00010760: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00010770: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00010780: 3d3d 3d3d 0a0a 4d61 6a6f 7220 4e65 7720  ====..Major New 
-00010790: 4773 7574 696c 2056 6572 7369 6f6e 202d  Gsutil Version -
-000107a0: 2042 6163 6b77 6172 6473 2d49 6e63 6f6d   Backwards-Incom
-000107b0: 7061 7469 626c 6520 4368 616e 6765 730a  patible Changes.
-000107c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000107d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a2d  --------------.-
-000107e0: 2054 6865 2047 6f6f 676c 6520 436c 6f75   The Google Clou
-000107f0: 6420 5374 6f72 6167 6520 636f 6e66 6967  d Storage config
-00010800: 7572 6174 696f 6e20 6461 7461 2073 7570  uration data sup
-00010810: 706f 7274 6564 2062 7920 7468 6520 6163  ported by the ac
-00010820: 6c2c 2063 6f72 732c 0a20 2061 6e64 206c  l, cors,.  and l
-00010830: 6966 6563 7963 6c65 2063 6f6d 6d61 6e64  ifecycle command
-00010840: 7320 6e6f 7720 7573 6573 2074 6865 204a  s now uses the J
-00010850: 534f 4e20 666f 726d 6174 2069 6e73 7465  SON format inste
-00010860: 6164 206f 6620 7468 6520 6f6c 6465 7220  ad of the older 
-00010870: 584d 4c0a 2020 666f 726d 6174 2e20 6773  XML.  format. gs
-00010880: 7574 696c 2034 2e30 2077 696c 6c20 6661  util 4.0 will fa
-00010890: 696c 2061 6e64 2070 726f 7669 6465 2063  il and provide c
-000108a0: 6f6e 7665 7273 696f 6e20 696e 7374 7275  onversion instru
-000108b0: 6374 696f 6e73 2069 6620 616e 2058 4d4c  ctions if an XML
-000108c0: 0a20 2063 6f6e 6669 6775 7261 7469 6f6e  .  configuration
-000108d0: 2066 696c 6520 6973 2070 726f 7669 6465   file is provide
-000108e0: 6420 6173 2061 6e20 6172 6775 6d65 6e74  d as an argument
-000108f0: 2066 6f72 2061 2067 733a 2f2f 2055 524c   for a gs:// URL
-00010900: 2e0a 2d20 6773 7574 696c 206e 6f20 6c6f  ..- gsutil no lo
-00010910: 6e67 6572 2061 6363 6570 7473 2061 7262  nger accepts arb
-00010920: 6974 7261 7279 2068 6561 6465 7273 2076  itrary headers v
-00010930: 6961 2074 6865 2067 6c6f 6261 6c20 2d68  ia the global -h
-00010940: 2066 6c61 672e 0a20 2044 6f63 756d 656e   flag..  Documen
-00010950: 7465 6420 6865 6164 6572 7320 666f 7220  ted headers for 
-00010960: 6773 7574 696c 2063 6f6d 6d61 6e64 7320  gsutil commands 
-00010970: 6172 6520 7374 696c 6c20 7375 7070 6f72  are still suppor
-00010980: 7465 643b 2066 6f72 2074 6865 0a20 2066  ted; for the.  f
-00010990: 756c 6c20 6c69 7374 206f 6620 7375 7070  ull list of supp
-000109a0: 6f72 7465 6420 6865 6164 6572 732c 2073  orted headers, s
-000109b0: 6565 2022 6773 7574 696c 2068 656c 7020  ee "gsutil help 
-000109c0: 636f 6d6d 616e 645f 6f70 7473 222e 0a2d  command_opts"..-
-000109d0: 2054 6865 2063 6f6d 706f 7365 2063 6f6d   The compose com
-000109e0: 6d61 6e64 2077 696c 6c20 6e6f 7720 6465  mand will now de
-000109f0: 6661 756c 7420 7468 6520 6465 7374 696e  fault the destin
-00010a00: 6174 696f 6e20 6f62 6a65 6374 2773 0a20  ation object's. 
-00010a10: 2043 6f6e 7465 6e74 2d54 7970 6520 746f   Content-Type to
-00010a20: 2074 6865 2043 6f6e 7465 6e74 2d54 7970   the Content-Typ
-00010a30: 6520 6f66 2074 6865 2066 6972 7374 2073  e of the first s
-00010a40: 6f75 7263 6520 6f62 6a65 6374 2069 6620  ource object if 
-00010a50: 6e6f 6e65 0a20 2069 7320 7072 6f76 6964  none.  is provid
-00010a60: 6564 2076 6961 2074 6865 202d 6820 676c  ed via the -h gl
-00010a70: 6f62 616c 2066 6c61 672e 0a2d 2054 6865  obal flag..- The
-00010a80: 206c 6f6e 672d 6465 7072 6563 6174 6564   long-deprecated
-00010a90: 202d 7420 616e 6420 2d71 206f 7074 696f   -t and -q optio
-00010aa0: 6e73 2068 6176 6520 6265 656e 2072 656d  ns have been rem
-00010ab0: 6f76 6564 2066 726f 6d20 7468 6520 6370  oved from the cp
-00010ac0: 2063 6f6d 6d61 6e64 2e0a 2d20 5468 6520   command..- The 
-00010ad0: 7065 7266 6469 6167 2063 6f6d 6d61 6e64  perfdiag command
-00010ae0: 206e 6f20 6c6f 6e67 6572 2073 7570 706f   no longer suppo
-00010af0: 7274 7320 6164 6469 6e67 2061 2068 6f73  rts adding a hos
-00010b00: 7420 6865 6164 6572 2e0a 2d20 4861 7669  t header..- Havi
-00010b10: 6e67 204f 4175 7468 3220 5573 6572 2041  ng OAuth2 User A
-00010b20: 6363 6f75 6e74 2063 7265 6465 6e74 6961  ccount credentia
-00010b30: 6c73 2061 6e64 204f 4175 7468 3220 5365  ls and OAuth2 Se
-00010b40: 7276 6963 6520 4163 636f 756e 740a 2020  rvice Account.  
-00010b50: 6372 6564 656e 7469 616c 7320 636f 6e66  credentials conf
-00010b60: 6967 7572 6564 2073 696d 756c 7461 6e65  igured simultane
-00010b70: 6f75 736c 7920 7769 6c6c 206e 6f77 2066  ously will now f
-00010b80: 6169 6c20 7769 7468 2061 6e20 6572 726f  ail with an erro
-00010b90: 7220 6d65 7373 6167 650a 2020 746f 2061  r message.  to a
-00010ba0: 766f 6964 2063 6f6e 6675 7369 6f6e 2e20  void confusion. 
-00010bb0: 2041 6c73 6f2c 2061 2073 696e 676c 6520   Also, a single 
-00010bc0: 696e 7661 6c69 6420 6372 6564 656e 7469  invalid credenti
-00010bd0: 616c 2077 696c 6c20 6661 696c 2077 6974  al will fail wit
-00010be0: 6820 616e 0a20 2065 7272 6f72 206d 6573  h an.  error mes
-00010bf0: 7361 6765 2e20 2053 6565 2022 6773 7574  sage.  See "gsut
-00010c00: 696c 2068 656c 7020 6372 6564 7322 2066  il help creds" f
-00010c10: 6f72 2064 6574 6169 6c73 2e0a 2d20 4275  or details..- Bu
-00010c20: 636b 6574 2072 656c 6f63 6174 6520 7363  cket relocate sc
-00010c30: 7269 7074 7320 6861 7665 2062 6565 6e20  ripts have been 
-00010c40: 7265 6d6f 7665 642e 0a2d 2044 6f77 6e6c  removed..- Downl
-00010c50: 6f61 6469 6e67 206f 626a 6563 7420 6e61  oading object na
-00010c60: 6d65 7320 656e 6469 6e67 2077 6974 6820  mes ending with 
-00010c70: 272f 2720 6973 206e 6f20 6c6f 6e67 6572  '/' is no longer
-00010c80: 2073 7570 706f 7274 6564 2074 6f20 6176   supported to av
-00010c90: 6f69 640a 2020 7072 6f62 6c65 6d73 2074  oid.  problems t
-00010ca0: 6869 7320 6361 7573 6564 2066 6f72 2064  his caused for d
-00010cb0: 6972 6563 746f 7265 7320 7573 696e 6720  irectores using 
-00010cc0: 7468 6520 476f 6f67 6c65 2043 6c6f 7564  the Google Cloud
-00010cd0: 2043 6f6e 736f 6c65 2e0a 2d20 726d 202d   Console..- rm -
-00010ce0: 7220 6e6f 7720 696d 706c 6965 7320 726d  r now implies rm
-00010cf0: 202d 7261 2028 7265 6d6f 7669 6e67 2061   -ra (removing a
-00010d00: 6c6c 206f 626a 6563 7420 7665 7273 696f  ll object versio
-00010d10: 6e73 2072 6563 7572 7369 7665 6c79 292e  ns recursively).
-00010d20: 0a2d 2041 6c6c 2063 6f6d 6d61 6e64 7320  .- All commands 
-00010d30: 7573 696e 6720 7468 6520 676c 6f62 616c  using the global
-00010d40: 202d 6d20 6f70 7469 6f6e 206f 7220 6120   -m option or a 
-00010d50: 666f 7263 6520 6f70 7469 6f6e 2028 7375  force option (su
-00010d60: 6368 2061 730a 2020 726d 202d 6620 6f72  ch as.  rm -f or
-00010d70: 2063 7020 2d63 2920 7769 6c6c 206e 6f77   cp -c) will now
-00010d80: 2072 6574 7572 6e20 6120 6e6f 6e2d 7a65   return a non-ze
-00010d90: 726f 2065 7869 7420 636f 6465 2069 6620  ro exit code if 
-00010da0: 7468 6572 6520 6172 6520 616e 790a 2020  there are any.  
-00010db0: 6661 696c 7572 6573 2064 7572 696e 6720  failures during 
-00010dc0: 7468 6520 6f70 6572 6174 696f 6e2e 0a2d  the operation..-
-00010dd0: 204d 4435 2061 6e64 2043 5243 3332 6320   MD5 and CRC32c 
-00010de0: 7661 6c75 6573 2061 7265 206e 6f77 2072  values are now r
-00010df0: 6570 7265 7365 6e74 6564 2069 6e20 6261  epresented in ba
-00010e00: 7365 3634 2065 6e63 6f64 696e 6720 696e  se64 encoding in
-00010e10: 7374 6561 640a 2020 6f66 2068 6578 2065  stead.  of hex e
-00010e20: 6e63 6f64 696e 6720 2874 6869 7320 696e  ncoding (this in
-00010e30: 636c 7564 6573 206d 616e 6966 6573 7420  cludes manifest 
-00010e40: 6669 6c65 7329 2e0a 0a4e 6577 2046 6561  files)...New Fea
-00010e50: 7475 7265 730a 2d2d 2d2d 2d2d 2d2d 2d2d  tures.----------
-00010e60: 2d2d 0a2d 2054 6865 2047 6f6f 676c 6520  --.- The Google 
-00010e70: 436c 6f75 6420 5374 6f72 6167 6520 4a53  Cloud Storage JS
-00010e80: 4f4e 2041 5049 2028 7631 2920 6973 206e  ON API (v1) is n
-00010e90: 6f77 2074 6865 2064 6566 6175 6c74 2041  ow the default A
-00010ea0: 5049 2075 7365 640a 2020 6279 2067 7375  PI used.  by gsu
-00010eb0: 7469 6c20 666f 7220 616c 6c20 636f 6d6d  til for all comm
-00010ec0: 616e 6473 2074 6172 6765 7469 6e67 2067  ands targeting g
-00010ed0: 733a 2f2f 2055 524c 732e 2054 6865 204a  s:// URLs. The J
-00010ee0: 534f 4e20 4150 4920 6973 206d 6f72 650a  SON API is more.
-00010ef0: 2020 6261 6e64 7769 6474 6820 6566 6669    bandwidth effi
-00010f00: 6369 656e 7420 7468 616e 2074 6865 206f  cient than the o
-00010f10: 6c64 6572 2058 4d4c 2041 5049 2077 6865  lder XML API whe
-00010f20: 6e20 7472 616e 7366 6572 7269 6e67 206d  n transferring m
-00010f30: 6574 6164 6174 610a 2020 616e 6420 646f  etadata.  and do
-00010f40: 6573 206e 6f74 2072 6571 7569 7265 2073  es not require s
-00010f50: 6570 6172 6174 6520 6361 6c6c 7320 746f  eparate calls to
-00010f60: 2070 7265 7365 7276 6520 6f62 6a65 6374   preserve object
-00010f70: 2041 434c 7320 7768 656e 2063 6f70 7969   ACLs when copyi
-00010f80: 6e67 2e0a 2020 5468 6520 584d 4c20 4150  ng..  The XML AP
-00010f90: 4920 7769 6c6c 2061 7574 6f6d 6174 6963  I will automatic
-00010fa0: 616c 6c79 2062 6520 7573 6564 2077 6865  ally be used whe
-00010fb0: 6e20 6163 6365 7373 696e 6720 7333 3a2f  n accessing s3:/
-00010fc0: 2f20 5552 4c73 2e0a 2d20 5468 6520 476f  / URLs..- The Go
-00010fd0: 6f67 6c65 2043 6c6f 7564 2053 746f 7261  ogle Cloud Stora
-00010fe0: 6765 2058 4d4c 2041 5049 2063 616e 2062  ge XML API can b
-00010ff0: 6520 7573 6564 2069 6e20 6c69 6575 206f  e used in lieu o
-00011000: 6620 7468 6520 4a53 4f4e 2041 5049 0a20  f the JSON API. 
-00011010: 2062 7920 7365 7474 696e 6720 2770 7265   by setting 'pre
-00011020: 6665 725f 6170 6920 3d20 786d 6c27 2069  fer_api = xml' i
-00011030: 6e20 7468 6520 4753 5574 696c 2073 6563  n the GSUtil sec
-00011040: 7469 6f6e 206f 6620 796f 7572 2062 6f74  tion of your bot
-00011050: 6f20 636f 6e66 6967 2066 696c 652e 0a2d  o config file..-
-00011060: 2041 6464 6564 2074 6865 2072 7379 6e63   Added the rsync
-00011070: 2063 6f6d 6d61 6e64 2074 6861 7420 6361   command that ca
-00011080: 6e20 7379 6e63 6872 6f6e 697a 6520 636c  n synchronize cl
-00011090: 6f75 6420 616e 6420 6c6f 6361 6c20 6469  oud and local di
-000110a0: 7265 6374 6f72 6965 732e 0a2d 2041 6464  rectories..- Add
-000110b0: 6564 2074 6865 2073 6967 6e75 726c 2063  ed the signurl c
-000110c0: 6f6d 6d61 6e64 2074 6861 7420 6361 6e20  ommand that can 
-000110d0: 6765 6e65 7261 7465 2047 6f6f 676c 6520  generate Google 
-000110e0: 436c 6f75 6420 5374 6f72 6167 6520 7369  Cloud Storage si
-000110f0: 676e 6564 2055 524c 732e 0a2d 2054 6865  gned URLs..- The
-00011100: 2070 6572 6664 6961 6720 636f 6d6d 616e   perfdiag comman
-00011110: 6420 6e6f 7720 7375 7070 6f72 7473 2061  d now supports a
-00011120: 206c 6973 7469 6e67 206c 6174 656e 6379   listing latency
-00011130: 2074 6573 742e 0a2d 2054 6865 2072 6220   test..- The rb 
-00011140: 636f 6d6d 616e 6420 6e6f 7720 7375 7070  command now supp
-00011150: 6f72 7473 2061 202d 6620 666c 6167 2061  orts a -f flag a
-00011160: 6c6c 6f77 696e 6720 6974 2074 6f20 636f  llowing it to co
-00011170: 6e74 696e 7565 2077 6865 6e20 6572 726f  ntinue when erro
-00011180: 7273 0a20 2061 7265 2065 6e63 6f75 6e74  rs.  are encount
-00011190: 6572 6564 2e0a 2d20 5468 6520 7465 7374  ered..- The test
-000111a0: 2063 6f6d 6d61 6e64 206e 6f77 2073 7570   command now sup
-000111b0: 706f 7274 7320 6120 2d73 2066 6c61 6720  ports a -s flag 
-000111c0: 7468 6174 2072 756e 7320 7465 7374 7320  that runs tests 
-000111d0: 6167 6169 6e73 7420 5333 2e0a 0a4f 7468  against S3...Oth
-000111e0: 6572 2043 6861 6e67 6573 0a2d 2d2d 2d2d  er Changes.-----
-000111f0: 2d2d 2d2d 2d2d 2d2d 0a2d 2041 6c6c 2070  --------.- All p
-00011200: 7974 686f 6e20 6669 6c65 7320 6e6f 7420  ython files not 
-00011210: 756e 6465 7220 6120 7468 6972 645f 7061  under a third_pa
-00011220: 7274 7920 6469 7265 6374 6f72 7920 6172  rty directory ar
-00011230: 6520 6e6f 7720 7079 6c69 6e74 2d63 6c65  e now pylint-cle
-00011240: 616e 2c0a 2020 7769 7468 2074 6865 2065  an,.  with the e
-00011250: 7863 6570 7469 6f6e 206f 6620 544f 444f  xception of TODO
-00011260: 2d66 6f72 6d61 7420 616e 6420 6120 6861  -format and a ha
-00011270: 6e64 6675 6c20 6f66 2077 6172 6e69 6e67  ndful of warning
-00011280: 7320 696e 2072 6f6f 742d 6c65 7665 6c0a  s in root-level.
-00011290: 2020 6669 6c65 732e 2041 7320 7061 7274    files. As part
-000112a0: 206f 6620 7468 6520 6465 2d6c 696e 7469   of the de-linti
-000112b0: 6e67 2070 726f 6365 7373 2c20 6d61 6e79  ng process, many
-000112c0: 2065 6467 652d 6361 7365 2062 7567 7320   edge-case bugs 
-000112d0: 7765 7265 0a20 2069 6465 6e74 6966 6965  were.  identifie
-000112e0: 6420 616e 6420 6669 7865 642e 0a2d 2054  d and fixed..- T
-000112f0: 6865 206c 7320 636f 6d6d 616e 6420 6e6f  he ls command no
-00011300: 7720 6f70 6572 6174 6573 2064 6570 7468  w operates depth
-00011310: 2d66 6972 7374 2028 6173 2069 6e20 556e  -first (as in Un
-00011320: 6978 206c 7329 2069 6e73 7465 6164 0a20  ix ls) instead. 
-00011330: 206f 6620 6272 6561 6474 682d 6669 7273   of breadth-firs
-00011340: 742e 0a2d 2044 6169 7379 2d63 6861 696e  t..- Daisy-chain
-00011350: 2063 6f70 7969 6e67 2064 6f65 7320 6e6f   copying does no
-00011360: 7420 6375 7272 656e 746c 7920 7375 7070  t currently supp
-00011370: 6f72 7420 7265 7375 6d61 626c 6520 7570  ort resumable up
-00011380: 6c6f 6164 732e 0a2d 2053 6576 6572 616c  loads..- Several
-00011390: 2063 6f6d 7061 7469 6269 6c69 7479 2069   compatibility i
-000113a0: 6d70 726f 7665 6d65 6e74 7320 666f 7220  mprovements for 
-000113b0: 5769 6e64 6f77 7320 616e 6420 5333 2e0a  Windows and S3..
-000113c0: 0a0a 5265 6c65 6173 6520 332e 3432 2028  ..Release 3.42 (
-000113d0: 7265 6c65 6173 652d 6461 7465 3a20 3230  release-date: 20
-000113e0: 3134 2d30 312d 3135 290a 3d3d 3d3d 3d3d  14-01-15).======
-000113f0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00011400: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00011410: 3d0a 0a4f 7468 6572 2043 6861 6e67 6573  =..Other Changes
-00011420: 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a0a  .-------------..
-00011430: 2d20 4669 7865 6420 706f 7465 6e74 6961  - Fixed potentia
-00011440: 6c20 6275 6720 7769 7468 2075 7064 6174  l bug with updat
-00011450: 6520 636f 6d6d 616e 6420 6f6e 2043 656e  e command on Cen
-00011460: 744f 532e 0a0a 0a52 656c 6561 7365 2033  tOS....Release 3
-00011470: 2e34 3120 2872 656c 6561 7365 2d64 6174  .41 (release-dat
-00011480: 653a 2032 3031 342d 3031 2d31 3429 0a3d  e: 2014-01-14).=
-00011490: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000114a0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000114b0: 3d3d 3d3d 3d3d 0a0a 4f74 6865 7220 4368  ======..Other Ch
-000114c0: 616e 6765 730a 2d2d 2d2d 2d2d 2d2d 2d2d  anges.----------
-000114d0: 2d2d 2d0a 0a2d 2043 6861 6e67 6573 2074  ---..- Changes t
-000114e0: 6f20 7072 6f74 6563 7420 7365 6375 7269  o protect securi
-000114f0: 7479 206f 6620 7265 7375 6d61 626c 6520  ty of resumable 
-00011500: 7570 6c6f 6164 2049 4473 2e0a 0a0a 5265  upload IDs....Re
-00011510: 6c65 6173 6520 332e 3430 3a20 536b 6970  lease 3.40: Skip
-00011520: 7065 640a 0a0a 5265 6c65 6173 6520 332e  ped...Release 3.
-00011530: 3339 3a20 536b 6970 7065 640a 0a0a 5265  39: Skipped...Re
-00011540: 6c65 6173 6520 332e 3338 2028 7265 6c65  lease 3.38 (rele
-00011550: 6173 652d 6461 7465 3a20 3230 3133 2d31  ase-date: 2013-1
-00011560: 312d 3235 290a 0a42 7567 2046 6978 6573  1-25)..Bug Fixes
-00011570: 0a2d 2d2d 2d2d 2d2d 2d2d 0a0a 2d20 4669  .---------..- Fi
-00011580: 7820 746f 2069 6e63 6c75 6465 2076 6572  x to include ver
-00011590: 7369 6f6e 206e 756d 6265 7220 696e 2075  sion number in u
-000115a0: 7365 722d 6167 656e 7420 7374 7269 6e67  ser-agent string
-000115b0: 2e0a 2d20 4669 7820 6275 6720 7768 6572  ..- Fix bug wher
-000115c0: 6569 6e20 2d6d 2066 6c61 6720 6f72 2070  ein -m flag or p
-000115d0: 6172 616c 6c65 6c20 7570 6c6f 6164 7320  arallel uploads 
-000115e0: 6361 7573 6564 2063 7261 7368 206f 6e20  caused crash on 
-000115f0: 7379 7374 656d 7320 7769 7468 6f75 740a  systems without.
-00011600: 2020 2f64 6576 2f73 686d 2e0a 2d20 4669    /dev/shm..- Fi
-00011610: 7820 5353 4c20 6572 726f 7273 2061 6e64  x SSL errors and
-00011620: 2069 6e76 616c 6964 2072 6573 756c 7473   invalid results
-00011630: 2077 6974 6820 7065 7266 6469 6167 202d   with perfdiag -
-00011640: 6320 616e 6420 2d6b 2072 7468 7275 2074  c and -k rthru t
-00011650: 6573 742e 0a2d 2046 6978 6564 2063 6173  est..- Fixed cas
-00011660: 6573 2077 6865 7265 2070 6172 616c 6c65  es where paralle
-00011670: 6c20 636f 6d70 6f73 6974 6520 7570 6c6f  l composite uplo
-00011680: 6164 7320 636f 756c 6420 6c65 6176 6520  ads could leave 
-00011690: 6f72 7068 616e 6564 2063 6f6d 706f 6e65  orphaned compone
-000116a0: 6e74 732e 0a2d 2046 6978 2062 7567 2061  nts..- Fix bug a
-000116b0: 7474 656d 7074 696e 6720 746f 2073 7461  ttempting to sta
-000116c0: 7420 6f62 6a65 6374 7320 796f 7520 646f  t objects you do
-000116d0: 6e27 7420 6861 7665 2061 7574 6820 746f  n't have auth to
-000116e0: 2072 6561 642e 0a2d 2046 6978 6564 2062   read..- Fixed b
-000116f0: 7567 2062 7265 616b 696e 6720 6465 6661  ug breaking defa
-00011700: 636c 2773 202d 6420 6f70 7469 6f6e 2e0a  cl's -d option..
-00011710: 0a0a 4f74 6865 7220 4368 616e 6765 730a  ..Other Changes.
-00011720: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 0a2d  -------------..-
-00011730: 2046 6978 6564 2067 7375 7469 6c20 636f   Fixed gsutil co
-00011740: 6e66 6967 2064 6f63 2e0a 2d20 4669 7865  nfig doc..- Fixe
-00011750: 6420 7265 6665 7265 6e63 6573 2074 6f20  d references to 
-00011760: 6f6c 6420 636f 6d6d 616e 6420 6e61 6d65  old command name
-00011770: 733b 2066 6978 2064 6566 6163 6c20 6368  s; fix defacl ch
-00011780: 2065 7861 6d70 6c65 2e0a 2d20 496d 7072   example..- Impr
-00011790: 6f76 6564 2065 7272 6f72 206d 6573 7361  oved error messa
-000117a0: 6765 7320 666f 7220 6465 7072 6563 6174  ges for deprecat
-000117b0: 6564 2063 6f6d 6d61 6e64 2061 6c69 6173  ed command alias
-000117c0: 6573 2e0a 2d20 5570 6461 7465 6420 6773  es..- Updated gs
-000117d0: 7574 696c 2073 7570 706f 7274 2069 6e66  util support inf
-000117e0: 6f2e 0a0a 0a4e 6577 2046 6561 7475 7265  o....New Feature
-000117f0: 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a0a  s.------------..
-00011800: 2d20 456e 6162 6c65 6420 2d52 2066 6c61  - Enabled -R fla
-00011810: 6720 666f 7220 7265 6375 7273 696f 6e20  g for recursion 
-00011820: 7769 7468 2073 6574 6d65 7461 2063 6f6d  with setmeta com
-00011830: 6d61 6e64 2e0a 0a0a 5265 6c65 6173 6520  mand....Release 
-00011840: 332e 3337 2028 7265 6c65 6173 652d 6461  3.37 (release-da
-00011850: 7465 3a20 3230 3133 2d30 392d 3235 290a  te: 2013-09-25).
-00011860: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00011870: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00011880: 3d3d 3d3d 3d3d 3d0a 0a42 7567 2046 6978  =======..Bug Fix
-00011890: 6573 0a2d 2d2d 2d2d 2d2d 2d2d 0a0a 2d20  es.---------..- 
-000118a0: 4669 7820 7061 7273 696e 6720 6f66 202d  Fix parsing of -
-000118b0: 5220 666f 7220 2261 636c 2063 6822 2061  R for "acl ch" a
-000118c0: 6e64 2063 6861 636c 2063 6f6d 6d61 6e64  nd chacl command
-000118d0: 732e 0a2d 2046 6978 6564 2069 6d70 6f72  s..- Fixed impor
-000118e0: 7420 7374 6174 656d 656e 7420 6f66 2075  t statement of u
-000118f0: 6e69 7474 6573 7432 2077 6869 6368 2063  nittest2 which c
-00011900: 6175 7365 6420 696e 7374 616c 6c61 7469  aused installati
-00011910: 6f6e 7320 7573 696e 6720 5079 7468 6f6e  ons using Python
-00011920: 0a20 2032 2e36 2077 6974 686f 7574 2075  .  2.6 without u
-00011930: 6e69 7474 6573 7432 2069 6e73 7461 6c6c  nittest2 install
-00011940: 6564 2074 6f20 6661 696c 2077 6865 6e20  ed to fail when 
-00011950: 7374 6172 7469 6e67 2075 7020 6773 7574  starting up gsut
-00011960: 696c 2e0a 0a0a 4f74 6865 7220 4368 616e  il....Other Chan
-00011970: 6765 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ges.------------
-00011980: 2d0a 0a2d 2046 6978 6564 2074 6573 7473  -..- Fixed tests
-00011990: 2073 6f20 7468 6579 2070 6173 7320 6f6e   so they pass on
-000119a0: 2057 696e 646f 7773 2061 6e64 2070 6163   Windows and pac
-000119b0: 6b61 6765 2069 6e73 7461 6c6c 732e 0a2d  kage installs..-
-000119c0: 2041 6464 2061 2072 6f6f 7420 6c6f 6767   Add a root logg
-000119d0: 696e 6720 6861 6e64 6c65 7220 6d61 6e75  ing handler manu
-000119e0: 616c 6c79 2069 6e73 7465 6164 206f 6620  ally instead of 
-000119f0: 7265 6c79 696e 6720 6f6e 2062 6173 6963  relying on basic
-00011a00: 436f 6e66 6967 2e0a 2d20 4669 7820 6170  Config..- Fix ap
-00011a10: 6963 6c69 656e 7420 696d 706f 7274 2073  iclient import s
-00011a20: 7461 7465 6d65 6e74 2e0a 2d20 4578 706f  tatement..- Expo
-00011a30: 6e65 6e74 6961 6c20 6261 636b 6f66 6620  nential backoff 
-00011a40: 666f 7220 6163 6365 7373 2074 6f6b 656e  for access token
-00011a50: 2072 6571 7565 7374 732e 0a2d 2046 6978   requests..- Fix
-00011a60: 2066 6c61 6b69 6e65 7373 2069 6e20 7465   flakiness in te
-00011a70: 7374 2054 6561 7244 6f77 6e20 746f 2061  st TearDown to a
-00011a80: 6363 6f75 6e74 2066 6f72 2065 7665 6e74  ccount for event
-00011a90: 7561 6c20 636f 6e73 6973 7465 6e63 7920  ual consistency 
-00011aa0: 6f66 206f 626a 6563 740a 2020 6c69 7374  of object.  list
-00011ab0: 696e 6773 2e0a 0a0a 5265 6c65 6173 6520  ings....Release 
-00011ac0: 332e 3336 2028 7265 6c65 6173 652d 6461  3.36 (release-da
-00011ad0: 7465 3a20 3230 3133 2d30 392d 3138 290a  te: 2013-09-18).
-00011ae0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00011af0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00011b00: 3d3d 3d3d 3d3d 3d0a 0a42 7567 2046 6978  =======..Bug Fix
-00011b10: 6573 0a2d 2d2d 2d2d 2d2d 2d2d 0a0a 2d20  es.---------..- 
-00011b20: 4669 7820 6275 6720 7768 656e 2061 2034  Fix bug when a 4
-00011b30: 3030 206f 7220 3430 3320 6578 6365 7074  00 or 403 except
-00011b40: 696f 6e20 6861 7320 6e6f 2064 6574 6169  ion has no detai
-00011b50: 6c2e 0a2d 2046 6978 2062 7567 7320 7769  l..- Fix bugs wi
-00011b60: 7468 2063 6f6e 6669 6720 2d65 2061 6e64  th config -e and
-00011b70: 2063 6f6e 6669 6720 2d6f 2e0a 0a0a 4f74   config -o....Ot
-00011b80: 6865 7220 4368 616e 6765 730a 2d2d 2d2d  her Changes.----
-00011b90: 2d2d 2d2d 2d2d 2d2d 2d0a 0a2d 2043 6c61  ---------..- Cla
-00011ba0: 7269 6679 2073 7461 7420 636f 6d6d 616e  rify stat comman
-00011bb0: 6420 646f 6375 6d65 6e74 6174 696f 6e20  d documentation 
-00011bc0: 7265 6761 7264 696e 6720 7472 6169 6c69  regarding traili
-00011bd0: 6e67 2073 6c61 7368 6573 2e0a 2d20 4164  ng slashes..- Ad
-00011be0: 6420 4765 6e65 7261 7469 6f6e 2061 6e64  d Generation and
-00011bf0: 204d 6574 6167 656e 6572 6174 696f 6e20   Metageneration 
-00011c00: 746f 2067 7375 7469 6c20 7374 6174 206f  to gsutil stat o
-00011c10: 7574 7075 742e 0a0a 0a4e 6577 2046 6561  utput....New Fea
-00011c20: 7475 7265 730a 2d2d 2d2d 2d2d 2d2d 2d2d  tures.----------
-00011c30: 2d2d 0a0a 2d20 5365 7420 636f 6e66 6967  --..- Set config
-00011c40: 2076 616c 7565 7320 6672 6f6d 2063 6f6d   values from com
-00011c50: 6d61 6e64 206c 696e 6520 7769 7468 202d  mand line with -
-00011c60: 6f2e 0a0a 0a52 656c 6561 7365 2033 2e33  o....Release 3.3
-00011c70: 3520 2872 656c 6561 7365 2d64 6174 653a  5 (release-date:
-00011c80: 2032 3031 332d 3039 2d30 3929 0a3d 3d3d   2013-09-09).===
-00011c90: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00011ca0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00011cb0: 3d3d 3d3d 0a0a 4275 6720 4669 7865 730a  ====..Bug Fixes.
-00011cc0: 2d2d 2d2d 2d2d 2d2d 2d0a 0a2d 2046 6978  ---------..- Fix
-00011cd0: 2073 7472 6561 6d69 6e67 2075 706c 6f61   streaming uploa
-00011ce0: 6420 746f 2053 3320 616e 6420 7072 6f76  d to S3 and prov
-00011cf0: 6964 6520 6d6f 7265 2075 7365 6675 6c20  ide more useful 
-00011d00: 7374 6163 6b20 7472 6163 6573 206d 756c  stack traces mul
-00011d10: 7469 2d74 6872 6561 6465 6420 6661 696c  ti-threaded fail
-00011d20: 7572 6573 2e0a 2d20 4669 7820 7261 6365  ures..- Fix race
-00011d30: 2063 6f6e 6469 7469 6f6e 2069 6e20 7465   condition in te
-00011d40: 7374 5f72 6d2e 0a2d 2046 6978 2072 6574  st_rm..- Fix ret
-00011d50: 7279 2064 6563 6f72 6174 6f72 2064 7572  ry decorator dur
-00011d60: 696e 6720 7465 7374 2062 7563 6b65 7420  ing test bucket 
-00011d70: 636c 6561 6e75 702e 0a2d 2046 6978 6564  cleanup..- Fixed
-00011d80: 2063 6174 2062 7567 2074 6861 7420 6361   cat bug that ca
-00011d90: 7573 6564 2076 6572 7369 6f6e 2074 6f20  used version to 
-00011da0: 6265 2069 676e 6f72 6564 2069 6e20 5552  be ignored in UR
-00011db0: 4973 2e0a 2d20 446f 6e27 7420 6465 636f  Is..- Don't deco
-00011dc0: 6465 202d 7020 6f72 202d 6820 7661 6c75  de -p or -h valu
-00011dd0: 6573 206f 7468 6572 2074 6861 6e20 782d  es other than x-
-00011de0: 676f 6f67 2d6d 6574 612d 2e20 4669 7865  goog-meta-. Fixe
-00011df0: 7320 6162 696c 6974 7920 746f 2075 7365  s ability to use
-00011e00: 2073 7472 696e 6720 7072 6f6a 6563 7420   string project 
-00011e10: 6e61 6d65 732e 0a2d 2055 7064 6174 6520  names..- Update 
-00011e20: 6275 636b 6574 5f72 656c 6f63 6174 652e  bucket_relocate.
-00011e30: 7368 2074 6f20 776f 726b 206f 6e20 4743  sh to work on GC
-00011e40: 452e 0a2d 2046 6978 2072 6563 7572 7369  E..- Fix recursi
-00011e50: 7665 2075 706c 6f61 6469 6e67 2066 726f  ve uploading fro
-00011e60: 6d20 7375 6264 6972 6563 746f 7269 6573  m subdirectories
-00011e70: 2077 6974 6820 756e 6578 7061 6e64 6564   with unexpanded
-00011e80: 2077 696c 6463 6172 6420 6173 2073 6f75   wildcard as sou
-00011e90: 7263 6520 5552 492e 0a2d 204d 616b 6520  rce URI..- Make 
-00011ea0: 6773 7574 696c 2065 7272 6f72 2074 6578  gsutil error tex
-00011eb0: 7420 696e 636c 7564 6520 3c4d 6573 7361  t include <Messa
-00011ec0: 6765 3e20 636f 6e74 656e 742e 0a2d 2043  ge> content..- C
-00011ed0: 6861 6e67 6520 7368 6562 616e 6720 6c69  hange shebang li
-00011ee0: 6e65 2062 6163 6b20 746f 2070 7974 686f  ne back to pytho
-00011ef0: 6e20 6265 6361 7573 6520 7468 6973 2064  n because this d
-00011f00: 6f65 736e 2774 2077 6f72 6b20 6f6e 2073  oesn't work on s
-00011f10: 6f6d 6520 7379 7374 656d 732e 0a2d 2046  ome systems..- F
-00011f20: 6978 2068 6173 685f 616c 6773 2064 6966  ix hash_algs dif
-00011f30: 6665 7265 6e63 6573 2069 6e20 7065 7266  ferences in perf
-00011f40: 6469 6167 2e0a 2d20 5570 6461 7465 2050  diag..- Update P
-00011f50: 7974 686f 6e20 7665 7273 696f 6e20 6368  ython version ch
-00011f60: 6563 6b20 616e 6420 7368 6562 616e 6720  eck and shebang 
-00011f70: 6c69 6e65 2e0a 2d20 456e 666f 7263 6520  line..- Enforce 
-00011f80: 7072 6f6a 6563 745f 6964 2065 6e74 7279  project_id entry
-00011f90: 2069 6e20 636f 6e66 6967 2063 6f6d 6d61   in config comma
-00011fa0: 6e64 3b20 7072 6f76 6964 6520 6672 6965  nd; provide frie
-00011fb0: 6e64 6c79 2065 7272 6f72 2069 6620 6d69  ndly error if mi
-00011fc0: 7373 696e 6720 7072 6f6a 2049 442e 0a2d  ssing proj ID..-
-00011fd0: 2055 7365 2074 7261 6e73 636f 6469 6e67   Use transcoding
-00011fe0: 2d69 6e76 6172 6961 6e74 2068 6561 6465  -invariant heade
-00011ff0: 7273 2077 6865 6e20 6176 6169 6c61 626c  rs when availabl
-00012000: 6520 696e 2067 732e 4b65 792e 0a2d 204d  e in gs.Key..- M
-00012010: 616b 6520 6773 7574 696c 2063 7020 6e6f  ake gsutil cp no
-00012020: 7420 6661 696c 2069 6620 756e 6162 6c65  t fail if unable
-00012030: 2074 6f20 6368 6563 6b20 7665 7273 696f   to check versio
-00012040: 6e69 6e67 2063 6f6e 6669 6720 6f6e 2064  ning config on d
-00012050: 6573 7420 6275 636b 6574 2e0a 2d20 4d61  est bucket..- Ma
-00012060: 6b65 2067 7375 7469 6c20 6465 7465 6374  ke gsutil detect
-00012070: 2077 6865 6e20 636f 6e66 6967 2066 6169   when config fai
-00012080: 6c73 2062 6563 6175 7365 206f 6620 7072  ls because of pr
-00012090: 6f78 7920 616e 6420 7072 6f6d 7074 2066  oxy and prompt f
-000120a0: 6f72 2070 726f 7879 2063 6f6e 6669 672e  or proxy config.
-000120b0: 0a2d 2041 766f 6964 2063 6865 636b 696e  .- Avoid checkin
-000120c0: 6720 6d65 7461 6765 6e65 7261 7469 6f6e  g metageneration
-000120d0: 2061 7474 7269 6275 7465 2077 6865 6e20   attribute when 
-000120e0: 6c6f 6e67 2d6c 6973 7469 6e67 2053 3320  long-listing S3 
-000120f0: 6f62 6a65 6374 732e 0a2d 2045 7863 6c75  objects..- Exclu
-00012100: 6465 2074 6865 206e 6f2d 6f70 2061 7574  de the no-op aut
-00012110: 6820 6861 6e64 6c65 7220 6173 2069 6e64  h handler as ind
-00012120: 6963 6174 696e 6720 6372 6564 656e 7469  icating credenti
-00012130: 616c 7320 6172 6520 636f 6e66 6967 7572  als are configur
-00012140: 6564 2e0a 0a0a 4e65 7720 4665 6174 7572  ed....New Featur
-00012150: 6573 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a  es.------------.
-00012160: 0a2d 2049 6d70 6c65 6d65 6e74 6564 2067  .- Implemented g
-00012170: 7375 7469 6c20 7374 6174 2063 6f6d 6d61  sutil stat comma
-00012180: 6e64 2e0a 0a0a 4f74 6865 7220 4368 616e  nd....Other Chan
-00012190: 6765 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ges.------------
-000121a0: 2d0a 0a2d 2043 6f6e 736f 6c69 6461 7465  -..- Consolidate
-000121b0: 2063 6f6e 6669 672d 7265 6c61 7465 6420   config-related 
-000121c0: 636f 6d6d 616e 6473 2e0a 2d20 4368 616e  commands..- Chan
-000121d0: 6765 6420 726d 202d 7220 6773 3a2f 2f62  ged rm -r gs://b
-000121e0: 7563 6b65 7420 746f 2064 656c 6574 6520  ucket to delete 
-000121f0: 6275 636b 6574 2061 7420 656e 642e 0a2d  bucket at end..-
-00012200: 2056 6172 696f 7573 2064 6f63 2063 6c65   Various doc cle
-00012210: 616e 7570 2061 6e64 2069 6d70 726f 7665  anup and improve
-00012220: 6d65 6e74 2e0a 2d20 5761 726e 2075 7365  ment..- Warn use
-00012230: 7220 6265 666f 7265 2075 7064 6174 696e  r before updatin
-00012240: 6720 746f 206d 616a 6f72 206e 6577 2076  g to major new v
-00012250: 6572 7369 6f6e 2e20 416c 736f 2066 6978  ersion. Also fix
-00012260: 6564 206d 696e 6f72 2076 6572 7369 6f6e  ed minor version
-00012270: 2063 6f6d 7061 7269 736f 6e20 6275 672c   comparison bug,
-00012280: 2061 6e64 2061 6464 6564 2074 6573 7473   and added tests
-00012290: 2e0a 2d20 4368 616e 6765 206d 6178 2063  ..- Change max c
-000122a0: 6f6d 706f 6e65 6e74 2063 6f75 6e74 2074  omponent count t
-000122b0: 6f20 3130 3234 2e0a 2d20 4164 6420 7265  o 1024..- Add re
-000122c0: 7472 792d 6465 636f 7261 746f 7220 6173  try-decorator as
-000122d0: 2061 2073 7562 6d6f 6475 6c65 2e0a 2d20   a submodule..- 
-000122e0: 4578 706c 6963 6974 6c79 2073 7461 7465  Explicitly state
-000122f0: 2063 6f6e 7472 6f6c 2063 6861 7273 2074   control chars t
-00012300: 6f20 6176 6f69 6420 696e 2067 7375 7469  o avoid in gsuti
-00012310: 6c20 6e61 6d69 6e67 2064 6f63 756d 656e  l naming documen
-00012320: 7461 7469 6f6e 2e0a 2d20 4d61 6b65 2063  tation..- Make c
-00012330: 6f6e 6669 6720 636f 6d6d 616e 6420 7265  onfig command re
-00012340: 636f 6d6d 656e 6420 7072 6f6a 6563 7420  commend project 
-00012350: 7374 7269 6e67 732e 0a2d 204d 6164 6520  strings..- Made 
-00012360: 6c6f 6e67 206c 6973 7469 6e67 2066 6f72  long listing for
-00012370: 6d61 7420 6120 6c69 7474 6c65 2062 6574  mat a little bet
-00012380: 7465 7220 6c6f 6f6b 696e 672e 0a2d 2041  ter looking..- A
-00012390: 6c6c 6f77 202d 2d68 656c 7020 666c 6167  llow --help flag
-000123a0: 2066 6f72 2073 7562 636f 6d6d 616e 6473   for subcommands
-000123b0: 2e0a 2d20 496d 706c 656d 656e 7420 6865  ..- Implement he
-000123c0: 6c70 2066 6f72 2073 7562 636f 6d6d 616e  lp for subcomman
-000123d0: 6473 2061 6e64 2061 6464 204f 5054 494f  ds and add OPTIO
-000123e0: 4e53 2073 6563 7469 6f6e 7320 666f 7220  NS sections for 
-000123f0: 7375 6263 6f6d 6d61 6e64 732e 0a2d 2041  subcommands..- A
-00012400: 6464 206d 6f72 6520 6465 7461 696c 6564  dd more detailed
-00012410: 2065 7272 6f72 206d 6573 7361 6765 2074   error message t
-00012420: 6f20 6e6f 7469 6669 6361 7469 6f6e 2077  o notification w
-00012430: 6174 6368 6275 636b 6574 2063 6f6d 6d61  atchbucket comma
-00012440: 6e64 2e0a 2d20 4164 6420 6e6f 7469 6669  nd..- Add notifi
-00012450: 6361 7469 6f6e 2055 524c 2063 6f6e 6669  cation URL confi
-00012460: 6775 7261 7469 6f6e 2066 6f72 206e 6f74  guration for not
-00012470: 6966 6963 6174 696f 6e20 7465 7374 732e  ification tests.
-00012480: 0a2d 2052 6566 6163 746f 7220 746f 2075  .- Refactor to u
-00012490: 7365 2075 7073 7472 6561 6d20 7265 7472  se upstream retr
-000124a0: 795f 6465 636f 7261 746f 7220 6173 2065  y_decorator as e
-000124b0: 7874 6572 6e61 6c20 6465 7065 6e64 656e  xternal dependen
-000124c0: 6379 2e0a 2d20 4469 7374 7269 6275 7465  cy..- Distribute
-000124d0: 2063 6163 6572 7473 2066 696c 6520 7769   cacerts file wi
-000124e0: 7468 2067 7375 7469 6c2e 0a2d 2055 7064  th gsutil..- Upd
-000124f0: 6174 6564 2067 7375 7469 6c20 6865 6c70  ated gsutil help
-00012500: 2074 6f20 706f 696e 7420 746f 2047 6f6f   to point to Goo
-00012510: 676c 6520 436c 6f75 6420 436f 6e73 6f6c  gle Cloud Consol
-00012520: 6520 696e 7374 6561 6420 6f66 206f 6c64  e instead of old
-00012530: 6572 2041 5049 7320 636f 6e73 6f6c 652e  er APIs console.
-00012540: 0a2d 204d 616b 6520 6773 7574 696c 2070  .- Make gsutil p
-00012550: 6173 7320 6275 6e64 6c65 6420 6361 6365  ass bundled cace
-00012560: 7274 732e 7478 7420 746f 206f 6175 7468  rts.txt to oauth
-00012570: 3263 6c69 656e 743b 2073 746f 7020 6368  2client; stop ch
-00012580: 6563 6b69 6e67 2053 4841 3120 6f66 2063  ecking SHA1 of c
-00012590: 6572 7473 2c20 6e6f 7720 7468 6174 2077  erts, now that w
-000125a0: 6520 6e6f 206c 6f6e 6765 7220 6465 7065  e no longer depe
-000125b0: 6e64 206f 6e20 626f 746f 2064 6973 7472  nd on boto distr
-000125c0: 6962 7574 696f 6e2e 0a2d 204d 6f76 6520  ibution..- Move 
-000125d0: 616c 6c20 5454 5920 6368 6563 6b73 2074  all TTY checks t
-000125e0: 6f20 6120 636f 6d6d 6f6e 2075 7469 6c20  o a common util 
-000125f0: 6675 6e63 7469 6f6e 2061 6e64 206d 6f63  function and moc
-00012600: 6b20 6974 2066 6f72 2075 7064 6174 6520  k it for update 
-00012610: 7465 7374 732e 0a2d 2046 6978 2064 7570  tests..- Fix dup
-00012620: 6c69 6361 7465 2065 6e74 7279 2063 7265  licate entry cre
-00012630: 6174 6564 2069 6e20 2e67 6974 6d6f 6475  ated in .gitmodu
-00012640: 6c65 732e 0a2d 2046 6978 2075 6e69 7420  les..- Fix unit 
-00012650: 7465 7374 2062 7265 616b 6167 6520 6265  test breakage be
-00012660: 6361 7573 6520 5645 5253 494f 4e20 6669  cause VERSION fi
-00012670: 6c65 2069 7320 6f6c 642e 0a2d 2046 6978  le is old..- Fix
-00012680: 2074 6573 7420 7573 696e 6720 3f20 676c   test using ? gl
-00012690: 6f62 2077 6974 6820 4f62 6a65 6374 546f  ob with ObjectTo
-000126a0: 5552 492e 0a2d 2046 6978 2075 7064 6174  URI..- Fix updat
-000126b0: 6520 7465 7374 7320 7468 6174 2066 6169  e tests that fai
-000126c0: 6c20 666f 7220 7061 636b 6167 6520 696e  l for package in
-000126d0: 7374 616c 6c73 2e0a 2d20 4368 616e 6765  stalls..- Change
-000126e0: 2062 7563 6b65 7420 6465 6c65 7465 2074   bucket delete t
-000126f0: 6561 7264 6f77 6e20 746f 2074 7279 206d  eardown to try m
-00012700: 6f72 6520 7469 6d65 732e 0a2d 2046 6978  ore times..- Fix
-00012710: 2074 6573 7473 2074 6861 7420 7065 7266   tests that perf
-00012720: 6f72 6d20 6f70 6572 6174 696f 6e73 206f  orm operations o
-00012730: 6e20 6275 636b 6574 206c 6973 7469 6e67  n bucket listing
-00012740: 732e 0a2d 204b 6565 7020 7061 636b 6167  s..- Keep packag
-00012750: 6520 696e 7374 616c 6c20 7365 7420 746f  e install set to
-00012760: 2054 7275 6520 756e 6c65 7373 2056 4552   True unless VER
-00012770: 5349 4f4e 2066 696c 6520 646f 6573 6e27  SION file doesn'
-00012780: 7420 6578 6973 742e 0a2d 2046 6978 2068  t exist..- Fix h
-00012790: 616e 646c 696e 6720 6f66 206e 6f6e 2d6e  andling of non-n
-000127a0: 756d 6572 6963 2076 6572 7369 6f6e 2073  umeric version s
-000127b0: 7472 696e 6773 2069 6e20 7570 6461 7465  trings in update
-000127c0: 2074 6573 742e 0a0a 0a52 656c 6561 7365   test....Release
-000127d0: 2033 2e33 3420 2872 656c 6561 7365 2d64   3.34 (release-d
-000127e0: 6174 653a 2032 3031 332d 3037 2d31 3829  ate: 2013-07-18)
-000127f0: 0a3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  .===============
-00012800: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00012810: 3d3d 3d3d 3d3d 3d3d 0a0a 4275 6720 4669  ========..Bug Fi
-00012820: 7865 730a 2d2d 2d2d 2d2d 2d2d 2d0a 0a2d  xes.---------..-
-00012830: 2046 6978 6564 2061 2062 7567 2077 6865   Fixed a bug whe
-00012840: 7265 2074 6865 206e 6f2d 6f70 2061 7574  re the no-op aut
-00012850: 6865 6e74 6963 6174 696f 6e20 6861 6e64  hentication hand
-00012860: 6c65 7220 7761 7320 6265 696e 6720 6c6f  ler was being lo
-00012870: 6164 6564 2061 6674 6572 0a20 206f 7468  aded after.  oth
-00012880: 6572 2061 7574 6865 6e74 6963 6174 696f  er authenticatio
-00012890: 6e20 706c 7567 696e 732c 2063 6175 7369  n plugins, causi
-000128a0: 6e67 2074 6865 206e 6f2d 6f70 2068 616e  ng the no-op han
-000128b0: 646c 6572 2074 6f20 6265 2063 686f 7365  dler to be chose
-000128c0: 6e20 696e 7374 6561 640a 2020 6f66 206f  n instead.  of o
-000128d0: 7468 6572 2076 616c 6964 2063 7265 6465  ther valid crede
-000128e0: 6e74 6961 6c73 2e0a 0a0a 5265 6c65 6173  ntials....Releas
-000128f0: 6520 332e 3333 2028 7265 6c65 6173 652d  e 3.33 (release-
-00012900: 6461 7465 3a20 3230 3133 2d30 372d 3136  date: 2013-07-16
-00012910: 290a 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ).==============
-00012920: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00012930: 3d3d 3d3d 3d3d 3d3d 3d0a 0a42 7567 2046  =========..Bug F
-00012940: 6978 6573 0a2d 2d2d 2d2d 2d2d 2d2d 0a0a  ixes.---------..
-00012950: 2d20 4164 6465 6420 2e67 6974 2a20 746f  - Added .git* to
-00012960: 204d 414e 4946 4553 542e 696e 2065 7863   MANIFEST.in exc
-00012970: 6c75 6465 7320 616e 6420 6669 7865 6420  ludes and fixed 
-00012980: 6370 2064 6f63 2074 7970 6f2e 2054 6869  cp doc typo. Thi
-00012990: 7320 7761 7320 6e65 6564 6564 2074 6f0a  s was needed to.
-000129a0: 2020 6f76 6572 636f 6d65 2070 726f 626c    overcome probl
-000129b0: 656d 2063 6175 7365 6420 6279 2061 6363  em caused by acc
-000129c0: 6964 656e 7461 6c20 696e 636c 7573 696f  idental inclusio
-000129d0: 6e20 6f66 202e 6769 742a 2066 696c 6573  n of .git* files
-000129e0: 2069 6e20 7265 6c65 6173 652c 0a20 2077   in release,.  w
-000129f0: 6869 6368 2063 6175 7365 6420 7468 6520  hich caused the 
-00012a00: 7570 6461 7465 2063 6f6d 6d61 6e64 206e  update command n
-00012a10: 6f20 6c6f 6e67 6572 2074 6f20 616c 6c6f  o longer to allo
-00012a20: 7720 7570 6461 7465 7320 2873 696e 6365  w updates (since
-00012a30: 2073 7461 7274 696e 670a 2020 696e 2033   starting.  in 3
-00012a40: 2e33 3220 6974 2063 6865 636b 7320 7768  .32 it checks wh
-00012a50: 6574 6865 7220 7468 6520 7573 6572 2068  ether the user h
-00012a60: 6173 2061 6e79 2065 7874 7261 6e65 6f75  as any extraneou
-00012a70: 7320 6669 6c65 7320 696e 2074 6865 2067  s files in the g
-00012a80: 7375 7469 6c0a 2020 6469 7265 6374 6f72  sutil.  director
-00012a90: 7920 6265 666f 7265 2075 7064 6174 696e  y before updatin
-00012aa0: 6729 0a0a 0a52 656c 6561 7365 2033 2e33  g)...Release 3.3
-00012ab0: 3220 2872 656c 6561 7365 2d64 6174 653a  2 (release-date:
-00012ac0: 2032 3031 332d 3037 2d31 3629 0a3d 3d3d   2013-07-16).===
-00012ad0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00012ae0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00012af0: 3d3d 3d3d 0a0a 4e65 7720 4665 6174 7572  ====..New Featur
-00012b00: 6573 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a  es.------------.
-00012b10: 0a2d 2041 6464 6564 2073 7570 706f 7274  .- Added support
-00012b20: 2066 6f72 2067 6574 7469 6e67 2061 6e64   for getting and
-00012b30: 2073 6574 7469 6e67 206c 6966 6563 7963   setting lifecyc
-00012b40: 6c65 2063 6f6e 6669 6775 7261 7469 6f6e  le configuration
-00012b50: 2066 6f72 2062 7563 6b65 7473 2e0a 2d20   for buckets..- 
-00012b60: 496d 706c 656d 656e 7465 6420 5061 7261  Implemented Para
-00012b70: 6c6c 656c 2043 6f6d 706f 7369 7465 2055  llel Composite U
-00012b80: 706c 6f61 6473 2e0a 2d20 4164 6465 6420  ploads..- Added 
-00012b90: 6120 6e65 7720 6475 2063 6f6d 6d61 6e64  a new du command
-00012ba0: 2074 6861 7420 6469 7370 6c61 7973 206f   that displays o
-00012bb0: 626a 6563 7420 7369 7a65 2c20 7369 6d69  bject size, simi
-00012bc0: 6c61 7220 746f 204c 696e 7578 2064 752e  lar to Linux du.
-00012bd0: 0a0a 0a42 7567 2046 6978 6573 0a2d 2d2d  ...Bug Fixes.---
-00012be0: 2d2d 2d2d 2d2d 0a0a 2d20 4669 7865 6420  ------..- Fixed 
-00012bf0: 6120 6275 6720 7768 656e 2075 7369 6e67  a bug when using
-00012c00: 206c 7320 2d52 206f 6e20 6f62 6a65 6374   ls -R on object
-00012c10: 7320 7769 7468 2074 7261 696c 696e 6720  s with trailing 
-00012c20: 736c 6173 6865 732e 2043 6c6f 7365 7320  slashes. Closes 
-00012c30: 2339 332e 0a2d 2046 6978 6564 2073 6f20  #93..- Fixed so 
-00012c40: 776f 6e27 7420 6372 6173 6820 696e 2070  won't crash in p
-00012c50: 6572 6664 6961 6720 7768 656e 206e 736c  erfdiag when nsl
-00012c60: 6f6f 6b75 7020 6973 206d 6973 7369 6e67  ookup is missing
-00012c70: 206f 7220 6765 7468 6f73 7462 796e 616d   or gethostbynam
-00012c80: 650a 2020 6661 696c 732e 0a2d 2053 6d61  e.  fails..- Sma
-00012c90: 7274 6c79 2063 6f6d 7061 7265 2076 6572  rtly compare ver
-00012ca0: 7369 6f6e 2073 7472 696e 6773 2064 7572  sion strings dur
-00012cb0: 696e 6720 6175 746f 7570 6461 7465 2063  ing autoupdate c
-00012cc0: 6865 636b 2e0a 2d20 4d61 6465 2068 6561  heck..- Made hea
-00012cd0: 6465 7220 6861 6e64 6c69 6e67 2066 6f72  der handling for
-00012ce0: 2075 706c 6f61 6420 6361 7365 2d69 6e73   upload case-ins
-00012cf0: 656e 7369 7469 7665 2e0a 2d20 5265 2d65  ensitive..- Re-e
-00012d00: 6e61 626c 6564 2073 6f66 7477 6172 6520  nabled software 
-00012d10: 7570 6461 7465 2063 6865 636b 2066 6f72  update check for
-00012d20: 2075 7365 7273 2077 6974 6820 6e6f 2063   users with no c
-00012d30: 7265 6465 6e74 6961 6c73 2063 6f6e 6669  redentials confi
-00012d40: 6775 7265 642e 0a2d 2046 6978 6564 2069  gured..- Fixed i
-00012d50: 6e63 6f72 7265 6374 6c79 2d67 656e 6572  ncorrectly-gener
-00012d60: 6174 6564 2070 6173 7377 6f72 6420 6564  ated password ed
-00012d70: 6974 696e 6720 636f 6d6d 656e 7420 696e  iting comment in
-00012d80: 2073 6572 7669 6365 2061 6363 6f75 6e74   service account
-00012d90: 0a20 2063 6f6e 6669 672e 2046 6978 6573  .  config. Fixes
-00012da0: 2023 3134 362e 0a0a 0a4f 7468 6572 2043   #146....Other C
-00012db0: 6861 6e67 6573 0a2d 2d2d 2d2d 2d2d 2d2d  hanges.---------
-00012dc0: 2d2d 2d2d 0a0a 2d20 496d 7072 6f76 6564  ----..- Improved
-00012dd0: 2066 6c6f 7720 7768 656e 2065 6e63 6f75   flow when encou
-00012de0: 6e74 6572 2061 7574 6820 6661 696c 7572  nter auth failur
-00012df0: 6520 666f 7220 4743 4520 7365 7276 6963  e for GCE servic
-00012e00: 6520 6163 636f 756e 7420 7769 7468 206e  e account with n
-00012e10: 6f0a 2020 636f 6e66 6967 7572 6564 2073  o.  configured s
-00012e20: 746f 7261 6765 2073 636f 7065 733a 0a20  torage scopes:. 
-00012e30: 2020 2031 2e20 4368 616e 6765 6420 4861     1. Changed Ha
-00012e40: 7343 6f6e 6669 6775 7265 6443 7265 6465  sConfiguredCrede
-00012e50: 6e74 6961 6c73 2829 206c 6f67 6963 206e  ntials() logic n
-00012e60: 6f74 2074 6f20 696e 636c 7564 650a 2020  ot to include.  
-00012e70: 2020 2020 2068 6173 5f61 7574 685f 706c       has_auth_pl
-00012e80: 7567 696e 7320 6173 2070 6172 7420 6f66  ugins as part of
-00012e90: 2074 6865 2065 7661 6c75 6174 6564 2065   the evaluated e
-00012ea0: 7870 7265 7373 696f 6e2c 2073 696e 6365  xpression, since
-00012eb0: 2074 6861 7420 7769 6c6c 0a20 2020 2020   that will.     
-00012ec0: 2020 616c 7761 7973 2065 7661 6c75 6174    always evaluat
-00012ed0: 6520 746f 2074 7275 6520 756e 6465 7220  e to true under 
-00012ee0: 4743 4520 2873 696e 6365 2047 4345 2063  GCE (since GCE c
-00012ef0: 6f6e 6669 6775 7265 7320 6974 7320 696e  onfigures its in
-00012f00: 7465 726e 616c 0a20 2020 2020 2020 7365  ternal.       se
-00012f10: 7276 6963 6520 6163 636f 756e 7420 706c  rvice account pl
-00012f20: 7567 696e 2075 6e64 6572 202f 6574 632f  ugin under /etc/
-00012f30: 626f 746f 2e63 6667 292e 0a20 2020 2032  boto.cfg)..    2
-00012f40: 2e20 4368 616e 6765 6420 436f 6e66 6967  . Changed Config
-00012f50: 7572 654e 6f4f 7041 7574 6849 664e 6565  ureNoOpAuthIfNee
-00012f60: 6465 6420 6c6f 6769 6320 736f 2077 6520  ded logic so we 
-00012f70: 636f 6e66 6967 7572 6520 6e6f 2d6f 7020  configure no-op 
-00012f80: 6175 7468 0a20 2020 2020 2020 706c 7567  auth.       plug
-00012f90: 696e 2065 7665 6e20 6966 2074 6865 7265  in even if there
-00012fa0: 2069 7320 6120 636f 6e66 6967 5f66 696c   is a config_fil
-00012fb0: 6520 6c69 7374 2c20 7369 6e63 6520 4743  e list, since GC
-00012fc0: 4520 616c 7761 7973 2063 6f6e 6669 6775  E always configu
-00012fd0: 7265 730a 2020 2020 2020 202f 6574 632f  res.       /etc/
-00012fe0: 626f 746f 2e63 6667 2c20 6576 656e 2069  boto.cfg, even i
-00012ff0: 6620 7573 6572 2068 6173 206e 6f20 7374  f user has no st
-00013000: 6f72 6167 6520 7363 6f70 6573 2063 6f6e  orage scopes con
-00013010: 6669 6775 7265 642e 0a20 2020 2033 2e20  figured..    3. 
-00013020: 4164 6469 7469 6f6e 616c 2063 6861 6e67  Additional chang
-00013030: 6573 3a0a 2020 2020 2020 612e 2052 656d  es:.      a. Rem
-00013040: 6f76 6564 2061 7373 6572 7469 6f6e 206f  oved assertion o
-00013050: 6620 6f61 7574 6820 6163 6365 7373 2074  f oauth access t
-00013060: 6f6b 656e 2063 6163 6865 2063 6865 636b  oken cache check
-00013070: 206c 6f67 2066 726f 6d0a 2020 2020 2020   log from.      
-00013080: 2020 2074 6573 745f 446f 7074 696f 6e2e     test_Doption.
-00013090: 7079 2c20 7768 6963 6820 6d61 7920 6e6f  py, which may no
-000130a0: 7420 6265 2074 7275 6520 736f 6d65 7469  t be true someti
-000130b0: 6d65 7320 2865 2e67 2e2c 2069 6620 7573  mes (e.g., if us
-000130c0: 6572 2069 730a 2020 2020 2020 2020 2075  er is.         u
-000130d0: 7369 6e67 2048 4d41 4320 6372 6564 7329  sing HMAC creds)
-000130e0: 2e0a 2020 2020 2020 622e 2052 656d 6f76  ..      b. Remov
-000130f0: 6564 2072 656d 6e61 6e74 7320 6f66 2043  ed remnants of C
-00013100: 4f4e 4649 475f 5245 5155 4952 4544 206c  ONFIG_REQUIRED l
-00013110: 6566 7420 6f76 6572 2066 726f 6d20 6561  eft over from ea
-00013120: 726c 6965 7220 434c 2e0a 2020 2020 2020  rlier CL..      
-00013130: 632e 204d 6572 6765 6420 6475 7065 205f  c. Merged dupe _
-00013140: 436f 6e66 6967 7572 654e 6f4f 7041 7574  ConfigureNoOpAut
-00013150: 6849 664e 6565 6465 6420 6675 6e63 7469  hIfNeeded functi
-00013160: 6f6e 7320 6672 6f6d 2074 776f 2063 6f64  ons from two cod
-00013170: 6520 6669 6c65 732c 0a20 2020 2020 2020  e files,.       
-00013180: 2020 6d6f 7665 6420 746f 2075 7469 6c2e    moved to util.
-00013190: 7079 2e0a 2d20 4669 7865 6420 636f 6e66  py..- Fixed conf
-000131a0: 7573 696e 6720 6773 7574 696c 2072 6d20  using gsutil rm 
-000131b0: 224f 6d69 7474 696e 6722 206d 6573 7361  "Omitting" messa
-000131c0: 6765 2e0a 2d20 5772 6170 7065 6420 6c6f  ge..- Wrapped lo
-000131d0: 6e67 2067 7375 7469 6c20 7570 6461 7465  ng gsutil update
-000131e0: 206d 6573 7361 6765 2e0a 2d20 5369 6c65   message..- Sile
-000131f0: 6e63 6564 2061 6464 6974 696f 6e61 6c20  nced additional 
-00013200: 706f 7373 6962 6c65 2070 6572 6664 6961  possible perfdia
-00013210: 6720 6572 726f 7273 2e0a 2d20 496d 7072  g errors..- Impr
-00013220: 6f76 6564 2070 6572 6664 6961 6720 7065  oved perfdiag pe
-00013230: 7266 6f72 6d61 6e63 6520 6279 206f 6e6c  rformance by onl
-00013240: 7920 6765 6e65 7261 7469 6e67 206f 6e65  y generating one
-00013250: 2063 6875 6e6b 206f 6620 7261 6e64 6f6d   chunk of random
-00013260: 2066 696c 652e 0a2d 2043 6861 6e67 6564   file..- Changed
-00013270: 2074 6f20 7377 616c 6c6f 7720 6272 6f6b   to swallow brok
-00013280: 656e 2070 6970 6520 6572 726f 7273 2077  en pipe errors w
-00013290: 6865 6e20 7069 7069 6e67 2067 7375 7469  hen piping gsuti
-000132a0: 6c20 746f 206f 7468 6572 2070 726f 6772  l to other progr
-000132b0: 616d 732e 0a2d 204d 6164 6520 446f 7466  ams..- Made Dotf
-000132c0: 756c 4275 636b 6574 4e61 6d65 4e6f 7455  ulBucketNameNotU
-000132d0: 6e64 6572 546c 6420 6572 726f 7220 6d65  nderTld error me
-000132e0: 7373 6167 6520 6d6f 7265 2075 7365 7220  ssage more user 
-000132f0: 6672 6965 6e64 6c79 2e0a 2d20 4578 7472  friendly..- Extr
-00013300: 6163 7465 6420 6675 6e63 7469 6f6e 2066  acted function f
-00013310: 6f72 2062 7569 6c64 696e 6720 4143 4c20  or building ACL 
-00013320: 6572 726f 7220 7465 7874 2066 726f 6d20  error text from 
-00013330: 6d61 696e 2074 7279 2f65 7863 6570 7420  main try/except 
-00013340: 6c6f 6f70 2c0a 2020 666f 7220 6265 7474  loop,.  for bett
-00013350: 6572 2072 6561 6461 6269 6c69 7479 2e0a  er readability..
-00013360: 2d20 4469 7361 6c6c 6f77 6564 2067 7375  - Disallowed gsu
-00013370: 7469 6c20 7570 6461 7465 2077 6865 6e20  til update when 
-00013380: 7573 6572 2064 6174 6120 7072 6573 656e  user data presen
-00013390: 7420 696e 2067 7375 7469 6c20 6469 722e  t in gsutil dir.
-000133a0: 0a2d 2050 6c75 6d62 6564 2061 6363 6570  .- Plumbed accep
-000133b0: 742d 656e 636f 6469 6e67 2069 6e74 6f20  t-encoding into 
-000133c0: 4845 4144 2072 6571 7565 7374 7320 696e  HEAD requests in
-000133d0: 206c 7320 2d4c 2063 6f6d 6d61 6e64 2e0a   ls -L command..
-000133e0: 2d20 5570 6461 7465 6420 5245 4144 4d45  - Updated README
-000133f0: 2061 6e64 206d 6f76 6564 2052 656c 6561   and moved Relea
-00013400: 7365 4e6f 7465 732e 7478 7420 746f 2043  seNotes.txt to C
-00013410: 4841 4e47 4553 2e6d 642e 0a2d 2055 7064  HANGES.md..- Upd
-00013420: 6174 6564 2063 7263 6d6f 6420 646f 6373  ated crcmod docs
-00013430: 2077 6974 6820 6c69 6e6b 2074 6f20 5769   with link to Wi
-00013440: 6e64 6f77 7320 696e 7374 616c 6c65 722e  ndows installer.
-00013450: 0a2d 2055 7064 6174 6564 2064 6f63 756d  .- Updated docum
-00013460: 656e 7461 7469 6f6e 2072 6567 6172 6469  entation regardi
-00013470: 6e67 2067 7a69 7020 636f 6e74 656e 742d  ng gzip content-
-00013480: 656e 636f 6469 6e67 2e0a 2d20 5265 6d6f  encoding..- Remo
-00013490: 7665 6420 5374 6f72 6167 6555 7269 2070  ved StorageUri p
-000134a0: 6172 7365 2063 6865 636b 2066 6f72 206c  arse check for l
-000134b0: 6f6e 6520 273a 2720 2869 6e74 6572 6665  one ':' (interfe
-000134c0: 7265 7320 7769 7468 2075 7369 6e67 2066  res with using f
-000134d0: 696c 656e 616d 6573 0a20 2063 6f6e 7461  ilenames.  conta
-000134e0: 696e 696e 6720 273a 2729 0a2d 2041 6464  ining ':').- Add
-000134f0: 6564 2074 6573 7473 2066 6f72 2067 7375  ed tests for gsu
-00013500: 7469 6c20 7570 6461 7465 2063 6865 636b  til update check
-00013510: 2061 6e64 2066 6978 6564 2062 7567 2066   and fixed bug f
-00013520: 6f72 2062 6164 2066 696c 6520 636f 6e74  or bad file cont
-00013530: 656e 7473 2e0a 2d20 5365 7420 6163 6365  ents..- Set acce
-00013540: 7074 2d65 6e63 6f64 696e 6720 616e 6420  pt-encoding and 
-00013550: 6861 6e64 6c65 2067 7a69 7020 6f6e 2d74  handle gzip on-t
-00013560: 6865 2d66 6c79 2065 6e63 6f64 696e 672e  he-fly encoding.
-00013570: 0a0a 0a52 656c 6561 7365 2033 2e33 3120  ...Release 3.31 
-00013580: 2872 656c 6561 7365 2d64 6174 653a 2032  (release-date: 2
-00013590: 3031 332d 3036 2d31 3029 0a3d 3d3d 3d3d  013-06-10).=====
-000135a0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000135b0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000135c0: 3d3d 0a0a 4e65 7720 4665 6174 7572 6573  ==..New Features
-000135d0: 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 0a2d  .------------..-
-000135e0: 2049 6d70 6c65 6d65 6e74 6564 2063 6f6e   Implemented con
-000135f0: 7375 6d70 7469 6f6e 206f 6620 6d61 6e69  sumption of mani
-00013600: 6665 7374 2066 696c 6573 2066 6f72 2063  fest files for c
-00013610: 702e 0a2d 2041 6464 2045 5461 6720 746f  p..- Add ETag to
-00013620: 206c 7320 2d6c 2061 6e64 206d 616b 6520   ls -l and make 
-00013630: 6c73 202d 6220 7661 7269 616e 7473 206d  ls -b variants m
-00013640: 6f72 6520 6566 6669 6369 656e 742e 0a2d  ore efficient..-
-00013650: 2045 7870 616e 6420 7468 6520 6d61 6e69   Expand the mani
-00013660: 6665 7374 2070 6174 6820 746f 2061 6c6c  fest path to all
-00013670: 6f77 2066 6f72 2074 696c 6465 7320 696e  ow for tildes in
-00013680: 2070 6174 6873 2e0a 2d20 4164 6465 6420   paths..- Added 
-00013690: 6275 636b 6574 5f72 656c 6f63 6174 652e  bucket_relocate.
-000136a0: 7368 2073 6372 6970 7420 746f 2067 7375  sh script to gsu
-000136b0: 7469 6c2e 0a0a 0a42 7567 2046 6978 6573  til....Bug Fixes
-000136c0: 0a2d 2d2d 2d2d 2d2d 2d2d 0a0a 2d20 4669  .---------..- Fi
-000136d0: 7820 6773 7574 696c 2063 7020 2d52 2074  x gsutil cp -R t
-000136e0: 6f20 636f 7079 2061 6c6c 2076 6572 7369  o copy all versi
-000136f0: 6f6e 6564 206f 626a 6563 7473 2e0a 2d20  oned objects..- 
-00013700: 4669 7865 6420 6275 6720 7768 6572 6520  Fixed bug where 
-00013710: 6773 7574 696c 2063 7020 2d44 202d 6e20  gsutil cp -D -n 
-00013720: 6361 7573 6564 2070 7265 636f 6e64 6974  caused precondit
-00013730: 696f 6e20 6661 696c 7572 652e 0a2d 2046  ion failure..- F
-00013740: 6978 6564 2067 7375 7469 6c20 6461 6973  ixed gsutil dais
-00013750: 792d 6368 6169 6e20 636f 7079 2074 6f20  y-chain copy to 
-00013760: 616c 6c6f 7720 7072 6573 6572 7669 6e67  allow preserving
-00013770: 2041 434c 7320 7768 656e 2063 6f70 7969   ACLs when copyi
-00013780: 6e67 2077 6974 6869 6e0a 2020 7361 6d65  ng within.  same
-00013790: 2070 726f 7669 6465 722e 0a2d 2046 6978   provider..- Fix
-000137a0: 2069 6465 6e74 6966 6963 6174 696f 6e20   identification 
-000137b0: 6f66 206e 6f6e 2d4d 4435 2045 5461 6773  of non-MD5 ETags
-000137c0: 2e0a 2d20 4669 7865 6420 6275 6773 2077  ..- Fixed bugs w
-000137d0: 6865 7265 2067 7375 7469 6c20 2d71 2063  here gsutil -q c
-000137e0: 7020 616e 6420 6773 7574 696c 2063 7020  p and gsutil cp 
-000137f0: 2d71 2073 6f6d 6574 696d 6573 2077 6572  -q sometimes wer
-00013800: 656e 2774 2071 7569 6574 2e0a 2d20 4669  en't quiet..- Fi
-00013810: 7865 6420 756e 6963 6f64 6520 6572 726f  xed unicode erro
-00013820: 7220 7768 656e 2063 6f6e 7374 7275 6374  r when construct
-00013830: 696e 6720 7472 6163 6b65 7220 6669 6c65  ing tracker file
-00013840: 6e61 6d65 2066 726f 6d20 6e6f 6e2d 4153  name from non-AS
-00013850: 4349 490a 2020 556e 6963 6f64 6520 6669  CII.  Unicode fi
-00013860: 6c65 6e61 6d65 2e0a 2d20 4669 7865 6420  lename..- Fixed 
-00013870: 7468 6174 206e 6f63 6c6f 6262 6572 2077  that noclobber w
-00013880: 6f75 6c64 206e 6f74 2072 6573 756d 6520  ould not resume 
-00013890: 7061 7274 6961 6c20 7265 7375 6d61 626c  partial resumabl
-000138a0: 6520 646f 776e 6c6f 6164 732e 0a2d 2046  e downloads..- F
-000138b0: 6978 6564 2062 7567 2077 6865 6e20 7275  ixed bug when ru
-000138c0: 6e6e 696e 6720 6773 7574 696c 2063 7020  nning gsutil cp 
-000138d0: 2d44 7020 6279 2075 7365 7220 6f74 6865  -Dp by user othe
-000138e0: 7220 7468 616e 206f 626a 6563 7420 6f77  r than object ow
-000138f0: 6e65 722e 0a2d 2050 726f 7065 726c 7920  ner..- Properly 
-00013900: 656e 636f 6465 206d 6574 6167 656e 6572  encode metagener
-00013910: 6174 696f 6e20 616e 6420 6574 6167 2069  ation and etag i
-00013920: 6e20 6c73 206f 7574 7075 7420 7769 7468  n ls output with
-00013930: 202d 6120 616e 6420 2d65 2e0a 2d20 5570   -a and -e..- Up
-00013940: 6461 7465 2072 6573 756d 6162 6c65 2074  date resumable t
-00013950: 6872 6573 686f 6c64 2073 7461 7465 6420  hreshold stated 
-00013960: 696e 2067 7375 7469 6c20 6865 6c70 2070  in gsutil help p
-00013970: 726f 642e 0a0a 0a4f 7468 6572 2043 6861  rod....Other Cha
-00013980: 6e67 6573 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d  nges.-----------
-00013990: 2d2d 0a0a 2d20 6c73 202d 4c62 206e 6f20  --..- ls -Lb no 
-000139a0: 6c6f 6e67 6572 2073 686f 7773 2074 6f74  longer shows tot
-000139b0: 616c 2023 2066 696c 6573 2f74 6f74 616c  al # files/total
-000139c0: 2073 697a 6520 6f66 2062 7563 6b65 742c   size of bucket,
-000139d0: 2073 6f20 7468 6174 206c 7320 2d4c 620a   so that ls -Lb.
-000139e0: 2020 696e 7374 6561 6420 7072 6f76 6964    instead provid
-000139f0: 6573 2061 6e20 6566 6669 6369 656e 7420  es an efficient 
-00013a00: 7761 7920 746f 2076 6965 7720 6a75 7374  way to view just
-00013a10: 2074 6865 206d 6574 6164 6174 6120 666f   the metadata fo
-00013a20: 7220 6c61 7267 6520 6275 636b 6574 732e  r large buckets.
-00013a30: 0a2d 2043 6174 6368 2061 6e64 2069 676e  .- Catch and ign
-00013a40: 6f72 6520 4545 5849 5354 2065 7272 6f72  ore EEXIST error
-00013a50: 2077 6865 6e20 6372 6561 7469 6e67 2067   when creating g
-00013a60: 7375 7469 6c20 7472 6163 6b65 7220 6469  sutil tracker di
-00013a70: 722e 0a2d 2041 6464 206e 6f74 6520 746f  r..- Add note to
-00013a80: 2067 7375 7469 6c20 7570 6461 7465 2064   gsutil update d
-00013a90: 6f63 2061 626f 7574 2061 7574 6f2d 7570  oc about auto-up
-00013aa0: 6461 7465 2063 6865 636b 7320 6265 696e  date checks bein
-00013ab0: 6720 6469 7361 626c 6564 2077 6974 680a  g disabled with.
-00013ac0: 2020 6773 7574 696c 202d 7120 6f70 7469    gsutil -q opti
-00013ad0: 6f6e 2e0a 2d20 4469 7361 626c 6520 6861  on..- Disable ha
-00013ae0: 7368 696e 6720 616e 6420 696e 6372 6561  shing and increa
-00013af0: 7365 2062 7566 6665 7220 7369 7a65 2069  se buffer size i
-00013b00: 6e20 7065 7266 6469 6167 2e0a 2d20 4164  n perfdiag..- Ad
-00013b10: 6465 6420 6265 7474 6572 2065 7272 6f72  ded better error
-00013b20: 206d 6573 7361 6765 7320 666f 7220 7365   messages for se
-00013b30: 7276 6963 6520 6163 636f 756e 7420 6175  rvice account au
-00013b40: 7468 2e0a 2d20 4d61 6b65 2070 6572 6664  th..- Make perfd
-00013b50: 6961 6720 6265 6861 7665 206d 6f72 6520  iag behave more 
-00013b60: 6c69 6b65 206e 6f72 6d61 6c20 6773 7574  like normal gsut
-00013b70: 696c 2c20 7769 7468 206d 756c 7469 2d74  il, with multi-t
-00013b80: 6872 6561 6469 6e67 206f 7074 696f 6e2e  hreading option.
-00013b90: 0a2d 2043 6861 6e67 6564 2073 6f20 6175  .- Changed so au
-00013ba0: 746f 2d75 7064 6174 6520 6368 6563 6b2f  to-update check/
-00013bb0: 7072 6f6d 7074 2061 7265 6e27 7420 6d61  prompt aren't ma
-00013bc0: 6465 2069 6620 6773 7574 696c 202d 7120  de if gsutil -q 
-00013bd0: 7370 6563 6966 6965 642e 0a2d 2043 6861  specified..- Cha
-00013be0: 6e67 6564 2067 7375 7469 6c20 6d62 2063  nged gsutil mb c
-00013bf0: 6f6d 6d61 6e64 2074 6f20 636c 6172 6966  ommand to clarif
-00013c00: 7920 7468 6174 2045 5520 6d65 616e 7320  y that EU means 
-00013c10: 4575 726f 7065 616e 2055 6e69 6f6e 2e0a  European Union..
-00013c20: 2d20 4164 6465 6420 646f 6320 7761 726e  - Added doc warn
-00013c30: 696e 6773 2061 626f 7574 206c 6f73 696e  ings about losin
-00013c40: 6720 7665 7273 696f 6e20 6f72 6465 7269  g version orderi
-00013c50: 6e67 2069 6620 7573 696e 6720 6773 7574  ng if using gsut
-00013c60: 696c 202d 6d20 6370 0a20 2062 6574 7765  il -m cp.  betwe
-00013c70: 656e 2076 6572 7369 6f6e 6564 2062 7563  en versioned buc
-00013c80: 6b65 7473 3b20 7265 6d6f 7665 6420 7472  kets; removed tr
-00013c90: 6169 6c69 6e67 2077 6869 7465 7370 6163  ailing whitespac
-00013ca0: 652e 0a2d 2041 6464 6564 2074 6f20 6773  e..- Added to gs
-00013cb0: 7574 696c 2063 7020 2d4c 2064 6f63 2074  util cp -L doc t
-00013cc0: 6f20 6465 7363 7269 6265 2068 6f77 2074  o describe how t
-00013cd0: 6f20 6275 696c 6420 6120 7265 6c69 6162  o build a reliab
-00013ce0: 6c65 2073 6372 6970 7420 666f 720a 2020  le script for.  
-00013cf0: 636f 7079 696e 6720 6d61 6e79 206f 626a  copying many obj
-00013d00: 6563 7473 2e0a 0a0a 5265 6c65 6173 6520  ects....Release 
-00013d10: 332e 3330 2028 7265 6c65 6173 652d 6461  3.30 (release-da
-00013d20: 7465 3a20 3230 3133 2d30 362d 3130 290a  te: 2013-06-10).
-00013d30: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00013d40: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00013d50: 3d3d 3d3d 3d3d 3d0a 0a2d 2041 6261 6e64  =======..- Aband
-00013d60: 6f6e 6564 2e0a 0a0a 5265 6c65 6173 6520  oned....Release 
-00013d70: 332e 3239 2028 7265 6c65 6173 652d 6461  3.29 (release-da
-00013d80: 7465 3a20 3230 3133 2d30 352d 3133 290a  te: 2013-05-13).
-00013d90: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00013da0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00013db0: 3d3d 3d3d 3d3d 3d0a 0a42 7567 2046 6978  =======..Bug Fix
-00013dc0: 6573 0a2d 2d2d 2d2d 2d2d 2d2d 0a0a 2d20  es.---------..- 
-00013dd0: 4669 7865 6420 696e 636f 7272 6563 7420  Fixed incorrect 
-00013de0: 7061 636b 6167 6520 696e 7374 616c 6c61  package installa
-00013df0: 7469 6f6e 2064 6574 6563 7469 6f6e 2074  tion detection t
-00013e00: 6861 7420 7265 7375 6c74 6564 2069 6e20  hat resulted in 
-00013e10: 6e6f 7420 6265 696e 670a 2020 6162 6c65  not being.  able
-00013e20: 2074 6f20 7275 6e20 7468 6520 7570 6461   to run the upda
-00013e30: 7465 2063 6f6d 6d61 6e64 2077 6869 6c65  te command while
-00013e40: 2072 756e 6e69 6e67 2067 7375 7469 6c20   running gsutil 
-00013e50: 6672 6f6d 2061 2073 796d 6c69 6e6b 2e0a  from a symlink..
-00013e60: 0a4f 7468 6572 2043 6861 6e67 6573 0a2d  .Other Changes.-
-00013e70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a0a 2d20  ------------..- 
-00013e80: 4164 6465 6420 6120 7465 7374 2066 6f72  Added a test for
-00013e90: 2064 6562 7567 206d 6f64 6520 2867 7375   debug mode (gsu
-00013ea0: 7469 6c20 2d44 2920 6f75 7470 7574 2e0a  til -D) output..
-00013eb0: 2d20 4c69 7374 206e 756d 6265 7269 6e67  - List numbering
-00013ec0: 2061 6e64 2074 6974 6c65 2063 6173 6520   and title case 
-00013ed0: 6669 7865 7320 696e 2061 6464 6974 696f  fixes in additio
-00013ee0: 6e61 6c20 6865 6c70 2070 6167 6573 2e0a  nal help pages..
-00013ef0: 2d20 5265 6d6f 7665 6420 6461 7465 7574  - Removed dateut
-00013f00: 696c 206d 6f64 756c 6520 6465 7065 6e64  il module depend
-00013f10: 656e 6379 2066 726f 6d20 6370 2063 6f6d  ency from cp com
-00013f20: 6d61 6e64 2074 6573 742e 0a2d 2055 7064  mand test..- Upd
-00013f30: 6174 6564 2064 6f63 756d 656e 7461 7469  ated documentati
-00013f40: 6f6e 2074 6f20 636c 6172 6966 7920 7468  on to clarify th
-00013f50: 6174 2070 7562 6c69 632d 7265 6164 206f  at public-read o
-00013f60: 626a 6563 7473 2061 7265 2063 6163 6865  bjects are cache
-00013f70: 6420 666f 7220 310a 2020 686f 7572 2062  d for 1.  hour b
-00013f80: 7920 6465 6661 756c 742e 0a2d 2041 6464  y default..- Add
-00013f90: 6564 2061 2066 696c 7465 7220 746f 2073  ed a filter to s
-00013fa0: 7570 7072 6573 7320 226d 6f64 756c 6520  uppress "module 
-00013fb0: 7761 7320 616c 7265 6164 7920 696d 706f  was already impo
-00013fc0: 7274 6564 2220 7761 726e 696e 6773 2074  rted" warnings t
-00013fd0: 6861 7420 7765 7265 0a20 2073 6f6d 6574  hat were.  somet
-00013fe0: 696d 6573 2070 7269 6e74 6564 2077 6869  imes printed whi
-00013ff0: 6c65 2072 756e 6e69 6e67 2067 7375 7469  le running gsuti
-00014000: 6c20 6f6e 2047 6f6f 676c 6520 436f 6d70  l on Google Comp
-00014010: 7574 6520 456e 6769 6e65 2069 6e73 7461  ute Engine insta
-00014020: 6e63 6573 2e0a 0a0a 5265 6c65 6173 6520  nces....Release 
-00014030: 332e 3238 2028 7265 6c65 6173 652d 6461  3.28 (release-da
-00014040: 7465 3a20 3230 3133 2d30 352d 3037 290a  te: 2013-05-07).
-00014050: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00010770: 3d3d 3d3d 3d3d 3d0a 0a42 7567 2046 6978  =======..Bug Fix
+00010780: 6573 0a2d 2d2d 2d2d 2d2d 2d2d 0a2d 2046  es.---------.- F
+00010790: 6978 6564 2061 2062 7567 2069 6e20 7061  ixed a bug in pa
+000107a0: 7261 6c6c 656c 2063 6f6d 706f 7369 7465  rallel composite
+000107b0: 2075 706c 6f61 6473 2077 6865 7265 2075   uploads where u
+000107c0: 706c 6f61 6473 2077 6974 680a 2020 6578  ploads with.  ex
+000107d0: 6973 7469 6e67 2063 6f6d 706f 6e65 6e74  isting component
+000107e0: 7320 776f 756c 6420 6661 696c 2e0a 2d20  s would fail..- 
+000107f0: 4d6f 7665 6420 6763 732d 6f61 7574 6832  Moved gcs-oauth2
+00010800: 2d62 6f74 6f2d 706c 7567 696e 2074 6f20  -boto-plugin to 
+00010810: 7665 7273 696f 6e20 312e 352c 2066 6978  version 1.5, fix
+00010820: 696e 6720 6120 6275 6720 696e 2074 6865  ing a bug in the
+00010830: 2050 7950 6920 6773 7574 696c 0a20 2064   PyPi gsutil.  d
+00010840: 6973 7472 6962 7574 696f 6e20 7468 6174  istribution that
+00010850: 2077 6f75 6c64 2063 6175 7365 2067 7375   would cause gsu
+00010860: 7469 6c20 746f 2075 6e6e 6563 6573 7361  til to unnecessa
+00010870: 7269 6c79 2061 7474 656d 7074 2074 6f20  rily attempt to 
+00010880: 7175 6572 790a 2020 7468 6520 476f 6f67  query.  the Goog
+00010890: 6c65 2043 6f6d 7075 7465 2045 6e67 696e  le Compute Engin
+000108a0: 6520 6d65 7461 6461 7461 2073 6572 7669  e metadata servi
+000108b0: 6365 2e0a 0a4f 7468 6572 2043 6861 6e67  ce...Other Chang
+000108c0: 6573 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  es.-------------
+000108d0: 0a2d 2050 6172 616c 6c65 6c20 636f 6d70  .- Parallel comp
+000108e0: 6f73 6974 6520 7570 6c6f 6164 7320 6e6f  osite uploads no
+000108f0: 206c 6f6e 6765 7220 7370 6563 6966 7920   longer specify 
+00010900: 616e 2069 662d 6e6f 742d 6d61 7463 6820  an if-not-match 
+00010910: 7072 6563 6f6e 6469 7469 6f6e 0a20 2077  precondition.  w
+00010920: 6865 6e20 7570 6c6f 6164 696e 6720 636f  hen uploading co
+00010930: 6d70 6f6e 656e 7420 7061 7274 732e 0a2d  mponent parts..-
+00010940: 2050 6172 616c 6c65 6c20 636f 6d70 6f73   Parallel compos
+00010950: 6974 6520 7570 6c6f 6164 7320 6e6f 206c  ite uploads no l
+00010960: 6f6e 6765 7220 6361 6c63 756c 6174 6520  onger calculate 
+00010970: 6120 4352 4333 3263 2068 6173 6820 7072  a CRC32c hash pr
+00010980: 696f 7220 746f 0a20 2075 706c 6f61 6469  ior to.  uploadi
+00010990: 6e67 2063 6f6d 706f 6e65 6e74 2070 6172  ng component par
+000109a0: 7473 2028 7468 6573 6520 6172 6520 7374  ts (these are st
+000109b0: 696c 6c20 7661 6c69 6461 7465 6420 6279  ill validated by
+000109c0: 2061 6e20 4d44 3520 6861 7368 292e 0a2d   an MD5 hash)..-
+000109d0: 2052 656d 6f76 6564 2061 7069 746f 6f6c   Removed apitool
+000109e0: 7320 6465 7065 6e64 656e 6379 206f 6e20  s dependency on 
+000109f0: 6766 6c61 6773 2e0a 0a52 656c 6561 7365  gflags...Release
+00010a00: 2034 2e30 2028 7265 6c65 6173 6520 6461   4.0 (release da
+00010a10: 7465 3a20 3230 3134 2d30 352d 3237 290a  te: 2014-05-27).
+00010a20: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00010a30: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00010a40: 3d3d 3d3d 3d3d 3d0a 0a4d 616a 6f72 204e  =======..Major N
+00010a50: 6577 2047 7375 7469 6c20 5665 7273 696f  ew Gsutil Versio
+00010a60: 6e20 2d20 4261 636b 7761 7264 732d 496e  n - Backwards-In
+00010a70: 636f 6d70 6174 6962 6c65 2043 6861 6e67  compatible Chang
+00010a80: 6573 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  es.-------------
+00010a90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00010aa0: 2d0a 2d20 5468 6520 476f 6f67 6c65 2043  -.- The Google C
+00010ab0: 6c6f 7564 2053 746f 7261 6765 2063 6f6e  loud Storage con
+00010ac0: 6669 6775 7261 7469 6f6e 2064 6174 6120  figuration data 
+00010ad0: 7375 7070 6f72 7465 6420 6279 2074 6865  supported by the
+00010ae0: 2061 636c 2c20 636f 7273 2c0a 2020 616e   acl, cors,.  an
+00010af0: 6420 6c69 6665 6379 636c 6520 636f 6d6d  d lifecycle comm
+00010b00: 616e 6473 206e 6f77 2075 7365 7320 7468  ands now uses th
+00010b10: 6520 4a53 4f4e 2066 6f72 6d61 7420 696e  e JSON format in
+00010b20: 7374 6561 6420 6f66 2074 6865 206f 6c64  stead of the old
+00010b30: 6572 2058 4d4c 0a20 2066 6f72 6d61 742e  er XML.  format.
+00010b40: 2067 7375 7469 6c20 342e 3020 7769 6c6c   gsutil 4.0 will
+00010b50: 2066 6169 6c20 616e 6420 7072 6f76 6964   fail and provid
+00010b60: 6520 636f 6e76 6572 7369 6f6e 2069 6e73  e conversion ins
+00010b70: 7472 7563 7469 6f6e 7320 6966 2061 6e20  tructions if an 
+00010b80: 584d 4c0a 2020 636f 6e66 6967 7572 6174  XML.  configurat
+00010b90: 696f 6e20 6669 6c65 2069 7320 7072 6f76  ion file is prov
+00010ba0: 6964 6564 2061 7320 616e 2061 7267 756d  ided as an argum
+00010bb0: 656e 7420 666f 7220 6120 6773 3a2f 2f20  ent for a gs:// 
+00010bc0: 5552 4c2e 0a2d 2067 7375 7469 6c20 6e6f  URL..- gsutil no
+00010bd0: 206c 6f6e 6765 7220 6163 6365 7074 7320   longer accepts 
+00010be0: 6172 6269 7472 6172 7920 6865 6164 6572  arbitrary header
+00010bf0: 7320 7669 6120 7468 6520 676c 6f62 616c  s via the global
+00010c00: 202d 6820 666c 6167 2e0a 2020 446f 6375   -h flag..  Docu
+00010c10: 6d65 6e74 6564 2068 6561 6465 7273 2066  mented headers f
+00010c20: 6f72 2067 7375 7469 6c20 636f 6d6d 616e  or gsutil comman
+00010c30: 6473 2061 7265 2073 7469 6c6c 2073 7570  ds are still sup
+00010c40: 706f 7274 6564 3b20 666f 7220 7468 650a  ported; for the.
+00010c50: 2020 6675 6c6c 206c 6973 7420 6f66 2073    full list of s
+00010c60: 7570 706f 7274 6564 2068 6561 6465 7273  upported headers
+00010c70: 2c20 7365 6520 2267 7375 7469 6c20 6865  , see "gsutil he
+00010c80: 6c70 2063 6f6d 6d61 6e64 5f6f 7074 7322  lp command_opts"
+00010c90: 2e0a 2d20 5468 6520 636f 6d70 6f73 6520  ..- The compose 
+00010ca0: 636f 6d6d 616e 6420 7769 6c6c 206e 6f77  command will now
+00010cb0: 2064 6566 6175 6c74 2074 6865 2064 6573   default the des
+00010cc0: 7469 6e61 7469 6f6e 206f 626a 6563 7427  tination object'
+00010cd0: 730a 2020 436f 6e74 656e 742d 5479 7065  s.  Content-Type
+00010ce0: 2074 6f20 7468 6520 436f 6e74 656e 742d   to the Content-
+00010cf0: 5479 7065 206f 6620 7468 6520 6669 7273  Type of the firs
+00010d00: 7420 736f 7572 6365 206f 626a 6563 7420  t source object 
+00010d10: 6966 206e 6f6e 650a 2020 6973 2070 726f  if none.  is pro
+00010d20: 7669 6465 6420 7669 6120 7468 6520 2d68  vided via the -h
+00010d30: 2067 6c6f 6261 6c20 666c 6167 2e0a 2d20   global flag..- 
+00010d40: 5468 6520 6c6f 6e67 2d64 6570 7265 6361  The long-depreca
+00010d50: 7465 6420 2d74 2061 6e64 202d 7120 6f70  ted -t and -q op
+00010d60: 7469 6f6e 7320 6861 7665 2062 6565 6e20  tions have been 
+00010d70: 7265 6d6f 7665 6420 6672 6f6d 2074 6865  removed from the
+00010d80: 2063 7020 636f 6d6d 616e 642e 0a2d 2054   cp command..- T
+00010d90: 6865 2070 6572 6664 6961 6720 636f 6d6d  he perfdiag comm
+00010da0: 616e 6420 6e6f 206c 6f6e 6765 7220 7375  and no longer su
+00010db0: 7070 6f72 7473 2061 6464 696e 6720 6120  pports adding a 
+00010dc0: 686f 7374 2068 6561 6465 722e 0a2d 2048  host header..- H
+00010dd0: 6176 696e 6720 4f41 7574 6832 2055 7365  aving OAuth2 Use
+00010de0: 7220 4163 636f 756e 7420 6372 6564 656e  r Account creden
+00010df0: 7469 616c 7320 616e 6420 4f41 7574 6832  tials and OAuth2
+00010e00: 2053 6572 7669 6365 2041 6363 6f75 6e74   Service Account
+00010e10: 0a20 2063 7265 6465 6e74 6961 6c73 2063  .  credentials c
+00010e20: 6f6e 6669 6775 7265 6420 7369 6d75 6c74  onfigured simult
+00010e30: 616e 656f 7573 6c79 2077 696c 6c20 6e6f  aneously will no
+00010e40: 7720 6661 696c 2077 6974 6820 616e 2065  w fail with an e
+00010e50: 7272 6f72 206d 6573 7361 6765 0a20 2074  rror message.  t
+00010e60: 6f20 6176 6f69 6420 636f 6e66 7573 696f  o avoid confusio
+00010e70: 6e2e 2020 416c 736f 2c20 6120 7369 6e67  n.  Also, a sing
+00010e80: 6c65 2069 6e76 616c 6964 2063 7265 6465  le invalid crede
+00010e90: 6e74 6961 6c20 7769 6c6c 2066 6169 6c20  ntial will fail 
+00010ea0: 7769 7468 2061 6e0a 2020 6572 726f 7220  with an.  error 
+00010eb0: 6d65 7373 6167 652e 2020 5365 6520 2267  message.  See "g
+00010ec0: 7375 7469 6c20 6865 6c70 2063 7265 6473  sutil help creds
+00010ed0: 2220 666f 7220 6465 7461 696c 732e 0a2d  " for details..-
+00010ee0: 2042 7563 6b65 7420 7265 6c6f 6361 7465   Bucket relocate
+00010ef0: 2073 6372 6970 7473 2068 6176 6520 6265   scripts have be
+00010f00: 656e 2072 656d 6f76 6564 2e0a 2d20 446f  en removed..- Do
+00010f10: 776e 6c6f 6164 696e 6720 6f62 6a65 6374  wnloading object
+00010f20: 206e 616d 6573 2065 6e64 696e 6720 7769   names ending wi
+00010f30: 7468 2027 2f27 2069 7320 6e6f 206c 6f6e  th '/' is no lon
+00010f40: 6765 7220 7375 7070 6f72 7465 6420 746f  ger supported to
+00010f50: 2061 766f 6964 0a20 2070 726f 626c 656d   avoid.  problem
+00010f60: 7320 7468 6973 2063 6175 7365 6420 666f  s this caused fo
+00010f70: 7220 6469 7265 6374 6f72 6573 2075 7369  r directores usi
+00010f80: 6e67 2074 6865 2047 6f6f 676c 6520 436c  ng the Google Cl
+00010f90: 6f75 6420 436f 6e73 6f6c 652e 0a2d 2072  oud Console..- r
+00010fa0: 6d20 2d72 206e 6f77 2069 6d70 6c69 6573  m -r now implies
+00010fb0: 2072 6d20 2d72 6120 2872 656d 6f76 696e   rm -ra (removin
+00010fc0: 6720 616c 6c20 6f62 6a65 6374 2076 6572  g all object ver
+00010fd0: 7369 6f6e 7320 7265 6375 7273 6976 656c  sions recursivel
+00010fe0: 7929 2e0a 2d20 416c 6c20 636f 6d6d 616e  y)..- All comman
+00010ff0: 6473 2075 7369 6e67 2074 6865 2067 6c6f  ds using the glo
+00011000: 6261 6c20 2d6d 206f 7074 696f 6e20 6f72  bal -m option or
+00011010: 2061 2066 6f72 6365 206f 7074 696f 6e20   a force option 
+00011020: 2873 7563 6820 6173 0a20 2072 6d20 2d66  (such as.  rm -f
+00011030: 206f 7220 6370 202d 6329 2077 696c 6c20   or cp -c) will 
+00011040: 6e6f 7720 7265 7475 726e 2061 206e 6f6e  now return a non
+00011050: 2d7a 6572 6f20 6578 6974 2063 6f64 6520  -zero exit code 
+00011060: 6966 2074 6865 7265 2061 7265 2061 6e79  if there are any
+00011070: 0a20 2066 6169 6c75 7265 7320 6475 7269  .  failures duri
+00011080: 6e67 2074 6865 206f 7065 7261 7469 6f6e  ng the operation
+00011090: 2e0a 2d20 4d44 3520 616e 6420 4352 4333  ..- MD5 and CRC3
+000110a0: 3263 2076 616c 7565 7320 6172 6520 6e6f  2c values are no
+000110b0: 7720 7265 7072 6573 656e 7465 6420 696e  w represented in
+000110c0: 2062 6173 6536 3420 656e 636f 6469 6e67   base64 encoding
+000110d0: 2069 6e73 7465 6164 0a20 206f 6620 6865   instead.  of he
+000110e0: 7820 656e 636f 6469 6e67 2028 7468 6973  x encoding (this
+000110f0: 2069 6e63 6c75 6465 7320 6d61 6e69 6665   includes manife
+00011100: 7374 2066 696c 6573 292e 0a0a 4e65 7720  st files)...New 
+00011110: 4665 6174 7572 6573 0a2d 2d2d 2d2d 2d2d  Features.-------
+00011120: 2d2d 2d2d 2d0a 2d20 5468 6520 476f 6f67  -----.- The Goog
+00011130: 6c65 2043 6c6f 7564 2053 746f 7261 6765  le Cloud Storage
+00011140: 204a 534f 4e20 4150 4920 2876 3129 2069   JSON API (v1) i
+00011150: 7320 6e6f 7720 7468 6520 6465 6661 756c  s now the defaul
+00011160: 7420 4150 4920 7573 6564 0a20 2062 7920  t API used.  by 
+00011170: 6773 7574 696c 2066 6f72 2061 6c6c 2063  gsutil for all c
+00011180: 6f6d 6d61 6e64 7320 7461 7267 6574 696e  ommands targetin
+00011190: 6720 6773 3a2f 2f20 5552 4c73 2e20 5468  g gs:// URLs. Th
+000111a0: 6520 4a53 4f4e 2041 5049 2069 7320 6d6f  e JSON API is mo
+000111b0: 7265 0a20 2062 616e 6477 6964 7468 2065  re.  bandwidth e
+000111c0: 6666 6963 6965 6e74 2074 6861 6e20 7468  fficient than th
+000111d0: 6520 6f6c 6465 7220 584d 4c20 4150 4920  e older XML API 
+000111e0: 7768 656e 2074 7261 6e73 6665 7272 696e  when transferrin
+000111f0: 6720 6d65 7461 6461 7461 0a20 2061 6e64  g metadata.  and
+00011200: 2064 6f65 7320 6e6f 7420 7265 7175 6972   does not requir
+00011210: 6520 7365 7061 7261 7465 2063 616c 6c73  e separate calls
+00011220: 2074 6f20 7072 6573 6572 7665 206f 626a   to preserve obj
+00011230: 6563 7420 4143 4c73 2077 6865 6e20 636f  ect ACLs when co
+00011240: 7079 696e 672e 0a20 2054 6865 2058 4d4c  pying..  The XML
+00011250: 2041 5049 2077 696c 6c20 6175 746f 6d61   API will automa
+00011260: 7469 6361 6c6c 7920 6265 2075 7365 6420  tically be used 
+00011270: 7768 656e 2061 6363 6573 7369 6e67 2073  when accessing s
+00011280: 333a 2f2f 2055 524c 732e 0a2d 2054 6865  3:// URLs..- The
+00011290: 2047 6f6f 676c 6520 436c 6f75 6420 5374   Google Cloud St
+000112a0: 6f72 6167 6520 584d 4c20 4150 4920 6361  orage XML API ca
+000112b0: 6e20 6265 2075 7365 6420 696e 206c 6965  n be used in lie
+000112c0: 7520 6f66 2074 6865 204a 534f 4e20 4150  u of the JSON AP
+000112d0: 490a 2020 6279 2073 6574 7469 6e67 2027  I.  by setting '
+000112e0: 7072 6566 6572 5f61 7069 203d 2078 6d6c  prefer_api = xml
+000112f0: 2720 696e 2074 6865 2047 5355 7469 6c20  ' in the GSUtil 
+00011300: 7365 6374 696f 6e20 6f66 2079 6f75 7220  section of your 
+00011310: 626f 746f 2063 6f6e 6669 6720 6669 6c65  boto config file
+00011320: 2e0a 2d20 4164 6465 6420 7468 6520 7273  ..- Added the rs
+00011330: 796e 6320 636f 6d6d 616e 6420 7468 6174  ync command that
+00011340: 2063 616e 2073 796e 6368 726f 6e69 7a65   can synchronize
+00011350: 2063 6c6f 7564 2061 6e64 206c 6f63 616c   cloud and local
+00011360: 2064 6972 6563 746f 7269 6573 2e0a 2d20   directories..- 
+00011370: 4164 6465 6420 7468 6520 7369 676e 7572  Added the signur
+00011380: 6c20 636f 6d6d 616e 6420 7468 6174 2063  l command that c
+00011390: 616e 2067 656e 6572 6174 6520 476f 6f67  an generate Goog
+000113a0: 6c65 2043 6c6f 7564 2053 746f 7261 6765  le Cloud Storage
+000113b0: 2073 6967 6e65 6420 5552 4c73 2e0a 2d20   signed URLs..- 
+000113c0: 5468 6520 7065 7266 6469 6167 2063 6f6d  The perfdiag com
+000113d0: 6d61 6e64 206e 6f77 2073 7570 706f 7274  mand now support
+000113e0: 7320 6120 6c69 7374 696e 6720 6c61 7465  s a listing late
+000113f0: 6e63 7920 7465 7374 2e0a 2d20 5468 6520  ncy test..- The 
+00011400: 7262 2063 6f6d 6d61 6e64 206e 6f77 2073  rb command now s
+00011410: 7570 706f 7274 7320 6120 2d66 2066 6c61  upports a -f fla
+00011420: 6720 616c 6c6f 7769 6e67 2069 7420 746f  g allowing it to
+00011430: 2063 6f6e 7469 6e75 6520 7768 656e 2065   continue when e
+00011440: 7272 6f72 730a 2020 6172 6520 656e 636f  rrors.  are enco
+00011450: 756e 7465 7265 642e 0a2d 2054 6865 2074  untered..- The t
+00011460: 6573 7420 636f 6d6d 616e 6420 6e6f 7720  est command now 
+00011470: 7375 7070 6f72 7473 2061 202d 7320 666c  supports a -s fl
+00011480: 6167 2074 6861 7420 7275 6e73 2074 6573  ag that runs tes
+00011490: 7473 2061 6761 696e 7374 2053 332e 0a0a  ts against S3...
+000114a0: 4f74 6865 7220 4368 616e 6765 730a 2d2d  Other Changes.--
+000114b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 2d20 416c  -----------.- Al
+000114c0: 6c20 7079 7468 6f6e 2066 696c 6573 206e  l python files n
+000114d0: 6f74 2075 6e64 6572 2061 2074 6869 7264  ot under a third
+000114e0: 5f70 6172 7479 2064 6972 6563 746f 7279  _party directory
+000114f0: 2061 7265 206e 6f77 2070 796c 696e 742d   are now pylint-
+00011500: 636c 6561 6e2c 0a20 2077 6974 6820 7468  clean,.  with th
+00011510: 6520 6578 6365 7074 696f 6e20 6f66 2054  e exception of T
+00011520: 4f44 4f2d 666f 726d 6174 2061 6e64 2061  ODO-format and a
+00011530: 2068 616e 6466 756c 206f 6620 7761 726e   handful of warn
+00011540: 696e 6773 2069 6e20 726f 6f74 2d6c 6576  ings in root-lev
+00011550: 656c 0a20 2066 696c 6573 2e20 4173 2070  el.  files. As p
+00011560: 6172 7420 6f66 2074 6865 2064 652d 6c69  art of the de-li
+00011570: 6e74 696e 6720 7072 6f63 6573 732c 206d  nting process, m
+00011580: 616e 7920 6564 6765 2d63 6173 6520 6275  any edge-case bu
+00011590: 6773 2077 6572 650a 2020 6964 656e 7469  gs were.  identi
+000115a0: 6669 6564 2061 6e64 2066 6978 6564 2e0a  fied and fixed..
+000115b0: 2d20 5468 6520 6c73 2063 6f6d 6d61 6e64  - The ls command
+000115c0: 206e 6f77 206f 7065 7261 7465 7320 6465   now operates de
+000115d0: 7074 682d 6669 7273 7420 2861 7320 696e  pth-first (as in
+000115e0: 2055 6e69 7820 6c73 2920 696e 7374 6561   Unix ls) instea
+000115f0: 640a 2020 6f66 2062 7265 6164 7468 2d66  d.  of breadth-f
+00011600: 6972 7374 2e0a 2d20 4461 6973 792d 6368  irst..- Daisy-ch
+00011610: 6169 6e20 636f 7079 696e 6720 646f 6573  ain copying does
+00011620: 206e 6f74 2063 7572 7265 6e74 6c79 2073   not currently s
+00011630: 7570 706f 7274 2072 6573 756d 6162 6c65  upport resumable
+00011640: 2075 706c 6f61 6473 2e0a 2d20 5365 7665   uploads..- Seve
+00011650: 7261 6c20 636f 6d70 6174 6962 696c 6974  ral compatibilit
+00011660: 7920 696d 7072 6f76 656d 656e 7473 2066  y improvements f
+00011670: 6f72 2057 696e 646f 7773 2061 6e64 2053  or Windows and S
+00011680: 332e 0a0a 0a52 656c 6561 7365 2033 2e34  3....Release 3.4
+00011690: 3220 2872 656c 6561 7365 2d64 6174 653a  2 (release-date:
+000116a0: 2032 3031 342d 3031 2d31 3529 0a3d 3d3d   2014-01-15).===
+000116b0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+000116c0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+000116d0: 3d3d 3d3d 0a0a 4f74 6865 7220 4368 616e  ====..Other Chan
+000116e0: 6765 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ges.------------
+000116f0: 2d0a 0a2d 2046 6978 6564 2070 6f74 656e  -..- Fixed poten
+00011700: 7469 616c 2062 7567 2077 6974 6820 7570  tial bug with up
+00011710: 6461 7465 2063 6f6d 6d61 6e64 206f 6e20  date command on 
+00011720: 4365 6e74 4f53 2e0a 0a0a 5265 6c65 6173  CentOS....Releas
+00011730: 6520 332e 3431 2028 7265 6c65 6173 652d  e 3.41 (release-
+00011740: 6461 7465 3a20 3230 3134 2d30 312d 3134  date: 2014-01-14
+00011750: 290a 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ).==============
+00011760: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00011770: 3d3d 3d3d 3d3d 3d3d 3d0a 0a4f 7468 6572  =========..Other
+00011780: 2043 6861 6e67 6573 0a2d 2d2d 2d2d 2d2d   Changes.-------
+00011790: 2d2d 2d2d 2d2d 0a0a 2d20 4368 616e 6765  ------..- Change
+000117a0: 7320 746f 2070 726f 7465 6374 2073 6563  s to protect sec
+000117b0: 7572 6974 7920 6f66 2072 6573 756d 6162  urity of resumab
+000117c0: 6c65 2075 706c 6f61 6420 4944 732e 0a0a  le upload IDs...
+000117d0: 0a52 656c 6561 7365 2033 2e34 303a 2053  .Release 3.40: S
+000117e0: 6b69 7070 6564 0a0a 0a52 656c 6561 7365  kipped...Release
+000117f0: 2033 2e33 393a 2053 6b69 7070 6564 0a0a   3.39: Skipped..
+00011800: 0a52 656c 6561 7365 2033 2e33 3820 2872  .Release 3.38 (r
+00011810: 656c 6561 7365 2d64 6174 653a 2032 3031  elease-date: 201
+00011820: 332d 3131 2d32 3529 0a0a 4275 6720 4669  3-11-25)..Bug Fi
+00011830: 7865 730a 2d2d 2d2d 2d2d 2d2d 2d0a 0a2d  xes.---------..-
+00011840: 2046 6978 2074 6f20 696e 636c 7564 6520   Fix to include 
+00011850: 7665 7273 696f 6e20 6e75 6d62 6572 2069  version number i
+00011860: 6e20 7573 6572 2d61 6765 6e74 2073 7472  n user-agent str
+00011870: 696e 672e 0a2d 2046 6978 2062 7567 2077  ing..- Fix bug w
+00011880: 6865 7265 696e 202d 6d20 666c 6167 206f  herein -m flag o
+00011890: 7220 7061 7261 6c6c 656c 2075 706c 6f61  r parallel uploa
+000118a0: 6473 2063 6175 7365 6420 6372 6173 6820  ds caused crash 
+000118b0: 6f6e 2073 7973 7465 6d73 2077 6974 686f  on systems witho
+000118c0: 7574 0a20 202f 6465 762f 7368 6d2e 0a2d  ut.  /dev/shm..-
+000118d0: 2046 6978 2053 534c 2065 7272 6f72 7320   Fix SSL errors 
+000118e0: 616e 6420 696e 7661 6c69 6420 7265 7375  and invalid resu
+000118f0: 6c74 7320 7769 7468 2070 6572 6664 6961  lts with perfdia
+00011900: 6720 2d63 2061 6e64 202d 6b20 7274 6872  g -c and -k rthr
+00011910: 7520 7465 7374 2e0a 2d20 4669 7865 6420  u test..- Fixed 
+00011920: 6361 7365 7320 7768 6572 6520 7061 7261  cases where para
+00011930: 6c6c 656c 2063 6f6d 706f 7369 7465 2075  llel composite u
+00011940: 706c 6f61 6473 2063 6f75 6c64 206c 6561  ploads could lea
+00011950: 7665 206f 7270 6861 6e65 6420 636f 6d70  ve orphaned comp
+00011960: 6f6e 656e 7473 2e0a 2d20 4669 7820 6275  onents..- Fix bu
+00011970: 6720 6174 7465 6d70 7469 6e67 2074 6f20  g attempting to 
+00011980: 7374 6174 206f 626a 6563 7473 2079 6f75  stat objects you
+00011990: 2064 6f6e 2774 2068 6176 6520 6175 7468   don't have auth
+000119a0: 2074 6f20 7265 6164 2e0a 2d20 4669 7865   to read..- Fixe
+000119b0: 6420 6275 6720 6272 6561 6b69 6e67 2064  d bug breaking d
+000119c0: 6566 6163 6c27 7320 2d64 206f 7074 696f  efacl's -d optio
+000119d0: 6e2e 0a0a 0a4f 7468 6572 2043 6861 6e67  n....Other Chang
+000119e0: 6573 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  es.-------------
+000119f0: 0a0a 2d20 4669 7865 6420 6773 7574 696c  ..- Fixed gsutil
+00011a00: 2063 6f6e 6669 6720 646f 632e 0a2d 2046   config doc..- F
+00011a10: 6978 6564 2072 6566 6572 656e 6365 7320  ixed references 
+00011a20: 746f 206f 6c64 2063 6f6d 6d61 6e64 206e  to old command n
+00011a30: 616d 6573 3b20 6669 7820 6465 6661 636c  ames; fix defacl
+00011a40: 2063 6820 6578 616d 706c 652e 0a2d 2049   ch example..- I
+00011a50: 6d70 726f 7665 6420 6572 726f 7220 6d65  mproved error me
+00011a60: 7373 6167 6573 2066 6f72 2064 6570 7265  ssages for depre
+00011a70: 6361 7465 6420 636f 6d6d 616e 6420 616c  cated command al
+00011a80: 6961 7365 732e 0a2d 2055 7064 6174 6564  iases..- Updated
+00011a90: 2067 7375 7469 6c20 7375 7070 6f72 7420   gsutil support 
+00011aa0: 696e 666f 2e0a 0a0a 4e65 7720 4665 6174  info....New Feat
+00011ab0: 7572 6573 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d  ures.-----------
+00011ac0: 2d0a 0a2d 2045 6e61 626c 6564 202d 5220  -..- Enabled -R 
+00011ad0: 666c 6167 2066 6f72 2072 6563 7572 7369  flag for recursi
+00011ae0: 6f6e 2077 6974 6820 7365 746d 6574 6120  on with setmeta 
+00011af0: 636f 6d6d 616e 642e 0a0a 0a52 656c 6561  command....Relea
+00011b00: 7365 2033 2e33 3720 2872 656c 6561 7365  se 3.37 (release
+00011b10: 2d64 6174 653a 2032 3031 332d 3039 2d32  -date: 2013-09-2
+00011b20: 3529 0a3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  5).=============
+00011b30: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00011b40: 3d3d 3d3d 3d3d 3d3d 3d3d 0a0a 4275 6720  ==========..Bug 
+00011b50: 4669 7865 730a 2d2d 2d2d 2d2d 2d2d 2d0a  Fixes.---------.
+00011b60: 0a2d 2046 6978 2070 6172 7369 6e67 206f  .- Fix parsing o
+00011b70: 6620 2d52 2066 6f72 2022 6163 6c20 6368  f -R for "acl ch
+00011b80: 2220 616e 6420 6368 6163 6c20 636f 6d6d  " and chacl comm
+00011b90: 616e 6473 2e0a 2d20 4669 7865 6420 696d  ands..- Fixed im
+00011ba0: 706f 7274 2073 7461 7465 6d65 6e74 206f  port statement o
+00011bb0: 6620 756e 6974 7465 7374 3220 7768 6963  f unittest2 whic
+00011bc0: 6820 6361 7573 6564 2069 6e73 7461 6c6c  h caused install
+00011bd0: 6174 696f 6e73 2075 7369 6e67 2050 7974  ations using Pyt
+00011be0: 686f 6e0a 2020 322e 3620 7769 7468 6f75  hon.  2.6 withou
+00011bf0: 7420 756e 6974 7465 7374 3220 696e 7374  t unittest2 inst
+00011c00: 616c 6c65 6420 746f 2066 6169 6c20 7768  alled to fail wh
+00011c10: 656e 2073 7461 7274 696e 6720 7570 2067  en starting up g
+00011c20: 7375 7469 6c2e 0a0a 0a4f 7468 6572 2043  sutil....Other C
+00011c30: 6861 6e67 6573 0a2d 2d2d 2d2d 2d2d 2d2d  hanges.---------
+00011c40: 2d2d 2d2d 0a0a 2d20 4669 7865 6420 7465  ----..- Fixed te
+00011c50: 7374 7320 736f 2074 6865 7920 7061 7373  sts so they pass
+00011c60: 206f 6e20 5769 6e64 6f77 7320 616e 6420   on Windows and 
+00011c70: 7061 636b 6167 6520 696e 7374 616c 6c73  package installs
+00011c80: 2e0a 2d20 4164 6420 6120 726f 6f74 206c  ..- Add a root l
+00011c90: 6f67 6769 6e67 2068 616e 646c 6572 206d  ogging handler m
+00011ca0: 616e 7561 6c6c 7920 696e 7374 6561 6420  anually instead 
+00011cb0: 6f66 2072 656c 7969 6e67 206f 6e20 6261  of relying on ba
+00011cc0: 7369 6343 6f6e 6669 672e 0a2d 2046 6978  sicConfig..- Fix
+00011cd0: 2061 7069 636c 6965 6e74 2069 6d70 6f72   apiclient impor
+00011ce0: 7420 7374 6174 656d 656e 742e 0a2d 2045  t statement..- E
+00011cf0: 7870 6f6e 656e 7469 616c 2062 6163 6b6f  xponential backo
+00011d00: 6666 2066 6f72 2061 6363 6573 7320 746f  ff for access to
+00011d10: 6b65 6e20 7265 7175 6573 7473 2e0a 2d20  ken requests..- 
+00011d20: 4669 7820 666c 616b 696e 6573 7320 696e  Fix flakiness in
+00011d30: 2074 6573 7420 5465 6172 446f 776e 2074   test TearDown t
+00011d40: 6f20 6163 636f 756e 7420 666f 7220 6576  o account for ev
+00011d50: 656e 7475 616c 2063 6f6e 7369 7374 656e  entual consisten
+00011d60: 6379 206f 6620 6f62 6a65 6374 0a20 206c  cy of object.  l
+00011d70: 6973 7469 6e67 732e 0a0a 0a52 656c 6561  istings....Relea
+00011d80: 7365 2033 2e33 3620 2872 656c 6561 7365  se 3.36 (release
+00011d90: 2d64 6174 653a 2032 3031 332d 3039 2d31  -date: 2013-09-1
+00011da0: 3829 0a3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  8).=============
+00011db0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00011dc0: 3d3d 3d3d 3d3d 3d3d 3d3d 0a0a 4275 6720  ==========..Bug 
+00011dd0: 4669 7865 730a 2d2d 2d2d 2d2d 2d2d 2d0a  Fixes.---------.
+00011de0: 0a2d 2046 6978 2062 7567 2077 6865 6e20  .- Fix bug when 
+00011df0: 6120 3430 3020 6f72 2034 3033 2065 7863  a 400 or 403 exc
+00011e00: 6570 7469 6f6e 2068 6173 206e 6f20 6465  eption has no de
+00011e10: 7461 696c 2e0a 2d20 4669 7820 6275 6773  tail..- Fix bugs
+00011e20: 2077 6974 6820 636f 6e66 6967 202d 6520   with config -e 
+00011e30: 616e 6420 636f 6e66 6967 202d 6f2e 0a0a  and config -o...
+00011e40: 0a4f 7468 6572 2043 6861 6e67 6573 0a2d  .Other Changes.-
+00011e50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a0a 2d20  ------------..- 
+00011e60: 436c 6172 6966 7920 7374 6174 2063 6f6d  Clarify stat com
+00011e70: 6d61 6e64 2064 6f63 756d 656e 7461 7469  mand documentati
+00011e80: 6f6e 2072 6567 6172 6469 6e67 2074 7261  on regarding tra
+00011e90: 696c 696e 6720 736c 6173 6865 732e 0a2d  iling slashes..-
+00011ea0: 2041 6464 2047 656e 6572 6174 696f 6e20   Add Generation 
+00011eb0: 616e 6420 4d65 7461 6765 6e65 7261 7469  and Metagenerati
+00011ec0: 6f6e 2074 6f20 6773 7574 696c 2073 7461  on to gsutil sta
+00011ed0: 7420 6f75 7470 7574 2e0a 0a0a 4e65 7720  t output....New 
+00011ee0: 4665 6174 7572 6573 0a2d 2d2d 2d2d 2d2d  Features.-------
+00011ef0: 2d2d 2d2d 2d0a 0a2d 2053 6574 2063 6f6e  -----..- Set con
+00011f00: 6669 6720 7661 6c75 6573 2066 726f 6d20  fig values from 
+00011f10: 636f 6d6d 616e 6420 6c69 6e65 2077 6974  command line wit
+00011f20: 6820 2d6f 2e0a 0a0a 5265 6c65 6173 6520  h -o....Release 
+00011f30: 332e 3335 2028 7265 6c65 6173 652d 6461  3.35 (release-da
+00011f40: 7465 3a20 3230 3133 2d30 392d 3039 290a  te: 2013-09-09).
+00011f50: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00011f60: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00011f70: 3d3d 3d3d 3d3d 3d0a 0a42 7567 2046 6978  =======..Bug Fix
+00011f80: 6573 0a2d 2d2d 2d2d 2d2d 2d2d 0a0a 2d20  es.---------..- 
+00011f90: 4669 7820 7374 7265 616d 696e 6720 7570  Fix streaming up
+00011fa0: 6c6f 6164 2074 6f20 5333 2061 6e64 2070  load to S3 and p
+00011fb0: 726f 7669 6465 206d 6f72 6520 7573 6566  rovide more usef
+00011fc0: 756c 2073 7461 636b 2074 7261 6365 7320  ul stack traces 
+00011fd0: 6d75 6c74 692d 7468 7265 6164 6564 2066  multi-threaded f
+00011fe0: 6169 6c75 7265 732e 0a2d 2046 6978 2072  ailures..- Fix r
+00011ff0: 6163 6520 636f 6e64 6974 696f 6e20 696e  ace condition in
+00012000: 2074 6573 745f 726d 2e0a 2d20 4669 7820   test_rm..- Fix 
+00012010: 7265 7472 7920 6465 636f 7261 746f 7220  retry decorator 
+00012020: 6475 7269 6e67 2074 6573 7420 6275 636b  during test buck
+00012030: 6574 2063 6c65 616e 7570 2e0a 2d20 4669  et cleanup..- Fi
+00012040: 7865 6420 6361 7420 6275 6720 7468 6174  xed cat bug that
+00012050: 2063 6175 7365 6420 7665 7273 696f 6e20   caused version 
+00012060: 746f 2062 6520 6967 6e6f 7265 6420 696e  to be ignored in
+00012070: 2055 5249 732e 0a2d 2044 6f6e 2774 2064   URIs..- Don't d
+00012080: 6563 6f64 6520 2d70 206f 7220 2d68 2076  ecode -p or -h v
+00012090: 616c 7565 7320 6f74 6865 7220 7468 616e  alues other than
+000120a0: 2078 2d67 6f6f 672d 6d65 7461 2d2e 2046   x-goog-meta-. F
+000120b0: 6978 6573 2061 6269 6c69 7479 2074 6f20  ixes ability to 
+000120c0: 7573 6520 7374 7269 6e67 2070 726f 6a65  use string proje
+000120d0: 6374 206e 616d 6573 2e0a 2d20 5570 6461  ct names..- Upda
+000120e0: 7465 2062 7563 6b65 745f 7265 6c6f 6361  te bucket_reloca
+000120f0: 7465 2e73 6820 746f 2077 6f72 6b20 6f6e  te.sh to work on
+00012100: 2047 4345 2e0a 2d20 4669 7820 7265 6375   GCE..- Fix recu
+00012110: 7273 6976 6520 7570 6c6f 6164 696e 6720  rsive uploading 
+00012120: 6672 6f6d 2073 7562 6469 7265 6374 6f72  from subdirector
+00012130: 6965 7320 7769 7468 2075 6e65 7870 616e  ies with unexpan
+00012140: 6465 6420 7769 6c64 6361 7264 2061 7320  ded wildcard as 
+00012150: 736f 7572 6365 2055 5249 2e0a 2d20 4d61  source URI..- Ma
+00012160: 6b65 2067 7375 7469 6c20 6572 726f 7220  ke gsutil error 
+00012170: 7465 7874 2069 6e63 6c75 6465 203c 4d65  text include <Me
+00012180: 7373 6167 653e 2063 6f6e 7465 6e74 2e0a  ssage> content..
+00012190: 2d20 4368 616e 6765 2073 6865 6261 6e67  - Change shebang
+000121a0: 206c 696e 6520 6261 636b 2074 6f20 7079   line back to py
+000121b0: 7468 6f6e 2062 6563 6175 7365 2074 6869  thon because thi
+000121c0: 7320 646f 6573 6e27 7420 776f 726b 206f  s doesn't work o
+000121d0: 6e20 736f 6d65 2073 7973 7465 6d73 2e0a  n some systems..
+000121e0: 2d20 4669 7820 6861 7368 5f61 6c67 7320  - Fix hash_algs 
+000121f0: 6469 6666 6572 656e 6365 7320 696e 2070  differences in p
+00012200: 6572 6664 6961 672e 0a2d 2055 7064 6174  erfdiag..- Updat
+00012210: 6520 5079 7468 6f6e 2076 6572 7369 6f6e  e Python version
+00012220: 2063 6865 636b 2061 6e64 2073 6865 6261   check and sheba
+00012230: 6e67 206c 696e 652e 0a2d 2045 6e66 6f72  ng line..- Enfor
+00012240: 6365 2070 726f 6a65 6374 5f69 6420 656e  ce project_id en
+00012250: 7472 7920 696e 2063 6f6e 6669 6720 636f  try in config co
+00012260: 6d6d 616e 643b 2070 726f 7669 6465 2066  mmand; provide f
+00012270: 7269 656e 646c 7920 6572 726f 7220 6966  riendly error if
+00012280: 206d 6973 7369 6e67 2070 726f 6a20 4944   missing proj ID
+00012290: 2e0a 2d20 5573 6520 7472 616e 7363 6f64  ..- Use transcod
+000122a0: 696e 672d 696e 7661 7269 616e 7420 6865  ing-invariant he
+000122b0: 6164 6572 7320 7768 656e 2061 7661 696c  aders when avail
+000122c0: 6162 6c65 2069 6e20 6773 2e4b 6579 2e0a  able in gs.Key..
+000122d0: 2d20 4d61 6b65 2067 7375 7469 6c20 6370  - Make gsutil cp
+000122e0: 206e 6f74 2066 6169 6c20 6966 2075 6e61   not fail if una
+000122f0: 626c 6520 746f 2063 6865 636b 2076 6572  ble to check ver
+00012300: 7369 6f6e 696e 6720 636f 6e66 6967 206f  sioning config o
+00012310: 6e20 6465 7374 2062 7563 6b65 742e 0a2d  n dest bucket..-
+00012320: 204d 616b 6520 6773 7574 696c 2064 6574   Make gsutil det
+00012330: 6563 7420 7768 656e 2063 6f6e 6669 6720  ect when config 
+00012340: 6661 696c 7320 6265 6361 7573 6520 6f66  fails because of
+00012350: 2070 726f 7879 2061 6e64 2070 726f 6d70   proxy and promp
+00012360: 7420 666f 7220 7072 6f78 7920 636f 6e66  t for proxy conf
+00012370: 6967 2e0a 2d20 4176 6f69 6420 6368 6563  ig..- Avoid chec
+00012380: 6b69 6e67 206d 6574 6167 656e 6572 6174  king metagenerat
+00012390: 696f 6e20 6174 7472 6962 7574 6520 7768  ion attribute wh
+000123a0: 656e 206c 6f6e 672d 6c69 7374 696e 6720  en long-listing 
+000123b0: 5333 206f 626a 6563 7473 2e0a 2d20 4578  S3 objects..- Ex
+000123c0: 636c 7564 6520 7468 6520 6e6f 2d6f 7020  clude the no-op 
+000123d0: 6175 7468 2068 616e 646c 6572 2061 7320  auth handler as 
+000123e0: 696e 6469 6361 7469 6e67 2063 7265 6465  indicating crede
+000123f0: 6e74 6961 6c73 2061 7265 2063 6f6e 6669  ntials are confi
+00012400: 6775 7265 642e 0a0a 0a4e 6577 2046 6561  gured....New Fea
+00012410: 7475 7265 730a 2d2d 2d2d 2d2d 2d2d 2d2d  tures.----------
+00012420: 2d2d 0a0a 2d20 496d 706c 656d 656e 7465  --..- Implemente
+00012430: 6420 6773 7574 696c 2073 7461 7420 636f  d gsutil stat co
+00012440: 6d6d 616e 642e 0a0a 0a4f 7468 6572 2043  mmand....Other C
+00012450: 6861 6e67 6573 0a2d 2d2d 2d2d 2d2d 2d2d  hanges.---------
+00012460: 2d2d 2d2d 0a0a 2d20 436f 6e73 6f6c 6964  ----..- Consolid
+00012470: 6174 6520 636f 6e66 6967 2d72 656c 6174  ate config-relat
+00012480: 6564 2063 6f6d 6d61 6e64 732e 0a2d 2043  ed commands..- C
+00012490: 6861 6e67 6564 2072 6d20 2d72 2067 733a  hanged rm -r gs:
+000124a0: 2f2f 6275 636b 6574 2074 6f20 6465 6c65  //bucket to dele
+000124b0: 7465 2062 7563 6b65 7420 6174 2065 6e64  te bucket at end
+000124c0: 2e0a 2d20 5661 7269 6f75 7320 646f 6320  ..- Various doc 
+000124d0: 636c 6561 6e75 7020 616e 6420 696d 7072  cleanup and impr
+000124e0: 6f76 656d 656e 742e 0a2d 2057 6172 6e20  ovement..- Warn 
+000124f0: 7573 6572 2062 6566 6f72 6520 7570 6461  user before upda
+00012500: 7469 6e67 2074 6f20 6d61 6a6f 7220 6e65  ting to major ne
+00012510: 7720 7665 7273 696f 6e2e 2041 6c73 6f20  w version. Also 
+00012520: 6669 7865 6420 6d69 6e6f 7220 7665 7273  fixed minor vers
+00012530: 696f 6e20 636f 6d70 6172 6973 6f6e 2062  ion comparison b
+00012540: 7567 2c20 616e 6420 6164 6465 6420 7465  ug, and added te
+00012550: 7374 732e 0a2d 2043 6861 6e67 6520 6d61  sts..- Change ma
+00012560: 7820 636f 6d70 6f6e 656e 7420 636f 756e  x component coun
+00012570: 7420 746f 2031 3032 342e 0a2d 2041 6464  t to 1024..- Add
+00012580: 2072 6574 7279 2d64 6563 6f72 6174 6f72   retry-decorator
+00012590: 2061 7320 6120 7375 626d 6f64 756c 652e   as a submodule.
+000125a0: 0a2d 2045 7870 6c69 6369 746c 7920 7374  .- Explicitly st
+000125b0: 6174 6520 636f 6e74 726f 6c20 6368 6172  ate control char
+000125c0: 7320 746f 2061 766f 6964 2069 6e20 6773  s to avoid in gs
+000125d0: 7574 696c 206e 616d 696e 6720 646f 6375  util naming docu
+000125e0: 6d65 6e74 6174 696f 6e2e 0a2d 204d 616b  mentation..- Mak
+000125f0: 6520 636f 6e66 6967 2063 6f6d 6d61 6e64  e config command
+00012600: 2072 6563 6f6d 6d65 6e64 2070 726f 6a65   recommend proje
+00012610: 6374 2073 7472 696e 6773 2e0a 2d20 4d61  ct strings..- Ma
+00012620: 6465 206c 6f6e 6720 6c69 7374 696e 6720  de long listing 
+00012630: 666f 726d 6174 2061 206c 6974 746c 6520  format a little 
+00012640: 6265 7474 6572 206c 6f6f 6b69 6e67 2e0a  better looking..
+00012650: 2d20 416c 6c6f 7720 2d2d 6865 6c70 2066  - Allow --help f
+00012660: 6c61 6720 666f 7220 7375 6263 6f6d 6d61  lag for subcomma
+00012670: 6e64 732e 0a2d 2049 6d70 6c65 6d65 6e74  nds..- Implement
+00012680: 2068 656c 7020 666f 7220 7375 6263 6f6d   help for subcom
+00012690: 6d61 6e64 7320 616e 6420 6164 6420 4f50  mands and add OP
+000126a0: 5449 4f4e 5320 7365 6374 696f 6e73 2066  TIONS sections f
+000126b0: 6f72 2073 7562 636f 6d6d 616e 6473 2e0a  or subcommands..
+000126c0: 2d20 4164 6420 6d6f 7265 2064 6574 6169  - Add more detai
+000126d0: 6c65 6420 6572 726f 7220 6d65 7373 6167  led error messag
+000126e0: 6520 746f 206e 6f74 6966 6963 6174 696f  e to notificatio
+000126f0: 6e20 7761 7463 6862 7563 6b65 7420 636f  n watchbucket co
+00012700: 6d6d 616e 642e 0a2d 2041 6464 206e 6f74  mmand..- Add not
+00012710: 6966 6963 6174 696f 6e20 5552 4c20 636f  ification URL co
+00012720: 6e66 6967 7572 6174 696f 6e20 666f 7220  nfiguration for 
+00012730: 6e6f 7469 6669 6361 7469 6f6e 2074 6573  notification tes
+00012740: 7473 2e0a 2d20 5265 6661 6374 6f72 2074  ts..- Refactor t
+00012750: 6f20 7573 6520 7570 7374 7265 616d 2072  o use upstream r
+00012760: 6574 7279 5f64 6563 6f72 6174 6f72 2061  etry_decorator a
+00012770: 7320 6578 7465 726e 616c 2064 6570 656e  s external depen
+00012780: 6465 6e63 792e 0a2d 2044 6973 7472 6962  dency..- Distrib
+00012790: 7574 6520 6361 6365 7274 7320 6669 6c65  ute cacerts file
+000127a0: 2077 6974 6820 6773 7574 696c 2e0a 2d20   with gsutil..- 
+000127b0: 5570 6461 7465 6420 6773 7574 696c 2068  Updated gsutil h
+000127c0: 656c 7020 746f 2070 6f69 6e74 2074 6f20  elp to point to 
+000127d0: 476f 6f67 6c65 2043 6c6f 7564 2043 6f6e  Google Cloud Con
+000127e0: 736f 6c65 2069 6e73 7465 6164 206f 6620  sole instead of 
+000127f0: 6f6c 6465 7220 4150 4973 2063 6f6e 736f  older APIs conso
+00012800: 6c65 2e0a 2d20 4d61 6b65 2067 7375 7469  le..- Make gsuti
+00012810: 6c20 7061 7373 2062 756e 646c 6564 2063  l pass bundled c
+00012820: 6163 6572 7473 2e74 7874 2074 6f20 6f61  acerts.txt to oa
+00012830: 7574 6832 636c 6965 6e74 3b20 7374 6f70  uth2client; stop
+00012840: 2063 6865 636b 696e 6720 5348 4131 206f   checking SHA1 o
+00012850: 6620 6365 7274 732c 206e 6f77 2074 6861  f certs, now tha
+00012860: 7420 7765 206e 6f20 6c6f 6e67 6572 2064  t we no longer d
+00012870: 6570 656e 6420 6f6e 2062 6f74 6f20 6469  epend on boto di
+00012880: 7374 7269 6275 7469 6f6e 2e0a 2d20 4d6f  stribution..- Mo
+00012890: 7665 2061 6c6c 2054 5459 2063 6865 636b  ve all TTY check
+000128a0: 7320 746f 2061 2063 6f6d 6d6f 6e20 7574  s to a common ut
+000128b0: 696c 2066 756e 6374 696f 6e20 616e 6420  il function and 
+000128c0: 6d6f 636b 2069 7420 666f 7220 7570 6461  mock it for upda
+000128d0: 7465 2074 6573 7473 2e0a 2d20 4669 7820  te tests..- Fix 
+000128e0: 6475 706c 6963 6174 6520 656e 7472 7920  duplicate entry 
+000128f0: 6372 6561 7465 6420 696e 202e 6769 746d  created in .gitm
+00012900: 6f64 756c 6573 2e0a 2d20 4669 7820 756e  odules..- Fix un
+00012910: 6974 2074 6573 7420 6272 6561 6b61 6765  it test breakage
+00012920: 2062 6563 6175 7365 2056 4552 5349 4f4e   because VERSION
+00012930: 2066 696c 6520 6973 206f 6c64 2e0a 2d20   file is old..- 
+00012940: 4669 7820 7465 7374 2075 7369 6e67 203f  Fix test using ?
+00012950: 2067 6c6f 6220 7769 7468 204f 626a 6563   glob with Objec
+00012960: 7454 6f55 5249 2e0a 2d20 4669 7820 7570  tToURI..- Fix up
+00012970: 6461 7465 2074 6573 7473 2074 6861 7420  date tests that 
+00012980: 6661 696c 2066 6f72 2070 6163 6b61 6765  fail for package
+00012990: 2069 6e73 7461 6c6c 732e 0a2d 2043 6861   installs..- Cha
+000129a0: 6e67 6520 6275 636b 6574 2064 656c 6574  nge bucket delet
+000129b0: 6520 7465 6172 646f 776e 2074 6f20 7472  e teardown to tr
+000129c0: 7920 6d6f 7265 2074 696d 6573 2e0a 2d20  y more times..- 
+000129d0: 4669 7820 7465 7374 7320 7468 6174 2070  Fix tests that p
+000129e0: 6572 666f 726d 206f 7065 7261 7469 6f6e  erform operation
+000129f0: 7320 6f6e 2062 7563 6b65 7420 6c69 7374  s on bucket list
+00012a00: 696e 6773 2e0a 2d20 4b65 6570 2070 6163  ings..- Keep pac
+00012a10: 6b61 6765 2069 6e73 7461 6c6c 2073 6574  kage install set
+00012a20: 2074 6f20 5472 7565 2075 6e6c 6573 7320   to True unless 
+00012a30: 5645 5253 494f 4e20 6669 6c65 2064 6f65  VERSION file doe
+00012a40: 736e 2774 2065 7869 7374 2e0a 2d20 4669  sn't exist..- Fi
+00012a50: 7820 6861 6e64 6c69 6e67 206f 6620 6e6f  x handling of no
+00012a60: 6e2d 6e75 6d65 7269 6320 7665 7273 696f  n-numeric versio
+00012a70: 6e20 7374 7269 6e67 7320 696e 2075 7064  n strings in upd
+00012a80: 6174 6520 7465 7374 2e0a 0a0a 5265 6c65  ate test....Rele
+00012a90: 6173 6520 332e 3334 2028 7265 6c65 6173  ase 3.34 (releas
+00012aa0: 652d 6461 7465 3a20 3230 3133 2d30 372d  e-date: 2013-07-
+00012ab0: 3138 290a 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  18).============
+00012ac0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00012ad0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d0a 0a42 7567  ===========..Bug
+00012ae0: 2046 6978 6573 0a2d 2d2d 2d2d 2d2d 2d2d   Fixes.---------
+00012af0: 0a0a 2d20 4669 7865 6420 6120 6275 6720  ..- Fixed a bug 
+00012b00: 7768 6572 6520 7468 6520 6e6f 2d6f 7020  where the no-op 
+00012b10: 6175 7468 656e 7469 6361 7469 6f6e 2068  authentication h
+00012b20: 616e 646c 6572 2077 6173 2062 6569 6e67  andler was being
+00012b30: 206c 6f61 6465 6420 6166 7465 720a 2020   loaded after.  
+00012b40: 6f74 6865 7220 6175 7468 656e 7469 6361  other authentica
+00012b50: 7469 6f6e 2070 6c75 6769 6e73 2c20 6361  tion plugins, ca
+00012b60: 7573 696e 6720 7468 6520 6e6f 2d6f 7020  using the no-op 
+00012b70: 6861 6e64 6c65 7220 746f 2062 6520 6368  handler to be ch
+00012b80: 6f73 656e 2069 6e73 7465 6164 0a20 206f  osen instead.  o
+00012b90: 6620 6f74 6865 7220 7661 6c69 6420 6372  f other valid cr
+00012ba0: 6564 656e 7469 616c 732e 0a0a 0a52 656c  edentials....Rel
+00012bb0: 6561 7365 2033 2e33 3320 2872 656c 6561  ease 3.33 (relea
+00012bc0: 7365 2d64 6174 653a 2032 3031 332d 3037  se-date: 2013-07
+00012bd0: 2d31 3629 0a3d 3d3d 3d3d 3d3d 3d3d 3d3d  -16).===========
+00012be0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00012bf0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 0a0a 4275  ============..Bu
+00012c00: 6720 4669 7865 730a 2d2d 2d2d 2d2d 2d2d  g Fixes.--------
+00012c10: 2d0a 0a2d 2041 6464 6564 202e 6769 742a  -..- Added .git*
+00012c20: 2074 6f20 4d41 4e49 4645 5354 2e69 6e20   to MANIFEST.in 
+00012c30: 6578 636c 7564 6573 2061 6e64 2066 6978  excludes and fix
+00012c40: 6564 2063 7020 646f 6320 7479 706f 2e20  ed cp doc typo. 
+00012c50: 5468 6973 2077 6173 206e 6565 6465 6420  This was needed 
+00012c60: 746f 0a20 206f 7665 7263 6f6d 6520 7072  to.  overcome pr
+00012c70: 6f62 6c65 6d20 6361 7573 6564 2062 7920  oblem caused by 
+00012c80: 6163 6369 6465 6e74 616c 2069 6e63 6c75  accidental inclu
+00012c90: 7369 6f6e 206f 6620 2e67 6974 2a20 6669  sion of .git* fi
+00012ca0: 6c65 7320 696e 2072 656c 6561 7365 2c0a  les in release,.
+00012cb0: 2020 7768 6963 6820 6361 7573 6564 2074    which caused t
+00012cc0: 6865 2075 7064 6174 6520 636f 6d6d 616e  he update comman
+00012cd0: 6420 6e6f 206c 6f6e 6765 7220 746f 2061  d no longer to a
+00012ce0: 6c6c 6f77 2075 7064 6174 6573 2028 7369  llow updates (si
+00012cf0: 6e63 6520 7374 6172 7469 6e67 0a20 2069  nce starting.  i
+00012d00: 6e20 332e 3332 2069 7420 6368 6563 6b73  n 3.32 it checks
+00012d10: 2077 6865 7468 6572 2074 6865 2075 7365   whether the use
+00012d20: 7220 6861 7320 616e 7920 6578 7472 616e  r has any extran
+00012d30: 656f 7573 2066 696c 6573 2069 6e20 7468  eous files in th
+00012d40: 6520 6773 7574 696c 0a20 2064 6972 6563  e gsutil.  direc
+00012d50: 746f 7279 2062 6566 6f72 6520 7570 6461  tory before upda
+00012d60: 7469 6e67 290a 0a0a 5265 6c65 6173 6520  ting)...Release 
+00012d70: 332e 3332 2028 7265 6c65 6173 652d 6461  3.32 (release-da
+00012d80: 7465 3a20 3230 3133 2d30 372d 3136 290a  te: 2013-07-16).
+00012d90: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00012da0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00012db0: 3d3d 3d3d 3d3d 3d0a 0a4e 6577 2046 6561  =======..New Fea
+00012dc0: 7475 7265 730a 2d2d 2d2d 2d2d 2d2d 2d2d  tures.----------
+00012dd0: 2d2d 0a0a 2d20 4164 6465 6420 7375 7070  --..- Added supp
+00012de0: 6f72 7420 666f 7220 6765 7474 696e 6720  ort for getting 
+00012df0: 616e 6420 7365 7474 696e 6720 6c69 6665  and setting life
+00012e00: 6379 636c 6520 636f 6e66 6967 7572 6174  cycle configurat
+00012e10: 696f 6e20 666f 7220 6275 636b 6574 732e  ion for buckets.
+00012e20: 0a2d 2049 6d70 6c65 6d65 6e74 6564 2050  .- Implemented P
+00012e30: 6172 616c 6c65 6c20 436f 6d70 6f73 6974  arallel Composit
+00012e40: 6520 5570 6c6f 6164 732e 0a2d 2041 6464  e Uploads..- Add
+00012e50: 6564 2061 206e 6577 2064 7520 636f 6d6d  ed a new du comm
+00012e60: 616e 6420 7468 6174 2064 6973 706c 6179  and that display
+00012e70: 7320 6f62 6a65 6374 2073 697a 652c 2073  s object size, s
+00012e80: 696d 696c 6172 2074 6f20 4c69 6e75 7820  imilar to Linux 
+00012e90: 6475 2e0a 0a0a 4275 6720 4669 7865 730a  du....Bug Fixes.
+00012ea0: 2d2d 2d2d 2d2d 2d2d 2d0a 0a2d 2046 6978  ---------..- Fix
+00012eb0: 6564 2061 2062 7567 2077 6865 6e20 7573  ed a bug when us
+00012ec0: 696e 6720 6c73 202d 5220 6f6e 206f 626a  ing ls -R on obj
+00012ed0: 6563 7473 2077 6974 6820 7472 6169 6c69  ects with traili
+00012ee0: 6e67 2073 6c61 7368 6573 2e20 436c 6f73  ng slashes. Clos
+00012ef0: 6573 2023 3933 2e0a 2d20 4669 7865 6420  es #93..- Fixed 
+00012f00: 736f 2077 6f6e 2774 2063 7261 7368 2069  so won't crash i
+00012f10: 6e20 7065 7266 6469 6167 2077 6865 6e20  n perfdiag when 
+00012f20: 6e73 6c6f 6f6b 7570 2069 7320 6d69 7373  nslookup is miss
+00012f30: 696e 6720 6f72 2067 6574 686f 7374 6279  ing or gethostby
+00012f40: 6e61 6d65 0a20 2066 6169 6c73 2e0a 2d20  name.  fails..- 
+00012f50: 536d 6172 746c 7920 636f 6d70 6172 6520  Smartly compare 
+00012f60: 7665 7273 696f 6e20 7374 7269 6e67 7320  version strings 
+00012f70: 6475 7269 6e67 2061 7574 6f75 7064 6174  during autoupdat
+00012f80: 6520 6368 6563 6b2e 0a2d 204d 6164 6520  e check..- Made 
+00012f90: 6865 6164 6572 2068 616e 646c 696e 6720  header handling 
+00012fa0: 666f 7220 7570 6c6f 6164 2063 6173 652d  for upload case-
+00012fb0: 696e 7365 6e73 6974 6976 652e 0a2d 2052  insensitive..- R
+00012fc0: 652d 656e 6162 6c65 6420 736f 6674 7761  e-enabled softwa
+00012fd0: 7265 2075 7064 6174 6520 6368 6563 6b20  re update check 
+00012fe0: 666f 7220 7573 6572 7320 7769 7468 206e  for users with n
+00012ff0: 6f20 6372 6564 656e 7469 616c 7320 636f  o credentials co
+00013000: 6e66 6967 7572 6564 2e0a 2d20 4669 7865  nfigured..- Fixe
+00013010: 6420 696e 636f 7272 6563 746c 792d 6765  d incorrectly-ge
+00013020: 6e65 7261 7465 6420 7061 7373 776f 7264  nerated password
+00013030: 2065 6469 7469 6e67 2063 6f6d 6d65 6e74   editing comment
+00013040: 2069 6e20 7365 7276 6963 6520 6163 636f   in service acco
+00013050: 756e 740a 2020 636f 6e66 6967 2e20 4669  unt.  config. Fi
+00013060: 7865 7320 2331 3436 2e0a 0a0a 4f74 6865  xes #146....Othe
+00013070: 7220 4368 616e 6765 730a 2d2d 2d2d 2d2d  r Changes.------
+00013080: 2d2d 2d2d 2d2d 2d0a 0a2d 2049 6d70 726f  -------..- Impro
+00013090: 7665 6420 666c 6f77 2077 6865 6e20 656e  ved flow when en
+000130a0: 636f 756e 7465 7220 6175 7468 2066 6169  counter auth fai
+000130b0: 6c75 7265 2066 6f72 2047 4345 2073 6572  lure for GCE ser
+000130c0: 7669 6365 2061 6363 6f75 6e74 2077 6974  vice account wit
+000130d0: 6820 6e6f 0a20 2063 6f6e 6669 6775 7265  h no.  configure
+000130e0: 6420 7374 6f72 6167 6520 7363 6f70 6573  d storage scopes
+000130f0: 3a0a 2020 2020 312e 2043 6861 6e67 6564  :.    1. Changed
+00013100: 2048 6173 436f 6e66 6967 7572 6564 4372   HasConfiguredCr
+00013110: 6564 656e 7469 616c 7328 2920 6c6f 6769  edentials() logi
+00013120: 6320 6e6f 7420 746f 2069 6e63 6c75 6465  c not to include
+00013130: 0a20 2020 2020 2020 6861 735f 6175 7468  .       has_auth
+00013140: 5f70 6c75 6769 6e73 2061 7320 7061 7274  _plugins as part
+00013150: 206f 6620 7468 6520 6576 616c 7561 7465   of the evaluate
+00013160: 6420 6578 7072 6573 7369 6f6e 2c20 7369  d expression, si
+00013170: 6e63 6520 7468 6174 2077 696c 6c0a 2020  nce that will.  
+00013180: 2020 2020 2061 6c77 6179 7320 6576 616c       always eval
+00013190: 7561 7465 2074 6f20 7472 7565 2075 6e64  uate to true und
+000131a0: 6572 2047 4345 2028 7369 6e63 6520 4743  er GCE (since GC
+000131b0: 4520 636f 6e66 6967 7572 6573 2069 7473  E configures its
+000131c0: 2069 6e74 6572 6e61 6c0a 2020 2020 2020   internal.      
+000131d0: 2073 6572 7669 6365 2061 6363 6f75 6e74   service account
+000131e0: 2070 6c75 6769 6e20 756e 6465 7220 2f65   plugin under /e
+000131f0: 7463 2f62 6f74 6f2e 6366 6729 2e0a 2020  tc/boto.cfg)..  
+00013200: 2020 322e 2043 6861 6e67 6564 2043 6f6e    2. Changed Con
+00013210: 6669 6775 7265 4e6f 4f70 4175 7468 4966  figureNoOpAuthIf
+00013220: 4e65 6564 6564 206c 6f67 6963 2073 6f20  Needed logic so 
+00013230: 7765 2063 6f6e 6669 6775 7265 206e 6f2d  we configure no-
+00013240: 6f70 2061 7574 680a 2020 2020 2020 2070  op auth.       p
+00013250: 6c75 6769 6e20 6576 656e 2069 6620 7468  lugin even if th
+00013260: 6572 6520 6973 2061 2063 6f6e 6669 675f  ere is a config_
+00013270: 6669 6c65 206c 6973 742c 2073 696e 6365  file list, since
+00013280: 2047 4345 2061 6c77 6179 7320 636f 6e66   GCE always conf
+00013290: 6967 7572 6573 0a20 2020 2020 2020 2f65  igures.       /e
+000132a0: 7463 2f62 6f74 6f2e 6366 672c 2065 7665  tc/boto.cfg, eve
+000132b0: 6e20 6966 2075 7365 7220 6861 7320 6e6f  n if user has no
+000132c0: 2073 746f 7261 6765 2073 636f 7065 7320   storage scopes 
+000132d0: 636f 6e66 6967 7572 6564 2e0a 2020 2020  configured..    
+000132e0: 332e 2041 6464 6974 696f 6e61 6c20 6368  3. Additional ch
+000132f0: 616e 6765 733a 0a20 2020 2020 2061 2e20  anges:.      a. 
+00013300: 5265 6d6f 7665 6420 6173 7365 7274 696f  Removed assertio
+00013310: 6e20 6f66 206f 6175 7468 2061 6363 6573  n of oauth acces
+00013320: 7320 746f 6b65 6e20 6361 6368 6520 6368  s token cache ch
+00013330: 6563 6b20 6c6f 6720 6672 6f6d 0a20 2020  eck log from.   
+00013340: 2020 2020 2020 7465 7374 5f44 6f70 7469        test_Dopti
+00013350: 6f6e 2e70 792c 2077 6869 6368 206d 6179  on.py, which may
+00013360: 206e 6f74 2062 6520 7472 7565 2073 6f6d   not be true som
+00013370: 6574 696d 6573 2028 652e 672e 2c20 6966  etimes (e.g., if
+00013380: 2075 7365 7220 6973 0a20 2020 2020 2020   user is.       
+00013390: 2020 7573 696e 6720 484d 4143 2063 7265    using HMAC cre
+000133a0: 6473 292e 0a20 2020 2020 2062 2e20 5265  ds)..      b. Re
+000133b0: 6d6f 7665 6420 7265 6d6e 616e 7473 206f  moved remnants o
+000133c0: 6620 434f 4e46 4947 5f52 4551 5549 5245  f CONFIG_REQUIRE
+000133d0: 4420 6c65 6674 206f 7665 7220 6672 6f6d  D left over from
+000133e0: 2065 6172 6c69 6572 2043 4c2e 0a20 2020   earlier CL..   
+000133f0: 2020 2063 2e20 4d65 7267 6564 2064 7570     c. Merged dup
+00013400: 6520 5f43 6f6e 6669 6775 7265 4e6f 4f70  e _ConfigureNoOp
+00013410: 4175 7468 4966 4e65 6564 6564 2066 756e  AuthIfNeeded fun
+00013420: 6374 696f 6e73 2066 726f 6d20 7477 6f20  ctions from two 
+00013430: 636f 6465 2066 696c 6573 2c0a 2020 2020  code files,.    
+00013440: 2020 2020 206d 6f76 6564 2074 6f20 7574       moved to ut
+00013450: 696c 2e70 792e 0a2d 2046 6978 6564 2063  il.py..- Fixed c
+00013460: 6f6e 6675 7369 6e67 2067 7375 7469 6c20  onfusing gsutil 
+00013470: 726d 2022 4f6d 6974 7469 6e67 2220 6d65  rm "Omitting" me
+00013480: 7373 6167 652e 0a2d 2057 7261 7070 6564  ssage..- Wrapped
+00013490: 206c 6f6e 6720 6773 7574 696c 2075 7064   long gsutil upd
+000134a0: 6174 6520 6d65 7373 6167 652e 0a2d 2053  ate message..- S
+000134b0: 696c 656e 6365 6420 6164 6469 7469 6f6e  ilenced addition
+000134c0: 616c 2070 6f73 7369 626c 6520 7065 7266  al possible perf
+000134d0: 6469 6167 2065 7272 6f72 732e 0a2d 2049  diag errors..- I
+000134e0: 6d70 726f 7665 6420 7065 7266 6469 6167  mproved perfdiag
+000134f0: 2070 6572 666f 726d 616e 6365 2062 7920   performance by 
+00013500: 6f6e 6c79 2067 656e 6572 6174 696e 6720  only generating 
+00013510: 6f6e 6520 6368 756e 6b20 6f66 2072 616e  one chunk of ran
+00013520: 646f 6d20 6669 6c65 2e0a 2d20 4368 616e  dom file..- Chan
+00013530: 6765 6420 746f 2073 7761 6c6c 6f77 2062  ged to swallow b
+00013540: 726f 6b65 6e20 7069 7065 2065 7272 6f72  roken pipe error
+00013550: 7320 7768 656e 2070 6970 696e 6720 6773  s when piping gs
+00013560: 7574 696c 2074 6f20 6f74 6865 7220 7072  util to other pr
+00013570: 6f67 7261 6d73 2e0a 2d20 4d61 6465 2044  ograms..- Made D
+00013580: 6f74 6675 6c42 7563 6b65 744e 616d 654e  otfulBucketNameN
+00013590: 6f74 556e 6465 7254 6c64 2065 7272 6f72  otUnderTld error
+000135a0: 206d 6573 7361 6765 206d 6f72 6520 7573   message more us
+000135b0: 6572 2066 7269 656e 646c 792e 0a2d 2045  er friendly..- E
+000135c0: 7874 7261 6374 6564 2066 756e 6374 696f  xtracted functio
+000135d0: 6e20 666f 7220 6275 696c 6469 6e67 2041  n for building A
+000135e0: 434c 2065 7272 6f72 2074 6578 7420 6672  CL error text fr
+000135f0: 6f6d 206d 6169 6e20 7472 792f 6578 6365  om main try/exce
+00013600: 7074 206c 6f6f 702c 0a20 2066 6f72 2062  pt loop,.  for b
+00013610: 6574 7465 7220 7265 6164 6162 696c 6974  etter readabilit
+00013620: 792e 0a2d 2044 6973 616c 6c6f 7765 6420  y..- Disallowed 
+00013630: 6773 7574 696c 2075 7064 6174 6520 7768  gsutil update wh
+00013640: 656e 2075 7365 7220 6461 7461 2070 7265  en user data pre
+00013650: 7365 6e74 2069 6e20 6773 7574 696c 2064  sent in gsutil d
+00013660: 6972 2e0a 2d20 506c 756d 6265 6420 6163  ir..- Plumbed ac
+00013670: 6365 7074 2d65 6e63 6f64 696e 6720 696e  cept-encoding in
+00013680: 746f 2048 4541 4420 7265 7175 6573 7473  to HEAD requests
+00013690: 2069 6e20 6c73 202d 4c20 636f 6d6d 616e   in ls -L comman
+000136a0: 642e 0a2d 2055 7064 6174 6564 2052 4541  d..- Updated REA
+000136b0: 444d 4520 616e 6420 6d6f 7665 6420 5265  DME and moved Re
+000136c0: 6c65 6173 654e 6f74 6573 2e74 7874 2074  leaseNotes.txt t
+000136d0: 6f20 4348 414e 4745 532e 6d64 2e0a 2d20  o CHANGES.md..- 
+000136e0: 5570 6461 7465 6420 6372 636d 6f64 2064  Updated crcmod d
+000136f0: 6f63 7320 7769 7468 206c 696e 6b20 746f  ocs with link to
+00013700: 2057 696e 646f 7773 2069 6e73 7461 6c6c   Windows install
+00013710: 6572 2e0a 2d20 5570 6461 7465 6420 646f  er..- Updated do
+00013720: 6375 6d65 6e74 6174 696f 6e20 7265 6761  cumentation rega
+00013730: 7264 696e 6720 677a 6970 2063 6f6e 7465  rding gzip conte
+00013740: 6e74 2d65 6e63 6f64 696e 672e 0a2d 2052  nt-encoding..- R
+00013750: 656d 6f76 6564 2053 746f 7261 6765 5572  emoved StorageUr
+00013760: 6920 7061 7273 6520 6368 6563 6b20 666f  i parse check fo
+00013770: 7220 6c6f 6e65 2027 3a27 2028 696e 7465  r lone ':' (inte
+00013780: 7266 6572 6573 2077 6974 6820 7573 696e  rferes with usin
+00013790: 6720 6669 6c65 6e61 6d65 730a 2020 636f  g filenames.  co
+000137a0: 6e74 6169 6e69 6e67 2027 3a27 290a 2d20  ntaining ':').- 
+000137b0: 4164 6465 6420 7465 7374 7320 666f 7220  Added tests for 
+000137c0: 6773 7574 696c 2075 7064 6174 6520 6368  gsutil update ch
+000137d0: 6563 6b20 616e 6420 6669 7865 6420 6275  eck and fixed bu
+000137e0: 6720 666f 7220 6261 6420 6669 6c65 2063  g for bad file c
+000137f0: 6f6e 7465 6e74 732e 0a2d 2053 6574 2061  ontents..- Set a
+00013800: 6363 6570 742d 656e 636f 6469 6e67 2061  ccept-encoding a
+00013810: 6e64 2068 616e 646c 6520 677a 6970 206f  nd handle gzip o
+00013820: 6e2d 7468 652d 666c 7920 656e 636f 6469  n-the-fly encodi
+00013830: 6e67 2e0a 0a0a 5265 6c65 6173 6520 332e  ng....Release 3.
+00013840: 3331 2028 7265 6c65 6173 652d 6461 7465  31 (release-date
+00013850: 3a20 3230 3133 2d30 362d 3130 290a 3d3d  : 2013-06-10).==
+00013860: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00013870: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00013880: 3d3d 3d3d 3d0a 0a4e 6577 2046 6561 7475  =====..New Featu
+00013890: 7265 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  res.------------
+000138a0: 0a0a 2d20 496d 706c 656d 656e 7465 6420  ..- Implemented 
+000138b0: 636f 6e73 756d 7074 696f 6e20 6f66 206d  consumption of m
+000138c0: 616e 6966 6573 7420 6669 6c65 7320 666f  anifest files fo
+000138d0: 7220 6370 2e0a 2d20 4164 6420 4554 6167  r cp..- Add ETag
+000138e0: 2074 6f20 6c73 202d 6c20 616e 6420 6d61   to ls -l and ma
+000138f0: 6b65 206c 7320 2d62 2076 6172 6961 6e74  ke ls -b variant
+00013900: 7320 6d6f 7265 2065 6666 6963 6965 6e74  s more efficient
+00013910: 2e0a 2d20 4578 7061 6e64 2074 6865 206d  ..- Expand the m
+00013920: 616e 6966 6573 7420 7061 7468 2074 6f20  anifest path to 
+00013930: 616c 6c6f 7720 666f 7220 7469 6c64 6573  allow for tildes
+00013940: 2069 6e20 7061 7468 732e 0a2d 2041 6464   in paths..- Add
+00013950: 6564 2062 7563 6b65 745f 7265 6c6f 6361  ed bucket_reloca
+00013960: 7465 2e73 6820 7363 7269 7074 2074 6f20  te.sh script to 
+00013970: 6773 7574 696c 2e0a 0a0a 4275 6720 4669  gsutil....Bug Fi
+00013980: 7865 730a 2d2d 2d2d 2d2d 2d2d 2d0a 0a2d  xes.---------..-
+00013990: 2046 6978 2067 7375 7469 6c20 6370 202d   Fix gsutil cp -
+000139a0: 5220 746f 2063 6f70 7920 616c 6c20 7665  R to copy all ve
+000139b0: 7273 696f 6e65 6420 6f62 6a65 6374 732e  rsioned objects.
+000139c0: 0a2d 2046 6978 6564 2062 7567 2077 6865  .- Fixed bug whe
+000139d0: 7265 2067 7375 7469 6c20 6370 202d 4420  re gsutil cp -D 
+000139e0: 2d6e 2063 6175 7365 6420 7072 6563 6f6e  -n caused precon
+000139f0: 6469 7469 6f6e 2066 6169 6c75 7265 2e0a  dition failure..
+00013a00: 2d20 4669 7865 6420 6773 7574 696c 2064  - Fixed gsutil d
+00013a10: 6169 7379 2d63 6861 696e 2063 6f70 7920  aisy-chain copy 
+00013a20: 746f 2061 6c6c 6f77 2070 7265 7365 7276  to allow preserv
+00013a30: 696e 6720 4143 4c73 2077 6865 6e20 636f  ing ACLs when co
+00013a40: 7079 696e 6720 7769 7468 696e 0a20 2073  pying within.  s
+00013a50: 616d 6520 7072 6f76 6964 6572 2e0a 2d20  ame provider..- 
+00013a60: 4669 7820 6964 656e 7469 6669 6361 7469  Fix identificati
+00013a70: 6f6e 206f 6620 6e6f 6e2d 4d44 3520 4554  on of non-MD5 ET
+00013a80: 6167 732e 0a2d 2046 6978 6564 2062 7567  ags..- Fixed bug
+00013a90: 7320 7768 6572 6520 6773 7574 696c 202d  s where gsutil -
+00013aa0: 7120 6370 2061 6e64 2067 7375 7469 6c20  q cp and gsutil 
+00013ab0: 6370 202d 7120 736f 6d65 7469 6d65 7320  cp -q sometimes 
+00013ac0: 7765 7265 6e27 7420 7175 6965 742e 0a2d  weren't quiet..-
+00013ad0: 2046 6978 6564 2075 6e69 636f 6465 2065   Fixed unicode e
+00013ae0: 7272 6f72 2077 6865 6e20 636f 6e73 7472  rror when constr
+00013af0: 7563 7469 6e67 2074 7261 636b 6572 2066  ucting tracker f
+00013b00: 696c 656e 616d 6520 6672 6f6d 206e 6f6e  ilename from non
+00013b10: 2d41 5343 4949 0a20 2055 6e69 636f 6465  -ASCII.  Unicode
+00013b20: 2066 696c 656e 616d 652e 0a2d 2046 6978   filename..- Fix
+00013b30: 6564 2074 6861 7420 6e6f 636c 6f62 6265  ed that noclobbe
+00013b40: 7220 776f 756c 6420 6e6f 7420 7265 7375  r would not resu
+00013b50: 6d65 2070 6172 7469 616c 2072 6573 756d  me partial resum
+00013b60: 6162 6c65 2064 6f77 6e6c 6f61 6473 2e0a  able downloads..
+00013b70: 2d20 4669 7865 6420 6275 6720 7768 656e  - Fixed bug when
+00013b80: 2072 756e 6e69 6e67 2067 7375 7469 6c20   running gsutil 
+00013b90: 6370 202d 4470 2062 7920 7573 6572 206f  cp -Dp by user o
+00013ba0: 7468 6572 2074 6861 6e20 6f62 6a65 6374  ther than object
+00013bb0: 206f 776e 6572 2e0a 2d20 5072 6f70 6572   owner..- Proper
+00013bc0: 6c79 2065 6e63 6f64 6520 6d65 7461 6765  ly encode metage
+00013bd0: 6e65 7261 7469 6f6e 2061 6e64 2065 7461  neration and eta
+00013be0: 6720 696e 206c 7320 6f75 7470 7574 2077  g in ls output w
+00013bf0: 6974 6820 2d61 2061 6e64 202d 652e 0a2d  ith -a and -e..-
+00013c00: 2055 7064 6174 6520 7265 7375 6d61 626c   Update resumabl
+00013c10: 6520 7468 7265 7368 6f6c 6420 7374 6174  e threshold stat
+00013c20: 6564 2069 6e20 6773 7574 696c 2068 656c  ed in gsutil hel
+00013c30: 7020 7072 6f64 2e0a 0a0a 4f74 6865 7220  p prod....Other 
+00013c40: 4368 616e 6765 730a 2d2d 2d2d 2d2d 2d2d  Changes.--------
+00013c50: 2d2d 2d2d 2d0a 0a2d 206c 7320 2d4c 6220  -----..- ls -Lb 
+00013c60: 6e6f 206c 6f6e 6765 7220 7368 6f77 7320  no longer shows 
+00013c70: 746f 7461 6c20 2320 6669 6c65 732f 746f  total # files/to
+00013c80: 7461 6c20 7369 7a65 206f 6620 6275 636b  tal size of buck
+00013c90: 6574 2c20 736f 2074 6861 7420 6c73 202d  et, so that ls -
+00013ca0: 4c62 0a20 2069 6e73 7465 6164 2070 726f  Lb.  instead pro
+00013cb0: 7669 6465 7320 616e 2065 6666 6963 6965  vides an efficie
+00013cc0: 6e74 2077 6179 2074 6f20 7669 6577 206a  nt way to view j
+00013cd0: 7573 7420 7468 6520 6d65 7461 6461 7461  ust the metadata
+00013ce0: 2066 6f72 206c 6172 6765 2062 7563 6b65   for large bucke
+00013cf0: 7473 2e0a 2d20 4361 7463 6820 616e 6420  ts..- Catch and 
+00013d00: 6967 6e6f 7265 2045 4558 4953 5420 6572  ignore EEXIST er
+00013d10: 726f 7220 7768 656e 2063 7265 6174 696e  ror when creatin
+00013d20: 6720 6773 7574 696c 2074 7261 636b 6572  g gsutil tracker
+00013d30: 2064 6972 2e0a 2d20 4164 6420 6e6f 7465   dir..- Add note
+00013d40: 2074 6f20 6773 7574 696c 2075 7064 6174   to gsutil updat
+00013d50: 6520 646f 6320 6162 6f75 7420 6175 746f  e doc about auto
+00013d60: 2d75 7064 6174 6520 6368 6563 6b73 2062  -update checks b
+00013d70: 6569 6e67 2064 6973 6162 6c65 6420 7769  eing disabled wi
+00013d80: 7468 0a20 2067 7375 7469 6c20 2d71 206f  th.  gsutil -q o
+00013d90: 7074 696f 6e2e 0a2d 2044 6973 6162 6c65  ption..- Disable
+00013da0: 2068 6173 6869 6e67 2061 6e64 2069 6e63   hashing and inc
+00013db0: 7265 6173 6520 6275 6666 6572 2073 697a  rease buffer siz
+00013dc0: 6520 696e 2070 6572 6664 6961 672e 0a2d  e in perfdiag..-
+00013dd0: 2041 6464 6564 2062 6574 7465 7220 6572   Added better er
+00013de0: 726f 7220 6d65 7373 6167 6573 2066 6f72  ror messages for
+00013df0: 2073 6572 7669 6365 2061 6363 6f75 6e74   service account
+00013e00: 2061 7574 682e 0a2d 204d 616b 6520 7065   auth..- Make pe
+00013e10: 7266 6469 6167 2062 6568 6176 6520 6d6f  rfdiag behave mo
+00013e20: 7265 206c 696b 6520 6e6f 726d 616c 2067  re like normal g
+00013e30: 7375 7469 6c2c 2077 6974 6820 6d75 6c74  sutil, with mult
+00013e40: 692d 7468 7265 6164 696e 6720 6f70 7469  i-threading opti
+00013e50: 6f6e 2e0a 2d20 4368 616e 6765 6420 736f  on..- Changed so
+00013e60: 2061 7574 6f2d 7570 6461 7465 2063 6865   auto-update che
+00013e70: 636b 2f70 726f 6d70 7420 6172 656e 2774  ck/prompt aren't
+00013e80: 206d 6164 6520 6966 2067 7375 7469 6c20   made if gsutil 
+00013e90: 2d71 2073 7065 6369 6669 6564 2e0a 2d20  -q specified..- 
+00013ea0: 4368 616e 6765 6420 6773 7574 696c 206d  Changed gsutil m
+00013eb0: 6220 636f 6d6d 616e 6420 746f 2063 6c61  b command to cla
+00013ec0: 7269 6679 2074 6861 7420 4555 206d 6561  rify that EU mea
+00013ed0: 6e73 2045 7572 6f70 6561 6e20 556e 696f  ns European Unio
+00013ee0: 6e2e 0a2d 2041 6464 6564 2064 6f63 2077  n..- Added doc w
+00013ef0: 6172 6e69 6e67 7320 6162 6f75 7420 6c6f  arnings about lo
+00013f00: 7369 6e67 2076 6572 7369 6f6e 206f 7264  sing version ord
+00013f10: 6572 696e 6720 6966 2075 7369 6e67 2067  ering if using g
+00013f20: 7375 7469 6c20 2d6d 2063 700a 2020 6265  sutil -m cp.  be
+00013f30: 7477 6565 6e20 7665 7273 696f 6e65 6420  tween versioned 
+00013f40: 6275 636b 6574 733b 2072 656d 6f76 6564  buckets; removed
+00013f50: 2074 7261 696c 696e 6720 7768 6974 6573   trailing whites
+00013f60: 7061 6365 2e0a 2d20 4164 6465 6420 746f  pace..- Added to
+00013f70: 2067 7375 7469 6c20 6370 202d 4c20 646f   gsutil cp -L do
+00013f80: 6320 746f 2064 6573 6372 6962 6520 686f  c to describe ho
+00013f90: 7720 746f 2062 7569 6c64 2061 2072 656c  w to build a rel
+00013fa0: 6961 626c 6520 7363 7269 7074 2066 6f72  iable script for
+00013fb0: 0a20 2063 6f70 7969 6e67 206d 616e 7920  .  copying many 
+00013fc0: 6f62 6a65 6374 732e 0a0a 0a52 656c 6561  objects....Relea
+00013fd0: 7365 2033 2e33 3020 2872 656c 6561 7365  se 3.30 (release
+00013fe0: 2d64 6174 653a 2032 3031 332d 3036 2d31  -date: 2013-06-1
+00013ff0: 3029 0a3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  0).=============
+00014000: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00014010: 3d3d 3d3d 3d3d 3d3d 3d3d 0a0a 2d20 4162  ==========..- Ab
+00014020: 616e 646f 6e65 642e 0a0a 0a52 656c 6561  andoned....Relea
+00014030: 7365 2033 2e32 3920 2872 656c 6561 7365  se 3.29 (release
+00014040: 2d64 6174 653a 2032 3031 332d 3035 2d31  -date: 2013-05-1
+00014050: 3329 0a3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  3).=============
 00014060: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00014070: 3d3d 3d3d 3d3d 3d0a 0a4e 6577 2046 6561  =======..New Fea
-00014080: 7475 7265 730a 2d2d 2d2d 2d2d 2d2d 2d2d  tures.----------
-00014090: 2d2d 0a0a 2d20 4164 6465 6420 7375 7070  --..- Added supp
-000140a0: 6f72 7420 666f 7220 6e65 7720 4f62 6a65  ort for new Obje
-000140b0: 6374 2043 6861 6e67 6520 4e6f 7469 6669  ct Change Notifi
-000140c0: 6361 7469 6f6e 7320 6665 6174 7572 652e  cations feature.
-000140d0: 0a0a 4275 6720 4669 7865 730a 2d2d 2d2d  ..Bug Fixes.----
-000140e0: 2d2d 2d2d 2d0a 0a2d 2046 6978 6564 2070  -----..- Fixed p
-000140f0: 726f 626c 656d 2077 6865 7265 2067 7375  roblem where gsu
-00014100: 7469 6c20 7570 6461 7465 2063 6f6d 6d61  til update comma
-00014110: 6e64 2064 6964 6ee2 8099 7420 7461 6b65  nd didn...t take
-00014120: 2064 6566 6175 6c74 2061 6374 696f 6e2e   default action.
-00014130: 0a2d 2046 6978 6564 2061 2070 726f 626c  .- Fixed a probl
-00014140: 656d 2077 6974 6820 7468 6520 7570 6461  em with the upda
-00014150: 7465 2063 6f6d 6d61 6e64 2073 6f6d 6574  te command somet
-00014160: 696d 6573 2074 7269 6767 6572 696e 6720  imes triggering 
-00014170: 616e 2061 6464 6974 696f 6e61 6c0a 2020  an additional.  
-00014180: 7570 6461 7465 2063 6f6d 6d61 6e64 2e0a  update command..
-00014190: 0a4f 7468 6572 2043 6861 6e67 6573 0a2d  .Other Changes.-
-000141a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a0a 2d20  ------------..- 
-000141b0: 4164 6420 7061 636b 6167 696e 6720 696e  Add packaging in
-000141c0: 666f 726d 6174 696f 6e20 746f 2076 6572  formation to ver
-000141d0: 7369 6f6e 206f 7574 7075 742e 0a2d 2052  sion output..- R
-000141e0: 656d 6f76 6564 2066 616e 6379 5f75 726c  emoved fancy_url
-000141f0: 6c69 622c 2073 696e 6365 2069 7420 6973  lib, since it is
-00014200: 206e 6f20 6c6f 6e67 6572 2075 7365 642e   no longer used.
-00014210: 0a2d 2043 6861 6e67 6564 206e 756d 5f72  .- Changed num_r
-00014220: 6574 7269 6573 2064 6566 6175 6c74 2066  etries default f
-00014230: 6f72 2072 6573 756d 6162 6c65 2064 6f77  or resumable dow
-00014240: 6e6c 6f61 6473 2074 6f20 362e 0a2d 2044  nloads to 6..- D
-00014250: 6f6e e280 9974 2063 6865 636b 2066 6f72  on...t check for
-00014260: 206e 6577 6572 2073 6f66 7477 6172 6520   newer software 
-00014270: 7665 7273 696f 6e20 6966 2067 735f 686f  version if gs_ho
-00014280: 7374 2069 7320 7370 6563 6966 6965 6420  st is specified 
-00014290: 696e 2062 6f74 6f0a 2020 636f 6e66 6967  in boto.  config
-000142a0: 2066 696c 652e 0a2d 204d 6f64 6966 6965   file..- Modifie
-000142b0: 6420 6f61 7574 6832 636c 6965 6e74 206c  d oauth2client l
-000142c0: 6f67 6769 6e67 2062 6568 6176 696f 7220  ogging behavior 
-000142d0: 746f 2062 6520 636f 6e73 6973 7465 6e74  to be consistent
-000142e0: 2077 6974 6820 6773 7574 696c 2e0a 2d20   with gsutil..- 
-000142f0: 4164 6465 6420 6773 5f70 6f72 7420 636f  Added gs_port co
-00014300: 6e66 6967 7572 6174 696f 6e20 6f70 7469  nfiguration opti
-00014310: 6f6e 2e0a 2d20 536b 6970 2075 7064 6174  on..- Skip updat
-00014320: 6520 7465 7374 7320 7768 656e 2053 534c  e tests when SSL
-00014330: 2069 7320 6469 7361 626c 6564 2e0a 0a0a   is disabled....
-00014340: 5265 6c65 6173 6520 332e 3237 2028 7265  Release 3.27 (re
-00014350: 6c65 6173 652d 6461 7465 3a20 3230 3133  lease-date: 2013
-00014360: 2d30 342d 3235 290a 3d3d 3d3d 3d3d 3d3d  -04-25).========
-00014370: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00014380: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d0a  ===============.
-00014390: 0a4e 6577 2046 6561 7475 7265 730a 2d2d  .New Features.--
-000143a0: 2d2d 2d2d 2d2d 2d2d 2d2d 0a0a 2d20 4164  ----------..- Ad
-000143b0: 6465 6420 6120 6875 6d61 6e20 7265 6164  ded a human read
-000143c0: 6162 6c65 206f 7074 696f 6e20 282d 6829  able option (-h)
-000143d0: 2074 6f20 6c73 2063 6f6d 6d61 6e64 2e0a   to ls command..
-000143e0: 2d20 4368 616e 6765 6420 5769 6c64 6361  - Changed Wildca
-000143f0: 7264 4974 6572 6174 6f72 206e 6f74 2074  rdIterator not t
-00014400: 6f20 6d61 7465 7269 616c 697a 6520 6c69  o materialize li
-00014410: 7374 206f 6620 616c 6c20 6d61 7463 6869  st of all matchi
-00014420: 6e67 2066 696c 6573 2066 726f 6d0a 2020  ng files from.  
-00014430: 6469 7265 6374 6f72 7920 6c69 7374 696e  directory listin
-00014440: 6720 2873 6f20 776f 726b 7320 6661 7374  g (so works fast
-00014450: 6572 2077 6865 6e20 7761 6c6b 696e 6720  er when walking 
-00014460: 6f76 6572 206c 6172 6765 2064 6972 6563  over large direc
-00014470: 746f 7269 6573 290a 2d20 4164 6465 6420  tories).- Added 
-00014480: 2d66 206f 7074 696f 6e20 746f 2073 6574  -f option to set
-00014490: 6163 6c20 636f 6d6d 616e 6420 746f 2061  acl command to a
-000144a0: 6c6c 6f77 2063 6f6d 6d61 6e64 2074 6f20  llow command to 
-000144b0: 636f 6e74 696e 7565 2061 6674 6572 2065  continue after e
-000144c0: 7272 6f72 730a 2020 656e 636f 756e 7465  rrors.  encounte
-000144d0: 7265 642e 0a2d 2041 6464 206d 616e 6966  red..- Add manif
-000144e0: 6573 7420 6c6f 6720 7375 7070 6f72 7420  est log support 
-000144f0: 666f 7220 7468 6520 6370 2063 6f6d 6d61  for the cp comma
-00014500: 6e64 2e0a 2d20 4164 6465 6420 6e65 7665  nd..- Added neve
-00014510: 7220 6f70 7469 6f6e 2066 6f72 2063 6865  r option for che
-00014520: 636b 5f68 6173 6865 735f 636f 6e66 6967  ck_hashes_config
-00014530: 3b20 6669 7865 6420 6275 6720 7468 6174  ; fixed bug that
-00014540: 2061 7373 756d 6573 2061 6e20 4554 6167   assumes an ETag
-00014550: 0a20 2069 7320 616c 7761 7973 2072 6574  .  is always ret
-00014560: 7572 6e65 6420 6672 6f6d 2073 6572 7665  urned from serve
-00014570: 722e 0a2d 204d 6164 6520 6773 7574 696c  r..- Made gsutil
-00014580: 2070 726f 7669 6465 2066 7269 656e 646c   provide friendl
-00014590: 6965 7220 6572 726f 7220 6d65 7373 6167  ier error messag
-000145a0: 6520 6966 2061 7474 656d 7074 696e 6720  e if attempting 
-000145b0: 6e6f 6e2d 7075 626c 6963 2064 6174 610a  non-public data.
-000145c0: 2020 6163 6365 7373 2077 6974 6820 6d69    access with mi
-000145d0: 7373 696e 6720 6372 6564 656e 7469 616c  ssing credential
-000145e0: 732e 0a2d 2053 6574 2037 3020 7365 636f  s..- Set 70 seco
-000145f0: 6e64 2064 6566 6175 6c74 2073 6f63 6b65  nd default socke
-00014600: 7420 7469 6d65 6f75 7420 666f 7220 6874  t timeout for ht
-00014610: 7470 6c69 622e 0a2d 2041 6464 2061 6269  tplib..- Add abi
-00014620: 6c69 7479 2074 6f20 7275 6e20 6120 7369  lity to run a si
-00014630: 6e67 6c65 2074 6573 7420 636c 6173 7320  ngle test class 
-00014640: 6f72 2066 756e 6374 696f 6e20 7769 7468  or function with
-00014650: 2074 6865 2074 6573 7420 636f 6d6d 616e   the test comman
-00014660: 642e 0a0a 4275 6720 4669 7865 730a 2d2d  d...Bug Fixes.--
-00014670: 2d2d 2d2d 2d2d 2d0a 0a2d 2044 6f6e 2774  -------..- Don't
-00014680: 2063 6865 636b 2066 6f72 2075 7064 6174   check for updat
-00014690: 6573 2069 6620 7468 6520 7573 6572 2068  es if the user h
-000146a0: 6173 206e 6f20 6372 6564 656e 7469 616c  as no credential
-000146b0: 7320 636f 6e66 6967 7572 6564 2e20 5468  s configured. Th
-000146c0: 6973 0a20 2066 6978 6573 2061 2062 7567  is.  fixes a bug
-000146d0: 2066 6f72 2075 7365 7273 2077 6974 686f   for users witho
-000146e0: 7574 2063 7265 6465 6e74 6961 6c73 2074  ut credentials t
-000146f0: 7279 696e 6720 746f 2075 7365 2067 7375  rying to use gsu
-00014700: 7469 6c20 666f 7220 6669 7273 740a 2020  til for first.  
-00014710: 7469 6d65 2e0a 2d20 4669 7865 6420 6361  time..- Fixed ca
-00014720: 7365 2077 6865 7265 2063 6861 636c 2063  se where chacl c
-00014730: 6f6d 6d61 6e64 2069 6e63 6f72 7265 6374  ommand incorrect
-00014740: 6c79 2072 6563 6f67 6e69 7a65 6420 616e  ly recognized an
-00014750: 2065 6d61 696c 2061 6464 7265 7373 2061   email address a
-00014760: 7320 610a 2020 646f 6d61 696e 2e0a 2d20  s a.  domain..- 
-00014770: 4669 7820 7365 746d 6574 6120 636f 6d6d  Fix setmeta comm
-00014780: 616e 6420 666f 7220 5333 206f 626a 6563  and for S3 objec
-00014790: 7473 2e0a 2d20 4669 7865 6420 6275 6720  ts..- Fixed bug 
-000147a0: 7768 6572 6520 7769 6c64 6361 7264 6564  where wildcarded
-000147b0: 2064 6573 7420 5552 4920 6174 7465 6d70   dest URI attemp
-000147c0: 7465 6420 7374 7269 6e67 206f 7020 6f6e  ted string op on
-000147d0: 204b 6579 206f 626a 6563 742e 0a2d 2046   Key object..- F
-000147e0: 6978 6564 2063 6173 6520 7768 6572 6520  ixed case where 
-000147f0: 6773 7574 696c 202d 7120 6f75 7470 7574  gsutil -q output
-00014800: 7465 6420 7072 6f67 7265 7373 206f 7574  ted progress out
-00014810: 7075 7420 7768 656e 2064 6f69 6e67 2061  put when doing a
-00014820: 2073 7472 6561 6d69 6e67 0a20 2075 706c   streaming.  upl
-00014830: 6f61 642e 0a2d 2045 7272 6f72 2068 616e  oad..- Error han
-00014840: 646c 696e 6720 666f 7220 6f75 7420 6f66  dling for out of
-00014850: 2073 7061 6365 2064 7572 696e 6720 646f   space during do
-00014860: 776e 6c6f 6164 732e 0a2d 2049 6e63 6c75  wnloads..- Inclu
-00014870: 6465 2049 534f 2038 3630 312d 7265 7175  de ISO 8601-requ
-00014880: 6972 6564 2022 5a22 2061 7420 656e 6420  ired "Z" at end 
-00014890: 6f66 2074 696d 6573 7461 6d70 2073 7472  of timestamp str
-000148a0: 696e 6720 666f 7220 6773 7574 696c 206c  ing for gsutil l
-000148b0: 7320 2d6c 2c0a 2020 746f 2062 6520 7370  s -l,.  to be sp
-000148c0: 6563 2d63 6f6d 706c 6961 6e74 2e0a 2d20  ec-compliant..- 
-000148d0: 5265 6d6f 7665 6420 6465 7072 6563 6174  Removed deprecat
-000148e0: 6564 2073 6574 6d65 7461 2073 796e 7461  ed setmeta synta
-000148f0: 7820 616e 6420 6669 7865 6420 756e 6963  x and fixed unic
-00014900: 6f64 6520 6973 7375 6573 2e0a 2d20 4368  ode issues..- Ch
-00014910: 616e 6765 6420 7570 6461 7465 2063 6f6d  anged update com
-00014920: 6d61 6e64 206e 6f74 2074 6f20 7375 6767  mand not to sugg
-00014930: 6573 7420 7275 6e6e 696e 6720 7375 646f  est running sudo
-00014940: 2069 6620 7275 6e6e 696e 6720 756e 6465   if running unde
-00014950: 7220 4379 6777 696e 2e0a 2d20 5265 6d6f  r Cygwin..- Remo
-00014960: 7665 6420 7265 6665 7265 6e63 6573 2074  ved references t
-00014970: 6f20 6465 7072 6563 6174 6564 2067 732d  o deprecated gs-
-00014980: 6469 7363 7573 7369 6f6e 2066 6f72 756d  discussion forum
-00014990: 2066 726f 6d20 6773 7574 696c 2062 7569   from gsutil bui
-000149a0: 6c74 2d69 6e0a 2020 6865 6c70 2e0a 2d20  lt-in.  help..- 
-000149b0: 4164 6420 6c69 7465 7261 6c20 7175 6f74  Add literal quot
-000149c0: 6573 2061 726f 756e 6420 434f 5253 2063  es around CORS c
-000149d0: 6f6e 6669 6720 6578 616d 706c 6520 5552  onfig example UR
-000149e0: 4c20 696e 2067 7375 7469 6c20 7365 7463  L in gsutil setc
-000149f0: 6f72 7320 6865 6c70 2074 6f0a 2020 6176  ors help to.  av
-00014a00: 6f69 6420 6861 7669 6e67 2065 7861 6d70  oid having examp
-00014a10: 6c65 2055 524c 2074 7572 6e20 696e 746f  le URL turn into
-00014a20: 2061 6e20 4852 4546 2069 6e20 6175 746f   an HREF in auto
-00014a30: 2d67 656e 6572 6174 6564 2064 6f63 2e0a  -generated doc..
-00014a40: 0a4f 7468 6572 2043 6861 6e67 6573 0a2d  .Other Changes.-
-00014a50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a0a 2d20  ------------..- 
-00014a60: 4164 6465 6420 7072 6f70 6572 2073 6574  Added proper set
-00014a70: 7570 2e70 7920 746f 206d 616b 6520 6773  up.py to make gs
-00014a80: 7574 696c 2069 6e73 7461 6c6c 6162 6c65  util installable
-00014a90: 2076 6961 2050 7950 692e 0a2d 2041 6464   via PyPi..- Add
-00014aa0: 6564 2077 6172 6e69 6e67 2074 6f20 6773  ed warning to gs
-00014ab0: 7574 696c 2062 7569 6c74 2d69 6e20 6865  util built-in he
-00014ac0: 6c70 2074 6861 7420 6465 6c65 7465 206f  lp that delete o
-00014ad0: 7065 7261 7469 6f6e 7320 6361 6e6e 6f74  perations cannot
-00014ae0: 2062 650a 2020 756e 646f 6e65 2e0a 2d20   be.  undone..- 
-00014af0: 5265 706c 6163 6564 2067 7375 7469 6c27  Replaced gsutil'
-00014b00: 7320 4f41 7574 6832 2063 6c69 656e 7420  s OAuth2 client 
-00014b10: 696d 706c 656d 656e 7461 7469 6f6e 2077  implementation w
-00014b20: 6974 6820 6f61 7574 6832 636c 6965 6e74  ith oauth2client
-00014b30: 2e0a 2d20 5570 6461 7465 7320 746f 2070  ..- Updates to p
-00014b40: 6572 6664 6961 672e 0a2d 2055 7064 6174  erfdiag..- Updat
-00014b50: 6564 2063 6f6e 6669 6720 6865 6c70 2061  ed config help a
-00014b60: 626f 7574 2063 7572 7265 6e74 6c79 2073  bout currently s
-00014b70: 7570 706f 7274 6564 2073 6574 7469 6e67  upported setting
-00014b80: 732e 0a2d 2046 6978 6573 2074 6f20 7365  s..- Fixes to se
-00014b90: 7475 702e 7079 2061 6e64 206d 6f64 6966  tup.py and modif
-00014ba0: 6965 6420 7665 7273 696f 6e20 636f 6d6d  ied version comm
-00014bb0: 616e 642e 0a2d 204d 6f76 6520 6773 6c69  and..- Move gsli
-00014bc0: 622f 636f 6d6d 616e 6473 2f63 7265 645f  b/commands/cred_
-00014bd0: 7479 7065 732e 7079 2074 6f20 6773 6c69  types.py to gsli
-00014be0: 622c 2073 6f20 6f6e 6c79 2043 6f6d 6d61  b, so only Comma
-00014bf0: 6e64 2073 7562 636c 6173 7365 7320 6c69  nd subclasses li
-00014c00: 7665 0a20 2069 6e20 6773 6c69 622f 636f  ve.  in gslib/co
-00014c10: 6d6d 616e 6473 2e0a 2d20 5570 6461 7465  mmands..- Update
-00014c20: 6420 6773 7574 696c 2073 6574 6d65 7461  d gsutil setmeta
-00014c30: 2068 656c 7020 6e6f 206c 6f6e 6765 7220   help no longer 
-00014c40: 746f 2077 6172 6e20 7468 6174 2073 6574  to warn that set
-00014c50: 6d65 7461 2077 6974 6820 7665 7273 696f  meta with versio
-00014c60: 6e69 6e67 0a20 2065 6e61 626c 6564 2063  ning.  enabled c
-00014c70: 7265 6174 6573 2061 206e 6577 206f 626a  reates a new obj
-00014c80: 6563 742e 0a0a 0a52 656c 6561 7365 2033  ect....Release 3
-00014c90: 2e32 3620 2872 656c 6561 7365 2d64 6174  .26 (release-dat
-00014ca0: 653a 2032 3031 332d 3033 2d32 3529 0a3d  e: 2013-03-25).=
-00014cb0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00014cc0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00014cd0: 3d3d 3d3d 3d3d 0a0a 4e65 7720 4665 6174  ======..New Feat
-00014ce0: 7572 6573 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d  ures.-----------
-00014cf0: 2d0a 0a2d 2041 6464 6564 2073 7570 706f  -..- Added suppo
-00014d00: 7274 2066 6f72 206f 626a 6563 7420 636f  rt for object co
-00014d10: 6d70 6f73 6974 696f 6e2e 0a2d 2041 6464  mposition..- Add
-00014d20: 6564 2073 7570 706f 7274 2066 6f72 2065  ed support for e
-00014d30: 7874 6572 6e61 6c20 7365 7276 6963 6520  xternal service 
-00014d40: 6163 636f 756e 7473 2e0a 2d20 4368 616e  accounts..- Chan
-00014d50: 6765 6420 6773 7574 696c 2074 6f20 6368  ged gsutil to ch
-00014d60: 6563 6b20 666f 7220 6176 6169 6c61 626c  eck for availabl
-00014d70: 6520 7570 6461 7465 7320 7065 7269 6f64  e updates period
-00014d80: 6963 616c 6c79 2028 6f6e 6c79 2077 6869  ically (only whi
-00014d90: 6c65 0a20 2073 7464 696e 2c20 7374 6465  le.  stdin, stde
-00014da0: 7272 2c20 7374 646f 7574 2061 7265 2063  rr, stdout are c
-00014db0: 6f6e 6e65 6374 6564 2074 6f20 6120 5454  onnected to a TT
-00014dc0: 592c 2073 6f20 6173 206e 6f74 2074 6f20  Y, so as not to 
-00014dd0: 696e 7465 7266 6572 6520 7769 7468 0a20  interfere with. 
-00014de0: 2063 726f 6e20 6a6f 6273 292e 0a2d 2041   cron jobs)..- A
-00014df0: 6464 6564 2063 6864 6566 6163 6c20 636f  dded chdefacl co
-00014e00: 6d6d 616e 642e 0a2d 204d 6164 6520 6773  mmand..- Made gs
-00014e10: 7574 696c 2062 7569 6c74 2d69 6e20 6865  util built-in he
-00014e20: 6c70 2061 7661 696c 6162 6c65 2075 6e64  lp available und
-00014e30: 6572 0a20 2068 7474 7073 3a2f 2f64 6576  er.  https://dev
-00014e40: 656c 6f70 6572 732e 676f 6f67 6c65 2e63  elopers.google.c
-00014e50: 6f6d 2f73 746f 7261 6765 2f64 6f63 732f  om/storage/docs/
-00014e60: 6773 7574 696c 0a2d 2041 6464 2061 2063  gsutil.- Add a c
-00014e70: 6f6d 6d61 6e64 2073 7567 6765 7374 696f  ommand suggestio
-00014e80: 6e20 7768 656e 2074 6865 2063 6f6d 6d61  n when the comma
-00014e90: 6e64 206e 616d 6520 6973 206e 6f74 2066  nd name is not f
-00014ea0: 6f75 6e64 2e0a 2d20 4164 6465 6420 6279  ound..- Added by
-00014eb0: 7465 2073 7566 6669 7820 7061 7273 696e  te suffix parsin
-00014ec0: 6720 746f 2074 6865 202d 7320 7061 7261  g to the -s para
-00014ed0: 6d65 7465 7220 6f66 2070 6572 6664 6961  meter of perfdia
-00014ee0: 672e 0a2d 2041 6464 6564 202d 2d68 656c  g..- Added --hel
-00014ef0: 7020 7375 7070 6f72 7420 746f 2073 7562  p support to sub
-00014f00: 636f 6d6d 616e 6473 2e20 4669 7865 7320  commands. Fixes 
-00014f10: 2339 362e 0a2d 2055 7064 6174 6564 2070  #96..- Updated p
-00014f20: 6572 6664 6961 6720 636f 6d6d 616e 6420  erfdiag command 
-00014f30: 746f 2074 7261 636b 2061 7661 696c 6162  to track availab
-00014f40: 696c 6974 7920 616e 6420 7265 636f 7264  ility and record
-00014f50: 2054 4350 2073 6574 7469 6e67 732e 0a2d   TCP settings..-
-00014f60: 2041 6464 6564 206d 6574 6164 6174 6120   Added metadata 
-00014f70: 7061 7261 6d65 7465 7220 746f 2070 6572  parameter to per
-00014f80: 6664 6961 6720 636f 6d6d 616e 642e 0a2d  fdiag command..-
-00014f90: 2041 6464 6564 2073 7570 706f 7274 2066   Added support f
-00014fa0: 6f72 2073 7065 6369 6679 696e 6720 6279  or specifying by
-00014fb0: 7465 2072 616e 6765 2074 6f20 6361 7420  te range to cat 
-00014fc0: 636f 6d6d 616e 642e 0a2d 204f 7574 7075  command..- Outpu
-00014fd0: 7420 6d6f 7265 2062 7563 6b65 7420 6d65  t more bucket me
-00014fe0: 7461 6461 7461 206f 6e20 6c73 202d 4c62  tadata on ls -Lb
-00014ff0: 2e0a 2d20 496d 706c 656d 656e 7465 6420  ..- Implemented 
-00015000: 6773 7574 696c 202d 7120 2867 6c6f 6261  gsutil -q (globa
-00015010: 6c20 7175 6965 7429 206f 7074 696f 6e20  l quiet) option 
-00015020: 2866 6978 6573 2069 7373 7565 2023 3133  (fixes issue #13
-00015030: 3029 2e20 416c 736f 2063 6861 6e67 6564  0). Also changed
-00015040: 0a20 2067 7375 7469 6c20 746f 206f 7574  .  gsutil to out
-00015050: 7075 7420 616c 6c20 7072 6f67 7265 7373  put all progress
-00015060: 2069 6e64 6963 6174 6f72 7320 7573 696e   indicators usin
-00015070: 6720 6c6f 6767 696e 6720 6c65 7665 6c73  g logging levels
-00015080: 2e20 416c 736f 2063 6861 6e67 6564 0a20  . Also changed. 
-00015090: 2068 656c 7020 636f 6d6d 616e 6420 6e6f   help command no
-000150a0: 7420 746f 206f 7574 7075 7420 626f 6c64  t to output bold
-000150b0: 2065 7363 6170 6520 7365 7175 656e 6365   escape sequence
-000150c0: 7320 616e 6420 6e6f 7420 7573 6520 5041  s and not use PA
-000150d0: 4745 5220 6966 2073 7464 6f75 740a 2020  GER if stdout.  
-000150e0: 6973 206e 6f74 2061 2074 7479 2c20 7768  is not a tty, wh
-000150f0: 6963 6820 616c 736f 2066 6978 6573 2062  ich also fixes b
-00015100: 7567 2074 6861 7420 6361 7573 6564 2067  ug that caused g
-00015110: 7375 7469 6c20 6865 6c70 2074 6573 7420  sutil help test 
-00015120: 746f 2066 6169 6c2e 0a2d 2050 6c75 6d62  to fail..- Plumb
-00015130: 6564 2068 7474 7073 5f76 616c 6964 6174  ed https_validat
-00015140: 655f 6365 7274 6966 6963 6174 6573 2074  e_certificates t
-00015150: 6872 6f75 6768 2074 6f20 4f41 7574 6832  hrough to OAuth2
-00015160: 2070 6c75 6769 6e20 6861 6e64 6c65 722c   plugin handler,
-00015170: 0a20 2061 6c6c 6f77 696e 6720 636f 6e74  .  allowing cont
-00015180: 726f 6c20 6f76 6572 2063 6572 7420 7661  rol over cert va
-00015190: 6c69 6461 7469 6f6e 2066 6f72 204f 4175  lidation for OAu
-000151a0: 7468 3220 7265 7175 6573 7473 0a2d 2046  th2 requests.- F
-000151b0: 6978 6564 2049 534f 2036 3339 2e31 2072  ixed ISO 639.1 r
-000151c0: 6566 2069 6e20 636f 6e66 6967 2063 6f6d  ef in config com
-000151d0: 6d61 6e64 2068 656c 7020 7465 7874 0a0a  mand help text..
-000151e0: 4275 6720 4669 7865 730a 2d2d 2d2d 2d2d  Bug Fixes.------
-000151f0: 2d2d 2d0a 0a2d 2046 6978 6564 2062 7567  ---..- Fixed bug
-00015200: 2077 6865 7265 2067 7375 7469 6c20 6370   where gsutil cp
-00015210: 202d 4420 6469 646e 2774 2070 7265 7365   -D didn't prese
-00015220: 7276 6520 6d65 7461 6461 7461 0a2d 2046  rve metadata.- F
-00015230: 6978 6564 2070 726f 626c 656d 2077 6865  ixed problem whe
-00015240: 7265 2067 7375 7469 6c20 2d6d 2069 7320  re gsutil -m is 
-00015250: 6861 7264 2074 6f20 696e 7465 7272 7570  hard to interrup
-00015260: 7420 2870 6172 7469 616c 2066 6978 2066  t (partial fix f
-00015270: 6f72 2069 7373 7565 0a20 2023 3939 202d  or issue.  #99 -
-00015280: 206f 6e6c 7920 666f 7220 4c69 6e75 782f   only for Linux/
-00015290: 4d61 634f 533b 2070 726f 626c 656d 2073  MacOS; problem s
-000152a0: 7469 6c6c 2065 7869 7374 7320 666f 7220  till exists for 
-000152b0: 5769 6e64 6f77 7329 2e0a 2d20 4669 7865  Windows)..- Fixe
-000152c0: 6420 6272 6f6b 656e 2072 6566 6572 656e  d broken referen
-000152d0: 6365 2074 6f20 626f 746f 5f6c 6962 5f64  ce to boto_lib_d
-000152e0: 6972 2069 6e20 7570 6461 7465 2063 6f6d  ir in update com
-000152f0: 6d61 6e64 2e0a 2d20 4d61 6465 2063 6861  mand..- Made cha
-00015300: 6e67 696e 6720 4143 4c20 6e6f 7420 7265  nging ACL not re
-00015310: 7472 7920 6f6e 2034 3030 2065 7272 6f72  try on 400 error
-00015320: 2e0a 2d20 4669 7865 6420 6e61 6d65 2065  ..- Fixed name e
-00015330: 7870 616e 7369 6f6e 2062 7567 2066 6f72  xpansion bug for
-00015340: 2063 6173 6520 7768 6572 6520 7572 695f   case where uri_
-00015350: 7374 7273 2069 7320 6974 7365 6c66 2061  strs is itself a
-00015360: 6e20 6974 6572 6174 6f72 0a20 2028 6973  n iterator.  (is
-00015370: 7375 6520 2331 3331 293b 2069 6d70 6c65  sue #131); imple
-00015380: 6d65 6e74 6564 2061 6464 6974 696f 6e61  mented additiona
-00015390: 6c20 6e61 6d69 6e67 2075 6e69 7420 7465  l naming unit te
-000153a0: 7374 2066 6f72 2074 6869 7320 6361 7365  st for this case
-000153b0: 2e0a 2d20 4669 7865 6420 666c 616b 7920  ..- Fixed flaky 
-000153c0: 6773 7574 696c 2072 6d20 7465 7374 0a2d  gsutil rm test.-
-000153d0: 2046 6978 6564 2061 2062 7567 2069 6e20   Fixed a bug in 
-000153e0: 7468 6520 6368 6163 6c20 636f 6d6d 616e  the chacl comman
-000153f0: 6420 7468 6174 206d 6164 6520 6974 2073  d that made it s
-00015400: 6f20 796f 7520 636f 756c 646e 2774 2064  o you couldn't d
-00015410: 656c 6574 6520 7468 650a 2020 416c 6c41  elete the.  AllA
-00015420: 7574 6865 6e74 6963 6174 6564 5573 6572  uthenticatedUser
-00015430: 7320 6772 6f75 7020 6672 6f6d 2061 6e20  s group from an 
-00015440: 4143 4c2e 0a0a 4f74 6865 7220 4368 616e  ACL...Other Chan
-00015450: 6765 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ges.------------
-00015460: 2d0a 0a2d 2052 6566 6163 746f 7265 6420  -..- Refactored 
-00015470: 6773 7574 696c 206d 6169 6e20 6675 6e63  gsutil main func
-00015480: 7469 6f6e 2069 6e74 6f20 6773 6c69 622c  tion into gslib,
-00015490: 2077 6974 6820 6773 7574 696c 2062 6569   with gsutil bei
-000154a0: 6e67 2061 2074 6869 6e0a 2020 7772 6170  ng a thin.  wrap
-000154b0: 7065 722e 0a2d 2041 6464 6564 2061 2074  per..- Added a t
-000154c0: 6573 7420 666f 7220 7468 6520 7570 6461  est for the upda
-000154d0: 7465 2063 6f6d 6d61 6e64 2e0a 2d20 5265  te command..- Re
-000154e0: 6e61 6d65 6420 6773 7574 696c 206d 6574  named gsutil met
-000154f0: 615f 6765 6e65 7261 7469 6f6e 2070 6172  a_generation par
-00015500: 616d 7320 746f 206d 6574 6167 656e 6572  ams to metagener
-00015510: 6174 696f 6e2c 2066 6f72 2063 6f6e 7369  ation, for consi
-00015520: 7374 656e 6379 0a20 2077 6974 6820 4743  stency.  with GC
-00015530: 5320 646f 6373 2e0a 2d20 5265 6d6f 7665  S docs..- Remove
-00015540: 6420 2e70 7963 2066 696c 6573 2066 726f  d .pyc files fro
-00015550: 6d20 7461 7262 616c 6c2f 7a69 7066 696c  m tarball/zipfil
-00015560: 652e 0a2d 2041 6464 6564 206e 6577 2072  e..- Added new r
-00015570: 6f6f 7420 6365 7274 7320 746f 2063 6163  oot certs to cac
-00015580: 6572 7473 2e74 7874 2c20 746f 2070 726f  erts.txt, to pro
-00015590: 7669 6465 2061 6464 6974 696f 6e61 6c20  vide additional 
-000155a0: 666c 6578 6962 696c 6974 790a 2020 696e  flexibility.  in
-000155b0: 2074 6865 2066 7574 7572 652e 0a0a 0a52   the future....R
-000155c0: 656c 6561 7365 2033 2e32 3520 2872 656c  elease 3.25 (rel
-000155d0: 6561 7365 2d64 6174 653a 2032 3031 332d  ease-date: 2013-
-000155e0: 3032 2d32 3129 0a3d 3d3d 3d3d 3d3d 3d3d  02-21).=========
-000155f0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00015600: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 0a0a  ==============..
-00015610: 4275 6720 4669 7865 730a 2d2d 2d2d 2d2d  Bug Fixes.------
-00015620: 2d2d 2d0a 0a2d 2046 6978 6564 2074 776f  ---..- Fixed two
-00015630: 2076 6572 7369 6f6e 2d73 7065 6369 6669   version-specifi
-00015640: 6320 5552 4920 6275 6773 3a0a 2020 2020  c URI bugs:.    
-00015650: 312e 2067 7375 7469 6c20 6370 202d 7220  1. gsutil cp -r 
-00015660: 6773 3a2f 2f62 7563 6b65 7431 2067 733a  gs://bucket1 gs:
-00015670: 2f2f 6275 636b 6574 3220 776f 756c 6420  //bucket2 would 
-00015680: 6372 6561 7465 206f 626a 6563 7473 2069  create objects i
-00015690: 6e20 6275 636b 6574 320a 2020 2020 2020  n bucket2.      
-000156a0: 2077 6974 6820 6e61 6d65 7320 636f 7272   with names corr
-000156b0: 6573 706f 6e64 696e 6720 746f 2076 6572  esponding to ver
-000156c0: 7369 6f6e 2d73 7065 6369 6669 6320 5552  sion-specific UR
-000156d0: 4973 2069 6e20 6275 636b 6574 3120 2865  Is in bucket1 (e
-000156e0: 2e67 2e2c 0a20 2020 2020 2020 6773 3a2f  .g.,.       gs:/
-000156f0: 2f62 7563 6b65 7432 2f6f 626a 2331 3336  /bucket2/obj#136
-00015700: 3134 3137 3536 3834 3832 3030 302c 2077  1417568482000, w
-00015710: 6865 7265 2074 6865 2022 2331 3336 3134  here the "#13614
-00015720: 3137 3536 3834 3832 3030 3022 2070 6172  17568482000" par
-00015730: 7420 7761 730a 2020 2020 2020 2070 6172  t was.       par
-00015740: 7420 6f66 2074 6865 206f 626a 6563 7420  t of the object 
-00015750: 6e61 6d65 2c20 6e6f 7420 7468 6520 6f62  name, not the ob
-00015760: 6a65 6374 2773 2067 656e 6572 6174 696f  ject's generatio
-00015770: 6e29 2e0a 0a20 2020 2020 2020 5468 6973  n)...       This
-00015780: 2070 726f 626c 656d 2073 696d 696c 6172   problem similar
-00015790: 6c79 2063 6175 7365 6420 6773 7574 696c  ly caused gsutil
-000157a0: 2063 7020 2d72 2067 733a 2f2f 6275 636b   cp -r gs://buck
-000157b0: 6574 3120 2e2f 6469 7220 746f 2063 7265  et1 ./dir to cre
-000157c0: 6174 650a 2020 2020 2020 2066 696c 6573  ate.       files
-000157d0: 206e 616d 6573 2063 6f72 7265 7370 6f6e   names correspon
-000157e0: 6469 6e67 2074 6f20 7665 7273 696f 6e2d  ding to version-
-000157f0: 7370 6563 6966 6963 2055 5249 7320 696e  specific URIs in
-00015800: 2062 7563 6b65 7431 2e0a 2020 2020 322e   bucket1..    2.
-00015810: 2067 7375 7469 6c20 726d 202d 6120 6773   gsutil rm -a gs
-00015820: 3a2f 2f62 7563 6b65 742f 6f62 6a20 776f  ://bucket/obj wo
-00015830: 756c 6420 6174 7465 6d70 7420 746f 2064  uld attempt to d
-00015840: 656c 6574 6520 7468 6520 7361 6d65 206f  elete the same o
-00015850: 626a 6563 740a 2020 2020 2020 2074 7769  bject.       twi
-00015860: 6365 2c20 6765 7474 696e 6720 6120 4e6f  ce, getting a No
-00015870: 5375 6368 4b65 7920 6572 726f 7220 6f6e  SuchKey error on
-00015880: 2074 6865 2073 6563 6f6e 6420 6174 7465   the second atte
-00015890: 6d70 742e 0a0a 0a52 656c 6561 7365 2033  mpt....Release 3
-000158a0: 2e32 3420 2872 656c 6561 7365 2d64 6174  .24 (release-dat
-000158b0: 653a 2032 3031 332d 3032 2d31 3929 0a3d  e: 2013-02-19).=
+00014070: 3d3d 3d3d 3d3d 3d3d 3d3d 0a0a 4275 6720  ==========..Bug 
+00014080: 4669 7865 730a 2d2d 2d2d 2d2d 2d2d 2d0a  Fixes.---------.
+00014090: 0a2d 2046 6978 6564 2069 6e63 6f72 7265  .- Fixed incorre
+000140a0: 6374 2070 6163 6b61 6765 2069 6e73 7461  ct package insta
+000140b0: 6c6c 6174 696f 6e20 6465 7465 6374 696f  llation detectio
+000140c0: 6e20 7468 6174 2072 6573 756c 7465 6420  n that resulted 
+000140d0: 696e 206e 6f74 2062 6569 6e67 0a20 2061  in not being.  a
+000140e0: 626c 6520 746f 2072 756e 2074 6865 2075  ble to run the u
+000140f0: 7064 6174 6520 636f 6d6d 616e 6420 7768  pdate command wh
+00014100: 696c 6520 7275 6e6e 696e 6720 6773 7574  ile running gsut
+00014110: 696c 2066 726f 6d20 6120 7379 6d6c 696e  il from a symlin
+00014120: 6b2e 0a0a 4f74 6865 7220 4368 616e 6765  k...Other Change
+00014130: 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a  s.-------------.
+00014140: 0a2d 2041 6464 6564 2061 2074 6573 7420  .- Added a test 
+00014150: 666f 7220 6465 6275 6720 6d6f 6465 2028  for debug mode (
+00014160: 6773 7574 696c 202d 4429 206f 7574 7075  gsutil -D) outpu
+00014170: 742e 0a2d 204c 6973 7420 6e75 6d62 6572  t..- List number
+00014180: 696e 6720 616e 6420 7469 746c 6520 6361  ing and title ca
+00014190: 7365 2066 6978 6573 2069 6e20 6164 6469  se fixes in addi
+000141a0: 7469 6f6e 616c 2068 656c 7020 7061 6765  tional help page
+000141b0: 732e 0a2d 2052 656d 6f76 6564 2064 6174  s..- Removed dat
+000141c0: 6575 7469 6c20 6d6f 6475 6c65 2064 6570  eutil module dep
+000141d0: 656e 6465 6e63 7920 6672 6f6d 2063 7020  endency from cp 
+000141e0: 636f 6d6d 616e 6420 7465 7374 2e0a 2d20  command test..- 
+000141f0: 5570 6461 7465 6420 646f 6375 6d65 6e74  Updated document
+00014200: 6174 696f 6e20 746f 2063 6c61 7269 6679  ation to clarify
+00014210: 2074 6861 7420 7075 626c 6963 2d72 6561   that public-rea
+00014220: 6420 6f62 6a65 6374 7320 6172 6520 6361  d objects are ca
+00014230: 6368 6564 2066 6f72 2031 0a20 2068 6f75  ched for 1.  hou
+00014240: 7220 6279 2064 6566 6175 6c74 2e0a 2d20  r by default..- 
+00014250: 4164 6465 6420 6120 6669 6c74 6572 2074  Added a filter t
+00014260: 6f20 7375 7070 7265 7373 2022 6d6f 6475  o suppress "modu
+00014270: 6c65 2077 6173 2061 6c72 6561 6479 2069  le was already i
+00014280: 6d70 6f72 7465 6422 2077 6172 6e69 6e67  mported" warning
+00014290: 7320 7468 6174 2077 6572 650a 2020 736f  s that were.  so
+000142a0: 6d65 7469 6d65 7320 7072 696e 7465 6420  metimes printed 
+000142b0: 7768 696c 6520 7275 6e6e 696e 6720 6773  while running gs
+000142c0: 7574 696c 206f 6e20 476f 6f67 6c65 2043  util on Google C
+000142d0: 6f6d 7075 7465 2045 6e67 696e 6520 696e  ompute Engine in
+000142e0: 7374 616e 6365 732e 0a0a 0a52 656c 6561  stances....Relea
+000142f0: 7365 2033 2e32 3820 2872 656c 6561 7365  se 3.28 (release
+00014300: 2d64 6174 653a 2032 3031 332d 3035 2d30  -date: 2013-05-0
+00014310: 3729 0a3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  7).=============
+00014320: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00014330: 3d3d 3d3d 3d3d 3d3d 3d3d 0a0a 4e65 7720  ==========..New 
+00014340: 4665 6174 7572 6573 0a2d 2d2d 2d2d 2d2d  Features.-------
+00014350: 2d2d 2d2d 2d0a 0a2d 2041 6464 6564 2073  -----..- Added s
+00014360: 7570 706f 7274 2066 6f72 206e 6577 204f  upport for new O
+00014370: 626a 6563 7420 4368 616e 6765 204e 6f74  bject Change Not
+00014380: 6966 6963 6174 696f 6e73 2066 6561 7475  ifications featu
+00014390: 7265 2e0a 0a42 7567 2046 6978 6573 0a2d  re...Bug Fixes.-
+000143a0: 2d2d 2d2d 2d2d 2d2d 0a0a 2d20 4669 7865  --------..- Fixe
+000143b0: 6420 7072 6f62 6c65 6d20 7768 6572 6520  d problem where 
+000143c0: 6773 7574 696c 2075 7064 6174 6520 636f  gsutil update co
+000143d0: 6d6d 616e 6420 6469 646e e280 9974 2074  mmand didn...t t
+000143e0: 616b 6520 6465 6661 756c 7420 6163 7469  ake default acti
+000143f0: 6f6e 2e0a 2d20 4669 7865 6420 6120 7072  on..- Fixed a pr
+00014400: 6f62 6c65 6d20 7769 7468 2074 6865 2075  oblem with the u
+00014410: 7064 6174 6520 636f 6d6d 616e 6420 736f  pdate command so
+00014420: 6d65 7469 6d65 7320 7472 6967 6765 7269  metimes triggeri
+00014430: 6e67 2061 6e20 6164 6469 7469 6f6e 616c  ng an additional
+00014440: 0a20 2075 7064 6174 6520 636f 6d6d 616e  .  update comman
+00014450: 642e 0a0a 4f74 6865 7220 4368 616e 6765  d...Other Change
+00014460: 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a  s.-------------.
+00014470: 0a2d 2041 6464 2070 6163 6b61 6769 6e67  .- Add packaging
+00014480: 2069 6e66 6f72 6d61 7469 6f6e 2074 6f20   information to 
+00014490: 7665 7273 696f 6e20 6f75 7470 7574 2e0a  version output..
+000144a0: 2d20 5265 6d6f 7665 6420 6661 6e63 795f  - Removed fancy_
+000144b0: 7572 6c6c 6962 2c20 7369 6e63 6520 6974  urllib, since it
+000144c0: 2069 7320 6e6f 206c 6f6e 6765 7220 7573   is no longer us
+000144d0: 6564 2e0a 2d20 4368 616e 6765 6420 6e75  ed..- Changed nu
+000144e0: 6d5f 7265 7472 6965 7320 6465 6661 756c  m_retries defaul
+000144f0: 7420 666f 7220 7265 7375 6d61 626c 6520  t for resumable 
+00014500: 646f 776e 6c6f 6164 7320 746f 2036 2e0a  downloads to 6..
+00014510: 2d20 446f 6ee2 8099 7420 6368 6563 6b20  - Don...t check 
+00014520: 666f 7220 6e65 7765 7220 736f 6674 7761  for newer softwa
+00014530: 7265 2076 6572 7369 6f6e 2069 6620 6773  re version if gs
+00014540: 5f68 6f73 7420 6973 2073 7065 6369 6669  _host is specifi
+00014550: 6564 2069 6e20 626f 746f 0a20 2063 6f6e  ed in boto.  con
+00014560: 6669 6720 6669 6c65 2e0a 2d20 4d6f 6469  fig file..- Modi
+00014570: 6669 6564 206f 6175 7468 3263 6c69 656e  fied oauth2clien
+00014580: 7420 6c6f 6767 696e 6720 6265 6861 7669  t logging behavi
+00014590: 6f72 2074 6f20 6265 2063 6f6e 7369 7374  or to be consist
+000145a0: 656e 7420 7769 7468 2067 7375 7469 6c2e  ent with gsutil.
+000145b0: 0a2d 2041 6464 6564 2067 735f 706f 7274  .- Added gs_port
+000145c0: 2063 6f6e 6669 6775 7261 7469 6f6e 206f   configuration o
+000145d0: 7074 696f 6e2e 0a2d 2053 6b69 7020 7570  ption..- Skip up
+000145e0: 6461 7465 2074 6573 7473 2077 6865 6e20  date tests when 
+000145f0: 5353 4c20 6973 2064 6973 6162 6c65 642e  SSL is disabled.
+00014600: 0a0a 0a52 656c 6561 7365 2033 2e32 3720  ...Release 3.27 
+00014610: 2872 656c 6561 7365 2d64 6174 653a 2032  (release-date: 2
+00014620: 3031 332d 3034 2d32 3529 0a3d 3d3d 3d3d  013-04-25).=====
+00014630: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00014640: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00014650: 3d3d 0a0a 4e65 7720 4665 6174 7572 6573  ==..New Features
+00014660: 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 0a2d  .------------..-
+00014670: 2041 6464 6564 2061 2068 756d 616e 2072   Added a human r
+00014680: 6561 6461 626c 6520 6f70 7469 6f6e 2028  eadable option (
+00014690: 2d68 2920 746f 206c 7320 636f 6d6d 616e  -h) to ls comman
+000146a0: 642e 0a2d 2043 6861 6e67 6564 2057 696c  d..- Changed Wil
+000146b0: 6463 6172 6449 7465 7261 746f 7220 6e6f  dcardIterator no
+000146c0: 7420 746f 206d 6174 6572 6961 6c69 7a65  t to materialize
+000146d0: 206c 6973 7420 6f66 2061 6c6c 206d 6174   list of all mat
+000146e0: 6368 696e 6720 6669 6c65 7320 6672 6f6d  ching files from
+000146f0: 0a20 2064 6972 6563 746f 7279 206c 6973  .  directory lis
+00014700: 7469 6e67 2028 736f 2077 6f72 6b73 2066  ting (so works f
+00014710: 6173 7465 7220 7768 656e 2077 616c 6b69  aster when walki
+00014720: 6e67 206f 7665 7220 6c61 7267 6520 6469  ng over large di
+00014730: 7265 6374 6f72 6965 7329 0a2d 2041 6464  rectories).- Add
+00014740: 6564 202d 6620 6f70 7469 6f6e 2074 6f20  ed -f option to 
+00014750: 7365 7461 636c 2063 6f6d 6d61 6e64 2074  setacl command t
+00014760: 6f20 616c 6c6f 7720 636f 6d6d 616e 6420  o allow command 
+00014770: 746f 2063 6f6e 7469 6e75 6520 6166 7465  to continue afte
+00014780: 7220 6572 726f 7273 0a20 2065 6e63 6f75  r errors.  encou
+00014790: 6e74 6572 6564 2e0a 2d20 4164 6420 6d61  ntered..- Add ma
+000147a0: 6e69 6665 7374 206c 6f67 2073 7570 706f  nifest log suppo
+000147b0: 7274 2066 6f72 2074 6865 2063 7020 636f  rt for the cp co
+000147c0: 6d6d 616e 642e 0a2d 2041 6464 6564 206e  mmand..- Added n
+000147d0: 6576 6572 206f 7074 696f 6e20 666f 7220  ever option for 
+000147e0: 6368 6563 6b5f 6861 7368 6573 5f63 6f6e  check_hashes_con
+000147f0: 6669 673b 2066 6978 6564 2062 7567 2074  fig; fixed bug t
+00014800: 6861 7420 6173 7375 6d65 7320 616e 2045  hat assumes an E
+00014810: 5461 670a 2020 6973 2061 6c77 6179 7320  Tag.  is always 
+00014820: 7265 7475 726e 6564 2066 726f 6d20 7365  returned from se
+00014830: 7276 6572 2e0a 2d20 4d61 6465 2067 7375  rver..- Made gsu
+00014840: 7469 6c20 7072 6f76 6964 6520 6672 6965  til provide frie
+00014850: 6e64 6c69 6572 2065 7272 6f72 206d 6573  ndlier error mes
+00014860: 7361 6765 2069 6620 6174 7465 6d70 7469  sage if attempti
+00014870: 6e67 206e 6f6e 2d70 7562 6c69 6320 6461  ng non-public da
+00014880: 7461 0a20 2061 6363 6573 7320 7769 7468  ta.  access with
+00014890: 206d 6973 7369 6e67 2063 7265 6465 6e74   missing credent
+000148a0: 6961 6c73 2e0a 2d20 5365 7420 3730 2073  ials..- Set 70 s
+000148b0: 6563 6f6e 6420 6465 6661 756c 7420 736f  econd default so
+000148c0: 636b 6574 2074 696d 656f 7574 2066 6f72  cket timeout for
+000148d0: 2068 7474 706c 6962 2e0a 2d20 4164 6420   httplib..- Add 
+000148e0: 6162 696c 6974 7920 746f 2072 756e 2061  ability to run a
+000148f0: 2073 696e 676c 6520 7465 7374 2063 6c61   single test cla
+00014900: 7373 206f 7220 6675 6e63 7469 6f6e 2077  ss or function w
+00014910: 6974 6820 7468 6520 7465 7374 2063 6f6d  ith the test com
+00014920: 6d61 6e64 2e0a 0a42 7567 2046 6978 6573  mand...Bug Fixes
+00014930: 0a2d 2d2d 2d2d 2d2d 2d2d 0a0a 2d20 446f  .---------..- Do
+00014940: 6e27 7420 6368 6563 6b20 666f 7220 7570  n't check for up
+00014950: 6461 7465 7320 6966 2074 6865 2075 7365  dates if the use
+00014960: 7220 6861 7320 6e6f 2063 7265 6465 6e74  r has no credent
+00014970: 6961 6c73 2063 6f6e 6669 6775 7265 642e  ials configured.
+00014980: 2054 6869 730a 2020 6669 7865 7320 6120   This.  fixes a 
+00014990: 6275 6720 666f 7220 7573 6572 7320 7769  bug for users wi
+000149a0: 7468 6f75 7420 6372 6564 656e 7469 616c  thout credential
+000149b0: 7320 7472 7969 6e67 2074 6f20 7573 6520  s trying to use 
+000149c0: 6773 7574 696c 2066 6f72 2066 6972 7374  gsutil for first
+000149d0: 0a20 2074 696d 652e 0a2d 2046 6978 6564  .  time..- Fixed
+000149e0: 2063 6173 6520 7768 6572 6520 6368 6163   case where chac
+000149f0: 6c20 636f 6d6d 616e 6420 696e 636f 7272  l command incorr
+00014a00: 6563 746c 7920 7265 636f 676e 697a 6564  ectly recognized
+00014a10: 2061 6e20 656d 6169 6c20 6164 6472 6573   an email addres
+00014a20: 7320 6173 2061 0a20 2064 6f6d 6169 6e2e  s as a.  domain.
+00014a30: 0a2d 2046 6978 2073 6574 6d65 7461 2063  .- Fix setmeta c
+00014a40: 6f6d 6d61 6e64 2066 6f72 2053 3320 6f62  ommand for S3 ob
+00014a50: 6a65 6374 732e 0a2d 2046 6978 6564 2062  jects..- Fixed b
+00014a60: 7567 2077 6865 7265 2077 696c 6463 6172  ug where wildcar
+00014a70: 6465 6420 6465 7374 2055 5249 2061 7474  ded dest URI att
+00014a80: 656d 7074 6564 2073 7472 696e 6720 6f70  empted string op
+00014a90: 206f 6e20 4b65 7920 6f62 6a65 6374 2e0a   on Key object..
+00014aa0: 2d20 4669 7865 6420 6361 7365 2077 6865  - Fixed case whe
+00014ab0: 7265 2067 7375 7469 6c20 2d71 206f 7574  re gsutil -q out
+00014ac0: 7075 7474 6564 2070 726f 6772 6573 7320  putted progress 
+00014ad0: 6f75 7470 7574 2077 6865 6e20 646f 696e  output when doin
+00014ae0: 6720 6120 7374 7265 616d 696e 670a 2020  g a streaming.  
+00014af0: 7570 6c6f 6164 2e0a 2d20 4572 726f 7220  upload..- Error 
+00014b00: 6861 6e64 6c69 6e67 2066 6f72 206f 7574  handling for out
+00014b10: 206f 6620 7370 6163 6520 6475 7269 6e67   of space during
+00014b20: 2064 6f77 6e6c 6f61 6473 2e0a 2d20 496e   downloads..- In
+00014b30: 636c 7564 6520 4953 4f20 3836 3031 2d72  clude ISO 8601-r
+00014b40: 6571 7569 7265 6420 225a 2220 6174 2065  equired "Z" at e
+00014b50: 6e64 206f 6620 7469 6d65 7374 616d 7020  nd of timestamp 
+00014b60: 7374 7269 6e67 2066 6f72 2067 7375 7469  string for gsuti
+00014b70: 6c20 6c73 202d 6c2c 0a20 2074 6f20 6265  l ls -l,.  to be
+00014b80: 2073 7065 632d 636f 6d70 6c69 616e 742e   spec-compliant.
+00014b90: 0a2d 2052 656d 6f76 6564 2064 6570 7265  .- Removed depre
+00014ba0: 6361 7465 6420 7365 746d 6574 6120 7379  cated setmeta sy
+00014bb0: 6e74 6178 2061 6e64 2066 6978 6564 2075  ntax and fixed u
+00014bc0: 6e69 636f 6465 2069 7373 7565 732e 0a2d  nicode issues..-
+00014bd0: 2043 6861 6e67 6564 2075 7064 6174 6520   Changed update 
+00014be0: 636f 6d6d 616e 6420 6e6f 7420 746f 2073  command not to s
+00014bf0: 7567 6765 7374 2072 756e 6e69 6e67 2073  uggest running s
+00014c00: 7564 6f20 6966 2072 756e 6e69 6e67 2075  udo if running u
+00014c10: 6e64 6572 2043 7967 7769 6e2e 0a2d 2052  nder Cygwin..- R
+00014c20: 656d 6f76 6564 2072 6566 6572 656e 6365  emoved reference
+00014c30: 7320 746f 2064 6570 7265 6361 7465 6420  s to deprecated 
+00014c40: 6773 2d64 6973 6375 7373 696f 6e20 666f  gs-discussion fo
+00014c50: 7275 6d20 6672 6f6d 2067 7375 7469 6c20  rum from gsutil 
+00014c60: 6275 696c 742d 696e 0a20 2068 656c 702e  built-in.  help.
+00014c70: 0a2d 2041 6464 206c 6974 6572 616c 2071  .- Add literal q
+00014c80: 756f 7465 7320 6172 6f75 6e64 2043 4f52  uotes around COR
+00014c90: 5320 636f 6e66 6967 2065 7861 6d70 6c65  S config example
+00014ca0: 2055 524c 2069 6e20 6773 7574 696c 2073   URL in gsutil s
+00014cb0: 6574 636f 7273 2068 656c 7020 746f 0a20  etcors help to. 
+00014cc0: 2061 766f 6964 2068 6176 696e 6720 6578   avoid having ex
+00014cd0: 616d 706c 6520 5552 4c20 7475 726e 2069  ample URL turn i
+00014ce0: 6e74 6f20 616e 2048 5245 4620 696e 2061  nto an HREF in a
+00014cf0: 7574 6f2d 6765 6e65 7261 7465 6420 646f  uto-generated do
+00014d00: 632e 0a0a 4f74 6865 7220 4368 616e 6765  c...Other Change
+00014d10: 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a  s.-------------.
+00014d20: 0a2d 2041 6464 6564 2070 726f 7065 7220  .- Added proper 
+00014d30: 7365 7475 702e 7079 2074 6f20 6d61 6b65  setup.py to make
+00014d40: 2067 7375 7469 6c20 696e 7374 616c 6c61   gsutil installa
+00014d50: 626c 6520 7669 6120 5079 5069 2e0a 2d20  ble via PyPi..- 
+00014d60: 4164 6465 6420 7761 726e 696e 6720 746f  Added warning to
+00014d70: 2067 7375 7469 6c20 6275 696c 742d 696e   gsutil built-in
+00014d80: 2068 656c 7020 7468 6174 2064 656c 6574   help that delet
+00014d90: 6520 6f70 6572 6174 696f 6e73 2063 616e  e operations can
+00014da0: 6e6f 7420 6265 0a20 2075 6e64 6f6e 652e  not be.  undone.
+00014db0: 0a2d 2052 6570 6c61 6365 6420 6773 7574  .- Replaced gsut
+00014dc0: 696c 2773 204f 4175 7468 3220 636c 6965  il's OAuth2 clie
+00014dd0: 6e74 2069 6d70 6c65 6d65 6e74 6174 696f  nt implementatio
+00014de0: 6e20 7769 7468 206f 6175 7468 3263 6c69  n with oauth2cli
+00014df0: 656e 742e 0a2d 2055 7064 6174 6573 2074  ent..- Updates t
+00014e00: 6f20 7065 7266 6469 6167 2e0a 2d20 5570  o perfdiag..- Up
+00014e10: 6461 7465 6420 636f 6e66 6967 2068 656c  dated config hel
+00014e20: 7020 6162 6f75 7420 6375 7272 656e 746c  p about currentl
+00014e30: 7920 7375 7070 6f72 7465 6420 7365 7474  y supported sett
+00014e40: 696e 6773 2e0a 2d20 4669 7865 7320 746f  ings..- Fixes to
+00014e50: 2073 6574 7570 2e70 7920 616e 6420 6d6f   setup.py and mo
+00014e60: 6469 6669 6564 2076 6572 7369 6f6e 2063  dified version c
+00014e70: 6f6d 6d61 6e64 2e0a 2d20 4d6f 7665 2067  ommand..- Move g
+00014e80: 736c 6962 2f63 6f6d 6d61 6e64 732f 6372  slib/commands/cr
+00014e90: 6564 5f74 7970 6573 2e70 7920 746f 2067  ed_types.py to g
+00014ea0: 736c 6962 2c20 736f 206f 6e6c 7920 436f  slib, so only Co
+00014eb0: 6d6d 616e 6420 7375 6263 6c61 7373 6573  mmand subclasses
+00014ec0: 206c 6976 650a 2020 696e 2067 736c 6962   live.  in gslib
+00014ed0: 2f63 6f6d 6d61 6e64 732e 0a2d 2055 7064  /commands..- Upd
+00014ee0: 6174 6564 2067 7375 7469 6c20 7365 746d  ated gsutil setm
+00014ef0: 6574 6120 6865 6c70 206e 6f20 6c6f 6e67  eta help no long
+00014f00: 6572 2074 6f20 7761 726e 2074 6861 7420  er to warn that 
+00014f10: 7365 746d 6574 6120 7769 7468 2076 6572  setmeta with ver
+00014f20: 7369 6f6e 696e 670a 2020 656e 6162 6c65  sioning.  enable
+00014f30: 6420 6372 6561 7465 7320 6120 6e65 7720  d creates a new 
+00014f40: 6f62 6a65 6374 2e0a 0a0a 5265 6c65 6173  object....Releas
+00014f50: 6520 332e 3236 2028 7265 6c65 6173 652d  e 3.26 (release-
+00014f60: 6461 7465 3a20 3230 3133 2d30 332d 3235  date: 2013-03-25
+00014f70: 290a 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ).==============
+00014f80: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00014f90: 3d3d 3d3d 3d3d 3d3d 3d0a 0a4e 6577 2046  =========..New F
+00014fa0: 6561 7475 7265 730a 2d2d 2d2d 2d2d 2d2d  eatures.--------
+00014fb0: 2d2d 2d2d 0a0a 2d20 4164 6465 6420 7375  ----..- Added su
+00014fc0: 7070 6f72 7420 666f 7220 6f62 6a65 6374  pport for object
+00014fd0: 2063 6f6d 706f 7369 7469 6f6e 2e0a 2d20   composition..- 
+00014fe0: 4164 6465 6420 7375 7070 6f72 7420 666f  Added support fo
+00014ff0: 7220 6578 7465 726e 616c 2073 6572 7669  r external servi
+00015000: 6365 2061 6363 6f75 6e74 732e 0a2d 2043  ce accounts..- C
+00015010: 6861 6e67 6564 2067 7375 7469 6c20 746f  hanged gsutil to
+00015020: 2063 6865 636b 2066 6f72 2061 7661 696c   check for avail
+00015030: 6162 6c65 2075 7064 6174 6573 2070 6572  able updates per
+00015040: 696f 6469 6361 6c6c 7920 286f 6e6c 7920  iodically (only 
+00015050: 7768 696c 650a 2020 7374 6469 6e2c 2073  while.  stdin, s
+00015060: 7464 6572 722c 2073 7464 6f75 7420 6172  tderr, stdout ar
+00015070: 6520 636f 6e6e 6563 7465 6420 746f 2061  e connected to a
+00015080: 2054 5459 2c20 736f 2061 7320 6e6f 7420   TTY, so as not 
+00015090: 746f 2069 6e74 6572 6665 7265 2077 6974  to interfere wit
+000150a0: 680a 2020 6372 6f6e 206a 6f62 7329 2e0a  h.  cron jobs)..
+000150b0: 2d20 4164 6465 6420 6368 6465 6661 636c  - Added chdefacl
+000150c0: 2063 6f6d 6d61 6e64 2e0a 2d20 4d61 6465   command..- Made
+000150d0: 2067 7375 7469 6c20 6275 696c 742d 696e   gsutil built-in
+000150e0: 2068 656c 7020 6176 6169 6c61 626c 6520   help available 
+000150f0: 756e 6465 720a 2020 6874 7470 733a 2f2f  under.  https://
+00015100: 6465 7665 6c6f 7065 7273 2e67 6f6f 676c  developers.googl
+00015110: 652e 636f 6d2f 7374 6f72 6167 652f 646f  e.com/storage/do
+00015120: 6373 2f67 7375 7469 6c0a 2d20 4164 6420  cs/gsutil.- Add 
+00015130: 6120 636f 6d6d 616e 6420 7375 6767 6573  a command sugges
+00015140: 7469 6f6e 2077 6865 6e20 7468 6520 636f  tion when the co
+00015150: 6d6d 616e 6420 6e61 6d65 2069 7320 6e6f  mmand name is no
+00015160: 7420 666f 756e 642e 0a2d 2041 6464 6564  t found..- Added
+00015170: 2062 7974 6520 7375 6666 6978 2070 6172   byte suffix par
+00015180: 7369 6e67 2074 6f20 7468 6520 2d73 2070  sing to the -s p
+00015190: 6172 616d 6574 6572 206f 6620 7065 7266  arameter of perf
+000151a0: 6469 6167 2e0a 2d20 4164 6465 6420 2d2d  diag..- Added --
+000151b0: 6865 6c70 2073 7570 706f 7274 2074 6f20  help support to 
+000151c0: 7375 6263 6f6d 6d61 6e64 732e 2046 6978  subcommands. Fix
+000151d0: 6573 2023 3936 2e0a 2d20 5570 6461 7465  es #96..- Update
+000151e0: 6420 7065 7266 6469 6167 2063 6f6d 6d61  d perfdiag comma
+000151f0: 6e64 2074 6f20 7472 6163 6b20 6176 6169  nd to track avai
+00015200: 6c61 6269 6c69 7479 2061 6e64 2072 6563  lability and rec
+00015210: 6f72 6420 5443 5020 7365 7474 696e 6773  ord TCP settings
+00015220: 2e0a 2d20 4164 6465 6420 6d65 7461 6461  ..- Added metada
+00015230: 7461 2070 6172 616d 6574 6572 2074 6f20  ta parameter to 
+00015240: 7065 7266 6469 6167 2063 6f6d 6d61 6e64  perfdiag command
+00015250: 2e0a 2d20 4164 6465 6420 7375 7070 6f72  ..- Added suppor
+00015260: 7420 666f 7220 7370 6563 6966 7969 6e67  t for specifying
+00015270: 2062 7974 6520 7261 6e67 6520 746f 2063   byte range to c
+00015280: 6174 2063 6f6d 6d61 6e64 2e0a 2d20 4f75  at command..- Ou
+00015290: 7470 7574 206d 6f72 6520 6275 636b 6574  tput more bucket
+000152a0: 206d 6574 6164 6174 6120 6f6e 206c 7320   metadata on ls 
+000152b0: 2d4c 622e 0a2d 2049 6d70 6c65 6d65 6e74  -Lb..- Implement
+000152c0: 6564 2067 7375 7469 6c20 2d71 2028 676c  ed gsutil -q (gl
+000152d0: 6f62 616c 2071 7569 6574 2920 6f70 7469  obal quiet) opti
+000152e0: 6f6e 2028 6669 7865 7320 6973 7375 6520  on (fixes issue 
+000152f0: 2331 3330 292e 2041 6c73 6f20 6368 616e  #130). Also chan
+00015300: 6765 640a 2020 6773 7574 696c 2074 6f20  ged.  gsutil to 
+00015310: 6f75 7470 7574 2061 6c6c 2070 726f 6772  output all progr
+00015320: 6573 7320 696e 6469 6361 746f 7273 2075  ess indicators u
+00015330: 7369 6e67 206c 6f67 6769 6e67 206c 6576  sing logging lev
+00015340: 656c 732e 2041 6c73 6f20 6368 616e 6765  els. Also change
+00015350: 640a 2020 6865 6c70 2063 6f6d 6d61 6e64  d.  help command
+00015360: 206e 6f74 2074 6f20 6f75 7470 7574 2062   not to output b
+00015370: 6f6c 6420 6573 6361 7065 2073 6571 7565  old escape seque
+00015380: 6e63 6573 2061 6e64 206e 6f74 2075 7365  nces and not use
+00015390: 2050 4147 4552 2069 6620 7374 646f 7574   PAGER if stdout
+000153a0: 0a20 2069 7320 6e6f 7420 6120 7474 792c  .  is not a tty,
+000153b0: 2077 6869 6368 2061 6c73 6f20 6669 7865   which also fixe
+000153c0: 7320 6275 6720 7468 6174 2063 6175 7365  s bug that cause
+000153d0: 6420 6773 7574 696c 2068 656c 7020 7465  d gsutil help te
+000153e0: 7374 2074 6f20 6661 696c 2e0a 2d20 506c  st to fail..- Pl
+000153f0: 756d 6265 6420 6874 7470 735f 7661 6c69  umbed https_vali
+00015400: 6461 7465 5f63 6572 7469 6669 6361 7465  date_certificate
+00015410: 7320 7468 726f 7567 6820 746f 204f 4175  s through to OAu
+00015420: 7468 3220 706c 7567 696e 2068 616e 646c  th2 plugin handl
+00015430: 6572 2c0a 2020 616c 6c6f 7769 6e67 2063  er,.  allowing c
+00015440: 6f6e 7472 6f6c 206f 7665 7220 6365 7274  ontrol over cert
+00015450: 2076 616c 6964 6174 696f 6e20 666f 7220   validation for 
+00015460: 4f41 7574 6832 2072 6571 7565 7374 730a  OAuth2 requests.
+00015470: 2d20 4669 7865 6420 4953 4f20 3633 392e  - Fixed ISO 639.
+00015480: 3120 7265 6620 696e 2063 6f6e 6669 6720  1 ref in config 
+00015490: 636f 6d6d 616e 6420 6865 6c70 2074 6578  command help tex
+000154a0: 740a 0a42 7567 2046 6978 6573 0a2d 2d2d  t..Bug Fixes.---
+000154b0: 2d2d 2d2d 2d2d 0a0a 2d20 4669 7865 6420  ------..- Fixed 
+000154c0: 6275 6720 7768 6572 6520 6773 7574 696c  bug where gsutil
+000154d0: 2063 7020 2d44 2064 6964 6e27 7420 7072   cp -D didn't pr
+000154e0: 6573 6572 7665 206d 6574 6164 6174 610a  eserve metadata.
+000154f0: 2d20 4669 7865 6420 7072 6f62 6c65 6d20  - Fixed problem 
+00015500: 7768 6572 6520 6773 7574 696c 202d 6d20  where gsutil -m 
+00015510: 6973 2068 6172 6420 746f 2069 6e74 6572  is hard to inter
+00015520: 7275 7074 2028 7061 7274 6961 6c20 6669  rupt (partial fi
+00015530: 7820 666f 7220 6973 7375 650a 2020 2339  x for issue.  #9
+00015540: 3920 2d20 6f6e 6c79 2066 6f72 204c 696e  9 - only for Lin
+00015550: 7578 2f4d 6163 4f53 3b20 7072 6f62 6c65  ux/MacOS; proble
+00015560: 6d20 7374 696c 6c20 6578 6973 7473 2066  m still exists f
+00015570: 6f72 2057 696e 646f 7773 292e 0a2d 2046  or Windows)..- F
+00015580: 6978 6564 2062 726f 6b65 6e20 7265 6665  ixed broken refe
+00015590: 7265 6e63 6520 746f 2062 6f74 6f5f 6c69  rence to boto_li
+000155a0: 625f 6469 7220 696e 2075 7064 6174 6520  b_dir in update 
+000155b0: 636f 6d6d 616e 642e 0a2d 204d 6164 6520  command..- Made 
+000155c0: 6368 616e 6769 6e67 2041 434c 206e 6f74  changing ACL not
+000155d0: 2072 6574 7279 206f 6e20 3430 3020 6572   retry on 400 er
+000155e0: 726f 722e 0a2d 2046 6978 6564 206e 616d  ror..- Fixed nam
+000155f0: 6520 6578 7061 6e73 696f 6e20 6275 6720  e expansion bug 
+00015600: 666f 7220 6361 7365 2077 6865 7265 2075  for case where u
+00015610: 7269 5f73 7472 7320 6973 2069 7473 656c  ri_strs is itsel
+00015620: 6620 616e 2069 7465 7261 746f 720a 2020  f an iterator.  
+00015630: 2869 7373 7565 2023 3133 3129 3b20 696d  (issue #131); im
+00015640: 706c 656d 656e 7465 6420 6164 6469 7469  plemented additi
+00015650: 6f6e 616c 206e 616d 696e 6720 756e 6974  onal naming unit
+00015660: 2074 6573 7420 666f 7220 7468 6973 2063   test for this c
+00015670: 6173 652e 0a2d 2046 6978 6564 2066 6c61  ase..- Fixed fla
+00015680: 6b79 2067 7375 7469 6c20 726d 2074 6573  ky gsutil rm tes
+00015690: 740a 2d20 4669 7865 6420 6120 6275 6720  t.- Fixed a bug 
+000156a0: 696e 2074 6865 2063 6861 636c 2063 6f6d  in the chacl com
+000156b0: 6d61 6e64 2074 6861 7420 6d61 6465 2069  mand that made i
+000156c0: 7420 736f 2079 6f75 2063 6f75 6c64 6e27  t so you couldn'
+000156d0: 7420 6465 6c65 7465 2074 6865 0a20 2041  t delete the.  A
+000156e0: 6c6c 4175 7468 656e 7469 6361 7465 6455  llAuthenticatedU
+000156f0: 7365 7273 2067 726f 7570 2066 726f 6d20  sers group from 
+00015700: 616e 2041 434c 2e0a 0a4f 7468 6572 2043  an ACL...Other C
+00015710: 6861 6e67 6573 0a2d 2d2d 2d2d 2d2d 2d2d  hanges.---------
+00015720: 2d2d 2d2d 0a0a 2d20 5265 6661 6374 6f72  ----..- Refactor
+00015730: 6564 2067 7375 7469 6c20 6d61 696e 2066  ed gsutil main f
+00015740: 756e 6374 696f 6e20 696e 746f 2067 736c  unction into gsl
+00015750: 6962 2c20 7769 7468 2067 7375 7469 6c20  ib, with gsutil 
+00015760: 6265 696e 6720 6120 7468 696e 0a20 2077  being a thin.  w
+00015770: 7261 7070 6572 2e0a 2d20 4164 6465 6420  rapper..- Added 
+00015780: 6120 7465 7374 2066 6f72 2074 6865 2075  a test for the u
+00015790: 7064 6174 6520 636f 6d6d 616e 642e 0a2d  pdate command..-
+000157a0: 2052 656e 616d 6564 2067 7375 7469 6c20   Renamed gsutil 
+000157b0: 6d65 7461 5f67 656e 6572 6174 696f 6e20  meta_generation 
+000157c0: 7061 7261 6d73 2074 6f20 6d65 7461 6765  params to metage
+000157d0: 6e65 7261 7469 6f6e 2c20 666f 7220 636f  neration, for co
+000157e0: 6e73 6973 7465 6e63 790a 2020 7769 7468  nsistency.  with
+000157f0: 2047 4353 2064 6f63 732e 0a2d 2052 656d   GCS docs..- Rem
+00015800: 6f76 6564 202e 7079 6320 6669 6c65 7320  oved .pyc files 
+00015810: 6672 6f6d 2074 6172 6261 6c6c 2f7a 6970  from tarball/zip
+00015820: 6669 6c65 2e0a 2d20 4164 6465 6420 6e65  file..- Added ne
+00015830: 7720 726f 6f74 2063 6572 7473 2074 6f20  w root certs to 
+00015840: 6361 6365 7274 732e 7478 742c 2074 6f20  cacerts.txt, to 
+00015850: 7072 6f76 6964 6520 6164 6469 7469 6f6e  provide addition
+00015860: 616c 2066 6c65 7869 6269 6c69 7479 0a20  al flexibility. 
+00015870: 2069 6e20 7468 6520 6675 7475 7265 2e0a   in the future..
+00015880: 0a0a 5265 6c65 6173 6520 332e 3235 2028  ..Release 3.25 (
+00015890: 7265 6c65 6173 652d 6461 7465 3a20 3230  release-date: 20
+000158a0: 3133 2d30 322d 3231 290a 3d3d 3d3d 3d3d  13-02-21).======
+000158b0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
 000158c0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000158d0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000158e0: 3d3d 3d3d 3d3d 0a0a 4275 6720 4669 7865  ======..Bug Fixe
-000158f0: 730a 2d2d 2d2d 2d2d 2d2d 2d0a 0a2d 2046  s.---------..- F
-00015900: 6978 6564 2062 7567 2074 6861 7420 6361  ixed bug that ca
-00015910: 7573 6564 2061 7474 656d 7074 2074 6f20  used attempt to 
-00015920: 6475 7065 2d65 6e63 6f64 6520 6120 756e  dupe-encode a un
-00015930: 6963 6f64 6520 6669 6c65 6e61 6d65 2e0a  icode filename..
-00015940: 0a4f 7468 6572 2043 6861 6e67 6573 0a2d  .Other Changes.-
-00015950: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a0a 2d20  ------------..- 
-00015960: 5265 6661 6374 6f72 6564 2072 6574 7279  Refactored retry
-00015970: 206c 6f67 6963 2066 726f 6d20 7365 746d   logic from setm
-00015980: 6574 6120 616e 6420 6368 6163 6c20 746f  eta and chacl to
-00015990: 2075 7365 2040 5265 7472 7920 6465 636f   use @Retry deco
-000159a0: 7261 746f 722e 0a2d 204d 6f76 6564 2040  rator..- Moved @
-000159b0: 5265 7472 7920 6465 636f 7261 746f 7220  Retry decorator 
-000159c0: 746f 2074 6869 7264 5f70 6172 7479 2e0a  to third_party..
-000159d0: 2d20 4669 7865 6420 666c 616b 7920 7465  - Fixed flaky te
-000159e0: 7374 732e 0a0a 0a52 656c 6561 7365 2033  sts....Release 3
-000159f0: 2e32 3320 2872 656c 6561 7365 2d64 6174  .23 (release-dat
-00015a00: 653a 2032 3031 332d 3032 2d31 3629 0a3d  e: 2013-02-16).=
-00015a10: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00015a20: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00015a30: 3d3d 3d3d 3d3d 0a0a 4275 6720 4669 7865  ======..Bug Fixe
-00015a40: 730a 2d2d 2d2d 2d2d 2d2d 2d0a 0a2d 204d  s.---------..- M
-00015a50: 616b 6520 7665 7273 696f 6e2d 7370 6563  ake version-spec
-00015a60: 6966 6963 2055 5249 2070 6172 7369 6e67  ific URI parsing
-00015a70: 206d 6f72 6520 726f 6275 7374 2e20 5468   more robust. Th
-00015a80: 6973 2066 6978 6573 2061 2062 7567 2077  is fixes a bug w
-00015a90: 6865 7265 0a20 206c 6973 7469 6e67 2062  here.  listing b
-00015aa0: 7563 6b65 7473 2069 6e20 6365 7274 6169  uckets in certai
-00015ab0: 6e20 6361 7365 7320 776f 756c 6420 7265  n cases would re
-00015ac0: 7375 6c74 2069 6e20 7468 6520 6572 726f  sult in the erro
-00015ad0: 720a 2020 2742 7563 6b65 7453 746f 7261  r.  'BucketStora
-00015ae0: 6765 5572 6927 206f 626a 6563 7420 6861  geUri' object ha
-00015af0: 7320 6e6f 2061 7474 7269 6275 7465 2027  s no attribute '
-00015b00: 7665 7273 696f 6e5f 7370 6563 6966 6963  version_specific
-00015b10: 5f75 7269 270a 0a0a 5265 6c65 6173 6520  _uri'...Release 
-00015b20: 332e 3232 2028 7265 6c65 6173 652d 6461  3.22 (release-da
-00015b30: 7465 3a20 3230 3133 2d30 322d 3135 290a  te: 2013-02-15).
-00015b40: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00015b50: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00015b60: 3d3d 3d3d 3d3d 3d0a 0a4e 6577 2046 6561  =======..New Fea
-00015b70: 7475 7265 730a 2d2d 2d2d 2d2d 2d2d 2d2d  tures.----------
-00015b80: 2d2d 0a0a 2d20 496d 706c 656d 656e 7465  --..- Implemente
-00015b90: 6420 6e65 7720 6368 6163 6c20 636f 6d6d  d new chacl comm
-00015ba0: 616e 642c 2077 6869 6368 206d 616b 6573  and, which makes
-00015bb0: 2069 7420 6561 7379 2074 6f20 6164 6420   it easy to add 
-00015bc0: 616e 6420 7265 6d6f 7665 2062 7563 6b65  and remove bucke
-00015bd0: 740a 2020 616e 6420 6f62 6a65 6374 2041  t.  and object A
-00015be0: 434c 2067 7261 6e74 7320 7769 7468 6f75  CL grants withou
-00015bf0: 7420 6861 7669 6e67 2074 6f20 6564 6974  t having to edit
-00015c00: 2058 4d4c 2028 6c69 6b65 2074 6865 206f   XML (like the o
-00015c10: 6c64 6572 2073 6574 6163 6c0a 2020 636f  lder setacl.  co
-00015c20: 6d6d 616e 6429 2e0a 2d20 496d 706c 656d  mmand)..- Implem
-00015c30: 656e 7465 6420 6e65 7720 2264 6169 7379  ented new "daisy
-00015c40: 2d63 6861 696e 2220 636f 7079 696e 6720  -chain" copying 
-00015c50: 6d6f 6465 2c20 7768 6963 6820 616c 6c6f  mode, which allo
-00015c60: 7773 2063 726f 7373 2d70 726f 7669 6465  ws cross-provide
-00015c70: 720a 2020 636f 7069 6573 2074 6f20 7275  r.  copies to ru
-00015c80: 6e20 7769 7468 6f75 7420 6275 6666 6572  n without buffer
-00015c90: 696e 6720 746f 206c 6f63 616c 2064 6973  ing to local dis
-00015ca0: 6b2c 2061 6e64 2074 6f20 7573 6520 7265  k, and to use re
-00015cb0: 7375 6d61 626c 6520 7570 6c6f 6164 732e  sumable uploads.
-00015cc0: 0a20 2054 6869 7320 636f 7079 696e 6720  .  This copying 
-00015cd0: 6d6f 6465 2061 6c73 6f20 616c 6c6f 7773  mode also allows
-00015ce0: 2063 6f70 7969 6e67 2062 6574 7765 656e   copying between
-00015cf0: 206c 6f63 6174 696f 6e73 2061 6e64 2062   locations and b
-00015d00: 6574 7765 656e 2073 746f 7261 6765 0a20  etween storage. 
-00015d10: 2063 6c61 7373 6573 2c20 7573 696e 6720   classes, using 
-00015d20: 7468 6520 6e65 7720 6773 7574 696c 2063  the new gsutil c
-00015d30: 7020 2d44 206f 7074 696f 6e2e 2028 4461  p -D option. (Da
-00015d40: 6973 792d 6368 6169 6e20 636f 7079 696e  isy-chain copyin
-00015d50: 6720 6973 2074 6865 0a20 2064 6566 6175  g is the.  defau
-00015d60: 6c74 2077 6865 6e20 636f 7079 696e 6720  lt when copying 
-00015d70: 6265 7477 6565 6e20 7072 6f76 6964 6572  between provider
-00015d80: 732c 2062 7574 206d 7573 7420 6265 2065  s, but must be e
-00015d90: 7870 6c69 6369 746c 7920 7265 7175 6573  xplicitly reques
-00015da0: 7465 6420 666f 720a 2020 7468 6520 6f74  ted for.  the ot
-00015db0: 6865 7220 6361 7365 7320 746f 206b 6565  her cases to kee
-00015dc0: 7020 636f 7374 7320 616e 6420 7065 7266  p costs and perf
-00015dd0: 6f72 6d61 6e63 6520 6578 7065 6374 6174  ormance expectat
-00015de0: 696f 6e73 2063 6c65 6172 2e29 0a2d 2049  ions clear.).- I
-00015df0: 6d70 6c65 6d65 6e74 6564 206e 6577 2070  mplemented new p
-00015e00: 6572 6664 6961 6720 636f 6d6d 616e 6420  erfdiag command 
-00015e10: 746f 2072 756e 2061 2064 6961 676e 6f73  to run a diagnos
-00015e20: 7469 6320 7465 7374 2061 6761 696e 7374  tic test against
-00015e30: 0a20 2061 2062 7563 6b65 742c 2063 6f6c  .  a bucket, col
-00015e40: 6c65 6374 2073 7973 7465 6d20 696e 666f  lect system info
-00015e50: 726d 6174 696f 6e2c 2061 6e64 2072 6570  rmation, and rep
-00015e60: 6f72 7420 7265 7375 6c74 732e 2055 7365  ort results. Use
-00015e70: 6675 6c0a 2020 7768 656e 2077 6f72 6b69  ful.  when worki
-00015e80: 6e67 2077 6974 6820 476f 6f67 6c65 2043  ng with Google C
-00015e90: 6c6f 7564 2053 746f 7261 6765 2074 6561  loud Storage tea
-00015ea0: 6d20 746f 2072 6573 6f6c 7665 2071 7565  m to resolve que
-00015eb0: 7374 696f 6e73 0a20 2061 626f 7574 2070  stions.  about p
-00015ec0: 6572 666f 726d 616e 6365 2e0a 2d20 4164  erformance..- Ad
-00015ed0: 6465 6420 5349 4751 5549 5420 285e 5c29  ded SIGQUIT (^\)
-00015ee0: 2068 616e 646c 6572 2c20 746f 2061 6c6c   handler, to all
-00015ef0: 6f77 2062 7265 616b 706f 696e 7469 6e67  ow breakpointing
-00015f00: 2061 2072 756e 6e69 6e67 2067 7375 7469   a running gsuti
-00015f10: 6c2e 0a0a 4275 6720 4669 7865 730a 2d2d  l...Bug Fixes.--
-00015f20: 2d2d 2d2d 2d2d 2d0a 0a2d 2046 6978 6564  -------..- Fixed
-00015f30: 2062 7567 2077 6865 7265 2067 7375 7469   bug where gsuti
-00015f40: 6c20 7365 7477 6562 6366 6720 7369 676e  l setwebcfg sign
-00015f50: 6174 7572 6520 6469 646e 2774 206d 6174  ature didn't mat
-00015f60: 6368 2077 6974 680a 2020 484d 4143 2061  ch with.  HMAC a
-00015f70: 7574 6865 6e74 6963 6174 696f 6e2e 0a2d  uthentication..-
-00015f80: 2046 6978 6564 2041 5343 4949 2063 6f64   Fixed ASCII cod
-00015f90: 6563 2064 6563 6f64 6520 6572 726f 7220  ec decode error 
-00015fa0: 7768 656e 2063 6f6e 7374 7275 6374 696e  when constructin
-00015fb0: 6720 7472 6163 6b65 7220 6669 6c65 6e61  g tracker filena
-00015fc0: 6d65 0a20 2066 726f 6d20 6e6f 6e2d 3762  me.  from non-7b
-00015fd0: 6974 2041 5343 4949 2069 6e70 7574 2066  it ASCII input f
-00015fe0: 696c 656e 616d 652e 0a2d 2043 6861 6e67  ilename..- Chang
-00015ff0: 6564 2062 6f74 6f20 6175 7468 2070 6c75  ed boto auth plu
-00016000: 6769 6e20 6672 616d 6577 6f72 6b20 746f  gin framework to
-00016010: 2061 6c6c 6f77 206d 756c 7469 706c 6520   allow multiple 
-00016020: 706c 7567 696e 730a 2020 7375 7070 6f72  plugins.  suppor
-00016030: 7469 6e67 2072 6571 7565 7374 6564 2063  ting requested c
-00016040: 6170 6162 696c 6974 792c 2077 6869 6368  apability, which
-00016050: 2066 6978 6573 2067 7375 7469 6c20 6578   fixes gsutil ex
-00016060: 6365 7074 696f 6e0a 2020 7468 6174 2075  ception.  that u
-00016070: 7365 6420 746f 2068 6170 7065 6e20 7768  sed to happen wh
-00016080: 6572 6520 6120 4743 4520 7573 6572 2068  ere a GCE user h
-00016090: 6164 2061 2073 6572 7669 6365 2061 6363  ad a service acc
-000160a0: 6f75 6e74 0a20 2063 6f6e 6669 6775 7265  ount.  configure
-000160b0: 6420 616e 6420 7468 656e 2072 616e 2067  d and then ran g
-000160c0: 7375 7469 6c20 636f 6e66 6967 2e0a 2d20  sutil config..- 
-000160d0: 4368 616e 6765 6420 436f 6d6d 616e 642e  Changed Command.
-000160e0: 4170 706c 7920 6d65 7468 6f64 2074 6f20  Apply method to 
-000160f0: 6265 2072 6573 696c 6965 6e74 2074 6f20  be resilient to 
-00016100: 6e61 6d65 2065 7870 616e 7369 6f6e 0a20  name expansion. 
-00016110: 2065 7863 6570 7469 6f6e 732e 2042 6566   exceptions. Bef
-00016120: 6f72 6520 7468 6973 2063 6861 6e67 652c  ore this change,
-00016130: 2069 6620 616e 2065 7863 6570 7469 6f6e   if an exception
-00016140: 2077 6173 2072 6169 7365 640a 2020 6475   was raised.  du
-00016150: 7269 6e67 2069 7465 7261 7469 6f6e 206f  ring iteration o
-00016160: 6620 4e61 6d65 4578 7061 6e73 696f 6e52  f NameExpansionR
-00016170: 6573 756c 742c 2074 6865 2070 6172 656e  esult, the paren
-00016180: 7420 7072 6f63 6573 730a 2020 776f 756c  t process.  woul
-00016190: 6420 696d 6d65 6469 6174 656c 7920 7374  d immediately st
-000161a0: 6f70 2065 7865 6375 7469 6f6e 2c20 6361  op execution, ca
-000161b0: 7573 696e 6720 7468 650a 2020 5f45 4f46  using the.  _EOF
-000161c0: 5f4e 414d 455f 4558 5041 4e53 494f 4e5f  _NAME_EXPANSION_
-000161d0: 5245 5355 4c54 2074 6f20 6e65 7665 7220  RESULT to never 
-000161e0: 6265 2073 656e 7420 746f 2063 6869 6c64  be sent to child
-000161f0: 2070 726f 6365 7373 6573 2e0a 2020 5468   processes..  Th
-00016200: 6973 2072 6573 756c 7465 6420 696e 2074  is resulted in t
-00016210: 6865 2070 726f 6365 7373 2068 616e 6769  he process hangi
-00016220: 6e67 2066 6f72 6576 6572 2e0a 2d20 4669  ng forever..- Fi
-00016230: 7865 6420 7661 7269 6f75 7320 6275 6773  xed various bugs
-00016240: 2066 6f72 2067 7375 7469 6c20 7275 6e6e   for gsutil runn
-00016250: 696e 6720 6f6e 2057 696e 646f 7773 3a0a  ing on Windows:.
-00016260: 2020 2d20 4669 7865 6420 7661 7269 6f75    - Fixed variou
-00016270: 7320 706c 6163 6573 2066 726f 6d20 6120  s places from a 
-00016280: 6861 7264 2d63 6f64 6564 2027 2f27 2074  hard-coded '/' t
-00016290: 6f20 6f73 2e73 6570 2e0a 2020 2d20 4669  o os.sep..  - Fi
-000162a0: 7865 6420 6120 6275 6720 696e 2074 6865  xed a bug in the
-000162b0: 2063 7020 636f 6d6d 616e 6420 7768 6572   cp command wher
-000162c0: 6520 6974 2077 6173 2075 7369 6e67 2074  e it was using t
-000162d0: 6865 2064 6573 7469 6e61 7469 6f6e 0a20  he destination. 
-000162e0: 2020 2055 5249 2773 202e 6465 6c69 6d20     URI's .delim 
-000162f0: 7072 6f70 6572 7479 2069 6e73 7465 6164  property instead
-00016300: 206f 6620 7468 6520 736f 7572 6365 2055   of the source U
-00016310: 5249 2e0a 2020 2d20 4669 7865 6420 6120  RI..  - Fixed a 
-00016320: 6275 6720 696e 2074 6865 2063 7020 636f  bug in the cp co
-00016330: 6d6d 616e 6427 7320 5f53 7263 4473 7453  mmand's _SrcDstS
-00016340: 616d 6520 6675 6e63 7469 6f6e 2062 790a  ame function by.
-00016350: 2020 2020 7369 6d70 6c69 6679 696e 6720      simplifying 
-00016360: 6974 2074 6f20 7573 6520 6f73 2e70 6174  it to use os.pat
-00016370: 682e 6e6f 726d 7061 7468 2e0a 2020 2d20  h.normpath..  - 
-00016380: 4669 7865 6420 7769 6e64 6f77 7320 6275  Fixed windows bu
-00016390: 6720 696e 2074 6573 7473 2f75 7469 6c2e  g in tests/util.
-000163a0: 7079 205f 4e6f 726d 616c 697a 6555 5249  py _NormalizeURI
-000163b0: 2066 756e 6374 696f 6e2e 0a20 202d 2046   function..  - F
-000163c0: 6978 6564 205a 6572 6f44 6976 6973 696f  ixed ZeroDivisio
-000163d0: 6e45 7272 6f72 2073 6f6d 6574 696d 6573  nError sometimes
-000163e0: 2068 6170 7065 6e69 6e67 2064 7572 696e   happening durin
-000163f0: 6720 756e 6974 2074 6573 7473 0a20 2020  g unit tests.   
-00016400: 206f 6e20 5769 6e64 6f77 732e 0a0a 2d20   on Windows...- 
-00016410: 4669 7865 6420 6773 7574 696c 2072 6d20  Fixed gsutil rm 
-00016420: 6275 6720 7468 6174 2063 6175 7365 6420  bug that caused 
-00016430: 6578 6974 2073 7461 7475 7320 3120 7768  exit status 1 wh
-00016440: 656e 2065 6e63 6f75 6e74 6572 6564 0a20  en encountered. 
-00016450: 206e 6f6e 2d65 7869 7374 656e 7420 5552   non-existent UR
-00016460: 492e 0a2d 2046 6978 6564 2073 7570 706f  I..- Fixed suppo
-00016470: 7274 2066 6f72 2067 7375 7469 6c20 6370  rt for gsutil cp
-00016480: 2066 696c 6520 2d2e 0a2d 2041 6464 6564   file -..- Added
-00016490: 2070 7265 636f 6e64 6974 696f 6e73 2061   preconditions a
-000164a0: 6e64 2072 6574 7279 206c 6f67 6963 2074  nd retry logic t
-000164b0: 6f20 7365 746d 6574 6120 636f 6d6d 616e  o setmeta comman
-000164c0: 642c 2074 6f0a 2020 656e 666f 7263 6520  d, to.  enforce 
-000164d0: 636f 6e63 7572 7265 6e63 7920 636f 6e74  concurrency cont
-000164e0: 726f 6c2e 0a2d 2046 6978 6564 2062 7567  rol..- Fixed bug
-000164f0: 2069 6e20 636f 7079 696e 6720 7375 6264   in copying subd
-00016500: 6972 7320 746f 2073 7562 6469 7273 2e0a  irs to subdirs..
-00016510: 2d20 4669 7865 6420 6361 7365 7320 7768  - Fixed cases wh
-00016520: 6572 6520 626f 746f 2064 6562 7567 5f6c  ere boto debug_l
-00016530: 6576 656c 2063 6175 7365 6420 746f 6f20  evel caused too 
-00016540: 6d75 6368 206f 7220 746f 6f20 6c69 7474  much or too litt
-00016550: 6c65 0a20 206c 6f67 6769 6e67 3a0a 2020  le.  logging:.  
-00016560: 2d20 7265 7375 6d61 626c 6520 616e 6420  - resumable and 
-00016570: 6f6e 652d 7368 6f74 2075 706c 6f61 6473  one-shot uploads
-00016580: 2077 6572 656e 2774 2073 686f 7769 6e67   weren't showing
-00016590: 2072 6573 706f 6e73 6520 6865 6164 6572   response header
-000165a0: 730a 2020 2020 7768 656e 2063 6f6e 6e65  s.    when conne
-000165b0: 6374 696f 6e2e 6465 6275 6720 3e20 302e  ction.debug > 0.
-000165c0: 0a20 202d 2070 6179 6c6f 6164 2077 6173  .  - payload was
-000165d0: 2073 686f 7769 6e67 2075 7020 696e 2064   showing up in d
-000165e0: 6562 7567 206f 7574 7075 7420 7768 656e  ebug output when
-000165f0: 2063 6f6e 6e65 6374 696f 6e2e 6465 6275   connection.debu
-00016600: 670a 2020 2020 3c20 3420 666f 7220 7374  g.    < 4 for st
-00016610: 7265 616d 696e 6720 7570 6c6f 6164 732e  reaming uploads.
-00016620: 0a0a 2d20 5265 6d6f 7665 6420 584d 4c20  ..- Removed XML 
-00016630: 7061 7273 696e 6720 6672 6f6d 2073 6574  parsing from set
-00016640: 6163 6c2e 2054 6865 2070 7265 7669 6f75  acl. The previou
-00016650: 7320 696d 706c 656d 656e 7461 7469 6f6e  s implementation
-00016660: 0a20 2072 656c 6965 6420 6f6e 206c 6f6f  .  relied on loo
-00016670: 7365 2058 4d4c 2068 616e 646c 696e 672c  se XML handling,
-00016680: 2077 6869 6368 2063 6f75 6c64 2074 7275   which could tru
-00016690: 6e63 6174 6520 7768 6174 2069 7420 7365  ncate what it se
-000166a0: 6e64 730a 2020 746f 2074 6865 2073 6572  nds.  to the ser
-000166b0: 7669 6365 2c20 616c 6c6f 7769 6e67 2069  vice, allowing i
-000166c0: 6e76 616c 6964 2058 4d4c 2074 6f20 6265  nvalid XML to be
-000166d0: 2073 7065 6369 6669 6564 2062 7920 7468   specified by th
-000166e0: 650a 2020 7573 6572 2e20 496e 7374 6561  e.  user. Instea
-000166f0: 6420 6e6f 7720 7468 6520 4143 4c20 584d  d now the ACL XM
-00016700: 4c20 6973 2070 6173 7365 6420 7665 7262  L is passed verb
-00016710: 6174 696d 2061 6e64 2077 6520 7265 6c79  atim and we rely
-00016720: 0a20 206f 6e20 7365 7276 6572 2d73 6964  .  on server-sid
-00016730: 6520 7363 6865 6d61 2065 6e66 6f72 6365  e schema enforce
-00016740: 6d65 6e74 2e0a 2d20 4164 6465 6420 7573  ment..- Added us
-00016750: 6572 2d61 6765 6e74 2068 6561 6465 7220  er-agent header 
-00016760: 746f 2072 6573 756d 6162 6c65 2075 706c  to resumable upl
-00016770: 6f61 6473 2e0a 2d20 4669 7865 6420 7265  oads..- Fixed re
-00016780: 706f 7274 696e 6720 6269 7473 2f73 2077  porting bits/s w
-00016790: 6865 6e20 6974 2077 6173 2072 6561 6c6c  hen it was reall
-000167a0: 7920 6279 7465 732f 732e 0a2d 2043 6861  y bytes/s..- Cha
-000167b0: 6e67 6564 2073 6f20 7765 206e 6f77 2070  nged so we now p
-000167c0: 6173 7320 6865 6164 6572 7320 7769 7468  ass headers with
-000167d0: 2041 5049 2076 6572 7369 6f6e 2026 2070   API version & p
-000167e0: 726f 6a65 6374 2049 440a 2020 746f 2063  roject ID.  to c
-000167f0: 7265 6174 655f 6275 636b 6574 2829 2e0a  reate_bucket()..
-00016800: 2d20 4d61 6465 2022 6773 7574 696c 2072  - Made "gsutil r
-00016810: 6d20 2d72 2067 733a 2f2f 6275 636b 6574  m -r gs://bucket
-00016820: 2f66 6f6c 6465 7222 2072 656d 6f76 6520  /folder" remove 
-00016830: 7879 7a5f 2466 6f6c 6465 7224 206f 626a  xyz_$folder$ obj
-00016840: 6563 740a 2020 2877 6869 6368 2069 7320  ect.  (which is 
-00016850: 6372 6561 7465 6420 6279 2076 6172 696f  created by vario
-00016860: 7573 2047 5549 2074 6f6f 6c73 292e 0a2d  us GUI tools)..-
-00016870: 2046 6978 6564 2062 7567 2077 6865 7265   Fixed bug where
-00016880: 2067 7375 7469 6c20 6269 6e61 7279 2077   gsutil binary w
-00016890: 6173 2073 6869 7070 6564 2077 6974 6820  as shipped with 
-000168a0: 7072 6f74 6563 7469 6f6e 2037 3530 0a20  protection 750. 
-000168b0: 2069 6e73 7465 6164 206f 6620 3735 352e   instead of 755.
-000168c0: 0a0a 4f74 6865 7220 4368 616e 6765 730a  ..Other Changes.
-000168d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 0a2d  -------------..-
-000168e0: 2052 6577 6f72 6b65 6420 7665 7273 696f   Reworked versio
-000168f0: 6e65 6420 6f62 6a65 6374 2068 616e 646c  ned object handl
-00016900: 696e 673a 0a20 202d 2052 656d 6f76 6564  ing:.  - Removed
-00016910: 206e 6565 6420 666f 7220 636f 6d6d 616e   need for comman
-00016920: 6473 2074 6f20 7370 6563 6966 7920 2d76  ds to specify -v
-00016930: 206f 7074 696f 6e20 746f 2070 6172 7365   option to parse
-00016940: 0a20 2020 2076 6572 7369 6f6e 732e 2056  .    versions. V
-00016950: 6572 7369 6f6e 6564 2055 5249 7320 6172  ersioned URIs ar
-00016960: 6520 6e6f 7720 756e 6966 6f72 6d6c 7920  e now uniformly 
-00016970: 6861 6e64 6c65 6420 6279 2061 6c6c 0a20  handled by all. 
-00016980: 2020 2063 6f6d 6d61 6e64 732e 0a20 202d     commands..  -
-00016990: 2052 6566 6163 746f 7265 6420 5374 6f72   Refactored Stor
-000169a0: 6167 6555 7269 2070 6172 7369 6e67 2074  ageUri parsing t
-000169b0: 6861 7420 6861 6420 6265 656e 2073 706c  hat had been spl
-000169c0: 6974 2061 6372 6f73 730a 2020 2020 7374  it across.    st
-000169d0: 6f72 6167 655f 7572 6920 616e 6420 636f  orage_uri and co
-000169e0: 6e76 656e 6965 6e63 653b 206d 6164 6520  nvenience; made 
-000169f0: 7665 7273 696f 6e65 6420 5552 4973 2072  versioned URIs r
-00016a00: 656e 6465 7220 7769 7468 0a20 2020 2076  ender with.    v
-00016a10: 6572 7369 6f6e 2073 7472 696e 6720 736f  ersion string so
-00016a20: 2053 746f 7261 6765 5572 6920 6973 2072   StorageUri is r
-00016a30: 6f75 6e64 2d74 7269 7070 6162 6c65 2028  ound-trippable (
-00016a40: 626f 746f 2063 6861 6e67 6529 2e0a 2020  boto change)..  
-00016a50: 2d20 496d 706c 656d 656e 7465 6420 6773  - Implemented gs
-00016a60: 7574 696c 2063 7020 2d76 206f 7074 696f  util cp -v optio
-00016a70: 6e20 666f 7220 7072 696e 7469 6e67 2074  n for printing t
-00016a80: 6865 2076 6572 7369 6f6e 2d73 7065 6369  he version-speci
-00016a90: 6669 630a 2020 2020 5552 4920 7468 6174  fic.    URI that
-00016aa0: 2077 6173 206a 7573 7420 6372 6561 7465   was just create
-00016ab0: 642e 0a20 202d 2041 6464 6564 2065 7272  d..  - Added err
-00016ac0: 6f72 2064 6574 6169 6c20 666f 7220 6174  or detail for at
-00016ad0: 7465 6d70 7420 746f 2064 656c 6574 6520  tempt to delete 
-00016ae0: 6e6f 6e2d 656d 7074 7920 7665 7273 696f  non-empty versio
-00016af0: 6e65 640a 2020 2020 6275 636b 6574 2e20  ned.    bucket. 
-00016b00: 416c 736f 2061 6464 6564 2076 6572 7369  Also added versi
-00016b10: 6f6e 696e 6720 7374 6174 6520 746f 206c  oning state to l
-00016b20: 7320 2d4c 202d 6220 6773 3a2f 2f62 7563  s -L -b gs://buc
-00016b30: 6b65 740a 2020 2020 6f75 7470 7574 2e0a  ket.    output..
-00016b40: 2020 2d20 4368 616e 6765 6420 5552 4920    - Changed URI 
-00016b50: 7061 7273 696e 6720 746f 2075 7365 2070  parsing to use p
-00016b60: 7265 2d63 6f6d 7069 6c65 6420 7265 6765  re-compiled rege
-00016b70: 7827 732e 0a20 202d 204f 7468 6572 2062  x's..  - Other b
-00016b80: 7567 2066 6978 6573 2e0a 0a2d 2052 6577  ug fixes...- Rew
-00016b90: 726f 7465 2f64 6565 7065 6e65 642f 696d  rote/deepened/im
-00016ba0: 7072 6f76 6564 2076 6172 696f 7573 2070  proved various p
-00016bb0: 6172 7473 206f 6620 6275 696c 742d 696e  arts of built-in
-00016bc0: 2068 656c 703a 0a20 202d 2055 7064 6174   help:.  - Updat
-00016bd0: 6564 2027 6773 7574 696c 2068 656c 7020  ed 'gsutil help 
-00016be0: 6465 7627 2e0a 2020 2d20 4669 7865 6420  dev'..  - Fixed 
-00016bf0: 6865 6c70 2063 6f6d 6d61 6e64 2068 616e  help command han
-00016c00: 646c 696e 6720 7768 656e 2074 6572 6d69  dling when termi
-00016c10: 6e61 6c20 646f 6573 206e 6f74 2068 6176  nal does not hav
-00016c20: 6520 7468 650a 2020 2020 6e75 6d62 6572  e the.    number
-00016c30: 206f 6620 726f 7773 2073 6574 2e0a 2020   of rows set..  
-00016c40: 2d20 5265 7772 6f74 6520 7665 7273 696f  - Rewrote versio
-00016c50: 6e69 6e67 2068 656c 702e 0a20 202d 2041  ning help..  - A
-00016c60: 6464 6564 2067 7375 7469 6c20 6865 6c70  dded gsutil help
-00016c70: 2074 6578 7420 666f 7220 636f 6d6d 6f6e   text for common
-00016c80: 2034 3033 2041 6363 6f75 6e74 5072 6f62   403 AccountProb
-00016c90: 6c65 6d20 6572 726f 722e 0a20 202d 2041  lem error..  - A
-00016ca0: 6464 6564 2074 6578 7420 746f 2027 6773  dded text to 'gs
-00016cb0: 7574 696c 2068 656c 7020 6465 7627 2061  util help dev' a
-00016cc0: 626f 7574 206c 6567 616c 2061 6772 6565  bout legal agree
-00016cd0: 6d65 6e74 206e 6565 6465 640a 2020 2020  ment needed.    
-00016ce0: 7769 7468 2063 6f64 6520 7375 626d 6973  with code submis
-00016cf0: 7369 6f6e 732e 0a20 202d 2046 6978 6564  sions..  - Fixed
-00016d00: 2076 6172 696f 7573 206f 7468 6572 2074   various other t
-00016d10: 7970 6f73 2e0a 2020 2d20 5570 6461 7465  ypos..  - Update
-00016d20: 6420 646f 6320 666f 7220 6370 2063 6f6d  d doc for cp com
-00016d30: 6d61 6e64 2072 6567 6172 6469 6e67 206d  mand regarding m
-00016d40: 6574 6164 6174 6120 6e6f 7420 6265 696e  etadata not bein
-00016d50: 670a 2020 2020 7072 6573 6572 7665 6420  g.    preserved 
-00016d60: 7768 656e 2063 6f70 7969 6e67 2062 6574  when copying bet
-00016d70: 7765 656e 2070 726f 7669 6465 7273 2e0a  ween providers..
-00016d80: 2020 2d20 4669 7865 6420 6773 7574 696c    - Fixed gsutil
-00016d90: 206c 7320 636f 6d6d 616e 6420 646f 6375   ls command docu
-00016da0: 6d65 6e74 6174 696f 6e20 7479 706f 2066  mentation typo f
-00016db0: 6f72 2074 6865 202d 4c20 6f70 7469 6f6e  or the -L option
-00016dc0: 2e0a 2020 2d20 4164 6465 6420 4854 5450  ..  - Added HTTP
-00016dd0: 2073 6368 656d 6520 746f 2064 6f63 2f65   scheme to doc/e
-00016de0: 7861 6d70 6c65 7320 666f 7220 6773 7574  xamples for gsut
-00016df0: 696c 2073 6574 636f 7273 2063 6f6d 6d61  il setcors comma
-00016e00: 6e64 2e0a 2020 2d20 4368 616e 6765 6420  nd..  - Changed 
-00016e10: 6d69 6e69 6d75 6d20 7665 7273 696f 6e20  minimum version 
-00016e20: 696e 2064 6f63 756d 656e 7461 7469 6f6e  in documentation
-00016e30: 2066 726f 6d20 322e 3520 746f 2032 2e36   from 2.5 to 2.6
-00016e40: 2073 696e 6365 0a20 2020 2067 7375 7469   since.    gsuti
-00016e50: 6c20 6e6f 206c 6f6e 6765 7220 776f 726b  l no longer work
-00016e60: 7320 696e 2050 7974 686f 6e20 322e 352e  s in Python 2.5.
-00016e70: 0a20 202d 2043 6c65 616e 6564 2075 702f  .  - Cleaned up/
-00016e80: 636c 6172 6966 792f 6465 6570 656e 2076  clarify/deepen v
-00016e90: 6172 696f 7573 206f 7468 6572 2070 6172  arious other par
-00016ea0: 7473 206f 6620 6773 7574 696c 0a20 2020  ts of gsutil.   
-00016eb0: 2062 7569 6c74 2d69 6e20 646f 6375 6d65   built-in docume
-00016ec0: 6e74 6174 696f 6e2e 0a0a 2d20 4e75 6d65  ntation...- Nume
-00016ed0: 726f 7573 2069 6d70 726f 7665 6d65 6e74  rous improvement
-00016ee0: 7320 746f 2074 6573 7469 6e67 2069 6e66  s to testing inf
-00016ef0: 7261 7374 7275 6374 7572 653a 0a20 202d  rastructure:.  -
-00016f00: 2043 6f6d 706c 6574 656c 7920 7265 6661   Completely refa
-00016f10: 6374 6f72 6564 2069 6e66 7261 7374 7275  ctored infrastru
-00016f20: 6374 7572 652c 2061 6c6c 6f77 696e 6720  cture, allowing 
-00016f30: 6465 6570 6572 2074 6573 7469 6e67 0a20  deeper testing. 
-00016f40: 2020 2061 6e64 206d 6f72 6520 7265 6164     and more read
-00016f50: 6162 6c65 2074 6573 7420 636f 6465 2c20  able test code, 
-00016f60: 616e 6420 656e 6162 6c69 6e67 2062 6574  and enabling bet
-00016f70: 7465 7220 6465 6275 6767 696e 670a 2020  ter debugging.  
-00016f80: 2020 6f75 7470 7574 2077 6865 6e20 7465    output when te
-00016f90: 7374 7320 6661 696c 2e0a 2020 2d20 4d6f  sts fail..  - Mo
-00016fa0: 7665 6420 6773 6c69 622f 7465 7374 5f2a  ved gslib/test_*
-00016fb0: 2e70 7920 756e 6974 2074 6573 7473 2074  .py unit tests t
-00016fc0: 6f20 6773 6c69 622f 7465 7374 7320 6d6f  o gslib/tests mo
-00016fd0: 6475 6c65 2e0a 2020 2d20 4d61 6465 2061  dule..  - Made a
-00016fe0: 6c6c 2074 6573 7473 2028 756e 6974 2061  ll tests (unit a
-00016ff0: 6e64 2069 6e74 6567 7261 7469 6f6e 2c20  nd integration, 
-00017000: 7065 722d 636f 6d6d 616e 6420 616e 6420  per-command and 
-00017010: 6d6f 6475 6c65 730a 2020 2020 286c 696b  modules.    (lik
-00017020: 6520 6e61 6d69 6e67 2920 7275 6e20 6672  e naming) run fr
-00017030: 6f6d 2073 696e 676c 6520 6773 7574 696c  om single gsutil
-00017040: 2074 6573 7420 636f 6d6d 616e 642e 0a20   test command.. 
-00017050: 202d 204d 6f76 6564 2054 656d 7044 6972   - Moved TempDir
-00017060: 2066 756e 6374 696f 6e73 2066 726f 6d20   functions from 
-00017070: 4773 5574 696c 496e 7465 6772 6174 696f  GsUtilIntegratio
-00017080: 6e54 6573 7443 6173 6520 746f 0a20 2020  nTestCase to.   
-00017090: 2047 7355 7469 6c54 6573 7443 6173 652e   GsUtilTestCase.
-000170a0: 0a20 202d 204d 6164 6520 7465 7374 2072  .  - Made test r
-000170b0: 756e 6e65 7220 6d65 7373 6167 6520 7368  unner message sh
-000170c0: 6f77 2074 6865 2074 6573 7420 6675 6e63  ow the test func
-000170d0: 7469 6f6e 2062 6569 6e67 2072 756e 2e0a  tion being run..
-000170e0: 2020 2d20 4164 6465 6420 6669 6c65 2070    - Added file p
-000170f0: 6174 6820 7375 7070 6f72 7420 746f 204f  ath support to O
-00017100: 626a 6563 7454 6f55 5249 2066 756e 6374  bjectToURI funct
-00017110: 696f 6e2e 0a20 202d 2044 6973 6162 6c65  ion..  - Disable
-00017120: 6420 7468 6520 7465 7374 2063 6f6d 6d61  d the test comma
-00017130: 6e64 2069 6620 7275 6e6e 696e 6720 6f6e  nd if running on
-00017140: 2050 7974 686f 6e20 322e 3620 616e 6420   Python 2.6 and 
-00017150: 756e 6974 7465 7374 320a 2020 2020 6973  unittest2.    is
-00017160: 206e 6f74 2061 7661 696c 6162 6c65 2069   not available i
-00017170: 6e73 7465 6164 206f 6620 6272 6561 6b69  nstead of breaki
-00017180: 6e67 2061 6c6c 206f 6620 6773 7574 696c  ng all of gsutil
-00017190: 2e0a 2020 2d20 4368 616e 6765 6420 746f  ..  - Changed to
-000171a0: 2070 6173 7320 4743 5320 5632 2041 5049   pass GCS V2 API
-000171b0: 2061 6e64 2070 726f 6a65 6374 5f69 6420   and project_id 
-000171c0: 6672 6f6d 2062 6f74 6f20 636f 6e66 6967  from boto config
-000171d0: 0a20 2020 2069 6620 6e65 6365 7373 6172  .    if necessar
-000171e0: 7920 696e 2069 6e74 6567 7261 7469 6f6e  y in integration
-000171f0: 5f74 6573 7463 6173 6523 4372 6561 7465  _testcase#Create
-00017200: 4275 636b 6574 2829 2e0a 2020 2d20 4669  Bucket()..  - Fi
-00017210: 7865 6420 756e 6974 2074 6573 7473 2062  xed unit tests b
-00017220: 7920 7573 696e 6720 6120 4753 2d73 7065  y using a GS-spe
-00017230: 6369 6669 6320 6d6f 636b 696e 6720 636c  cific mocking cl
-00017240: 6173 7320 746f 0a20 2020 206f 7665 7272  ass to.    overr
-00017250: 6964 6520 7468 6520 5333 2070 726f 7669  ide the S3 provi
-00017260: 6465 722e 0a20 202d 2041 6464 6564 2066  der..  - Added f
-00017270: 7269 656e 646c 6965 7220 6572 726f 7220  riendlier error 
-00017280: 6d65 7373 6167 6520 6966 2074 6573 7420  message if test 
-00017290: 7061 7468 206d 756e 6769 6e67 2066 6169  path munging fai
-000172a0: 6c73 2e0a 2020 2d20 4669 7865 6420 6275  ls..  - Fixed bu
-000172b0: 6720 7768 6572 6520 6773 7574 696c 2074  g where gsutil t
-000172c0: 6573 7420 6f6e 6c79 2063 6c65 616e 6564  est only cleaned
-000172d0: 2075 7020 6669 7273 7420 6665 7720 7465   up first few te
-000172e0: 7374 2066 696c 6573 2e0a 2020 2d20 496d  st files..  - Im
-000172f0: 706c 656d 656e 7465 6420 7365 7461 636c  plemented setacl
-00017300: 2069 6e74 6567 7261 7469 6f6e 2074 6573   integration tes
-00017310: 7473 2e0a 2020 2d20 496d 706c 656d 656e  ts..  - Implemen
-00017320: 7465 6420 5374 6f72 6167 6555 7269 2070  ted StorageUri p
-00017330: 6172 7369 6e67 2075 6e69 7420 7465 7374  arsing unit test
-00017340: 732e 0a20 202d 2049 6d70 6c65 6d65 6e74  s..  - Implement
-00017350: 6564 2074 6573 7420 666f 7220 6773 7574  ed test for gsut
-00017360: 696c 2063 7020 2d44 2e0a 2020 2d20 496d  il cp -D..  - Im
-00017370: 706c 656d 656e 7465 6420 7365 7461 636c  plemented setacl
-00017380: 2069 6e74 6567 7261 7469 6f6e 2074 6573   integration tes
-00017390: 7473 2e0a 2020 2d20 496d 706c 656d 656e  ts..  - Implemen
-000173a0: 7465 6420 7465 7374 7320 666f 7220 7265  ted tests for re
-000173b0: 6164 696e 6720 616e 6420 7365 656b 696e  ading and seekin
-000173c0: 6720 7061 7374 2065 6e64 206f 6620 6669  g past end of fi
-000173d0: 6c65 2e0a 2020 2d20 496d 706c 656d 656e  le..  - Implemen
-000173e0: 7465 6420 616e 6420 7465 7374 7320 666f  ted and tests fo
-000173f0: 7220 6974 2069 6e20 6e65 7720 7465 7374  r it in new test
-00017400: 7320 6d6f 6475 6c65 2e0a 2020 2d20 4368  s module..  - Ch
-00017410: 616e 6765 6420 6370 2074 6573 7473 2074  anged cp tests t
-00017420: 6861 7420 646f 6e27 7420 7370 6563 6966  hat don't specif
-00017430: 7920 6120 436f 6e74 656e 742d 5479 7065  y a Content-Type
-00017440: 2074 6f20 6368 6563 6b0a 2020 2020 666f   to check.    fo
-00017450: 7220 6e65 7720 6269 6e61 7279 2f6f 6374  r new binary/oct
-00017460: 6574 2d73 7472 6561 6d20 6465 6661 756c  et-stream defaul
-00017470: 7420 696e 7374 6561 6420 6f66 2073 6572  t instead of ser
-00017480: 7665 722d 6465 7465 6374 6564 0a20 2020  ver-detected.   
-00017490: 206d 696d 6520 7479 7065 2e0a 0a2d 2043   mime type...- C
-000174a0: 6861 6e67 6564 2067 7375 7469 6c20 6d76  hanged gsutil mv
-000174b0: 2074 6f20 616c 6c6f 7720 6d6f 7669 6e67   to allow moving
-000174c0: 206c 6f63 616c 2066 696c 6573 2f64 6972   local files/dir
-000174d0: 7320 746f 2074 6865 2063 6c6f 7564 2e0a  s to the cloud..
-000174e0: 2020 5072 6576 696f 7573 6c79 2074 6869    Previously thi
-000174f0: 7320 7761 7320 6469 7361 6c6c 6f77 6564  s was disallowed
-00017500: 2069 6e20 7468 6520 6265 6c69 6566 2077   in the belief w
-00017510: 6520 7368 6f75 6c64 2062 650a 2020 636f  e should be.  co
-00017520: 6e73 6572 7661 7469 7665 2061 626f 7574  nservative about
-00017530: 2064 656c 6574 696e 6720 6461 7461 2066   deleting data f
-00017540: 726f 6d20 6c6f 6361 6c20 6469 736b 2062  rom local disk b
-00017550: 7574 2074 6865 7265 2061 7265 0a20 206c  ut there are.  l
-00017560: 6567 6974 696d 6174 6520 7573 6520 6361  egitimate use ca
-00017570: 7365 7320 666f 7220 6d6f 7669 6e67 2064  ses for moving d
-00017580: 6174 6120 6672 6f6d 2061 206c 6f63 616c  ata from a local
-00017590: 2064 6972 2074 6f20 7468 650a 2020 636c   dir to the.  cl
-000175a0: 6f75 642c 2069 7427 7320 636c 6561 7220  oud, it's clear 
-000175b0: 746f 2074 6865 2075 7365 7220 7468 6973  to the user this
-000175c0: 2077 6f75 6c64 2072 656d 6f76 6520 6461   would remove da
-000175d0: 7461 2066 726f 6d20 7468 650a 2020 6c6f  ta from the.  lo
-000175e0: 6361 6c20 6469 736b 2c20 616e 6420 616c  cal disk, and al
-000175f0: 6c6f 7769 6e67 2069 7420 6d61 6b65 7320  lowing it makes 
-00017600: 7468 6520 746f 6f6c 2062 6568 6176 696f  the tool behavio
-00017610: 7220 6d6f 7265 0a20 2063 6f6e 7369 7374  r more.  consist
-00017620: 656e 7420 7769 7468 2077 6861 7420 7573  ent with what us
-00017630: 6572 7320 776f 756c 6420 6578 7065 6374  ers would expect
-00017640: 2e0a 2d20 4368 616e 6765 6420 6773 7574  ..- Changed gsut
-00017650: 696c 2075 7064 6174 6520 636f 6d6d 616e  il update comman
-00017660: 6420 746f 2069 6e73 6973 7420 6f6e 2069  d to insist on i
-00017670: 735f 7365 6375 7265 2061 6e64 0a20 2068  s_secure and.  h
-00017680: 7474 7073 5f76 616c 6964 6174 655f 6365  ttps_validate_ce
-00017690: 7274 6966 6963 6174 6573 2e0a 2d20 4669  rtificates..- Fi
-000176a0: 7865 6420 7265 6c65 6173 6520 6e6f 206c  xed release no l
-000176b0: 6f6e 6765 7220 746f 2069 6e63 6c75 6465  onger to include
-000176c0: 2065 7874 7261 6e65 6f75 7320 626f 746f   extraneous boto
-000176d0: 2064 6972 7320 696e 0a20 2074 6f70 2d6c   dirs in.  top-l
-000176e0: 6576 656c 206f 6620 6773 7574 696c 2064  evel of gsutil d
-000176f0: 6973 7472 6962 7574 696f 6e20 286c 696b  istribution (lik
-00017700: 6520 6269 6e2f 2061 6e64 2064 6f63 732f  e bin/ and docs/
-00017710: 292e 0a2d 2043 6861 6e67 6564 2072 6573  )..- Changed res
-00017720: 756d 6162 6c65 2075 706c 6f61 6420 7468  umable upload th
-00017730: 7265 7368 6f6c 6420 6672 6f6d 2031 204d  reshold from 1 M
-00017740: 4220 746f 2032 204d 422e 0a2d 2052 656d  B to 2 MB..- Rem
-00017750: 6f76 6564 206c 6566 746f 7665 7220 636c  oved leftover cl
-00017760: 6f75 6461 7574 6820 616e 6420 636c 6f75  oudauth and clou
-00017770: 6472 6561 6465 7220 6469 7273 2e20 5361  dreader dirs. Sa
-00017780: 6d70 6c65 2063 6f64 650a 2020 6e6f 7720  mple code.  now 
-00017790: 6c69 7665 7320 6174 2068 7474 7073 3a2f  lives at https:/
-000177a0: 2f67 6974 6875 622e 636f 6d2f 476f 6f67  /github.com/Goog
-000177b0: 6c65 436c 6f75 6450 6c61 7466 6f72 6d2e  leCloudPlatform.
-000177c0: 0a2d 2055 7064 6174 6564 2063 6f70 7972  .- Updated copyr
-000177d0: 6967 6874 206e 6f74 6963 6520 6f6e 2063  ight notice on c
-000177e0: 6f64 6520 6669 6c65 732e 0a0a 0a52 656c  ode files....Rel
-000177f0: 6561 7365 2033 2e32 3120 2872 656c 6561  ease 3.21 (relea
-00017800: 7365 2d64 6174 653a 2032 3031 322d 3132  se-date: 2012-12
-00017810: 2d31 3029 0a3d 3d3d 3d3d 3d3d 3d3d 3d3d  -10).===========
-00017820: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00017830: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 0a0a 4e65  ============..Ne
-00017840: 7720 4665 6174 7572 6573 0a2d 2d2d 2d2d  w Features.-----
-00017850: 2d2d 2d2d 2d2d 2d0a 0a2d 2041 6464 6564  -------..- Added
-00017860: 2074 6865 2061 6269 6c69 7479 2066 6f72   the ability for
-00017870: 2074 6865 2063 7020 636f 6d6d 616e 6420   the cp command 
-00017880: 746f 2063 6f6e 7469 6e75 6520 6576 656e  to continue even
-00017890: 2069 6620 7468 6572 6520 6973 2061 6e0a   if there is an.
-000178a0: 2020 6572 726f 722e 2054 6869 7320 6361    error. This ca
-000178b0: 6e20 6265 2061 6374 6976 6174 6564 2077  n be activated w
-000178c0: 6974 6820 7468 6520 2d63 2066 6c61 672e  ith the -c flag.
-000178d0: 0a2d 2041 6464 6564 2073 7570 706f 7274  .- Added support
-000178e0: 2066 6f72 2073 7065 6369 6679 696e 6720   for specifying 
-000178f0: 7372 6320 6172 6773 2066 6f72 2067 7375  src args for gsu
-00017900: 7469 6c20 6370 206f 6e20 7374 6469 6e20  til cp on stdin 
-00017910: 282d 4920 6f70 7469 6f6e 290a 0a42 7567  (-I option)..Bug
-00017920: 2046 6978 6573 0a2d 2d2d 2d2d 2d2d 2d2d   Fixes.---------
-00017930: 0a0a 2d20 4669 7865 6420 6773 7574 696c  ..- Fixed gsutil
-00017940: 2074 6573 7420 6370 2c20 7768 6963 6820   test cp, which 
-00017950: 6173 7375 6d65 6420 6974 2077 6173 2072  assumed it was r
-00017960: 756e 2066 726f 6d20 6773 7574 696c 2069  un from gsutil i
-00017970: 6e73 7461 6c6c 2064 6972 2e0a 2d20 4d6f  nstall dir..- Mo
-00017980: 6473 2073 6f20 7765 2073 656e 6420 6765  ds so we send ge
-00017990: 6e65 7261 7469 6f6e 2073 7562 7265 736f  neration subreso
-000179a0: 7572 6365 206f 6e6c 7920 7768 656e 2075  urce only when u
-000179b0: 7365 7220 7265 7175 6573 7465 640a 2020  ser requested.  
-000179c0: 7665 7273 696f 6e20 7061 7273 696e 6720  version parsing 
-000179d0: 282d 7620 6f70 7469 6f6e 2066 6f72 2063  (-v option for c
-000179e0: 7020 616e 6420 6361 7420 636f 6d6d 616e  p and cat comman
-000179f0: 6473 292e 0a0a 4f74 6865 7220 4368 616e  ds)...Other Chan
-00017a00: 6765 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ges.------------
-00017a10: 2d0a 0a2d 2055 7064 6174 6564 2064 6f63  -..- Updated doc
-00017a20: 7320 6162 6f75 7420 7573 696e 6720 7365  s about using se
-00017a30: 746d 6574 6120 7769 7468 2076 6572 7369  tmeta with versi
-00017a40: 6f6e 696e 6720 656e 6162 6c65 642e 0a2d  oning enabled..-
-00017a50: 2043 6861 6e67 6564 2047 4353 2065 6e64   Changed GCS end
-00017a60: 706f 696e 7420 696e 2062 6f74 6f20 746f  point in boto to
-00017a70: 2073 746f 7261 6765 2e67 6f6f 676c 6561   storage.googlea
-00017a80: 7069 732e 636f 6d2e 0a0a 0a52 656c 6561  pis.com....Relea
-00017a90: 7365 2033 2e32 3020 2872 656c 6561 7365  se 3.20 (release
-00017aa0: 2d64 6174 653a 2032 3031 322d 3131 2d33  -date: 2012-11-3
-00017ab0: 3029 0a3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  0).=============
-00017ac0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00017ad0: 3d3d 3d3d 3d3d 3d3d 3d3d 0a0a 4e65 7720  ==========..New 
-00017ae0: 4665 6174 7572 6573 0a2d 2d2d 2d2d 2d2d  Features.-------
-00017af0: 2d2d 2d2d 2d0a 0a2d 2041 6464 6564 2061  -----..- Added a
-00017b00: 206e 6f63 6c6f 6262 6572 2028 2d6e 2920   noclobber (-n) 
-00017b10: 7365 7474 696e 6720 666f 7220 7468 6520  setting for the 
-00017b20: 6370 2063 6f6d 6d61 6e64 2e20 4578 6973  cp command. Exis
-00017b30: 7469 6e67 206f 626a 6563 7473 2f66 696c  ting objects/fil
-00017b40: 6573 0a20 2077 696c 6c20 6e6f 7420 6265  es.  will not be
-00017b50: 206f 7665 7277 7269 7474 656e 2077 6865   overwritten whe
-00017b60: 6e20 7573 696e 6720 7468 6973 2073 6574  n using this set
-00017b70: 7469 6e67 2e0a 0a42 7567 2046 6978 6573  ting...Bug Fixes
-00017b80: 0a2d 2d2d 2d2d 2d2d 2d2d 0a0a 2d20 4669  .---------..- Fi
-00017b90: 7865 6420 6f66 662d 6279 2d6f 6e65 2065  xed off-by-one e
-00017ba0: 7272 6f72 2077 6865 6e20 7265 706f 7274  rror when report
-00017bb0: 696e 6720 6279 7465 7320 7472 616e 7366  ing bytes transf
-00017bc0: 6572 7265 642e 0a0a 4f74 6865 7220 4368  erred...Other Ch
-00017bd0: 616e 6765 730a 2d2d 2d2d 2d2d 2d2d 2d2d  anges.----------
-00017be0: 2d2d 2d0a 0a2d 2049 6d70 726f 7665 6420  ---..- Improved 
-00017bf0: 7665 7273 696f 6e69 6e67 2073 7570 706f  versioning suppo
-00017c00: 7274 2066 6f72 2074 6865 2072 656d 6f76  rt for the remov
-00017c10: 6520 636f 6d6d 616e 642e 0a2d 2049 6d70  e command..- Imp
-00017c20: 726f 7665 6420 7465 7374 2072 756e 6e65  roved test runne
-00017c30: 7220 7375 7070 6f72 742e 0a0a 0a52 656c  r support....Rel
-00017c40: 6561 7365 2033 2e31 3920 2872 656c 6561  ease 3.19 (relea
-00017c50: 7365 2d64 6174 653a 2032 3031 322d 3131  se-date: 2012-11
-00017c60: 2d32 3629 0a3d 3d3d 3d3d 3d3d 3d3d 3d3d  -26).===========
-00017c70: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00017c80: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 0a0a 4e65  ============..Ne
-00017c90: 7720 4665 6174 7572 6573 0a2d 2d2d 2d2d  w Features.-----
-00017ca0: 2d2d 2d2d 2d2d 2d0a 0a2d 2041 6464 6564  -------..- Added
-00017cb0: 2073 7570 706f 7274 2066 6f72 206f 626a   support for obj
-00017cc0: 6563 7420 7665 7273 696f 6e73 2e0a 2d20  ect versions..- 
-00017cd0: 4164 6465 6420 7375 7070 6f72 7420 666f  Added support fo
-00017ce0: 7220 7374 6f72 6167 6520 636c 6173 7365  r storage classe
-00017cf0: 7320 2869 6e63 6c75 6469 6e67 2044 7572  s (including Dur
-00017d00: 6162 6c65 2052 6564 7563 6564 2041 7661  able Reduced Ava
-00017d10: 696c 6162 696c 6974 7929 2e0a 0a42 7567  ilability)...Bug
-00017d20: 2046 6978 6573 0a2d 2d2d 2d2d 2d2d 2d2d   Fixes.---------
-00017d30: 0a2d 2046 6978 6564 2070 726f 626c 656d  .- Fixed problem
-00017d40: 2077 6865 7265 2063 7020 2d71 2070 7265   where cp -q pre
-00017d50: 7665 6e74 6564 2072 6573 756d 6162 6c65  vented resumable
-00017d60: 2075 706c 6f61 6473 2066 726f 6d20 6265   uploads from be
-00017d70: 696e 6720 7065 7266 6f72 6d65 642e 0a2d  ing performed..-
-00017d80: 204d 6164 6520 7365 7477 6562 6366 6720   Made setwebcfg 
-00017d90: 616e 6420 7365 7463 6f72 7320 7465 7374  and setcors test
-00017da0: 7320 726f 6275 7374 2077 7274 2058 4d4c  s robust wrt XML
-00017db0: 2066 6f72 6d61 7474 696e 6720 7661 7269   formatting vari
-00017dc0: 6174 696f 6e2e 0a0a 4f74 6865 7220 4368  ation...Other Ch
-00017dd0: 616e 6765 730a 2d2d 2d2d 2d2d 2d2d 2d2d  anges.----------
-00017de0: 2d2d 2d0a 0a2d 2049 6e63 6f72 706f 7261  ---..- Incorpora
-00017df0: 7465 6420 7661 7069 6572 4020 6d6f 6473  ted vapier@ mods
-00017e00: 2074 6f20 6d61 6b65 2076 6572 7369 6f6e   to make version
-00017e10: 2063 6f6d 6d61 6e64 206e 6f74 2066 6169   command not fai
-00017e20: 6c20 6966 2043 4845 434b 5355 4d20 6669  l if CHECKSUM fi
-00017e30: 6c65 0a20 206d 6973 7369 6e67 2e0a 2d20  le.  missing..- 
-00017e40: 5265 6661 6374 6f72 6564 2067 7375 7469  Refactored gsuti
-00017e50: 6c20 7375 6368 2074 6861 7420 6d6f 7374  l such that most
-00017e60: 2066 756e 6374 696f 6e61 6c69 7479 2065   functionality e
-00017e70: 7869 7374 7320 696e 2062 6f74 6f2e 0a2d  xists in boto..-
-00017e80: 2055 7064 6174 6564 2067 7375 7469 6c20   Updated gsutil 
-00017e90: 6865 6c70 2064 6576 2069 6e73 7472 7563  help dev instruc
-00017ea0: 7469 6f6e 7320 666f 7220 686f 7720 746f  tions for how to
-00017eb0: 2063 6865 636b 206f 7574 2073 6f75 7263   check out sourc
-00017ec0: 652e 0a0a 0a52 656c 6561 7365 2033 2e31  e....Release 3.1
-00017ed0: 3820 2872 656c 6561 7365 2d64 6174 653a  8 (release-date:
-00017ee0: 2032 3031 322d 3039 2d31 3929 0a3d 3d3d   2012-09-19).===
-00017ef0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00017f00: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00017f10: 3d3d 3d3d 0a0a 4275 6720 4669 7865 730a  ====..Bug Fixes.
-00017f20: 2d2d 2d2d 2d2d 2d2d 2d0a 0a2d 2046 6978  ---------..- Fix
-00017f30: 6564 2072 6573 756d 6162 6c65 2075 706c  ed resumable upl
-00017f40: 6f61 6420 626f 756e 6461 7279 2063 6f6e  oad boundary con
-00017f50: 6469 7469 6f6e 2077 6865 6e20 6861 6e64  dition when hand
-00017f60: 6c69 6e67 2050 4f53 5420 7265 7175 6573  ling POST reques
-00017f70: 740a 2020 7768 656e 2073 6572 7665 7220  t.  when server 
-00017f80: 616c 7265 6164 7920 6861 7320 636f 6d70  already has comp
-00017f90: 6c65 7465 2066 696c 652c 2077 6869 6368  lete file, which
-00017fa0: 2072 6573 756c 7465 6420 696e 2061 6e20   resulted in an 
-00017fb0: 696e 6669 6e69 7465 0a20 206c 6f6f 7020  infinite.  loop 
-00017fc0: 7468 6174 2063 6f6e 7375 6d65 6420 3130  that consumed 10
-00017fd0: 3025 206f 6620 7468 6520 4350 552e 0a2d  0% of the CPU..-
-00017fe0: 2046 6978 6564 206f 6e65 206d 6f72 6520   Fixed one more 
-00017ff0: 706c 6163 6520 7468 6174 206f 7574 7075  place that outpu
-00018000: 7474 6564 2070 726f 6772 6573 7320 696e  tted progress in
-00018010: 666f 2077 6865 6e20 6773 7574 696c 2063  fo when gsutil c
-00018020: 7020 2d71 0a20 2073 7065 6369 6669 6564  p -q.  specified
-00018030: 2028 6475 7269 6e67 2073 7472 6561 6d69   (during streami
-00018040: 6e67 2075 706c 6f61 6473 292e 0a0a 4f74  ng uploads)...Ot
-00018050: 6865 7220 4368 616e 6765 730a 2d2d 2d2d  her Changes.----
-00018060: 2d2d 2d2d 2d2d 2d2d 2d0a 0a2d 2055 7064  ---------..- Upd
-00018070: 6174 6564 2068 656c 7020 7465 7874 2066  ated help text f
-00018080: 6f72 2022 6773 7574 696c 2068 656c 7020  or "gsutil help 
-00018090: 7365 746d 6574 6122 2061 6e64 2022 6773  setmeta" and "gs
-000180a0: 7574 696c 2068 656c 7020 6d65 7461 6461  util help metada
-000180b0: 7461 222c 2074 6f0a 2020 636c 6172 6966  ta", to.  clarif
-000180c0: 7920 616e 6420 6465 6570 656e 2070 6172  y and deepen par
-000180d0: 7473 206f 6620 7468 6520 646f 6375 6d65  ts of the docume
-000180e0: 6e74 6174 696f 6e2e 0a0a 0a52 656c 6561  ntation....Relea
-000180f0: 7365 2033 2e31 3720 2872 656c 6561 7365  se 3.17 (release
-00018100: 2d64 6174 653a 2032 3031 322d 3038 2d31  -date: 2012-08-1
-00018110: 3729 0a3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  7).=============
-00018120: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00018130: 3d3d 3d3d 3d3d 3d3d 3d3d 0a0a 4275 6720  ==========..Bug 
-00018140: 4669 7865 730a 2d2d 2d2d 2d2d 2d2d 2d0a  Fixes.---------.
-00018150: 0a2d 2046 6978 6564 2072 6163 6520 636f  .- Fixed race co
-00018160: 6e64 6974 696f 6e20 7768 656e 206d 756c  ndition when mul
-00018170: 7469 706c 6520 7468 7265 6164 7320 6174  tiple threads at
-00018180: 7465 6d70 7420 746f 2067 6574 2061 6e20  tempt to get an 
-00018190: 4f41 7574 6832 2072 6566 7265 7368 0a20  OAuth2 refresh. 
-000181a0: 2074 6f6b 656e 2063 6f6e 6375 7272 656e   token concurren
-000181b0: 746c 792e 0a0a 4f74 6865 7220 4368 616e  tly...Other Chan
-000181c0: 6765 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ges.------------
-000181d0: 2d0a 0a2d 2049 6d70 6c65 6d65 6e74 6564  -..- Implemented
-000181e0: 2073 696d 706c 6966 6965 6420 7379 6e74   simplified synt
-000181f0: 6178 2066 6f72 2073 6574 6d65 7461 2063  ax for setmeta c
-00018200: 6f6d 6d61 6e64 2e20 5468 6520 6f6c 6420  ommand. The old 
-00018210: 7379 6e74 6178 2073 7469 6c6c 0a20 2077  syntax still.  w
-00018220: 6f72 6b73 2062 7574 2069 7320 6e6f 7720  orks but is now 
-00018230: 6465 7072 6563 6174 6564 2e0a 2d20 4164  deprecated..- Ad
-00018240: 6465 6420 6865 6c70 2074 6f20 6773 7574  ded help to gsut
-00018250: 696c 2063 7020 2d7a 206f 7074 696f 6e2c  il cp -z option,
-00018260: 2074 6f20 6465 7363 7269 6265 2068 6f77   to describe how
-00018270: 2074 6f20 6368 616e 6765 2077 6865 7265   to change where
-00018280: 2074 656d 700a 2020 6669 6c65 7320 6172   temp.  files ar
-00018290: 6520 7772 6974 7465 6e2e 0a0a 0a52 656c  e written....Rel
-000182a0: 6561 7365 2033 2e31 3620 2872 656c 6561  ease 3.16 (relea
-000182b0: 7365 2d64 6174 653a 2032 3031 322d 3038  se-date: 2012-08
-000182c0: 2d31 3329 0a3d 3d3d 3d3d 3d3d 3d3d 3d3d  -13).===========
-000182d0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000182e0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 0a0a 4275  ============..Bu
-000182f0: 6720 4669 7865 730a 2d2d 2d2d 2d2d 2d2d  g Fixes.--------
-00018300: 2d0a 0a2d 2041 6464 6564 2069 6e66 6f20  -..- Added info 
-00018310: 746f 2062 7569 6c74 2d69 6e20 6865 6c70  to built-in help
-00018320: 2066 6f72 2073 6574 6d65 7461 2063 6f6d   for setmeta com
-00018330: 6d61 6e64 2c20 746f 2065 7870 6c61 696e  mand, to explain
-00018340: 2074 6865 2073 796e 7461 780a 2020 6e65   the syntax.  ne
-00018350: 6564 6564 2077 6865 6e20 7275 6e6e 696e  eded when runnin
-00018360: 6720 6672 6f6d 2057 696e 646f 7773 2e0a  g from Windows..
-00018370: 0a0a 5265 6c65 6173 6520 332e 3135 2028  ..Release 3.15 (
-00018380: 7265 6c65 6173 652d 6461 7465 3a20 3230  release-date: 20
-00018390: 3132 2d30 382d 3132 290a 3d3d 3d3d 3d3d  12-08-12).======
-000183a0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000183b0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000183c0: 3d0a 0a4e 6577 2046 6561 7475 7265 730a  =..New Features.
-000183d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a0a 2d20  ------------..- 
-000183e0: 496d 706c 656d 656e 7465 6420 6773 7574  Implemented gsut
-000183f0: 696c 2073 6574 6d65 7461 2063 6f6d 6d61  il setmeta comma
-00018400: 6e64 2e0a 2d20 4d61 6465 2067 7375 7469  nd..- Made gsuti
-00018410: 6c20 756e 6465 7273 7461 6e64 2062 7563  l understand buc
-00018420: 6b65 7420 7375 6264 6972 2063 6f6e 7665  ket subdir conve
-00018430: 6e74 696f 6e73 2075 7365 6420 6279 2076  ntions used by v
-00018440: 6172 696f 7573 2074 6f6f 6c73 0a20 2028  arious tools.  (
-00018450: 6c69 6b65 2047 4353 204d 616e 6167 6572  like GCS Manager
-00018460: 2061 6e64 2043 6c6f 7564 4265 7272 7929   and CloudBerry)
-00018470: 2073 6f20 6966 2079 6f75 2063 7020 6f72   so if you cp or
-00018480: 206d 7620 746f 2061 2073 7562 6469 7220   mv to a subdir 
-00018490: 796f 750a 2020 6372 6561 7465 6420 7769  you.  created wi
-000184a0: 7468 206f 6e65 206f 6620 7468 6f73 6520  th one of those 
-000184b0: 746f 6f6c 7320 6974 2077 696c 6c20 776f  tools it will wo
-000184c0: 726b 2061 7320 6578 7065 6374 6564 2e0a  rk as expected..
-000184d0: 2d20 4164 6465 6420 7375 7070 6f72 7420  - Added support 
-000184e0: 666f 7220 5769 6e64 6f77 7320 6472 6976  for Windows driv
-000184f0: 6520 6c65 7474 6572 2d70 7265 6661 6365  e letter-preface
-00018500: 6420 7061 7468 7320 7768 656e 2075 7369  d paths when usi
-00018510: 6e67 2053 746f 7261 6765 0a20 2055 5249  ng Storage.  URI
-00018520: 732e 0a0a 4275 6720 4669 7865 730a 2d2d  s...Bug Fixes.--
-00018530: 2d2d 2d2d 2d2d 2d0a 0a2d 2046 6978 6564  -------..- Fixed
-00018540: 2070 6572 666f 726d 616e 6365 2062 7567   performance bug
-00018550: 2077 6865 6e20 646f 776e 6c6f 6164 696e   when downloadin
-00018560: 6720 6120 6c61 7267 6520 6f62 6a65 6374  g a large object
-00018570: 2077 6974 6820 436f 6e74 656e 742d 0a20   with Content-. 
-00018580: 2045 6e63 6f64 696e 673a 677a 6970 2c20   Encoding:gzip, 
-00018590: 7768 6572 6520 6465 636f 6d70 7265 7373  where decompress
-000185a0: 696f 6e20 6174 7465 6d70 7465 6420 746f  ion attempted to
-000185b0: 206c 6f61 6420 7468 6520 656e 7469 7265   load the entire
-000185c0: 206f 626a 6563 740a 2020 696e 206d 656d   object.  in mem
-000185d0: 6f72 792e 2041 6c73 6f20 6164 6465 6420  ory. Also added 
-000185e0: 2255 6e63 6f6d 7072 6573 7369 6e67 2220  "Uncompressing" 
-000185f0: 6c6f 6720 6f75 7470 7574 2069 6620 6669  log output if fi
-00018600: 6c65 2069 7320 6c61 7267 6572 2074 6861  le is larger tha
-00018610: 6e0a 2020 3530 4d2c 2074 6f20 6d61 6b65  n.  50M, to make
-00018620: 2069 7420 636c 6561 7220 7468 6520 646f   it clear the do
-00018630: 776e 6c6f 6164 2068 6173 6e27 7420 7374  wnload hasn't st
-00018640: 616c 6c65 642e 0a2d 2046 6978 6564 206e  alled..- Fixed n
-00018650: 616d 696e 6720 6275 6720 7768 656e 2070  aming bug when p
-00018660: 6572 666f 726d 696e 6720 6773 7574 696c  erforming gsutil
-00018670: 206d 7620 6672 6f6d 2061 2062 7563 6b65   mv from a bucke
-00018680: 7420 7375 6264 6972 2074 6f0a 2020 616e  t subdir to.  an
-00018690: 6420 6578 6973 7469 6e67 2062 7563 6b65  d existing bucke
-000186a0: 7420 7375 6264 6972 2e0a 2d20 4669 7865  t subdir..- Fixe
-000186b0: 6420 6275 6720 7468 6174 2063 6175 7365  d bug that cause
-000186c0: 6420 6372 6f73 732d 7072 6f76 6964 6572  d cross-provider
-000186d0: 2063 6f70 6965 7320 696e 746f 2047 6f6f   copies into Goo
-000186e0: 676c 6520 436c 6f75 6420 5374 6f72 6167  gle Cloud Storag
-000186f0: 6520 746f 0a20 2066 6169 6c2e 0a2d 204d  e to.  fail..- M
-00018700: 6164 6520 6368 616e 6765 206e 6565 6465  ade change neede
-00018710: 6420 746f 206d 616b 6520 7265 7375 6d61  d to make resuma
-00018720: 626c 6520 7472 616e 7366 6572 2070 726f  ble transfer pro
-00018730: 6772 6573 7320 6d65 7373 6167 6573 206e  gress messages n
-00018740: 6f74 2070 7269 6e74 0a20 2077 6865 6e20  ot print.  when 
-00018750: 7275 6e6e 696e 6720 6773 7574 696c 2063  running gsutil c
-00018760: 7020 2d71 2e0a 2d20 4669 7865 6420 636f  p -q..- Fixed co
-00018770: 7079 2f70 6173 7465 2065 7272 6f72 2069  py/paste error i
-00018780: 6e20 636f 6e66 6967 2066 696c 6520 646f  n config file do
-00018790: 6375 6d65 6e74 6174 696f 6e20 666f 720a  cumentation for.
-000187a0: 2020 6874 7470 735f 7661 6c69 6461 7465    https_validate
-000187b0: 5f63 6572 7469 6669 6361 7465 7320 6f70  _certificates op
-000187c0: 7469 6f6e 2e0a 2d20 5661 7269 6f75 7320  tion..- Various 
-000187d0: 7479 706f 2066 6978 6573 2e0a 0a4f 7468  typo fixes...Oth
-000187e0: 6572 2043 6861 6e67 6573 0a2d 2d2d 2d2d  er Changes.-----
-000187f0: 2d2d 2d2d 2d2d 2d2d 0a0a 2d20 4368 616e  --------..- Chan
-00018800: 6765 6420 6773 7574 696c 2074 6f20 756e  ged gsutil to un
-00018810: 7365 7420 6874 7470 5f70 726f 7879 2065  set http_proxy e
-00018820: 6e76 6972 6f6e 6d65 6e74 2076 6172 6961  nvironment varia
-00018830: 626c 6520 6966 2069 7427 7320 7365 742c  ble if it's set,
-00018840: 0a20 2062 6563 6175 7365 2069 7420 636f  .  because it co
-00018850: 6e66 7573 6573 2062 6f74 6f2e 2028 5072  nfuses boto. (Pr
-00018860: 6f78 6965 7320 7368 6f75 6c64 2069 6e73  oxies should ins
-00018870: 7465 6164 2062 6520 636f 6e66 6967 7572  tead be configur
-00018880: 6564 2076 6961 2074 6865 0a20 2062 6f74  ed via the.  bot
-00018890: 6f20 636f 6e66 6967 2066 696c 652e 290a  o config file.).
-000188a0: 0a0a 5265 6c65 6173 6520 332e 3134 2028  ..Release 3.14 (
-000188b0: 7265 6c65 6173 652d 6461 7465 3a20 3230  release-date: 20
-000188c0: 3132 2d30 372d 3238 290a 3d3d 3d3d 3d3d  12-07-28).======
-000188d0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000188e0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000188f0: 3d0a 0a4e 6577 2046 6561 7475 7265 730a  =..New Features.
-00018900: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a0a 2d20  ------------..- 
-00018910: 4164 6465 6420 6370 202d 7120 6f70 7469  Added cp -q opti
-00018920: 6f6e 2c20 746f 2073 7570 706f 7274 2071  on, to support q
-00018930: 7569 6574 206f 7065 7261 7469 6f6e 2066  uiet operation f
-00018940: 726f 6d20 6372 6f6e 206a 6f62 732e 0a2d  rom cron jobs..-
-00018950: 204d 6164 6520 636f 6e66 6967 2063 6f6d   Made config com
-00018960: 6d61 6e64 2072 6573 746f 7265 2062 6163  mand restore bac
-00018970: 6b65 6420 7570 2066 696c 6520 6966 2074  ked up file if t
-00018980: 6865 7265 2077 6173 2061 2066 6169 6c75  here was a failu
-00018990: 7265 206f 7220 7573 6572 0a20 2068 6974  re or user.  hit
-000189a0: 7320 5e43 2e0a 0a42 7567 2046 6978 6573  s ^C...Bug Fixes
-000189b0: 0a2d 2d2d 2d2d 2d2d 2d2d 0a0a 2d20 4669  .---------..- Fi
-000189c0: 7865 6420 6275 6720 7768 6572 6520 6773  xed bug where gs
-000189d0: 7574 696c 2063 7020 2d52 2066 726f 6d20  util cp -R from 
-000189e0: 6120 736f 7572 6365 2064 6972 6563 746f  a source directo
-000189f0: 7279 2064 6964 6e27 7420 6765 6e65 7261  ry didn't genera
-00018a00: 7465 0a20 2063 6f72 7265 6374 2064 6573  te.  correct des
-00018a10: 7469 6e61 7469 6f6e 2070 6174 682e 0a2d  tination path..-
-00018a20: 2046 6978 6564 2066 696c 6520 6861 6e64   Fixed file hand
-00018a30: 6c65 206c 6561 6b20 696e 2067 7375 7469  le leak in gsuti
-00018a40: 6c20 6370 202d 7a0a 2d20 4669 7865 6420  l cp -z.- Fixed 
-00018a50: 6275 6720 7468 6174 2063 6175 7365 6420  bug that caused 
-00018a60: 6370 202d 6120 6f70 7469 6f6e 206e 6f74  cp -a option not
-00018a70: 2074 6f20 776f 726b 2077 6865 6e20 636f   to work when co
-00018a80: 7079 696e 6720 696e 2074 6865 2063 6c6f  pying in the clo
-00018a90: 7564 2e0a 2d20 4669 7865 6420 6275 6720  ud..- Fixed bug 
-00018aa0: 7468 6174 2063 6175 7365 6420 272f 2d27  that caused '/-'
-00018ab0: 2074 6f20 6265 2061 7070 656e 6465 6420   to be appended 
-00018ac0: 746f 206f 626a 6563 7420 6e61 6d65 2066  to object name f
-00018ad0: 6f72 2073 7472 6561 6d69 6e67 0a20 2075  or streaming.  u
-00018ae0: 706c 6f61 6473 2e0a 2d20 5265 7665 7274  ploads..- Revert
-00018af0: 2069 6e63 6f72 7265 6374 206c 696e 6520   incorrect line 
-00018b00: 4920 6368 616e 6765 6420 696e 2070 7265  I changed in pre
-00018b10: 7669 6f75 7320 434c 2c20 7468 6174 2061  vious CL, that a
-00018b20: 7474 656d 7074 6564 2074 6f0a 2020 6765  ttempted to.  ge
-00018b30: 7420 6670 2066 726f 6d20 7372 635f 6b65  t fp from src_ke
-00018b40: 7920 6f62 6a65 6374 2e20 5468 6520 7265  y object. The re
-00018b50: 616c 2066 6978 2074 6861 7427 7320 6e65  al fix that's ne
-00018b60: 6564 6564 2069 7320 6465 7363 7269 6265  eded is describe
-00018b70: 6420 696e 0a20 2068 7474 7073 3a2f 2f67  d in.  https://g
-00018b80: 6974 6875 622e 636f 6d2f 476f 6f67 6c65  ithub.com/Google
-00018b90: 436c 6f75 6450 6c61 7466 6f72 6d2f 6773  CloudPlatform/gs
-00018ba0: 7574 696c 2f69 7373 7565 732f 3732 2e0a  util/issues/72..
-00018bb0: 0a4f 7468 6572 2043 6861 6e67 6573 0a2d  .Other Changes.-
-00018bc0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a0a 2d20  ------------..- 
-00018bd0: 4368 616e 6765 6420 6c6f 6767 696e 6720  Changed logging 
-00018be0: 746f 2070 7269 6e74 2022 436f 7079 696e  to print "Copyin
-00018bf0: 672e 2e2e 2220 616e 6420 436f 6e74 656e  g..." and Conten
-00018c00: 742d 5479 7065 206f 6e20 7361 6d65 206c  t-Type on same l
-00018c10: 696e 653b 0a20 2072 6566 6163 746f 7265  ine;.  refactore
-00018c20: 6420 636f 6e74 656e 7420 7479 7065 2061  d content type a
-00018c30: 6e64 206c 6f67 2068 616e 646c 696e 672e  nd log handling.
-00018c40: 0a0a 0a52 656c 6561 7365 2033 2e31 3320  ...Release 3.13 
-00018c50: 2872 656c 6561 7365 2d64 6174 653a 2032  (release-date: 2
-00018c60: 3031 322d 3037 2d31 3929 0a3d 3d3d 3d3d  012-07-19).=====
-00018c70: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00018c80: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00018c90: 3d3d 0a0a 4275 6720 4669 7865 730a 2d2d  ==..Bug Fixes.--
-00018ca0: 2d2d 2d2d 2d2d 2d0a 0a2d 2049 6e63 6c75  -------..- Inclu
-00018cb0: 6465 6420 7468 6520 6669 7820 746f 206d  ded the fix to m
-00018cc0: 616b 6520 2767 7375 7469 6c20 636f 6e66  ake 'gsutil conf
-00018cd0: 6967 2720 686f 6e6f 7220 424f 544f 5f43  ig' honor BOTO_C
-00018ce0: 4f4e 4649 4720 656e 7669 726f 6e6d 656e  ONFIG environmen
-00018cf0: 740a 2020 7661 7269 6162 6c65 2028 7768  t.  variable (wh
-00018d00: 6963 6820 7761 7320 696e 7465 6e64 6564  ich was intended
-00018d10: 2074 6f20 6265 2069 6e63 6c75 6465 6420   to be included 
-00018d20: 696e 2052 656c 6561 7365 2033 2e31 3229  in Release 3.12)
-00018d30: 0a0a 0a52 656c 6561 7365 2033 2e31 3120  ...Release 3.11 
-00018d40: 2872 656c 6561 7365 2d64 6174 653a 2032  (release-date: 2
-00018d50: 3031 322d 3036 2d32 3829 0a3d 3d3d 3d3d  012-06-28).=====
-00018d60: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00018d70: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00018d80: 3d3d 0a0a 4e65 7720 4665 6174 7572 6573  ==..New Features
-00018d90: 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 0a2d  .------------..-
-00018da0: 2041 6464 6564 2073 7570 706f 7274 2066   Added support f
-00018db0: 6f72 2063 6f6e 6669 6775 7269 6e67 2077  or configuring w
-00018dc0: 6562 7369 7465 2062 7563 6b65 7473 2e0a  ebsite buckets..
-00018dd0: 0a42 7567 2046 6978 6573 0a2d 2d2d 2d2d  .Bug Fixes.-----
-00018de0: 2d2d 2d2d 0a0a 2d20 4669 7865 6420 6275  ----..- Fixed bu
-00018df0: 6720 7468 6174 2063 6175 7365 6420 7369  g that caused si
-00018e00: 6d75 6c74 616e 656f 7573 2072 6573 756d  multaneous resum
-00018e10: 6162 6c65 2064 6f77 6e6c 6f61 6473 206f  able downloads o
-00018e20: 6620 7468 6520 7361 6d65 2073 6f75 7263  f the same sourc
-00018e30: 650a 2020 6f62 6a65 6374 2074 6f20 7573  e.  object to us
-00018e40: 6520 7468 6520 7361 6d65 2074 7261 636b  e the same track
-00018e50: 6572 2066 696c 652e 0a2d 2043 6861 6e67  er file..- Chang
-00018e60: 6564 206c 616e 6775 6167 6520 636f 6465  ed language code
-00018e70: 2073 7065 6320 706f 696e 7465 7220 6672   spec pointer fr
-00018e80: 6f6d 2057 696b 6970 6564 6961 2074 6f20  om Wikipedia to 
-00018e90: 6c6f 632e 676f 7620 2866 6f72 0a20 2043  loc.gov (for.  C
-00018ea0: 6f6e 7465 6e74 2d4c 616e 6775 6167 6520  ontent-Language 
-00018eb0: 6865 6164 6572 292e 0a0a 0a52 656c 6561  header)....Relea
-00018ec0: 7365 2033 2e31 3020 2872 656c 6561 7365  se 3.10 (release
-00018ed0: 2d64 6174 653a 2032 3031 322d 3036 2d31  -date: 2012-06-1
-00018ee0: 3929 0a3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  9).=============
-00018ef0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00018f00: 3d3d 3d3d 3d3d 3d3d 3d3d 0a0a 4e65 7720  ==========..New 
-00018f10: 4665 6174 7572 6573 0a2d 2d2d 2d2d 2d2d  Features.-------
-00018f20: 2d2d 2d2d 2d0a 0a2d 2041 6464 6564 2073  -----..- Added s
-00018f30: 7570 706f 7274 2066 6f72 2073 6574 7469  upport for setti
-00018f40: 6e67 2061 6e64 206c 6973 7469 6e67 2043  ng and listing C
-00018f50: 6f6e 7465 6e74 2d4c 616e 6775 6167 6520  ontent-Language 
-00018f60: 6865 6164 6572 2e0a 0a42 7567 2046 6978  header...Bug Fix
-00018f70: 6573 0a2d 2d2d 2d2d 2d2d 2d2d 0a0a 2d20  es.---------..- 
-00018f80: 4669 7865 6420 6275 6720 7468 6174 2063  Fixed bug that c
-00018f90: 6175 7365 6420 6765 7461 636c 2f73 6574  aused getacl/set
-00018fa0: 6163 6c20 636f 6d6d 616e 6473 2074 6f20  acl commands to 
-00018fb0: 6765 7420 6120 6368 6172 6163 7465 7220  get a character 
-00018fc0: 656e 636f 6469 6e67 0a20 2065 7863 6570  encoding.  excep
-00018fd0: 7469 6f6e 2077 6865 6e20 4143 4c20 636f  tion when ACL co
-00018fe0: 6e74 656e 7420 636f 6e74 6169 6e65 6420  ntent contained 
-00018ff0: 636f 6e74 656e 7420 6e6f 7420 7265 7072  content not repr
-00019000: 6573 656e 7461 626c 6520 696e 2049 534f  esentable in ISO
-00019010: 2d38 3835 392d 310a 2020 6368 6172 6163  -8859-1.  charac
-00019020: 7465 7220 7365 742e 0a2d 2046 6978 6564  ter set..- Fixed
-00019030: 2067 7375 7469 6c20 7570 6461 7465 206e   gsutil update n
-00019040: 6f74 2074 6f20 6661 696c 2075 6e64 6572  ot to fail under
-00019050: 2057 696e 646f 7773 2065 7863 6c75 7369   Windows exclusi
-00019060: 7665 2066 696c 6520 6c6f 636b 696e 672e  ve file locking.
-00019070: 0a2d 2046 6978 6564 2067 7375 7469 6c20  .- Fixed gsutil 
-00019080: 6c73 202d 4c20 746f 2063 6f6e 7469 6e75  ls -L to continu
-00019090: 6520 7061 7374 2034 3033 2065 7272 6f72  e past 403 error
-000190a0: 732e 0a2d 2055 7064 6174 6564 2067 7375  s..- Updated gsu
-000190b0: 7469 6c20 7465 7374 7320 616e 6420 616c  til tests and al
-000190c0: 736f 2068 656c 7020 6465 7620 7769 7468  so help dev with
-000190d0: 2069 6e73 7472 7563 7469 6f6e 7320 6f6e   instructions on
-000190e0: 2068 6f77 2074 6f20 7275 6e0a 2020 626f   how to run.  bo
-000190f0: 746f 2074 6573 7473 2c20 6261 7365 6420  to tests, based 
-00019100: 6f6e 2072 6563 656e 7420 7465 7374 2072  on recent test r
-00019110: 6566 6163 746f 7269 6e67 2064 6f6e 6520  efactoring done 
-00019120: 746f 2069 6e20 626f 746f 206c 6962 7261  to in boto libra
-00019130: 7279 2e0a 2d20 436c 6561 6e65 6420 7570  ry..- Cleaned up
-00019140: 2070 6172 7473 206f 6620 6370 2068 656c   parts of cp hel
-00019150: 7020 7465 7874 2e0a 0a0a 5265 6c65 6173  p text....Releas
-00019160: 6520 332e 3920 2872 656c 6561 7365 2d64  e 3.9 (release-d
-00019170: 6174 653a 2032 3031 322d 3035 2d32 3429  ate: 2012-05-24)
-00019180: 0a3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  .===============
-00019190: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000191a0: 3d3d 3d3d 3d3d 3d0a 0a42 7567 2046 6978  =======..Bug Fix
-000191b0: 6573 0a2d 2d2d 2d2d 2d2d 2d2d 0a0a 2d20  es.---------..- 
-000191c0: 4669 7865 6420 6275 6720 7468 6174 2063  Fixed bug that c
-000191d0: 6175 7365 6420 6578 7472 6120 2266 696c  aused extra "fil
-000191e0: 653a 2f22 2074 6f20 6265 2069 6e63 6c75  e:/" to be inclu
-000191f0: 6465 6420 696e 2070 6174 686e 616d 6573  ded in pathnames
-00019200: 2077 6974 680a 2020 646f 696e 6720 6773   with.  doing gs
-00019210: 7574 696c 2063 7020 2d52 206f 6e20 5769  util cp -R on Wi
-00019220: 6e64 6f77 732e 0a0a 0a52 656c 6561 7365  ndows....Release
-00019230: 2033 2e38 2028 7265 6c65 6173 652d 6461   3.8 (release-da
-00019240: 7465 3a20 3230 3132 2d30 352d 3230 290a  te: 2012-05-20).
-00019250: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00019260: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00019270: 3d3d 3d3d 3d3d 0a0a 4275 6720 4669 7865  ======..Bug Fixe
-00019280: 730a 2d2d 2d2d 2d2d 2d2d 2d0a 0a2d 2046  s.---------..- F
-00019290: 6978 6564 2070 726f 626c 656d 2077 6974  ixed problem wit
-000192a0: 6820 6e6f 6e2d 4153 4349 4920 6669 6c65  h non-ASCII file
-000192b0: 6e61 6d65 2063 6861 7261 6374 6572 7320  name characters 
-000192c0: 6e6f 7420 7365 7474 696e 6720 656e 636f  not setting enco
-000192d0: 6469 6e67 2062 6566 6f72 650a 2020 6174  ding before.  at
-000192e0: 7465 6d70 7469 6e67 2074 6f20 6861 7368  tempting to hash
-000192f0: 2066 6f72 2067 656e 6572 6174 696e 6720   for generating 
-00019300: 7265 7375 6d61 626c 6520 7472 616e 7366  resumable transf
-00019310: 6572 2066 696c 656e 616d 652e 0a0a 0a52  er filename....R
-00019320: 656c 6561 7365 2033 2e37 2028 7265 6c65  elease 3.7 (rele
-00019330: 6173 652d 6461 7465 3a20 3230 3132 2d30  ase-date: 2012-0
-00019340: 352d 3131 290a 3d3d 3d3d 3d3d 3d3d 3d3d  5-11).==========
-00019350: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00019360: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 0a0a 4275  ============..Bu
-00019370: 6720 4669 7865 730a 2d2d 2d2d 2d2d 2d2d  g Fixes.--------
-00019380: 2d0a 0a2d 2046 6978 6564 2068 616e 646c  -..- Fixed handl
-00019390: 696e 6720 6f66 2048 5454 5053 2074 756e  ing of HTTPS tun
-000193a0: 6e65 6c69 6e67 2074 6872 6f75 6768 2061  neling through a
-000193b0: 2070 726f 7879 2e0a 0a0a 5265 6c65 6173   proxy....Releas
-000193c0: 6520 332e 3620 2872 656c 6561 7365 2d64  e 3.6 (release-d
-000193d0: 6174 653a 2032 3031 322d 3035 2d30 3929  ate: 2012-05-09)
-000193e0: 0a3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  .===============
-000193f0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00019400: 3d3d 3d3d 3d3d 3d0a 0a42 7567 2046 6978  =======..Bug Fix
-00019410: 6573 0a2d 2d2d 2d2d 2d2d 2d2d 0a0a 2d20  es.---------..- 
-00019420: 4669 7865 6420 6275 6720 7468 6174 2063  Fixed bug that c
-00019430: 6175 7365 6420 7769 6c64 6361 7264 7320  aused wildcards 
-00019440: 7370 616e 6e69 6e67 2064 6972 6563 746f  spanning directo
-00019450: 7269 6573 206e 6f74 2074 6f20 776f 726b  ries not to work
-00019460: 2e0a 2d20 4669 7865 6420 6275 6720 7468  ..- Fixed bug th
-00019470: 6174 2067 7375 7469 6c20 6370 202d 7a20  at gsutil cp -z 
-00019480: 6e6f 7420 746f 2066 696e 6420 6176 6169  not to find avai
-00019490: 6c61 626c 6520 746d 7020 7370 6163 6520  lable tmp space 
-000194a0: 636f 7272 6563 746c 790a 2020 756e 6465  correctly.  unde
-000194b0: 7220 5769 6e64 6f77 732e 0a0a 0a52 656c  r Windows....Rel
-000194c0: 6561 7365 2033 2e35 2028 7265 6c65 6173  ease 3.5 (releas
-000194d0: 652d 6461 7465 3a20 3230 3132 2d30 342d  e-date: 2012-04-
-000194e0: 3330 290a 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  30).============
-000194f0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00019500: 3d3d 3d3d 3d3d 3d3d 3d3d 0a0a 5065 7266  ==========..Perf
-00019510: 6f72 6d61 6e63 6520 496d 7072 6f76 656d  ormance Improvem
-00019520: 656e 740a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ent.------------
-00019530: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 0a2d 2043  -----------..- C
-00019540: 6861 6e67 6520 6279 2045 7661 6e20 576f  hange by Evan Wo
-00019550: 726c 6579 2074 6f20 6361 6c63 756c 6174  rley to calculat
-00019560: 6520 4d44 3573 2069 6e63 7265 6d65 6e74  e MD5s increment
-00019570: 616c 6c79 2064 7572 696e 6720 7570 6c6f  ally during uplo
-00019580: 6164 7320 616e 640a 2020 646f 776e 6c6f  ads and.  downlo
-00019590: 6164 732e 2054 6869 7320 7265 6475 6365  ads. This reduce
-000195a0: 7320 6f76 6572 616c 6c20 7472 616e 7366  s overall transf
-000195b0: 6572 2074 696d 6520 7375 6273 7461 6e74  er time substant
-000195c0: 6961 6c6c 7920 666f 7220 6c61 7267 650a  ially for large.
-000195d0: 2020 6f62 6a65 6374 732e 0a0a 4275 6720    objects...Bug 
-000195e0: 4669 7865 730a 2d2d 2d2d 2d2d 2d2d 2d0a  Fixes.---------.
-000195f0: 0a2d 2046 6978 6564 2062 7567 2077 6865  .- Fixed bug whe
-00019600: 7265 2075 706c 6f61 6469 6e67 2061 6e64  re uploading and
-00019610: 206d 6f76 696e 6720 6d75 6c74 6970 6c65   moving multiple
-00019620: 2066 696c 6573 2074 6f20 6120 6275 636b   files to a buck
-00019630: 6574 2073 7562 6469 7265 6374 6f72 790a  et subdirectory.
-00019640: 2020 6469 646e 2774 2077 6f72 6b20 6173    didn't work as
-00019650: 2069 6e74 656e 6465 642e 0a20 2028 6874   intended..  (ht
-00019660: 7470 733a 2f2f 6769 7468 7562 2e63 6f6d  tps://github.com
-00019670: 2f47 6f6f 676c 6543 6c6f 7564 506c 6174  /GoogleCloudPlat
-00019680: 666f 726d 2f67 7375 7469 6c2f 6973 7375  form/gsutil/issu
-00019690: 6573 2f39 3229 2e0a 2d20 4669 7865 6420  es/92)..- Fixed 
-000196a0: 6275 6720 7768 6572 6520 6773 7574 696c  bug where gsutil
-000196b0: 2063 7020 2d72 2073 6f75 7263 6564 6972   cp -r sourcedir
-000196c0: 2064 6964 6e27 7420 636f 7079 2074 6f20   didn't copy to 
-000196d0: 7370 6563 6966 6965 6420 7375 6264 6972  specified subdir
-000196e0: 0a20 2069 6620 7468 6572 6520 6973 206f  .  if there is o
-000196f0: 6e6c 7920 6f6e 6520 6669 6c65 2069 6e20  nly one file in 
-00019700: 736f 7572 6365 6469 722e 0a2d 2046 6978  sourcedir..- Fix
-00019710: 6564 2062 7567 2077 6865 7265 2074 7261  ed bug where tra
-00019720: 636b 6572 2066 696c 6520 696e 636c 7564  cker file includ
-00019730: 6564 2061 2074 696d 6573 7461 6d70 2074  ed a timestamp t
-00019740: 6861 7420 6361 7573 6564 2069 7420 6e6f  hat caused it no
-00019750: 7420 746f 0a20 2062 6520 7265 636f 676e  t to.  be recogn
-00019760: 697a 6564 2061 6372 6f73 7320 7365 7373  ized across sess
-00019770: 696f 6e73 2e0a 2d20 4669 7865 6420 6275  ions..- Fixed bu
-00019780: 6720 7768 6572 6520 6773 3a2f 2f62 7563  g where gs://buc
-00019790: 6b65 742f 2a2f 6469 7220 7769 6c64 6361  ket/*/dir wildca
-000197a0: 7264 206d 6174 6368 6573 2074 6f6f 206d  rd matches too m
-000197b0: 616e 7920 6f62 6a65 6374 732e 0a2d 2046  any objects..- F
-000197c0: 6978 6564 2064 6f63 756d 656e 7461 7469  ixed documentati
-000197d0: 6f6e 2065 7272 6f72 7320 696e 2068 656c  on errors in hel
-000197e0: 7020 6173 736f 6369 6174 6564 2077 6974  p associated wit
-000197f0: 6820 4143 4c73 2061 6e64 2070 726f 6a65  h ACLs and proje
-00019800: 6374 732e 0a2d 2043 6861 6e67 6564 2047  cts..- Changed G
-00019810: 4353 2041 434c 2070 6172 7369 6e67 2074  CS ACL parsing t
-00019820: 6f20 6265 2063 6173 652d 696e 7365 6e73  o be case-insens
-00019830: 6974 6976 652e 0a2d 2043 6861 6e67 6564  itive..- Changed
-00019840: 206c 7320 746f 2070 7269 6e74 2065 7272   ls to print err
-00019850: 6f72 2061 6e64 2065 7869 7420 7769 7468  or and exit with
-00019860: 206e 6f6e 2d30 2073 7461 7475 7320 7768   non-0 status wh
-00019870: 656e 2077 696c 6463 6172 6420 6d61 7463  en wildcard matc
-00019880: 6865 730a 2020 6e6f 7468 696e 672c 2074  hes.  nothing, t
-00019890: 6f20 6265 206d 6f72 6520 636f 6e73 6973  o be more consis
-000198a0: 7465 6e74 2077 6974 6820 554e 4958 2073  tent with UNIX s
-000198b0: 6865 6c6c 2062 6568 6176 696f 722e 0a0a  hell behavior...
-000198c0: 0a52 656c 6561 7365 2033 2e34 2028 7265  .Release 3.4 (re
-000198d0: 6c65 6173 652d 6461 7465 3a20 3230 3132  lease-date: 2012
-000198e0: 2d30 342d 3036 290a 3d3d 3d3d 3d3d 3d3d  -04-06).========
-000198f0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00019900: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 0a0a  ==============..
-00019910: 4275 6720 4669 7865 730a 2d2d 2d2d 2d2d  Bug Fixes.------
-00019920: 2d2d 2d0a 0a2d 2046 6978 6564 2070 726f  ---..- Fixed pro
-00019930: 626c 656d 2077 6865 7265 2072 6573 756d  blem where resum
-00019940: 6162 6c65 2075 706c 6f61 6473 2f64 6f77  able uploads/dow
-00019950: 6e6c 6f61 6473 206f 6620 6f62 6a65 6374  nloads of object
-00019960: 7320 7769 7468 2076 6572 7920 6c6f 6e67  s with very long
-00019970: 0a20 206e 616d 6573 2077 6f75 6c64 2067  .  names would g
-00019980: 656e 6572 6174 6520 7472 6163 6b69 6e67  enerate tracking
-00019990: 2066 696c 6573 2077 6974 6820 6e61 6d65   files with name
-000199a0: 7320 7468 6174 2065 7863 6565 6465 6420  s that exceeded 
-000199b0: 6c6f 6361 6c20 6669 6c65 0a20 2073 7973  local file.  sys
-000199c0: 7465 6d20 6c69 6d69 7473 2c20 6d61 6b69  tem limits, maki
-000199d0: 6e67 2069 7420 696d 706f 7373 6962 6c65  ng it impossible
-000199e0: 2074 6f20 636f 6d70 6c65 7465 2072 6573   to complete res
-000199f0: 756d 6162 6c65 2074 7261 6e73 6665 7273  umable transfers
-00019a00: 2066 6f72 0a20 2074 686f 7365 206f 626a   for.  those obj
-00019a10: 6563 7473 2e20 536f 6c75 7469 6f6e 2077  ects. Solution w
-00019a20: 6173 2074 6f20 6275 696c 6420 7468 6520  as to build the 
-00019a30: 7472 6163 6b69 6e67 2066 696c 6520 6e61  tracking file na
-00019a40: 6d65 2066 726f 6d20 6120 6669 7865 640a  me from a fixed.
-00019a50: 2020 7072 6566 6978 2c20 5348 4131 2068    prefix, SHA1 h
-00019a60: 6173 6820 6f66 2074 6865 206c 6f6e 6720  ash of the long 
-00019a70: 6669 6c65 6e61 6d65 2c20 6570 6f63 6820  filename, epoch 
-00019a80: 7469 6d65 7374 616d 7020 616e 6420 6c61  timestamp and la
-00019a90: 7374 2031 360a 2020 6368 6172 7320 6f66  st 16.  chars of
-00019aa0: 2074 6865 206c 6f6e 6720 6669 6c65 6e61   the long filena
-00019ab0: 6d65 2c20 7768 6963 6820 6973 2067 7561  me, which is gua
-00019ac0: 7261 6e74 6565 2074 6f20 6265 2061 2070  rantee to be a p
-00019ad0: 7265 6469 6374 6162 6c65 2061 6e64 0a20  redictable and. 
-00019ae0: 2072 6561 736f 6e61 626c 6520 6c65 6e67   reasonable leng
-00019af0: 7468 2e0a 2d20 4669 7865 6420 6d69 6e6f  th..- Fixed mino
-00019b00: 7220 6275 6720 696e 206f 7574 7075 7420  r bug in output 
-00019b10: 6672 6f6d 2027 6773 7574 696c 2068 656c  from 'gsutil hel
-00019b20: 7020 6465 7627 2077 6869 6368 2061 6476  p dev' which adv
-00019b30: 6973 6564 2065 7865 6375 7469 6e67 0a20  ised executing. 
-00019b40: 2061 6e20 696e 636f 6e73 6571 7565 6e74   an inconsequent
-00019b50: 6961 6c20 7465 7374 2073 6372 6970 7420  ial test script 
-00019b60: 2874 6573 745f 7574 696c 2e70 7929 2e0a  (test_util.py)..
-00019b70: 0a0a 5265 6c65 6173 6520 332e 3320 2872  ..Release 3.3 (r
-00019b80: 656c 6561 7365 2d64 6174 653a 2032 3031  elease-date: 201
-00019b90: 322d 3034 2d30 3329 0a3d 3d3d 3d3d 3d3d  2-04-03).=======
-00019ba0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00019bb0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d0a  ===============.
-00019bc0: 0a42 7567 2046 6978 6573 0a2d 2d2d 2d2d  .Bug Fixes.-----
-00019bd0: 2d2d 2d2d 0a0a 2d20 4669 7865 6420 7072  ----..- Fixed pr
-00019be0: 6f62 6c65 6d20 7768 6572 6520 6773 7574  oblem where gsut
-00019bf0: 696c 2076 6572 2061 6e64 2064 6562 7567  il ver and debug
-00019c00: 2066 6c61 6773 2063 7261 7368 6564 2077   flags crashed w
-00019c10: 6865 6e20 7573 6564 0a20 2077 6974 6820  hen used.  with 
-00019c20: 6e65 776c 7920 6765 6e65 7261 7465 6420  newly generated 
-00019c30: 626f 746f 2063 6f6e 6669 6720 6669 6c65  boto config file
-00019c40: 732e 0a2d 2046 6978 6564 2067 7375 7469  s..- Fixed gsuti
-00019c50: 6c20 6275 6720 696e 2077 696e 646f 7773  l bug in windows
-00019c60: 2070 6174 6820 6861 6e64 6c69 6e67 2c20   path handling, 
-00019c70: 616e 6420 6d61 6b65 2063 6865 636b 7375  and make checksu
-00019c80: 6d6d 696e 6720 776f 726b 0a20 2061 6372  mming work.  acr
-00019c90: 6f73 7320 706c 6174 666f 726d 732e 0a2d  oss platforms..-
-00019ca0: 2046 6978 6564 2065 6e61 626c 656c 6f67   Fixed enablelog
-00019cb0: 6769 6e67 2074 6f20 7472 616e 736c 6174  ging to translat
-00019cc0: 6520 2d62 2055 5249 2070 6172 616d 2074  e -b URI param t
-00019cd0: 6f20 706c 6169 6e20 6275 636b 6574 206e  o plain bucket n
-00019ce0: 616d 6520 696e 2052 4553 540a 2020 4150  ame in REST.  AP
-00019cf0: 4920 7265 7175 6573 742e 0a0a 0a52 656c  I request....Rel
-00019d00: 6561 7365 2033 2e32 2028 7265 6c65 6173  ease 3.2 (releas
-00019d10: 652d 6461 7465 3a20 3230 3132 2d30 332d  e-date: 2012-03-
-00019d20: 3330 290a 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  30).============
-00019d30: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00019d40: 3d3d 3d3d 3d3d 3d3d 3d3d 0a0a 4275 6720  ==========..Bug 
-00019d50: 4669 7865 730a 2d2d 2d2d 2d2d 2d2d 2d0a  Fixes.---------.
-00019d60: 0a2d 2046 6978 6564 2070 726f 626c 656d  .- Fixed problem
-00019d70: 2077 6865 7265 2067 7375 7469 6c20 6469   where gsutil di
-00019d80: 646e 2774 2063 6f6e 7665 7274 2062 6574  dn't convert bet
-00019d90: 7765 656e 204f 532d 7370 6563 6966 6963  ween OS-specific
-00019da0: 2064 6972 6563 746f 7279 0a20 2073 6570   directory.  sep
-00019db0: 6172 6174 6f72 7320 7768 656e 2063 6f70  arators when cop
-00019dc0: 7969 6e67 2069 6e64 6976 6964 7561 6c6c  ying individuall
-00019dd0: 792d 6e61 6d65 6420 6669 6c65 7320 2869  y-named files (i
-00019de0: 7373 7565 2038 3729 2e0a 2d20 4669 7865  ssue 87)..- Fixe
-00019df0: 6420 7072 6f62 6c65 6d20 7768 6572 6520  d problem where 
-00019e00: 6773 7574 696c 206c 7320 2d52 2064 6964  gsutil ls -R did
-00019e10: 6e27 7420 776f 726b 2072 6967 6874 2069  n't work right i
-00019e20: 6620 7468 6572 6520 7761 7320 6120 6b65  f there was a ke
-00019e30: 790a 2020 7769 7468 2061 206c 6561 6469  y.  with a leadi
-00019e40: 6e67 2070 6174 6820 286c 696b 6520 2f66  ng path (like /f
-00019e50: 6f6f 2f62 6172 2f62 617a 290a 0a0a 5265  oo/bar/baz)...Re
-00019e60: 6c65 6173 6520 332e 3120 2872 656c 6561  lease 3.1 (relea
-00019e70: 7365 2d64 6174 653a 2032 3031 322d 3033  se-date: 2012-03
-00019e80: 2d32 3029 0a3d 3d3d 3d3d 3d3d 3d3d 3d3d  -20).===========
-00019e90: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00019ea0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d0a 0a42 7567  ===========..Bug
-00019eb0: 2046 6978 6573 0a2d 2d2d 2d2d 2d2d 2d2d   Fixes.---------
-00019ec0: 0a0a 2d20 5265 6d6f 7665 6420 6572 726f  ..- Removed erro
-00019ed0: 6e65 6f75 7320 7365 7474 696e 6720 6f66  neous setting of
-00019ee0: 2043 6f6e 7465 6e74 2d45 6e63 6f64 696e   Content-Encodin
-00019ef0: 6720 7768 656e 2061 2067 7a69 7020 6669  g when a gzip fi
-00019f00: 6c65 2069 7320 7570 6c6f 6164 6564 0a20  le is uploaded. 
-00019f10: 2028 7673 2072 756e 6e69 6e67 2067 7375   (vs running gsu
-00019f20: 7469 6c20 6370 202d 7a2c 2077 6865 6e20  til cp -z, when 
-00019f30: 436f 6e74 656e 742d 456e 636f 6469 6e67  Content-Encoding
-00019f40: 2073 686f 756c 6420 6265 2073 6574 292e   should be set).
-00019f50: 2054 6869 730a 2020 6572 726f 7220 6361   This.  error ca
-00019f60: 7573 6564 2075 7365 7273 2074 6f20 6765  used users to ge
-00019f70: 7420 6773 7574 696c 2e74 6172 2e67 7a20  t gsutil.tar.gz 
-00019f80: 6669 6c65 2075 6e63 6f6d 7072 6573 7365  file uncompresse
-00019f90: 6420 6279 2074 6865 2075 7365 720a 2020  d by the user.  
-00019fa0: 6167 656e 7420 286c 696b 6520 7767 6574  agent (like wget
-00019fb0: 2920 7768 696c 6520 646f 776e 6c6f 6164  ) while download
-00019fc0: 696e 672c 206d 616b 696e 6720 7468 6520  ing, making the 
-00019fd0: 6669 6c65 2061 7070 6561 7220 746f 2062  file appear to b
-00019fe0: 6520 6f66 2074 6865 0a20 2077 726f 6e67  e of the.  wrong
-00019ff0: 2073 697a 652f 636f 6e74 656e 742e 0a2d   size/content..-
-0001a000: 2046 6978 6564 2068 616e 646c 696e 6720   Fixed handling 
-0001a010: 6f66 2067 7375 7469 6c20 6865 6c70 2066  of gsutil help f
-0001a020: 6f72 2057 696e 646f 7773 2028 7072 6576  or Windows (prev
-0001a030: 696f 7573 2063 6f64 6520 6465 7065 6e64  ious code depend
-0001a040: 6564 206f 6e0a 2020 7465 726d 696f 7320  ed on.  termios 
-0001a050: 616e 6420 6663 6e74 6c20 6c69 6273 2c20  and fcntl libs, 
-0001a060: 7768 6963 6820 6172 6520 4c69 6e75 782f  which are Linux/
-0001a070: 4d61 634f 532d 7370 6563 6966 6963 292e  MacOS-specific).
-0001a080: 0a0a 0a52 656c 6561 7365 2033 2e30 2028  ...Release 3.0 (
-0001a090: 7265 6c65 6173 652d 6461 7465 3a20 3230  release-date: 20
-0001a0a0: 3132 2d30 332d 3230 290a 3d3d 3d3d 3d3d  12-03-20).======
-0001a0b0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0001a0c0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0001a0d0: 0a0a 496d 706f 7274 616e 7420 4e6f 7465  ..Important Note
-0001a0e0: 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  s.--------------
-0001a0f0: 2d0a 0a2d 2042 6163 6b77 6172 6473 2d69  -..- Backwards-i
-0001a100: 6e63 6f6d 7061 7469 626c 6520 7769 6c64  ncompatible wild
-0001a110: 6361 7264 2063 6861 6e67 653a 0a20 2054  card change:.  T
-0001a120: 6865 2027 2a27 2077 696c 6463 6172 6420  he '*' wildcard 
-0001a130: 6e6f 7720 6f6e 6c79 206d 6174 6368 6573  now only matches
-0001a140: 206f 626a 6563 7473 2077 6974 6869 6e20   objects within 
-0001a150: 6120 6275 636b 6574 2064 6972 6563 746f  a bucket directo
-0001a160: 7279 2e20 4966 0a20 2079 6f75 2068 6176  ry. If.  you hav
-0001a170: 6520 7363 7269 7074 7320 7468 6174 2064  e scripts that d
-0001a180: 6570 656e 6420 6f6e 2062 6569 6e67 2061  epend on being a
-0001a190: 626c 6520 746f 206d 6174 6368 2073 7061  ble to match spa
-0001a1a0: 6e6e 696e 6720 6d75 6c74 6970 6c65 0a20  nning multiple. 
-0001a1b0: 2064 6972 6563 746f 7269 6573 2079 6f75   directories you
-0001a1c0: 206e 6565 6420 746f 2075 7365 2027 2a2a   need to use '**
-0001a1d0: 2720 696e 7374 6561 642e 2046 6f72 2065  ' instead. For e
-0001a1e0: 7861 6d70 6c65 2c20 7468 6520 636f 6d6d  xample, the comm
-0001a1f0: 616e 643a 0a0a 2020 2020 2020 2020 6773  and:..        gs
-0001a200: 7574 696c 2063 7020 6773 3a2f 2f62 7563  util cp gs://buc
-0001a210: 6b65 742f 2a2e 7478 740a 0a20 2077 696c  ket/*.txt..  wil
-0001a220: 6c20 6e6f 7720 6f6e 6c79 206d 6174 6368  l now only match
-0001a230: 202e 7478 7420 6669 6c65 7320 696e 2074   .txt files in t
-0001a240: 6865 2074 6f70 2d6c 6576 656c 2064 6972  he top-level dir
-0001a250: 6563 746f 7279 2e0a 0a20 2020 2020 2020  ectory...       
-0001a260: 2067 7375 7469 6c20 6370 2067 733a 2f2f   gsutil cp gs://
-0001a270: 6275 636b 6574 2f2a 2a2e 7478 740a 0a20  bucket/**.txt.. 
-0001a280: 2077 696c 6c20 6d61 7463 6820 6163 726f   will match acro
-0001a290: 7373 2061 6c6c 2064 6972 6563 746f 7269  ss all directori
-0001a2a0: 6573 2e0a 2d20 6773 7574 696c 206c 7320  es..- gsutil ls 
-0001a2b0: 6e6f 7720 6c69 7374 7320 6f6e 6520 6469  now lists one di
-0001a2c0: 7265 6374 6f72 7920 6174 2061 2074 696d  rectory at a tim
-0001a2d0: 652e 2049 6620 796f 7520 7761 6e74 2074  e. If you want t
-0001a2e0: 6f20 6c69 7374 2061 6c6c 206f 626a 6563  o list all objec
-0001a2f0: 7473 0a20 2069 6e20 6120 6275 636b 6574  ts.  in a bucket
-0001a300: 2c20 796f 7520 6361 6e20 7573 653a 0a0a  , you can use:..
-0001a310: 2020 2020 2020 2020 6773 7574 696c 206c          gsutil l
-0001a320: 7320 6773 3a2f 2f62 7563 6b65 742f 2a2a  s gs://bucket/**
-0001a330: 0a0a 2020 6f72 3a0a 0a20 2020 2020 2020  ..  or:..       
-0001a340: 2067 7375 7469 6c20 6c73 202d 5220 6773   gsutil ls -R gs
-0001a350: 3a2f 2f62 7563 6b65 740a 0a4e 6577 2046  ://bucket..New F
-0001a360: 6561 7475 7265 730a 2d2d 2d2d 2d2d 2d2d  eatures.--------
-0001a370: 2d2d 2d2d 0a0a 2d20 4275 696c 742d 696e  ----..- Built-in
-0001a380: 2068 656c 7020 666f 7220 616c 6c20 636f   help for all co
-0001a390: 6d6d 616e 6473 2061 6e64 206d 616e 7920  mmands and many 
-0001a3a0: 6164 6469 7469 6f6e 616c 2074 6f70 6963  additional topic
-0001a3b0: 732e 2054 7279 0a20 2022 6773 7574 696c  s. Try.  "gsutil
-0001a3c0: 2068 656c 7022 2066 6f72 2061 206c 6973   help" for a lis
-0001a3d0: 7420 6f66 2061 7661 696c 6162 6c65 2063  t of available c
-0001a3e0: 6f6d 6d61 6e64 7320 616e 6420 746f 7069  ommands and topi
-0001a3f0: 6373 2e0a 2d20 4120 6e65 7720 6869 6572  cs..- A new hier
-0001a400: 6172 6368 6963 616c 2066 696c 6520 7472  archical file tr
-0001a410: 6565 2061 6273 7472 6163 7469 6f6e 206c  ee abstraction l
-0001a420: 6179 6572 2c20 7768 6963 6820 6d61 6b65  ayer, which make
-0001a430: 7320 7468 6520 666c 6174 2062 7563 6b65  s the flat bucke
-0001a440: 740a 2020 6e61 6d65 2073 7061 6365 206c  t.  name space l
-0001a450: 6f6f 6b20 6c69 6b65 2061 2068 6965 7261  ook like a hiera
-0001a460: 7263 6869 6361 6c20 6669 6c65 2074 7265  rchical file tre
-0001a470: 652e 2054 6869 7320 6d61 6b65 7320 7365  e. This makes se
-0001a480: 7665 7261 6c20 7468 696e 6773 0a20 2070  veral things.  p
-0001a490: 6f73 7369 626c 653a 0a20 202d 2063 6f70  ossible:.  - cop
-0001a4a0: 7969 6e67 2064 6174 6120 746f 2f66 726f  ying data to/fro
-0001a4b0: 6d20 6275 636b 6574 2073 7562 2d64 6972  m bucket sub-dir
-0001a4c0: 6563 746f 7269 6573 2028 7365 6520 e280  ectories (see ..
-0001a4d0: 9c67 7375 7469 6c20 6865 6c70 2063 70e2  .gsutil help cp.
-0001a4e0: 809d 292e 0a20 202d 2064 6973 7472 6962  ..)..  - distrib
-0001a4f0: 7574 696e 6720 6c61 7267 6520 7570 6c6f  uting large uplo
-0001a500: 6164 732f 646f 776e 6c6f 6164 7320 6163  ads/downloads ac
-0001a510: 726f 7373 206d 616e 7920 6d61 6368 696e  ross many machin
-0001a520: 6573 0a20 2020 2028 7365 6520 e280 9c67  es.    (see ...g
-0001a530: 7375 7469 6c20 6865 6c70 2063 70e2 809d  sutil help cp...
-0001a540: 290a 2020 2d20 7265 6e61 6d69 6e67 2062  ).  - renaming b
-0001a550: 7563 6b65 7420 7375 622d 6469 7265 6374  ucket sub-direct
-0001a560: 6f72 6965 7320 2873 6565 20e2 809c 6773  ories (see ...gs
-0001a570: 7574 696c 2068 656c 7020 6d76 e280 9d29  util help mv...)
-0001a580: 2e0a 2020 2d20 6c69 7374 696e 6720 696e  ..  - listing in
-0001a590: 6469 7669 6475 616c 2062 7563 6b65 7420  dividual bucket 
-0001a5a0: 7375 622d 6469 7265 6374 6f72 6965 7320  sub-directories 
-0001a5b0: 616e 6420 666f 7220 6c69 7374 696e 6720  and for listing 
-0001a5c0: 6469 7265 6374 6f72 6965 730a 2020 2020  directories.    
-0001a5d0: 7265 6375 7273 6976 656c 7920 2873 6565  recursively (see
-0001a5e0: 20e2 809c 6773 7574 696c 2068 656c 7020   ...gsutil help 
-0001a5f0: 6c73 e280 9d29 2e0a 2020 2d20 7365 7474  ls...)..  - sett
-0001a600: 696e 6720 4143 4c73 2066 6f72 206f 626a  ing ACLs for obj
-0001a610: 6563 7473 2069 6e20 6120 7375 622d 6469  ects in a sub-di
-0001a620: 7265 6374 6f72 7920 2873 6565 20e2 809c  rectory (see ...
-0001a630: 6773 7574 696c 2068 656c 7020 7365 7461  gsutil help seta
-0001a640: 636c e280 9d29 2e0a 0a2d 2053 7570 706f  cl...)...- Suppo
-0001a650: 7274 2066 6f72 2070 6572 2d64 6972 6563  rt for per-direc
-0001a660: 746f 7279 2028 2a29 2061 6e64 2072 6563  tory (*) and rec
-0001a670: 7572 7369 7665 2028 2a2a 2920 7769 6c64  ursive (**) wild
-0001a680: 6361 7264 732e 2045 7373 656e 7469 616c  cards. Essential
-0001a690: 6c79 2c0a 2020 2a2a 2077 6f72 6b73 2074  ly,.  ** works t
-0001a6a0: 6865 2077 6179 202a 2064 6964 2069 6e20  he way * did in 
-0001a6b0: 7072 6576 696f 7573 2067 7375 7469 6c20  previous gsutil 
-0001a6c0: 7265 6c65 6173 6573 2c20 616e 6420 2a20  releases, and * 
-0001a6d0: 6e6f 7720 6265 6861 7665 730a 2020 636f  now behaves.  co
-0001a6e0: 6e73 6973 7465 6e74 6c79 2077 6974 6820  nsistently with 
-0001a6f0: 686f 7720 6974 2077 6f72 6b73 2069 6e20  how it works in 
-0001a700: 636f 6d6d 616e 6420 696e 7465 7270 7265  command interpre
-0001a710: 7465 7273 2028 6c69 6b65 2062 6173 6829  ters (like bash)
-0001a720: 2e20 5468 650a 2020 6162 696c 6974 7920  . The.  ability 
-0001a730: 746f 2073 7065 6369 6679 2064 6972 6563  to specify direc
-0001a740: 746f 7279 2d6f 6e6c 7920 7769 6c64 6361  tory-only wildca
-0001a750: 7264 7320 616c 736f 2065 6e61 626c 6573  rds also enables
-0001a760: 2061 206e 756d 6265 7220 6f66 2075 7365   a number of use
-0001a770: 0a20 2063 6173 6573 2c20 7375 6368 2061  .  cases, such a
-0001a780: 7320 6469 7374 7269 6275 7469 6e67 206c  s distributing l
-0001a790: 6172 6765 2075 706c 6f61 6473 2f64 6f77  arge uploads/dow
-0001a7a0: 6e6c 6f61 6473 2062 7920 7769 6c64 6361  nloads by wildca
-0001a7b0: 7264 6564 206e 616d 652e 2053 6565 0a20  rded name. See. 
-0001a7c0: 2022 6773 7574 696c 2068 656c 7020 7769   "gsutil help wi
-0001a7d0: 6c64 6361 7264 7322 2066 6f72 2064 6574  ldcards" for det
-0001a7e0: 6169 6c73 2e0a 2d20 5375 7070 6f72 7420  ails..- Support 
-0001a7f0: 666f 7220 4372 6f73 732d 4f72 6967 696e  for Cross-Origin
-0001a800: 2052 6573 6f75 7263 6520 5368 6172 696e   Resource Sharin
-0001a810: 6720 2843 4f52 5329 2063 6f6e 6669 6775  g (CORS) configu
-0001a820: 7261 7469 6f6e 2e20 5365 6520 2267 7375  ration. See "gsu
-0001a830: 7469 6c0a 2020 6865 6c70 2063 6f72 7322  til.  help cors"
-0001a840: 2066 6f72 2064 6574 6169 6c73 2e0a 2d20   for details..- 
-0001a850: 5375 7070 6f72 7420 666f 7220 6d75 6c74  Support for mult
-0001a860: 692d 7468 7265 6164 696e 6720 616e 6420  i-threading and 
-0001a870: 7265 6375 7273 6976 6520 6f70 6572 6174  recursive operat
-0001a880: 696f 6e20 666f 7220 7365 7461 636c 2063  ion for setacl c
-0001a890: 6f6d 6d61 6e64 0a20 2028 7365 6520 e280  ommand.  (see ..
-0001a8a0: 9c67 7375 7469 6c20 6865 6c70 2073 6574  .gsutil help set
-0001a8b0: 6163 6ce2 809d 292e 0a2d 2041 6269 6c69  acl...)..- Abili
-0001a8c0: 7479 2074 6f20 7573 6520 7468 6520 554e  ty to use the UN
-0001a8d0: 4958 2027 6669 6c65 2720 636f 6d6d 616e  IX 'file' comman
-0001a8e0: 6420 746f 2064 6f20 636f 6e74 656e 7420  d to do content 
-0001a8f0: 7479 7065 2072 6563 6f67 6e69 7469 6f6e  type recognition
-0001a900: 2061 730a 2020 616e 2061 6c74 6572 6e61   as.  an alterna
-0001a910: 7469 7665 2074 6f20 6669 6c65 6e61 6d65  tive to filename
-0001a920: 2065 7874 656e 7369 6f6e 732e 0a2d 2049   extensions..- I
-0001a930: 6e74 726f 6475 6374 696f 6e20 6f66 206e  ntroduction of n
-0001a940: 6577 2065 6e64 2d74 6f2d 656e 6420 7465  ew end-to-end te
-0001a950: 7374 2073 7569 7465 2e0a 2d20 5468 6520  st suite..- The 
-0001a960: 6773 7574 696c 2076 6572 7369 6f6e 2063  gsutil version c
-0001a970: 6f6d 6d61 6e64 206e 6f77 2063 6f6d 7075  ommand now compu
-0001a980: 7465 7320 6120 6368 6563 6b73 756d 206f  tes a checksum o
-0001a990: 6620 7468 6520 636f 6465 2c20 746f 2064  f the code, to d
-0001a9a0: 6574 6563 740a 2020 636f 7272 7570 7469  etect.  corrupti
-0001a9b0: 6f6e 2061 6e64 206c 6f63 616c 206d 6f64  on and local mod
-0001a9c0: 6966 6963 6174 696f 6e20 7768 656e 2061  ification when a
-0001a9d0: 7373 6973 7469 6e67 2077 6974 6820 7465  ssisting with te
-0001a9e0: 6368 6e69 6361 6c20 7375 7070 6f72 742e  chnical support.
-0001a9f0: 0a2d 2054 6865 2067 7375 7469 6c20 7570  .- The gsutil up
-0001aa00: 6461 7465 2063 6f6d 6d61 6e64 2069 7320  date command is 
-0001aa10: 6e6f 206c 6f6e 6765 7220 6265 7461 2f65  no longer beta/e
-0001aa20: 7870 6572 696d 656e 7461 6c2c 2061 6e64  xperimental, and
-0001aa30: 206e 6f77 2061 6c73 6f0a 2020 7375 7070   now also.  supp
-0001aa40: 6f72 7473 2075 7064 6174 696e 6720 6672  orts updating fr
-0001aa50: 6f6d 206e 616d 6564 2055 5249 7320 2866  om named URIs (f
-0001aa60: 6f72 2065 6172 6c79 2f74 6573 7420 7265  or early/test re
-0001aa70: 6c65 6173 6573 292e 0a2d 2043 6861 6e67  leases)..- Chang
-0001aa80: 6564 2067 7375 7469 6c20 6c73 202d 4c20  ed gsutil ls -L 
-0001aa90: 746f 2061 6c73 6f20 7072 696e 7420 436f  to also print Co
-0001aaa0: 6e74 656e 742d 4469 7370 6f73 6974 696f  ntent-Dispositio
-0001aab0: 6e20 6865 6164 6572 2e0a 0a42 7567 2046  n header...Bug F
-0001aac0: 6978 6573 0a2d 2d2d 2d2d 2d2d 2d2d 0a0a  ixes.---------..
-0001aad0: 2d20 5468 6520 6773 7574 696c 2063 7020  - The gsutil cp 
-0001aae0: 2d74 206f 7074 696f 6e20 7072 6576 696f  -t option previo
-0001aaf0: 7573 6c79 2064 6964 6e27 7420 776f 726b  usly didn't work
-0001ab00: 2061 7320 646f 6375 6d65 6e74 6564 2c20   as documented, 
-0001ab10: 616e 6420 696e 7374 6561 640a 2020 436f  and instead.  Co
-0001ab20: 6e74 656e 742d 5479 7065 2077 6173 2061  ntent-Type was a
-0001ab30: 6c77 6179 7320 6465 7465 6374 6564 2062  lways detected b
-0001ab40: 6173 6564 206f 6e20 6669 6c65 6e61 6d65  ased on filename
-0001ab50: 2065 7874 656e 7369 6f6e 2e20 436f 6e74   extension. Cont
-0001ab60: 656e 742d 5479 7065 0a20 2064 6574 6563  ent-Type.  detec
-0001ab70: 7469 6f6e 2069 7320 6e6f 7720 7468 6520  tion is now the 
-0001ab80: 6465 6661 756c 742c 2074 6865 202d 7420  default, the -t 
-0001ab90: 6f70 7469 6f6e 2069 7320 6465 7072 6563  option is deprec
-0001aba0: 6174 6564 2028 746f 2062 6520 7265 6d6f  ated (to be remo
-0001abb0: 7665 6420 696e 0a20 2074 6865 2066 7574  ved in.  the fut
-0001abc0: 7572 6529 2c20 616e 6420 7370 6563 6966  ure), and specif
-0001abd0: 7969 6e67 2061 202d 6820 436f 6e74 656e  ying a -h Conten
-0001abe0: 742d 5479 7065 2068 6561 6465 7220 6e6f  t-Type header no
-0001abf0: 7720 636f 7272 6563 746c 7920 6f76 6572  w correctly over
-0001ac00: 7269 6465 730a 2020 7468 6520 6669 6c65  rides.  the file
-0001ac10: 6e61 6d65 2065 7874 656e 7369 6f6e 2062  name extension b
-0001ac20: 6173 6564 2068 616e 646c 696e 672e 2046  ased handling. F
-0001ac30: 6f72 2064 6574 6169 6c73 2073 6565 2022  or details see "
-0001ac40: 6773 7574 696c 2068 656c 700a 2020 6d65  gsutil help.  me
-0001ac50: 7461 6461 7461 222e 0a2d 2046 6978 6564  tadata"..- Fixed
-0001ac60: 2062 7567 2074 6861 7420 6361 7573 6564   bug that caused
-0001ac70: 206d 756c 7469 2d74 6872 6561 6465 6420   multi-threaded 
-0001ac80: 6d76 2063 6f6d 6d61 6e64 206e 6f74 2074  mv command not t
-0001ac90: 6f20 7065 7263 6f6c 6174 6520 6661 696c  o percolate fail
-0001aca0: 7572 6573 0a20 2064 7572 696e 6720 7468  ures.  during th
-0001acb0: 6520 6370 2070 6861 7365 2074 6f20 7468  e cp phase to th
-0001acc0: 6520 726d 2070 6861 7365 2c20 7768 6963  e rm phase, whic
-0001acd0: 6820 636f 756c 6420 756e 6465 7220 736f  h could under so
-0001ace0: 6d65 2063 6972 6375 6d73 7461 6e63 6573  me circumstances
-0001acf0: 0a20 2063 6175 7365 2064 6174 6120 7468  .  cause data th
-0001ad00: 6174 2077 6173 206e 6f74 2063 6f70 6965  at was not copie
-0001ad10: 6420 746f 2062 6520 6465 6c65 7465 642e  d to be deleted.
-0001ad20: 0a2d 2046 6978 6564 2062 7567 2074 6861  .- Fixed bug tha
-0001ad30: 7420 6361 7573 6564 2067 7375 7469 6c20  t caused gsutil 
-0001ad40: 746f 2075 7365 2047 4554 2066 6f72 206c  to use GET for l
-0001ad50: 7320 2d4c 2072 6571 7565 7374 732e 2049  s -L requests. I
-0001ad60: 7420 6e6f 7720 7573 6573 2048 4541 440a  t now uses HEAD.
-0001ad70: 2020 666f 7220 6c73 202d 4c20 7265 7175    for ls -L requ
-0001ad80: 6573 7473 2c20 7768 6963 6820 6973 206d  ests, which is m
-0001ad90: 6f72 6520 6566 6669 6369 656e 7420 616e  ore efficient an
-0001ada0: 6420 6661 7374 6572 2e0a 2d20 4669 7865  d faster..- Fixe
-0001adb0: 6420 6275 6720 7468 6174 2063 6175 7365  d bug that cause
-0001adc0: 6420 6773 7574 696c 206e 6f74 2074 6f20  d gsutil not to 
-0001add0: 7072 6573 6572 7665 206d 6574 6164 6174  preserve metadat
-0001ade0: 6120 6475 7269 6e67 0a20 2063 6f70 792d  a during.  copy-
-0001adf0: 696e 2d74 6865 2d63 6c6f 7564 2e0a 2d20  in-the-cloud..- 
-0001ae00: 4669 7865 6420 6275 6720 7468 6174 2070  Fixed bug that p
-0001ae10: 7265 7665 6e74 6564 2073 6574 6163 6c20  revented setacl 
-0001ae20: 636f 6d6d 616e 6420 6672 6f6d 2061 6c6c  command from all
-0001ae30: 6f77 696e 6720 4469 7370 6c61 794e 616d  owing DisplayNam
-0001ae40: 6527 7320 696e 2041 434c 732e 0a2d 2046  e's in ACLs..- F
-0001ae50: 6978 6564 2062 7567 2074 6861 7420 6361  ixed bug that ca
-0001ae60: 7573 6564 2067 7375 7469 6c2f 626f 746f  used gsutil/boto
-0001ae70: 2074 6f20 7375 7070 7265 7373 2063 6f6e   to suppress con
-0001ae80: 7365 6375 7469 7665 2073 6c61 7368 6573  secutive slashes
-0001ae90: 2069 6e20 7061 7468 0a20 206e 616d 6573   in path.  names
-0001aea0: 2e0a 2d20 4669 7865 6420 7370 6563 2d6e  ..- Fixed spec-n
-0001aeb0: 6f6e 2d63 6f6d 706c 6961 6e74 2055 5249  on-compliant URI
-0001aec0: 2063 6f6e 7374 7275 6374 696f 6e20 666f   construction fo
-0001aed0: 7220 7265 7375 6d61 626c 6520 7570 6c6f  r resumable uplo
-0001aee0: 6164 732e 0a2d 2046 6978 6564 2062 7567  ads..- Fixed bug
-0001aef0: 2074 6861 7420 6361 7573 6564 2072 6d20   that caused rm 
-0001af00: 2d66 206e 6f74 2074 6f20 776f 726b 2e0a  -f not to work..
-0001af10: 2d20 4669 7865 6420 556e 6963 6f64 6545  - Fixed UnicodeE
-0001af20: 6e63 6f64 6545 7272 6f72 2074 6861 7420  ncodeError that 
-0001af30: 6861 7070 656e 6564 2077 6865 6e20 7265  happened when re
-0001af40: 6469 7265 6374 696e 6720 6773 7574 696c  directing gsutil
-0001af50: 206c 7320 6f75 7470 7574 0a20 2074 6f20   ls output.  to 
-0001af60: 6120 6669 6c65 2077 6974 6820 6e6f 6e2d  a file with non-
-0001af70: 4153 4349 4920 6f62 6a65 6374 206e 616d  ASCII object nam
-0001af80: 6573 2e0a 0a4f 7468 6572 2043 6861 6e67  es...Other Chang
-0001af90: 6573 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  es.-------------
-0001afa0: 0a0a 2d20 5573 6572 4167 656e 7420 7365  ..- UserAgent se
-0001afb0: 6e74 2069 6e20 4854 5450 2072 6571 7565  nt in HTTP reque
-0001afc0: 7374 7320 6e6f 7720 696e 636c 7564 6573  sts now includes
-0001afd0: 2067 7375 7469 6c20 7665 7273 696f 6e20   gsutil version 
-0001afe0: 6e75 6d62 6572 2061 6e64 204f 530a 2020  number and OS.  
-0001aff0: 6e61 6d65 2e0a 2d20 5374 6172 7469 6e67  name..- Starting
-0001b000: 2077 6974 6820 7468 6973 2072 656c 6561   with this relea
-0001b010: 7365 2075 7365 7273 2061 7265 2061 626c  se users are abl
-0001b020: 6520 746f 2067 6574 2069 6e64 6976 6964  e to get individ
-0001b030: 7561 6c20 6e61 6d65 6420 7265 6c65 6173  ual named releas
-0001b040: 6573 0a20 2066 726f 6d20 7665 7273 696f  es.  from versio
-0001b050: 6e2d 6e61 6d65 6420 6f62 6a65 6374 733a  n-named objects:
-0001b060: 2067 733a 2f2f 7075 622f 6773 7574 696c   gs://pub/gsutil
-0001b070: 5f3c 7665 7273 696f 6e3e 2e74 6172 2e67  _<version>.tar.g
-0001b080: 7a0a 2020 616e 6420 6773 3a2f 2f70 7562  z.  and gs://pub
-0001b090: 2f67 7375 7469 6c5f 3c76 6572 7369 6f6e  /gsutil_<version
-0001b0a0: 3e2e 7a69 702e 2054 6865 2076 6572 7369  >.zip. The versi
-0001b0b0: 6f6e 2d6c 6573 7320 636f 756e 7465 7270  on-less counterp
-0001b0c0: 6172 7473 0a20 2028 6773 3a2f 2f70 7562  arts.  (gs://pub
-0001b0d0: 2f67 7375 7469 6c2e 7461 722e 677a 2061  /gsutil.tar.gz a
-0001b0e0: 6e64 2067 733a 2f2f 7075 622f 6773 7574  nd gs://pub/gsut
-0001b0f0: 696c 2e7a 6970 2920 7769 6c6c 2063 6f6e  il.zip) will con
-0001b100: 7461 696e 2074 6865 206c 6174 6573 740a  tain the latest.
-0001b110: 2020 7265 6c65 6173 652e 2041 6c73 6f2c    release. Also,
-0001b120: 2074 6865 2067 733a 2f2f 7075 6220 6275   the gs://pub bu
-0001b130: 636b 6574 2069 7320 6e6f 7720 7075 626c  cket is now publ
-0001b140: 6963 6c79 2072 6561 6461 626c 6520 2873  icly readable (s
-0001b150: 6f2c 2061 6e79 6f6e 650a 2020 6361 6e20  o, anyone.  can 
-0001b160: 6c69 7374 2069 7473 2063 6f6e 7465 6e74  list its content
-0001b170: 7329 2e0a 0a0a 5265 6c65 6173 6520 322e  s)....Release 2.
-0001b180: 3020 2872 656c 6561 7365 2d64 6174 653a  0 (release-date:
-0001b190: 2032 3031 322d 3031 2d31 3329 0a3d 3d3d   2012-01-13).===
-0001b1a0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0001b1b0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0001b1c0: 3d3d 3d0a 0a4e 6577 2046 6561 7475 7265  ===..New Feature
-0001b1d0: 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a0a  s.------------..
-0001b1e0: 2d20 5375 7070 6f72 7420 666f 7220 7477  - Support for tw
-0001b1f0: 6f20 6e65 7720 696e 7374 616c 6c61 7469  o new installati
-0001b200: 6f6e 206d 6f64 6573 3a20 656e 7465 7270  on modes: enterp
-0001b210: 7269 7365 2061 6e64 2052 504d 2e0a 2020  rise and RPM..  
-0001b220: 4375 7374 6f6d 6572 7320 6361 6e20 6e6f  Customers can no
-0001b230: 7720 696e 7374 616c 6c20 6773 7574 696c  w install gsutil
-0001b240: 206f 6e65 206f 6620 7468 7265 6520 7761   one of three wa
-0001b250: 7973 3a0a 2020 2d20 496e 6469 7669 6475  ys:.  - Individu
-0001b260: 616c 2075 7365 7220 6d6f 6465 2028 7072  al user mode (pr
-0001b270: 6576 696f 7573 6c79 2074 6865 206f 6e6c  eviously the onl
-0001b280: 7920 6176 6169 6c61 626c 6520 6d6f 6465  y available mode
-0001b290: 293a 2075 6e70 6163 6b69 6e67 2066 726f  ): unpacking fro
-0001b2a0: 6d0a 2020 2020 6120 677a 6970 7065 6420  m.    a gzipped 
-0001b2b0: 7461 7262 616c 6c20 2867 733a 2f2f 7075  tarball (gs://pu
-0001b2c0: 622f 6773 7574 696c 2e74 6172 2e67 7a29  b/gsutil.tar.gz)
-0001b2d0: 206f 7220 7a69 7020 6669 6c65 0a20 2020   or zip file.   
-0001b2e0: 2028 6773 3a2f 2f70 7562 2f67 7375 7469   (gs://pub/gsuti
-0001b2f0: 6c2e 7a69 7029 2061 6e64 2072 756e 6e69  l.zip) and runni
-0001b300: 6e67 2074 6865 2067 7375 7469 6c20 636f  ng the gsutil co
-0001b310: 6d6d 616e 6420 696e 2070 6c61 6365 2069  mmand in place i
-0001b320: 6e20 7468 650a 2020 2020 756e 7061 636b  n the.    unpack
-0001b330: 6564 2067 7375 7469 6c20 6469 7265 6374  ed gsutil direct
-0001b340: 6f72 792e 0a20 202d 2045 6e74 6572 7072  ory..  - Enterpr
-0001b350: 6973 6520 6d6f 6465 2028 6e65 7729 3a20  ise mode (new): 
-0001b360: 756e 7061 636b 696e 6720 6173 2061 626f  unpacking as abo
-0001b370: 7665 2c20 616e 6420 7468 656e 2072 756e  ve, and then run
-0001b380: 6e69 6e67 2074 6865 2073 6574 7570 2e70  ning the setup.p
-0001b390: 790a 2020 2020 7363 7269 7074 2069 6e20  y.    script in 
-0001b3a0: 7468 6520 756e 7061 636b 6564 2067 7375  the unpacked gsu
-0001b3b0: 7469 6c20 6469 7265 6374 6f72 792e 2054  til directory. T
-0001b3c0: 6869 7320 616c 6c6f 7773 2061 2073 7973  his allows a sys
-0001b3d0: 7465 6d73 0a20 2020 2061 646d 696e 6973  tems.    adminis
-0001b3e0: 7472 6174 6f72 2074 6f20 696e 7374 616c  trator to instal
-0001b3f0: 6c20 6773 7574 696c 2069 6e20 6120 6365  l gsutil in a ce
-0001b400: 6e74 7261 6c20 6c6f 6361 7469 6f6e 2c20  ntral location, 
-0001b410: 7573 696e 6720 7468 6520 5079 7468 6f6e  using the Python
-0001b420: 0a20 2020 2064 6973 7475 7469 6c73 2066  .    distutils f
-0001b430: 6163 696c 6974 792e 2054 6869 7320 6d6f  acility. This mo
-0001b440: 6465 2069 7320 7375 7070 6f72 7465 6420  de is supported 
-0001b450: 6f6e 6c79 206f 6e20 4c69 6e75 7820 616e  only on Linux an
-0001b460: 6420 4d61 634f 532e 0a20 202d 2052 504d  d MacOS..  - RPM
-0001b470: 206d 6f64 6520 286e 6577 292e 2041 2052   mode (new). A R
-0001b480: 6564 4861 7420 5250 4d20 6361 6e20 6265  edHat RPM can be
-0001b490: 2062 7569 6c74 2066 726f 6d20 7468 6520   built from the 
-0001b4a0: 6773 7574 696c 2e73 7065 632e 696e 2066  gsutil.spec.in f
-0001b4b0: 696c 650a 2020 2020 696e 2074 6865 2075  ile.    in the u
-0001b4c0: 6e70 6163 6b65 6420 6773 7574 696c 2064  npacked gsutil d
-0001b4d0: 6972 6563 746f 7279 2c20 616c 6c6f 7769  irectory, allowi
-0001b4e0: 6e67 2069 7420 746f 2062 6520 696e 7374  ng it to be inst
-0001b4f0: 616c 6c65 6420 6173 2070 6172 7420 6f66  alled as part of
-0001b500: 0a20 2020 2061 2052 6564 4861 7420 6275  .    a RedHat bu
-0001b510: 696c 642e 0a0a 2d20 4e6f 7465 3a20 7632  ild...- Note: v2
-0001b520: 2e30 2069 7320 7468 6520 6669 7273 7420  .0 is the first 
-0001b530: 6e75 6d62 6572 6564 2067 7375 7469 6c20  numbered gsutil 
-0001b540: 7265 6c65 6173 652e 2050 7265 7669 6f75  release. Previou
-0001b550: 7320 7265 6c65 6173 6573 0a20 2077 6572  s releases.  wer
-0001b560: 6520 6769 7665 6e20 7469 6d65 7374 616d  e given timestam
-0001b570: 7073 2066 6f72 2076 6572 7369 6f6e 732e  ps for versions.
-0001b580: 204e 756d 6265 7265 6420 7265 6c65 6173   Numbered releas
-0001b590: 6573 2065 6e61 626c 6520 646f 776e 7374  es enable downst
-0001b5a0: 7265 616d 0a20 2070 6163 6b61 6765 2062  ream.  package b
-0001b5b0: 7569 6c64 7320 286c 696b 6520 5250 4d73  uilds (like RPMs
-0001b5c0: 2920 746f 2064 6566 696e 6520 6465 7065  ) to define depe
-0001b5d0: 6e64 656e 6369 6573 206d 6f72 6520 6561  ndencies more ea
-0001b5e0: 7369 6c79 2e0a 2020 5468 6973 2069 7320  sily..  This is 
-0001b5f0: 616c 736f 2074 6865 2066 6972 7374 2076  also the first v
-0001b600: 6572 7369 6f6e 2077 6865 7265 2077 6520  ersion where we 
-0001b610: 6265 6761 6e20 696e 636c 7564 696e 6720  began including 
-0001b620: 7265 6c65 6173 6520 6e6f 7465 732e 0a    release notes..
+000158d0: 3d0a 0a42 7567 2046 6978 6573 0a2d 2d2d  =..Bug Fixes.---
+000158e0: 2d2d 2d2d 2d2d 0a0a 2d20 4669 7865 6420  ------..- Fixed 
+000158f0: 7477 6f20 7665 7273 696f 6e2d 7370 6563  two version-spec
+00015900: 6966 6963 2055 5249 2062 7567 733a 0a20  ific URI bugs:. 
+00015910: 2020 2031 2e20 6773 7574 696c 2063 7020     1. gsutil cp 
+00015920: 2d72 2067 733a 2f2f 6275 636b 6574 3120  -r gs://bucket1 
+00015930: 6773 3a2f 2f62 7563 6b65 7432 2077 6f75  gs://bucket2 wou
+00015940: 6c64 2063 7265 6174 6520 6f62 6a65 6374  ld create object
+00015950: 7320 696e 2062 7563 6b65 7432 0a20 2020  s in bucket2.   
+00015960: 2020 2020 7769 7468 206e 616d 6573 2063      with names c
+00015970: 6f72 7265 7370 6f6e 6469 6e67 2074 6f20  orresponding to 
+00015980: 7665 7273 696f 6e2d 7370 6563 6966 6963  version-specific
+00015990: 2055 5249 7320 696e 2062 7563 6b65 7431   URIs in bucket1
+000159a0: 2028 652e 672e 2c0a 2020 2020 2020 2067   (e.g.,.       g
+000159b0: 733a 2f2f 6275 636b 6574 322f 6f62 6a23  s://bucket2/obj#
+000159c0: 3133 3631 3431 3735 3638 3438 3230 3030  1361417568482000
+000159d0: 2c20 7768 6572 6520 7468 6520 2223 3133  , where the "#13
+000159e0: 3631 3431 3735 3638 3438 3230 3030 2220  61417568482000" 
+000159f0: 7061 7274 2077 6173 0a20 2020 2020 2020  part was.       
+00015a00: 7061 7274 206f 6620 7468 6520 6f62 6a65  part of the obje
+00015a10: 6374 206e 616d 652c 206e 6f74 2074 6865  ct name, not the
+00015a20: 206f 626a 6563 7427 7320 6765 6e65 7261   object's genera
+00015a30: 7469 6f6e 292e 0a0a 2020 2020 2020 2054  tion)...       T
+00015a40: 6869 7320 7072 6f62 6c65 6d20 7369 6d69  his problem simi
+00015a50: 6c61 726c 7920 6361 7573 6564 2067 7375  larly caused gsu
+00015a60: 7469 6c20 6370 202d 7220 6773 3a2f 2f62  til cp -r gs://b
+00015a70: 7563 6b65 7431 202e 2f64 6972 2074 6f20  ucket1 ./dir to 
+00015a80: 6372 6561 7465 0a20 2020 2020 2020 6669  create.       fi
+00015a90: 6c65 7320 6e61 6d65 7320 636f 7272 6573  les names corres
+00015aa0: 706f 6e64 696e 6720 746f 2076 6572 7369  ponding to versi
+00015ab0: 6f6e 2d73 7065 6369 6669 6320 5552 4973  on-specific URIs
+00015ac0: 2069 6e20 6275 636b 6574 312e 0a20 2020   in bucket1..   
+00015ad0: 2032 2e20 6773 7574 696c 2072 6d20 2d61   2. gsutil rm -a
+00015ae0: 2067 733a 2f2f 6275 636b 6574 2f6f 626a   gs://bucket/obj
+00015af0: 2077 6f75 6c64 2061 7474 656d 7074 2074   would attempt t
+00015b00: 6f20 6465 6c65 7465 2074 6865 2073 616d  o delete the sam
+00015b10: 6520 6f62 6a65 6374 0a20 2020 2020 2020  e object.       
+00015b20: 7477 6963 652c 2067 6574 7469 6e67 2061  twice, getting a
+00015b30: 204e 6f53 7563 684b 6579 2065 7272 6f72   NoSuchKey error
+00015b40: 206f 6e20 7468 6520 7365 636f 6e64 2061   on the second a
+00015b50: 7474 656d 7074 2e0a 0a0a 5265 6c65 6173  ttempt....Releas
+00015b60: 6520 332e 3234 2028 7265 6c65 6173 652d  e 3.24 (release-
+00015b70: 6461 7465 3a20 3230 3133 2d30 322d 3139  date: 2013-02-19
+00015b80: 290a 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ).==============
+00015b90: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00015ba0: 3d3d 3d3d 3d3d 3d3d 3d0a 0a42 7567 2046  =========..Bug F
+00015bb0: 6978 6573 0a2d 2d2d 2d2d 2d2d 2d2d 0a0a  ixes.---------..
+00015bc0: 2d20 4669 7865 6420 6275 6720 7468 6174  - Fixed bug that
+00015bd0: 2063 6175 7365 6420 6174 7465 6d70 7420   caused attempt 
+00015be0: 746f 2064 7570 652d 656e 636f 6465 2061  to dupe-encode a
+00015bf0: 2075 6e69 636f 6465 2066 696c 656e 616d   unicode filenam
+00015c00: 652e 0a0a 4f74 6865 7220 4368 616e 6765  e...Other Change
+00015c10: 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a  s.-------------.
+00015c20: 0a2d 2052 6566 6163 746f 7265 6420 7265  .- Refactored re
+00015c30: 7472 7920 6c6f 6769 6320 6672 6f6d 2073  try logic from s
+00015c40: 6574 6d65 7461 2061 6e64 2063 6861 636c  etmeta and chacl
+00015c50: 2074 6f20 7573 6520 4052 6574 7279 2064   to use @Retry d
+00015c60: 6563 6f72 6174 6f72 2e0a 2d20 4d6f 7665  ecorator..- Move
+00015c70: 6420 4052 6574 7279 2064 6563 6f72 6174  d @Retry decorat
+00015c80: 6f72 2074 6f20 7468 6972 645f 7061 7274  or to third_part
+00015c90: 792e 0a2d 2046 6978 6564 2066 6c61 6b79  y..- Fixed flaky
+00015ca0: 2074 6573 7473 2e0a 0a0a 5265 6c65 6173   tests....Releas
+00015cb0: 6520 332e 3233 2028 7265 6c65 6173 652d  e 3.23 (release-
+00015cc0: 6461 7465 3a20 3230 3133 2d30 322d 3136  date: 2013-02-16
+00015cd0: 290a 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ).==============
+00015ce0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00015cf0: 3d3d 3d3d 3d3d 3d3d 3d0a 0a42 7567 2046  =========..Bug F
+00015d00: 6978 6573 0a2d 2d2d 2d2d 2d2d 2d2d 0a0a  ixes.---------..
+00015d10: 2d20 4d61 6b65 2076 6572 7369 6f6e 2d73  - Make version-s
+00015d20: 7065 6369 6669 6320 5552 4920 7061 7273  pecific URI pars
+00015d30: 696e 6720 6d6f 7265 2072 6f62 7573 742e  ing more robust.
+00015d40: 2054 6869 7320 6669 7865 7320 6120 6275   This fixes a bu
+00015d50: 6720 7768 6572 650a 2020 6c69 7374 696e  g where.  listin
+00015d60: 6720 6275 636b 6574 7320 696e 2063 6572  g buckets in cer
+00015d70: 7461 696e 2063 6173 6573 2077 6f75 6c64  tain cases would
+00015d80: 2072 6573 756c 7420 696e 2074 6865 2065   result in the e
+00015d90: 7272 6f72 0a20 2027 4275 636b 6574 5374  rror.  'BucketSt
+00015da0: 6f72 6167 6555 7269 2720 6f62 6a65 6374  orageUri' object
+00015db0: 2068 6173 206e 6f20 6174 7472 6962 7574   has no attribut
+00015dc0: 6520 2776 6572 7369 6f6e 5f73 7065 6369  e 'version_speci
+00015dd0: 6669 635f 7572 6927 0a0a 0a52 656c 6561  fic_uri'...Relea
+00015de0: 7365 2033 2e32 3220 2872 656c 6561 7365  se 3.22 (release
+00015df0: 2d64 6174 653a 2032 3031 332d 3032 2d31  -date: 2013-02-1
+00015e00: 3529 0a3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  5).=============
+00015e10: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00015e20: 3d3d 3d3d 3d3d 3d3d 3d3d 0a0a 4e65 7720  ==========..New 
+00015e30: 4665 6174 7572 6573 0a2d 2d2d 2d2d 2d2d  Features.-------
+00015e40: 2d2d 2d2d 2d0a 0a2d 2049 6d70 6c65 6d65  -----..- Impleme
+00015e50: 6e74 6564 206e 6577 2063 6861 636c 2063  nted new chacl c
+00015e60: 6f6d 6d61 6e64 2c20 7768 6963 6820 6d61  ommand, which ma
+00015e70: 6b65 7320 6974 2065 6173 7920 746f 2061  kes it easy to a
+00015e80: 6464 2061 6e64 2072 656d 6f76 6520 6275  dd and remove bu
+00015e90: 636b 6574 0a20 2061 6e64 206f 626a 6563  cket.  and objec
+00015ea0: 7420 4143 4c20 6772 616e 7473 2077 6974  t ACL grants wit
+00015eb0: 686f 7574 2068 6176 696e 6720 746f 2065  hout having to e
+00015ec0: 6469 7420 584d 4c20 286c 696b 6520 7468  dit XML (like th
+00015ed0: 6520 6f6c 6465 7220 7365 7461 636c 0a20  e older setacl. 
+00015ee0: 2063 6f6d 6d61 6e64 292e 0a2d 2049 6d70   command)..- Imp
+00015ef0: 6c65 6d65 6e74 6564 206e 6577 2022 6461  lemented new "da
+00015f00: 6973 792d 6368 6169 6e22 2063 6f70 7969  isy-chain" copyi
+00015f10: 6e67 206d 6f64 652c 2077 6869 6368 2061  ng mode, which a
+00015f20: 6c6c 6f77 7320 6372 6f73 732d 7072 6f76  llows cross-prov
+00015f30: 6964 6572 0a20 2063 6f70 6965 7320 746f  ider.  copies to
+00015f40: 2072 756e 2077 6974 686f 7574 2062 7566   run without buf
+00015f50: 6665 7269 6e67 2074 6f20 6c6f 6361 6c20  fering to local 
+00015f60: 6469 736b 2c20 616e 6420 746f 2075 7365  disk, and to use
+00015f70: 2072 6573 756d 6162 6c65 2075 706c 6f61   resumable uploa
+00015f80: 6473 2e0a 2020 5468 6973 2063 6f70 7969  ds..  This copyi
+00015f90: 6e67 206d 6f64 6520 616c 736f 2061 6c6c  ng mode also all
+00015fa0: 6f77 7320 636f 7079 696e 6720 6265 7477  ows copying betw
+00015fb0: 6565 6e20 6c6f 6361 7469 6f6e 7320 616e  een locations an
+00015fc0: 6420 6265 7477 6565 6e20 7374 6f72 6167  d between storag
+00015fd0: 650a 2020 636c 6173 7365 732c 2075 7369  e.  classes, usi
+00015fe0: 6e67 2074 6865 206e 6577 2067 7375 7469  ng the new gsuti
+00015ff0: 6c20 6370 202d 4420 6f70 7469 6f6e 2e20  l cp -D option. 
+00016000: 2844 6169 7379 2d63 6861 696e 2063 6f70  (Daisy-chain cop
+00016010: 7969 6e67 2069 7320 7468 650a 2020 6465  ying is the.  de
+00016020: 6661 756c 7420 7768 656e 2063 6f70 7969  fault when copyi
+00016030: 6e67 2062 6574 7765 656e 2070 726f 7669  ng between provi
+00016040: 6465 7273 2c20 6275 7420 6d75 7374 2062  ders, but must b
+00016050: 6520 6578 706c 6963 6974 6c79 2072 6571  e explicitly req
+00016060: 7565 7374 6564 2066 6f72 0a20 2074 6865  uested for.  the
+00016070: 206f 7468 6572 2063 6173 6573 2074 6f20   other cases to 
+00016080: 6b65 6570 2063 6f73 7473 2061 6e64 2070  keep costs and p
+00016090: 6572 666f 726d 616e 6365 2065 7870 6563  erformance expec
+000160a0: 7461 7469 6f6e 7320 636c 6561 722e 290a  tations clear.).
+000160b0: 2d20 496d 706c 656d 656e 7465 6420 6e65  - Implemented ne
+000160c0: 7720 7065 7266 6469 6167 2063 6f6d 6d61  w perfdiag comma
+000160d0: 6e64 2074 6f20 7275 6e20 6120 6469 6167  nd to run a diag
+000160e0: 6e6f 7374 6963 2074 6573 7420 6167 6169  nostic test agai
+000160f0: 6e73 740a 2020 6120 6275 636b 6574 2c20  nst.  a bucket, 
+00016100: 636f 6c6c 6563 7420 7379 7374 656d 2069  collect system i
+00016110: 6e66 6f72 6d61 7469 6f6e 2c20 616e 6420  nformation, and 
+00016120: 7265 706f 7274 2072 6573 756c 7473 2e20  report results. 
+00016130: 5573 6566 756c 0a20 2077 6865 6e20 776f  Useful.  when wo
+00016140: 726b 696e 6720 7769 7468 2047 6f6f 676c  rking with Googl
+00016150: 6520 436c 6f75 6420 5374 6f72 6167 6520  e Cloud Storage 
+00016160: 7465 616d 2074 6f20 7265 736f 6c76 6520  team to resolve 
+00016170: 7175 6573 7469 6f6e 730a 2020 6162 6f75  questions.  abou
+00016180: 7420 7065 7266 6f72 6d61 6e63 652e 0a2d  t performance..-
+00016190: 2041 6464 6564 2053 4947 5155 4954 2028   Added SIGQUIT (
+000161a0: 5e5c 2920 6861 6e64 6c65 722c 2074 6f20  ^\) handler, to 
+000161b0: 616c 6c6f 7720 6272 6561 6b70 6f69 6e74  allow breakpoint
+000161c0: 696e 6720 6120 7275 6e6e 696e 6720 6773  ing a running gs
+000161d0: 7574 696c 2e0a 0a42 7567 2046 6978 6573  util...Bug Fixes
+000161e0: 0a2d 2d2d 2d2d 2d2d 2d2d 0a0a 2d20 4669  .---------..- Fi
+000161f0: 7865 6420 6275 6720 7768 6572 6520 6773  xed bug where gs
+00016200: 7574 696c 2073 6574 7765 6263 6667 2073  util setwebcfg s
+00016210: 6967 6e61 7475 7265 2064 6964 6e27 7420  ignature didn't 
+00016220: 6d61 7463 6820 7769 7468 0a20 2048 4d41  match with.  HMA
+00016230: 4320 6175 7468 656e 7469 6361 7469 6f6e  C authentication
+00016240: 2e0a 2d20 4669 7865 6420 4153 4349 4920  ..- Fixed ASCII 
+00016250: 636f 6465 6320 6465 636f 6465 2065 7272  codec decode err
+00016260: 6f72 2077 6865 6e20 636f 6e73 7472 7563  or when construc
+00016270: 7469 6e67 2074 7261 636b 6572 2066 696c  ting tracker fil
+00016280: 656e 616d 650a 2020 6672 6f6d 206e 6f6e  ename.  from non
+00016290: 2d37 6269 7420 4153 4349 4920 696e 7075  -7bit ASCII inpu
+000162a0: 7420 6669 6c65 6e61 6d65 2e0a 2d20 4368  t filename..- Ch
+000162b0: 616e 6765 6420 626f 746f 2061 7574 6820  anged boto auth 
+000162c0: 706c 7567 696e 2066 7261 6d65 776f 726b  plugin framework
+000162d0: 2074 6f20 616c 6c6f 7720 6d75 6c74 6970   to allow multip
+000162e0: 6c65 2070 6c75 6769 6e73 0a20 2073 7570  le plugins.  sup
+000162f0: 706f 7274 696e 6720 7265 7175 6573 7465  porting requeste
+00016300: 6420 6361 7061 6269 6c69 7479 2c20 7768  d capability, wh
+00016310: 6963 6820 6669 7865 7320 6773 7574 696c  ich fixes gsutil
+00016320: 2065 7863 6570 7469 6f6e 0a20 2074 6861   exception.  tha
+00016330: 7420 7573 6564 2074 6f20 6861 7070 656e  t used to happen
+00016340: 2077 6865 7265 2061 2047 4345 2075 7365   where a GCE use
+00016350: 7220 6861 6420 6120 7365 7276 6963 6520  r had a service 
+00016360: 6163 636f 756e 740a 2020 636f 6e66 6967  account.  config
+00016370: 7572 6564 2061 6e64 2074 6865 6e20 7261  ured and then ra
+00016380: 6e20 6773 7574 696c 2063 6f6e 6669 672e  n gsutil config.
+00016390: 0a2d 2043 6861 6e67 6564 2043 6f6d 6d61  .- Changed Comma
+000163a0: 6e64 2e41 7070 6c79 206d 6574 686f 6420  nd.Apply method 
+000163b0: 746f 2062 6520 7265 7369 6c69 656e 7420  to be resilient 
+000163c0: 746f 206e 616d 6520 6578 7061 6e73 696f  to name expansio
+000163d0: 6e0a 2020 6578 6365 7074 696f 6e73 2e20  n.  exceptions. 
+000163e0: 4265 666f 7265 2074 6869 7320 6368 616e  Before this chan
+000163f0: 6765 2c20 6966 2061 6e20 6578 6365 7074  ge, if an except
+00016400: 696f 6e20 7761 7320 7261 6973 6564 0a20  ion was raised. 
+00016410: 2064 7572 696e 6720 6974 6572 6174 696f   during iteratio
+00016420: 6e20 6f66 204e 616d 6545 7870 616e 7369  n of NameExpansi
+00016430: 6f6e 5265 7375 6c74 2c20 7468 6520 7061  onResult, the pa
+00016440: 7265 6e74 2070 726f 6365 7373 0a20 2077  rent process.  w
+00016450: 6f75 6c64 2069 6d6d 6564 6961 7465 6c79  ould immediately
+00016460: 2073 746f 7020 6578 6563 7574 696f 6e2c   stop execution,
+00016470: 2063 6175 7369 6e67 2074 6865 0a20 205f   causing the.  _
+00016480: 454f 465f 4e41 4d45 5f45 5850 414e 5349  EOF_NAME_EXPANSI
+00016490: 4f4e 5f52 4553 554c 5420 746f 206e 6576  ON_RESULT to nev
+000164a0: 6572 2062 6520 7365 6e74 2074 6f20 6368  er be sent to ch
+000164b0: 696c 6420 7072 6f63 6573 7365 732e 0a20  ild processes.. 
+000164c0: 2054 6869 7320 7265 7375 6c74 6564 2069   This resulted i
+000164d0: 6e20 7468 6520 7072 6f63 6573 7320 6861  n the process ha
+000164e0: 6e67 696e 6720 666f 7265 7665 722e 0a2d  nging forever..-
+000164f0: 2046 6978 6564 2076 6172 696f 7573 2062   Fixed various b
+00016500: 7567 7320 666f 7220 6773 7574 696c 2072  ugs for gsutil r
+00016510: 756e 6e69 6e67 206f 6e20 5769 6e64 6f77  unning on Window
+00016520: 733a 0a20 202d 2046 6978 6564 2076 6172  s:.  - Fixed var
+00016530: 696f 7573 2070 6c61 6365 7320 6672 6f6d  ious places from
+00016540: 2061 2068 6172 642d 636f 6465 6420 272f   a hard-coded '/
+00016550: 2720 746f 206f 732e 7365 702e 0a20 202d  ' to os.sep..  -
+00016560: 2046 6978 6564 2061 2062 7567 2069 6e20   Fixed a bug in 
+00016570: 7468 6520 6370 2063 6f6d 6d61 6e64 2077  the cp command w
+00016580: 6865 7265 2069 7420 7761 7320 7573 696e  here it was usin
+00016590: 6720 7468 6520 6465 7374 696e 6174 696f  g the destinatio
+000165a0: 6e0a 2020 2020 5552 4927 7320 2e64 656c  n.    URI's .del
+000165b0: 696d 2070 726f 7065 7274 7920 696e 7374  im property inst
+000165c0: 6561 6420 6f66 2074 6865 2073 6f75 7263  ead of the sourc
+000165d0: 6520 5552 492e 0a20 202d 2046 6978 6564  e URI..  - Fixed
+000165e0: 2061 2062 7567 2069 6e20 7468 6520 6370   a bug in the cp
+000165f0: 2063 6f6d 6d61 6e64 2773 205f 5372 6344   command's _SrcD
+00016600: 7374 5361 6d65 2066 756e 6374 696f 6e20  stSame function 
+00016610: 6279 0a20 2020 2073 696d 706c 6966 7969  by.    simplifyi
+00016620: 6e67 2069 7420 746f 2075 7365 206f 732e  ng it to use os.
+00016630: 7061 7468 2e6e 6f72 6d70 6174 682e 0a20  path.normpath.. 
+00016640: 202d 2046 6978 6564 2077 696e 646f 7773   - Fixed windows
+00016650: 2062 7567 2069 6e20 7465 7374 732f 7574   bug in tests/ut
+00016660: 696c 2e70 7920 5f4e 6f72 6d61 6c69 7a65  il.py _Normalize
+00016670: 5552 4920 6675 6e63 7469 6f6e 2e0a 2020  URI function..  
+00016680: 2d20 4669 7865 6420 5a65 726f 4469 7669  - Fixed ZeroDivi
+00016690: 7369 6f6e 4572 726f 7220 736f 6d65 7469  sionError someti
+000166a0: 6d65 7320 6861 7070 656e 696e 6720 6475  mes happening du
+000166b0: 7269 6e67 2075 6e69 7420 7465 7374 730a  ring unit tests.
+000166c0: 2020 2020 6f6e 2057 696e 646f 7773 2e0a      on Windows..
+000166d0: 0a2d 2046 6978 6564 2067 7375 7469 6c20  .- Fixed gsutil 
+000166e0: 726d 2062 7567 2074 6861 7420 6361 7573  rm bug that caus
+000166f0: 6564 2065 7869 7420 7374 6174 7573 2031  ed exit status 1
+00016700: 2077 6865 6e20 656e 636f 756e 7465 7265   when encountere
+00016710: 640a 2020 6e6f 6e2d 6578 6973 7465 6e74  d.  non-existent
+00016720: 2055 5249 2e0a 2d20 4669 7865 6420 7375   URI..- Fixed su
+00016730: 7070 6f72 7420 666f 7220 6773 7574 696c  pport for gsutil
+00016740: 2063 7020 6669 6c65 202d 2e0a 2d20 4164   cp file -..- Ad
+00016750: 6465 6420 7072 6563 6f6e 6469 7469 6f6e  ded precondition
+00016760: 7320 616e 6420 7265 7472 7920 6c6f 6769  s and retry logi
+00016770: 6320 746f 2073 6574 6d65 7461 2063 6f6d  c to setmeta com
+00016780: 6d61 6e64 2c20 746f 0a20 2065 6e66 6f72  mand, to.  enfor
+00016790: 6365 2063 6f6e 6375 7272 656e 6379 2063  ce concurrency c
+000167a0: 6f6e 7472 6f6c 2e0a 2d20 4669 7865 6420  ontrol..- Fixed 
+000167b0: 6275 6720 696e 2063 6f70 7969 6e67 2073  bug in copying s
+000167c0: 7562 6469 7273 2074 6f20 7375 6264 6972  ubdirs to subdir
+000167d0: 732e 0a2d 2046 6978 6564 2063 6173 6573  s..- Fixed cases
+000167e0: 2077 6865 7265 2062 6f74 6f20 6465 6275   where boto debu
+000167f0: 675f 6c65 7665 6c20 6361 7573 6564 2074  g_level caused t
+00016800: 6f6f 206d 7563 6820 6f72 2074 6f6f 206c  oo much or too l
+00016810: 6974 746c 650a 2020 6c6f 6767 696e 673a  ittle.  logging:
+00016820: 0a20 202d 2072 6573 756d 6162 6c65 2061  .  - resumable a
+00016830: 6e64 206f 6e65 2d73 686f 7420 7570 6c6f  nd one-shot uplo
+00016840: 6164 7320 7765 7265 6e27 7420 7368 6f77  ads weren't show
+00016850: 696e 6720 7265 7370 6f6e 7365 2068 6561  ing response hea
+00016860: 6465 7273 0a20 2020 2077 6865 6e20 636f  ders.    when co
+00016870: 6e6e 6563 7469 6f6e 2e64 6562 7567 203e  nnection.debug >
+00016880: 2030 2e0a 2020 2d20 7061 796c 6f61 6420   0..  - payload 
+00016890: 7761 7320 7368 6f77 696e 6720 7570 2069  was showing up i
+000168a0: 6e20 6465 6275 6720 6f75 7470 7574 2077  n debug output w
+000168b0: 6865 6e20 636f 6e6e 6563 7469 6f6e 2e64  hen connection.d
+000168c0: 6562 7567 0a20 2020 203c 2034 2066 6f72  ebug.    < 4 for
+000168d0: 2073 7472 6561 6d69 6e67 2075 706c 6f61   streaming uploa
+000168e0: 6473 2e0a 0a2d 2052 656d 6f76 6564 2058  ds...- Removed X
+000168f0: 4d4c 2070 6172 7369 6e67 2066 726f 6d20  ML parsing from 
+00016900: 7365 7461 636c 2e20 5468 6520 7072 6576  setacl. The prev
+00016910: 696f 7573 2069 6d70 6c65 6d65 6e74 6174  ious implementat
+00016920: 696f 6e0a 2020 7265 6c69 6564 206f 6e20  ion.  relied on 
+00016930: 6c6f 6f73 6520 584d 4c20 6861 6e64 6c69  loose XML handli
+00016940: 6e67 2c20 7768 6963 6820 636f 756c 6420  ng, which could 
+00016950: 7472 756e 6361 7465 2077 6861 7420 6974  truncate what it
+00016960: 2073 656e 6473 0a20 2074 6f20 7468 6520   sends.  to the 
+00016970: 7365 7276 6963 652c 2061 6c6c 6f77 696e  service, allowin
+00016980: 6720 696e 7661 6c69 6420 584d 4c20 746f  g invalid XML to
+00016990: 2062 6520 7370 6563 6966 6965 6420 6279   be specified by
+000169a0: 2074 6865 0a20 2075 7365 722e 2049 6e73   the.  user. Ins
+000169b0: 7465 6164 206e 6f77 2074 6865 2041 434c  tead now the ACL
+000169c0: 2058 4d4c 2069 7320 7061 7373 6564 2076   XML is passed v
+000169d0: 6572 6261 7469 6d20 616e 6420 7765 2072  erbatim and we r
+000169e0: 656c 790a 2020 6f6e 2073 6572 7665 722d  ely.  on server-
+000169f0: 7369 6465 2073 6368 656d 6120 656e 666f  side schema enfo
+00016a00: 7263 656d 656e 742e 0a2d 2041 6464 6564  rcement..- Added
+00016a10: 2075 7365 722d 6167 656e 7420 6865 6164   user-agent head
+00016a20: 6572 2074 6f20 7265 7375 6d61 626c 6520  er to resumable 
+00016a30: 7570 6c6f 6164 732e 0a2d 2046 6978 6564  uploads..- Fixed
+00016a40: 2072 6570 6f72 7469 6e67 2062 6974 732f   reporting bits/
+00016a50: 7320 7768 656e 2069 7420 7761 7320 7265  s when it was re
+00016a60: 616c 6c79 2062 7974 6573 2f73 2e0a 2d20  ally bytes/s..- 
+00016a70: 4368 616e 6765 6420 736f 2077 6520 6e6f  Changed so we no
+00016a80: 7720 7061 7373 2068 6561 6465 7273 2077  w pass headers w
+00016a90: 6974 6820 4150 4920 7665 7273 696f 6e20  ith API version 
+00016aa0: 2620 7072 6f6a 6563 7420 4944 0a20 2074  & project ID.  t
+00016ab0: 6f20 6372 6561 7465 5f62 7563 6b65 7428  o create_bucket(
+00016ac0: 292e 0a2d 204d 6164 6520 2267 7375 7469  )..- Made "gsuti
+00016ad0: 6c20 726d 202d 7220 6773 3a2f 2f62 7563  l rm -r gs://buc
+00016ae0: 6b65 742f 666f 6c64 6572 2220 7265 6d6f  ket/folder" remo
+00016af0: 7665 2078 797a 5f24 666f 6c64 6572 2420  ve xyz_$folder$ 
+00016b00: 6f62 6a65 6374 0a20 2028 7768 6963 6820  object.  (which 
+00016b10: 6973 2063 7265 6174 6564 2062 7920 7661  is created by va
+00016b20: 7269 6f75 7320 4755 4920 746f 6f6c 7329  rious GUI tools)
+00016b30: 2e0a 2d20 4669 7865 6420 6275 6720 7768  ..- Fixed bug wh
+00016b40: 6572 6520 6773 7574 696c 2062 696e 6172  ere gsutil binar
+00016b50: 7920 7761 7320 7368 6970 7065 6420 7769  y was shipped wi
+00016b60: 7468 2070 726f 7465 6374 696f 6e20 3735  th protection 75
+00016b70: 300a 2020 696e 7374 6561 6420 6f66 2037  0.  instead of 7
+00016b80: 3535 2e0a 0a4f 7468 6572 2043 6861 6e67  55...Other Chang
+00016b90: 6573 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  es.-------------
+00016ba0: 0a0a 2d20 5265 776f 726b 6564 2076 6572  ..- Reworked ver
+00016bb0: 7369 6f6e 6564 206f 626a 6563 7420 6861  sioned object ha
+00016bc0: 6e64 6c69 6e67 3a0a 2020 2d20 5265 6d6f  ndling:.  - Remo
+00016bd0: 7665 6420 6e65 6564 2066 6f72 2063 6f6d  ved need for com
+00016be0: 6d61 6e64 7320 746f 2073 7065 6369 6679  mands to specify
+00016bf0: 202d 7620 6f70 7469 6f6e 2074 6f20 7061   -v option to pa
+00016c00: 7273 650a 2020 2020 7665 7273 696f 6e73  rse.    versions
+00016c10: 2e20 5665 7273 696f 6e65 6420 5552 4973  . Versioned URIs
+00016c20: 2061 7265 206e 6f77 2075 6e69 666f 726d   are now uniform
+00016c30: 6c79 2068 616e 646c 6564 2062 7920 616c  ly handled by al
+00016c40: 6c0a 2020 2020 636f 6d6d 616e 6473 2e0a  l.    commands..
+00016c50: 2020 2d20 5265 6661 6374 6f72 6564 2053    - Refactored S
+00016c60: 746f 7261 6765 5572 6920 7061 7273 696e  torageUri parsin
+00016c70: 6720 7468 6174 2068 6164 2062 6565 6e20  g that had been 
+00016c80: 7370 6c69 7420 6163 726f 7373 0a20 2020  split across.   
+00016c90: 2073 746f 7261 6765 5f75 7269 2061 6e64   storage_uri and
+00016ca0: 2063 6f6e 7665 6e69 656e 6365 3b20 6d61   convenience; ma
+00016cb0: 6465 2076 6572 7369 6f6e 6564 2055 5249  de versioned URI
+00016cc0: 7320 7265 6e64 6572 2077 6974 680a 2020  s render with.  
+00016cd0: 2020 7665 7273 696f 6e20 7374 7269 6e67    version string
+00016ce0: 2073 6f20 5374 6f72 6167 6555 7269 2069   so StorageUri i
+00016cf0: 7320 726f 756e 642d 7472 6970 7061 626c  s round-trippabl
+00016d00: 6520 2862 6f74 6f20 6368 616e 6765 292e  e (boto change).
+00016d10: 0a20 202d 2049 6d70 6c65 6d65 6e74 6564  .  - Implemented
+00016d20: 2067 7375 7469 6c20 6370 202d 7620 6f70   gsutil cp -v op
+00016d30: 7469 6f6e 2066 6f72 2070 7269 6e74 696e  tion for printin
+00016d40: 6720 7468 6520 7665 7273 696f 6e2d 7370  g the version-sp
+00016d50: 6563 6966 6963 0a20 2020 2055 5249 2074  ecific.    URI t
+00016d60: 6861 7420 7761 7320 6a75 7374 2063 7265  hat was just cre
+00016d70: 6174 6564 2e0a 2020 2d20 4164 6465 6420  ated..  - Added 
+00016d80: 6572 726f 7220 6465 7461 696c 2066 6f72  error detail for
+00016d90: 2061 7474 656d 7074 2074 6f20 6465 6c65   attempt to dele
+00016da0: 7465 206e 6f6e 2d65 6d70 7479 2076 6572  te non-empty ver
+00016db0: 7369 6f6e 6564 0a20 2020 2062 7563 6b65  sioned.    bucke
+00016dc0: 742e 2041 6c73 6f20 6164 6465 6420 7665  t. Also added ve
+00016dd0: 7273 696f 6e69 6e67 2073 7461 7465 2074  rsioning state t
+00016de0: 6f20 6c73 202d 4c20 2d62 2067 733a 2f2f  o ls -L -b gs://
+00016df0: 6275 636b 6574 0a20 2020 206f 7574 7075  bucket.    outpu
+00016e00: 742e 0a20 202d 2043 6861 6e67 6564 2055  t..  - Changed U
+00016e10: 5249 2070 6172 7369 6e67 2074 6f20 7573  RI parsing to us
+00016e20: 6520 7072 652d 636f 6d70 696c 6564 2072  e pre-compiled r
+00016e30: 6567 6578 2773 2e0a 2020 2d20 4f74 6865  egex's..  - Othe
+00016e40: 7220 6275 6720 6669 7865 732e 0a0a 2d20  r bug fixes...- 
+00016e50: 5265 7772 6f74 652f 6465 6570 656e 6564  Rewrote/deepened
+00016e60: 2f69 6d70 726f 7665 6420 7661 7269 6f75  /improved variou
+00016e70: 7320 7061 7274 7320 6f66 2062 7569 6c74  s parts of built
+00016e80: 2d69 6e20 6865 6c70 3a0a 2020 2d20 5570  -in help:.  - Up
+00016e90: 6461 7465 6420 2767 7375 7469 6c20 6865  dated 'gsutil he
+00016ea0: 6c70 2064 6576 272e 0a20 202d 2046 6978  lp dev'..  - Fix
+00016eb0: 6564 2068 656c 7020 636f 6d6d 616e 6420  ed help command 
+00016ec0: 6861 6e64 6c69 6e67 2077 6865 6e20 7465  handling when te
+00016ed0: 726d 696e 616c 2064 6f65 7320 6e6f 7420  rminal does not 
+00016ee0: 6861 7665 2074 6865 0a20 2020 206e 756d  have the.    num
+00016ef0: 6265 7220 6f66 2072 6f77 7320 7365 742e  ber of rows set.
+00016f00: 0a20 202d 2052 6577 726f 7465 2076 6572  .  - Rewrote ver
+00016f10: 7369 6f6e 696e 6720 6865 6c70 2e0a 2020  sioning help..  
+00016f20: 2d20 4164 6465 6420 6773 7574 696c 2068  - Added gsutil h
+00016f30: 656c 7020 7465 7874 2066 6f72 2063 6f6d  elp text for com
+00016f40: 6d6f 6e20 3430 3320 4163 636f 756e 7450  mon 403 AccountP
+00016f50: 726f 626c 656d 2065 7272 6f72 2e0a 2020  roblem error..  
+00016f60: 2d20 4164 6465 6420 7465 7874 2074 6f20  - Added text to 
+00016f70: 2767 7375 7469 6c20 6865 6c70 2064 6576  'gsutil help dev
+00016f80: 2720 6162 6f75 7420 6c65 6761 6c20 6167  ' about legal ag
+00016f90: 7265 656d 656e 7420 6e65 6564 6564 0a20  reement needed. 
+00016fa0: 2020 2077 6974 6820 636f 6465 2073 7562     with code sub
+00016fb0: 6d69 7373 696f 6e73 2e0a 2020 2d20 4669  missions..  - Fi
+00016fc0: 7865 6420 7661 7269 6f75 7320 6f74 6865  xed various othe
+00016fd0: 7220 7479 706f 732e 0a20 202d 2055 7064  r typos..  - Upd
+00016fe0: 6174 6564 2064 6f63 2066 6f72 2063 7020  ated doc for cp 
+00016ff0: 636f 6d6d 616e 6420 7265 6761 7264 696e  command regardin
+00017000: 6720 6d65 7461 6461 7461 206e 6f74 2062  g metadata not b
+00017010: 6569 6e67 0a20 2020 2070 7265 7365 7276  eing.    preserv
+00017020: 6564 2077 6865 6e20 636f 7079 696e 6720  ed when copying 
+00017030: 6265 7477 6565 6e20 7072 6f76 6964 6572  between provider
+00017040: 732e 0a20 202d 2046 6978 6564 2067 7375  s..  - Fixed gsu
+00017050: 7469 6c20 6c73 2063 6f6d 6d61 6e64 2064  til ls command d
+00017060: 6f63 756d 656e 7461 7469 6f6e 2074 7970  ocumentation typ
+00017070: 6f20 666f 7220 7468 6520 2d4c 206f 7074  o for the -L opt
+00017080: 696f 6e2e 0a20 202d 2041 6464 6564 2048  ion..  - Added H
+00017090: 5454 5020 7363 6865 6d65 2074 6f20 646f  TTP scheme to do
+000170a0: 632f 6578 616d 706c 6573 2066 6f72 2067  c/examples for g
+000170b0: 7375 7469 6c20 7365 7463 6f72 7320 636f  sutil setcors co
+000170c0: 6d6d 616e 642e 0a20 202d 2043 6861 6e67  mmand..  - Chang
+000170d0: 6564 206d 696e 696d 756d 2076 6572 7369  ed minimum versi
+000170e0: 6f6e 2069 6e20 646f 6375 6d65 6e74 6174  on in documentat
+000170f0: 696f 6e20 6672 6f6d 2032 2e35 2074 6f20  ion from 2.5 to 
+00017100: 322e 3620 7369 6e63 650a 2020 2020 6773  2.6 since.    gs
+00017110: 7574 696c 206e 6f20 6c6f 6e67 6572 2077  util no longer w
+00017120: 6f72 6b73 2069 6e20 5079 7468 6f6e 2032  orks in Python 2
+00017130: 2e35 2e0a 2020 2d20 436c 6561 6e65 6420  .5..  - Cleaned 
+00017140: 7570 2f63 6c61 7269 6679 2f64 6565 7065  up/clarify/deepe
+00017150: 6e20 7661 7269 6f75 7320 6f74 6865 7220  n various other 
+00017160: 7061 7274 7320 6f66 2067 7375 7469 6c0a  parts of gsutil.
+00017170: 2020 2020 6275 696c 742d 696e 2064 6f63      built-in doc
+00017180: 756d 656e 7461 7469 6f6e 2e0a 0a2d 204e  umentation...- N
+00017190: 756d 6572 6f75 7320 696d 7072 6f76 656d  umerous improvem
+000171a0: 656e 7473 2074 6f20 7465 7374 696e 6720  ents to testing 
+000171b0: 696e 6672 6173 7472 7563 7475 7265 3a0a  infrastructure:.
+000171c0: 2020 2d20 436f 6d70 6c65 7465 6c79 2072    - Completely r
+000171d0: 6566 6163 746f 7265 6420 696e 6672 6173  efactored infras
+000171e0: 7472 7563 7475 7265 2c20 616c 6c6f 7769  tructure, allowi
+000171f0: 6e67 2064 6565 7065 7220 7465 7374 696e  ng deeper testin
+00017200: 670a 2020 2020 616e 6420 6d6f 7265 2072  g.    and more r
+00017210: 6561 6461 626c 6520 7465 7374 2063 6f64  eadable test cod
+00017220: 652c 2061 6e64 2065 6e61 626c 696e 6720  e, and enabling 
+00017230: 6265 7474 6572 2064 6562 7567 6769 6e67  better debugging
+00017240: 0a20 2020 206f 7574 7075 7420 7768 656e  .    output when
+00017250: 2074 6573 7473 2066 6169 6c2e 0a20 202d   tests fail..  -
+00017260: 204d 6f76 6564 2067 736c 6962 2f74 6573   Moved gslib/tes
+00017270: 745f 2a2e 7079 2075 6e69 7420 7465 7374  t_*.py unit test
+00017280: 7320 746f 2067 736c 6962 2f74 6573 7473  s to gslib/tests
+00017290: 206d 6f64 756c 652e 0a20 202d 204d 6164   module..  - Mad
+000172a0: 6520 616c 6c20 7465 7374 7320 2875 6e69  e all tests (uni
+000172b0: 7420 616e 6420 696e 7465 6772 6174 696f  t and integratio
+000172c0: 6e2c 2070 6572 2d63 6f6d 6d61 6e64 2061  n, per-command a
+000172d0: 6e64 206d 6f64 756c 6573 0a20 2020 2028  nd modules.    (
+000172e0: 6c69 6b65 206e 616d 696e 6729 2072 756e  like naming) run
+000172f0: 2066 726f 6d20 7369 6e67 6c65 2067 7375   from single gsu
+00017300: 7469 6c20 7465 7374 2063 6f6d 6d61 6e64  til test command
+00017310: 2e0a 2020 2d20 4d6f 7665 6420 5465 6d70  ..  - Moved Temp
+00017320: 4469 7220 6675 6e63 7469 6f6e 7320 6672  Dir functions fr
+00017330: 6f6d 2047 7355 7469 6c49 6e74 6567 7261  om GsUtilIntegra
+00017340: 7469 6f6e 5465 7374 4361 7365 2074 6f0a  tionTestCase to.
+00017350: 2020 2020 4773 5574 696c 5465 7374 4361      GsUtilTestCa
+00017360: 7365 2e0a 2020 2d20 4d61 6465 2074 6573  se..  - Made tes
+00017370: 7420 7275 6e6e 6572 206d 6573 7361 6765  t runner message
+00017380: 2073 686f 7720 7468 6520 7465 7374 2066   show the test f
+00017390: 756e 6374 696f 6e20 6265 696e 6720 7275  unction being ru
+000173a0: 6e2e 0a20 202d 2041 6464 6564 2066 696c  n..  - Added fil
+000173b0: 6520 7061 7468 2073 7570 706f 7274 2074  e path support t
+000173c0: 6f20 4f62 6a65 6374 546f 5552 4920 6675  o ObjectToURI fu
+000173d0: 6e63 7469 6f6e 2e0a 2020 2d20 4469 7361  nction..  - Disa
+000173e0: 626c 6564 2074 6865 2074 6573 7420 636f  bled the test co
+000173f0: 6d6d 616e 6420 6966 2072 756e 6e69 6e67  mmand if running
+00017400: 206f 6e20 5079 7468 6f6e 2032 2e36 2061   on Python 2.6 a
+00017410: 6e64 2075 6e69 7474 6573 7432 0a20 2020  nd unittest2.   
+00017420: 2069 7320 6e6f 7420 6176 6169 6c61 626c   is not availabl
+00017430: 6520 696e 7374 6561 6420 6f66 2062 7265  e instead of bre
+00017440: 616b 696e 6720 616c 6c20 6f66 2067 7375  aking all of gsu
+00017450: 7469 6c2e 0a20 202d 2043 6861 6e67 6564  til..  - Changed
+00017460: 2074 6f20 7061 7373 2047 4353 2056 3220   to pass GCS V2 
+00017470: 4150 4920 616e 6420 7072 6f6a 6563 745f  API and project_
+00017480: 6964 2066 726f 6d20 626f 746f 2063 6f6e  id from boto con
+00017490: 6669 670a 2020 2020 6966 206e 6563 6573  fig.    if neces
+000174a0: 7361 7279 2069 6e20 696e 7465 6772 6174  sary in integrat
+000174b0: 696f 6e5f 7465 7374 6361 7365 2343 7265  ion_testcase#Cre
+000174c0: 6174 6542 7563 6b65 7428 292e 0a20 202d  ateBucket()..  -
+000174d0: 2046 6978 6564 2075 6e69 7420 7465 7374   Fixed unit test
+000174e0: 7320 6279 2075 7369 6e67 2061 2047 532d  s by using a GS-
+000174f0: 7370 6563 6966 6963 206d 6f63 6b69 6e67  specific mocking
+00017500: 2063 6c61 7373 2074 6f0a 2020 2020 6f76   class to.    ov
+00017510: 6572 7269 6465 2074 6865 2053 3320 7072  erride the S3 pr
+00017520: 6f76 6964 6572 2e0a 2020 2d20 4164 6465  ovider..  - Adde
+00017530: 6420 6672 6965 6e64 6c69 6572 2065 7272  d friendlier err
+00017540: 6f72 206d 6573 7361 6765 2069 6620 7465  or message if te
+00017550: 7374 2070 6174 6820 6d75 6e67 696e 6720  st path munging 
+00017560: 6661 696c 732e 0a20 202d 2046 6978 6564  fails..  - Fixed
+00017570: 2062 7567 2077 6865 7265 2067 7375 7469   bug where gsuti
+00017580: 6c20 7465 7374 206f 6e6c 7920 636c 6561  l test only clea
+00017590: 6e65 6420 7570 2066 6972 7374 2066 6577  ned up first few
+000175a0: 2074 6573 7420 6669 6c65 732e 0a20 202d   test files..  -
+000175b0: 2049 6d70 6c65 6d65 6e74 6564 2073 6574   Implemented set
+000175c0: 6163 6c20 696e 7465 6772 6174 696f 6e20  acl integration 
+000175d0: 7465 7374 732e 0a20 202d 2049 6d70 6c65  tests..  - Imple
+000175e0: 6d65 6e74 6564 2053 746f 7261 6765 5572  mented StorageUr
+000175f0: 6920 7061 7273 696e 6720 756e 6974 2074  i parsing unit t
+00017600: 6573 7473 2e0a 2020 2d20 496d 706c 656d  ests..  - Implem
+00017610: 656e 7465 6420 7465 7374 2066 6f72 2067  ented test for g
+00017620: 7375 7469 6c20 6370 202d 442e 0a20 202d  sutil cp -D..  -
+00017630: 2049 6d70 6c65 6d65 6e74 6564 2073 6574   Implemented set
+00017640: 6163 6c20 696e 7465 6772 6174 696f 6e20  acl integration 
+00017650: 7465 7374 732e 0a20 202d 2049 6d70 6c65  tests..  - Imple
+00017660: 6d65 6e74 6564 2074 6573 7473 2066 6f72  mented tests for
+00017670: 2072 6561 6469 6e67 2061 6e64 2073 6565   reading and see
+00017680: 6b69 6e67 2070 6173 7420 656e 6420 6f66  king past end of
+00017690: 2066 696c 652e 0a20 202d 2049 6d70 6c65   file..  - Imple
+000176a0: 6d65 6e74 6564 2061 6e64 2074 6573 7473  mented and tests
+000176b0: 2066 6f72 2069 7420 696e 206e 6577 2074   for it in new t
+000176c0: 6573 7473 206d 6f64 756c 652e 0a20 202d  ests module..  -
+000176d0: 2043 6861 6e67 6564 2063 7020 7465 7374   Changed cp test
+000176e0: 7320 7468 6174 2064 6f6e 2774 2073 7065  s that don't spe
+000176f0: 6369 6679 2061 2043 6f6e 7465 6e74 2d54  cify a Content-T
+00017700: 7970 6520 746f 2063 6865 636b 0a20 2020  ype to check.   
+00017710: 2066 6f72 206e 6577 2062 696e 6172 792f   for new binary/
+00017720: 6f63 7465 742d 7374 7265 616d 2064 6566  octet-stream def
+00017730: 6175 6c74 2069 6e73 7465 6164 206f 6620  ault instead of 
+00017740: 7365 7276 6572 2d64 6574 6563 7465 640a  server-detected.
+00017750: 2020 2020 6d69 6d65 2074 7970 652e 0a0a      mime type...
+00017760: 2d20 4368 616e 6765 6420 6773 7574 696c  - Changed gsutil
+00017770: 206d 7620 746f 2061 6c6c 6f77 206d 6f76   mv to allow mov
+00017780: 696e 6720 6c6f 6361 6c20 6669 6c65 732f  ing local files/
+00017790: 6469 7273 2074 6f20 7468 6520 636c 6f75  dirs to the clou
+000177a0: 642e 0a20 2050 7265 7669 6f75 736c 7920  d..  Previously 
+000177b0: 7468 6973 2077 6173 2064 6973 616c 6c6f  this was disallo
+000177c0: 7765 6420 696e 2074 6865 2062 656c 6965  wed in the belie
+000177d0: 6620 7765 2073 686f 756c 6420 6265 0a20  f we should be. 
+000177e0: 2063 6f6e 7365 7276 6174 6976 6520 6162   conservative ab
+000177f0: 6f75 7420 6465 6c65 7469 6e67 2064 6174  out deleting dat
+00017800: 6120 6672 6f6d 206c 6f63 616c 2064 6973  a from local dis
+00017810: 6b20 6275 7420 7468 6572 6520 6172 650a  k but there are.
+00017820: 2020 6c65 6769 7469 6d61 7465 2075 7365    legitimate use
+00017830: 2063 6173 6573 2066 6f72 206d 6f76 696e   cases for movin
+00017840: 6720 6461 7461 2066 726f 6d20 6120 6c6f  g data from a lo
+00017850: 6361 6c20 6469 7220 746f 2074 6865 0a20  cal dir to the. 
+00017860: 2063 6c6f 7564 2c20 6974 2773 2063 6c65   cloud, it's cle
+00017870: 6172 2074 6f20 7468 6520 7573 6572 2074  ar to the user t
+00017880: 6869 7320 776f 756c 6420 7265 6d6f 7665  his would remove
+00017890: 2064 6174 6120 6672 6f6d 2074 6865 0a20   data from the. 
+000178a0: 206c 6f63 616c 2064 6973 6b2c 2061 6e64   local disk, and
+000178b0: 2061 6c6c 6f77 696e 6720 6974 206d 616b   allowing it mak
+000178c0: 6573 2074 6865 2074 6f6f 6c20 6265 6861  es the tool beha
+000178d0: 7669 6f72 206d 6f72 650a 2020 636f 6e73  vior more.  cons
+000178e0: 6973 7465 6e74 2077 6974 6820 7768 6174  istent with what
+000178f0: 2075 7365 7273 2077 6f75 6c64 2065 7870   users would exp
+00017900: 6563 742e 0a2d 2043 6861 6e67 6564 2067  ect..- Changed g
+00017910: 7375 7469 6c20 7570 6461 7465 2063 6f6d  sutil update com
+00017920: 6d61 6e64 2074 6f20 696e 7369 7374 206f  mand to insist o
+00017930: 6e20 6973 5f73 6563 7572 6520 616e 640a  n is_secure and.
+00017940: 2020 6874 7470 735f 7661 6c69 6461 7465    https_validate
+00017950: 5f63 6572 7469 6669 6361 7465 732e 0a2d  _certificates..-
+00017960: 2046 6978 6564 2072 656c 6561 7365 206e   Fixed release n
+00017970: 6f20 6c6f 6e67 6572 2074 6f20 696e 636c  o longer to incl
+00017980: 7564 6520 6578 7472 616e 656f 7573 2062  ude extraneous b
+00017990: 6f74 6f20 6469 7273 2069 6e0a 2020 746f  oto dirs in.  to
+000179a0: 702d 6c65 7665 6c20 6f66 2067 7375 7469  p-level of gsuti
+000179b0: 6c20 6469 7374 7269 6275 7469 6f6e 2028  l distribution (
+000179c0: 6c69 6b65 2062 696e 2f20 616e 6420 646f  like bin/ and do
+000179d0: 6373 2f29 2e0a 2d20 4368 616e 6765 6420  cs/)..- Changed 
+000179e0: 7265 7375 6d61 626c 6520 7570 6c6f 6164  resumable upload
+000179f0: 2074 6872 6573 686f 6c64 2066 726f 6d20   threshold from 
+00017a00: 3120 4d42 2074 6f20 3220 4d42 2e0a 2d20  1 MB to 2 MB..- 
+00017a10: 5265 6d6f 7665 6420 6c65 6674 6f76 6572  Removed leftover
+00017a20: 2063 6c6f 7564 6175 7468 2061 6e64 2063   cloudauth and c
+00017a30: 6c6f 7564 7265 6164 6572 2064 6972 732e  loudreader dirs.
+00017a40: 2053 616d 706c 6520 636f 6465 0a20 206e   Sample code.  n
+00017a50: 6f77 206c 6976 6573 2061 7420 6874 7470  ow lives at http
+00017a60: 733a 2f2f 6769 7468 7562 2e63 6f6d 2f47  s://github.com/G
+00017a70: 6f6f 676c 6543 6c6f 7564 506c 6174 666f  oogleCloudPlatfo
+00017a80: 726d 2e0a 2d20 5570 6461 7465 6420 636f  rm..- Updated co
+00017a90: 7079 7269 6768 7420 6e6f 7469 6365 206f  pyright notice o
+00017aa0: 6e20 636f 6465 2066 696c 6573 2e0a 0a0a  n code files....
+00017ab0: 5265 6c65 6173 6520 332e 3231 2028 7265  Release 3.21 (re
+00017ac0: 6c65 6173 652d 6461 7465 3a20 3230 3132  lease-date: 2012
+00017ad0: 2d31 322d 3130 290a 3d3d 3d3d 3d3d 3d3d  -12-10).========
+00017ae0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00017af0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d0a  ===============.
+00017b00: 0a4e 6577 2046 6561 7475 7265 730a 2d2d  .New Features.--
+00017b10: 2d2d 2d2d 2d2d 2d2d 2d2d 0a0a 2d20 4164  ----------..- Ad
+00017b20: 6465 6420 7468 6520 6162 696c 6974 7920  ded the ability 
+00017b30: 666f 7220 7468 6520 6370 2063 6f6d 6d61  for the cp comma
+00017b40: 6e64 2074 6f20 636f 6e74 696e 7565 2065  nd to continue e
+00017b50: 7665 6e20 6966 2074 6865 7265 2069 7320  ven if there is 
+00017b60: 616e 0a20 2065 7272 6f72 2e20 5468 6973  an.  error. This
+00017b70: 2063 616e 2062 6520 6163 7469 7661 7465   can be activate
+00017b80: 6420 7769 7468 2074 6865 202d 6320 666c  d with the -c fl
+00017b90: 6167 2e0a 2d20 4164 6465 6420 7375 7070  ag..- Added supp
+00017ba0: 6f72 7420 666f 7220 7370 6563 6966 7969  ort for specifyi
+00017bb0: 6e67 2073 7263 2061 7267 7320 666f 7220  ng src args for 
+00017bc0: 6773 7574 696c 2063 7020 6f6e 2073 7464  gsutil cp on std
+00017bd0: 696e 2028 2d49 206f 7074 696f 6e29 0a0a  in (-I option)..
+00017be0: 4275 6720 4669 7865 730a 2d2d 2d2d 2d2d  Bug Fixes.------
+00017bf0: 2d2d 2d0a 0a2d 2046 6978 6564 2067 7375  ---..- Fixed gsu
+00017c00: 7469 6c20 7465 7374 2063 702c 2077 6869  til test cp, whi
+00017c10: 6368 2061 7373 756d 6564 2069 7420 7761  ch assumed it wa
+00017c20: 7320 7275 6e20 6672 6f6d 2067 7375 7469  s run from gsuti
+00017c30: 6c20 696e 7374 616c 6c20 6469 722e 0a2d  l install dir..-
+00017c40: 204d 6f64 7320 736f 2077 6520 7365 6e64   Mods so we send
+00017c50: 2067 656e 6572 6174 696f 6e20 7375 6272   generation subr
+00017c60: 6573 6f75 7263 6520 6f6e 6c79 2077 6865  esource only whe
+00017c70: 6e20 7573 6572 2072 6571 7565 7374 6564  n user requested
+00017c80: 0a20 2076 6572 7369 6f6e 2070 6172 7369  .  version parsi
+00017c90: 6e67 2028 2d76 206f 7074 696f 6e20 666f  ng (-v option fo
+00017ca0: 7220 6370 2061 6e64 2063 6174 2063 6f6d  r cp and cat com
+00017cb0: 6d61 6e64 7329 2e0a 0a4f 7468 6572 2043  mands)...Other C
+00017cc0: 6861 6e67 6573 0a2d 2d2d 2d2d 2d2d 2d2d  hanges.---------
+00017cd0: 2d2d 2d2d 0a0a 2d20 5570 6461 7465 6420  ----..- Updated 
+00017ce0: 646f 6373 2061 626f 7574 2075 7369 6e67  docs about using
+00017cf0: 2073 6574 6d65 7461 2077 6974 6820 7665   setmeta with ve
+00017d00: 7273 696f 6e69 6e67 2065 6e61 626c 6564  rsioning enabled
+00017d10: 2e0a 2d20 4368 616e 6765 6420 4743 5320  ..- Changed GCS 
+00017d20: 656e 6470 6f69 6e74 2069 6e20 626f 746f  endpoint in boto
+00017d30: 2074 6f20 7374 6f72 6167 652e 676f 6f67   to storage.goog
+00017d40: 6c65 6170 6973 2e63 6f6d 2e0a 0a0a 5265  leapis.com....Re
+00017d50: 6c65 6173 6520 332e 3230 2028 7265 6c65  lease 3.20 (rele
+00017d60: 6173 652d 6461 7465 3a20 3230 3132 2d31  ase-date: 2012-1
+00017d70: 312d 3330 290a 3d3d 3d3d 3d3d 3d3d 3d3d  1-30).==========
+00017d80: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00017d90: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d0a 0a4e  =============..N
+00017da0: 6577 2046 6561 7475 7265 730a 2d2d 2d2d  ew Features.----
+00017db0: 2d2d 2d2d 2d2d 2d2d 0a0a 2d20 4164 6465  --------..- Adde
+00017dc0: 6420 6120 6e6f 636c 6f62 6265 7220 282d  d a noclobber (-
+00017dd0: 6e29 2073 6574 7469 6e67 2066 6f72 2074  n) setting for t
+00017de0: 6865 2063 7020 636f 6d6d 616e 642e 2045  he cp command. E
+00017df0: 7869 7374 696e 6720 6f62 6a65 6374 732f  xisting objects/
+00017e00: 6669 6c65 730a 2020 7769 6c6c 206e 6f74  files.  will not
+00017e10: 2062 6520 6f76 6572 7772 6974 7465 6e20   be overwritten 
+00017e20: 7768 656e 2075 7369 6e67 2074 6869 7320  when using this 
+00017e30: 7365 7474 696e 672e 0a0a 4275 6720 4669  setting...Bug Fi
+00017e40: 7865 730a 2d2d 2d2d 2d2d 2d2d 2d0a 0a2d  xes.---------..-
+00017e50: 2046 6978 6564 206f 6666 2d62 792d 6f6e   Fixed off-by-on
+00017e60: 6520 6572 726f 7220 7768 656e 2072 6570  e error when rep
+00017e70: 6f72 7469 6e67 2062 7974 6573 2074 7261  orting bytes tra
+00017e80: 6e73 6665 7272 6564 2e0a 0a4f 7468 6572  nsferred...Other
+00017e90: 2043 6861 6e67 6573 0a2d 2d2d 2d2d 2d2d   Changes.-------
+00017ea0: 2d2d 2d2d 2d2d 0a0a 2d20 496d 7072 6f76  ------..- Improv
+00017eb0: 6564 2076 6572 7369 6f6e 696e 6720 7375  ed versioning su
+00017ec0: 7070 6f72 7420 666f 7220 7468 6520 7265  pport for the re
+00017ed0: 6d6f 7665 2063 6f6d 6d61 6e64 2e0a 2d20  move command..- 
+00017ee0: 496d 7072 6f76 6564 2074 6573 7420 7275  Improved test ru
+00017ef0: 6e6e 6572 2073 7570 706f 7274 2e0a 0a0a  nner support....
+00017f00: 5265 6c65 6173 6520 332e 3139 2028 7265  Release 3.19 (re
+00017f10: 6c65 6173 652d 6461 7465 3a20 3230 3132  lease-date: 2012
+00017f20: 2d31 312d 3236 290a 3d3d 3d3d 3d3d 3d3d  -11-26).========
+00017f30: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00017f40: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d0a  ===============.
+00017f50: 0a4e 6577 2046 6561 7475 7265 730a 2d2d  .New Features.--
+00017f60: 2d2d 2d2d 2d2d 2d2d 2d2d 0a0a 2d20 4164  ----------..- Ad
+00017f70: 6465 6420 7375 7070 6f72 7420 666f 7220  ded support for 
+00017f80: 6f62 6a65 6374 2076 6572 7369 6f6e 732e  object versions.
+00017f90: 0a2d 2041 6464 6564 2073 7570 706f 7274  .- Added support
+00017fa0: 2066 6f72 2073 746f 7261 6765 2063 6c61   for storage cla
+00017fb0: 7373 6573 2028 696e 636c 7564 696e 6720  sses (including 
+00017fc0: 4475 7261 626c 6520 5265 6475 6365 6420  Durable Reduced 
+00017fd0: 4176 6169 6c61 6269 6c69 7479 292e 0a0a  Availability)...
+00017fe0: 4275 6720 4669 7865 730a 2d2d 2d2d 2d2d  Bug Fixes.------
+00017ff0: 2d2d 2d0a 2d20 4669 7865 6420 7072 6f62  ---.- Fixed prob
+00018000: 6c65 6d20 7768 6572 6520 6370 202d 7120  lem where cp -q 
+00018010: 7072 6576 656e 7465 6420 7265 7375 6d61  prevented resuma
+00018020: 626c 6520 7570 6c6f 6164 7320 6672 6f6d  ble uploads from
+00018030: 2062 6569 6e67 2070 6572 666f 726d 6564   being performed
+00018040: 2e0a 2d20 4d61 6465 2073 6574 7765 6263  ..- Made setwebc
+00018050: 6667 2061 6e64 2073 6574 636f 7273 2074  fg and setcors t
+00018060: 6573 7473 2072 6f62 7573 7420 7772 7420  ests robust wrt 
+00018070: 584d 4c20 666f 726d 6174 7469 6e67 2076  XML formatting v
+00018080: 6172 6961 7469 6f6e 2e0a 0a4f 7468 6572  ariation...Other
+00018090: 2043 6861 6e67 6573 0a2d 2d2d 2d2d 2d2d   Changes.-------
+000180a0: 2d2d 2d2d 2d2d 0a0a 2d20 496e 636f 7270  ------..- Incorp
+000180b0: 6f72 6174 6564 2076 6170 6965 7240 206d  orated vapier@ m
+000180c0: 6f64 7320 746f 206d 616b 6520 7665 7273  ods to make vers
+000180d0: 696f 6e20 636f 6d6d 616e 6420 6e6f 7420  ion command not 
+000180e0: 6661 696c 2069 6620 4348 4543 4b53 554d  fail if CHECKSUM
+000180f0: 2066 696c 650a 2020 6d69 7373 696e 672e   file.  missing.
+00018100: 0a2d 2052 6566 6163 746f 7265 6420 6773  .- Refactored gs
+00018110: 7574 696c 2073 7563 6820 7468 6174 206d  util such that m
+00018120: 6f73 7420 6675 6e63 7469 6f6e 616c 6974  ost functionalit
+00018130: 7920 6578 6973 7473 2069 6e20 626f 746f  y exists in boto
+00018140: 2e0a 2d20 5570 6461 7465 6420 6773 7574  ..- Updated gsut
+00018150: 696c 2068 656c 7020 6465 7620 696e 7374  il help dev inst
+00018160: 7275 6374 696f 6e73 2066 6f72 2068 6f77  ructions for how
+00018170: 2074 6f20 6368 6563 6b20 6f75 7420 736f   to check out so
+00018180: 7572 6365 2e0a 0a0a 5265 6c65 6173 6520  urce....Release 
+00018190: 332e 3138 2028 7265 6c65 6173 652d 6461  3.18 (release-da
+000181a0: 7465 3a20 3230 3132 2d30 392d 3139 290a  te: 2012-09-19).
+000181b0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+000181c0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+000181d0: 3d3d 3d3d 3d3d 3d0a 0a42 7567 2046 6978  =======..Bug Fix
+000181e0: 6573 0a2d 2d2d 2d2d 2d2d 2d2d 0a0a 2d20  es.---------..- 
+000181f0: 4669 7865 6420 7265 7375 6d61 626c 6520  Fixed resumable 
+00018200: 7570 6c6f 6164 2062 6f75 6e64 6172 7920  upload boundary 
+00018210: 636f 6e64 6974 696f 6e20 7768 656e 2068  condition when h
+00018220: 616e 646c 696e 6720 504f 5354 2072 6571  andling POST req
+00018230: 7565 7374 0a20 2077 6865 6e20 7365 7276  uest.  when serv
+00018240: 6572 2061 6c72 6561 6479 2068 6173 2063  er already has c
+00018250: 6f6d 706c 6574 6520 6669 6c65 2c20 7768  omplete file, wh
+00018260: 6963 6820 7265 7375 6c74 6564 2069 6e20  ich resulted in 
+00018270: 616e 2069 6e66 696e 6974 650a 2020 6c6f  an infinite.  lo
+00018280: 6f70 2074 6861 7420 636f 6e73 756d 6564  op that consumed
+00018290: 2031 3030 2520 6f66 2074 6865 2043 5055   100% of the CPU
+000182a0: 2e0a 2d20 4669 7865 6420 6f6e 6520 6d6f  ..- Fixed one mo
+000182b0: 7265 2070 6c61 6365 2074 6861 7420 6f75  re place that ou
+000182c0: 7470 7574 7465 6420 7072 6f67 7265 7373  tputted progress
+000182d0: 2069 6e66 6f20 7768 656e 2067 7375 7469   info when gsuti
+000182e0: 6c20 6370 202d 710a 2020 7370 6563 6966  l cp -q.  specif
+000182f0: 6965 6420 2864 7572 696e 6720 7374 7265  ied (during stre
+00018300: 616d 696e 6720 7570 6c6f 6164 7329 2e0a  aming uploads)..
+00018310: 0a4f 7468 6572 2043 6861 6e67 6573 0a2d  .Other Changes.-
+00018320: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a0a 2d20  ------------..- 
+00018330: 5570 6461 7465 6420 6865 6c70 2074 6578  Updated help tex
+00018340: 7420 666f 7220 2267 7375 7469 6c20 6865  t for "gsutil he
+00018350: 6c70 2073 6574 6d65 7461 2220 616e 6420  lp setmeta" and 
+00018360: 2267 7375 7469 6c20 6865 6c70 206d 6574  "gsutil help met
+00018370: 6164 6174 6122 2c20 746f 0a20 2063 6c61  adata", to.  cla
+00018380: 7269 6679 2061 6e64 2064 6565 7065 6e20  rify and deepen 
+00018390: 7061 7274 7320 6f66 2074 6865 2064 6f63  parts of the doc
+000183a0: 756d 656e 7461 7469 6f6e 2e0a 0a0a 5265  umentation....Re
+000183b0: 6c65 6173 6520 332e 3137 2028 7265 6c65  lease 3.17 (rele
+000183c0: 6173 652d 6461 7465 3a20 3230 3132 2d30  ase-date: 2012-0
+000183d0: 382d 3137 290a 3d3d 3d3d 3d3d 3d3d 3d3d  8-17).==========
+000183e0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+000183f0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d0a 0a42  =============..B
+00018400: 7567 2046 6978 6573 0a2d 2d2d 2d2d 2d2d  ug Fixes.-------
+00018410: 2d2d 0a0a 2d20 4669 7865 6420 7261 6365  --..- Fixed race
+00018420: 2063 6f6e 6469 7469 6f6e 2077 6865 6e20   condition when 
+00018430: 6d75 6c74 6970 6c65 2074 6872 6561 6473  multiple threads
+00018440: 2061 7474 656d 7074 2074 6f20 6765 7420   attempt to get 
+00018450: 616e 204f 4175 7468 3220 7265 6672 6573  an OAuth2 refres
+00018460: 680a 2020 746f 6b65 6e20 636f 6e63 7572  h.  token concur
+00018470: 7265 6e74 6c79 2e0a 0a4f 7468 6572 2043  rently...Other C
+00018480: 6861 6e67 6573 0a2d 2d2d 2d2d 2d2d 2d2d  hanges.---------
+00018490: 2d2d 2d2d 0a0a 2d20 496d 706c 656d 656e  ----..- Implemen
+000184a0: 7465 6420 7369 6d70 6c69 6669 6564 2073  ted simplified s
+000184b0: 796e 7461 7820 666f 7220 7365 746d 6574  yntax for setmet
+000184c0: 6120 636f 6d6d 616e 642e 2054 6865 206f  a command. The o
+000184d0: 6c64 2073 796e 7461 7820 7374 696c 6c0a  ld syntax still.
+000184e0: 2020 776f 726b 7320 6275 7420 6973 206e    works but is n
+000184f0: 6f77 2064 6570 7265 6361 7465 642e 0a2d  ow deprecated..-
+00018500: 2041 6464 6564 2068 656c 7020 746f 2067   Added help to g
+00018510: 7375 7469 6c20 6370 202d 7a20 6f70 7469  sutil cp -z opti
+00018520: 6f6e 2c20 746f 2064 6573 6372 6962 6520  on, to describe 
+00018530: 686f 7720 746f 2063 6861 6e67 6520 7768  how to change wh
+00018540: 6572 6520 7465 6d70 0a20 2066 696c 6573  ere temp.  files
+00018550: 2061 7265 2077 7269 7474 656e 2e0a 0a0a   are written....
+00018560: 5265 6c65 6173 6520 332e 3136 2028 7265  Release 3.16 (re
+00018570: 6c65 6173 652d 6461 7465 3a20 3230 3132  lease-date: 2012
+00018580: 2d30 382d 3133 290a 3d3d 3d3d 3d3d 3d3d  -08-13).========
+00018590: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+000185a0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d0a  ===============.
+000185b0: 0a42 7567 2046 6978 6573 0a2d 2d2d 2d2d  .Bug Fixes.-----
+000185c0: 2d2d 2d2d 0a0a 2d20 4164 6465 6420 696e  ----..- Added in
+000185d0: 666f 2074 6f20 6275 696c 742d 696e 2068  fo to built-in h
+000185e0: 656c 7020 666f 7220 7365 746d 6574 6120  elp for setmeta 
+000185f0: 636f 6d6d 616e 642c 2074 6f20 6578 706c  command, to expl
+00018600: 6169 6e20 7468 6520 7379 6e74 6178 0a20  ain the syntax. 
+00018610: 206e 6565 6465 6420 7768 656e 2072 756e   needed when run
+00018620: 6e69 6e67 2066 726f 6d20 5769 6e64 6f77  ning from Window
+00018630: 732e 0a0a 0a52 656c 6561 7365 2033 2e31  s....Release 3.1
+00018640: 3520 2872 656c 6561 7365 2d64 6174 653a  5 (release-date:
+00018650: 2032 3031 322d 3038 2d31 3229 0a3d 3d3d   2012-08-12).===
+00018660: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00018670: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00018680: 3d3d 3d3d 0a0a 4e65 7720 4665 6174 7572  ====..New Featur
+00018690: 6573 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a  es.------------.
+000186a0: 0a2d 2049 6d70 6c65 6d65 6e74 6564 2067  .- Implemented g
+000186b0: 7375 7469 6c20 7365 746d 6574 6120 636f  sutil setmeta co
+000186c0: 6d6d 616e 642e 0a2d 204d 6164 6520 6773  mmand..- Made gs
+000186d0: 7574 696c 2075 6e64 6572 7374 616e 6420  util understand 
+000186e0: 6275 636b 6574 2073 7562 6469 7220 636f  bucket subdir co
+000186f0: 6e76 656e 7469 6f6e 7320 7573 6564 2062  nventions used b
+00018700: 7920 7661 7269 6f75 7320 746f 6f6c 730a  y various tools.
+00018710: 2020 286c 696b 6520 4743 5320 4d61 6e61    (like GCS Mana
+00018720: 6765 7220 616e 6420 436c 6f75 6442 6572  ger and CloudBer
+00018730: 7279 2920 736f 2069 6620 796f 7520 6370  ry) so if you cp
+00018740: 206f 7220 6d76 2074 6f20 6120 7375 6264   or mv to a subd
+00018750: 6972 2079 6f75 0a20 2063 7265 6174 6564  ir you.  created
+00018760: 2077 6974 6820 6f6e 6520 6f66 2074 686f   with one of tho
+00018770: 7365 2074 6f6f 6c73 2069 7420 7769 6c6c  se tools it will
+00018780: 2077 6f72 6b20 6173 2065 7870 6563 7465   work as expecte
+00018790: 642e 0a2d 2041 6464 6564 2073 7570 706f  d..- Added suppo
+000187a0: 7274 2066 6f72 2057 696e 646f 7773 2064  rt for Windows d
+000187b0: 7269 7665 206c 6574 7465 722d 7072 6566  rive letter-pref
+000187c0: 6163 6564 2070 6174 6873 2077 6865 6e20  aced paths when 
+000187d0: 7573 696e 6720 5374 6f72 6167 650a 2020  using Storage.  
+000187e0: 5552 4973 2e0a 0a42 7567 2046 6978 6573  URIs...Bug Fixes
+000187f0: 0a2d 2d2d 2d2d 2d2d 2d2d 0a0a 2d20 4669  .---------..- Fi
+00018800: 7865 6420 7065 7266 6f72 6d61 6e63 6520  xed performance 
+00018810: 6275 6720 7768 656e 2064 6f77 6e6c 6f61  bug when downloa
+00018820: 6469 6e67 2061 206c 6172 6765 206f 626a  ding a large obj
+00018830: 6563 7420 7769 7468 2043 6f6e 7465 6e74  ect with Content
+00018840: 2d0a 2020 456e 636f 6469 6e67 3a67 7a69  -.  Encoding:gzi
+00018850: 702c 2077 6865 7265 2064 6563 6f6d 7072  p, where decompr
+00018860: 6573 7369 6f6e 2061 7474 656d 7074 6564  ession attempted
+00018870: 2074 6f20 6c6f 6164 2074 6865 2065 6e74   to load the ent
+00018880: 6972 6520 6f62 6a65 6374 0a20 2069 6e20  ire object.  in 
+00018890: 6d65 6d6f 7279 2e20 416c 736f 2061 6464  memory. Also add
+000188a0: 6564 2022 556e 636f 6d70 7265 7373 696e  ed "Uncompressin
+000188b0: 6722 206c 6f67 206f 7574 7075 7420 6966  g" log output if
+000188c0: 2066 696c 6520 6973 206c 6172 6765 7220   file is larger 
+000188d0: 7468 616e 0a20 2035 304d 2c20 746f 206d  than.  50M, to m
+000188e0: 616b 6520 6974 2063 6c65 6172 2074 6865  ake it clear the
+000188f0: 2064 6f77 6e6c 6f61 6420 6861 736e 2774   download hasn't
+00018900: 2073 7461 6c6c 6564 2e0a 2d20 4669 7865   stalled..- Fixe
+00018910: 6420 6e61 6d69 6e67 2062 7567 2077 6865  d naming bug whe
+00018920: 6e20 7065 7266 6f72 6d69 6e67 2067 7375  n performing gsu
+00018930: 7469 6c20 6d76 2066 726f 6d20 6120 6275  til mv from a bu
+00018940: 636b 6574 2073 7562 6469 7220 746f 0a20  cket subdir to. 
+00018950: 2061 6e64 2065 7869 7374 696e 6720 6275   and existing bu
+00018960: 636b 6574 2073 7562 6469 722e 0a2d 2046  cket subdir..- F
+00018970: 6978 6564 2062 7567 2074 6861 7420 6361  ixed bug that ca
+00018980: 7573 6564 2063 726f 7373 2d70 726f 7669  used cross-provi
+00018990: 6465 7220 636f 7069 6573 2069 6e74 6f20  der copies into 
+000189a0: 476f 6f67 6c65 2043 6c6f 7564 2053 746f  Google Cloud Sto
+000189b0: 7261 6765 2074 6f0a 2020 6661 696c 2e0a  rage to.  fail..
+000189c0: 2d20 4d61 6465 2063 6861 6e67 6520 6e65  - Made change ne
+000189d0: 6564 6564 2074 6f20 6d61 6b65 2072 6573  eded to make res
+000189e0: 756d 6162 6c65 2074 7261 6e73 6665 7220  umable transfer 
+000189f0: 7072 6f67 7265 7373 206d 6573 7361 6765  progress message
+00018a00: 7320 6e6f 7420 7072 696e 740a 2020 7768  s not print.  wh
+00018a10: 656e 2072 756e 6e69 6e67 2067 7375 7469  en running gsuti
+00018a20: 6c20 6370 202d 712e 0a2d 2046 6978 6564  l cp -q..- Fixed
+00018a30: 2063 6f70 792f 7061 7374 6520 6572 726f   copy/paste erro
+00018a40: 7220 696e 2063 6f6e 6669 6720 6669 6c65  r in config file
+00018a50: 2064 6f63 756d 656e 7461 7469 6f6e 2066   documentation f
+00018a60: 6f72 0a20 2068 7474 7073 5f76 616c 6964  or.  https_valid
+00018a70: 6174 655f 6365 7274 6966 6963 6174 6573  ate_certificates
+00018a80: 206f 7074 696f 6e2e 0a2d 2056 6172 696f   option..- Vario
+00018a90: 7573 2074 7970 6f20 6669 7865 732e 0a0a  us typo fixes...
+00018aa0: 4f74 6865 7220 4368 616e 6765 730a 2d2d  Other Changes.--
+00018ab0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 0a2d 2043  -----------..- C
+00018ac0: 6861 6e67 6564 2067 7375 7469 6c20 746f  hanged gsutil to
+00018ad0: 2075 6e73 6574 2068 7474 705f 7072 6f78   unset http_prox
+00018ae0: 7920 656e 7669 726f 6e6d 656e 7420 7661  y environment va
+00018af0: 7269 6162 6c65 2069 6620 6974 2773 2073  riable if it's s
+00018b00: 6574 2c0a 2020 6265 6361 7573 6520 6974  et,.  because it
+00018b10: 2063 6f6e 6675 7365 7320 626f 746f 2e20   confuses boto. 
+00018b20: 2850 726f 7869 6573 2073 686f 756c 6420  (Proxies should 
+00018b30: 696e 7374 6561 6420 6265 2063 6f6e 6669  instead be confi
+00018b40: 6775 7265 6420 7669 6120 7468 650a 2020  gured via the.  
+00018b50: 626f 746f 2063 6f6e 6669 6720 6669 6c65  boto config file
+00018b60: 2e29 0a0a 0a52 656c 6561 7365 2033 2e31  .)...Release 3.1
+00018b70: 3420 2872 656c 6561 7365 2d64 6174 653a  4 (release-date:
+00018b80: 2032 3031 322d 3037 2d32 3829 0a3d 3d3d   2012-07-28).===
+00018b90: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00018ba0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00018bb0: 3d3d 3d3d 0a0a 4e65 7720 4665 6174 7572  ====..New Featur
+00018bc0: 6573 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a  es.------------.
+00018bd0: 0a2d 2041 6464 6564 2063 7020 2d71 206f  .- Added cp -q o
+00018be0: 7074 696f 6e2c 2074 6f20 7375 7070 6f72  ption, to suppor
+00018bf0: 7420 7175 6965 7420 6f70 6572 6174 696f  t quiet operatio
+00018c00: 6e20 6672 6f6d 2063 726f 6e20 6a6f 6273  n from cron jobs
+00018c10: 2e0a 2d20 4d61 6465 2063 6f6e 6669 6720  ..- Made config 
+00018c20: 636f 6d6d 616e 6420 7265 7374 6f72 6520  command restore 
+00018c30: 6261 636b 6564 2075 7020 6669 6c65 2069  backed up file i
+00018c40: 6620 7468 6572 6520 7761 7320 6120 6661  f there was a fa
+00018c50: 696c 7572 6520 6f72 2075 7365 720a 2020  ilure or user.  
+00018c60: 6869 7473 205e 432e 0a0a 4275 6720 4669  hits ^C...Bug Fi
+00018c70: 7865 730a 2d2d 2d2d 2d2d 2d2d 2d0a 0a2d  xes.---------..-
+00018c80: 2046 6978 6564 2062 7567 2077 6865 7265   Fixed bug where
+00018c90: 2067 7375 7469 6c20 6370 202d 5220 6672   gsutil cp -R fr
+00018ca0: 6f6d 2061 2073 6f75 7263 6520 6469 7265  om a source dire
+00018cb0: 6374 6f72 7920 6469 646e 2774 2067 656e  ctory didn't gen
+00018cc0: 6572 6174 650a 2020 636f 7272 6563 7420  erate.  correct 
+00018cd0: 6465 7374 696e 6174 696f 6e20 7061 7468  destination path
+00018ce0: 2e0a 2d20 4669 7865 6420 6669 6c65 2068  ..- Fixed file h
+00018cf0: 616e 646c 6520 6c65 616b 2069 6e20 6773  andle leak in gs
+00018d00: 7574 696c 2063 7020 2d7a 0a2d 2046 6978  util cp -z.- Fix
+00018d10: 6564 2062 7567 2074 6861 7420 6361 7573  ed bug that caus
+00018d20: 6564 2063 7020 2d61 206f 7074 696f 6e20  ed cp -a option 
+00018d30: 6e6f 7420 746f 2077 6f72 6b20 7768 656e  not to work when
+00018d40: 2063 6f70 7969 6e67 2069 6e20 7468 6520   copying in the 
+00018d50: 636c 6f75 642e 0a2d 2046 6978 6564 2062  cloud..- Fixed b
+00018d60: 7567 2074 6861 7420 6361 7573 6564 2027  ug that caused '
+00018d70: 2f2d 2720 746f 2062 6520 6170 7065 6e64  /-' to be append
+00018d80: 6564 2074 6f20 6f62 6a65 6374 206e 616d  ed to object nam
+00018d90: 6520 666f 7220 7374 7265 616d 696e 670a  e for streaming.
+00018da0: 2020 7570 6c6f 6164 732e 0a2d 2052 6576    uploads..- Rev
+00018db0: 6572 7420 696e 636f 7272 6563 7420 6c69  ert incorrect li
+00018dc0: 6e65 2049 2063 6861 6e67 6564 2069 6e20  ne I changed in 
+00018dd0: 7072 6576 696f 7573 2043 4c2c 2074 6861  previous CL, tha
+00018de0: 7420 6174 7465 6d70 7465 6420 746f 0a20  t attempted to. 
+00018df0: 2067 6574 2066 7020 6672 6f6d 2073 7263   get fp from src
+00018e00: 5f6b 6579 206f 626a 6563 742e 2054 6865  _key object. The
+00018e10: 2072 6561 6c20 6669 7820 7468 6174 2773   real fix that's
+00018e20: 206e 6565 6465 6420 6973 2064 6573 6372   needed is descr
+00018e30: 6962 6564 2069 6e0a 2020 6874 7470 733a  ibed in.  https:
+00018e40: 2f2f 6769 7468 7562 2e63 6f6d 2f47 6f6f  //github.com/Goo
+00018e50: 676c 6543 6c6f 7564 506c 6174 666f 726d  gleCloudPlatform
+00018e60: 2f67 7375 7469 6c2f 6973 7375 6573 2f37  /gsutil/issues/7
+00018e70: 322e 0a0a 4f74 6865 7220 4368 616e 6765  2...Other Change
+00018e80: 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a  s.-------------.
+00018e90: 0a2d 2043 6861 6e67 6564 206c 6f67 6769  .- Changed loggi
+00018ea0: 6e67 2074 6f20 7072 696e 7420 2243 6f70  ng to print "Cop
+00018eb0: 7969 6e67 2e2e 2e22 2061 6e64 2043 6f6e  ying..." and Con
+00018ec0: 7465 6e74 2d54 7970 6520 6f6e 2073 616d  tent-Type on sam
+00018ed0: 6520 6c69 6e65 3b0a 2020 7265 6661 6374  e line;.  refact
+00018ee0: 6f72 6564 2063 6f6e 7465 6e74 2074 7970  ored content typ
+00018ef0: 6520 616e 6420 6c6f 6720 6861 6e64 6c69  e and log handli
+00018f00: 6e67 2e0a 0a0a 5265 6c65 6173 6520 332e  ng....Release 3.
+00018f10: 3133 2028 7265 6c65 6173 652d 6461 7465  13 (release-date
+00018f20: 3a20 3230 3132 2d30 372d 3139 290a 3d3d  : 2012-07-19).==
+00018f30: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00018f40: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00018f50: 3d3d 3d3d 3d0a 0a42 7567 2046 6978 6573  =====..Bug Fixes
+00018f60: 0a2d 2d2d 2d2d 2d2d 2d2d 0a0a 2d20 496e  .---------..- In
+00018f70: 636c 7564 6564 2074 6865 2066 6978 2074  cluded the fix t
+00018f80: 6f20 6d61 6b65 2027 6773 7574 696c 2063  o make 'gsutil c
+00018f90: 6f6e 6669 6727 2068 6f6e 6f72 2042 4f54  onfig' honor BOT
+00018fa0: 4f5f 434f 4e46 4947 2065 6e76 6972 6f6e  O_CONFIG environ
+00018fb0: 6d65 6e74 0a20 2076 6172 6961 626c 6520  ment.  variable 
+00018fc0: 2877 6869 6368 2077 6173 2069 6e74 656e  (which was inten
+00018fd0: 6465 6420 746f 2062 6520 696e 636c 7564  ded to be includ
+00018fe0: 6564 2069 6e20 5265 6c65 6173 6520 332e  ed in Release 3.
+00018ff0: 3132 290a 0a0a 5265 6c65 6173 6520 332e  12)...Release 3.
+00019000: 3131 2028 7265 6c65 6173 652d 6461 7465  11 (release-date
+00019010: 3a20 3230 3132 2d30 362d 3238 290a 3d3d  : 2012-06-28).==
+00019020: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00019030: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00019040: 3d3d 3d3d 3d0a 0a4e 6577 2046 6561 7475  =====..New Featu
+00019050: 7265 730a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  res.------------
+00019060: 0a0a 2d20 4164 6465 6420 7375 7070 6f72  ..- Added suppor
+00019070: 7420 666f 7220 636f 6e66 6967 7572 696e  t for configurin
+00019080: 6720 7765 6273 6974 6520 6275 636b 6574  g website bucket
+00019090: 732e 0a0a 4275 6720 4669 7865 730a 2d2d  s...Bug Fixes.--
+000190a0: 2d2d 2d2d 2d2d 2d0a 0a2d 2046 6978 6564  -------..- Fixed
+000190b0: 2062 7567 2074 6861 7420 6361 7573 6564   bug that caused
+000190c0: 2073 696d 756c 7461 6e65 6f75 7320 7265   simultaneous re
+000190d0: 7375 6d61 626c 6520 646f 776e 6c6f 6164  sumable download
+000190e0: 7320 6f66 2074 6865 2073 616d 6520 736f  s of the same so
+000190f0: 7572 6365 0a20 206f 626a 6563 7420 746f  urce.  object to
+00019100: 2075 7365 2074 6865 2073 616d 6520 7472   use the same tr
+00019110: 6163 6b65 7220 6669 6c65 2e0a 2d20 4368  acker file..- Ch
+00019120: 616e 6765 6420 6c61 6e67 7561 6765 2063  anged language c
+00019130: 6f64 6520 7370 6563 2070 6f69 6e74 6572  ode spec pointer
+00019140: 2066 726f 6d20 5769 6b69 7065 6469 6120   from Wikipedia 
+00019150: 746f 206c 6f63 2e67 6f76 2028 666f 720a  to loc.gov (for.
+00019160: 2020 436f 6e74 656e 742d 4c61 6e67 7561    Content-Langua
+00019170: 6765 2068 6561 6465 7229 2e0a 0a0a 5265  ge header)....Re
+00019180: 6c65 6173 6520 332e 3130 2028 7265 6c65  lease 3.10 (rele
+00019190: 6173 652d 6461 7465 3a20 3230 3132 2d30  ase-date: 2012-0
+000191a0: 362d 3139 290a 3d3d 3d3d 3d3d 3d3d 3d3d  6-19).==========
+000191b0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+000191c0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d0a 0a4e  =============..N
+000191d0: 6577 2046 6561 7475 7265 730a 2d2d 2d2d  ew Features.----
+000191e0: 2d2d 2d2d 2d2d 2d2d 0a0a 2d20 4164 6465  --------..- Adde
+000191f0: 6420 7375 7070 6f72 7420 666f 7220 7365  d support for se
+00019200: 7474 696e 6720 616e 6420 6c69 7374 696e  tting and listin
+00019210: 6720 436f 6e74 656e 742d 4c61 6e67 7561  g Content-Langua
+00019220: 6765 2068 6561 6465 722e 0a0a 4275 6720  ge header...Bug 
+00019230: 4669 7865 730a 2d2d 2d2d 2d2d 2d2d 2d0a  Fixes.---------.
+00019240: 0a2d 2046 6978 6564 2062 7567 2074 6861  .- Fixed bug tha
+00019250: 7420 6361 7573 6564 2067 6574 6163 6c2f  t caused getacl/
+00019260: 7365 7461 636c 2063 6f6d 6d61 6e64 7320  setacl commands 
+00019270: 746f 2067 6574 2061 2063 6861 7261 6374  to get a charact
+00019280: 6572 2065 6e63 6f64 696e 670a 2020 6578  er encoding.  ex
+00019290: 6365 7074 696f 6e20 7768 656e 2041 434c  ception when ACL
+000192a0: 2063 6f6e 7465 6e74 2063 6f6e 7461 696e   content contain
+000192b0: 6564 2063 6f6e 7465 6e74 206e 6f74 2072  ed content not r
+000192c0: 6570 7265 7365 6e74 6162 6c65 2069 6e20  epresentable in 
+000192d0: 4953 4f2d 3838 3539 2d31 0a20 2063 6861  ISO-8859-1.  cha
+000192e0: 7261 6374 6572 2073 6574 2e0a 2d20 4669  racter set..- Fi
+000192f0: 7865 6420 6773 7574 696c 2075 7064 6174  xed gsutil updat
+00019300: 6520 6e6f 7420 746f 2066 6169 6c20 756e  e not to fail un
+00019310: 6465 7220 5769 6e64 6f77 7320 6578 636c  der Windows excl
+00019320: 7573 6976 6520 6669 6c65 206c 6f63 6b69  usive file locki
+00019330: 6e67 2e0a 2d20 4669 7865 6420 6773 7574  ng..- Fixed gsut
+00019340: 696c 206c 7320 2d4c 2074 6f20 636f 6e74  il ls -L to cont
+00019350: 696e 7565 2070 6173 7420 3430 3320 6572  inue past 403 er
+00019360: 726f 7273 2e0a 2d20 5570 6461 7465 6420  rors..- Updated 
+00019370: 6773 7574 696c 2074 6573 7473 2061 6e64  gsutil tests and
+00019380: 2061 6c73 6f20 6865 6c70 2064 6576 2077   also help dev w
+00019390: 6974 6820 696e 7374 7275 6374 696f 6e73  ith instructions
+000193a0: 206f 6e20 686f 7720 746f 2072 756e 0a20   on how to run. 
+000193b0: 2062 6f74 6f20 7465 7374 732c 2062 6173   boto tests, bas
+000193c0: 6564 206f 6e20 7265 6365 6e74 2074 6573  ed on recent tes
+000193d0: 7420 7265 6661 6374 6f72 696e 6720 646f  t refactoring do
+000193e0: 6e65 2074 6f20 696e 2062 6f74 6f20 6c69  ne to in boto li
+000193f0: 6272 6172 792e 0a2d 2043 6c65 616e 6564  brary..- Cleaned
+00019400: 2075 7020 7061 7274 7320 6f66 2063 7020   up parts of cp 
+00019410: 6865 6c70 2074 6578 742e 0a0a 0a52 656c  help text....Rel
+00019420: 6561 7365 2033 2e39 2028 7265 6c65 6173  ease 3.9 (releas
+00019430: 652d 6461 7465 3a20 3230 3132 2d30 352d  e-date: 2012-05-
+00019440: 3234 290a 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  24).============
+00019450: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00019460: 3d3d 3d3d 3d3d 3d3d 3d3d 0a0a 4275 6720  ==========..Bug 
+00019470: 4669 7865 730a 2d2d 2d2d 2d2d 2d2d 2d0a  Fixes.---------.
+00019480: 0a2d 2046 6978 6564 2062 7567 2074 6861  .- Fixed bug tha
+00019490: 7420 6361 7573 6564 2065 7874 7261 2022  t caused extra "
+000194a0: 6669 6c65 3a2f 2220 746f 2062 6520 696e  file:/" to be in
+000194b0: 636c 7564 6564 2069 6e20 7061 7468 6e61  cluded in pathna
+000194c0: 6d65 7320 7769 7468 0a20 2064 6f69 6e67  mes with.  doing
+000194d0: 2067 7375 7469 6c20 6370 202d 5220 6f6e   gsutil cp -R on
+000194e0: 2057 696e 646f 7773 2e0a 0a0a 5265 6c65   Windows....Rele
+000194f0: 6173 6520 332e 3820 2872 656c 6561 7365  ase 3.8 (release
+00019500: 2d64 6174 653a 2032 3031 322d 3035 2d32  -date: 2012-05-2
+00019510: 3029 0a3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  0).=============
+00019520: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00019530: 3d3d 3d3d 3d3d 3d3d 3d0a 0a42 7567 2046  =========..Bug F
+00019540: 6978 6573 0a2d 2d2d 2d2d 2d2d 2d2d 0a0a  ixes.---------..
+00019550: 2d20 4669 7865 6420 7072 6f62 6c65 6d20  - Fixed problem 
+00019560: 7769 7468 206e 6f6e 2d41 5343 4949 2066  with non-ASCII f
+00019570: 696c 656e 616d 6520 6368 6172 6163 7465  ilename characte
+00019580: 7273 206e 6f74 2073 6574 7469 6e67 2065  rs not setting e
+00019590: 6e63 6f64 696e 6720 6265 666f 7265 0a20  ncoding before. 
+000195a0: 2061 7474 656d 7074 696e 6720 746f 2068   attempting to h
+000195b0: 6173 6820 666f 7220 6765 6e65 7261 7469  ash for generati
+000195c0: 6e67 2072 6573 756d 6162 6c65 2074 7261  ng resumable tra
+000195d0: 6e73 6665 7220 6669 6c65 6e61 6d65 2e0a  nsfer filename..
+000195e0: 0a0a 5265 6c65 6173 6520 332e 3720 2872  ..Release 3.7 (r
+000195f0: 656c 6561 7365 2d64 6174 653a 2032 3031  elease-date: 201
+00019600: 322d 3035 2d31 3129 0a3d 3d3d 3d3d 3d3d  2-05-11).=======
+00019610: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00019620: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d0a  ===============.
+00019630: 0a42 7567 2046 6978 6573 0a2d 2d2d 2d2d  .Bug Fixes.-----
+00019640: 2d2d 2d2d 0a0a 2d20 4669 7865 6420 6861  ----..- Fixed ha
+00019650: 6e64 6c69 6e67 206f 6620 4854 5450 5320  ndling of HTTPS 
+00019660: 7475 6e6e 656c 696e 6720 7468 726f 7567  tunneling throug
+00019670: 6820 6120 7072 6f78 792e 0a0a 0a52 656c  h a proxy....Rel
+00019680: 6561 7365 2033 2e36 2028 7265 6c65 6173  ease 3.6 (releas
+00019690: 652d 6461 7465 3a20 3230 3132 2d30 352d  e-date: 2012-05-
+000196a0: 3039 290a 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  09).============
+000196b0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+000196c0: 3d3d 3d3d 3d3d 3d3d 3d3d 0a0a 4275 6720  ==========..Bug 
+000196d0: 4669 7865 730a 2d2d 2d2d 2d2d 2d2d 2d0a  Fixes.---------.
+000196e0: 0a2d 2046 6978 6564 2062 7567 2074 6861  .- Fixed bug tha
+000196f0: 7420 6361 7573 6564 2077 696c 6463 6172  t caused wildcar
+00019700: 6473 2073 7061 6e6e 696e 6720 6469 7265  ds spanning dire
+00019710: 6374 6f72 6965 7320 6e6f 7420 746f 2077  ctories not to w
+00019720: 6f72 6b2e 0a2d 2046 6978 6564 2062 7567  ork..- Fixed bug
+00019730: 2074 6861 7420 6773 7574 696c 2063 7020   that gsutil cp 
+00019740: 2d7a 206e 6f74 2074 6f20 6669 6e64 2061  -z not to find a
+00019750: 7661 696c 6162 6c65 2074 6d70 2073 7061  vailable tmp spa
+00019760: 6365 2063 6f72 7265 6374 6c79 0a20 2075  ce correctly.  u
+00019770: 6e64 6572 2057 696e 646f 7773 2e0a 0a0a  nder Windows....
+00019780: 5265 6c65 6173 6520 332e 3520 2872 656c  Release 3.5 (rel
+00019790: 6561 7365 2d64 6174 653a 2032 3031 322d  ease-date: 2012-
+000197a0: 3034 2d33 3029 0a3d 3d3d 3d3d 3d3d 3d3d  04-30).=========
+000197b0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+000197c0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d0a 0a50  =============..P
+000197d0: 6572 666f 726d 616e 6365 2049 6d70 726f  erformance Impro
+000197e0: 7665 6d65 6e74 0a2d 2d2d 2d2d 2d2d 2d2d  vement.---------
+000197f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a0a  --------------..
+00019800: 2d20 4368 616e 6765 2062 7920 4576 616e  - Change by Evan
+00019810: 2057 6f72 6c65 7920 746f 2063 616c 6375   Worley to calcu
+00019820: 6c61 7465 204d 4435 7320 696e 6372 656d  late MD5s increm
+00019830: 656e 7461 6c6c 7920 6475 7269 6e67 2075  entally during u
+00019840: 706c 6f61 6473 2061 6e64 0a20 2064 6f77  ploads and.  dow
+00019850: 6e6c 6f61 6473 2e20 5468 6973 2072 6564  nloads. This red
+00019860: 7563 6573 206f 7665 7261 6c6c 2074 7261  uces overall tra
+00019870: 6e73 6665 7220 7469 6d65 2073 7562 7374  nsfer time subst
+00019880: 616e 7469 616c 6c79 2066 6f72 206c 6172  antially for lar
+00019890: 6765 0a20 206f 626a 6563 7473 2e0a 0a42  ge.  objects...B
+000198a0: 7567 2046 6978 6573 0a2d 2d2d 2d2d 2d2d  ug Fixes.-------
+000198b0: 2d2d 0a0a 2d20 4669 7865 6420 6275 6720  --..- Fixed bug 
+000198c0: 7768 6572 6520 7570 6c6f 6164 696e 6720  where uploading 
+000198d0: 616e 6420 6d6f 7669 6e67 206d 756c 7469  and moving multi
+000198e0: 706c 6520 6669 6c65 7320 746f 2061 2062  ple files to a b
+000198f0: 7563 6b65 7420 7375 6264 6972 6563 746f  ucket subdirecto
+00019900: 7279 0a20 2064 6964 6e27 7420 776f 726b  ry.  didn't work
+00019910: 2061 7320 696e 7465 6e64 6564 2e0a 2020   as intended..  
+00019920: 2868 7474 7073 3a2f 2f67 6974 6875 622e  (https://github.
+00019930: 636f 6d2f 476f 6f67 6c65 436c 6f75 6450  com/GoogleCloudP
+00019940: 6c61 7466 6f72 6d2f 6773 7574 696c 2f69  latform/gsutil/i
+00019950: 7373 7565 732f 3932 292e 0a2d 2046 6978  ssues/92)..- Fix
+00019960: 6564 2062 7567 2077 6865 7265 2067 7375  ed bug where gsu
+00019970: 7469 6c20 6370 202d 7220 736f 7572 6365  til cp -r source
+00019980: 6469 7220 6469 646e 2774 2063 6f70 7920  dir didn't copy 
+00019990: 746f 2073 7065 6369 6669 6564 2073 7562  to specified sub
+000199a0: 6469 720a 2020 6966 2074 6865 7265 2069  dir.  if there i
+000199b0: 7320 6f6e 6c79 206f 6e65 2066 696c 6520  s only one file 
+000199c0: 696e 2073 6f75 7263 6564 6972 2e0a 2d20  in sourcedir..- 
+000199d0: 4669 7865 6420 6275 6720 7768 6572 6520  Fixed bug where 
+000199e0: 7472 6163 6b65 7220 6669 6c65 2069 6e63  tracker file inc
+000199f0: 6c75 6465 6420 6120 7469 6d65 7374 616d  luded a timestam
+00019a00: 7020 7468 6174 2063 6175 7365 6420 6974  p that caused it
+00019a10: 206e 6f74 2074 6f0a 2020 6265 2072 6563   not to.  be rec
+00019a20: 6f67 6e69 7a65 6420 6163 726f 7373 2073  ognized across s
+00019a30: 6573 7369 6f6e 732e 0a2d 2046 6978 6564  essions..- Fixed
+00019a40: 2062 7567 2077 6865 7265 2067 733a 2f2f   bug where gs://
+00019a50: 6275 636b 6574 2f2a 2f64 6972 2077 696c  bucket/*/dir wil
+00019a60: 6463 6172 6420 6d61 7463 6865 7320 746f  dcard matches to
+00019a70: 6f20 6d61 6e79 206f 626a 6563 7473 2e0a  o many objects..
+00019a80: 2d20 4669 7865 6420 646f 6375 6d65 6e74  - Fixed document
+00019a90: 6174 696f 6e20 6572 726f 7273 2069 6e20  ation errors in 
+00019aa0: 6865 6c70 2061 7373 6f63 6961 7465 6420  help associated 
+00019ab0: 7769 7468 2041 434c 7320 616e 6420 7072  with ACLs and pr
+00019ac0: 6f6a 6563 7473 2e0a 2d20 4368 616e 6765  ojects..- Change
+00019ad0: 6420 4743 5320 4143 4c20 7061 7273 696e  d GCS ACL parsin
+00019ae0: 6720 746f 2062 6520 6361 7365 2d69 6e73  g to be case-ins
+00019af0: 656e 7369 7469 7665 2e0a 2d20 4368 616e  ensitive..- Chan
+00019b00: 6765 6420 6c73 2074 6f20 7072 696e 7420  ged ls to print 
+00019b10: 6572 726f 7220 616e 6420 6578 6974 2077  error and exit w
+00019b20: 6974 6820 6e6f 6e2d 3020 7374 6174 7573  ith non-0 status
+00019b30: 2077 6865 6e20 7769 6c64 6361 7264 206d   when wildcard m
+00019b40: 6174 6368 6573 0a20 206e 6f74 6869 6e67  atches.  nothing
+00019b50: 2c20 746f 2062 6520 6d6f 7265 2063 6f6e  , to be more con
+00019b60: 7369 7374 656e 7420 7769 7468 2055 4e49  sistent with UNI
+00019b70: 5820 7368 656c 6c20 6265 6861 7669 6f72  X shell behavior
+00019b80: 2e0a 0a0a 5265 6c65 6173 6520 332e 3420  ....Release 3.4 
+00019b90: 2872 656c 6561 7365 2d64 6174 653a 2032  (release-date: 2
+00019ba0: 3031 322d 3034 2d30 3629 0a3d 3d3d 3d3d  012-04-06).=====
+00019bb0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00019bc0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00019bd0: 3d0a 0a42 7567 2046 6978 6573 0a2d 2d2d  =..Bug Fixes.---
+00019be0: 2d2d 2d2d 2d2d 0a0a 2d20 4669 7865 6420  ------..- Fixed 
+00019bf0: 7072 6f62 6c65 6d20 7768 6572 6520 7265  problem where re
+00019c00: 7375 6d61 626c 6520 7570 6c6f 6164 732f  sumable uploads/
+00019c10: 646f 776e 6c6f 6164 7320 6f66 206f 626a  downloads of obj
+00019c20: 6563 7473 2077 6974 6820 7665 7279 206c  ects with very l
+00019c30: 6f6e 670a 2020 6e61 6d65 7320 776f 756c  ong.  names woul
+00019c40: 6420 6765 6e65 7261 7465 2074 7261 636b  d generate track
+00019c50: 696e 6720 6669 6c65 7320 7769 7468 206e  ing files with n
+00019c60: 616d 6573 2074 6861 7420 6578 6365 6564  ames that exceed
+00019c70: 6564 206c 6f63 616c 2066 696c 650a 2020  ed local file.  
+00019c80: 7379 7374 656d 206c 696d 6974 732c 206d  system limits, m
+00019c90: 616b 696e 6720 6974 2069 6d70 6f73 7369  aking it impossi
+00019ca0: 626c 6520 746f 2063 6f6d 706c 6574 6520  ble to complete 
+00019cb0: 7265 7375 6d61 626c 6520 7472 616e 7366  resumable transf
+00019cc0: 6572 7320 666f 720a 2020 7468 6f73 6520  ers for.  those 
+00019cd0: 6f62 6a65 6374 732e 2053 6f6c 7574 696f  objects. Solutio
+00019ce0: 6e20 7761 7320 746f 2062 7569 6c64 2074  n was to build t
+00019cf0: 6865 2074 7261 636b 696e 6720 6669 6c65  he tracking file
+00019d00: 206e 616d 6520 6672 6f6d 2061 2066 6978   name from a fix
+00019d10: 6564 0a20 2070 7265 6669 782c 2053 4841  ed.  prefix, SHA
+00019d20: 3120 6861 7368 206f 6620 7468 6520 6c6f  1 hash of the lo
+00019d30: 6e67 2066 696c 656e 616d 652c 2065 706f  ng filename, epo
+00019d40: 6368 2074 696d 6573 7461 6d70 2061 6e64  ch timestamp and
+00019d50: 206c 6173 7420 3136 0a20 2063 6861 7273   last 16.  chars
+00019d60: 206f 6620 7468 6520 6c6f 6e67 2066 696c   of the long fil
+00019d70: 656e 616d 652c 2077 6869 6368 2069 7320  ename, which is 
+00019d80: 6775 6172 616e 7465 6520 746f 2062 6520  guarantee to be 
+00019d90: 6120 7072 6564 6963 7461 626c 6520 616e  a predictable an
+00019da0: 640a 2020 7265 6173 6f6e 6162 6c65 206c  d.  reasonable l
+00019db0: 656e 6774 682e 0a2d 2046 6978 6564 206d  ength..- Fixed m
+00019dc0: 696e 6f72 2062 7567 2069 6e20 6f75 7470  inor bug in outp
+00019dd0: 7574 2066 726f 6d20 2767 7375 7469 6c20  ut from 'gsutil 
+00019de0: 6865 6c70 2064 6576 2720 7768 6963 6820  help dev' which 
+00019df0: 6164 7669 7365 6420 6578 6563 7574 696e  advised executin
+00019e00: 670a 2020 616e 2069 6e63 6f6e 7365 7175  g.  an inconsequ
+00019e10: 656e 7469 616c 2074 6573 7420 7363 7269  ential test scri
+00019e20: 7074 2028 7465 7374 5f75 7469 6c2e 7079  pt (test_util.py
+00019e30: 292e 0a0a 0a52 656c 6561 7365 2033 2e33  )....Release 3.3
+00019e40: 2028 7265 6c65 6173 652d 6461 7465 3a20   (release-date: 
+00019e50: 3230 3132 2d30 342d 3033 290a 3d3d 3d3d  2012-04-03).====
+00019e60: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00019e70: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00019e80: 3d3d 0a0a 4275 6720 4669 7865 730a 2d2d  ==..Bug Fixes.--
+00019e90: 2d2d 2d2d 2d2d 2d0a 0a2d 2046 6978 6564  -------..- Fixed
+00019ea0: 2070 726f 626c 656d 2077 6865 7265 2067   problem where g
+00019eb0: 7375 7469 6c20 7665 7220 616e 6420 6465  sutil ver and de
+00019ec0: 6275 6720 666c 6167 7320 6372 6173 6865  bug flags crashe
+00019ed0: 6420 7768 656e 2075 7365 640a 2020 7769  d when used.  wi
+00019ee0: 7468 206e 6577 6c79 2067 656e 6572 6174  th newly generat
+00019ef0: 6564 2062 6f74 6f20 636f 6e66 6967 2066  ed boto config f
+00019f00: 696c 6573 2e0a 2d20 4669 7865 6420 6773  iles..- Fixed gs
+00019f10: 7574 696c 2062 7567 2069 6e20 7769 6e64  util bug in wind
+00019f20: 6f77 7320 7061 7468 2068 616e 646c 696e  ows path handlin
+00019f30: 672c 2061 6e64 206d 616b 6520 6368 6563  g, and make chec
+00019f40: 6b73 756d 6d69 6e67 2077 6f72 6b0a 2020  ksumming work.  
+00019f50: 6163 726f 7373 2070 6c61 7466 6f72 6d73  across platforms
+00019f60: 2e0a 2d20 4669 7865 6420 656e 6162 6c65  ..- Fixed enable
+00019f70: 6c6f 6767 696e 6720 746f 2074 7261 6e73  logging to trans
+00019f80: 6c61 7465 202d 6220 5552 4920 7061 7261  late -b URI para
+00019f90: 6d20 746f 2070 6c61 696e 2062 7563 6b65  m to plain bucke
+00019fa0: 7420 6e61 6d65 2069 6e20 5245 5354 0a20  t name in REST. 
+00019fb0: 2041 5049 2072 6571 7565 7374 2e0a 0a0a   API request....
+00019fc0: 5265 6c65 6173 6520 332e 3220 2872 656c  Release 3.2 (rel
+00019fd0: 6561 7365 2d64 6174 653a 2032 3031 322d  ease-date: 2012-
+00019fe0: 3033 2d33 3029 0a3d 3d3d 3d3d 3d3d 3d3d  03-30).=========
+00019ff0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0001a000: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d0a 0a42  =============..B
+0001a010: 7567 2046 6978 6573 0a2d 2d2d 2d2d 2d2d  ug Fixes.-------
+0001a020: 2d2d 0a0a 2d20 4669 7865 6420 7072 6f62  --..- Fixed prob
+0001a030: 6c65 6d20 7768 6572 6520 6773 7574 696c  lem where gsutil
+0001a040: 2064 6964 6e27 7420 636f 6e76 6572 7420   didn't convert 
+0001a050: 6265 7477 6565 6e20 4f53 2d73 7065 6369  between OS-speci
+0001a060: 6669 6320 6469 7265 6374 6f72 790a 2020  fic directory.  
+0001a070: 7365 7061 7261 746f 7273 2077 6865 6e20  separators when 
+0001a080: 636f 7079 696e 6720 696e 6469 7669 6475  copying individu
+0001a090: 616c 6c79 2d6e 616d 6564 2066 696c 6573  ally-named files
+0001a0a0: 2028 6973 7375 6520 3837 292e 0a2d 2046   (issue 87)..- F
+0001a0b0: 6978 6564 2070 726f 626c 656d 2077 6865  ixed problem whe
+0001a0c0: 7265 2067 7375 7469 6c20 6c73 202d 5220  re gsutil ls -R 
+0001a0d0: 6469 646e 2774 2077 6f72 6b20 7269 6768  didn't work righ
+0001a0e0: 7420 6966 2074 6865 7265 2077 6173 2061  t if there was a
+0001a0f0: 206b 6579 0a20 2077 6974 6820 6120 6c65   key.  with a le
+0001a100: 6164 696e 6720 7061 7468 2028 6c69 6b65  ading path (like
+0001a110: 202f 666f 6f2f 6261 722f 6261 7a29 0a0a   /foo/bar/baz)..
+0001a120: 0a52 656c 6561 7365 2033 2e31 2028 7265  .Release 3.1 (re
+0001a130: 6c65 6173 652d 6461 7465 3a20 3230 3132  lease-date: 2012
+0001a140: 2d30 332d 3230 290a 3d3d 3d3d 3d3d 3d3d  -03-20).========
+0001a150: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0001a160: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 0a0a  ==============..
+0001a170: 4275 6720 4669 7865 730a 2d2d 2d2d 2d2d  Bug Fixes.------
+0001a180: 2d2d 2d0a 0a2d 2052 656d 6f76 6564 2065  ---..- Removed e
+0001a190: 7272 6f6e 656f 7573 2073 6574 7469 6e67  rroneous setting
+0001a1a0: 206f 6620 436f 6e74 656e 742d 456e 636f   of Content-Enco
+0001a1b0: 6469 6e67 2077 6865 6e20 6120 677a 6970  ding when a gzip
+0001a1c0: 2066 696c 6520 6973 2075 706c 6f61 6465   file is uploade
+0001a1d0: 640a 2020 2876 7320 7275 6e6e 696e 6720  d.  (vs running 
+0001a1e0: 6773 7574 696c 2063 7020 2d7a 2c20 7768  gsutil cp -z, wh
+0001a1f0: 656e 2043 6f6e 7465 6e74 2d45 6e63 6f64  en Content-Encod
+0001a200: 696e 6720 7368 6f75 6c64 2062 6520 7365  ing should be se
+0001a210: 7429 2e20 5468 6973 0a20 2065 7272 6f72  t). This.  error
+0001a220: 2063 6175 7365 6420 7573 6572 7320 746f   caused users to
+0001a230: 2067 6574 2067 7375 7469 6c2e 7461 722e   get gsutil.tar.
+0001a240: 677a 2066 696c 6520 756e 636f 6d70 7265  gz file uncompre
+0001a250: 7373 6564 2062 7920 7468 6520 7573 6572  ssed by the user
+0001a260: 0a20 2061 6765 6e74 2028 6c69 6b65 2077  .  agent (like w
+0001a270: 6765 7429 2077 6869 6c65 2064 6f77 6e6c  get) while downl
+0001a280: 6f61 6469 6e67 2c20 6d61 6b69 6e67 2074  oading, making t
+0001a290: 6865 2066 696c 6520 6170 7065 6172 2074  he file appear t
+0001a2a0: 6f20 6265 206f 6620 7468 650a 2020 7772  o be of the.  wr
+0001a2b0: 6f6e 6720 7369 7a65 2f63 6f6e 7465 6e74  ong size/content
+0001a2c0: 2e0a 2d20 4669 7865 6420 6861 6e64 6c69  ..- Fixed handli
+0001a2d0: 6e67 206f 6620 6773 7574 696c 2068 656c  ng of gsutil hel
+0001a2e0: 7020 666f 7220 5769 6e64 6f77 7320 2870  p for Windows (p
+0001a2f0: 7265 7669 6f75 7320 636f 6465 2064 6570  revious code dep
+0001a300: 656e 6465 6420 6f6e 0a20 2074 6572 6d69  ended on.  termi
+0001a310: 6f73 2061 6e64 2066 636e 746c 206c 6962  os and fcntl lib
+0001a320: 732c 2077 6869 6368 2061 7265 204c 696e  s, which are Lin
+0001a330: 7578 2f4d 6163 4f53 2d73 7065 6369 6669  ux/MacOS-specifi
+0001a340: 6329 2e0a 0a0a 5265 6c65 6173 6520 332e  c)....Release 3.
+0001a350: 3020 2872 656c 6561 7365 2d64 6174 653a  0 (release-date:
+0001a360: 2032 3031 322d 3033 2d32 3029 0a3d 3d3d   2012-03-20).===
+0001a370: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0001a380: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0001a390: 3d3d 3d0a 0a49 6d70 6f72 7461 6e74 204e  ===..Important N
+0001a3a0: 6f74 6573 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d  otes.-----------
+0001a3b0: 2d2d 2d2d 0a0a 2d20 4261 636b 7761 7264  ----..- Backward
+0001a3c0: 732d 696e 636f 6d70 6174 6962 6c65 2077  s-incompatible w
+0001a3d0: 696c 6463 6172 6420 6368 616e 6765 3a0a  ildcard change:.
+0001a3e0: 2020 5468 6520 272a 2720 7769 6c64 6361    The '*' wildca
+0001a3f0: 7264 206e 6f77 206f 6e6c 7920 6d61 7463  rd now only matc
+0001a400: 6865 7320 6f62 6a65 6374 7320 7769 7468  hes objects with
+0001a410: 696e 2061 2062 7563 6b65 7420 6469 7265  in a bucket dire
+0001a420: 6374 6f72 792e 2049 660a 2020 796f 7520  ctory. If.  you 
+0001a430: 6861 7665 2073 6372 6970 7473 2074 6861  have scripts tha
+0001a440: 7420 6465 7065 6e64 206f 6e20 6265 696e  t depend on bein
+0001a450: 6720 6162 6c65 2074 6f20 6d61 7463 6820  g able to match 
+0001a460: 7370 616e 6e69 6e67 206d 756c 7469 706c  spanning multipl
+0001a470: 650a 2020 6469 7265 6374 6f72 6965 7320  e.  directories 
+0001a480: 796f 7520 6e65 6564 2074 6f20 7573 6520  you need to use 
+0001a490: 272a 2a27 2069 6e73 7465 6164 2e20 466f  '**' instead. Fo
+0001a4a0: 7220 6578 616d 706c 652c 2074 6865 2063  r example, the c
+0001a4b0: 6f6d 6d61 6e64 3a0a 0a20 2020 2020 2020  ommand:..       
+0001a4c0: 2067 7375 7469 6c20 6370 2067 733a 2f2f   gsutil cp gs://
+0001a4d0: 6275 636b 6574 2f2a 2e74 7874 0a0a 2020  bucket/*.txt..  
+0001a4e0: 7769 6c6c 206e 6f77 206f 6e6c 7920 6d61  will now only ma
+0001a4f0: 7463 6820 2e74 7874 2066 696c 6573 2069  tch .txt files i
+0001a500: 6e20 7468 6520 746f 702d 6c65 7665 6c20  n the top-level 
+0001a510: 6469 7265 6374 6f72 792e 0a0a 2020 2020  directory...    
+0001a520: 2020 2020 6773 7574 696c 2063 7020 6773      gsutil cp gs
+0001a530: 3a2f 2f62 7563 6b65 742f 2a2a 2e74 7874  ://bucket/**.txt
+0001a540: 0a0a 2020 7769 6c6c 206d 6174 6368 2061  ..  will match a
+0001a550: 6372 6f73 7320 616c 6c20 6469 7265 6374  cross all direct
+0001a560: 6f72 6965 732e 0a2d 2067 7375 7469 6c20  ories..- gsutil 
+0001a570: 6c73 206e 6f77 206c 6973 7473 206f 6e65  ls now lists one
+0001a580: 2064 6972 6563 746f 7279 2061 7420 6120   directory at a 
+0001a590: 7469 6d65 2e20 4966 2079 6f75 2077 616e  time. If you wan
+0001a5a0: 7420 746f 206c 6973 7420 616c 6c20 6f62  t to list all ob
+0001a5b0: 6a65 6374 730a 2020 696e 2061 2062 7563  jects.  in a buc
+0001a5c0: 6b65 742c 2079 6f75 2063 616e 2075 7365  ket, you can use
+0001a5d0: 3a0a 0a20 2020 2020 2020 2067 7375 7469  :..        gsuti
+0001a5e0: 6c20 6c73 2067 733a 2f2f 6275 636b 6574  l ls gs://bucket
+0001a5f0: 2f2a 2a0a 0a20 206f 723a 0a0a 2020 2020  /**..  or:..    
+0001a600: 2020 2020 6773 7574 696c 206c 7320 2d52      gsutil ls -R
+0001a610: 2067 733a 2f2f 6275 636b 6574 0a0a 4e65   gs://bucket..Ne
+0001a620: 7720 4665 6174 7572 6573 0a2d 2d2d 2d2d  w Features.-----
+0001a630: 2d2d 2d2d 2d2d 2d0a 0a2d 2042 7569 6c74  -------..- Built
+0001a640: 2d69 6e20 6865 6c70 2066 6f72 2061 6c6c  -in help for all
+0001a650: 2063 6f6d 6d61 6e64 7320 616e 6420 6d61   commands and ma
+0001a660: 6e79 2061 6464 6974 696f 6e61 6c20 746f  ny additional to
+0001a670: 7069 6373 2e20 5472 790a 2020 2267 7375  pics. Try.  "gsu
+0001a680: 7469 6c20 6865 6c70 2220 666f 7220 6120  til help" for a 
+0001a690: 6c69 7374 206f 6620 6176 6169 6c61 626c  list of availabl
+0001a6a0: 6520 636f 6d6d 616e 6473 2061 6e64 2074  e commands and t
+0001a6b0: 6f70 6963 732e 0a2d 2041 206e 6577 2068  opics..- A new h
+0001a6c0: 6965 7261 7263 6869 6361 6c20 6669 6c65  ierarchical file
+0001a6d0: 2074 7265 6520 6162 7374 7261 6374 696f   tree abstractio
+0001a6e0: 6e20 6c61 7965 722c 2077 6869 6368 206d  n layer, which m
+0001a6f0: 616b 6573 2074 6865 2066 6c61 7420 6275  akes the flat bu
+0001a700: 636b 6574 0a20 206e 616d 6520 7370 6163  cket.  name spac
+0001a710: 6520 6c6f 6f6b 206c 696b 6520 6120 6869  e look like a hi
+0001a720: 6572 6172 6368 6963 616c 2066 696c 6520  erarchical file 
+0001a730: 7472 6565 2e20 5468 6973 206d 616b 6573  tree. This makes
+0001a740: 2073 6576 6572 616c 2074 6869 6e67 730a   several things.
+0001a750: 2020 706f 7373 6962 6c65 3a0a 2020 2d20    possible:.  - 
+0001a760: 636f 7079 696e 6720 6461 7461 2074 6f2f  copying data to/
+0001a770: 6672 6f6d 2062 7563 6b65 7420 7375 622d  from bucket sub-
+0001a780: 6469 7265 6374 6f72 6965 7320 2873 6565  directories (see
+0001a790: 20e2 809c 6773 7574 696c 2068 656c 7020   ...gsutil help 
+0001a7a0: 6370 e280 9d29 2e0a 2020 2d20 6469 7374  cp...)..  - dist
+0001a7b0: 7269 6275 7469 6e67 206c 6172 6765 2075  ributing large u
+0001a7c0: 706c 6f61 6473 2f64 6f77 6e6c 6f61 6473  ploads/downloads
+0001a7d0: 2061 6372 6f73 7320 6d61 6e79 206d 6163   across many mac
+0001a7e0: 6869 6e65 730a 2020 2020 2873 6565 20e2  hines.    (see .
+0001a7f0: 809c 6773 7574 696c 2068 656c 7020 6370  ..gsutil help cp
+0001a800: e280 9d29 0a20 202d 2072 656e 616d 696e  ...).  - renamin
+0001a810: 6720 6275 636b 6574 2073 7562 2d64 6972  g bucket sub-dir
+0001a820: 6563 746f 7269 6573 2028 7365 6520 e280  ectories (see ..
+0001a830: 9c67 7375 7469 6c20 6865 6c70 206d 76e2  .gsutil help mv.
+0001a840: 809d 292e 0a20 202d 206c 6973 7469 6e67  ..)..  - listing
+0001a850: 2069 6e64 6976 6964 7561 6c20 6275 636b   individual buck
+0001a860: 6574 2073 7562 2d64 6972 6563 746f 7269  et sub-directori
+0001a870: 6573 2061 6e64 2066 6f72 206c 6973 7469  es and for listi
+0001a880: 6e67 2064 6972 6563 746f 7269 6573 0a20  ng directories. 
+0001a890: 2020 2072 6563 7572 7369 7665 6c79 2028     recursively (
+0001a8a0: 7365 6520 e280 9c67 7375 7469 6c20 6865  see ...gsutil he
+0001a8b0: 6c70 206c 73e2 809d 292e 0a20 202d 2073  lp ls...)..  - s
+0001a8c0: 6574 7469 6e67 2041 434c 7320 666f 7220  etting ACLs for 
+0001a8d0: 6f62 6a65 6374 7320 696e 2061 2073 7562  objects in a sub
+0001a8e0: 2d64 6972 6563 746f 7279 2028 7365 6520  -directory (see 
+0001a8f0: e280 9c67 7375 7469 6c20 6865 6c70 2073  ...gsutil help s
+0001a900: 6574 6163 6ce2 809d 292e 0a0a 2d20 5375  etacl...)...- Su
+0001a910: 7070 6f72 7420 666f 7220 7065 722d 6469  pport for per-di
+0001a920: 7265 6374 6f72 7920 282a 2920 616e 6420  rectory (*) and 
+0001a930: 7265 6375 7273 6976 6520 282a 2a29 2077  recursive (**) w
+0001a940: 696c 6463 6172 6473 2e20 4573 7365 6e74  ildcards. Essent
+0001a950: 6961 6c6c 792c 0a20 202a 2a20 776f 726b  ially,.  ** work
+0001a960: 7320 7468 6520 7761 7920 2a20 6469 6420  s the way * did 
+0001a970: 696e 2070 7265 7669 6f75 7320 6773 7574  in previous gsut
+0001a980: 696c 2072 656c 6561 7365 732c 2061 6e64  il releases, and
+0001a990: 202a 206e 6f77 2062 6568 6176 6573 0a20   * now behaves. 
+0001a9a0: 2063 6f6e 7369 7374 656e 746c 7920 7769   consistently wi
+0001a9b0: 7468 2068 6f77 2069 7420 776f 726b 7320  th how it works 
+0001a9c0: 696e 2063 6f6d 6d61 6e64 2069 6e74 6572  in command inter
+0001a9d0: 7072 6574 6572 7320 286c 696b 6520 6261  preters (like ba
+0001a9e0: 7368 292e 2054 6865 0a20 2061 6269 6c69  sh). The.  abili
+0001a9f0: 7479 2074 6f20 7370 6563 6966 7920 6469  ty to specify di
+0001aa00: 7265 6374 6f72 792d 6f6e 6c79 2077 696c  rectory-only wil
+0001aa10: 6463 6172 6473 2061 6c73 6f20 656e 6162  dcards also enab
+0001aa20: 6c65 7320 6120 6e75 6d62 6572 206f 6620  les a number of 
+0001aa30: 7573 650a 2020 6361 7365 732c 2073 7563  use.  cases, suc
+0001aa40: 6820 6173 2064 6973 7472 6962 7574 696e  h as distributin
+0001aa50: 6720 6c61 7267 6520 7570 6c6f 6164 732f  g large uploads/
+0001aa60: 646f 776e 6c6f 6164 7320 6279 2077 696c  downloads by wil
+0001aa70: 6463 6172 6465 6420 6e61 6d65 2e20 5365  dcarded name. Se
+0001aa80: 650a 2020 2267 7375 7469 6c20 6865 6c70  e.  "gsutil help
+0001aa90: 2077 696c 6463 6172 6473 2220 666f 7220   wildcards" for 
+0001aaa0: 6465 7461 696c 732e 0a2d 2053 7570 706f  details..- Suppo
+0001aab0: 7274 2066 6f72 2043 726f 7373 2d4f 7269  rt for Cross-Ori
+0001aac0: 6769 6e20 5265 736f 7572 6365 2053 6861  gin Resource Sha
+0001aad0: 7269 6e67 2028 434f 5253 2920 636f 6e66  ring (CORS) conf
+0001aae0: 6967 7572 6174 696f 6e2e 2053 6565 2022  iguration. See "
+0001aaf0: 6773 7574 696c 0a20 2068 656c 7020 636f  gsutil.  help co
+0001ab00: 7273 2220 666f 7220 6465 7461 696c 732e  rs" for details.
+0001ab10: 0a2d 2053 7570 706f 7274 2066 6f72 206d  .- Support for m
+0001ab20: 756c 7469 2d74 6872 6561 6469 6e67 2061  ulti-threading a
+0001ab30: 6e64 2072 6563 7572 7369 7665 206f 7065  nd recursive ope
+0001ab40: 7261 7469 6f6e 2066 6f72 2073 6574 6163  ration for setac
+0001ab50: 6c20 636f 6d6d 616e 640a 2020 2873 6565  l command.  (see
+0001ab60: 20e2 809c 6773 7574 696c 2068 656c 7020   ...gsutil help 
+0001ab70: 7365 7461 636c e280 9d29 2e0a 2d20 4162  setacl...)..- Ab
+0001ab80: 696c 6974 7920 746f 2075 7365 2074 6865  ility to use the
+0001ab90: 2055 4e49 5820 2766 696c 6527 2063 6f6d   UNIX 'file' com
+0001aba0: 6d61 6e64 2074 6f20 646f 2063 6f6e 7465  mand to do conte
+0001abb0: 6e74 2074 7970 6520 7265 636f 676e 6974  nt type recognit
+0001abc0: 696f 6e20 6173 0a20 2061 6e20 616c 7465  ion as.  an alte
+0001abd0: 726e 6174 6976 6520 746f 2066 696c 656e  rnative to filen
+0001abe0: 616d 6520 6578 7465 6e73 696f 6e73 2e0a  ame extensions..
+0001abf0: 2d20 496e 7472 6f64 7563 7469 6f6e 206f  - Introduction o
+0001ac00: 6620 6e65 7720 656e 642d 746f 2d65 6e64  f new end-to-end
+0001ac10: 2074 6573 7420 7375 6974 652e 0a2d 2054   test suite..- T
+0001ac20: 6865 2067 7375 7469 6c20 7665 7273 696f  he gsutil versio
+0001ac30: 6e20 636f 6d6d 616e 6420 6e6f 7720 636f  n command now co
+0001ac40: 6d70 7574 6573 2061 2063 6865 636b 7375  mputes a checksu
+0001ac50: 6d20 6f66 2074 6865 2063 6f64 652c 2074  m of the code, t
+0001ac60: 6f20 6465 7465 6374 0a20 2063 6f72 7275  o detect.  corru
+0001ac70: 7074 696f 6e20 616e 6420 6c6f 6361 6c20  ption and local 
+0001ac80: 6d6f 6469 6669 6361 7469 6f6e 2077 6865  modification whe
+0001ac90: 6e20 6173 7369 7374 696e 6720 7769 7468  n assisting with
+0001aca0: 2074 6563 686e 6963 616c 2073 7570 706f   technical suppo
+0001acb0: 7274 2e0a 2d20 5468 6520 6773 7574 696c  rt..- The gsutil
+0001acc0: 2075 7064 6174 6520 636f 6d6d 616e 6420   update command 
+0001acd0: 6973 206e 6f20 6c6f 6e67 6572 2062 6574  is no longer bet
+0001ace0: 612f 6578 7065 7269 6d65 6e74 616c 2c20  a/experimental, 
+0001acf0: 616e 6420 6e6f 7720 616c 736f 0a20 2073  and now also.  s
+0001ad00: 7570 706f 7274 7320 7570 6461 7469 6e67  upports updating
+0001ad10: 2066 726f 6d20 6e61 6d65 6420 5552 4973   from named URIs
+0001ad20: 2028 666f 7220 6561 726c 792f 7465 7374   (for early/test
+0001ad30: 2072 656c 6561 7365 7329 2e0a 2d20 4368   releases)..- Ch
+0001ad40: 616e 6765 6420 6773 7574 696c 206c 7320  anged gsutil ls 
+0001ad50: 2d4c 2074 6f20 616c 736f 2070 7269 6e74  -L to also print
+0001ad60: 2043 6f6e 7465 6e74 2d44 6973 706f 7369   Content-Disposi
+0001ad70: 7469 6f6e 2068 6561 6465 722e 0a0a 4275  tion header...Bu
+0001ad80: 6720 4669 7865 730a 2d2d 2d2d 2d2d 2d2d  g Fixes.--------
+0001ad90: 2d0a 0a2d 2054 6865 2067 7375 7469 6c20  -..- The gsutil 
+0001ada0: 6370 202d 7420 6f70 7469 6f6e 2070 7265  cp -t option pre
+0001adb0: 7669 6f75 736c 7920 6469 646e 2774 2077  viously didn't w
+0001adc0: 6f72 6b20 6173 2064 6f63 756d 656e 7465  ork as documente
+0001add0: 642c 2061 6e64 2069 6e73 7465 6164 0a20  d, and instead. 
+0001ade0: 2043 6f6e 7465 6e74 2d54 7970 6520 7761   Content-Type wa
+0001adf0: 7320 616c 7761 7973 2064 6574 6563 7465  s always detecte
+0001ae00: 6420 6261 7365 6420 6f6e 2066 696c 656e  d based on filen
+0001ae10: 616d 6520 6578 7465 6e73 696f 6e2e 2043  ame extension. C
+0001ae20: 6f6e 7465 6e74 2d54 7970 650a 2020 6465  ontent-Type.  de
+0001ae30: 7465 6374 696f 6e20 6973 206e 6f77 2074  tection is now t
+0001ae40: 6865 2064 6566 6175 6c74 2c20 7468 6520  he default, the 
+0001ae50: 2d74 206f 7074 696f 6e20 6973 2064 6570  -t option is dep
+0001ae60: 7265 6361 7465 6420 2874 6f20 6265 2072  recated (to be r
+0001ae70: 656d 6f76 6564 2069 6e0a 2020 7468 6520  emoved in.  the 
+0001ae80: 6675 7475 7265 292c 2061 6e64 2073 7065  future), and spe
+0001ae90: 6369 6679 696e 6720 6120 2d68 2043 6f6e  cifying a -h Con
+0001aea0: 7465 6e74 2d54 7970 6520 6865 6164 6572  tent-Type header
+0001aeb0: 206e 6f77 2063 6f72 7265 6374 6c79 206f   now correctly o
+0001aec0: 7665 7272 6964 6573 0a20 2074 6865 2066  verrides.  the f
+0001aed0: 696c 656e 616d 6520 6578 7465 6e73 696f  ilename extensio
+0001aee0: 6e20 6261 7365 6420 6861 6e64 6c69 6e67  n based handling
+0001aef0: 2e20 466f 7220 6465 7461 696c 7320 7365  . For details se
+0001af00: 6520 2267 7375 7469 6c20 6865 6c70 0a20  e "gsutil help. 
+0001af10: 206d 6574 6164 6174 6122 2e0a 2d20 4669   metadata"..- Fi
+0001af20: 7865 6420 6275 6720 7468 6174 2063 6175  xed bug that cau
+0001af30: 7365 6420 6d75 6c74 692d 7468 7265 6164  sed multi-thread
+0001af40: 6564 206d 7620 636f 6d6d 616e 6420 6e6f  ed mv command no
+0001af50: 7420 746f 2070 6572 636f 6c61 7465 2066  t to percolate f
+0001af60: 6169 6c75 7265 730a 2020 6475 7269 6e67  ailures.  during
+0001af70: 2074 6865 2063 7020 7068 6173 6520 746f   the cp phase to
+0001af80: 2074 6865 2072 6d20 7068 6173 652c 2077   the rm phase, w
+0001af90: 6869 6368 2063 6f75 6c64 2075 6e64 6572  hich could under
+0001afa0: 2073 6f6d 6520 6369 7263 756d 7374 616e   some circumstan
+0001afb0: 6365 730a 2020 6361 7573 6520 6461 7461  ces.  cause data
+0001afc0: 2074 6861 7420 7761 7320 6e6f 7420 636f   that was not co
+0001afd0: 7069 6564 2074 6f20 6265 2064 656c 6574  pied to be delet
+0001afe0: 6564 2e0a 2d20 4669 7865 6420 6275 6720  ed..- Fixed bug 
+0001aff0: 7468 6174 2063 6175 7365 6420 6773 7574  that caused gsut
+0001b000: 696c 2074 6f20 7573 6520 4745 5420 666f  il to use GET fo
+0001b010: 7220 6c73 202d 4c20 7265 7175 6573 7473  r ls -L requests
+0001b020: 2e20 4974 206e 6f77 2075 7365 7320 4845  . It now uses HE
+0001b030: 4144 0a20 2066 6f72 206c 7320 2d4c 2072  AD.  for ls -L r
+0001b040: 6571 7565 7374 732c 2077 6869 6368 2069  equests, which i
+0001b050: 7320 6d6f 7265 2065 6666 6963 6965 6e74  s more efficient
+0001b060: 2061 6e64 2066 6173 7465 722e 0a2d 2046   and faster..- F
+0001b070: 6978 6564 2062 7567 2074 6861 7420 6361  ixed bug that ca
+0001b080: 7573 6564 2067 7375 7469 6c20 6e6f 7420  used gsutil not 
+0001b090: 746f 2070 7265 7365 7276 6520 6d65 7461  to preserve meta
+0001b0a0: 6461 7461 2064 7572 696e 670a 2020 636f  data during.  co
+0001b0b0: 7079 2d69 6e2d 7468 652d 636c 6f75 642e  py-in-the-cloud.
+0001b0c0: 0a2d 2046 6978 6564 2062 7567 2074 6861  .- Fixed bug tha
+0001b0d0: 7420 7072 6576 656e 7465 6420 7365 7461  t prevented seta
+0001b0e0: 636c 2063 6f6d 6d61 6e64 2066 726f 6d20  cl command from 
+0001b0f0: 616c 6c6f 7769 6e67 2044 6973 706c 6179  allowing Display
+0001b100: 4e61 6d65 2773 2069 6e20 4143 4c73 2e0a  Name's in ACLs..
+0001b110: 2d20 4669 7865 6420 6275 6720 7468 6174  - Fixed bug that
+0001b120: 2063 6175 7365 6420 6773 7574 696c 2f62   caused gsutil/b
+0001b130: 6f74 6f20 746f 2073 7570 7072 6573 7320  oto to suppress 
+0001b140: 636f 6e73 6563 7574 6976 6520 736c 6173  consecutive slas
+0001b150: 6865 7320 696e 2070 6174 680a 2020 6e61  hes in path.  na
+0001b160: 6d65 732e 0a2d 2046 6978 6564 2073 7065  mes..- Fixed spe
+0001b170: 632d 6e6f 6e2d 636f 6d70 6c69 616e 7420  c-non-compliant 
+0001b180: 5552 4920 636f 6e73 7472 7563 7469 6f6e  URI construction
+0001b190: 2066 6f72 2072 6573 756d 6162 6c65 2075   for resumable u
+0001b1a0: 706c 6f61 6473 2e0a 2d20 4669 7865 6420  ploads..- Fixed 
+0001b1b0: 6275 6720 7468 6174 2063 6175 7365 6420  bug that caused 
+0001b1c0: 726d 202d 6620 6e6f 7420 746f 2077 6f72  rm -f not to wor
+0001b1d0: 6b2e 0a2d 2046 6978 6564 2055 6e69 636f  k..- Fixed Unico
+0001b1e0: 6465 456e 636f 6465 4572 726f 7220 7468  deEncodeError th
+0001b1f0: 6174 2068 6170 7065 6e65 6420 7768 656e  at happened when
+0001b200: 2072 6564 6972 6563 7469 6e67 2067 7375   redirecting gsu
+0001b210: 7469 6c20 6c73 206f 7574 7075 740a 2020  til ls output.  
+0001b220: 746f 2061 2066 696c 6520 7769 7468 206e  to a file with n
+0001b230: 6f6e 2d41 5343 4949 206f 626a 6563 7420  on-ASCII object 
+0001b240: 6e61 6d65 732e 0a0a 4f74 6865 7220 4368  names...Other Ch
+0001b250: 616e 6765 730a 2d2d 2d2d 2d2d 2d2d 2d2d  anges.----------
+0001b260: 2d2d 2d0a 0a2d 2055 7365 7241 6765 6e74  ---..- UserAgent
+0001b270: 2073 656e 7420 696e 2048 5454 5020 7265   sent in HTTP re
+0001b280: 7175 6573 7473 206e 6f77 2069 6e63 6c75  quests now inclu
+0001b290: 6465 7320 6773 7574 696c 2076 6572 7369  des gsutil versi
+0001b2a0: 6f6e 206e 756d 6265 7220 616e 6420 4f53  on number and OS
+0001b2b0: 0a20 206e 616d 652e 0a2d 2053 7461 7274  .  name..- Start
+0001b2c0: 696e 6720 7769 7468 2074 6869 7320 7265  ing with this re
+0001b2d0: 6c65 6173 6520 7573 6572 7320 6172 6520  lease users are 
+0001b2e0: 6162 6c65 2074 6f20 6765 7420 696e 6469  able to get indi
+0001b2f0: 7669 6475 616c 206e 616d 6564 2072 656c  vidual named rel
+0001b300: 6561 7365 730a 2020 6672 6f6d 2076 6572  eases.  from ver
+0001b310: 7369 6f6e 2d6e 616d 6564 206f 626a 6563  sion-named objec
+0001b320: 7473 3a20 6773 3a2f 2f70 7562 2f67 7375  ts: gs://pub/gsu
+0001b330: 7469 6c5f 3c76 6572 7369 6f6e 3e2e 7461  til_<version>.ta
+0001b340: 722e 677a 0a20 2061 6e64 2067 733a 2f2f  r.gz.  and gs://
+0001b350: 7075 622f 6773 7574 696c 5f3c 7665 7273  pub/gsutil_<vers
+0001b360: 696f 6e3e 2e7a 6970 2e20 5468 6520 7665  ion>.zip. The ve
+0001b370: 7273 696f 6e2d 6c65 7373 2063 6f75 6e74  rsion-less count
+0001b380: 6572 7061 7274 730a 2020 2867 733a 2f2f  erparts.  (gs://
+0001b390: 7075 622f 6773 7574 696c 2e74 6172 2e67  pub/gsutil.tar.g
+0001b3a0: 7a20 616e 6420 6773 3a2f 2f70 7562 2f67  z and gs://pub/g
+0001b3b0: 7375 7469 6c2e 7a69 7029 2077 696c 6c20  sutil.zip) will 
+0001b3c0: 636f 6e74 6169 6e20 7468 6520 6c61 7465  contain the late
+0001b3d0: 7374 0a20 2072 656c 6561 7365 2e20 416c  st.  release. Al
+0001b3e0: 736f 2c20 7468 6520 6773 3a2f 2f70 7562  so, the gs://pub
+0001b3f0: 2062 7563 6b65 7420 6973 206e 6f77 2070   bucket is now p
+0001b400: 7562 6c69 636c 7920 7265 6164 6162 6c65  ublicly readable
+0001b410: 2028 736f 2c20 616e 796f 6e65 0a20 2063   (so, anyone.  c
+0001b420: 616e 206c 6973 7420 6974 7320 636f 6e74  an list its cont
+0001b430: 656e 7473 292e 0a0a 0a52 656c 6561 7365  ents)....Release
+0001b440: 2032 2e30 2028 7265 6c65 6173 652d 6461   2.0 (release-da
+0001b450: 7465 3a20 3230 3132 2d30 312d 3133 290a  te: 2012-01-13).
+0001b460: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0001b470: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0001b480: 3d3d 3d3d 3d3d 0a0a 4e65 7720 4665 6174  ======..New Feat
+0001b490: 7572 6573 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d  ures.-----------
+0001b4a0: 2d0a 0a2d 2053 7570 706f 7274 2066 6f72  -..- Support for
+0001b4b0: 2074 776f 206e 6577 2069 6e73 7461 6c6c   two new install
+0001b4c0: 6174 696f 6e20 6d6f 6465 733a 2065 6e74  ation modes: ent
+0001b4d0: 6572 7072 6973 6520 616e 6420 5250 4d2e  erprise and RPM.
+0001b4e0: 0a20 2043 7573 746f 6d65 7273 2063 616e  .  Customers can
+0001b4f0: 206e 6f77 2069 6e73 7461 6c6c 2067 7375   now install gsu
+0001b500: 7469 6c20 6f6e 6520 6f66 2074 6872 6565  til one of three
+0001b510: 2077 6179 733a 0a20 202d 2049 6e64 6976   ways:.  - Indiv
+0001b520: 6964 7561 6c20 7573 6572 206d 6f64 6520  idual user mode 
+0001b530: 2870 7265 7669 6f75 736c 7920 7468 6520  (previously the 
+0001b540: 6f6e 6c79 2061 7661 696c 6162 6c65 206d  only available m
+0001b550: 6f64 6529 3a20 756e 7061 636b 696e 6720  ode): unpacking 
+0001b560: 6672 6f6d 0a20 2020 2061 2067 7a69 7070  from.    a gzipp
+0001b570: 6564 2074 6172 6261 6c6c 2028 6773 3a2f  ed tarball (gs:/
+0001b580: 2f70 7562 2f67 7375 7469 6c2e 7461 722e  /pub/gsutil.tar.
+0001b590: 677a 2920 6f72 207a 6970 2066 696c 650a  gz) or zip file.
+0001b5a0: 2020 2020 2867 733a 2f2f 7075 622f 6773      (gs://pub/gs
+0001b5b0: 7574 696c 2e7a 6970 2920 616e 6420 7275  util.zip) and ru
+0001b5c0: 6e6e 696e 6720 7468 6520 6773 7574 696c  nning the gsutil
+0001b5d0: 2063 6f6d 6d61 6e64 2069 6e20 706c 6163   command in plac
+0001b5e0: 6520 696e 2074 6865 0a20 2020 2075 6e70  e in the.    unp
+0001b5f0: 6163 6b65 6420 6773 7574 696c 2064 6972  acked gsutil dir
+0001b600: 6563 746f 7279 2e0a 2020 2d20 456e 7465  ectory..  - Ente
+0001b610: 7270 7269 7365 206d 6f64 6520 286e 6577  rprise mode (new
+0001b620: 293a 2075 6e70 6163 6b69 6e67 2061 7320  ): unpacking as 
+0001b630: 6162 6f76 652c 2061 6e64 2074 6865 6e20  above, and then 
+0001b640: 7275 6e6e 696e 6720 7468 6520 7365 7475  running the setu
+0001b650: 702e 7079 0a20 2020 2073 6372 6970 7420  p.py.    script 
+0001b660: 696e 2074 6865 2075 6e70 6163 6b65 6420  in the unpacked 
+0001b670: 6773 7574 696c 2064 6972 6563 746f 7279  gsutil directory
+0001b680: 2e20 5468 6973 2061 6c6c 6f77 7320 6120  . This allows a 
+0001b690: 7379 7374 656d 730a 2020 2020 6164 6d69  systems.    admi
+0001b6a0: 6e69 7374 7261 746f 7220 746f 2069 6e73  nistrator to ins
+0001b6b0: 7461 6c6c 2067 7375 7469 6c20 696e 2061  tall gsutil in a
+0001b6c0: 2063 656e 7472 616c 206c 6f63 6174 696f   central locatio
+0001b6d0: 6e2c 2075 7369 6e67 2074 6865 2050 7974  n, using the Pyt
+0001b6e0: 686f 6e0a 2020 2020 6469 7374 7574 696c  hon.    distutil
+0001b6f0: 7320 6661 6369 6c69 7479 2e20 5468 6973  s facility. This
+0001b700: 206d 6f64 6520 6973 2073 7570 706f 7274   mode is support
+0001b710: 6564 206f 6e6c 7920 6f6e 204c 696e 7578  ed only on Linux
+0001b720: 2061 6e64 204d 6163 4f53 2e0a 2020 2d20   and MacOS..  - 
+0001b730: 5250 4d20 6d6f 6465 2028 6e65 7729 2e20  RPM mode (new). 
+0001b740: 4120 5265 6448 6174 2052 504d 2063 616e  A RedHat RPM can
+0001b750: 2062 6520 6275 696c 7420 6672 6f6d 2074   be built from t
+0001b760: 6865 2067 7375 7469 6c2e 7370 6563 2e69  he gsutil.spec.i
+0001b770: 6e20 6669 6c65 0a20 2020 2069 6e20 7468  n file.    in th
+0001b780: 6520 756e 7061 636b 6564 2067 7375 7469  e unpacked gsuti
+0001b790: 6c20 6469 7265 6374 6f72 792c 2061 6c6c  l directory, all
+0001b7a0: 6f77 696e 6720 6974 2074 6f20 6265 2069  owing it to be i
+0001b7b0: 6e73 7461 6c6c 6564 2061 7320 7061 7274  nstalled as part
+0001b7c0: 206f 660a 2020 2020 6120 5265 6448 6174   of.    a RedHat
+0001b7d0: 2062 7569 6c64 2e0a 0a2d 204e 6f74 653a   build...- Note:
+0001b7e0: 2076 322e 3020 6973 2074 6865 2066 6972   v2.0 is the fir
+0001b7f0: 7374 206e 756d 6265 7265 6420 6773 7574  st numbered gsut
+0001b800: 696c 2072 656c 6561 7365 2e20 5072 6576  il release. Prev
+0001b810: 696f 7573 2072 656c 6561 7365 730a 2020  ious releases.  
+0001b820: 7765 7265 2067 6976 656e 2074 696d 6573  were given times
+0001b830: 7461 6d70 7320 666f 7220 7665 7273 696f  tamps for versio
+0001b840: 6e73 2e20 4e75 6d62 6572 6564 2072 656c  ns. Numbered rel
+0001b850: 6561 7365 7320 656e 6162 6c65 2064 6f77  eases enable dow
+0001b860: 6e73 7472 6561 6d0a 2020 7061 636b 6167  nstream.  packag
+0001b870: 6520 6275 696c 6473 2028 6c69 6b65 2052  e builds (like R
+0001b880: 504d 7329 2074 6f20 6465 6669 6e65 2064  PMs) to define d
+0001b890: 6570 656e 6465 6e63 6965 7320 6d6f 7265  ependencies more
+0001b8a0: 2065 6173 696c 792e 0a20 2054 6869 7320   easily..  This 
+0001b8b0: 6973 2061 6c73 6f20 7468 6520 6669 7273  is also the firs
+0001b8c0: 7420 7665 7273 696f 6e20 7768 6572 6520  t version where 
+0001b8d0: 7765 2062 6567 616e 2069 6e63 6c75 6469  we began includi
+0001b8e0: 6e67 2072 656c 6561 7365 206e 6f74 6573  ng release notes
+0001b8f0: 2e0a                                     ..
```

### Comparing `gsutil-5.8/LICENSE` & `gsutil-5.9/LICENSE`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/PKG-INFO` & `gsutil-5.9/PKG-INFO`

 * *Files 4% similar despite different names*

```diff
@@ -1,16 +1,16 @@
 Metadata-Version: 2.1
 Name: gsutil
-Version: 5.8
+Version: 5.9
 Summary: A command line tool for interacting with cloud storage services.
 Home-page: https://cloud.google.com/storage/docs/gsutil
+Download-URL: https://cloud.google.com/storage/docs/gsutil_install
 Author: Google Inc.
 Author-email: buganizer-system+187143@google.com
 License: Apache 2.0
-Download-URL: https://cloud.google.com/storage/docs/gsutil_install
 Platform: any
 Classifier: Development Status :: 5 - Production/Stable
 Classifier: Environment :: Console
 Classifier: Intended Audience :: Developers
 Classifier: Intended Audience :: System Administrators
 Classifier: License :: OSI Approved :: Apache Software License
 Classifier: Natural Language :: English
```

### Comparing `gsutil-5.8/README.md` & `gsutil-5.9/README.md`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/__init__.py` & `gsutil-5.9/gslib/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/__main__.py` & `gsutil-5.9/gslib/__main__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/addlhelp/__init__.py` & `gsutil-5.9/gslib/addlhelp/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/addlhelp/acls.py` & `gsutil-5.9/gslib/addlhelp/acls.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/addlhelp/command_opts.py` & `gsutil-5.9/gslib/addlhelp/command_opts.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/addlhelp/crc32c.py` & `gsutil-5.9/gslib/addlhelp/crc32c.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/addlhelp/creds.py` & `gsutil-5.9/gslib/addlhelp/creds.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/addlhelp/dev.py` & `gsutil-5.9/gslib/addlhelp/dev.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/addlhelp/encoding.py` & `gsutil-5.9/gslib/addlhelp/encoding.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/addlhelp/metadata.py` & `gsutil-5.9/gslib/addlhelp/metadata.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/addlhelp/naming.py` & `gsutil-5.9/gslib/addlhelp/naming.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/addlhelp/prod.py` & `gsutil-5.9/gslib/addlhelp/prod.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/addlhelp/security.py` & `gsutil-5.9/gslib/addlhelp/security.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/addlhelp/support.py` & `gsutil-5.9/gslib/addlhelp/support.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/addlhelp/versions.py` & `gsutil-5.9/gslib/addlhelp/versions.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/addlhelp/wildcards.py` & `gsutil-5.9/gslib/addlhelp/wildcards.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/boto_resumable_upload.py` & `gsutil-5.9/gslib/boto_resumable_upload.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/boto_translation.py` & `gsutil-5.9/gslib/boto_translation.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/bucket_listing_ref.py` & `gsutil-5.9/gslib/bucket_listing_ref.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/cloud_api.py` & `gsutil-5.9/gslib/cloud_api.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/cloud_api_delegator.py` & `gsutil-5.9/gslib/cloud_api_delegator.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/command.py` & `gsutil-5.9/gslib/command.py`

 * *Files 2% similar despite different names*

```diff
@@ -733,15 +733,15 @@
                    should_update_sub_opts_and_args=True):
     """Parses sub-opt args.
 
     Args:
       check_args: True to have CheckArguments() called after parsing.
       args: List of args. If None, self.args will be used.
       should_update_sub_opts_and_args: True if self.sub_opts and self.args
-        should be updated with the values returned after parsing. Else return a 
+        should be updated with the values returned after parsing. Else return a
         tuple of sub_opts, args returned by getopt.getopt. This is done
         to allow this method to be called from get_gcloud_storage_args in which
         case we do not want to update self.sub_opts and self.args.
 
     Raises:
       RaiseInvalidArgumentException: Invalid args specified.
     """
@@ -892,15 +892,20 @@
           multi_threaded_url_args.append(url.url_string)
         else:
           # Convert to a NameExpansionResult so we can re-use the threaded
           # function for the single-threaded implementation.  RefType is unused.
           for blr in self.WildcardIterator(
               url.url_string).IterBuckets(bucket_fields=['id']):
             name_expansion_for_url = NameExpansionResult(
-                url, False, False, blr.storage_url, None)
+                source_storage_url=url,
+                is_multi_source_request=False,
+                is_multi_top_level_source_request=False,
+                names_container=False,
+                expanded_storage_url=blr.storage_url,
+                expanded_result=None)
             acl_func(self, name_expansion_for_url)
       else:
         multi_threaded_url_args.append(url_str)
 
     if len(multi_threaded_url_args) >= 1:
       name_expansion_iterator = NameExpansionIterator(
           self.command_name,
@@ -967,16 +972,16 @@
     either an XML string or a canned ACL string.
 
     Args:
       url: CloudURL to set the ACL on.
       gsutil_api: gsutil Cloud API to use for the ACL set. Must support XML
           passthrough functions.
     """
+    orig_prefer_api = gsutil_api.prefer_api
     try:
-      orig_prefer_api = gsutil_api.prefer_api
       gsutil_api.prefer_api = ApiSelector.XML
       gsutil_api.XmlPassThroughSetAcl(self.acl_arg,
                                       url,
                                       canned=self.canned,
                                       def_obj_acl=self.def_acl,
                                       provider=url.scheme)
     except ServiceException as e:
```

### Comparing `gsutil-5.8/gslib/command_argument.py` & `gsutil-5.9/gslib/command_argument.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/command_runner.py` & `gsutil-5.9/gslib/command_runner.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/commands/__init__.py` & `gsutil-5.9/gslib/commands/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/commands/acl.py` & `gsutil-5.9/gslib/commands/acl.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/commands/autoclass.py` & `gsutil-5.9/gslib/commands/autoclass.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/commands/bucketpolicyonly.py` & `gsutil-5.9/gslib/commands/bucketpolicyonly.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/commands/cat.py` & `gsutil-5.9/gslib/commands/cat.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/commands/compose.py` & `gsutil-5.9/gslib/commands/compose.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/commands/config.py` & `gsutil-5.9/gslib/commands/config.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/commands/cors.py` & `gsutil-5.9/gslib/commands/cors.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/commands/cp.py` & `gsutil-5.9/gslib/commands/cp.py`

 * *Files 2% similar despite different names*

```diff
@@ -89,15 +89,15 @@
 
     gsutil cp *.txt gs://my-bucket
 
   You can also download data from a bucket. The following command downloads
   all text files from the top-level of a bucket to your current directory:
 
     gsutil cp gs://my-bucket/*.txt .
-  
+
   You can use the ``-n`` option to prevent overwriting the content of
   existing files. The following example downloads text files from a bucket
   without clobbering the data in your directory:
 
     gsutil cp -n gs://my-bucket/*.txt .
 
   Use the ``-r`` option to copy an entire directory tree.
@@ -604,16 +604,16 @@
                  Unsupported object types include Amazon S3 objects in the GLACIER
                  storage class.
 
   -v             Prints the version-specific URL for each uploaded object. You can
                  use these URLs to safely make concurrent upload requests, because
                  Cloud Storage refuses to perform an update if the current
                  object version doesn't match the version-specific URL. See
-                 `Generation numbers and preconditions
-                 <https://cloud.google.com/storage/docs/generations-preconditions>`_
+                 `generation numbers
+                 <https://cloud.google.com/storage/docs/metadata#generation-number>`_
                  for more details.
 
   -z <ext,...>   Applies gzip content-encoding to any file upload whose
                  extension matches the ``-z`` extension list. This is useful when
                  uploading files with compressible content such as .js, .css,
                  or .html files, because it reduces network bandwidth and storage
                  sizes. This can both improve performance and reduce costs.
@@ -753,17 +753,20 @@
       subcommand_help_text={},
   )
 
   # TODO(b/206151615) Add mappings for remaining flags.
   gcloud_storage_map = GcloudStorageMap(
       gcloud_command='alpha storage cp',
       flag_map={
+          '-e': GcloudStorageFlag('--ignore-symlinks'),
+          '-n': GcloudStorageFlag('--no-clobber'),
           '-r': GcloudStorageFlag('-r'),
           '-R': GcloudStorageFlag('-r'),
-          '-e': GcloudStorageFlag('--ignore-symlinks')
+          '-s': GcloudStorageFlag('--storage-class'),
+          '-v': GcloudStorageFlag('--print-created-message'),
       },
   )
 
   # pylint: disable=too-many-statements
   def CopyFunc(self, copy_object_info, thread_state=None, preserve_posix=False):
     """Worker function for performing the actual copy (and rm, for mv)."""
     gsutil_api = GetCloudApiInstance(self, thread_state=thread_state)
@@ -805,29 +808,21 @@
       # object...' but we no longer do so because it caused customer confusion.
       return
 
     if copy_helper_opts.use_manifest and self.manifest.WasSuccessful(
         exp_src_url.url_string):
       return
 
-    if copy_helper_opts.perform_mv:
-      if copy_object_info.names_container:
-        # Use recursion_requested when performing name expansion for the
-        # directory mv case so we can determine if any of the source URLs are
-        # directories (and then use cp -r and rm -r to perform the move, to
-        # match the behavior of Linux mv (which when moving a directory moves
-        # all the contained files).
-        self.recursion_requested = True
-        # Disallow wildcard src URLs when moving directories, as supporting it
-        # would make the name transformation too complex and would also be
-        # dangerous (e.g., someone could accidentally move many objects to the
-        # wrong name, or accidentally overwrite many objects).
-        if ContainsWildcard(src_url.url_string):
-          raise CommandException('The mv command disallows naming source '
-                                 'directories using wildcards')
+    if copy_helper_opts.perform_mv and copy_object_info.names_container:
+      # Use recursion_requested when performing name expansion for the
+      # directory mv case so we can determine if any of the source URLs are
+      # directories (and then use cp -r and rm -r to perform the move, to
+      # match the behavior of Linux mv (which when moving a directory moves
+      # all the contained files).
+      self.recursion_requested = True
 
     if (copy_object_info.exp_dst_url.IsFileUrl() and
         not os.path.exists(copy_object_info.exp_dst_url.object_name) and
         have_multiple_srcs):
 
       try:
         os.makedirs(copy_object_info.exp_dst_url.object_name)
@@ -836,14 +831,15 @@
           raise
 
     dst_url = copy_helper.ConstructDstUrl(
         src_url,
         exp_src_url,
         src_url_names_container,
         have_multiple_srcs,
+        copy_object_info.is_multi_top_level_source_request,
         copy_object_info.exp_dst_url,
         copy_object_info.have_existing_dst_container,
         self.recursion_requested,
         preserve_posix=preserve_posix)
     dst_url = copy_helper.FixWindowsNaming(src_url, dst_url)
 
     copy_helper.CheckForDirFileConflict(exp_src_url, dst_url)
@@ -896,14 +892,43 @@
         raise CommandException('This sync will orphan file(s), please fix their'
                                ' permissions before trying again.')
 
     bytes_transferred = 0
     try:
       if copy_helper_opts.use_manifest:
         self.manifest.Initialize(exp_src_url.url_string, dst_url.url_string)
+
+      if (self.recursion_requested and
+          copy_object_info.exp_dst_url.object_name and dst_url.IsFileUrl()):
+
+        # exp_dst_url is the wildcard-expanded path passed by the user:
+        #   exp_dst_url => ~/dir
+        #   container => /usr/name/dir
+        container = os.path.abspath(copy_object_info.exp_dst_url.object_name)
+
+        # dst_url holds the complete path of the object's destination:
+        #   dst_url => /usr/name/dir/../file.txt
+        #   abspath => /usr/name/file.txt
+        #
+        # Taking the common path of this and container yields: /usr/name,
+        # which does not start with container when the inclusion of '..' strings
+        # results in a copy outside of the container.
+        if not os.path.commonpath([
+            container, os.path.abspath(dst_url.object_name)
+        ]).startswith(container):
+          self.logger.warn(
+              'Skipping copy of source URL %s because it would be copied '
+              'outside the expected destination directory: %s.' %
+              (exp_src_url, container))
+          if copy_helper_opts.use_manifest:
+            self.manifest.SetResult(
+                exp_src_url.url_string, 0, 'skip',
+                'Would have copied outside the destination directory.')
+          return
+
       _, bytes_transferred, result_url, md5 = copy_helper.PerformCopy(
           self.logger,
           exp_src_url,
           dst_url,
           gsutil_api,
           self,
           _CopyExceptionHandler,
```

### Comparing `gsutil-5.8/gslib/commands/defacl.py` & `gsutil-5.9/gslib/commands/defacl.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/commands/defstorageclass.py` & `gsutil-5.9/gslib/commands/defstorageclass.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/commands/du.py` & `gsutil-5.9/gslib/commands/du.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/commands/hash.py` & `gsutil-5.9/gslib/commands/hash.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/commands/help.py` & `gsutil-5.9/gslib/commands/help.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/commands/hmac.py` & `gsutil-5.9/gslib/commands/hmac.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/commands/iam.py` & `gsutil-5.9/gslib/commands/iam.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/commands/kms.py` & `gsutil-5.9/gslib/commands/kms.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/commands/label.py` & `gsutil-5.9/gslib/commands/label.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/commands/lifecycle.py` & `gsutil-5.9/gslib/commands/lifecycle.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/commands/logging.py` & `gsutil-5.9/gslib/commands/logging.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/commands/ls.py` & `gsutil-5.9/gslib/commands/ls.py`

 * *Files 3% similar despite different names*

```diff
@@ -392,17 +392,14 @@
     fields['encryption_config'] = 'Present' if bucket.encryption else 'None'
     # Fields not available in all APIs (e.g. the XML API)
     if bucket.autoclass and bucket.autoclass.enabled:
       fields['autoclass_enabled_date'] = (
           bucket.autoclass.toggleTime.strftime('%a, %d %b %Y'))
     if bucket.locationType:
       fields['location_type'] = bucket.locationType
-    if bucket.customPlacementConfig:
-      fields['custom_placement_locations'] = (
-          bucket.customPlacementConfig.dataLocations)
     if bucket.metageneration:
       fields['metageneration'] = bucket.metageneration
     if bucket.timeCreated:
       fields['time_created'] = bucket.timeCreated.strftime(
           '%a, %d %b %Y %H:%M:%S GMT')
     if bucket.updated:
       fields['updated'] = bucket.updated.strftime('%a, %d %b %Y %H:%M:%S GMT')
@@ -433,31 +430,27 @@
         new_value = '\n\t  ' + new_value
       fields[key] = new_value
 
     # Only display certain properties if the given API returned them (JSON API
     # returns many fields that the XML API does not).
     autoclass_line = ''
     location_type_line = ''
-    custom_placement_locations_line = ''
     metageneration_line = ''
     time_created_line = ''
     time_updated_line = ''
     default_eventbased_hold_line = ''
     retention_policy_line = ''
     bucket_policy_only_enabled_line = ''
     public_access_prevention_line = ''
     rpo_line = ''
     satisifies_pzs_line = ''
     if 'autoclass_enabled_date' in fields:
       autoclass_line = '\tAutoclass:\t\t\tEnabled on {autoclass_enabled_date}\n'
     if 'location_type' in fields:
       location_type_line = '\tLocation type:\t\t\t{location_type}\n'
-    if 'custom_placement_locations' in fields:
-      custom_placement_locations_line = (
-          '\tPlacement locations:\t\t{custom_placement_locations}\n')
     if 'metageneration' in fields:
       metageneration_line = '\tMetageneration:\t\t\t{metageneration}\n'
     if 'time_created' in fields:
       time_created_line = '\tTime created:\t\t\t{time_created}\n'
     if 'updated' in fields:
       time_updated_line = '\tTime updated:\t\t\t{updated}\n'
     if 'default_eventbased_hold' in fields:
@@ -476,15 +469,14 @@
     if 'satisfies_pzs' in fields:
       satisifies_pzs_line = '\tSatisfies PZS:\t\t\t{satisfies_pzs}\n'
 
     text_util.print_to_fd(
         ('{bucket} :\n'
          '\tStorage class:\t\t\t{storage_class}\n' + location_type_line +
          '\tLocation constraint:\t\t{location_constraint}\n' +
-         custom_placement_locations_line +
          '\tVersioning enabled:\t\t{versioning}\n'
          '\tLogging configuration:\t\t{logging_config}\n'
          '\tWebsite configuration:\t\t{website_config}\n'
          '\tCORS configuration: \t\t{cors_config}\n'
          '\tLifecycle configuration:\t{lifecycle_config}\n'
          '\tRequester Pays enabled:\t\t{requester_pays}\n' +
          retention_policy_line + default_eventbased_hold_line +
@@ -596,15 +588,14 @@
         bucket_fields = ['id']
       elif listing_style == ListingStyle.LONG_LONG:
         bucket_fields = [
             'acl',
             'autoclass',
             'billing',
             'cors',
-            'customPlacementConfig',
             'defaultObjectAcl',
             'encryption',
             'iamConfiguration',
             'labels',
             'location',
             'locationType',
             'logging',
```

### Comparing `gsutil-5.8/gslib/commands/mb.py` & `gsutil-5.9/gslib/commands/mb.py`

 * *Files 4% similar despite different names*

```diff
@@ -38,15 +38,14 @@
 from gslib.utils.text_util import InsistOnOrOff
 from gslib.utils.text_util import NormalizeStorageClass
 from gslib.utils.encryption_helper import ValidateCMEK
 
 _SYNOPSIS = """
   gsutil mb [-b (on|off)] [-c <class>] [-k <key>] [-l <location>] [-p <project>]
             [--autoclass] [--retention <time>] [--pap <setting>]
-            [--placement <region1>,<region2>]
             [--rpo {}] gs://<bucket_name>...
 """.format(VALID_RPO_VALUES_STRING)
 
 _DETAILED_HELP_TEXT = ("""
 <B>SYNOPSIS</B>
 """ + _SYNOPSIS + """
 
@@ -125,16 +124,18 @@
                          sets object storage classes.
 
   -b <on|off>            Specifies the uniform bucket-level access setting.
                          When "on", ACLs assigned to objects in the bucket are
                          not evaluated. Consequently, only IAM policies grant
                          access to objects in these buckets. Default is "off".
 
-  -c class               Specifies the default storage class.
-                         Default is "Standard".
+  -c class               Specifies the default storage class. Default is
+                         ``Standard``. See `Available storage classes
+                         <https://cloud.google.com/storage/docs/storage-classes#classes>`_
+                         for a list of possible values.
 
   -k <key>               Set the default KMS key using the full path to the key,
                          which has the following form:
                          ``projects/[project-id]/locations/[location]/keyRings/[key-ring]/cryptoKeys/[my-key]``
 
   -l location            Can be any supported location. See
                          https://cloud.google.com/storage/docs/locations
@@ -152,20 +153,14 @@
                          retention policy see "gsutil help retention"
 
   --pap setting          Specifies the public access prevention setting. Valid
                          values are "enforced" or "inherited". When
                          "enforced", objects in this bucket cannot be made
                          publicly accessible. Default is "inherited".
 
-  --placement reg1,reg2  Two regions that form the cutom dual-region.
-                         Only regions within the same continent are or will ever
-                         be valid. Invalid location pairs (such as
-                         mixed-continent, or with unsupported regions)
-                         will return an error.
-
   --rpo setting          Specifies the `replication setting <https://cloud.google.com/storage/docs/turbo-replication>`_.
                          This flag is not valid for single-region buckets,
                          and multi-region buckets only accept a value of
                          DEFAULT. Valid values for dual region buckets
                          are {rpo_values}. If unspecified, DEFAULT is applied
                          for dual-region and multi-region buckets.
 
@@ -187,17 +182,15 @@
   command_spec = Command.CreateCommandSpec(
       'mb',
       command_name_aliases=['makebucket', 'createbucket', 'md', 'mkdir'],
       usage_synopsis=_SYNOPSIS,
       min_args=1,
       max_args=NO_MAX,
       supported_sub_args='b:c:l:p:s:k:',
-      supported_private_args=[
-          'autoclass', 'retention=', 'pap=', 'placement=', 'rpo='
-      ],
+      supported_private_args=['autoclass', 'retention=', 'pap=', 'rpo='],
       file_url_ok=False,
       provider_url_ok=False,
       urls_start_arg=0,
       gs_api_support=[ApiSelector.XML, ApiSelector.JSON],
       gs_default_api=ApiSelector.JSON,
       argparse_arguments=[
           CommandArgument.MakeZeroOrMoreCloudBucketURLsArgument()
@@ -236,15 +229,14 @@
     kms_key = None
     location = None
     storage_class = None
     seconds = None
     public_access_prevention = None
     rpo = None
     json_only_flags_in_command = []
-    placements = None
     if self.sub_opts:
       for o, a in self.sub_opts:
         if o == '--autoclass':
           autoclass = True
           json_only_flags_in_command.append(o)
         elif o == '-k':
           kms_key = a
@@ -270,21 +262,14 @@
         elif o == '-b':
           InsistOnOrOff(a, 'Only on and off values allowed for -b option')
           bucket_policy_only = (a == 'on')
           json_only_flags_in_command.append(o)
         elif o == '--pap':
           public_access_prevention = a
           json_only_flags_in_command.append(o)
-        elif o == '--placement':
-          placements = a.split(',')
-          if len(placements) != 2:
-            raise CommandException(
-                'Please specify two regions separated by comma without space.'
-                ' Specified: {}'.format(a))
-          json_only_flags_in_command.append(o)
 
     bucket_metadata = apitools_messages.Bucket(location=location,
                                                rpo=rpo,
                                                storageClass=storage_class)
     if autoclass:
       bucket_metadata.autoclass = apitools_messages.Bucket.AutoclassValue(
           enabled=autoclass)
@@ -298,19 +283,14 @@
         iam_config.publicAccessPrevention = public_access_prevention
 
     if kms_key:
       encryption = apitools_messages.Bucket.EncryptionValue()
       encryption.defaultKmsKeyName = kms_key
       bucket_metadata.encryption = encryption
 
-    if placements:
-      placement_config = apitools_messages.Bucket.CustomPlacementConfigValue()
-      placement_config.dataLocations = placements
-      bucket_metadata.customPlacementConfig = placement_config
-
     for bucket_url_str in self.args:
       bucket_url = StorageUrlFromString(bucket_url_str)
       if seconds is not None:
         if bucket_url.scheme != 'gs':
           raise CommandException('Retention policy can only be specified for '
                                  'GCS buckets.')
         retention_policy = (apitools_messages.Bucket.RetentionPolicyValue(
```

### Comparing `gsutil-5.8/gslib/commands/mv.py` & `gsutil-5.9/gslib/commands/mv.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/commands/notification.py` & `gsutil-5.9/gslib/commands/notification.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/commands/pap.py` & `gsutil-5.9/gslib/commands/pap.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/commands/perfdiag.py` & `gsutil-5.9/gslib/commands/perfdiag.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/commands/rb.py` & `gsutil-5.9/gslib/commands/rb.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/commands/requesterpays.py` & `gsutil-5.9/gslib/commands/requesterpays.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/commands/retention.py` & `gsutil-5.9/gslib/commands/retention.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/commands/rewrite.py` & `gsutil-5.9/gslib/commands/rewrite.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/commands/rm.py` & `gsutil-5.9/gslib/commands/rm.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/commands/rpo.py` & `gsutil-5.9/gslib/commands/rpo.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/commands/rsync.py` & `gsutil-5.9/gslib/commands/rsync.py`

 * *Files 1% similar despite different names*

```diff
@@ -1216,16 +1216,22 @@
                                         gid=src_gid,
                                         mode=src_mode)
           # Skip past base URL and normalize slashes so we can compare across
           # clouds/file systems (including Windows).
           src_url_str_to_check = _EncodeUrl(
               src_url_str[base_src_url_len:].replace('\\', '/'))
           dst_url_str_would_copy_to = copy_helper.ConstructDstUrl(
-              self.base_src_url, StorageUrlFromString(src_url_str), True, True,
-              self.base_dst_url, False, self.recursion_requested).url_string
+              src_url=self.base_src_url,
+              exp_src_url=StorageUrlFromString(src_url_str),
+              src_url_names_container=True,
+              have_multiple_srcs=True,
+              has_multiple_top_level_srcs=False,
+              exp_dst_url=self.base_dst_url,
+              have_existing_dest_subdir=False,
+              recursion_requested=self.recursion_requested).url_string
       if dst_url_str is None:
         if not self.sorted_dst_urls_it.IsEmpty():
           # We don't need time created at the destination.
           (dst_url_str, dst_size, _, dst_atime, dst_mtime, dst_mode, dst_uid,
            dst_gid, dst_crc32c,
            dst_md5) = self._ParseTmpFileLine(next(self.sorted_dst_urls_it))
           # Skip past base URL and normalize slashes so we can compare across
```

### Comparing `gsutil-5.8/gslib/commands/setmeta.py` & `gsutil-5.9/gslib/commands/setmeta.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/commands/signurl.py` & `gsutil-5.9/gslib/commands/signurl.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/commands/stat.py` & `gsutil-5.9/gslib/commands/stat.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/commands/test.py` & `gsutil-5.9/gslib/commands/test.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/commands/ubla.py` & `gsutil-5.9/gslib/commands/ubla.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/commands/version.py` & `gsutil-5.9/gslib/commands/version.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/commands/versioning.py` & `gsutil-5.9/gslib/commands/versioning.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/commands/web.py` & `gsutil-5.9/gslib/commands/web.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/context_config.py` & `gsutil-5.9/gslib/context_config.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/cred_types.py` & `gsutil-5.9/gslib/cred_types.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/cs_api_map.py` & `gsutil-5.9/gslib/cs_api_map.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/daisy_chain_wrapper.py` & `gsutil-5.9/gslib/daisy_chain_wrapper.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/data/cacerts.txt` & `gsutil-5.9/gslib/data/cacerts.txt`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/devshell_auth_plugin.py` & `gsutil-5.9/gslib/devshell_auth_plugin.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/discard_messages_queue.py` & `gsutil-5.9/gslib/discard_messages_queue.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/exception.py` & `gsutil-5.9/gslib/exception.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/file_part.py` & `gsutil-5.9/gslib/file_part.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/gcs_json_api.py` & `gsutil-5.9/gslib/gcs_json_api.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/gcs_json_credentials.py` & `gsutil-5.9/gslib/gcs_json_credentials.py`

 * *Files 1% similar despite different names*

```diff
@@ -180,29 +180,29 @@
   Args:
     logger: logging.Logger instance for outputting messages.
 
   Returns:
     OAuth2Credentials object if any valid ones are found, otherwise None.
   """
   configured_cred_types = []
+  failed_cred_type = None
   try:
     if _HasOauth2UserAccountCreds():
       configured_cred_types.append(CredTypes.OAUTH2_USER_ACCOUNT)
     if _HasOauth2ServiceAccountCreds():
       configured_cred_types.append(CredTypes.OAUTH2_SERVICE_ACCOUNT)
     if len(configured_cred_types) > 1:
       # We only allow one set of configured credentials. Otherwise, we're
       # choosing one arbitrarily, which can be very confusing to the user
       # (e.g., if only one is authorized to perform some action) and can
       # also mask errors.
       # Because boto merges config files, GCE credentials show up by default
       # for GCE VMs. We don't want to fail when a user creates a boto file
       # with their own credentials, so in this case we'll use the OAuth2
       # user credentials.
-      failed_cred_type = None
       raise CommandException(
           ('You have multiple types of configured credentials (%s), which is '
            'not supported. One common way this happens is if you run gsutil '
            'config to create credentials and later run gcloud auth, and '
            'create a second set of credentials. Your boto config path is: '
            '%s. For more help, see "gsutil help creds".') %
           (configured_cred_types, GetFriendlyConfigFilePaths()))
```

### Comparing `gsutil-5.8/gslib/gcs_json_media.py` & `gsutil-5.9/gslib/gcs_json_media.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/help_provider.py` & `gsutil-5.9/gslib/help_provider.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/iamcredentials_api.py` & `gsutil-5.9/gslib/iamcredentials_api.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/impersonation_credentials.py` & `gsutil-5.9/gslib/impersonation_credentials.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/kms_api.py` & `gsutil-5.9/gslib/kms_api.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/lazy_wrapper.py` & `gsutil-5.9/gslib/lazy_wrapper.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/metrics.py` & `gsutil-5.9/gslib/metrics.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/metrics_reporter.py` & `gsutil-5.9/gslib/metrics_reporter.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/metrics_tuple.py` & `gsutil-5.9/gslib/metrics_tuple.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/name_expansion.py` & `gsutil-5.9/gslib/name_expansion.py`

 * *Files 7% similar despite different names*

```diff
@@ -58,29 +58,33 @@
   (e.g., copying from a single source URL to a directory generates different
   dest URL names than copying multiple URLs to a directory, to be consistent
   with naming rules used by the Unix cp command). For more details see comments
   in _NameExpansionIterator.
   """
 
   def __init__(self, source_storage_url, is_multi_source_request,
-               names_container, expanded_storage_url, expanded_result):
+               is_multi_top_level_source_request, names_container,
+               expanded_storage_url, expanded_result):
     """Instantiates a result from name expansion.
 
     Args:
       source_storage_url: StorageUrl that was being expanded.
-      is_multi_source_request: bool indicator whether src_url_str expanded to
-          more than one BucketListingRef.
+      is_multi_source_request: bool indicator whether multiple input URLs or
+          src_url_str expanded to more than one BucketListingRef.
+      is_multi_top_level_source_request: same as is_multi_source_request but
+          measured before recursion.
       names_container: Bool indicator whether src_url names a container.
       expanded_storage_url: StorageUrl that was expanded.
       expanded_result: cloud object metadata in MessageToJson form (for
           pickleability), if any was iterated; None otherwise.
           Consumers must call JsonToMessage to get an apitools Object.
     """
     self.source_storage_url = source_storage_url
     self.is_multi_source_request = is_multi_source_request
+    self.is_multi_top_level_source_request = is_multi_top_level_source_request
     self.names_container = names_container
     self.expanded_storage_url = expanded_storage_url
     self.expanded_result = encoding.MessageToJson(
         expanded_result) if expanded_result else None
 
   def __repr__(self):
     return '%s' % self.expanded_storage_url
@@ -199,15 +203,20 @@
       storage_url = StorageUrlFromString(url_str)
 
       if (storage_url.IsFileUrl() and
           (storage_url.IsStream() or storage_url.IsFifo())):
         if self.url_strs.has_plurality:
           raise CommandException('Multiple URL strings are not supported '
                                  'with streaming ("-") URLs or named pipes.')
-        yield NameExpansionResult(storage_url, False, False, storage_url, None)
+        yield NameExpansionResult(source_storage_url=storage_url,
+                                  is_multi_source_request=False,
+                                  is_multi_top_level_source_request=False,
+                                  names_container=False,
+                                  expanded_storage_url=storage_url,
+                                  expanded_result=None)
         continue
 
       # Step 1: Expand any explicitly specified wildcards. The output from this
       # step is an iterator of BucketListingRef.
       # Starting with gs://buck*/abc* this step would expand to gs://bucket/abcd
 
       src_names_bucket = False
@@ -226,14 +235,18 @@
         post_step1_iter = PluralityCheckableIterator(
             self.WildcardIterator(url_str).IterAll(
                 bucket_listing_fields=self.bucket_listing_fields,
                 expand_top_level_buckets=True))
         if storage_url.IsCloudUrl() and storage_url.IsBucket():
           src_names_bucket = True
 
+      src_url_expands_to_multi = post_step1_iter.HasPlurality()
+      is_multi_top_level_source_request = (self.url_strs.has_plurality or
+                                           src_url_expands_to_multi)
+
       # Step 2: Expand bucket subdirs. The output from this
       # step is an iterator of (names_container, BucketListingRef).
       # Starting with gs://bucket/abcd this step would expand to:
       #   iter([(True, abcd/o1.txt), (True, abcd/o2.txt)]).
       subdir_exp_wildcard = self._flatness_wildcard[self.recursion_requested]
       if self.recursion_requested:
         post_step2_iter = _ImplicitBucketSubdirIterator(
@@ -273,19 +286,23 @@
       # Step 4. Expand directories and buckets. This step yields the iterated
       # values. Starting with gs://bucket this step would expand to:
       #  [abcd/o1.txt, abcd/o2.txt, xyz/o1.txt, xyz/o2.txt]
       # Starting with file://dir this step would expand to:
       #  [dir/a.txt, dir/b.txt, dir/c/]
       for (names_container, blr) in post_step3_iter:
         src_names_container = src_names_bucket or names_container
-
         if blr.IsObject():
-          yield NameExpansionResult(storage_url, is_multi_source_request,
-                                    src_names_container, blr.storage_url,
-                                    blr.root_object)
+          yield NameExpansionResult(
+              source_storage_url=storage_url,
+              is_multi_source_request=is_multi_source_request,
+              is_multi_top_level_source_request=
+              is_multi_top_level_source_request,
+              names_container=src_names_container,
+              expanded_storage_url=blr.storage_url,
+              expanded_result=blr.root_object)
         else:
           # Use implicit wildcarding to do the enumeration.
           # At this point we are guaranteed that:
           # - Recursion has been requested because non-object entries are
           #   filtered in step 3 otherwise.
           # - This is a prefix or bucket subdirectory because only
           #   non-recursive iterations product bucket references.
@@ -304,16 +321,22 @@
           src_url_expands_to_multi = (src_url_expands_to_multi or
                                       wc_iter.HasPlurality())
           is_multi_source_request = (self.url_strs.has_plurality or
                                      src_url_expands_to_multi)
           # This will be a flattened listing of all underlying objects in the
           # subdir.
           for blr in wc_iter:
-            yield NameExpansionResult(storage_url, is_multi_source_request,
-                                      True, blr.storage_url, blr.root_object)
+            yield NameExpansionResult(
+                source_storage_url=storage_url,
+                is_multi_source_request=is_multi_source_request,
+                is_multi_top_level_source_request=(
+                    is_multi_top_level_source_request),
+                names_container=True,
+                expanded_storage_url=blr.storage_url,
+                expanded_result=blr.root_object)
 
   def WildcardIterator(self, url_string):
     """Helper to instantiate gslib.WildcardIterator.
 
     Args are same as gslib.WildcardIterator interface, but this method fills
     in most of the values from instance state.
 
@@ -590,14 +613,16 @@
       name_expansion_result: StorageUrl that was being expanded.
       exp_dst_url: StorageUrl of the destination.
       have_existing_dst_container: Whether exp_url names an existing directory,
           bucket, or bucket subdirectory.
     """
     self.source_storage_url = name_expansion_result.source_storage_url
     self.is_multi_source_request = name_expansion_result.is_multi_source_request
+    self.is_multi_top_level_source_request = (
+        name_expansion_result.is_multi_top_level_source_request)
     self.names_container = name_expansion_result.names_container
     self.expanded_storage_url = name_expansion_result.expanded_storage_url
     self.expanded_result = name_expansion_result.expanded_result
 
     self.exp_dst_url = exp_dst_url
     self.have_existing_dst_container = have_existing_dst_container
```

### Comparing `gsutil-5.8/gslib/no_op_auth_plugin.py` & `gsutil-5.9/gslib/no_op_auth_plugin.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/no_op_credentials.py` & `gsutil-5.9/gslib/no_op_credentials.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/parallel_tracker_file.py` & `gsutil-5.9/gslib/parallel_tracker_file.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/plurality_checkable_iterator.py` & `gsutil-5.9/gslib/plurality_checkable_iterator.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/progress_callback.py` & `gsutil-5.9/gslib/progress_callback.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/project_id.py` & `gsutil-5.9/gslib/project_id.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/pubsub_api.py` & `gsutil-5.9/gslib/pubsub_api.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/resumable_streaming_upload.py` & `gsutil-5.9/gslib/resumable_streaming_upload.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/seek_ahead_thread.py` & `gsutil-5.9/gslib/seek_ahead_thread.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/sig_handling.py` & `gsutil-5.9/gslib/sig_handling.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/storage_uri_builder.py` & `gsutil-5.9/gslib/storage_uri_builder.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/storage_url.py` & `gsutil-5.9/gslib/storage_url.py`

 * *Files 0% similar despite different names*

```diff
@@ -40,14 +40,16 @@
 # Matches versioned object strings of the form 's3://bucket/obj#NULL'
 S3_VERSION_REGEX = re.compile(r'(?P<object>.+)#(?P<version_id>.+)$')
 # Matches file strings of the form 'file://dir/filename'
 FILE_OBJECT_REGEX = re.compile(r'([^:]*://)(?P<filepath>.*)')
 # Regex to determine if a string contains any wildcards.
 WILDCARD_REGEX = re.compile(r'[*?\[\]]')
 
+RELATIVE_PATH_SYMBOLS = frozenset(['.', '..'])
+
 
 class StorageUrl(object):
   """Abstract base class for file and Cloud Storage URLs."""
 
   def Clone(self):
     raise NotImplementedError('Clone not overridden')
```

### Comparing `gsutil-5.8/gslib/tab_complete.py` & `gsutil-5.9/gslib/tab_complete.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/__init__.py` & `gsutil-5.9/gslib/tests/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/mock_cloud_api.py` & `gsutil-5.9/gslib/tests/mock_cloud_api.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/mock_logging_handler.py` & `gsutil-5.9/gslib/tests/mock_logging_handler.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/rewrite_helper.py` & `gsutil-5.9/gslib/tests/rewrite_helper.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/signurl_signatures.py` & `gsutil-5.9/gslib/tests/signurl_signatures.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_Doption.py` & `gsutil-5.9/gslib/tests/test_Doption.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_acl.py` & `gsutil-5.9/gslib/tests/test_acl.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_autoclass.py` & `gsutil-5.9/gslib/tests/test_autoclass.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_boto_util.py` & `gsutil-5.9/gslib/tests/test_boto_util.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_bucketconfig.py` & `gsutil-5.9/gslib/tests/test_bucketconfig.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_bucketpolicyonly.py` & `gsutil-5.9/gslib/tests/test_bucketpolicyonly.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_cat.py` & `gsutil-5.9/gslib/tests/test_cat.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_cloud_api_delegator.py` & `gsutil-5.9/gslib/tests/test_cloud_api_delegator.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_command.py` & `gsutil-5.9/gslib/tests/test_command.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_command_runner.py` & `gsutil-5.9/gslib/tests/test_command_runner.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_compose.py` & `gsutil-5.9/gslib/tests/test_compose.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_context_config.py` & `gsutil-5.9/gslib/tests/test_context_config.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_copy_helper_funcs.py` & `gsutil-5.9/gslib/tests/test_copy_helper_funcs.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_copy_objects_iterator.py` & `gsutil-5.9/gslib/tests/test_copy_objects_iterator.py`

 * *Files 3% similar despite different names*

```diff
@@ -26,20 +26,20 @@
 from gslib.storage_url import StorageUrlFromString
 import gslib.tests.testcase as testcase
 
 
 def _ConstructNameExpansionIterator(src_url_strs):
   for src_url_str in src_url_strs:
     storage_url = StorageUrlFromString(src_url_str)
-    yield NameExpansionResult(
-        storage_url,
-        False,  # is_multi_source_request
-        False,  # names_container
-        storage_url,  # expanded_storage_url
-        None)  # expanded_result
+    yield NameExpansionResult(source_storage_url=storage_url,
+                              is_multi_source_request=False,
+                              is_multi_top_level_source_request=False,
+                              names_container=False,
+                              expanded_storage_url=storage_url,
+                              expanded_result=None)
 
 
 def _ConstrcutNameExpansionIteratorDestinationTupleIterator(
     src_url_strs_array, dst_url_strs):
   for src_url_strs, dst_url_str in zip(src_url_strs_array, dst_url_strs):
     name_expansion_iter_dst_tuple = NameExpansionIteratorDestinationTuple(
         _ConstructNameExpansionIterator(src_url_strs),
```

### Comparing `gsutil-5.8/gslib/tests/test_cors.py` & `gsutil-5.9/gslib/tests/test_cors.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_cp.py` & `gsutil-5.9/gslib/tests/test_cp.py`

 * *Files 2% similar despite different names*

```diff
@@ -1390,9356 +1390,9356 @@
 000056d0: 3d62 2762 6172 2729 0a20 2020 2073 7464  =b'bar').    std
 000056e0: 6572 7220 3d20 7365 6c66 2e52 756e 4773  err = self.RunGs
 000056f0: 5574 696c 280a 2020 2020 2020 2020 5b27  Util(.        ['
 00005700: 6370 272c 2027 2d6e 272c 2066 7061 7468  cp', '-n', fpath
 00005710: 2c20 7375 7269 286b 6579 5f75 7269 295d  , suri(key_uri)]
 00005720: 2c20 7265 7475 726e 5f73 7464 6572 723d  , return_stderr=
 00005730: 5472 7565 290a 2020 2020 7365 6c66 2e61  True).    self.a
-00005740: 7373 6572 7449 6e28 2753 6b69 7070 696e  ssertIn('Skippin
-00005750: 6720 6578 6973 7469 6e67 2069 7465 6d3a  g existing item:
-00005760: 2025 7327 2025 2073 7572 6928 6b65 795f   %s' % suri(key_
-00005770: 7572 6929 2c20 7374 6465 7272 290a 2020  uri), stderr).  
-00005780: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-00005790: 616c 286b 6579 5f75 7269 2e67 6574 5f63  al(key_uri.get_c
-000057a0: 6f6e 7465 6e74 735f 6173 5f73 7472 696e  ontents_as_strin
-000057b0: 6728 292c 2062 2766 6f6f 2729 0a20 2020  g(), b'foo').   
-000057c0: 2073 7464 6572 7220 3d20 7365 6c66 2e52   stderr = self.R
-000057d0: 756e 4773 5574 696c 285b 2763 7027 2c20  unGsUtil(['cp', 
-000057e0: 272d 6e27 2c20 7375 7269 286b 6579 5f75  '-n', suri(key_u
-000057f0: 7269 292c 2066 7061 7468 5d2c 0a20 2020  ri), fpath],.   
-00005800: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005810: 2020 2020 2020 2020 2072 6574 7572 6e5f           return_
-00005820: 7374 6465 7272 3d54 7275 6529 0a20 2020  stderr=True).   
-00005830: 2077 6974 6820 6f70 656e 2866 7061 7468   with open(fpath
-00005840: 2c20 2772 6227 2920 6173 2066 3a0a 2020  , 'rb') as f:.  
-00005850: 2020 2020 7365 6c66 2e61 7373 6572 7449      self.assertI
-00005860: 6e28 2753 6b69 7070 696e 6720 6578 6973  n('Skipping exis
-00005870: 7469 6e67 2069 7465 6d3a 2025 7327 2025  ting item: %s' %
-00005880: 2073 7572 6928 6629 2c20 7374 6465 7272   suri(f), stderr
-00005890: 290a 2020 2020 2020 7365 6c66 2e61 7373  ).      self.ass
-000058a0: 6572 7445 7175 616c 2866 2e72 6561 6428  ertEqual(f.read(
-000058b0: 292c 2062 2762 6172 2729 0a0a 2020 4053  ), b'bar')..  @S
-000058c0: 6571 7565 6e74 6961 6c41 6e64 5061 7261  equentialAndPara
-000058d0: 6c6c 656c 5472 616e 7366 6572 0a20 2064  llelTransfer.  d
-000058e0: 6566 2074 6573 745f 6e6f 636c 6f62 6265  ef test_noclobbe
-000058f0: 725f 6469 6666 6572 656e 745f 7369 7a65  r_different_size
-00005900: 2873 656c 6629 3a0a 2020 2020 6b65 795f  (self):.    key_
-00005910: 7572 6920 3d20 7365 6c66 2e43 7265 6174  uri = self.Creat
-00005920: 654f 626a 6563 7428 636f 6e74 656e 7473  eObject(contents
-00005930: 3d62 2766 6f6f 2729 0a20 2020 2066 7061  =b'foo').    fpa
-00005940: 7468 203d 2073 656c 662e 4372 6561 7465  th = self.Create
-00005950: 5465 6d70 4669 6c65 2863 6f6e 7465 6e74  TempFile(content
-00005960: 733d 6227 7175 7578 2729 0a20 2020 2073  s=b'quux').    s
-00005970: 7464 6572 7220 3d20 7365 6c66 2e52 756e  tderr = self.Run
-00005980: 4773 5574 696c 280a 2020 2020 2020 2020  GsUtil(.        
-00005990: 5b27 6370 272c 2027 2d6e 272c 2066 7061  ['cp', '-n', fpa
-000059a0: 7468 2c20 7375 7269 286b 6579 5f75 7269  th, suri(key_uri
-000059b0: 295d 2c20 7265 7475 726e 5f73 7464 6572  )], return_stder
-000059c0: 723d 5472 7565 290a 2020 2020 7365 6c66  r=True).    self
-000059d0: 2e61 7373 6572 7449 6e28 2753 6b69 7070  .assertIn('Skipp
-000059e0: 696e 6720 6578 6973 7469 6e67 2069 7465  ing existing ite
-000059f0: 6d3a 2025 7327 2025 2073 7572 6928 6b65  m: %s' % suri(ke
-00005a00: 795f 7572 6929 2c20 7374 6465 7272 290a  y_uri), stderr).
-00005a10: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-00005a20: 7175 616c 286b 6579 5f75 7269 2e67 6574  qual(key_uri.get
-00005a30: 5f63 6f6e 7465 6e74 735f 6173 5f73 7472  _contents_as_str
-00005a40: 696e 6728 292c 2062 2766 6f6f 2729 0a20  ing(), b'foo'). 
-00005a50: 2020 2073 7464 6572 7220 3d20 7365 6c66     stderr = self
-00005a60: 2e52 756e 4773 5574 696c 285b 2763 7027  .RunGsUtil(['cp'
-00005a70: 2c20 272d 6e27 2c20 7375 7269 286b 6579  , '-n', suri(key
-00005a80: 5f75 7269 292c 2066 7061 7468 5d2c 0a20  _uri), fpath],. 
-00005a90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005aa0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00005ab0: 6e5f 7374 6465 7272 3d54 7275 6529 0a20  n_stderr=True). 
-00005ac0: 2020 2077 6974 6820 6f70 656e 2866 7061     with open(fpa
-00005ad0: 7468 2c20 2772 6227 2920 6173 2066 3a0a  th, 'rb') as f:.
-00005ae0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-00005af0: 7449 6e28 2753 6b69 7070 696e 6720 6578  tIn('Skipping ex
-00005b00: 6973 7469 6e67 2069 7465 6d3a 2025 7327  isting item: %s'
-00005b10: 2025 2073 7572 6928 6629 2c20 7374 6465   % suri(f), stde
-00005b20: 7272 290a 2020 2020 2020 7365 6c66 2e61  rr).      self.a
-00005b30: 7373 6572 7445 7175 616c 2866 2e72 6561  ssertEqual(f.rea
-00005b40: 6428 292c 2062 2771 7575 7827 290a 0a20  d(), b'quux').. 
-00005b50: 2064 6566 2074 6573 745f 6465 7374 5f62   def test_dest_b
-00005b60: 7563 6b65 745f 6e6f 745f 6578 6973 7428  ucket_not_exist(
-00005b70: 7365 6c66 293a 0a20 2020 2066 7061 7468  self):.    fpath
-00005b80: 203d 2073 656c 662e 4372 6561 7465 5465   = self.CreateTe
-00005b90: 6d70 4669 6c65 2863 6f6e 7465 6e74 733d  mpFile(contents=
-00005ba0: 6227 666f 6f27 290a 2020 2020 696e 7661  b'foo').    inva
-00005bb0: 6c69 645f 6275 636b 6574 5f75 7269 203d  lid_bucket_uri =
-00005bc0: 2028 2725 733a 2f2f 2573 2720 250a 2020   ('%s://%s' %.  
-00005bd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005be0: 2020 2020 2020 2020 2873 656c 662e 6465          (self.de
-00005bf0: 6661 756c 745f 7072 6f76 6964 6572 2c20  fault_provider, 
-00005c00: 7365 6c66 2e6e 6f6e 6578 6973 7465 6e74  self.nonexistent
-00005c10: 5f62 7563 6b65 745f 6e61 6d65 2929 0a20  _bucket_name)). 
-00005c20: 2020 2023 2054 4f44 4f28 622f 3133 3537     # TODO(b/1357
-00005c30: 3830 3636 3129 3a20 5265 6d6f 7665 2072  80661): Remove r
-00005c40: 6574 7279 2061 6674 6572 2062 7567 2072  etry after bug r
-00005c50: 6573 6f6c 7665 640a 2020 2020 4052 6574  esolved.    @Ret
-00005c60: 7279 2841 7373 6572 7469 6f6e 4572 726f  ry(AssertionErro
-00005c70: 722c 2074 7269 6573 3d33 2c20 7469 6d65  r, tries=3, time
-00005c80: 6f75 745f 7365 6373 3d31 290a 2020 2020  out_secs=1).    
-00005c90: 6465 6620 5f43 6865 636b 2829 3a0a 2020  def _Check():.  
-00005ca0: 2020 2020 7374 6465 7272 203d 2073 656c      stderr = sel
-00005cb0: 662e 5275 6e47 7355 7469 6c28 5b27 6370  f.RunGsUtil(['cp
-00005cc0: 272c 2066 7061 7468 2c20 696e 7661 6c69  ', fpath, invali
-00005cd0: 645f 6275 636b 6574 5f75 7269 5d2c 0a20  d_bucket_uri],. 
-00005ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005cf0: 2020 2020 2020 2020 2020 2020 2065 7870               exp
-00005d00: 6563 7465 645f 7374 6174 7573 3d31 2c0a  ected_status=1,.
+00005740: 7373 6572 7452 6567 6578 2873 7464 6572  ssertRegex(stder
+00005750: 722c 2072 2753 6b69 7070 696e 672e 2a3a  r, r'Skipping.*:
+00005760: 207b 7d27 2e66 6f72 6d61 7428 7265 2e65   {}'.format(re.e
+00005770: 7363 6170 6528 7375 7269 286b 6579 5f75  scape(suri(key_u
+00005780: 7269 2929 2929 0a20 2020 2073 656c 662e  ri)))).    self.
+00005790: 6173 7365 7274 4571 7561 6c28 6b65 795f  assertEqual(key_
+000057a0: 7572 692e 6765 745f 636f 6e74 656e 7473  uri.get_contents
+000057b0: 5f61 735f 7374 7269 6e67 2829 2c20 6227  _as_string(), b'
+000057c0: 666f 6f27 290a 2020 2020 7374 6465 7272  foo').    stderr
+000057d0: 203d 2073 656c 662e 5275 6e47 7355 7469   = self.RunGsUti
+000057e0: 6c28 5b27 6370 272c 2027 2d6e 272c 2073  l(['cp', '-n', s
+000057f0: 7572 6928 6b65 795f 7572 6929 2c20 6670  uri(key_uri), fp
+00005800: 6174 685d 2c0a 2020 2020 2020 2020 2020  ath],.          
+00005810: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005820: 2020 7265 7475 726e 5f73 7464 6572 723d    return_stderr=
+00005830: 5472 7565 290a 2020 2020 7769 7468 206f  True).    with o
+00005840: 7065 6e28 6670 6174 682c 2027 7262 2729  pen(fpath, 'rb')
+00005850: 2061 7320 663a 0a20 2020 2020 2073 656c   as f:.      sel
+00005860: 662e 6173 7365 7274 5265 6765 7828 7374  f.assertRegex(st
+00005870: 6465 7272 2c20 7227 536b 6970 7069 6e67  derr, r'Skipping
+00005880: 2e2a 3a20 7b7d 272e 666f 726d 6174 2872  .*: {}'.format(r
+00005890: 652e 6573 6361 7065 2873 7572 6928 6629  e.escape(suri(f)
+000058a0: 2929 290a 2020 2020 2020 7365 6c66 2e61  ))).      self.a
+000058b0: 7373 6572 7445 7175 616c 2866 2e72 6561  ssertEqual(f.rea
+000058c0: 6428 292c 2062 2762 6172 2729 0a0a 2020  d(), b'bar')..  
+000058d0: 4053 6571 7565 6e74 6961 6c41 6e64 5061  @SequentialAndPa
+000058e0: 7261 6c6c 656c 5472 616e 7366 6572 0a20  rallelTransfer. 
+000058f0: 2064 6566 2074 6573 745f 6e6f 636c 6f62   def test_noclob
+00005900: 6265 725f 6469 6666 6572 656e 745f 7369  ber_different_si
+00005910: 7a65 2873 656c 6629 3a0a 2020 2020 6b65  ze(self):.    ke
+00005920: 795f 7572 6920 3d20 7365 6c66 2e43 7265  y_uri = self.Cre
+00005930: 6174 654f 626a 6563 7428 636f 6e74 656e  ateObject(conten
+00005940: 7473 3d62 2766 6f6f 2729 0a20 2020 2066  ts=b'foo').    f
+00005950: 7061 7468 203d 2073 656c 662e 4372 6561  path = self.Crea
+00005960: 7465 5465 6d70 4669 6c65 2863 6f6e 7465  teTempFile(conte
+00005970: 6e74 733d 6227 7175 7578 2729 0a20 2020  nts=b'quux').   
+00005980: 2073 7464 6572 7220 3d20 7365 6c66 2e52   stderr = self.R
+00005990: 756e 4773 5574 696c 280a 2020 2020 2020  unGsUtil(.      
+000059a0: 2020 5b27 6370 272c 2027 2d6e 272c 2066    ['cp', '-n', f
+000059b0: 7061 7468 2c20 7375 7269 286b 6579 5f75  path, suri(key_u
+000059c0: 7269 295d 2c20 7265 7475 726e 5f73 7464  ri)], return_std
+000059d0: 6572 723d 5472 7565 290a 2020 2020 7365  err=True).    se
+000059e0: 6c66 2e61 7373 6572 7452 6567 6578 2873  lf.assertRegex(s
+000059f0: 7464 6572 722c 2072 2753 6b69 7070 696e  tderr, r'Skippin
+00005a00: 672e 2a3a 207b 7d27 2e66 6f72 6d61 7428  g.*: {}'.format(
+00005a10: 7265 2e65 7363 6170 6528 7375 7269 286b  re.escape(suri(k
+00005a20: 6579 5f75 7269 2929 2929 0a20 2020 2073  ey_uri)))).    s
+00005a30: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+00005a40: 6b65 795f 7572 692e 6765 745f 636f 6e74  key_uri.get_cont
+00005a50: 656e 7473 5f61 735f 7374 7269 6e67 2829  ents_as_string()
+00005a60: 2c20 6227 666f 6f27 290a 2020 2020 7374  , b'foo').    st
+00005a70: 6465 7272 203d 2073 656c 662e 5275 6e47  derr = self.RunG
+00005a80: 7355 7469 6c28 5b27 6370 272c 2027 2d6e  sUtil(['cp', '-n
+00005a90: 272c 2073 7572 6928 6b65 795f 7572 6929  ', suri(key_uri)
+00005aa0: 2c20 6670 6174 685d 2c0a 2020 2020 2020  , fpath],.      
+00005ab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005ac0: 2020 2020 2020 7265 7475 726e 5f73 7464        return_std
+00005ad0: 6572 723d 5472 7565 290a 2020 2020 7769  err=True).    wi
+00005ae0: 7468 206f 7065 6e28 6670 6174 682c 2027  th open(fpath, '
+00005af0: 7262 2729 2061 7320 663a 0a20 2020 2020  rb') as f:.     
+00005b00: 2073 656c 662e 6173 7365 7274 5265 6765   self.assertRege
+00005b10: 7828 7374 6465 7272 2c20 7227 536b 6970  x(stderr, r'Skip
+00005b20: 7069 6e67 2e2a 3a20 7b7d 272e 666f 726d  ping.*: {}'.form
+00005b30: 6174 2872 652e 6573 6361 7065 2873 7572  at(re.escape(sur
+00005b40: 6928 6629 2929 290a 2020 2020 2020 7365  i(f)))).      se
+00005b50: 6c66 2e61 7373 6572 7445 7175 616c 2866  lf.assertEqual(f
+00005b60: 2e72 6561 6428 292c 2062 2771 7575 7827  .read(), b'quux'
+00005b70: 290a 0a20 2064 6566 2074 6573 745f 6465  )..  def test_de
+00005b80: 7374 5f62 7563 6b65 745f 6e6f 745f 6578  st_bucket_not_ex
+00005b90: 6973 7428 7365 6c66 293a 0a20 2020 2066  ist(self):.    f
+00005ba0: 7061 7468 203d 2073 656c 662e 4372 6561  path = self.Crea
+00005bb0: 7465 5465 6d70 4669 6c65 2863 6f6e 7465  teTempFile(conte
+00005bc0: 6e74 733d 6227 666f 6f27 290a 2020 2020  nts=b'foo').    
+00005bd0: 696e 7661 6c69 645f 6275 636b 6574 5f75  invalid_bucket_u
+00005be0: 7269 203d 2028 2725 733a 2f2f 2573 2720  ri = ('%s://%s' 
+00005bf0: 250a 2020 2020 2020 2020 2020 2020 2020  %.              
+00005c00: 2020 2020 2020 2020 2020 2020 2873 656c              (sel
+00005c10: 662e 6465 6661 756c 745f 7072 6f76 6964  f.default_provid
+00005c20: 6572 2c20 7365 6c66 2e6e 6f6e 6578 6973  er, self.nonexis
+00005c30: 7465 6e74 5f62 7563 6b65 745f 6e61 6d65  tent_bucket_name
+00005c40: 2929 0a20 2020 2023 2054 4f44 4f28 622f  )).    # TODO(b/
+00005c50: 3133 3537 3830 3636 3129 3a20 5265 6d6f  135780661): Remo
+00005c60: 7665 2072 6574 7279 2061 6674 6572 2062  ve retry after b
+00005c70: 7567 2072 6573 6f6c 7665 640a 2020 2020  ug resolved.    
+00005c80: 4052 6574 7279 2841 7373 6572 7469 6f6e  @Retry(Assertion
+00005c90: 4572 726f 722c 2074 7269 6573 3d33 2c20  Error, tries=3, 
+00005ca0: 7469 6d65 6f75 745f 7365 6373 3d31 290a  timeout_secs=1).
+00005cb0: 2020 2020 6465 6620 5f43 6865 636b 2829      def _Check()
+00005cc0: 3a0a 2020 2020 2020 7374 6465 7272 203d  :.      stderr =
+00005cd0: 2073 656c 662e 5275 6e47 7355 7469 6c28   self.RunGsUtil(
+00005ce0: 5b27 6370 272c 2066 7061 7468 2c20 696e  ['cp', fpath, in
+00005cf0: 7661 6c69 645f 6275 636b 6574 5f75 7269  valid_bucket_uri
+00005d00: 5d2c 0a20 2020 2020 2020 2020 2020 2020  ],.             
 00005d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005d20: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00005d30: 7475 726e 5f73 7464 6572 723d 5472 7565  turn_stderr=True
-00005d40: 290a 2020 2020 2020 6966 2073 656c 662e  ).      if self.
-00005d50: 5f75 7365 5f67 636c 6f75 645f 7374 6f72  _use_gcloud_stor
-00005d60: 6167 653a 0a20 2020 2020 2020 2073 656c  age:.        sel
-00005d70: 662e 6173 7365 7274 496e 2827 6e6f 7420  f.assertIn('not 
-00005d80: 666f 756e 643a 2034 3034 272c 2073 7464  found: 404', std
-00005d90: 6572 7229 0a20 2020 2020 2065 6c73 653a  err).      else:
-00005da0: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-00005db0: 7365 7274 496e 2827 646f 6573 206e 6f74  sertIn('does not
-00005dc0: 2065 7869 7374 272c 2073 7464 6572 7229   exist', stderr)
-00005dd0: 0a0a 2020 2020 5f43 6865 636b 2829 0a0a  ..    _Check()..
-00005de0: 2020 6465 6620 7465 7374 5f63 6f70 795f    def test_copy_
-00005df0: 696e 5f63 6c6f 7564 5f6e 6f63 6c6f 6262  in_cloud_noclobb
-00005e00: 6572 2873 656c 6629 3a0a 2020 2020 6275  er(self):.    bu
-00005e10: 636b 6574 315f 7572 6920 3d20 7365 6c66  cket1_uri = self
-00005e20: 2e43 7265 6174 6542 7563 6b65 7428 290a  .CreateBucket().
-00005e30: 2020 2020 6275 636b 6574 325f 7572 6920      bucket2_uri 
-00005e40: 3d20 7365 6c66 2e43 7265 6174 6542 7563  = self.CreateBuc
-00005e50: 6b65 7428 290a 2020 2020 6b65 795f 7572  ket().    key_ur
-00005e60: 6920 3d20 7365 6c66 2e43 7265 6174 654f  i = self.CreateO
-00005e70: 626a 6563 7428 6275 636b 6574 5f75 7269  bject(bucket_uri
-00005e80: 3d62 7563 6b65 7431 5f75 7269 2c20 636f  =bucket1_uri, co
-00005e90: 6e74 656e 7473 3d62 2766 6f6f 2729 0a20  ntents=b'foo'). 
-00005ea0: 2020 2073 7464 6572 7220 3d20 7365 6c66     stderr = self
-00005eb0: 2e52 756e 4773 5574 696c 280a 2020 2020  .RunGsUtil(.    
-00005ec0: 2020 2020 5b27 6370 272c 2073 7572 6928      ['cp', suri(
-00005ed0: 6b65 795f 7572 6929 2c20 7375 7269 2862  key_uri), suri(b
-00005ee0: 7563 6b65 7432 5f75 7269 295d 2c20 7265  ucket2_uri)], re
-00005ef0: 7475 726e 5f73 7464 6572 723d 5472 7565  turn_stderr=True
-00005f00: 290a 2020 2020 2320 5265 7772 6974 6520  ).    # Rewrite 
-00005f10: 4150 4920 6d61 7920 6f75 7470 7574 2061  API may output a
-00005f20: 6e20 6164 6469 7469 6f6e 616c 2027 436f  n additional 'Co
-00005f30: 7079 696e 6727 2070 726f 6772 6573 7320  pying' progress 
-00005f40: 6e6f 7469 6669 6361 7469 6f6e 2e0a 2020  notification..  
-00005f50: 2020 7365 6c66 2e61 7373 6572 7447 7265    self.assertGre
-00005f60: 6174 6572 4571 7561 6c28 7374 6465 7272  aterEqual(stderr
-00005f70: 2e63 6f75 6e74 2827 436f 7079 696e 6727  .count('Copying'
-00005f80: 292c 2031 290a 2020 2020 7365 6c66 2e61  ), 1).    self.a
-00005f90: 7373 6572 744c 6573 7345 7175 616c 2873  ssertLessEqual(s
-00005fa0: 7464 6572 722e 636f 756e 7428 2743 6f70  tderr.count('Cop
-00005fb0: 7969 6e67 2729 2c20 3229 0a20 2020 2073  ying'), 2).    s
-00005fc0: 7464 6572 7220 3d20 7365 6c66 2e52 756e  tderr = self.Run
-00005fd0: 4773 5574 696c 280a 2020 2020 2020 2020  GsUtil(.        
-00005fe0: 5b27 6370 272c 2027 2d6e 272c 2073 7572  ['cp', '-n', sur
-00005ff0: 6928 6b65 795f 7572 6929 2c0a 2020 2020  i(key_uri),.    
-00006000: 2020 2020 2073 7572 6928 6275 636b 6574       suri(bucket
-00006010: 325f 7572 6929 5d2c 2072 6574 7572 6e5f  2_uri)], return_
-00006020: 7374 6465 7272 3d54 7275 6529 0a20 2020  stderr=True).   
-00006030: 2073 656c 662e 6173 7365 7274 496e 280a   self.assertIn(.
-00006040: 2020 2020 2020 2020 2753 6b69 7070 696e          'Skippin
-00006050: 6720 6578 6973 7469 6e67 2069 7465 6d3a  g existing item:
-00006060: 2025 7327 2025 2073 7572 6928 6275 636b   %s' % suri(buck
-00006070: 6574 325f 7572 692c 206b 6579 5f75 7269  et2_uri, key_uri
-00006080: 2e6f 626a 6563 745f 6e61 6d65 292c 0a20  .object_name),. 
-00006090: 2020 2020 2020 2073 7464 6572 7229 0a0a         stderr)..
-000060a0: 2020 4075 6e69 7474 6573 742e 736b 6970    @unittest.skip
-000060b0: 4966 2849 535f 5749 4e44 4f57 532c 2027  If(IS_WINDOWS, '
-000060c0: 6f73 2e6d 6b66 6966 6f20 6e6f 7420 6176  os.mkfifo not av
-000060d0: 6169 6c61 626c 6520 6f6e 2057 696e 646f  ailable on Windo
-000060e0: 7773 2e27 290a 2020 4053 6571 7565 6e74  ws.').  @Sequent
-000060f0: 6961 6c41 6e64 5061 7261 6c6c 656c 5472  ialAndParallelTr
-00006100: 616e 7366 6572 0a20 2064 6566 2074 6573  ansfer.  def tes
-00006110: 745f 6370 5f66 726f 6d5f 6c6f 6361 6c5f  t_cp_from_local_
-00006120: 6669 6c65 5f74 6f5f 6669 666f 2873 656c  file_to_fifo(sel
-00006130: 6629 3a0a 2020 2020 636f 6e74 656e 7473  f):.    contents
-00006140: 203d 2062 2762 6172 270a 2020 2020 6669   = b'bar'.    fi
-00006150: 666f 5f70 6174 6820 3d20 7365 6c66 2e43  fo_path = self.C
-00006160: 7265 6174 6554 656d 7046 6966 6f28 290a  reateTempFifo().
-00006170: 2020 2020 6669 6c65 5f70 6174 6820 3d20      file_path = 
-00006180: 7365 6c66 2e43 7265 6174 6554 656d 7046  self.CreateTempF
-00006190: 696c 6528 636f 6e74 656e 7473 3d63 6f6e  ile(contents=con
-000061a0: 7465 6e74 7329 0a20 2020 206c 6973 745f  tents).    list_
-000061b0: 666f 725f 6f75 7470 7574 203d 205b 5d0a  for_output = [].
-000061c0: 0a20 2020 2072 6561 645f 7468 7265 6164  .    read_thread
-000061d0: 203d 2074 6872 6561 6469 6e67 2e54 6872   = threading.Thr
-000061e0: 6561 6428 7461 7267 6574 3d5f 5265 6164  ead(target=_Read
-000061f0: 436f 6e74 656e 7473 4672 6f6d 4669 666f  ContentsFromFifo
-00006200: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00006210: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006220: 2020 2020 2061 7267 733d 2866 6966 6f5f       args=(fifo_
-00006230: 7061 7468 2c20 6c69 7374 5f66 6f72 5f6f  path, list_for_o
-00006240: 7574 7075 7429 290a 2020 2020 7265 6164  utput)).    read
-00006250: 5f74 6872 6561 642e 7374 6172 7428 290a  _thread.start().
-00006260: 2020 2020 7772 6974 655f 7468 7265 6164      write_thread
-00006270: 203d 2074 6872 6561 6469 6e67 2e54 6872   = threading.Thr
-00006280: 6561 6428 0a20 2020 2020 2020 2074 6172  ead(.        tar
-00006290: 6765 743d 7365 6c66 2e5f 4370 5769 7468  get=self._CpWith
-000062a0: 4669 666f 5669 6147 7355 7469 6c41 6e64  FifoViaGsUtilAnd
-000062b0: 4170 7065 6e64 4f75 7470 7574 546f 4c69  AppendOutputToLi
-000062c0: 7374 2c0a 2020 2020 2020 2020 6172 6773  st,.        args
-000062d0: 3d28 2866 696c 655f 7061 7468 2c29 2c20  =((file_path,), 
-000062e0: 6669 666f 5f70 6174 682c 205b 5d29 290a  fifo_path, [])).
-000062f0: 2020 2020 7772 6974 655f 7468 7265 6164      write_thread
-00006300: 2e73 7461 7274 2829 0a20 2020 2077 7269  .start().    wri
-00006310: 7465 5f74 6872 6561 642e 6a6f 696e 2831  te_thread.join(1
-00006320: 3230 290a 2020 2020 7265 6164 5f74 6872  20).    read_thr
-00006330: 6561 642e 6a6f 696e 2831 3230 290a 2020  ead.join(120).  
-00006340: 2020 6966 206e 6f74 206c 6973 745f 666f    if not list_fo
-00006350: 725f 6f75 7470 7574 3a0a 2020 2020 2020  r_output:.      
-00006360: 7365 6c66 2e66 6169 6c28 2752 6561 6469  self.fail('Readi
-00006370: 6e67 2f77 7269 7469 6e67 2074 6f20 7468  ng/writing to th
-00006380: 6520 6669 666f 2074 696d 6564 206f 7574  e fifo timed out
-00006390: 2e27 290a 2020 2020 7365 6c66 2e61 7373  .').    self.ass
-000063a0: 6572 7445 7175 616c 286c 6973 745f 666f  ertEqual(list_fo
-000063b0: 725f 6f75 7470 7574 5b30 5d2e 7374 7269  r_output[0].stri
-000063c0: 7028 292c 2063 6f6e 7465 6e74 7329 0a0a  p(), contents)..
-000063d0: 2020 4075 6e69 7474 6573 742e 736b 6970    @unittest.skip
-000063e0: 4966 2849 535f 5749 4e44 4f57 532c 2027  If(IS_WINDOWS, '
-000063f0: 6f73 2e6d 6b66 6966 6f20 6e6f 7420 6176  os.mkfifo not av
-00006400: 6169 6c61 626c 6520 6f6e 2057 696e 646f  ailable on Windo
-00006410: 7773 2e27 290a 2020 4053 6571 7565 6e74  ws.').  @Sequent
-00006420: 6961 6c41 6e64 5061 7261 6c6c 656c 5472  ialAndParallelTr
-00006430: 616e 7366 6572 0a20 2064 6566 2074 6573  ansfer.  def tes
-00006440: 745f 6370 5f66 726f 6d5f 6f6e 655f 6f62  t_cp_from_one_ob
-00006450: 6a65 6374 5f74 6f5f 6669 666f 2873 656c  ject_to_fifo(sel
-00006460: 6629 3a0a 2020 2020 6669 666f 5f70 6174  f):.    fifo_pat
-00006470: 6820 3d20 7365 6c66 2e43 7265 6174 6554  h = self.CreateT
-00006480: 656d 7046 6966 6f28 290a 2020 2020 6275  empFifo().    bu
-00006490: 636b 6574 5f75 7269 203d 2073 656c 662e  cket_uri = self.
-000064a0: 4372 6561 7465 4275 636b 6574 2829 0a20  CreateBucket(). 
-000064b0: 2020 2063 6f6e 7465 6e74 7320 3d20 6227     contents = b'
-000064c0: 6261 7227 0a20 2020 206f 626a 5f75 7269  bar'.    obj_uri
-000064d0: 203d 2073 656c 662e 4372 6561 7465 4f62   = self.CreateOb
-000064e0: 6a65 6374 2862 7563 6b65 745f 7572 693d  ject(bucket_uri=
-000064f0: 6275 636b 6574 5f75 7269 2c20 636f 6e74  bucket_uri, cont
-00006500: 656e 7473 3d63 6f6e 7465 6e74 7329 0a20  ents=contents). 
-00006510: 2020 206c 6973 745f 666f 725f 6f75 7470     list_for_outp
-00006520: 7574 203d 205b 5d0a 0a20 2020 2072 6561  ut = []..    rea
-00006530: 645f 7468 7265 6164 203d 2074 6872 6561  d_thread = threa
-00006540: 6469 6e67 2e54 6872 6561 6428 7461 7267  ding.Thread(targ
-00006550: 6574 3d5f 5265 6164 436f 6e74 656e 7473  et=_ReadContents
-00006560: 4672 6f6d 4669 666f 2c0a 2020 2020 2020  FromFifo,.      
-00006570: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006580: 2020 2020 2020 2020 2020 2020 2061 7267               arg
-00006590: 733d 2866 6966 6f5f 7061 7468 2c20 6c69  s=(fifo_path, li
-000065a0: 7374 5f66 6f72 5f6f 7574 7075 7429 290a  st_for_output)).
-000065b0: 2020 2020 7265 6164 5f74 6872 6561 642e      read_thread.
-000065c0: 7374 6172 7428 290a 2020 2020 7772 6974  start().    writ
-000065d0: 655f 7468 7265 6164 203d 2074 6872 6561  e_thread = threa
-000065e0: 6469 6e67 2e54 6872 6561 6428 0a20 2020  ding.Thread(.   
-000065f0: 2020 2020 2074 6172 6765 743d 7365 6c66       target=self
-00006600: 2e5f 4370 5769 7468 4669 666f 5669 6147  ._CpWithFifoViaG
-00006610: 7355 7469 6c41 6e64 4170 7065 6e64 4f75  sUtilAndAppendOu
-00006620: 7470 7574 546f 4c69 7374 2c0a 2020 2020  tputToList,.    
-00006630: 2020 2020 6172 6773 3d28 2873 7572 6928      args=((suri(
-00006640: 6f62 6a5f 7572 6929 2c29 2c20 6669 666f  obj_uri),), fifo
-00006650: 5f70 6174 682c 205b 5d29 290a 2020 2020  _path, [])).    
-00006660: 7772 6974 655f 7468 7265 6164 2e73 7461  write_thread.sta
-00006670: 7274 2829 0a20 2020 2077 7269 7465 5f74  rt().    write_t
-00006680: 6872 6561 642e 6a6f 696e 2831 3230 290a  hread.join(120).
-00006690: 2020 2020 7265 6164 5f74 6872 6561 642e      read_thread.
-000066a0: 6a6f 696e 2831 3230 290a 2020 2020 6966  join(120).    if
-000066b0: 206e 6f74 206c 6973 745f 666f 725f 6f75   not list_for_ou
-000066c0: 7470 7574 3a0a 2020 2020 2020 7365 6c66  tput:.      self
-000066d0: 2e66 6169 6c28 2752 6561 6469 6e67 2f77  .fail('Reading/w
-000066e0: 7269 7469 6e67 2074 6f20 7468 6520 6669  riting to the fi
-000066f0: 666f 2074 696d 6564 206f 7574 2e27 290a  fo timed out.').
-00006700: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-00006710: 7175 616c 286c 6973 745f 666f 725f 6f75  qual(list_for_ou
-00006720: 7470 7574 5b30 5d2e 7374 7269 7028 292c  tput[0].strip(),
-00006730: 2063 6f6e 7465 6e74 7329 0a0a 2020 4075   contents)..  @u
-00006740: 6e69 7474 6573 742e 736b 6970 4966 2849  nittest.skipIf(I
-00006750: 535f 5749 4e44 4f57 532c 2027 6f73 2e6d  S_WINDOWS, 'os.m
-00006760: 6b66 6966 6f20 6e6f 7420 6176 6169 6c61  kfifo not availa
-00006770: 626c 6520 6f6e 2057 696e 646f 7773 2e27  ble on Windows.'
-00006780: 290a 2020 4053 6571 7565 6e74 6961 6c41  ).  @SequentialA
-00006790: 6e64 5061 7261 6c6c 656c 5472 616e 7366  ndParallelTransf
-000067a0: 6572 0a20 2064 6566 2074 6573 745f 6370  er.  def test_cp
-000067b0: 5f66 726f 6d5f 6d75 6c74 6970 6c65 5f6f  _from_multiple_o
-000067c0: 626a 6563 7473 5f74 6f5f 6669 666f 2873  bjects_to_fifo(s
-000067d0: 656c 6629 3a0a 2020 2020 6669 666f 5f70  elf):.    fifo_p
-000067e0: 6174 6820 3d20 7365 6c66 2e43 7265 6174  ath = self.Creat
-000067f0: 6554 656d 7046 6966 6f28 290a 2020 2020  eTempFifo().    
-00006800: 6275 636b 6574 5f75 7269 203d 2073 656c  bucket_uri = sel
-00006810: 662e 4372 6561 7465 4275 636b 6574 2829  f.CreateBucket()
-00006820: 0a20 2020 2063 6f6e 7465 6e74 7331 203d  .    contents1 =
-00006830: 2062 2766 6f6f 2061 6e64 2062 6172 270a   b'foo and bar'.
-00006840: 2020 2020 636f 6e74 656e 7473 3220 3d20      contents2 = 
-00006850: 6227 6261 7a20 616e 6420 7175 7827 0a20  b'baz and qux'. 
-00006860: 2020 206f 626a 315f 7572 6920 3d20 7365     obj1_uri = se
-00006870: 6c66 2e43 7265 6174 654f 626a 6563 7428  lf.CreateObject(
-00006880: 6275 636b 6574 5f75 7269 3d62 7563 6b65  bucket_uri=bucke
-00006890: 745f 7572 692c 2063 6f6e 7465 6e74 733d  t_uri, contents=
-000068a0: 636f 6e74 656e 7473 3129 0a20 2020 206f  contents1).    o
-000068b0: 626a 325f 7572 6920 3d20 7365 6c66 2e43  bj2_uri = self.C
-000068c0: 7265 6174 654f 626a 6563 7428 6275 636b  reateObject(buck
-000068d0: 6574 5f75 7269 3d62 7563 6b65 745f 7572  et_uri=bucket_ur
-000068e0: 692c 2063 6f6e 7465 6e74 733d 636f 6e74  i, contents=cont
-000068f0: 656e 7473 3229 0a20 2020 206c 6973 745f  ents2).    list_
-00006900: 666f 725f 6f75 7470 7574 203d 205b 5d0a  for_output = [].
-00006910: 0a20 2020 2072 6561 645f 7468 7265 6164  .    read_thread
-00006920: 203d 2074 6872 6561 6469 6e67 2e54 6872   = threading.Thr
-00006930: 6561 6428 7461 7267 6574 3d5f 5265 6164  ead(target=_Read
-00006940: 436f 6e74 656e 7473 4672 6f6d 4669 666f  ContentsFromFifo
-00006950: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00006960: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006970: 2020 2020 2061 7267 733d 2866 6966 6f5f       args=(fifo_
-00006980: 7061 7468 2c20 6c69 7374 5f66 6f72 5f6f  path, list_for_o
-00006990: 7574 7075 7429 290a 2020 2020 7265 6164  utput)).    read
-000069a0: 5f74 6872 6561 642e 7374 6172 7428 290a  _thread.start().
-000069b0: 2020 2020 7772 6974 655f 7468 7265 6164      write_thread
-000069c0: 203d 2074 6872 6561 6469 6e67 2e54 6872   = threading.Thr
-000069d0: 6561 6428 0a20 2020 2020 2020 2074 6172  ead(.        tar
-000069e0: 6765 743d 7365 6c66 2e5f 4370 5769 7468  get=self._CpWith
-000069f0: 4669 666f 5669 6147 7355 7469 6c41 6e64  FifoViaGsUtilAnd
-00006a00: 4170 7065 6e64 4f75 7470 7574 546f 4c69  AppendOutputToLi
-00006a10: 7374 2c0a 2020 2020 2020 2020 6172 6773  st,.        args
-00006a20: 3d28 2873 7572 6928 6f62 6a31 5f75 7269  =((suri(obj1_uri
-00006a30: 292c 2073 7572 6928 6f62 6a32 5f75 7269  ), suri(obj2_uri
-00006a40: 2929 2c20 6669 666f 5f70 6174 682c 205b  )), fifo_path, [
-00006a50: 5d29 290a 2020 2020 7772 6974 655f 7468  ])).    write_th
-00006a60: 7265 6164 2e73 7461 7274 2829 0a20 2020  read.start().   
-00006a70: 2077 7269 7465 5f74 6872 6561 642e 6a6f   write_thread.jo
-00006a80: 696e 2831 3230 290a 2020 2020 7265 6164  in(120).    read
-00006a90: 5f74 6872 6561 642e 6a6f 696e 2831 3230  _thread.join(120
-00006aa0: 290a 2020 2020 6966 206e 6f74 206c 6973  ).    if not lis
-00006ab0: 745f 666f 725f 6f75 7470 7574 3a0a 2020  t_for_output:.  
-00006ac0: 2020 2020 7365 6c66 2e66 6169 6c28 2752      self.fail('R
-00006ad0: 6561 6469 6e67 2f77 7269 7469 6e67 2074  eading/writing t
-00006ae0: 6f20 7468 6520 6669 666f 2074 696d 6564  o the fifo timed
-00006af0: 206f 7574 2e27 290a 2020 2020 7365 6c66   out.').    self
-00006b00: 2e61 7373 6572 7449 6e28 636f 6e74 656e  .assertIn(conten
-00006b10: 7473 312c 206c 6973 745f 666f 725f 6f75  ts1, list_for_ou
-00006b20: 7470 7574 5b30 5d29 0a20 2020 2073 656c  tput[0]).    sel
-00006b30: 662e 6173 7365 7274 496e 2863 6f6e 7465  f.assertIn(conte
-00006b40: 6e74 7332 2c20 6c69 7374 5f66 6f72 5f6f  nts2, list_for_o
-00006b50: 7574 7075 745b 305d 290a 0a20 2040 5365  utput[0])..  @Se
-00006b60: 7175 656e 7469 616c 416e 6450 6172 616c  quentialAndParal
-00006b70: 6c65 6c54 7261 6e73 6665 720a 2020 6465  lelTransfer.  de
-00006b80: 6620 7465 7374 5f73 7472 6561 6d69 6e67  f test_streaming
-00006b90: 2873 656c 6629 3a0a 2020 2020 6275 636b  (self):.    buck
-00006ba0: 6574 5f75 7269 203d 2073 656c 662e 4372  et_uri = self.Cr
-00006bb0: 6561 7465 4275 636b 6574 2829 0a20 2020  eateBucket().   
-00006bc0: 2073 7464 6572 7220 3d20 7365 6c66 2e52   stderr = self.R
-00006bd0: 756e 4773 5574 696c 280a 2020 2020 2020  unGsUtil(.      
-00006be0: 2020 5b27 6370 272c 2027 2d27 2c20 2725    ['cp', '-', '%
-00006bf0: 7327 2025 2073 7572 6928 6275 636b 6574  s' % suri(bucket
-00006c00: 5f75 7269 2c20 2766 6f6f 2729 5d2c 0a20  _uri, 'foo')],. 
-00006c10: 2020 2020 2020 2073 7464 696e 3d27 6261         stdin='ba
-00006c20: 7227 2c0a 2020 2020 2020 2020 7265 7475  r',.        retu
-00006c30: 726e 5f73 7464 6572 723d 5472 7565 290a  rn_stderr=True).
-00006c40: 2020 2020 7365 6c66 2e61 7373 6572 7449      self.assertI
-00006c50: 6e28 2743 6f70 7969 6e67 2066 726f 6d20  n('Copying from 
-00006c60: 3c53 5444 494e 3e27 2c20 7374 6465 7272  <STDIN>', stderr
-00006c70: 290a 2020 2020 6b65 795f 7572 6920 3d20  ).    key_uri = 
-00006c80: 7365 6c66 2e53 746f 7261 6765 5572 6943  self.StorageUriC
-00006c90: 6c6f 6e65 5265 706c 6163 654e 616d 6528  loneReplaceName(
-00006ca0: 6275 636b 6574 5f75 7269 2c20 2766 6f6f  bucket_uri, 'foo
-00006cb0: 2729 0a20 2020 2073 656c 662e 6173 7365  ').    self.asse
-00006cc0: 7274 4571 7561 6c28 6b65 795f 7572 692e  rtEqual(key_uri.
-00006cd0: 6765 745f 636f 6e74 656e 7473 5f61 735f  get_contents_as_
-00006ce0: 7374 7269 6e67 2829 2c20 6227 6261 7227  string(), b'bar'
-00006cf0: 290a 0a20 2040 756e 6974 7465 7374 2e73  )..  @unittest.s
-00006d00: 6b69 7049 6628 4953 5f57 494e 444f 5753  kipIf(IS_WINDOWS
-00006d10: 2c20 276f 732e 6d6b 6669 666f 206e 6f74  , 'os.mkfifo not
-00006d20: 2061 7661 696c 6162 6c65 206f 6e20 5769   available on Wi
-00006d30: 6e64 6f77 732e 2729 0a20 2040 5365 7175  ndows.').  @Sequ
-00006d40: 656e 7469 616c 416e 6450 6172 616c 6c65  entialAndParalle
-00006d50: 6c54 7261 6e73 6665 720a 2020 6465 6620  lTransfer.  def 
-00006d60: 7465 7374 5f73 7472 6561 6d69 6e67 5f66  test_streaming_f
-00006d70: 726f 6d5f 6669 666f 5f74 6f5f 6f62 6a65  rom_fifo_to_obje
-00006d80: 6374 2873 656c 6629 3a0a 2020 2020 6275  ct(self):.    bu
-00006d90: 636b 6574 5f75 7269 203d 2073 656c 662e  cket_uri = self.
-00006da0: 4372 6561 7465 4275 636b 6574 2829 0a20  CreateBucket(). 
-00006db0: 2020 2066 6966 6f5f 7061 7468 203d 2073     fifo_path = s
-00006dc0: 656c 662e 4372 6561 7465 5465 6d70 4669  elf.CreateTempFi
-00006dd0: 666f 2829 0a20 2020 206f 626a 6563 745f  fo().    object_
-00006de0: 6e61 6d65 203d 2027 666f 6f27 0a20 2020  name = 'foo'.   
-00006df0: 206f 626a 6563 745f 636f 6e74 656e 7473   object_contents
-00006e00: 203d 2062 2762 6172 270a 2020 2020 6c69   = b'bar'.    li
-00006e10: 7374 5f66 6f72 5f6f 7574 7075 7420 3d20  st_for_output = 
-00006e20: 5b5d 0a0a 2020 2020 2320 5374 6172 7420  []..    # Start 
-00006e30: 7772 6974 6572 2069 6e20 7468 6520 6261  writer in the ba
-00006e40: 636b 6772 6f75 6e64 2c20 7768 6963 6820  ckground, which 
-00006e50: 776f 6e27 7420 6669 6e69 7368 2075 6e74  won't finish unt
-00006e60: 696c 2061 2063 6f72 7265 7370 6f6e 6469  il a correspondi
-00006e70: 6e67 0a20 2020 2023 2072 6561 6420 6f70  ng.    # read op
-00006e80: 6572 6174 696f 6e20 6973 2070 6572 666f  eration is perfo
-00006e90: 726d 6564 206f 6e20 7468 6520 6669 666f  rmed on the fifo
-00006ea0: 2e0a 2020 2020 7772 6974 655f 7468 7265  ..    write_thre
-00006eb0: 6164 203d 2074 6872 6561 6469 6e67 2e54  ad = threading.T
-00006ec0: 6872 6561 6428 7461 7267 6574 3d5f 5772  hread(target=_Wr
-00006ed0: 6974 6543 6f6e 7465 6e74 7354 6f46 6966  iteContentsToFif
-00006ee0: 6f2c 0a20 2020 2020 2020 2020 2020 2020  o,.             
+00005d20: 2065 7870 6563 7465 645f 7374 6174 7573   expected_status
+00005d30: 3d31 2c0a 2020 2020 2020 2020 2020 2020  =1,.            
+00005d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005d50: 2020 7265 7475 726e 5f73 7464 6572 723d    return_stderr=
+00005d60: 5472 7565 290a 2020 2020 2020 6966 2073  True).      if s
+00005d70: 656c 662e 5f75 7365 5f67 636c 6f75 645f  elf._use_gcloud_
+00005d80: 7374 6f72 6167 653a 0a20 2020 2020 2020  storage:.       
+00005d90: 2073 656c 662e 6173 7365 7274 496e 2827   self.assertIn('
+00005da0: 6e6f 7420 666f 756e 643a 2034 3034 272c  not found: 404',
+00005db0: 2073 7464 6572 7229 0a20 2020 2020 2065   stderr).      e
+00005dc0: 6c73 653a 0a20 2020 2020 2020 2073 656c  lse:.        sel
+00005dd0: 662e 6173 7365 7274 496e 2827 646f 6573  f.assertIn('does
+00005de0: 206e 6f74 2065 7869 7374 272c 2073 7464   not exist', std
+00005df0: 6572 7229 0a0a 2020 2020 5f43 6865 636b  err)..    _Check
+00005e00: 2829 0a0a 2020 6465 6620 7465 7374 5f63  ()..  def test_c
+00005e10: 6f70 795f 696e 5f63 6c6f 7564 5f6e 6f63  opy_in_cloud_noc
+00005e20: 6c6f 6262 6572 2873 656c 6629 3a0a 2020  lobber(self):.  
+00005e30: 2020 6275 636b 6574 315f 7572 6920 3d20    bucket1_uri = 
+00005e40: 7365 6c66 2e43 7265 6174 6542 7563 6b65  self.CreateBucke
+00005e50: 7428 290a 2020 2020 6275 636b 6574 325f  t().    bucket2_
+00005e60: 7572 6920 3d20 7365 6c66 2e43 7265 6174  uri = self.Creat
+00005e70: 6542 7563 6b65 7428 290a 2020 2020 6b65  eBucket().    ke
+00005e80: 795f 7572 6920 3d20 7365 6c66 2e43 7265  y_uri = self.Cre
+00005e90: 6174 654f 626a 6563 7428 6275 636b 6574  ateObject(bucket
+00005ea0: 5f75 7269 3d62 7563 6b65 7431 5f75 7269  _uri=bucket1_uri
+00005eb0: 2c20 636f 6e74 656e 7473 3d62 2766 6f6f  , contents=b'foo
+00005ec0: 2729 0a20 2020 2073 7464 6572 7220 3d20  ').    stderr = 
+00005ed0: 7365 6c66 2e52 756e 4773 5574 696c 280a  self.RunGsUtil(.
+00005ee0: 2020 2020 2020 2020 5b27 6370 272c 2073          ['cp', s
+00005ef0: 7572 6928 6b65 795f 7572 6929 2c20 7375  uri(key_uri), su
+00005f00: 7269 2862 7563 6b65 7432 5f75 7269 295d  ri(bucket2_uri)]
+00005f10: 2c20 7265 7475 726e 5f73 7464 6572 723d  , return_stderr=
+00005f20: 5472 7565 290a 2020 2020 2320 5265 7772  True).    # Rewr
+00005f30: 6974 6520 4150 4920 6d61 7920 6f75 7470  ite API may outp
+00005f40: 7574 2061 6e20 6164 6469 7469 6f6e 616c  ut an additional
+00005f50: 2027 436f 7079 696e 6727 2070 726f 6772   'Copying' progr
+00005f60: 6573 7320 6e6f 7469 6669 6361 7469 6f6e  ess notification
+00005f70: 2e0a 2020 2020 7365 6c66 2e61 7373 6572  ..    self.asser
+00005f80: 7447 7265 6174 6572 4571 7561 6c28 7374  tGreaterEqual(st
+00005f90: 6465 7272 2e63 6f75 6e74 2827 436f 7079  derr.count('Copy
+00005fa0: 696e 6727 292c 2031 290a 2020 2020 7365  ing'), 1).    se
+00005fb0: 6c66 2e61 7373 6572 744c 6573 7345 7175  lf.assertLessEqu
+00005fc0: 616c 2873 7464 6572 722e 636f 756e 7428  al(stderr.count(
+00005fd0: 2743 6f70 7969 6e67 2729 2c20 3229 0a20  'Copying'), 2). 
+00005fe0: 2020 2073 7464 6572 7220 3d20 7365 6c66     stderr = self
+00005ff0: 2e52 756e 4773 5574 696c 280a 2020 2020  .RunGsUtil(.    
+00006000: 2020 2020 5b27 6370 272c 2027 2d6e 272c      ['cp', '-n',
+00006010: 2073 7572 6928 6b65 795f 7572 6929 2c0a   suri(key_uri),.
+00006020: 2020 2020 2020 2020 2073 7572 6928 6275           suri(bu
+00006030: 636b 6574 325f 7572 6929 5d2c 2072 6574  cket2_uri)], ret
+00006040: 7572 6e5f 7374 6465 7272 3d54 7275 6529  urn_stderr=True)
+00006050: 0a20 2020 2073 656c 662e 6173 7365 7274  .    self.assert
+00006060: 5265 6765 7828 0a20 2020 2020 2020 2073  Regex(.        s
+00006070: 7464 6572 722c 2072 2753 6b69 7070 696e  tderr, r'Skippin
+00006080: 672e 2a3a 207b 7d27 2e66 6f72 6d61 7428  g.*: {}'.format(
+00006090: 7375 7269 2862 7563 6b65 7432 5f75 7269  suri(bucket2_uri
+000060a0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+000060b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000060c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000060d0: 6b65 795f 7572 692e 6f62 6a65 6374 5f6e  key_uri.object_n
+000060e0: 616d 6529 2929 0a0a 2020 4053 6571 7565  ame)))..  @Seque
+000060f0: 6e74 6961 6c41 6e64 5061 7261 6c6c 656c  ntialAndParallel
+00006100: 5472 616e 7366 6572 0a20 2040 536b 6970  Transfer.  @Skip
+00006110: 466f 7258 4d4c 2827 426f 746f 206c 6962  ForXML('Boto lib
+00006120: 7261 7279 2064 6f65 7320 6e6f 7420 6861  rary does not ha
+00006130: 6e64 6c65 206f 626a 6563 7473 2077 6974  ndle objects wit
+00006140: 6820 2e2e 2069 6e20 7468 656d 2e27 290a  h .. in them.').
+00006150: 2020 6465 6620 7465 7374 5f73 6b69 705f    def test_skip_
+00006160: 6f62 6a65 6374 5f77 6974 685f 7061 7265  object_with_pare
+00006170: 6e74 5f64 6972 6563 746f 7279 5f73 796d  nt_directory_sym
+00006180: 626f 6c5f 696e 5f6e 616d 6528 7365 6c66  bol_in_name(self
+00006190: 293a 0a20 2020 2062 7563 6b65 745f 7572  ):.    bucket_ur
+000061a0: 6920 3d20 7365 6c66 2e43 7265 6174 6542  i = self.CreateB
+000061b0: 7563 6b65 7428 290a 2020 2020 6b65 795f  ucket().    key_
+000061c0: 7572 6920 3d20 7365 6c66 2e43 7265 6174  uri = self.Creat
+000061d0: 654f 626a 6563 7428 6275 636b 6574 5f75  eObject(bucket_u
+000061e0: 7269 3d62 7563 6b65 745f 7572 692c 0a20  ri=bucket_uri,. 
+000061f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006200: 2020 2020 2020 2020 2020 2020 2020 206f                 o
+00006210: 626a 6563 745f 6e61 6d65 3d27 6469 722f  bject_name='dir/
+00006220: 2e2e 2f2e 2e2f 2e2e 2f66 696c 6527 2c0a  ../../../file',.
+00006230: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006240: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006250: 636f 6e74 656e 7473 3d62 2764 6174 6127  contents=b'data'
+00006260: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00006270: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006280: 2020 7072 6566 6572 5f6a 736f 6e5f 6170    prefer_json_ap
+00006290: 693d 5472 7565 290a 2020 2020 7365 6c66  i=True).    self
+000062a0: 2e43 7265 6174 654f 626a 6563 7428 6275  .CreateObject(bu
+000062b0: 636b 6574 5f75 7269 3d62 7563 6b65 745f  cket_uri=bucket_
+000062c0: 7572 692c 0a20 2020 2020 2020 2020 2020  uri,.           
+000062d0: 2020 2020 2020 2020 2020 206f 626a 6563             objec
+000062e0: 745f 6e61 6d65 3d27 6669 6c65 3227 2c0a  t_name='file2',.
+000062f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006300: 2020 2020 2020 636f 6e74 656e 7473 3d62        contents=b
+00006310: 2764 6174 6127 290a 2020 2020 6469 7265  'data').    dire
+00006320: 6374 6f72 7920 3d20 7365 6c66 2e43 7265  ctory = self.Cre
+00006330: 6174 6554 656d 7044 6972 2829 0a0a 2020  ateTempDir()..  
+00006340: 2020 7374 6465 7272 203d 2073 656c 662e    stderr = self.
+00006350: 5275 6e47 7355 7469 6c28 0a20 2020 2020  RunGsUtil(.     
+00006360: 2020 205b 2763 7027 2c20 272d 7227 2c20     ['cp', '-r', 
+00006370: 7375 7269 2862 7563 6b65 745f 7572 6929  suri(bucket_uri)
+00006380: 2c20 6469 7265 6374 6f72 795d 2c20 7265  , directory], re
+00006390: 7475 726e 5f73 7464 6572 723d 5472 7565  turn_stderr=True
+000063a0: 290a 0a20 2020 2023 2042 7920 6465 6661  )..    # By defa
+000063b0: 756c 742c 2064 656c 6574 6573 2069 6e20  ult, deletes in 
+000063c0: 7468 6520 7465 6172 446f 776e 206d 6574  the tearDown met
+000063d0: 686f 6420 7275 6e20 7769 7468 2074 6865  hod run with the
+000063e0: 2058 4d4c 2041 5049 2e20 426f 746f 0a20   XML API. Boto. 
+000063f0: 2020 2023 2064 6f65 7320 6e6f 7420 6861     # does not ha
+00006400: 6e64 6c65 206e 616d 6573 2077 6974 6820  ndle names with 
+00006410: 272e 2e27 2c20 736f 2077 6520 6e65 6564  '..', so we need
+00006420: 2074 6f20 6465 6c65 7465 2070 726f 626c   to delete probl
+00006430: 656d 6174 6963 0a20 2020 2023 206f 626a  ematic.    # obj
+00006440: 6563 7473 2077 6974 6820 7468 6520 6a73  ects with the js
+00006450: 6f6e 2041 5049 2e20 4465 6c65 7465 2068  on API. Delete h
+00006460: 6170 7065 6e73 2062 6566 6f72 6520 6173  appens before as
+00006470: 7365 7274 696f 6e73 2c20 696e 2063 6173  sertions, in cas
+00006480: 6520 7468 6579 0a20 2020 2023 2072 6169  e they.    # rai
+00006490: 7365 2065 7272 6f72 7320 616e 6420 7072  se errors and pr
+000064a0: 6576 656e 7420 636c 6561 6e75 702e 0a20  event cleanup.. 
+000064b0: 2020 2073 656c 662e 6a73 6f6e 5f61 7069     self.json_api
+000064c0: 2e44 656c 6574 654f 626a 6563 7428 6275  .DeleteObject(bu
+000064d0: 636b 6574 5f75 7269 2e62 7563 6b65 745f  cket_uri.bucket_
+000064e0: 6e61 6d65 2c20 6b65 795f 7572 692e 6f62  name, key_uri.ob
+000064f0: 6a65 6374 5f6e 616d 6529 0a0a 2020 2020  ject_name)..    
+00006500: 7365 6c66 2e61 7373 6572 7449 6e28 0a20  self.assertIn(. 
+00006510: 2020 2020 2020 2027 536b 6970 7069 6e67         'Skipping
+00006520: 2063 6f70 7920 6f66 2073 6f75 7263 6520   copy of source 
+00006530: 5552 4c20 2573 2062 6563 6175 7365 2069  URL %s because i
+00006540: 7420 776f 756c 6420 6265 2063 6f70 6965  t would be copie
+00006550: 6420 270a 2020 2020 2020 2020 276f 7574  d '.        'out
+00006560: 7369 6465 2074 6865 2065 7870 6563 7465  side the expecte
+00006570: 6420 6465 7374 696e 6174 696f 6e20 6469  d destination di
+00006580: 7265 6374 6f72 793a 2025 732e 2720 250a  rectory: %s.' %.
+00006590: 2020 2020 2020 2020 2873 7572 6928 6b65          (suri(ke
+000065a0: 795f 7572 6929 2c20 6f73 2e70 6174 682e  y_uri), os.path.
+000065b0: 6162 7370 6174 6828 6469 7265 6374 6f72  abspath(director
+000065c0: 7929 292c 2073 7464 6572 7229 0a20 2020  y)), stderr).   
+000065d0: 2073 656c 662e 6173 7365 7274 4661 6c73   self.assertFals
+000065e0: 6528 6f73 2e70 6174 682e 6578 6973 7473  e(os.path.exists
+000065f0: 286f 732e 7061 7468 2e6a 6f69 6e28 6469  (os.path.join(di
+00006600: 7265 6374 6f72 792c 2027 6669 6c65 2729  rectory, 'file')
+00006610: 2929 0a20 2020 2073 656c 662e 6173 7365  )).    self.asse
+00006620: 7274 5472 7565 280a 2020 2020 2020 2020  rtTrue(.        
+00006630: 6f73 2e70 6174 682e 6578 6973 7473 286f  os.path.exists(o
+00006640: 732e 7061 7468 2e6a 6f69 6e28 6469 7265  s.path.join(dire
+00006650: 6374 6f72 792c 2062 7563 6b65 745f 7572  ctory, bucket_ur
+00006660: 692e 6275 636b 6574 5f6e 616d 652c 0a20  i.bucket_name,. 
+00006670: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006680: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006690: 2020 2027 6669 6c65 3227 2929 290a 0a20     'file2'))).. 
+000066a0: 2040 5365 7175 656e 7469 616c 416e 6450   @SequentialAndP
+000066b0: 6172 616c 6c65 6c54 7261 6e73 6665 720a  arallelTransfer.
+000066c0: 2020 4053 6b69 7046 6f72 584d 4c28 2742    @SkipForXML('B
+000066d0: 6f74 6f20 6c69 6272 6172 7920 646f 6573  oto library does
+000066e0: 206e 6f74 2068 616e 646c 6520 6f62 6a65   not handle obje
+000066f0: 6374 7320 7769 7468 202e 2e20 696e 2074  cts with .. in t
+00006700: 6865 6d2e 2729 0a20 2064 6566 2074 6573  hem.').  def tes
+00006710: 745f 736b 6970 5f70 6172 656e 745f 6469  t_skip_parent_di
+00006720: 7265 6374 6f72 795f 7379 6d62 6f6c 5f69  rectory_symbol_i
+00006730: 6e5f 6e61 6d65 5f69 735f 7265 666c 6563  n_name_is_reflec
+00006740: 7465 645f 696e 5f6d 616e 6966 6573 7428  ted_in_manifest(
+00006750: 7365 6c66 293a 0a20 2020 2062 7563 6b65  self):.    bucke
+00006760: 745f 7572 6920 3d20 7365 6c66 2e43 7265  t_uri = self.Cre
+00006770: 6174 6542 7563 6b65 7428 290a 2020 2020  ateBucket().    
+00006780: 6b65 795f 7572 6920 3d20 7365 6c66 2e43  key_uri = self.C
+00006790: 7265 6174 654f 626a 6563 7428 6275 636b  reateObject(buck
+000067a0: 6574 5f75 7269 3d62 7563 6b65 745f 7572  et_uri=bucket_ur
+000067b0: 692c 0a20 2020 2020 2020 2020 2020 2020  i,.             
+000067c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000067d0: 2020 206f 626a 6563 745f 6e61 6d65 3d27     object_name='
+000067e0: 6469 722f 2e2e 2f2e 2e2f 2e2e 2f66 696c  dir/../../../fil
+000067f0: 6527 2c0a 2020 2020 2020 2020 2020 2020  e',.            
+00006800: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006810: 2020 2020 636f 6e74 656e 7473 3d62 2764      contents=b'd
+00006820: 6174 6127 2c0a 2020 2020 2020 2020 2020  ata',.          
+00006830: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006840: 2020 2020 2020 7072 6566 6572 5f6a 736f        prefer_jso
+00006850: 6e5f 6170 693d 5472 7565 290a 2020 2020  n_api=True).    
+00006860: 6469 7265 6374 6f72 7920 3d20 7365 6c66  directory = self
+00006870: 2e43 7265 6174 6554 656d 7044 6972 2829  .CreateTempDir()
+00006880: 0a20 2020 206c 6f67 5f70 6174 6820 3d20  .    log_path = 
+00006890: 6f73 2e70 6174 682e 6a6f 696e 2864 6972  os.path.join(dir
+000068a0: 6563 746f 7279 2c20 276c 6f67 2e63 7376  ectory, 'log.csv
+000068b0: 2729 0a0a 2020 2020 7374 6465 7272 203d  ')..    stderr =
+000068c0: 2073 656c 662e 5275 6e47 7355 7469 6c28   self.RunGsUtil(
+000068d0: 0a20 2020 2020 2020 205b 2763 7027 2c20  .        ['cp', 
+000068e0: 272d 7227 2c20 272d 4c27 2c20 6c6f 675f  '-r', '-L', log_
+000068f0: 7061 7468 2c0a 2020 2020 2020 2020 2073  path,.         s
+00006900: 7572 6928 6275 636b 6574 5f75 7269 292c  uri(bucket_uri),
+00006910: 2064 6972 6563 746f 7279 5d2c 0a20 2020   directory],.   
+00006920: 2020 2020 2072 6574 7572 6e5f 7374 6465       return_stde
+00006930: 7272 3d54 7275 6529 0a0a 2020 2020 2320  rr=True)..    # 
+00006940: 4279 2064 6566 6175 6c74 2c20 6465 6c65  By default, dele
+00006950: 7465 7320 696e 2074 6865 2074 6561 7244  tes in the tearD
+00006960: 6f77 6e20 6d65 7468 6f64 2072 756e 2077  own method run w
+00006970: 6974 6820 7468 6520 584d 4c20 4150 492e  ith the XML API.
+00006980: 2042 6f74 6f0a 2020 2020 2320 646f 6573   Boto.    # does
+00006990: 206e 6f74 2068 616e 646c 6520 6e61 6d65   not handle name
+000069a0: 7320 7769 7468 2027 2e2e 272c 2073 6f20  s with '..', so 
+000069b0: 7765 206e 6565 6420 746f 2064 656c 6574  we need to delet
+000069c0: 6520 7072 6f62 6c65 6d61 7469 630a 2020  e problematic.  
+000069d0: 2020 2320 6f62 6a65 6374 7320 7769 7468    # objects with
+000069e0: 2074 6865 206a 736f 6e20 4150 492e 2044   the json API. D
+000069f0: 656c 6574 6520 6861 7070 656e 7320 6265  elete happens be
+00006a00: 666f 7265 2061 7373 6572 7469 6f6e 732c  fore assertions,
+00006a10: 2069 6e20 6361 7365 2074 6865 790a 2020   in case they.  
+00006a20: 2020 2320 7261 6973 6520 6572 726f 7273    # raise errors
+00006a30: 2061 6e64 2070 7265 7665 6e74 2063 6c65   and prevent cle
+00006a40: 616e 7570 2e0a 2020 2020 7365 6c66 2e6a  anup..    self.j
+00006a50: 736f 6e5f 6170 692e 4465 6c65 7465 4f62  son_api.DeleteOb
+00006a60: 6a65 6374 2862 7563 6b65 745f 7572 692e  ject(bucket_uri.
+00006a70: 6275 636b 6574 5f6e 616d 652c 206b 6579  bucket_name, key
+00006a80: 5f75 7269 2e6f 626a 6563 745f 6e61 6d65  _uri.object_name
+00006a90: 290a 0a20 2020 2073 656c 662e 6173 7365  )..    self.asse
+00006aa0: 7274 496e 280a 2020 2020 2020 2020 2753  rtIn(.        'S
+00006ab0: 6b69 7070 696e 6720 636f 7079 206f 6620  kipping copy of 
+00006ac0: 736f 7572 6365 2055 524c 2025 7320 6265  source URL %s be
+00006ad0: 6361 7573 6520 6974 2077 6f75 6c64 2062  cause it would b
+00006ae0: 6520 636f 7069 6564 2027 0a20 2020 2020  e copied '.     
+00006af0: 2020 2027 6f75 7473 6964 6520 7468 6520     'outside the 
+00006b00: 6578 7065 6374 6564 2064 6573 7469 6e61  expected destina
+00006b10: 7469 6f6e 2064 6972 6563 746f 7279 3a20  tion directory: 
+00006b20: 2573 2e27 2025 0a20 2020 2020 2020 2028  %s.' %.        (
+00006b30: 7375 7269 286b 6579 5f75 7269 292c 206f  suri(key_uri), o
+00006b40: 732e 7061 7468 2e61 6273 7061 7468 2864  s.path.abspath(d
+00006b50: 6972 6563 746f 7279 2929 2c20 7374 6465  irectory)), stde
+00006b60: 7272 290a 2020 2020 7365 6c66 2e61 7373  rr).    self.ass
+00006b70: 6572 7446 616c 7365 286f 732e 7061 7468  ertFalse(os.path
+00006b80: 2e65 7869 7374 7328 6f73 2e70 6174 682e  .exists(os.path.
+00006b90: 6a6f 696e 2864 6972 6563 746f 7279 2c20  join(directory, 
+00006ba0: 2766 696c 6527 2929 290a 2020 2020 7769  'file'))).    wi
+00006bb0: 7468 206f 7065 6e28 6c6f 675f 7061 7468  th open(log_path
+00006bc0: 2c20 2772 2729 2061 7320 663a 0a20 2020  , 'r') as f:.   
+00006bd0: 2020 206c 696e 6573 203d 2066 2e72 6561     lines = f.rea
+00006be0: 646c 696e 6573 2829 0a20 2020 2020 2072  dlines().      r
+00006bf0: 6573 756c 7473 203d 206c 696e 6573 5b31  esults = lines[1
+00006c00: 5d2e 7374 7269 7028 292e 7370 6c69 7428  ].strip().split(
+00006c10: 272c 2729 0a20 2020 2020 2073 656c 662e  ',').      self.
+00006c20: 6173 7365 7274 4571 7561 6c28 7265 7375  assertEqual(resu
+00006c30: 6c74 735b 305d 2c20 7375 7269 286b 6579  lts[0], suri(key
+00006c40: 5f75 7269 2929 2020 2320 5468 6520 2753  _uri))  # The 'S
+00006c50: 6f75 7263 6527 2063 6f6c 756d 6e2e 0a20  ource' column.. 
+00006c60: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+00006c70: 4571 7561 6c28 7265 7375 6c74 735b 385d  Equal(results[8]
+00006c80: 2c20 2773 6b69 7027 2920 2023 2054 6865  , 'skip')  # The
+00006c90: 2027 5265 7375 6c74 2720 636f 6c75 6d6e   'Result' column
+00006ca0: 2e0a 0a20 2040 5365 7175 656e 7469 616c  ...  @Sequential
+00006cb0: 416e 6450 6172 616c 6c65 6c54 7261 6e73  AndParallelTrans
+00006cc0: 6665 720a 2020 4053 6b69 7046 6f72 584d  fer.  @SkipForXM
+00006cd0: 4c28 2742 6f74 6f20 6c69 6272 6172 7920  L('Boto library 
+00006ce0: 646f 6573 206e 6f74 2068 616e 646c 6520  does not handle 
+00006cf0: 6f62 6a65 6374 7320 7769 7468 202e 2e20  objects with .. 
+00006d00: 696e 2074 6865 6d2e 2729 0a20 2040 756e  in them.').  @un
+00006d10: 6974 7465 7374 2e73 6b69 7049 6628 4953  ittest.skipIf(IS
+00006d20: 5f57 494e 444f 5753 2c20 276f 732e 7379  _WINDOWS, 'os.sy
+00006d30: 6d6c 696e 6b28 2920 6973 206e 6f74 2061  mlink() is not a
+00006d40: 7661 696c 6162 6c65 206f 6e20 5769 6e64  vailable on Wind
+00006d50: 6f77 732e 2729 0a20 2064 6566 2074 6573  ows.').  def tes
+00006d60: 745f 736b 6970 5f70 6172 656e 745f 6469  t_skip_parent_di
+00006d70: 7265 6374 6f72 795f 7379 6d62 6f6c 5f6f  rectory_symbol_o
+00006d80: 626a 6563 745f 7769 7468 5f73 796d 6c69  bject_with_symli
+00006d90: 6e6b 5f64 6573 7469 6e61 7469 6f6e 2873  nk_destination(s
+00006da0: 656c 6629 3a0a 2020 2020 6275 636b 6574  elf):.    bucket
+00006db0: 5f75 7269 203d 2073 656c 662e 4372 6561  _uri = self.Crea
+00006dc0: 7465 4275 636b 6574 2829 0a20 2020 206b  teBucket().    k
+00006dd0: 6579 5f75 7269 203d 2073 656c 662e 4372  ey_uri = self.Cr
+00006de0: 6561 7465 4f62 6a65 6374 2862 7563 6b65  eateObject(bucke
+00006df0: 745f 7572 693d 6275 636b 6574 5f75 7269  t_uri=bucket_uri
+00006e00: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00006e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006e20: 2020 6f62 6a65 6374 5f6e 616d 653d 2764    object_name='d
+00006e30: 6972 2f2e 2e2f 2e2e 2f2e 2e2f 6669 6c65  ir/../../../file
+00006e40: 272c 0a20 2020 2020 2020 2020 2020 2020  ',.             
+00006e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006e60: 2020 2063 6f6e 7465 6e74 733d 6227 6461     contents=b'da
+00006e70: 7461 272c 0a20 2020 2020 2020 2020 2020  ta',.           
+00006e80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006e90: 2020 2020 2070 7265 6665 725f 6a73 6f6e       prefer_json
+00006ea0: 5f61 7069 3d54 7275 6529 0a20 2020 2073  _api=True).    s
+00006eb0: 6563 6f6e 645f 6b65 795f 7572 6920 3d20  econd_key_uri = 
+00006ec0: 7365 6c66 2e43 7265 6174 654f 626a 6563  self.CreateObjec
+00006ed0: 7428 6275 636b 6574 5f75 7269 3d62 7563  t(bucket_uri=buc
+00006ee0: 6b65 745f 7572 692c 0a20 2020 2020 2020  ket_uri,.       
 00006ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006f00: 2020 2020 2020 2061 7267 733d 286f 626a         args=(obj
-00006f10: 6563 745f 636f 6e74 656e 7473 2c20 6669  ect_contents, fi
-00006f20: 666f 5f70 6174 6829 290a 2020 2020 7772  fo_path)).    wr
-00006f30: 6974 655f 7468 7265 6164 2e73 7461 7274  ite_thread.start
-00006f40: 2829 0a20 2020 2023 2054 6865 2066 6966  ().    # The fif
-00006f50: 6f20 7265 7175 6972 6573 2062 6f74 6820  o requires both 
-00006f60: 6120 7065 6e64 696e 6720 7265 6164 2061  a pending read a
-00006f70: 6e64 2077 7269 7465 2062 6566 6f72 6520  nd write before 
-00006f80: 6569 7468 6572 206f 7065 7261 7469 6f6e  either operation
-00006f90: 0a20 2020 2023 2077 696c 6c20 636f 6d70  .    # will comp
-00006fa0: 6c65 7465 2e20 5265 6761 7264 6c65 7373  lete. Regardless
-00006fb0: 206f 6620 7768 6963 6820 6f70 6572 6174   of which operat
-00006fc0: 696f 6e20 6f63 6375 7273 2066 6972 7374  ion occurs first
-00006fd0: 2c20 7468 650a 2020 2020 2320 636f 7272  , the.    # corr
-00006fe0: 6573 706f 6e64 696e 6720 7375 6273 6571  esponding subseq
-00006ff0: 7565 6e74 206f 7065 7261 7469 6f6e 2077  uent operation w
-00007000: 696c 6c20 756e 626c 6f63 6b20 7468 6520  ill unblock the 
-00007010: 6669 7273 7420 6f6e 652e 0a20 2020 2023  first one..    #
-00007020: 2057 6520 7275 6e20 6773 7574 696c 2069   We run gsutil i
-00007030: 6e20 6120 7468 7265 6164 2073 6f20 7468  n a thread so th
-00007040: 6174 2069 7420 6361 6e20 7469 6d65 6f75  at it can timeou
-00007050: 7420 7261 7468 6572 2074 6861 6e20 6861  t rather than ha
-00007060: 6e67 2066 6f72 6576 6572 0a20 2020 2023  ng forever.    #
-00007070: 2069 6620 7468 6520 7772 6974 6520 7468   if the write th
-00007080: 7265 6164 2066 6169 6c73 2e0a 2020 2020  read fails..    
-00007090: 7265 6164 5f74 6872 6561 6420 3d20 7468  read_thread = th
-000070a0: 7265 6164 696e 672e 5468 7265 6164 280a  reading.Thread(.
-000070b0: 2020 2020 2020 2020 7461 7267 6574 3d73          target=s
-000070c0: 656c 662e 5f43 7057 6974 6846 6966 6f56  elf._CpWithFifoV
-000070d0: 6961 4773 5574 696c 416e 6441 7070 656e  iaGsUtilAndAppen
-000070e0: 644f 7574 7075 7454 6f4c 6973 742c 0a20  dOutputToList,. 
-000070f0: 2020 2020 2020 2061 7267 733d 2828 6669         args=((fi
-00007100: 666f 5f70 6174 682c 292c 2073 7572 6928  fo_path,), suri(
-00007110: 6275 636b 6574 5f75 7269 2c20 6f62 6a65  bucket_uri, obje
-00007120: 6374 5f6e 616d 6529 2c20 6c69 7374 5f66  ct_name), list_f
-00007130: 6f72 5f6f 7574 7075 7429 2c0a 2020 2020  or_output),.    
-00007140: 2020 2020 6b77 6172 6773 3d7b 2772 6574      kwargs={'ret
-00007150: 7572 6e5f 7374 6465 7272 273a 2054 7275  urn_stderr': Tru
-00007160: 657d 290a 2020 2020 7265 6164 5f74 6872  e}).    read_thr
-00007170: 6561 642e 7374 6172 7428 290a 0a20 2020  ead.start()..   
-00007180: 2072 6561 645f 7468 7265 6164 2e6a 6f69   read_thread.joi
-00007190: 6e28 3132 3029 0a20 2020 2077 7269 7465  n(120).    write
-000071a0: 5f74 6872 6561 642e 6a6f 696e 2831 3230  _thread.join(120
-000071b0: 290a 2020 2020 6966 206e 6f74 206c 6973  ).    if not lis
-000071c0: 745f 666f 725f 6f75 7470 7574 3a0a 2020  t_for_output:.  
-000071d0: 2020 2020 7365 6c66 2e66 6169 6c28 2752      self.fail('R
-000071e0: 6561 6469 6e67 2f77 7269 7469 6e67 2074  eading/writing t
-000071f0: 6f20 7468 6520 6669 666f 2074 696d 6564  o the fifo timed
-00007200: 206f 7574 2e27 290a 2020 2020 7365 6c66   out.').    self
-00007210: 2e61 7373 6572 7449 6e28 2743 6f70 7969  .assertIn('Copyi
-00007220: 6e67 2066 726f 6d20 6e61 6d65 6420 7069  ng from named pi
-00007230: 7065 272c 206c 6973 745f 666f 725f 6f75  pe', list_for_ou
-00007240: 7470 7574 5b30 5d29 0a0a 2020 2020 6b65  tput[0])..    ke
-00007250: 795f 7572 6920 3d20 7365 6c66 2e53 746f  y_uri = self.Sto
-00007260: 7261 6765 5572 6943 6c6f 6e65 5265 706c  rageUriCloneRepl
-00007270: 6163 654e 616d 6528 6275 636b 6574 5f75  aceName(bucket_u
-00007280: 7269 2c20 6f62 6a65 6374 5f6e 616d 6529  ri, object_name)
-00007290: 0a20 2020 2073 656c 662e 6173 7365 7274  .    self.assert
-000072a0: 4571 7561 6c28 6b65 795f 7572 692e 6765  Equal(key_uri.ge
-000072b0: 745f 636f 6e74 656e 7473 5f61 735f 7374  t_contents_as_st
-000072c0: 7269 6e67 2829 2c20 6f62 6a65 6374 5f63  ring(), object_c
-000072d0: 6f6e 7465 6e74 7329 0a0a 2020 4075 6e69  ontents)..  @uni
-000072e0: 7474 6573 742e 736b 6970 4966 2849 535f  ttest.skipIf(IS_
-000072f0: 5749 4e44 4f57 532c 2027 6f73 2e6d 6b66  WINDOWS, 'os.mkf
-00007300: 6966 6f20 6e6f 7420 6176 6169 6c61 626c  ifo not availabl
-00007310: 6520 6f6e 2057 696e 646f 7773 2e27 290a  e on Windows.').
-00007320: 2020 4053 6571 7565 6e74 6961 6c41 6e64    @SequentialAnd
-00007330: 5061 7261 6c6c 656c 5472 616e 7366 6572  ParallelTransfer
-00007340: 0a20 2064 6566 2074 6573 745f 7374 7265  .  def test_stre
-00007350: 616d 696e 675f 6672 6f6d 5f66 6966 6f5f  aming_from_fifo_
-00007360: 746f 5f73 7464 6f75 7428 7365 6c66 293a  to_stdout(self):
-00007370: 0a20 2020 2066 6966 6f5f 7061 7468 203d  .    fifo_path =
-00007380: 2073 656c 662e 4372 6561 7465 5465 6d70   self.CreateTemp
-00007390: 4669 666f 2829 0a20 2020 2063 6f6e 7465  Fifo().    conte
-000073a0: 6e74 7320 3d20 6227 6261 7227 0a20 2020  nts = b'bar'.   
-000073b0: 206c 6973 745f 666f 725f 6f75 7470 7574   list_for_output
-000073c0: 203d 205b 5d0a 0a20 2020 2077 7269 7465   = []..    write
-000073d0: 5f74 6872 6561 6420 3d20 7468 7265 6164  _thread = thread
-000073e0: 696e 672e 5468 7265 6164 2874 6172 6765  ing.Thread(targe
-000073f0: 743d 5f57 7269 7465 436f 6e74 656e 7473  t=_WriteContents
-00007400: 546f 4669 666f 2c0a 2020 2020 2020 2020  ToFifo,.        
-00007410: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007420: 2020 2020 2020 2020 2020 2020 6172 6773              args
-00007430: 3d28 636f 6e74 656e 7473 2c20 6669 666f  =(contents, fifo
-00007440: 5f70 6174 6829 290a 2020 2020 7772 6974  _path)).    writ
-00007450: 655f 7468 7265 6164 2e73 7461 7274 2829  e_thread.start()
-00007460: 0a20 2020 2072 6561 645f 7468 7265 6164  .    read_thread
-00007470: 203d 2074 6872 6561 6469 6e67 2e54 6872   = threading.Thr
-00007480: 6561 6428 0a20 2020 2020 2020 2074 6172  ead(.        tar
-00007490: 6765 743d 7365 6c66 2e5f 4370 5769 7468  get=self._CpWith
-000074a0: 4669 666f 5669 6147 7355 7469 6c41 6e64  FifoViaGsUtilAnd
-000074b0: 4170 7065 6e64 4f75 7470 7574 546f 4c69  AppendOutputToLi
-000074c0: 7374 2c0a 2020 2020 2020 2020 6172 6773  st,.        args
-000074d0: 3d28 2866 6966 6f5f 7061 7468 2c29 2c20  =((fifo_path,), 
-000074e0: 272d 272c 206c 6973 745f 666f 725f 6f75  '-', list_for_ou
-000074f0: 7470 7574 292c 0a20 2020 2020 2020 206b  tput),.        k
-00007500: 7761 7267 733d 7b27 7265 7475 726e 5f73  wargs={'return_s
-00007510: 7464 6f75 7427 3a20 5472 7565 7d29 0a20  tdout': True}). 
-00007520: 2020 2072 6561 645f 7468 7265 6164 2e73     read_thread.s
-00007530: 7461 7274 2829 0a20 2020 2072 6561 645f  tart().    read_
-00007540: 7468 7265 6164 2e6a 6f69 6e28 3132 3029  thread.join(120)
-00007550: 0a20 2020 2077 7269 7465 5f74 6872 6561  .    write_threa
-00007560: 642e 6a6f 696e 2831 3230 290a 2020 2020  d.join(120).    
-00007570: 6966 206e 6f74 206c 6973 745f 666f 725f  if not list_for_
-00007580: 6f75 7470 7574 3a0a 2020 2020 2020 7365  output:.      se
-00007590: 6c66 2e66 6169 6c28 2752 6561 6469 6e67  lf.fail('Reading
-000075a0: 2f77 7269 7469 6e67 2074 6f20 7468 6520  /writing to the 
-000075b0: 6669 666f 2074 696d 6564 206f 7574 2e27  fifo timed out.'
-000075c0: 290a 2020 2020 7365 6c66 2e61 7373 6572  ).    self.asser
-000075d0: 7445 7175 616c 286c 6973 745f 666f 725f  tEqual(list_for_
-000075e0: 6f75 7470 7574 5b30 5d2e 7374 7269 7028  output[0].strip(
-000075f0: 292e 656e 636f 6465 2827 6173 6369 6927  ).encode('ascii'
-00007600: 292c 2063 6f6e 7465 6e74 7329 0a0a 2020  ), contents)..  
-00007610: 4075 6e69 7474 6573 742e 736b 6970 4966  @unittest.skipIf
-00007620: 2849 535f 5749 4e44 4f57 532c 2027 6f73  (IS_WINDOWS, 'os
-00007630: 2e6d 6b66 6966 6f20 6e6f 7420 6176 6169  .mkfifo not avai
-00007640: 6c61 626c 6520 6f6e 2057 696e 646f 7773  lable on Windows
-00007650: 2e27 290a 2020 4053 6571 7565 6e74 6961  .').  @Sequentia
-00007660: 6c41 6e64 5061 7261 6c6c 656c 5472 616e  lAndParallelTran
-00007670: 7366 6572 0a20 2064 6566 2074 6573 745f  sfer.  def test_
-00007680: 7374 7265 616d 696e 675f 6672 6f6d 5f73  streaming_from_s
-00007690: 7464 6f75 745f 746f 5f66 6966 6f28 7365  tdout_to_fifo(se
-000076a0: 6c66 293a 0a20 2020 2066 6966 6f5f 7061  lf):.    fifo_pa
-000076b0: 7468 203d 2073 656c 662e 4372 6561 7465  th = self.Create
-000076c0: 5465 6d70 4669 666f 2829 0a20 2020 2063  TempFifo().    c
-000076d0: 6f6e 7465 6e74 7320 3d20 6227 6261 7227  ontents = b'bar'
-000076e0: 0a20 2020 206c 6973 745f 666f 725f 6f75  .    list_for_ou
-000076f0: 7470 7574 203d 205b 5d0a 2020 2020 6c69  tput = [].    li
-00007700: 7374 5f66 6f72 5f67 7375 7469 6c5f 6f75  st_for_gsutil_ou
-00007710: 7470 7574 203d 205b 5d0a 0a20 2020 2072  tput = []..    r
-00007720: 6561 645f 7468 7265 6164 203d 2074 6872  ead_thread = thr
-00007730: 6561 6469 6e67 2e54 6872 6561 6428 7461  eading.Thread(ta
-00007740: 7267 6574 3d5f 5265 6164 436f 6e74 656e  rget=_ReadConten
-00007750: 7473 4672 6f6d 4669 666f 2c0a 2020 2020  tsFromFifo,.    
-00007760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007770: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-00007780: 7267 733d 2866 6966 6f5f 7061 7468 2c20  rgs=(fifo_path, 
-00007790: 6c69 7374 5f66 6f72 5f6f 7574 7075 7429  list_for_output)
-000077a0: 290a 2020 2020 7265 6164 5f74 6872 6561  ).    read_threa
-000077b0: 642e 7374 6172 7428 290a 2020 2020 7772  d.start().    wr
-000077c0: 6974 655f 7468 7265 6164 203d 2074 6872  ite_thread = thr
-000077d0: 6561 6469 6e67 2e54 6872 6561 6428 0a20  eading.Thread(. 
-000077e0: 2020 2020 2020 2074 6172 6765 743d 7365         target=se
-000077f0: 6c66 2e5f 4370 5769 7468 4669 666f 5669  lf._CpWithFifoVi
-00007800: 6147 7355 7469 6c41 6e64 4170 7065 6e64  aGsUtilAndAppend
-00007810: 4f75 7470 7574 546f 4c69 7374 2c0a 2020  OutputToList,.  
-00007820: 2020 2020 2020 6172 6773 3d28 2827 2d27        args=(('-'
-00007830: 2c29 2c20 6669 666f 5f70 6174 682c 206c  ,), fifo_path, l
-00007840: 6973 745f 666f 725f 6773 7574 696c 5f6f  ist_for_gsutil_o
-00007850: 7574 7075 7429 2c0a 2020 2020 2020 2020  utput),.        
-00007860: 6b77 6172 6773 3d7b 0a20 2020 2020 2020  kwargs={.       
-00007870: 2020 2020 2027 7265 7475 726e 5f73 7464       'return_std
-00007880: 6572 7227 3a20 5472 7565 2c0a 2020 2020  err': True,.    
-00007890: 2020 2020 2020 2020 2773 7464 696e 273a          'stdin':
-000078a0: 2063 6f6e 7465 6e74 730a 2020 2020 2020   contents.      
-000078b0: 2020 7d29 0a20 2020 2077 7269 7465 5f74    }).    write_t
-000078c0: 6872 6561 642e 7374 6172 7428 290a 2020  hread.start().  
-000078d0: 2020 7772 6974 655f 7468 7265 6164 2e6a    write_thread.j
-000078e0: 6f69 6e28 3132 3029 0a20 2020 2072 6561  oin(120).    rea
-000078f0: 645f 7468 7265 6164 2e6a 6f69 6e28 3132  d_thread.join(12
-00007900: 3029 0a20 2020 2069 6620 6e6f 7420 6c69  0).    if not li
-00007910: 7374 5f66 6f72 5f6f 7574 7075 743a 0a20  st_for_output:. 
-00007920: 2020 2020 2073 656c 662e 6661 696c 2827       self.fail('
-00007930: 5265 6164 696e 672f 7772 6974 696e 6720  Reading/writing 
-00007940: 746f 2074 6865 2066 6966 6f20 7469 6d65  to the fifo time
-00007950: 6420 6f75 742e 2729 0a20 2020 2073 656c  d out.').    sel
-00007960: 662e 6173 7365 7274 4571 7561 6c28 6c69  f.assertEqual(li
-00007970: 7374 5f66 6f72 5f6f 7574 7075 745b 305d  st_for_output[0]
-00007980: 2e73 7472 6970 2829 2c20 636f 6e74 656e  .strip(), conten
-00007990: 7473 290a 0a20 2064 6566 2074 6573 745f  ts)..  def test_
-000079a0: 7374 7265 616d 696e 675f 6d75 6c74 6970  streaming_multip
-000079b0: 6c65 5f61 7267 756d 656e 7473 2873 656c  le_arguments(sel
-000079c0: 6629 3a0a 2020 2020 6275 636b 6574 5f75  f):.    bucket_u
-000079d0: 7269 203d 2073 656c 662e 4372 6561 7465  ri = self.Create
-000079e0: 4275 636b 6574 2829 0a20 2020 2073 7464  Bucket().    std
-000079f0: 6572 7220 3d20 7365 6c66 2e52 756e 4773  err = self.RunGs
-00007a00: 5574 696c 285b 2763 7027 2c20 272d 272c  Util(['cp', '-',
-00007a10: 2027 2d27 2c20 7375 7269 2862 7563 6b65   '-', suri(bucke
-00007a20: 745f 7572 6929 5d2c 0a20 2020 2020 2020  t_uri)],.       
-00007a30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007a40: 2020 2020 2073 7464 696e 3d27 6261 7227       stdin='bar'
-00007a50: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00007a60: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00007a70: 7475 726e 5f73 7464 6572 723d 5472 7565  turn_stderr=True
-00007a80: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00007a90: 2020 2020 2020 2020 2020 2020 2020 6578                ex
-00007aa0: 7065 6374 6564 5f73 7461 7475 733d 3129  pected_status=1)
-00007ab0: 0a20 2020 2073 656c 662e 6173 7365 7274  .    self.assert
-00007ac0: 496e 2827 4d75 6c74 6970 6c65 2055 524c  In('Multiple URL
-00007ad0: 2073 7472 696e 6773 2061 7265 206e 6f74   strings are not
-00007ae0: 2073 7570 706f 7274 6564 2077 6974 6820   supported with 
-00007af0: 7374 7265 616d 696e 6727 2c0a 2020 2020  streaming',.    
-00007b00: 2020 2020 2020 2020 2020 2020 2020 7374                st
-00007b10: 6465 7272 290a 0a20 2023 2054 4f44 4f3a  derr)..  # TODO:
-00007b20: 2049 6d70 6c65 6d65 6e74 2061 2077 6179   Implement a way
-00007b30: 2074 6f20 7465 7374 2062 6f74 6820 7769   to test both wi
-00007b40: 7468 2061 6e64 2077 6974 686f 7574 2075  th and without u
-00007b50: 7369 6e67 206d 6167 6963 2066 696c 652e  sing magic file.
-00007b60: 0a0a 2020 4053 6571 7565 6e74 6961 6c41  ..  @SequentialA
-00007b70: 6e64 5061 7261 6c6c 656c 5472 616e 7366  ndParallelTransf
-00007b80: 6572 0a20 2064 6566 2074 6573 745f 6465  er.  def test_de
-00007b90: 7465 6374 5f63 6f6e 7465 6e74 5f74 7970  tect_content_typ
-00007ba0: 6528 7365 6c66 293a 0a20 2020 2022 2222  e(self):.    """
-00007bb0: 5465 7374 7320 6c6f 6361 6c20 6465 7465  Tests local dete
-00007bc0: 6374 696f 6e20 6f66 2063 6f6e 7465 6e74  ction of content
-00007bd0: 2074 7970 652e 2222 220a 2020 2020 6275   type.""".    bu
-00007be0: 636b 6574 5f75 7269 203d 2073 656c 662e  cket_uri = self.
-00007bf0: 4372 6561 7465 4275 636b 6574 2829 0a20  CreateBucket(). 
-00007c00: 2020 2064 7374 7572 6920 3d20 7375 7269     dsturi = suri
-00007c10: 2862 7563 6b65 745f 7572 692c 2027 666f  (bucket_uri, 'fo
-00007c20: 6f27 290a 0a20 2020 2073 656c 662e 5275  o')..    self.Ru
-00007c30: 6e47 7355 7469 6c28 5b27 6370 272c 2073  nGsUtil(['cp', s
-00007c40: 656c 662e 5f67 6574 5f74 6573 745f 6669  elf._get_test_fi
-00007c50: 6c65 2827 7465 7374 2e6d 7033 2729 2c20  le('test.mp3'), 
-00007c60: 6473 7475 7269 5d29 0a0a 2020 2020 2320  dsturi])..    # 
-00007c70: 5573 6520 4052 6574 7279 2061 7320 6865  Use @Retry as he
-00007c80: 6467 6520 6167 6169 6e73 7420 6275 636b  dge against buck
-00007c90: 6574 206c 6973 7469 6e67 2065 7665 6e74  et listing event
-00007ca0: 7561 6c20 636f 6e73 6973 7465 6e63 792e  ual consistency.
-00007cb0: 0a20 2020 2040 5265 7472 7928 4173 7365  .    @Retry(Asse
-00007cc0: 7274 696f 6e45 7272 6f72 2c20 7472 6965  rtionError, trie
-00007cd0: 733d 332c 2074 696d 656f 7574 5f73 6563  s=3, timeout_sec
-00007ce0: 733d 3129 0a20 2020 2064 6566 205f 4368  s=1).    def _Ch
-00007cf0: 6563 6b31 2829 3a0a 2020 2020 2020 7374  eck1():.      st
-00007d00: 646f 7574 203d 2073 656c 662e 5275 6e47  dout = self.RunG
-00007d10: 7355 7469 6c28 5b27 6c73 272c 2027 2d4c  sUtil(['ls', '-L
-00007d20: 272c 2064 7374 7572 695d 2c20 7265 7475  ', dsturi], retu
-00007d30: 726e 5f73 7464 6f75 743d 5472 7565 290a  rn_stdout=True).
-00007d40: 2020 2020 2020 6966 2049 535f 5749 4e44        if IS_WIND
-00007d50: 4f57 533a 0a20 2020 2020 2020 2073 656c  OWS:.        sel
-00007d60: 662e 6173 7365 7274 5472 7565 280a 2020  f.assertTrue(.  
-00007d70: 2020 2020 2020 2020 2020 7265 2e73 6561            re.sea
-00007d80: 7263 6828 7227 436f 6e74 656e 742d 5479  rch(r'Content-Ty
-00007d90: 7065 3a5c 732b 6175 6469 6f2f 782d 6d70  pe:\s+audio/x-mp
-00007da0: 6727 2c20 7374 646f 7574 2920 6f72 0a20  g', stdout) or. 
-00007db0: 2020 2020 2020 2020 2020 2072 652e 7365             re.se
-00007dc0: 6172 6368 2872 2743 6f6e 7465 6e74 2d54  arch(r'Content-T
-00007dd0: 7970 653a 5c73 2b61 7564 696f 2f6d 7065  ype:\s+audio/mpe
-00007de0: 6727 2c20 7374 646f 7574 2929 0a20 2020  g', stdout)).   
-00007df0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00007e00: 2073 656c 662e 6173 7365 7274 5265 6765   self.assertRege
-00007e10: 7828 7374 646f 7574 2c20 7227 436f 6e74  x(stdout, r'Cont
-00007e20: 656e 742d 5479 7065 3a5c 732b 6175 6469  ent-Type:\s+audi
-00007e30: 6f2f 6d70 6567 2729 0a0a 2020 2020 5f43  o/mpeg')..    _C
-00007e40: 6865 636b 3128 290a 0a20 2020 2073 656c  heck1()..    sel
-00007e50: 662e 5275 6e47 7355 7469 6c28 5b27 6370  f.RunGsUtil(['cp
-00007e60: 272c 2073 656c 662e 5f67 6574 5f74 6573  ', self._get_tes
-00007e70: 745f 6669 6c65 2827 7465 7374 2e67 6966  t_file('test.gif
-00007e80: 2729 2c20 6473 7475 7269 5d29 0a0a 2020  '), dsturi])..  
-00007e90: 2020 2320 5573 6520 4052 6574 7279 2061    # Use @Retry a
-00007ea0: 7320 6865 6467 6520 6167 6169 6e73 7420  s hedge against 
-00007eb0: 6275 636b 6574 206c 6973 7469 6e67 2065  bucket listing e
-00007ec0: 7665 6e74 7561 6c20 636f 6e73 6973 7465  ventual consiste
-00007ed0: 6e63 792e 0a20 2020 2040 5265 7472 7928  ncy..    @Retry(
-00007ee0: 4173 7365 7274 696f 6e45 7272 6f72 2c20  AssertionError, 
-00007ef0: 7472 6965 733d 332c 2074 696d 656f 7574  tries=3, timeout
-00007f00: 5f73 6563 733d 3129 0a20 2020 2064 6566  _secs=1).    def
-00007f10: 205f 4368 6563 6b32 2829 3a0a 2020 2020   _Check2():.    
-00007f20: 2020 7374 646f 7574 203d 2073 656c 662e    stdout = self.
-00007f30: 5275 6e47 7355 7469 6c28 5b27 6c73 272c  RunGsUtil(['ls',
-00007f40: 2027 2d4c 272c 2064 7374 7572 695d 2c20   '-L', dsturi], 
-00007f50: 7265 7475 726e 5f73 7464 6f75 743d 5472  return_stdout=Tr
-00007f60: 7565 290a 2020 2020 2020 7365 6c66 2e61  ue).      self.a
-00007f70: 7373 6572 7452 6567 6578 2873 7464 6f75  ssertRegex(stdou
-00007f80: 742c 2072 2743 6f6e 7465 6e74 2d54 7970  t, r'Content-Typ
-00007f90: 653a 5c73 2b69 6d61 6765 2f67 6966 2729  e:\s+image/gif')
-00007fa0: 0a0a 2020 2020 5f43 6865 636b 3228 290a  ..    _Check2().
-00007fb0: 0a20 2064 6566 2074 6573 745f 636f 6e74  .  def test_cont
-00007fc0: 656e 745f 7479 7065 5f6f 7665 7272 6964  ent_type_overrid
-00007fd0: 655f 6465 6661 756c 7428 7365 6c66 293a  e_default(self):
-00007fe0: 0a20 2020 2022 2222 5465 7374 7320 6f76  .    """Tests ov
-00007ff0: 6572 7269 6469 6e67 2063 6f6e 7465 6e74  erriding content
-00008000: 2074 7970 6520 7769 7468 2074 6865 2064   type with the d
-00008010: 6566 6175 6c74 2076 616c 7565 2e22 2222  efault value."""
-00008020: 0a20 2020 2062 7563 6b65 745f 7572 6920  .    bucket_uri 
-00008030: 3d20 7365 6c66 2e43 7265 6174 6542 7563  = self.CreateBuc
-00008040: 6b65 7428 290a 2020 2020 6473 7475 7269  ket().    dsturi
-00008050: 203d 2073 7572 6928 6275 636b 6574 5f75   = suri(bucket_u
-00008060: 7269 2c20 2766 6f6f 2729 0a0a 2020 2020  ri, 'foo')..    
-00008070: 7365 6c66 2e52 756e 4773 5574 696c 280a  self.RunGsUtil(.
-00008080: 2020 2020 2020 2020 5b27 2d68 272c 2027          ['-h', '
-00008090: 436f 6e74 656e 742d 5479 7065 3a27 2c20  Content-Type:', 
-000080a0: 2763 7027 2c0a 2020 2020 2020 2020 2073  'cp',.         s
-000080b0: 656c 662e 5f67 6574 5f74 6573 745f 6669  elf._get_test_fi
-000080c0: 6c65 2827 7465 7374 2e6d 7033 2729 2c20  le('test.mp3'), 
-000080d0: 6473 7475 7269 5d29 0a0a 2020 2020 2320  dsturi])..    # 
-000080e0: 5573 6520 4052 6574 7279 2061 7320 6865  Use @Retry as he
-000080f0: 6467 6520 6167 6169 6e73 7420 6275 636b  dge against buck
-00008100: 6574 206c 6973 7469 6e67 2065 7665 6e74  et listing event
-00008110: 7561 6c20 636f 6e73 6973 7465 6e63 792e  ual consistency.
-00008120: 0a20 2020 2040 5265 7472 7928 4173 7365  .    @Retry(Asse
-00008130: 7274 696f 6e45 7272 6f72 2c20 7472 6965  rtionError, trie
-00008140: 733d 332c 2074 696d 656f 7574 5f73 6563  s=3, timeout_sec
-00008150: 733d 3129 0a20 2020 2064 6566 205f 4368  s=1).    def _Ch
-00008160: 6563 6b31 2829 3a0a 2020 2020 2020 7374  eck1():.      st
-00008170: 646f 7574 203d 2073 656c 662e 5275 6e47  dout = self.RunG
-00008180: 7355 7469 6c28 5b27 6c73 272c 2027 2d4c  sUtil(['ls', '-L
-00008190: 272c 2064 7374 7572 695d 2c20 7265 7475  ', dsturi], retu
-000081a0: 726e 5f73 7464 6f75 743d 5472 7565 290a  rn_stdout=True).
-000081b0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-000081c0: 7452 6567 6578 2873 7464 6f75 742c 2072  tRegex(stdout, r
-000081d0: 2743 6f6e 7465 6e74 2d54 7970 653a 5c73  'Content-Type:\s
-000081e0: 2b61 7070 6c69 6361 7469 6f6e 2f6f 6374  +application/oct
-000081f0: 6574 2d73 7472 6561 6d27 290a 0a20 2020  et-stream')..   
-00008200: 205f 4368 6563 6b31 2829 0a0a 2020 2020   _Check1()..    
-00008210: 7365 6c66 2e52 756e 4773 5574 696c 280a  self.RunGsUtil(.
-00008220: 2020 2020 2020 2020 5b27 2d68 272c 2027          ['-h', '
-00008230: 436f 6e74 656e 742d 5479 7065 3a27 2c20  Content-Type:', 
-00008240: 2763 7027 2c0a 2020 2020 2020 2020 2073  'cp',.         s
-00008250: 656c 662e 5f67 6574 5f74 6573 745f 6669  elf._get_test_fi
-00008260: 6c65 2827 7465 7374 2e67 6966 2729 2c20  le('test.gif'), 
-00008270: 6473 7475 7269 5d29 0a0a 2020 2020 2320  dsturi])..    # 
-00008280: 5573 6520 4052 6574 7279 2061 7320 6865  Use @Retry as he
-00008290: 6467 6520 6167 6169 6e73 7420 6275 636b  dge against buck
-000082a0: 6574 206c 6973 7469 6e67 2065 7665 6e74  et listing event
-000082b0: 7561 6c20 636f 6e73 6973 7465 6e63 792e  ual consistency.
-000082c0: 0a20 2020 2040 5265 7472 7928 4173 7365  .    @Retry(Asse
-000082d0: 7274 696f 6e45 7272 6f72 2c20 7472 6965  rtionError, trie
-000082e0: 733d 332c 2074 696d 656f 7574 5f73 6563  s=3, timeout_sec
-000082f0: 733d 3129 0a20 2020 2064 6566 205f 4368  s=1).    def _Ch
-00008300: 6563 6b32 2829 3a0a 2020 2020 2020 7374  eck2():.      st
-00008310: 646f 7574 203d 2073 656c 662e 5275 6e47  dout = self.RunG
-00008320: 7355 7469 6c28 5b27 6c73 272c 2027 2d4c  sUtil(['ls', '-L
-00008330: 272c 2064 7374 7572 695d 2c20 7265 7475  ', dsturi], retu
-00008340: 726e 5f73 7464 6f75 743d 5472 7565 290a  rn_stdout=True).
-00008350: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-00008360: 7452 6567 6578 2873 7464 6f75 742c 2072  tRegex(stdout, r
-00008370: 2743 6f6e 7465 6e74 2d54 7970 653a 5c73  'Content-Type:\s
-00008380: 2b61 7070 6c69 6361 7469 6f6e 2f6f 6374  +application/oct
-00008390: 6574 2d73 7472 6561 6d27 290a 0a20 2020  et-stream')..   
-000083a0: 205f 4368 6563 6b32 2829 0a0a 2020 6465   _Check2()..  de
-000083b0: 6620 7465 7374 5f63 6f6e 7465 6e74 5f74  f test_content_t
-000083c0: 7970 655f 6f76 6572 7269 6465 2873 656c  ype_override(sel
-000083d0: 6629 3a0a 2020 2020 2222 2254 6573 7473  f):.    """Tests
-000083e0: 206f 7665 7272 6964 696e 6720 636f 6e74   overriding cont
-000083f0: 656e 7420 7479 7065 2077 6974 6820 6120  ent type with a 
-00008400: 7661 6c75 652e 2222 220a 2020 2020 6275  value.""".    bu
-00008410: 636b 6574 5f75 7269 203d 2073 656c 662e  cket_uri = self.
-00008420: 4372 6561 7465 4275 636b 6574 2829 0a20  CreateBucket(). 
-00008430: 2020 2064 7374 7572 6920 3d20 7375 7269     dsturi = suri
-00008440: 2862 7563 6b65 745f 7572 692c 2027 666f  (bucket_uri, 'fo
-00008450: 6f27 290a 0a20 2020 2073 656c 662e 5275  o')..    self.Ru
-00008460: 6e47 7355 7469 6c28 5b0a 2020 2020 2020  nGsUtil([.      
-00008470: 2020 272d 6827 2c20 2743 6f6e 7465 6e74    '-h', 'Content
-00008480: 2d54 7970 653a 7465 7874 2f70 6c61 696e  -Type:text/plain
-00008490: 272c 2027 6370 272c 0a20 2020 2020 2020  ', 'cp',.       
-000084a0: 2073 656c 662e 5f67 6574 5f74 6573 745f   self._get_test_
-000084b0: 6669 6c65 2827 7465 7374 2e6d 7033 2729  file('test.mp3')
-000084c0: 2c20 6473 7475 7269 0a20 2020 205d 290a  , dsturi.    ]).
-000084d0: 0a20 2020 2023 2055 7365 2040 5265 7472  .    # Use @Retr
-000084e0: 7920 6173 2068 6564 6765 2061 6761 696e  y as hedge again
-000084f0: 7374 2062 7563 6b65 7420 6c69 7374 696e  st bucket listin
-00008500: 6720 6576 656e 7475 616c 2063 6f6e 7369  g eventual consi
-00008510: 7374 656e 6379 2e0a 2020 2020 4052 6574  stency..    @Ret
-00008520: 7279 2841 7373 6572 7469 6f6e 4572 726f  ry(AssertionErro
-00008530: 722c 2074 7269 6573 3d33 2c20 7469 6d65  r, tries=3, time
-00008540: 6f75 745f 7365 6373 3d31 290a 2020 2020  out_secs=1).    
-00008550: 6465 6620 5f43 6865 636b 3128 293a 0a20  def _Check1():. 
-00008560: 2020 2020 2073 7464 6f75 7420 3d20 7365       stdout = se
-00008570: 6c66 2e52 756e 4773 5574 696c 285b 276c  lf.RunGsUtil(['l
-00008580: 7327 2c20 272d 4c27 2c20 6473 7475 7269  s', '-L', dsturi
-00008590: 5d2c 2072 6574 7572 6e5f 7374 646f 7574  ], return_stdout
-000085a0: 3d54 7275 6529 0a20 2020 2020 2073 656c  =True).      sel
-000085b0: 662e 6173 7365 7274 5265 6765 7828 7374  f.assertRegex(st
-000085c0: 646f 7574 2c20 7227 436f 6e74 656e 742d  dout, r'Content-
-000085d0: 5479 7065 3a5c 732b 7465 7874 2f70 6c61  Type:\s+text/pla
-000085e0: 696e 2729 0a0a 2020 2020 5f43 6865 636b  in')..    _Check
-000085f0: 3128 290a 0a20 2020 2073 656c 662e 5275  1()..    self.Ru
-00008600: 6e47 7355 7469 6c28 5b0a 2020 2020 2020  nGsUtil([.      
-00008610: 2020 272d 6827 2c20 2743 6f6e 7465 6e74    '-h', 'Content
-00008620: 2d54 7970 653a 7465 7874 2f70 6c61 696e  -Type:text/plain
-00008630: 272c 2027 6370 272c 0a20 2020 2020 2020  ', 'cp',.       
-00008640: 2073 656c 662e 5f67 6574 5f74 6573 745f   self._get_test_
-00008650: 6669 6c65 2827 7465 7374 2e67 6966 2729  file('test.gif')
-00008660: 2c20 6473 7475 7269 0a20 2020 205d 290a  , dsturi.    ]).
-00008670: 0a20 2020 2023 2055 7365 2040 5265 7472  .    # Use @Retr
-00008680: 7920 6173 2068 6564 6765 2061 6761 696e  y as hedge again
-00008690: 7374 2062 7563 6b65 7420 6c69 7374 696e  st bucket listin
-000086a0: 6720 6576 656e 7475 616c 2063 6f6e 7369  g eventual consi
-000086b0: 7374 656e 6379 2e0a 2020 2020 4052 6574  stency..    @Ret
-000086c0: 7279 2841 7373 6572 7469 6f6e 4572 726f  ry(AssertionErro
-000086d0: 722c 2074 7269 6573 3d33 2c20 7469 6d65  r, tries=3, time
-000086e0: 6f75 745f 7365 6373 3d31 290a 2020 2020  out_secs=1).    
-000086f0: 6465 6620 5f43 6865 636b 3228 293a 0a20  def _Check2():. 
-00008700: 2020 2020 2073 7464 6f75 7420 3d20 7365       stdout = se
-00008710: 6c66 2e52 756e 4773 5574 696c 285b 276c  lf.RunGsUtil(['l
-00008720: 7327 2c20 272d 4c27 2c20 6473 7475 7269  s', '-L', dsturi
-00008730: 5d2c 2072 6574 7572 6e5f 7374 646f 7574  ], return_stdout
-00008740: 3d54 7275 6529 0a20 2020 2020 2073 656c  =True).      sel
-00008750: 662e 6173 7365 7274 5265 6765 7828 7374  f.assertRegex(st
-00008760: 646f 7574 2c20 7227 436f 6e74 656e 742d  dout, r'Content-
-00008770: 5479 7065 3a5c 732b 7465 7874 2f70 6c61  Type:\s+text/pla
-00008780: 696e 2729 0a0a 2020 2020 5f43 6865 636b  in')..    _Check
-00008790: 3228 290a 0a20 2040 756e 6974 7465 7374  2()..  @unittest
-000087a0: 2e73 6b69 7049 6628 4953 5f57 494e 444f  .skipIf(IS_WINDO
-000087b0: 5753 2c20 276d 6167 6963 6669 6c65 2069  WS, 'magicfile i
-000087c0: 7320 6e6f 7420 6176 6169 6c61 626c 6520  s not available 
-000087d0: 6f6e 2057 696e 646f 7773 2e27 290a 2020  on Windows.').  
-000087e0: 4053 6571 7565 6e74 6961 6c41 6e64 5061  @SequentialAndPa
-000087f0: 7261 6c6c 656c 5472 616e 7366 6572 0a20  rallelTransfer. 
-00008800: 2064 6566 2074 6573 745f 6d61 6769 6366   def test_magicf
-00008810: 696c 655f 6f76 6572 7269 6465 2873 656c  ile_override(sel
-00008820: 6629 3a0a 2020 2020 2222 2254 6573 7473  f):.    """Tests
-00008830: 2063 6f6e 7465 6e74 2074 7970 6520 6f76   content type ov
-00008840: 6572 7269 6465 2077 6974 6820 6d61 6769  erride with magi
-00008850: 6366 696c 6520 7661 6c75 652e 2222 220a  cfile value.""".
-00008860: 2020 2020 6275 636b 6574 5f75 7269 203d      bucket_uri =
-00008870: 2073 656c 662e 4372 6561 7465 4275 636b   self.CreateBuck
-00008880: 6574 2829 0a20 2020 2064 7374 7572 6920  et().    dsturi 
-00008890: 3d20 7375 7269 2862 7563 6b65 745f 7572  = suri(bucket_ur
-000088a0: 692c 2027 666f 6f27 290a 2020 2020 6670  i, 'foo').    fp
-000088b0: 6174 6820 3d20 7365 6c66 2e43 7265 6174  ath = self.Creat
-000088c0: 6554 656d 7046 696c 6528 636f 6e74 656e  eTempFile(conten
-000088d0: 7473 3d62 2766 6f6f 2f62 6172 5c6e 2729  ts=b'foo/bar\n')
-000088e0: 0a20 2020 2073 656c 662e 5275 6e47 7355  .    self.RunGsU
-000088f0: 7469 6c28 5b27 6370 272c 2066 7061 7468  til(['cp', fpath
-00008900: 2c20 6473 7475 7269 5d29 0a0a 2020 2020  , dsturi])..    
-00008910: 2320 5573 6520 4052 6574 7279 2061 7320  # Use @Retry as 
-00008920: 6865 6467 6520 6167 6169 6e73 7420 6275  hedge against bu
-00008930: 636b 6574 206c 6973 7469 6e67 2065 7665  cket listing eve
-00008940: 6e74 7561 6c20 636f 6e73 6973 7465 6e63  ntual consistenc
-00008950: 792e 0a20 2020 2040 5265 7472 7928 4173  y..    @Retry(As
-00008960: 7365 7274 696f 6e45 7272 6f72 2c20 7472  sertionError, tr
-00008970: 6965 733d 332c 2074 696d 656f 7574 5f73  ies=3, timeout_s
-00008980: 6563 733d 3129 0a20 2020 2064 6566 205f  ecs=1).    def _
-00008990: 4368 6563 6b31 2829 3a0a 2020 2020 2020  Check1():.      
-000089a0: 7374 646f 7574 203d 2073 656c 662e 5275  stdout = self.Ru
-000089b0: 6e47 7355 7469 6c28 5b27 6c73 272c 2027  nGsUtil(['ls', '
-000089c0: 2d4c 272c 2064 7374 7572 695d 2c20 7265  -L', dsturi], re
-000089d0: 7475 726e 5f73 7464 6f75 743d 5472 7565  turn_stdout=True
-000089e0: 290a 2020 2020 2020 7573 655f 6d61 6769  ).      use_magi
-000089f0: 6366 696c 6520 3d20 626f 746f 2e63 6f6e  cfile = boto.con
-00008a00: 6669 672e 6765 7462 6f6f 6c28 2747 5355  fig.getbool('GSU
-00008a10: 7469 6c27 2c20 2775 7365 5f6d 6167 6963  til', 'use_magic
-00008a20: 6669 6c65 272c 2046 616c 7365 290a 2020  file', False).  
-00008a30: 2020 2020 636f 6e74 656e 745f 7479 7065      content_type
-00008a40: 203d 2028 2774 6578 742f 706c 6169 6e27   = ('text/plain'
-00008a50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00008a60: 2020 2020 2020 2069 6620 7573 655f 6d61         if use_ma
-00008a70: 6769 6366 696c 6520 656c 7365 2027 6170  gicfile else 'ap
-00008a80: 706c 6963 6174 696f 6e2f 6f63 7465 742d  plication/octet-
-00008a90: 7374 7265 616d 2729 0a20 2020 2020 2073  stream').      s
-00008aa0: 656c 662e 6173 7365 7274 5265 6765 7828  elf.assertRegex(
-00008ab0: 7374 646f 7574 2c20 7227 436f 6e74 656e  stdout, r'Conten
-00008ac0: 742d 5479 7065 3a5c 732b 2573 2720 2520  t-Type:\s+%s' % 
-00008ad0: 636f 6e74 656e 745f 7479 7065 290a 0a20  content_type).. 
-00008ae0: 2020 205f 4368 6563 6b31 2829 0a0a 2020     _Check1()..  
-00008af0: 4053 6571 7565 6e74 6961 6c41 6e64 5061  @SequentialAndPa
-00008b00: 7261 6c6c 656c 5472 616e 7366 6572 0a20  rallelTransfer. 
-00008b10: 2064 6566 2074 6573 745f 636f 6e74 656e   def test_conten
-00008b20: 745f 7479 7065 5f6d 6973 6d61 7463 6865  t_type_mismatche
-00008b30: 7328 7365 6c66 293a 0a20 2020 2022 2222  s(self):.    """
-00008b40: 5465 7374 7320 6f76 6572 7269 6469 6e67  Tests overriding
-00008b50: 2063 6f6e 7465 6e74 2074 7970 6520 7768   content type wh
-00008b60: 656e 2069 7420 646f 6573 206e 6f74 206d  en it does not m
-00008b70: 6174 6368 2074 6865 2066 696c 6520 7479  atch the file ty
-00008b80: 7065 2e22 2222 0a20 2020 2062 7563 6b65  pe.""".    bucke
-00008b90: 745f 7572 6920 3d20 7365 6c66 2e43 7265  t_uri = self.Cre
-00008ba0: 6174 6542 7563 6b65 7428 290a 2020 2020  ateBucket().    
-00008bb0: 6473 7475 7269 203d 2073 7572 6928 6275  dsturi = suri(bu
-00008bc0: 636b 6574 5f75 7269 2c20 2766 6f6f 2729  cket_uri, 'foo')
-00008bd0: 0a20 2020 2066 7061 7468 203d 2073 656c  .    fpath = sel
-00008be0: 662e 4372 6561 7465 5465 6d70 4669 6c65  f.CreateTempFile
-00008bf0: 2863 6f6e 7465 6e74 733d 6227 666f 6f2f  (contents=b'foo/
-00008c00: 6261 725c 6e27 290a 0a20 2020 2073 656c  bar\n')..    sel
-00008c10: 662e 5275 6e47 7355 7469 6c28 5b0a 2020  f.RunGsUtil([.  
-00008c20: 2020 2020 2020 272d 6827 2c20 2743 6f6e        '-h', 'Con
-00008c30: 7465 6e74 2d54 7970 653a 696d 6167 652f  tent-Type:image/
-00008c40: 6769 6627 2c20 2763 7027 2c0a 2020 2020  gif', 'cp',.    
-00008c50: 2020 2020 7365 6c66 2e5f 6765 745f 7465      self._get_te
-00008c60: 7374 5f66 696c 6528 2774 6573 742e 6d70  st_file('test.mp
-00008c70: 3327 292c 2064 7374 7572 690a 2020 2020  3'), dsturi.    
-00008c80: 5d29 0a0a 2020 2020 2320 5573 6520 4052  ])..    # Use @R
-00008c90: 6574 7279 2061 7320 6865 6467 6520 6167  etry as hedge ag
-00008ca0: 6169 6e73 7420 6275 636b 6574 206c 6973  ainst bucket lis
-00008cb0: 7469 6e67 2065 7665 6e74 7561 6c20 636f  ting eventual co
-00008cc0: 6e73 6973 7465 6e63 792e 0a20 2020 2040  nsistency..    @
-00008cd0: 5265 7472 7928 4173 7365 7274 696f 6e45  Retry(AssertionE
-00008ce0: 7272 6f72 2c20 7472 6965 733d 332c 2074  rror, tries=3, t
-00008cf0: 696d 656f 7574 5f73 6563 733d 3129 0a20  imeout_secs=1). 
-00008d00: 2020 2064 6566 205f 4368 6563 6b31 2829     def _Check1()
-00008d10: 3a0a 2020 2020 2020 7374 646f 7574 203d  :.      stdout =
+00006f00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006f10: 6f62 6a65 6374 5f6e 616d 653d 2766 696c  object_name='fil
+00006f20: 6532 272c 0a20 2020 2020 2020 2020 2020  e2',.           
+00006f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006f40: 2020 2020 2020 2020 2020 2020 636f 6e74              cont
+00006f50: 656e 7473 3d62 2764 6174 6127 290a 0a20  ents=b'data').. 
+00006f60: 2020 2064 6972 6563 746f 7279 203d 2073     directory = s
+00006f70: 656c 662e 4372 6561 7465 5465 6d70 4469  elf.CreateTempDi
+00006f80: 7228 290a 2020 2020 6c69 6e6b 6564 5f64  r().    linked_d
+00006f90: 6573 7469 6e61 7469 6f6e 203d 206f 732e  estination = os.
+00006fa0: 7061 7468 2e6a 6f69 6e28 6469 7265 6374  path.join(direct
+00006fb0: 6f72 792c 2027 6c69 6e6b 6564 5f64 6573  ory, 'linked_des
+00006fc0: 7469 6e61 7469 6f6e 2729 0a20 2020 2064  tination').    d
+00006fd0: 6573 7469 6e61 7469 6f6e 203d 206f 732e  estination = os.
+00006fe0: 7061 7468 2e6a 6f69 6e28 6469 7265 6374  path.join(direct
+00006ff0: 6f72 792c 2027 6465 7374 696e 6174 696f  ory, 'destinatio
+00007000: 6e27 290a 2020 2020 6f73 2e6d 6b64 6972  n').    os.mkdir
+00007010: 2864 6573 7469 6e61 7469 6f6e 290a 2020  (destination).  
+00007020: 2020 6f73 2e73 796d 6c69 6e6b 2864 6573    os.symlink(des
+00007030: 7469 6e61 7469 6f6e 2c20 6c69 6e6b 6564  tination, linked
+00007040: 5f64 6573 7469 6e61 7469 6f6e 290a 0a20  _destination).. 
+00007050: 2020 2073 7464 6572 7220 3d20 7365 6c66     stderr = self
+00007060: 2e52 756e 4773 5574 696c 285b 0a20 2020  .RunGsUtil([.   
+00007070: 2020 2020 2027 2d44 272c 2027 6370 272c       '-D', 'cp',
+00007080: 2027 2d72 272c 0a20 2020 2020 2020 2073   '-r',.        s
+00007090: 7572 6928 6275 636b 6574 5f75 7269 292c  uri(bucket_uri),
+000070a0: 0a20 2020 2020 2020 2073 7572 6928 7365  .        suri(se
+000070b0: 636f 6e64 5f6b 6579 5f75 7269 292c 206c  cond_key_uri), l
+000070c0: 696e 6b65 645f 6465 7374 696e 6174 696f  inked_destinatio
+000070d0: 6e0a 2020 2020 5d2c 0a20 2020 2020 2020  n.    ],.       
+000070e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000070f0: 2020 2020 2072 6574 7572 6e5f 7374 6465       return_stde
+00007100: 7272 3d54 7275 6529 0a0a 2020 2020 2320  rr=True)..    # 
+00007110: 4279 2064 6566 6175 6c74 2c20 6465 6c65  By default, dele
+00007120: 7465 7320 696e 2074 6865 2074 6561 7244  tes in the tearD
+00007130: 6f77 6e20 6d65 7468 6f64 2072 756e 2077  own method run w
+00007140: 6974 6820 7468 6520 584d 4c20 4150 492e  ith the XML API.
+00007150: 2042 6f74 6f0a 2020 2020 2320 646f 6573   Boto.    # does
+00007160: 206e 6f74 2068 616e 646c 6520 6e61 6d65   not handle name
+00007170: 7320 7769 7468 2027 2e2e 272c 2073 6f20  s with '..', so 
+00007180: 7765 206e 6565 6420 746f 2064 656c 6574  we need to delet
+00007190: 6520 7072 6f62 6c65 6d61 7469 630a 2020  e problematic.  
+000071a0: 2020 2320 6f62 6a65 6374 7320 7769 7468    # objects with
+000071b0: 2074 6865 206a 736f 6e20 4150 492e 2044   the json API. D
+000071c0: 656c 6574 6520 6861 7070 656e 7320 6265  elete happens be
+000071d0: 666f 7265 2061 7373 6572 7469 6f6e 732c  fore assertions,
+000071e0: 2069 6e20 6361 7365 2074 6865 790a 2020   in case they.  
+000071f0: 2020 2320 7261 6973 6520 6572 726f 7273    # raise errors
+00007200: 2061 6e64 2070 7265 7665 6e74 2063 6c65   and prevent cle
+00007210: 616e 7570 2e0a 2020 2020 7365 6c66 2e6a  anup..    self.j
+00007220: 736f 6e5f 6170 692e 4465 6c65 7465 4f62  son_api.DeleteOb
+00007230: 6a65 6374 2862 7563 6b65 745f 7572 692e  ject(bucket_uri.
+00007240: 6275 636b 6574 5f6e 616d 652c 206b 6579  bucket_name, key
+00007250: 5f75 7269 2e6f 626a 6563 745f 6e61 6d65  _uri.object_name
+00007260: 290a 0a20 2020 2073 656c 662e 6173 7365  )..    self.asse
+00007270: 7274 496e 280a 2020 2020 2020 2020 2753  rtIn(.        'S
+00007280: 6b69 7070 696e 6720 636f 7079 206f 6620  kipping copy of 
+00007290: 736f 7572 6365 2055 524c 2025 7320 6265  source URL %s be
+000072a0: 6361 7573 6520 6974 2077 6f75 6c64 2062  cause it would b
+000072b0: 6520 636f 7069 6564 2027 0a20 2020 2020  e copied '.     
+000072c0: 2020 2027 6f75 7473 6964 6520 7468 6520     'outside the 
+000072d0: 6578 7065 6374 6564 2064 6573 7469 6e61  expected destina
+000072e0: 7469 6f6e 2064 6972 6563 746f 7279 3a20  tion directory: 
+000072f0: 2573 2e27 2025 0a20 2020 2020 2020 2028  %s.' %.        (
+00007300: 7375 7269 286b 6579 5f75 7269 292c 206c  suri(key_uri), l
+00007310: 696e 6b65 645f 6465 7374 696e 6174 696f  inked_destinatio
+00007320: 6e29 2c20 7374 6465 7272 290a 2020 2020  n), stderr).    
+00007330: 7365 6c66 2e61 7373 6572 7446 616c 7365  self.assertFalse
+00007340: 286f 732e 7061 7468 2e65 7869 7374 7328  (os.path.exists(
+00007350: 6f73 2e70 6174 682e 6a6f 696e 286c 696e  os.path.join(lin
+00007360: 6b65 645f 6465 7374 696e 6174 696f 6e2c  ked_destination,
+00007370: 2027 6669 6c65 2729 2929 0a20 2020 2073   'file'))).    s
+00007380: 656c 662e 6173 7365 7274 5472 7565 286f  elf.assertTrue(o
+00007390: 732e 7061 7468 2e65 7869 7374 7328 6f73  s.path.exists(os
+000073a0: 2e70 6174 682e 6a6f 696e 286c 696e 6b65  .path.join(linke
+000073b0: 645f 6465 7374 696e 6174 696f 6e2c 2027  d_destination, '
+000073c0: 6669 6c65 3227 2929 290a 0a20 2040 756e  file2')))..  @un
+000073d0: 6974 7465 7374 2e73 6b69 7049 6628 4953  ittest.skipIf(IS
+000073e0: 5f57 494e 444f 5753 2c20 276f 732e 6d6b  _WINDOWS, 'os.mk
+000073f0: 6669 666f 206e 6f74 2061 7661 696c 6162  fifo not availab
+00007400: 6c65 206f 6e20 5769 6e64 6f77 732e 2729  le on Windows.')
+00007410: 0a20 2040 5365 7175 656e 7469 616c 416e  .  @SequentialAn
+00007420: 6450 6172 616c 6c65 6c54 7261 6e73 6665  dParallelTransfe
+00007430: 720a 2020 6465 6620 7465 7374 5f63 705f  r.  def test_cp_
+00007440: 6672 6f6d 5f6c 6f63 616c 5f66 696c 655f  from_local_file_
+00007450: 746f 5f66 6966 6f28 7365 6c66 293a 0a20  to_fifo(self):. 
+00007460: 2020 2063 6f6e 7465 6e74 7320 3d20 6227     contents = b'
+00007470: 6261 7227 0a20 2020 2066 6966 6f5f 7061  bar'.    fifo_pa
+00007480: 7468 203d 2073 656c 662e 4372 6561 7465  th = self.Create
+00007490: 5465 6d70 4669 666f 2829 0a20 2020 2066  TempFifo().    f
+000074a0: 696c 655f 7061 7468 203d 2073 656c 662e  ile_path = self.
+000074b0: 4372 6561 7465 5465 6d70 4669 6c65 2863  CreateTempFile(c
+000074c0: 6f6e 7465 6e74 733d 636f 6e74 656e 7473  ontents=contents
+000074d0: 290a 2020 2020 6c69 7374 5f66 6f72 5f6f  ).    list_for_o
+000074e0: 7574 7075 7420 3d20 5b5d 0a0a 2020 2020  utput = []..    
+000074f0: 7265 6164 5f74 6872 6561 6420 3d20 7468  read_thread = th
+00007500: 7265 6164 696e 672e 5468 7265 6164 2874  reading.Thread(t
+00007510: 6172 6765 743d 5f52 6561 6443 6f6e 7465  arget=_ReadConte
+00007520: 6e74 7346 726f 6d46 6966 6f2c 0a20 2020  ntsFromFifo,.   
+00007530: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007540: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007550: 6172 6773 3d28 6669 666f 5f70 6174 682c  args=(fifo_path,
+00007560: 206c 6973 745f 666f 725f 6f75 7470 7574   list_for_output
+00007570: 2929 0a20 2020 2072 6561 645f 7468 7265  )).    read_thre
+00007580: 6164 2e73 7461 7274 2829 0a20 2020 2077  ad.start().    w
+00007590: 7269 7465 5f74 6872 6561 6420 3d20 7468  rite_thread = th
+000075a0: 7265 6164 696e 672e 5468 7265 6164 280a  reading.Thread(.
+000075b0: 2020 2020 2020 2020 7461 7267 6574 3d73          target=s
+000075c0: 656c 662e 5f43 7057 6974 6846 6966 6f56  elf._CpWithFifoV
+000075d0: 6961 4773 5574 696c 416e 6441 7070 656e  iaGsUtilAndAppen
+000075e0: 644f 7574 7075 7454 6f4c 6973 742c 0a20  dOutputToList,. 
+000075f0: 2020 2020 2020 2061 7267 733d 2828 6669         args=((fi
+00007600: 6c65 5f70 6174 682c 292c 2066 6966 6f5f  le_path,), fifo_
+00007610: 7061 7468 2c20 5b5d 2929 0a20 2020 2077  path, [])).    w
+00007620: 7269 7465 5f74 6872 6561 642e 7374 6172  rite_thread.star
+00007630: 7428 290a 2020 2020 7772 6974 655f 7468  t().    write_th
+00007640: 7265 6164 2e6a 6f69 6e28 3132 3029 0a20  read.join(120). 
+00007650: 2020 2072 6561 645f 7468 7265 6164 2e6a     read_thread.j
+00007660: 6f69 6e28 3132 3029 0a20 2020 2069 6620  oin(120).    if 
+00007670: 6e6f 7420 6c69 7374 5f66 6f72 5f6f 7574  not list_for_out
+00007680: 7075 743a 0a20 2020 2020 2073 656c 662e  put:.      self.
+00007690: 6661 696c 2827 5265 6164 696e 672f 7772  fail('Reading/wr
+000076a0: 6974 696e 6720 746f 2074 6865 2066 6966  iting to the fif
+000076b0: 6f20 7469 6d65 6420 6f75 742e 2729 0a20  o timed out.'). 
+000076c0: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+000076d0: 7561 6c28 6c69 7374 5f66 6f72 5f6f 7574  ual(list_for_out
+000076e0: 7075 745b 305d 2e73 7472 6970 2829 2c20  put[0].strip(), 
+000076f0: 636f 6e74 656e 7473 290a 0a20 2040 756e  contents)..  @un
+00007700: 6974 7465 7374 2e73 6b69 7049 6628 4953  ittest.skipIf(IS
+00007710: 5f57 494e 444f 5753 2c20 276f 732e 6d6b  _WINDOWS, 'os.mk
+00007720: 6669 666f 206e 6f74 2061 7661 696c 6162  fifo not availab
+00007730: 6c65 206f 6e20 5769 6e64 6f77 732e 2729  le on Windows.')
+00007740: 0a20 2040 5365 7175 656e 7469 616c 416e  .  @SequentialAn
+00007750: 6450 6172 616c 6c65 6c54 7261 6e73 6665  dParallelTransfe
+00007760: 720a 2020 6465 6620 7465 7374 5f63 705f  r.  def test_cp_
+00007770: 6672 6f6d 5f6f 6e65 5f6f 626a 6563 745f  from_one_object_
+00007780: 746f 5f66 6966 6f28 7365 6c66 293a 0a20  to_fifo(self):. 
+00007790: 2020 2066 6966 6f5f 7061 7468 203d 2073     fifo_path = s
+000077a0: 656c 662e 4372 6561 7465 5465 6d70 4669  elf.CreateTempFi
+000077b0: 666f 2829 0a20 2020 2062 7563 6b65 745f  fo().    bucket_
+000077c0: 7572 6920 3d20 7365 6c66 2e43 7265 6174  uri = self.Creat
+000077d0: 6542 7563 6b65 7428 290a 2020 2020 636f  eBucket().    co
+000077e0: 6e74 656e 7473 203d 2062 2762 6172 270a  ntents = b'bar'.
+000077f0: 2020 2020 6f62 6a5f 7572 6920 3d20 7365      obj_uri = se
+00007800: 6c66 2e43 7265 6174 654f 626a 6563 7428  lf.CreateObject(
+00007810: 6275 636b 6574 5f75 7269 3d62 7563 6b65  bucket_uri=bucke
+00007820: 745f 7572 692c 2063 6f6e 7465 6e74 733d  t_uri, contents=
+00007830: 636f 6e74 656e 7473 290a 2020 2020 6c69  contents).    li
+00007840: 7374 5f66 6f72 5f6f 7574 7075 7420 3d20  st_for_output = 
+00007850: 5b5d 0a0a 2020 2020 7265 6164 5f74 6872  []..    read_thr
+00007860: 6561 6420 3d20 7468 7265 6164 696e 672e  ead = threading.
+00007870: 5468 7265 6164 2874 6172 6765 743d 5f52  Thread(target=_R
+00007880: 6561 6443 6f6e 7465 6e74 7346 726f 6d46  eadContentsFromF
+00007890: 6966 6f2c 0a20 2020 2020 2020 2020 2020  ifo,.           
+000078a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000078b0: 2020 2020 2020 2020 6172 6773 3d28 6669          args=(fi
+000078c0: 666f 5f70 6174 682c 206c 6973 745f 666f  fo_path, list_fo
+000078d0: 725f 6f75 7470 7574 2929 0a20 2020 2072  r_output)).    r
+000078e0: 6561 645f 7468 7265 6164 2e73 7461 7274  ead_thread.start
+000078f0: 2829 0a20 2020 2077 7269 7465 5f74 6872  ().    write_thr
+00007900: 6561 6420 3d20 7468 7265 6164 696e 672e  ead = threading.
+00007910: 5468 7265 6164 280a 2020 2020 2020 2020  Thread(.        
+00007920: 7461 7267 6574 3d73 656c 662e 5f43 7057  target=self._CpW
+00007930: 6974 6846 6966 6f56 6961 4773 5574 696c  ithFifoViaGsUtil
+00007940: 416e 6441 7070 656e 644f 7574 7075 7454  AndAppendOutputT
+00007950: 6f4c 6973 742c 0a20 2020 2020 2020 2061  oList,.        a
+00007960: 7267 733d 2828 7375 7269 286f 626a 5f75  rgs=((suri(obj_u
+00007970: 7269 292c 292c 2066 6966 6f5f 7061 7468  ri),), fifo_path
+00007980: 2c20 5b5d 2929 0a20 2020 2077 7269 7465  , [])).    write
+00007990: 5f74 6872 6561 642e 7374 6172 7428 290a  _thread.start().
+000079a0: 2020 2020 7772 6974 655f 7468 7265 6164      write_thread
+000079b0: 2e6a 6f69 6e28 3132 3029 0a20 2020 2072  .join(120).    r
+000079c0: 6561 645f 7468 7265 6164 2e6a 6f69 6e28  ead_thread.join(
+000079d0: 3132 3029 0a20 2020 2069 6620 6e6f 7420  120).    if not 
+000079e0: 6c69 7374 5f66 6f72 5f6f 7574 7075 743a  list_for_output:
+000079f0: 0a20 2020 2020 2073 656c 662e 6661 696c  .      self.fail
+00007a00: 2827 5265 6164 696e 672f 7772 6974 696e  ('Reading/writin
+00007a10: 6720 746f 2074 6865 2066 6966 6f20 7469  g to the fifo ti
+00007a20: 6d65 6420 6f75 742e 2729 0a20 2020 2073  med out.').    s
+00007a30: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+00007a40: 6c69 7374 5f66 6f72 5f6f 7574 7075 745b  list_for_output[
+00007a50: 305d 2e73 7472 6970 2829 2c20 636f 6e74  0].strip(), cont
+00007a60: 656e 7473 290a 0a20 2040 756e 6974 7465  ents)..  @unitte
+00007a70: 7374 2e73 6b69 7049 6628 4953 5f57 494e  st.skipIf(IS_WIN
+00007a80: 444f 5753 2c20 276f 732e 6d6b 6669 666f  DOWS, 'os.mkfifo
+00007a90: 206e 6f74 2061 7661 696c 6162 6c65 206f   not available o
+00007aa0: 6e20 5769 6e64 6f77 732e 2729 0a20 2040  n Windows.').  @
+00007ab0: 5365 7175 656e 7469 616c 416e 6450 6172  SequentialAndPar
+00007ac0: 616c 6c65 6c54 7261 6e73 6665 720a 2020  allelTransfer.  
+00007ad0: 6465 6620 7465 7374 5f63 705f 6672 6f6d  def test_cp_from
+00007ae0: 5f6d 756c 7469 706c 655f 6f62 6a65 6374  _multiple_object
+00007af0: 735f 746f 5f66 6966 6f28 7365 6c66 293a  s_to_fifo(self):
+00007b00: 0a20 2020 2066 6966 6f5f 7061 7468 203d  .    fifo_path =
+00007b10: 2073 656c 662e 4372 6561 7465 5465 6d70   self.CreateTemp
+00007b20: 4669 666f 2829 0a20 2020 2062 7563 6b65  Fifo().    bucke
+00007b30: 745f 7572 6920 3d20 7365 6c66 2e43 7265  t_uri = self.Cre
+00007b40: 6174 6542 7563 6b65 7428 290a 2020 2020  ateBucket().    
+00007b50: 636f 6e74 656e 7473 3120 3d20 6227 666f  contents1 = b'fo
+00007b60: 6f20 616e 6420 6261 7227 0a20 2020 2063  o and bar'.    c
+00007b70: 6f6e 7465 6e74 7332 203d 2062 2762 617a  ontents2 = b'baz
+00007b80: 2061 6e64 2071 7578 270a 2020 2020 6f62   and qux'.    ob
+00007b90: 6a31 5f75 7269 203d 2073 656c 662e 4372  j1_uri = self.Cr
+00007ba0: 6561 7465 4f62 6a65 6374 2862 7563 6b65  eateObject(bucke
+00007bb0: 745f 7572 693d 6275 636b 6574 5f75 7269  t_uri=bucket_uri
+00007bc0: 2c20 636f 6e74 656e 7473 3d63 6f6e 7465  , contents=conte
+00007bd0: 6e74 7331 290a 2020 2020 6f62 6a32 5f75  nts1).    obj2_u
+00007be0: 7269 203d 2073 656c 662e 4372 6561 7465  ri = self.Create
+00007bf0: 4f62 6a65 6374 2862 7563 6b65 745f 7572  Object(bucket_ur
+00007c00: 693d 6275 636b 6574 5f75 7269 2c20 636f  i=bucket_uri, co
+00007c10: 6e74 656e 7473 3d63 6f6e 7465 6e74 7332  ntents=contents2
+00007c20: 290a 2020 2020 6c69 7374 5f66 6f72 5f6f  ).    list_for_o
+00007c30: 7574 7075 7420 3d20 5b5d 0a0a 2020 2020  utput = []..    
+00007c40: 7265 6164 5f74 6872 6561 6420 3d20 7468  read_thread = th
+00007c50: 7265 6164 696e 672e 5468 7265 6164 2874  reading.Thread(t
+00007c60: 6172 6765 743d 5f52 6561 6443 6f6e 7465  arget=_ReadConte
+00007c70: 6e74 7346 726f 6d46 6966 6f2c 0a20 2020  ntsFromFifo,.   
+00007c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007c90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007ca0: 6172 6773 3d28 6669 666f 5f70 6174 682c  args=(fifo_path,
+00007cb0: 206c 6973 745f 666f 725f 6f75 7470 7574   list_for_output
+00007cc0: 2929 0a20 2020 2072 6561 645f 7468 7265  )).    read_thre
+00007cd0: 6164 2e73 7461 7274 2829 0a20 2020 2077  ad.start().    w
+00007ce0: 7269 7465 5f74 6872 6561 6420 3d20 7468  rite_thread = th
+00007cf0: 7265 6164 696e 672e 5468 7265 6164 280a  reading.Thread(.
+00007d00: 2020 2020 2020 2020 7461 7267 6574 3d73          target=s
+00007d10: 656c 662e 5f43 7057 6974 6846 6966 6f56  elf._CpWithFifoV
+00007d20: 6961 4773 5574 696c 416e 6441 7070 656e  iaGsUtilAndAppen
+00007d30: 644f 7574 7075 7454 6f4c 6973 742c 0a20  dOutputToList,. 
+00007d40: 2020 2020 2020 2061 7267 733d 2828 7375         args=((su
+00007d50: 7269 286f 626a 315f 7572 6929 2c20 7375  ri(obj1_uri), su
+00007d60: 7269 286f 626a 325f 7572 6929 292c 2066  ri(obj2_uri)), f
+00007d70: 6966 6f5f 7061 7468 2c20 5b5d 2929 0a20  ifo_path, [])). 
+00007d80: 2020 2077 7269 7465 5f74 6872 6561 642e     write_thread.
+00007d90: 7374 6172 7428 290a 2020 2020 7772 6974  start().    writ
+00007da0: 655f 7468 7265 6164 2e6a 6f69 6e28 3132  e_thread.join(12
+00007db0: 3029 0a20 2020 2072 6561 645f 7468 7265  0).    read_thre
+00007dc0: 6164 2e6a 6f69 6e28 3132 3029 0a20 2020  ad.join(120).   
+00007dd0: 2069 6620 6e6f 7420 6c69 7374 5f66 6f72   if not list_for
+00007de0: 5f6f 7574 7075 743a 0a20 2020 2020 2073  _output:.      s
+00007df0: 656c 662e 6661 696c 2827 5265 6164 696e  elf.fail('Readin
+00007e00: 672f 7772 6974 696e 6720 746f 2074 6865  g/writing to the
+00007e10: 2066 6966 6f20 7469 6d65 6420 6f75 742e   fifo timed out.
+00007e20: 2729 0a20 2020 2073 656c 662e 6173 7365  ').    self.asse
+00007e30: 7274 496e 2863 6f6e 7465 6e74 7331 2c20  rtIn(contents1, 
+00007e40: 6c69 7374 5f66 6f72 5f6f 7574 7075 745b  list_for_output[
+00007e50: 305d 290a 2020 2020 7365 6c66 2e61 7373  0]).    self.ass
+00007e60: 6572 7449 6e28 636f 6e74 656e 7473 322c  ertIn(contents2,
+00007e70: 206c 6973 745f 666f 725f 6f75 7470 7574   list_for_output
+00007e80: 5b30 5d29 0a0a 2020 4053 6571 7565 6e74  [0])..  @Sequent
+00007e90: 6961 6c41 6e64 5061 7261 6c6c 656c 5472  ialAndParallelTr
+00007ea0: 616e 7366 6572 0a20 2064 6566 2074 6573  ansfer.  def tes
+00007eb0: 745f 7374 7265 616d 696e 6728 7365 6c66  t_streaming(self
+00007ec0: 293a 0a20 2020 2062 7563 6b65 745f 7572  ):.    bucket_ur
+00007ed0: 6920 3d20 7365 6c66 2e43 7265 6174 6542  i = self.CreateB
+00007ee0: 7563 6b65 7428 290a 2020 2020 7374 6465  ucket().    stde
+00007ef0: 7272 203d 2073 656c 662e 5275 6e47 7355  rr = self.RunGsU
+00007f00: 7469 6c28 0a20 2020 2020 2020 205b 2763  til(.        ['c
+00007f10: 7027 2c20 272d 272c 2027 2573 2720 2520  p', '-', '%s' % 
+00007f20: 7375 7269 2862 7563 6b65 745f 7572 692c  suri(bucket_uri,
+00007f30: 2027 666f 6f27 295d 2c0a 2020 2020 2020   'foo')],.      
+00007f40: 2020 7374 6469 6e3d 2762 6172 272c 0a20    stdin='bar',. 
+00007f50: 2020 2020 2020 2072 6574 7572 6e5f 7374         return_st
+00007f60: 6465 7272 3d54 7275 6529 0a20 2020 2073  derr=True).    s
+00007f70: 656c 662e 6173 7365 7274 496e 2827 436f  elf.assertIn('Co
+00007f80: 7079 696e 6720 6672 6f6d 203c 5354 4449  pying from <STDI
+00007f90: 4e3e 272c 2073 7464 6572 7229 0a20 2020  N>', stderr).   
+00007fa0: 206b 6579 5f75 7269 203d 2073 656c 662e   key_uri = self.
+00007fb0: 5374 6f72 6167 6555 7269 436c 6f6e 6552  StorageUriCloneR
+00007fc0: 6570 6c61 6365 4e61 6d65 2862 7563 6b65  eplaceName(bucke
+00007fd0: 745f 7572 692c 2027 666f 6f27 290a 2020  t_uri, 'foo').  
+00007fe0: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+00007ff0: 616c 286b 6579 5f75 7269 2e67 6574 5f63  al(key_uri.get_c
+00008000: 6f6e 7465 6e74 735f 6173 5f73 7472 696e  ontents_as_strin
+00008010: 6728 292c 2062 2762 6172 2729 0a0a 2020  g(), b'bar')..  
+00008020: 4075 6e69 7474 6573 742e 736b 6970 4966  @unittest.skipIf
+00008030: 2849 535f 5749 4e44 4f57 532c 2027 6f73  (IS_WINDOWS, 'os
+00008040: 2e6d 6b66 6966 6f20 6e6f 7420 6176 6169  .mkfifo not avai
+00008050: 6c61 626c 6520 6f6e 2057 696e 646f 7773  lable on Windows
+00008060: 2e27 290a 2020 4053 6571 7565 6e74 6961  .').  @Sequentia
+00008070: 6c41 6e64 5061 7261 6c6c 656c 5472 616e  lAndParallelTran
+00008080: 7366 6572 0a20 2064 6566 2074 6573 745f  sfer.  def test_
+00008090: 7374 7265 616d 696e 675f 6672 6f6d 5f66  streaming_from_f
+000080a0: 6966 6f5f 746f 5f6f 626a 6563 7428 7365  ifo_to_object(se
+000080b0: 6c66 293a 0a20 2020 2062 7563 6b65 745f  lf):.    bucket_
+000080c0: 7572 6920 3d20 7365 6c66 2e43 7265 6174  uri = self.Creat
+000080d0: 6542 7563 6b65 7428 290a 2020 2020 6669  eBucket().    fi
+000080e0: 666f 5f70 6174 6820 3d20 7365 6c66 2e43  fo_path = self.C
+000080f0: 7265 6174 6554 656d 7046 6966 6f28 290a  reateTempFifo().
+00008100: 2020 2020 6f62 6a65 6374 5f6e 616d 6520      object_name 
+00008110: 3d20 2766 6f6f 270a 2020 2020 6f62 6a65  = 'foo'.    obje
+00008120: 6374 5f63 6f6e 7465 6e74 7320 3d20 6227  ct_contents = b'
+00008130: 6261 7227 0a20 2020 206c 6973 745f 666f  bar'.    list_fo
+00008140: 725f 6f75 7470 7574 203d 205b 5d0a 0a20  r_output = [].. 
+00008150: 2020 2023 2053 7461 7274 2077 7269 7465     # Start write
+00008160: 7220 696e 2074 6865 2062 6163 6b67 726f  r in the backgro
+00008170: 756e 642c 2077 6869 6368 2077 6f6e 2774  und, which won't
+00008180: 2066 696e 6973 6820 756e 7469 6c20 6120   finish until a 
+00008190: 636f 7272 6573 706f 6e64 696e 670a 2020  corresponding.  
+000081a0: 2020 2320 7265 6164 206f 7065 7261 7469    # read operati
+000081b0: 6f6e 2069 7320 7065 7266 6f72 6d65 6420  on is performed 
+000081c0: 6f6e 2074 6865 2066 6966 6f2e 0a20 2020  on the fifo..   
+000081d0: 2077 7269 7465 5f74 6872 6561 6420 3d20   write_thread = 
+000081e0: 7468 7265 6164 696e 672e 5468 7265 6164  threading.Thread
+000081f0: 2874 6172 6765 743d 5f57 7269 7465 436f  (target=_WriteCo
+00008200: 6e74 656e 7473 546f 4669 666f 2c0a 2020  ntentsToFifo,.  
+00008210: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008220: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008230: 2020 6172 6773 3d28 6f62 6a65 6374 5f63    args=(object_c
+00008240: 6f6e 7465 6e74 732c 2066 6966 6f5f 7061  ontents, fifo_pa
+00008250: 7468 2929 0a20 2020 2077 7269 7465 5f74  th)).    write_t
+00008260: 6872 6561 642e 7374 6172 7428 290a 2020  hread.start().  
+00008270: 2020 2320 5468 6520 6669 666f 2072 6571    # The fifo req
+00008280: 7569 7265 7320 626f 7468 2061 2070 656e  uires both a pen
+00008290: 6469 6e67 2072 6561 6420 616e 6420 7772  ding read and wr
+000082a0: 6974 6520 6265 666f 7265 2065 6974 6865  ite before eithe
+000082b0: 7220 6f70 6572 6174 696f 6e0a 2020 2020  r operation.    
+000082c0: 2320 7769 6c6c 2063 6f6d 706c 6574 652e  # will complete.
+000082d0: 2052 6567 6172 646c 6573 7320 6f66 2077   Regardless of w
+000082e0: 6869 6368 206f 7065 7261 7469 6f6e 206f  hich operation o
+000082f0: 6363 7572 7320 6669 7273 742c 2074 6865  ccurs first, the
+00008300: 0a20 2020 2023 2063 6f72 7265 7370 6f6e  .    # correspon
+00008310: 6469 6e67 2073 7562 7365 7175 656e 7420  ding subsequent 
+00008320: 6f70 6572 6174 696f 6e20 7769 6c6c 2075  operation will u
+00008330: 6e62 6c6f 636b 2074 6865 2066 6972 7374  nblock the first
+00008340: 206f 6e65 2e0a 2020 2020 2320 5765 2072   one..    # We r
+00008350: 756e 2067 7375 7469 6c20 696e 2061 2074  un gsutil in a t
+00008360: 6872 6561 6420 736f 2074 6861 7420 6974  hread so that it
+00008370: 2063 616e 2074 696d 656f 7574 2072 6174   can timeout rat
+00008380: 6865 7220 7468 616e 2068 616e 6720 666f  her than hang fo
+00008390: 7265 7665 720a 2020 2020 2320 6966 2074  rever.    # if t
+000083a0: 6865 2077 7269 7465 2074 6872 6561 6420  he write thread 
+000083b0: 6661 696c 732e 0a20 2020 2072 6561 645f  fails..    read_
+000083c0: 7468 7265 6164 203d 2074 6872 6561 6469  thread = threadi
+000083d0: 6e67 2e54 6872 6561 6428 0a20 2020 2020  ng.Thread(.     
+000083e0: 2020 2074 6172 6765 743d 7365 6c66 2e5f     target=self._
+000083f0: 4370 5769 7468 4669 666f 5669 6147 7355  CpWithFifoViaGsU
+00008400: 7469 6c41 6e64 4170 7065 6e64 4f75 7470  tilAndAppendOutp
+00008410: 7574 546f 4c69 7374 2c0a 2020 2020 2020  utToList,.      
+00008420: 2020 6172 6773 3d28 2866 6966 6f5f 7061    args=((fifo_pa
+00008430: 7468 2c29 2c20 7375 7269 2862 7563 6b65  th,), suri(bucke
+00008440: 745f 7572 692c 206f 626a 6563 745f 6e61  t_uri, object_na
+00008450: 6d65 292c 206c 6973 745f 666f 725f 6f75  me), list_for_ou
+00008460: 7470 7574 292c 0a20 2020 2020 2020 206b  tput),.        k
+00008470: 7761 7267 733d 7b27 7265 7475 726e 5f73  wargs={'return_s
+00008480: 7464 6572 7227 3a20 5472 7565 7d29 0a20  tderr': True}). 
+00008490: 2020 2072 6561 645f 7468 7265 6164 2e73     read_thread.s
+000084a0: 7461 7274 2829 0a0a 2020 2020 7265 6164  tart()..    read
+000084b0: 5f74 6872 6561 642e 6a6f 696e 2831 3230  _thread.join(120
+000084c0: 290a 2020 2020 7772 6974 655f 7468 7265  ).    write_thre
+000084d0: 6164 2e6a 6f69 6e28 3132 3029 0a20 2020  ad.join(120).   
+000084e0: 2069 6620 6e6f 7420 6c69 7374 5f66 6f72   if not list_for
+000084f0: 5f6f 7574 7075 743a 0a20 2020 2020 2073  _output:.      s
+00008500: 656c 662e 6661 696c 2827 5265 6164 696e  elf.fail('Readin
+00008510: 672f 7772 6974 696e 6720 746f 2074 6865  g/writing to the
+00008520: 2066 6966 6f20 7469 6d65 6420 6f75 742e   fifo timed out.
+00008530: 2729 0a20 2020 2073 656c 662e 6173 7365  ').    self.asse
+00008540: 7274 496e 2827 436f 7079 696e 6720 6672  rtIn('Copying fr
+00008550: 6f6d 206e 616d 6564 2070 6970 6527 2c20  om named pipe', 
+00008560: 6c69 7374 5f66 6f72 5f6f 7574 7075 745b  list_for_output[
+00008570: 305d 290a 0a20 2020 206b 6579 5f75 7269  0])..    key_uri
+00008580: 203d 2073 656c 662e 5374 6f72 6167 6555   = self.StorageU
+00008590: 7269 436c 6f6e 6552 6570 6c61 6365 4e61  riCloneReplaceNa
+000085a0: 6d65 2862 7563 6b65 745f 7572 692c 206f  me(bucket_uri, o
+000085b0: 626a 6563 745f 6e61 6d65 290a 2020 2020  bject_name).    
+000085c0: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+000085d0: 286b 6579 5f75 7269 2e67 6574 5f63 6f6e  (key_uri.get_con
+000085e0: 7465 6e74 735f 6173 5f73 7472 696e 6728  tents_as_string(
+000085f0: 292c 206f 626a 6563 745f 636f 6e74 656e  ), object_conten
+00008600: 7473 290a 0a20 2040 756e 6974 7465 7374  ts)..  @unittest
+00008610: 2e73 6b69 7049 6628 4953 5f57 494e 444f  .skipIf(IS_WINDO
+00008620: 5753 2c20 276f 732e 6d6b 6669 666f 206e  WS, 'os.mkfifo n
+00008630: 6f74 2061 7661 696c 6162 6c65 206f 6e20  ot available on 
+00008640: 5769 6e64 6f77 732e 2729 0a20 2040 5365  Windows.').  @Se
+00008650: 7175 656e 7469 616c 416e 6450 6172 616c  quentialAndParal
+00008660: 6c65 6c54 7261 6e73 6665 720a 2020 6465  lelTransfer.  de
+00008670: 6620 7465 7374 5f73 7472 6561 6d69 6e67  f test_streaming
+00008680: 5f66 726f 6d5f 6669 666f 5f74 6f5f 7374  _from_fifo_to_st
+00008690: 646f 7574 2873 656c 6629 3a0a 2020 2020  dout(self):.    
+000086a0: 6669 666f 5f70 6174 6820 3d20 7365 6c66  fifo_path = self
+000086b0: 2e43 7265 6174 6554 656d 7046 6966 6f28  .CreateTempFifo(
+000086c0: 290a 2020 2020 636f 6e74 656e 7473 203d  ).    contents =
+000086d0: 2062 2762 6172 270a 2020 2020 6c69 7374   b'bar'.    list
+000086e0: 5f66 6f72 5f6f 7574 7075 7420 3d20 5b5d  _for_output = []
+000086f0: 0a0a 2020 2020 7772 6974 655f 7468 7265  ..    write_thre
+00008700: 6164 203d 2074 6872 6561 6469 6e67 2e54  ad = threading.T
+00008710: 6872 6561 6428 7461 7267 6574 3d5f 5772  hread(target=_Wr
+00008720: 6974 6543 6f6e 7465 6e74 7354 6f46 6966  iteContentsToFif
+00008730: 6f2c 0a20 2020 2020 2020 2020 2020 2020  o,.             
+00008740: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008750: 2020 2020 2020 2061 7267 733d 2863 6f6e         args=(con
+00008760: 7465 6e74 732c 2066 6966 6f5f 7061 7468  tents, fifo_path
+00008770: 2929 0a20 2020 2077 7269 7465 5f74 6872  )).    write_thr
+00008780: 6561 642e 7374 6172 7428 290a 2020 2020  ead.start().    
+00008790: 7265 6164 5f74 6872 6561 6420 3d20 7468  read_thread = th
+000087a0: 7265 6164 696e 672e 5468 7265 6164 280a  reading.Thread(.
+000087b0: 2020 2020 2020 2020 7461 7267 6574 3d73          target=s
+000087c0: 656c 662e 5f43 7057 6974 6846 6966 6f56  elf._CpWithFifoV
+000087d0: 6961 4773 5574 696c 416e 6441 7070 656e  iaGsUtilAndAppen
+000087e0: 644f 7574 7075 7454 6f4c 6973 742c 0a20  dOutputToList,. 
+000087f0: 2020 2020 2020 2061 7267 733d 2828 6669         args=((fi
+00008800: 666f 5f70 6174 682c 292c 2027 2d27 2c20  fo_path,), '-', 
+00008810: 6c69 7374 5f66 6f72 5f6f 7574 7075 7429  list_for_output)
+00008820: 2c0a 2020 2020 2020 2020 6b77 6172 6773  ,.        kwargs
+00008830: 3d7b 2772 6574 7572 6e5f 7374 646f 7574  ={'return_stdout
+00008840: 273a 2054 7275 657d 290a 2020 2020 7265  ': True}).    re
+00008850: 6164 5f74 6872 6561 642e 7374 6172 7428  ad_thread.start(
+00008860: 290a 2020 2020 7265 6164 5f74 6872 6561  ).    read_threa
+00008870: 642e 6a6f 696e 2831 3230 290a 2020 2020  d.join(120).    
+00008880: 7772 6974 655f 7468 7265 6164 2e6a 6f69  write_thread.joi
+00008890: 6e28 3132 3029 0a20 2020 2069 6620 6e6f  n(120).    if no
+000088a0: 7420 6c69 7374 5f66 6f72 5f6f 7574 7075  t list_for_outpu
+000088b0: 743a 0a20 2020 2020 2073 656c 662e 6661  t:.      self.fa
+000088c0: 696c 2827 5265 6164 696e 672f 7772 6974  il('Reading/writ
+000088d0: 696e 6720 746f 2074 6865 2066 6966 6f20  ing to the fifo 
+000088e0: 7469 6d65 6420 6f75 742e 2729 0a20 2020  timed out.').   
+000088f0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+00008900: 6c28 6c69 7374 5f66 6f72 5f6f 7574 7075  l(list_for_outpu
+00008910: 745b 305d 2e73 7472 6970 2829 2e65 6e63  t[0].strip().enc
+00008920: 6f64 6528 2761 7363 6969 2729 2c20 636f  ode('ascii'), co
+00008930: 6e74 656e 7473 290a 0a20 2040 756e 6974  ntents)..  @unit
+00008940: 7465 7374 2e73 6b69 7049 6628 4953 5f57  test.skipIf(IS_W
+00008950: 494e 444f 5753 2c20 276f 732e 6d6b 6669  INDOWS, 'os.mkfi
+00008960: 666f 206e 6f74 2061 7661 696c 6162 6c65  fo not available
+00008970: 206f 6e20 5769 6e64 6f77 732e 2729 0a20   on Windows.'). 
+00008980: 2040 5365 7175 656e 7469 616c 416e 6450   @SequentialAndP
+00008990: 6172 616c 6c65 6c54 7261 6e73 6665 720a  arallelTransfer.
+000089a0: 2020 6465 6620 7465 7374 5f73 7472 6561    def test_strea
+000089b0: 6d69 6e67 5f66 726f 6d5f 7374 646f 7574  ming_from_stdout
+000089c0: 5f74 6f5f 6669 666f 2873 656c 6629 3a0a  _to_fifo(self):.
+000089d0: 2020 2020 6669 666f 5f70 6174 6820 3d20      fifo_path = 
+000089e0: 7365 6c66 2e43 7265 6174 6554 656d 7046  self.CreateTempF
+000089f0: 6966 6f28 290a 2020 2020 636f 6e74 656e  ifo().    conten
+00008a00: 7473 203d 2062 2762 6172 270a 2020 2020  ts = b'bar'.    
+00008a10: 6c69 7374 5f66 6f72 5f6f 7574 7075 7420  list_for_output 
+00008a20: 3d20 5b5d 0a20 2020 206c 6973 745f 666f  = [].    list_fo
+00008a30: 725f 6773 7574 696c 5f6f 7574 7075 7420  r_gsutil_output 
+00008a40: 3d20 5b5d 0a0a 2020 2020 7265 6164 5f74  = []..    read_t
+00008a50: 6872 6561 6420 3d20 7468 7265 6164 696e  hread = threadin
+00008a60: 672e 5468 7265 6164 2874 6172 6765 743d  g.Thread(target=
+00008a70: 5f52 6561 6443 6f6e 7465 6e74 7346 726f  _ReadContentsFro
+00008a80: 6d46 6966 6f2c 0a20 2020 2020 2020 2020  mFifo,.         
+00008a90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008aa0: 2020 2020 2020 2020 2020 6172 6773 3d28            args=(
+00008ab0: 6669 666f 5f70 6174 682c 206c 6973 745f  fifo_path, list_
+00008ac0: 666f 725f 6f75 7470 7574 2929 0a20 2020  for_output)).   
+00008ad0: 2072 6561 645f 7468 7265 6164 2e73 7461   read_thread.sta
+00008ae0: 7274 2829 0a20 2020 2077 7269 7465 5f74  rt().    write_t
+00008af0: 6872 6561 6420 3d20 7468 7265 6164 696e  hread = threadin
+00008b00: 672e 5468 7265 6164 280a 2020 2020 2020  g.Thread(.      
+00008b10: 2020 7461 7267 6574 3d73 656c 662e 5f43    target=self._C
+00008b20: 7057 6974 6846 6966 6f56 6961 4773 5574  pWithFifoViaGsUt
+00008b30: 696c 416e 6441 7070 656e 644f 7574 7075  ilAndAppendOutpu
+00008b40: 7454 6f4c 6973 742c 0a20 2020 2020 2020  tToList,.       
+00008b50: 2061 7267 733d 2828 272d 272c 292c 2066   args=(('-',), f
+00008b60: 6966 6f5f 7061 7468 2c20 6c69 7374 5f66  ifo_path, list_f
+00008b70: 6f72 5f67 7375 7469 6c5f 6f75 7470 7574  or_gsutil_output
+00008b80: 292c 0a20 2020 2020 2020 206b 7761 7267  ),.        kwarg
+00008b90: 733d 7b0a 2020 2020 2020 2020 2020 2020  s={.            
+00008ba0: 2772 6574 7572 6e5f 7374 6465 7272 273a  'return_stderr':
+00008bb0: 2054 7275 652c 0a20 2020 2020 2020 2020   True,.         
+00008bc0: 2020 2027 7374 6469 6e27 3a20 636f 6e74     'stdin': cont
+00008bd0: 656e 7473 0a20 2020 2020 2020 207d 290a  ents.        }).
+00008be0: 2020 2020 7772 6974 655f 7468 7265 6164      write_thread
+00008bf0: 2e73 7461 7274 2829 0a20 2020 2077 7269  .start().    wri
+00008c00: 7465 5f74 6872 6561 642e 6a6f 696e 2831  te_thread.join(1
+00008c10: 3230 290a 2020 2020 7265 6164 5f74 6872  20).    read_thr
+00008c20: 6561 642e 6a6f 696e 2831 3230 290a 2020  ead.join(120).  
+00008c30: 2020 6966 206e 6f74 206c 6973 745f 666f    if not list_fo
+00008c40: 725f 6f75 7470 7574 3a0a 2020 2020 2020  r_output:.      
+00008c50: 7365 6c66 2e66 6169 6c28 2752 6561 6469  self.fail('Readi
+00008c60: 6e67 2f77 7269 7469 6e67 2074 6f20 7468  ng/writing to th
+00008c70: 6520 6669 666f 2074 696d 6564 206f 7574  e fifo timed out
+00008c80: 2e27 290a 2020 2020 7365 6c66 2e61 7373  .').    self.ass
+00008c90: 6572 7445 7175 616c 286c 6973 745f 666f  ertEqual(list_fo
+00008ca0: 725f 6f75 7470 7574 5b30 5d2e 7374 7269  r_output[0].stri
+00008cb0: 7028 292c 2063 6f6e 7465 6e74 7329 0a0a  p(), contents)..
+00008cc0: 2020 6465 6620 7465 7374 5f73 7472 6561    def test_strea
+00008cd0: 6d69 6e67 5f6d 756c 7469 706c 655f 6172  ming_multiple_ar
+00008ce0: 6775 6d65 6e74 7328 7365 6c66 293a 0a20  guments(self):. 
+00008cf0: 2020 2062 7563 6b65 745f 7572 6920 3d20     bucket_uri = 
+00008d00: 7365 6c66 2e43 7265 6174 6542 7563 6b65  self.CreateBucke
+00008d10: 7428 290a 2020 2020 7374 6465 7272 203d  t().    stderr =
 00008d20: 2073 656c 662e 5275 6e47 7355 7469 6c28   self.RunGsUtil(
-00008d30: 5b27 6c73 272c 2027 2d4c 272c 2064 7374  ['ls', '-L', dst
-00008d40: 7572 695d 2c20 7265 7475 726e 5f73 7464  uri], return_std
-00008d50: 6f75 743d 5472 7565 290a 2020 2020 2020  out=True).      
-00008d60: 7365 6c66 2e61 7373 6572 7452 6567 6578  self.assertRegex
-00008d70: 2873 7464 6f75 742c 2072 2743 6f6e 7465  (stdout, r'Conte
-00008d80: 6e74 2d54 7970 653a 5c73 2b69 6d61 6765  nt-Type:\s+image
-00008d90: 2f67 6966 2729 0a0a 2020 2020 5f43 6865  /gif')..    _Che
-00008da0: 636b 3128 290a 0a20 2020 2073 656c 662e  ck1()..    self.
-00008db0: 5275 6e47 7355 7469 6c28 5b0a 2020 2020  RunGsUtil([.    
-00008dc0: 2020 2020 272d 6827 2c20 2743 6f6e 7465      '-h', 'Conte
-00008dd0: 6e74 2d54 7970 653a 696d 6167 652f 6769  nt-Type:image/gi
-00008de0: 6627 2c20 2763 7027 2c0a 2020 2020 2020  f', 'cp',.      
-00008df0: 2020 7365 6c66 2e5f 6765 745f 7465 7374    self._get_test
-00008e00: 5f66 696c 6528 2774 6573 742e 6769 6627  _file('test.gif'
-00008e10: 292c 2064 7374 7572 690a 2020 2020 5d29  ), dsturi.    ])
-00008e20: 0a0a 2020 2020 2320 5573 6520 4052 6574  ..    # Use @Ret
-00008e30: 7279 2061 7320 6865 6467 6520 6167 6169  ry as hedge agai
-00008e40: 6e73 7420 6275 636b 6574 206c 6973 7469  nst bucket listi
-00008e50: 6e67 2065 7665 6e74 7561 6c20 636f 6e73  ng eventual cons
-00008e60: 6973 7465 6e63 792e 0a20 2020 2040 5265  istency..    @Re
-00008e70: 7472 7928 4173 7365 7274 696f 6e45 7272  try(AssertionErr
-00008e80: 6f72 2c20 7472 6965 733d 332c 2074 696d  or, tries=3, tim
-00008e90: 656f 7574 5f73 6563 733d 3129 0a20 2020  eout_secs=1).   
-00008ea0: 2064 6566 205f 4368 6563 6b32 2829 3a0a   def _Check2():.
-00008eb0: 2020 2020 2020 7374 646f 7574 203d 2073        stdout = s
-00008ec0: 656c 662e 5275 6e47 7355 7469 6c28 5b27  elf.RunGsUtil(['
-00008ed0: 6c73 272c 2027 2d4c 272c 2064 7374 7572  ls', '-L', dstur
-00008ee0: 695d 2c20 7265 7475 726e 5f73 7464 6f75  i], return_stdou
-00008ef0: 743d 5472 7565 290a 2020 2020 2020 7365  t=True).      se
-00008f00: 6c66 2e61 7373 6572 7452 6567 6578 2873  lf.assertRegex(s
-00008f10: 7464 6f75 742c 2072 2743 6f6e 7465 6e74  tdout, r'Content
-00008f20: 2d54 7970 653a 5c73 2b69 6d61 6765 2f67  -Type:\s+image/g
-00008f30: 6966 2729 0a0a 2020 2020 5f43 6865 636b  if')..    _Check
-00008f40: 3228 290a 0a20 2020 2073 656c 662e 5275  2()..    self.Ru
-00008f50: 6e47 7355 7469 6c28 5b27 2d68 272c 2027  nGsUtil(['-h', '
-00008f60: 436f 6e74 656e 742d 5479 7065 3a69 6d61  Content-Type:ima
-00008f70: 6765 2f67 6966 272c 2027 6370 272c 2066  ge/gif', 'cp', f
-00008f80: 7061 7468 2c20 6473 7475 7269 5d29 0a0a  path, dsturi])..
-00008f90: 2020 2020 2320 5573 6520 4052 6574 7279      # Use @Retry
-00008fa0: 2061 7320 6865 6467 6520 6167 6169 6e73   as hedge agains
-00008fb0: 7420 6275 636b 6574 206c 6973 7469 6e67  t bucket listing
-00008fc0: 2065 7665 6e74 7561 6c20 636f 6e73 6973   eventual consis
-00008fd0: 7465 6e63 792e 0a20 2020 2040 5265 7472  tency..    @Retr
-00008fe0: 7928 4173 7365 7274 696f 6e45 7272 6f72  y(AssertionError
-00008ff0: 2c20 7472 6965 733d 332c 2074 696d 656f  , tries=3, timeo
-00009000: 7574 5f73 6563 733d 3129 0a20 2020 2064  ut_secs=1).    d
-00009010: 6566 205f 4368 6563 6b33 2829 3a0a 2020  ef _Check3():.  
-00009020: 2020 2020 7374 646f 7574 203d 2073 656c      stdout = sel
-00009030: 662e 5275 6e47 7355 7469 6c28 5b27 6c73  f.RunGsUtil(['ls
-00009040: 272c 2027 2d4c 272c 2064 7374 7572 695d  ', '-L', dsturi]
-00009050: 2c20 7265 7475 726e 5f73 7464 6f75 743d  , return_stdout=
-00009060: 5472 7565 290a 2020 2020 2020 7365 6c66  True).      self
-00009070: 2e61 7373 6572 7452 6567 6578 2873 7464  .assertRegex(std
-00009080: 6f75 742c 2072 2743 6f6e 7465 6e74 2d54  out, r'Content-T
-00009090: 7970 653a 5c73 2b69 6d61 6765 2f67 6966  ype:\s+image/gif
-000090a0: 2729 0a0a 2020 2020 5f43 6865 636b 3328  ')..    _Check3(
-000090b0: 290a 0a20 2040 5365 7175 656e 7469 616c  )..  @Sequential
-000090c0: 416e 6450 6172 616c 6c65 6c54 7261 6e73  AndParallelTrans
-000090d0: 6665 720a 2020 6465 6620 7465 7374 5f63  fer.  def test_c
-000090e0: 6f6e 7465 6e74 5f74 7970 655f 6865 6164  ontent_type_head
-000090f0: 6572 5f63 6173 655f 696e 7365 6e73 6974  er_case_insensit
-00009100: 6976 6528 7365 6c66 293a 0a20 2020 2022  ive(self):.    "
-00009110: 2222 5465 7374 7320 7468 6174 2063 6f6e  ""Tests that con
-00009120: 7465 6e74 2074 7970 6520 6865 6164 6572  tent type header
-00009130: 2069 7320 7472 6561 7465 6420 7769 7468   is treated with
-00009140: 2063 6173 6520 696e 7365 6e73 6974 6976   case insensitiv
-00009150: 6974 792e 2222 220a 2020 2020 6275 636b  ity.""".    buck
-00009160: 6574 5f75 7269 203d 2073 656c 662e 4372  et_uri = self.Cr
-00009170: 6561 7465 4275 636b 6574 2829 0a20 2020  eateBucket().   
-00009180: 2064 7374 7572 6920 3d20 7375 7269 2862   dsturi = suri(b
-00009190: 7563 6b65 745f 7572 692c 2027 666f 6f27  ucket_uri, 'foo'
-000091a0: 290a 2020 2020 6670 6174 6820 3d20 7365  ).    fpath = se
-000091b0: 6c66 2e5f 6765 745f 7465 7374 5f66 696c  lf._get_test_fil
-000091c0: 6528 2774 6573 742e 6769 6627 290a 0a20  e('test.gif').. 
-000091d0: 2020 2073 656c 662e 5275 6e47 7355 7469     self.RunGsUti
-000091e0: 6c28 5b27 2d68 272c 2027 636f 6e74 656e  l(['-h', 'conten
-000091f0: 742d 5479 7065 3a74 6578 742f 706c 6169  t-Type:text/plai
-00009200: 6e27 2c20 2763 7027 2c20 6670 6174 682c  n', 'cp', fpath,
-00009210: 2064 7374 7572 695d 290a 0a20 2020 2023   dsturi])..    #
-00009220: 2055 7365 2040 5265 7472 7920 6173 2068   Use @Retry as h
-00009230: 6564 6765 2061 6761 696e 7374 2062 7563  edge against buc
-00009240: 6b65 7420 6c69 7374 696e 6720 6576 656e  ket listing even
-00009250: 7475 616c 2063 6f6e 7369 7374 656e 6379  tual consistency
-00009260: 2e0a 2020 2020 4052 6574 7279 2841 7373  ..    @Retry(Ass
-00009270: 6572 7469 6f6e 4572 726f 722c 2074 7269  ertionError, tri
-00009280: 6573 3d33 2c20 7469 6d65 6f75 745f 7365  es=3, timeout_se
-00009290: 6373 3d31 290a 2020 2020 6465 6620 5f43  cs=1).    def _C
-000092a0: 6865 636b 3128 293a 0a20 2020 2020 2073  heck1():.      s
-000092b0: 7464 6f75 7420 3d20 7365 6c66 2e52 756e  tdout = self.Run
-000092c0: 4773 5574 696c 285b 276c 7327 2c20 272d  GsUtil(['ls', '-
-000092d0: 4c27 2c20 6473 7475 7269 5d2c 2072 6574  L', dsturi], ret
-000092e0: 7572 6e5f 7374 646f 7574 3d54 7275 6529  urn_stdout=True)
-000092f0: 0a20 2020 2020 2073 656c 662e 6173 7365  .      self.asse
-00009300: 7274 5265 6765 7828 7374 646f 7574 2c20  rtRegex(stdout, 
-00009310: 7227 436f 6e74 656e 742d 5479 7065 3a5c  r'Content-Type:\
-00009320: 732b 7465 7874 2f70 6c61 696e 2729 0a20  s+text/plain'). 
-00009330: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00009340: 4e6f 7452 6567 6578 2873 7464 6f75 742c  NotRegex(stdout,
-00009350: 2072 2769 6d61 6765 2f67 6966 2729 0a0a   r'image/gif')..
-00009360: 2020 2020 5f43 6865 636b 3128 290a 0a20      _Check1().. 
-00009370: 2020 2073 656c 662e 5275 6e47 7355 7469     self.RunGsUti
-00009380: 6c28 5b0a 2020 2020 2020 2020 272d 6827  l([.        '-h'
-00009390: 2c20 2743 4f4e 5445 4e54 2d54 5950 453a  , 'CONTENT-TYPE:
-000093a0: 696d 6167 652f 6769 6627 2c20 272d 6827  image/gif', '-h'
-000093b0: 2c20 2763 6f6e 7465 6e74 2d74 7970 653a  , 'content-type:
-000093c0: 696d 6167 652f 6769 6627 2c20 2763 7027  image/gif', 'cp'
-000093d0: 2c0a 2020 2020 2020 2020 6670 6174 682c  ,.        fpath,
-000093e0: 2064 7374 7572 690a 2020 2020 5d29 0a0a   dsturi.    ])..
-000093f0: 2020 2020 2320 5573 6520 4052 6574 7279      # Use @Retry
-00009400: 2061 7320 6865 6467 6520 6167 6169 6e73   as hedge agains
-00009410: 7420 6275 636b 6574 206c 6973 7469 6e67  t bucket listing
-00009420: 2065 7665 6e74 7561 6c20 636f 6e73 6973   eventual consis
-00009430: 7465 6e63 792e 0a20 2020 2040 5265 7472  tency..    @Retr
-00009440: 7928 4173 7365 7274 696f 6e45 7272 6f72  y(AssertionError
-00009450: 2c20 7472 6965 733d 332c 2074 696d 656f  , tries=3, timeo
-00009460: 7574 5f73 6563 733d 3129 0a20 2020 2064  ut_secs=1).    d
-00009470: 6566 205f 4368 6563 6b32 2829 3a0a 2020  ef _Check2():.  
-00009480: 2020 2020 7374 646f 7574 203d 2073 656c      stdout = sel
-00009490: 662e 5275 6e47 7355 7469 6c28 5b27 6c73  f.RunGsUtil(['ls
-000094a0: 272c 2027 2d4c 272c 2064 7374 7572 695d  ', '-L', dsturi]
-000094b0: 2c20 7265 7475 726e 5f73 7464 6f75 743d  , return_stdout=
-000094c0: 5472 7565 290a 2020 2020 2020 7365 6c66  True).      self
-000094d0: 2e61 7373 6572 7452 6567 6578 2873 7464  .assertRegex(std
-000094e0: 6f75 742c 2072 2743 6f6e 7465 6e74 2d54  out, r'Content-T
-000094f0: 7970 653a 5c73 2b69 6d61 6765 2f67 6966  ype:\s+image/gif
-00009500: 2729 0a20 2020 2020 2073 656c 662e 6173  ').      self.as
-00009510: 7365 7274 4e6f 7452 6567 6578 2873 7464  sertNotRegex(std
-00009520: 6f75 742c 2072 2769 6d61 6765 2f67 6966  out, r'image/gif
-00009530: 2c5c 732a 696d 6167 652f 6769 6627 290a  ,\s*image/gif').
-00009540: 0a20 2020 205f 4368 6563 6b32 2829 0a0a  .    _Check2()..
-00009550: 2020 4053 6571 7565 6e74 6961 6c41 6e64    @SequentialAnd
-00009560: 5061 7261 6c6c 656c 5472 616e 7366 6572  ParallelTransfer
-00009570: 0a20 2064 6566 2074 6573 745f 6f74 6865  .  def test_othe
-00009580: 725f 6865 6164 6572 7328 7365 6c66 293a  r_headers(self):
-00009590: 0a20 2020 2022 2222 5465 7374 7320 7468  .    """Tests th
-000095a0: 6174 206e 6f6e 2d63 6f6e 7465 6e74 2d74  at non-content-t
-000095b0: 7970 6520 6865 6164 6572 7320 6172 6520  ype headers are 
-000095c0: 6170 706c 6965 6420 7375 6363 6573 7366  applied successf
-000095d0: 756c 6c79 206f 6e20 636f 7079 2e22 2222  ully on copy."""
-000095e0: 0a20 2020 2062 7563 6b65 745f 7572 6920  .    bucket_uri 
-000095f0: 3d20 7365 6c66 2e43 7265 6174 6542 7563  = self.CreateBuc
-00009600: 6b65 7428 290a 2020 2020 6473 745f 7572  ket().    dst_ur
-00009610: 6920 3d20 7375 7269 2862 7563 6b65 745f  i = suri(bucket_
-00009620: 7572 692c 2027 666f 6f27 290a 2020 2020  uri, 'foo').    
-00009630: 6670 6174 6820 3d20 7365 6c66 2e5f 6765  fpath = self._ge
-00009640: 745f 7465 7374 5f66 696c 6528 2774 6573  t_test_file('tes
-00009650: 742e 6769 6627 290a 0a20 2020 2073 656c  t.gif')..    sel
-00009660: 662e 5275 6e47 7355 7469 6c28 5b0a 2020  f.RunGsUtil([.  
-00009670: 2020 2020 2020 272d 6827 2c20 2743 6163        '-h', 'Cac
-00009680: 6865 2d43 6f6e 7472 6f6c 3a70 7562 6c69  he-Control:publi
-00009690: 632c 6d61 782d 6167 653d 3132 272c 2027  c,max-age=12', '
-000096a0: 2d68 272c 0a20 2020 2020 2020 2027 782d  -h',.        'x-
-000096b0: 2573 2d6d 6574 612d 313a 6162 6364 2720  %s-meta-1:abcd' 
-000096c0: 2520 7365 6c66 2e70 726f 7669 6465 725f  % self.provider_
-000096d0: 6375 7374 6f6d 5f6d 6574 612c 2027 6370  custom_meta, 'cp
-000096e0: 272c 2066 7061 7468 2c20 6473 745f 7572  ', fpath, dst_ur
-000096f0: 690a 2020 2020 5d29 0a0a 2020 2020 7374  i.    ])..    st
-00009700: 646f 7574 203d 2073 656c 662e 5275 6e47  dout = self.RunG
-00009710: 7355 7469 6c28 5b27 6c73 272c 2027 2d4c  sUtil(['ls', '-L
-00009720: 272c 2064 7374 5f75 7269 5d2c 2072 6574  ', dst_uri], ret
-00009730: 7572 6e5f 7374 646f 7574 3d54 7275 6529  urn_stdout=True)
-00009740: 0a20 2020 2073 656c 662e 6173 7365 7274  .    self.assert
-00009750: 5265 6765 7828 7374 646f 7574 2c20 7227  Regex(stdout, r'
-00009760: 4361 6368 652d 436f 6e74 726f 6c5c 732a  Cache-Control\s*
-00009770: 3a5c 732a 7075 626c 6963 2c6d 6178 2d61  :\s*public,max-a
-00009780: 6765 3d31 3227 290a 2020 2020 7365 6c66  ge=12').    self
-00009790: 2e61 7373 6572 7452 6567 6578 2873 7464  .assertRegex(std
-000097a0: 6f75 742c 2072 274d 6574 6164 6174 613a  out, r'Metadata:
-000097b0: 5c73 2a31 3a5c 732a 6162 6364 2729 0a0a  \s*1:\s*abcd')..
-000097c0: 2020 2020 6473 745f 7572 6932 203d 2073      dst_uri2 = s
-000097d0: 7572 6928 6275 636b 6574 5f75 7269 2c20  uri(bucket_uri, 
-000097e0: 2762 6172 2729 0a20 2020 2073 656c 662e  'bar').    self.
-000097f0: 5275 6e47 7355 7469 6c28 5b27 6370 272c  RunGsUtil(['cp',
-00009800: 2064 7374 5f75 7269 2c20 6473 745f 7572   dst_uri, dst_ur
-00009810: 6932 5d29 0a20 2020 2023 2045 6e73 7572  i2]).    # Ensur
-00009820: 6520 6d65 7461 6461 7461 2077 6173 2070  e metadata was p
-00009830: 7265 7365 7276 6564 2061 6372 6f73 7320  reserved across 
-00009840: 636f 7079 2e0a 2020 2020 7374 646f 7574  copy..    stdout
-00009850: 203d 2073 656c 662e 5275 6e47 7355 7469   = self.RunGsUti
-00009860: 6c28 5b27 6c73 272c 2027 2d4c 272c 2064  l(['ls', '-L', d
-00009870: 7374 5f75 7269 325d 2c20 7265 7475 726e  st_uri2], return
-00009880: 5f73 7464 6f75 743d 5472 7565 290a 2020  _stdout=True).  
-00009890: 2020 7365 6c66 2e61 7373 6572 7452 6567    self.assertReg
-000098a0: 6578 2873 7464 6f75 742c 2072 2743 6163  ex(stdout, r'Cac
-000098b0: 6865 2d43 6f6e 7472 6f6c 5c73 2a3a 5c73  he-Control\s*:\s
-000098c0: 2a70 7562 6c69 632c 6d61 782d 6167 653d  *public,max-age=
-000098d0: 3132 2729 0a20 2020 2073 656c 662e 6173  12').    self.as
-000098e0: 7365 7274 5265 6765 7828 7374 646f 7574  sertRegex(stdout
-000098f0: 2c20 7227 4d65 7461 6461 7461 3a5c 732a  , r'Metadata:\s*
-00009900: 313a 5c73 2a61 6263 6427 290a 0a20 2040  1:\s*abcd')..  @
-00009910: 5365 7175 656e 7469 616c 416e 6450 6172  SequentialAndPar
-00009920: 616c 6c65 6c54 7261 6e73 6665 720a 2020  allelTransfer.  
-00009930: 6465 6620 7465 7374 5f72 6571 7565 7374  def test_request
-00009940: 5f72 6561 736f 6e5f 6865 6164 6572 2873  _reason_header(s
-00009950: 656c 6629 3a0a 2020 2020 2222 2254 6573  elf):.    """Tes
-00009960: 7420 7468 6174 2078 2d67 6f6f 672d 7265  t that x-goog-re
-00009970: 7175 6573 742d 6865 6164 6572 2063 616e  quest-header can
-00009980: 2062 6520 7365 7420 7573 696e 6720 7468   be set using th
-00009990: 6520 656e 7669 726f 6e6d 656e 7420 7661  e environment va
-000099a0: 7269 6162 6c65 2e22 2222 0a20 2020 206f  riable.""".    o
-000099b0: 732e 656e 7669 726f 6e5b 2743 4c4f 5544  s.environ['CLOUD
-000099c0: 5344 4b5f 434f 5245 5f52 4551 5545 5354  SDK_CORE_REQUEST
-000099d0: 5f52 4541 534f 4e27 5d20 3d20 2762 2f74  _REASON'] = 'b/t
-000099e0: 6869 735f 6973 5f65 6e76 5f72 6561 736f  his_is_env_reaso
-000099f0: 6e27 0a20 2020 2062 7563 6b65 745f 7572  n'.    bucket_ur
-00009a00: 6920 3d20 7365 6c66 2e43 7265 6174 6542  i = self.CreateB
-00009a10: 7563 6b65 7428 290a 2020 2020 6473 745f  ucket().    dst_
-00009a20: 7572 6920 3d20 7375 7269 2862 7563 6b65  uri = suri(bucke
-00009a30: 745f 7572 692c 2027 666f 6f27 290a 2020  t_uri, 'foo').  
-00009a40: 2020 6670 6174 6820 3d20 7365 6c66 2e5f    fpath = self._
-00009a50: 6765 745f 7465 7374 5f66 696c 6528 2774  get_test_file('t
-00009a60: 6573 742e 6769 6627 290a 2020 2020 2320  est.gif').    # 
-00009a70: 456e 7375 7265 2078 2d67 6f6f 672d 7265  Ensure x-goog-re
-00009a80: 7175 6573 742d 6865 6164 6572 2069 7320  quest-header is 
-00009a90: 7365 7420 696e 2063 7020 636f 6d6d 616e  set in cp comman
-00009aa0: 640a 2020 2020 7374 6465 7272 203d 2073  d.    stderr = s
-00009ab0: 656c 662e 5275 6e47 7355 7469 6c28 5b27  elf.RunGsUtil(['
-00009ac0: 2d44 272c 2027 6370 272c 2066 7061 7468  -D', 'cp', fpath
-00009ad0: 2c20 6473 745f 7572 695d 2c20 7265 7475  , dst_uri], retu
-00009ae0: 726e 5f73 7464 6572 723d 5472 7565 290a  rn_stderr=True).
-00009af0: 2020 2020 7365 6c66 2e61 7373 6572 7452      self.assertR
-00009b00: 6567 6578 2873 7464 6572 722c 0a20 2020  egex(stderr,.   
-00009b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009b20: 2020 7227 5c27 782d 676f 6f67 2d72 6571    r'\'x-goog-req
-00009b30: 7565 7374 2d72 6561 736f 6e5c 273a 205c  uest-reason\': \
-00009b40: 2762 2f74 6869 735f 6973 5f65 6e76 5f72  'b/this_is_env_r
-00009b50: 6561 736f 6e5c 2727 290a 2020 2020 2320  eason\'').    # 
-00009b60: 456e 7375 7265 2078 2d67 6f6f 672d 7265  Ensure x-goog-re
-00009b70: 7175 6573 742d 6865 6164 6572 2069 7320  quest-header is 
-00009b80: 7365 7420 696e 206c 7320 636f 6d6d 616e  set in ls comman
-00009b90: 640a 2020 2020 7374 6465 7272 203d 2073  d.    stderr = s
-00009ba0: 656c 662e 5275 6e47 7355 7469 6c28 5b27  elf.RunGsUtil(['
-00009bb0: 2d44 272c 2027 6c73 272c 2027 2d4c 272c  -D', 'ls', '-L',
-00009bc0: 2064 7374 5f75 7269 5d2c 2072 6574 7572   dst_uri], retur
-00009bd0: 6e5f 7374 6465 7272 3d54 7275 6529 0a20  n_stderr=True). 
-00009be0: 2020 2073 656c 662e 6173 7365 7274 5265     self.assertRe
-00009bf0: 6765 7828 7374 6465 7272 2c0a 2020 2020  gex(stderr,.    
-00009c00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009c10: 2072 275c 2778 2d67 6f6f 672d 7265 7175   r'\'x-goog-requ
-00009c20: 6573 742d 7265 6173 6f6e 5c27 3a20 5c27  est-reason\': \'
-00009c30: 622f 7468 6973 5f69 735f 656e 765f 7265  b/this_is_env_re
-00009c40: 6173 6f6e 5c27 2729 0a0a 2020 4053 6571  ason\'')..  @Seq
-00009c50: 7565 6e74 6961 6c41 6e64 5061 7261 6c6c  uentialAndParall
-00009c60: 656c 5472 616e 7366 6572 0a20 2040 536b  elTransfer.  @Sk
-00009c70: 6970 466f 7258 4d4c 2827 584d 4c20 4150  ipForXML('XML AP
-00009c80: 4973 2075 7365 2061 2064 6966 6665 7265  Is use a differe
-00009c90: 6e74 2064 6562 7567 206c 6f67 2066 6f72  nt debug log for
-00009ca0: 6d61 742e 2729 0a20 2064 6566 2074 6573  mat.').  def tes
-00009cb0: 745f 7265 7175 6573 745f 7265 6173 6f6e  t_request_reason
-00009cc0: 5f68 6561 6465 725f 7065 7273 6973 7473  _header_persists
-00009cd0: 5f6d 756c 7469 706c 655f 7265 7175 6573  _multiple_reques
-00009ce0: 7473 5f6a 736f 6e28 7365 6c66 293a 0a20  ts_json(self):. 
-00009cf0: 2020 2022 2222 5465 7374 2074 6861 7420     """Test that 
-00009d00: 782d 676f 6f67 2d72 6571 7565 7374 2d68  x-goog-request-h
-00009d10: 6561 6465 7220 776f 726b 7320 7768 656e  eader works when
-00009d20: 2063 7020 7365 6e64 7320 6d75 6c74 6970   cp sends multip
-00009d30: 6c65 2072 6571 7565 7374 732e 2222 220a  le requests.""".
-00009d40: 2020 2020 6f73 2e65 6e76 6972 6f6e 5b27      os.environ['
-00009d50: 434c 4f55 4453 444b 5f43 4f52 455f 5245  CLOUDSDK_CORE_RE
-00009d60: 5155 4553 545f 5245 4153 4f4e 275d 203d  QUEST_REASON'] =
-00009d70: 2027 622f 7468 6973 5f69 735f 656e 765f   'b/this_is_env_
-00009d80: 7265 6173 6f6e 270a 2020 2020 6275 636b  reason'.    buck
-00009d90: 6574 5f75 7269 203d 2073 656c 662e 4372  et_uri = self.Cr
-00009da0: 6561 7465 4275 636b 6574 2829 0a20 2020  eateBucket().   
-00009db0: 2064 7374 5f75 7269 203d 2073 7572 6928   dst_uri = suri(
-00009dc0: 6275 636b 6574 5f75 7269 2c20 2766 6f6f  bucket_uri, 'foo
-00009dd0: 2729 0a20 2020 2066 7061 7468 203d 2073  ').    fpath = s
-00009de0: 656c 662e 5f67 6574 5f74 6573 745f 6669  elf._get_test_fi
-00009df0: 6c65 2827 7465 7374 2e67 6966 2729 0a0a  le('test.gif')..
-00009e00: 2020 2020 626f 746f 5f63 6f6e 6669 675f      boto_config_
-00009e10: 666f 725f 7465 7374 203d 2028 2747 5355  for_test = ('GSU
-00009e20: 7469 6c27 2c20 2772 6573 756d 6162 6c65  til', 'resumable
-00009e30: 5f74 6872 6573 686f 6c64 272c 2027 3027  _threshold', '0'
-00009e40: 290a 2020 2020 7769 7468 2053 6574 426f  ).    with SetBo
-00009e50: 746f 436f 6e66 6967 466f 7254 6573 7428  toConfigForTest(
-00009e60: 5b62 6f74 6f5f 636f 6e66 6967 5f66 6f72  [boto_config_for
-00009e70: 5f74 6573 745d 293a 0a20 2020 2020 2073  _test]):.      s
-00009e80: 7464 6572 7220 3d20 7365 6c66 2e52 756e  tderr = self.Run
-00009e90: 4773 5574 696c 285b 272d 4427 2c20 2763  GsUtil(['-D', 'c
-00009ea0: 7027 2c20 6670 6174 682c 2064 7374 5f75  p', fpath, dst_u
-00009eb0: 7269 5d2c 2072 6574 7572 6e5f 7374 6465  ri], return_stde
-00009ec0: 7272 3d54 7275 6529 0a0a 2020 2020 2320  rr=True)..    # 
-00009ed0: 5055 5420 666f 6c6c 6f77 7320 4745 5420  PUT follows GET 
-00009ee0: 7265 7175 6573 742e 2042 6f74 6820 6e65  request. Both ne
-00009ef0: 6564 2074 6865 2072 6571 7565 7374 2d72  ed the request-r
-00009f00: 6561 736f 6e20 6865 6164 6572 2e0a 2020  eason header..  
-00009f10: 2020 7265 6173 6f6e 5f72 6567 6578 203d    reason_regex =
-00009f20: 2028 7227 4d61 6b69 6e67 2068 7474 7020   (r'Making http 
-00009f30: 4745 545b 5c73 5c53 5d2a 270a 2020 2020  GET[\s\S]*'.    
-00009f40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009f50: 7227 782d 676f 6f67 2d72 6571 7565 7374  r'x-goog-request
-00009f60: 2d72 6561 736f 6e5c 273a 205c 2762 2f74  -reason\': \'b/t
-00009f70: 6869 735f 6973 5f65 6e76 5f72 6561 736f  his_is_env_reaso
-00009f80: 6e5b 5c73 5c53 5d2a 270a 2020 2020 2020  n[\s\S]*'.      
-00009f90: 2020 2020 2020 2020 2020 2020 2020 7227                r'
-00009fa0: 7365 6e64 3a20 2862 5c27 293f 5055 545b  send: (b\')?PUT[
-00009fb0: 5c73 5c53 5d2a 782d 676f 6f67 2d72 6571  \s\S]*x-goog-req
-00009fc0: 7565 7374 2d72 6561 736f 6e3a 270a 2020  uest-reason:'.  
-00009fd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009fe0: 2020 7227 2062 2f74 6869 735f 6973 5f65    r' b/this_is_e
-00009ff0: 6e76 5f72 6561 736f 6e27 290a 2020 2020  nv_reason').    
-0000a000: 7365 6c66 2e61 7373 6572 7452 6567 6578  self.assertRegex
-0000a010: 2873 7464 6572 722c 2072 6561 736f 6e5f  (stderr, reason_
-0000a020: 7265 6765 7829 0a0a 2020 4053 6571 7565  regex)..  @Seque
-0000a030: 6e74 6961 6c41 6e64 5061 7261 6c6c 656c  ntialAndParallel
-0000a040: 5472 616e 7366 6572 0a20 2040 536b 6970  Transfer.  @Skip
-0000a050: 466f 724a 534f 4e28 274a 534f 4e20 4150  ForJSON('JSON AP
-0000a060: 4920 7573 6573 2061 2064 6966 6665 7265  I uses a differe
-0000a070: 6e74 2064 6562 7567 206c 6f67 2066 6f72  nt debug log for
-0000a080: 6d61 742e 2729 0a20 2064 6566 2074 6573  mat.').  def tes
-0000a090: 745f 7265 7175 6573 745f 7265 6173 6f6e  t_request_reason
-0000a0a0: 5f68 6561 6465 725f 7065 7273 6973 7473  _header_persists
-0000a0b0: 5f6d 756c 7469 706c 655f 7265 7175 6573  _multiple_reques
-0000a0c0: 7473 5f78 6d6c 2873 656c 6629 3a0a 2020  ts_xml(self):.  
-0000a0d0: 2020 2222 2254 6573 7420 7468 6174 2078    """Test that x
-0000a0e0: 2d67 6f6f 672d 7265 7175 6573 742d 6865  -goog-request-he
-0000a0f0: 6164 6572 2077 6f72 6b73 2077 6865 6e20  ader works when 
-0000a100: 6370 2073 656e 6473 206d 756c 7469 706c  cp sends multipl
-0000a110: 6520 7265 7175 6573 7473 2e22 2222 0a20  e requests.""". 
-0000a120: 2020 206f 732e 656e 7669 726f 6e5b 2743     os.environ['C
-0000a130: 4c4f 5544 5344 4b5f 434f 5245 5f52 4551  LOUDSDK_CORE_REQ
-0000a140: 5545 5354 5f52 4541 534f 4e27 5d20 3d20  UEST_REASON'] = 
-0000a150: 2762 2f74 6869 735f 6973 5f65 6e76 5f72  'b/this_is_env_r
-0000a160: 6561 736f 6e27 0a20 2020 2062 7563 6b65  eason'.    bucke
-0000a170: 745f 7572 6920 3d20 7365 6c66 2e43 7265  t_uri = self.Cre
-0000a180: 6174 6542 7563 6b65 7428 290a 2020 2020  ateBucket().    
-0000a190: 6473 745f 7572 6920 3d20 7375 7269 2862  dst_uri = suri(b
-0000a1a0: 7563 6b65 745f 7572 692c 2027 666f 6f27  ucket_uri, 'foo'
-0000a1b0: 290a 2020 2020 6670 6174 6820 3d20 7365  ).    fpath = se
-0000a1c0: 6c66 2e5f 6765 745f 7465 7374 5f66 696c  lf._get_test_fil
-0000a1d0: 6528 2774 6573 742e 6769 6627 290a 0a20  e('test.gif').. 
-0000a1e0: 2020 2062 6f74 6f5f 636f 6e66 6967 5f66     boto_config_f
-0000a1f0: 6f72 5f74 6573 7420 3d20 2827 4753 5574  or_test = ('GSUt
-0000a200: 696c 272c 2027 7265 7375 6d61 626c 655f  il', 'resumable_
-0000a210: 7468 7265 7368 6f6c 6427 2c20 2730 2729  threshold', '0')
-0000a220: 0a20 2020 2077 6974 6820 5365 7442 6f74  .    with SetBot
-0000a230: 6f43 6f6e 6669 6746 6f72 5465 7374 285b  oConfigForTest([
-0000a240: 626f 746f 5f63 6f6e 6669 675f 666f 725f  boto_config_for_
-0000a250: 7465 7374 5d29 3a0a 2020 2020 2020 7374  test]):.      st
-0000a260: 6465 7272 203d 2073 656c 662e 5275 6e47  derr = self.RunG
-0000a270: 7355 7469 6c28 5b27 2d44 272c 2027 6370  sUtil(['-D', 'cp
-0000a280: 272c 2066 7061 7468 2c20 6473 745f 7572  ', fpath, dst_ur
-0000a290: 695d 2c20 7265 7475 726e 5f73 7464 6572  i], return_stder
-0000a2a0: 723d 5472 7565 290a 0a20 2020 2072 6561  r=True)..    rea
-0000a2b0: 736f 6e5f 7265 6765 7820 3d20 280a 2020  son_regex = (.  
-0000a2c0: 2020 2020 2020 7227 4669 6e61 6c20 6865        r'Final he
-0000a2d0: 6164 6572 733a 205c 7b5b 5c73 5c53 5d2a  aders: \{[\s\S]*
-0000a2e0: 5c27 270a 2020 2020 2020 2020 7227 782d  \''.        r'x-
-0000a2f0: 676f 6f67 2d72 6571 7565 7374 2d72 6561  goog-request-rea
-0000a300: 736f 6e5c 273a 205c 2762 2f74 6869 735f  son\': \'b/this_
-0000a310: 6973 5f65 6e76 5f72 6561 736f 6e5c 275b  is_env_reason\'[
-0000a320: 5c73 5c53 5d2a 7d27 290a 0a20 2020 2023  \s\S]*}')..    #
-0000a330: 2050 6174 7465 726e 2073 686f 756c 6420   Pattern should 
-0000a340: 6d61 7463 6820 7477 6963 6520 7369 6e63  match twice sinc
-0000a350: 6520 7477 6f20 7265 7175 6573 7473 2073  e two requests s
-0000a360: 686f 756c 6420 6861 7665 2061 2072 6561  hould have a rea
-0000a370: 736f 6e20 6865 6164 6572 2e0a 2020 2020  son header..    
-0000a380: 7365 6c66 2e61 7373 6572 7452 6567 6578  self.assertRegex
-0000a390: 2873 7464 6572 722c 2072 6561 736f 6e5f  (stderr, reason_
-0000a3a0: 7265 6765 7820 2b20 7227 5b5c 735c 535d  regex + r'[\s\S]
-0000a3b0: 2a27 202b 2072 6561 736f 6e5f 7265 6765  *' + reason_rege
-0000a3c0: 7829 0a0a 2020 4053 6571 7565 6e74 6961  x)..  @Sequentia
-0000a3d0: 6c41 6e64 5061 7261 6c6c 656c 5472 616e  lAndParallelTran
-0000a3e0: 7366 6572 0a20 2064 6566 2074 6573 745f  sfer.  def test_
-0000a3f0: 7665 7273 696f 6e69 6e67 2873 656c 6629  versioning(self)
-0000a400: 3a0a 2020 2020 2222 2254 6573 7473 2063  :.    """Tests c
-0000a410: 6f70 7920 7769 7468 2076 6572 7369 6f6e  opy with version
-0000a420: 696e 672e 2222 220a 2020 2020 6275 636b  ing.""".    buck
-0000a430: 6574 5f75 7269 203d 2073 656c 662e 4372  et_uri = self.Cr
-0000a440: 6561 7465 5665 7273 696f 6e65 6442 7563  eateVersionedBuc
-0000a450: 6b65 7428 290a 2020 2020 6b31 5f75 7269  ket().    k1_uri
-0000a460: 203d 2073 656c 662e 4372 6561 7465 4f62   = self.CreateOb
-0000a470: 6a65 6374 2862 7563 6b65 745f 7572 693d  ject(bucket_uri=
-0000a480: 6275 636b 6574 5f75 7269 2c20 636f 6e74  bucket_uri, cont
-0000a490: 656e 7473 3d62 2764 6174 6132 2729 0a20  ents=b'data2'). 
-0000a4a0: 2020 206b 325f 7572 6920 3d20 7365 6c66     k2_uri = self
-0000a4b0: 2e43 7265 6174 654f 626a 6563 7428 6275  .CreateObject(bu
-0000a4c0: 636b 6574 5f75 7269 3d62 7563 6b65 745f  cket_uri=bucket_
-0000a4d0: 7572 692c 2063 6f6e 7465 6e74 733d 6227  uri, contents=b'
-0000a4e0: 6461 7461 3127 290a 2020 2020 6731 203d  data1').    g1 =
-0000a4f0: 2075 7269 6765 6e28 6b32 5f75 7269 290a   urigen(k2_uri).
-0000a500: 2020 2020 7365 6c66 2e52 756e 4773 5574      self.RunGsUt
-0000a510: 696c 285b 2763 7027 2c20 7375 7269 286b  il(['cp', suri(k
-0000a520: 315f 7572 6929 2c20 7375 7269 286b 325f  1_uri), suri(k2_
-0000a530: 7572 6929 5d29 0a20 2020 206b 325f 7572  uri)]).    k2_ur
-0000a540: 6920 3d20 7365 6c66 2e53 746f 7261 6765  i = self.Storage
-0000a550: 5572 6943 6c6f 6e65 5265 706c 6163 654e  UriCloneReplaceN
-0000a560: 616d 6528 6275 636b 6574 5f75 7269 2c20  ame(bucket_uri, 
-0000a570: 6b32 5f75 7269 2e6f 626a 6563 745f 6e61  k2_uri.object_na
-0000a580: 6d65 290a 2020 2020 6b32 5f75 7269 203d  me).    k2_uri =
-0000a590: 2073 656c 662e 5374 6f72 6167 6555 7269   self.StorageUri
-0000a5a0: 436c 6f6e 6552 6570 6c61 6365 4b65 7928  CloneReplaceKey(
-0000a5b0: 6275 636b 6574 5f75 7269 2c20 6b32 5f75  bucket_uri, k2_u
-0000a5c0: 7269 2e67 6574 5f6b 6579 2829 290a 2020  ri.get_key()).  
-0000a5d0: 2020 6732 203d 2075 7269 6765 6e28 6b32    g2 = urigen(k2
-0000a5e0: 5f75 7269 290a 2020 2020 7365 6c66 2e53  _uri).    self.S
-0000a5f0: 746f 7261 6765 5572 6953 6574 436f 6e74  torageUriSetCont
-0000a600: 656e 7473 4672 6f6d 5374 7269 6e67 286b  entsFromString(k
-0000a610: 325f 7572 692c 2027 6461 7461 3327 290a  2_uri, 'data3').
-0000a620: 2020 2020 6733 203d 2075 7269 6765 6e28      g3 = urigen(
-0000a630: 6b32 5f75 7269 290a 0a20 2020 2066 7061  k2_uri)..    fpa
-0000a640: 7468 203d 2073 656c 662e 4372 6561 7465  th = self.Create
-0000a650: 5465 6d70 4669 6c65 2829 0a20 2020 2023  TempFile().    #
-0000a660: 2043 6865 636b 2074 6f20 6d61 6b65 2073   Check to make s
-0000a670: 7572 6520 6375 7272 656e 7420 7665 7273  ure current vers
-0000a680: 696f 6e20 6973 2064 6174 6133 2e0a 2020  ion is data3..  
-0000a690: 2020 7365 6c66 2e52 756e 4773 5574 696c    self.RunGsUtil
-0000a6a0: 285b 2763 7027 2c20 6b32 5f75 7269 2e76  (['cp', k2_uri.v
-0000a6b0: 6572 7369 6f6e 6c65 7373 5f75 7269 2c20  ersionless_uri, 
-0000a6c0: 6670 6174 685d 290a 2020 2020 7769 7468  fpath]).    with
-0000a6d0: 206f 7065 6e28 6670 6174 682c 2027 7262   open(fpath, 'rb
-0000a6e0: 2729 2061 7320 663a 0a20 2020 2020 2073  ') as f:.      s
-0000a6f0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-0000a700: 662e 7265 6164 2829 2c20 6227 6461 7461  f.read(), b'data
-0000a710: 3327 290a 0a20 2020 2023 2043 6865 636b  3')..    # Check
-0000a720: 2063 6f6e 7465 6e74 7320 6f66 2061 6c6c   contents of all
-0000a730: 2074 6872 6565 2076 6572 7369 6f6e 730a   three versions.
-0000a740: 2020 2020 7365 6c66 2e52 756e 4773 5574      self.RunGsUt
-0000a750: 696c 285b 2763 7027 2c20 2725 7323 2573  il(['cp', '%s#%s
-0000a760: 2720 2520 286b 325f 7572 692e 7665 7273  ' % (k2_uri.vers
-0000a770: 696f 6e6c 6573 735f 7572 692c 2067 3129  ionless_uri, g1)
-0000a780: 2c20 6670 6174 685d 290a 2020 2020 7769  , fpath]).    wi
-0000a790: 7468 206f 7065 6e28 6670 6174 682c 2027  th open(fpath, '
-0000a7a0: 7262 2729 2061 7320 663a 0a20 2020 2020  rb') as f:.     
-0000a7b0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-0000a7c0: 6c28 662e 7265 6164 2829 2c20 6227 6461  l(f.read(), b'da
-0000a7d0: 7461 3127 290a 2020 2020 7365 6c66 2e52  ta1').    self.R
-0000a7e0: 756e 4773 5574 696c 285b 2763 7027 2c20  unGsUtil(['cp', 
-0000a7f0: 2725 7323 2573 2720 2520 286b 325f 7572  '%s#%s' % (k2_ur
-0000a800: 692e 7665 7273 696f 6e6c 6573 735f 7572  i.versionless_ur
-0000a810: 692c 2067 3229 2c20 6670 6174 685d 290a  i, g2), fpath]).
-0000a820: 2020 2020 7769 7468 206f 7065 6e28 6670      with open(fp
-0000a830: 6174 682c 2027 7262 2729 2061 7320 663a  ath, 'rb') as f:
-0000a840: 0a20 2020 2020 2073 656c 662e 6173 7365  .      self.asse
-0000a850: 7274 4571 7561 6c28 662e 7265 6164 2829  rtEqual(f.read()
-0000a860: 2c20 6227 6461 7461 3227 290a 2020 2020  , b'data2').    
-0000a870: 7365 6c66 2e52 756e 4773 5574 696c 285b  self.RunGsUtil([
-0000a880: 2763 7027 2c20 2725 7323 2573 2720 2520  'cp', '%s#%s' % 
-0000a890: 286b 325f 7572 692e 7665 7273 696f 6e6c  (k2_uri.versionl
-0000a8a0: 6573 735f 7572 692c 2067 3329 2c20 6670  ess_uri, g3), fp
-0000a8b0: 6174 685d 290a 2020 2020 7769 7468 206f  ath]).    with o
-0000a8c0: 7065 6e28 6670 6174 682c 2027 7262 2729  pen(fpath, 'rb')
-0000a8d0: 2061 7320 663a 0a20 2020 2020 2073 656c   as f:.      sel
-0000a8e0: 662e 6173 7365 7274 4571 7561 6c28 662e  f.assertEqual(f.
-0000a8f0: 7265 6164 2829 2c20 6227 6461 7461 3327  read(), b'data3'
-0000a900: 290a 0a20 2020 2023 2043 6f70 7920 6669  )..    # Copy fi
-0000a910: 7273 7420 7665 7273 696f 6e20 746f 2063  rst version to c
-0000a920: 7572 7265 6e74 2061 6e64 2076 6572 6966  urrent and verif
-0000a930: 792e 0a20 2020 2073 656c 662e 5275 6e47  y..    self.RunG
-0000a940: 7355 7469 6c28 0a20 2020 2020 2020 205b  sUtil(.        [
-0000a950: 2763 7027 2c0a 2020 2020 2020 2020 2027  'cp',.         '
-0000a960: 2573 2325 7327 2025 2028 6b32 5f75 7269  %s#%s' % (k2_uri
-0000a970: 2e76 6572 7369 6f6e 6c65 7373 5f75 7269  .versionless_uri
-0000a980: 2c20 6731 292c 206b 325f 7572 692e 7665  , g1), k2_uri.ve
-0000a990: 7273 696f 6e6c 6573 735f 7572 695d 290a  rsionless_uri]).
-0000a9a0: 2020 2020 7365 6c66 2e52 756e 4773 5574      self.RunGsUt
-0000a9b0: 696c 285b 2763 7027 2c20 6b32 5f75 7269  il(['cp', k2_uri
-0000a9c0: 2e76 6572 7369 6f6e 6c65 7373 5f75 7269  .versionless_uri
-0000a9d0: 2c20 6670 6174 685d 290a 2020 2020 7769  , fpath]).    wi
-0000a9e0: 7468 206f 7065 6e28 6670 6174 682c 2027  th open(fpath, '
-0000a9f0: 7262 2729 2061 7320 663a 0a20 2020 2020  rb') as f:.     
-0000aa00: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-0000aa10: 6c28 662e 7265 6164 2829 2c20 6227 6461  l(f.read(), b'da
-0000aa20: 7461 3127 290a 0a20 2020 2023 2041 7474  ta1')..    # Att
-0000aa30: 656d 7074 2074 6f20 7370 6563 6966 7920  empt to specify 
-0000aa40: 6120 7665 7273 696f 6e2d 7370 6563 6966  a version-specif
-0000aa50: 6963 2055 5249 2066 6f72 2064 6573 7469  ic URI for desti
-0000aa60: 6e61 7469 6f6e 2e0a 2020 2020 7374 6465  nation..    stde
-0000aa70: 7272 203d 2073 656c 662e 5275 6e47 7355  rr = self.RunGsU
-0000aa80: 7469 6c28 5b27 6370 272c 2066 7061 7468  til(['cp', fpath
-0000aa90: 2c20 6b32 5f75 7269 2e75 7269 5d2c 0a20  , k2_uri.uri],. 
-0000aaa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000aab0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0000aac0: 6e5f 7374 6465 7272 3d54 7275 652c 0a20  n_stderr=True,. 
-0000aad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000aae0: 2020 2020 2020 2020 2020 2065 7870 6563             expec
-0000aaf0: 7465 645f 7374 6174 7573 3d31 290a 2020  ted_status=1).  
-0000ab00: 2020 6966 2073 656c 662e 5f75 7365 5f67    if self._use_g
-0000ab10: 636c 6f75 645f 7374 6f72 6167 653a 0a20  cloud_storage:. 
-0000ab20: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-0000ab30: 496e 280a 2020 2020 2020 2020 2020 2764  In(.          'd
-0000ab40: 6573 7469 6e61 7469 6f6e 2061 7267 756d  estination argum
-0000ab50: 656e 7420 6f66 2074 6865 2063 7020 636f  ent of the cp co
-0000ab60: 6d6d 616e 6420 6361 6e6e 6f74 270a 2020  mmand cannot'.  
-0000ab70: 2020 2020 2020 2020 2720 6265 2061 2076          ' be a v
-0000ab80: 6572 7369 6f6e 2d73 7065 6369 6669 6320  ersion-specific 
-0000ab90: 5552 4c27 2c20 7374 6465 7272 290a 2020  URL', stderr).  
-0000aba0: 2020 656c 7365 3a0a 2020 2020 2020 7365    else:.      se
-0000abb0: 6c66 2e61 7373 6572 7449 6e28 2763 616e  lf.assertIn('can
-0000abc0: 6e6f 7420 6265 2074 6865 2064 6573 7469  not be the desti
-0000abd0: 6e61 7469 6f6e 2066 6f72 2067 7375 7469  nation for gsuti
-0000abe0: 6c20 6370 272c 2073 7464 6572 7229 0a0a  l cp', stderr)..
-0000abf0: 2020 6465 6620 7465 7374 5f76 6572 7369    def test_versi
-0000ac00: 6f6e 696e 675f 6e6f 5f70 6172 616c 6c65  oning_no_paralle
-0000ac10: 6c69 736d 2873 656c 6629 3a0a 2020 2020  lism(self):.    
-0000ac20: 2222 2254 6573 7473 2074 6861 7420 636f  """Tests that co
-0000ac30: 7079 2061 6c6c 2d76 6572 7369 6f6e 7320  py all-versions 
-0000ac40: 6572 726f 7273 2077 6865 6e20 7061 7261  errors when para
-0000ac50: 6c6c 656c 6973 6d20 6973 2065 6e61 626c  llelism is enabl
-0000ac60: 6564 2e22 2222 0a20 2020 2023 2054 4f44  ed.""".    # TOD
-0000ac70: 4f28 622f 3133 3537 3830 3636 3129 3a20  O(b/135780661): 
-0000ac80: 5265 6d6f 7665 2072 6574 7279 2061 6674  Remove retry aft
-0000ac90: 6572 2062 7567 2072 6573 6f6c 7665 640a  er bug resolved.
-0000aca0: 2020 2020 4052 6574 7279 2841 7373 6572      @Retry(Asser
-0000acb0: 7469 6f6e 4572 726f 722c 2074 7269 6573  tionError, tries
-0000acc0: 3d33 2c20 7469 6d65 6f75 745f 7365 6373  =3, timeout_secs
-0000acd0: 3d31 290a 2020 2020 6465 6620 5f43 6865  =1).    def _Che
-0000ace0: 636b 2829 3a0a 2020 2020 2020 7374 6465  ck():.      stde
-0000acf0: 7272 203d 2073 656c 662e 5275 6e47 7355  rr = self.RunGsU
-0000ad00: 7469 6c28 5b0a 2020 2020 2020 2020 2020  til([.          
-0000ad10: 272d 6d27 2c20 2763 7027 2c20 272d 4127  '-m', 'cp', '-A'
-0000ad20: 2c0a 2020 2020 2020 2020 2020 7375 7269  ,.          suri
-0000ad30: 2873 656c 662e 6e6f 6e65 7869 7374 656e  (self.nonexisten
-0000ad40: 745f 6275 636b 6574 5f6e 616d 652c 2027  t_bucket_name, '
-0000ad50: 666f 6f27 292c 0a20 2020 2020 2020 2020  foo'),.         
-0000ad60: 2073 7572 6928 7365 6c66 2e6e 6f6e 6578   suri(self.nonex
-0000ad70: 6973 7465 6e74 5f62 7563 6b65 745f 6e61  istent_bucket_na
-0000ad80: 6d65 2c20 2762 6172 2729 0a20 2020 2020  me, 'bar').     
-0000ad90: 205d 2c0a 2020 2020 2020 2020 2020 2020   ],.            
-0000ada0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000adb0: 2020 6578 7065 6374 6564 5f73 7461 7475    expected_statu
-0000adc0: 733d 312c 0a20 2020 2020 2020 2020 2020  s=1,.           
-0000add0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ade0: 2020 2072 6574 7572 6e5f 7374 6465 7272     return_stderr
-0000adf0: 3d54 7275 6529 0a20 2020 2020 2073 656c  =True).      sel
-0000ae00: 662e 6173 7365 7274 496e 2827 2d6d 206f  f.assertIn('-m o
-0000ae10: 7074 696f 6e20 6973 206e 6f74 2073 7570  ption is not sup
-0000ae20: 706f 7274 6564 2077 6974 6820 7468 6520  ported with the 
-0000ae30: 6370 202d 4120 666c 6167 272c 2073 7464  cp -A flag', std
-0000ae40: 6572 7229 0a0a 2020 2020 5f43 6865 636b  err)..    _Check
-0000ae50: 2829 0a0a 2020 4053 6b69 7046 6f72 5333  ()..  @SkipForS3
-0000ae60: 2827 5333 206c 6973 7473 2076 6572 7369  ('S3 lists versi
-0000ae70: 6f6e 6564 206f 626a 6563 7473 2069 6e20  oned objects in 
-0000ae80: 7265 7665 7273 6520 7469 6d65 7374 616d  reverse timestam
-0000ae90: 7020 6f72 6465 722e 2729 0a20 2064 6566  p order.').  def
-0000aea0: 2074 6573 745f 7265 6375 7273 6976 655f   test_recursive_
-0000aeb0: 636f 7079 696e 675f 7665 7273 696f 6e65  copying_versione
-0000aec0: 645f 6275 636b 6574 2873 656c 6629 3a0a  d_bucket(self):.
-0000aed0: 2020 2020 2222 2254 6573 7473 2063 7020      """Tests cp 
-0000aee0: 2d52 2077 6974 6820 7665 7273 696f 6e65  -R with versione
-0000aef0: 6420 6275 636b 6574 732e 2222 220a 2020  d buckets.""".  
-0000af00: 2020 6275 636b 6574 315f 7572 6920 3d20    bucket1_uri = 
-0000af10: 7365 6c66 2e43 7265 6174 6556 6572 7369  self.CreateVersi
-0000af20: 6f6e 6564 4275 636b 6574 2829 0a20 2020  onedBucket().   
-0000af30: 2062 7563 6b65 7432 5f75 7269 203d 2073   bucket2_uri = s
-0000af40: 656c 662e 4372 6561 7465 5665 7273 696f  elf.CreateVersio
-0000af50: 6e65 6442 7563 6b65 7428 290a 2020 2020  nedBucket().    
-0000af60: 6275 636b 6574 335f 7572 6920 3d20 7365  bucket3_uri = se
-0000af70: 6c66 2e43 7265 6174 6556 6572 7369 6f6e  lf.CreateVersion
-0000af80: 6564 4275 636b 6574 2829 0a0a 2020 2020  edBucket()..    
-0000af90: 2320 5772 6974 6520 7477 6f20 7665 7273  # Write two vers
-0000afa0: 696f 6e73 206f 6620 616e 206f 626a 6563  ions of an objec
-0000afb0: 7420 746f 2074 6865 2062 7563 6b65 7431  t to the bucket1
-0000afc0: 2e0a 2020 2020 7631 5f75 7269 203d 2073  ..    v1_uri = s
-0000afd0: 656c 662e 4372 6561 7465 4f62 6a65 6374  elf.CreateObject
-0000afe0: 2862 7563 6b65 745f 7572 693d 6275 636b  (bucket_uri=buck
-0000aff0: 6574 315f 7572 692c 0a20 2020 2020 2020  et1_uri,.       
-0000b000: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b010: 2020 2020 2020 2020 6f62 6a65 6374 5f6e          object_n
-0000b020: 616d 653d 276b 272c 0a20 2020 2020 2020  ame='k',.       
-0000b030: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b040: 2020 2020 2020 2020 636f 6e74 656e 7473          contents
-0000b050: 3d62 2764 6174 6130 2729 0a20 2020 2073  =b'data0').    s
-0000b060: 656c 662e 4372 6561 7465 4f62 6a65 6374  elf.CreateObject
-0000b070: 2862 7563 6b65 745f 7572 693d 6275 636b  (bucket_uri=buck
-0000b080: 6574 315f 7572 692c 0a20 2020 2020 2020  et1_uri,.       
-0000b090: 2020 2020 2020 2020 2020 2020 2020 206f                 o
-0000b0a0: 626a 6563 745f 6e61 6d65 3d27 6b27 2c0a  bject_name='k',.
-0000b0b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b0c0: 2020 2020 2020 636f 6e74 656e 7473 3d62        contents=b
-0000b0d0: 276c 6f6e 6765 725f 6461 7461 3127 2c0a  'longer_data1',.
-0000b0e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b0f0: 2020 2020 2020 6773 5f69 6465 6d70 6f74        gs_idempot
-0000b100: 656e 745f 6765 6e65 7261 7469 6f6e 3d75  ent_generation=u
-0000b110: 7269 6765 6e28 7631 5f75 7269 2929 0a0a  rigen(v1_uri))..
-0000b120: 2020 2020 7365 6c66 2e41 7373 6572 744e      self.AssertN
-0000b130: 4f62 6a65 6374 7349 6e42 7563 6b65 7428  ObjectsInBucket(
-0000b140: 6275 636b 6574 315f 7572 692c 2032 2c20  bucket1_uri, 2, 
-0000b150: 7665 7273 696f 6e65 643d 5472 7565 290a  versioned=True).
-0000b160: 2020 2020 7365 6c66 2e41 7373 6572 744e      self.AssertN
-0000b170: 4f62 6a65 6374 7349 6e42 7563 6b65 7428  ObjectsInBucket(
-0000b180: 6275 636b 6574 325f 7572 692c 2030 2c20  bucket2_uri, 0, 
-0000b190: 7665 7273 696f 6e65 643d 5472 7565 290a  versioned=True).
-0000b1a0: 2020 2020 7365 6c66 2e41 7373 6572 744e      self.AssertN
-0000b1b0: 4f62 6a65 6374 7349 6e42 7563 6b65 7428  ObjectsInBucket(
-0000b1c0: 6275 636b 6574 335f 7572 692c 2030 2c20  bucket3_uri, 0, 
-0000b1d0: 7665 7273 696f 6e65 643d 5472 7565 290a  versioned=True).
-0000b1e0: 0a20 2020 2023 2052 6563 7572 7369 7665  .    # Recursive
-0000b1f0: 6c79 2063 6f70 7920 746f 2073 6563 6f6e  ly copy to secon
-0000b200: 6420 7665 7273 696f 6e65 6420 6275 636b  d versioned buck
-0000b210: 6574 2e0a 2020 2020 2320 2d41 2066 6c61  et..    # -A fla
-0000b220: 6720 7368 6f75 6c64 2063 6f70 7920 616c  g should copy al
-0000b230: 6c20 7665 7273 696f 6e73 2069 6e20 6f72  l versions in or
-0000b240: 6465 722e 0a20 2020 2073 656c 662e 5275  der..    self.Ru
-0000b250: 6e47 7355 7469 6c28 0a20 2020 2020 2020  nGsUtil(.       
-0000b260: 205b 2763 7027 2c20 272d 5227 2c20 272d   ['cp', '-R', '-
-0000b270: 4127 2c0a 2020 2020 2020 2020 2073 7572  A',.         sur
-0000b280: 6928 6275 636b 6574 315f 7572 692c 2027  i(bucket1_uri, '
-0000b290: 2a27 292c 0a20 2020 2020 2020 2020 7375  *'),.         su
-0000b2a0: 7269 2862 7563 6b65 7432 5f75 7269 295d  ri(bucket2_uri)]
-0000b2b0: 290a 0a20 2020 2023 2055 7365 2040 5265  )..    # Use @Re
-0000b2c0: 7472 7920 6173 2068 6564 6765 2061 6761  try as hedge aga
-0000b2d0: 696e 7374 2062 7563 6b65 7420 6c69 7374  inst bucket list
-0000b2e0: 696e 6720 6576 656e 7475 616c 2063 6f6e  ing eventual con
-0000b2f0: 7369 7374 656e 6379 2e0a 2020 2020 4052  sistency..    @R
-0000b300: 6574 7279 2841 7373 6572 7469 6f6e 4572  etry(AssertionEr
-0000b310: 726f 722c 2074 7269 6573 3d33 2c20 7469  ror, tries=3, ti
-0000b320: 6d65 6f75 745f 7365 6373 3d31 290a 2020  meout_secs=1).  
-0000b330: 2020 6465 6620 5f43 6865 636b 3228 293a    def _Check2():
-0000b340: 0a20 2020 2020 2022 2222 5661 6c69 6461  .      """Valida
-0000b350: 7465 7320 7468 6520 7265 7375 6c74 7320  tes the results 
-0000b360: 6f66 2074 6865 2063 7020 2d52 2e22 2222  of the cp -R."""
-0000b370: 0a20 2020 2020 206c 6973 7469 6e67 3120  .      listing1 
-0000b380: 3d20 7365 6c66 2e52 756e 4773 5574 696c  = self.RunGsUtil
-0000b390: 285b 276c 7327 2c20 272d 6c61 272c 2073  (['ls', '-la', s
-0000b3a0: 7572 6928 6275 636b 6574 315f 7572 6929  uri(bucket1_uri)
-0000b3b0: 5d2c 0a20 2020 2020 2020 2020 2020 2020  ],.             
-0000b3c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b3d0: 2020 2072 6574 7572 6e5f 7374 646f 7574     return_stdout
-0000b3e0: 3d54 7275 6529 2e73 706c 6974 2827 5c6e  =True).split('\n
-0000b3f0: 2729 0a20 2020 2020 206c 6973 7469 6e67  ').      listing
-0000b400: 3220 3d20 7365 6c66 2e52 756e 4773 5574  2 = self.RunGsUt
-0000b410: 696c 285b 276c 7327 2c20 272d 6c61 272c  il(['ls', '-la',
-0000b420: 2073 7572 6928 6275 636b 6574 325f 7572   suri(bucket2_ur
-0000b430: 6929 5d2c 0a20 2020 2020 2020 2020 2020  i)],.           
-0000b440: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b450: 2020 2020 2072 6574 7572 6e5f 7374 646f       return_stdo
-0000b460: 7574 3d54 7275 6529 2e73 706c 6974 2827  ut=True).split('
-0000b470: 5c6e 2729 0a20 2020 2020 2023 2032 206c  \n').      # 2 l
-0000b480: 696e 6573 206f 6620 6c69 7374 696e 6720  ines of listing 
-0000b490: 6f75 7470 7574 2c20 3120 7375 6d6d 6172  output, 1 summar
-0000b4a0: 7920 6c69 6e65 2c20 3120 656d 7074 7920  y line, 1 empty 
-0000b4b0: 6c69 6e65 2066 726f 6d20 5c6e 2073 706c  line from \n spl
-0000b4c0: 6974 2e0a 2020 2020 2020 7365 6c66 2e61  it..      self.a
-0000b4d0: 7373 6572 7445 7175 616c 7328 6c65 6e28  ssertEquals(len(
-0000b4e0: 6c69 7374 696e 6731 292c 2034 290a 2020  listing1), 4).  
-0000b4f0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-0000b500: 7175 616c 7328 6c65 6e28 6c69 7374 696e  quals(len(listin
-0000b510: 6732 292c 2034 290a 0a20 2020 2020 2023  g2), 4)..      #
-0000b520: 2046 6972 7374 206f 626a 6563 7420 696e   First object in
-0000b530: 2065 6163 6820 6275 636b 6574 2073 686f   each bucket sho
-0000b540: 756c 6420 6d61 7463 6820 696e 2073 697a  uld match in siz
-0000b550: 6520 616e 6420 7665 7273 696f 6e2d 6c65  e and version-le
-0000b560: 7373 206e 616d 652e 0a20 2020 2020 2073  ss name..      s
-0000b570: 697a 6531 2c20 5f2c 2075 7269 5f73 7472  ize1, _, uri_str
-0000b580: 312c 205f 203d 206c 6973 7469 6e67 315b  1, _ = listing1[
-0000b590: 305d 2e73 706c 6974 2829 0a20 2020 2020  0].split().     
-0000b5a0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-0000b5b0: 6c73 2873 697a 6531 2c20 7374 7228 6c65  ls(size1, str(le
-0000b5c0: 6e28 2764 6174 6130 2729 2929 0a20 2020  n('data0'))).   
-0000b5d0: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-0000b5e0: 7561 6c73 2873 746f 7261 6765 5f75 7269  uals(storage_uri
-0000b5f0: 2875 7269 5f73 7472 3129 2e6f 626a 6563  (uri_str1).objec
-0000b600: 745f 6e61 6d65 2c20 276b 2729 0a20 2020  t_name, 'k').   
-0000b610: 2020 2073 697a 6532 2c20 5f2c 2075 7269     size2, _, uri
-0000b620: 5f73 7472 322c 205f 203d 206c 6973 7469  _str2, _ = listi
-0000b630: 6e67 325b 305d 2e73 706c 6974 2829 0a20  ng2[0].split(). 
-0000b640: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-0000b650: 4571 7561 6c73 2873 697a 6532 2c20 7374  Equals(size2, st
-0000b660: 7228 6c65 6e28 2764 6174 6130 2729 2929  r(len('data0')))
-0000b670: 0a20 2020 2020 2073 656c 662e 6173 7365  .      self.asse
-0000b680: 7274 4571 7561 6c73 2873 746f 7261 6765  rtEquals(storage
-0000b690: 5f75 7269 2875 7269 5f73 7472 3229 2e6f  _uri(uri_str2).o
-0000b6a0: 626a 6563 745f 6e61 6d65 2c20 276b 2729  bject_name, 'k')
-0000b6b0: 0a0a 2020 2020 2020 2320 5369 6d69 6c61  ..      # Simila
-0000b6c0: 726c 7920 666f 7220 7365 636f 6e64 206f  rly for second o
-0000b6d0: 626a 6563 7420 696e 2065 6163 6820 6275  bject in each bu
-0000b6e0: 636b 6574 2e0a 2020 2020 2020 7369 7a65  cket..      size
-0000b6f0: 312c 205f 2c20 7572 695f 7374 7231 2c20  1, _, uri_str1, 
-0000b700: 5f20 3d20 6c69 7374 696e 6731 5b31 5d2e  _ = listing1[1].
-0000b710: 7370 6c69 7428 290a 2020 2020 2020 7365  split().      se
-0000b720: 6c66 2e61 7373 6572 7445 7175 616c 7328  lf.assertEquals(
-0000b730: 7369 7a65 312c 2073 7472 286c 656e 2827  size1, str(len('
-0000b740: 6c6f 6e67 6572 5f64 6174 6131 2729 2929  longer_data1')))
-0000b750: 0a20 2020 2020 2073 656c 662e 6173 7365  .      self.asse
-0000b760: 7274 4571 7561 6c73 2873 746f 7261 6765  rtEquals(storage
-0000b770: 5f75 7269 2875 7269 5f73 7472 3129 2e6f  _uri(uri_str1).o
-0000b780: 626a 6563 745f 6e61 6d65 2c20 276b 2729  bject_name, 'k')
-0000b790: 0a20 2020 2020 2073 697a 6532 2c20 5f2c  .      size2, _,
-0000b7a0: 2075 7269 5f73 7472 322c 205f 203d 206c   uri_str2, _ = l
-0000b7b0: 6973 7469 6e67 325b 315d 2e73 706c 6974  isting2[1].split
-0000b7c0: 2829 0a20 2020 2020 2073 656c 662e 6173  ().      self.as
-0000b7d0: 7365 7274 4571 7561 6c73 2873 697a 6532  sertEquals(size2
-0000b7e0: 2c20 7374 7228 6c65 6e28 276c 6f6e 6765  , str(len('longe
-0000b7f0: 725f 6461 7461 3127 2929 290a 2020 2020  r_data1'))).    
-0000b800: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-0000b810: 616c 7328 7374 6f72 6167 655f 7572 6928  als(storage_uri(
-0000b820: 7572 695f 7374 7232 292e 6f62 6a65 6374  uri_str2).object
-0000b830: 5f6e 616d 652c 2027 6b27 290a 0a20 2020  _name, 'k')..   
-0000b840: 205f 4368 6563 6b32 2829 0a0a 2020 2020   _Check2()..    
-0000b850: 2320 5265 6375 7273 6976 656c 7920 636f  # Recursively co
-0000b860: 7079 2074 6f20 7365 636f 6e64 2076 6572  py to second ver
-0000b870: 7369 6f6e 6564 2062 7563 6b65 7420 7769  sioned bucket wi
-0000b880: 7468 206e 6f20 2d41 2066 6c61 672e 0a20  th no -A flag.. 
-0000b890: 2020 2023 2054 6869 7320 7368 6f75 6c64     # This should
-0000b8a0: 2063 6f70 7920 6f6e 6c79 2074 6865 206c   copy only the l
-0000b8b0: 6976 6520 6f62 6a65 6374 2e0a 2020 2020  ive object..    
-0000b8c0: 7365 6c66 2e52 756e 4773 5574 696c 285b  self.RunGsUtil([
-0000b8d0: 2763 7027 2c20 272d 5227 2c20 7375 7269  'cp', '-R', suri
-0000b8e0: 2862 7563 6b65 7431 5f75 7269 2c20 272a  (bucket1_uri, '*
-0000b8f0: 2729 2c20 7375 7269 2862 7563 6b65 7433  '), suri(bucket3
-0000b900: 5f75 7269 295d 290a 0a20 2020 2023 2055  _uri)])..    # U
-0000b910: 7365 2040 5265 7472 7920 6173 2068 6564  se @Retry as hed
-0000b920: 6765 2061 6761 696e 7374 2062 7563 6b65  ge against bucke
-0000b930: 7420 6c69 7374 696e 6720 6576 656e 7475  t listing eventu
-0000b940: 616c 2063 6f6e 7369 7374 656e 6379 2e0a  al consistency..
-0000b950: 2020 2020 4052 6574 7279 2841 7373 6572      @Retry(Asser
-0000b960: 7469 6f6e 4572 726f 722c 2074 7269 6573  tionError, tries
-0000b970: 3d33 2c20 7469 6d65 6f75 745f 7365 6373  =3, timeout_secs
-0000b980: 3d31 290a 2020 2020 6465 6620 5f43 6865  =1).    def _Che
-0000b990: 636b 3328 293a 0a20 2020 2020 2022 2222  ck3():.      """
-0000b9a0: 5661 6c69 6461 7465 7320 7468 6520 7265  Validates the re
-0000b9b0: 7375 6c74 7320 6f66 2074 6865 2063 7020  sults of the cp 
-0000b9c0: 2d52 2e22 2222 0a20 2020 2020 206c 6973  -R.""".      lis
-0000b9d0: 7469 6e67 3120 3d20 7365 6c66 2e52 756e  ting1 = self.Run
-0000b9e0: 4773 5574 696c 285b 276c 7327 2c20 272d  GsUtil(['ls', '-
-0000b9f0: 6c61 272c 2073 7572 6928 6275 636b 6574  la', suri(bucket
-0000ba00: 315f 7572 6929 5d2c 0a20 2020 2020 2020  1_uri)],.       
-0000ba10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ba20: 2020 2020 2020 2020 2072 6574 7572 6e5f           return_
-0000ba30: 7374 646f 7574 3d54 7275 6529 2e73 706c  stdout=True).spl
-0000ba40: 6974 2827 5c6e 2729 0a20 2020 2020 206c  it('\n').      l
-0000ba50: 6973 7469 6e67 3220 3d20 7365 6c66 2e52  isting2 = self.R
-0000ba60: 756e 4773 5574 696c 285b 276c 7327 2c20  unGsUtil(['ls', 
-0000ba70: 272d 6c61 272c 2073 7572 6928 6275 636b  '-la', suri(buck
-0000ba80: 6574 335f 7572 6929 5d2c 0a20 2020 2020  et3_uri)],.     
-0000ba90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000baa0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0000bab0: 6e5f 7374 646f 7574 3d54 7275 6529 2e73  n_stdout=True).s
-0000bac0: 706c 6974 2827 5c6e 2729 0a20 2020 2020  plit('\n').     
-0000bad0: 2023 2032 206c 696e 6573 206f 6620 6c69   # 2 lines of li
-0000bae0: 7374 696e 6720 6f75 7470 7574 2c20 3120  sting output, 1 
-0000baf0: 7375 6d6d 6172 7920 6c69 6e65 2c20 3120  summary line, 1 
-0000bb00: 656d 7074 7920 6c69 6e65 2066 726f 6d20  empty line from 
-0000bb10: 5c6e 2073 706c 6974 2e0a 2020 2020 2020  \n split..      
-0000bb20: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-0000bb30: 7328 6c65 6e28 6c69 7374 696e 6731 292c  s(len(listing1),
-0000bb40: 2034 290a 2020 2020 2020 2320 3120 6c69   4).      # 1 li
-0000bb50: 6e65 7320 6f66 206c 6973 7469 6e67 206f  nes of listing o
-0000bb60: 7574 7075 742c 2031 2073 756d 6d61 7279  utput, 1 summary
-0000bb70: 206c 696e 652c 2031 2065 6d70 7479 206c   line, 1 empty l
-0000bb80: 696e 6520 6672 6f6d 205c 6e20 7370 6c69  ine from \n spli
-0000bb90: 742e 0a20 2020 2020 2073 656c 662e 6173  t..      self.as
-0000bba0: 7365 7274 4571 7561 6c73 286c 656e 286c  sertEquals(len(l
-0000bbb0: 6973 7469 6e67 3229 2c20 3329 0a0a 2020  isting2), 3)..  
-0000bbc0: 2020 2020 2320 4c69 7665 2028 7365 636f      # Live (seco
-0000bbd0: 6e64 2920 6f62 6a65 6374 2069 6e20 6275  nd) object in bu
-0000bbe0: 636b 6574 2031 2073 686f 756c 6420 6d61  cket 1 should ma
-0000bbf0: 7463 6820 7468 6520 7369 6e67 6c65 206c  tch the single l
-0000bc00: 6976 6520 6f62 6a65 6374 2e0a 2020 2020  ive object..    
-0000bc10: 2020 7369 7a65 312c 205f 2c20 7572 695f    size1, _, uri_
-0000bc20: 7374 7231 2c20 5f20 3d20 6c69 7374 696e  str1, _ = listin
-0000bc30: 6732 5b30 5d2e 7370 6c69 7428 290a 2020  g2[0].split().  
-0000bc40: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-0000bc50: 7175 616c 7328 7369 7a65 312c 2073 7472  quals(size1, str
-0000bc60: 286c 656e 2827 6c6f 6e67 6572 5f64 6174  (len('longer_dat
-0000bc70: 6131 2729 2929 0a20 2020 2020 2073 656c  a1'))).      sel
-0000bc80: 662e 6173 7365 7274 4571 7561 6c73 2873  f.assertEquals(s
-0000bc90: 746f 7261 6765 5f75 7269 2875 7269 5f73  torage_uri(uri_s
-0000bca0: 7472 3129 2e6f 626a 6563 745f 6e61 6d65  tr1).object_name
-0000bcb0: 2c20 276b 2729 0a0a 2020 2020 5f43 6865  , 'k')..    _Che
-0000bcc0: 636b 3328 290a 0a20 2040 5365 7175 656e  ck3()..  @Sequen
-0000bcd0: 7469 616c 416e 6450 6172 616c 6c65 6c54  tialAndParallelT
-0000bce0: 7261 6e73 6665 720a 2020 4053 6b69 7046  ransfer.  @SkipF
-0000bcf0: 6f72 5333 2827 5072 6563 6f6e 6469 7469  orS3('Preconditi
-0000bd00: 6f6e 7320 6e6f 7420 7375 7070 6f72 7465  ons not supporte
-0000bd10: 6420 666f 7220 5333 2e27 290a 2020 6465  d for S3.').  de
-0000bd20: 6620 7465 7374 5f63 705f 6765 6e65 7261  f test_cp_genera
-0000bd30: 7469 6f6e 5f7a 6572 6f5f 6d61 7463 6828  tion_zero_match(
-0000bd40: 7365 6c66 293a 0a20 2020 2022 2222 5465  self):.    """Te
-0000bd50: 7374 7320 7468 6174 2063 7020 6861 6e64  sts that cp hand
-0000bd60: 6c65 7320 616e 206f 626a 6563 742d 6e6f  les an object-no
-0000bd70: 742d 6578 6973 7473 2070 7265 636f 6e64  t-exists precond
-0000bd80: 6974 696f 6e20 6865 6164 6572 2e22 2222  ition header."""
-0000bd90: 0a20 2020 2062 7563 6b65 745f 7572 6920  .    bucket_uri 
-0000bda0: 3d20 7365 6c66 2e43 7265 6174 6542 7563  = self.CreateBuc
-0000bdb0: 6b65 7428 290a 2020 2020 6670 6174 6831  ket().    fpath1
-0000bdc0: 203d 2073 656c 662e 4372 6561 7465 5465   = self.CreateTe
-0000bdd0: 6d70 4669 6c65 2863 6f6e 7465 6e74 733d  mpFile(contents=
-0000bde0: 6227 6461 7461 3127 290a 2020 2020 2320  b'data1').    # 
-0000bdf0: 4d61 7463 6820 3020 6d65 616e 7320 6f6e  Match 0 means on
-0000be00: 6c79 2077 7269 7465 2074 6865 206f 626a  ly write the obj
-0000be10: 6563 7420 6966 2069 7420 646f 6573 6e27  ect if it doesn'
-0000be20: 7420 616c 7265 6164 7920 6578 6973 742e  t already exist.
-0000be30: 0a20 2020 2067 656e 5f6d 6174 6368 5f68  .    gen_match_h
-0000be40: 6561 6465 7220 3d20 2778 2d67 6f6f 672d  eader = 'x-goog-
-0000be50: 6966 2d67 656e 6572 6174 696f 6e2d 6d61  if-generation-ma
-0000be60: 7463 683a 3027 0a0a 2020 2020 2320 4669  tch:0'..    # Fi
-0000be70: 7273 7420 636f 7079 2073 686f 756c 6420  rst copy should 
-0000be80: 7375 6363 6565 642e 0a20 2020 2023 2054  succeed..    # T
-0000be90: 4f44 4f3a 2054 6869 7320 6361 6e20 6661  ODO: This can fa
-0000bea0: 696c 2028 7261 7265 6c79 2920 6966 2074  il (rarely) if t
-0000beb0: 6865 2073 6572 7665 7220 7265 7475 726e  he server return
-0000bec0: 7320 6120 3578 7820 6275 7420 6163 7475  s a 5xx but actu
-0000bed0: 616c 6c79 0a20 2020 2023 2063 6f6d 6d69  ally.    # commi
-0000bee0: 7473 2074 6865 2062 7974 6573 2e20 4966  ts the bytes. If
-0000bef0: 2077 6520 6164 6420 7265 7374 6172 7473   we add restarts
-0000bf00: 206f 6e20 736d 616c 6c20 7570 6c6f 6164   on small upload
-0000bf10: 732c 2068 616e 646c 6520 7468 6973 0a20  s, handle this. 
-0000bf20: 2020 2023 2063 6173 652e 0a20 2020 2073     # case..    s
-0000bf30: 656c 662e 5275 6e47 7355 7469 6c28 5b27  elf.RunGsUtil(['
-0000bf40: 2d68 272c 2067 656e 5f6d 6174 6368 5f68  -h', gen_match_h
-0000bf50: 6561 6465 722c 2027 6370 272c 2066 7061  eader, 'cp', fpa
-0000bf60: 7468 312c 2073 7572 6928 6275 636b 6574  th1, suri(bucket
-0000bf70: 5f75 7269 295d 290a 0a20 2020 2023 2053  _uri)])..    # S
-0000bf80: 6563 6f6e 6420 636f 7079 2073 686f 756c  econd copy shoul
-0000bf90: 6420 6661 696c 2077 6974 6820 6120 7072  d fail with a pr
-0000bfa0: 6563 6f6e 6469 7469 6f6e 2065 7272 6f72  econdition error
-0000bfb0: 2e0a 2020 2020 7374 6465 7272 203d 2073  ..    stderr = s
-0000bfc0: 656c 662e 5275 6e47 7355 7469 6c28 0a20  elf.RunGsUtil(. 
-0000bfd0: 2020 2020 2020 205b 272d 6827 2c20 6765         ['-h', ge
-0000bfe0: 6e5f 6d61 7463 685f 6865 6164 6572 2c20  n_match_header, 
-0000bff0: 2763 7027 2c20 6670 6174 6831 2c0a 2020  'cp', fpath1,.  
-0000c000: 2020 2020 2020 2073 7572 6928 6275 636b         suri(buck
-0000c010: 6574 5f75 7269 295d 2c0a 2020 2020 2020  et_uri)],.      
-0000c020: 2020 7265 7475 726e 5f73 7464 6572 723d    return_stderr=
-0000c030: 5472 7565 2c0a 2020 2020 2020 2020 6578  True,.        ex
-0000c040: 7065 6374 6564 5f73 7461 7475 733d 3129  pected_status=1)
-0000c050: 0a20 2020 2073 656c 662e 6173 7365 7274  .    self.assert
-0000c060: 496e 2827 5072 6563 6f6e 6469 7469 6f6e  In('Precondition
-0000c070: 4578 6365 7074 696f 6e27 2c20 7374 6465  Exception', stde
-0000c080: 7272 290a 0a20 2040 5365 7175 656e 7469  rr)..  @Sequenti
-0000c090: 616c 416e 6450 6172 616c 6c65 6c54 7261  alAndParallelTra
-0000c0a0: 6e73 6665 720a 2020 4053 6b69 7046 6f72  nsfer.  @SkipFor
-0000c0b0: 5333 2827 5072 6563 6f6e 6469 7469 6f6e  S3('Precondition
-0000c0c0: 7320 6e6f 7420 7375 7070 6f72 7465 6420  s not supported 
-0000c0d0: 666f 7220 5333 2e27 290a 2020 6465 6620  for S3.').  def 
-0000c0e0: 7465 7374 5f63 705f 765f 6765 6e65 7261  test_cp_v_genera
-0000c0f0: 7469 6f6e 5f6d 6174 6368 2873 656c 6629  tion_match(self)
-0000c100: 3a0a 2020 2020 2222 2254 6573 7473 2074  :.    """Tests t
-0000c110: 6861 7420 6370 202d 7620 6f70 7469 6f6e  hat cp -v option
-0000c120: 2068 616e 646c 6573 2074 6865 2069 662d   handles the if-
-0000c130: 6765 6e65 7261 7469 6f6e 2d6d 6174 6368  generation-match
-0000c140: 2068 6561 6465 722e 2222 220a 2020 2020   header.""".    
-0000c150: 6275 636b 6574 5f75 7269 203d 2073 656c  bucket_uri = sel
-0000c160: 662e 4372 6561 7465 5665 7273 696f 6e65  f.CreateVersione
-0000c170: 6442 7563 6b65 7428 290a 2020 2020 6b31  dBucket().    k1
-0000c180: 5f75 7269 203d 2073 656c 662e 4372 6561  _uri = self.Crea
-0000c190: 7465 4f62 6a65 6374 2862 7563 6b65 745f  teObject(bucket_
-0000c1a0: 7572 693d 6275 636b 6574 5f75 7269 2c20  uri=bucket_uri, 
-0000c1b0: 636f 6e74 656e 7473 3d62 2764 6174 6131  contents=b'data1
-0000c1c0: 2729 0a20 2020 2067 3120 3d20 6b31 5f75  ').    g1 = k1_u
-0000c1d0: 7269 2e67 656e 6572 6174 696f 6e0a 0a20  ri.generation.. 
-0000c1e0: 2020 2074 6d70 6469 7220 3d20 7365 6c66     tmpdir = self
-0000c1f0: 2e43 7265 6174 6554 656d 7044 6972 2829  .CreateTempDir()
-0000c200: 0a20 2020 2066 7061 7468 3120 3d20 7365  .    fpath1 = se
-0000c210: 6c66 2e43 7265 6174 6554 656d 7046 696c  lf.CreateTempFil
-0000c220: 6528 746d 7064 6972 3d74 6d70 6469 722c  e(tmpdir=tmpdir,
-0000c230: 2063 6f6e 7465 6e74 733d 6227 6461 7461   contents=b'data
-0000c240: 3227 290a 0a20 2020 2067 656e 5f6d 6174  2')..    gen_mat
-0000c250: 6368 5f68 6561 6465 7220 3d20 2778 2d67  ch_header = 'x-g
-0000c260: 6f6f 672d 6966 2d67 656e 6572 6174 696f  oog-if-generatio
-0000c270: 6e2d 6d61 7463 683a 2573 2720 2520 6731  n-match:%s' % g1
-0000c280: 0a20 2020 2023 2046 6972 7374 2063 6f70  .    # First cop
-0000c290: 7920 7368 6f75 6c64 2073 7563 6365 6564  y should succeed
-0000c2a0: 2e0a 2020 2020 7365 6c66 2e52 756e 4773  ..    self.RunGs
-0000c2b0: 5574 696c 285b 272d 6827 2c20 6765 6e5f  Util(['-h', gen_
-0000c2c0: 6d61 7463 685f 6865 6164 6572 2c20 2763  match_header, 'c
-0000c2d0: 7027 2c20 6670 6174 6831 2c20 7375 7269  p', fpath1, suri
-0000c2e0: 286b 315f 7572 6929 5d29 0a0a 2020 2020  (k1_uri)])..    
-0000c2f0: 2320 5365 636f 6e64 2063 6f70 7920 7368  # Second copy sh
-0000c300: 6f75 6c64 2066 6169 6c20 7468 6520 7072  ould fail the pr
-0000c310: 6563 6f6e 6469 7469 6f6e 2e0a 2020 2020  econdition..    
-0000c320: 7374 6465 7272 203d 2073 656c 662e 5275  stderr = self.Ru
-0000c330: 6e47 7355 7469 6c28 0a20 2020 2020 2020  nGsUtil(.       
-0000c340: 205b 272d 6827 2c20 6765 6e5f 6d61 7463   ['-h', gen_matc
-0000c350: 685f 6865 6164 6572 2c20 2763 7027 2c20  h_header, 'cp', 
-0000c360: 6670 6174 6831 2c0a 2020 2020 2020 2020  fpath1,.        
-0000c370: 2073 7572 6928 6b31 5f75 7269 295d 2c0a   suri(k1_uri)],.
-0000c380: 2020 2020 2020 2020 7265 7475 726e 5f73          return_s
-0000c390: 7464 6572 723d 5472 7565 2c0a 2020 2020  tderr=True,.    
-0000c3a0: 2020 2020 6578 7065 6374 6564 5f73 7461      expected_sta
-0000c3b0: 7475 733d 3129 0a0a 2020 2020 7365 6c66  tus=1)..    self
-0000c3c0: 2e61 7373 6572 7449 6e28 2750 7265 636f  .assertIn('Preco
-0000c3d0: 6e64 6974 696f 6e45 7863 6570 7469 6f6e  nditionException
-0000c3e0: 272c 2073 7464 6572 7229 0a0a 2020 2020  ', stderr)..    
-0000c3f0: 2320 5370 6563 6966 6979 696e 6720 6120  # Specifiying a 
-0000c400: 6765 6e65 7261 7469 6f6e 2077 6974 6820  generation with 
-0000c410: 2d6e 2073 686f 756c 6420 6661 696c 2062  -n should fail b
-0000c420: 6566 6f72 6520 7468 6520 7265 7175 6573  efore the reques
-0000c430: 7420 6869 7473 2074 6865 0a20 2020 2023  t hits the.    #
-0000c440: 2073 6572 7665 722e 0a20 2020 2073 7464   server..    std
-0000c450: 6572 7220 3d20 7365 6c66 2e52 756e 4773  err = self.RunGs
-0000c460: 5574 696c 280a 2020 2020 2020 2020 5b27  Util(.        ['
-0000c470: 2d68 272c 2067 656e 5f6d 6174 6368 5f68  -h', gen_match_h
-0000c480: 6561 6465 722c 2027 6370 272c 2027 2d6e  eader, 'cp', '-n
-0000c490: 272c 2066 7061 7468 312c 0a20 2020 2020  ', fpath1,.     
-0000c4a0: 2020 2020 7375 7269 286b 315f 7572 6929      suri(k1_uri)
-0000c4b0: 5d2c 0a20 2020 2020 2020 2072 6574 7572  ],.        retur
-0000c4c0: 6e5f 7374 6465 7272 3d54 7275 652c 0a20  n_stderr=True,. 
-0000c4d0: 2020 2020 2020 2065 7870 6563 7465 645f         expected_
-0000c4e0: 7374 6174 7573 3d31 290a 0a20 2020 2073  status=1)..    s
-0000c4f0: 656c 662e 6173 7365 7274 496e 2827 4172  elf.assertIn('Ar
-0000c500: 6775 6d65 6e74 4578 6365 7074 696f 6e27  gumentException'
-0000c510: 2c20 7374 6465 7272 290a 2020 2020 7365  , stderr).    se
-0000c520: 6c66 2e61 7373 6572 7449 6e28 0a20 2020  lf.assertIn(.   
-0000c530: 2020 2020 2027 5370 6563 6966 7969 6e67       'Specifying
-0000c540: 2078 2d67 6f6f 672d 6966 2d67 656e 6572   x-goog-if-gener
-0000c550: 6174 696f 6e2d 6d61 7463 6820 6973 206e  ation-match is n
-0000c560: 6f74 2073 7570 706f 7274 6564 2027 0a20  ot supported '. 
-0000c570: 2020 2020 2020 2027 7769 7468 2063 7020         'with cp 
-0000c580: 2d6e 272c 2073 7464 6572 7229 0a0a 2020  -n', stderr)..  
-0000c590: 4053 6571 7565 6e74 6961 6c41 6e64 5061  @SequentialAndPa
-0000c5a0: 7261 6c6c 656c 5472 616e 7366 6572 0a20  rallelTransfer. 
-0000c5b0: 2064 6566 2074 6573 745f 6370 5f6e 7628   def test_cp_nv(
-0000c5c0: 7365 6c66 293a 0a20 2020 2022 2222 5465  self):.    """Te
-0000c5d0: 7374 7320 7468 6174 2063 7020 2d6e 7620  sts that cp -nv 
-0000c5e0: 776f 726b 7320 7768 656e 2073 6b69 7070  works when skipp
-0000c5f0: 696e 6720 6578 6973 7469 6e67 2066 696c  ing existing fil
-0000c600: 652e 2222 220a 2020 2020 6275 636b 6574  e.""".    bucket
-0000c610: 5f75 7269 203d 2073 656c 662e 4372 6561  _uri = self.Crea
-0000c620: 7465 5665 7273 696f 6e65 6442 7563 6b65  teVersionedBucke
-0000c630: 7428 290a 2020 2020 6b31 5f75 7269 203d  t().    k1_uri =
-0000c640: 2073 656c 662e 4372 6561 7465 4f62 6a65   self.CreateObje
-0000c650: 6374 2862 7563 6b65 745f 7572 693d 6275  ct(bucket_uri=bu
-0000c660: 636b 6574 5f75 7269 2c20 636f 6e74 656e  cket_uri, conten
-0000c670: 7473 3d62 2764 6174 6131 2729 0a0a 2020  ts=b'data1')..  
-0000c680: 2020 746d 7064 6972 203d 2073 656c 662e    tmpdir = self.
-0000c690: 4372 6561 7465 5465 6d70 4469 7228 290a  CreateTempDir().
-0000c6a0: 2020 2020 6670 6174 6831 203d 2073 656c      fpath1 = sel
-0000c6b0: 662e 4372 6561 7465 5465 6d70 4669 6c65  f.CreateTempFile
-0000c6c0: 2874 6d70 6469 723d 746d 7064 6972 2c20  (tmpdir=tmpdir, 
-0000c6d0: 636f 6e74 656e 7473 3d62 2764 6174 6132  contents=b'data2
-0000c6e0: 2729 0a0a 2020 2020 2320 4669 7273 7420  ')..    # First 
-0000c6f0: 636f 7079 2073 686f 756c 6420 7375 6363  copy should succ
-0000c700: 6565 642e 0a20 2020 2073 656c 662e 5275  eed..    self.Ru
-0000c710: 6e47 7355 7469 6c28 5b27 6370 272c 2027  nGsUtil(['cp', '
-0000c720: 2d6e 7627 2c20 6670 6174 6831 2c20 7375  -nv', fpath1, su
-0000c730: 7269 286b 315f 7572 6929 5d29 0a0a 2020  ri(k1_uri)])..  
-0000c740: 2020 2320 5365 636f 6e64 2063 6f70 7920    # Second copy 
-0000c750: 7368 6f75 6c64 2073 6b69 7020 636f 7079  should skip copy
-0000c760: 696e 672e 0a20 2020 2073 7464 6572 7220  ing..    stderr 
-0000c770: 3d20 7365 6c66 2e52 756e 4773 5574 696c  = self.RunGsUtil
-0000c780: 280a 2020 2020 2020 2020 5b27 6370 272c  (.        ['cp',
-0000c790: 2027 2d6e 7627 2c20 6670 6174 6831 2c20   '-nv', fpath1, 
-0000c7a0: 7375 7269 286b 315f 7572 6929 5d2c 2072  suri(k1_uri)], r
-0000c7b0: 6574 7572 6e5f 7374 6465 7272 3d54 7275  eturn_stderr=Tru
-0000c7c0: 6529 0a20 2020 2073 656c 662e 6173 7365  e).    self.asse
-0000c7d0: 7274 496e 2827 536b 6970 7069 6e67 2065  rtIn('Skipping e
-0000c7e0: 7869 7374 696e 6720 6974 656d 3a27 2c20  xisting item:', 
-0000c7f0: 7374 6465 7272 290a 0a20 2040 5365 7175  stderr)..  @Sequ
-0000c800: 656e 7469 616c 416e 6450 6172 616c 6c65  entialAndParalle
-0000c810: 6c54 7261 6e73 6665 720a 2020 4053 6b69  lTransfer.  @Ski
-0000c820: 7046 6f72 5333 2827 5333 206c 6973 7473  pForS3('S3 lists
-0000c830: 2076 6572 7369 6f6e 6564 206f 626a 6563   versioned objec
-0000c840: 7473 2069 6e20 7265 7665 7273 6520 7469  ts in reverse ti
-0000c850: 6d65 7374 616d 7020 6f72 6465 722e 2729  mestamp order.')
-0000c860: 0a20 2064 6566 2074 6573 745f 6370 5f76  .  def test_cp_v
-0000c870: 5f6f 7074 696f 6e28 7365 6c66 293a 0a20  _option(self):. 
-0000c880: 2020 2022 2222 2254 6573 7473 2074 6861     """"Tests tha
-0000c890: 7420 6370 202d 7620 7265 7475 726e 7320  t cp -v returns 
-0000c8a0: 7468 6520 6372 6561 7465 6420 6f62 6a65  the created obje
-0000c8b0: 6374 2773 2076 6572 7369 6f6e 2d73 7065  ct's version-spe
-0000c8c0: 6369 6669 6320 5552 492e 2222 220a 2020  cific URI.""".  
-0000c8d0: 2020 6275 636b 6574 5f75 7269 203d 2073    bucket_uri = s
-0000c8e0: 656c 662e 4372 6561 7465 5665 7273 696f  elf.CreateVersio
-0000c8f0: 6e65 6442 7563 6b65 7428 290a 2020 2020  nedBucket().    
-0000c900: 6b31 5f75 7269 203d 2073 656c 662e 4372  k1_uri = self.Cr
-0000c910: 6561 7465 4f62 6a65 6374 2862 7563 6b65  eateObject(bucke
-0000c920: 745f 7572 693d 6275 636b 6574 5f75 7269  t_uri=bucket_uri
-0000c930: 2c20 636f 6e74 656e 7473 3d62 2764 6174  , contents=b'dat
-0000c940: 6131 2729 0a20 2020 206b 325f 7572 6920  a1').    k2_uri 
-0000c950: 3d20 7365 6c66 2e43 7265 6174 654f 626a  = self.CreateObj
-0000c960: 6563 7428 6275 636b 6574 5f75 7269 3d62  ect(bucket_uri=b
-0000c970: 7563 6b65 745f 7572 692c 2063 6f6e 7465  ucket_uri, conte
-0000c980: 6e74 733d 6227 6461 7461 3227 290a 0a20  nts=b'data2').. 
-0000c990: 2020 2023 2043 6173 6520 313a 2055 706c     # Case 1: Upl
-0000c9a0: 6f61 6420 6669 6c65 2074 6f20 6f62 6a65  oad file to obje
-0000c9b0: 6374 2075 7369 6e67 206f 6e65 2d73 686f  ct using one-sho
-0000c9c0: 7420 5055 542e 0a20 2020 2074 6d70 6469  t PUT..    tmpdi
-0000c9d0: 7220 3d20 7365 6c66 2e43 7265 6174 6554  r = self.CreateT
-0000c9e0: 656d 7044 6972 2829 0a20 2020 2066 7061  empDir().    fpa
-0000c9f0: 7468 3120 3d20 7365 6c66 2e43 7265 6174  th1 = self.Creat
-0000ca00: 6554 656d 7046 696c 6528 746d 7064 6972  eTempFile(tmpdir
-0000ca10: 3d74 6d70 6469 722c 2063 6f6e 7465 6e74  =tmpdir, content
-0000ca20: 733d 6227 6461 7461 3127 290a 2020 2020  s=b'data1').    
-0000ca30: 7365 6c66 2e5f 7275 6e5f 6370 5f6d 696e  self._run_cp_min
-0000ca40: 7573 5f76 5f74 6573 7428 272d 7627 2c20  us_v_test('-v', 
-0000ca50: 6670 6174 6831 2c20 6b32 5f75 7269 2e75  fpath1, k2_uri.u
-0000ca60: 7269 290a 0a20 2020 2023 2043 6173 6520  ri)..    # Case 
-0000ca70: 323a 2055 706c 6f61 6420 6669 6c65 2074  2: Upload file t
-0000ca80: 6f20 6f62 6a65 6374 2075 7369 6e67 2072  o object using r
-0000ca90: 6573 756d 6162 6c65 2075 706c 6f61 642e  esumable upload.
-0000caa0: 0a20 2020 2073 697a 655f 7468 7265 7368  .    size_thresh
-0000cab0: 6f6c 6420 3d20 4f4e 455f 4b49 420a 2020  old = ONE_KIB.  
-0000cac0: 2020 626f 746f 5f63 6f6e 6669 675f 666f    boto_config_fo
-0000cad0: 725f 7465 7374 203d 2028 2747 5355 7469  r_test = ('GSUti
-0000cae0: 6c27 2c20 2772 6573 756d 6162 6c65 5f74  l', 'resumable_t
-0000caf0: 6872 6573 686f 6c64 272c 0a20 2020 2020  hreshold',.     
-0000cb00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cb10: 2020 2020 2020 2073 7472 2873 697a 655f         str(size_
-0000cb20: 7468 7265 7368 6f6c 6429 290a 2020 2020  threshold)).    
-0000cb30: 7769 7468 2053 6574 426f 746f 436f 6e66  with SetBotoConf
-0000cb40: 6967 466f 7254 6573 7428 5b62 6f74 6f5f  igForTest([boto_
-0000cb50: 636f 6e66 6967 5f66 6f72 5f74 6573 745d  config_for_test]
-0000cb60: 293a 0a20 2020 2020 2066 696c 655f 6173  ):.      file_as
-0000cb70: 5f73 7472 696e 6720 3d20 6f73 2e75 7261  _string = os.ura
-0000cb80: 6e64 6f6d 2873 697a 655f 7468 7265 7368  ndom(size_thresh
-0000cb90: 6f6c 6429 0a20 2020 2020 2074 6d70 6469  old).      tmpdi
-0000cba0: 7220 3d20 7365 6c66 2e43 7265 6174 6554  r = self.CreateT
-0000cbb0: 656d 7044 6972 2829 0a20 2020 2020 2066  empDir().      f
-0000cbc0: 7061 7468 3120 3d20 7365 6c66 2e43 7265  path1 = self.Cre
-0000cbd0: 6174 6554 656d 7046 696c 6528 746d 7064  ateTempFile(tmpd
-0000cbe0: 6972 3d74 6d70 6469 722c 2063 6f6e 7465  ir=tmpdir, conte
-0000cbf0: 6e74 733d 6669 6c65 5f61 735f 7374 7269  nts=file_as_stri
-0000cc00: 6e67 290a 2020 2020 2020 7365 6c66 2e5f  ng).      self._
-0000cc10: 7275 6e5f 6370 5f6d 696e 7573 5f76 5f74  run_cp_minus_v_t
-0000cc20: 6573 7428 272d 7627 2c20 6670 6174 6831  est('-v', fpath1
-0000cc30: 2c20 6b32 5f75 7269 2e75 7269 290a 0a20  , k2_uri.uri).. 
-0000cc40: 2020 2023 2043 6173 6520 333a 2055 706c     # Case 3: Upl
-0000cc50: 6f61 6420 7374 7265 616d 2074 6f20 6f62  oad stream to ob
-0000cc60: 6a65 6374 2e0a 2020 2020 7365 6c66 2e5f  ject..    self._
-0000cc70: 7275 6e5f 6370 5f6d 696e 7573 5f76 5f74  run_cp_minus_v_t
-0000cc80: 6573 7428 272d 7627 2c20 272d 272c 206b  est('-v', '-', k
-0000cc90: 325f 7572 692e 7572 6929 0a0a 2020 2020  2_uri.uri)..    
-0000cca0: 2320 4361 7365 2034 3a20 446f 776e 6c6f  # Case 4: Downlo
-0000ccb0: 6164 206f 626a 6563 7420 746f 2066 696c  ad object to fil
-0000ccc0: 652e 2046 6f72 2074 6869 7320 6361 7365  e. For this case
-0000ccd0: 2077 6520 6a75 7374 2065 7870 6563 7420   we just expect 
-0000cce0: 6f75 7470 7574 206f 660a 2020 2020 2320  output of.    # 
-0000ccf0: 6773 7574 696c 2063 7020 2d76 2074 6f20  gsutil cp -v to 
-0000cd00: 6265 2074 6865 2055 5249 206f 6620 7468  be the URI of th
-0000cd10: 6520 6669 6c65 2e0a 2020 2020 746d 7064  e file..    tmpd
-0000cd20: 6972 203d 2073 656c 662e 4372 6561 7465  ir = self.Create
-0000cd30: 5465 6d70 4469 7228 290a 2020 2020 6670  TempDir().    fp
-0000cd40: 6174 6831 203d 2073 656c 662e 4372 6561  ath1 = self.Crea
-0000cd50: 7465 5465 6d70 4669 6c65 2874 6d70 6469  teTempFile(tmpdi
-0000cd60: 723d 746d 7064 6972 290a 2020 2020 6473  r=tmpdir).    ds
-0000cd70: 745f 7572 6920 3d20 7374 6f72 6167 655f  t_uri = storage_
-0000cd80: 7572 6928 6670 6174 6831 290a 2020 2020  uri(fpath1).    
-0000cd90: 7374 6465 7272 203d 2073 656c 662e 5275  stderr = self.Ru
-0000cda0: 6e47 7355 7469 6c28 0a20 2020 2020 2020  nGsUtil(.       
-0000cdb0: 205b 2763 7027 2c20 272d 7627 2c20 7375   ['cp', '-v', su
-0000cdc0: 7269 286b 315f 7572 6929 2c20 7375 7269  ri(k1_uri), suri
-0000cdd0: 2864 7374 5f75 7269 295d 2c20 7265 7475  (dst_uri)], retu
-0000cde0: 726e 5f73 7464 6572 723d 5472 7565 290a  rn_stderr=True).
-0000cdf0: 2020 2020 2320 544f 444f 3a20 4164 6420      # TODO: Add 
-0000ce00: 6f72 6465 7269 6e67 2061 7373 6572 7469  ordering asserti
-0000ce10: 6f6e 2028 7368 6f75 6c64 2062 6520 696e  on (should be in
-0000ce20: 2073 7464 6572 722e 7370 6c69 7428 275c   stderr.split('\
-0000ce30: 6e29 5b2d 325d 2920 6261 636b 0a20 2020  n)[-2]) back.   
-0000ce40: 2023 206f 6e63 6520 626f 7468 2074 6865   # once both the
-0000ce50: 2063 7265 6174 696f 6e20 616e 6420 7374   creation and st
-0000ce60: 6174 7573 206d 6573 7361 6765 7320 6172  atus messages ar
-0000ce70: 6520 6861 6e64 6c65 6420 6279 2074 6865  e handled by the
-0000ce80: 2055 4920 7468 7265 6164 2e0a 2020 2020   UI thread..    
-0000ce90: 7365 6c66 2e61 7373 6572 7449 6e28 2743  self.assertIn('C
-0000cea0: 7265 6174 6564 3a20 2573 5c6e 2720 2520  reated: %s\n' % 
-0000ceb0: 6473 745f 7572 692e 7572 692c 2073 7464  dst_uri.uri, std
-0000cec0: 6572 7229 0a0a 2020 2020 2320 4361 7365  err)..    # Case
-0000ced0: 2035 3a20 4461 6973 792d 6368 6169 6e20   5: Daisy-chain 
-0000cee0: 6672 6f6d 206f 626a 6563 7420 746f 206f  from object to o
-0000cef0: 626a 6563 742e 0a20 2020 2073 656c 662e  bject..    self.
-0000cf00: 5f72 756e 5f63 705f 6d69 6e75 735f 765f  _run_cp_minus_v_
-0000cf10: 7465 7374 2827 2d44 7627 2c20 6b31 5f75  test('-Dv', k1_u
-0000cf20: 7269 2e75 7269 2c20 6b32 5f75 7269 2e75  ri.uri, k2_uri.u
-0000cf30: 7269 290a 0a20 2020 2023 2043 6173 6520  ri)..    # Case 
-0000cf40: 363a 2043 6f70 7920 6f62 6a65 6374 2074  6: Copy object t
-0000cf50: 6f20 6f62 6a65 6374 2069 6e2d 7468 652d  o object in-the-
-0000cf60: 636c 6f75 642e 0a20 2020 2073 656c 662e  cloud..    self.
-0000cf70: 5f72 756e 5f63 705f 6d69 6e75 735f 765f  _run_cp_minus_v_
-0000cf80: 7465 7374 2827 2d76 272c 206b 315f 7572  test('-v', k1_ur
-0000cf90: 692e 7572 692c 206b 325f 7572 692e 7572  i.uri, k2_uri.ur
-0000cfa0: 6929 0a0a 2020 6465 6620 5f72 756e 5f63  i)..  def _run_c
-0000cfb0: 705f 6d69 6e75 735f 765f 7465 7374 2873  p_minus_v_test(s
-0000cfc0: 656c 662c 206f 7074 2c20 7372 635f 7374  elf, opt, src_st
-0000cfd0: 722c 2064 7374 5f73 7472 293a 0a20 2020  r, dst_str):.   
-0000cfe0: 2022 2222 5275 6e73 2063 7020 2d76 2077   """Runs cp -v w
-0000cff0: 6974 6820 7468 6520 6f70 7469 6f6e 7320  ith the options 
-0000d000: 616e 6420 7661 6c69 6461 7465 7320 7468  and validates th
-0000d010: 6520 7265 7375 6c74 732e 2222 220a 2020  e results.""".  
-0000d020: 2020 7374 6465 7272 203d 2073 656c 662e    stderr = self.
-0000d030: 5275 6e47 7355 7469 6c28 5b27 6370 272c  RunGsUtil(['cp',
-0000d040: 206f 7074 2c20 7372 635f 7374 722c 2064   opt, src_str, d
-0000d050: 7374 5f73 7472 5d2c 2072 6574 7572 6e5f  st_str], return_
-0000d060: 7374 6465 7272 3d54 7275 6529 0a20 2020  stderr=True).   
-0000d070: 206d 6174 6368 203d 2072 652e 7365 6172   match = re.sear
-0000d080: 6368 2872 2743 7265 6174 6564 3a20 282e  ch(r'Created: (.
-0000d090: 2a29 5c6e 272c 2073 7464 6572 7229 0a20  *)\n', stderr). 
-0000d0a0: 2020 2073 656c 662e 6173 7365 7274 4973     self.assertIs
-0000d0b0: 4e6f 744e 6f6e 6528 6d61 7463 6829 0a20  NotNone(match). 
-0000d0c0: 2020 2063 7265 6174 6564 5f75 7269 203d     created_uri =
-0000d0d0: 206d 6174 6368 2e67 726f 7570 2831 290a   match.group(1).
-0000d0e0: 0a20 2020 2023 2055 7365 2040 5265 7472  .    # Use @Retr
-0000d0f0: 7920 6173 2068 6564 6765 2061 6761 696e  y as hedge again
-0000d100: 7374 2062 7563 6b65 7420 6c69 7374 696e  st bucket listin
-0000d110: 6720 6576 656e 7475 616c 2063 6f6e 7369  g eventual consi
-0000d120: 7374 656e 6379 2e0a 2020 2020 4052 6574  stency..    @Ret
-0000d130: 7279 2841 7373 6572 7469 6f6e 4572 726f  ry(AssertionErro
-0000d140: 722c 2074 7269 6573 3d33 2c20 7469 6d65  r, tries=3, time
-0000d150: 6f75 745f 7365 6373 3d31 290a 2020 2020  out_secs=1).    
-0000d160: 6465 6620 5f43 6865 636b 3128 293a 0a20  def _Check1():. 
-0000d170: 2020 2020 2073 7464 6f75 7420 3d20 7365       stdout = se
-0000d180: 6c66 2e52 756e 4773 5574 696c 285b 276c  lf.RunGsUtil(['l
-0000d190: 7327 2c20 272d 6127 2c20 6473 745f 7374  s', '-a', dst_st
-0000d1a0: 725d 2c20 7265 7475 726e 5f73 7464 6f75  r], return_stdou
-0000d1b0: 743d 5472 7565 290a 2020 2020 2020 6c69  t=True).      li
-0000d1c0: 6e65 7320 3d20 7374 646f 7574 2e73 706c  nes = stdout.spl
-0000d1d0: 6974 2827 5c6e 2729 0a20 2020 2020 2023  it('\n').      #
-0000d1e0: 2046 696e 616c 2028 6d6f 7374 2072 6563   Final (most rec
-0000d1f0: 656e 7429 206f 626a 6563 7420 7368 6f75  ent) object shou
-0000d200: 6c64 206d 6174 6368 2074 6865 2022 4372  ld match the "Cr
-0000d210: 6561 7465 643a 2220 5552 492e 2054 6869  eated:" URI. Thi
-0000d220: 7320 6973 0a20 2020 2020 2023 2069 6e20  s is.      # in 
-0000d230: 7365 636f 6e64 2d74 6f2d 6c61 7374 206c  second-to-last l
-0000d240: 696e 6520 286c 6173 7420 6c69 6e65 2069  ine (last line i
-0000d250: 7320 275c 6e27 292e 0a20 2020 2020 2073  s '\n')..      s
-0000d260: 656c 662e 6173 7365 7274 4772 6561 7465  elf.assertGreate
-0000d270: 7228 6c65 6e28 6c69 6e65 7329 2c20 3229  r(len(lines), 2)
-0000d280: 0a20 2020 2020 2073 656c 662e 6173 7365  .      self.asse
-0000d290: 7274 4571 7561 6c28 6372 6561 7465 645f  rtEqual(created_
-0000d2a0: 7572 692c 206c 696e 6573 5b2d 325d 290a  uri, lines[-2]).
-0000d2b0: 0a20 2020 205f 4368 6563 6b31 2829 0a0a  .    _Check1()..
-0000d2c0: 2020 4053 6571 7565 6e74 6961 6c41 6e64    @SequentialAnd
-0000d2d0: 5061 7261 6c6c 656c 5472 616e 7366 6572  ParallelTransfer
-0000d2e0: 0a20 2064 6566 2074 6573 745f 7374 6469  .  def test_stdi
-0000d2f0: 6e5f 6172 6773 2873 656c 6629 3a0a 2020  n_args(self):.  
-0000d300: 2020 2222 2254 6573 7473 2063 7020 7769    """Tests cp wi
-0000d310: 7468 2074 6865 202d 4920 6f70 7469 6f6e  th the -I option
-0000d320: 2e22 2222 0a20 2020 2074 6d70 6469 7220  .""".    tmpdir 
-0000d330: 3d20 7365 6c66 2e43 7265 6174 6554 656d  = self.CreateTem
-0000d340: 7044 6972 2829 0a20 2020 2066 7061 7468  pDir().    fpath
-0000d350: 3120 3d20 7365 6c66 2e43 7265 6174 6554  1 = self.CreateT
-0000d360: 656d 7046 696c 6528 746d 7064 6972 3d74  empFile(tmpdir=t
-0000d370: 6d70 6469 722c 2063 6f6e 7465 6e74 733d  mpdir, contents=
-0000d380: 6227 6461 7461 3127 290a 2020 2020 6670  b'data1').    fp
-0000d390: 6174 6832 203d 2073 656c 662e 4372 6561  ath2 = self.Crea
-0000d3a0: 7465 5465 6d70 4669 6c65 2874 6d70 6469  teTempFile(tmpdi
-0000d3b0: 723d 746d 7064 6972 2c20 636f 6e74 656e  r=tmpdir, conten
-0000d3c0: 7473 3d62 2764 6174 6132 2729 0a20 2020  ts=b'data2').   
-0000d3d0: 2062 7563 6b65 745f 7572 6920 3d20 7365   bucket_uri = se
-0000d3e0: 6c66 2e43 7265 6174 6542 7563 6b65 7428  lf.CreateBucket(
-0000d3f0: 290a 2020 2020 7365 6c66 2e52 756e 4773  ).    self.RunGs
-0000d400: 5574 696c 285b 2763 7027 2c20 272d 4927  Util(['cp', '-I'
-0000d410: 2c20 7375 7269 2862 7563 6b65 745f 7572  , suri(bucket_ur
-0000d420: 6929 5d2c 0a20 2020 2020 2020 2020 2020  i)],.           
-0000d430: 2020 2020 2020 2020 7374 6469 6e3d 275c          stdin='\
-0000d440: 6e27 2e6a 6f69 6e28 2866 7061 7468 312c  n'.join((fpath1,
-0000d450: 2066 7061 7468 3229 2929 0a0a 2020 2020   fpath2)))..    
-0000d460: 2320 5573 6520 4052 6574 7279 2061 7320  # Use @Retry as 
-0000d470: 6865 6467 6520 6167 6169 6e73 7420 6275  hedge against bu
-0000d480: 636b 6574 206c 6973 7469 6e67 2065 7665  cket listing eve
-0000d490: 6e74 7561 6c20 636f 6e73 6973 7465 6e63  ntual consistenc
-0000d4a0: 792e 0a20 2020 2040 5265 7472 7928 4173  y..    @Retry(As
-0000d4b0: 7365 7274 696f 6e45 7272 6f72 2c20 7472  sertionError, tr
-0000d4c0: 6965 733d 332c 2074 696d 656f 7574 5f73  ies=3, timeout_s
-0000d4d0: 6563 733d 3129 0a20 2020 2064 6566 205f  ecs=1).    def _
-0000d4e0: 4368 6563 6b31 2829 3a0a 2020 2020 2020  Check1():.      
-0000d4f0: 7374 646f 7574 203d 2073 656c 662e 5275  stdout = self.Ru
-0000d500: 6e47 7355 7469 6c28 5b27 6c73 272c 2073  nGsUtil(['ls', s
-0000d510: 7572 6928 6275 636b 6574 5f75 7269 295d  uri(bucket_uri)]
-0000d520: 2c20 7265 7475 726e 5f73 7464 6f75 743d  , return_stdout=
-0000d530: 5472 7565 290a 2020 2020 2020 7365 6c66  True).      self
-0000d540: 2e61 7373 6572 7449 6e28 6f73 2e70 6174  .assertIn(os.pat
-0000d550: 682e 6261 7365 6e61 6d65 2866 7061 7468  h.basename(fpath
-0000d560: 3129 2c20 7374 646f 7574 290a 2020 2020  1), stdout).    
-0000d570: 2020 7365 6c66 2e61 7373 6572 7449 6e28    self.assertIn(
-0000d580: 6f73 2e70 6174 682e 6261 7365 6e61 6d65  os.path.basename
-0000d590: 2866 7061 7468 3229 2c20 7374 646f 7574  (fpath2), stdout
-0000d5a0: 290a 2020 2020 2020 7365 6c66 2e61 7373  ).      self.ass
-0000d5b0: 6572 744e 756d 4c69 6e65 7328 7374 646f  ertNumLines(stdo
-0000d5c0: 7574 2c20 3229 0a0a 2020 2020 5f43 6865  ut, 2)..    _Che
-0000d5d0: 636b 3128 290a 0a20 2064 6566 2074 6573  ck1()..  def tes
-0000d5e0: 745f 6372 6f73 735f 7374 6f72 6167 655f  t_cross_storage_
-0000d5f0: 636c 6173 735f 636c 6f75 645f 6370 2873  class_cloud_cp(s
-0000d600: 656c 6629 3a0a 2020 2020 6275 636b 6574  elf):.    bucket
-0000d610: 315f 7572 6920 3d20 7365 6c66 2e43 7265  1_uri = self.Cre
-0000d620: 6174 6542 7563 6b65 7428 7374 6f72 6167  ateBucket(storag
-0000d630: 655f 636c 6173 733d 2773 7461 6e64 6172  e_class='standar
-0000d640: 6427 290a 2020 2020 6275 636b 6574 325f  d').    bucket2_
-0000d650: 7572 6920 3d20 7365 6c66 2e43 7265 6174  uri = self.Creat
-0000d660: 6542 7563 6b65 7428 0a20 2020 2020 2020  eBucket(.       
-0000d670: 2073 746f 7261 6765 5f63 6c61 7373 3d27   storage_class='
-0000d680: 6475 7261 626c 655f 7265 6475 6365 645f  durable_reduced_
-0000d690: 6176 6169 6c61 6269 6c69 7479 2729 0a20  availability'). 
-0000d6a0: 2020 206b 6579 5f75 7269 203d 2073 656c     key_uri = sel
-0000d6b0: 662e 4372 6561 7465 4f62 6a65 6374 2862  f.CreateObject(b
-0000d6c0: 7563 6b65 745f 7572 693d 6275 636b 6574  ucket_uri=bucket
-0000d6d0: 315f 7572 692c 2063 6f6e 7465 6e74 733d  1_uri, contents=
-0000d6e0: 6227 666f 6f27 290a 2020 2020 2320 5365  b'foo').    # Se
-0000d6f0: 7276 6572 206e 6f77 2061 6c6c 6f77 7320  rver now allows 
-0000d700: 636f 7079 2d69 6e2d 7468 652d 636c 6f75  copy-in-the-clou
-0000d710: 6420 6163 726f 7373 2073 746f 7261 6765  d across storage
-0000d720: 2063 6c61 7373 6573 2e0a 2020 2020 7365   classes..    se
-0000d730: 6c66 2e52 756e 4773 5574 696c 285b 2763  lf.RunGsUtil(['c
-0000d740: 7027 2c20 7375 7269 286b 6579 5f75 7269  p', suri(key_uri
-0000d750: 292c 2073 7572 6928 6275 636b 6574 325f  ), suri(bucket2_
-0000d760: 7572 6929 5d29 0a0a 2020 4075 6e69 7474  uri)])..  @unitt
-0000d770: 6573 742e 736b 6970 556e 6c65 7373 2848  est.skipUnless(H
-0000d780: 4153 5f53 335f 4352 4544 532c 2027 5465  AS_S3_CREDS, 'Te
-0000d790: 7374 2072 6571 7569 7265 7320 626f 7468  st requires both
-0000d7a0: 2053 3320 616e 6420 4753 2063 7265 6465   S3 and GS crede
-0000d7b0: 6e74 6961 6c73 2729 0a20 2064 6566 2074  ntials').  def t
-0000d7c0: 6573 745f 6372 6f73 735f 7072 6f76 6964  est_cross_provid
-0000d7d0: 6572 5f63 7028 7365 6c66 293a 0a20 2020  er_cp(self):.   
-0000d7e0: 2073 335f 6275 636b 6574 203d 2073 656c   s3_bucket = sel
-0000d7f0: 662e 4372 6561 7465 4275 636b 6574 2870  f.CreateBucket(p
-0000d800: 726f 7669 6465 723d 2773 3327 290a 2020  rovider='s3').  
-0000d810: 2020 6773 5f62 7563 6b65 7420 3d20 7365    gs_bucket = se
-0000d820: 6c66 2e43 7265 6174 6542 7563 6b65 7428  lf.CreateBucket(
-0000d830: 7072 6f76 6964 6572 3d27 6773 2729 0a20  provider='gs'). 
-0000d840: 2020 2073 335f 6b65 7920 3d20 7365 6c66     s3_key = self
-0000d850: 2e43 7265 6174 654f 626a 6563 7428 6275  .CreateObject(bu
-0000d860: 636b 6574 5f75 7269 3d73 335f 6275 636b  cket_uri=s3_buck
-0000d870: 6574 2c20 636f 6e74 656e 7473 3d62 2766  et, contents=b'f
-0000d880: 6f6f 2729 0a20 2020 2067 735f 6b65 7920  oo').    gs_key 
-0000d890: 3d20 7365 6c66 2e43 7265 6174 654f 626a  = self.CreateObj
-0000d8a0: 6563 7428 6275 636b 6574 5f75 7269 3d67  ect(bucket_uri=g
-0000d8b0: 735f 6275 636b 6574 2c20 636f 6e74 656e  s_bucket, conten
-0000d8c0: 7473 3d62 2762 6172 2729 0a20 2020 2073  ts=b'bar').    s
-0000d8d0: 656c 662e 5275 6e47 7355 7469 6c28 5b27  elf.RunGsUtil(['
-0000d8e0: 6370 272c 2073 7572 6928 7333 5f6b 6579  cp', suri(s3_key
-0000d8f0: 292c 2073 7572 6928 6773 5f62 7563 6b65  ), suri(gs_bucke
-0000d900: 7429 5d29 0a20 2020 2073 656c 662e 5275  t)]).    self.Ru
-0000d910: 6e47 7355 7469 6c28 5b27 6370 272c 2073  nGsUtil(['cp', s
-0000d920: 7572 6928 6773 5f6b 6579 292c 2073 7572  uri(gs_key), sur
-0000d930: 6928 7333 5f62 7563 6b65 7429 5d29 0a0a  i(s3_bucket)])..
-0000d940: 2020 4075 6e69 7474 6573 742e 736b 6970    @unittest.skip
-0000d950: 556e 6c65 7373 2848 4153 5f53 335f 4352  Unless(HAS_S3_CR
-0000d960: 4544 532c 2027 5465 7374 2072 6571 7569  EDS, 'Test requi
-0000d970: 7265 7320 626f 7468 2053 3320 616e 6420  res both S3 and 
-0000d980: 4753 2063 7265 6465 6e74 6961 6c73 2729  GS credentials')
-0000d990: 0a20 2040 756e 6974 7465 7374 2e73 6b69  .  @unittest.ski
-0000d9a0: 7028 2754 6869 7320 7465 7374 2070 6572  p('This test per
-0000d9b0: 666f 726d 7320 6120 6c61 7267 6520 636f  forms a large co
-0000d9c0: 7079 2062 7574 2072 656d 6169 6e73 2068  py but remains h
-0000d9d0: 6572 6520 666f 7220 270a 2020 2020 2020  ere for '.      
-0000d9e0: 2020 2020 2020 2020 2020 2027 6465 6275             'debu
-0000d9f0: 6767 696e 6720 7075 7270 6f73 6573 2e27  gging purposes.'
-0000da00: 290a 2020 6465 6620 7465 7374 5f63 726f  ).  def test_cro
-0000da10: 7373 5f70 726f 7669 6465 725f 6c61 7267  ss_provider_larg
-0000da20: 655f 6370 2873 656c 6629 3a0a 2020 2020  e_cp(self):.    
-0000da30: 7333 5f62 7563 6b65 7420 3d20 7365 6c66  s3_bucket = self
-0000da40: 2e43 7265 6174 6542 7563 6b65 7428 7072  .CreateBucket(pr
-0000da50: 6f76 6964 6572 3d27 7333 2729 0a20 2020  ovider='s3').   
-0000da60: 2067 735f 6275 636b 6574 203d 2073 656c   gs_bucket = sel
-0000da70: 662e 4372 6561 7465 4275 636b 6574 2870  f.CreateBucket(p
-0000da80: 726f 7669 6465 723d 2767 7327 290a 2020  rovider='gs').  
-0000da90: 2020 7333 5f6b 6579 203d 2073 656c 662e    s3_key = self.
-0000daa0: 4372 6561 7465 4f62 6a65 6374 2862 7563  CreateObject(buc
-0000dab0: 6b65 745f 7572 693d 7333 5f62 7563 6b65  ket_uri=s3_bucke
-0000dac0: 742c 0a20 2020 2020 2020 2020 2020 2020  t,.             
-0000dad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000dae0: 2020 636f 6e74 656e 7473 3d62 2766 2720    contents=b'f' 
-0000daf0: 2a20 3130 3234 202a 2031 3032 3429 0a20  * 1024 * 1024). 
-0000db00: 2020 2067 735f 6b65 7920 3d20 7365 6c66     gs_key = self
-0000db10: 2e43 7265 6174 654f 626a 6563 7428 6275  .CreateObject(bu
-0000db20: 636b 6574 5f75 7269 3d67 735f 6275 636b  cket_uri=gs_buck
-0000db30: 6574 2c0a 2020 2020 2020 2020 2020 2020  et,.            
-0000db40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000db50: 2020 2063 6f6e 7465 6e74 733d 6227 6227     contents=b'b'
-0000db60: 202a 2031 3032 3420 2a20 3130 3234 290a   * 1024 * 1024).
-0000db70: 2020 2020 7365 6c66 2e52 756e 4773 5574      self.RunGsUt
-0000db80: 696c 285b 2763 7027 2c20 7375 7269 2873  il(['cp', suri(s
-0000db90: 335f 6b65 7929 2c20 7375 7269 2867 735f  3_key), suri(gs_
-0000dba0: 6275 636b 6574 295d 290a 2020 2020 7365  bucket)]).    se
-0000dbb0: 6c66 2e52 756e 4773 5574 696c 285b 2763  lf.RunGsUtil(['c
-0000dbc0: 7027 2c20 7375 7269 2867 735f 6b65 7929  p', suri(gs_key)
-0000dbd0: 2c20 7375 7269 2873 335f 6275 636b 6574  , suri(s3_bucket
-0000dbe0: 295d 290a 2020 2020 7769 7468 2053 6574  )]).    with Set
-0000dbf0: 426f 746f 436f 6e66 6967 466f 7254 6573  BotoConfigForTes
-0000dc00: 7428 5b28 2747 5355 7469 6c27 2c20 2772  t([('GSUtil', 'r
-0000dc10: 6573 756d 6162 6c65 5f74 6872 6573 686f  esumable_thresho
-0000dc20: 6c64 272c 2073 7472 284f 4e45 5f4b 4942  ld', str(ONE_KIB
-0000dc30: 2929 2c0a 2020 2020 2020 2020 2020 2020  )),.            
-0000dc40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000dc50: 2020 2028 2747 5355 7469 6c27 2c20 276a     ('GSUtil', 'j
-0000dc60: 736f 6e5f 7265 7375 6d61 626c 655f 6368  son_resumable_ch
-0000dc70: 756e 6b5f 7369 7a65 272c 0a20 2020 2020  unk_size',.     
-0000dc80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000dc90: 2020 2020 2020 2020 2020 2073 7472 284f             str(O
-0000dca0: 4e45 5f4b 4942 202a 2032 3536 2929 5d29  NE_KIB * 256))])
-0000dcb0: 3a0a 2020 2020 2020 2320 456e 7375 7265  :.      # Ensure
-0000dcc0: 2063 6f70 7920 616c 736f 2077 6f72 6b73   copy also works
-0000dcd0: 2061 6372 6f73 7320 6a73 6f6e 2075 706c   across json upl
-0000dce0: 6f61 6420 6368 756e 6b20 626f 756e 6461  oad chunk bounda
-0000dcf0: 7269 6573 2e0a 2020 2020 2020 7365 6c66  ries..      self
-0000dd00: 2e52 756e 4773 5574 696c 285b 2763 7027  .RunGsUtil(['cp'
-0000dd10: 2c20 7375 7269 2873 335f 6b65 7929 2c20  , suri(s3_key), 
-0000dd20: 7375 7269 2867 735f 6275 636b 6574 295d  suri(gs_bucket)]
-0000dd30: 290a 0a20 2040 756e 6974 7465 7374 2e73  )..  @unittest.s
-0000dd40: 6b69 7055 6e6c 6573 7328 4841 535f 5333  kipUnless(HAS_S3
-0000dd50: 5f43 5245 4453 2c20 2754 6573 7420 7265  _CREDS, 'Test re
-0000dd60: 7175 6972 6573 2062 6f74 6820 5333 2061  quires both S3 a
-0000dd70: 6e64 2047 5320 6372 6564 656e 7469 616c  nd GS credential
-0000dd80: 7327 290a 2020 6465 6620 7465 7374 5f67  s').  def test_g
-0000dd90: 735f 746f 5f73 335f 6d75 6c74 6970 6172  s_to_s3_multipar
-0000dda0: 745f 6370 2873 656c 6629 3a0a 2020 2020  t_cp(self):.    
-0000ddb0: 2222 2245 6e73 7572 6520 6461 6973 795f  """Ensure daisy_
-0000ddc0: 6368 6169 6e20 776f 726b 7320 666f 7220  chain works for 
-0000ddd0: 616e 206f 626a 6563 7420 7468 6174 2069  an object that i
-0000dde0: 7320 646f 776e 6c6f 6164 6564 2069 6e20  s downloaded in 
-0000ddf0: 3220 7061 7274 732e 2222 220a 2020 2020  2 parts.""".    
-0000de00: 7333 5f62 7563 6b65 7420 3d20 7365 6c66  s3_bucket = self
-0000de10: 2e43 7265 6174 6542 7563 6b65 7428 7072  .CreateBucket(pr
-0000de20: 6f76 6964 6572 3d27 7333 2729 0a20 2020  ovider='s3').   
-0000de30: 2067 735f 6275 636b 6574 203d 2073 656c   gs_bucket = sel
-0000de40: 662e 4372 6561 7465 4275 636b 6574 2870  f.CreateBucket(p
-0000de50: 726f 7669 6465 723d 2767 7327 2c20 7072  rovider='gs', pr
-0000de60: 6566 6572 5f6a 736f 6e5f 6170 693d 5472  efer_json_api=Tr
-0000de70: 7565 290a 2020 2020 6e75 6d5f 6279 7465  ue).    num_byte
-0000de80: 7320 3d20 696e 7428 5f44 4546 4155 4c54  s = int(_DEFAULT
-0000de90: 5f44 4f57 4e4c 4f41 445f 4348 554e 4b5f  _DOWNLOAD_CHUNK_
-0000dea0: 5349 5a45 202a 2031 2e31 290a 2020 2020  SIZE * 1.1).    
-0000deb0: 6773 5f6b 6579 203d 2073 656c 662e 4372  gs_key = self.Cr
-0000dec0: 6561 7465 4f62 6a65 6374 2862 7563 6b65  eateObject(bucke
-0000ded0: 745f 7572 693d 6773 5f62 7563 6b65 742c  t_uri=gs_bucket,
-0000dee0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000def0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000df00: 636f 6e74 656e 7473 3d62 2762 2720 2a20  contents=b'b' * 
-0000df10: 6e75 6d5f 6279 7465 732c 0a20 2020 2020  num_bytes,.     
-0000df20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000df30: 2020 2020 2020 2020 2020 7072 6566 6572            prefer
-0000df40: 5f6a 736f 6e5f 6170 693d 5472 7565 290a  _json_api=True).
-0000df50: 2020 2020 7365 6c66 2e52 756e 4773 5574      self.RunGsUt
-0000df60: 696c 285b 0a20 2020 2020 2020 2027 2d6f  il([.        '-o
-0000df70: 272c 2027 7333 3a75 7365 2d73 6967 7634  ', 's3:use-sigv4
-0000df80: 3d54 7275 6527 2c20 272d 6f27 2c20 2773  =True', '-o', 's
-0000df90: 333a 686f 7374 3d73 332e 616d 617a 6f6e  3:host=s3.amazon
-0000dfa0: 6177 732e 636f 6d27 2c20 2763 7027 2c0a  aws.com', 'cp',.
-0000dfb0: 2020 2020 2020 2020 7375 7269 2867 735f          suri(gs_
-0000dfc0: 6b65 7929 2c0a 2020 2020 2020 2020 7375  key),.        su
-0000dfd0: 7269 2873 335f 6275 636b 6574 290a 2020  ri(s3_bucket).  
-0000dfe0: 2020 5d29 0a0a 2020 4075 6e69 7474 6573    ])..  @unittes
-0000dff0: 742e 736b 6970 2827 5468 6973 2074 6573  t.skip('This tes
-0000e000: 7420 6973 2073 6c6f 7720 6475 6520 746f  t is slow due to
-0000e010: 2063 7265 6174 696e 6720 6d61 6e79 206f   creating many o
-0000e020: 626a 6563 7473 2c20 270a 2020 2020 2020  bjects, '.      
-0000e030: 2020 2020 2020 2020 2020 2027 6275 7420             'but 
-0000e040: 7265 6d61 696e 7320 6865 7265 2066 6f72  remains here for
-0000e050: 2064 6562 7567 6769 6e67 2070 7572 706f   debugging purpo
-0000e060: 7365 732e 2729 0a20 2064 6566 2074 6573  ses.').  def tes
-0000e070: 745f 6461 6973 795f 6368 6169 6e5f 6370  t_daisy_chain_cp
-0000e080: 5f66 696c 655f 7369 7a65 7328 7365 6c66  _file_sizes(self
-0000e090: 293a 0a20 2020 2022 2222 456e 7375 7265  ):.    """Ensure
-0000e0a0: 2064 6169 7379 2063 6861 696e 2063 7020   daisy chain cp 
-0000e0b0: 776f 726b 7320 7769 7468 2061 2077 6964  works with a wid
-0000e0c0: 6520 6f66 2066 696c 6520 7369 7a65 732e  e of file sizes.
-0000e0d0: 2222 220a 2020 2020 6275 636b 6574 5f75  """.    bucket_u
-0000e0e0: 7269 203d 2073 656c 662e 4372 6561 7465  ri = self.Create
-0000e0f0: 4275 636b 6574 2829 0a20 2020 2062 7563  Bucket().    buc
-0000e100: 6b65 7432 5f75 7269 203d 2073 656c 662e  ket2_uri = self.
-0000e110: 4372 6561 7465 4275 636b 6574 2829 0a20  CreateBucket(). 
-0000e120: 2020 2065 7870 6f6e 656e 745f 6361 7020     exponent_cap 
-0000e130: 3d20 3238 2020 2320 5570 2074 6f20 3235  = 28  # Up to 25
-0000e140: 3620 4d69 4220 696e 2073 697a 652e 0a20  6 MiB in size.. 
-0000e150: 2020 2066 6f72 2069 2069 6e20 7261 6e67     for i in rang
-0000e160: 6528 6578 706f 6e65 6e74 5f63 6170 293a  e(exponent_cap):
-0000e170: 0a20 2020 2020 206f 6e65 5f62 7974 655f  .      one_byte_
-0000e180: 736d 616c 6c65 7220 3d20 322a 2a69 202d  smaller = 2**i -
-0000e190: 2031 0a20 2020 2020 206e 6f72 6d61 6c20   1.      normal 
-0000e1a0: 3d20 322a 2a69 0a20 2020 2020 206f 6e65  = 2**i.      one
-0000e1b0: 5f62 7974 655f 6c61 7267 6572 203d 2032  _byte_larger = 2
-0000e1c0: 2a2a 6920 2b20 310a 2020 2020 2020 7365  **i + 1.      se
-0000e1d0: 6c66 2e43 7265 6174 654f 626a 6563 7428  lf.CreateObject(
-0000e1e0: 6275 636b 6574 5f75 7269 3d62 7563 6b65  bucket_uri=bucke
-0000e1f0: 745f 7572 692c 2063 6f6e 7465 6e74 733d  t_uri, contents=
-0000e200: 6227 6127 202a 206f 6e65 5f62 7974 655f  b'a' * one_byte_
-0000e210: 736d 616c 6c65 7229 0a20 2020 2020 2073  smaller).      s
-0000e220: 656c 662e 4372 6561 7465 4f62 6a65 6374  elf.CreateObject
-0000e230: 2862 7563 6b65 745f 7572 693d 6275 636b  (bucket_uri=buck
-0000e240: 6574 5f75 7269 2c20 636f 6e74 656e 7473  et_uri, contents
-0000e250: 3d62 2762 2720 2a20 6e6f 726d 616c 290a  =b'b' * normal).
-0000e260: 2020 2020 2020 7365 6c66 2e43 7265 6174        self.Creat
-0000e270: 654f 626a 6563 7428 6275 636b 6574 5f75  eObject(bucket_u
-0000e280: 7269 3d62 7563 6b65 745f 7572 692c 2063  ri=bucket_uri, c
-0000e290: 6f6e 7465 6e74 733d 6227 6327 202a 206f  ontents=b'c' * o
-0000e2a0: 6e65 5f62 7974 655f 6c61 7267 6572 290a  ne_byte_larger).
-0000e2b0: 0a20 2020 2073 656c 662e 4173 7365 7274  .    self.Assert
-0000e2c0: 4e4f 626a 6563 7473 496e 4275 636b 6574  NObjectsInBucket
-0000e2d0: 2862 7563 6b65 745f 7572 692c 2065 7870  (bucket_uri, exp
-0000e2e0: 6f6e 656e 745f 6361 7020 2a20 3329 0a20  onent_cap * 3). 
-0000e2f0: 2020 2073 656c 662e 5275 6e47 7355 7469     self.RunGsUti
-0000e300: 6c28 0a20 2020 2020 2020 205b 272d 6d27  l(.        ['-m'
-0000e310: 2c20 2763 7027 2c20 272d 4427 2c0a 2020  , 'cp', '-D',.  
-0000e320: 2020 2020 2020 2073 7572 6928 6275 636b         suri(buck
-0000e330: 6574 5f75 7269 2c20 272a 2a27 292c 0a20  et_uri, '**'),. 
-0000e340: 2020 2020 2020 2020 7375 7269 2862 7563          suri(buc
-0000e350: 6b65 7432 5f75 7269 295d 290a 0a20 2020  ket2_uri)])..   
-0000e360: 2073 656c 662e 4173 7365 7274 4e4f 626a   self.AssertNObj
-0000e370: 6563 7473 496e 4275 636b 6574 2862 7563  ectsInBucket(buc
-0000e380: 6b65 7432 5f75 7269 2c20 6578 706f 6e65  ket2_uri, expone
-0000e390: 6e74 5f63 6170 202a 2033 290a 0a20 2064  nt_cap * 3)..  d
-0000e3a0: 6566 2074 6573 745f 6461 6973 795f 6368  ef test_daisy_ch
-0000e3b0: 6169 6e5f 6370 2873 656c 6629 3a0a 2020  ain_cp(self):.  
-0000e3c0: 2020 2222 2254 6573 7473 2063 7020 7769    """Tests cp wi
-0000e3d0: 7468 2074 6865 202d 4420 6f70 7469 6f6e  th the -D option
-0000e3e0: 2e22 2222 0a20 2020 2062 7563 6b65 7431  .""".    bucket1
-0000e3f0: 5f75 7269 203d 2073 656c 662e 4372 6561  _uri = self.Crea
-0000e400: 7465 4275 636b 6574 2873 746f 7261 6765  teBucket(storage
-0000e410: 5f63 6c61 7373 3d27 7374 616e 6461 7264  _class='standard
-0000e420: 2729 0a20 2020 2062 7563 6b65 7432 5f75  ').    bucket2_u
-0000e430: 7269 203d 2073 656c 662e 4372 6561 7465  ri = self.Create
-0000e440: 4275 636b 6574 280a 2020 2020 2020 2020  Bucket(.        
-0000e450: 7374 6f72 6167 655f 636c 6173 733d 2764  storage_class='d
-0000e460: 7572 6162 6c65 5f72 6564 7563 6564 5f61  urable_reduced_a
-0000e470: 7661 696c 6162 696c 6974 7927 290a 2020  vailability').  
-0000e480: 2020 6b65 795f 7572 6920 3d20 7365 6c66    key_uri = self
-0000e490: 2e43 7265 6174 654f 626a 6563 7428 6275  .CreateObject(bu
-0000e4a0: 636b 6574 5f75 7269 3d62 7563 6b65 7431  cket_uri=bucket1
-0000e4b0: 5f75 7269 2c20 636f 6e74 656e 7473 3d62  _uri, contents=b
-0000e4c0: 2766 6f6f 2729 0a20 2020 2023 2053 6574  'foo').    # Set
-0000e4d0: 2073 6f6d 6520 6865 6164 6572 7320 6f6e   some headers on
-0000e4e0: 2073 6f75 7263 6520 6f62 6a65 6374 2073   source object s
-0000e4f0: 6f20 7765 2063 616e 2076 6572 6966 7920  o we can verify 
-0000e500: 7468 6174 2068 6561 6465 7273 2061 7265  that headers are
-0000e510: 0a20 2020 2023 2070 7265 7365 7265 7665  .    # presereve
-0000e520: 6420 6279 2064 6169 7379 2d63 6861 696e  d by daisy-chain
-0000e530: 2063 6f70 792e 0a20 2020 2073 656c 662e   copy..    self.
-0000e540: 5275 6e47 7355 7469 6c28 5b0a 2020 2020  RunGsUtil([.    
-0000e550: 2020 2020 2773 6574 6d65 7461 272c 2027      'setmeta', '
-0000e560: 2d68 272c 2027 4361 6368 652d 436f 6e74  -h', 'Cache-Cont
-0000e570: 726f 6c3a 7075 626c 6963 2c6d 6178 2d61  rol:public,max-a
-0000e580: 6765 3d31 3227 2c20 272d 6827 2c0a 2020  ge=12', '-h',.  
-0000e590: 2020 2020 2020 2743 6f6e 7465 6e74 2d54        'Content-T
-0000e5a0: 7970 653a 696d 6167 652f 6769 6627 2c20  ype:image/gif', 
-0000e5b0: 272d 6827 2c0a 2020 2020 2020 2020 2778  '-h',.        'x
-0000e5c0: 2d25 732d 6d65 7461 2d31 3a61 6263 6427  -%s-meta-1:abcd'
-0000e5d0: 2025 2073 656c 662e 7072 6f76 6964 6572   % self.provider
-0000e5e0: 5f63 7573 746f 6d5f 6d65 7461 2c0a 2020  _custom_meta,.  
-0000e5f0: 2020 2020 2020 7375 7269 286b 6579 5f75        suri(key_u
-0000e600: 7269 290a 2020 2020 5d29 0a20 2020 2023  ri).    ]).    #
-0000e610: 2053 6574 2070 7562 6c69 632d 7265 6164   Set public-read
-0000e620: 2028 6e6f 6e2d 6465 6661 756c 7429 2041   (non-default) A
-0000e630: 434c 2073 6f20 7765 2063 616e 2076 6572  CL so we can ver
-0000e640: 6966 7920 7468 6174 2063 7020 2d44 202d  ify that cp -D -
-0000e650: 7020 776f 726b 732e 0a20 2020 2073 656c  p works..    sel
-0000e660: 662e 5275 6e47 7355 7469 6c28 5b27 6163  f.RunGsUtil(['ac
-0000e670: 6c27 2c20 2773 6574 272c 2027 7075 626c  l', 'set', 'publ
-0000e680: 6963 2d72 6561 6427 2c20 7375 7269 286b  ic-read', suri(k
-0000e690: 6579 5f75 7269 295d 290a 2020 2020 6163  ey_uri)]).    ac
-0000e6a0: 6c5f 6a73 6f6e 203d 2073 656c 662e 5275  l_json = self.Ru
-0000e6b0: 6e47 7355 7469 6c28 5b27 6163 6c27 2c20  nGsUtil(['acl', 
-0000e6c0: 2767 6574 272c 2073 7572 6928 6b65 795f  'get', suri(key_
-0000e6d0: 7572 6929 5d2c 2072 6574 7572 6e5f 7374  uri)], return_st
-0000e6e0: 646f 7574 3d54 7275 6529 0a20 2020 2023  dout=True).    #
-0000e6f0: 2050 6572 666f 726d 2064 6169 7379 2d63   Perform daisy-c
-0000e700: 6861 696e 2063 6f70 7920 616e 6420 7665  hain copy and ve
-0000e710: 7269 6679 2074 6861 7420 736f 7572 6365  rify that source
-0000e720: 206f 626a 6563 7420 6865 6164 6572 7320   object headers 
-0000e730: 616e 6420 4143 4c0a 2020 2020 2320 7765  and ACL.    # we
-0000e740: 7265 2070 7265 7365 7276 6564 2e20 416c  re preserved. Al
-0000e750: 736f 2073 7065 6369 6679 202d 6e20 6f70  so specify -n op
-0000e760: 7469 6f6e 2074 6f20 7465 7374 2074 6861  tion to test tha
-0000e770: 7420 6773 7574 696c 2063 6f72 7265 6374  t gsutil correct
-0000e780: 6c79 0a20 2020 2023 2072 656d 6f76 6573  ly.    # removes
-0000e790: 2074 6865 2078 2d67 6f6f 672d 6966 2d67   the x-goog-if-g
-0000e7a0: 656e 6572 6174 696f 6e2d 6d61 7463 683a  eneration-match:
-0000e7b0: 3020 6865 6164 6572 2074 6861 7420 7761  0 header that wa
-0000e7c0: 7320 7365 7420 6174 2075 706c 6f61 6469  s set at uploadi
-0000e7d0: 6e67 0a20 2020 2023 2074 696d 6520 7768  ng.    # time wh
-0000e7e0: 656e 2075 7064 6174 696e 6720 7468 6520  en updating the 
-0000e7f0: 4143 4c2e 0a20 2020 2073 7464 6572 7220  ACL..    stderr 
-0000e800: 3d20 7365 6c66 2e52 756e 4773 5574 696c  = self.RunGsUtil
-0000e810: 280a 2020 2020 2020 2020 5b27 6370 272c  (.        ['cp',
-0000e820: 2027 2d44 706e 272c 2073 7572 6928 6b65   '-Dpn', suri(ke
-0000e830: 795f 7572 6929 2c0a 2020 2020 2020 2020  y_uri),.        
-0000e840: 2073 7572 6928 6275 636b 6574 325f 7572   suri(bucket2_ur
-0000e850: 6929 5d2c 2072 6574 7572 6e5f 7374 6465  i)], return_stde
-0000e860: 7272 3d54 7275 6529 0a20 2020 2073 656c  rr=True).    sel
-0000e870: 662e 6173 7365 7274 4e6f 7449 6e28 2743  f.assertNotIn('C
-0000e880: 6f70 792d 696e 2d74 6865 2d63 6c6f 7564  opy-in-the-cloud
-0000e890: 2064 6973 616c 6c6f 7765 6427 2c20 7374   disallowed', st
-0000e8a0: 6465 7272 290a 0a20 2020 2040 5265 7472  derr)..    @Retr
-0000e8b0: 7928 4173 7365 7274 696f 6e45 7272 6f72  y(AssertionError
-0000e8c0: 2c20 7472 6965 733d 332c 2074 696d 656f  , tries=3, timeo
-0000e8d0: 7574 5f73 6563 733d 3129 0a20 2020 2064  ut_secs=1).    d
-0000e8e0: 6566 205f 4368 6563 6b28 293a 0a20 2020  ef _Check():.   
-0000e8f0: 2020 2075 7269 203d 2073 7572 6928 6275     uri = suri(bu
-0000e900: 636b 6574 325f 7572 692c 206b 6579 5f75  cket2_uri, key_u
-0000e910: 7269 2e6f 626a 6563 745f 6e61 6d65 290a  ri.object_name).
-0000e920: 2020 2020 2020 7374 646f 7574 203d 2073        stdout = s
-0000e930: 656c 662e 5275 6e47 7355 7469 6c28 5b27  elf.RunGsUtil(['
-0000e940: 6c73 272c 2027 2d4c 272c 2075 7269 5d2c  ls', '-L', uri],
-0000e950: 2072 6574 7572 6e5f 7374 646f 7574 3d54   return_stdout=T
-0000e960: 7275 6529 0a20 2020 2020 2073 656c 662e  rue).      self.
-0000e970: 6173 7365 7274 5265 6765 7828 7374 646f  assertRegex(stdo
-0000e980: 7574 2c20 7227 4361 6368 652d 436f 6e74  ut, r'Cache-Cont
-0000e990: 726f 6c3a 5c73 2b70 7562 6c69 632c 6d61  rol:\s+public,ma
-0000e9a0: 782d 6167 653d 3132 2729 0a20 2020 2020  x-age=12').     
-0000e9b0: 2073 656c 662e 6173 7365 7274 5265 6765   self.assertRege
-0000e9c0: 7828 7374 646f 7574 2c20 7227 436f 6e74  x(stdout, r'Cont
-0000e9d0: 656e 742d 5479 7065 3a5c 732b 696d 6167  ent-Type:\s+imag
-0000e9e0: 652f 6769 6627 290a 2020 2020 2020 7365  e/gif').      se
-0000e9f0: 6c66 2e61 7373 6572 7452 6567 6578 2873  lf.assertRegex(s
-0000ea00: 7464 6f75 742c 2072 274d 6574 6164 6174  tdout, r'Metadat
-0000ea10: 613a 5c73 2b31 3a5c 732b 6162 6364 2729  a:\s+1:\s+abcd')
-0000ea20: 0a20 2020 2020 206e 6577 5f61 636c 5f6a  .      new_acl_j
-0000ea30: 736f 6e20 3d20 7365 6c66 2e52 756e 4773  son = self.RunGs
-0000ea40: 5574 696c 285b 2761 636c 272c 2027 6765  Util(['acl', 'ge
-0000ea50: 7427 2c20 7572 695d 2c20 7265 7475 726e  t', uri], return
-0000ea60: 5f73 7464 6f75 743d 5472 7565 290a 2020  _stdout=True).  
-0000ea70: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-0000ea80: 7175 616c 2861 636c 5f6a 736f 6e2c 206e  qual(acl_json, n
-0000ea90: 6577 5f61 636c 5f6a 736f 6e29 0a0a 2020  ew_acl_json)..  
-0000eaa0: 2020 5f43 6865 636b 2829 0a0a 2020 4075    _Check()..  @u
-0000eab0: 6e69 7474 6573 742e 736b 6970 556e 6c65  nittest.skipUnle
-0000eac0: 7373 280a 2020 2020 2020 6e6f 7420 4841  ss(.      not HA
-0000ead0: 535f 4753 5f50 4f52 542c 2027 6773 5f70  S_GS_PORT, 'gs_p
-0000eae0: 6f72 7420 6973 2064 6566 696e 6564 2069  ort is defined i
-0000eaf0: 6e20 636f 6e66 6967 2077 6869 6368 2063  n config which c
-0000eb00: 616e 2063 6175 7365 2027 0a20 2020 2020  an cause '.     
-0000eb10: 2027 7072 6f62 6c65 6d73 2077 6865 6e20   'problems when 
-0000eb20: 7570 6c6f 6164 696e 6720 616e 6420 646f  uploading and do
-0000eb30: 776e 6c6f 6164 696e 6720 746f 2074 6865  wnloading to the
-0000eb40: 2073 616d 6520 6c6f 6361 6c20 686f 7374   same local host
-0000eb50: 2070 6f72 7427 290a 2020 6465 6620 7465   port').  def te
-0000eb60: 7374 5f64 6169 7379 5f63 6861 696e 5f63  st_daisy_chain_c
-0000eb70: 705f 646f 776e 6c6f 6164 5f66 6169 6c75  p_download_failu
-0000eb80: 7265 2873 656c 6629 3a0a 2020 2020 2222  re(self):.    ""
-0000eb90: 2254 6573 7473 2063 7020 7769 7468 2074  "Tests cp with t
-0000eba0: 6865 202d 4420 6f70 7469 6f6e 2077 6865  he -D option whe
-0000ebb0: 6e20 7468 6520 646f 776e 6c6f 6164 2074  n the download t
-0000ebc0: 6872 6561 6420 6469 6573 2e22 2222 0a20  hread dies.""". 
-0000ebd0: 2020 2062 7563 6b65 7431 5f75 7269 203d     bucket1_uri =
-0000ebe0: 2073 656c 662e 4372 6561 7465 4275 636b   self.CreateBuck
-0000ebf0: 6574 2829 0a20 2020 2062 7563 6b65 7432  et().    bucket2
-0000ec00: 5f75 7269 203d 2073 656c 662e 4372 6561  _uri = self.Crea
-0000ec10: 7465 4275 636b 6574 2829 0a20 2020 206b  teBucket().    k
-0000ec20: 6579 5f75 7269 203d 2073 656c 662e 4372  ey_uri = self.Cr
-0000ec30: 6561 7465 4f62 6a65 6374 2862 7563 6b65  eateObject(bucke
-0000ec40: 745f 7572 693d 6275 636b 6574 315f 7572  t_uri=bucket1_ur
-0000ec50: 692c 0a20 2020 2020 2020 2020 2020 2020  i,.             
-0000ec60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ec70: 2020 2063 6f6e 7465 6e74 733d 6227 6127     contents=b'a'
-0000ec80: 202a 2073 656c 662e 6861 6c74 5f73 697a   * self.halt_siz
-0000ec90: 6529 0a20 2020 2062 6f74 6f5f 636f 6e66  e).    boto_conf
-0000eca0: 6967 5f66 6f72 5f74 6573 7420 3d20 2827  ig_for_test = ('
-0000ecb0: 4753 5574 696c 272c 2027 7265 7375 6d61  GSUtil', 'resuma
-0000ecc0: 626c 655f 7468 7265 7368 6f6c 6427 2c20  ble_threshold', 
-0000ecd0: 7374 7228 4f4e 455f 4b49 4229 290a 2020  str(ONE_KIB)).  
-0000ece0: 2020 7465 7374 5f63 616c 6c62 6163 6b5f    test_callback_
-0000ecf0: 6669 6c65 203d 2073 656c 662e 4372 6561  file = self.Crea
-0000ed00: 7465 5465 6d70 4669 6c65 280a 2020 2020  teTempFile(.    
-0000ed10: 2020 2020 636f 6e74 656e 7473 3d70 6963      contents=pic
-0000ed20: 6b6c 652e 6475 6d70 7328 4861 6c74 696e  kle.dumps(Haltin
-0000ed30: 6743 6f70 7943 616c 6c62 6163 6b48 616e  gCopyCallbackHan
-0000ed40: 646c 6572 2846 616c 7365 2c20 3529 2929  dler(False, 5)))
-0000ed50: 0a20 2020 2077 6974 6820 5365 7442 6f74  .    with SetBot
-0000ed60: 6f43 6f6e 6669 6746 6f72 5465 7374 285b  oConfigForTest([
-0000ed70: 626f 746f 5f63 6f6e 6669 675f 666f 725f  boto_config_for_
-0000ed80: 7465 7374 5d29 3a0a 2020 2020 2020 7374  test]):.      st
-0000ed90: 6465 7272 203d 2073 656c 662e 5275 6e47  derr = self.RunG
-0000eda0: 7355 7469 6c28 5b0a 2020 2020 2020 2020  sUtil([.        
-0000edb0: 2020 2763 7027 2c20 272d 2d74 6573 7463    'cp', '--testc
-0000edc0: 616c 6c62 6163 6b66 696c 6527 2c20 7465  allbackfile', te
-0000edd0: 7374 5f63 616c 6c62 6163 6b5f 6669 6c65  st_callback_file
-0000ede0: 2c20 272d 4427 2c0a 2020 2020 2020 2020  , '-D',.        
-0000edf0: 2020 7375 7269 286b 6579 5f75 7269 292c    suri(key_uri),
-0000ee00: 0a20 2020 2020 2020 2020 2073 7572 6928  .          suri(
-0000ee10: 6275 636b 6574 325f 7572 6929 0a20 2020  bucket2_uri).   
-0000ee20: 2020 205d 2c0a 2020 2020 2020 2020 2020     ],.          
-0000ee30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ee40: 2020 2020 6578 7065 6374 6564 5f73 7461      expected_sta
-0000ee50: 7475 733d 312c 0a20 2020 2020 2020 2020  tus=1,.         
+00008d30: 5b27 6370 272c 2027 2d27 2c20 272d 272c  ['cp', '-', '-',
+00008d40: 2073 7572 6928 6275 636b 6574 5f75 7269   suri(bucket_uri
+00008d50: 295d 2c0a 2020 2020 2020 2020 2020 2020  )],.            
+00008d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008d70: 7374 6469 6e3d 2762 6172 272c 0a20 2020  stdin='bar',.   
+00008d80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008d90: 2020 2020 2020 2020 2072 6574 7572 6e5f           return_
+00008da0: 7374 6465 7272 3d54 7275 652c 0a20 2020  stderr=True,.   
+00008db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008dc0: 2020 2020 2020 2020 2065 7870 6563 7465           expecte
+00008dd0: 645f 7374 6174 7573 3d31 290a 2020 2020  d_status=1).    
+00008de0: 7365 6c66 2e61 7373 6572 7449 6e28 274d  self.assertIn('M
+00008df0: 756c 7469 706c 6520 5552 4c20 7374 7269  ultiple URL stri
+00008e00: 6e67 7320 6172 6520 6e6f 7420 7375 7070  ngs are not supp
+00008e10: 6f72 7465 6420 7769 7468 2073 7472 6561  orted with strea
+00008e20: 6d69 6e67 272c 0a20 2020 2020 2020 2020  ming',.         
+00008e30: 2020 2020 2020 2020 2073 7464 6572 7229           stderr)
+00008e40: 0a0a 2020 2320 544f 444f 3a20 496d 706c  ..  # TODO: Impl
+00008e50: 656d 656e 7420 6120 7761 7920 746f 2074  ement a way to t
+00008e60: 6573 7420 626f 7468 2077 6974 6820 616e  est both with an
+00008e70: 6420 7769 7468 6f75 7420 7573 696e 6720  d without using 
+00008e80: 6d61 6769 6320 6669 6c65 2e0a 0a20 2040  magic file...  @
+00008e90: 5365 7175 656e 7469 616c 416e 6450 6172  SequentialAndPar
+00008ea0: 616c 6c65 6c54 7261 6e73 6665 720a 2020  allelTransfer.  
+00008eb0: 6465 6620 7465 7374 5f64 6574 6563 745f  def test_detect_
+00008ec0: 636f 6e74 656e 745f 7479 7065 2873 656c  content_type(sel
+00008ed0: 6629 3a0a 2020 2020 2222 2254 6573 7473  f):.    """Tests
+00008ee0: 206c 6f63 616c 2064 6574 6563 7469 6f6e   local detection
+00008ef0: 206f 6620 636f 6e74 656e 7420 7479 7065   of content type
+00008f00: 2e22 2222 0a20 2020 2062 7563 6b65 745f  .""".    bucket_
+00008f10: 7572 6920 3d20 7365 6c66 2e43 7265 6174  uri = self.Creat
+00008f20: 6542 7563 6b65 7428 290a 2020 2020 6473  eBucket().    ds
+00008f30: 7475 7269 203d 2073 7572 6928 6275 636b  turi = suri(buck
+00008f40: 6574 5f75 7269 2c20 2766 6f6f 2729 0a0a  et_uri, 'foo')..
+00008f50: 2020 2020 7365 6c66 2e52 756e 4773 5574      self.RunGsUt
+00008f60: 696c 285b 2763 7027 2c20 7365 6c66 2e5f  il(['cp', self._
+00008f70: 6765 745f 7465 7374 5f66 696c 6528 2774  get_test_file('t
+00008f80: 6573 742e 6d70 3327 292c 2064 7374 7572  est.mp3'), dstur
+00008f90: 695d 290a 0a20 2020 2023 2055 7365 2040  i])..    # Use @
+00008fa0: 5265 7472 7920 6173 2068 6564 6765 2061  Retry as hedge a
+00008fb0: 6761 696e 7374 2062 7563 6b65 7420 6c69  gainst bucket li
+00008fc0: 7374 696e 6720 6576 656e 7475 616c 2063  sting eventual c
+00008fd0: 6f6e 7369 7374 656e 6379 2e0a 2020 2020  onsistency..    
+00008fe0: 4052 6574 7279 2841 7373 6572 7469 6f6e  @Retry(Assertion
+00008ff0: 4572 726f 722c 2074 7269 6573 3d33 2c20  Error, tries=3, 
+00009000: 7469 6d65 6f75 745f 7365 6373 3d31 290a  timeout_secs=1).
+00009010: 2020 2020 6465 6620 5f43 6865 636b 3128      def _Check1(
+00009020: 293a 0a20 2020 2020 2073 7464 6f75 7420  ):.      stdout 
+00009030: 3d20 7365 6c66 2e52 756e 4773 5574 696c  = self.RunGsUtil
+00009040: 285b 276c 7327 2c20 272d 4c27 2c20 6473  (['ls', '-L', ds
+00009050: 7475 7269 5d2c 2072 6574 7572 6e5f 7374  turi], return_st
+00009060: 646f 7574 3d54 7275 6529 0a20 2020 2020  dout=True).     
+00009070: 2069 6620 4953 5f57 494e 444f 5753 3a0a   if IS_WINDOWS:.
+00009080: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+00009090: 6572 7454 7275 6528 0a20 2020 2020 2020  ertTrue(.       
+000090a0: 2020 2020 2072 652e 7365 6172 6368 2872       re.search(r
+000090b0: 2743 6f6e 7465 6e74 2d54 7970 653a 5c73  'Content-Type:\s
+000090c0: 2b61 7564 696f 2f78 2d6d 7067 272c 2073  +audio/x-mpg', s
+000090d0: 7464 6f75 7429 206f 720a 2020 2020 2020  tdout) or.      
+000090e0: 2020 2020 2020 7265 2e73 6561 7263 6828        re.search(
+000090f0: 7227 436f 6e74 656e 742d 5479 7065 3a5c  r'Content-Type:\
+00009100: 732b 6175 6469 6f2f 6d70 6567 272c 2073  s+audio/mpeg', s
+00009110: 7464 6f75 7429 290a 2020 2020 2020 656c  tdout)).      el
+00009120: 7365 3a0a 2020 2020 2020 2020 7365 6c66  se:.        self
+00009130: 2e61 7373 6572 7452 6567 6578 2873 7464  .assertRegex(std
+00009140: 6f75 742c 2072 2743 6f6e 7465 6e74 2d54  out, r'Content-T
+00009150: 7970 653a 5c73 2b61 7564 696f 2f6d 7065  ype:\s+audio/mpe
+00009160: 6727 290a 0a20 2020 205f 4368 6563 6b31  g')..    _Check1
+00009170: 2829 0a0a 2020 2020 7365 6c66 2e52 756e  ()..    self.Run
+00009180: 4773 5574 696c 285b 2763 7027 2c20 7365  GsUtil(['cp', se
+00009190: 6c66 2e5f 6765 745f 7465 7374 5f66 696c  lf._get_test_fil
+000091a0: 6528 2774 6573 742e 6769 6627 292c 2064  e('test.gif'), d
+000091b0: 7374 7572 695d 290a 0a20 2020 2023 2055  sturi])..    # U
+000091c0: 7365 2040 5265 7472 7920 6173 2068 6564  se @Retry as hed
+000091d0: 6765 2061 6761 696e 7374 2062 7563 6b65  ge against bucke
+000091e0: 7420 6c69 7374 696e 6720 6576 656e 7475  t listing eventu
+000091f0: 616c 2063 6f6e 7369 7374 656e 6379 2e0a  al consistency..
+00009200: 2020 2020 4052 6574 7279 2841 7373 6572      @Retry(Asser
+00009210: 7469 6f6e 4572 726f 722c 2074 7269 6573  tionError, tries
+00009220: 3d33 2c20 7469 6d65 6f75 745f 7365 6373  =3, timeout_secs
+00009230: 3d31 290a 2020 2020 6465 6620 5f43 6865  =1).    def _Che
+00009240: 636b 3228 293a 0a20 2020 2020 2073 7464  ck2():.      std
+00009250: 6f75 7420 3d20 7365 6c66 2e52 756e 4773  out = self.RunGs
+00009260: 5574 696c 285b 276c 7327 2c20 272d 4c27  Util(['ls', '-L'
+00009270: 2c20 6473 7475 7269 5d2c 2072 6574 7572  , dsturi], retur
+00009280: 6e5f 7374 646f 7574 3d54 7275 6529 0a20  n_stdout=True). 
+00009290: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+000092a0: 5265 6765 7828 7374 646f 7574 2c20 7227  Regex(stdout, r'
+000092b0: 436f 6e74 656e 742d 5479 7065 3a5c 732b  Content-Type:\s+
+000092c0: 696d 6167 652f 6769 6627 290a 0a20 2020  image/gif')..   
+000092d0: 205f 4368 6563 6b32 2829 0a0a 2020 6465   _Check2()..  de
+000092e0: 6620 7465 7374 5f63 6f6e 7465 6e74 5f74  f test_content_t
+000092f0: 7970 655f 6f76 6572 7269 6465 5f64 6566  ype_override_def
+00009300: 6175 6c74 2873 656c 6629 3a0a 2020 2020  ault(self):.    
+00009310: 2222 2254 6573 7473 206f 7665 7272 6964  """Tests overrid
+00009320: 696e 6720 636f 6e74 656e 7420 7479 7065  ing content type
+00009330: 2077 6974 6820 7468 6520 6465 6661 756c   with the defaul
+00009340: 7420 7661 6c75 652e 2222 220a 2020 2020  t value.""".    
+00009350: 6275 636b 6574 5f75 7269 203d 2073 656c  bucket_uri = sel
+00009360: 662e 4372 6561 7465 4275 636b 6574 2829  f.CreateBucket()
+00009370: 0a20 2020 2064 7374 7572 6920 3d20 7375  .    dsturi = su
+00009380: 7269 2862 7563 6b65 745f 7572 692c 2027  ri(bucket_uri, '
+00009390: 666f 6f27 290a 0a20 2020 2073 656c 662e  foo')..    self.
+000093a0: 5275 6e47 7355 7469 6c28 0a20 2020 2020  RunGsUtil(.     
+000093b0: 2020 205b 272d 6827 2c20 2743 6f6e 7465     ['-h', 'Conte
+000093c0: 6e74 2d54 7970 653a 272c 2027 6370 272c  nt-Type:', 'cp',
+000093d0: 0a20 2020 2020 2020 2020 7365 6c66 2e5f  .         self._
+000093e0: 6765 745f 7465 7374 5f66 696c 6528 2774  get_test_file('t
+000093f0: 6573 742e 6d70 3327 292c 2064 7374 7572  est.mp3'), dstur
+00009400: 695d 290a 0a20 2020 2023 2055 7365 2040  i])..    # Use @
+00009410: 5265 7472 7920 6173 2068 6564 6765 2061  Retry as hedge a
+00009420: 6761 696e 7374 2062 7563 6b65 7420 6c69  gainst bucket li
+00009430: 7374 696e 6720 6576 656e 7475 616c 2063  sting eventual c
+00009440: 6f6e 7369 7374 656e 6379 2e0a 2020 2020  onsistency..    
+00009450: 4052 6574 7279 2841 7373 6572 7469 6f6e  @Retry(Assertion
+00009460: 4572 726f 722c 2074 7269 6573 3d33 2c20  Error, tries=3, 
+00009470: 7469 6d65 6f75 745f 7365 6373 3d31 290a  timeout_secs=1).
+00009480: 2020 2020 6465 6620 5f43 6865 636b 3128      def _Check1(
+00009490: 293a 0a20 2020 2020 2073 7464 6f75 7420  ):.      stdout 
+000094a0: 3d20 7365 6c66 2e52 756e 4773 5574 696c  = self.RunGsUtil
+000094b0: 285b 276c 7327 2c20 272d 4c27 2c20 6473  (['ls', '-L', ds
+000094c0: 7475 7269 5d2c 2072 6574 7572 6e5f 7374  turi], return_st
+000094d0: 646f 7574 3d54 7275 6529 0a20 2020 2020  dout=True).     
+000094e0: 2073 656c 662e 6173 7365 7274 5265 6765   self.assertRege
+000094f0: 7828 7374 646f 7574 2c20 7227 436f 6e74  x(stdout, r'Cont
+00009500: 656e 742d 5479 7065 3a5c 732b 6170 706c  ent-Type:\s+appl
+00009510: 6963 6174 696f 6e2f 6f63 7465 742d 7374  ication/octet-st
+00009520: 7265 616d 2729 0a0a 2020 2020 5f43 6865  ream')..    _Che
+00009530: 636b 3128 290a 0a20 2020 2073 656c 662e  ck1()..    self.
+00009540: 5275 6e47 7355 7469 6c28 0a20 2020 2020  RunGsUtil(.     
+00009550: 2020 205b 272d 6827 2c20 2743 6f6e 7465     ['-h', 'Conte
+00009560: 6e74 2d54 7970 653a 272c 2027 6370 272c  nt-Type:', 'cp',
+00009570: 0a20 2020 2020 2020 2020 7365 6c66 2e5f  .         self._
+00009580: 6765 745f 7465 7374 5f66 696c 6528 2774  get_test_file('t
+00009590: 6573 742e 6769 6627 292c 2064 7374 7572  est.gif'), dstur
+000095a0: 695d 290a 0a20 2020 2023 2055 7365 2040  i])..    # Use @
+000095b0: 5265 7472 7920 6173 2068 6564 6765 2061  Retry as hedge a
+000095c0: 6761 696e 7374 2062 7563 6b65 7420 6c69  gainst bucket li
+000095d0: 7374 696e 6720 6576 656e 7475 616c 2063  sting eventual c
+000095e0: 6f6e 7369 7374 656e 6379 2e0a 2020 2020  onsistency..    
+000095f0: 4052 6574 7279 2841 7373 6572 7469 6f6e  @Retry(Assertion
+00009600: 4572 726f 722c 2074 7269 6573 3d33 2c20  Error, tries=3, 
+00009610: 7469 6d65 6f75 745f 7365 6373 3d31 290a  timeout_secs=1).
+00009620: 2020 2020 6465 6620 5f43 6865 636b 3228      def _Check2(
+00009630: 293a 0a20 2020 2020 2073 7464 6f75 7420  ):.      stdout 
+00009640: 3d20 7365 6c66 2e52 756e 4773 5574 696c  = self.RunGsUtil
+00009650: 285b 276c 7327 2c20 272d 4c27 2c20 6473  (['ls', '-L', ds
+00009660: 7475 7269 5d2c 2072 6574 7572 6e5f 7374  turi], return_st
+00009670: 646f 7574 3d54 7275 6529 0a20 2020 2020  dout=True).     
+00009680: 2073 656c 662e 6173 7365 7274 5265 6765   self.assertRege
+00009690: 7828 7374 646f 7574 2c20 7227 436f 6e74  x(stdout, r'Cont
+000096a0: 656e 742d 5479 7065 3a5c 732b 6170 706c  ent-Type:\s+appl
+000096b0: 6963 6174 696f 6e2f 6f63 7465 742d 7374  ication/octet-st
+000096c0: 7265 616d 2729 0a0a 2020 2020 5f43 6865  ream')..    _Che
+000096d0: 636b 3228 290a 0a20 2064 6566 2074 6573  ck2()..  def tes
+000096e0: 745f 636f 6e74 656e 745f 7479 7065 5f6f  t_content_type_o
+000096f0: 7665 7272 6964 6528 7365 6c66 293a 0a20  verride(self):. 
+00009700: 2020 2022 2222 5465 7374 7320 6f76 6572     """Tests over
+00009710: 7269 6469 6e67 2063 6f6e 7465 6e74 2074  riding content t
+00009720: 7970 6520 7769 7468 2061 2076 616c 7565  ype with a value
+00009730: 2e22 2222 0a20 2020 2062 7563 6b65 745f  .""".    bucket_
+00009740: 7572 6920 3d20 7365 6c66 2e43 7265 6174  uri = self.Creat
+00009750: 6542 7563 6b65 7428 290a 2020 2020 6473  eBucket().    ds
+00009760: 7475 7269 203d 2073 7572 6928 6275 636b  turi = suri(buck
+00009770: 6574 5f75 7269 2c20 2766 6f6f 2729 0a0a  et_uri, 'foo')..
+00009780: 2020 2020 7365 6c66 2e52 756e 4773 5574      self.RunGsUt
+00009790: 696c 285b 0a20 2020 2020 2020 2027 2d68  il([.        '-h
+000097a0: 272c 2027 436f 6e74 656e 742d 5479 7065  ', 'Content-Type
+000097b0: 3a74 6578 742f 706c 6169 6e27 2c20 2763  :text/plain', 'c
+000097c0: 7027 2c0a 2020 2020 2020 2020 7365 6c66  p',.        self
+000097d0: 2e5f 6765 745f 7465 7374 5f66 696c 6528  ._get_test_file(
+000097e0: 2774 6573 742e 6d70 3327 292c 2064 7374  'test.mp3'), dst
+000097f0: 7572 690a 2020 2020 5d29 0a0a 2020 2020  uri.    ])..    
+00009800: 2320 5573 6520 4052 6574 7279 2061 7320  # Use @Retry as 
+00009810: 6865 6467 6520 6167 6169 6e73 7420 6275  hedge against bu
+00009820: 636b 6574 206c 6973 7469 6e67 2065 7665  cket listing eve
+00009830: 6e74 7561 6c20 636f 6e73 6973 7465 6e63  ntual consistenc
+00009840: 792e 0a20 2020 2040 5265 7472 7928 4173  y..    @Retry(As
+00009850: 7365 7274 696f 6e45 7272 6f72 2c20 7472  sertionError, tr
+00009860: 6965 733d 332c 2074 696d 656f 7574 5f73  ies=3, timeout_s
+00009870: 6563 733d 3129 0a20 2020 2064 6566 205f  ecs=1).    def _
+00009880: 4368 6563 6b31 2829 3a0a 2020 2020 2020  Check1():.      
+00009890: 7374 646f 7574 203d 2073 656c 662e 5275  stdout = self.Ru
+000098a0: 6e47 7355 7469 6c28 5b27 6c73 272c 2027  nGsUtil(['ls', '
+000098b0: 2d4c 272c 2064 7374 7572 695d 2c20 7265  -L', dsturi], re
+000098c0: 7475 726e 5f73 7464 6f75 743d 5472 7565  turn_stdout=True
+000098d0: 290a 2020 2020 2020 7365 6c66 2e61 7373  ).      self.ass
+000098e0: 6572 7452 6567 6578 2873 7464 6f75 742c  ertRegex(stdout,
+000098f0: 2072 2743 6f6e 7465 6e74 2d54 7970 653a   r'Content-Type:
+00009900: 5c73 2b74 6578 742f 706c 6169 6e27 290a  \s+text/plain').
+00009910: 0a20 2020 205f 4368 6563 6b31 2829 0a0a  .    _Check1()..
+00009920: 2020 2020 7365 6c66 2e52 756e 4773 5574      self.RunGsUt
+00009930: 696c 285b 0a20 2020 2020 2020 2027 2d68  il([.        '-h
+00009940: 272c 2027 436f 6e74 656e 742d 5479 7065  ', 'Content-Type
+00009950: 3a74 6578 742f 706c 6169 6e27 2c20 2763  :text/plain', 'c
+00009960: 7027 2c0a 2020 2020 2020 2020 7365 6c66  p',.        self
+00009970: 2e5f 6765 745f 7465 7374 5f66 696c 6528  ._get_test_file(
+00009980: 2774 6573 742e 6769 6627 292c 2064 7374  'test.gif'), dst
+00009990: 7572 690a 2020 2020 5d29 0a0a 2020 2020  uri.    ])..    
+000099a0: 2320 5573 6520 4052 6574 7279 2061 7320  # Use @Retry as 
+000099b0: 6865 6467 6520 6167 6169 6e73 7420 6275  hedge against bu
+000099c0: 636b 6574 206c 6973 7469 6e67 2065 7665  cket listing eve
+000099d0: 6e74 7561 6c20 636f 6e73 6973 7465 6e63  ntual consistenc
+000099e0: 792e 0a20 2020 2040 5265 7472 7928 4173  y..    @Retry(As
+000099f0: 7365 7274 696f 6e45 7272 6f72 2c20 7472  sertionError, tr
+00009a00: 6965 733d 332c 2074 696d 656f 7574 5f73  ies=3, timeout_s
+00009a10: 6563 733d 3129 0a20 2020 2064 6566 205f  ecs=1).    def _
+00009a20: 4368 6563 6b32 2829 3a0a 2020 2020 2020  Check2():.      
+00009a30: 7374 646f 7574 203d 2073 656c 662e 5275  stdout = self.Ru
+00009a40: 6e47 7355 7469 6c28 5b27 6c73 272c 2027  nGsUtil(['ls', '
+00009a50: 2d4c 272c 2064 7374 7572 695d 2c20 7265  -L', dsturi], re
+00009a60: 7475 726e 5f73 7464 6f75 743d 5472 7565  turn_stdout=True
+00009a70: 290a 2020 2020 2020 7365 6c66 2e61 7373  ).      self.ass
+00009a80: 6572 7452 6567 6578 2873 7464 6f75 742c  ertRegex(stdout,
+00009a90: 2072 2743 6f6e 7465 6e74 2d54 7970 653a   r'Content-Type:
+00009aa0: 5c73 2b74 6578 742f 706c 6169 6e27 290a  \s+text/plain').
+00009ab0: 0a20 2020 205f 4368 6563 6b32 2829 0a0a  .    _Check2()..
+00009ac0: 2020 4075 6e69 7474 6573 742e 736b 6970    @unittest.skip
+00009ad0: 4966 2849 535f 5749 4e44 4f57 532c 2027  If(IS_WINDOWS, '
+00009ae0: 6d61 6769 6366 696c 6520 6973 206e 6f74  magicfile is not
+00009af0: 2061 7661 696c 6162 6c65 206f 6e20 5769   available on Wi
+00009b00: 6e64 6f77 732e 2729 0a20 2040 5365 7175  ndows.').  @Sequ
+00009b10: 656e 7469 616c 416e 6450 6172 616c 6c65  entialAndParalle
+00009b20: 6c54 7261 6e73 6665 720a 2020 6465 6620  lTransfer.  def 
+00009b30: 7465 7374 5f6d 6167 6963 6669 6c65 5f6f  test_magicfile_o
+00009b40: 7665 7272 6964 6528 7365 6c66 293a 0a20  verride(self):. 
+00009b50: 2020 2022 2222 5465 7374 7320 636f 6e74     """Tests cont
+00009b60: 656e 7420 7479 7065 206f 7665 7272 6964  ent type overrid
+00009b70: 6520 7769 7468 206d 6167 6963 6669 6c65  e with magicfile
+00009b80: 2076 616c 7565 2e22 2222 0a20 2020 2062   value.""".    b
+00009b90: 7563 6b65 745f 7572 6920 3d20 7365 6c66  ucket_uri = self
+00009ba0: 2e43 7265 6174 6542 7563 6b65 7428 290a  .CreateBucket().
+00009bb0: 2020 2020 6473 7475 7269 203d 2073 7572      dsturi = sur
+00009bc0: 6928 6275 636b 6574 5f75 7269 2c20 2766  i(bucket_uri, 'f
+00009bd0: 6f6f 2729 0a20 2020 2066 7061 7468 203d  oo').    fpath =
+00009be0: 2073 656c 662e 4372 6561 7465 5465 6d70   self.CreateTemp
+00009bf0: 4669 6c65 2863 6f6e 7465 6e74 733d 6227  File(contents=b'
+00009c00: 666f 6f2f 6261 725c 6e27 290a 2020 2020  foo/bar\n').    
+00009c10: 7365 6c66 2e52 756e 4773 5574 696c 285b  self.RunGsUtil([
+00009c20: 2763 7027 2c20 6670 6174 682c 2064 7374  'cp', fpath, dst
+00009c30: 7572 695d 290a 0a20 2020 2023 2055 7365  uri])..    # Use
+00009c40: 2040 5265 7472 7920 6173 2068 6564 6765   @Retry as hedge
+00009c50: 2061 6761 696e 7374 2062 7563 6b65 7420   against bucket 
+00009c60: 6c69 7374 696e 6720 6576 656e 7475 616c  listing eventual
+00009c70: 2063 6f6e 7369 7374 656e 6379 2e0a 2020   consistency..  
+00009c80: 2020 4052 6574 7279 2841 7373 6572 7469    @Retry(Asserti
+00009c90: 6f6e 4572 726f 722c 2074 7269 6573 3d33  onError, tries=3
+00009ca0: 2c20 7469 6d65 6f75 745f 7365 6373 3d31  , timeout_secs=1
+00009cb0: 290a 2020 2020 6465 6620 5f43 6865 636b  ).    def _Check
+00009cc0: 3128 293a 0a20 2020 2020 2073 7464 6f75  1():.      stdou
+00009cd0: 7420 3d20 7365 6c66 2e52 756e 4773 5574  t = self.RunGsUt
+00009ce0: 696c 285b 276c 7327 2c20 272d 4c27 2c20  il(['ls', '-L', 
+00009cf0: 6473 7475 7269 5d2c 2072 6574 7572 6e5f  dsturi], return_
+00009d00: 7374 646f 7574 3d54 7275 6529 0a20 2020  stdout=True).   
+00009d10: 2020 2075 7365 5f6d 6167 6963 6669 6c65     use_magicfile
+00009d20: 203d 2062 6f74 6f2e 636f 6e66 6967 2e67   = boto.config.g
+00009d30: 6574 626f 6f6c 2827 4753 5574 696c 272c  etbool('GSUtil',
+00009d40: 2027 7573 655f 6d61 6769 6366 696c 6527   'use_magicfile'
+00009d50: 2c20 4661 6c73 6529 0a20 2020 2020 2063  , False).      c
+00009d60: 6f6e 7465 6e74 5f74 7970 6520 3d20 2827  ontent_type = ('
+00009d70: 7465 7874 2f70 6c61 696e 270a 2020 2020  text/plain'.    
+00009d80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009d90: 2020 6966 2075 7365 5f6d 6167 6963 6669    if use_magicfi
+00009da0: 6c65 2065 6c73 6520 2761 7070 6c69 6361  le else 'applica
+00009db0: 7469 6f6e 2f6f 6374 6574 2d73 7472 6561  tion/octet-strea
+00009dc0: 6d27 290a 2020 2020 2020 7365 6c66 2e61  m').      self.a
+00009dd0: 7373 6572 7452 6567 6578 2873 7464 6f75  ssertRegex(stdou
+00009de0: 742c 2072 2743 6f6e 7465 6e74 2d54 7970  t, r'Content-Typ
+00009df0: 653a 5c73 2b25 7327 2025 2063 6f6e 7465  e:\s+%s' % conte
+00009e00: 6e74 5f74 7970 6529 0a0a 2020 2020 5f43  nt_type)..    _C
+00009e10: 6865 636b 3128 290a 0a20 2040 5365 7175  heck1()..  @Sequ
+00009e20: 656e 7469 616c 416e 6450 6172 616c 6c65  entialAndParalle
+00009e30: 6c54 7261 6e73 6665 720a 2020 6465 6620  lTransfer.  def 
+00009e40: 7465 7374 5f63 6f6e 7465 6e74 5f74 7970  test_content_typ
+00009e50: 655f 6d69 736d 6174 6368 6573 2873 656c  e_mismatches(sel
+00009e60: 6629 3a0a 2020 2020 2222 2254 6573 7473  f):.    """Tests
+00009e70: 206f 7665 7272 6964 696e 6720 636f 6e74   overriding cont
+00009e80: 656e 7420 7479 7065 2077 6865 6e20 6974  ent type when it
+00009e90: 2064 6f65 7320 6e6f 7420 6d61 7463 6820   does not match 
+00009ea0: 7468 6520 6669 6c65 2074 7970 652e 2222  the file type.""
+00009eb0: 220a 2020 2020 6275 636b 6574 5f75 7269  ".    bucket_uri
+00009ec0: 203d 2073 656c 662e 4372 6561 7465 4275   = self.CreateBu
+00009ed0: 636b 6574 2829 0a20 2020 2064 7374 7572  cket().    dstur
+00009ee0: 6920 3d20 7375 7269 2862 7563 6b65 745f  i = suri(bucket_
+00009ef0: 7572 692c 2027 666f 6f27 290a 2020 2020  uri, 'foo').    
+00009f00: 6670 6174 6820 3d20 7365 6c66 2e43 7265  fpath = self.Cre
+00009f10: 6174 6554 656d 7046 696c 6528 636f 6e74  ateTempFile(cont
+00009f20: 656e 7473 3d62 2766 6f6f 2f62 6172 5c6e  ents=b'foo/bar\n
+00009f30: 2729 0a0a 2020 2020 7365 6c66 2e52 756e  ')..    self.Run
+00009f40: 4773 5574 696c 285b 0a20 2020 2020 2020  GsUtil([.       
+00009f50: 2027 2d68 272c 2027 436f 6e74 656e 742d   '-h', 'Content-
+00009f60: 5479 7065 3a69 6d61 6765 2f67 6966 272c  Type:image/gif',
+00009f70: 2027 6370 272c 0a20 2020 2020 2020 2073   'cp',.        s
+00009f80: 656c 662e 5f67 6574 5f74 6573 745f 6669  elf._get_test_fi
+00009f90: 6c65 2827 7465 7374 2e6d 7033 2729 2c20  le('test.mp3'), 
+00009fa0: 6473 7475 7269 0a20 2020 205d 290a 0a20  dsturi.    ]).. 
+00009fb0: 2020 2023 2055 7365 2040 5265 7472 7920     # Use @Retry 
+00009fc0: 6173 2068 6564 6765 2061 6761 696e 7374  as hedge against
+00009fd0: 2062 7563 6b65 7420 6c69 7374 696e 6720   bucket listing 
+00009fe0: 6576 656e 7475 616c 2063 6f6e 7369 7374  eventual consist
+00009ff0: 656e 6379 2e0a 2020 2020 4052 6574 7279  ency..    @Retry
+0000a000: 2841 7373 6572 7469 6f6e 4572 726f 722c  (AssertionError,
+0000a010: 2074 7269 6573 3d33 2c20 7469 6d65 6f75   tries=3, timeou
+0000a020: 745f 7365 6373 3d31 290a 2020 2020 6465  t_secs=1).    de
+0000a030: 6620 5f43 6865 636b 3128 293a 0a20 2020  f _Check1():.   
+0000a040: 2020 2073 7464 6f75 7420 3d20 7365 6c66     stdout = self
+0000a050: 2e52 756e 4773 5574 696c 285b 276c 7327  .RunGsUtil(['ls'
+0000a060: 2c20 272d 4c27 2c20 6473 7475 7269 5d2c  , '-L', dsturi],
+0000a070: 2072 6574 7572 6e5f 7374 646f 7574 3d54   return_stdout=T
+0000a080: 7275 6529 0a20 2020 2020 2073 656c 662e  rue).      self.
+0000a090: 6173 7365 7274 5265 6765 7828 7374 646f  assertRegex(stdo
+0000a0a0: 7574 2c20 7227 436f 6e74 656e 742d 5479  ut, r'Content-Ty
+0000a0b0: 7065 3a5c 732b 696d 6167 652f 6769 6627  pe:\s+image/gif'
+0000a0c0: 290a 0a20 2020 205f 4368 6563 6b31 2829  )..    _Check1()
+0000a0d0: 0a0a 2020 2020 7365 6c66 2e52 756e 4773  ..    self.RunGs
+0000a0e0: 5574 696c 285b 0a20 2020 2020 2020 2027  Util([.        '
+0000a0f0: 2d68 272c 2027 436f 6e74 656e 742d 5479  -h', 'Content-Ty
+0000a100: 7065 3a69 6d61 6765 2f67 6966 272c 2027  pe:image/gif', '
+0000a110: 6370 272c 0a20 2020 2020 2020 2073 656c  cp',.        sel
+0000a120: 662e 5f67 6574 5f74 6573 745f 6669 6c65  f._get_test_file
+0000a130: 2827 7465 7374 2e67 6966 2729 2c20 6473  ('test.gif'), ds
+0000a140: 7475 7269 0a20 2020 205d 290a 0a20 2020  turi.    ])..   
+0000a150: 2023 2055 7365 2040 5265 7472 7920 6173   # Use @Retry as
+0000a160: 2068 6564 6765 2061 6761 696e 7374 2062   hedge against b
+0000a170: 7563 6b65 7420 6c69 7374 696e 6720 6576  ucket listing ev
+0000a180: 656e 7475 616c 2063 6f6e 7369 7374 656e  entual consisten
+0000a190: 6379 2e0a 2020 2020 4052 6574 7279 2841  cy..    @Retry(A
+0000a1a0: 7373 6572 7469 6f6e 4572 726f 722c 2074  ssertionError, t
+0000a1b0: 7269 6573 3d33 2c20 7469 6d65 6f75 745f  ries=3, timeout_
+0000a1c0: 7365 6373 3d31 290a 2020 2020 6465 6620  secs=1).    def 
+0000a1d0: 5f43 6865 636b 3228 293a 0a20 2020 2020  _Check2():.     
+0000a1e0: 2073 7464 6f75 7420 3d20 7365 6c66 2e52   stdout = self.R
+0000a1f0: 756e 4773 5574 696c 285b 276c 7327 2c20  unGsUtil(['ls', 
+0000a200: 272d 4c27 2c20 6473 7475 7269 5d2c 2072  '-L', dsturi], r
+0000a210: 6574 7572 6e5f 7374 646f 7574 3d54 7275  eturn_stdout=Tru
+0000a220: 6529 0a20 2020 2020 2073 656c 662e 6173  e).      self.as
+0000a230: 7365 7274 5265 6765 7828 7374 646f 7574  sertRegex(stdout
+0000a240: 2c20 7227 436f 6e74 656e 742d 5479 7065  , r'Content-Type
+0000a250: 3a5c 732b 696d 6167 652f 6769 6627 290a  :\s+image/gif').
+0000a260: 0a20 2020 205f 4368 6563 6b32 2829 0a0a  .    _Check2()..
+0000a270: 2020 2020 7365 6c66 2e52 756e 4773 5574      self.RunGsUt
+0000a280: 696c 285b 272d 6827 2c20 2743 6f6e 7465  il(['-h', 'Conte
+0000a290: 6e74 2d54 7970 653a 696d 6167 652f 6769  nt-Type:image/gi
+0000a2a0: 6627 2c20 2763 7027 2c20 6670 6174 682c  f', 'cp', fpath,
+0000a2b0: 2064 7374 7572 695d 290a 0a20 2020 2023   dsturi])..    #
+0000a2c0: 2055 7365 2040 5265 7472 7920 6173 2068   Use @Retry as h
+0000a2d0: 6564 6765 2061 6761 696e 7374 2062 7563  edge against buc
+0000a2e0: 6b65 7420 6c69 7374 696e 6720 6576 656e  ket listing even
+0000a2f0: 7475 616c 2063 6f6e 7369 7374 656e 6379  tual consistency
+0000a300: 2e0a 2020 2020 4052 6574 7279 2841 7373  ..    @Retry(Ass
+0000a310: 6572 7469 6f6e 4572 726f 722c 2074 7269  ertionError, tri
+0000a320: 6573 3d33 2c20 7469 6d65 6f75 745f 7365  es=3, timeout_se
+0000a330: 6373 3d31 290a 2020 2020 6465 6620 5f43  cs=1).    def _C
+0000a340: 6865 636b 3328 293a 0a20 2020 2020 2073  heck3():.      s
+0000a350: 7464 6f75 7420 3d20 7365 6c66 2e52 756e  tdout = self.Run
+0000a360: 4773 5574 696c 285b 276c 7327 2c20 272d  GsUtil(['ls', '-
+0000a370: 4c27 2c20 6473 7475 7269 5d2c 2072 6574  L', dsturi], ret
+0000a380: 7572 6e5f 7374 646f 7574 3d54 7275 6529  urn_stdout=True)
+0000a390: 0a20 2020 2020 2073 656c 662e 6173 7365  .      self.asse
+0000a3a0: 7274 5265 6765 7828 7374 646f 7574 2c20  rtRegex(stdout, 
+0000a3b0: 7227 436f 6e74 656e 742d 5479 7065 3a5c  r'Content-Type:\
+0000a3c0: 732b 696d 6167 652f 6769 6627 290a 0a20  s+image/gif').. 
+0000a3d0: 2020 205f 4368 6563 6b33 2829 0a0a 2020     _Check3()..  
+0000a3e0: 4053 6571 7565 6e74 6961 6c41 6e64 5061  @SequentialAndPa
+0000a3f0: 7261 6c6c 656c 5472 616e 7366 6572 0a20  rallelTransfer. 
+0000a400: 2064 6566 2074 6573 745f 636f 6e74 656e   def test_conten
+0000a410: 745f 7479 7065 5f68 6561 6465 725f 6361  t_type_header_ca
+0000a420: 7365 5f69 6e73 656e 7369 7469 7665 2873  se_insensitive(s
+0000a430: 656c 6629 3a0a 2020 2020 2222 2254 6573  elf):.    """Tes
+0000a440: 7473 2074 6861 7420 636f 6e74 656e 7420  ts that content 
+0000a450: 7479 7065 2068 6561 6465 7220 6973 2074  type header is t
+0000a460: 7265 6174 6564 2077 6974 6820 6361 7365  reated with case
+0000a470: 2069 6e73 656e 7369 7469 7669 7479 2e22   insensitivity."
+0000a480: 2222 0a20 2020 2062 7563 6b65 745f 7572  "".    bucket_ur
+0000a490: 6920 3d20 7365 6c66 2e43 7265 6174 6542  i = self.CreateB
+0000a4a0: 7563 6b65 7428 290a 2020 2020 6473 7475  ucket().    dstu
+0000a4b0: 7269 203d 2073 7572 6928 6275 636b 6574  ri = suri(bucket
+0000a4c0: 5f75 7269 2c20 2766 6f6f 2729 0a20 2020  _uri, 'foo').   
+0000a4d0: 2066 7061 7468 203d 2073 656c 662e 5f67   fpath = self._g
+0000a4e0: 6574 5f74 6573 745f 6669 6c65 2827 7465  et_test_file('te
+0000a4f0: 7374 2e67 6966 2729 0a0a 2020 2020 7365  st.gif')..    se
+0000a500: 6c66 2e52 756e 4773 5574 696c 285b 272d  lf.RunGsUtil(['-
+0000a510: 6827 2c20 2763 6f6e 7465 6e74 2d54 7970  h', 'content-Typ
+0000a520: 653a 7465 7874 2f70 6c61 696e 272c 2027  e:text/plain', '
+0000a530: 6370 272c 2066 7061 7468 2c20 6473 7475  cp', fpath, dstu
+0000a540: 7269 5d29 0a0a 2020 2020 2320 5573 6520  ri])..    # Use 
+0000a550: 4052 6574 7279 2061 7320 6865 6467 6520  @Retry as hedge 
+0000a560: 6167 6169 6e73 7420 6275 636b 6574 206c  against bucket l
+0000a570: 6973 7469 6e67 2065 7665 6e74 7561 6c20  isting eventual 
+0000a580: 636f 6e73 6973 7465 6e63 792e 0a20 2020  consistency..   
+0000a590: 2040 5265 7472 7928 4173 7365 7274 696f   @Retry(Assertio
+0000a5a0: 6e45 7272 6f72 2c20 7472 6965 733d 332c  nError, tries=3,
+0000a5b0: 2074 696d 656f 7574 5f73 6563 733d 3129   timeout_secs=1)
+0000a5c0: 0a20 2020 2064 6566 205f 4368 6563 6b31  .    def _Check1
+0000a5d0: 2829 3a0a 2020 2020 2020 7374 646f 7574  ():.      stdout
+0000a5e0: 203d 2073 656c 662e 5275 6e47 7355 7469   = self.RunGsUti
+0000a5f0: 6c28 5b27 6c73 272c 2027 2d4c 272c 2064  l(['ls', '-L', d
+0000a600: 7374 7572 695d 2c20 7265 7475 726e 5f73  sturi], return_s
+0000a610: 7464 6f75 743d 5472 7565 290a 2020 2020  tdout=True).    
+0000a620: 2020 7365 6c66 2e61 7373 6572 7452 6567    self.assertReg
+0000a630: 6578 2873 7464 6f75 742c 2072 2743 6f6e  ex(stdout, r'Con
+0000a640: 7465 6e74 2d54 7970 653a 5c73 2b74 6578  tent-Type:\s+tex
+0000a650: 742f 706c 6169 6e27 290a 2020 2020 2020  t/plain').      
+0000a660: 7365 6c66 2e61 7373 6572 744e 6f74 5265  self.assertNotRe
+0000a670: 6765 7828 7374 646f 7574 2c20 7227 696d  gex(stdout, r'im
+0000a680: 6167 652f 6769 6627 290a 0a20 2020 205f  age/gif')..    _
+0000a690: 4368 6563 6b31 2829 0a0a 2020 2020 7365  Check1()..    se
+0000a6a0: 6c66 2e52 756e 4773 5574 696c 285b 0a20  lf.RunGsUtil([. 
+0000a6b0: 2020 2020 2020 2027 2d68 272c 2027 434f         '-h', 'CO
+0000a6c0: 4e54 454e 542d 5459 5045 3a69 6d61 6765  NTENT-TYPE:image
+0000a6d0: 2f67 6966 272c 2027 2d68 272c 2027 636f  /gif', '-h', 'co
+0000a6e0: 6e74 656e 742d 7479 7065 3a69 6d61 6765  ntent-type:image
+0000a6f0: 2f67 6966 272c 2027 6370 272c 0a20 2020  /gif', 'cp',.   
+0000a700: 2020 2020 2066 7061 7468 2c20 6473 7475       fpath, dstu
+0000a710: 7269 0a20 2020 205d 290a 0a20 2020 2023  ri.    ])..    #
+0000a720: 2055 7365 2040 5265 7472 7920 6173 2068   Use @Retry as h
+0000a730: 6564 6765 2061 6761 696e 7374 2062 7563  edge against buc
+0000a740: 6b65 7420 6c69 7374 696e 6720 6576 656e  ket listing even
+0000a750: 7475 616c 2063 6f6e 7369 7374 656e 6379  tual consistency
+0000a760: 2e0a 2020 2020 4052 6574 7279 2841 7373  ..    @Retry(Ass
+0000a770: 6572 7469 6f6e 4572 726f 722c 2074 7269  ertionError, tri
+0000a780: 6573 3d33 2c20 7469 6d65 6f75 745f 7365  es=3, timeout_se
+0000a790: 6373 3d31 290a 2020 2020 6465 6620 5f43  cs=1).    def _C
+0000a7a0: 6865 636b 3228 293a 0a20 2020 2020 2073  heck2():.      s
+0000a7b0: 7464 6f75 7420 3d20 7365 6c66 2e52 756e  tdout = self.Run
+0000a7c0: 4773 5574 696c 285b 276c 7327 2c20 272d  GsUtil(['ls', '-
+0000a7d0: 4c27 2c20 6473 7475 7269 5d2c 2072 6574  L', dsturi], ret
+0000a7e0: 7572 6e5f 7374 646f 7574 3d54 7275 6529  urn_stdout=True)
+0000a7f0: 0a20 2020 2020 2073 656c 662e 6173 7365  .      self.asse
+0000a800: 7274 5265 6765 7828 7374 646f 7574 2c20  rtRegex(stdout, 
+0000a810: 7227 436f 6e74 656e 742d 5479 7065 3a5c  r'Content-Type:\
+0000a820: 732b 696d 6167 652f 6769 6627 290a 2020  s+image/gif').  
+0000a830: 2020 2020 7365 6c66 2e61 7373 6572 744e      self.assertN
+0000a840: 6f74 5265 6765 7828 7374 646f 7574 2c20  otRegex(stdout, 
+0000a850: 7227 696d 6167 652f 6769 662c 5c73 2a69  r'image/gif,\s*i
+0000a860: 6d61 6765 2f67 6966 2729 0a0a 2020 2020  mage/gif')..    
+0000a870: 5f43 6865 636b 3228 290a 0a20 2040 5365  _Check2()..  @Se
+0000a880: 7175 656e 7469 616c 416e 6450 6172 616c  quentialAndParal
+0000a890: 6c65 6c54 7261 6e73 6665 720a 2020 6465  lelTransfer.  de
+0000a8a0: 6620 7465 7374 5f6f 7468 6572 5f68 6561  f test_other_hea
+0000a8b0: 6465 7273 2873 656c 6629 3a0a 2020 2020  ders(self):.    
+0000a8c0: 2222 2254 6573 7473 2074 6861 7420 6e6f  """Tests that no
+0000a8d0: 6e2d 636f 6e74 656e 742d 7479 7065 2068  n-content-type h
+0000a8e0: 6561 6465 7273 2061 7265 2061 7070 6c69  eaders are appli
+0000a8f0: 6564 2073 7563 6365 7373 6675 6c6c 7920  ed successfully 
+0000a900: 6f6e 2063 6f70 792e 2222 220a 2020 2020  on copy.""".    
+0000a910: 6275 636b 6574 5f75 7269 203d 2073 656c  bucket_uri = sel
+0000a920: 662e 4372 6561 7465 4275 636b 6574 2829  f.CreateBucket()
+0000a930: 0a20 2020 2064 7374 5f75 7269 203d 2073  .    dst_uri = s
+0000a940: 7572 6928 6275 636b 6574 5f75 7269 2c20  uri(bucket_uri, 
+0000a950: 2766 6f6f 2729 0a20 2020 2066 7061 7468  'foo').    fpath
+0000a960: 203d 2073 656c 662e 5f67 6574 5f74 6573   = self._get_tes
+0000a970: 745f 6669 6c65 2827 7465 7374 2e67 6966  t_file('test.gif
+0000a980: 2729 0a0a 2020 2020 7365 6c66 2e52 756e  ')..    self.Run
+0000a990: 4773 5574 696c 285b 0a20 2020 2020 2020  GsUtil([.       
+0000a9a0: 2027 2d68 272c 2027 4361 6368 652d 436f   '-h', 'Cache-Co
+0000a9b0: 6e74 726f 6c3a 7075 626c 6963 2c6d 6178  ntrol:public,max
+0000a9c0: 2d61 6765 3d31 3227 2c20 272d 6827 2c0a  -age=12', '-h',.
+0000a9d0: 2020 2020 2020 2020 2778 2d25 732d 6d65          'x-%s-me
+0000a9e0: 7461 2d31 3a61 6263 6427 2025 2073 656c  ta-1:abcd' % sel
+0000a9f0: 662e 7072 6f76 6964 6572 5f63 7573 746f  f.provider_custo
+0000aa00: 6d5f 6d65 7461 2c20 2763 7027 2c20 6670  m_meta, 'cp', fp
+0000aa10: 6174 682c 2064 7374 5f75 7269 0a20 2020  ath, dst_uri.   
+0000aa20: 205d 290a 0a20 2020 2073 7464 6f75 7420   ])..    stdout 
+0000aa30: 3d20 7365 6c66 2e52 756e 4773 5574 696c  = self.RunGsUtil
+0000aa40: 285b 276c 7327 2c20 272d 4c27 2c20 6473  (['ls', '-L', ds
+0000aa50: 745f 7572 695d 2c20 7265 7475 726e 5f73  t_uri], return_s
+0000aa60: 7464 6f75 743d 5472 7565 290a 2020 2020  tdout=True).    
+0000aa70: 7365 6c66 2e61 7373 6572 7452 6567 6578  self.assertRegex
+0000aa80: 2873 7464 6f75 742c 2072 2743 6163 6865  (stdout, r'Cache
+0000aa90: 2d43 6f6e 7472 6f6c 5c73 2a3a 5c73 2a70  -Control\s*:\s*p
+0000aaa0: 7562 6c69 632c 6d61 782d 6167 653d 3132  ublic,max-age=12
+0000aab0: 2729 0a20 2020 2073 656c 662e 6173 7365  ').    self.asse
+0000aac0: 7274 5265 6765 7828 7374 646f 7574 2c20  rtRegex(stdout, 
+0000aad0: 7227 4d65 7461 6461 7461 3a5c 732a 313a  r'Metadata:\s*1:
+0000aae0: 5c73 2a61 6263 6427 290a 0a20 2020 2064  \s*abcd')..    d
+0000aaf0: 7374 5f75 7269 3220 3d20 7375 7269 2862  st_uri2 = suri(b
+0000ab00: 7563 6b65 745f 7572 692c 2027 6261 7227  ucket_uri, 'bar'
+0000ab10: 290a 2020 2020 7365 6c66 2e52 756e 4773  ).    self.RunGs
+0000ab20: 5574 696c 285b 2763 7027 2c20 6473 745f  Util(['cp', dst_
+0000ab30: 7572 692c 2064 7374 5f75 7269 325d 290a  uri, dst_uri2]).
+0000ab40: 2020 2020 2320 456e 7375 7265 206d 6574      # Ensure met
+0000ab50: 6164 6174 6120 7761 7320 7072 6573 6572  adata was preser
+0000ab60: 7665 6420 6163 726f 7373 2063 6f70 792e  ved across copy.
+0000ab70: 0a20 2020 2073 7464 6f75 7420 3d20 7365  .    stdout = se
+0000ab80: 6c66 2e52 756e 4773 5574 696c 285b 276c  lf.RunGsUtil(['l
+0000ab90: 7327 2c20 272d 4c27 2c20 6473 745f 7572  s', '-L', dst_ur
+0000aba0: 6932 5d2c 2072 6574 7572 6e5f 7374 646f  i2], return_stdo
+0000abb0: 7574 3d54 7275 6529 0a20 2020 2073 656c  ut=True).    sel
+0000abc0: 662e 6173 7365 7274 5265 6765 7828 7374  f.assertRegex(st
+0000abd0: 646f 7574 2c20 7227 4361 6368 652d 436f  dout, r'Cache-Co
+0000abe0: 6e74 726f 6c5c 732a 3a5c 732a 7075 626c  ntrol\s*:\s*publ
+0000abf0: 6963 2c6d 6178 2d61 6765 3d31 3227 290a  ic,max-age=12').
+0000ac00: 2020 2020 7365 6c66 2e61 7373 6572 7452      self.assertR
+0000ac10: 6567 6578 2873 7464 6f75 742c 2072 274d  egex(stdout, r'M
+0000ac20: 6574 6164 6174 613a 5c73 2a31 3a5c 732a  etadata:\s*1:\s*
+0000ac30: 6162 6364 2729 0a0a 2020 4053 6571 7565  abcd')..  @Seque
+0000ac40: 6e74 6961 6c41 6e64 5061 7261 6c6c 656c  ntialAndParallel
+0000ac50: 5472 616e 7366 6572 0a20 2064 6566 2074  Transfer.  def t
+0000ac60: 6573 745f 7265 7175 6573 745f 7265 6173  est_request_reas
+0000ac70: 6f6e 5f68 6561 6465 7228 7365 6c66 293a  on_header(self):
+0000ac80: 0a20 2020 2022 2222 5465 7374 2074 6861  .    """Test tha
+0000ac90: 7420 782d 676f 6f67 2d72 6571 7565 7374  t x-goog-request
+0000aca0: 2d68 6561 6465 7220 6361 6e20 6265 2073  -header can be s
+0000acb0: 6574 2075 7369 6e67 2074 6865 2065 6e76  et using the env
+0000acc0: 6972 6f6e 6d65 6e74 2076 6172 6961 626c  ironment variabl
+0000acd0: 652e 2222 220a 2020 2020 6f73 2e65 6e76  e.""".    os.env
+0000ace0: 6972 6f6e 5b27 434c 4f55 4453 444b 5f43  iron['CLOUDSDK_C
+0000acf0: 4f52 455f 5245 5155 4553 545f 5245 4153  ORE_REQUEST_REAS
+0000ad00: 4f4e 275d 203d 2027 622f 7468 6973 5f69  ON'] = 'b/this_i
+0000ad10: 735f 656e 765f 7265 6173 6f6e 270a 2020  s_env_reason'.  
+0000ad20: 2020 6275 636b 6574 5f75 7269 203d 2073    bucket_uri = s
+0000ad30: 656c 662e 4372 6561 7465 4275 636b 6574  elf.CreateBucket
+0000ad40: 2829 0a20 2020 2064 7374 5f75 7269 203d  ().    dst_uri =
+0000ad50: 2073 7572 6928 6275 636b 6574 5f75 7269   suri(bucket_uri
+0000ad60: 2c20 2766 6f6f 2729 0a20 2020 2066 7061  , 'foo').    fpa
+0000ad70: 7468 203d 2073 656c 662e 5f67 6574 5f74  th = self._get_t
+0000ad80: 6573 745f 6669 6c65 2827 7465 7374 2e67  est_file('test.g
+0000ad90: 6966 2729 0a20 2020 2023 2045 6e73 7572  if').    # Ensur
+0000ada0: 6520 782d 676f 6f67 2d72 6571 7565 7374  e x-goog-request
+0000adb0: 2d68 6561 6465 7220 6973 2073 6574 2069  -header is set i
+0000adc0: 6e20 6370 2063 6f6d 6d61 6e64 0a20 2020  n cp command.   
+0000add0: 2073 7464 6572 7220 3d20 7365 6c66 2e52   stderr = self.R
+0000ade0: 756e 4773 5574 696c 285b 272d 4427 2c20  unGsUtil(['-D', 
+0000adf0: 2763 7027 2c20 6670 6174 682c 2064 7374  'cp', fpath, dst
+0000ae00: 5f75 7269 5d2c 2072 6574 7572 6e5f 7374  _uri], return_st
+0000ae10: 6465 7272 3d54 7275 6529 0a20 2020 2073  derr=True).    s
+0000ae20: 656c 662e 6173 7365 7274 5265 6765 7828  elf.assertRegex(
+0000ae30: 7374 6465 7272 2c0a 2020 2020 2020 2020  stderr,.        
+0000ae40: 2020 2020 2020 2020 2020 2020 2072 275c               r'\
+0000ae50: 2778 2d67 6f6f 672d 7265 7175 6573 742d  'x-goog-request-
+0000ae60: 7265 6173 6f6e 5c27 3a20 5c27 622f 7468  reason\': \'b/th
+0000ae70: 6973 5f69 735f 656e 765f 7265 6173 6f6e  is_is_env_reason
+0000ae80: 5c27 2729 0a20 2020 2023 2045 6e73 7572  \'').    # Ensur
+0000ae90: 6520 782d 676f 6f67 2d72 6571 7565 7374  e x-goog-request
+0000aea0: 2d68 6561 6465 7220 6973 2073 6574 2069  -header is set i
+0000aeb0: 6e20 6c73 2063 6f6d 6d61 6e64 0a20 2020  n ls command.   
+0000aec0: 2073 7464 6572 7220 3d20 7365 6c66 2e52   stderr = self.R
+0000aed0: 756e 4773 5574 696c 285b 272d 4427 2c20  unGsUtil(['-D', 
+0000aee0: 276c 7327 2c20 272d 4c27 2c20 6473 745f  'ls', '-L', dst_
+0000aef0: 7572 695d 2c20 7265 7475 726e 5f73 7464  uri], return_std
+0000af00: 6572 723d 5472 7565 290a 2020 2020 7365  err=True).    se
+0000af10: 6c66 2e61 7373 6572 7452 6567 6578 2873  lf.assertRegex(s
+0000af20: 7464 6572 722c 0a20 2020 2020 2020 2020  tderr,.         
+0000af30: 2020 2020 2020 2020 2020 2020 7227 5c27              r'\'
+0000af40: 782d 676f 6f67 2d72 6571 7565 7374 2d72  x-goog-request-r
+0000af50: 6561 736f 6e5c 273a 205c 2762 2f74 6869  eason\': \'b/thi
+0000af60: 735f 6973 5f65 6e76 5f72 6561 736f 6e5c  s_is_env_reason\
+0000af70: 2727 290a 0a20 2040 5365 7175 656e 7469  '')..  @Sequenti
+0000af80: 616c 416e 6450 6172 616c 6c65 6c54 7261  alAndParallelTra
+0000af90: 6e73 6665 720a 2020 4053 6b69 7046 6f72  nsfer.  @SkipFor
+0000afa0: 584d 4c28 2758 4d4c 2041 5049 7320 7573  XML('XML APIs us
+0000afb0: 6520 6120 6469 6666 6572 656e 7420 6465  e a different de
+0000afc0: 6275 6720 6c6f 6720 666f 726d 6174 2e27  bug log format.'
+0000afd0: 290a 2020 6465 6620 7465 7374 5f72 6571  ).  def test_req
+0000afe0: 7565 7374 5f72 6561 736f 6e5f 6865 6164  uest_reason_head
+0000aff0: 6572 5f70 6572 7369 7374 735f 6d75 6c74  er_persists_mult
+0000b000: 6970 6c65 5f72 6571 7565 7374 735f 6a73  iple_requests_js
+0000b010: 6f6e 2873 656c 6629 3a0a 2020 2020 2222  on(self):.    ""
+0000b020: 2254 6573 7420 7468 6174 2078 2d67 6f6f  "Test that x-goo
+0000b030: 672d 7265 7175 6573 742d 6865 6164 6572  g-request-header
+0000b040: 2077 6f72 6b73 2077 6865 6e20 6370 2073   works when cp s
+0000b050: 656e 6473 206d 756c 7469 706c 6520 7265  ends multiple re
+0000b060: 7175 6573 7473 2e22 2222 0a20 2020 206f  quests.""".    o
+0000b070: 732e 656e 7669 726f 6e5b 2743 4c4f 5544  s.environ['CLOUD
+0000b080: 5344 4b5f 434f 5245 5f52 4551 5545 5354  SDK_CORE_REQUEST
+0000b090: 5f52 4541 534f 4e27 5d20 3d20 2762 2f74  _REASON'] = 'b/t
+0000b0a0: 6869 735f 6973 5f65 6e76 5f72 6561 736f  his_is_env_reaso
+0000b0b0: 6e27 0a20 2020 2062 7563 6b65 745f 7572  n'.    bucket_ur
+0000b0c0: 6920 3d20 7365 6c66 2e43 7265 6174 6542  i = self.CreateB
+0000b0d0: 7563 6b65 7428 290a 2020 2020 6473 745f  ucket().    dst_
+0000b0e0: 7572 6920 3d20 7375 7269 2862 7563 6b65  uri = suri(bucke
+0000b0f0: 745f 7572 692c 2027 666f 6f27 290a 2020  t_uri, 'foo').  
+0000b100: 2020 6670 6174 6820 3d20 7365 6c66 2e5f    fpath = self._
+0000b110: 6765 745f 7465 7374 5f66 696c 6528 2774  get_test_file('t
+0000b120: 6573 742e 6769 6627 290a 0a20 2020 2062  est.gif')..    b
+0000b130: 6f74 6f5f 636f 6e66 6967 5f66 6f72 5f74  oto_config_for_t
+0000b140: 6573 7420 3d20 2827 4753 5574 696c 272c  est = ('GSUtil',
+0000b150: 2027 7265 7375 6d61 626c 655f 7468 7265   'resumable_thre
+0000b160: 7368 6f6c 6427 2c20 2730 2729 0a20 2020  shold', '0').   
+0000b170: 2077 6974 6820 5365 7442 6f74 6f43 6f6e   with SetBotoCon
+0000b180: 6669 6746 6f72 5465 7374 285b 626f 746f  figForTest([boto
+0000b190: 5f63 6f6e 6669 675f 666f 725f 7465 7374  _config_for_test
+0000b1a0: 5d29 3a0a 2020 2020 2020 7374 6465 7272  ]):.      stderr
+0000b1b0: 203d 2073 656c 662e 5275 6e47 7355 7469   = self.RunGsUti
+0000b1c0: 6c28 5b27 2d44 272c 2027 6370 272c 2066  l(['-D', 'cp', f
+0000b1d0: 7061 7468 2c20 6473 745f 7572 695d 2c20  path, dst_uri], 
+0000b1e0: 7265 7475 726e 5f73 7464 6572 723d 5472  return_stderr=Tr
+0000b1f0: 7565 290a 0a20 2020 2023 2050 5554 2066  ue)..    # PUT f
+0000b200: 6f6c 6c6f 7773 2047 4554 2072 6571 7565  ollows GET reque
+0000b210: 7374 2e20 426f 7468 206e 6565 6420 7468  st. Both need th
+0000b220: 6520 7265 7175 6573 742d 7265 6173 6f6e  e request-reason
+0000b230: 2068 6561 6465 722e 0a20 2020 2072 6561   header..    rea
+0000b240: 736f 6e5f 7265 6765 7820 3d20 2872 274d  son_regex = (r'M
+0000b250: 616b 696e 6720 6874 7470 2047 4554 5b5c  aking http GET[\
+0000b260: 735c 535d 2a27 0a20 2020 2020 2020 2020  s\S]*'.         
+0000b270: 2020 2020 2020 2020 2020 2072 2778 2d67             r'x-g
+0000b280: 6f6f 672d 7265 7175 6573 742d 7265 6173  oog-request-reas
+0000b290: 6f6e 5c27 3a20 5c27 622f 7468 6973 5f69  on\': \'b/this_i
+0000b2a0: 735f 656e 765f 7265 6173 6f6e 5b5c 735c  s_env_reason[\s\
+0000b2b0: 535d 2a27 0a20 2020 2020 2020 2020 2020  S]*'.           
+0000b2c0: 2020 2020 2020 2020 2072 2773 656e 643a           r'send:
+0000b2d0: 2028 625c 2729 3f50 5554 5b5c 735c 535d   (b\')?PUT[\s\S]
+0000b2e0: 2a78 2d67 6f6f 672d 7265 7175 6573 742d  *x-goog-request-
+0000b2f0: 7265 6173 6f6e 3a27 0a20 2020 2020 2020  reason:'.       
+0000b300: 2020 2020 2020 2020 2020 2020 2072 2720               r' 
+0000b310: 622f 7468 6973 5f69 735f 656e 765f 7265  b/this_is_env_re
+0000b320: 6173 6f6e 2729 0a20 2020 2073 656c 662e  ason').    self.
+0000b330: 6173 7365 7274 5265 6765 7828 7374 6465  assertRegex(stde
+0000b340: 7272 2c20 7265 6173 6f6e 5f72 6567 6578  rr, reason_regex
+0000b350: 290a 0a20 2040 5365 7175 656e 7469 616c  )..  @Sequential
+0000b360: 416e 6450 6172 616c 6c65 6c54 7261 6e73  AndParallelTrans
+0000b370: 6665 720a 2020 4053 6b69 7046 6f72 4a53  fer.  @SkipForJS
+0000b380: 4f4e 2827 4a53 4f4e 2041 5049 2075 7365  ON('JSON API use
+0000b390: 7320 6120 6469 6666 6572 656e 7420 6465  s a different de
+0000b3a0: 6275 6720 6c6f 6720 666f 726d 6174 2e27  bug log format.'
+0000b3b0: 290a 2020 6465 6620 7465 7374 5f72 6571  ).  def test_req
+0000b3c0: 7565 7374 5f72 6561 736f 6e5f 6865 6164  uest_reason_head
+0000b3d0: 6572 5f70 6572 7369 7374 735f 6d75 6c74  er_persists_mult
+0000b3e0: 6970 6c65 5f72 6571 7565 7374 735f 786d  iple_requests_xm
+0000b3f0: 6c28 7365 6c66 293a 0a20 2020 2022 2222  l(self):.    """
+0000b400: 5465 7374 2074 6861 7420 782d 676f 6f67  Test that x-goog
+0000b410: 2d72 6571 7565 7374 2d68 6561 6465 7220  -request-header 
+0000b420: 776f 726b 7320 7768 656e 2063 7020 7365  works when cp se
+0000b430: 6e64 7320 6d75 6c74 6970 6c65 2072 6571  nds multiple req
+0000b440: 7565 7374 732e 2222 220a 2020 2020 6f73  uests.""".    os
+0000b450: 2e65 6e76 6972 6f6e 5b27 434c 4f55 4453  .environ['CLOUDS
+0000b460: 444b 5f43 4f52 455f 5245 5155 4553 545f  DK_CORE_REQUEST_
+0000b470: 5245 4153 4f4e 275d 203d 2027 622f 7468  REASON'] = 'b/th
+0000b480: 6973 5f69 735f 656e 765f 7265 6173 6f6e  is_is_env_reason
+0000b490: 270a 2020 2020 6275 636b 6574 5f75 7269  '.    bucket_uri
+0000b4a0: 203d 2073 656c 662e 4372 6561 7465 4275   = self.CreateBu
+0000b4b0: 636b 6574 2829 0a20 2020 2064 7374 5f75  cket().    dst_u
+0000b4c0: 7269 203d 2073 7572 6928 6275 636b 6574  ri = suri(bucket
+0000b4d0: 5f75 7269 2c20 2766 6f6f 2729 0a20 2020  _uri, 'foo').   
+0000b4e0: 2066 7061 7468 203d 2073 656c 662e 5f67   fpath = self._g
+0000b4f0: 6574 5f74 6573 745f 6669 6c65 2827 7465  et_test_file('te
+0000b500: 7374 2e67 6966 2729 0a0a 2020 2020 626f  st.gif')..    bo
+0000b510: 746f 5f63 6f6e 6669 675f 666f 725f 7465  to_config_for_te
+0000b520: 7374 203d 2028 2747 5355 7469 6c27 2c20  st = ('GSUtil', 
+0000b530: 2772 6573 756d 6162 6c65 5f74 6872 6573  'resumable_thres
+0000b540: 686f 6c64 272c 2027 3027 290a 2020 2020  hold', '0').    
+0000b550: 7769 7468 2053 6574 426f 746f 436f 6e66  with SetBotoConf
+0000b560: 6967 466f 7254 6573 7428 5b62 6f74 6f5f  igForTest([boto_
+0000b570: 636f 6e66 6967 5f66 6f72 5f74 6573 745d  config_for_test]
+0000b580: 293a 0a20 2020 2020 2073 7464 6572 7220  ):.      stderr 
+0000b590: 3d20 7365 6c66 2e52 756e 4773 5574 696c  = self.RunGsUtil
+0000b5a0: 285b 272d 4427 2c20 2763 7027 2c20 6670  (['-D', 'cp', fp
+0000b5b0: 6174 682c 2064 7374 5f75 7269 5d2c 2072  ath, dst_uri], r
+0000b5c0: 6574 7572 6e5f 7374 6465 7272 3d54 7275  eturn_stderr=Tru
+0000b5d0: 6529 0a0a 2020 2020 7265 6173 6f6e 5f72  e)..    reason_r
+0000b5e0: 6567 6578 203d 2028 0a20 2020 2020 2020  egex = (.       
+0000b5f0: 2072 2746 696e 616c 2068 6561 6465 7273   r'Final headers
+0000b600: 3a20 5c7b 5b5c 735c 535d 2a5c 2727 0a20  : \{[\s\S]*\''. 
+0000b610: 2020 2020 2020 2072 2778 2d67 6f6f 672d         r'x-goog-
+0000b620: 7265 7175 6573 742d 7265 6173 6f6e 5c27  request-reason\'
+0000b630: 3a20 5c27 622f 7468 6973 5f69 735f 656e  : \'b/this_is_en
+0000b640: 765f 7265 6173 6f6e 5c27 5b5c 735c 535d  v_reason\'[\s\S]
+0000b650: 2a7d 2729 0a0a 2020 2020 2320 5061 7474  *}')..    # Patt
+0000b660: 6572 6e20 7368 6f75 6c64 206d 6174 6368  ern should match
+0000b670: 2074 7769 6365 2073 696e 6365 2074 776f   twice since two
+0000b680: 2072 6571 7565 7374 7320 7368 6f75 6c64   requests should
+0000b690: 2068 6176 6520 6120 7265 6173 6f6e 2068   have a reason h
+0000b6a0: 6561 6465 722e 0a20 2020 2073 656c 662e  eader..    self.
+0000b6b0: 6173 7365 7274 5265 6765 7828 7374 6465  assertRegex(stde
+0000b6c0: 7272 2c20 7265 6173 6f6e 5f72 6567 6578  rr, reason_regex
+0000b6d0: 202b 2072 275b 5c73 5c53 5d2a 2720 2b20   + r'[\s\S]*' + 
+0000b6e0: 7265 6173 6f6e 5f72 6567 6578 290a 0a20  reason_regex).. 
+0000b6f0: 2040 5365 7175 656e 7469 616c 416e 6450   @SequentialAndP
+0000b700: 6172 616c 6c65 6c54 7261 6e73 6665 720a  arallelTransfer.
+0000b710: 2020 6465 6620 7465 7374 5f76 6572 7369    def test_versi
+0000b720: 6f6e 696e 6728 7365 6c66 293a 0a20 2020  oning(self):.   
+0000b730: 2022 2222 5465 7374 7320 636f 7079 2077   """Tests copy w
+0000b740: 6974 6820 7665 7273 696f 6e69 6e67 2e22  ith versioning."
+0000b750: 2222 0a20 2020 2062 7563 6b65 745f 7572  "".    bucket_ur
+0000b760: 6920 3d20 7365 6c66 2e43 7265 6174 6556  i = self.CreateV
+0000b770: 6572 7369 6f6e 6564 4275 636b 6574 2829  ersionedBucket()
+0000b780: 0a20 2020 206b 315f 7572 6920 3d20 7365  .    k1_uri = se
+0000b790: 6c66 2e43 7265 6174 654f 626a 6563 7428  lf.CreateObject(
+0000b7a0: 6275 636b 6574 5f75 7269 3d62 7563 6b65  bucket_uri=bucke
+0000b7b0: 745f 7572 692c 2063 6f6e 7465 6e74 733d  t_uri, contents=
+0000b7c0: 6227 6461 7461 3227 290a 2020 2020 6b32  b'data2').    k2
+0000b7d0: 5f75 7269 203d 2073 656c 662e 4372 6561  _uri = self.Crea
+0000b7e0: 7465 4f62 6a65 6374 2862 7563 6b65 745f  teObject(bucket_
+0000b7f0: 7572 693d 6275 636b 6574 5f75 7269 2c20  uri=bucket_uri, 
+0000b800: 636f 6e74 656e 7473 3d62 2764 6174 6131  contents=b'data1
+0000b810: 2729 0a20 2020 2067 3120 3d20 7572 6967  ').    g1 = urig
+0000b820: 656e 286b 325f 7572 6929 0a20 2020 2073  en(k2_uri).    s
+0000b830: 656c 662e 5275 6e47 7355 7469 6c28 5b27  elf.RunGsUtil(['
+0000b840: 6370 272c 2073 7572 6928 6b31 5f75 7269  cp', suri(k1_uri
+0000b850: 292c 2073 7572 6928 6b32 5f75 7269 295d  ), suri(k2_uri)]
+0000b860: 290a 2020 2020 6b32 5f75 7269 203d 2073  ).    k2_uri = s
+0000b870: 656c 662e 5374 6f72 6167 6555 7269 436c  elf.StorageUriCl
+0000b880: 6f6e 6552 6570 6c61 6365 4e61 6d65 2862  oneReplaceName(b
+0000b890: 7563 6b65 745f 7572 692c 206b 325f 7572  ucket_uri, k2_ur
+0000b8a0: 692e 6f62 6a65 6374 5f6e 616d 6529 0a20  i.object_name). 
+0000b8b0: 2020 206b 325f 7572 6920 3d20 7365 6c66     k2_uri = self
+0000b8c0: 2e53 746f 7261 6765 5572 6943 6c6f 6e65  .StorageUriClone
+0000b8d0: 5265 706c 6163 654b 6579 2862 7563 6b65  ReplaceKey(bucke
+0000b8e0: 745f 7572 692c 206b 325f 7572 692e 6765  t_uri, k2_uri.ge
+0000b8f0: 745f 6b65 7928 2929 0a20 2020 2067 3220  t_key()).    g2 
+0000b900: 3d20 7572 6967 656e 286b 325f 7572 6929  = urigen(k2_uri)
+0000b910: 0a20 2020 2073 656c 662e 5374 6f72 6167  .    self.Storag
+0000b920: 6555 7269 5365 7443 6f6e 7465 6e74 7346  eUriSetContentsF
+0000b930: 726f 6d53 7472 696e 6728 6b32 5f75 7269  romString(k2_uri
+0000b940: 2c20 2764 6174 6133 2729 0a20 2020 2067  , 'data3').    g
+0000b950: 3320 3d20 7572 6967 656e 286b 325f 7572  3 = urigen(k2_ur
+0000b960: 6929 0a0a 2020 2020 6670 6174 6820 3d20  i)..    fpath = 
+0000b970: 7365 6c66 2e43 7265 6174 6554 656d 7046  self.CreateTempF
+0000b980: 696c 6528 290a 2020 2020 2320 4368 6563  ile().    # Chec
+0000b990: 6b20 746f 206d 616b 6520 7375 7265 2063  k to make sure c
+0000b9a0: 7572 7265 6e74 2076 6572 7369 6f6e 2069  urrent version i
+0000b9b0: 7320 6461 7461 332e 0a20 2020 2073 656c  s data3..    sel
+0000b9c0: 662e 5275 6e47 7355 7469 6c28 5b27 6370  f.RunGsUtil(['cp
+0000b9d0: 272c 206b 325f 7572 692e 7665 7273 696f  ', k2_uri.versio
+0000b9e0: 6e6c 6573 735f 7572 692c 2066 7061 7468  nless_uri, fpath
+0000b9f0: 5d29 0a20 2020 2077 6974 6820 6f70 656e  ]).    with open
+0000ba00: 2866 7061 7468 2c20 2772 6227 2920 6173  (fpath, 'rb') as
+0000ba10: 2066 3a0a 2020 2020 2020 7365 6c66 2e61   f:.      self.a
+0000ba20: 7373 6572 7445 7175 616c 2866 2e72 6561  ssertEqual(f.rea
+0000ba30: 6428 292c 2062 2764 6174 6133 2729 0a0a  d(), b'data3')..
+0000ba40: 2020 2020 2320 4368 6563 6b20 636f 6e74      # Check cont
+0000ba50: 656e 7473 206f 6620 616c 6c20 7468 7265  ents of all thre
+0000ba60: 6520 7665 7273 696f 6e73 0a20 2020 2073  e versions.    s
+0000ba70: 656c 662e 5275 6e47 7355 7469 6c28 5b27  elf.RunGsUtil(['
+0000ba80: 6370 272c 2027 2573 2325 7327 2025 2028  cp', '%s#%s' % (
+0000ba90: 6b32 5f75 7269 2e76 6572 7369 6f6e 6c65  k2_uri.versionle
+0000baa0: 7373 5f75 7269 2c20 6731 292c 2066 7061  ss_uri, g1), fpa
+0000bab0: 7468 5d29 0a20 2020 2077 6974 6820 6f70  th]).    with op
+0000bac0: 656e 2866 7061 7468 2c20 2772 6227 2920  en(fpath, 'rb') 
+0000bad0: 6173 2066 3a0a 2020 2020 2020 7365 6c66  as f:.      self
+0000bae0: 2e61 7373 6572 7445 7175 616c 2866 2e72  .assertEqual(f.r
+0000baf0: 6561 6428 292c 2062 2764 6174 6131 2729  ead(), b'data1')
+0000bb00: 0a20 2020 2073 656c 662e 5275 6e47 7355  .    self.RunGsU
+0000bb10: 7469 6c28 5b27 6370 272c 2027 2573 2325  til(['cp', '%s#%
+0000bb20: 7327 2025 2028 6b32 5f75 7269 2e76 6572  s' % (k2_uri.ver
+0000bb30: 7369 6f6e 6c65 7373 5f75 7269 2c20 6732  sionless_uri, g2
+0000bb40: 292c 2066 7061 7468 5d29 0a20 2020 2077  ), fpath]).    w
+0000bb50: 6974 6820 6f70 656e 2866 7061 7468 2c20  ith open(fpath, 
+0000bb60: 2772 6227 2920 6173 2066 3a0a 2020 2020  'rb') as f:.    
+0000bb70: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+0000bb80: 616c 2866 2e72 6561 6428 292c 2062 2764  al(f.read(), b'd
+0000bb90: 6174 6132 2729 0a20 2020 2073 656c 662e  ata2').    self.
+0000bba0: 5275 6e47 7355 7469 6c28 5b27 6370 272c  RunGsUtil(['cp',
+0000bbb0: 2027 2573 2325 7327 2025 2028 6b32 5f75   '%s#%s' % (k2_u
+0000bbc0: 7269 2e76 6572 7369 6f6e 6c65 7373 5f75  ri.versionless_u
+0000bbd0: 7269 2c20 6733 292c 2066 7061 7468 5d29  ri, g3), fpath])
+0000bbe0: 0a20 2020 2077 6974 6820 6f70 656e 2866  .    with open(f
+0000bbf0: 7061 7468 2c20 2772 6227 2920 6173 2066  path, 'rb') as f
+0000bc00: 3a0a 2020 2020 2020 7365 6c66 2e61 7373  :.      self.ass
+0000bc10: 6572 7445 7175 616c 2866 2e72 6561 6428  ertEqual(f.read(
+0000bc20: 292c 2062 2764 6174 6133 2729 0a0a 2020  ), b'data3')..  
+0000bc30: 2020 2320 436f 7079 2066 6972 7374 2076    # Copy first v
+0000bc40: 6572 7369 6f6e 2074 6f20 6375 7272 656e  ersion to curren
+0000bc50: 7420 616e 6420 7665 7269 6679 2e0a 2020  t and verify..  
+0000bc60: 2020 7365 6c66 2e52 756e 4773 5574 696c    self.RunGsUtil
+0000bc70: 280a 2020 2020 2020 2020 5b27 6370 272c  (.        ['cp',
+0000bc80: 0a20 2020 2020 2020 2020 2725 7323 2573  .         '%s#%s
+0000bc90: 2720 2520 286b 325f 7572 692e 7665 7273  ' % (k2_uri.vers
+0000bca0: 696f 6e6c 6573 735f 7572 692c 2067 3129  ionless_uri, g1)
+0000bcb0: 2c20 6b32 5f75 7269 2e76 6572 7369 6f6e  , k2_uri.version
+0000bcc0: 6c65 7373 5f75 7269 5d29 0a20 2020 2073  less_uri]).    s
+0000bcd0: 656c 662e 5275 6e47 7355 7469 6c28 5b27  elf.RunGsUtil(['
+0000bce0: 6370 272c 206b 325f 7572 692e 7665 7273  cp', k2_uri.vers
+0000bcf0: 696f 6e6c 6573 735f 7572 692c 2066 7061  ionless_uri, fpa
+0000bd00: 7468 5d29 0a20 2020 2077 6974 6820 6f70  th]).    with op
+0000bd10: 656e 2866 7061 7468 2c20 2772 6227 2920  en(fpath, 'rb') 
+0000bd20: 6173 2066 3a0a 2020 2020 2020 7365 6c66  as f:.      self
+0000bd30: 2e61 7373 6572 7445 7175 616c 2866 2e72  .assertEqual(f.r
+0000bd40: 6561 6428 292c 2062 2764 6174 6131 2729  ead(), b'data1')
+0000bd50: 0a0a 2020 2020 2320 4174 7465 6d70 7420  ..    # Attempt 
+0000bd60: 746f 2073 7065 6369 6679 2061 2076 6572  to specify a ver
+0000bd70: 7369 6f6e 2d73 7065 6369 6669 6320 5552  sion-specific UR
+0000bd80: 4920 666f 7220 6465 7374 696e 6174 696f  I for destinatio
+0000bd90: 6e2e 0a20 2020 2073 7464 6572 7220 3d20  n..    stderr = 
+0000bda0: 7365 6c66 2e52 756e 4773 5574 696c 285b  self.RunGsUtil([
+0000bdb0: 2763 7027 2c20 6670 6174 682c 206b 325f  'cp', fpath, k2_
+0000bdc0: 7572 692e 7572 695d 2c0a 2020 2020 2020  uri.uri],.      
+0000bdd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bde0: 2020 2020 2020 7265 7475 726e 5f73 7464        return_std
+0000bdf0: 6572 723d 5472 7565 2c0a 2020 2020 2020  err=True,.      
+0000be00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000be10: 2020 2020 2020 6578 7065 6374 6564 5f73        expected_s
+0000be20: 7461 7475 733d 3129 0a20 2020 2069 6620  tatus=1).    if 
+0000be30: 7365 6c66 2e5f 7573 655f 6763 6c6f 7564  self._use_gcloud
+0000be40: 5f73 746f 7261 6765 3a0a 2020 2020 2020  _storage:.      
+0000be50: 7365 6c66 2e61 7373 6572 7449 6e28 0a20  self.assertIn(. 
+0000be60: 2020 2020 2020 2020 2027 6465 7374 696e           'destin
+0000be70: 6174 696f 6e20 6172 6775 6d65 6e74 206f  ation argument o
+0000be80: 6620 7468 6520 6370 2063 6f6d 6d61 6e64  f the cp command
+0000be90: 2063 616e 6e6f 7427 0a20 2020 2020 2020   cannot'.       
+0000bea0: 2020 2027 2062 6520 6120 7665 7273 696f     ' be a versio
+0000beb0: 6e2d 7370 6563 6966 6963 2055 524c 272c  n-specific URL',
+0000bec0: 2073 7464 6572 7229 0a20 2020 2065 6c73   stderr).    els
+0000bed0: 653a 0a20 2020 2020 2073 656c 662e 6173  e:.      self.as
+0000bee0: 7365 7274 496e 2827 6361 6e6e 6f74 2062  sertIn('cannot b
+0000bef0: 6520 7468 6520 6465 7374 696e 6174 696f  e the destinatio
+0000bf00: 6e20 666f 7220 6773 7574 696c 2063 7027  n for gsutil cp'
+0000bf10: 2c20 7374 6465 7272 290a 0a20 2064 6566  , stderr)..  def
+0000bf20: 2074 6573 745f 7665 7273 696f 6e69 6e67   test_versioning
+0000bf30: 5f6e 6f5f 7061 7261 6c6c 656c 6973 6d28  _no_parallelism(
+0000bf40: 7365 6c66 293a 0a20 2020 2022 2222 5465  self):.    """Te
+0000bf50: 7374 7320 7468 6174 2063 6f70 7920 616c  sts that copy al
+0000bf60: 6c2d 7665 7273 696f 6e73 2065 7272 6f72  l-versions error
+0000bf70: 7320 7768 656e 2070 6172 616c 6c65 6c69  s when paralleli
+0000bf80: 736d 2069 7320 656e 6162 6c65 642e 2222  sm is enabled.""
+0000bf90: 220a 2020 2020 2320 544f 444f 2862 2f31  ".    # TODO(b/1
+0000bfa0: 3335 3738 3036 3631 293a 2052 656d 6f76  35780661): Remov
+0000bfb0: 6520 7265 7472 7920 6166 7465 7220 6275  e retry after bu
+0000bfc0: 6720 7265 736f 6c76 6564 0a20 2020 2040  g resolved.    @
+0000bfd0: 5265 7472 7928 4173 7365 7274 696f 6e45  Retry(AssertionE
+0000bfe0: 7272 6f72 2c20 7472 6965 733d 332c 2074  rror, tries=3, t
+0000bff0: 696d 656f 7574 5f73 6563 733d 3129 0a20  imeout_secs=1). 
+0000c000: 2020 2064 6566 205f 4368 6563 6b28 293a     def _Check():
+0000c010: 0a20 2020 2020 2073 7464 6572 7220 3d20  .      stderr = 
+0000c020: 7365 6c66 2e52 756e 4773 5574 696c 285b  self.RunGsUtil([
+0000c030: 0a20 2020 2020 2020 2020 2027 2d6d 272c  .          '-m',
+0000c040: 2027 6370 272c 2027 2d41 272c 0a20 2020   'cp', '-A',.   
+0000c050: 2020 2020 2020 2073 7572 6928 7365 6c66         suri(self
+0000c060: 2e6e 6f6e 6578 6973 7465 6e74 5f62 7563  .nonexistent_buc
+0000c070: 6b65 745f 6e61 6d65 2c20 2766 6f6f 2729  ket_name, 'foo')
+0000c080: 2c0a 2020 2020 2020 2020 2020 7375 7269  ,.          suri
+0000c090: 2873 656c 662e 6e6f 6e65 7869 7374 656e  (self.nonexisten
+0000c0a0: 745f 6275 636b 6574 5f6e 616d 652c 2027  t_bucket_name, '
+0000c0b0: 6261 7227 290a 2020 2020 2020 5d2c 0a20  bar').      ],. 
+0000c0c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c0d0: 2020 2020 2020 2020 2020 2020 2065 7870               exp
+0000c0e0: 6563 7465 645f 7374 6174 7573 3d31 2c0a  ected_status=1,.
+0000c0f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c100: 2020 2020 2020 2020 2020 2020 2020 7265                re
+0000c110: 7475 726e 5f73 7464 6572 723d 5472 7565  turn_stderr=True
+0000c120: 290a 2020 2020 2020 7365 6c66 2e61 7373  ).      self.ass
+0000c130: 6572 7449 6e28 272d 6d20 6f70 7469 6f6e  ertIn('-m option
+0000c140: 2069 7320 6e6f 7420 7375 7070 6f72 7465   is not supporte
+0000c150: 6420 7769 7468 2074 6865 2063 7020 2d41  d with the cp -A
+0000c160: 2066 6c61 6727 2c20 7374 6465 7272 290a   flag', stderr).
+0000c170: 0a20 2020 205f 4368 6563 6b28 290a 0a20  .    _Check().. 
+0000c180: 2040 536b 6970 466f 7253 3328 2753 3320   @SkipForS3('S3 
+0000c190: 6c69 7374 7320 7665 7273 696f 6e65 6420  lists versioned 
+0000c1a0: 6f62 6a65 6374 7320 696e 2072 6576 6572  objects in rever
+0000c1b0: 7365 2074 696d 6573 7461 6d70 206f 7264  se timestamp ord
+0000c1c0: 6572 2e27 290a 2020 6465 6620 7465 7374  er.').  def test
+0000c1d0: 5f72 6563 7572 7369 7665 5f63 6f70 7969  _recursive_copyi
+0000c1e0: 6e67 5f76 6572 7369 6f6e 6564 5f62 7563  ng_versioned_buc
+0000c1f0: 6b65 7428 7365 6c66 293a 0a20 2020 2022  ket(self):.    "
+0000c200: 2222 5465 7374 7320 6370 202d 5220 7769  ""Tests cp -R wi
+0000c210: 7468 2076 6572 7369 6f6e 6564 2062 7563  th versioned buc
+0000c220: 6b65 7473 2e22 2222 0a20 2020 2062 7563  kets.""".    buc
+0000c230: 6b65 7431 5f75 7269 203d 2073 656c 662e  ket1_uri = self.
+0000c240: 4372 6561 7465 5665 7273 696f 6e65 6442  CreateVersionedB
+0000c250: 7563 6b65 7428 290a 2020 2020 6275 636b  ucket().    buck
+0000c260: 6574 325f 7572 6920 3d20 7365 6c66 2e43  et2_uri = self.C
+0000c270: 7265 6174 6556 6572 7369 6f6e 6564 4275  reateVersionedBu
+0000c280: 636b 6574 2829 0a20 2020 2062 7563 6b65  cket().    bucke
+0000c290: 7433 5f75 7269 203d 2073 656c 662e 4372  t3_uri = self.Cr
+0000c2a0: 6561 7465 5665 7273 696f 6e65 6442 7563  eateVersionedBuc
+0000c2b0: 6b65 7428 290a 0a20 2020 2023 2057 7269  ket()..    # Wri
+0000c2c0: 7465 2074 776f 2076 6572 7369 6f6e 7320  te two versions 
+0000c2d0: 6f66 2061 6e20 6f62 6a65 6374 2074 6f20  of an object to 
+0000c2e0: 7468 6520 6275 636b 6574 312e 0a20 2020  the bucket1..   
+0000c2f0: 2076 315f 7572 6920 3d20 7365 6c66 2e43   v1_uri = self.C
+0000c300: 7265 6174 654f 626a 6563 7428 6275 636b  reateObject(buck
+0000c310: 6574 5f75 7269 3d62 7563 6b65 7431 5f75  et_uri=bucket1_u
+0000c320: 7269 2c0a 2020 2020 2020 2020 2020 2020  ri,.            
+0000c330: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c340: 2020 206f 626a 6563 745f 6e61 6d65 3d27     object_name='
+0000c350: 6b27 2c0a 2020 2020 2020 2020 2020 2020  k',.            
+0000c360: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c370: 2020 2063 6f6e 7465 6e74 733d 6227 6461     contents=b'da
+0000c380: 7461 3027 290a 2020 2020 7365 6c66 2e43  ta0').    self.C
+0000c390: 7265 6174 654f 626a 6563 7428 6275 636b  reateObject(buck
+0000c3a0: 6574 5f75 7269 3d62 7563 6b65 7431 5f75  et_uri=bucket1_u
+0000c3b0: 7269 2c0a 2020 2020 2020 2020 2020 2020  ri,.            
+0000c3c0: 2020 2020 2020 2020 2020 6f62 6a65 6374            object
+0000c3d0: 5f6e 616d 653d 276b 272c 0a20 2020 2020  _name='k',.     
+0000c3e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c3f0: 2063 6f6e 7465 6e74 733d 6227 6c6f 6e67   contents=b'long
+0000c400: 6572 5f64 6174 6131 272c 0a20 2020 2020  er_data1',.     
+0000c410: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c420: 2067 735f 6964 656d 706f 7465 6e74 5f67   gs_idempotent_g
+0000c430: 656e 6572 6174 696f 6e3d 7572 6967 656e  eneration=urigen
+0000c440: 2876 315f 7572 6929 290a 0a20 2020 2073  (v1_uri))..    s
+0000c450: 656c 662e 4173 7365 7274 4e4f 626a 6563  elf.AssertNObjec
+0000c460: 7473 496e 4275 636b 6574 2862 7563 6b65  tsInBucket(bucke
+0000c470: 7431 5f75 7269 2c20 322c 2076 6572 7369  t1_uri, 2, versi
+0000c480: 6f6e 6564 3d54 7275 6529 0a20 2020 2073  oned=True).    s
+0000c490: 656c 662e 4173 7365 7274 4e4f 626a 6563  elf.AssertNObjec
+0000c4a0: 7473 496e 4275 636b 6574 2862 7563 6b65  tsInBucket(bucke
+0000c4b0: 7432 5f75 7269 2c20 302c 2076 6572 7369  t2_uri, 0, versi
+0000c4c0: 6f6e 6564 3d54 7275 6529 0a20 2020 2073  oned=True).    s
+0000c4d0: 656c 662e 4173 7365 7274 4e4f 626a 6563  elf.AssertNObjec
+0000c4e0: 7473 496e 4275 636b 6574 2862 7563 6b65  tsInBucket(bucke
+0000c4f0: 7433 5f75 7269 2c20 302c 2076 6572 7369  t3_uri, 0, versi
+0000c500: 6f6e 6564 3d54 7275 6529 0a0a 2020 2020  oned=True)..    
+0000c510: 2320 5265 6375 7273 6976 656c 7920 636f  # Recursively co
+0000c520: 7079 2074 6f20 7365 636f 6e64 2076 6572  py to second ver
+0000c530: 7369 6f6e 6564 2062 7563 6b65 742e 0a20  sioned bucket.. 
+0000c540: 2020 2023 202d 4120 666c 6167 2073 686f     # -A flag sho
+0000c550: 756c 6420 636f 7079 2061 6c6c 2076 6572  uld copy all ver
+0000c560: 7369 6f6e 7320 696e 206f 7264 6572 2e0a  sions in order..
+0000c570: 2020 2020 7365 6c66 2e52 756e 4773 5574      self.RunGsUt
+0000c580: 696c 280a 2020 2020 2020 2020 5b27 6370  il(.        ['cp
+0000c590: 272c 2027 2d52 272c 2027 2d41 272c 0a20  ', '-R', '-A',. 
+0000c5a0: 2020 2020 2020 2020 7375 7269 2862 7563          suri(buc
+0000c5b0: 6b65 7431 5f75 7269 2c20 272a 2729 2c0a  ket1_uri, '*'),.
+0000c5c0: 2020 2020 2020 2020 2073 7572 6928 6275           suri(bu
+0000c5d0: 636b 6574 325f 7572 6929 5d29 0a0a 2020  cket2_uri)])..  
+0000c5e0: 2020 2320 5573 6520 4052 6574 7279 2061    # Use @Retry a
+0000c5f0: 7320 6865 6467 6520 6167 6169 6e73 7420  s hedge against 
+0000c600: 6275 636b 6574 206c 6973 7469 6e67 2065  bucket listing e
+0000c610: 7665 6e74 7561 6c20 636f 6e73 6973 7465  ventual consiste
+0000c620: 6e63 792e 0a20 2020 2040 5265 7472 7928  ncy..    @Retry(
+0000c630: 4173 7365 7274 696f 6e45 7272 6f72 2c20  AssertionError, 
+0000c640: 7472 6965 733d 332c 2074 696d 656f 7574  tries=3, timeout
+0000c650: 5f73 6563 733d 3129 0a20 2020 2064 6566  _secs=1).    def
+0000c660: 205f 4368 6563 6b32 2829 3a0a 2020 2020   _Check2():.    
+0000c670: 2020 2222 2256 616c 6964 6174 6573 2074    """Validates t
+0000c680: 6865 2072 6573 756c 7473 206f 6620 7468  he results of th
+0000c690: 6520 6370 202d 522e 2222 220a 2020 2020  e cp -R.""".    
+0000c6a0: 2020 6c69 7374 696e 6731 203d 2073 656c    listing1 = sel
+0000c6b0: 662e 5275 6e47 7355 7469 6c28 5b27 6c73  f.RunGsUtil(['ls
+0000c6c0: 272c 2027 2d6c 6127 2c20 7375 7269 2862  ', '-la', suri(b
+0000c6d0: 7563 6b65 7431 5f75 7269 295d 2c0a 2020  ucket1_uri)],.  
+0000c6e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c6f0: 2020 2020 2020 2020 2020 2020 2020 7265                re
+0000c700: 7475 726e 5f73 7464 6f75 743d 5472 7565  turn_stdout=True
+0000c710: 292e 7370 6c69 7428 275c 6e27 290a 2020  ).split('\n').  
+0000c720: 2020 2020 6c69 7374 696e 6732 203d 2073      listing2 = s
+0000c730: 656c 662e 5275 6e47 7355 7469 6c28 5b27  elf.RunGsUtil(['
+0000c740: 6c73 272c 2027 2d6c 6127 2c20 7375 7269  ls', '-la', suri
+0000c750: 2862 7563 6b65 7432 5f75 7269 295d 2c0a  (bucket2_uri)],.
+0000c760: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c770: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c780: 7265 7475 726e 5f73 7464 6f75 743d 5472  return_stdout=Tr
+0000c790: 7565 292e 7370 6c69 7428 275c 6e27 290a  ue).split('\n').
+0000c7a0: 2020 2020 2020 2320 3220 6c69 6e65 7320        # 2 lines 
+0000c7b0: 6f66 206c 6973 7469 6e67 206f 7574 7075  of listing outpu
+0000c7c0: 742c 2031 2073 756d 6d61 7279 206c 696e  t, 1 summary lin
+0000c7d0: 652c 2031 2065 6d70 7479 206c 696e 6520  e, 1 empty line 
+0000c7e0: 6672 6f6d 205c 6e20 7370 6c69 742e 0a20  from \n split.. 
+0000c7f0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+0000c800: 4571 7561 6c73 286c 656e 286c 6973 7469  Equals(len(listi
+0000c810: 6e67 3129 2c20 3429 0a20 2020 2020 2073  ng1), 4).      s
+0000c820: 656c 662e 6173 7365 7274 4571 7561 6c73  elf.assertEquals
+0000c830: 286c 656e 286c 6973 7469 6e67 3229 2c20  (len(listing2), 
+0000c840: 3429 0a0a 2020 2020 2020 2320 4669 7273  4)..      # Firs
+0000c850: 7420 6f62 6a65 6374 2069 6e20 6561 6368  t object in each
+0000c860: 2062 7563 6b65 7420 7368 6f75 6c64 206d   bucket should m
+0000c870: 6174 6368 2069 6e20 7369 7a65 2061 6e64  atch in size and
+0000c880: 2076 6572 7369 6f6e 2d6c 6573 7320 6e61   version-less na
+0000c890: 6d65 2e0a 2020 2020 2020 7369 7a65 312c  me..      size1,
+0000c8a0: 205f 2c20 7572 695f 7374 7231 2c20 5f20   _, uri_str1, _ 
+0000c8b0: 3d20 6c69 7374 696e 6731 5b30 5d2e 7370  = listing1[0].sp
+0000c8c0: 6c69 7428 290a 2020 2020 2020 7365 6c66  lit().      self
+0000c8d0: 2e61 7373 6572 7445 7175 616c 7328 7369  .assertEquals(si
+0000c8e0: 7a65 312c 2073 7472 286c 656e 2827 6461  ze1, str(len('da
+0000c8f0: 7461 3027 2929 290a 2020 2020 2020 7365  ta0'))).      se
+0000c900: 6c66 2e61 7373 6572 7445 7175 616c 7328  lf.assertEquals(
+0000c910: 7374 6f72 6167 655f 7572 6928 7572 695f  storage_uri(uri_
+0000c920: 7374 7231 292e 6f62 6a65 6374 5f6e 616d  str1).object_nam
+0000c930: 652c 2027 6b27 290a 2020 2020 2020 7369  e, 'k').      si
+0000c940: 7a65 322c 205f 2c20 7572 695f 7374 7232  ze2, _, uri_str2
+0000c950: 2c20 5f20 3d20 6c69 7374 696e 6732 5b30  , _ = listing2[0
+0000c960: 5d2e 7370 6c69 7428 290a 2020 2020 2020  ].split().      
+0000c970: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+0000c980: 7328 7369 7a65 322c 2073 7472 286c 656e  s(size2, str(len
+0000c990: 2827 6461 7461 3027 2929 290a 2020 2020  ('data0'))).    
+0000c9a0: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+0000c9b0: 616c 7328 7374 6f72 6167 655f 7572 6928  als(storage_uri(
+0000c9c0: 7572 695f 7374 7232 292e 6f62 6a65 6374  uri_str2).object
+0000c9d0: 5f6e 616d 652c 2027 6b27 290a 0a20 2020  _name, 'k')..   
+0000c9e0: 2020 2023 2053 696d 696c 6172 6c79 2066     # Similarly f
+0000c9f0: 6f72 2073 6563 6f6e 6420 6f62 6a65 6374  or second object
+0000ca00: 2069 6e20 6561 6368 2062 7563 6b65 742e   in each bucket.
+0000ca10: 0a20 2020 2020 2073 697a 6531 2c20 5f2c  .      size1, _,
+0000ca20: 2075 7269 5f73 7472 312c 205f 203d 206c   uri_str1, _ = l
+0000ca30: 6973 7469 6e67 315b 315d 2e73 706c 6974  isting1[1].split
+0000ca40: 2829 0a20 2020 2020 2073 656c 662e 6173  ().      self.as
+0000ca50: 7365 7274 4571 7561 6c73 2873 697a 6531  sertEquals(size1
+0000ca60: 2c20 7374 7228 6c65 6e28 276c 6f6e 6765  , str(len('longe
+0000ca70: 725f 6461 7461 3127 2929 290a 2020 2020  r_data1'))).    
+0000ca80: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+0000ca90: 616c 7328 7374 6f72 6167 655f 7572 6928  als(storage_uri(
+0000caa0: 7572 695f 7374 7231 292e 6f62 6a65 6374  uri_str1).object
+0000cab0: 5f6e 616d 652c 2027 6b27 290a 2020 2020  _name, 'k').    
+0000cac0: 2020 7369 7a65 322c 205f 2c20 7572 695f    size2, _, uri_
+0000cad0: 7374 7232 2c20 5f20 3d20 6c69 7374 696e  str2, _ = listin
+0000cae0: 6732 5b31 5d2e 7370 6c69 7428 290a 2020  g2[1].split().  
+0000caf0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+0000cb00: 7175 616c 7328 7369 7a65 322c 2073 7472  quals(size2, str
+0000cb10: 286c 656e 2827 6c6f 6e67 6572 5f64 6174  (len('longer_dat
+0000cb20: 6131 2729 2929 0a20 2020 2020 2073 656c  a1'))).      sel
+0000cb30: 662e 6173 7365 7274 4571 7561 6c73 2873  f.assertEquals(s
+0000cb40: 746f 7261 6765 5f75 7269 2875 7269 5f73  torage_uri(uri_s
+0000cb50: 7472 3229 2e6f 626a 6563 745f 6e61 6d65  tr2).object_name
+0000cb60: 2c20 276b 2729 0a0a 2020 2020 5f43 6865  , 'k')..    _Che
+0000cb70: 636b 3228 290a 0a20 2020 2023 2052 6563  ck2()..    # Rec
+0000cb80: 7572 7369 7665 6c79 2063 6f70 7920 746f  ursively copy to
+0000cb90: 2073 6563 6f6e 6420 7665 7273 696f 6e65   second versione
+0000cba0: 6420 6275 636b 6574 2077 6974 6820 6e6f  d bucket with no
+0000cbb0: 202d 4120 666c 6167 2e0a 2020 2020 2320   -A flag..    # 
+0000cbc0: 5468 6973 2073 686f 756c 6420 636f 7079  This should copy
+0000cbd0: 206f 6e6c 7920 7468 6520 6c69 7665 206f   only the live o
+0000cbe0: 626a 6563 742e 0a20 2020 2073 656c 662e  bject..    self.
+0000cbf0: 5275 6e47 7355 7469 6c28 5b27 6370 272c  RunGsUtil(['cp',
+0000cc00: 2027 2d52 272c 2073 7572 6928 6275 636b   '-R', suri(buck
+0000cc10: 6574 315f 7572 692c 2027 2a27 292c 2073  et1_uri, '*'), s
+0000cc20: 7572 6928 6275 636b 6574 335f 7572 6929  uri(bucket3_uri)
+0000cc30: 5d29 0a0a 2020 2020 2320 5573 6520 4052  ])..    # Use @R
+0000cc40: 6574 7279 2061 7320 6865 6467 6520 6167  etry as hedge ag
+0000cc50: 6169 6e73 7420 6275 636b 6574 206c 6973  ainst bucket lis
+0000cc60: 7469 6e67 2065 7665 6e74 7561 6c20 636f  ting eventual co
+0000cc70: 6e73 6973 7465 6e63 792e 0a20 2020 2040  nsistency..    @
+0000cc80: 5265 7472 7928 4173 7365 7274 696f 6e45  Retry(AssertionE
+0000cc90: 7272 6f72 2c20 7472 6965 733d 332c 2074  rror, tries=3, t
+0000cca0: 696d 656f 7574 5f73 6563 733d 3129 0a20  imeout_secs=1). 
+0000ccb0: 2020 2064 6566 205f 4368 6563 6b33 2829     def _Check3()
+0000ccc0: 3a0a 2020 2020 2020 2222 2256 616c 6964  :.      """Valid
+0000ccd0: 6174 6573 2074 6865 2072 6573 756c 7473  ates the results
+0000cce0: 206f 6620 7468 6520 6370 202d 522e 2222   of the cp -R.""
+0000ccf0: 220a 2020 2020 2020 6c69 7374 696e 6731  ".      listing1
+0000cd00: 203d 2073 656c 662e 5275 6e47 7355 7469   = self.RunGsUti
+0000cd10: 6c28 5b27 6c73 272c 2027 2d6c 6127 2c20  l(['ls', '-la', 
+0000cd20: 7375 7269 2862 7563 6b65 7431 5f75 7269  suri(bucket1_uri
+0000cd30: 295d 2c0a 2020 2020 2020 2020 2020 2020  )],.            
+0000cd40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cd50: 2020 2020 7265 7475 726e 5f73 7464 6f75      return_stdou
+0000cd60: 743d 5472 7565 292e 7370 6c69 7428 275c  t=True).split('\
+0000cd70: 6e27 290a 2020 2020 2020 6c69 7374 696e  n').      listin
+0000cd80: 6732 203d 2073 656c 662e 5275 6e47 7355  g2 = self.RunGsU
+0000cd90: 7469 6c28 5b27 6c73 272c 2027 2d6c 6127  til(['ls', '-la'
+0000cda0: 2c20 7375 7269 2862 7563 6b65 7433 5f75  , suri(bucket3_u
+0000cdb0: 7269 295d 2c0a 2020 2020 2020 2020 2020  ri)],.          
+0000cdc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cdd0: 2020 2020 2020 7265 7475 726e 5f73 7464        return_std
+0000cde0: 6f75 743d 5472 7565 292e 7370 6c69 7428  out=True).split(
+0000cdf0: 275c 6e27 290a 2020 2020 2020 2320 3220  '\n').      # 2 
+0000ce00: 6c69 6e65 7320 6f66 206c 6973 7469 6e67  lines of listing
+0000ce10: 206f 7574 7075 742c 2031 2073 756d 6d61   output, 1 summa
+0000ce20: 7279 206c 696e 652c 2031 2065 6d70 7479  ry line, 1 empty
+0000ce30: 206c 696e 6520 6672 6f6d 205c 6e20 7370   line from \n sp
+0000ce40: 6c69 742e 0a20 2020 2020 2073 656c 662e  lit..      self.
+0000ce50: 6173 7365 7274 4571 7561 6c73 286c 656e  assertEquals(len
+0000ce60: 286c 6973 7469 6e67 3129 2c20 3429 0a20  (listing1), 4). 
+0000ce70: 2020 2020 2023 2031 206c 696e 6573 206f       # 1 lines o
+0000ce80: 6620 6c69 7374 696e 6720 6f75 7470 7574  f listing output
+0000ce90: 2c20 3120 7375 6d6d 6172 7920 6c69 6e65  , 1 summary line
+0000cea0: 2c20 3120 656d 7074 7920 6c69 6e65 2066  , 1 empty line f
+0000ceb0: 726f 6d20 5c6e 2073 706c 6974 2e0a 2020  rom \n split..  
+0000cec0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+0000ced0: 7175 616c 7328 6c65 6e28 6c69 7374 696e  quals(len(listin
+0000cee0: 6732 292c 2033 290a 0a20 2020 2020 2023  g2), 3)..      #
+0000cef0: 204c 6976 6520 2873 6563 6f6e 6429 206f   Live (second) o
+0000cf00: 626a 6563 7420 696e 2062 7563 6b65 7420  bject in bucket 
+0000cf10: 3120 7368 6f75 6c64 206d 6174 6368 2074  1 should match t
+0000cf20: 6865 2073 696e 676c 6520 6c69 7665 206f  he single live o
+0000cf30: 626a 6563 742e 0a20 2020 2020 2073 697a  bject..      siz
+0000cf40: 6531 2c20 5f2c 2075 7269 5f73 7472 312c  e1, _, uri_str1,
+0000cf50: 205f 203d 206c 6973 7469 6e67 325b 305d   _ = listing2[0]
+0000cf60: 2e73 706c 6974 2829 0a20 2020 2020 2073  .split().      s
+0000cf70: 656c 662e 6173 7365 7274 4571 7561 6c73  elf.assertEquals
+0000cf80: 2873 697a 6531 2c20 7374 7228 6c65 6e28  (size1, str(len(
+0000cf90: 276c 6f6e 6765 725f 6461 7461 3127 2929  'longer_data1'))
+0000cfa0: 290a 2020 2020 2020 7365 6c66 2e61 7373  ).      self.ass
+0000cfb0: 6572 7445 7175 616c 7328 7374 6f72 6167  ertEquals(storag
+0000cfc0: 655f 7572 6928 7572 695f 7374 7231 292e  e_uri(uri_str1).
+0000cfd0: 6f62 6a65 6374 5f6e 616d 652c 2027 6b27  object_name, 'k'
+0000cfe0: 290a 0a20 2020 205f 4368 6563 6b33 2829  )..    _Check3()
+0000cff0: 0a0a 2020 4053 6571 7565 6e74 6961 6c41  ..  @SequentialA
+0000d000: 6e64 5061 7261 6c6c 656c 5472 616e 7366  ndParallelTransf
+0000d010: 6572 0a20 2040 536b 6970 466f 7253 3328  er.  @SkipForS3(
+0000d020: 2750 7265 636f 6e64 6974 696f 6e73 206e  'Preconditions n
+0000d030: 6f74 2073 7570 706f 7274 6564 2066 6f72  ot supported for
+0000d040: 2053 332e 2729 0a20 2064 6566 2074 6573   S3.').  def tes
+0000d050: 745f 6370 5f67 656e 6572 6174 696f 6e5f  t_cp_generation_
+0000d060: 7a65 726f 5f6d 6174 6368 2873 656c 6629  zero_match(self)
+0000d070: 3a0a 2020 2020 2222 2254 6573 7473 2074  :.    """Tests t
+0000d080: 6861 7420 6370 2068 616e 646c 6573 2061  hat cp handles a
+0000d090: 6e20 6f62 6a65 6374 2d6e 6f74 2d65 7869  n object-not-exi
+0000d0a0: 7374 7320 7072 6563 6f6e 6469 7469 6f6e  sts precondition
+0000d0b0: 2068 6561 6465 722e 2222 220a 2020 2020   header.""".    
+0000d0c0: 6275 636b 6574 5f75 7269 203d 2073 656c  bucket_uri = sel
+0000d0d0: 662e 4372 6561 7465 4275 636b 6574 2829  f.CreateBucket()
+0000d0e0: 0a20 2020 2066 7061 7468 3120 3d20 7365  .    fpath1 = se
+0000d0f0: 6c66 2e43 7265 6174 6554 656d 7046 696c  lf.CreateTempFil
+0000d100: 6528 636f 6e74 656e 7473 3d62 2764 6174  e(contents=b'dat
+0000d110: 6131 2729 0a20 2020 2023 204d 6174 6368  a1').    # Match
+0000d120: 2030 206d 6561 6e73 206f 6e6c 7920 7772   0 means only wr
+0000d130: 6974 6520 7468 6520 6f62 6a65 6374 2069  ite the object i
+0000d140: 6620 6974 2064 6f65 736e 2774 2061 6c72  f it doesn't alr
+0000d150: 6561 6479 2065 7869 7374 2e0a 2020 2020  eady exist..    
+0000d160: 6765 6e5f 6d61 7463 685f 6865 6164 6572  gen_match_header
+0000d170: 203d 2027 782d 676f 6f67 2d69 662d 6765   = 'x-goog-if-ge
+0000d180: 6e65 7261 7469 6f6e 2d6d 6174 6368 3a30  neration-match:0
+0000d190: 270a 0a20 2020 2023 2046 6972 7374 2063  '..    # First c
+0000d1a0: 6f70 7920 7368 6f75 6c64 2073 7563 6365  opy should succe
+0000d1b0: 6564 2e0a 2020 2020 2320 544f 444f 3a20  ed..    # TODO: 
+0000d1c0: 5468 6973 2063 616e 2066 6169 6c20 2872  This can fail (r
+0000d1d0: 6172 656c 7929 2069 6620 7468 6520 7365  arely) if the se
+0000d1e0: 7276 6572 2072 6574 7572 6e73 2061 2035  rver returns a 5
+0000d1f0: 7878 2062 7574 2061 6374 7561 6c6c 790a  xx but actually.
+0000d200: 2020 2020 2320 636f 6d6d 6974 7320 7468      # commits th
+0000d210: 6520 6279 7465 732e 2049 6620 7765 2061  e bytes. If we a
+0000d220: 6464 2072 6573 7461 7274 7320 6f6e 2073  dd restarts on s
+0000d230: 6d61 6c6c 2075 706c 6f61 6473 2c20 6861  mall uploads, ha
+0000d240: 6e64 6c65 2074 6869 730a 2020 2020 2320  ndle this.    # 
+0000d250: 6361 7365 2e0a 2020 2020 7365 6c66 2e52  case..    self.R
+0000d260: 756e 4773 5574 696c 285b 272d 6827 2c20  unGsUtil(['-h', 
+0000d270: 6765 6e5f 6d61 7463 685f 6865 6164 6572  gen_match_header
+0000d280: 2c20 2763 7027 2c20 6670 6174 6831 2c20  , 'cp', fpath1, 
+0000d290: 7375 7269 2862 7563 6b65 745f 7572 6929  suri(bucket_uri)
+0000d2a0: 5d29 0a0a 2020 2020 2320 5365 636f 6e64  ])..    # Second
+0000d2b0: 2063 6f70 7920 7368 6f75 6c64 2066 6169   copy should fai
+0000d2c0: 6c20 7769 7468 2061 2070 7265 636f 6e64  l with a precond
+0000d2d0: 6974 696f 6e20 6572 726f 722e 0a20 2020  ition error..   
+0000d2e0: 2073 7464 6572 7220 3d20 7365 6c66 2e52   stderr = self.R
+0000d2f0: 756e 4773 5574 696c 280a 2020 2020 2020  unGsUtil(.      
+0000d300: 2020 5b27 2d68 272c 2067 656e 5f6d 6174    ['-h', gen_mat
+0000d310: 6368 5f68 6561 6465 722c 2027 6370 272c  ch_header, 'cp',
+0000d320: 2066 7061 7468 312c 0a20 2020 2020 2020   fpath1,.       
+0000d330: 2020 7375 7269 2862 7563 6b65 745f 7572    suri(bucket_ur
+0000d340: 6929 5d2c 0a20 2020 2020 2020 2072 6574  i)],.        ret
+0000d350: 7572 6e5f 7374 6465 7272 3d54 7275 652c  urn_stderr=True,
+0000d360: 0a20 2020 2020 2020 2065 7870 6563 7465  .        expecte
+0000d370: 645f 7374 6174 7573 3d31 290a 2020 2020  d_status=1).    
+0000d380: 7365 6c66 2e61 7373 6572 7449 6e28 2750  self.assertIn('P
+0000d390: 7265 636f 6e64 6974 696f 6e45 7863 6570  reconditionExcep
+0000d3a0: 7469 6f6e 272c 2073 7464 6572 7229 0a0a  tion', stderr)..
+0000d3b0: 2020 4053 6571 7565 6e74 6961 6c41 6e64    @SequentialAnd
+0000d3c0: 5061 7261 6c6c 656c 5472 616e 7366 6572  ParallelTransfer
+0000d3d0: 0a20 2040 536b 6970 466f 7253 3328 2750  .  @SkipForS3('P
+0000d3e0: 7265 636f 6e64 6974 696f 6e73 206e 6f74  reconditions not
+0000d3f0: 2073 7570 706f 7274 6564 2066 6f72 2053   supported for S
+0000d400: 332e 2729 0a20 2064 6566 2074 6573 745f  3.').  def test_
+0000d410: 6370 5f76 5f67 656e 6572 6174 696f 6e5f  cp_v_generation_
+0000d420: 6d61 7463 6828 7365 6c66 293a 0a20 2020  match(self):.   
+0000d430: 2022 2222 5465 7374 7320 7468 6174 2063   """Tests that c
+0000d440: 7020 2d76 206f 7074 696f 6e20 6861 6e64  p -v option hand
+0000d450: 6c65 7320 7468 6520 6966 2d67 656e 6572  les the if-gener
+0000d460: 6174 696f 6e2d 6d61 7463 6820 6865 6164  ation-match head
+0000d470: 6572 2e22 2222 0a20 2020 2062 7563 6b65  er.""".    bucke
+0000d480: 745f 7572 6920 3d20 7365 6c66 2e43 7265  t_uri = self.Cre
+0000d490: 6174 6556 6572 7369 6f6e 6564 4275 636b  ateVersionedBuck
+0000d4a0: 6574 2829 0a20 2020 206b 315f 7572 6920  et().    k1_uri 
+0000d4b0: 3d20 7365 6c66 2e43 7265 6174 654f 626a  = self.CreateObj
+0000d4c0: 6563 7428 6275 636b 6574 5f75 7269 3d62  ect(bucket_uri=b
+0000d4d0: 7563 6b65 745f 7572 692c 2063 6f6e 7465  ucket_uri, conte
+0000d4e0: 6e74 733d 6227 6461 7461 3127 290a 2020  nts=b'data1').  
+0000d4f0: 2020 6731 203d 206b 315f 7572 692e 6765    g1 = k1_uri.ge
+0000d500: 6e65 7261 7469 6f6e 0a0a 2020 2020 746d  neration..    tm
+0000d510: 7064 6972 203d 2073 656c 662e 4372 6561  pdir = self.Crea
+0000d520: 7465 5465 6d70 4469 7228 290a 2020 2020  teTempDir().    
+0000d530: 6670 6174 6831 203d 2073 656c 662e 4372  fpath1 = self.Cr
+0000d540: 6561 7465 5465 6d70 4669 6c65 2874 6d70  eateTempFile(tmp
+0000d550: 6469 723d 746d 7064 6972 2c20 636f 6e74  dir=tmpdir, cont
+0000d560: 656e 7473 3d62 2764 6174 6132 2729 0a0a  ents=b'data2')..
+0000d570: 2020 2020 6765 6e5f 6d61 7463 685f 6865      gen_match_he
+0000d580: 6164 6572 203d 2027 782d 676f 6f67 2d69  ader = 'x-goog-i
+0000d590: 662d 6765 6e65 7261 7469 6f6e 2d6d 6174  f-generation-mat
+0000d5a0: 6368 3a25 7327 2025 2067 310a 2020 2020  ch:%s' % g1.    
+0000d5b0: 2320 4669 7273 7420 636f 7079 2073 686f  # First copy sho
+0000d5c0: 756c 6420 7375 6363 6565 642e 0a20 2020  uld succeed..   
+0000d5d0: 2073 656c 662e 5275 6e47 7355 7469 6c28   self.RunGsUtil(
+0000d5e0: 5b27 2d68 272c 2067 656e 5f6d 6174 6368  ['-h', gen_match
+0000d5f0: 5f68 6561 6465 722c 2027 6370 272c 2066  _header, 'cp', f
+0000d600: 7061 7468 312c 2073 7572 6928 6b31 5f75  path1, suri(k1_u
+0000d610: 7269 295d 290a 0a20 2020 2023 2053 6563  ri)])..    # Sec
+0000d620: 6f6e 6420 636f 7079 2073 686f 756c 6420  ond copy should 
+0000d630: 6661 696c 2074 6865 2070 7265 636f 6e64  fail the precond
+0000d640: 6974 696f 6e2e 0a20 2020 2073 7464 6572  ition..    stder
+0000d650: 7220 3d20 7365 6c66 2e52 756e 4773 5574  r = self.RunGsUt
+0000d660: 696c 280a 2020 2020 2020 2020 5b27 2d68  il(.        ['-h
+0000d670: 272c 2067 656e 5f6d 6174 6368 5f68 6561  ', gen_match_hea
+0000d680: 6465 722c 2027 6370 272c 2066 7061 7468  der, 'cp', fpath
+0000d690: 312c 0a20 2020 2020 2020 2020 7375 7269  1,.         suri
+0000d6a0: 286b 315f 7572 6929 5d2c 0a20 2020 2020  (k1_uri)],.     
+0000d6b0: 2020 2072 6574 7572 6e5f 7374 6465 7272     return_stderr
+0000d6c0: 3d54 7275 652c 0a20 2020 2020 2020 2065  =True,.        e
+0000d6d0: 7870 6563 7465 645f 7374 6174 7573 3d31  xpected_status=1
+0000d6e0: 290a 0a20 2020 2073 656c 662e 6173 7365  )..    self.asse
+0000d6f0: 7274 496e 2827 5072 6563 6f6e 6469 7469  rtIn('Preconditi
+0000d700: 6f6e 4578 6365 7074 696f 6e27 2c20 7374  onException', st
+0000d710: 6465 7272 290a 0a20 2020 2023 2053 7065  derr)..    # Spe
+0000d720: 6369 6669 7969 6e67 2061 2067 656e 6572  cifiying a gener
+0000d730: 6174 696f 6e20 7769 7468 202d 6e20 7368  ation with -n sh
+0000d740: 6f75 6c64 2066 6169 6c20 6265 666f 7265  ould fail before
+0000d750: 2074 6865 2072 6571 7565 7374 2068 6974   the request hit
+0000d760: 7320 7468 650a 2020 2020 2320 7365 7276  s the.    # serv
+0000d770: 6572 2e0a 2020 2020 7374 6465 7272 203d  er..    stderr =
+0000d780: 2073 656c 662e 5275 6e47 7355 7469 6c28   self.RunGsUtil(
+0000d790: 0a20 2020 2020 2020 205b 272d 6827 2c20  .        ['-h', 
+0000d7a0: 6765 6e5f 6d61 7463 685f 6865 6164 6572  gen_match_header
+0000d7b0: 2c20 2763 7027 2c20 272d 6e27 2c20 6670  , 'cp', '-n', fp
+0000d7c0: 6174 6831 2c0a 2020 2020 2020 2020 2073  ath1,.         s
+0000d7d0: 7572 6928 6b31 5f75 7269 295d 2c0a 2020  uri(k1_uri)],.  
+0000d7e0: 2020 2020 2020 7265 7475 726e 5f73 7464        return_std
+0000d7f0: 6572 723d 5472 7565 2c0a 2020 2020 2020  err=True,.      
+0000d800: 2020 6578 7065 6374 6564 5f73 7461 7475    expected_statu
+0000d810: 733d 3129 0a0a 2020 2020 7365 6c66 2e61  s=1)..    self.a
+0000d820: 7373 6572 7449 6e28 2741 7267 756d 656e  ssertIn('Argumen
+0000d830: 7445 7863 6570 7469 6f6e 272c 2073 7464  tException', std
+0000d840: 6572 7229 0a20 2020 2073 656c 662e 6173  err).    self.as
+0000d850: 7365 7274 496e 280a 2020 2020 2020 2020  sertIn(.        
+0000d860: 2753 7065 6369 6679 696e 6720 782d 676f  'Specifying x-go
+0000d870: 6f67 2d69 662d 6765 6e65 7261 7469 6f6e  og-if-generation
+0000d880: 2d6d 6174 6368 2069 7320 6e6f 7420 7375  -match is not su
+0000d890: 7070 6f72 7465 6420 270a 2020 2020 2020  pported '.      
+0000d8a0: 2020 2777 6974 6820 6370 202d 6e27 2c20    'with cp -n', 
+0000d8b0: 7374 6465 7272 290a 0a20 2040 5365 7175  stderr)..  @Sequ
+0000d8c0: 656e 7469 616c 416e 6450 6172 616c 6c65  entialAndParalle
+0000d8d0: 6c54 7261 6e73 6665 720a 2020 6465 6620  lTransfer.  def 
+0000d8e0: 7465 7374 5f63 705f 6e76 2873 656c 6629  test_cp_nv(self)
+0000d8f0: 3a0a 2020 2020 2222 2254 6573 7473 2074  :.    """Tests t
+0000d900: 6861 7420 6370 202d 6e76 2077 6f72 6b73  hat cp -nv works
+0000d910: 2077 6865 6e20 736b 6970 7069 6e67 2065   when skipping e
+0000d920: 7869 7374 696e 6720 6669 6c65 2e22 2222  xisting file."""
+0000d930: 0a20 2020 2062 7563 6b65 745f 7572 6920  .    bucket_uri 
+0000d940: 3d20 7365 6c66 2e43 7265 6174 6556 6572  = self.CreateVer
+0000d950: 7369 6f6e 6564 4275 636b 6574 2829 0a20  sionedBucket(). 
+0000d960: 2020 206b 315f 7572 6920 3d20 7365 6c66     k1_uri = self
+0000d970: 2e43 7265 6174 654f 626a 6563 7428 6275  .CreateObject(bu
+0000d980: 636b 6574 5f75 7269 3d62 7563 6b65 745f  cket_uri=bucket_
+0000d990: 7572 692c 2063 6f6e 7465 6e74 733d 6227  uri, contents=b'
+0000d9a0: 6461 7461 3127 290a 0a20 2020 2074 6d70  data1')..    tmp
+0000d9b0: 6469 7220 3d20 7365 6c66 2e43 7265 6174  dir = self.Creat
+0000d9c0: 6554 656d 7044 6972 2829 0a20 2020 2066  eTempDir().    f
+0000d9d0: 7061 7468 3120 3d20 7365 6c66 2e43 7265  path1 = self.Cre
+0000d9e0: 6174 6554 656d 7046 696c 6528 746d 7064  ateTempFile(tmpd
+0000d9f0: 6972 3d74 6d70 6469 722c 2063 6f6e 7465  ir=tmpdir, conte
+0000da00: 6e74 733d 6227 6461 7461 3227 290a 0a20  nts=b'data2').. 
+0000da10: 2020 2023 2046 6972 7374 2063 6f70 7920     # First copy 
+0000da20: 7368 6f75 6c64 2073 7563 6365 6564 2e0a  should succeed..
+0000da30: 2020 2020 7365 6c66 2e52 756e 4773 5574      self.RunGsUt
+0000da40: 696c 285b 2763 7027 2c20 272d 6e76 272c  il(['cp', '-nv',
+0000da50: 2066 7061 7468 312c 2073 7572 6928 6b31   fpath1, suri(k1
+0000da60: 5f75 7269 295d 290a 0a20 2020 2023 2053  _uri)])..    # S
+0000da70: 6563 6f6e 6420 636f 7079 2073 686f 756c  econd copy shoul
+0000da80: 6420 736b 6970 2063 6f70 7969 6e67 2e0a  d skip copying..
+0000da90: 2020 2020 7374 6465 7272 203d 2073 656c      stderr = sel
+0000daa0: 662e 5275 6e47 7355 7469 6c28 0a20 2020  f.RunGsUtil(.   
+0000dab0: 2020 2020 205b 2763 7027 2c20 272d 6e76       ['cp', '-nv
+0000dac0: 272c 2066 7061 7468 312c 2073 7572 6928  ', fpath1, suri(
+0000dad0: 6b31 5f75 7269 295d 2c20 7265 7475 726e  k1_uri)], return
+0000dae0: 5f73 7464 6572 723d 5472 7565 290a 2020  _stderr=True).  
+0000daf0: 2020 7365 6c66 2e61 7373 6572 7449 6e28    self.assertIn(
+0000db00: 2753 6b69 7070 696e 6720 6578 6973 7469  'Skipping existi
+0000db10: 6e67 272c 2073 7464 6572 7229 0a0a 2020  ng', stderr)..  
+0000db20: 4053 6571 7565 6e74 6961 6c41 6e64 5061  @SequentialAndPa
+0000db30: 7261 6c6c 656c 5472 616e 7366 6572 0a20  rallelTransfer. 
+0000db40: 2040 536b 6970 466f 7253 3328 2753 3320   @SkipForS3('S3 
+0000db50: 6c69 7374 7320 7665 7273 696f 6e65 6420  lists versioned 
+0000db60: 6f62 6a65 6374 7320 696e 2072 6576 6572  objects in rever
+0000db70: 7365 2074 696d 6573 7461 6d70 206f 7264  se timestamp ord
+0000db80: 6572 2e27 290a 2020 6465 6620 7465 7374  er.').  def test
+0000db90: 5f63 705f 765f 6f70 7469 6f6e 2873 656c  _cp_v_option(sel
+0000dba0: 6629 3a0a 2020 2020 2222 2222 5465 7374  f):.    """"Test
+0000dbb0: 7320 7468 6174 2063 7020 2d76 2072 6574  s that cp -v ret
+0000dbc0: 7572 6e73 2074 6865 2063 7265 6174 6564  urns the created
+0000dbd0: 206f 626a 6563 7427 7320 7665 7273 696f   object's versio
+0000dbe0: 6e2d 7370 6563 6966 6963 2055 5249 2e22  n-specific URI."
+0000dbf0: 2222 0a20 2020 2062 7563 6b65 745f 7572  "".    bucket_ur
+0000dc00: 6920 3d20 7365 6c66 2e43 7265 6174 6556  i = self.CreateV
+0000dc10: 6572 7369 6f6e 6564 4275 636b 6574 2829  ersionedBucket()
+0000dc20: 0a20 2020 206b 315f 7572 6920 3d20 7365  .    k1_uri = se
+0000dc30: 6c66 2e43 7265 6174 654f 626a 6563 7428  lf.CreateObject(
+0000dc40: 6275 636b 6574 5f75 7269 3d62 7563 6b65  bucket_uri=bucke
+0000dc50: 745f 7572 692c 2063 6f6e 7465 6e74 733d  t_uri, contents=
+0000dc60: 6227 6461 7461 3127 290a 2020 2020 6b32  b'data1').    k2
+0000dc70: 5f75 7269 203d 2073 656c 662e 4372 6561  _uri = self.Crea
+0000dc80: 7465 4f62 6a65 6374 2862 7563 6b65 745f  teObject(bucket_
+0000dc90: 7572 693d 6275 636b 6574 5f75 7269 2c20  uri=bucket_uri, 
+0000dca0: 636f 6e74 656e 7473 3d62 2764 6174 6132  contents=b'data2
+0000dcb0: 2729 0a0a 2020 2020 2320 4361 7365 2031  ')..    # Case 1
+0000dcc0: 3a20 5570 6c6f 6164 2066 696c 6520 746f  : Upload file to
+0000dcd0: 206f 626a 6563 7420 7573 696e 6720 6f6e   object using on
+0000dce0: 652d 7368 6f74 2050 5554 2e0a 2020 2020  e-shot PUT..    
+0000dcf0: 746d 7064 6972 203d 2073 656c 662e 4372  tmpdir = self.Cr
+0000dd00: 6561 7465 5465 6d70 4469 7228 290a 2020  eateTempDir().  
+0000dd10: 2020 6670 6174 6831 203d 2073 656c 662e    fpath1 = self.
+0000dd20: 4372 6561 7465 5465 6d70 4669 6c65 2874  CreateTempFile(t
+0000dd30: 6d70 6469 723d 746d 7064 6972 2c20 636f  mpdir=tmpdir, co
+0000dd40: 6e74 656e 7473 3d62 2764 6174 6131 2729  ntents=b'data1')
+0000dd50: 0a20 2020 2073 656c 662e 5f72 756e 5f63  .    self._run_c
+0000dd60: 705f 6d69 6e75 735f 765f 7465 7374 2827  p_minus_v_test('
+0000dd70: 2d76 272c 2066 7061 7468 312c 206b 325f  -v', fpath1, k2_
+0000dd80: 7572 692e 7572 6929 0a0a 2020 2020 2320  uri.uri)..    # 
+0000dd90: 4361 7365 2032 3a20 5570 6c6f 6164 2066  Case 2: Upload f
+0000dda0: 696c 6520 746f 206f 626a 6563 7420 7573  ile to object us
+0000ddb0: 696e 6720 7265 7375 6d61 626c 6520 7570  ing resumable up
+0000ddc0: 6c6f 6164 2e0a 2020 2020 7369 7a65 5f74  load..    size_t
+0000ddd0: 6872 6573 686f 6c64 203d 204f 4e45 5f4b  hreshold = ONE_K
+0000dde0: 4942 0a20 2020 2062 6f74 6f5f 636f 6e66  IB.    boto_conf
+0000ddf0: 6967 5f66 6f72 5f74 6573 7420 3d20 2827  ig_for_test = ('
+0000de00: 4753 5574 696c 272c 2027 7265 7375 6d61  GSUtil', 'resuma
+0000de10: 626c 655f 7468 7265 7368 6f6c 6427 2c0a  ble_threshold',.
+0000de20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000de30: 2020 2020 2020 2020 2020 2020 7374 7228              str(
+0000de40: 7369 7a65 5f74 6872 6573 686f 6c64 2929  size_threshold))
+0000de50: 0a20 2020 2077 6974 6820 5365 7442 6f74  .    with SetBot
+0000de60: 6f43 6f6e 6669 6746 6f72 5465 7374 285b  oConfigForTest([
+0000de70: 626f 746f 5f63 6f6e 6669 675f 666f 725f  boto_config_for_
+0000de80: 7465 7374 5d29 3a0a 2020 2020 2020 6669  test]):.      fi
+0000de90: 6c65 5f61 735f 7374 7269 6e67 203d 206f  le_as_string = o
+0000dea0: 732e 7572 616e 646f 6d28 7369 7a65 5f74  s.urandom(size_t
+0000deb0: 6872 6573 686f 6c64 290a 2020 2020 2020  hreshold).      
+0000dec0: 746d 7064 6972 203d 2073 656c 662e 4372  tmpdir = self.Cr
+0000ded0: 6561 7465 5465 6d70 4469 7228 290a 2020  eateTempDir().  
+0000dee0: 2020 2020 6670 6174 6831 203d 2073 656c      fpath1 = sel
+0000def0: 662e 4372 6561 7465 5465 6d70 4669 6c65  f.CreateTempFile
+0000df00: 2874 6d70 6469 723d 746d 7064 6972 2c20  (tmpdir=tmpdir, 
+0000df10: 636f 6e74 656e 7473 3d66 696c 655f 6173  contents=file_as
+0000df20: 5f73 7472 696e 6729 0a20 2020 2020 2073  _string).      s
+0000df30: 656c 662e 5f72 756e 5f63 705f 6d69 6e75  elf._run_cp_minu
+0000df40: 735f 765f 7465 7374 2827 2d76 272c 2066  s_v_test('-v', f
+0000df50: 7061 7468 312c 206b 325f 7572 692e 7572  path1, k2_uri.ur
+0000df60: 6929 0a0a 2020 2020 2320 4361 7365 2033  i)..    # Case 3
+0000df70: 3a20 5570 6c6f 6164 2073 7472 6561 6d20  : Upload stream 
+0000df80: 746f 206f 626a 6563 742e 0a20 2020 2073  to object..    s
+0000df90: 656c 662e 5f72 756e 5f63 705f 6d69 6e75  elf._run_cp_minu
+0000dfa0: 735f 765f 7465 7374 2827 2d76 272c 2027  s_v_test('-v', '
+0000dfb0: 2d27 2c20 6b32 5f75 7269 2e75 7269 290a  -', k2_uri.uri).
+0000dfc0: 0a20 2020 2023 2043 6173 6520 343a 2044  .    # Case 4: D
+0000dfd0: 6f77 6e6c 6f61 6420 6f62 6a65 6374 2074  ownload object t
+0000dfe0: 6f20 6669 6c65 2e20 466f 7220 7468 6973  o file. For this
+0000dff0: 2063 6173 6520 7765 206a 7573 7420 6578   case we just ex
+0000e000: 7065 6374 206f 7574 7075 7420 6f66 0a20  pect output of. 
+0000e010: 2020 2023 2067 7375 7469 6c20 6370 202d     # gsutil cp -
+0000e020: 7620 746f 2062 6520 7468 6520 5552 4920  v to be the URI 
+0000e030: 6f66 2074 6865 2066 696c 652e 0a20 2020  of the file..   
+0000e040: 2074 6d70 6469 7220 3d20 7365 6c66 2e43   tmpdir = self.C
+0000e050: 7265 6174 6554 656d 7044 6972 2829 0a20  reateTempDir(). 
+0000e060: 2020 2066 7061 7468 3120 3d20 7365 6c66     fpath1 = self
+0000e070: 2e43 7265 6174 6554 656d 7046 696c 6528  .CreateTempFile(
+0000e080: 746d 7064 6972 3d74 6d70 6469 7229 0a20  tmpdir=tmpdir). 
+0000e090: 2020 2064 7374 5f75 7269 203d 2073 746f     dst_uri = sto
+0000e0a0: 7261 6765 5f75 7269 2866 7061 7468 3129  rage_uri(fpath1)
+0000e0b0: 0a20 2020 2073 7464 6572 7220 3d20 7365  .    stderr = se
+0000e0c0: 6c66 2e52 756e 4773 5574 696c 280a 2020  lf.RunGsUtil(.  
+0000e0d0: 2020 2020 2020 5b27 6370 272c 2027 2d76        ['cp', '-v
+0000e0e0: 272c 2073 7572 6928 6b31 5f75 7269 292c  ', suri(k1_uri),
+0000e0f0: 2073 7572 6928 6473 745f 7572 6929 5d2c   suri(dst_uri)],
+0000e100: 2072 6574 7572 6e5f 7374 6465 7272 3d54   return_stderr=T
+0000e110: 7275 6529 0a20 2020 2023 2054 4f44 4f3a  rue).    # TODO:
+0000e120: 2041 6464 206f 7264 6572 696e 6720 6173   Add ordering as
+0000e130: 7365 7274 696f 6e20 2873 686f 756c 6420  sertion (should 
+0000e140: 6265 2069 6e20 7374 6465 7272 2e73 706c  be in stderr.spl
+0000e150: 6974 2827 5c6e 295b 2d32 5d29 2062 6163  it('\n)[-2]) bac
+0000e160: 6b0a 2020 2020 2320 6f6e 6365 2062 6f74  k.    # once bot
+0000e170: 6820 7468 6520 6372 6561 7469 6f6e 2061  h the creation a
+0000e180: 6e64 2073 7461 7475 7320 6d65 7373 6167  nd status messag
+0000e190: 6573 2061 7265 2068 616e 646c 6564 2062  es are handled b
+0000e1a0: 7920 7468 6520 5549 2074 6872 6561 642e  y the UI thread.
+0000e1b0: 0a20 2020 2073 656c 662e 6173 7365 7274  .    self.assert
+0000e1c0: 496e 2827 4372 6561 7465 643a 2025 735c  In('Created: %s\
+0000e1d0: 6e27 2025 2064 7374 5f75 7269 2e75 7269  n' % dst_uri.uri
+0000e1e0: 2c20 7374 6465 7272 290a 0a20 2020 2023  , stderr)..    #
+0000e1f0: 2043 6173 6520 353a 2044 6169 7379 2d63   Case 5: Daisy-c
+0000e200: 6861 696e 2066 726f 6d20 6f62 6a65 6374  hain from object
+0000e210: 2074 6f20 6f62 6a65 6374 2e0a 2020 2020   to object..    
+0000e220: 7365 6c66 2e5f 7275 6e5f 6370 5f6d 696e  self._run_cp_min
+0000e230: 7573 5f76 5f74 6573 7428 272d 4476 272c  us_v_test('-Dv',
+0000e240: 206b 315f 7572 692e 7572 692c 206b 325f   k1_uri.uri, k2_
+0000e250: 7572 692e 7572 6929 0a0a 2020 2020 2320  uri.uri)..    # 
+0000e260: 4361 7365 2036 3a20 436f 7079 206f 626a  Case 6: Copy obj
+0000e270: 6563 7420 746f 206f 626a 6563 7420 696e  ect to object in
+0000e280: 2d74 6865 2d63 6c6f 7564 2e0a 2020 2020  -the-cloud..    
+0000e290: 7365 6c66 2e5f 7275 6e5f 6370 5f6d 696e  self._run_cp_min
+0000e2a0: 7573 5f76 5f74 6573 7428 272d 7627 2c20  us_v_test('-v', 
+0000e2b0: 6b31 5f75 7269 2e75 7269 2c20 6b32 5f75  k1_uri.uri, k2_u
+0000e2c0: 7269 2e75 7269 290a 0a20 2064 6566 205f  ri.uri)..  def _
+0000e2d0: 7275 6e5f 6370 5f6d 696e 7573 5f76 5f74  run_cp_minus_v_t
+0000e2e0: 6573 7428 7365 6c66 2c20 6f70 742c 2073  est(self, opt, s
+0000e2f0: 7263 5f73 7472 2c20 6473 745f 7374 7229  rc_str, dst_str)
+0000e300: 3a0a 2020 2020 2222 2252 756e 7320 6370  :.    """Runs cp
+0000e310: 202d 7620 7769 7468 2074 6865 206f 7074   -v with the opt
+0000e320: 696f 6e73 2061 6e64 2076 616c 6964 6174  ions and validat
+0000e330: 6573 2074 6865 2072 6573 756c 7473 2e22  es the results."
+0000e340: 2222 0a20 2020 2073 7464 6572 7220 3d20  "".    stderr = 
+0000e350: 7365 6c66 2e52 756e 4773 5574 696c 285b  self.RunGsUtil([
+0000e360: 2763 7027 2c20 6f70 742c 2073 7263 5f73  'cp', opt, src_s
+0000e370: 7472 2c20 6473 745f 7374 725d 2c20 7265  tr, dst_str], re
+0000e380: 7475 726e 5f73 7464 6572 723d 5472 7565  turn_stderr=True
+0000e390: 290a 2020 2020 6d61 7463 6820 3d20 7265  ).    match = re
+0000e3a0: 2e73 6561 7263 6828 7227 4372 6561 7465  .search(r'Create
+0000e3b0: 643a 2028 2e2a 295c 6e27 2c20 7374 6465  d: (.*)\n', stde
+0000e3c0: 7272 290a 2020 2020 7365 6c66 2e61 7373  rr).    self.ass
+0000e3d0: 6572 7449 734e 6f74 4e6f 6e65 286d 6174  ertIsNotNone(mat
+0000e3e0: 6368 290a 2020 2020 6372 6561 7465 645f  ch).    created_
+0000e3f0: 7572 6920 3d20 6d61 7463 682e 6772 6f75  uri = match.grou
+0000e400: 7028 3129 0a0a 2020 2020 2320 5573 6520  p(1)..    # Use 
+0000e410: 4052 6574 7279 2061 7320 6865 6467 6520  @Retry as hedge 
+0000e420: 6167 6169 6e73 7420 6275 636b 6574 206c  against bucket l
+0000e430: 6973 7469 6e67 2065 7665 6e74 7561 6c20  isting eventual 
+0000e440: 636f 6e73 6973 7465 6e63 792e 0a20 2020  consistency..   
+0000e450: 2040 5265 7472 7928 4173 7365 7274 696f   @Retry(Assertio
+0000e460: 6e45 7272 6f72 2c20 7472 6965 733d 332c  nError, tries=3,
+0000e470: 2074 696d 656f 7574 5f73 6563 733d 3129   timeout_secs=1)
+0000e480: 0a20 2020 2064 6566 205f 4368 6563 6b31  .    def _Check1
+0000e490: 2829 3a0a 2020 2020 2020 7374 646f 7574  ():.      stdout
+0000e4a0: 203d 2073 656c 662e 5275 6e47 7355 7469   = self.RunGsUti
+0000e4b0: 6c28 5b27 6c73 272c 2027 2d61 272c 2064  l(['ls', '-a', d
+0000e4c0: 7374 5f73 7472 5d2c 2072 6574 7572 6e5f  st_str], return_
+0000e4d0: 7374 646f 7574 3d54 7275 6529 0a20 2020  stdout=True).   
+0000e4e0: 2020 206c 696e 6573 203d 2073 7464 6f75     lines = stdou
+0000e4f0: 742e 7370 6c69 7428 275c 6e27 290a 2020  t.split('\n').  
+0000e500: 2020 2020 2320 4669 6e61 6c20 286d 6f73      # Final (mos
+0000e510: 7420 7265 6365 6e74 2920 6f62 6a65 6374  t recent) object
+0000e520: 2073 686f 756c 6420 6d61 7463 6820 7468   should match th
+0000e530: 6520 2243 7265 6174 6564 3a22 2055 5249  e "Created:" URI
+0000e540: 2e20 5468 6973 2069 730a 2020 2020 2020  . This is.      
+0000e550: 2320 696e 2073 6563 6f6e 642d 746f 2d6c  # in second-to-l
+0000e560: 6173 7420 6c69 6e65 2028 6c61 7374 206c  ast line (last l
+0000e570: 696e 6520 6973 2027 5c6e 2729 2e0a 2020  ine is '\n')..  
+0000e580: 2020 2020 7365 6c66 2e61 7373 6572 7447      self.assertG
+0000e590: 7265 6174 6572 286c 656e 286c 696e 6573  reater(len(lines
+0000e5a0: 292c 2032 290a 2020 2020 2020 7365 6c66  ), 2).      self
+0000e5b0: 2e61 7373 6572 7445 7175 616c 2863 7265  .assertEqual(cre
+0000e5c0: 6174 6564 5f75 7269 2c20 6c69 6e65 735b  ated_uri, lines[
+0000e5d0: 2d32 5d29 0a0a 2020 2020 5f43 6865 636b  -2])..    _Check
+0000e5e0: 3128 290a 0a20 2040 5365 7175 656e 7469  1()..  @Sequenti
+0000e5f0: 616c 416e 6450 6172 616c 6c65 6c54 7261  alAndParallelTra
+0000e600: 6e73 6665 720a 2020 6465 6620 7465 7374  nsfer.  def test
+0000e610: 5f73 7464 696e 5f61 7267 7328 7365 6c66  _stdin_args(self
+0000e620: 293a 0a20 2020 2022 2222 5465 7374 7320  ):.    """Tests 
+0000e630: 6370 2077 6974 6820 7468 6520 2d49 206f  cp with the -I o
+0000e640: 7074 696f 6e2e 2222 220a 2020 2020 746d  ption.""".    tm
+0000e650: 7064 6972 203d 2073 656c 662e 4372 6561  pdir = self.Crea
+0000e660: 7465 5465 6d70 4469 7228 290a 2020 2020  teTempDir().    
+0000e670: 6670 6174 6831 203d 2073 656c 662e 4372  fpath1 = self.Cr
+0000e680: 6561 7465 5465 6d70 4669 6c65 2874 6d70  eateTempFile(tmp
+0000e690: 6469 723d 746d 7064 6972 2c20 636f 6e74  dir=tmpdir, cont
+0000e6a0: 656e 7473 3d62 2764 6174 6131 2729 0a20  ents=b'data1'). 
+0000e6b0: 2020 2066 7061 7468 3220 3d20 7365 6c66     fpath2 = self
+0000e6c0: 2e43 7265 6174 6554 656d 7046 696c 6528  .CreateTempFile(
+0000e6d0: 746d 7064 6972 3d74 6d70 6469 722c 2063  tmpdir=tmpdir, c
+0000e6e0: 6f6e 7465 6e74 733d 6227 6461 7461 3227  ontents=b'data2'
+0000e6f0: 290a 2020 2020 6275 636b 6574 5f75 7269  ).    bucket_uri
+0000e700: 203d 2073 656c 662e 4372 6561 7465 4275   = self.CreateBu
+0000e710: 636b 6574 2829 0a20 2020 2073 656c 662e  cket().    self.
+0000e720: 5275 6e47 7355 7469 6c28 5b27 6370 272c  RunGsUtil(['cp',
+0000e730: 2027 2d49 272c 2073 7572 6928 6275 636b   '-I', suri(buck
+0000e740: 6574 5f75 7269 295d 2c0a 2020 2020 2020  et_uri)],.      
+0000e750: 2020 2020 2020 2020 2020 2020 2073 7464               std
+0000e760: 696e 3d27 5c6e 272e 6a6f 696e 2828 6670  in='\n'.join((fp
+0000e770: 6174 6831 2c20 6670 6174 6832 2929 290a  ath1, fpath2))).
+0000e780: 0a20 2020 2023 2055 7365 2040 5265 7472  .    # Use @Retr
+0000e790: 7920 6173 2068 6564 6765 2061 6761 696e  y as hedge again
+0000e7a0: 7374 2062 7563 6b65 7420 6c69 7374 696e  st bucket listin
+0000e7b0: 6720 6576 656e 7475 616c 2063 6f6e 7369  g eventual consi
+0000e7c0: 7374 656e 6379 2e0a 2020 2020 4052 6574  stency..    @Ret
+0000e7d0: 7279 2841 7373 6572 7469 6f6e 4572 726f  ry(AssertionErro
+0000e7e0: 722c 2074 7269 6573 3d33 2c20 7469 6d65  r, tries=3, time
+0000e7f0: 6f75 745f 7365 6373 3d31 290a 2020 2020  out_secs=1).    
+0000e800: 6465 6620 5f43 6865 636b 3128 293a 0a20  def _Check1():. 
+0000e810: 2020 2020 2073 7464 6f75 7420 3d20 7365       stdout = se
+0000e820: 6c66 2e52 756e 4773 5574 696c 285b 276c  lf.RunGsUtil(['l
+0000e830: 7327 2c20 7375 7269 2862 7563 6b65 745f  s', suri(bucket_
+0000e840: 7572 6929 5d2c 2072 6574 7572 6e5f 7374  uri)], return_st
+0000e850: 646f 7574 3d54 7275 6529 0a20 2020 2020  dout=True).     
+0000e860: 2073 656c 662e 6173 7365 7274 496e 286f   self.assertIn(o
+0000e870: 732e 7061 7468 2e62 6173 656e 616d 6528  s.path.basename(
+0000e880: 6670 6174 6831 292c 2073 7464 6f75 7429  fpath1), stdout)
+0000e890: 0a20 2020 2020 2073 656c 662e 6173 7365  .      self.asse
+0000e8a0: 7274 496e 286f 732e 7061 7468 2e62 6173  rtIn(os.path.bas
+0000e8b0: 656e 616d 6528 6670 6174 6832 292c 2073  ename(fpath2), s
+0000e8c0: 7464 6f75 7429 0a20 2020 2020 2073 656c  tdout).      sel
+0000e8d0: 662e 6173 7365 7274 4e75 6d4c 696e 6573  f.assertNumLines
+0000e8e0: 2873 7464 6f75 742c 2032 290a 0a20 2020  (stdout, 2)..   
+0000e8f0: 205f 4368 6563 6b31 2829 0a0a 2020 6465   _Check1()..  de
+0000e900: 6620 7465 7374 5f63 726f 7373 5f73 746f  f test_cross_sto
+0000e910: 7261 6765 5f63 6c61 7373 5f63 6c6f 7564  rage_class_cloud
+0000e920: 5f63 7028 7365 6c66 293a 0a20 2020 2062  _cp(self):.    b
+0000e930: 7563 6b65 7431 5f75 7269 203d 2073 656c  ucket1_uri = sel
+0000e940: 662e 4372 6561 7465 4275 636b 6574 2873  f.CreateBucket(s
+0000e950: 746f 7261 6765 5f63 6c61 7373 3d27 7374  torage_class='st
+0000e960: 616e 6461 7264 2729 0a20 2020 2062 7563  andard').    buc
+0000e970: 6b65 7432 5f75 7269 203d 2073 656c 662e  ket2_uri = self.
+0000e980: 4372 6561 7465 4275 636b 6574 280a 2020  CreateBucket(.  
+0000e990: 2020 2020 2020 7374 6f72 6167 655f 636c        storage_cl
+0000e9a0: 6173 733d 2764 7572 6162 6c65 5f72 6564  ass='durable_red
+0000e9b0: 7563 6564 5f61 7661 696c 6162 696c 6974  uced_availabilit
+0000e9c0: 7927 290a 2020 2020 6b65 795f 7572 6920  y').    key_uri 
+0000e9d0: 3d20 7365 6c66 2e43 7265 6174 654f 626a  = self.CreateObj
+0000e9e0: 6563 7428 6275 636b 6574 5f75 7269 3d62  ect(bucket_uri=b
+0000e9f0: 7563 6b65 7431 5f75 7269 2c20 636f 6e74  ucket1_uri, cont
+0000ea00: 656e 7473 3d62 2766 6f6f 2729 0a20 2020  ents=b'foo').   
+0000ea10: 2023 2053 6572 7665 7220 6e6f 7720 616c   # Server now al
+0000ea20: 6c6f 7773 2063 6f70 792d 696e 2d74 6865  lows copy-in-the
+0000ea30: 2d63 6c6f 7564 2061 6372 6f73 7320 7374  -cloud across st
+0000ea40: 6f72 6167 6520 636c 6173 7365 732e 0a20  orage classes.. 
+0000ea50: 2020 2073 656c 662e 5275 6e47 7355 7469     self.RunGsUti
+0000ea60: 6c28 5b27 6370 272c 2073 7572 6928 6b65  l(['cp', suri(ke
+0000ea70: 795f 7572 6929 2c20 7375 7269 2862 7563  y_uri), suri(buc
+0000ea80: 6b65 7432 5f75 7269 295d 290a 0a20 2040  ket2_uri)])..  @
+0000ea90: 756e 6974 7465 7374 2e73 6b69 7055 6e6c  unittest.skipUnl
+0000eaa0: 6573 7328 4841 535f 5333 5f43 5245 4453  ess(HAS_S3_CREDS
+0000eab0: 2c20 2754 6573 7420 7265 7175 6972 6573  , 'Test requires
+0000eac0: 2062 6f74 6820 5333 2061 6e64 2047 5320   both S3 and GS 
+0000ead0: 6372 6564 656e 7469 616c 7327 290a 2020  credentials').  
+0000eae0: 6465 6620 7465 7374 5f63 726f 7373 5f70  def test_cross_p
+0000eaf0: 726f 7669 6465 725f 6370 2873 656c 6629  rovider_cp(self)
+0000eb00: 3a0a 2020 2020 7333 5f62 7563 6b65 7420  :.    s3_bucket 
+0000eb10: 3d20 7365 6c66 2e43 7265 6174 6542 7563  = self.CreateBuc
+0000eb20: 6b65 7428 7072 6f76 6964 6572 3d27 7333  ket(provider='s3
+0000eb30: 2729 0a20 2020 2067 735f 6275 636b 6574  ').    gs_bucket
+0000eb40: 203d 2073 656c 662e 4372 6561 7465 4275   = self.CreateBu
+0000eb50: 636b 6574 2870 726f 7669 6465 723d 2767  cket(provider='g
+0000eb60: 7327 290a 2020 2020 7333 5f6b 6579 203d  s').    s3_key =
+0000eb70: 2073 656c 662e 4372 6561 7465 4f62 6a65   self.CreateObje
+0000eb80: 6374 2862 7563 6b65 745f 7572 693d 7333  ct(bucket_uri=s3
+0000eb90: 5f62 7563 6b65 742c 2063 6f6e 7465 6e74  _bucket, content
+0000eba0: 733d 6227 666f 6f27 290a 2020 2020 6773  s=b'foo').    gs
+0000ebb0: 5f6b 6579 203d 2073 656c 662e 4372 6561  _key = self.Crea
+0000ebc0: 7465 4f62 6a65 6374 2862 7563 6b65 745f  teObject(bucket_
+0000ebd0: 7572 693d 6773 5f62 7563 6b65 742c 2063  uri=gs_bucket, c
+0000ebe0: 6f6e 7465 6e74 733d 6227 6261 7227 290a  ontents=b'bar').
+0000ebf0: 2020 2020 7365 6c66 2e52 756e 4773 5574      self.RunGsUt
+0000ec00: 696c 285b 2763 7027 2c20 7375 7269 2873  il(['cp', suri(s
+0000ec10: 335f 6b65 7929 2c20 7375 7269 2867 735f  3_key), suri(gs_
+0000ec20: 6275 636b 6574 295d 290a 2020 2020 7365  bucket)]).    se
+0000ec30: 6c66 2e52 756e 4773 5574 696c 285b 2763  lf.RunGsUtil(['c
+0000ec40: 7027 2c20 7375 7269 2867 735f 6b65 7929  p', suri(gs_key)
+0000ec50: 2c20 7375 7269 2873 335f 6275 636b 6574  , suri(s3_bucket
+0000ec60: 295d 290a 0a20 2040 756e 6974 7465 7374  )])..  @unittest
+0000ec70: 2e73 6b69 7055 6e6c 6573 7328 4841 535f  .skipUnless(HAS_
+0000ec80: 5333 5f43 5245 4453 2c20 2754 6573 7420  S3_CREDS, 'Test 
+0000ec90: 7265 7175 6972 6573 2062 6f74 6820 5333  requires both S3
+0000eca0: 2061 6e64 2047 5320 6372 6564 656e 7469   and GS credenti
+0000ecb0: 616c 7327 290a 2020 4075 6e69 7474 6573  als').  @unittes
+0000ecc0: 742e 736b 6970 2827 5468 6973 2074 6573  t.skip('This tes
+0000ecd0: 7420 7065 7266 6f72 6d73 2061 206c 6172  t performs a lar
+0000ece0: 6765 2063 6f70 7920 6275 7420 7265 6d61  ge copy but rema
+0000ecf0: 696e 7320 6865 7265 2066 6f72 2027 0a20  ins here for '. 
+0000ed00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ed10: 2764 6562 7567 6769 6e67 2070 7572 706f  'debugging purpo
+0000ed20: 7365 732e 2729 0a20 2064 6566 2074 6573  ses.').  def tes
+0000ed30: 745f 6372 6f73 735f 7072 6f76 6964 6572  t_cross_provider
+0000ed40: 5f6c 6172 6765 5f63 7028 7365 6c66 293a  _large_cp(self):
+0000ed50: 0a20 2020 2073 335f 6275 636b 6574 203d  .    s3_bucket =
+0000ed60: 2073 656c 662e 4372 6561 7465 4275 636b   self.CreateBuck
+0000ed70: 6574 2870 726f 7669 6465 723d 2773 3327  et(provider='s3'
+0000ed80: 290a 2020 2020 6773 5f62 7563 6b65 7420  ).    gs_bucket 
+0000ed90: 3d20 7365 6c66 2e43 7265 6174 6542 7563  = self.CreateBuc
+0000eda0: 6b65 7428 7072 6f76 6964 6572 3d27 6773  ket(provider='gs
+0000edb0: 2729 0a20 2020 2073 335f 6b65 7920 3d20  ').    s3_key = 
+0000edc0: 7365 6c66 2e43 7265 6174 654f 626a 6563  self.CreateObjec
+0000edd0: 7428 6275 636b 6574 5f75 7269 3d73 335f  t(bucket_uri=s3_
+0000ede0: 6275 636b 6574 2c0a 2020 2020 2020 2020  bucket,.        
+0000edf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ee00: 2020 2020 2020 2063 6f6e 7465 6e74 733d         contents=
+0000ee10: 6227 6627 202a 2031 3032 3420 2a20 3130  b'f' * 1024 * 10
+0000ee20: 3234 290a 2020 2020 6773 5f6b 6579 203d  24).    gs_key =
+0000ee30: 2073 656c 662e 4372 6561 7465 4f62 6a65   self.CreateObje
+0000ee40: 6374 2862 7563 6b65 745f 7572 693d 6773  ct(bucket_uri=gs
+0000ee50: 5f62 7563 6b65 742c 0a20 2020 2020 2020  _bucket,.       
 0000ee60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ee70: 2020 2020 2072 6574 7572 6e5f 7374 6465       return_stde
-0000ee80: 7272 3d54 7275 6529 0a20 2020 2020 2023  rr=True).      #
-0000ee90: 2053 686f 756c 6420 6861 7665 2074 6872   Should have thr
-0000eea0: 6565 2065 7863 6570 7469 6f6e 2074 7261  ee exception tra
-0000eeb0: 6365 733b 206f 6e65 2066 726f 6d20 7468  ces; one from th
-0000eec0: 6520 646f 776e 6c6f 6164 2074 6872 6561  e download threa
-0000eed0: 6420 616e 640a 2020 2020 2020 2320 7477  d and.      # tw
-0000eee0: 6f20 6672 6f6d 2074 6865 2075 706c 6f61  o from the uploa
-0000eef0: 6420 7468 7265 6164 2028 6578 7065 6374  d thread (expect
-0000ef00: 696f 6e20 6d65 7373 6167 6520 6973 2072  ion message is r
-0000ef10: 6570 6561 7465 6420 696e 206d 6169 6e27  epeated in main'
-0000ef20: 730a 2020 2020 2020 2320 5f4f 7574 7075  s.      # _Outpu
-0000ef30: 7441 6e64 4578 6974 292e 0a20 2020 2020  tAndExit)..     
-0000ef40: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-0000ef50: 6c28 0a20 2020 2020 2020 2020 2073 7464  l(.          std
-0000ef60: 6572 722e 636f 756e 7428 0a20 2020 2020  err.count(.     
-0000ef70: 2020 2020 2020 2020 2027 5265 7375 6d61           'Resuma
-0000ef80: 626c 6544 6f77 6e6c 6f61 6445 7863 6570  bleDownloadExcep
-0000ef90: 7469 6f6e 3a20 4172 7469 6669 6361 6c6c  tion: Artificall
-0000efa0: 7920 6861 6c74 696e 6720 646f 776e 6c6f  y halting downlo
-0000efb0: 6164 2729 2c20 3329 0a0a 2020 6465 6620  ad'), 3)..  def 
-0000efc0: 7465 7374 5f73 7472 6561 6d69 6e67 5f67  test_streaming_g
-0000efd0: 7a69 705f 7570 6c6f 6164 2873 656c 6629  zip_upload(self)
-0000efe0: 3a0a 2020 2020 2222 2254 6573 7473 2065  :.    """Tests e
-0000eff0: 7272 6f72 2077 6865 6e20 636f 6d70 7265  rror when compre
-0000f000: 7373 696f 6e20 666c 6167 2069 7320 7265  ssion flag is re
-0000f010: 7175 6573 7465 6420 6f6e 2061 2073 7472  quested on a str
-0000f020: 6561 6d69 6e67 2073 6f75 7263 652e 2222  eaming source.""
-0000f030: 220a 2020 2020 6275 636b 6574 5f75 7269  ".    bucket_uri
-0000f040: 203d 2073 656c 662e 4372 6561 7465 4275   = self.CreateBu
-0000f050: 636b 6574 2829 0a20 2020 2073 7464 6572  cket().    stder
-0000f060: 7220 3d20 7365 6c66 2e52 756e 4773 5574  r = self.RunGsUt
-0000f070: 696c 280a 2020 2020 2020 2020 5b27 6370  il(.        ['cp
-0000f080: 272c 2027 2d5a 272c 2027 2d27 2c20 7375  ', '-Z', '-', su
-0000f090: 7269 2862 7563 6b65 745f 7572 692c 2027  ri(bucket_uri, '
-0000f0a0: 666f 6f27 295d 2c0a 2020 2020 2020 2020  foo')],.        
-0000f0b0: 7265 7475 726e 5f73 7464 6572 723d 5472  return_stderr=Tr
-0000f0c0: 7565 2c0a 2020 2020 2020 2020 6578 7065  ue,.        expe
-0000f0d0: 6374 6564 5f73 7461 7475 733d 312c 0a20  cted_status=1,. 
-0000f0e0: 2020 2020 2020 2073 7464 696e 3d27 7374         stdin='st
-0000f0f0: 7265 616d 696e 6720 6461 7461 2729 0a20  reaming data'). 
-0000f100: 2020 2073 656c 662e 6173 7365 7274 496e     self.assertIn
-0000f110: 280a 2020 2020 2020 2020 2767 7a69 7020  (.        'gzip 
-0000f120: 636f 6d70 7265 7373 696f 6e20 6973 206e  compression is n
-0000f130: 6f74 2063 7572 7265 6e74 6c79 2073 7570  ot currently sup
-0000f140: 706f 7274 6564 206f 6e20 7374 7265 616d  ported on stream
-0000f150: 696e 6720 7570 6c6f 6164 7327 2c0a 2020  ing uploads',.  
-0000f160: 2020 2020 2020 7374 6465 7272 290a 0a20        stderr).. 
-0000f170: 2064 6566 2074 6573 745f 7365 656b 5f61   def test_seek_a
-0000f180: 6865 6164 5f75 706c 6f61 645f 6370 2873  head_upload_cp(s
-0000f190: 656c 6629 3a0a 2020 2020 2222 2254 6573  elf):.    """Tes
-0000f1a0: 7473 2074 6861 7420 7468 6520 7365 656b  ts that the seek
-0000f1b0: 2d61 6865 6164 2069 7465 7261 746f 7220  -ahead iterator 
-0000f1c0: 6573 7469 6d61 7465 7320 746f 7461 6c20  estimates total 
-0000f1d0: 7570 6c6f 6164 2077 6f72 6b2e 2222 220a  upload work.""".
-0000f1e0: 2020 2020 746d 7064 6972 203d 2073 656c      tmpdir = sel
-0000f1f0: 662e 4372 6561 7465 5465 6d70 4469 7228  f.CreateTempDir(
-0000f200: 7465 7374 5f66 696c 6573 3d33 290a 2020  test_files=3).  
-0000f210: 2020 6275 636b 6574 5f75 7269 203d 2073    bucket_uri = s
-0000f220: 656c 662e 4372 6561 7465 4275 636b 6574  elf.CreateBucket
-0000f230: 2829 0a0a 2020 2020 7769 7468 2053 6574  ()..    with Set
-0000f240: 426f 746f 436f 6e66 6967 466f 7254 6573  BotoConfigForTes
-0000f250: 7428 5b28 2747 5355 7469 6c27 2c20 2774  t([('GSUtil', 't
-0000f260: 6173 6b5f 6573 7469 6d61 7469 6f6e 5f74  ask_estimation_t
-0000f270: 6872 6573 686f 6c64 272c 2027 3127 292c  hreshold', '1'),
-0000f280: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000f290: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f2a0: 2827 4753 5574 696c 272c 2027 7461 736b  ('GSUtil', 'task
-0000f2b0: 5f65 7374 696d 6174 696f 6e5f 666f 7263  _estimation_forc
-0000f2c0: 6527 2c20 2754 7275 6527 295d 293a 0a20  e', 'True')]):. 
-0000f2d0: 2020 2020 2073 7464 6572 7220 3d20 7365       stderr = se
-0000f2e0: 6c66 2e52 756e 4773 5574 696c 280a 2020  lf.RunGsUtil(.  
-0000f2f0: 2020 2020 2020 2020 5b27 2d6d 272c 2027          ['-m', '
-0000f300: 6370 272c 2027 2d72 272c 2074 6d70 6469  cp', '-r', tmpdi
-0000f310: 722c 2073 7572 6928 6275 636b 6574 5f75  r, suri(bucket_u
-0000f320: 7269 295d 2c20 7265 7475 726e 5f73 7464  ri)], return_std
-0000f330: 6572 723d 5472 7565 290a 2020 2020 2020  err=True).      
-0000f340: 7365 6c66 2e61 7373 6572 7449 6e28 0a20  self.assertIn(. 
-0000f350: 2020 2020 2020 2020 2027 4573 7469 6d61           'Estima
-0000f360: 7465 6420 776f 726b 2066 6f72 2074 6869  ted work for thi
-0000f370: 7320 636f 6d6d 616e 643a 206f 626a 6563  s command: objec
-0000f380: 7473 3a20 332c 2074 6f74 616c 2073 697a  ts: 3, total siz
-0000f390: 653a 2031 3827 2c20 7374 6465 7272 290a  e: 18', stderr).
-0000f3a0: 0a20 2020 2077 6974 6820 5365 7442 6f74  .    with SetBot
-0000f3b0: 6f43 6f6e 6669 6746 6f72 5465 7374 285b  oConfigForTest([
-0000f3c0: 2827 4753 5574 696c 272c 2027 7461 736b  ('GSUtil', 'task
-0000f3d0: 5f65 7374 696d 6174 696f 6e5f 7468 7265  _estimation_thre
-0000f3e0: 7368 6f6c 6427 2c20 2730 2729 2c0a 2020  shold', '0'),.  
-0000f3f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f400: 2020 2020 2020 2020 2020 2020 2028 2747               ('G
-0000f410: 5355 7469 6c27 2c20 2774 6173 6b5f 6573  SUtil', 'task_es
-0000f420: 7469 6d61 7469 6f6e 5f66 6f72 6365 272c  timation_force',
-0000f430: 2027 5472 7565 2729 5d29 3a0a 2020 2020   'True')]):.    
-0000f440: 2020 7374 6465 7272 203d 2073 656c 662e    stderr = self.
-0000f450: 5275 6e47 7355 7469 6c28 0a20 2020 2020  RunGsUtil(.     
-0000f460: 2020 2020 205b 272d 6d27 2c20 2763 7027       ['-m', 'cp'
-0000f470: 2c20 272d 7227 2c20 746d 7064 6972 2c20  , '-r', tmpdir, 
-0000f480: 7375 7269 2862 7563 6b65 745f 7572 6929  suri(bucket_uri)
-0000f490: 5d2c 2072 6574 7572 6e5f 7374 6465 7272  ], return_stderr
-0000f4a0: 3d54 7275 6529 0a20 2020 2020 2073 656c  =True).      sel
-0000f4b0: 662e 6173 7365 7274 4e6f 7449 6e28 2745  f.assertNotIn('E
-0000f4c0: 7374 696d 6174 6564 2077 6f72 6b27 2c20  stimated work', 
-0000f4d0: 7374 6465 7272 290a 0a20 2064 6566 2074  stderr)..  def t
-0000f4e0: 6573 745f 7365 656b 5f61 6865 6164 5f64  est_seek_ahead_d
-0000f4f0: 6f77 6e6c 6f61 645f 6370 2873 656c 6629  ownload_cp(self)
-0000f500: 3a0a 2020 2020 746d 7064 6972 203d 2073  :.    tmpdir = s
-0000f510: 656c 662e 4372 6561 7465 5465 6d70 4469  elf.CreateTempDi
-0000f520: 7228 290a 2020 2020 6275 636b 6574 5f75  r().    bucket_u
-0000f530: 7269 203d 2073 656c 662e 4372 6561 7465  ri = self.Create
-0000f540: 4275 636b 6574 2874 6573 745f 6f62 6a65  Bucket(test_obje
-0000f550: 6374 733d 3329 0a20 2020 2073 656c 662e  cts=3).    self.
-0000f560: 4173 7365 7274 4e4f 626a 6563 7473 496e  AssertNObjectsIn
-0000f570: 4275 636b 6574 2862 7563 6b65 745f 7572  Bucket(bucket_ur
-0000f580: 692c 2033 290a 0a20 2020 2077 6974 6820  i, 3)..    with 
-0000f590: 5365 7442 6f74 6f43 6f6e 6669 6746 6f72  SetBotoConfigFor
-0000f5a0: 5465 7374 285b 2827 4753 5574 696c 272c  Test([('GSUtil',
-0000f5b0: 2027 7461 736b 5f65 7374 696d 6174 696f   'task_estimatio
-0000f5c0: 6e5f 7468 7265 7368 6f6c 6427 2c20 2731  n_threshold', '1
-0000f5d0: 2729 2c0a 2020 2020 2020 2020 2020 2020  '),.            
-0000f5e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f5f0: 2020 2028 2747 5355 7469 6c27 2c20 2774     ('GSUtil', 't
-0000f600: 6173 6b5f 6573 7469 6d61 7469 6f6e 5f66  ask_estimation_f
-0000f610: 6f72 6365 272c 2027 5472 7565 2729 5d29  orce', 'True')])
-0000f620: 3a0a 2020 2020 2020 7374 6465 7272 203d  :.      stderr =
-0000f630: 2073 656c 662e 5275 6e47 7355 7469 6c28   self.RunGsUtil(
-0000f640: 0a20 2020 2020 2020 2020 205b 272d 6d27  .          ['-m'
-0000f650: 2c20 2763 7027 2c20 272d 7227 2c20 7375  , 'cp', '-r', su
-0000f660: 7269 2862 7563 6b65 745f 7572 6929 2c20  ri(bucket_uri), 
-0000f670: 746d 7064 6972 5d2c 2072 6574 7572 6e5f  tmpdir], return_
-0000f680: 7374 6465 7272 3d54 7275 6529 0a20 2020  stderr=True).   
-0000f690: 2020 2073 656c 662e 6173 7365 7274 496e     self.assertIn
-0000f6a0: 280a 2020 2020 2020 2020 2020 2745 7374  (.          'Est
-0000f6b0: 696d 6174 6564 2077 6f72 6b20 666f 7220  imated work for 
-0000f6c0: 7468 6973 2063 6f6d 6d61 6e64 3a20 6f62  this command: ob
-0000f6d0: 6a65 6374 733a 2033 2c20 746f 7461 6c20  jects: 3, total 
-0000f6e0: 7369 7a65 3a20 3138 272c 2073 7464 6572  size: 18', stder
-0000f6f0: 7229 0a0a 2020 2020 7769 7468 2053 6574  r)..    with Set
-0000f700: 426f 746f 436f 6e66 6967 466f 7254 6573  BotoConfigForTes
-0000f710: 7428 5b28 2747 5355 7469 6c27 2c20 2774  t([('GSUtil', 't
-0000f720: 6173 6b5f 6573 7469 6d61 7469 6f6e 5f74  ask_estimation_t
-0000f730: 6872 6573 686f 6c64 272c 2027 3027 292c  hreshold', '0'),
-0000f740: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000f750: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f760: 2827 4753 5574 696c 272c 2027 7461 736b  ('GSUtil', 'task
-0000f770: 5f65 7374 696d 6174 696f 6e5f 666f 7263  _estimation_forc
-0000f780: 6527 2c20 2754 7275 6527 295d 293a 0a20  e', 'True')]):. 
-0000f790: 2020 2020 2073 7464 6572 7220 3d20 7365       stderr = se
-0000f7a0: 6c66 2e52 756e 4773 5574 696c 280a 2020  lf.RunGsUtil(.  
-0000f7b0: 2020 2020 2020 2020 5b27 2d6d 272c 2027          ['-m', '
-0000f7c0: 6370 272c 2027 2d72 272c 2073 7572 6928  cp', '-r', suri(
-0000f7d0: 6275 636b 6574 5f75 7269 292c 2074 6d70  bucket_uri), tmp
-0000f7e0: 6469 725d 2c20 7265 7475 726e 5f73 7464  dir], return_std
-0000f7f0: 6572 723d 5472 7565 290a 2020 2020 2020  err=True).      
-0000f800: 7365 6c66 2e61 7373 6572 744e 6f74 496e  self.assertNotIn
-0000f810: 2827 4573 7469 6d61 7465 6420 776f 726b  ('Estimated work
-0000f820: 272c 2073 7464 6572 7229 0a0a 2020 6465  ', stderr)..  de
-0000f830: 6620 7465 7374 5f63 616e 6e65 645f 6163  f test_canned_ac
-0000f840: 6c5f 6370 2873 656c 6629 3a0a 2020 2020  l_cp(self):.    
-0000f850: 2222 2254 6573 7473 2063 6f70 7969 6e67  """Tests copying
-0000f860: 2077 6974 6820 6120 6361 6e6e 6564 2041   with a canned A
-0000f870: 434c 2e22 2222 0a20 2020 2062 7563 6b65  CL.""".    bucke
-0000f880: 7431 5f75 7269 203d 2073 656c 662e 4372  t1_uri = self.Cr
-0000f890: 6561 7465 4275 636b 6574 2829 0a20 2020  eateBucket().   
-0000f8a0: 2062 7563 6b65 7432 5f75 7269 203d 2073   bucket2_uri = s
-0000f8b0: 656c 662e 4372 6561 7465 4275 636b 6574  elf.CreateBucket
-0000f8c0: 2829 0a20 2020 206b 6579 5f75 7269 203d  ().    key_uri =
-0000f8d0: 2073 656c 662e 4372 6561 7465 4f62 6a65   self.CreateObje
-0000f8e0: 6374 2862 7563 6b65 745f 7572 693d 6275  ct(bucket_uri=bu
-0000f8f0: 636b 6574 315f 7572 692c 2063 6f6e 7465  cket1_uri, conte
-0000f900: 6e74 733d 6227 666f 6f27 290a 2020 2020  nts=b'foo').    
-0000f910: 7365 6c66 2e52 756e 4773 5574 696c 280a  self.RunGsUtil(.
-0000f920: 2020 2020 2020 2020 5b27 6370 272c 2027          ['cp', '
-0000f930: 2d61 272c 2027 7075 626c 6963 2d72 6561  -a', 'public-rea
-0000f940: 6427 2c0a 2020 2020 2020 2020 2073 7572  d',.         sur
-0000f950: 6928 6b65 795f 7572 6929 2c0a 2020 2020  i(key_uri),.    
-0000f960: 2020 2020 2073 7572 6928 6275 636b 6574       suri(bucket
-0000f970: 325f 7572 6929 5d29 0a20 2020 2023 2053  2_uri)]).    # S
-0000f980: 6574 2070 7562 6c69 632d 7265 6164 206f  et public-read o
-0000f990: 6e20 7468 6520 6f72 6967 696e 616c 206b  n the original k
-0000f9a0: 6579 2061 6674 6572 2074 6865 2063 6f70  ey after the cop
-0000f9b0: 7920 736f 2077 6520 6361 6e20 636f 6d70  y so we can comp
-0000f9c0: 6172 650a 2020 2020 2320 7468 6520 4143  are.    # the AC
-0000f9d0: 4c73 2e0a 2020 2020 7365 6c66 2e52 756e  Ls..    self.Run
-0000f9e0: 4773 5574 696c 285b 2761 636c 272c 2027  GsUtil(['acl', '
-0000f9f0: 7365 7427 2c20 2770 7562 6c69 632d 7265  set', 'public-re
-0000fa00: 6164 272c 2073 7572 6928 6b65 795f 7572  ad', suri(key_ur
-0000fa10: 6929 5d29 0a20 2020 2070 7562 6c69 635f  i)]).    public_
-0000fa20: 7265 6164 5f61 636c 203d 2073 656c 662e  read_acl = self.
-0000fa30: 5275 6e47 7355 7469 6c28 5b27 6163 6c27  RunGsUtil(['acl'
-0000fa40: 2c20 2767 6574 272c 2073 7572 6928 6b65  , 'get', suri(ke
-0000fa50: 795f 7572 6929 5d2c 0a20 2020 2020 2020  y_uri)],.       
-0000fa60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fa70: 2020 2020 2020 2020 2020 2020 2020 7265                re
-0000fa80: 7475 726e 5f73 7464 6f75 743d 5472 7565  turn_stdout=True
-0000fa90: 290a 0a20 2020 2040 5265 7472 7928 4173  )..    @Retry(As
-0000faa0: 7365 7274 696f 6e45 7272 6f72 2c20 7472  sertionError, tr
-0000fab0: 6965 733d 332c 2074 696d 656f 7574 5f73  ies=3, timeout_s
-0000fac0: 6563 733d 3129 0a20 2020 2064 6566 205f  ecs=1).    def _
-0000fad0: 4368 6563 6b28 293a 0a20 2020 2020 2075  Check():.      u
-0000fae0: 7269 203d 2073 7572 6928 6275 636b 6574  ri = suri(bucket
-0000faf0: 325f 7572 692c 206b 6579 5f75 7269 2e6f  2_uri, key_uri.o
-0000fb00: 626a 6563 745f 6e61 6d65 290a 2020 2020  bject_name).    
-0000fb10: 2020 6e65 775f 6163 6c5f 6a73 6f6e 203d    new_acl_json =
-0000fb20: 2073 656c 662e 5275 6e47 7355 7469 6c28   self.RunGsUtil(
-0000fb30: 5b27 6163 6c27 2c20 2767 6574 272c 2075  ['acl', 'get', u
-0000fb40: 7269 5d2c 2072 6574 7572 6e5f 7374 646f  ri], return_stdo
-0000fb50: 7574 3d54 7275 6529 0a20 2020 2020 2073  ut=True).      s
-0000fb60: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-0000fb70: 7075 626c 6963 5f72 6561 645f 6163 6c2c  public_read_acl,
-0000fb80: 206e 6577 5f61 636c 5f6a 736f 6e29 0a0a   new_acl_json)..
-0000fb90: 2020 2020 5f43 6865 636b 2829 0a0a 2020      _Check()..  
-0000fba0: 4053 6571 7565 6e74 6961 6c41 6e64 5061  @SequentialAndPa
-0000fbb0: 7261 6c6c 656c 5472 616e 7366 6572 0a20  rallelTransfer. 
-0000fbc0: 2064 6566 2074 6573 745f 6361 6e6e 6564   def test_canned
-0000fbd0: 5f61 636c 5f75 706c 6f61 6428 7365 6c66  _acl_upload(self
-0000fbe0: 293a 0a20 2020 2022 2222 5465 7374 7320  ):.    """Tests 
-0000fbf0: 7570 6c6f 6164 696e 6720 6120 6669 6c65  uploading a file
-0000fc00: 2077 6974 6820 6120 6361 6e6e 6564 2041   with a canned A
-0000fc10: 434c 2e22 2222 0a20 2020 2062 7563 6b65  CL.""".    bucke
-0000fc20: 7431 5f75 7269 203d 2073 656c 662e 4372  t1_uri = self.Cr
-0000fc30: 6561 7465 4275 636b 6574 2829 0a20 2020  eateBucket().   
-0000fc40: 206b 6579 5f75 7269 203d 2073 656c 662e   key_uri = self.
-0000fc50: 4372 6561 7465 4f62 6a65 6374 2862 7563  CreateObject(buc
-0000fc60: 6b65 745f 7572 693d 6275 636b 6574 315f  ket_uri=bucket1_
-0000fc70: 7572 692c 2063 6f6e 7465 6e74 733d 6227  uri, contents=b'
-0000fc80: 666f 6f27 290a 2020 2020 2320 5365 7420  foo').    # Set 
-0000fc90: 7075 626c 6963 2d72 6561 6420 6f6e 2074  public-read on t
-0000fca0: 6865 206f 626a 6563 7420 736f 2077 6520  he object so we 
-0000fcb0: 6361 6e20 636f 6d70 6172 6520 7468 6520  can compare the 
-0000fcc0: 4143 4c73 2e0a 2020 2020 7365 6c66 2e52  ACLs..    self.R
-0000fcd0: 756e 4773 5574 696c 285b 2761 636c 272c  unGsUtil(['acl',
-0000fce0: 2027 7365 7427 2c20 2770 7562 6c69 632d   'set', 'public-
-0000fcf0: 7265 6164 272c 2073 7572 6928 6b65 795f  read', suri(key_
-0000fd00: 7572 6929 5d29 0a20 2020 2070 7562 6c69  uri)]).    publi
-0000fd10: 635f 7265 6164 5f61 636c 203d 2073 656c  c_read_acl = sel
-0000fd20: 662e 5275 6e47 7355 7469 6c28 5b27 6163  f.RunGsUtil(['ac
-0000fd30: 6c27 2c20 2767 6574 272c 2073 7572 6928  l', 'get', suri(
-0000fd40: 6b65 795f 7572 6929 5d2c 0a20 2020 2020  key_uri)],.     
-0000fd50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fd60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fd70: 7265 7475 726e 5f73 7464 6f75 743d 5472  return_stdout=Tr
-0000fd80: 7565 290a 0a20 2020 2066 696c 655f 6e61  ue)..    file_na
-0000fd90: 6d65 203d 2027 6261 7227 0a20 2020 2066  me = 'bar'.    f
-0000fda0: 7061 7468 203d 2073 656c 662e 4372 6561  path = self.Crea
-0000fdb0: 7465 5465 6d70 4669 6c65 2866 696c 655f  teTempFile(file_
-0000fdc0: 6e61 6d65 3d66 696c 655f 6e61 6d65 2c20  name=file_name, 
-0000fdd0: 636f 6e74 656e 7473 3d62 2766 6f6f 2729  contents=b'foo')
-0000fde0: 0a20 2020 2073 656c 662e 5275 6e47 7355  .    self.RunGsU
-0000fdf0: 7469 6c28 5b27 6370 272c 2027 2d61 272c  til(['cp', '-a',
-0000fe00: 2027 7075 626c 6963 2d72 6561 6427 2c20   'public-read', 
-0000fe10: 6670 6174 682c 2073 7572 6928 6275 636b  fpath, suri(buck
-0000fe20: 6574 315f 7572 6929 5d29 0a20 2020 206e  et1_uri)]).    n
-0000fe30: 6577 5f61 636c 5f6a 736f 6e20 3d20 7365  ew_acl_json = se
-0000fe40: 6c66 2e52 756e 4773 5574 696c 280a 2020  lf.RunGsUtil(.  
-0000fe50: 2020 2020 2020 5b27 6163 6c27 2c20 2767        ['acl', 'g
-0000fe60: 6574 272c 2073 7572 6928 6275 636b 6574  et', suri(bucket
-0000fe70: 315f 7572 692c 2066 696c 655f 6e61 6d65  1_uri, file_name
-0000fe80: 295d 2c20 7265 7475 726e 5f73 7464 6f75  )], return_stdou
-0000fe90: 743d 5472 7565 290a 2020 2020 7365 6c66  t=True).    self
-0000fea0: 2e61 7373 6572 7445 7175 616c 2870 7562  .assertEqual(pub
-0000feb0: 6c69 635f 7265 6164 5f61 636c 2c20 6e65  lic_read_acl, ne
-0000fec0: 775f 6163 6c5f 6a73 6f6e 290a 0a20 2020  w_acl_json)..   
-0000fed0: 2072 6573 756d 6162 6c65 5f73 697a 6520   resumable_size 
-0000fee0: 3d20 4f4e 455f 4b49 420a 2020 2020 626f  = ONE_KIB.    bo
-0000fef0: 746f 5f63 6f6e 6669 675f 666f 725f 7465  to_config_for_te
-0000ff00: 7374 203d 2028 2747 5355 7469 6c27 2c20  st = ('GSUtil', 
-0000ff10: 2772 6573 756d 6162 6c65 5f74 6872 6573  'resumable_thres
-0000ff20: 686f 6c64 272c 0a20 2020 2020 2020 2020  hold',.         
-0000ff30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ff40: 2020 2073 7472 2872 6573 756d 6162 6c65     str(resumable
-0000ff50: 5f73 697a 6529 290a 2020 2020 7769 7468  _size)).    with
-0000ff60: 2053 6574 426f 746f 436f 6e66 6967 466f   SetBotoConfigFo
-0000ff70: 7254 6573 7428 5b62 6f74 6f5f 636f 6e66  rTest([boto_conf
-0000ff80: 6967 5f66 6f72 5f74 6573 745d 293a 0a20  ig_for_test]):. 
-0000ff90: 2020 2020 2072 6573 756d 6162 6c65 5f66       resumable_f
-0000ffa0: 696c 655f 6e61 6d65 203d 2027 7265 7375  ile_name = 'resu
-0000ffb0: 6d61 626c 655f 6261 7227 0a20 2020 2020  mable_bar'.     
-0000ffc0: 2072 6573 756d 6162 6c65 5f63 6f6e 7465   resumable_conte
-0000ffd0: 6e74 7320 3d20 6f73 2e75 7261 6e64 6f6d  nts = os.urandom
-0000ffe0: 2872 6573 756d 6162 6c65 5f73 697a 6529  (resumable_size)
-0000fff0: 0a20 2020 2020 2072 6573 756d 6162 6c65  .      resumable
-00010000: 5f66 7061 7468 203d 2073 656c 662e 4372  _fpath = self.Cr
-00010010: 6561 7465 5465 6d70 4669 6c65 2866 696c  eateTempFile(fil
-00010020: 655f 6e61 6d65 3d72 6573 756d 6162 6c65  e_name=resumable
-00010030: 5f66 696c 655f 6e61 6d65 2c0a 2020 2020  _file_name,.    
-00010040: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010060: 2020 2020 2020 2020 636f 6e74 656e 7473          contents
-00010070: 3d72 6573 756d 6162 6c65 5f63 6f6e 7465  =resumable_conte
-00010080: 6e74 7329 0a20 2020 2020 2073 656c 662e  nts).      self.
-00010090: 5275 6e47 7355 7469 6c28 0a20 2020 2020  RunGsUtil(.     
-000100a0: 2020 2020 205b 2763 7027 2c20 272d 6127       ['cp', '-a'
-000100b0: 2c20 2770 7562 6c69 632d 7265 6164 272c  , 'public-read',
-000100c0: 2072 6573 756d 6162 6c65 5f66 7061 7468   resumable_fpath
-000100d0: 2c0a 2020 2020 2020 2020 2020 2073 7572  ,.           sur
-000100e0: 6928 6275 636b 6574 315f 7572 6929 5d29  i(bucket1_uri)])
-000100f0: 0a20 2020 2020 206e 6577 5f72 6573 756d  .      new_resum
-00010100: 6162 6c65 5f61 636c 5f6a 736f 6e20 3d20  able_acl_json = 
-00010110: 7365 6c66 2e52 756e 4773 5574 696c 280a  self.RunGsUtil(.
-00010120: 2020 2020 2020 2020 2020 5b27 6163 6c27            ['acl'
-00010130: 2c20 2767 6574 272c 2073 7572 6928 6275  , 'get', suri(bu
-00010140: 636b 6574 315f 7572 692c 2072 6573 756d  cket1_uri, resum
-00010150: 6162 6c65 5f66 696c 655f 6e61 6d65 295d  able_file_name)]
-00010160: 2c0a 2020 2020 2020 2020 2020 7265 7475  ,.          retu
-00010170: 726e 5f73 7464 6f75 743d 5472 7565 290a  rn_stdout=True).
-00010180: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-00010190: 7445 7175 616c 2870 7562 6c69 635f 7265  tEqual(public_re
-000101a0: 6164 5f61 636c 2c20 6e65 775f 7265 7375  ad_acl, new_resu
-000101b0: 6d61 626c 655f 6163 6c5f 6a73 6f6e 290a  mable_acl_json).
-000101c0: 0a20 2064 6566 2074 6573 745f 6370 5f6b  .  def test_cp_k
-000101d0: 6579 5f74 6f5f 6c6f 6361 6c5f 7374 7265  ey_to_local_stre
-000101e0: 616d 2873 656c 6629 3a0a 2020 2020 6275  am(self):.    bu
-000101f0: 636b 6574 5f75 7269 203d 2073 656c 662e  cket_uri = self.
-00010200: 4372 6561 7465 4275 636b 6574 2829 0a20  CreateBucket(). 
-00010210: 2020 2063 6f6e 7465 6e74 7320 3d20 6227     contents = b'
-00010220: 666f 6f27 0a20 2020 206b 6579 5f75 7269  foo'.    key_uri
-00010230: 203d 2073 656c 662e 4372 6561 7465 4f62   = self.CreateOb
-00010240: 6a65 6374 2862 7563 6b65 745f 7572 693d  ject(bucket_uri=
-00010250: 6275 636b 6574 5f75 7269 2c20 636f 6e74  bucket_uri, cont
-00010260: 656e 7473 3d63 6f6e 7465 6e74 7329 0a20  ents=contents). 
-00010270: 2020 2073 7464 6f75 7420 3d20 7365 6c66     stdout = self
-00010280: 2e52 756e 4773 5574 696c 285b 2763 7027  .RunGsUtil(['cp'
-00010290: 2c20 7375 7269 286b 6579 5f75 7269 292c  , suri(key_uri),
-000102a0: 2027 2d27 5d2c 2072 6574 7572 6e5f 7374   '-'], return_st
-000102b0: 646f 7574 3d54 7275 6529 0a20 2020 2073  dout=True).    s
-000102c0: 656c 662e 6173 7365 7274 496e 2863 6f6e  elf.assertIn(con
-000102d0: 7465 6e74 732c 2073 7464 6f75 742e 656e  tents, stdout.en
-000102e0: 636f 6465 2827 6173 6369 6927 2929 0a0a  code('ascii'))..
-000102f0: 2020 6465 6620 7465 7374 5f63 705f 6c6f    def test_cp_lo
-00010300: 6361 6c5f 6669 6c65 5f74 6f5f 6c6f 6361  cal_file_to_loca
-00010310: 6c5f 7374 7265 616d 2873 656c 6629 3a0a  l_stream(self):.
-00010320: 2020 2020 636f 6e74 656e 7473 203d 2062      contents = b
-00010330: 2763 6f6e 7465 6e74 270a 2020 2020 6670  'content'.    fp
-00010340: 6174 6820 3d20 7365 6c66 2e43 7265 6174  ath = self.Creat
-00010350: 6554 656d 7046 696c 6528 636f 6e74 656e  eTempFile(conten
-00010360: 7473 3d63 6f6e 7465 6e74 7329 0a20 2020  ts=contents).   
-00010370: 2073 7464 6f75 7420 3d20 7365 6c66 2e52   stdout = self.R
-00010380: 756e 4773 5574 696c 285b 2763 7027 2c20  unGsUtil(['cp', 
-00010390: 6670 6174 682c 2027 2d27 5d2c 2072 6574  fpath, '-'], ret
-000103a0: 7572 6e5f 7374 646f 7574 3d54 7275 6529  urn_stdout=True)
-000103b0: 0a20 2020 2073 656c 662e 6173 7365 7274  .    self.assert
-000103c0: 496e 2863 6f6e 7465 6e74 732c 2073 7464  In(contents, std
-000103d0: 6f75 742e 656e 636f 6465 2855 5446 3829  out.encode(UTF8)
-000103e0: 290a 0a20 2040 5365 7175 656e 7469 616c  )..  @Sequential
-000103f0: 416e 6450 6172 616c 6c65 6c54 7261 6e73  AndParallelTrans
-00010400: 6665 720a 2020 6465 6620 7465 7374 5f63  fer.  def test_c
-00010410: 705f 7a65 726f 5f62 7974 655f 6669 6c65  p_zero_byte_file
-00010420: 2873 656c 6629 3a0a 2020 2020 6473 745f  (self):.    dst_
-00010430: 6275 636b 6574 5f75 7269 203d 2073 656c  bucket_uri = sel
-00010440: 662e 4372 6561 7465 4275 636b 6574 2829  f.CreateBucket()
-00010450: 0a20 2020 2073 7263 5f64 6972 203d 2073  .    src_dir = s
-00010460: 656c 662e 4372 6561 7465 5465 6d70 4469  elf.CreateTempDi
-00010470: 7228 290a 2020 2020 6670 6174 6820 3d20  r().    fpath = 
-00010480: 6f73 2e70 6174 682e 6a6f 696e 2873 7263  os.path.join(src
-00010490: 5f64 6972 2c20 277a 6572 6f5f 6279 7465  _dir, 'zero_byte
-000104a0: 2729 0a20 2020 2077 6974 6820 6f70 656e  ').    with open
-000104b0: 2866 7061 7468 2c20 2777 2729 2061 7320  (fpath, 'w') as 
-000104c0: 756e 7573 6564 5f6f 7574 5f66 696c 653a  unused_out_file:
-000104d0: 0a20 2020 2020 2070 6173 7320 2023 2057  .      pass  # W
-000104e0: 7269 7465 2061 207a 6572 6f20 6279 7465  rite a zero byte
-000104f0: 2066 696c 650a 2020 2020 7365 6c66 2e52   file.    self.R
-00010500: 756e 4773 5574 696c 285b 2763 7027 2c20  unGsUtil(['cp', 
-00010510: 6670 6174 682c 2073 7572 6928 6473 745f  fpath, suri(dst_
-00010520: 6275 636b 6574 5f75 7269 295d 290a 0a20  bucket_uri)]).. 
-00010530: 2020 2040 5265 7472 7928 4173 7365 7274     @Retry(Assert
-00010540: 696f 6e45 7272 6f72 2c20 7472 6965 733d  ionError, tries=
-00010550: 332c 2074 696d 656f 7574 5f73 6563 733d  3, timeout_secs=
-00010560: 3129 0a20 2020 2064 6566 205f 4368 6563  1).    def _Chec
-00010570: 6b31 2829 3a0a 2020 2020 2020 7374 646f  k1():.      stdo
-00010580: 7574 203d 2073 656c 662e 5275 6e47 7355  ut = self.RunGsU
-00010590: 7469 6c28 5b27 6c73 272c 2073 7572 6928  til(['ls', suri(
-000105a0: 6473 745f 6275 636b 6574 5f75 7269 295d  dst_bucket_uri)]
-000105b0: 2c20 7265 7475 726e 5f73 7464 6f75 743d  , return_stdout=
-000105c0: 5472 7565 290a 2020 2020 2020 7365 6c66  True).      self
-000105d0: 2e61 7373 6572 7449 6e28 6f73 2e70 6174  .assertIn(os.pat
-000105e0: 682e 6261 7365 6e61 6d65 2866 7061 7468  h.basename(fpath
-000105f0: 292c 2073 7464 6f75 7429 0a0a 2020 2020  ), stdout)..    
-00010600: 5f43 6865 636b 3128 290a 0a20 2020 2064  _Check1()..    d
-00010610: 6f77 6e6c 6f61 645f 7061 7468 203d 206f  ownload_path = o
-00010620: 732e 7061 7468 2e6a 6f69 6e28 7372 635f  s.path.join(src_
-00010630: 6469 722c 2027 7a65 726f 5f62 7974 655f  dir, 'zero_byte_
-00010640: 646f 776e 6c6f 6164 2729 0a20 2020 2073  download').    s
-00010650: 656c 662e 5275 6e47 7355 7469 6c28 5b27  elf.RunGsUtil(['
-00010660: 6370 272c 2073 7572 6928 6473 745f 6275  cp', suri(dst_bu
-00010670: 636b 6574 5f75 7269 2c20 277a 6572 6f5f  cket_uri, 'zero_
-00010680: 6279 7465 2729 2c20 646f 776e 6c6f 6164  byte'), download
-00010690: 5f70 6174 685d 290a 2020 2020 7365 6c66  _path]).    self
-000106a0: 2e61 7373 6572 7454 7275 6528 6f73 2e73  .assertTrue(os.s
-000106b0: 7461 7428 646f 776e 6c6f 6164 5f70 6174  tat(download_pat
-000106c0: 6829 290a 0a20 2064 6566 2074 6573 745f  h))..  def test_
-000106d0: 636f 7079 5f62 7563 6b65 745f 746f 5f62  copy_bucket_to_b
-000106e0: 7563 6b65 7428 7365 6c66 293a 0a20 2020  ucket(self):.   
-000106f0: 2022 2222 5465 7374 7320 7265 6375 7273   """Tests recurs
-00010700: 6976 656c 7920 636f 7079 696e 6720 6672  ively copying fr
-00010710: 6f6d 2062 7563 6b65 7420 746f 2062 7563  om bucket to buc
-00010720: 6b65 742e 0a0a 2020 2020 5468 6973 2073  ket...    This s
-00010730: 686f 756c 6420 7072 6f64 7563 6520 6964  hould produce id
-00010740: 656e 7469 6361 6c6c 7920 6e61 6d65 6420  entically named 
-00010750: 6f62 6a65 6374 7320 2861 6e64 206e 6f74  objects (and not
-00010760: 2c20 696e 2070 6172 7469 6375 6c61 722c  , in particular,
-00010770: 0a20 2020 2064 6573 7469 6e61 7469 6f6e  .    destination
-00010780: 206f 626a 6563 7473 206e 616d 6564 2062   objects named b
-00010790: 7920 7468 6520 7665 7273 696f 6e2d 7370  y the version-sp
-000107a0: 6563 6966 6963 2055 5249 2066 726f 6d20  ecific URI from 
-000107b0: 736f 7572 6365 206f 626a 6563 7473 292e  source objects).
-000107c0: 0a20 2020 2022 2222 0a20 2020 2073 7263  .    """.    src
-000107d0: 5f62 7563 6b65 745f 7572 6920 3d20 7365  _bucket_uri = se
-000107e0: 6c66 2e43 7265 6174 6556 6572 7369 6f6e  lf.CreateVersion
-000107f0: 6564 4275 636b 6574 2829 0a20 2020 2064  edBucket().    d
-00010800: 7374 5f62 7563 6b65 745f 7572 6920 3d20  st_bucket_uri = 
-00010810: 7365 6c66 2e43 7265 6174 6556 6572 7369  self.CreateVersi
-00010820: 6f6e 6564 4275 636b 6574 2829 0a20 2020  onedBucket().   
-00010830: 2073 656c 662e 4372 6561 7465 4f62 6a65   self.CreateObje
-00010840: 6374 2862 7563 6b65 745f 7572 693d 7372  ct(bucket_uri=sr
-00010850: 635f 6275 636b 6574 5f75 7269 2c0a 2020  c_bucket_uri,.  
-00010860: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010870: 2020 2020 6f62 6a65 6374 5f6e 616d 653d      object_name=
-00010880: 276f 626a 3027 2c0a 2020 2020 2020 2020  'obj0',.        
-00010890: 2020 2020 2020 2020 2020 2020 2020 636f                co
-000108a0: 6e74 656e 7473 3d62 2761 6263 2729 0a20  ntents=b'abc'). 
-000108b0: 2020 2073 656c 662e 4372 6561 7465 4f62     self.CreateOb
-000108c0: 6a65 6374 2862 7563 6b65 745f 7572 693d  ject(bucket_uri=
-000108d0: 7372 635f 6275 636b 6574 5f75 7269 2c0a  src_bucket_uri,.
-000108e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000108f0: 2020 2020 2020 6f62 6a65 6374 5f6e 616d        object_nam
-00010900: 653d 276f 626a 3127 2c0a 2020 2020 2020  e='obj1',.      
-00010910: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010920: 636f 6e74 656e 7473 3d62 2764 6566 2729  contents=b'def')
-00010930: 0a0a 2020 2020 2320 5573 6520 4052 6574  ..    # Use @Ret
-00010940: 7279 2061 7320 6865 6467 6520 6167 6169  ry as hedge agai
-00010950: 6e73 7420 6275 636b 6574 206c 6973 7469  nst bucket listi
-00010960: 6e67 2065 7665 6e74 7561 6c20 636f 6e73  ng eventual cons
-00010970: 6973 7465 6e63 792e 0a20 2020 2040 5265  istency..    @Re
-00010980: 7472 7928 4173 7365 7274 696f 6e45 7272  try(AssertionErr
-00010990: 6f72 2c20 7472 6965 733d 332c 2074 696d  or, tries=3, tim
-000109a0: 656f 7574 5f73 6563 733d 3129 0a20 2020  eout_secs=1).   
-000109b0: 2064 6566 205f 436f 7079 416e 6443 6865   def _CopyAndChe
-000109c0: 636b 2829 3a0a 2020 2020 2020 7365 6c66  ck():.      self
-000109d0: 2e52 756e 4773 5574 696c 285b 2763 7027  .RunGsUtil(['cp'
-000109e0: 2c20 272d 5227 2c20 7375 7269 2873 7263  , '-R', suri(src
-000109f0: 5f62 7563 6b65 745f 7572 6929 2c20 7375  _bucket_uri), su
-00010a00: 7269 2864 7374 5f62 7563 6b65 745f 7572  ri(dst_bucket_ur
-00010a10: 6929 5d29 0a20 2020 2020 2073 7464 6f75  i)]).      stdou
-00010a20: 7420 3d20 7365 6c66 2e52 756e 4773 5574  t = self.RunGsUt
-00010a30: 696c 285b 276c 7327 2c20 272d 5227 2c20  il(['ls', '-R', 
-00010a40: 6473 745f 6275 636b 6574 5f75 7269 2e75  dst_bucket_uri.u
-00010a50: 7269 5d2c 0a20 2020 2020 2020 2020 2020  ri],.           
-00010a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010a70: 2020 2072 6574 7572 6e5f 7374 646f 7574     return_stdout
-00010a80: 3d54 7275 6529 0a20 2020 2020 2073 656c  =True).      sel
-00010a90: 662e 6173 7365 7274 496e 280a 2020 2020  f.assertIn(.    
-00010aa0: 2020 2020 2020 2725 7325 732f 6f62 6a30        '%s%s/obj0
-00010ab0: 5c6e 2720 2520 2864 7374 5f62 7563 6b65  \n' % (dst_bucke
-00010ac0: 745f 7572 692c 2073 7263 5f62 7563 6b65  t_uri, src_bucke
-00010ad0: 745f 7572 692e 6275 636b 6574 5f6e 616d  t_uri.bucket_nam
-00010ae0: 6529 2c20 7374 646f 7574 290a 2020 2020  e), stdout).    
-00010af0: 2020 7365 6c66 2e61 7373 6572 7449 6e28    self.assertIn(
-00010b00: 0a20 2020 2020 2020 2020 2027 2573 2573  .          '%s%s
-00010b10: 2f6f 626a 315c 6e27 2025 2028 6473 745f  /obj1\n' % (dst_
-00010b20: 6275 636b 6574 5f75 7269 2c20 7372 635f  bucket_uri, src_
-00010b30: 6275 636b 6574 5f75 7269 2e62 7563 6b65  bucket_uri.bucke
-00010b40: 745f 6e61 6d65 292c 2073 7464 6f75 7429  t_name), stdout)
-00010b50: 0a0a 2020 2020 5f43 6f70 7941 6e64 4368  ..    _CopyAndCh
-00010b60: 6563 6b28 290a 0a20 2040 536b 6970 466f  eck()..  @SkipFo
-00010b70: 7247 5328 274f 6e6c 7920 7333 2056 3420  rGS('Only s3 V4 
-00010b80: 7369 676e 6174 7572 6573 2065 7272 6f72  signatures error
-00010b90: 206f 6e20 6c6f 6361 7469 6f6e 206d 6973   on location mis
-00010ba0: 6d61 7463 6865 732e 2729 0a20 2064 6566  matches.').  def
-00010bb0: 2074 6573 745f 636f 7079 5f62 7563 6b65   test_copy_bucke
-00010bc0: 745f 746f 5f62 7563 6b65 745f 7769 7468  t_to_bucket_with
-00010bd0: 5f6c 6f63 6174 696f 6e5f 7265 6469 7265  _location_redire
-00010be0: 6374 2873 656c 6629 3a0a 2020 2020 2320  ct(self):.    # 
-00010bf0: 6370 2075 7365 7320 6120 7365 6e64 6572  cp uses a sender
-00010c00: 2066 756e 6374 696f 6e20 7468 6174 2072   function that r
-00010c10: 6169 7365 7320 616e 2065 7863 6570 7469  aises an excepti
-00010c20: 6f6e 206f 6e20 6c6f 6361 7469 6f6e 206d  on on location m
-00010c30: 6973 6d61 7463 6865 732c 0a20 2020 2023  ismatches,.    #
-00010c40: 2069 6e73 7465 6164 206f 6620 7265 7475   instead of retu
-00010c50: 726e 696e 6720 6120 7265 7370 6f6e 7365  rning a response
-00010c60: 2e20 5468 6973 2069 6e74 6567 7261 7469  . This integrati
-00010c70: 6f6e 2074 6573 7420 656e 7375 7265 7320  on test ensures 
-00010c80: 7265 7472 6965 730a 2020 2020 2320 6672  retries.    # fr
-00010c90: 6f6d 2065 7863 6570 7469 6f6e 7320 776f  om exceptions wo
-00010ca0: 726b 2063 6f72 7265 6374 6c79 2e0a 0a20  rk correctly... 
-00010cb0: 2020 2073 7263 5f62 7563 6b65 745f 7265     src_bucket_re
-00010cc0: 6769 6f6e 203d 2027 6170 2d65 6173 742d  gion = 'ap-east-
-00010cd0: 3127 0a20 2020 2064 6573 745f 6275 636b  1'.    dest_buck
-00010ce0: 6574 5f72 6567 696f 6e20 3d20 2775 732d  et_region = 'us-
-00010cf0: 6561 7374 2d32 270a 2020 2020 7372 635f  east-2'.    src_
-00010d00: 6275 636b 6574 5f68 6f73 7420 3d20 2773  bucket_host = 's
-00010d10: 332e 2573 2e61 6d61 7a6f 6e61 7773 2e63  3.%s.amazonaws.c
-00010d20: 6f6d 2720 2520 7372 635f 6275 636b 6574  om' % src_bucket
-00010d30: 5f72 6567 696f 6e0a 2020 2020 6465 7374  _region.    dest
-00010d40: 5f62 7563 6b65 745f 686f 7374 203d 2027  _bucket_host = '
-00010d50: 7333 2e25 732e 616d 617a 6f6e 6177 732e  s3.%s.amazonaws.
-00010d60: 636f 6d27 2025 2064 6573 745f 6275 636b  com' % dest_buck
-00010d70: 6574 5f72 6567 696f 6e0a 2020 2020 636c  et_region.    cl
-00010d80: 6965 6e74 5f68 6f73 7420 3d20 2773 332e  ient_host = 's3.
-00010d90: 6575 2d77 6573 742d 312e 616d 617a 6f6e  eu-west-1.amazon
-00010da0: 6177 732e 636f 6d27 0a0a 2020 2020 7769  aws.com'..    wi
-00010db0: 7468 2053 6574 426f 746f 436f 6e66 6967  th SetBotoConfig
-00010dc0: 466f 7254 6573 7428 5b28 2773 3327 2c20  ForTest([('s3', 
-00010dd0: 2768 6f73 7427 2c20 7372 635f 6275 636b  'host', src_buck
-00010de0: 6574 5f68 6f73 7429 5d29 3a0a 2020 2020  et_host)]):.    
-00010df0: 2020 7372 635f 6275 636b 6574 5f75 7269    src_bucket_uri
-00010e00: 203d 2073 656c 662e 4372 6561 7465 4275   = self.CreateBu
-00010e10: 636b 6574 286c 6f63 6174 696f 6e3d 7372  cket(location=sr
-00010e20: 635f 6275 636b 6574 5f72 6567 696f 6e29  c_bucket_region)
-00010e30: 0a20 2020 2020 2073 656c 662e 4372 6561  .      self.Crea
-00010e40: 7465 4f62 6a65 6374 2862 7563 6b65 745f  teObject(bucket_
-00010e50: 7572 693d 7372 635f 6275 636b 6574 5f75  uri=src_bucket_u
-00010e60: 7269 2c0a 2020 2020 2020 2020 2020 2020  ri,.            
-00010e70: 2020 2020 2020 2020 2020 2020 6f62 6a65              obje
-00010e80: 6374 5f6e 616d 653d 276f 626a 3027 2c0a  ct_name='obj0',.
-00010e90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010ea0: 2020 2020 2020 2020 636f 6e74 656e 7473          contents
-00010eb0: 3d62 2761 6263 2729 0a20 2020 2020 2073  =b'abc').      s
-00010ec0: 656c 662e 4372 6561 7465 4f62 6a65 6374  elf.CreateObject
-00010ed0: 2862 7563 6b65 745f 7572 693d 7372 635f  (bucket_uri=src_
-00010ee0: 6275 636b 6574 5f75 7269 2c0a 2020 2020  bucket_uri,.    
-00010ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010f00: 2020 2020 6f62 6a65 6374 5f6e 616d 653d      object_name=
-00010f10: 276f 626a 3127 2c0a 2020 2020 2020 2020  'obj1',.        
-00010f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010f30: 636f 6e74 656e 7473 3d62 2764 6566 2729  contents=b'def')
-00010f40: 0a0a 2020 2020 7769 7468 2053 6574 426f  ..    with SetBo
-00010f50: 746f 436f 6e66 6967 466f 7254 6573 7428  toConfigForTest(
-00010f60: 5b28 2773 3327 2c20 2768 6f73 7427 2c20  [('s3', 'host', 
-00010f70: 6465 7374 5f62 7563 6b65 745f 686f 7374  dest_bucket_host
-00010f80: 295d 293a 0a20 2020 2020 2064 7374 5f62  )]):.      dst_b
-00010f90: 7563 6b65 745f 7572 6920 3d20 7365 6c66  ucket_uri = self
-00010fa0: 2e43 7265 6174 6542 7563 6b65 7428 6c6f  .CreateBucket(lo
-00010fb0: 6361 7469 6f6e 3d64 6573 745f 6275 636b  cation=dest_buck
-00010fc0: 6574 5f72 6567 696f 6e29 0a0a 2020 2020  et_region)..    
-00010fd0: 2320 5573 6520 4052 6574 7279 2061 7320  # Use @Retry as 
-00010fe0: 6865 6467 6520 6167 6169 6e73 7420 6275  hedge against bu
-00010ff0: 636b 6574 206c 6973 7469 6e67 2065 7665  cket listing eve
-00011000: 6e74 7561 6c20 636f 6e73 6973 7465 6e63  ntual consistenc
-00011010: 792e 0a20 2020 2040 5265 7472 7928 4173  y..    @Retry(As
-00011020: 7365 7274 696f 6e45 7272 6f72 2c20 7472  sertionError, tr
-00011030: 6965 733d 332c 2074 696d 656f 7574 5f73  ies=3, timeout_s
-00011040: 6563 733d 3129 0a20 2020 2064 6566 205f  ecs=1).    def _
-00011050: 436f 7079 416e 6443 6865 636b 2829 3a0a  CopyAndCheck():.
-00011060: 2020 2020 2020 7365 6c66 2e52 756e 4773        self.RunGs
-00011070: 5574 696c 285b 2763 7027 2c20 272d 5227  Util(['cp', '-R'
-00011080: 2c20 7375 7269 2873 7263 5f62 7563 6b65  , suri(src_bucke
-00011090: 745f 7572 6929 2c20 7375 7269 2864 7374  t_uri), suri(dst
-000110a0: 5f62 7563 6b65 745f 7572 6929 5d29 0a20  _bucket_uri)]). 
-000110b0: 2020 2020 2073 7464 6f75 7420 3d20 7365       stdout = se
-000110c0: 6c66 2e52 756e 4773 5574 696c 285b 276c  lf.RunGsUtil(['l
-000110d0: 7327 2c20 272d 5227 2c20 6473 745f 6275  s', '-R', dst_bu
-000110e0: 636b 6574 5f75 7269 2e75 7269 5d2c 0a20  cket_uri.uri],. 
-000110f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011100: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00011110: 7572 6e5f 7374 646f 7574 3d54 7275 6529  urn_stdout=True)
-00011120: 0a20 2020 2020 2073 656c 662e 6173 7365  .      self.asse
-00011130: 7274 496e 280a 2020 2020 2020 2020 2020  rtIn(.          
-00011140: 2725 7325 732f 6f62 6a30 5c6e 2720 2520  '%s%s/obj0\n' % 
-00011150: 2864 7374 5f62 7563 6b65 745f 7572 692c  (dst_bucket_uri,
-00011160: 2073 7263 5f62 7563 6b65 745f 7572 692e   src_bucket_uri.
-00011170: 6275 636b 6574 5f6e 616d 6529 2c20 7374  bucket_name), st
-00011180: 646f 7574 290a 2020 2020 2020 7365 6c66  dout).      self
-00011190: 2e61 7373 6572 7449 6e28 0a20 2020 2020  .assertIn(.     
-000111a0: 2020 2020 2027 2573 2573 2f6f 626a 315c       '%s%s/obj1\
-000111b0: 6e27 2025 2028 6473 745f 6275 636b 6574  n' % (dst_bucket
-000111c0: 5f75 7269 2c20 7372 635f 6275 636b 6574  _uri, src_bucket
-000111d0: 5f75 7269 2e62 7563 6b65 745f 6e61 6d65  _uri.bucket_name
-000111e0: 292c 2073 7464 6f75 7429 0a0a 2020 2020  ), stdout)..    
-000111f0: 7769 7468 2053 6574 426f 746f 436f 6e66  with SetBotoConf
-00011200: 6967 466f 7254 6573 7428 5b28 2773 3327  igForTest([('s3'
-00011210: 2c20 2768 6f73 7427 2c20 636c 6965 6e74  , 'host', client
-00011220: 5f68 6f73 7429 5d29 3a0a 2020 2020 2020  _host)]):.      
-00011230: 5f43 6f70 7941 6e64 4368 6563 6b28 290a  _CopyAndCheck().
-00011240: 0a20 2064 6566 2074 6573 745f 636f 7079  .  def test_copy
-00011250: 5f62 7563 6b65 745f 746f 5f64 6972 2873  _bucket_to_dir(s
-00011260: 656c 6629 3a0a 2020 2020 2222 2254 6573  elf):.    """Tes
-00011270: 7473 2072 6563 7572 7369 7665 6c79 2063  ts recursively c
-00011280: 6f70 7969 6e67 2066 726f 6d20 6275 636b  opying from buck
-00011290: 6574 2074 6f20 6120 6469 7265 6374 6f72  et to a director
-000112a0: 792e 0a0a 2020 2020 5468 6973 2073 686f  y...    This sho
-000112b0: 756c 6420 7072 6f64 7563 6520 6964 656e  uld produce iden
-000112c0: 7469 6361 6c6c 7920 6e61 6d65 6420 6f62  tically named ob
-000112d0: 6a65 6374 7320 2861 6e64 206e 6f74 2c20  jects (and not, 
-000112e0: 696e 2070 6172 7469 6375 6c61 722c 0a20  in particular,. 
-000112f0: 2020 2064 6573 7469 6e61 7469 6f6e 206f     destination o
-00011300: 626a 6563 7473 206e 616d 6564 2062 7920  bjects named by 
-00011310: 7468 6520 7665 7273 696f 6e2d 2073 7065  the version- spe
-00011320: 6369 6669 6320 5552 4920 6672 6f6d 2073  cific URI from s
-00011330: 6f75 7263 6520 6f62 6a65 6374 7329 2e0a  ource objects)..
-00011340: 2020 2020 2222 220a 2020 2020 7372 635f      """.    src_
-00011350: 6275 636b 6574 5f75 7269 203d 2073 656c  bucket_uri = sel
-00011360: 662e 4372 6561 7465 4275 636b 6574 2829  f.CreateBucket()
-00011370: 0a20 2020 2064 7374 5f64 6972 203d 2073  .    dst_dir = s
-00011380: 656c 662e 4372 6561 7465 5465 6d70 4469  elf.CreateTempDi
-00011390: 7228 290a 2020 2020 7365 6c66 2e43 7265  r().    self.Cre
-000113a0: 6174 654f 626a 6563 7428 6275 636b 6574  ateObject(bucket
-000113b0: 5f75 7269 3d73 7263 5f62 7563 6b65 745f  _uri=src_bucket_
-000113c0: 7572 692c 0a20 2020 2020 2020 2020 2020  uri,.           
-000113d0: 2020 2020 2020 2020 2020 206f 626a 6563             objec
-000113e0: 745f 6e61 6d65 3d27 6f62 6a30 272c 0a20  t_name='obj0',. 
-000113f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011400: 2020 2020 2063 6f6e 7465 6e74 733d 6227       contents=b'
-00011410: 6162 6327 290a 2020 2020 7365 6c66 2e43  abc').    self.C
-00011420: 7265 6174 654f 626a 6563 7428 6275 636b  reateObject(buck
-00011430: 6574 5f75 7269 3d73 7263 5f62 7563 6b65  et_uri=src_bucke
-00011440: 745f 7572 692c 0a20 2020 2020 2020 2020  t_uri,.         
-00011450: 2020 2020 2020 2020 2020 2020 206f 626a               obj
-00011460: 6563 745f 6e61 6d65 3d27 6f62 6a31 272c  ect_name='obj1',
-00011470: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00011480: 2020 2020 2020 2063 6f6e 7465 6e74 733d         contents=
-00011490: 6227 6465 6627 290a 0a20 2020 2023 2055  b'def')..    # U
-000114a0: 7365 2040 5265 7472 7920 6173 2068 6564  se @Retry as hed
-000114b0: 6765 2061 6761 696e 7374 2062 7563 6b65  ge against bucke
-000114c0: 7420 6c69 7374 696e 6720 6576 656e 7475  t listing eventu
-000114d0: 616c 2063 6f6e 7369 7374 656e 6379 2e0a  al consistency..
-000114e0: 2020 2020 4052 6574 7279 2841 7373 6572      @Retry(Asser
-000114f0: 7469 6f6e 4572 726f 722c 2074 7269 6573  tionError, tries
-00011500: 3d33 2c20 7469 6d65 6f75 745f 7365 6373  =3, timeout_secs
-00011510: 3d31 290a 2020 2020 6465 6620 5f43 6f70  =1).    def _Cop
-00011520: 7941 6e64 4368 6563 6b28 293a 0a20 2020  yAndCheck():.   
-00011530: 2020 2022 2222 436f 7069 6573 2074 6865     """Copies the
-00011540: 2062 7563 6b65 7420 7265 6375 7273 6976   bucket recursiv
-00011550: 656c 7920 616e 6420 7661 6c69 6461 7465  ely and validate
-00011560: 7320 7468 6520 7265 7375 6c74 732e 2222  s the results.""
-00011570: 220a 2020 2020 2020 7365 6c66 2e52 756e  ".      self.Run
-00011580: 4773 5574 696c 285b 2763 7027 2c20 272d  GsUtil(['cp', '-
-00011590: 5227 2c20 7375 7269 2873 7263 5f62 7563  R', suri(src_buc
-000115a0: 6b65 745f 7572 6929 2c20 6473 745f 6469  ket_uri), dst_di
-000115b0: 725d 290a 2020 2020 2020 6469 725f 6c69  r]).      dir_li
-000115c0: 7374 203d 205b 5d0a 2020 2020 2020 666f  st = [].      fo
-000115d0: 7220 6469 726e 616d 652c 205f 2c20 6669  r dirname, _, fi
-000115e0: 6c65 6e61 6d65 7320 696e 206f 732e 7761  lenames in os.wa
-000115f0: 6c6b 2864 7374 5f64 6972 293a 0a20 2020  lk(dst_dir):.   
-00011600: 2020 2020 2066 6f72 2066 696c 656e 616d       for filenam
-00011610: 6520 696e 2066 696c 656e 616d 6573 3a0a  e in filenames:.
-00011620: 2020 2020 2020 2020 2020 6469 725f 6c69            dir_li
-00011630: 7374 2e61 7070 656e 6428 6f73 2e70 6174  st.append(os.pat
-00011640: 682e 6a6f 696e 2864 6972 6e61 6d65 2c20  h.join(dirname, 
-00011650: 6669 6c65 6e61 6d65 2929 0a20 2020 2020  filename)).     
-00011660: 2064 6972 5f6c 6973 7420 3d20 736f 7274   dir_list = sort
-00011670: 6564 2864 6972 5f6c 6973 7429 0a20 2020  ed(dir_list).   
-00011680: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-00011690: 7561 6c28 6c65 6e28 6469 725f 6c69 7374  ual(len(dir_list
-000116a0: 292c 2032 290a 2020 2020 2020 7365 6c66  ), 2).      self
-000116b0: 2e61 7373 6572 7445 7175 616c 280a 2020  .assertEqual(.  
-000116c0: 2020 2020 2020 2020 6f73 2e70 6174 682e          os.path.
-000116d0: 6a6f 696e 2864 7374 5f64 6972 2c20 7372  join(dst_dir, sr
-000116e0: 635f 6275 636b 6574 5f75 7269 2e62 7563  c_bucket_uri.buc
-000116f0: 6b65 745f 6e61 6d65 2c20 276f 626a 3027  ket_name, 'obj0'
-00011700: 292c 0a20 2020 2020 2020 2020 2064 6972  ),.          dir
-00011710: 5f6c 6973 745b 305d 290a 2020 2020 2020  _list[0]).      
-00011720: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-00011730: 280a 2020 2020 2020 2020 2020 6f73 2e70  (.          os.p
-00011740: 6174 682e 6a6f 696e 2864 7374 5f64 6972  ath.join(dst_dir
-00011750: 2c20 7372 635f 6275 636b 6574 5f75 7269  , src_bucket_uri
-00011760: 2e62 7563 6b65 745f 6e61 6d65 2c20 276f  .bucket_name, 'o
-00011770: 626a 3127 292c 0a20 2020 2020 2020 2020  bj1'),.         
-00011780: 2064 6972 5f6c 6973 745b 315d 290a 0a20   dir_list[1]).. 
-00011790: 2020 205f 436f 7079 416e 6443 6865 636b     _CopyAndCheck
-000117a0: 2829 0a0a 2020 4075 6e69 7474 6573 742e  ()..  @unittest.
-000117b0: 736b 6970 556e 6c65 7373 2848 4153 5f53  skipUnless(HAS_S
-000117c0: 335f 4352 4544 532c 2027 5465 7374 2072  3_CREDS, 'Test r
-000117d0: 6571 7569 7265 7320 626f 7468 2053 3320  equires both S3 
-000117e0: 616e 6420 4753 2063 7265 6465 6e74 6961  and GS credentia
-000117f0: 6c73 2729 0a20 2064 6566 2074 6573 745f  ls').  def test_
-00011800: 636f 7079 5f6f 626a 6563 745f 746f 5f64  copy_object_to_d
-00011810: 6972 5f73 335f 7634 2873 656c 6629 3a0a  ir_s3_v4(self):.
-00011820: 2020 2020 2222 2254 6573 7473 2063 6f70      """Tests cop
-00011830: 7969 6e67 206f 626a 6563 7420 6672 6f6d  ying object from
-00011840: 2073 3320 746f 206c 6f63 616c 2064 6972   s3 to local dir
-00011850: 2077 6974 6820 7634 2073 6967 6e61 7475   with v4 signatu
-00011860: 7265 2e0a 0a20 2020 2052 6567 696f 6e73  re...    Regions
-00011870: 206c 696b 6520 7573 2d65 6173 7432 2061   like us-east2 a
-00011880: 6363 6570 7420 6f6e 6c79 2056 3420 7369  ccept only V4 si
-00011890: 676e 6174 7572 652c 2068 656e 6365 2077  gnature, hence w
-000118a0: 6520 7769 6c6c 2063 7265 6174 650a 2020  e will create.  
-000118b0: 2020 7468 6520 6275 636b 6574 2069 6e20    the bucket in 
-000118c0: 7573 2d65 6173 7432 2072 6567 696f 6e20  us-east2 region 
-000118d0: 746f 2065 6e66 6f72 6365 2074 6573 7469  to enforce testi
-000118e0: 6e67 2077 6974 6820 5634 2073 6967 6e61  ng with V4 signa
-000118f0: 7475 7265 2e0a 2020 2020 2222 220a 2020  ture..    """.  
-00011900: 2020 7372 635f 6275 636b 6574 5f75 7269    src_bucket_uri
-00011910: 203d 2073 656c 662e 4372 6561 7465 4275   = self.CreateBu
-00011920: 636b 6574 2870 726f 7669 6465 723d 2773  cket(provider='s
-00011930: 3327 2c20 6c6f 6361 7469 6f6e 3d27 7573  3', location='us
-00011940: 2d65 6173 742d 3227 290a 2020 2020 6473  -east-2').    ds
-00011950: 745f 6469 7220 3d20 7365 6c66 2e43 7265  t_dir = self.Cre
-00011960: 6174 6554 656d 7044 6972 2829 0a20 2020  ateTempDir().   
-00011970: 2073 656c 662e 4372 6561 7465 4f62 6a65   self.CreateObje
-00011980: 6374 2862 7563 6b65 745f 7572 693d 7372  ct(bucket_uri=sr
-00011990: 635f 6275 636b 6574 5f75 7269 2c0a 2020  c_bucket_uri,.  
-000119a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000119b0: 2020 2020 6f62 6a65 6374 5f6e 616d 653d      object_name=
-000119c0: 276f 626a 3027 2c0a 2020 2020 2020 2020  'obj0',.        
-000119d0: 2020 2020 2020 2020 2020 2020 2020 636f                co
-000119e0: 6e74 656e 7473 3d62 2761 6263 2729 0a20  ntents=b'abc'). 
-000119f0: 2020 2073 656c 662e 4372 6561 7465 4f62     self.CreateOb
-00011a00: 6a65 6374 2862 7563 6b65 745f 7572 693d  ject(bucket_uri=
-00011a10: 7372 635f 6275 636b 6574 5f75 7269 2c0a  src_bucket_uri,.
-00011a20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011a30: 2020 2020 2020 6f62 6a65 6374 5f6e 616d        object_nam
-00011a40: 653d 276f 626a 3127 2c0a 2020 2020 2020  e='obj1',.      
-00011a50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011a60: 636f 6e74 656e 7473 3d62 2764 6566 2729  contents=b'def')
-00011a70: 0a0a 2020 2020 2320 5573 6520 4052 6574  ..    # Use @Ret
-00011a80: 7279 2061 7320 6865 6467 6520 6167 6169  ry as hedge agai
-00011a90: 6e73 7420 6275 636b 6574 206c 6973 7469  nst bucket listi
-00011aa0: 6e67 2065 7665 6e74 7561 6c20 636f 6e73  ng eventual cons
-00011ab0: 6973 7465 6e63 792e 0a20 2020 2040 5265  istency..    @Re
-00011ac0: 7472 7928 4173 7365 7274 696f 6e45 7272  try(AssertionErr
-00011ad0: 6f72 2c20 7472 6965 733d 332c 2074 696d  or, tries=3, tim
-00011ae0: 656f 7574 5f73 6563 733d 3129 0a20 2020  eout_secs=1).   
-00011af0: 2064 6566 205f 436f 7079 416e 6443 6865   def _CopyAndChe
-00011b00: 636b 2829 3a0a 2020 2020 2020 2222 2243  ck():.      """C
-00011b10: 6f70 6965 7320 7468 6520 6275 636b 6574  opies the bucket
-00011b20: 2072 6563 7572 7369 7665 6c79 2061 6e64   recursively and
-00011b30: 2076 616c 6964 6174 6573 2074 6865 2072   validates the r
-00011b40: 6573 756c 7473 2e22 2222 0a20 2020 2020  esults.""".     
-00011b50: 2073 656c 662e 5275 6e47 7355 7469 6c28   self.RunGsUtil(
-00011b60: 5b27 6370 272c 2027 2d52 272c 2073 7572  ['cp', '-R', sur
-00011b70: 6928 7372 635f 6275 636b 6574 5f75 7269  i(src_bucket_uri
-00011b80: 292c 2064 7374 5f64 6972 5d29 0a20 2020  ), dst_dir]).   
-00011b90: 2020 2064 6972 5f6c 6973 7420 3d20 5b5d     dir_list = []
-00011ba0: 0a20 2020 2020 2066 6f72 2064 6972 6e61  .      for dirna
-00011bb0: 6d65 2c20 5f2c 2066 696c 656e 616d 6573  me, _, filenames
-00011bc0: 2069 6e20 6f73 2e77 616c 6b28 6473 745f   in os.walk(dst_
-00011bd0: 6469 7229 3a0a 2020 2020 2020 2020 666f  dir):.        fo
-00011be0: 7220 6669 6c65 6e61 6d65 2069 6e20 6669  r filename in fi
-00011bf0: 6c65 6e61 6d65 733a 0a20 2020 2020 2020  lenames:.       
-00011c00: 2020 2064 6972 5f6c 6973 742e 6170 7065     dir_list.appe
-00011c10: 6e64 286f 732e 7061 7468 2e6a 6f69 6e28  nd(os.path.join(
-00011c20: 6469 726e 616d 652c 2066 696c 656e 616d  dirname, filenam
-00011c30: 6529 290a 2020 2020 2020 6469 725f 6c69  e)).      dir_li
-00011c40: 7374 203d 2073 6f72 7465 6428 6469 725f  st = sorted(dir_
-00011c50: 6c69 7374 290a 2020 2020 2020 7365 6c66  list).      self
-00011c60: 2e61 7373 6572 7445 7175 616c 286c 656e  .assertEqual(len
-00011c70: 2864 6972 5f6c 6973 7429 2c20 3229 0a20  (dir_list), 2). 
-00011c80: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00011c90: 4571 7561 6c28 0a20 2020 2020 2020 2020  Equal(.         
-00011ca0: 206f 732e 7061 7468 2e6a 6f69 6e28 6473   os.path.join(ds
-00011cb0: 745f 6469 722c 2073 7263 5f62 7563 6b65  t_dir, src_bucke
-00011cc0: 745f 7572 692e 6275 636b 6574 5f6e 616d  t_uri.bucket_nam
-00011cd0: 652c 2027 6f62 6a30 2729 2c0a 2020 2020  e, 'obj0'),.    
-00011ce0: 2020 2020 2020 6469 725f 6c69 7374 5b30        dir_list[0
-00011cf0: 5d29 0a20 2020 2020 2073 656c 662e 6173  ]).      self.as
-00011d00: 7365 7274 4571 7561 6c28 0a20 2020 2020  sertEqual(.     
-00011d10: 2020 2020 206f 732e 7061 7468 2e6a 6f69       os.path.joi
-00011d20: 6e28 6473 745f 6469 722c 2073 7263 5f62  n(dst_dir, src_b
-00011d30: 7563 6b65 745f 7572 692e 6275 636b 6574  ucket_uri.bucket
-00011d40: 5f6e 616d 652c 2027 6f62 6a31 2729 2c0a  _name, 'obj1'),.
-00011d50: 2020 2020 2020 2020 2020 6469 725f 6c69            dir_li
-00011d60: 7374 5b31 5d29 0a0a 2020 2020 5f43 6f70  st[1])..    _Cop
-00011d70: 7941 6e64 4368 6563 6b28 290a 0a20 2040  yAndCheck()..  @
-00011d80: 536b 6970 466f 7253 3328 2754 6865 2062  SkipForS3('The b
-00011d90: 6f74 6f20 6c69 6220 7573 6564 2066 6f72  oto lib used for
-00011da0: 2053 3320 646f 6573 206e 6f74 2068 616e   S3 does not han
-00011db0: 646c 6520 6f62 6a65 6374 7320 270a 2020  dle objects '.  
-00011dc0: 2020 2020 2020 2020 2020 2027 7374 6172             'star
-00011dd0: 7469 6e67 2077 6974 6820 736c 6173 6865  ting with slashe
-00011de0: 7320 6966 2077 6520 7573 6520 5634 2073  s if we use V4 s
-00011df0: 6967 6e61 7475 7265 2729 0a20 2064 6566  ignature').  def
-00011e00: 2074 6573 745f 7265 6375 7273 6976 655f   test_recursive_
-00011e10: 646f 776e 6c6f 6164 5f77 6974 685f 6c65  download_with_le
-00011e20: 6674 6f76 6572 5f73 6c61 7368 5f6f 6e6c  ftover_slash_onl
-00011e30: 795f 6469 725f 706c 6163 6568 6f6c 6465  y_dir_placeholde
-00011e40: 7228 7365 6c66 293a 0a20 2020 2022 2222  r(self):.    """
-00011e50: 5465 7374 7320 7468 6174 2077 6520 636f  Tests that we co
-00011e60: 7272 6563 746c 7920 6861 6e64 6c65 206c  rrectly handle l
-00011e70: 6566 746f 7665 7220 6469 7220 706c 6163  eftover dir plac
-00011e80: 6568 6f6c 6465 7273 2e22 2222 0a20 2020  eholders.""".   
-00011e90: 2073 7263 5f62 7563 6b65 745f 7572 6920   src_bucket_uri 
-00011ea0: 3d20 7365 6c66 2e43 7265 6174 6542 7563  = self.CreateBuc
-00011eb0: 6b65 7428 290a 2020 2020 6473 745f 6469  ket().    dst_di
-00011ec0: 7220 3d20 7365 6c66 2e43 7265 6174 6554  r = self.CreateT
-00011ed0: 656d 7044 6972 2829 0a20 2020 2073 656c  empDir().    sel
-00011ee0: 662e 4372 6561 7465 4f62 6a65 6374 2862  f.CreateObject(b
-00011ef0: 7563 6b65 745f 7572 693d 7372 635f 6275  ucket_uri=src_bu
-00011f00: 636b 6574 5f75 7269 2c0a 2020 2020 2020  cket_uri,.      
-00011f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011f20: 6f62 6a65 6374 5f6e 616d 653d 276f 626a  object_name='obj
-00011f30: 3027 2c0a 2020 2020 2020 2020 2020 2020  0',.            
-00011f40: 2020 2020 2020 2020 2020 636f 6e74 656e            conten
-00011f50: 7473 3d62 2761 6263 2729 0a20 2020 2073  ts=b'abc').    s
-00011f60: 656c 662e 4372 6561 7465 4f62 6a65 6374  elf.CreateObject
-00011f70: 2862 7563 6b65 745f 7572 693d 7372 635f  (bucket_uri=src_
-00011f80: 6275 636b 6574 5f75 7269 2c0a 2020 2020  bucket_uri,.    
-00011f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011fa0: 2020 6f62 6a65 6374 5f6e 616d 653d 276f    object_name='o
-00011fb0: 626a 3127 2c0a 2020 2020 2020 2020 2020  bj1',.          
-00011fc0: 2020 2020 2020 2020 2020 2020 636f 6e74              cont
-00011fd0: 656e 7473 3d62 2764 6566 2729 0a0a 2020  ents=b'def')..  
-00011fe0: 2020 2320 4372 6561 7465 2061 2070 6c61    # Create a pla
-00011ff0: 6365 686f 6c64 6572 206c 696b 6520 7768  ceholder like wh
-00012000: 6174 2063 616e 2062 6520 6c65 6674 206f  at can be left o
-00012010: 7665 7220 6279 2077 6562 2047 5549 2074  ver by web GUI t
-00012020: 6f6f 6c73 2e0a 2020 2020 6b65 795f 7572  ools..    key_ur
-00012030: 6920 3d20 7365 6c66 2e53 746f 7261 6765  i = self.Storage
-00012040: 5572 6943 6c6f 6e65 5265 706c 6163 654e  UriCloneReplaceN
-00012050: 616d 6528 7372 635f 6275 636b 6574 5f75  ame(src_bucket_u
-00012060: 7269 2c20 272f 2729 0a20 2020 2073 656c  ri, '/').    sel
-00012070: 662e 5374 6f72 6167 6555 7269 5365 7443  f.StorageUriSetC
-00012080: 6f6e 7465 6e74 7346 726f 6d53 7472 696e  ontentsFromStrin
-00012090: 6728 6b65 795f 7572 692c 2027 2729 0a20  g(key_uri, ''). 
-000120a0: 2020 2073 656c 662e 4173 7365 7274 4e4f     self.AssertNO
-000120b0: 626a 6563 7473 496e 4275 636b 6574 2873  bjectsInBucket(s
-000120c0: 7263 5f62 7563 6b65 745f 7572 692c 2033  rc_bucket_uri, 3
-000120d0: 290a 0a20 2020 2073 656c 662e 5275 6e47  )..    self.RunG
-000120e0: 7355 7469 6c28 5b27 6370 272c 2027 2d52  sUtil(['cp', '-R
-000120f0: 272c 2073 7572 6928 7372 635f 6275 636b  ', suri(src_buck
-00012100: 6574 5f75 7269 292c 2064 7374 5f64 6972  et_uri), dst_dir
-00012110: 5d29 0a20 2020 2064 6972 5f6c 6973 7420  ]).    dir_list 
-00012120: 3d20 5b5d 0a20 2020 2066 6f72 2064 6972  = [].    for dir
-00012130: 6e61 6d65 2c20 5f2c 2066 696c 656e 616d  name, _, filenam
-00012140: 6573 2069 6e20 6f73 2e77 616c 6b28 6473  es in os.walk(ds
-00012150: 745f 6469 7229 3a0a 2020 2020 2020 666f  t_dir):.      fo
-00012160: 7220 6669 6c65 6e61 6d65 2069 6e20 6669  r filename in fi
-00012170: 6c65 6e61 6d65 733a 0a20 2020 2020 2020  lenames:.       
-00012180: 2064 6972 5f6c 6973 742e 6170 7065 6e64   dir_list.append
-00012190: 286f 732e 7061 7468 2e6a 6f69 6e28 6469  (os.path.join(di
-000121a0: 726e 616d 652c 2066 696c 656e 616d 6529  rname, filename)
-000121b0: 290a 2020 2020 6469 725f 6c69 7374 203d  ).    dir_list =
-000121c0: 2073 6f72 7465 6428 6469 725f 6c69 7374   sorted(dir_list
-000121d0: 290a 2020 2020 7365 6c66 2e61 7373 6572  ).    self.asser
-000121e0: 7445 7175 616c 286c 656e 2864 6972 5f6c  tEqual(len(dir_l
-000121f0: 6973 7429 2c20 3229 0a20 2020 2073 656c  ist), 2).    sel
-00012200: 662e 6173 7365 7274 4571 7561 6c28 6f73  f.assertEqual(os
-00012210: 2e70 6174 682e 6a6f 696e 2864 7374 5f64  .path.join(dst_d
-00012220: 6972 2c20 7372 635f 6275 636b 6574 5f75  ir, src_bucket_u
-00012230: 7269 2e62 7563 6b65 745f 6e61 6d65 2c20  ri.bucket_name, 
-00012240: 276f 626a 3027 292c 0a20 2020 2020 2020  'obj0'),.       
-00012250: 2020 2020 2020 2020 2020 2020 2020 6469                di
-00012260: 725f 6c69 7374 5b30 5d29 0a20 2020 2073  r_list[0]).    s
-00012270: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-00012280: 6f73 2e70 6174 682e 6a6f 696e 2864 7374  os.path.join(dst
-00012290: 5f64 6972 2c20 7372 635f 6275 636b 6574  _dir, src_bucket
-000122a0: 5f75 7269 2e62 7563 6b65 745f 6e61 6d65  _uri.bucket_name
-000122b0: 2c20 276f 626a 3127 292c 0a20 2020 2020  , 'obj1'),.     
-000122c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000122d0: 6469 725f 6c69 7374 5b31 5d29 0a0a 2020  dir_list[1])..  
-000122e0: 6465 6620 7465 7374 5f72 6563 7572 7369  def test_recursi
-000122f0: 7665 5f64 6f77 6e6c 6f61 645f 7769 7468  ve_download_with
-00012300: 5f6c 6566 746f 7665 725f 6469 725f 706c  _leftover_dir_pl
-00012310: 6163 6568 6f6c 6465 7228 7365 6c66 293a  aceholder(self):
-00012320: 0a20 2020 2022 2222 5465 7374 7320 7468  .    """Tests th
-00012330: 6174 2077 6520 636f 7272 6563 746c 7920  at we correctly 
-00012340: 6861 6e64 6c65 206c 6566 746f 7665 7220  handle leftover 
-00012350: 6469 7220 706c 6163 6568 6f6c 6465 7273  dir placeholders
-00012360: 2e22 2222 0a20 2020 2073 7263 5f62 7563  .""".    src_buc
-00012370: 6b65 745f 7572 6920 3d20 7365 6c66 2e43  ket_uri = self.C
-00012380: 7265 6174 6542 7563 6b65 7428 290a 2020  reateBucket().  
-00012390: 2020 6473 745f 6469 7220 3d20 7365 6c66    dst_dir = self
-000123a0: 2e43 7265 6174 6554 656d 7044 6972 2829  .CreateTempDir()
-000123b0: 0a20 2020 2073 656c 662e 4372 6561 7465  .    self.Create
-000123c0: 4f62 6a65 6374 2862 7563 6b65 745f 7572  Object(bucket_ur
-000123d0: 693d 7372 635f 6275 636b 6574 5f75 7269  i=src_bucket_uri
-000123e0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-000123f0: 2020 2020 2020 2020 6f62 6a65 6374 5f6e          object_n
-00012400: 616d 653d 276f 626a 3027 2c0a 2020 2020  ame='obj0',.    
-00012410: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012420: 2020 636f 6e74 656e 7473 3d62 2761 6263    contents=b'abc
-00012430: 2729 0a20 2020 2073 656c 662e 4372 6561  ').    self.Crea
-00012440: 7465 4f62 6a65 6374 2862 7563 6b65 745f  teObject(bucket_
-00012450: 7572 693d 7372 635f 6275 636b 6574 5f75  uri=src_bucket_u
-00012460: 7269 2c0a 2020 2020 2020 2020 2020 2020  ri,.            
-00012470: 2020 2020 2020 2020 2020 6f62 6a65 6374            object
-00012480: 5f6e 616d 653d 276f 626a 3127 2c0a 2020  _name='obj1',.  
-00012490: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000124a0: 2020 2020 636f 6e74 656e 7473 3d62 2764      contents=b'd
-000124b0: 6566 2729 0a0a 2020 2020 2320 4372 6561  ef')..    # Crea
-000124c0: 7465 2061 2070 6c61 6365 686f 6c64 6572  te a placeholder
-000124d0: 206c 696b 6520 7768 6174 2063 616e 2062   like what can b
-000124e0: 6520 6c65 6674 206f 7665 7220 6279 2077  e left over by w
-000124f0: 6562 2047 5549 2074 6f6f 6c73 2e0a 2020  eb GUI tools..  
-00012500: 2020 6b65 795f 7572 6920 3d20 7365 6c66    key_uri = self
-00012510: 2e53 746f 7261 6765 5572 6943 6c6f 6e65  .StorageUriClone
-00012520: 5265 706c 6163 654e 616d 6528 7372 635f  ReplaceName(src_
-00012530: 6275 636b 6574 5f75 7269 2c20 2766 6f6f  bucket_uri, 'foo
-00012540: 2f27 290a 2020 2020 7365 6c66 2e53 746f  /').    self.Sto
-00012550: 7261 6765 5572 6953 6574 436f 6e74 656e  rageUriSetConten
-00012560: 7473 4672 6f6d 5374 7269 6e67 286b 6579  tsFromString(key
-00012570: 5f75 7269 2c20 2727 290a 2020 2020 7365  _uri, '').    se
-00012580: 6c66 2e41 7373 6572 744e 4f62 6a65 6374  lf.AssertNObject
-00012590: 7349 6e42 7563 6b65 7428 7372 635f 6275  sInBucket(src_bu
-000125a0: 636b 6574 5f75 7269 2c20 3329 0a0a 2020  cket_uri, 3)..  
-000125b0: 2020 7365 6c66 2e52 756e 4773 5574 696c    self.RunGsUtil
-000125c0: 285b 2763 7027 2c20 272d 5227 2c20 7375  (['cp', '-R', su
-000125d0: 7269 2873 7263 5f62 7563 6b65 745f 7572  ri(src_bucket_ur
-000125e0: 6929 2c20 6473 745f 6469 725d 290a 2020  i), dst_dir]).  
-000125f0: 2020 6469 725f 6c69 7374 203d 205b 5d0a    dir_list = [].
-00012600: 2020 2020 666f 7220 6469 726e 616d 652c      for dirname,
-00012610: 205f 2c20 6669 6c65 6e61 6d65 7320 696e   _, filenames in
-00012620: 206f 732e 7761 6c6b 2864 7374 5f64 6972   os.walk(dst_dir
-00012630: 293a 0a20 2020 2020 2066 6f72 2066 696c  ):.      for fil
-00012640: 656e 616d 6520 696e 2066 696c 656e 616d  ename in filenam
-00012650: 6573 3a0a 2020 2020 2020 2020 6469 725f  es:.        dir_
-00012660: 6c69 7374 2e61 7070 656e 6428 6f73 2e70  list.append(os.p
-00012670: 6174 682e 6a6f 696e 2864 6972 6e61 6d65  ath.join(dirname
-00012680: 2c20 6669 6c65 6e61 6d65 2929 0a20 2020  , filename)).   
-00012690: 2064 6972 5f6c 6973 7420 3d20 736f 7274   dir_list = sort
-000126a0: 6564 2864 6972 5f6c 6973 7429 0a20 2020  ed(dir_list).   
-000126b0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-000126c0: 6c28 6c65 6e28 6469 725f 6c69 7374 292c  l(len(dir_list),
-000126d0: 2032 290a 2020 2020 7365 6c66 2e61 7373   2).    self.ass
-000126e0: 6572 7445 7175 616c 286f 732e 7061 7468  ertEqual(os.path
-000126f0: 2e6a 6f69 6e28 6473 745f 6469 722c 2073  .join(dst_dir, s
-00012700: 7263 5f62 7563 6b65 745f 7572 692e 6275  rc_bucket_uri.bu
-00012710: 636b 6574 5f6e 616d 652c 2027 6f62 6a30  cket_name, 'obj0
-00012720: 2729 2c0a 2020 2020 2020 2020 2020 2020  '),.            
-00012730: 2020 2020 2020 2020 2064 6972 5f6c 6973           dir_lis
-00012740: 745b 305d 290a 2020 2020 7365 6c66 2e61  t[0]).    self.a
-00012750: 7373 6572 7445 7175 616c 286f 732e 7061  ssertEqual(os.pa
-00012760: 7468 2e6a 6f69 6e28 6473 745f 6469 722c  th.join(dst_dir,
-00012770: 2073 7263 5f62 7563 6b65 745f 7572 692e   src_bucket_uri.
-00012780: 6275 636b 6574 5f6e 616d 652c 2027 6f62  bucket_name, 'ob
-00012790: 6a31 2729 2c0a 2020 2020 2020 2020 2020  j1'),.          
-000127a0: 2020 2020 2020 2020 2020 2064 6972 5f6c             dir_l
-000127b0: 6973 745b 315d 290a 0a20 2064 6566 2074  ist[1])..  def t
-000127c0: 6573 745f 636f 7079 5f71 7569 6574 2873  est_copy_quiet(s
-000127d0: 656c 6629 3a0a 2020 2020 6275 636b 6574  elf):.    bucket
-000127e0: 5f75 7269 203d 2073 656c 662e 4372 6561  _uri = self.Crea
-000127f0: 7465 4275 636b 6574 2829 0a20 2020 206b  teBucket().    k
-00012800: 6579 5f75 7269 203d 2073 656c 662e 4372  ey_uri = self.Cr
-00012810: 6561 7465 4f62 6a65 6374 2862 7563 6b65  eateObject(bucke
-00012820: 745f 7572 693d 6275 636b 6574 5f75 7269  t_uri=bucket_uri
-00012830: 2c20 636f 6e74 656e 7473 3d62 2766 6f6f  , contents=b'foo
-00012840: 2729 0a20 2020 2073 7464 6572 7220 3d20  ').    stderr = 
-00012850: 7365 6c66 2e52 756e 4773 5574 696c 285b  self.RunGsUtil([
-00012860: 0a20 2020 2020 2020 2027 2d71 272c 2027  .        '-q', '
-00012870: 6370 272c 0a20 2020 2020 2020 2073 7572  cp',.        sur
-00012880: 6928 6b65 795f 7572 6929 2c0a 2020 2020  i(key_uri),.    
-00012890: 2020 2020 7375 7269 2873 656c 662e 5374      suri(self.St
-000128a0: 6f72 6167 6555 7269 436c 6f6e 6552 6570  orageUriCloneRep
-000128b0: 6c61 6365 4e61 6d65 2862 7563 6b65 745f  laceName(bucket_
-000128c0: 7572 692c 2027 6f32 2729 290a 2020 2020  uri, 'o2')).    
-000128d0: 5d2c 0a20 2020 2020 2020 2020 2020 2020  ],.             
-000128e0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-000128f0: 6574 7572 6e5f 7374 6465 7272 3d54 7275  eturn_stderr=Tru
-00012900: 6529 0a20 2020 2073 656c 662e 6173 7365  e).    self.asse
-00012910: 7274 4571 7561 6c28 7374 6465 7272 2e63  rtEqual(stderr.c
-00012920: 6f75 6e74 2827 436f 7079 696e 6720 2729  ount('Copying ')
-00012930: 2c20 3029 0a0a 2020 6465 6620 7465 7374  , 0)..  def test
-00012940: 5f63 705f 6d64 355f 6d61 7463 6828 7365  _cp_md5_match(se
-00012950: 6c66 293a 0a20 2020 2022 2222 5465 7374  lf):.    """Test
-00012960: 7320 7468 6174 2074 6865 2075 706c 6f61  s that the uploa
-00012970: 6465 6420 6f62 6a65 6374 2068 6173 2074  ded object has t
-00012980: 6865 2065 7870 6563 7465 6420 4d44 352e  he expected MD5.
-00012990: 0a0a 2020 2020 4e6f 7465 2074 6861 7420  ..    Note that 
-000129a0: 7768 696c 6520 7468 6973 2064 6f65 7320  while this does 
-000129b0: 7065 7266 6f72 6d20 6120 6669 6c65 2074  perform a file t
-000129c0: 6f20 6f62 6a65 6374 2075 706c 6f61 642c  o object upload,
-000129d0: 204d 4435 2773 2061 7265 0a20 2020 206e   MD5's are.    n
-000129e0: 6f74 2073 7570 706f 7274 6564 2066 6f72  ot supported for
-000129f0: 2063 6f6d 706f 7369 7465 206f 626a 6563   composite objec
-00012a00: 7473 2073 6f20 7765 2064 6f6e 2774 2075  ts so we don't u
-00012a10: 7365 2074 6865 2064 6563 6f72 6174 6f72  se the decorator
-00012a20: 2069 6e20 7468 6973 0a20 2020 2063 6173   in this.    cas
-00012a30: 652e 0a20 2020 2022 2222 0a20 2020 2062  e..    """.    b
-00012a40: 7563 6b65 745f 7572 6920 3d20 7365 6c66  ucket_uri = self
-00012a50: 2e43 7265 6174 6542 7563 6b65 7428 290a  .CreateBucket().
-00012a60: 2020 2020 6670 6174 6820 3d20 7365 6c66      fpath = self
-00012a70: 2e43 7265 6174 6554 656d 7046 696c 6528  .CreateTempFile(
-00012a80: 636f 6e74 656e 7473 3d62 2762 6172 2729  contents=b'bar')
-00012a90: 0a20 2020 2077 6974 6820 6f70 656e 2866  .    with open(f
-00012aa0: 7061 7468 2c20 2772 6227 2920 6173 2066  path, 'rb') as f
-00012ab0: 5f69 6e3a 0a20 2020 2020 206d 6435 203d  _in:.      md5 =
-00012ac0: 2062 696e 6173 6369 692e 756e 6865 786c   binascii.unhexl
-00012ad0: 6966 7928 4361 6c63 756c 6174 654d 6435  ify(CalculateMd5
-00012ae0: 4672 6f6d 436f 6e74 656e 7473 2866 5f69  FromContents(f_i
-00012af0: 6e29 290a 2020 2020 2020 7472 793a 0a20  n)).      try:. 
-00012b00: 2020 2020 2020 2065 6e63 6f64 6564 5f62         encoded_b
-00012b10: 7974 6573 203d 2062 6173 6536 342e 656e  ytes = base64.en
-00012b20: 636f 6465 6279 7465 7328 6d64 3529 0a20  codebytes(md5). 
-00012b30: 2020 2020 2065 7863 6570 7420 4174 7472       except Attr
-00012b40: 6962 7574 6545 7272 6f72 3a0a 2020 2020  ibuteError:.    
-00012b50: 2020 2020 2320 466f 7220 5079 7468 6f6e      # For Python
-00012b60: 2032 2063 6f6d 7061 7461 6269 6c69 7479   2 compatability
-00012b70: 2e0a 2020 2020 2020 2020 656e 636f 6465  ..        encode
-00012b80: 645f 6279 7465 7320 3d20 6261 7365 3634  d_bytes = base64
-00012b90: 2e65 6e63 6f64 6573 7472 696e 6728 6d64  .encodestring(md
-00012ba0: 3529 0a20 2020 2020 2066 696c 655f 6d64  5).      file_md
-00012bb0: 3520 3d20 656e 636f 6465 645f 6279 7465  5 = encoded_byte
-00012bc0: 732e 7273 7472 6970 2862 275c 6e27 290a  s.rstrip(b'\n').
-00012bd0: 2020 2020 7365 6c66 2e52 756e 4773 5574      self.RunGsUt
-00012be0: 696c 285b 2763 7027 2c20 6670 6174 682c  il(['cp', fpath,
-00012bf0: 2073 7572 6928 6275 636b 6574 5f75 7269   suri(bucket_uri
-00012c00: 295d 290a 0a20 2020 2023 2055 7365 2040  )])..    # Use @
-00012c10: 5265 7472 7920 6173 2068 6564 6765 2061  Retry as hedge a
-00012c20: 6761 696e 7374 2062 7563 6b65 7420 6c69  gainst bucket li
-00012c30: 7374 696e 6720 6576 656e 7475 616c 2063  sting eventual c
-00012c40: 6f6e 7369 7374 656e 6379 2e0a 2020 2020  onsistency..    
-00012c50: 4052 6574 7279 2841 7373 6572 7469 6f6e  @Retry(Assertion
-00012c60: 4572 726f 722c 2074 7269 6573 3d33 2c20  Error, tries=3, 
-00012c70: 7469 6d65 6f75 745f 7365 6373 3d31 290a  timeout_secs=1).
-00012c80: 2020 2020 6465 6620 5f43 6865 636b 3128      def _Check1(
-00012c90: 293a 0a20 2020 2020 2073 7464 6f75 7420  ):.      stdout 
-00012ca0: 3d20 7365 6c66 2e52 756e 4773 5574 696c  = self.RunGsUtil
-00012cb0: 285b 276c 7327 2c20 272d 4c27 2c20 7375  (['ls', '-L', su
-00012cc0: 7269 2862 7563 6b65 745f 7572 6929 5d2c  ri(bucket_uri)],
-00012cd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00012ce0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00012cf0: 6574 7572 6e5f 7374 646f 7574 3d54 7275  eturn_stdout=Tru
-00012d00: 6529 0a20 2020 2020 2073 656c 662e 6173  e).      self.as
-00012d10: 7365 7274 5265 6765 7828 0a20 2020 2020  sertRegex(.     
-00012d20: 2020 2020 2073 7464 6f75 742c 2072 2748       stdout, r'H
-00012d30: 6173 685c 732b 5c28 6d64 355c 293a 5c73  ash\s+\(md5\):\s
-00012d40: 2b25 7327 2025 2072 652e 6573 6361 7065  +%s' % re.escape
-00012d50: 2866 696c 655f 6d64 352e 6465 636f 6465  (file_md5.decode
-00012d60: 2827 6173 6369 6927 2929 290a 0a20 2020  ('ascii')))..   
-00012d70: 205f 4368 6563 6b31 2829 0a0a 2020 4075   _Check1()..  @u
-00012d80: 6e69 7474 6573 742e 736b 6970 4966 2849  nittest.skipIf(I
-00012d90: 535f 5749 4e44 4f57 532c 0a20 2020 2020  S_WINDOWS,.     
-00012da0: 2020 2020 2020 2020 2020 2020 2020 2755                'U
-00012db0: 6e69 636f 6465 2068 616e 646c 696e 6720  nicode handling 
-00012dc0: 6f6e 2057 696e 646f 7773 2072 6571 7569  on Windows requi
-00012dd0: 7265 7320 6d6f 6473 2074 6f20 7369 7465  res mods to site
-00012de0: 2d70 6163 6b61 6765 7327 290a 2020 4053  -packages').  @S
-00012df0: 6571 7565 6e74 6961 6c41 6e64 5061 7261  equentialAndPara
-00012e00: 6c6c 656c 5472 616e 7366 6572 0a20 2064  llelTransfer.  d
-00012e10: 6566 2074 6573 745f 6370 5f6d 616e 6966  ef test_cp_manif
-00012e20: 6573 745f 7570 6c6f 6164 5f75 6e69 636f  est_upload_unico
-00012e30: 6465 2873 656c 6629 3a0a 2020 2020 7265  de(self):.    re
-00012e40: 7475 726e 2073 656c 662e 5f4d 616e 6966  turn self._Manif
-00012e50: 6573 7455 706c 6f61 6428 2766 6f6f 2d75  estUpload('foo-u
-00012e60: 6e69 63c3 b664 6527 2e65 6e63 6f64 6528  nic..de'.encode(
-00012e70: 5554 4638 292c 0a20 2020 2020 2020 2020  UTF8),.         
-00012e80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012e90: 2020 2020 2020 2027 6261 722d 756e 6963         'bar-unic
-00012ea0: c3b6 6465 272e 656e 636f 6465 2855 5446  ..de'.encode(UTF
-00012eb0: 3829 2c0a 2020 2020 2020 2020 2020 2020  8),.            
-00012ec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012ed0: 2020 2020 276d 616e 6966 6573 742d 756e      'manifest-un
-00012ee0: 6963 c3b6 6465 272e 656e 636f 6465 2855  ic..de'.encode(U
-00012ef0: 5446 3829 290a 0a20 2040 5365 7175 656e  TF8))..  @Sequen
-00012f00: 7469 616c 416e 6450 6172 616c 6c65 6c54  tialAndParallelT
-00012f10: 7261 6e73 6665 720a 2020 6465 6620 7465  ransfer.  def te
-00012f20: 7374 5f63 705f 6d61 6e69 6665 7374 5f75  st_cp_manifest_u
-00012f30: 706c 6f61 6428 7365 6c66 293a 0a20 2020  pload(self):.   
-00012f40: 2022 2222 5465 7374 7320 7570 6c6f 6164   """Tests upload
-00012f50: 696e 6720 7769 7468 2061 206d 6e69 6665  ing with a mnife
-00012f60: 7374 2066 696c 652e 2222 220a 2020 2020  st file.""".    
-00012f70: 7265 7475 726e 2073 656c 662e 5f4d 616e  return self._Man
-00012f80: 6966 6573 7455 706c 6f61 6428 2766 6f6f  ifestUpload('foo
-00012f90: 272c 2027 6261 7227 2c20 276d 616e 6966  ', 'bar', 'manif
-00012fa0: 6573 7427 290a 0a20 2064 6566 205f 4d61  est')..  def _Ma
-00012fb0: 6e69 6665 7374 5570 6c6f 6164 2873 656c  nifestUpload(sel
-00012fc0: 662c 2066 696c 655f 6e61 6d65 2c20 6f62  f, file_name, ob
-00012fd0: 6a65 6374 5f6e 616d 652c 206d 616e 6966  ject_name, manif
-00012fe0: 6573 745f 6e61 6d65 293a 0a20 2020 2022  est_name):.    "
-00012ff0: 2222 5465 7374 7320 7570 6c6f 6164 696e  ""Tests uploadin
-00013000: 6720 7769 7468 2061 206d 616e 6966 6573  g with a manifes
-00013010: 7420 6669 6c65 2e22 2222 0a20 2020 2062  t file.""".    b
-00013020: 7563 6b65 745f 7572 6920 3d20 7365 6c66  ucket_uri = self
-00013030: 2e43 7265 6174 6542 7563 6b65 7428 290a  .CreateBucket().
-00013040: 2020 2020 6473 7475 7269 203d 2073 7572      dsturi = sur
-00013050: 6928 6275 636b 6574 5f75 7269 2c20 6f62  i(bucket_uri, ob
-00013060: 6a65 6374 5f6e 616d 6529 0a0a 2020 2020  ject_name)..    
-00013070: 6670 6174 6820 3d20 7365 6c66 2e43 7265  fpath = self.Cre
-00013080: 6174 6554 656d 7046 696c 6528 6669 6c65  ateTempFile(file
-00013090: 5f6e 616d 653d 6669 6c65 5f6e 616d 652c  _name=file_name,
-000130a0: 2063 6f6e 7465 6e74 733d 6227 6261 7227   contents=b'bar'
-000130b0: 290a 2020 2020 6c6f 6770 6174 6820 3d20  ).    logpath = 
-000130c0: 7365 6c66 2e43 7265 6174 6554 656d 7046  self.CreateTempF
-000130d0: 696c 6528 6669 6c65 5f6e 616d 653d 6d61  ile(file_name=ma
-000130e0: 6e69 6665 7374 5f6e 616d 652c 2063 6f6e  nifest_name, con
-000130f0: 7465 6e74 733d 6227 2729 0a20 2020 2023  tents=b'').    #
-00013100: 2045 6e73 7572 6520 7468 6520 6669 6c65   Ensure the file
-00013110: 2069 7320 656d 7074 792e 0a20 2020 206f   is empty..    o
-00013120: 7065 6e28 6c6f 6770 6174 682c 2027 7727  pen(logpath, 'w'
-00013130: 292e 636c 6f73 6528 290a 2020 2020 7365  ).close().    se
-00013140: 6c66 2e52 756e 4773 5574 696c 285b 2763  lf.RunGsUtil(['c
-00013150: 7027 2c20 272d 4c27 2c20 6c6f 6770 6174  p', '-L', logpat
-00013160: 682c 2066 7061 7468 2c20 6473 7475 7269  h, fpath, dsturi
-00013170: 5d29 0a0a 2020 2020 7769 7468 206f 7065  ])..    with ope
-00013180: 6e28 6c6f 6770 6174 682c 2027 7227 2920  n(logpath, 'r') 
-00013190: 6173 2066 3a0a 2020 2020 2020 6c69 6e65  as f:.      line
-000131a0: 7320 3d20 662e 7265 6164 6c69 6e65 7328  s = f.readlines(
-000131b0: 290a 2020 2020 6966 2073 6978 2e50 5932  ).    if six.PY2
-000131c0: 3a0a 2020 2020 2020 6c69 6e65 7320 3d20  :.      lines = 
-000131d0: 5b73 6978 2e74 6578 745f 7479 7065 286c  [six.text_type(l
-000131e0: 696e 652c 2055 5446 3829 2066 6f72 206c  ine, UTF8) for l
-000131f0: 696e 6520 696e 206c 696e 6573 5d0a 0a20  ine in lines].. 
-00013200: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-00013210: 7561 6c28 6c65 6e28 6c69 6e65 7329 2c20  ual(len(lines), 
-00013220: 3229 0a0a 2020 2020 6578 7065 6374 6564  2)..    expected
-00013230: 5f68 6561 6465 7273 203d 205b 0a20 2020  _headers = [.   
-00013240: 2020 2020 2027 536f 7572 6365 272c 2027       'Source', '
-00013250: 4465 7374 696e 6174 696f 6e27 2c20 2753  Destination', 'S
-00013260: 7461 7274 272c 2027 456e 6427 2c20 274d  tart', 'End', 'M
-00013270: 6435 272c 2027 5570 6c6f 6164 4964 272c  d5', 'UploadId',
-00013280: 0a20 2020 2020 2020 2027 536f 7572 6365  .        'Source
-00013290: 2053 697a 6527 2c20 2742 7974 6573 2054   Size', 'Bytes T
-000132a0: 7261 6e73 6665 7272 6564 272c 2027 5265  ransferred', 'Re
-000132b0: 7375 6c74 272c 2027 4465 7363 7269 7074  sult', 'Descript
-000132c0: 696f 6e27 0a20 2020 205d 0a20 2020 2073  ion'.    ].    s
-000132d0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-000132e0: 6578 7065 6374 6564 5f68 6561 6465 7273  expected_headers
-000132f0: 2c20 6c69 6e65 735b 305d 2e73 7472 6970  , lines[0].strip
-00013300: 2829 2e73 706c 6974 2827 2c27 2929 0a20  ().split(',')). 
-00013310: 2020 2072 6573 756c 7473 203d 206c 696e     results = lin
-00013320: 6573 5b31 5d2e 7374 7269 7028 292e 7370  es[1].strip().sp
-00013330: 6c69 7428 272c 2729 0a0a 2020 2020 7265  lit(',')..    re
-00013340: 7375 6c74 7320 3d20 6469 6374 287a 6970  sults = dict(zip
-00013350: 2865 7870 6563 7465 645f 6865 6164 6572  (expected_header
-00013360: 732c 2072 6573 756c 7473 2929 0a0a 2020  s, results))..  
-00013370: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-00013380: 616c 280a 2020 2020 2020 2020 7265 7375  al(.        resu
-00013390: 6c74 735b 2753 6f75 7263 6527 5d2c 0a20  lts['Source'],. 
-000133a0: 2020 2020 2020 2027 6669 6c65 3a2f 2f27         'file://'
-000133b0: 202b 2066 7061 7468 2c0a 2020 2020 290a   + fpath,.    ).
-000133c0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-000133d0: 7175 616c 280a 2020 2020 2020 2020 7265  qual(.        re
-000133e0: 7375 6c74 735b 2744 6573 7469 6e61 7469  sults['Destinati
-000133f0: 6f6e 275d 2c0a 2020 2020 2020 2020 6473  on'],.        ds
-00013400: 7475 7269 2c0a 2020 2020 290a 0a20 2020  turi,.    )..   
-00013410: 2064 6174 655f 666f 726d 6174 203d 2027   date_format = '
-00013420: 2559 2d25 6d2d 2564 5425 483a 254d 3a25  %Y-%m-%dT%H:%M:%
-00013430: 532e 2566 5a27 0a20 2020 2073 7461 7274  S.%fZ'.    start
-00013440: 5f64 6174 6520 3d20 6461 7465 7469 6d65  _date = datetime
-00013450: 2e64 6174 6574 696d 652e 7374 7270 7469  .datetime.strpti
-00013460: 6d65 2872 6573 756c 7473 5b27 5374 6172  me(results['Star
-00013470: 7427 5d2c 2064 6174 655f 666f 726d 6174  t'], date_format
-00013480: 290a 2020 2020 656e 645f 6461 7465 203d  ).    end_date =
-00013490: 2064 6174 6574 696d 652e 6461 7465 7469   datetime.dateti
-000134a0: 6d65 2e73 7472 7074 696d 6528 7265 7375  me.strptime(resu
-000134b0: 6c74 735b 2745 6e64 275d 2c20 6461 7465  lts['End'], date
-000134c0: 5f66 6f72 6d61 7429 0a20 2020 2073 656c  _format).    sel
-000134d0: 662e 6173 7365 7274 4571 7561 6c28 656e  f.assertEqual(en
-000134e0: 645f 6461 7465 203e 2073 7461 7274 5f64  d_date > start_d
-000134f0: 6174 652c 2054 7275 6529 0a0a 2020 2020  ate, True)..    
-00013500: 6966 2073 656c 662e 5275 6e47 7355 7469  if self.RunGsUti
-00013510: 6c20 3d3d 2074 6573 7463 6173 652e 4773  l == testcase.Gs
-00013520: 5574 696c 496e 7465 6772 6174 696f 6e54  UtilIntegrationT
-00013530: 6573 7443 6173 652e 5275 6e47 7355 7469  estCase.RunGsUti
-00013540: 6c3a 0a20 2020 2020 2023 2043 6865 636b  l:.      # Check
-00013550: 2074 6861 7420 7765 2064 6964 6e27 7420   that we didn't 
-00013560: 646f 2061 7574 6f6d 6174 6963 2070 6172  do automatic par
-00013570: 616c 6c65 6c20 7570 6c6f 6164 7320 2d20  allel uploads - 
-00013580: 636f 6d70 6f73 6520 646f 6573 6e27 740a  compose doesn't.
-00013590: 2020 2020 2020 2320 6361 6c63 756c 6174        # calculat
-000135a0: 6520 7468 6520 4d44 3520 6861 7368 2e20  e the MD5 hash. 
-000135b0: 5369 6e63 6520 5275 6e47 7355 7469 6c20  Since RunGsUtil 
-000135c0: 6973 206f 7665 7272 6964 656e 2069 6e0a  is overriden in.
-000135d0: 2020 2020 2020 2320 5465 7374 4370 5061        # TestCpPa
-000135e0: 7261 6c6c 656c 5570 6c6f 6164 7320 746f  rallelUploads to
-000135f0: 2066 6f72 6365 2070 6172 616c 6c65 6c20   force parallel 
-00013600: 7570 6c6f 6164 732c 2077 6520 6361 6e20  uploads, we can 
-00013610: 6368 6563 6b20 7768 6963 680a 2020 2020  check which.    
-00013620: 2020 2320 6d65 7468 6f64 2077 6173 2075    # method was u
-00013630: 7365 642e 0a20 2020 2020 2073 656c 662e  sed..      self.
-00013640: 6173 7365 7274 4571 7561 6c28 7265 7375  assertEqual(resu
-00013650: 6c74 735b 274d 6435 275d 2c20 2772 4c30  lts['Md5'], 'rL0
-00013660: 5932 307a 432b 467a 7437 3256 507a 4d53  Y20zC+Fzt72VPzMS
-00013670: 6b32 413d 3d27 290a 0a20 2020 2073 656c  k2A==')..    sel
-00013680: 662e 6173 7365 7274 4571 7561 6c28 696e  f.assertEqual(in
-00013690: 7428 7265 7375 6c74 735b 2753 6f75 7263  t(results['Sourc
-000136a0: 6520 5369 7a65 275d 292c 2033 290a 2020  e Size']), 3).  
-000136b0: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-000136c0: 616c 2869 6e74 2872 6573 756c 7473 5b27  al(int(results['
-000136d0: 4279 7465 7320 5472 616e 7366 6572 7265  Bytes Transferre
-000136e0: 6427 5d29 2c20 3329 0a20 2020 2073 656c  d']), 3).    sel
-000136f0: 662e 6173 7365 7274 4571 7561 6c28 7265  f.assertEqual(re
-00013700: 7375 6c74 735b 2752 6573 756c 7427 5d2c  sults['Result'],
-00013710: 2027 4f4b 2729 0a0a 2020 4053 6571 7565   'OK')..  @Seque
-00013720: 6e74 6961 6c41 6e64 5061 7261 6c6c 656c  ntialAndParallel
-00013730: 5472 616e 7366 6572 0a20 2064 6566 2074  Transfer.  def t
-00013740: 6573 745f 6370 5f6d 616e 6966 6573 745f  est_cp_manifest_
-00013750: 646f 776e 6c6f 6164 2873 656c 6629 3a0a  download(self):.
-00013760: 2020 2020 2222 2254 6573 7473 2064 6f77      """Tests dow
-00013770: 6e6c 6f61 6469 6e67 2077 6974 6820 6120  nloading with a 
-00013780: 6d61 6e69 6665 7374 2066 696c 652e 2222  manifest file.""
-00013790: 220a 2020 2020 6b65 795f 7572 6920 3d20  ".    key_uri = 
-000137a0: 7365 6c66 2e43 7265 6174 654f 626a 6563  self.CreateObjec
-000137b0: 7428 636f 6e74 656e 7473 3d62 2766 6f6f  t(contents=b'foo
-000137c0: 2729 0a20 2020 2066 7061 7468 203d 2073  ').    fpath = s
-000137d0: 656c 662e 4372 6561 7465 5465 6d70 4669  elf.CreateTempFi
-000137e0: 6c65 2863 6f6e 7465 6e74 733d 6227 2729  le(contents=b'')
-000137f0: 0a20 2020 206c 6f67 7061 7468 203d 2073  .    logpath = s
-00013800: 656c 662e 4372 6561 7465 5465 6d70 4669  elf.CreateTempFi
-00013810: 6c65 2863 6f6e 7465 6e74 733d 6227 2729  le(contents=b'')
-00013820: 0a20 2020 2023 2045 6e73 7572 6520 7468  .    # Ensure th
-00013830: 6520 6669 6c65 2069 7320 656d 7074 792e  e file is empty.
-00013840: 0a20 2020 206f 7065 6e28 6c6f 6770 6174  .    open(logpat
-00013850: 682c 2027 7727 292e 636c 6f73 6528 290a  h, 'w').close().
-00013860: 2020 2020 7365 6c66 2e52 756e 4773 5574      self.RunGsUt
-00013870: 696c 280a 2020 2020 2020 2020 5b27 6370  il(.        ['cp
-00013880: 272c 2027 2d4c 272c 206c 6f67 7061 7468  ', '-L', logpath
-00013890: 2c20 7375 7269 286b 6579 5f75 7269 292c  , suri(key_uri),
-000138a0: 2066 7061 7468 5d2c 2072 6574 7572 6e5f   fpath], return_
-000138b0: 7374 646f 7574 3d54 7275 6529 0a20 2020  stdout=True).   
-000138c0: 2077 6974 6820 6f70 656e 286c 6f67 7061   with open(logpa
-000138d0: 7468 2c20 2772 2729 2061 7320 663a 0a20  th, 'r') as f:. 
-000138e0: 2020 2020 206c 696e 6573 203d 2066 2e72       lines = f.r
-000138f0: 6561 646c 696e 6573 2829 0a20 2020 2069  eadlines().    i
-00013900: 6620 7369 782e 5059 333a 0a20 2020 2020  f six.PY3:.     
-00013910: 2064 6563 6f64 655f 6c69 6e65 7320 3d20   decode_lines = 
-00013920: 5b5d 0a20 2020 2020 2066 6f72 206c 696e  [].      for lin
-00013930: 6520 696e 206c 696e 6573 3a0a 2020 2020  e in lines:.    
-00013940: 2020 2020 6966 206c 696e 652e 7374 6172      if line.star
-00013950: 7473 7769 7468 2822 6227 2229 3a0a 2020  tswith("b'"):.  
-00013960: 2020 2020 2020 2020 736f 6d65 5f73 7472          some_str
-00013970: 7320 3d20 6c69 6e65 2e73 706c 6974 2827  s = line.split('
-00013980: 2c27 290a 2020 2020 2020 2020 2020 6c69  ,').          li
-00013990: 6e65 5f70 6172 7473 203d 205b 5d0a 2020  ne_parts = [].  
-000139a0: 2020 2020 2020 2020 666f 7220 736f 6d65          for some
-000139b0: 5f73 7472 2069 6e20 736f 6d65 5f73 7472  _str in some_str
-000139c0: 733a 0a20 2020 2020 2020 2020 2020 2069  s:.            i
-000139d0: 6620 736f 6d65 5f73 7472 2e73 7461 7274  f some_str.start
-000139e0: 7377 6974 6828 2262 2722 293a 0a20 2020  swith("b'"):.   
-000139f0: 2020 2020 2020 2020 2020 206c 696e 655f             line_
-00013a00: 7061 7274 732e 6170 7065 6e64 2861 7374  parts.append(ast
-00013a10: 2e6c 6974 6572 616c 5f65 7661 6c28 736f  .literal_eval(so
-00013a20: 6d65 5f73 7472 292e 6465 636f 6465 2855  me_str).decode(U
-00013a30: 5446 3829 290a 2020 2020 2020 2020 2020  TF8)).          
-00013a40: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00013a50: 2020 2020 2020 6c69 6e65 5f70 6172 7473        line_parts
-00013a60: 2e61 7070 656e 6428 736f 6d65 5f73 7472  .append(some_str
-00013a70: 290a 2020 2020 2020 2020 2020 6465 636f  ).          deco
-00013a80: 6465 5f6c 696e 6573 2e61 7070 656e 6428  de_lines.append(
-00013a90: 272c 272e 6a6f 696e 286c 696e 655f 7061  ','.join(line_pa
-00013aa0: 7274 7329 290a 2020 2020 2020 2020 656c  rts)).        el
-00013ab0: 7365 3a0a 2020 2020 2020 2020 2020 6465  se:.          de
-00013ac0: 636f 6465 5f6c 696e 6573 2e61 7070 656e  code_lines.appen
-00013ad0: 6428 6c69 6e65 290a 2020 2020 2020 6c69  d(line).      li
-00013ae0: 6e65 7320 3d20 6465 636f 6465 5f6c 696e  nes = decode_lin
-00013af0: 6573 0a20 2020 2073 656c 662e 6173 7365  es.    self.asse
-00013b00: 7274 4571 7561 6c28 6c65 6e28 6c69 6e65  rtEqual(len(line
-00013b10: 7329 2c20 3229 0a0a 2020 2020 6578 7065  s), 2)..    expe
-00013b20: 6374 6564 5f68 6561 6465 7273 203d 205b  cted_headers = [
-00013b30: 0a20 2020 2020 2020 2027 536f 7572 6365  .        'Source
-00013b40: 272c 2027 4465 7374 696e 6174 696f 6e27  ', 'Destination'
-00013b50: 2c20 2753 7461 7274 272c 2027 456e 6427  , 'Start', 'End'
-00013b60: 2c20 274d 6435 272c 2027 5570 6c6f 6164  , 'Md5', 'Upload
-00013b70: 4964 272c 0a20 2020 2020 2020 2027 536f  Id',.        'So
-00013b80: 7572 6365 2053 697a 6527 2c20 2742 7974  urce Size', 'Byt
-00013b90: 6573 2054 7261 6e73 6665 7272 6564 272c  es Transferred',
-00013ba0: 2027 5265 7375 6c74 272c 2027 4465 7363   'Result', 'Desc
-00013bb0: 7269 7074 696f 6e27 0a20 2020 205d 0a20  ription'.    ]. 
-00013bc0: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-00013bd0: 7561 6c28 6578 7065 6374 6564 5f68 6561  ual(expected_hea
-00013be0: 6465 7273 2c20 6c69 6e65 735b 305d 2e73  ders, lines[0].s
-00013bf0: 7472 6970 2829 2e73 706c 6974 2827 2c27  trip().split(','
-00013c00: 2929 0a20 2020 2072 6573 756c 7473 203d  )).    results =
-00013c10: 206c 696e 6573 5b31 5d2e 7374 7269 7028   lines[1].strip(
-00013c20: 292e 7370 6c69 7428 272c 2729 0a20 2020  ).split(',').   
-00013c30: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-00013c40: 6c28 7265 7375 6c74 735b 305d 5b3a 355d  l(results[0][:5]
-00013c50: 2c20 2725 733a 2f2f 2720 2520 7365 6c66  , '%s://' % self
-00013c60: 2e64 6566 6175 6c74 5f70 726f 7669 6465  .default_provide
-00013c70: 7229 2020 2320 736f 7572 6365 0a20 2020  r)  # source.   
-00013c80: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-00013c90: 6c28 7265 7375 6c74 735b 315d 5b3a 375d  l(results[1][:7]
-00013ca0: 2c20 2766 696c 653a 2f2f 2729 2020 2320  , 'file://')  # 
-00013cb0: 6465 7374 696e 6174 696f 6e0a 2020 2020  destination.    
-00013cc0: 6461 7465 5f66 6f72 6d61 7420 3d20 2725  date_format = '%
-00013cd0: 592d 256d 2d25 6454 2548 3a25 4d3a 2553  Y-%m-%dT%H:%M:%S
-00013ce0: 2e25 665a 270a 2020 2020 7374 6172 745f  .%fZ'.    start_
-00013cf0: 6461 7465 203d 2064 6174 6574 696d 652e  date = datetime.
-00013d00: 6461 7465 7469 6d65 2e73 7472 7074 696d  datetime.strptim
-00013d10: 6528 7265 7375 6c74 735b 325d 2c20 6461  e(results[2], da
-00013d20: 7465 5f66 6f72 6d61 7429 0a20 2020 2065  te_format).    e
-00013d30: 6e64 5f64 6174 6520 3d20 6461 7465 7469  nd_date = dateti
-00013d40: 6d65 2e64 6174 6574 696d 652e 7374 7270  me.datetime.strp
-00013d50: 7469 6d65 2872 6573 756c 7473 5b33 5d2c  time(results[3],
-00013d60: 2064 6174 655f 666f 726d 6174 290a 2020   date_format).  
-00013d70: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-00013d80: 616c 2865 6e64 5f64 6174 6520 3e20 7374  al(end_date > st
-00013d90: 6172 745f 6461 7465 2c20 5472 7565 290a  art_date, True).
-00013da0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-00013db0: 7175 616c 2869 6e74 2872 6573 756c 7473  qual(int(results
-00013dc0: 5b36 5d29 2c20 3329 2020 2320 536f 7572  [6]), 3)  # Sour
-00013dd0: 6365 2053 697a 650a 2020 2020 2320 4279  ce Size.    # By
-00013de0: 7465 7320 7472 616e 7366 6572 7265 6420  tes transferred 
-00013df0: 6d69 6768 7420 6265 206d 6f72 6520 7468  might be more th
-00013e00: 616e 2033 2069 6620 7468 6520 6669 6c65  an 3 if the file
-00013e10: 2077 6173 2067 7a69 7070 6564 2c20 7369   was gzipped, si
-00013e20: 6e63 650a 2020 2020 2320 7468 6520 6d69  nce.    # the mi
-00013e30: 6e69 6d75 6d20 677a 6970 2068 6561 6465  nimum gzip heade
-00013e40: 7220 6973 2031 3020 6279 7465 732e 0a20  r is 10 bytes.. 
-00013e50: 2020 2073 656c 662e 6173 7365 7274 4772     self.assertGr
-00013e60: 6561 7465 7245 7175 616c 2869 6e74 2872  eaterEqual(int(r
-00013e70: 6573 756c 7473 5b37 5d29 2c20 3329 2020  esults[7]), 3)  
-00013e80: 2320 4279 7465 7320 5472 616e 7366 6572  # Bytes Transfer
-00013e90: 7265 640a 2020 2020 7365 6c66 2e61 7373  red.    self.ass
-00013ea0: 6572 7445 7175 616c 2872 6573 756c 7473  ertEqual(results
-00013eb0: 5b38 5d2c 2027 4f4b 2729 2020 2320 5265  [8], 'OK')  # Re
-00013ec0: 7375 6c74 0a0a 2020 4053 6571 7565 6e74  sult..  @Sequent
-00013ed0: 6961 6c41 6e64 5061 7261 6c6c 656c 5472  ialAndParallelTr
-00013ee0: 616e 7366 6572 0a20 2064 6566 2074 6573  ansfer.  def tes
-00013ef0: 745f 636f 7079 5f75 6e69 636f 6465 5f6e  t_copy_unicode_n
-00013f00: 6f6e 5f61 7363 6969 5f66 696c 656e 616d  on_ascii_filenam
-00013f10: 6528 7365 6c66 293a 0a20 2020 206b 6579  e(self):.    key
-00013f20: 5f75 7269 203d 2073 656c 662e 4372 6561  _uri = self.Crea
-00013f30: 7465 4f62 6a65 6374 2829 0a20 2020 2023  teObject().    #
-00013f40: 2054 7279 2077 6974 6820 616e 6420 7769   Try with and wi
-00013f50: 7468 6f75 7420 7265 7375 6d61 626c 6520  thout resumable 
-00013f60: 7570 6c6f 6164 2074 6872 6573 686f 6c64  upload threshold
-00013f70: 2c20 746f 2065 6e73 7572 6520 7468 6174  , to ensure that
-00013f80: 2065 6163 680a 2020 2020 2320 7363 656e   each.    # scen
-00013f90: 6172 696f 2077 6f72 6b73 2e20 496e 2070  ario works. In p
-00013fa0: 6172 7469 6375 6c61 722c 2072 6573 756d  articular, resum
-00013fb0: 6162 6c65 2075 706c 6f61 6473 2068 6176  able uploads hav
-00013fc0: 6520 7472 6163 6b65 7220 6669 6c65 6e61  e tracker filena
-00013fd0: 6d65 0a20 2020 2023 206c 6f67 6963 2e0a  me.    # logic..
-00013fe0: 2020 2020 6669 6c65 5f63 6f6e 7465 6e74      file_content
-00013ff0: 7320 3d20 6227 7827 202a 2053 5441 5254  s = b'x' * START
-00014000: 5f43 414c 4c42 4143 4b5f 5045 525f 4259  _CALLBACK_PER_BY
-00014010: 5445 5320 2a20 320a 2020 2020 6670 6174  TES * 2.    fpat
-00014020: 6820 3d20 7365 6c66 2e43 7265 6174 6554  h = self.CreateT
-00014030: 656d 7046 696c 6528 6669 6c65 5f6e 616d  empFile(file_nam
-00014040: 653d 27d0 90d1 83d0 b4d0 b8d0 bed0 b0d1  e='.............
-00014050: 80d1 85d0 b8d0 b227 2c20 636f 6e74 656e  .......', conten
-00014060: 7473 3d66 696c 655f 636f 6e74 656e 7473  ts=file_contents
-00014070: 290a 2020 2020 7769 7468 2053 6574 426f  ).    with SetBo
-00014080: 746f 436f 6e66 6967 466f 7254 6573 7428  toConfigForTest(
-00014090: 5b28 2747 5355 7469 6c27 2c20 2772 6573  [('GSUtil', 'res
-000140a0: 756d 6162 6c65 5f74 6872 6573 686f 6c64  umable_threshold
-000140b0: 272c 2027 3127 295d 293a 0a20 2020 2020  ', '1')]):.     
-000140c0: 2023 2066 7061 7468 5f62 7974 6573 203d   # fpath_bytes =
-000140d0: 2066 7061 7468 2e65 6e63 6f64 6528 5554   fpath.encode(UT
-000140e0: 4638 290a 2020 2020 2020 7365 6c66 2e52  F8).      self.R
-000140f0: 756e 4773 5574 696c 285b 2763 7027 2c20  unGsUtil(['cp', 
-00014100: 6670 6174 682c 2073 7572 6928 6b65 795f  fpath, suri(key_
-00014110: 7572 6929 5d2c 2072 6574 7572 6e5f 7374  uri)], return_st
-00014120: 6465 7272 3d54 7275 6529 0a20 2020 2020  derr=True).     
-00014130: 2073 7464 6f75 7420 3d20 7365 6c66 2e52   stdout = self.R
-00014140: 756e 4773 5574 696c 285b 2763 6174 272c  unGsUtil(['cat',
-00014150: 2073 7572 6928 6b65 795f 7572 6929 5d2c   suri(key_uri)],
-00014160: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00014170: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00014180: 6574 7572 6e5f 7374 646f 7574 3d54 7275  eturn_stdout=Tru
-00014190: 652c 0a20 2020 2020 2020 2020 2020 2020  e,.             
-000141a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000141b0: 2066 6f72 6365 5f67 7375 7469 6c3d 5472   force_gsutil=Tr
-000141c0: 7565 290a 2020 2020 2020 7365 6c66 2e61  ue).      self.a
-000141d0: 7373 6572 7445 7175 616c 7328 7374 646f  ssertEquals(stdo
-000141e0: 7574 2e65 6e63 6f64 6528 2761 7363 6969  ut.encode('ascii
-000141f0: 2729 2c20 6669 6c65 5f63 6f6e 7465 6e74  '), file_content
-00014200: 7329 0a20 2020 2077 6974 6820 5365 7442  s).    with SetB
-00014210: 6f74 6f43 6f6e 6669 6746 6f72 5465 7374  otoConfigForTest
-00014220: 285b 2827 4753 5574 696c 272c 2027 7265  ([('GSUtil', 're
-00014230: 7375 6d61 626c 655f 7468 7265 7368 6f6c  sumable_threshol
-00014240: 6427 2c0a 2020 2020 2020 2020 2020 2020  d',.            
-00014250: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014260: 2020 2020 7374 7228 5354 4152 545f 4341      str(START_CA
-00014270: 4c4c 4241 434b 5f50 4552 5f42 5954 4553  LLBACK_PER_BYTES
-00014280: 202a 2033 2929 5d29 3a0a 2020 2020 2020   * 3))]):.      
-00014290: 7365 6c66 2e52 756e 4773 5574 696c 285b  self.RunGsUtil([
-000142a0: 2763 7027 2c20 6670 6174 682c 2073 7572  'cp', fpath, sur
-000142b0: 6928 6b65 795f 7572 6929 5d2c 2072 6574  i(key_uri)], ret
-000142c0: 7572 6e5f 7374 6465 7272 3d54 7275 6529  urn_stderr=True)
-000142d0: 0a20 2020 2020 2073 7464 6f75 7420 3d20  .      stdout = 
-000142e0: 7365 6c66 2e52 756e 4773 5574 696c 285b  self.RunGsUtil([
-000142f0: 2763 6174 272c 2073 7572 6928 6b65 795f  'cat', suri(key_
-00014300: 7572 6929 5d2c 0a20 2020 2020 2020 2020  uri)],.         
-00014310: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014320: 2020 2020 2072 6574 7572 6e5f 7374 646f       return_stdo
-00014330: 7574 3d54 7275 652c 0a20 2020 2020 2020  ut=True,.       
-00014340: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014350: 2020 2020 2020 2066 6f72 6365 5f67 7375         force_gsu
-00014360: 7469 6c3d 5472 7565 290a 2020 2020 2020  til=True).      
-00014370: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-00014380: 7328 7374 646f 7574 2e65 6e63 6f64 6528  s(stdout.encode(
-00014390: 2761 7363 6969 2729 2c20 6669 6c65 5f63  'ascii'), file_c
-000143a0: 6f6e 7465 6e74 7329 0a0a 2020 2320 4e6f  ontents)..  # No
-000143b0: 7465 3a20 5765 206f 7269 6769 6e61 6c6c  te: We originall
-000143c0: 7920 6f6e 6520 7469 6d65 2069 6d70 6c65  y one time imple
-000143d0: 6d65 6e74 6564 2061 2074 6573 740a 2020  mented a test.  
-000143e0: 2320 2874 6573 745f 636f 7079 5f69 6e76  # (test_copy_inv
-000143f0: 616c 6964 5f75 6e69 636f 6465 5f66 696c  alid_unicode_fil
-00014400: 656e 616d 6529 2074 6861 7420 696e 7661  ename) that inva
-00014410: 6c69 6420 756e 6963 6f64 6520 6669 6c65  lid unicode file
-00014420: 6e61 6d65 7320 7765 7265 0a20 2023 2073  names were.  # s
-00014430: 6b69 7070 6564 2c20 6275 7420 6974 2074  kipped, but it t
-00014440: 7572 6e73 206f 7574 206f 732e 7761 6c6b  urns out os.walk
-00014450: 2829 206f 6e20 6d61 634f 5320 646f 6573  () on macOS does
-00014460: 6e27 7420 6861 7665 2070 726f 626c 656d  n't have problem
-00014470: 7320 7769 7468 0a20 2023 2073 7563 6820  s with.  # such 
-00014480: 6669 6c65 7320 2873 6f2c 2066 6169 6c65  files (so, faile
-00014490: 6420 7468 6174 2074 6573 7429 2e20 4769  d that test). Gi
-000144a0: 7665 6e20 7468 6174 2c20 7765 2064 6563  ven that, we dec
-000144b0: 6964 6564 2074 6f20 7265 6d6f 7665 2074  ided to remove t
-000144c0: 6865 0a20 2023 2074 6573 742e 0a0a 2020  he.  # test...  
-000144d0: 4053 6571 7565 6e74 6961 6c41 6e64 5061  @SequentialAndPa
-000144e0: 7261 6c6c 656c 5472 616e 7366 6572 0a20  rallelTransfer. 
-000144f0: 2064 6566 2074 6573 745f 677a 6970 5f75   def test_gzip_u
-00014500: 706c 6f61 645f 616e 645f 646f 776e 6c6f  pload_and_downlo
-00014510: 6164 2873 656c 6629 3a0a 2020 2020 6275  ad(self):.    bu
-00014520: 636b 6574 5f75 7269 203d 2073 656c 662e  cket_uri = self.
-00014530: 4372 6561 7465 4275 636b 6574 2829 0a20  CreateBucket(). 
-00014540: 2020 2063 6f6e 7465 6e74 7320 3d20 6227     contents = b'
-00014550: 7827 202a 2031 3030 3030 0a20 2020 2074  x' * 10000.    t
-00014560: 6d70 6469 7220 3d20 7365 6c66 2e43 7265  mpdir = self.Cre
-00014570: 6174 6554 656d 7044 6972 2829 0a20 2020  ateTempDir().   
-00014580: 2073 656c 662e 4372 6561 7465 5465 6d70   self.CreateTemp
-00014590: 4669 6c65 2866 696c 655f 6e61 6d65 3d27  File(file_name='
-000145a0: 7465 7374 2e68 746d 6c27 2c20 746d 7064  test.html', tmpd
-000145b0: 6972 3d74 6d70 6469 722c 2063 6f6e 7465  ir=tmpdir, conte
-000145c0: 6e74 733d 636f 6e74 656e 7473 290a 2020  nts=contents).  
-000145d0: 2020 7365 6c66 2e43 7265 6174 6554 656d    self.CreateTem
-000145e0: 7046 696c 6528 6669 6c65 5f6e 616d 653d  pFile(file_name=
-000145f0: 2774 6573 742e 6a73 272c 2074 6d70 6469  'test.js', tmpdi
-00014600: 723d 746d 7064 6972 2c20 636f 6e74 656e  r=tmpdir, conten
-00014610: 7473 3d63 6f6e 7465 6e74 7329 0a20 2020  ts=contents).   
-00014620: 2073 656c 662e 4372 6561 7465 5465 6d70   self.CreateTemp
-00014630: 4669 6c65 2866 696c 655f 6e61 6d65 3d27  File(file_name='
-00014640: 7465 7374 2e74 7874 272c 2074 6d70 6469  test.txt', tmpdi
-00014650: 723d 746d 7064 6972 2c20 636f 6e74 656e  r=tmpdir, conten
-00014660: 7473 3d63 6f6e 7465 6e74 7329 0a20 2020  ts=contents).   
-00014670: 2023 2054 6573 7420 7468 6174 2063 6f70   # Test that cop
-00014680: 7969 6e67 2073 7065 6369 6679 696e 6720  ying specifying 
-00014690: 6f6e 6c79 2032 206f 6620 7468 6520 3320  only 2 of the 3 
-000146a0: 7072 6566 6978 6573 2067 7a69 7073 2074  prefixes gzips t
-000146b0: 6865 2063 6f72 7265 6374 0a20 2020 2023  he correct.    #
-000146c0: 2066 696c 6573 2c20 616e 6420 7465 7374   files, and test
-000146d0: 2074 6861 7420 696e 636c 7564 696e 6720   that including 
-000146e0: 7768 6974 6573 7061 6365 2069 6e20 7468  whitespace in th
-000146f0: 6520 6578 7465 6e73 696f 6e20 6c69 7374  e extension list
-00014700: 2077 6f72 6b73 2e0a 2020 2020 7365 6c66   works..    self
-00014710: 2e52 756e 4773 5574 696c 285b 0a20 2020  .RunGsUtil([.   
-00014720: 2020 2020 2027 6370 272c 2027 2d7a 272c       'cp', '-z',
-00014730: 2027 6a73 2c20 6874 6d6c 272c 0a20 2020   'js, html',.   
-00014740: 2020 2020 206f 732e 7061 7468 2e6a 6f69       os.path.joi
-00014750: 6e28 746d 7064 6972 2c20 2774 6573 742e  n(tmpdir, 'test.
-00014760: 2a27 292c 0a20 2020 2020 2020 2073 7572  *'),.        sur
-00014770: 6928 6275 636b 6574 5f75 7269 290a 2020  i(bucket_uri).  
-00014780: 2020 5d29 0a20 2020 2073 656c 662e 4173    ]).    self.As
-00014790: 7365 7274 4e4f 626a 6563 7473 496e 4275  sertNObjectsInBu
-000147a0: 636b 6574 2862 7563 6b65 745f 7572 692c  cket(bucket_uri,
-000147b0: 2033 290a 2020 2020 7572 6931 203d 2073   3).    uri1 = s
-000147c0: 7572 6928 6275 636b 6574 5f75 7269 2c20  uri(bucket_uri, 
-000147d0: 2774 6573 742e 6874 6d6c 2729 0a20 2020  'test.html').   
-000147e0: 2075 7269 3220 3d20 7375 7269 2862 7563   uri2 = suri(buc
-000147f0: 6b65 745f 7572 692c 2027 7465 7374 2e6a  ket_uri, 'test.j
-00014800: 7327 290a 2020 2020 7572 6933 203d 2073  s').    uri3 = s
-00014810: 7572 6928 6275 636b 6574 5f75 7269 2c20  uri(bucket_uri, 
-00014820: 2774 6573 742e 7478 7427 290a 2020 2020  'test.txt').    
-00014830: 7374 646f 7574 203d 2073 656c 662e 5275  stdout = self.Ru
-00014840: 6e47 7355 7469 6c28 5b27 7374 6174 272c  nGsUtil(['stat',
-00014850: 2075 7269 315d 2c20 7265 7475 726e 5f73   uri1], return_s
-00014860: 7464 6f75 743d 5472 7565 290a 2020 2020  tdout=True).    
-00014870: 7365 6c66 2e61 7373 6572 7452 6567 6578  self.assertRegex
-00014880: 2873 7464 6f75 742c 2072 2743 6f6e 7465  (stdout, r'Conte
-00014890: 6e74 2d45 6e63 6f64 696e 673a 5c73 2b67  nt-Encoding:\s+g
-000148a0: 7a69 7027 290a 2020 2020 7374 646f 7574  zip').    stdout
-000148b0: 203d 2073 656c 662e 5275 6e47 7355 7469   = self.RunGsUti
-000148c0: 6c28 5b27 7374 6174 272c 2075 7269 325d  l(['stat', uri2]
-000148d0: 2c20 7265 7475 726e 5f73 7464 6f75 743d  , return_stdout=
-000148e0: 5472 7565 290a 2020 2020 7365 6c66 2e61  True).    self.a
-000148f0: 7373 6572 7452 6567 6578 2873 7464 6f75  ssertRegex(stdou
-00014900: 742c 2072 2743 6f6e 7465 6e74 2d45 6e63  t, r'Content-Enc
-00014910: 6f64 696e 673a 5c73 2b67 7a69 7027 290a  oding:\s+gzip').
-00014920: 2020 2020 7374 646f 7574 203d 2073 656c      stdout = sel
-00014930: 662e 5275 6e47 7355 7469 6c28 5b27 7374  f.RunGsUtil(['st
-00014940: 6174 272c 2075 7269 335d 2c20 7265 7475  at', uri3], retu
-00014950: 726e 5f73 7464 6f75 743d 5472 7565 290a  rn_stdout=True).
-00014960: 2020 2020 7365 6c66 2e61 7373 6572 744e      self.assertN
-00014970: 6f74 5265 6765 7828 7374 646f 7574 2c20  otRegex(stdout, 
-00014980: 7227 436f 6e74 656e 742d 456e 636f 6469  r'Content-Encodi
-00014990: 6e67 3a5c 732b 677a 6970 2729 0a20 2020  ng:\s+gzip').   
-000149a0: 2066 7061 7468 3420 3d20 7365 6c66 2e43   fpath4 = self.C
-000149b0: 7265 6174 6554 656d 7046 696c 6528 290a  reateTempFile().
-000149c0: 2020 2020 666f 7220 7572 6920 696e 2028      for uri in (
-000149d0: 7572 6931 2c20 7572 6932 2c20 7572 6933  uri1, uri2, uri3
-000149e0: 293a 0a20 2020 2020 2073 656c 662e 5275  ):.      self.Ru
-000149f0: 6e47 7355 7469 6c28 5b27 6370 272c 2075  nGsUtil(['cp', u
-00014a00: 7269 2c20 7375 7269 2866 7061 7468 3429  ri, suri(fpath4)
-00014a10: 5d29 0a20 2020 2020 2077 6974 6820 6f70  ]).      with op
-00014a20: 656e 2866 7061 7468 342c 2027 7262 2729  en(fpath4, 'rb')
-00014a30: 2061 7320 663a 0a20 2020 2020 2020 2073   as f:.        s
-00014a40: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-00014a50: 662e 7265 6164 2829 2c20 636f 6e74 656e  f.read(), conten
-00014a60: 7473 290a 0a20 2040 536b 6970 466f 7253  ts)..  @SkipForS
-00014a70: 3328 274e 6f20 636f 6d70 7265 7373 6564  3('No compressed
-00014a80: 2074 7261 6e73 706f 7274 2065 6e63 6f64   transport encod
-00014a90: 696e 6720 7375 7070 6f72 7420 666f 7220  ing support for 
-00014aa0: 5333 2e27 290a 2020 4053 6b69 7046 6f72  S3.').  @SkipFor
-00014ab0: 584d 4c28 274e 6f20 636f 6d70 7265 7373  XML('No compress
-00014ac0: 6564 2074 7261 6e73 706f 7274 2065 6e63  ed transport enc
-00014ad0: 6f64 696e 6720 7375 7070 6f72 7420 666f  oding support fo
-00014ae0: 7220 7468 6520 584d 4c20 4150 492e 2729  r the XML API.')
-00014af0: 0a20 2040 5365 7175 656e 7469 616c 416e  .  @SequentialAn
-00014b00: 6450 6172 616c 6c65 6c54 7261 6e73 6665  dParallelTransfe
-00014b10: 720a 2020 6465 6620 7465 7374 5f67 7a69  r.  def test_gzi
-00014b20: 705f 7472 616e 7370 6f72 745f 656e 636f  p_transport_enco
-00014b30: 6465 645f 7570 6c6f 6164 5f61 6e64 5f64  ded_upload_and_d
-00014b40: 6f77 6e6c 6f61 6428 7365 6c66 293a 0a20  ownload(self):. 
-00014b50: 2020 2022 2222 5465 7374 2067 7a69 7020     """Test gzip 
-00014b60: 656e 636f 6465 6420 6669 6c65 7320 7570  encoded files up
-00014b70: 6c6f 6164 2063 6f72 7265 6374 6c79 2e0a  load correctly..
-00014b80: 0a20 2020 2054 6869 7320 6368 6563 6b73  .    This checks
-00014b90: 2074 6861 7420 6669 6c65 7320 6172 6520   that files are 
-00014ba0: 6e6f 7420 7461 6767 6564 2077 6974 6820  not tagged with 
-00014bb0: 6120 677a 6970 2063 6f6e 7465 6e74 2065  a gzip content e
-00014bc0: 6e63 6f64 696e 6720 616e 640a 2020 2020  ncoding and.    
-00014bd0: 7468 6174 2074 6865 2063 6f6e 7465 6e74  that the content
-00014be0: 7320 6f66 2074 6865 2066 696c 6573 2061  s of the files a
-00014bf0: 7265 2075 6e63 6f6d 7072 6573 7365 6420  re uncompressed 
-00014c00: 696e 2047 4353 2e20 5468 6973 2074 6573  in GCS. This tes
-00014c10: 7420 7573 6573 2074 6865 0a20 2020 202d  t uses the.    -
-00014c20: 6a20 666c 6167 2074 6f20 7461 7267 6574  j flag to target
-00014c30: 2073 7065 6369 6669 6320 6578 7465 6e73   specific extens
-00014c40: 696f 6e73 2e0a 2020 2020 2222 220a 0a20  ions..    """.. 
-00014c50: 2020 2064 6566 205f 6372 6561 7465 5f74     def _create_t
-00014c60: 6573 745f 6461 7461 2829 3a20 2023 2070  est_data():  # p
-00014c70: 796c 696e 743a 2064 6973 6162 6c65 3d69  ylint: disable=i
-00014c80: 6e76 616c 6964 2d6e 616d 650a 2020 2020  nvalid-name.    
-00014c90: 2020 2222 2253 6574 7570 2074 6865 2062    """Setup the b
-00014ca0: 7563 6b65 7420 616e 6420 6c6f 6361 6c20  ucket and local 
-00014cb0: 6461 7461 2074 6f20 7465 7374 2077 6974  data to test wit
-00014cc0: 682e 0a0a 2020 2020 2020 5265 7475 726e  h...      Return
-00014cd0: 733a 0a20 2020 2020 2020 2054 7269 706c  s:.        Tripl
-00014ce0: 6574 2063 6f6e 7461 696e 696e 6720 7468  et containing th
-00014cf0: 6520 666f 6c6c 6f77 696e 6720 7661 6c75  e following valu
-00014d00: 6573 3a0a 2020 2020 2020 2020 2020 6275  es:.          bu
-00014d10: 636b 6574 5f75 7269 3a20 5374 7269 6e67  cket_uri: String
-00014d20: 2055 5249 206f 6620 636c 6f75 6420 7374   URI of cloud st
-00014d30: 6f72 6167 6520 6275 636b 6574 2074 6f20  orage bucket to 
-00014d40: 7570 6c6f 6164 206d 6f63 6b20 6461 7461  upload mock data
-00014d50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00014d60: 2020 2020 2020 2074 6f2e 0a20 2020 2020         to..     
-00014d70: 2020 2020 2074 6d70 6469 723a 2053 7472       tmpdir: Str
-00014d80: 696e 672c 2070 6174 6820 6f66 2061 2074  ing, path of a t
-00014d90: 656d 706f 7261 7279 2064 6972 6563 746f  emporary directo
-00014da0: 7279 2074 6f20 7772 6974 6520 6d6f 636b  ry to write mock
-00014db0: 2064 6174 6120 746f 2e0a 2020 2020 2020   data to..      
-00014dc0: 2020 2020 6c6f 6361 6c5f 7572 6973 3a20      local_uris: 
-00014dd0: 5475 706c 6520 6f66 2074 6872 6565 2073  Tuple of three s
-00014de0: 7472 696e 6773 3b20 6561 6368 2069 7320  trings; each is 
-00014df0: 7468 6520 6669 6c65 2070 6174 6820 746f  the file path to
-00014e00: 2061 2066 696c 650a 2020 2020 2020 2020   a file.        
-00014e10: 2020 2020 2020 2020 2020 2020 2020 636f                co
-00014e20: 6e74 6169 6e69 6e67 206d 6f63 6b20 6461  ntaining mock da
-00014e30: 7461 2e0a 2020 2020 2020 2222 220a 2020  ta..      """.  
-00014e40: 2020 2020 6275 636b 6574 5f75 7269 203d      bucket_uri =
-00014e50: 2073 656c 662e 4372 6561 7465 4275 636b   self.CreateBuck
-00014e60: 6574 2829 0a20 2020 2020 2063 6f6e 7465  et().      conte
-00014e70: 6e74 7320 3d20 6227 7827 202a 2031 3030  nts = b'x' * 100
-00014e80: 3030 0a20 2020 2020 2074 6d70 6469 7220  00.      tmpdir 
-00014e90: 3d20 7365 6c66 2e43 7265 6174 6554 656d  = self.CreateTem
-00014ea0: 7044 6972 2829 0a0a 2020 2020 2020 6c6f  pDir()..      lo
-00014eb0: 6361 6c5f 7572 6973 203d 205b 5d0a 2020  cal_uris = [].  
-00014ec0: 2020 2020 666f 7220 6669 6c65 6e61 6d65      for filename
-00014ed0: 2069 6e20 2827 7465 7374 2e68 746d 6c27   in ('test.html'
-00014ee0: 2c20 2774 6573 742e 6a73 272c 2027 7465  , 'test.js', 'te
-00014ef0: 7374 2e74 7874 2729 3a0a 2020 2020 2020  st.txt'):.      
-00014f00: 2020 6c6f 6361 6c5f 7572 6973 2e61 7070    local_uris.app
-00014f10: 656e 6428 0a20 2020 2020 2020 2020 2020  end(.           
-00014f20: 2073 656c 662e 4372 6561 7465 5465 6d70   self.CreateTemp
-00014f30: 4669 6c65 2866 696c 655f 6e61 6d65 3d66  File(file_name=f
-00014f40: 696c 656e 616d 652c 0a20 2020 2020 2020  ilename,.       
-00014f50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014f60: 2020 2020 2020 2020 2074 6d70 6469 723d           tmpdir=
-00014f70: 746d 7064 6972 2c0a 2020 2020 2020 2020  tmpdir,.        
-00014f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014f90: 2020 2020 2020 2020 636f 6e74 656e 7473          contents
-00014fa0: 3d63 6f6e 7465 6e74 7329 290a 0a20 2020  =contents))..   
-00014fb0: 2020 2072 6574 7572 6e20 2862 7563 6b65     return (bucke
-00014fc0: 745f 7572 692c 2074 6d70 6469 722c 206c  t_uri, tmpdir, l
-00014fd0: 6f63 616c 5f75 7269 7329 0a0a 2020 2020  ocal_uris)..    
-00014fe0: 6465 6620 5f75 706c 6f61 645f 7465 7374  def _upload_test
-00014ff0: 5f64 6174 6128 746d 7064 6972 2c20 6275  _data(tmpdir, bu
-00015000: 636b 6574 5f75 7269 293a 2020 2320 7079  cket_uri):  # py
-00015010: 6c69 6e74 3a20 6469 7361 626c 653d 696e  lint: disable=in
-00015020: 7661 6c69 642d 6e61 6d65 0a20 2020 2020  valid-name.     
-00015030: 2022 2222 5570 6c6f 6164 206c 6f63 616c   """Upload local
-00015040: 2074 6573 7420 6461 7461 2e0a 0a20 2020   test data...   
-00015050: 2020 2041 7267 733a 0a20 2020 2020 2020     Args:.       
-00015060: 2074 6d70 6469 723a 2053 7472 696e 672c   tmpdir: String,
-00015070: 2070 6174 6820 6f66 2061 2074 656d 706f   path of a tempo
-00015080: 7261 7279 2064 6972 6563 746f 7279 2074  rary directory t
-00015090: 6f20 7772 6974 6520 6d6f 636b 2064 6174  o write mock dat
-000150a0: 6120 746f 2e0a 2020 2020 2020 2020 6275  a to..        bu
-000150b0: 636b 6574 5f75 7269 3a20 5374 7269 6e67  cket_uri: String
-000150c0: 2055 5249 206f 6620 636c 6f75 6420 7374   URI of cloud st
-000150d0: 6f72 6167 6520 6275 636b 6574 2074 6f20  orage bucket to 
-000150e0: 7570 6c6f 6164 206d 6f63 6b20 6461 7461  upload mock data
-000150f0: 2074 6f2e 0a0a 2020 2020 2020 5265 7475   to...      Retu
-00015100: 726e 733a 0a20 2020 2020 2020 2073 7464  rns:.        std
-00015110: 6572 723a 2053 7472 696e 6720 6f75 7470  err: String outp
-00015120: 7574 2066 726f 6d20 7275 6e6e 696e 6720  ut from running 
-00015130: 7468 6520 6773 7574 696c 2063 6f6d 6d61  the gsutil comma
-00015140: 6e64 2074 6f20 7570 6c6f 6164 206d 6f63  nd to upload moc
-00015150: 6b0a 2020 2020 2020 2020 2020 2020 2020  k.              
-00015160: 2020 2020 6461 7461 2e0a 2020 2020 2020      data..      
-00015170: 2222 220a 2020 2020 2020 7374 6465 7272  """.      stderr
-00015180: 203d 2073 656c 662e 5275 6e47 7355 7469   = self.RunGsUti
-00015190: 6c28 5b0a 2020 2020 2020 2020 2020 272d  l([.          '-
-000151a0: 4427 2c20 2763 7027 2c20 272d 6a27 2c20  D', 'cp', '-j', 
-000151b0: 276a 732c 2068 746d 6c27 2c0a 2020 2020  'js, html',.    
-000151c0: 2020 2020 2020 6f73 2e70 6174 682e 6a6f        os.path.jo
-000151d0: 696e 2874 6d70 6469 722c 2027 7465 7374  in(tmpdir, 'test
-000151e0: 2a27 292c 0a20 2020 2020 2020 2020 2073  *'),.          s
-000151f0: 7572 6928 6275 636b 6574 5f75 7269 290a  uri(bucket_uri).
-00015200: 2020 2020 2020 5d2c 0a20 2020 2020 2020        ],.       
-00015210: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015220: 2020 2020 2020 2072 6574 7572 6e5f 7374         return_st
-00015230: 6465 7272 3d54 7275 6529 0a20 2020 2020  derr=True).     
-00015240: 2073 656c 662e 4173 7365 7274 4e4f 626a   self.AssertNObj
-00015250: 6563 7473 496e 4275 636b 6574 2862 7563  ectsInBucket(buc
-00015260: 6b65 745f 7572 692c 2033 290a 2020 2020  ket_uri, 3).    
-00015270: 2020 7265 7475 726e 2073 7464 6572 720a    return stderr.
-00015280: 0a20 2020 2064 6566 205f 6173 7365 7274  .    def _assert
-00015290: 5f73 656e 745f 636f 6d70 7265 7373 6564  _sent_compressed
-000152a0: 286c 6f63 616c 5f75 7269 732c 2073 7464  (local_uris, std
-000152b0: 6572 7229 3a20 2023 2070 796c 696e 743a  err):  # pylint:
-000152c0: 2064 6973 6162 6c65 3d69 6e76 616c 6964   disable=invalid
-000152d0: 2d6e 616d 650a 2020 2020 2020 2222 2245  -name.      """E
-000152e0: 6e73 7572 6520 7468 6520 636f 7272 6563  nsure the correc
-000152f0: 7420 6669 6c65 7320 7765 7265 206d 6172  t files were mar
-00015300: 6b65 6420 666f 7220 636f 6d70 7265 7373  ked for compress
-00015310: 696f 6e2e 0a0a 2020 2020 2020 4172 6773  ion...      Args
-00015320: 3a0a 2020 2020 2020 2020 6c6f 6361 6c5f  :.        local_
-00015330: 7572 6973 3a20 5475 706c 6520 6f66 2074  uris: Tuple of t
-00015340: 6872 6565 2073 7472 696e 6773 3b20 6561  hree strings; ea
-00015350: 6368 2069 7320 7468 6520 6669 6c65 2070  ch is the file p
-00015360: 6174 6820 746f 2061 2066 696c 650a 2020  ath to a file.  
-00015370: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015380: 2020 636f 6e74 6169 6e69 6e67 206d 6f63    containing moc
-00015390: 6b20 6461 7461 2e0a 2020 2020 2020 2020  k data..        
-000153a0: 7374 6465 7272 3a20 5374 7269 6e67 206f  stderr: String o
-000153b0: 7574 7075 7420 6672 6f6d 2072 756e 6e69  utput from runni
-000153c0: 6e67 2074 6865 2067 7375 7469 6c20 636f  ng the gsutil co
-000153d0: 6d6d 616e 6420 746f 2075 706c 6f61 6420  mmand to upload 
-000153e0: 6d6f 636b 0a20 2020 2020 2020 2020 2020  mock.           
-000153f0: 2020 2020 2064 6174 612e 0a20 2020 2020       data..     
-00015400: 2022 2222 0a20 2020 2020 206c 6f63 616c   """.      local
-00015410: 5f75 7269 5f68 746d 6c2c 206c 6f63 616c  _uri_html, local
-00015420: 5f75 7269 5f6a 732c 206c 6f63 616c 5f75  _uri_js, local_u
-00015430: 7269 5f74 7874 203d 206c 6f63 616c 5f75  ri_txt = local_u
-00015440: 7269 730a 2020 2020 2020 6173 7365 7274  ris.      assert
-00015450: 5f62 6173 655f 7374 7269 6e67 203d 2027  _base_string = '
-00015460: 5573 696e 6720 636f 6d70 7265 7373 6564  Using compressed
-00015470: 2074 7261 6e73 706f 7274 2065 6e63 6f64   transport encod
-00015480: 696e 6720 666f 7220 6669 6c65 3a2f 2f7b  ing for file://{
-00015490: 7d2e 270a 2020 2020 2020 7365 6c66 2e61  }.'.      self.a
-000154a0: 7373 6572 7449 6e28 6173 7365 7274 5f62  ssertIn(assert_b
-000154b0: 6173 655f 7374 7269 6e67 2e66 6f72 6d61  ase_string.forma
-000154c0: 7428 6c6f 6361 6c5f 7572 695f 6874 6d6c  t(local_uri_html
-000154d0: 292c 2073 7464 6572 7229 0a20 2020 2020  ), stderr).     
-000154e0: 2073 656c 662e 6173 7365 7274 496e 2861   self.assertIn(a
-000154f0: 7373 6572 745f 6261 7365 5f73 7472 696e  ssert_base_strin
-00015500: 672e 666f 726d 6174 286c 6f63 616c 5f75  g.format(local_u
-00015510: 7269 5f6a 7329 2c20 7374 6465 7272 290a  ri_js), stderr).
-00015520: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-00015530: 744e 6f74 496e 2861 7373 6572 745f 6261  tNotIn(assert_ba
-00015540: 7365 5f73 7472 696e 672e 666f 726d 6174  se_string.format
-00015550: 286c 6f63 616c 5f75 7269 5f74 7874 292c  (local_uri_txt),
-00015560: 2073 7464 6572 7229 0a0a 2020 2020 6465   stderr)..    de
-00015570: 6620 5f61 7373 6572 745f 7374 6f72 6564  f _assert_stored
-00015580: 5f75 6e63 6f6d 7072 6573 7365 6428 6275  _uncompressed(bu
-00015590: 636b 6574 5f75 7269 2c20 636f 6e74 656e  cket_uri, conten
-000155a0: 7473 3d62 2778 2720 2a20 3130 3030 3029  ts=b'x' * 10000)
-000155b0: 3a20 2023 2070 796c 696e 743a 2064 6973  :  # pylint: dis
-000155c0: 6162 6c65 3d69 6e76 616c 6964 2d6e 616d  able=invalid-nam
-000155d0: 650a 2020 2020 2020 2222 2245 6e73 7572  e.      """Ensur
-000155e0: 6520 7468 6520 6669 6c65 7320 6172 6520  e the files are 
-000155f0: 6e6f 7420 636f 6d70 7265 7373 6564 2077  not compressed w
-00015600: 6865 6e20 7468 6579 2061 7265 2073 746f  hen they are sto
-00015610: 7265 6420 696e 2074 6865 2062 7563 6b65  red in the bucke
-00015620: 742e 0a0a 2020 2020 2020 4172 6773 3a0a  t...      Args:.
-00015630: 2020 2020 2020 2020 6275 636b 6574 5f75          bucket_u
-00015640: 7269 3a20 5374 7269 6e67 2077 6974 6820  ri: String with 
-00015650: 5552 4920 666f 7220 6275 636b 6574 2063  URI for bucket c
-00015660: 6f6e 7461 696e 696e 6720 7570 6c6f 6164  ontaining upload
-00015670: 6564 2074 6573 7420 6461 7461 2e0a 2020  ed test data..  
-00015680: 2020 2020 2020 636f 6e74 656e 7473 3a20        contents: 
-00015690: 4279 7465 2073 7472 696e 6720 7468 6174  Byte string that
-000156a0: 2061 7265 2073 746f 7265 6420 696e 2065   are stored in e
-000156b0: 6163 6820 6669 6c65 2069 6e20 7468 6520  ach file in the 
-000156c0: 6275 636b 6574 2e0a 2020 2020 2020 2222  bucket..      ""
-000156d0: 220a 2020 2020 2020 6c6f 6361 6c5f 7572  ".      local_ur
-000156e0: 695f 6874 6d6c 203d 2073 7572 6928 6275  i_html = suri(bu
-000156f0: 636b 6574 5f75 7269 2c20 2774 6573 742e  cket_uri, 'test.
-00015700: 6874 6d6c 2729 0a20 2020 2020 206c 6f63  html').      loc
-00015710: 616c 5f75 7269 5f6a 7320 3d20 7375 7269  al_uri_js = suri
-00015720: 2862 7563 6b65 745f 7572 692c 2027 7465  (bucket_uri, 'te
-00015730: 7374 2e6a 7327 290a 2020 2020 2020 6c6f  st.js').      lo
-00015740: 6361 6c5f 7572 695f 7478 7420 3d20 7375  cal_uri_txt = su
-00015750: 7269 2862 7563 6b65 745f 7572 692c 2027  ri(bucket_uri, '
-00015760: 7465 7374 2e74 7874 2729 0a20 2020 2020  test.txt').     
-00015770: 2066 7061 7468 3420 3d20 7365 6c66 2e43   fpath4 = self.C
-00015780: 7265 6174 6554 656d 7046 696c 6528 290a  reateTempFile().
-00015790: 0a20 2020 2020 2066 6f72 2075 7269 2069  .      for uri i
-000157a0: 6e20 286c 6f63 616c 5f75 7269 5f68 746d  n (local_uri_htm
-000157b0: 6c2c 206c 6f63 616c 5f75 7269 5f6a 732c  l, local_uri_js,
-000157c0: 206c 6f63 616c 5f75 7269 5f74 7874 293a   local_uri_txt):
-000157d0: 0a20 2020 2020 2020 2073 7464 6f75 7420  .        stdout 
-000157e0: 3d20 7365 6c66 2e52 756e 4773 5574 696c  = self.RunGsUtil
-000157f0: 285b 2773 7461 7427 2c20 7572 695d 2c20  (['stat', uri], 
-00015800: 7265 7475 726e 5f73 7464 6f75 743d 5472  return_stdout=Tr
-00015810: 7565 290a 2020 2020 2020 2020 7365 6c66  ue).        self
-00015820: 2e61 7373 6572 744e 6f74 5265 6765 7828  .assertNotRegex(
-00015830: 7374 646f 7574 2c20 7227 436f 6e74 656e  stdout, r'Conten
-00015840: 742d 456e 636f 6469 6e67 3a5c 732b 677a  t-Encoding:\s+gz
-00015850: 6970 2729 0a20 2020 2020 2020 2073 656c  ip').        sel
-00015860: 662e 5275 6e47 7355 7469 6c28 5b27 6370  f.RunGsUtil(['cp
-00015870: 272c 2075 7269 2c20 7375 7269 2866 7061  ', uri, suri(fpa
-00015880: 7468 3429 5d29 0a20 2020 2020 2020 2077  th4)]).        w
-00015890: 6974 6820 6f70 656e 2866 7061 7468 342c  ith open(fpath4,
-000158a0: 2027 7262 2729 2061 7320 663a 0a20 2020   'rb') as f:.   
-000158b0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-000158c0: 7274 4571 7561 6c28 662e 7265 6164 2829  rtEqual(f.read()
-000158d0: 2c20 636f 6e74 656e 7473 290a 0a20 2020  , contents)..   
-000158e0: 2023 2047 6574 206d 6f63 6b20 6461 7461   # Get mock data
-000158f0: 2c20 7275 6e20 7465 7374 730a 2020 2020  , run tests.    
-00015900: 6275 636b 6574 5f75 7269 2c20 746d 7064  bucket_uri, tmpd
-00015910: 6972 2c20 6c6f 6361 6c5f 7572 6973 203d  ir, local_uris =
-00015920: 205f 6372 6561 7465 5f74 6573 745f 6461   _create_test_da
-00015930: 7461 2829 0a20 2020 2073 7464 6572 7220  ta().    stderr 
-00015940: 3d20 5f75 706c 6f61 645f 7465 7374 5f64  = _upload_test_d
-00015950: 6174 6128 746d 7064 6972 2c20 6275 636b  ata(tmpdir, buck
-00015960: 6574 5f75 7269 290a 2020 2020 5f61 7373  et_uri).    _ass
-00015970: 6572 745f 7365 6e74 5f63 6f6d 7072 6573  ert_sent_compres
-00015980: 7365 6428 6c6f 6361 6c5f 7572 6973 2c20  sed(local_uris, 
-00015990: 7374 6465 7272 290a 2020 2020 5f61 7373  stderr).    _ass
-000159a0: 6572 745f 7374 6f72 6564 5f75 6e63 6f6d  ert_stored_uncom
-000159b0: 7072 6573 7365 6428 6275 636b 6574 5f75  pressed(bucket_u
-000159c0: 7269 290a 0a20 2040 536b 6970 466f 7253  ri)..  @SkipForS
-000159d0: 3328 274e 6f20 636f 6d70 7265 7373 6564  3('No compressed
-000159e0: 2074 7261 6e73 706f 7274 2065 6e63 6f64   transport encod
-000159f0: 696e 6720 7375 7070 6f72 7420 666f 7220  ing support for 
-00015a00: 5333 2e27 290a 2020 4053 6b69 7046 6f72  S3.').  @SkipFor
-00015a10: 584d 4c28 274e 6f20 636f 6d70 7265 7373  XML('No compress
-00015a20: 6564 2074 7261 6e73 706f 7274 2065 6e63  ed transport enc
-00015a30: 6f64 696e 6720 7375 7070 6f72 7420 666f  oding support fo
-00015a40: 7220 7468 6520 584d 4c20 4150 492e 2729  r the XML API.')
-00015a50: 0a20 2040 5365 7175 656e 7469 616c 416e  .  @SequentialAn
-00015a60: 6450 6172 616c 6c65 6c54 7261 6e73 6665  dParallelTransfe
-00015a70: 720a 2020 6465 6620 7465 7374 5f67 7a69  r.  def test_gzi
-00015a80: 705f 7472 616e 7370 6f72 745f 656e 636f  p_transport_enco
-00015a90: 6465 645f 7061 7261 6c6c 656c 5f75 706c  ded_parallel_upl
-00015aa0: 6f61 645f 6e6f 6e5f 7265 7375 6d61 626c  oad_non_resumabl
-00015ab0: 6528 7365 6c66 293a 0a20 2020 2022 2222  e(self):.    """
-00015ac0: 5465 7374 206e 6f6e 2072 6573 756d 6162  Test non resumab
-00015ad0: 6c65 2c20 677a 6970 2065 6e63 6f64 6564  le, gzip encoded
-00015ae0: 2066 696c 6573 2075 706c 6f61 6420 636f   files upload co
-00015af0: 7272 6563 746c 7920 696e 2070 6172 616c  rrectly in paral
-00015b00: 6c65 6c2e 0a0a 2020 2020 5468 6973 2074  lel...    This t
-00015b10: 6573 7420 6765 6e65 7261 7465 7320 6120  est generates a 
-00015b20: 736d 616c 6c20 616d 6f75 6e74 206f 6620  small amount of 
-00015b30: 6461 7461 2028 652e 672e 2031 3030 2063  data (e.g. 100 c
-00015b40: 6861 7273 2920 746f 2075 706c 6f61 642e  hars) to upload.
-00015b50: 0a20 2020 2044 7565 2074 6f20 7468 6520  .    Due to the 
-00015b60: 736d 616c 6c20 7369 7a65 2c20 6974 2077  small size, it w
-00015b70: 696c 6c20 6265 2062 656c 6f77 2074 6865  ill be below the
-00015b80: 2072 6573 756d 6162 6c65 2074 6872 6573   resumable thres
-00015b90: 686f 6c64 2c0a 2020 2020 616e 6420 7465  hold,.    and te
-00015ba0: 7374 2074 6865 2062 6568 6176 696f 7220  st the behavior 
-00015bb0: 6f66 206e 6f6e 2d72 6573 756d 6162 6c65  of non-resumable
-00015bc0: 2075 706c 6f61 6473 2e0a 2020 2020 2222   uploads..    ""
-00015bd0: 220a 2020 2020 2320 5365 7475 7020 7468  ".    # Setup th
-00015be0: 6520 6275 636b 6574 2061 6e64 206c 6f63  e bucket and loc
-00015bf0: 616c 2064 6174 612e 0a20 2020 2062 7563  al data..    buc
-00015c00: 6b65 745f 7572 6920 3d20 7365 6c66 2e43  ket_uri = self.C
-00015c10: 7265 6174 6542 7563 6b65 7428 290a 2020  reateBucket().  
-00015c20: 2020 636f 6e74 656e 7473 203d 2062 2778    contents = b'x
-00015c30: 2720 2a20 3130 300a 2020 2020 746d 7064  ' * 100.    tmpd
-00015c40: 6972 203d 2073 656c 662e 4372 6561 7465  ir = self.Create
-00015c50: 5465 6d70 4469 7228 7465 7374 5f66 696c  TempDir(test_fil
-00015c60: 6573 3d31 302c 2063 6f6e 7465 6e74 733d  es=10, contents=
-00015c70: 636f 6e74 656e 7473 290a 2020 2020 2320  contents).    # 
-00015c80: 5570 6c6f 6164 2074 6865 2064 6174 612e  Upload the data.
-00015c90: 0a20 2020 2077 6974 6820 5365 7442 6f74  .    with SetBot
-00015ca0: 6f43 6f6e 6669 6746 6f72 5465 7374 285b  oConfigForTest([
-00015cb0: 2827 4753 5574 696c 272c 2027 7265 7375  ('GSUtil', 'resu
-00015cc0: 6d61 626c 655f 7468 7265 7368 6f6c 6427  mable_threshold'
-00015cd0: 2c20 7374 7228 4f4e 455f 4b49 4229 290a  , str(ONE_KIB)).
-00015ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015cf0: 2020 2020 2020 2020 2020 2020 2020 5d29                ])
-00015d00: 3a0a 2020 2020 2020 7374 6465 7272 203d  :.      stderr =
-00015d10: 2073 656c 662e 5275 6e47 7355 7469 6c28   self.RunGsUtil(
-00015d20: 0a20 2020 2020 2020 2020 205b 272d 4427  .          ['-D'
-00015d30: 2c20 272d 6d27 2c20 2763 7027 2c20 272d  , '-m', 'cp', '-
-00015d40: 4a27 2c20 272d 7227 2c20 746d 7064 6972  J', '-r', tmpdir
-00015d50: 2c0a 2020 2020 2020 2020 2020 2073 7572  ,.           sur
-00015d60: 6928 6275 636b 6574 5f75 7269 295d 2c0a  i(bucket_uri)],.
-00015d70: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00015d80: 5f73 7464 6572 723d 5472 7565 290a 2020  _stderr=True).  
-00015d90: 2020 2020 2320 456e 7375 7265 2061 6c6c      # Ensure all
-00015da0: 206f 626a 6563 7473 2061 7265 2075 706c   objects are upl
-00015db0: 6f61 6465 642e 0a20 2020 2020 2073 656c  oaded..      sel
-00015dc0: 662e 4173 7365 7274 4e4f 626a 6563 7473  f.AssertNObjects
-00015dd0: 496e 4275 636b 6574 2862 7563 6b65 745f  InBucket(bucket_
-00015de0: 7572 692c 2031 3029 0a20 2020 2020 2023  uri, 10).      #
-00015df0: 2045 6e73 7572 6520 7468 6520 7072 6f67   Ensure the prog
-00015e00: 7265 7373 206c 6f67 6765 7220 7365 6573  ress logger sees
-00015e10: 2061 2067 7a69 7020 656e 636f 6469 6e67   a gzip encoding
-00015e20: 2e0a 2020 2020 2020 7365 6c66 2e61 7373  ..      self.ass
-00015e30: 6572 7449 6e28 2773 656e 643a 2055 7369  ertIn('send: Usi
-00015e40: 6e67 2067 7a69 7020 7472 616e 7370 6f72  ng gzip transpor
-00015e50: 7420 656e 636f 6469 6e67 2066 6f72 2074  t encoding for t
-00015e60: 6865 2072 6571 7565 7374 2e27 2c0a 2020  he request.',.  
-00015e70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015e80: 2020 7374 6465 7272 290a 0a20 2040 536b    stderr)..  @Sk
-00015e90: 6970 466f 7253 3328 274e 6f20 636f 6d70  ipForS3('No comp
-00015ea0: 7265 7373 6564 2074 7261 6e73 706f 7274  ressed transport
-00015eb0: 2065 6e63 6f64 696e 6720 7375 7070 6f72   encoding suppor
-00015ec0: 7420 666f 7220 5333 2e27 290a 2020 4053  t for S3.').  @S
-00015ed0: 6b69 7046 6f72 584d 4c28 274e 6f20 636f  kipForXML('No co
-00015ee0: 6d70 7265 7373 6564 2074 7261 6e73 706f  mpressed transpo
-00015ef0: 7274 2065 6e63 6f64 696e 6720 7375 7070  rt encoding supp
-00015f00: 6f72 7420 666f 7220 7468 6520 584d 4c20  ort for the XML 
-00015f10: 4150 492e 2729 0a20 2040 5365 7175 656e  API.').  @Sequen
-00015f20: 7469 616c 416e 6450 6172 616c 6c65 6c54  tialAndParallelT
-00015f30: 7261 6e73 6665 720a 2020 6465 6620 7465  ransfer.  def te
-00015f40: 7374 5f67 7a69 705f 7472 616e 7370 6f72  st_gzip_transpor
-00015f50: 745f 656e 636f 6465 645f 7061 7261 6c6c  t_encoded_parall
-00015f60: 656c 5f75 706c 6f61 645f 7265 7375 6d61  el_upload_resuma
-00015f70: 626c 6528 7365 6c66 293a 0a20 2020 2022  ble(self):.    "
-00015f80: 2222 5465 7374 2072 6573 756d 6162 6c65  ""Test resumable
-00015f90: 2c20 677a 6970 2065 6e63 6f64 6564 2066  , gzip encoded f
-00015fa0: 696c 6573 2075 706c 6f61 6420 636f 7272  iles upload corr
-00015fb0: 6563 746c 7920 696e 2070 6172 616c 6c65  ectly in paralle
-00015fc0: 6c2e 0a0a 2020 2020 5468 6973 2074 6573  l...    This tes
-00015fd0: 7420 6765 6e65 7261 7465 7320 6120 6c61  t generates a la
-00015fe0: 7267 6520 616d 6f75 6e74 206f 6620 6461  rge amount of da
-00015ff0: 7461 2028 652e 672e 2068 616c 745f 7369  ta (e.g. halt_si
-00016000: 7a65 2061 6d6f 756e 7420 6f66 2063 6861  ze amount of cha
-00016010: 7273 290a 2020 2020 746f 2075 706c 6f61  rs).    to uploa
-00016020: 642e 2044 7565 2074 6f20 7468 6520 6c61  d. Due to the la
-00016030: 7267 6520 7369 7a65 2c20 6974 2077 696c  rge size, it wil
-00016040: 6c20 6265 2061 626f 7665 2074 6865 2072  l be above the r
-00016050: 6573 756d 6162 6c65 2074 6872 6573 686f  esumable thresho
-00016060: 6c64 2c0a 2020 2020 616e 6420 7465 7374  ld,.    and test
-00016070: 2074 6865 2062 6568 6176 696f 7220 6f66   the behavior of
-00016080: 2072 6573 756d 6162 6c65 2075 706c 6f61   resumable uploa
-00016090: 6473 2e0a 2020 2020 2222 220a 2020 2020  ds..    """.    
-000160a0: 2320 5365 7475 7020 7468 6520 6275 636b  # Setup the buck
-000160b0: 6574 2061 6e64 206c 6f63 616c 2064 6174  et and local dat
-000160c0: 612e 0a20 2020 2062 7563 6b65 745f 7572  a..    bucket_ur
-000160d0: 6920 3d20 7365 6c66 2e43 7265 6174 6542  i = self.CreateB
-000160e0: 7563 6b65 7428 290a 2020 2020 636f 6e74  ucket().    cont
-000160f0: 656e 7473 203d 2067 6574 5f72 616e 646f  ents = get_rando
-00016100: 6d5f 6173 6369 695f 6368 6172 7328 7369  m_ascii_chars(si
-00016110: 7a65 3d73 656c 662e 6861 6c74 5f73 697a  ze=self.halt_siz
-00016120: 6529 0a20 2020 2074 6d70 6469 7220 3d20  e).    tmpdir = 
-00016130: 7365 6c66 2e43 7265 6174 6554 656d 7044  self.CreateTempD
-00016140: 6972 2874 6573 745f 6669 6c65 733d 3130  ir(test_files=10
-00016150: 2c20 636f 6e74 656e 7473 3d63 6f6e 7465  , contents=conte
-00016160: 6e74 7329 0a20 2020 2023 2055 706c 6f61  nts).    # Uploa
-00016170: 6420 7468 6520 6461 7461 2e0a 2020 2020  d the data..    
-00016180: 7769 7468 2053 6574 426f 746f 436f 6e66  with SetBotoConf
-00016190: 6967 466f 7254 6573 7428 5b28 2747 5355  igForTest([('GSU
-000161a0: 7469 6c27 2c20 2772 6573 756d 6162 6c65  til', 'resumable
-000161b0: 5f74 6872 6573 686f 6c64 272c 2073 7472  _threshold', str
-000161c0: 284f 4e45 5f4b 4942 2929 0a20 2020 2020  (ONE_KIB)).     
-000161d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000161e0: 2020 2020 2020 2020 205d 293a 0a20 2020           ]):.   
-000161f0: 2020 2073 7464 6572 7220 3d20 7365 6c66     stderr = self
-00016200: 2e52 756e 4773 5574 696c 280a 2020 2020  .RunGsUtil(.    
-00016210: 2020 2020 2020 5b27 2d44 272c 2027 2d6d        ['-D', '-m
-00016220: 272c 2027 6370 272c 2027 2d4a 272c 2027  ', 'cp', '-J', '
-00016230: 2d72 272c 2074 6d70 6469 722c 0a20 2020  -r', tmpdir,.   
-00016240: 2020 2020 2020 2020 7375 7269 2862 7563          suri(buc
-00016250: 6b65 745f 7572 6929 5d2c 0a20 2020 2020  ket_uri)],.     
-00016260: 2020 2020 2072 6574 7572 6e5f 7374 6465       return_stde
-00016270: 7272 3d54 7275 6529 0a20 2020 2020 2023  rr=True).      #
-00016280: 2045 6e73 7572 6520 616c 6c20 6f62 6a65   Ensure all obje
-00016290: 6374 7320 6172 6520 7570 6c6f 6164 6564  cts are uploaded
-000162a0: 2e0a 2020 2020 2020 7365 6c66 2e41 7373  ..      self.Ass
-000162b0: 6572 744e 4f62 6a65 6374 7349 6e42 7563  ertNObjectsInBuc
-000162c0: 6b65 7428 6275 636b 6574 5f75 7269 2c20  ket(bucket_uri, 
-000162d0: 3130 290a 2020 2020 2020 2320 456e 7375  10).      # Ensu
-000162e0: 7265 2074 6865 2070 726f 6772 6573 7320  re the progress 
-000162f0: 6c6f 6767 6572 2073 6565 7320 6120 677a  logger sees a gz
-00016300: 6970 2065 6e63 6f64 696e 672e 0a20 2020  ip encoding..   
-00016310: 2020 2073 656c 662e 6173 7365 7274 496e     self.assertIn
-00016320: 2827 7365 6e64 3a20 5573 696e 6720 677a  ('send: Using gz
-00016330: 6970 2074 7261 6e73 706f 7274 2065 6e63  ip transport enc
-00016340: 6f64 696e 6720 666f 7220 7468 6520 7265  oding for the re
-00016350: 7175 6573 742e 272c 0a20 2020 2020 2020  quest.',.       
-00016360: 2020 2020 2020 2020 2020 2020 2073 7464               std
-00016370: 6572 7229 0a0a 2020 4053 6571 7565 6e74  err)..  @Sequent
-00016380: 6961 6c41 6e64 5061 7261 6c6c 656c 5472  ialAndParallelTr
-00016390: 616e 7366 6572 0a20 2064 6566 2074 6573  ansfer.  def tes
-000163a0: 745f 677a 6970 5f61 6c6c 5f75 706c 6f61  t_gzip_all_uploa
-000163b0: 645f 616e 645f 646f 776e 6c6f 6164 2873  d_and_download(s
-000163c0: 656c 6629 3a0a 2020 2020 6275 636b 6574  elf):.    bucket
-000163d0: 5f75 7269 203d 2073 656c 662e 4372 6561  _uri = self.Crea
-000163e0: 7465 4275 636b 6574 2829 0a20 2020 2063  teBucket().    c
-000163f0: 6f6e 7465 6e74 7320 3d20 6227 7827 202a  ontents = b'x' *
-00016400: 2031 3030 3030 0a20 2020 2074 6d70 6469   10000.    tmpdi
-00016410: 7220 3d20 7365 6c66 2e43 7265 6174 6554  r = self.CreateT
-00016420: 656d 7044 6972 2829 0a20 2020 2073 656c  empDir().    sel
-00016430: 662e 4372 6561 7465 5465 6d70 4669 6c65  f.CreateTempFile
-00016440: 2866 696c 655f 6e61 6d65 3d27 7465 7374  (file_name='test
-00016450: 2e68 746d 6c27 2c20 746d 7064 6972 3d74  .html', tmpdir=t
-00016460: 6d70 6469 722c 2063 6f6e 7465 6e74 733d  mpdir, contents=
-00016470: 636f 6e74 656e 7473 290a 2020 2020 7365  contents).    se
-00016480: 6c66 2e43 7265 6174 6554 656d 7046 696c  lf.CreateTempFil
-00016490: 6528 6669 6c65 5f6e 616d 653d 2774 6573  e(file_name='tes
-000164a0: 742e 6a73 272c 2074 6d70 6469 723d 746d  t.js', tmpdir=tm
-000164b0: 7064 6972 2c20 636f 6e74 656e 7473 3d63  pdir, contents=c
-000164c0: 6f6e 7465 6e74 7329 0a20 2020 2073 656c  ontents).    sel
-000164d0: 662e 4372 6561 7465 5465 6d70 4669 6c65  f.CreateTempFile
-000164e0: 2866 696c 655f 6e61 6d65 3d27 7465 7374  (file_name='test
-000164f0: 2e74 7874 272c 2074 6d70 6469 723d 746d  .txt', tmpdir=tm
-00016500: 7064 6972 2c20 636f 6e74 656e 7473 3d63  pdir, contents=c
-00016510: 6f6e 7465 6e74 7329 0a20 2020 2073 656c  ontents).    sel
-00016520: 662e 4372 6561 7465 5465 6d70 4669 6c65  f.CreateTempFile
-00016530: 2866 696c 655f 6e61 6d65 3d27 7465 7374  (file_name='test
-00016540: 272c 2074 6d70 6469 723d 746d 7064 6972  ', tmpdir=tmpdir
-00016550: 2c20 636f 6e74 656e 7473 3d63 6f6e 7465  , contents=conte
-00016560: 6e74 7329 0a20 2020 2023 2054 6573 7420  nts).    # Test 
-00016570: 7468 6174 2061 6c6c 2066 696c 6573 2061  that all files a
-00016580: 7265 2063 6f6d 7072 6573 7365 642e 0a20  re compressed.. 
-00016590: 2020 2073 656c 662e 5275 6e47 7355 7469     self.RunGsUti
-000165a0: 6c28 0a20 2020 2020 2020 205b 2763 7027  l(.        ['cp'
-000165b0: 2c20 272d 5a27 2c0a 2020 2020 2020 2020  , '-Z',.        
-000165c0: 206f 732e 7061 7468 2e6a 6f69 6e28 746d   os.path.join(tm
-000165d0: 7064 6972 2c20 2774 6573 742a 2729 2c0a  pdir, 'test*'),.
-000165e0: 2020 2020 2020 2020 2073 7572 6928 6275           suri(bu
-000165f0: 636b 6574 5f75 7269 295d 290a 2020 2020  cket_uri)]).    
-00016600: 7365 6c66 2e41 7373 6572 744e 4f62 6a65  self.AssertNObje
-00016610: 6374 7349 6e42 7563 6b65 7428 6275 636b  ctsInBucket(buck
-00016620: 6574 5f75 7269 2c20 3429 0a20 2020 2075  et_uri, 4).    u
-00016630: 7269 3120 3d20 7375 7269 2862 7563 6b65  ri1 = suri(bucke
-00016640: 745f 7572 692c 2027 7465 7374 2e68 746d  t_uri, 'test.htm
-00016650: 6c27 290a 2020 2020 7572 6932 203d 2073  l').    uri2 = s
-00016660: 7572 6928 6275 636b 6574 5f75 7269 2c20  uri(bucket_uri, 
-00016670: 2774 6573 742e 6a73 2729 0a20 2020 2075  'test.js').    u
-00016680: 7269 3320 3d20 7375 7269 2862 7563 6b65  ri3 = suri(bucke
-00016690: 745f 7572 692c 2027 7465 7374 2e74 7874  t_uri, 'test.txt
-000166a0: 2729 0a20 2020 2075 7269 3420 3d20 7375  ').    uri4 = su
-000166b0: 7269 2862 7563 6b65 745f 7572 692c 2027  ri(bucket_uri, '
-000166c0: 7465 7374 2729 0a20 2020 2073 7464 6f75  test').    stdou
-000166d0: 7420 3d20 7365 6c66 2e52 756e 4773 5574  t = self.RunGsUt
-000166e0: 696c 285b 2773 7461 7427 2c20 7572 6931  il(['stat', uri1
-000166f0: 5d2c 2072 6574 7572 6e5f 7374 646f 7574  ], return_stdout
-00016700: 3d54 7275 6529 0a20 2020 2073 656c 662e  =True).    self.
-00016710: 6173 7365 7274 5265 6765 7828 7374 646f  assertRegex(stdo
-00016720: 7574 2c20 7227 436f 6e74 656e 742d 456e  ut, r'Content-En
-00016730: 636f 6469 6e67 3a5c 732b 677a 6970 2729  coding:\s+gzip')
-00016740: 0a20 2020 2073 7464 6f75 7420 3d20 7365  .    stdout = se
-00016750: 6c66 2e52 756e 4773 5574 696c 285b 2773  lf.RunGsUtil(['s
-00016760: 7461 7427 2c20 7572 6932 5d2c 2072 6574  tat', uri2], ret
-00016770: 7572 6e5f 7374 646f 7574 3d54 7275 6529  urn_stdout=True)
-00016780: 0a20 2020 2073 656c 662e 6173 7365 7274  .    self.assert
-00016790: 5265 6765 7828 7374 646f 7574 2c20 7227  Regex(stdout, r'
-000167a0: 436f 6e74 656e 742d 456e 636f 6469 6e67  Content-Encoding
-000167b0: 3a5c 732b 677a 6970 2729 0a20 2020 2073  :\s+gzip').    s
-000167c0: 7464 6f75 7420 3d20 7365 6c66 2e52 756e  tdout = self.Run
-000167d0: 4773 5574 696c 285b 2773 7461 7427 2c20  GsUtil(['stat', 
-000167e0: 7572 6933 5d2c 2072 6574 7572 6e5f 7374  uri3], return_st
-000167f0: 646f 7574 3d54 7275 6529 0a20 2020 2073  dout=True).    s
-00016800: 656c 662e 6173 7365 7274 5265 6765 7828  elf.assertRegex(
-00016810: 7374 646f 7574 2c20 7227 436f 6e74 656e  stdout, r'Conten
-00016820: 742d 456e 636f 6469 6e67 3a5c 732b 677a  t-Encoding:\s+gz
-00016830: 6970 2729 0a20 2020 2073 7464 6f75 7420  ip').    stdout 
-00016840: 3d20 7365 6c66 2e52 756e 4773 5574 696c  = self.RunGsUtil
-00016850: 285b 2773 7461 7427 2c20 7572 6934 5d2c  (['stat', uri4],
-00016860: 2072 6574 7572 6e5f 7374 646f 7574 3d54   return_stdout=T
-00016870: 7275 6529 0a20 2020 2073 656c 662e 6173  rue).    self.as
-00016880: 7365 7274 5265 6765 7828 7374 646f 7574  sertRegex(stdout
-00016890: 2c20 7227 436f 6e74 656e 742d 456e 636f  , r'Content-Enco
-000168a0: 6469 6e67 3a5c 732b 677a 6970 2729 0a20  ding:\s+gzip'). 
-000168b0: 2020 2066 7061 7468 3420 3d20 7365 6c66     fpath4 = self
-000168c0: 2e43 7265 6174 6554 656d 7046 696c 6528  .CreateTempFile(
-000168d0: 290a 2020 2020 666f 7220 7572 6920 696e  ).    for uri in
-000168e0: 2028 7572 6931 2c20 7572 6932 2c20 7572   (uri1, uri2, ur
-000168f0: 6933 2c20 7572 6934 293a 0a20 2020 2020  i3, uri4):.     
-00016900: 2073 656c 662e 5275 6e47 7355 7469 6c28   self.RunGsUtil(
-00016910: 5b27 6370 272c 2075 7269 2c20 7375 7269  ['cp', uri, suri
-00016920: 2866 7061 7468 3429 5d29 0a20 2020 2020  (fpath4)]).     
-00016930: 2077 6974 6820 6f70 656e 2866 7061 7468   with open(fpath
-00016940: 342c 2027 7262 2729 2061 7320 663a 0a20  4, 'rb') as f:. 
-00016950: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-00016960: 7274 4571 7561 6c28 662e 7265 6164 2829  rtEqual(f.read()
-00016970: 2c20 636f 6e74 656e 7473 290a 0a20 2040  , contents)..  @
-00016980: 536b 6970 466f 7253 3328 274e 6f20 636f  SkipForS3('No co
-00016990: 6d70 7265 7373 6564 2074 7261 6e73 706f  mpressed transpo
-000169a0: 7274 2065 6e63 6f64 696e 6720 7375 7070  rt encoding supp
-000169b0: 6f72 7420 666f 7220 5333 2e27 290a 2020  ort for S3.').  
-000169c0: 4053 6b69 7046 6f72 584d 4c28 274e 6f20  @SkipForXML('No 
-000169d0: 636f 6d70 7265 7373 6564 2074 7261 6e73  compressed trans
-000169e0: 706f 7274 2065 6e63 6f64 696e 6720 7375  port encoding su
-000169f0: 7070 6f72 7420 666f 7220 7468 6520 584d  pport for the XM
-00016a00: 4c20 4150 492e 2729 0a20 2040 5365 7175  L API.').  @Sequ
-00016a10: 656e 7469 616c 416e 6450 6172 616c 6c65  entialAndParalle
-00016a20: 6c54 7261 6e73 6665 720a 2020 6465 6620  lTransfer.  def 
-00016a30: 7465 7374 5f67 7a69 705f 7472 616e 7370  test_gzip_transp
-00016a40: 6f72 745f 656e 636f 6465 645f 616c 6c5f  ort_encoded_all_
-00016a50: 7570 6c6f 6164 5f61 6e64 5f64 6f77 6e6c  upload_and_downl
-00016a60: 6f61 6428 7365 6c66 293a 0a20 2020 2022  oad(self):.    "
-00016a70: 2222 5465 7374 2067 7a69 7020 656e 636f  ""Test gzip enco
-00016a80: 6465 6420 6669 6c65 7320 7570 6c6f 6164  ded files upload
-00016a90: 2063 6f72 7265 6374 6c79 2e0a 0a20 2020   correctly...   
-00016aa0: 2054 6869 7320 6368 6563 6b73 2074 6861   This checks tha
-00016ab0: 7420 6669 6c65 7320 6172 6520 6e6f 7420  t files are not 
-00016ac0: 7461 6767 6564 2077 6974 6820 6120 677a  tagged with a gz
-00016ad0: 6970 2063 6f6e 7465 6e74 2065 6e63 6f64  ip content encod
-00016ae0: 696e 6720 616e 640a 2020 2020 7468 6174  ing and.    that
-00016af0: 2074 6865 2063 6f6e 7465 6e74 7320 6f66   the contents of
-00016b00: 2074 6865 2066 696c 6573 2061 7265 2075   the files are u
-00016b10: 6e63 6f6d 7072 6573 7365 6420 696e 2047  ncompressed in G
-00016b20: 4353 2e20 5468 6973 2074 6573 7420 7573  CS. This test us
-00016b30: 6573 2074 6865 0a20 2020 202d 4a20 666c  es the.    -J fl
-00016b40: 6167 2074 6f20 7461 7267 6574 2061 6c6c  ag to target all
-00016b50: 2066 696c 6573 2e0a 2020 2020 2222 220a   files..    """.
-00016b60: 2020 2020 2320 5365 7475 7020 7468 6520      # Setup the 
-00016b70: 6275 636b 6574 2061 6e64 206c 6f63 616c  bucket and local
-00016b80: 2064 6174 612e 0a20 2020 2062 7563 6b65   data..    bucke
-00016b90: 745f 7572 6920 3d20 7365 6c66 2e43 7265  t_uri = self.Cre
-00016ba0: 6174 6542 7563 6b65 7428 290a 2020 2020  ateBucket().    
-00016bb0: 636f 6e74 656e 7473 203d 2062 2778 2720  contents = b'x' 
-00016bc0: 2a20 3130 3030 300a 2020 2020 746d 7064  * 10000.    tmpd
-00016bd0: 6972 203d 2073 656c 662e 4372 6561 7465  ir = self.Create
-00016be0: 5465 6d70 4469 7228 290a 2020 2020 6c6f  TempDir().    lo
-00016bf0: 6361 6c5f 7572 6931 203d 2073 656c 662e  cal_uri1 = self.
-00016c00: 4372 6561 7465 5465 6d70 4669 6c65 2866  CreateTempFile(f
-00016c10: 696c 655f 6e61 6d65 3d27 7465 7374 2e74  ile_name='test.t
-00016c20: 7874 272c 0a20 2020 2020 2020 2020 2020  xt',.           
-00016c30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016c40: 2020 2020 2020 2020 2020 746d 7064 6972            tmpdir
-00016c50: 3d74 6d70 6469 722c 0a20 2020 2020 2020  =tmpdir,.       
-00016c60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016c70: 2020 2020 2020 2020 2020 2020 2020 636f                co
-00016c80: 6e74 656e 7473 3d63 6f6e 7465 6e74 7329  ntents=contents)
-00016c90: 0a20 2020 206c 6f63 616c 5f75 7269 3220  .    local_uri2 
-00016ca0: 3d20 7365 6c66 2e43 7265 6174 6554 656d  = self.CreateTem
-00016cb0: 7046 696c 6528 6669 6c65 5f6e 616d 653d  pFile(file_name=
-00016cc0: 2774 6573 7427 2c0a 2020 2020 2020 2020  'test',.        
-00016cd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016ce0: 2020 2020 2020 2020 2020 2020 2074 6d70               tmp
-00016cf0: 6469 723d 746d 7064 6972 2c0a 2020 2020  dir=tmpdir,.    
-00016d00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016d20: 2063 6f6e 7465 6e74 733d 636f 6e74 656e   contents=conten
-00016d30: 7473 290a 2020 2020 2320 5570 6c6f 6164  ts).    # Upload
-00016d40: 2074 6865 2064 6174 612e 0a20 2020 2073   the data..    s
-00016d50: 7464 6572 7220 3d20 7365 6c66 2e52 756e  tderr = self.Run
-00016d60: 4773 5574 696c 280a 2020 2020 2020 2020  GsUtil(.        
-00016d70: 5b27 2d44 272c 2027 6370 272c 2027 2d4a  ['-D', 'cp', '-J
-00016d80: 272c 0a20 2020 2020 2020 2020 6f73 2e70  ',.         os.p
-00016d90: 6174 682e 6a6f 696e 2874 6d70 6469 722c  ath.join(tmpdir,
-00016da0: 2027 7465 7374 2a27 292c 0a20 2020 2020   'test*'),.     
-00016db0: 2020 2020 7375 7269 2862 7563 6b65 745f      suri(bucket_
-00016dc0: 7572 6929 5d2c 0a20 2020 2020 2020 2072  uri)],.        r
-00016dd0: 6574 7572 6e5f 7374 6465 7272 3d54 7275  eturn_stderr=Tru
-00016de0: 6529 0a20 2020 2073 656c 662e 4173 7365  e).    self.Asse
-00016df0: 7274 4e4f 626a 6563 7473 496e 4275 636b  rtNObjectsInBuck
-00016e00: 6574 2862 7563 6b65 745f 7572 692c 2032  et(bucket_uri, 2
-00016e10: 290a 2020 2020 2320 456e 7375 7265 2074  ).    # Ensure t
-00016e20: 6865 2063 6f72 7265 6374 2066 696c 6573  he correct files
-00016e30: 2077 6572 6520 6d61 726b 6564 2066 6f72   were marked for
-00016e40: 2063 6f6d 7072 6573 7369 6f6e 2e0a 2020   compression..  
-00016e50: 2020 7365 6c66 2e61 7373 6572 7449 6e28    self.assertIn(
-00016e60: 0a20 2020 2020 2020 2027 5573 696e 6720  .        'Using 
-00016e70: 636f 6d70 7265 7373 6564 2074 7261 6e73  compressed trans
-00016e80: 706f 7274 2065 6e63 6f64 696e 6720 666f  port encoding fo
-00016e90: 7220 6669 6c65 3a2f 2f25 732e 2720 2520  r file://%s.' % 
-00016ea0: 286c 6f63 616c 5f75 7269 3129 2c0a 2020  (local_uri1),.  
-00016eb0: 2020 2020 2020 7374 6465 7272 290a 2020        stderr).  
-00016ec0: 2020 7365 6c66 2e61 7373 6572 7449 6e28    self.assertIn(
-00016ed0: 0a20 2020 2020 2020 2027 5573 696e 6720  .        'Using 
-00016ee0: 636f 6d70 7265 7373 6564 2074 7261 6e73  compressed trans
-00016ef0: 706f 7274 2065 6e63 6f64 696e 6720 666f  port encoding fo
-00016f00: 7220 6669 6c65 3a2f 2f25 732e 2720 2520  r file://%s.' % 
-00016f10: 286c 6f63 616c 5f75 7269 3229 2c0a 2020  (local_uri2),.  
-00016f20: 2020 2020 2020 7374 6465 7272 290a 2020        stderr).  
-00016f30: 2020 2320 456e 7375 7265 2074 6865 2070    # Ensure the p
-00016f40: 726f 6772 6573 7320 6c6f 6767 6572 2073  rogress logger s
-00016f50: 6565 7320 6120 677a 6970 2065 6e63 6f64  ees a gzip encod
-00016f60: 696e 672e 0a20 2020 2073 656c 662e 6173  ing..    self.as
-00016f70: 7365 7274 496e 2827 7365 6e64 3a20 5573  sertIn('send: Us
-00016f80: 696e 6720 677a 6970 2074 7261 6e73 706f  ing gzip transpo
-00016f90: 7274 2065 6e63 6f64 696e 6720 666f 7220  rt encoding for 
-00016fa0: 7468 6520 7265 7175 6573 742e 272c 0a20  the request.',. 
-00016fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016fc0: 2073 7464 6572 7229 0a20 2020 2023 2045   stderr).    # E
-00016fd0: 6e73 7572 6520 7468 6520 6669 6c65 7320  nsure the files 
-00016fe0: 646f 206e 6f74 2068 6176 6520 6120 7374  do not have a st
-00016ff0: 6f72 6564 2065 6e63 6f64 696e 6720 6f66  ored encoding of
-00017000: 2067 7a69 7020 616e 6420 6172 6520 7374   gzip and are st
-00017010: 6f72 6564 0a20 2020 2023 2075 6e63 6f6d  ored.    # uncom
-00017020: 7072 6573 7365 642e 0a20 2020 2072 656d  pressed..    rem
-00017030: 6f74 655f 7572 6931 203d 2073 7572 6928  ote_uri1 = suri(
-00017040: 6275 636b 6574 5f75 7269 2c20 2774 6573  bucket_uri, 'tes
-00017050: 742e 7478 7427 290a 2020 2020 7265 6d6f  t.txt').    remo
-00017060: 7465 5f75 7269 3220 3d20 7375 7269 2862  te_uri2 = suri(b
-00017070: 7563 6b65 745f 7572 692c 2027 7465 7374  ucket_uri, 'test
-00017080: 2729 0a20 2020 2066 7061 7468 3420 3d20  ').    fpath4 = 
-00017090: 7365 6c66 2e43 7265 6174 6554 656d 7046  self.CreateTempF
-000170a0: 696c 6528 290a 2020 2020 666f 7220 7572  ile().    for ur
-000170b0: 6920 696e 2028 7265 6d6f 7465 5f75 7269  i in (remote_uri
-000170c0: 312c 2072 656d 6f74 655f 7572 6932 293a  1, remote_uri2):
-000170d0: 0a20 2020 2020 2073 7464 6f75 7420 3d20  .      stdout = 
-000170e0: 7365 6c66 2e52 756e 4773 5574 696c 285b  self.RunGsUtil([
-000170f0: 2773 7461 7427 2c20 7572 695d 2c20 7265  'stat', uri], re
-00017100: 7475 726e 5f73 7464 6f75 743d 5472 7565  turn_stdout=True
-00017110: 290a 2020 2020 2020 7365 6c66 2e61 7373  ).      self.ass
-00017120: 6572 744e 6f74 5265 6765 7828 7374 646f  ertNotRegex(stdo
-00017130: 7574 2c20 7227 436f 6e74 656e 742d 456e  ut, r'Content-En
-00017140: 636f 6469 6e67 3a5c 732b 677a 6970 2729  coding:\s+gzip')
-00017150: 0a20 2020 2020 2073 656c 662e 5275 6e47  .      self.RunG
-00017160: 7355 7469 6c28 5b27 6370 272c 2075 7269  sUtil(['cp', uri
-00017170: 2c20 7375 7269 2866 7061 7468 3429 5d29  , suri(fpath4)])
-00017180: 0a20 2020 2020 2077 6974 6820 6f70 656e  .      with open
-00017190: 2866 7061 7468 342c 2027 7262 2729 2061  (fpath4, 'rb') a
-000171a0: 7320 663a 0a20 2020 2020 2020 2073 656c  s f:.        sel
-000171b0: 662e 6173 7365 7274 4571 7561 6c28 662e  f.assertEqual(f.
-000171c0: 7265 6164 2829 2c20 636f 6e74 656e 7473  read(), contents
-000171d0: 290a 0a20 2064 6566 2074 6573 745f 626f  )..  def test_bo
-000171e0: 7468 5f67 7a69 705f 6f70 7469 6f6e 735f  th_gzip_options_
-000171f0: 6572 726f 7228 7365 6c66 293a 0a20 2020  error(self):.   
-00017200: 2022 2222 5465 7374 2074 6861 7420 6d69   """Test that mi
-00017210: 7869 6e67 2063 6f6d 7072 6573 7369 6f6e  xing compression
-00017220: 2066 6c61 6773 2065 7272 6f72 2e22 2222   flags error."""
-00017230: 0a20 2020 2063 6173 6573 203d 2028 0a20  .    cases = (. 
-00017240: 2020 2020 2020 2023 2054 6573 7420 7769         # Test wi
-00017250: 7468 202d 5a20 616e 6420 2d7a 0a20 2020  th -Z and -z.   
-00017260: 2020 2020 205b 2763 7027 2c20 272d 5a27       ['cp', '-Z'
-00017270: 2c20 272d 7a27 2c20 2768 746d 6c2c 206a  , '-z', 'html, j
-00017280: 7327 2c20 2761 2e6a 7327 2c20 2762 2e6a  s', 'a.js', 'b.j
-00017290: 7327 5d2c 0a20 2020 2020 2020 2023 2053  s'],.        # S
-000172a0: 616d 6520 7465 7374 2c20 6275 7420 7769  ame test, but wi
-000172b0: 7468 2061 7267 756d 656e 7473 2069 6e20  th arguments in 
-000172c0: 7468 6520 6f70 706f 7369 7465 206f 7264  the opposite ord
-000172d0: 6572 2e0a 2020 2020 2020 2020 5b27 6370  er..        ['cp
-000172e0: 272c 2027 2d7a 272c 2027 6874 6d6c 2c20  ', '-z', 'html, 
-000172f0: 6a73 272c 2027 2d5a 272c 2027 612e 6a73  js', '-Z', 'a.js
-00017300: 272c 2027 622e 6a73 275d 290a 0a20 2020  ', 'b.js'])..   
-00017310: 2066 6f72 2063 6173 6520 696e 2063 6173   for case in cas
-00017320: 6573 3a0a 2020 2020 2020 7374 6465 7272  es:.      stderr
-00017330: 203d 2073 656c 662e 5275 6e47 7355 7469   = self.RunGsUti
-00017340: 6c28 6361 7365 2c20 7265 7475 726e 5f73  l(case, return_s
-00017350: 7464 6572 723d 5472 7565 2c20 6578 7065  tderr=True, expe
-00017360: 6374 6564 5f73 7461 7475 733d 3129 0a20  cted_status=1). 
-00017370: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00017380: 496e 2827 436f 6d6d 616e 6445 7863 6570  In('CommandExcep
-00017390: 7469 6f6e 272c 2073 7464 6572 7229 0a20  tion', stderr). 
-000173a0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-000173b0: 496e 280a 2020 2020 2020 2020 2020 2753  In(.          'S
-000173c0: 7065 6369 6679 696e 6720 626f 7468 2074  pecifying both t
-000173d0: 6865 202d 7a20 616e 6420 2d5a 206f 7074  he -z and -Z opt
-000173e0: 696f 6e73 2074 6f67 6574 6865 7220 6973  ions together is
-000173f0: 2069 6e76 616c 6964 2e27 2c20 7374 6465   invalid.', stde
-00017400: 7272 290a 0a20 2064 6566 2074 6573 745f  rr)..  def test_
-00017410: 626f 7468 5f67 7a69 705f 7472 616e 7370  both_gzip_transp
-00017420: 6f72 745f 656e 636f 6469 6e67 5f6f 7074  ort_encoding_opt
-00017430: 696f 6e73 5f65 7272 6f72 2873 656c 6629  ions_error(self)
-00017440: 3a0a 2020 2020 2222 2254 6573 7420 7468  :.    """Test th
-00017450: 6174 206d 6978 696e 6720 7472 616e 7370  at mixing transp
-00017460: 6f72 7420 656e 636f 6469 6e67 2066 6c61  ort encoding fla
-00017470: 6773 2065 7272 6f72 2e22 2222 0a20 2020  gs error.""".   
-00017480: 2063 6173 6573 203d 2028 0a20 2020 2020   cases = (.     
-00017490: 2020 2023 2054 6573 7420 7769 7468 202d     # Test with -
-000174a0: 4a20 616e 6420 2d6a 0a20 2020 2020 2020  J and -j.       
-000174b0: 205b 2763 7027 2c20 272d 4a27 2c20 272d   ['cp', '-J', '-
-000174c0: 6a27 2c20 2768 746d 6c2c 206a 7327 2c20  j', 'html, js', 
-000174d0: 2761 2e6a 7327 2c20 2762 2e6a 7327 5d2c  'a.js', 'b.js'],
-000174e0: 0a20 2020 2020 2020 2023 2053 616d 6520  .        # Same 
-000174f0: 7465 7374 2c20 6275 7420 7769 7468 2061  test, but with a
-00017500: 7267 756d 656e 7473 2069 6e20 7468 6520  rguments in the 
-00017510: 6f70 706f 7369 7465 206f 7264 6572 2e0a  opposite order..
-00017520: 2020 2020 2020 2020 5b27 6370 272c 2027          ['cp', '
-00017530: 2d6a 272c 2027 6874 6d6c 2c20 6a73 272c  -j', 'html, js',
-00017540: 2027 2d4a 272c 2027 612e 6a73 272c 2027   '-J', 'a.js', '
-00017550: 622e 6a73 275d 290a 0a20 2020 2066 6f72  b.js'])..    for
-00017560: 2063 6173 6520 696e 2063 6173 6573 3a0a   case in cases:.
-00017570: 2020 2020 2020 7374 6465 7272 203d 2073        stderr = s
-00017580: 656c 662e 5275 6e47 7355 7469 6c28 6361  elf.RunGsUtil(ca
-00017590: 7365 2c20 7265 7475 726e 5f73 7464 6572  se, return_stder
-000175a0: 723d 5472 7565 2c20 6578 7065 6374 6564  r=True, expected
-000175b0: 5f73 7461 7475 733d 3129 0a20 2020 2020  _status=1).     
-000175c0: 2073 656c 662e 6173 7365 7274 496e 2827   self.assertIn('
-000175d0: 436f 6d6d 616e 6445 7863 6570 7469 6f6e  CommandException
-000175e0: 272c 2073 7464 6572 7229 0a20 2020 2020  ', stderr).     
-000175f0: 2073 656c 662e 6173 7365 7274 496e 280a   self.assertIn(.
-00017600: 2020 2020 2020 2020 2020 2753 7065 6369            'Speci
-00017610: 6679 696e 6720 626f 7468 2074 6865 202d  fying both the -
-00017620: 6a20 616e 6420 2d4a 206f 7074 696f 6e73  j and -J options
-00017630: 2074 6f67 6574 6865 7220 6973 2069 6e76   together is inv
-00017640: 616c 6964 2e27 2c20 7374 6465 7272 290a  alid.', stderr).
-00017650: 0a20 2064 6566 2074 6573 745f 636f 6d62  .  def test_comb
-00017660: 696e 6564 5f67 7a69 705f 6f70 7469 6f6e  ined_gzip_option
-00017670: 735f 6572 726f 7228 7365 6c66 293a 0a20  s_error(self):. 
-00017680: 2020 2022 2222 5465 7374 2074 6861 7420     """Test that 
-00017690: 6d69 7869 6e67 2074 7261 6e73 706f 7274  mixing transport
-000176a0: 2065 6e63 6f64 696e 6720 616e 6420 636f   encoding and co
-000176b0: 6d70 7265 7373 696f 6e20 666c 6167 7320  mpression flags 
-000176c0: 6572 726f 722e 2222 220a 2020 2020 6361  error.""".    ca
-000176d0: 7365 7320 3d20 285b 2763 7027 2c20 272d  ses = (['cp', '-
-000176e0: 5a27 2c20 272d 6a27 2c20 2768 746d 6c2c  Z', '-j', 'html,
-000176f0: 206a 7327 2c20 2761 2e6a 7327 2c0a 2020   js', 'a.js',.  
-00017700: 2020 2020 2020 2020 2020 2020 2762 2e6a              'b.j
-00017710: 7327 5d2c 205b 2763 7027 2c20 272d 4a27  s'], ['cp', '-J'
-00017720: 2c20 272d 7a27 2c20 2768 746d 6c2c 206a  , '-z', 'html, j
-00017730: 7327 2c20 2761 2e6a 7327 2c0a 2020 2020  s', 'a.js',.    
-00017740: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017750: 2020 2020 2762 2e6a 7327 5d2c 205b 2763      'b.js'], ['c
-00017760: 7027 2c20 272d 6a27 2c20 2768 746d 6c2c  p', '-j', 'html,
-00017770: 206a 7327 2c20 272d 5a27 2c20 2761 2e6a   js', '-Z', 'a.j
-00017780: 7327 2c20 2762 2e6a 7327 5d2c 0a20 2020  s', 'b.js'],.   
-00017790: 2020 2020 2020 2020 2020 5b27 6370 272c            ['cp',
-000177a0: 2027 2d7a 272c 2027 6874 6d6c 2c20 6a73   '-z', 'html, js
-000177b0: 272c 2027 2d4a 272c 2027 612e 6a73 272c  ', '-J', 'a.js',
-000177c0: 2027 622e 6a73 275d 290a 0a20 2020 2066   'b.js'])..    f
-000177d0: 6f72 2063 6173 6520 696e 2063 6173 6573  or case in cases
-000177e0: 3a0a 2020 2020 2020 7374 6465 7272 203d  :.      stderr =
-000177f0: 2073 656c 662e 5275 6e47 7355 7469 6c28   self.RunGsUtil(
-00017800: 6361 7365 2c20 7265 7475 726e 5f73 7464  case, return_std
-00017810: 6572 723d 5472 7565 2c20 6578 7065 6374  err=True, expect
-00017820: 6564 5f73 7461 7475 733d 3129 0a20 2020  ed_status=1).   
-00017830: 2020 2073 656c 662e 6173 7365 7274 496e     self.assertIn
-00017840: 2827 436f 6d6d 616e 6445 7863 6570 7469  ('CommandExcepti
-00017850: 6f6e 272c 2073 7464 6572 7229 0a20 2020  on', stderr).   
-00017860: 2020 2073 656c 662e 6173 7365 7274 496e     self.assertIn
-00017870: 280a 2020 2020 2020 2020 2020 2753 7065  (.          'Spe
-00017880: 6369 6679 696e 6720 626f 7468 2074 6865  cifying both the
-00017890: 202d 6a2f 2d4a 2061 6e64 202d 7a2f 2d5a   -j/-J and -z/-Z
-000178a0: 206f 7074 696f 6e73 2074 6f67 6574 6865   options togethe
-000178b0: 7220 6973 2069 6e76 616c 6964 2e27 2c0a  r is invalid.',.
-000178c0: 2020 2020 2020 2020 2020 7374 6465 7272            stderr
-000178d0: 290a 0a20 2064 6566 2074 6573 745f 7570  )..  def test_up
-000178e0: 6c6f 6164 5f77 6974 685f 7375 6264 6972  load_with_subdir
-000178f0: 5f61 6e64 5f75 6e65 7870 616e 6465 645f  _and_unexpanded_
-00017900: 7769 6c64 6361 7264 2873 656c 6629 3a0a  wildcard(self):.
-00017910: 2020 2020 6670 6174 6831 203d 2073 656c      fpath1 = sel
-00017920: 662e 4372 6561 7465 5465 6d70 4669 6c65  f.CreateTempFile
-00017930: 2866 696c 655f 6e61 6d65 3d28 2774 6d70  (file_name=('tmp
-00017940: 272c 2027 7827 2c20 2779 272c 2027 7a27  ', 'x', 'y', 'z'
-00017950: 2929 0a20 2020 2062 7563 6b65 745f 7572  )).    bucket_ur
-00017960: 6920 3d20 7365 6c66 2e43 7265 6174 6542  i = self.CreateB
-00017970: 7563 6b65 7428 290a 2020 2020 7769 6c64  ucket().    wild
-00017980: 6361 7264 5f75 7269 203d 2027 2573 2a27  card_uri = '%s*'
-00017990: 2025 2066 7061 7468 315b 3a2d 355d 0a20   % fpath1[:-5]. 
-000179a0: 2020 2073 7464 6572 7220 3d20 7365 6c66     stderr = self
-000179b0: 2e52 756e 4773 5574 696c 280a 2020 2020  .RunGsUtil(.    
-000179c0: 2020 2020 5b27 6370 272c 2027 2d52 272c      ['cp', '-R',
-000179d0: 2077 696c 6463 6172 645f 7572 692c 2073   wildcard_uri, s
-000179e0: 7572 6928 6275 636b 6574 5f75 7269 295d  uri(bucket_uri)]
-000179f0: 2c20 7265 7475 726e 5f73 7464 6572 723d  , return_stderr=
-00017a00: 5472 7565 290a 2020 2020 7365 6c66 2e61  True).    self.a
-00017a10: 7373 6572 7449 6e28 2743 6f70 7969 6e67  ssertIn('Copying
-00017a20: 2066 696c 653a 272c 2073 7464 6572 7229   file:', stderr)
-00017a30: 0a20 2020 2073 656c 662e 4173 7365 7274  .    self.Assert
-00017a40: 4e4f 626a 6563 7473 496e 4275 636b 6574  NObjectsInBucket
-00017a50: 2862 7563 6b65 745f 7572 692c 2031 290a  (bucket_uri, 1).
-00017a60: 0a20 2064 6566 2074 6573 745f 7570 6c6f  .  def test_uplo
-00017a70: 6164 5f64 6f65 735f 6e6f 745f 7261 6973  ad_does_not_rais
-00017a80: 655f 7769 7468 5f63 6f6e 7465 6e74 5f6d  e_with_content_m
-00017a90: 6435 5f61 6e64 5f63 6865 636b 5f68 6173  d5_and_check_has
-00017aa0: 6865 735f 6e65 7665 7228 7365 6c66 293a  hes_never(self):
-00017ab0: 0a20 2020 2066 7061 7468 3120 3d20 7365  .    fpath1 = se
-00017ac0: 6c66 2e43 7265 6174 6554 656d 7046 696c  lf.CreateTempFil
-00017ad0: 6528 6669 6c65 5f6e 616d 653d 2827 666f  e(file_name=('fo
-00017ae0: 6f27 2929 0a20 2020 2062 7563 6b65 745f  o')).    bucket_
-00017af0: 7572 6920 3d20 7365 6c66 2e43 7265 6174  uri = self.Creat
-00017b00: 6542 7563 6b65 7428 290a 2020 2020 7769  eBucket().    wi
-00017b10: 7468 2053 6574 426f 746f 436f 6e66 6967  th SetBotoConfig
-00017b20: 466f 7254 6573 7428 5b28 2747 5355 7469  ForTest([('GSUti
-00017b30: 6c27 2c20 2763 6865 636b 5f68 6173 6865  l', 'check_hashe
-00017b40: 7327 2c20 276e 6576 6572 2729 5d29 3a0a  s', 'never')]):.
-00017b50: 2020 2020 2020 7374 6465 7272 203d 2073        stderr = s
-00017b60: 656c 662e 5275 6e47 7355 7469 6c28 0a20  elf.RunGsUtil(. 
-00017b70: 2020 2020 2020 2020 205b 272d 6827 2c20           ['-h', 
-00017b80: 2743 6f6e 7465 6e74 2d4d 4435 3a20 696e  'Content-MD5: in
-00017b90: 7661 6c69 642d 6d64 3527 2c20 2763 7027  valid-md5', 'cp'
-00017ba0: 2c20 6670 6174 6831 2c0a 2020 2020 2020  , fpath1,.      
-00017bb0: 2020 2020 2073 7572 6928 6275 636b 6574       suri(bucket
-00017bc0: 5f75 7269 295d 2c0a 2020 2020 2020 2020  _uri)],.        
-00017bd0: 2020 7265 7475 726e 5f73 7464 6572 723d    return_stderr=
-00017be0: 5472 7565 290a 2020 2020 2020 7365 6c66  True).      self
-00017bf0: 2e61 7373 6572 7449 6e28 2743 6f70 7969  .assertIn('Copyi
-00017c00: 6e67 2066 696c 653a 272c 2073 7464 6572  ng file:', stder
-00017c10: 7229 0a20 2020 2073 656c 662e 4173 7365  r).    self.Asse
-00017c20: 7274 4e4f 626a 6563 7473 496e 4275 636b  rtNObjectsInBuck
-00017c30: 6574 2862 7563 6b65 745f 7572 692c 2031  et(bucket_uri, 1
-00017c40: 290a 0a20 2040 5365 7175 656e 7469 616c  )..  @Sequential
-00017c50: 416e 6450 6172 616c 6c65 6c54 7261 6e73  AndParallelTrans
-00017c60: 6665 720a 2020 6465 6620 7465 7374 5f63  fer.  def test_c
-00017c70: 705f 6f62 6a65 6374 5f65 6e64 696e 675f  p_object_ending_
-00017c80: 7769 7468 5f73 6c61 7368 2873 656c 6629  with_slash(self)
-00017c90: 3a0a 2020 2020 2222 2254 6573 7473 2074  :.    """Tests t
-00017ca0: 6861 7420 6370 2077 6f72 6b73 2077 6974  hat cp works wit
-00017cb0: 6820 6f62 6a65 6374 206e 616d 6573 2065  h object names e
-00017cc0: 6e64 696e 6720 7769 7468 2073 6c61 7368  nding with slash
-00017cd0: 2e22 2222 0a20 2020 2074 6d70 6469 7220  .""".    tmpdir 
-00017ce0: 3d20 7365 6c66 2e43 7265 6174 6554 656d  = self.CreateTem
-00017cf0: 7044 6972 2829 0a20 2020 2062 7563 6b65  pDir().    bucke
-00017d00: 745f 7572 6920 3d20 7365 6c66 2e43 7265  t_uri = self.Cre
-00017d10: 6174 6542 7563 6b65 7428 290a 2020 2020  ateBucket().    
-00017d20: 7365 6c66 2e43 7265 6174 654f 626a 6563  self.CreateObjec
-00017d30: 7428 6275 636b 6574 5f75 7269 3d62 7563  t(bucket_uri=buc
-00017d40: 6b65 745f 7572 692c 0a20 2020 2020 2020  ket_uri,.       
-00017d50: 2020 2020 2020 2020 2020 2020 2020 206f                 o
-00017d60: 626a 6563 745f 6e61 6d65 3d27 6162 632f  bject_name='abc/
-00017d70: 272c 0a20 2020 2020 2020 2020 2020 2020  ',.             
-00017d80: 2020 2020 2020 2020 2063 6f6e 7465 6e74           content
-00017d90: 733d 6227 6469 7227 290a 2020 2020 7365  s=b'dir').    se
-00017da0: 6c66 2e43 7265 6174 654f 626a 6563 7428  lf.CreateObject(
-00017db0: 6275 636b 6574 5f75 7269 3d62 7563 6b65  bucket_uri=bucke
-00017dc0: 745f 7572 692c 0a20 2020 2020 2020 2020  t_uri,.         
-00017dd0: 2020 2020 2020 2020 2020 2020 206f 626a               obj
-00017de0: 6563 745f 6e61 6d65 3d27 6162 632f 6465  ect_name='abc/de
-00017df0: 6627 2c0a 2020 2020 2020 2020 2020 2020  f',.            
-00017e00: 2020 2020 2020 2020 2020 636f 6e74 656e            conten
-00017e10: 7473 3d62 2764 6566 2729 0a20 2020 2073  ts=b'def').    s
-00017e20: 656c 662e 4173 7365 7274 4e4f 626a 6563  elf.AssertNObjec
-00017e30: 7473 496e 4275 636b 6574 2862 7563 6b65  tsInBucket(bucke
-00017e40: 745f 7572 692c 2032 290a 2020 2020 7365  t_uri, 2).    se
-00017e50: 6c66 2e52 756e 4773 5574 696c 285b 2763  lf.RunGsUtil(['c
-00017e60: 7027 2c20 272d 5227 2c20 7375 7269 2862  p', '-R', suri(b
-00017e70: 7563 6b65 745f 7572 6929 2c20 746d 7064  ucket_uri), tmpd
-00017e80: 6972 5d29 0a20 2020 2023 2043 6865 636b  ir]).    # Check
-00017e90: 2074 6861 7420 6669 6c65 7320 696e 2074   that files in t
-00017ea0: 6865 2073 7562 6469 7220 676f 7420 636f  he subdir got co
-00017eb0: 7069 6564 2065 7665 6e20 7468 6f75 6768  pied even though
-00017ec0: 2073 7562 6469 7220 6f62 6a65 6374 0a20   subdir object. 
-00017ed0: 2020 2023 2064 6f77 6e6c 6f61 6420 7761     # download wa
-00017ee0: 7320 736b 6970 7065 642e 0a20 2020 2077  s skipped..    w
-00017ef0: 6974 6820 6f70 656e 286f 732e 7061 7468  ith open(os.path
-00017f00: 2e6a 6f69 6e28 746d 7064 6972 2c20 6275  .join(tmpdir, bu
-00017f10: 636b 6574 5f75 7269 2e62 7563 6b65 745f  cket_uri.bucket_
-00017f20: 6e61 6d65 2c20 2761 6263 272c 2027 6465  name, 'abc', 'de
-00017f30: 6627 2929 2061 7320 663a 0a20 2020 2020  f')) as f:.     
-00017f40: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-00017f50: 6c73 2827 6465 6627 2c20 275c 6e27 2e6a  ls('def', '\n'.j
-00017f60: 6f69 6e28 662e 7265 6164 6c69 6e65 7328  oin(f.readlines(
-00017f70: 2929 290a 0a20 2064 6566 2074 6573 745f  )))..  def test_
-00017f80: 6370 5f77 6974 686f 7574 5f72 6561 645f  cp_without_read_
-00017f90: 6163 6365 7373 2873 656c 6629 3a0a 2020  access(self):.  
-00017fa0: 2020 2222 2254 6573 7473 2074 6861 7420    """Tests that 
-00017fb0: 6370 2066 6169 6c73 2077 6974 686f 7574  cp fails without
-00017fc0: 2072 6561 6420 6163 6365 7373 2074 6f20   read access to 
-00017fd0: 7468 6520 6f62 6a65 6374 2e22 2222 0a20  the object.""". 
-00017fe0: 2020 2023 2054 4f44 4f3a 2057 6974 6820     # TODO: With 
-00017ff0: 3430 3127 7320 7472 6967 6765 7269 6e67  401's triggering
-00018000: 2072 6574 7269 6573 2069 6e20 6170 6974   retries in apit
-00018010: 6f6f 6c73 2c20 7468 6973 2074 6573 7420  ools, this test 
-00018020: 7769 6c6c 2074 616b 650a 2020 2020 2320  will take.    # 
-00018030: 6120 6c6f 6e67 2074 696d 652e 2020 4964  a long time.  Id
-00018040: 6561 6c6c 792c 206d 616b 6520 6170 6974  eally, make apit
-00018050: 6f6f 6c73 2061 6363 6570 7420 6120 6e75  ools accept a nu
-00018060: 6d5f 7265 7472 6965 7320 636f 6e66 6967  m_retries config
-00018070: 2066 6f72 2074 6869 730a 2020 2020 2320   for this.    # 
-00018080: 756e 7469 6c20 7765 2073 746f 7020 7265  until we stop re
-00018090: 7472 7969 6e67 2074 6865 2034 3031 2773  trying the 401's
-000180a0: 2e0a 2020 2020 6275 636b 6574 5f75 7269  ..    bucket_uri
-000180b0: 203d 2073 656c 662e 4372 6561 7465 4275   = self.CreateBu
-000180c0: 636b 6574 2829 0a20 2020 206f 626a 6563  cket().    objec
-000180d0: 745f 7572 6920 3d20 7365 6c66 2e43 7265  t_uri = self.Cre
-000180e0: 6174 654f 626a 6563 7428 6275 636b 6574  ateObject(bucket
-000180f0: 5f75 7269 3d62 7563 6b65 745f 7572 692c  _uri=bucket_uri,
-00018100: 2063 6f6e 7465 6e74 733d 6227 666f 6f27   contents=b'foo'
-00018110: 290a 0a20 2020 2023 2055 7365 2040 5265  )..    # Use @Re
-00018120: 7472 7920 6173 2068 6564 6765 2061 6761  try as hedge aga
-00018130: 696e 7374 2062 7563 6b65 7420 6c69 7374  inst bucket list
-00018140: 696e 6720 6576 656e 7475 616c 2063 6f6e  ing eventual con
-00018150: 7369 7374 656e 6379 2e0a 2020 2020 7365  sistency..    se
-00018160: 6c66 2e41 7373 6572 744e 4f62 6a65 6374  lf.AssertNObject
-00018170: 7349 6e42 7563 6b65 7428 6275 636b 6574  sInBucket(bucket
-00018180: 5f75 7269 2c20 3129 0a0a 2020 2020 6966  _uri, 1)..    if
-00018190: 2073 656c 662e 6465 6661 756c 745f 7072   self.default_pr
-000181a0: 6f76 6964 6572 203d 3d20 2773 3327 3a0a  ovider == 's3':.
-000181b0: 2020 2020 2020 6578 7065 6374 6564 5f65        expected_e
-000181c0: 7272 6f72 5f72 6567 6578 203d 2072 2741  rror_regex = r'A
-000181d0: 6363 6573 7344 656e 6965 6427 0a20 2020  ccessDenied'.   
-000181e0: 2065 6c73 653a 0a20 2020 2020 2065 7870   else:.      exp
-000181f0: 6563 7465 645f 6572 726f 725f 7265 6765  ected_error_rege
-00018200: 7820 3d20 7227 416e 6f6e 796d 6f75 7320  x = r'Anonymous 
-00018210: 5c53 2b20 646f 2865 7329 3f20 6e6f 7420  \S+ do(es)? not 
-00018220: 6861 7665 270a 0a20 2020 2077 6974 6820  have'..    with 
-00018230: 7365 6c66 2e53 6574 416e 6f6e 796d 6f75  self.SetAnonymou
-00018240: 7342 6f74 6f43 7265 6473 2829 3a0a 2020  sBotoCreds():.  
-00018250: 2020 2020 7374 6465 7272 203d 2073 656c      stderr = sel
-00018260: 662e 5275 6e47 7355 7469 6c28 5b27 6370  f.RunGsUtil(['cp
-00018270: 272c 2073 7572 6928 6f62 6a65 6374 5f75  ', suri(object_u
-00018280: 7269 292c 2027 666f 6f27 5d2c 0a20 2020  ri), 'foo'],.   
-00018290: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000182a0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-000182b0: 6e5f 7374 6465 7272 3d54 7275 652c 0a20  n_stderr=True,. 
-000182c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000182d0: 2020 2020 2020 2020 2020 2020 2065 7870               exp
-000182e0: 6563 7465 645f 7374 6174 7573 3d31 290a  ected_status=1).
-000182f0: 2020 2020 7365 6c66 2e61 7373 6572 7452      self.assertR
-00018300: 6567 6578 2873 7464 6572 722c 2065 7870  egex(stderr, exp
-00018310: 6563 7465 645f 6572 726f 725f 7265 6765  ected_error_rege
-00018320: 7829 0a0a 2020 4075 6e69 7474 6573 742e  x)..  @unittest.
-00018330: 736b 6970 4966 2849 535f 5749 4e44 4f57  skipIf(IS_WINDOW
-00018340: 532c 2027 6f73 2e73 796d 6c69 6e6b 2829  S, 'os.symlink()
-00018350: 2069 7320 6e6f 7420 6176 6169 6c61 626c   is not availabl
-00018360: 6520 6f6e 2057 696e 646f 7773 2e27 290a  e on Windows.').
-00018370: 2020 6465 6620 7465 7374 5f63 705f 6d69    def test_cp_mi
-00018380: 6e75 735f 725f 6d69 6e75 735f 6528 7365  nus_r_minus_e(se
-00018390: 6c66 293a 0a20 2020 2022 2222 5465 7374  lf):.    """Test
-000183a0: 7320 7468 6174 2063 7020 2d65 202d 7220  s that cp -e -r 
-000183b0: 6967 6e6f 7265 7320 7379 6d6c 696e 6b73  ignores symlinks
-000183c0: 2077 6865 6e20 7265 6375 7273 696e 672e   when recursing.
-000183d0: 2222 220a 2020 2020 6275 636b 6574 5f75  """.    bucket_u
-000183e0: 7269 203d 2073 656c 662e 4372 6561 7465  ri = self.Create
-000183f0: 4275 636b 6574 2829 0a20 2020 2074 6d70  Bucket().    tmp
-00018400: 6469 7220 3d20 7365 6c66 2e43 7265 6174  dir = self.Creat
-00018410: 6554 656d 7044 6972 2829 0a20 2020 2023  eTempDir().    #
-00018420: 2043 7265 6174 6520 6120 7661 6c69 6420   Create a valid 
-00018430: 6669 6c65 2c20 7369 6e63 6520 6370 2065  file, since cp e
-00018440: 7870 6563 7473 2074 6f20 636f 7079 2061  xpects to copy a
-00018450: 7420 6c65 6173 7420 6f6e 6520 736f 7572  t least one sour
-00018460: 6365 2055 524c 0a20 2020 2023 2073 7563  ce URL.    # suc
-00018470: 6365 7373 6675 6c6c 792e 0a20 2020 2073  cessfully..    s
-00018480: 656c 662e 4372 6561 7465 5465 6d70 4669  elf.CreateTempFi
-00018490: 6c65 2874 6d70 6469 723d 746d 7064 6972  le(tmpdir=tmpdir
-000184a0: 2c20 636f 6e74 656e 7473 3d62 2766 6f6f  , contents=b'foo
-000184b0: 2729 0a20 2020 2073 7562 6469 7220 3d20  ').    subdir = 
-000184c0: 6f73 2e70 6174 682e 6a6f 696e 2874 6d70  os.path.join(tmp
-000184d0: 6469 722c 2027 7375 6264 6972 2729 0a20  dir, 'subdir'). 
-000184e0: 2020 206f 732e 6d6b 6469 7228 7375 6264     os.mkdir(subd
-000184f0: 6972 290a 2020 2020 6f73 2e6d 6b64 6972  ir).    os.mkdir
-00018500: 286f 732e 7061 7468 2e6a 6f69 6e28 746d  (os.path.join(tm
-00018510: 7064 6972 2c20 276d 6973 7369 6e67 2729  pdir, 'missing')
-00018520: 290a 2020 2020 2320 4372 6561 7465 2061  ).    # Create a
-00018530: 2062 6c61 6e6b 2064 6972 6563 746f 7279   blank directory
-00018540: 2074 6861 7420 6973 2061 2062 726f 6b65   that is a broke
-00018550: 6e20 7379 6d6c 696e 6b20 746f 2065 6e73  n symlink to ens
-00018560: 7572 6520 7468 6174 2077 650a 2020 2020  ure that we.    
-00018570: 2320 646f 6e27 7420 6661 696c 2072 6563  # don't fail rec
-00018580: 7572 7369 7665 2065 6e75 6d65 7261 7469  ursive enumerati
-00018590: 6f6e 2077 6974 6820 6120 6261 6420 7379  on with a bad sy
-000185a0: 6d6c 696e 6b2e 0a20 2020 206f 732e 7379  mlink..    os.sy
-000185b0: 6d6c 696e 6b28 6f73 2e70 6174 682e 6a6f  mlink(os.path.jo
-000185c0: 696e 2874 6d70 6469 722c 2027 6d69 7373  in(tmpdir, 'miss
-000185d0: 696e 6727 292c 206f 732e 7061 7468 2e6a  ing'), os.path.j
-000185e0: 6f69 6e28 7375 6264 6972 2c20 276d 6973  oin(subdir, 'mis
-000185f0: 7369 6e67 2729 290a 2020 2020 6f73 2e72  sing')).    os.r
-00018600: 6d64 6972 286f 732e 7061 7468 2e6a 6f69  mdir(os.path.joi
-00018610: 6e28 746d 7064 6972 2c20 276d 6973 7369  n(tmpdir, 'missi
-00018620: 6e67 2729 290a 2020 2020 7365 6c66 2e52  ng')).    self.R
-00018630: 756e 4773 5574 696c 285b 2763 7027 2c20  unGsUtil(['cp', 
-00018640: 272d 7227 2c20 272d 6527 2c20 746d 7064  '-r', '-e', tmpd
-00018650: 6972 2c20 7375 7269 2862 7563 6b65 745f  ir, suri(bucket_
-00018660: 7572 6929 5d29 0a0a 2020 4075 6e69 7474  uri)])..  @unitt
-00018670: 6573 742e 736b 6970 4966 2849 535f 5749  est.skipIf(IS_WI
-00018680: 4e44 4f57 532c 2027 6f73 2e73 796d 6c69  NDOWS, 'os.symli
-00018690: 6e6b 2829 2069 7320 6e6f 7420 6176 6169  nk() is not avai
-000186a0: 6c61 626c 6520 6f6e 2057 696e 646f 7773  lable on Windows
-000186b0: 2e27 290a 2020 6465 6620 7465 7374 5f63  .').  def test_c
-000186c0: 705f 6d69 6e75 735f 6528 7365 6c66 293a  p_minus_e(self):
-000186d0: 0a20 2020 2066 7061 7468 5f64 6972 203d  .    fpath_dir =
-000186e0: 2073 656c 662e 4372 6561 7465 5465 6d70   self.CreateTemp
-000186f0: 4469 7228 290a 2020 2020 6670 6174 6831  Dir().    fpath1
-00018700: 203d 2073 656c 662e 4372 6561 7465 5465   = self.CreateTe
-00018710: 6d70 4669 6c65 2874 6d70 6469 723d 6670  mpFile(tmpdir=fp
-00018720: 6174 685f 6469 7229 0a20 2020 2066 7061  ath_dir).    fpa
-00018730: 7468 3220 3d20 6f73 2e70 6174 682e 6a6f  th2 = os.path.jo
-00018740: 696e 2866 7061 7468 5f64 6972 2c20 2763  in(fpath_dir, 'c
-00018750: 705f 6d69 6e75 735f 6527 290a 2020 2020  p_minus_e').    
-00018760: 6275 636b 6574 5f75 7269 203d 2073 656c  bucket_uri = sel
-00018770: 662e 4372 6561 7465 4275 636b 6574 2829  f.CreateBucket()
-00018780: 0a20 2020 206f 732e 7379 6d6c 696e 6b28  .    os.symlink(
-00018790: 6670 6174 6831 2c20 6670 6174 6832 290a  fpath1, fpath2).
-000187a0: 2020 2020 2320 5765 2061 6c73 6f20 7573      # We also us
-000187b0: 6520 2d63 2074 6f20 636f 6e74 696e 7565  e -c to continue
-000187c0: 206f 6e20 6572 726f 7273 2e20 4f6e 6520   on errors. One 
-000187d0: 6f66 2074 6865 2065 7870 616e 6465 6420  of the expanded 
-000187e0: 676c 6f62 2065 6e74 7269 6573 0a20 2020  glob entries.   
-000187f0: 2023 2073 686f 756c 6420 6265 2074 6865   # should be the
-00018800: 2073 796d 6c69 6e6b 6564 2066 696c 652c   symlinked file,
-00018810: 2077 6869 6368 2073 686f 756c 6420 7468   which should th
-00018820: 726f 7720 6120 436f 6d6d 616e 6445 7863  row a CommandExc
-00018830: 6570 7469 6f6e 2073 696e 6365 0a20 2020  eption since.   
-00018840: 2023 206e 6f20 7661 6c69 6420 286e 6f6e   # no valid (non
-00018850: 2d73 796d 6c69 6e6b 6564 2920 6669 6c65  -symlinked) file
-00018860: 7320 636f 756c 6420 6265 2066 6f75 6e64  s could be found
-00018870: 2061 7420 7468 6174 2070 6174 683b 2077   at that path; w
-00018880: 6520 646f 6e27 7420 7761 6e74 0a20 2020  e don't want.   
-00018890: 2023 2074 6865 2063 6f6d 6d61 6e64 2074   # the command t
-000188a0: 6f20 7465 726d 696e 6174 6520 6966 2074  o terminate if t
-000188b0: 6861 7427 7320 7468 6520 6669 7273 7420  hat's the first 
-000188c0: 6669 6c65 2077 6520 6174 7465 6d70 7420  file we attempt 
-000188d0: 746f 2063 6f70 792e 0a20 2020 2073 7464  to copy..    std
-000188e0: 6572 7220 3d20 7365 6c66 2e52 756e 4773  err = self.RunGs
-000188f0: 5574 696c 285b 0a20 2020 2020 2020 2027  Util([.        '
-00018900: 2d6d 272c 2027 6370 272c 2027 2d65 272c  -m', 'cp', '-e',
-00018910: 0a20 2020 2020 2020 2027 2573 2573 2a27  .        '%s%s*'
-00018920: 2025 2028 6670 6174 685f 6469 722c 206f   % (fpath_dir, o
-00018930: 732e 7061 7468 2e73 6570 292c 0a20 2020  s.path.sep),.   
-00018940: 2020 2020 2073 7572 6928 6275 636b 6574       suri(bucket
-00018950: 5f75 7269 2c20 2766 696c 6573 2729 0a20  _uri, 'files'). 
-00018960: 2020 205d 2c0a 2020 2020 2020 2020 2020     ],.          
-00018970: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018980: 2020 7265 7475 726e 5f73 7464 6572 723d    return_stderr=
-00018990: 5472 7565 290a 2020 2020 7365 6c66 2e61  True).    self.a
-000189a0: 7373 6572 7449 6e28 2743 6f70 7969 6e67  ssertIn('Copying
-000189b0: 2066 696c 6527 2c20 7374 6465 7272 290a   file', stderr).
-000189c0: 2020 2020 6966 2073 656c 662e 5f75 7365      if self._use
-000189d0: 5f67 636c 6f75 645f 7374 6f72 6167 653a  _gcloud_storage:
-000189e0: 0a20 2020 2020 2073 656c 662e 6173 7365  .      self.asse
-000189f0: 7274 496e 2827 536b 6970 7069 6e67 2073  rtIn('Skipping s
-00018a00: 796d 6c69 6e6b 272c 2073 7464 6572 7229  ymlink', stderr)
-00018a10: 0a20 2020 2065 6c73 653a 0a20 2020 2020  .    else:.     
-00018a20: 2073 656c 662e 6173 7365 7274 496e 2827   self.assertIn('
-00018a30: 536b 6970 7069 6e67 2073 796d 626f 6c69  Skipping symboli
-00018a40: 6320 6c69 6e6b 272c 2073 7464 6572 7229  c link', stderr)
-00018a50: 0a0a 2020 2020 2320 456e 7375 7265 2074  ..    # Ensure t
-00018a60: 6861 7420 746f 702d 6c65 7665 6c20 6172  hat top-level ar
-00018a70: 6775 6d65 6e74 7320 6172 6520 6967 6e6f  guments are igno
-00018a80: 7265 6420 6966 2074 6865 7920 6172 6520  red if they are 
-00018a90: 7379 6d6c 696e 6b73 2e20 5468 6520 6669  symlinks. The fi
-00018aa0: 6c65 0a20 2020 2023 2061 7420 6670 6174  le.    # at fpat
-00018ab0: 6831 2073 686f 756c 6420 6265 2073 7563  h1 should be suc
-00018ac0: 6365 7373 6675 6c6c 7920 636f 7069 6564  cessfully copied
-00018ad0: 2c20 7468 656e 2063 6f70 7969 6e67 2074  , then copying t
-00018ae0: 6865 2073 796d 6c69 6e6b 2061 740a 2020  he symlink at.  
-00018af0: 2020 2320 6670 6174 6832 2073 686f 756c    # fpath2 shoul
-00018b00: 6420 6661 696c 2e0a 2020 2020 7374 6465  d fail..    stde
-00018b10: 7272 203d 2073 656c 662e 5275 6e47 7355  rr = self.RunGsU
-00018b20: 7469 6c28 0a20 2020 2020 2020 205b 2763  til(.        ['c
-00018b30: 7027 2c20 272d 6527 2c20 272d 7227 2c20  p', '-e', '-r', 
-00018b40: 6670 6174 6831 2c20 6670 6174 6832 2c0a  fpath1, fpath2,.
-00018b50: 2020 2020 2020 2020 2073 7572 6928 6275           suri(bu
-00018b60: 636b 6574 5f75 7269 2c20 2766 696c 6573  cket_uri, 'files
-00018b70: 2729 5d2c 0a20 2020 2020 2020 2072 6574  ')],.        ret
-00018b80: 7572 6e5f 7374 6465 7272 3d54 7275 652c  urn_stderr=True,
-00018b90: 0a20 2020 2020 2020 2065 7870 6563 7465  .        expecte
-00018ba0: 645f 7374 6174 7573 3d31 290a 2020 2020  d_status=1).    
-00018bb0: 7365 6c66 2e61 7373 6572 7449 6e28 2743  self.assertIn('C
-00018bc0: 6f70 7969 6e67 2066 696c 6527 2c20 7374  opying file', st
-00018bd0: 6465 7272 290a 2020 2020 6966 2073 656c  derr).    if sel
-00018be0: 662e 5f75 7365 5f67 636c 6f75 645f 7374  f._use_gcloud_st
-00018bf0: 6f72 6167 653a 0a20 2020 2020 2073 656c  orage:.      sel
-00018c00: 662e 6173 7365 7274 496e 2827 536b 6970  f.assertIn('Skip
-00018c10: 7069 6e67 2073 796d 6c69 6e6b 272c 2073  ping symlink', s
-00018c20: 7464 6572 7229 0a20 2020 2020 2073 656c  tderr).      sel
-00018c30: 662e 6173 7365 7274 496e 2827 5552 4c20  f.assertIn('URL 
-00018c40: 6d61 7463 6865 6420 6e6f 206f 626a 6563  matched no objec
-00018c50: 7473 206f 7220 6669 6c65 733a 2025 7327  ts or files: %s'
-00018c60: 2025 2066 7061 7468 322c 2073 7464 6572   % fpath2, stder
-00018c70: 7229 0a20 2020 2065 6c73 653a 0a20 2020  r).    else:.   
-00018c80: 2020 2073 656c 662e 6173 7365 7274 496e     self.assertIn
-00018c90: 2827 536b 6970 7069 6e67 2073 796d 626f  ('Skipping symbo
-00018ca0: 6c69 6320 6c69 6e6b 272c 2073 7464 6572  lic link', stder
-00018cb0: 7229 0a20 2020 2020 2073 656c 662e 6173  r).      self.as
-00018cc0: 7365 7274 496e 2827 436f 6d6d 616e 6445  sertIn('CommandE
-00018cd0: 7863 6570 7469 6f6e 3a20 4e6f 2055 524c  xception: No URL
-00018ce0: 7320 6d61 7463 6865 643a 2025 7327 2025  s matched: %s' %
-00018cf0: 2066 7061 7468 322c 2073 7464 6572 7229   fpath2, stderr)
-00018d00: 0a0a 2020 6465 6620 7465 7374 5f63 705f  ..  def test_cp_
-00018d10: 6d75 6c74 6974 6872 6561 6465 645f 7769  multithreaded_wi
-00018d20: 6c64 6361 7264 2873 656c 6629 3a0a 2020  ldcard(self):.  
-00018d30: 2020 2222 2254 6573 7473 2074 6861 7420    """Tests that 
-00018d40: 6370 202d 6d20 776f 726b 7320 7769 7468  cp -m works with
-00018d50: 2061 2077 696c 6463 6172 642e 2222 220a   a wildcard.""".
-00018d60: 2020 2020 6e75 6d5f 7465 7374 5f66 696c      num_test_fil
-00018d70: 6573 203d 2035 0a20 2020 2074 6d70 5f64  es = 5.    tmp_d
-00018d80: 6972 203d 2073 656c 662e 4372 6561 7465  ir = self.Create
-00018d90: 5465 6d70 4469 7228 7465 7374 5f66 696c  TempDir(test_fil
-00018da0: 6573 3d6e 756d 5f74 6573 745f 6669 6c65  es=num_test_file
-00018db0: 7329 0a20 2020 2062 7563 6b65 745f 7572  s).    bucket_ur
-00018dc0: 6920 3d20 7365 6c66 2e43 7265 6174 6542  i = self.CreateB
-00018dd0: 7563 6b65 7428 290a 2020 2020 7769 6c64  ucket().    wild
-00018de0: 6361 7264 5f75 7269 203d 2027 2573 2573  card_uri = '%s%s
-00018df0: 2a27 2025 2028 746d 705f 6469 722c 206f  *' % (tmp_dir, o
-00018e00: 732e 7365 7029 0a20 2020 2073 656c 662e  s.sep).    self.
-00018e10: 5275 6e47 7355 7469 6c28 5b27 2d6d 272c  RunGsUtil(['-m',
-00018e20: 2027 6370 272c 2077 696c 6463 6172 645f   'cp', wildcard_
-00018e30: 7572 692c 2073 7572 6928 6275 636b 6574  uri, suri(bucket
-00018e40: 5f75 7269 295d 290a 2020 2020 7365 6c66  _uri)]).    self
-00018e50: 2e41 7373 6572 744e 4f62 6a65 6374 7349  .AssertNObjectsI
-00018e60: 6e42 7563 6b65 7428 6275 636b 6574 5f75  nBucket(bucket_u
-00018e70: 7269 2c20 6e75 6d5f 7465 7374 5f66 696c  ri, num_test_fil
-00018e80: 6573 290a 0a20 2040 5365 7175 656e 7469  es)..  @Sequenti
-00018e90: 616c 416e 6450 6172 616c 6c65 6c54 7261  alAndParallelTra
-00018ea0: 6e73 6665 720a 2020 6465 6620 7465 7374  nsfer.  def test
-00018eb0: 5f63 705f 6475 706c 6963 6174 655f 736f  _cp_duplicate_so
-00018ec0: 7572 6365 5f61 7267 7328 7365 6c66 293a  urce_args(self):
-00018ed0: 0a20 2020 2022 2222 5465 7374 7320 7468  .    """Tests th
-00018ee0: 6174 2063 7020 2d6d 2077 6f72 6b73 2077  at cp -m works w
-00018ef0: 6865 6e20 6120 736f 7572 6365 2061 7267  hen a source arg
-00018f00: 756d 656e 7420 6973 2070 726f 7669 6465  ument is provide
-00018f10: 6420 7477 6963 652e 2222 220a 2020 2020  d twice.""".    
-00018f20: 6f62 6a65 6374 5f63 6f6e 7465 6e74 7320  object_contents 
-00018f30: 3d20 6227 6564 6765 270a 2020 2020 6f62  = b'edge'.    ob
-00018f40: 6a65 6374 5f75 7269 203d 2073 656c 662e  ject_uri = self.
-00018f50: 4372 6561 7465 4f62 6a65 6374 286f 626a  CreateObject(obj
-00018f60: 6563 745f 6e61 6d65 3d27 666f 6f27 2c20  ect_name='foo', 
-00018f70: 636f 6e74 656e 7473 3d6f 626a 6563 745f  contents=object_
-00018f80: 636f 6e74 656e 7473 290a 2020 2020 746d  contents).    tm
-00018f90: 705f 6469 7220 3d20 7365 6c66 2e43 7265  p_dir = self.Cre
-00018fa0: 6174 6554 656d 7044 6972 2829 0a20 2020  ateTempDir().   
-00018fb0: 2073 656c 662e 5275 6e47 7355 7469 6c28   self.RunGsUtil(
-00018fc0: 5b27 2d6d 272c 2027 6370 272c 2073 7572  ['-m', 'cp', sur
-00018fd0: 6928 6f62 6a65 6374 5f75 7269 292c 2073  i(object_uri), s
-00018fe0: 7572 6928 6f62 6a65 6374 5f75 7269 292c  uri(object_uri),
-00018ff0: 2074 6d70 5f64 6972 5d29 0a20 2020 2077   tmp_dir]).    w
-00019000: 6974 6820 6f70 656e 286f 732e 7061 7468  ith open(os.path
-00019010: 2e6a 6f69 6e28 746d 705f 6469 722c 2027  .join(tmp_dir, '
-00019020: 666f 6f27 292c 2027 7262 2729 2061 7320  foo'), 'rb') as 
-00019030: 696e 5f66 703a 0a20 2020 2020 2063 6f6e  in_fp:.      con
-00019040: 7465 6e74 7320 3d20 696e 5f66 702e 7265  tents = in_fp.re
-00019050: 6164 2829 0a20 2020 2020 2023 2043 6f6e  ad().      # Con
-00019060: 7465 6e74 7320 7368 6f75 6c64 2062 6520  tents should be 
-00019070: 6e6f 7420 6475 706c 6963 6174 6564 2e0a  not duplicated..
-00019080: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-00019090: 7445 7175 616c 2863 6f6e 7465 6e74 732c  tEqual(contents,
-000190a0: 206f 626a 6563 745f 636f 6e74 656e 7473   object_contents
-000190b0: 290a 0a20 2040 536b 6970 466f 7253 3328  )..  @SkipForS3(
-000190c0: 2767 7375 7469 6c20 646f 6573 6e5c 2774  'gsutil doesn\'t
-000190d0: 2073 7570 706f 7274 2053 3320 6375 7374   support S3 cust
-000190e0: 6f6d 6572 2d73 7570 706c 6965 6420 656e  omer-supplied en
-000190f0: 6372 7970 7469 6f6e 206b 6579 732e 2729  cryption keys.')
-00019100: 0a20 2040 5365 7175 656e 7469 616c 416e  .  @SequentialAn
-00019110: 6450 6172 616c 6c65 6c54 7261 6e73 6665  dParallelTransfe
-00019120: 720a 2020 6465 6620 7465 7374 5f63 705f  r.  def test_cp_
-00019130: 646f 776e 6c6f 6164 5f65 6e63 7279 7074  download_encrypt
-00019140: 6564 5f6f 626a 6563 7428 7365 6c66 293a  ed_object(self):
-00019150: 0a20 2020 2022 2222 5465 7374 7320 646f  .    """Tests do
-00019160: 776e 6c6f 6164 696e 6720 616e 2065 6e63  wnloading an enc
-00019170: 7279 7074 6564 206f 626a 6563 742e 2222  rypted object.""
-00019180: 220a 2020 2020 6966 2073 656c 662e 7465  ".    if self.te
-00019190: 7374 5f61 7069 203d 3d20 4170 6953 656c  st_api == ApiSel
-000191a0: 6563 746f 722e 584d 4c3a 0a20 2020 2020  ector.XML:.     
-000191b0: 2072 6574 7572 6e20 756e 6974 7465 7374   return unittest
-000191c0: 2e73 6b69 7028 0a20 2020 2020 2020 2020  .skip(.         
-000191d0: 2027 6773 7574 696c 2064 6f65 7320 6e6f   'gsutil does no
-000191e0: 7420 7375 7070 6f72 7420 656e 6372 7970  t support encryp
-000191f0: 7469 6f6e 2077 6974 6820 7468 6520 584d  tion with the XM
-00019200: 4c20 4150 4927 290a 2020 2020 6f62 6a65  L API').    obje
-00019210: 6374 5f63 6f6e 7465 6e74 7320 3d20 6227  ct_contents = b'
-00019220: 6261 7227 0a20 2020 206f 626a 6563 745f  bar'.    object_
-00019230: 7572 6920 3d20 7365 6c66 2e43 7265 6174  uri = self.Creat
-00019240: 654f 626a 6563 7428 6f62 6a65 6374 5f6e  eObject(object_n
-00019250: 616d 653d 2766 6f6f 272c 0a20 2020 2020  ame='foo',.     
-00019260: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019270: 2020 2020 2020 2020 2020 2020 2020 636f                co
-00019280: 6e74 656e 7473 3d6f 626a 6563 745f 636f  ntents=object_co
-00019290: 6e74 656e 7473 2c0a 2020 2020 2020 2020  ntents,.        
-000192a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000192b0: 2020 2020 2020 2020 2020 2065 6e63 7279             encry
-000192c0: 7074 696f 6e5f 6b65 793d 5445 5354 5f45  ption_key=TEST_E
-000192d0: 4e43 5259 5054 494f 4e5f 4b45 5931 290a  NCRYPTION_KEY1).
-000192e0: 2020 2020 6670 6174 6820 3d20 7365 6c66      fpath = self
-000192f0: 2e43 7265 6174 6554 656d 7046 696c 6528  .CreateTempFile(
-00019300: 290a 2020 2020 626f 746f 5f63 6f6e 6669  ).    boto_confi
-00019310: 675f 666f 725f 7465 7374 203d 205b 2827  g_for_test = [('
-00019320: 4753 5574 696c 272c 2027 656e 6372 7970  GSUtil', 'encryp
-00019330: 7469 6f6e 5f6b 6579 272c 2054 4553 545f  tion_key', TEST_
-00019340: 454e 4352 5950 5449 4f4e 5f4b 4559 3129  ENCRYPTION_KEY1)
-00019350: 5d0a 0a20 2020 2077 6974 6820 5365 7442  ]..    with SetB
-00019360: 6f74 6f43 6f6e 6669 6746 6f72 5465 7374  otoConfigForTest
-00019370: 2862 6f74 6f5f 636f 6e66 6967 5f66 6f72  (boto_config_for
-00019380: 5f74 6573 7429 3a0a 2020 2020 2020 7365  _test):.      se
-00019390: 6c66 2e52 756e 4773 5574 696c 285b 2763  lf.RunGsUtil(['c
-000193a0: 7027 2c20 7375 7269 286f 626a 6563 745f  p', suri(object_
-000193b0: 7572 6929 2c20 7375 7269 2866 7061 7468  uri), suri(fpath
-000193c0: 295d 290a 2020 2020 7769 7468 206f 7065  )]).    with ope
-000193d0: 6e28 6670 6174 682c 2027 7262 2729 2061  n(fpath, 'rb') a
-000193e0: 7320 663a 0a20 2020 2020 2073 656c 662e  s f:.      self.
-000193f0: 6173 7365 7274 4571 7561 6c28 662e 7265  assertEqual(f.re
-00019400: 6164 2829 2c20 6f62 6a65 6374 5f63 6f6e  ad(), object_con
-00019410: 7465 6e74 7329 0a0a 2020 2020 2320 4966  tents)..    # If
-00019420: 206d 756c 7469 706c 6520 6b65 7973 2061   multiple keys a
-00019430: 7265 2073 7570 706c 6965 6420 616e 6420  re supplied and 
-00019440: 6f6e 6520 6973 2063 6f72 7265 6374 2c20  one is correct, 
-00019450: 646f 776e 6c6f 6164 2073 686f 756c 6420  download should 
-00019460: 7375 6363 6565 642e 0a20 2020 2066 7061  succeed..    fpa
-00019470: 7468 3220 3d20 7365 6c66 2e43 7265 6174  th2 = self.Creat
-00019480: 6554 656d 7046 696c 6528 290a 2020 2020  eTempFile().    
-00019490: 626f 746f 5f63 6f6e 6669 675f 666f 725f  boto_config_for_
-000194a0: 7465 7374 3220 3d20 5b0a 2020 2020 2020  test2 = [.      
-000194b0: 2020 2827 4753 5574 696c 272c 2027 656e    ('GSUtil', 'en
-000194c0: 6372 7970 7469 6f6e 5f6b 6579 272c 2054  cryption_key', T
-000194d0: 4553 545f 454e 4352 5950 5449 4f4e 5f4b  EST_ENCRYPTION_K
-000194e0: 4559 3329 2c0a 2020 2020 2020 2020 2827  EY3),.        ('
-000194f0: 4753 5574 696c 272c 2027 6465 6372 7970  GSUtil', 'decryp
-00019500: 7469 6f6e 5f6b 6579 3127 2c20 5445 5354  tion_key1', TEST
-00019510: 5f45 4e43 5259 5054 494f 4e5f 4b45 5932  _ENCRYPTION_KEY2
-00019520: 292c 0a20 2020 2020 2020 2028 2747 5355  ),.        ('GSU
-00019530: 7469 6c27 2c20 2764 6563 7279 7074 696f  til', 'decryptio
-00019540: 6e5f 6b65 7932 272c 2054 4553 545f 454e  n_key2', TEST_EN
-00019550: 4352 5950 5449 4f4e 5f4b 4559 3129 0a20  CRYPTION_KEY1). 
-00019560: 2020 205d 0a0a 2020 2020 7769 7468 2053     ]..    with S
-00019570: 6574 426f 746f 436f 6e66 6967 466f 7254  etBotoConfigForT
-00019580: 6573 7428 626f 746f 5f63 6f6e 6669 675f  est(boto_config_
-00019590: 666f 725f 7465 7374 3229 3a0a 2020 2020  for_test2):.    
-000195a0: 2020 7365 6c66 2e52 756e 4773 5574 696c    self.RunGsUtil
-000195b0: 285b 2763 7027 2c20 7375 7269 286f 626a  (['cp', suri(obj
-000195c0: 6563 745f 7572 6929 2c20 7375 7269 2866  ect_uri), suri(f
-000195d0: 7061 7468 3229 5d29 0a20 2020 2077 6974  path2)]).    wit
-000195e0: 6820 6f70 656e 2866 7061 7468 322c 2027  h open(fpath2, '
-000195f0: 7262 2729 2061 7320 663a 0a20 2020 2020  rb') as f:.     
-00019600: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-00019610: 6c28 662e 7265 6164 2829 2c20 6f62 6a65  l(f.read(), obje
-00019620: 6374 5f63 6f6e 7465 6e74 7329 0a0a 2020  ct_contents)..  
-00019630: 4053 6b69 7046 6f72 5333 2827 6773 7574  @SkipForS3('gsut
-00019640: 696c 2064 6f65 736e 5c27 7420 7375 7070  il doesn\'t supp
-00019650: 6f72 7420 5333 2063 7573 746f 6d65 722d  ort S3 customer-
-00019660: 7375 7070 6c69 6564 2065 6e63 7279 7074  supplied encrypt
-00019670: 696f 6e20 6b65 7973 2e27 290a 2020 4053  ion keys.').  @S
-00019680: 6571 7565 6e74 6961 6c41 6e64 5061 7261  equentialAndPara
-00019690: 6c6c 656c 5472 616e 7366 6572 0a20 2064  llelTransfer.  d
-000196a0: 6566 2074 6573 745f 6370 5f64 6f77 6e6c  ef test_cp_downl
-000196b0: 6f61 645f 656e 6372 7970 7465 645f 6f62  oad_encrypted_ob
-000196c0: 6a65 6374 5f77 6974 686f 7574 5f6b 6579  ject_without_key
-000196d0: 2873 656c 6629 3a0a 2020 2020 2222 2254  (self):.    """T
-000196e0: 6573 7473 2064 6f77 6e6c 6f61 6469 6e67  ests downloading
-000196f0: 2061 6e20 656e 6372 7970 7465 6420 6f62   an encrypted ob
-00019700: 6a65 6374 2077 6974 686f 7574 2074 6865  ject without the
-00019710: 206e 6563 6573 7361 7279 206b 6579 2e22   necessary key."
-00019720: 2222 0a20 2020 2069 6620 7365 6c66 2e74  "".    if self.t
-00019730: 6573 745f 6170 6920 3d3d 2041 7069 5365  est_api == ApiSe
-00019740: 6c65 6374 6f72 2e58 4d4c 3a0a 2020 2020  lector.XML:.    
-00019750: 2020 7265 7475 726e 2075 6e69 7474 6573    return unittes
-00019760: 742e 736b 6970 280a 2020 2020 2020 2020  t.skip(.        
-00019770: 2020 2767 7375 7469 6c20 646f 6573 206e    'gsutil does n
-00019780: 6f74 2073 7570 706f 7274 2065 6e63 7279  ot support encry
-00019790: 7074 696f 6e20 7769 7468 2074 6865 2058  ption with the X
-000197a0: 4d4c 2041 5049 2729 0a20 2020 206f 626a  ML API').    obj
-000197b0: 6563 745f 636f 6e74 656e 7473 203d 2062  ect_contents = b
-000197c0: 2762 6172 270a 2020 2020 6f62 6a65 6374  'bar'.    object
-000197d0: 5f75 7269 203d 2073 656c 662e 4372 6561  _uri = self.Crea
-000197e0: 7465 4f62 6a65 6374 286f 626a 6563 745f  teObject(object_
-000197f0: 6e61 6d65 3d27 666f 6f27 2c0a 2020 2020  name='foo',.    
-00019800: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019810: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-00019820: 6f6e 7465 6e74 733d 6f62 6a65 6374 5f63  ontents=object_c
-00019830: 6f6e 7465 6e74 732c 0a20 2020 2020 2020  ontents,.       
-00019840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019850: 2020 2020 2020 2020 2020 2020 656e 6372              encr
-00019860: 7970 7469 6f6e 5f6b 6579 3d54 4553 545f  yption_key=TEST_
-00019870: 454e 4352 5950 5449 4f4e 5f4b 4559 3129  ENCRYPTION_KEY1)
-00019880: 0a20 2020 2066 7061 7468 203d 2073 656c  .    fpath = sel
-00019890: 662e 4372 6561 7465 5465 6d70 4669 6c65  f.CreateTempFile
-000198a0: 2829 0a0a 2020 2020 7374 6465 7272 203d  ()..    stderr =
-000198b0: 2073 656c 662e 5275 6e47 7355 7469 6c28   self.RunGsUtil(
-000198c0: 0a20 2020 2020 2020 205b 2763 7027 2c20  .        ['cp', 
-000198d0: 7375 7269 286f 626a 6563 745f 7572 6929  suri(object_uri)
-000198e0: 2c20 7375 7269 2866 7061 7468 295d 2c0a  , suri(fpath)],.
-000198f0: 2020 2020 2020 2020 6578 7065 6374 6564          expected
-00019900: 5f73 7461 7475 733d 312c 0a20 2020 2020  _status=1,.     
-00019910: 2020 2072 6574 7572 6e5f 7374 6465 7272     return_stderr
-00019920: 3d54 7275 6529 0a20 2020 2073 656c 662e  =True).    self.
-00019930: 6173 7365 7274 496e 280a 2020 2020 2020  assertIn(.      
-00019940: 2020 274d 6973 7369 6e67 2064 6563 7279    'Missing decry
-00019950: 7074 696f 6e20 6b65 7920 7769 7468 2053  ption key with S
-00019960: 4841 3235 3620 6861 7368 2025 7327 2025  HA256 hash %s' %
-00019970: 0a20 2020 2020 2020 2054 4553 545f 454e  .        TEST_EN
-00019980: 4352 5950 5449 4f4e 5f4b 4559 315f 5348  CRYPTION_KEY1_SH
-00019990: 4132 3536 5f42 3634 2c20 7374 6465 7272  A256_B64, stderr
-000199a0: 290a 0a20 2040 536b 6970 466f 7253 3328  )..  @SkipForS3(
-000199b0: 2767 7375 7469 6c20 646f 6573 6e5c 2774  'gsutil doesn\'t
-000199c0: 2073 7570 706f 7274 2053 3320 6375 7374   support S3 cust
-000199d0: 6f6d 6572 2d73 7570 706c 6965 6420 656e  omer-supplied en
-000199e0: 6372 7970 7469 6f6e 206b 6579 732e 2729  cryption keys.')
-000199f0: 0a20 2040 5365 7175 656e 7469 616c 416e  .  @SequentialAn
-00019a00: 6450 6172 616c 6c65 6c54 7261 6e73 6665  dParallelTransfe
-00019a10: 720a 2020 6465 6620 7465 7374 5f63 705f  r.  def test_cp_
-00019a20: 7570 6c6f 6164 5f65 6e63 7279 7074 6564  upload_encrypted
-00019a30: 5f6f 626a 6563 7428 7365 6c66 293a 0a20  _object(self):. 
-00019a40: 2020 2022 2222 5465 7374 7320 7570 6c6f     """Tests uplo
-00019a50: 6164 696e 6720 616e 2065 6e63 7279 7074  ading an encrypt
-00019a60: 6564 206f 626a 6563 742e 2222 220a 2020  ed object.""".  
-00019a70: 2020 6966 2073 656c 662e 7465 7374 5f61    if self.test_a
-00019a80: 7069 203d 3d20 4170 6953 656c 6563 746f  pi == ApiSelecto
-00019a90: 722e 584d 4c3a 0a20 2020 2020 2072 6574  r.XML:.      ret
-00019aa0: 7572 6e20 756e 6974 7465 7374 2e73 6b69  urn unittest.ski
-00019ab0: 7028 0a20 2020 2020 2020 2020 2027 6773  p(.          'gs
-00019ac0: 7574 696c 2064 6f65 7320 6e6f 7420 7375  util does not su
-00019ad0: 7070 6f72 7420 656e 6372 7970 7469 6f6e  pport encryption
-00019ae0: 2077 6974 6820 7468 6520 584d 4c20 4150   with the XML AP
-00019af0: 4927 290a 2020 2020 6275 636b 6574 5f75  I').    bucket_u
-00019b00: 7269 203d 2073 656c 662e 4372 6561 7465  ri = self.Create
-00019b10: 4275 636b 6574 2829 0a20 2020 206f 626a  Bucket().    obj
-00019b20: 6563 745f 7572 6920 3d20 7375 7269 2862  ect_uri = suri(b
-00019b30: 7563 6b65 745f 7572 692c 2027 666f 6f27  ucket_uri, 'foo'
-00019b40: 290a 2020 2020 6669 6c65 5f63 6f6e 7465  ).    file_conte
-00019b50: 6e74 7320 3d20 6227 6261 7227 0a20 2020  nts = b'bar'.   
-00019b60: 2066 7061 7468 203d 2073 656c 662e 4372   fpath = self.Cr
-00019b70: 6561 7465 5465 6d70 4669 6c65 2863 6f6e  eateTempFile(con
-00019b80: 7465 6e74 733d 6669 6c65 5f63 6f6e 7465  tents=file_conte
-00019b90: 6e74 732c 2066 696c 655f 6e61 6d65 3d27  nts, file_name='
-00019ba0: 666f 6f27 290a 0a20 2020 2062 6f74 6f5f  foo')..    boto_
-00019bb0: 636f 6e66 6967 5f66 6f72 5f74 6573 7420  config_for_test 
-00019bc0: 3d20 5b28 2747 5355 7469 6c27 2c20 2765  = [('GSUtil', 'e
-00019bd0: 6e63 7279 7074 696f 6e5f 6b65 7927 2c20  ncryption_key', 
-00019be0: 5445 5354 5f45 4e43 5259 5054 494f 4e5f  TEST_ENCRYPTION_
-00019bf0: 4b45 5931 295d 0a0a 2020 2020 2320 5570  KEY1)]..    # Up
-00019c00: 6c6f 6164 696e 6720 7468 6520 6f62 6a65  loading the obje
-00019c10: 6374 2073 686f 756c 6420 7375 6363 6565  ct should succee
-00019c20: 642e 0a20 2020 2077 6974 6820 5365 7442  d..    with SetB
-00019c30: 6f74 6f43 6f6e 6669 6746 6f72 5465 7374  otoConfigForTest
-00019c40: 2862 6f74 6f5f 636f 6e66 6967 5f66 6f72  (boto_config_for
-00019c50: 5f74 6573 7429 3a0a 2020 2020 2020 7365  _test):.      se
-00019c60: 6c66 2e52 756e 4773 5574 696c 285b 2763  lf.RunGsUtil(['c
-00019c70: 7027 2c20 7375 7269 2866 7061 7468 292c  p', suri(fpath),
-00019c80: 2073 7572 6928 6275 636b 6574 5f75 7269   suri(bucket_uri
-00019c90: 295d 290a 0a20 2020 2073 656c 662e 4173  )])..    self.As
-00019ca0: 7365 7274 4f62 6a65 6374 5573 6573 4353  sertObjectUsesCS
-00019cb0: 454b 286f 626a 6563 745f 7572 692c 2054  EK(object_uri, T
-00019cc0: 4553 545f 454e 4352 5950 5449 4f4e 5f4b  EST_ENCRYPTION_K
-00019cd0: 4559 3129 0a0a 2020 2020 7769 7468 2053  EY1)..    with S
-00019ce0: 6574 426f 746f 436f 6e66 6967 466f 7254  etBotoConfigForT
-00019cf0: 6573 7428 626f 746f 5f63 6f6e 6669 675f  est(boto_config_
-00019d00: 666f 725f 7465 7374 293a 0a20 2020 2020  for_test):.     
-00019d10: 2023 2052 6561 6469 6e67 2074 6865 206f   # Reading the o
-00019d20: 626a 6563 7420 6261 636b 2073 686f 756c  bject back shoul
-00019d30: 6420 7375 6363 6565 642e 0a20 2020 2020  d succeed..     
-00019d40: 2066 7061 7468 3220 3d20 7365 6c66 2e43   fpath2 = self.C
-00019d50: 7265 6174 6554 656d 7046 696c 6528 290a  reateTempFile().
-00019d60: 2020 2020 2020 7365 6c66 2e52 756e 4773        self.RunGs
-00019d70: 5574 696c 285b 2763 7027 2c20 7375 7269  Util(['cp', suri
-00019d80: 2862 7563 6b65 745f 7572 692c 2027 666f  (bucket_uri, 'fo
-00019d90: 6f27 292c 2073 7572 6928 6670 6174 6832  o'), suri(fpath2
-00019da0: 295d 290a 2020 2020 2020 7769 7468 206f  )]).      with o
-00019db0: 7065 6e28 6670 6174 6832 2c20 2772 6227  pen(fpath2, 'rb'
-00019dc0: 2920 6173 2066 3a0a 2020 2020 2020 2020  ) as f:.        
-00019dd0: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-00019de0: 2866 2e72 6561 6428 292c 2066 696c 655f  (f.read(), file_
-00019df0: 636f 6e74 656e 7473 290a 0a20 2040 536b  contents)..  @Sk
-00019e00: 6970 466f 7253 3328 274e 6f20 7265 7375  ipForS3('No resu
-00019e10: 6d61 626c 6520 7570 6c6f 6164 206f 7220  mable upload or 
-00019e20: 656e 6372 7970 7469 6f6e 2073 7570 706f  encryption suppo
-00019e30: 7274 2066 6f72 2053 332e 2729 0a20 2064  rt for S3.').  d
-00019e40: 6566 2074 6573 745f 6370 5f72 6573 756d  ef test_cp_resum
-00019e50: 6162 6c65 5f75 706c 6f61 645f 656e 6372  able_upload_encr
-00019e60: 7970 7465 645f 6f62 6a65 6374 5f62 7265  ypted_object_bre
-00019e70: 616b 2873 656c 6629 3a0a 2020 2020 2222  ak(self):.    ""
-00019e80: 2254 6573 7473 2074 6861 7420 616e 2065  "Tests that an e
-00019e90: 6e63 7279 7074 6564 2075 706c 6f61 6420  ncrypted upload 
-00019ea0: 7265 7375 6d65 7320 6166 7465 7220 6120  resumes after a 
-00019eb0: 636f 6e6e 6563 7469 6f6e 2062 7265 616b  connection break
-00019ec0: 2e22 2222 0a20 2020 2069 6620 7365 6c66  .""".    if self
-00019ed0: 2e74 6573 745f 6170 6920 3d3d 2041 7069  .test_api == Api
-00019ee0: 5365 6c65 6374 6f72 2e58 4d4c 3a0a 2020  Selector.XML:.  
-00019ef0: 2020 2020 7265 7475 726e 2075 6e69 7474      return unitt
-00019f00: 6573 742e 736b 6970 280a 2020 2020 2020  est.skip(.      
-00019f10: 2020 2020 2767 7375 7469 6c20 646f 6573      'gsutil does
-00019f20: 206e 6f74 2073 7570 706f 7274 2065 6e63   not support enc
-00019f30: 7279 7074 696f 6e20 7769 7468 2074 6865  ryption with the
-00019f40: 2058 4d4c 2041 5049 2729 0a20 2020 2062   XML API').    b
-00019f50: 7563 6b65 745f 7572 6920 3d20 7365 6c66  ucket_uri = self
-00019f60: 2e43 7265 6174 6542 7563 6b65 7428 290a  .CreateBucket().
-00019f70: 2020 2020 6f62 6a65 6374 5f75 7269 5f73      object_uri_s
-00019f80: 7472 203d 2073 7572 6928 6275 636b 6574  tr = suri(bucket
-00019f90: 5f75 7269 2c20 2766 6f6f 2729 0a20 2020  _uri, 'foo').   
-00019fa0: 2066 7061 7468 203d 2073 656c 662e 4372   fpath = self.Cr
-00019fb0: 6561 7465 5465 6d70 4669 6c65 2863 6f6e  eateTempFile(con
-00019fc0: 7465 6e74 733d 6227 6127 202a 2073 656c  tents=b'a' * sel
-00019fd0: 662e 6861 6c74 5f73 697a 6529 0a20 2020  f.halt_size).   
-00019fe0: 2062 6f74 6f5f 636f 6e66 6967 5f66 6f72   boto_config_for
-00019ff0: 5f74 6573 7420 3d20 5b28 2747 5355 7469  _test = [('GSUti
-0001a000: 6c27 2c20 2772 6573 756d 6162 6c65 5f74  l', 'resumable_t
-0001a010: 6872 6573 686f 6c64 272c 2073 7472 284f  hreshold', str(O
-0001a020: 4e45 5f4b 4942 2929 2c0a 2020 2020 2020  NE_KIB)),.      
-0001a030: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a040: 2020 2020 2020 2827 4753 5574 696c 272c        ('GSUtil',
-0001a050: 2027 656e 6372 7970 7469 6f6e 5f6b 6579   'encryption_key
-0001a060: 272c 2054 4553 545f 454e 4352 5950 5449  ', TEST_ENCRYPTI
-0001a070: 4f4e 5f4b 4559 3129 5d0a 2020 2020 7465  ON_KEY1)].    te
-0001a080: 7374 5f63 616c 6c62 6163 6b5f 6669 6c65  st_callback_file
-0001a090: 203d 2073 656c 662e 4372 6561 7465 5465   = self.CreateTe
-0001a0a0: 6d70 4669 6c65 280a 2020 2020 2020 2020  mpFile(.        
-0001a0b0: 636f 6e74 656e 7473 3d70 6963 6b6c 652e  contents=pickle.
-0001a0c0: 6475 6d70 7328 4861 6c74 696e 6743 6f70  dumps(HaltingCop
-0001a0d0: 7943 616c 6c62 6163 6b48 616e 646c 6572  yCallbackHandler
-0001a0e0: 2854 7275 652c 2035 2929 290a 0a20 2020  (True, 5)))..   
-0001a0f0: 2077 6974 6820 5365 7442 6f74 6f43 6f6e   with SetBotoCon
-0001a100: 6669 6746 6f72 5465 7374 2862 6f74 6f5f  figForTest(boto_
-0001a110: 636f 6e66 6967 5f66 6f72 5f74 6573 7429  config_for_test)
-0001a120: 3a0a 2020 2020 2020 7374 6465 7272 203d  :.      stderr =
-0001a130: 2073 656c 662e 5275 6e47 7355 7469 6c28   self.RunGsUtil(
-0001a140: 5b0a 2020 2020 2020 2020 2020 2763 7027  [.          'cp'
-0001a150: 2c20 272d 2d74 6573 7463 616c 6c62 6163  , '--testcallbac
-0001a160: 6b66 696c 6527 2c20 7465 7374 5f63 616c  kfile', test_cal
-0001a170: 6c62 6163 6b5f 6669 6c65 2c20 6670 6174  lback_file, fpat
-0001a180: 682c 206f 626a 6563 745f 7572 695f 7374  h, object_uri_st
-0001a190: 720a 2020 2020 2020 5d2c 0a20 2020 2020  r.      ],.     
-0001a1a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a1b0: 2020 2020 2020 2020 2065 7870 6563 7465           expecte
-0001a1c0: 645f 7374 6174 7573 3d31 2c0a 2020 2020  d_status=1,.    
-0001a1d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a1e0: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0001a1f0: 5f73 7464 6572 723d 5472 7565 290a 2020  _stderr=True).  
-0001a200: 2020 2020 7365 6c66 2e61 7373 6572 7449      self.assertI
-0001a210: 6e28 2741 7274 6966 6963 616c 6c79 2068  n('Artifically h
-0001a220: 616c 7469 6e67 2075 706c 6f61 6427 2c20  alting upload', 
-0001a230: 7374 6465 7272 290a 2020 2020 2020 7374  stderr).      st
-0001a240: 6465 7272 203d 2073 656c 662e 5275 6e47  derr = self.RunG
-0001a250: 7355 7469 6c28 5b27 6370 272c 2066 7061  sUtil(['cp', fpa
-0001a260: 7468 2c20 6f62 6a65 6374 5f75 7269 5f73  th, object_uri_s
-0001a270: 7472 5d2c 2072 6574 7572 6e5f 7374 6465  tr], return_stde
-0001a280: 7272 3d54 7275 6529 0a20 2020 2020 2073  rr=True).      s
-0001a290: 656c 662e 6173 7365 7274 496e 2827 5265  elf.assertIn('Re
-0001a2a0: 7375 6d69 6e67 2075 706c 6f61 6427 2c20  suming upload', 
-0001a2b0: 7374 6465 7272 290a 2020 2020 2020 7374  stderr).      st
-0001a2c0: 646f 7574 203d 2073 656c 662e 5275 6e47  dout = self.RunG
-0001a2d0: 7355 7469 6c28 5b27 7374 6174 272c 206f  sUtil(['stat', o
-0001a2e0: 626a 6563 745f 7572 695f 7374 725d 2c20  bject_uri_str], 
-0001a2f0: 7265 7475 726e 5f73 7464 6f75 743d 5472  return_stdout=Tr
-0001a300: 7565 290a 2020 2020 2020 7769 7468 206f  ue).      with o
-0001a310: 7065 6e28 6670 6174 682c 2027 7262 2729  pen(fpath, 'rb')
-0001a320: 2061 7320 6670 3a0a 2020 2020 2020 2020   as fp:.        
-0001a330: 7365 6c66 2e61 7373 6572 7449 6e28 4361  self.assertIn(Ca
-0001a340: 6c63 756c 6174 6542 3634 456e 636f 6465  lculateB64Encode
-0001a350: 644d 6435 4672 6f6d 436f 6e74 656e 7473  dMd5FromContents
-0001a360: 2866 7029 2c20 7374 646f 7574 290a 0a20  (fp), stdout).. 
-0001a370: 2020 2073 656c 662e 4173 7365 7274 4f62     self.AssertOb
-0001a380: 6a65 6374 5573 6573 4353 454b 286f 626a  jectUsesCSEK(obj
-0001a390: 6563 745f 7572 695f 7374 722c 2054 4553  ect_uri_str, TES
-0001a3a0: 545f 454e 4352 5950 5449 4f4e 5f4b 4559  T_ENCRYPTION_KEY
-0001a3b0: 3129 0a0a 2020 4053 6b69 7046 6f72 5333  1)..  @SkipForS3
-0001a3c0: 2827 4e6f 2072 6573 756d 6162 6c65 2075  ('No resumable u
-0001a3d0: 706c 6f61 6420 6f72 2065 6e63 7279 7074  pload or encrypt
-0001a3e0: 696f 6e20 7375 7070 6f72 7420 666f 7220  ion support for 
-0001a3f0: 5333 2e27 290a 2020 6465 6620 7465 7374  S3.').  def test
-0001a400: 5f63 705f 7265 7375 6d61 626c 655f 7570  _cp_resumable_up
-0001a410: 6c6f 6164 5f65 6e63 7279 7074 6564 5f6f  load_encrypted_o
-0001a420: 626a 6563 745f 6469 6666 6572 656e 745f  bject_different_
-0001a430: 6b65 7928 7365 6c66 293a 0a20 2020 2022  key(self):.    "
-0001a440: 2222 5465 7374 7320 7468 6174 2061 6e20  ""Tests that an 
-0001a450: 656e 6372 7970 7465 6420 7570 6c6f 6164  encrypted upload
-0001a460: 2072 6573 756d 6520 7573 6573 206f 7269   resume uses ori
-0001a470: 6769 6e61 6c20 656e 6372 7970 7469 6f6e  ginal encryption
-0001a480: 206b 6579 2e22 2222 0a20 2020 2069 6620   key.""".    if 
-0001a490: 7365 6c66 2e74 6573 745f 6170 6920 3d3d  self.test_api ==
-0001a4a0: 2041 7069 5365 6c65 6374 6f72 2e58 4d4c   ApiSelector.XML
-0001a4b0: 3a0a 2020 2020 2020 7265 7475 726e 2075  :.      return u
-0001a4c0: 6e69 7474 6573 742e 736b 6970 280a 2020  nittest.skip(.  
-0001a4d0: 2020 2020 2020 2020 2767 7375 7469 6c20          'gsutil 
-0001a4e0: 646f 6573 206e 6f74 2073 7570 706f 7274  does not support
-0001a4f0: 2065 6e63 7279 7074 696f 6e20 7769 7468   encryption with
-0001a500: 2074 6865 2058 4d4c 2041 5049 2729 0a20   the XML API'). 
-0001a510: 2020 2062 7563 6b65 745f 7572 6920 3d20     bucket_uri = 
-0001a520: 7365 6c66 2e43 7265 6174 6542 7563 6b65  self.CreateBucke
-0001a530: 7428 290a 2020 2020 6f62 6a65 6374 5f75  t().    object_u
-0001a540: 7269 5f73 7472 203d 2073 7572 6928 6275  ri_str = suri(bu
-0001a550: 636b 6574 5f75 7269 2c20 2766 6f6f 2729  cket_uri, 'foo')
-0001a560: 0a20 2020 2066 696c 655f 636f 6e74 656e  .    file_conten
-0001a570: 7473 203d 2062 2761 2720 2a20 7365 6c66  ts = b'a' * self
-0001a580: 2e68 616c 745f 7369 7a65 0a20 2020 2066  .halt_size.    f
-0001a590: 7061 7468 203d 2073 656c 662e 4372 6561  path = self.Crea
-0001a5a0: 7465 5465 6d70 4669 6c65 2863 6f6e 7465  teTempFile(conte
-0001a5b0: 6e74 733d 6669 6c65 5f63 6f6e 7465 6e74  nts=file_content
-0001a5c0: 7329 0a20 2020 2062 6f74 6f5f 636f 6e66  s).    boto_conf
-0001a5d0: 6967 5f66 6f72 5f74 6573 7420 3d20 5b28  ig_for_test = [(
-0001a5e0: 2747 5355 7469 6c27 2c20 2772 6573 756d  'GSUtil', 'resum
-0001a5f0: 6162 6c65 5f74 6872 6573 686f 6c64 272c  able_threshold',
-0001a600: 2073 7472 284f 4e45 5f4b 4942 2929 2c0a   str(ONE_KIB)),.
-0001a610: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a620: 2020 2020 2020 2020 2020 2020 2827 4753              ('GS
-0001a630: 5574 696c 272c 2027 656e 6372 7970 7469  Util', 'encrypti
-0001a640: 6f6e 5f6b 6579 272c 2054 4553 545f 454e  on_key', TEST_EN
-0001a650: 4352 5950 5449 4f4e 5f4b 4559 3129 5d0a  CRYPTION_KEY1)].
-0001a660: 2020 2020 7465 7374 5f63 616c 6c62 6163      test_callbac
-0001a670: 6b5f 6669 6c65 203d 2073 656c 662e 4372  k_file = self.Cr
-0001a680: 6561 7465 5465 6d70 4669 6c65 280a 2020  eateTempFile(.  
-0001a690: 2020 2020 2020 636f 6e74 656e 7473 3d70        contents=p
-0001a6a0: 6963 6b6c 652e 6475 6d70 7328 4861 6c74  ickle.dumps(Halt
-0001a6b0: 696e 6743 6f70 7943 616c 6c62 6163 6b48  ingCopyCallbackH
-0001a6c0: 616e 646c 6572 2854 7275 652c 2035 2929  andler(True, 5))
-0001a6d0: 290a 0a20 2020 2077 6974 6820 5365 7442  )..    with SetB
-0001a6e0: 6f74 6f43 6f6e 6669 6746 6f72 5465 7374  otoConfigForTest
-0001a6f0: 2862 6f74 6f5f 636f 6e66 6967 5f66 6f72  (boto_config_for
-0001a700: 5f74 6573 7429 3a0a 2020 2020 2020 7374  _test):.      st
-0001a710: 6465 7272 203d 2073 656c 662e 5275 6e47  derr = self.RunG
-0001a720: 7355 7469 6c28 5b0a 2020 2020 2020 2020  sUtil([.        
-0001a730: 2020 2763 7027 2c20 272d 2d74 6573 7463    'cp', '--testc
-0001a740: 616c 6c62 6163 6b66 696c 6527 2c20 7465  allbackfile', te
-0001a750: 7374 5f63 616c 6c62 6163 6b5f 6669 6c65  st_callback_file
-0001a760: 2c20 6670 6174 682c 206f 626a 6563 745f  , fpath, object_
-0001a770: 7572 695f 7374 720a 2020 2020 2020 5d2c  uri_str.      ],
-0001a780: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001a790: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-0001a7a0: 7870 6563 7465 645f 7374 6174 7573 3d31  xpected_status=1
-0001a7b0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-0001a7c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a7d0: 7265 7475 726e 5f73 7464 6572 723d 5472  return_stderr=Tr
-0001a7e0: 7565 290a 2020 2020 2020 7365 6c66 2e61  ue).      self.a
-0001a7f0: 7373 6572 7449 6e28 2741 7274 6966 6963  ssertIn('Artific
-0001a800: 616c 6c79 2068 616c 7469 6e67 2075 706c  ally halting upl
-0001a810: 6f61 6427 2c20 7374 6465 7272 290a 0a20  oad', stderr).. 
-0001a820: 2020 2023 2052 6573 756d 6520 7468 6520     # Resume the 
-0001a830: 7570 6c6f 6164 2077 6974 6820 6d75 6c74  upload with mult
-0001a840: 6970 6c65 206b 6579 732c 2069 6e63 6c75  iple keys, inclu
-0001a850: 6469 6e67 2074 6865 206f 7269 6769 6e61  ding the origina
-0001a860: 6c2e 0a20 2020 2062 6f74 6f5f 636f 6e66  l..    boto_conf
-0001a870: 6967 5f66 6f72 5f74 6573 7432 203d 205b  ig_for_test2 = [
-0001a880: 2827 4753 5574 696c 272c 2027 7265 7375  ('GSUtil', 'resu
-0001a890: 6d61 626c 655f 7468 7265 7368 6f6c 6427  mable_threshold'
-0001a8a0: 2c20 7374 7228 4f4e 455f 4b49 4229 292c  , str(ONE_KIB)),
-0001a8b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001a8c0: 2020 2020 2020 2020 2020 2020 2020 2827                ('
-0001a8d0: 4753 5574 696c 272c 2027 6465 6372 7970  GSUtil', 'decryp
-0001a8e0: 7469 6f6e 5f6b 6579 3127 2c0a 2020 2020  tion_key1',.    
-0001a8f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a900: 2020 2020 2020 2020 2020 5445 5354 5f45            TEST_E
-0001a910: 4e43 5259 5054 494f 4e5f 4b45 5932 292c  NCRYPTION_KEY2),
-0001a920: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001a930: 2020 2020 2020 2020 2020 2020 2020 2827                ('
-0001a940: 4753 5574 696c 272c 2027 656e 6372 7970  GSUtil', 'encryp
-0001a950: 7469 6f6e 5f6b 6579 272c 2054 4553 545f  tion_key', TEST_
-0001a960: 454e 4352 5950 5449 4f4e 5f4b 4559 3129  ENCRYPTION_KEY1)
-0001a970: 5d0a 0a20 2020 2077 6974 6820 5365 7442  ]..    with SetB
-0001a980: 6f74 6f43 6f6e 6669 6746 6f72 5465 7374  otoConfigForTest
-0001a990: 2862 6f74 6f5f 636f 6e66 6967 5f66 6f72  (boto_config_for
-0001a9a0: 5f74 6573 7432 293a 0a20 2020 2020 2073  _test2):.      s
-0001a9b0: 7464 6572 7220 3d20 7365 6c66 2e52 756e  tderr = self.Run
-0001a9c0: 4773 5574 696c 285b 2763 7027 2c20 6670  GsUtil(['cp', fp
-0001a9d0: 6174 682c 206f 626a 6563 745f 7572 695f  ath, object_uri_
-0001a9e0: 7374 725d 2c20 7265 7475 726e 5f73 7464  str], return_std
-0001a9f0: 6572 723d 5472 7565 290a 2020 2020 2020  err=True).      
-0001aa00: 7365 6c66 2e61 7373 6572 7449 6e28 2752  self.assertIn('R
-0001aa10: 6573 756d 696e 6720 7570 6c6f 6164 272c  esuming upload',
-0001aa20: 2073 7464 6572 7229 0a0a 2020 2020 2320   stderr)..    # 
-0001aa30: 4f62 6a65 6374 2073 686f 756c 6420 6861  Object should ha
-0001aa40: 7665 2074 6865 206f 7269 6769 6e61 6c20  ve the original 
-0001aa50: 6b65 792e 0a20 2020 2073 656c 662e 4173  key..    self.As
-0001aa60: 7365 7274 4f62 6a65 6374 5573 6573 4353  sertObjectUsesCS
-0001aa70: 454b 286f 626a 6563 745f 7572 695f 7374  EK(object_uri_st
-0001aa80: 722c 2054 4553 545f 454e 4352 5950 5449  r, TEST_ENCRYPTI
-0001aa90: 4f4e 5f4b 4559 3129 0a0a 2020 4053 6b69  ON_KEY1)..  @Ski
-0001aaa0: 7046 6f72 5333 2827 4e6f 2072 6573 756d  pForS3('No resum
-0001aab0: 6162 6c65 2075 706c 6f61 6420 6f72 2065  able upload or e
-0001aac0: 6e63 7279 7074 696f 6e20 7375 7070 6f72  ncryption suppor
-0001aad0: 7420 666f 7220 5333 2e27 290a 2020 6465  t for S3.').  de
-0001aae0: 6620 7465 7374 5f63 705f 7265 7375 6d61  f test_cp_resuma
-0001aaf0: 626c 655f 7570 6c6f 6164 5f65 6e63 7279  ble_upload_encry
-0001ab00: 7074 6564 5f6f 626a 6563 745f 6d69 7373  pted_object_miss
-0001ab10: 696e 675f 6b65 7928 7365 6c66 293a 0a20  ing_key(self):. 
-0001ab20: 2020 2022 2222 5465 7374 7320 7468 6174     """Tests that
-0001ab30: 2061 6e20 656e 6372 7970 7465 6420 7570   an encrypted up
-0001ab40: 6c6f 6164 2064 6f65 7320 6e6f 7420 7265  load does not re
-0001ab50: 7375 6d65 2077 6974 686f 7574 206f 7269  sume without ori
-0001ab60: 6769 6e61 6c20 6b65 792e 2222 220a 2020  ginal key.""".  
-0001ab70: 2020 6966 2073 656c 662e 7465 7374 5f61    if self.test_a
-0001ab80: 7069 203d 3d20 4170 6953 656c 6563 746f  pi == ApiSelecto
-0001ab90: 722e 584d 4c3a 0a20 2020 2020 2072 6574  r.XML:.      ret
-0001aba0: 7572 6e20 756e 6974 7465 7374 2e73 6b69  urn unittest.ski
-0001abb0: 7028 0a20 2020 2020 2020 2020 2027 6773  p(.          'gs
-0001abc0: 7574 696c 2064 6f65 7320 6e6f 7420 7375  util does not su
-0001abd0: 7070 6f72 7420 656e 6372 7970 7469 6f6e  pport encryption
-0001abe0: 2077 6974 6820 7468 6520 584d 4c20 4150   with the XML AP
-0001abf0: 4927 290a 2020 2020 6275 636b 6574 5f75  I').    bucket_u
-0001ac00: 7269 203d 2073 656c 662e 4372 6561 7465  ri = self.Create
-0001ac10: 4275 636b 6574 2829 0a20 2020 206f 626a  Bucket().    obj
-0001ac20: 6563 745f 7572 695f 7374 7220 3d20 7375  ect_uri_str = su
-0001ac30: 7269 2862 7563 6b65 745f 7572 692c 2027  ri(bucket_uri, '
-0001ac40: 666f 6f27 290a 2020 2020 6669 6c65 5f63  foo').    file_c
-0001ac50: 6f6e 7465 6e74 7320 3d20 6227 6127 202a  ontents = b'a' *
-0001ac60: 2073 656c 662e 6861 6c74 5f73 697a 650a   self.halt_size.
-0001ac70: 2020 2020 6670 6174 6820 3d20 7365 6c66      fpath = self
-0001ac80: 2e43 7265 6174 6554 656d 7046 696c 6528  .CreateTempFile(
-0001ac90: 636f 6e74 656e 7473 3d66 696c 655f 636f  contents=file_co
-0001aca0: 6e74 656e 7473 290a 2020 2020 626f 746f  ntents).    boto
-0001acb0: 5f63 6f6e 6669 675f 666f 725f 7465 7374  _config_for_test
-0001acc0: 203d 205b 2827 4753 5574 696c 272c 2027   = [('GSUtil', '
-0001acd0: 7265 7375 6d61 626c 655f 7468 7265 7368  resumable_thresh
-0001ace0: 6f6c 6427 2c20 7374 7228 4f4e 455f 4b49  old', str(ONE_KI
-0001acf0: 4229 292c 0a20 2020 2020 2020 2020 2020  B)),.           
-0001ad00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ad10: 2028 2747 5355 7469 6c27 2c20 2765 6e63   ('GSUtil', 'enc
-0001ad20: 7279 7074 696f 6e5f 6b65 7927 2c20 5445  ryption_key', TE
-0001ad30: 5354 5f45 4e43 5259 5054 494f 4e5f 4b45  ST_ENCRYPTION_KE
-0001ad40: 5931 295d 0a20 2020 2074 6573 745f 6361  Y1)].    test_ca
-0001ad50: 6c6c 6261 636b 5f66 696c 6520 3d20 7365  llback_file = se
-0001ad60: 6c66 2e43 7265 6174 6554 656d 7046 696c  lf.CreateTempFil
-0001ad70: 6528 0a20 2020 2020 2020 2063 6f6e 7465  e(.        conte
-0001ad80: 6e74 733d 7069 636b 6c65 2e64 756d 7073  nts=pickle.dumps
-0001ad90: 2848 616c 7469 6e67 436f 7079 4361 6c6c  (HaltingCopyCall
-0001ada0: 6261 636b 4861 6e64 6c65 7228 5472 7565  backHandler(True
-0001adb0: 2c20 3529 2929 0a0a 2020 2020 7769 7468  , 5)))..    with
-0001adc0: 2053 6574 426f 746f 436f 6e66 6967 466f   SetBotoConfigFo
-0001add0: 7254 6573 7428 626f 746f 5f63 6f6e 6669  rTest(boto_confi
-0001ade0: 675f 666f 725f 7465 7374 293a 0a20 2020  g_for_test):.   
-0001adf0: 2020 2073 7464 6572 7220 3d20 7365 6c66     stderr = self
-0001ae00: 2e52 756e 4773 5574 696c 285b 0a20 2020  .RunGsUtil([.   
-0001ae10: 2020 2020 2020 2027 6370 272c 2027 2d2d         'cp', '--
-0001ae20: 7465 7374 6361 6c6c 6261 636b 6669 6c65  testcallbackfile
-0001ae30: 272c 2074 6573 745f 6361 6c6c 6261 636b  ', test_callback
-0001ae40: 5f66 696c 652c 2066 7061 7468 2c20 6f62  _file, fpath, ob
-0001ae50: 6a65 6374 5f75 7269 5f73 7472 0a20 2020  ject_uri_str.   
-0001ae60: 2020 205d 2c0a 2020 2020 2020 2020 2020     ],.          
-0001ae70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ae80: 2020 2020 6578 7065 6374 6564 5f73 7461      expected_sta
-0001ae90: 7475 733d 312c 0a20 2020 2020 2020 2020  tus=1,.         
-0001aea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001aeb0: 2020 2020 2072 6574 7572 6e5f 7374 6465       return_stde
-0001aec0: 7272 3d54 7275 6529 0a20 2020 2020 2073  rr=True).      s
-0001aed0: 656c 662e 6173 7365 7274 496e 2827 4172  elf.assertIn('Ar
-0001aee0: 7469 6669 6361 6c6c 7920 6861 6c74 696e  tifically haltin
-0001aef0: 6720 7570 6c6f 6164 272c 2073 7464 6572  g upload', stder
-0001af00: 7229 0a0a 2020 2020 2320 5265 7375 6d65  r)..    # Resume
-0001af10: 2074 6865 2075 706c 6f61 6420 7769 7468   the upload with
-0001af20: 6f75 7420 7468 6520 6f72 6967 696e 616c  out the original
-0001af30: 206b 6579 2e0a 2020 2020 626f 746f 5f63   key..    boto_c
-0001af40: 6f6e 6669 675f 666f 725f 7465 7374 3220  onfig_for_test2 
-0001af50: 3d20 5b28 2747 5355 7469 6c27 2c20 2772  = [('GSUtil', 'r
-0001af60: 6573 756d 6162 6c65 5f74 6872 6573 686f  esumable_thresho
-0001af70: 6c64 272c 2073 7472 284f 4e45 5f4b 4942  ld', str(ONE_KIB
-0001af80: 2929 2c0a 2020 2020 2020 2020 2020 2020  )),.            
-0001af90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001afa0: 2028 2747 5355 7469 6c27 2c20 2765 6e63   ('GSUtil', 'enc
-0001afb0: 7279 7074 696f 6e5f 6b65 7927 2c20 5445  ryption_key', TE
-0001afc0: 5354 5f45 4e43 5259 5054 494f 4e5f 4b45  ST_ENCRYPTION_KE
-0001afd0: 5932 295d 0a0a 2020 2020 7769 7468 2053  Y2)]..    with S
-0001afe0: 6574 426f 746f 436f 6e66 6967 466f 7254  etBotoConfigForT
-0001aff0: 6573 7428 626f 746f 5f63 6f6e 6669 675f  est(boto_config_
-0001b000: 666f 725f 7465 7374 3229 3a0a 2020 2020  for_test2):.    
-0001b010: 2020 7374 6465 7272 203d 2073 656c 662e    stderr = self.
-0001b020: 5275 6e47 7355 7469 6c28 5b27 6370 272c  RunGsUtil(['cp',
-0001b030: 2066 7061 7468 2c20 6f62 6a65 6374 5f75   fpath, object_u
-0001b040: 7269 5f73 7472 5d2c 2072 6574 7572 6e5f  ri_str], return_
-0001b050: 7374 6465 7272 3d54 7275 6529 0a20 2020  stderr=True).   
-0001b060: 2020 2073 656c 662e 6173 7365 7274 4e6f     self.assertNo
-0001b070: 7449 6e28 2752 6573 756d 696e 6720 7570  tIn('Resuming up
-0001b080: 6c6f 6164 272c 2073 7464 6572 7229 0a20  load', stderr). 
-0001b090: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-0001b0a0: 496e 2827 646f 6573 206e 6f74 206d 6174  In('does not mat
-0001b0b0: 6368 2063 7572 7265 6e74 2065 6e63 7279  ch current encry
-0001b0c0: 7074 696f 6e20 6b65 7927 2c20 7374 6465  ption key', stde
-0001b0d0: 7272 290a 2020 2020 2020 7365 6c66 2e61  rr).      self.a
-0001b0e0: 7373 6572 7449 6e28 2752 6573 7461 7274  ssertIn('Restart
-0001b0f0: 696e 6720 7570 6c6f 6164 2066 726f 6d20  ing upload from 
-0001b100: 7363 7261 7463 6827 2c20 7374 6465 7272  scratch', stderr
-0001b110: 290a 0a20 2020 2020 2023 204f 626a 6563  )..      # Objec
-0001b120: 7420 7368 6f75 6c64 2068 6176 6520 7468  t should have th
-0001b130: 6520 6e65 7720 6b65 792e 0a20 2020 2020  e new key..     
-0001b140: 2073 656c 662e 4173 7365 7274 4f62 6a65   self.AssertObje
-0001b150: 6374 5573 6573 4353 454b 286f 626a 6563  ctUsesCSEK(objec
-0001b160: 745f 7572 695f 7374 722c 2054 4553 545f  t_uri_str, TEST_
-0001b170: 454e 4352 5950 5449 4f4e 5f4b 4559 3229  ENCRYPTION_KEY2)
-0001b180: 0a0a 2020 6465 6620 5f65 6e73 7572 655f  ..  def _ensure_
-0001b190: 6f62 6a65 6374 5f75 6e65 6e63 7279 7074  object_unencrypt
-0001b1a0: 6564 2873 656c 662c 206f 626a 6563 745f  ed(self, object_
-0001b1b0: 7572 695f 7374 7229 3a0a 2020 2020 2222  uri_str):.    ""
-0001b1c0: 2253 7472 6f6e 676c 7920 636f 6e73 6973  "Strongly consis
-0001b1d0: 7465 6e74 2063 6865 636b 2074 6861 7420  tent check that 
-0001b1e0: 7468 6520 6f62 6a65 6374 2069 7320 756e  the object is un
-0001b1f0: 656e 6372 7970 7465 642e 2222 220a 2020  encrypted.""".  
-0001b200: 2020 7374 646f 7574 203d 2073 656c 662e    stdout = self.
-0001b210: 5275 6e47 7355 7469 6c28 5b27 7374 6174  RunGsUtil(['stat
-0001b220: 272c 206f 626a 6563 745f 7572 695f 7374  ', object_uri_st
-0001b230: 725d 2c20 7265 7475 726e 5f73 7464 6f75  r], return_stdou
-0001b240: 743d 5472 7565 290a 2020 2020 7365 6c66  t=True).    self
-0001b250: 2e61 7373 6572 744e 6f74 496e 2827 456e  .assertNotIn('En
-0001b260: 6372 7970 7469 6f6e 204b 6579 272c 2073  cryption Key', s
-0001b270: 7464 6f75 7429 0a0a 2020 4053 6b69 7046  tdout)..  @SkipF
-0001b280: 6f72 5333 2827 4e6f 2072 6573 756d 6162  orS3('No resumab
-0001b290: 6c65 2075 706c 6f61 6420 7375 7070 6f72  le upload suppor
-0001b2a0: 7420 666f 7220 5333 2e27 290a 2020 6465  t for S3.').  de
-0001b2b0: 6620 7465 7374 5f63 705f 7265 7375 6d61  f test_cp_resuma
-0001b2c0: 626c 655f 7570 6c6f 6164 5f62 7265 616b  ble_upload_break
-0001b2d0: 2873 656c 6629 3a0a 2020 2020 2222 2254  (self):.    """T
-0001b2e0: 6573 7473 2074 6861 7420 616e 2075 706c  ests that an upl
-0001b2f0: 6f61 6420 6361 6e20 6265 2072 6573 756d  oad can be resum
-0001b300: 6564 2061 6674 6572 2061 2063 6f6e 6e65  ed after a conne
-0001b310: 6374 696f 6e20 6272 6561 6b2e 2222 220a  ction break.""".
-0001b320: 2020 2020 6275 636b 6574 5f75 7269 203d      bucket_uri =
-0001b330: 2073 656c 662e 4372 6561 7465 4275 636b   self.CreateBuck
-0001b340: 6574 2829 0a20 2020 2066 7061 7468 203d  et().    fpath =
-0001b350: 2073 656c 662e 4372 6561 7465 5465 6d70   self.CreateTemp
-0001b360: 4669 6c65 2863 6f6e 7465 6e74 733d 6227  File(contents=b'
-0001b370: 6127 202a 2073 656c 662e 6861 6c74 5f73  a' * self.halt_s
-0001b380: 697a 6529 0a20 2020 2062 6f74 6f5f 636f  ize).    boto_co
-0001b390: 6e66 6967 5f66 6f72 5f74 6573 7420 3d20  nfig_for_test = 
-0001b3a0: 2827 4753 5574 696c 272c 2027 7265 7375  ('GSUtil', 'resu
-0001b3b0: 6d61 626c 655f 7468 7265 7368 6f6c 6427  mable_threshold'
-0001b3c0: 2c20 7374 7228 4f4e 455f 4b49 4229 290a  , str(ONE_KIB)).
-0001b3d0: 2020 2020 7465 7374 5f63 616c 6c62 6163      test_callbac
-0001b3e0: 6b5f 6669 6c65 203d 2073 656c 662e 4372  k_file = self.Cr
-0001b3f0: 6561 7465 5465 6d70 4669 6c65 280a 2020  eateTempFile(.  
-0001b400: 2020 2020 2020 636f 6e74 656e 7473 3d70        contents=p
-0001b410: 6963 6b6c 652e 6475 6d70 7328 4861 6c74  ickle.dumps(Halt
-0001b420: 696e 6743 6f70 7943 616c 6c62 6163 6b48  ingCopyCallbackH
-0001b430: 616e 646c 6572 2854 7275 652c 2035 2929  andler(True, 5))
-0001b440: 290a 0a20 2020 2077 6974 6820 5365 7442  )..    with SetB
-0001b450: 6f74 6f43 6f6e 6669 6746 6f72 5465 7374  otoConfigForTest
-0001b460: 285b 626f 746f 5f63 6f6e 6669 675f 666f  ([boto_config_fo
-0001b470: 725f 7465 7374 5d29 3a0a 2020 2020 2020  r_test]):.      
-0001b480: 7374 6465 7272 203d 2073 656c 662e 5275  stderr = self.Ru
-0001b490: 6e47 7355 7469 6c28 5b0a 2020 2020 2020  nGsUtil([.      
-0001b4a0: 2020 2020 2763 7027 2c20 272d 2d74 6573      'cp', '--tes
-0001b4b0: 7463 616c 6c62 6163 6b66 696c 6527 2c20  tcallbackfile', 
-0001b4c0: 7465 7374 5f63 616c 6c62 6163 6b5f 6669  test_callback_fi
-0001b4d0: 6c65 2c20 6670 6174 682c 0a20 2020 2020  le, fpath,.     
-0001b4e0: 2020 2020 2073 7572 6928 6275 636b 6574       suri(bucket
-0001b4f0: 5f75 7269 290a 2020 2020 2020 5d2c 0a20  _uri).      ],. 
-0001b500: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b510: 2020 2020 2020 2020 2020 2020 2065 7870               exp
-0001b520: 6563 7465 645f 7374 6174 7573 3d31 2c0a  ected_status=1,.
-0001b530: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b540: 2020 2020 2020 2020 2020 2020 2020 7265                re
-0001b550: 7475 726e 5f73 7464 6572 723d 5472 7565  turn_stderr=True
-0001b560: 290a 2020 2020 2020 7365 6c66 2e61 7373  ).      self.ass
-0001b570: 6572 7449 6e28 2741 7274 6966 6963 616c  ertIn('Artifical
-0001b580: 6c79 2068 616c 7469 6e67 2075 706c 6f61  ly halting uploa
-0001b590: 6427 2c20 7374 6465 7272 290a 2020 2020  d', stderr).    
-0001b5a0: 2020 7374 6465 7272 203d 2073 656c 662e    stderr = self.
-0001b5b0: 5275 6e47 7355 7469 6c28 5b27 6370 272c  RunGsUtil(['cp',
-0001b5c0: 2066 7061 7468 2c20 7375 7269 2862 7563   fpath, suri(buc
-0001b5d0: 6b65 745f 7572 6929 5d2c 0a20 2020 2020  ket_uri)],.     
-0001b5e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b5f0: 2020 2020 2020 2020 2072 6574 7572 6e5f           return_
-0001b600: 7374 6465 7272 3d54 7275 6529 0a20 2020  stderr=True).   
-0001b610: 2020 2073 656c 662e 6173 7365 7274 496e     self.assertIn
-0001b620: 2827 5265 7375 6d69 6e67 2075 706c 6f61  ('Resuming uploa
-0001b630: 6427 2c20 7374 6465 7272 290a 0a20 2040  d', stderr)..  @
-0001b640: 536b 6970 466f 7253 3328 274e 6f20 636f  SkipForS3('No co
-0001b650: 6d70 7265 7373 6564 2074 7261 6e73 706f  mpressed transpo
-0001b660: 7274 2065 6e63 6f64 696e 6720 7375 7070  rt encoding supp
-0001b670: 6f72 7420 666f 7220 5333 2e27 290a 2020  ort for S3.').  
-0001b680: 4053 6b69 7046 6f72 584d 4c28 274e 6f20  @SkipForXML('No 
-0001b690: 636f 6d70 7265 7373 6564 2074 7261 6e73  compressed trans
-0001b6a0: 706f 7274 2065 6e63 6f64 696e 6720 7375  port encoding su
-0001b6b0: 7070 6f72 7420 666f 7220 7468 6520 584d  pport for the XM
-0001b6c0: 4c20 4150 492e 2729 0a20 2040 5365 7175  L API.').  @Sequ
-0001b6d0: 656e 7469 616c 416e 6450 6172 616c 6c65  entialAndParalle
-0001b6e0: 6c54 7261 6e73 6665 720a 2020 6465 6620  lTransfer.  def 
-0001b6f0: 7465 7374 5f63 705f 7265 7375 6d61 626c  test_cp_resumabl
-0001b700: 655f 7570 6c6f 6164 5f67 7a69 705f 656e  e_upload_gzip_en
-0001b710: 636f 6465 645f 6272 6561 6b28 7365 6c66  coded_break(self
-0001b720: 293a 0a20 2020 2022 2222 5465 7374 7320  ):.    """Tests 
-0001b730: 7468 6174 2061 2067 7a69 7020 656e 636f  that a gzip enco
-0001b740: 6465 6420 7570 6c6f 6164 2063 616e 2062  ded upload can b
-0001b750: 6520 7265 7375 6d65 642e 2222 220a 2020  e resumed.""".  
-0001b760: 2020 2320 5365 7475 7020 7468 6520 6275    # Setup the bu
-0001b770: 636b 6574 2061 6e64 206c 6f63 616c 2064  cket and local d
-0001b780: 6174 612e 2046 696c 6520 636f 6e74 656e  ata. File conten
-0001b790: 7473 2061 7265 2072 616e 646f 6d69 7a65  ts are randomize
-0001b7a0: 6420 746f 2070 7265 7665 6e74 0a20 2020  d to prevent.   
-0001b7b0: 2023 2074 6865 6d20 6672 6f6d 2063 6f6d   # them from com
-0001b7c0: 7072 6573 7369 6e67 2062 656c 6f77 2074  pressing below t
-0001b7d0: 6865 2072 6573 756d 6162 6c65 2d74 6872  he resumable-thr
-0001b7e0: 6573 686f 6c64 2061 6e64 2066 6169 6c69  eshold and faili
-0001b7f0: 6e67 2074 6865 2074 6573 742e 0a20 2020  ng the test..   
-0001b800: 2062 7563 6b65 745f 7572 6920 3d20 7365   bucket_uri = se
-0001b810: 6c66 2e43 7265 6174 6542 7563 6b65 7428  lf.CreateBucket(
-0001b820: 290a 2020 2020 636f 6e74 656e 7473 203d  ).    contents =
-0001b830: 2067 6574 5f72 616e 646f 6d5f 6173 6369   get_random_asci
-0001b840: 695f 6368 6172 7328 7369 7a65 3d73 656c  i_chars(size=sel
-0001b850: 662e 6861 6c74 5f73 697a 6529 0a20 2020  f.halt_size).   
-0001b860: 206c 6f63 616c 5f75 7269 203d 2073 656c   local_uri = sel
-0001b870: 662e 4372 6561 7465 5465 6d70 4669 6c65  f.CreateTempFile
-0001b880: 2866 696c 655f 6e61 6d65 3d27 7465 7374  (file_name='test
-0001b890: 2e74 7874 272c 2063 6f6e 7465 6e74 733d  .txt', contents=
-0001b8a0: 636f 6e74 656e 7473 290a 2020 2020 2320  contents).    # 
-0001b8b0: 436f 6e66 6967 7572 6520 626f 746f 0a20  Configure boto. 
-0001b8c0: 2020 2062 6f74 6f5f 636f 6e66 6967 5f66     boto_config_f
-0001b8d0: 6f72 5f74 6573 7420 3d20 2827 4753 5574  or_test = ('GSUt
-0001b8e0: 696c 272c 2027 7265 7375 6d61 626c 655f  il', 'resumable_
-0001b8f0: 7468 7265 7368 6f6c 6427 2c20 7374 7228  threshold', str(
-0001b900: 4f4e 455f 4b49 4229 290a 2020 2020 7465  ONE_KIB)).    te
-0001b910: 7374 5f63 616c 6c62 6163 6b5f 6669 6c65  st_callback_file
-0001b920: 203d 2073 656c 662e 4372 6561 7465 5465   = self.CreateTe
-0001b930: 6d70 4669 6c65 280a 2020 2020 2020 2020  mpFile(.        
-0001b940: 636f 6e74 656e 7473 3d70 6963 6b6c 652e  contents=pickle.
-0001b950: 6475 6d70 7328 4861 6c74 696e 6743 6f70  dumps(HaltingCop
-0001b960: 7943 616c 6c62 6163 6b48 616e 646c 6572  yCallbackHandler
-0001b970: 2854 7275 652c 2035 2929 290a 0a20 2020  (True, 5)))..   
-0001b980: 2077 6974 6820 5365 7442 6f74 6f43 6f6e   with SetBotoCon
-0001b990: 6669 6746 6f72 5465 7374 285b 626f 746f  figForTest([boto
-0001b9a0: 5f63 6f6e 6669 675f 666f 725f 7465 7374  _config_for_test
-0001b9b0: 5d29 3a0a 2020 2020 2020 7374 6465 7272  ]):.      stderr
-0001b9c0: 203d 2073 656c 662e 5275 6e47 7355 7469   = self.RunGsUti
-0001b9d0: 6c28 5b0a 2020 2020 2020 2020 2020 272d  l([.          '-
-0001b9e0: 4427 2c20 2763 7027 2c20 272d 4a27 2c20  D', 'cp', '-J', 
-0001b9f0: 272d 2d74 6573 7463 616c 6c62 6163 6b66  '--testcallbackf
-0001ba00: 696c 6527 2c20 7465 7374 5f63 616c 6c62  ile', test_callb
-0001ba10: 6163 6b5f 6669 6c65 2c20 6c6f 6361 6c5f  ack_file, local_
-0001ba20: 7572 692c 0a20 2020 2020 2020 2020 2073  uri,.          s
-0001ba30: 7572 6928 6275 636b 6574 5f75 7269 290a  uri(bucket_uri).
-0001ba40: 2020 2020 2020 5d2c 0a20 2020 2020 2020        ],.       
-0001ba50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ba60: 2020 2020 2020 2065 7870 6563 7465 645f         expected_
-0001ba70: 7374 6174 7573 3d31 2c0a 2020 2020 2020  status=1,.      
-0001ba80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ba90: 2020 2020 2020 2020 7265 7475 726e 5f73          return_s
-0001baa0: 7464 6572 723d 5472 7565 290a 2020 2020  tderr=True).    
-0001bab0: 2020 2320 456e 7375 7265 2074 6865 2070    # Ensure the p
-0001bac0: 726f 6772 6573 7320 6c6f 6767 6572 2073  rogress logger s
-0001bad0: 6565 7320 6120 677a 6970 2065 6e63 6f64  ees a gzip encod
-0001bae0: 696e 672e 0a20 2020 2020 2073 656c 662e  ing..      self.
-0001baf0: 6173 7365 7274 496e 2827 7365 6e64 3a20  assertIn('send: 
-0001bb00: 5573 696e 6720 677a 6970 2074 7261 6e73  Using gzip trans
-0001bb10: 706f 7274 2065 6e63 6f64 696e 6720 666f  port encoding fo
-0001bb20: 7220 7468 6520 7265 7175 6573 742e 272c  r the request.',
-0001bb30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001bb40: 2020 2020 2073 7464 6572 7229 0a20 2020       stderr).   
-0001bb50: 2020 2073 656c 662e 6173 7365 7274 496e     self.assertIn
-0001bb60: 2827 4172 7469 6669 6361 6c6c 7920 6861  ('Artifically ha
-0001bb70: 6c74 696e 6720 7570 6c6f 6164 272c 2073  lting upload', s
-0001bb80: 7464 6572 7229 0a20 2020 2020 2073 7464  tderr).      std
-0001bb90: 6572 7220 3d20 7365 6c66 2e52 756e 4773  err = self.RunGs
-0001bba0: 5574 696c 285b 272d 4427 2c20 2763 7027  Util(['-D', 'cp'
-0001bbb0: 2c20 272d 4a27 2c20 6c6f 6361 6c5f 7572  , '-J', local_ur
-0001bbc0: 692c 0a20 2020 2020 2020 2020 2020 2020  i,.             
-0001bbd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bbe0: 2020 7375 7269 2862 7563 6b65 745f 7572    suri(bucket_ur
-0001bbf0: 6929 5d2c 0a20 2020 2020 2020 2020 2020  i)],.           
-0001bc00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bc10: 2020 2072 6574 7572 6e5f 7374 6465 7272     return_stderr
-0001bc20: 3d54 7275 6529 0a20 2020 2020 2073 656c  =True).      sel
-0001bc30: 662e 6173 7365 7274 496e 2827 5265 7375  f.assertIn('Resu
-0001bc40: 6d69 6e67 2075 706c 6f61 6427 2c20 7374  ming upload', st
-0001bc50: 6465 7272 290a 2020 2020 2020 2320 456e  derr).      # En
-0001bc60: 7375 7265 2074 6865 2070 726f 6772 6573  sure the progres
-0001bc70: 7320 6c6f 6767 6572 2069 7320 7374 696c  s logger is stil
-0001bc80: 6c20 7365 6569 6e67 2061 2067 7a69 7020  l seeing a gzip 
-0001bc90: 656e 636f 6469 6e67 2e0a 2020 2020 2020  encoding..      
-0001bca0: 7365 6c66 2e61 7373 6572 7449 6e28 2773  self.assertIn('s
-0001bcb0: 656e 643a 2055 7369 6e67 2067 7a69 7020  end: Using gzip 
-0001bcc0: 7472 616e 7370 6f72 7420 656e 636f 6469  transport encodi
-0001bcd0: 6e67 2066 6f72 2074 6865 2072 6571 7565  ng for the reque
-0001bce0: 7374 2e27 2c0a 2020 2020 2020 2020 2020  st.',.          
-0001bcf0: 2020 2020 2020 2020 2020 7374 6465 7272            stderr
-0001bd00: 290a 2020 2020 2320 456e 7375 7265 2074  ).    # Ensure t
-0001bd10: 6865 2066 696c 6573 2064 6f20 6e6f 7420  he files do not 
-0001bd20: 6861 7665 2061 2073 746f 7265 6420 656e  have a stored en
-0001bd30: 636f 6469 6e67 206f 6620 677a 6970 2061  coding of gzip a
-0001bd40: 6e64 2061 7265 2073 746f 7265 640a 2020  nd are stored.  
-0001bd50: 2020 2320 756e 636f 6d70 7265 7373 6564    # uncompressed
-0001bd60: 2e0a 2020 2020 7465 6d70 5f75 7269 203d  ..    temp_uri =
-0001bd70: 2073 656c 662e 4372 6561 7465 5465 6d70   self.CreateTemp
-0001bd80: 4669 6c65 2829 0a20 2020 2072 656d 6f74  File().    remot
-0001bd90: 655f 7572 6920 3d20 7375 7269 2862 7563  e_uri = suri(buc
-0001bda0: 6b65 745f 7572 692c 2027 7465 7374 2e74  ket_uri, 'test.t
-0001bdb0: 7874 2729 0a20 2020 2073 7464 6f75 7420  xt').    stdout 
-0001bdc0: 3d20 7365 6c66 2e52 756e 4773 5574 696c  = self.RunGsUtil
-0001bdd0: 285b 2773 7461 7427 2c20 7265 6d6f 7465  (['stat', remote
-0001bde0: 5f75 7269 5d2c 2072 6574 7572 6e5f 7374  _uri], return_st
-0001bdf0: 646f 7574 3d54 7275 6529 0a20 2020 2073  dout=True).    s
-0001be00: 656c 662e 6173 7365 7274 4e6f 7452 6567  elf.assertNotReg
-0001be10: 6578 2873 7464 6f75 742c 2072 2743 6f6e  ex(stdout, r'Con
-0001be20: 7465 6e74 2d45 6e63 6f64 696e 673a 5c73  tent-Encoding:\s
-0001be30: 2b67 7a69 7027 290a 2020 2020 7365 6c66  +gzip').    self
-0001be40: 2e52 756e 4773 5574 696c 285b 2763 7027  .RunGsUtil(['cp'
-0001be50: 2c20 7265 6d6f 7465 5f75 7269 2c20 7375  , remote_uri, su
-0001be60: 7269 2874 656d 705f 7572 6929 5d29 0a20  ri(temp_uri)]). 
-0001be70: 2020 2077 6974 6820 6f70 656e 2874 656d     with open(tem
-0001be80: 705f 7572 692c 2027 7262 2729 2061 7320  p_uri, 'rb') as 
-0001be90: 663a 0a20 2020 2020 2073 656c 662e 6173  f:.      self.as
-0001bea0: 7365 7274 4571 7561 6c28 662e 7265 6164  sertEqual(f.read
-0001beb0: 2829 2c20 636f 6e74 656e 7473 290a 0a20  (), contents).. 
-0001bec0: 2040 536b 6970 466f 7253 3328 274e 6f20   @SkipForS3('No 
-0001bed0: 7265 7375 6d61 626c 6520 7570 6c6f 6164  resumable upload
-0001bee0: 2073 7570 706f 7274 2066 6f72 2053 332e   support for S3.
-0001bef0: 2729 0a20 2064 6566 2074 6573 745f 6370  ').  def test_cp
-0001bf00: 5f72 6573 756d 6162 6c65 5f75 706c 6f61  _resumable_uploa
-0001bf10: 645f 7265 7472 7928 7365 6c66 293a 0a20  d_retry(self):. 
-0001bf20: 2020 2022 2222 5465 7374 7320 7468 6174     """Tests that
-0001bf30: 2061 2072 6573 756d 6162 6c65 2075 706c   a resumable upl
-0001bf40: 6f61 6420 636f 6d70 6c65 7465 7320 7769  oad completes wi
-0001bf50: 7468 206f 6e65 2072 6574 7279 2e22 2222  th one retry."""
-0001bf60: 0a20 2020 2062 7563 6b65 745f 7572 6920  .    bucket_uri 
-0001bf70: 3d20 7365 6c66 2e43 7265 6174 6542 7563  = self.CreateBuc
-0001bf80: 6b65 7428 290a 2020 2020 6670 6174 6820  ket().    fpath 
-0001bf90: 3d20 7365 6c66 2e43 7265 6174 6554 656d  = self.CreateTem
-0001bfa0: 7046 696c 6528 636f 6e74 656e 7473 3d62  pFile(contents=b
-0001bfb0: 2761 2720 2a20 7365 6c66 2e68 616c 745f  'a' * self.halt_
-0001bfc0: 7369 7a65 290a 2020 2020 2320 544f 444f  size).    # TODO
-0001bfd0: 3a20 5261 6973 696e 6720 616e 2068 7474  : Raising an htt
-0001bfe0: 706c 6962 206f 7220 736f 636b 6574 2065  plib or socket e
-0001bff0: 7272 6f72 2062 6c6f 636b 7320 6275 636b  rror blocks buck
-0001c000: 6574 2074 6561 7264 6f77 6e0a 2020 2020  et teardown.    
-0001c010: 2320 696e 204a 534f 4e20 666f 7220 3630  # in JSON for 60
-0001c020: 2d31 3230 7320 6f6e 2061 206d 756c 7469  -120s on a multi
-0001c030: 7072 6f63 6573 7369 6e67 206c 6f63 6b20  processing lock 
-0001c040: 6163 7175 6972 652e 2046 6967 7572 6520  acquire. Figure 
-0001c050: 6f75 7420 7768 793b 0a20 2020 2023 2075  out why;.    # u
-0001c060: 6e74 696c 2074 6865 6e2c 2072 6169 7365  ntil then, raise
-0001c070: 2061 6e20 6170 6974 6f6f 6c73 2072 6574   an apitools ret
-0001c080: 7279 6162 6c65 2065 7863 6570 7469 6f6e  ryable exception
-0001c090: 2e0a 2020 2020 6966 2073 656c 662e 7465  ..    if self.te
-0001c0a0: 7374 5f61 7069 203d 3d20 4170 6953 656c  st_api == ApiSel
-0001c0b0: 6563 746f 722e 584d 4c3a 0a20 2020 2020  ector.XML:.     
-0001c0c0: 2074 6573 745f 6361 6c6c 6261 636b 5f66   test_callback_f
-0001c0d0: 696c 6520 3d20 7365 6c66 2e43 7265 6174  ile = self.Creat
-0001c0e0: 6554 656d 7046 696c 6528 636f 6e74 656e  eTempFile(conten
-0001c0f0: 7473 3d70 6963 6b6c 652e 6475 6d70 7328  ts=pickle.dumps(
-0001c100: 0a20 2020 2020 2020 2020 205f 5265 7375  .          _Resu
-0001c110: 6d61 626c 6555 706c 6f61 6452 6574 7279  mableUploadRetry
-0001c120: 4861 6e64 6c65 7228 352c 2068 7474 705f  Handler(5, http_
-0001c130: 636c 6965 6e74 2e42 6164 5374 6174 7573  client.BadStatus
-0001c140: 4c69 6e65 2c20 280a 2020 2020 2020 2020  Line, (.        
-0001c150: 2020 2020 2020 2775 6e75 7365 6427 2c29        'unused',)
-0001c160: 2929 290a 2020 2020 656c 7365 3a0a 2020  ))).    else:.  
-0001c170: 2020 2020 7465 7374 5f63 616c 6c62 6163      test_callbac
-0001c180: 6b5f 6669 6c65 203d 2073 656c 662e 4372  k_file = self.Cr
-0001c190: 6561 7465 5465 6d70 4669 6c65 2863 6f6e  eateTempFile(con
-0001c1a0: 7465 6e74 733d 7069 636b 6c65 2e64 756d  tents=pickle.dum
-0001c1b0: 7073 280a 2020 2020 2020 2020 2020 5f52  ps(.          _R
-0001c1c0: 6573 756d 6162 6c65 5570 6c6f 6164 5265  esumableUploadRe
-0001c1d0: 7472 7948 616e 646c 6572 280a 2020 2020  tryHandler(.    
-0001c1e0: 2020 2020 2020 2020 2020 352c 2061 7069            5, api
-0001c1f0: 746f 6f6c 735f 6578 6365 7074 696f 6e73  tools_exceptions
-0001c200: 2e42 6164 5374 6174 7573 436f 6465 4572  .BadStatusCodeEr
-0001c210: 726f 722c 2028 2775 6e75 7365 6427 2c20  ror, ('unused', 
-0001c220: 2775 6e75 7365 6427 2c0a 2020 2020 2020  'unused',.      
-0001c230: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c240: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c250: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c260: 2020 2020 2775 6e75 7365 6427 2929 2929      'unused'))))
-0001c270: 0a20 2020 2062 6f74 6f5f 636f 6e66 6967  .    boto_config
-0001c280: 5f66 6f72 5f74 6573 7420 3d20 2827 4753  _for_test = ('GS
-0001c290: 5574 696c 272c 2027 7265 7375 6d61 626c  Util', 'resumabl
-0001c2a0: 655f 7468 7265 7368 6f6c 6427 2c20 7374  e_threshold', st
-0001c2b0: 7228 4f4e 455f 4b49 4229 290a 2020 2020  r(ONE_KIB)).    
-0001c2c0: 7769 7468 2053 6574 426f 746f 436f 6e66  with SetBotoConf
-0001c2d0: 6967 466f 7254 6573 7428 5b62 6f74 6f5f  igForTest([boto_
-0001c2e0: 636f 6e66 6967 5f66 6f72 5f74 6573 745d  config_for_test]
-0001c2f0: 293a 0a20 2020 2020 2073 7464 6572 7220  ):.      stderr 
-0001c300: 3d20 7365 6c66 2e52 756e 4773 5574 696c  = self.RunGsUtil
-0001c310: 285b 0a20 2020 2020 2020 2020 2027 2d44  ([.          '-D
-0001c320: 272c 2027 6370 272c 2027 2d2d 7465 7374  ', 'cp', '--test
-0001c330: 6361 6c6c 6261 636b 6669 6c65 272c 2074  callbackfile', t
-0001c340: 6573 745f 6361 6c6c 6261 636b 5f66 696c  est_callback_fil
-0001c350: 652c 2066 7061 7468 2c0a 2020 2020 2020  e, fpath,.      
-0001c360: 2020 2020 7375 7269 2862 7563 6b65 745f      suri(bucket_
-0001c370: 7572 6929 0a20 2020 2020 205d 2c0a 2020  uri).      ],.  
-0001c380: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c390: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-0001c3a0: 726e 5f73 7464 6572 723d 3129 0a20 2020  rn_stderr=1).   
-0001c3b0: 2020 2069 6620 7365 6c66 2e74 6573 745f     if self.test_
-0001c3c0: 6170 6920 3d3d 2041 7069 5365 6c65 6374  api == ApiSelect
-0001c3d0: 6f72 2e58 4d4c 3a0a 2020 2020 2020 2020  or.XML:.        
-0001c3e0: 7365 6c66 2e61 7373 6572 7449 6e28 2747  self.assertIn('G
-0001c3f0: 6f74 2072 6574 7279 6162 6c65 2066 6169  ot retryable fai
-0001c400: 6c75 7265 272c 2073 7464 6572 7229 0a20  lure', stderr). 
-0001c410: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-0001c420: 2020 2073 656c 662e 6173 7365 7274 496e     self.assertIn
-0001c430: 2827 5265 7472 7969 6e67 272c 2073 7464  ('Retrying', std
-0001c440: 6572 7229 0a0a 2020 4053 6b69 7046 6f72  err)..  @SkipFor
-0001c450: 5333 2827 4e6f 2072 6573 756d 6162 6c65  S3('No resumable
-0001c460: 2075 706c 6f61 6420 7375 7070 6f72 7420   upload support 
-0001c470: 666f 7220 5333 2e27 290a 2020 6465 6620  for S3.').  def 
-0001c480: 7465 7374 5f63 705f 7265 7375 6d61 626c  test_cp_resumabl
-0001c490: 655f 7374 7265 616d 696e 675f 7570 6c6f  e_streaming_uplo
-0001c4a0: 6164 5f72 6574 7279 2873 656c 6629 3a0a  ad_retry(self):.
-0001c4b0: 2020 2020 2222 2254 6573 7473 2074 6861      """Tests tha
-0001c4c0: 7420 6120 7374 7265 616d 696e 6720 7265  t a streaming re
-0001c4d0: 7375 6d61 626c 6520 7570 6c6f 6164 2063  sumable upload c
-0001c4e0: 6f6d 706c 6574 6573 2077 6974 6820 6f6e  ompletes with on
-0001c4f0: 6520 7265 7472 792e 2222 220a 2020 2020  e retry.""".    
-0001c500: 6966 2073 656c 662e 7465 7374 5f61 7069  if self.test_api
-0001c510: 203d 3d20 4170 6953 656c 6563 746f 722e   == ApiSelector.
-0001c520: 584d 4c3a 0a20 2020 2020 2072 6574 7572  XML:.      retur
-0001c530: 6e20 756e 6974 7465 7374 2e73 6b69 7028  n unittest.skip(
-0001c540: 2758 4d4c 2064 6f65 7320 6e6f 7420 7375  'XML does not su
-0001c550: 7070 6f72 7420 7265 7375 6d61 626c 6520  pport resumable 
-0001c560: 7374 7265 616d 696e 6720 7570 6c6f 6164  streaming upload
-0001c570: 732e 2729 0a20 2020 2062 7563 6b65 745f  s.').    bucket_
-0001c580: 7572 6920 3d20 7365 6c66 2e43 7265 6174  uri = self.Creat
-0001c590: 6542 7563 6b65 7428 290a 0a20 2020 2074  eBucket()..    t
-0001c5a0: 6573 745f 6361 6c6c 6261 636b 5f66 696c  est_callback_fil
-0001c5b0: 6520 3d20 7365 6c66 2e43 7265 6174 6554  e = self.CreateT
-0001c5c0: 656d 7046 696c 6528 636f 6e74 656e 7473  empFile(contents
-0001c5d0: 3d70 6963 6b6c 652e 6475 6d70 7328 0a20  =pickle.dumps(. 
-0001c5e0: 2020 2020 2020 205f 5265 7375 6d61 626c         _Resumabl
-0001c5f0: 6555 706c 6f61 6452 6574 7279 4861 6e64  eUploadRetryHand
-0001c600: 6c65 7228 352c 2061 7069 746f 6f6c 735f  ler(5, apitools_
-0001c610: 6578 6365 7074 696f 6e73 2e42 6164 5374  exceptions.BadSt
-0001c620: 6174 7573 436f 6465 4572 726f 722c 0a20  atusCodeError,. 
-0001c630: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c640: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c650: 2020 2020 2827 756e 7573 6564 272c 2027      ('unused', '
-0001c660: 756e 7573 6564 272c 2027 756e 7573 6564  unused', 'unused
-0001c670: 2729 2929 290a 2020 2020 2320 4e65 6564  ')))).    # Need
-0001c680: 2074 6f20 7265 6475 6365 2074 6865 204a   to reduce the J
-0001c690: 534f 4e20 6368 756e 6b20 7369 7a65 2073  SON chunk size s
-0001c6a0: 696e 6365 2073 7472 6561 6d69 6e67 2075  ince streaming u
-0001c6b0: 706c 6f61 6473 2062 7566 6665 7220 610a  ploads buffer a.
-0001c6c0: 2020 2020 2320 6675 6c6c 2063 6875 6e6b      # full chunk
-0001c6d0: 2e0a 2020 2020 626f 746f 5f63 6f6e 6669  ..    boto_confi
-0001c6e0: 6773 5f66 6f72 5f74 6573 7420 3d20 5b28  gs_for_test = [(
-0001c6f0: 2747 5355 7469 6c27 2c20 276a 736f 6e5f  'GSUtil', 'json_
-0001c700: 7265 7375 6d61 626c 655f 6368 756e 6b5f  resumable_chunk_
-0001c710: 7369 7a65 272c 0a20 2020 2020 2020 2020  size',.         
-0001c720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c730: 2020 2020 2073 7472 2832 3536 202a 204f       str(256 * O
-0001c740: 4e45 5f4b 4942 2929 2c20 2827 426f 746f  NE_KIB)), ('Boto
-0001c750: 272c 2027 6e75 6d5f 7265 7472 6965 7327  ', 'num_retries'
-0001c760: 2c20 2732 2729 5d0a 2020 2020 7769 7468  , '2')].    with
-0001c770: 2053 6574 426f 746f 436f 6e66 6967 466f   SetBotoConfigFo
-0001c780: 7254 6573 7428 626f 746f 5f63 6f6e 6669  rTest(boto_confi
-0001c790: 6773 5f66 6f72 5f74 6573 7429 3a0a 2020  gs_for_test):.  
-0001c7a0: 2020 2020 7374 6465 7272 203d 2073 656c      stderr = sel
-0001c7b0: 662e 5275 6e47 7355 7469 6c28 5b0a 2020  f.RunGsUtil([.  
-0001c7c0: 2020 2020 2020 2020 272d 4427 2c20 2763          '-D', 'c
-0001c7d0: 7027 2c20 272d 2d74 6573 7463 616c 6c62  p', '--testcallb
-0001c7e0: 6163 6b66 696c 6527 2c20 7465 7374 5f63  ackfile', test_c
-0001c7f0: 616c 6c62 6163 6b5f 6669 6c65 2c20 272d  allback_file, '-
-0001c800: 272c 0a20 2020 2020 2020 2020 2073 7572  ',.          sur
-0001c810: 6928 6275 636b 6574 5f75 7269 2c20 2766  i(bucket_uri, 'f
-0001c820: 6f6f 2729 0a20 2020 2020 205d 2c0a 2020  oo').      ],.  
-0001c830: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c840: 2020 2020 2020 2020 2020 2020 7374 6469              stdi
-0001c850: 6e3d 2761 2720 2a20 3531 3220 2a20 4f4e  n='a' * 512 * ON
-0001c860: 455f 4b49 422c 0a20 2020 2020 2020 2020  E_KIB,.         
-0001c870: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c880: 2020 2020 2072 6574 7572 6e5f 7374 6465       return_stde
-0001c890: 7272 3d31 290a 2020 2020 2020 7365 6c66  rr=1).      self
-0001c8a0: 2e61 7373 6572 7449 6e28 2752 6574 7279  .assertIn('Retry
-0001c8b0: 696e 6727 2c20 7374 6465 7272 290a 0a20  ing', stderr).. 
-0001c8c0: 2040 536b 6970 466f 7253 3328 2770 7265   @SkipForS3('pre
-0001c8d0: 7365 7276 655f 6163 6c20 666c 6167 206e  serve_acl flag n
-0001c8e0: 6f74 2073 7570 706f 7274 6564 2066 6f72  ot supported for
-0001c8f0: 2053 332e 2729 0a20 2064 6566 2074 6573   S3.').  def tes
-0001c900: 745f 6370 5f70 7265 7365 7276 655f 6e6f  t_cp_preserve_no
-0001c910: 5f6f 776e 6572 2873 656c 6629 3a0a 2020  _owner(self):.  
-0001c920: 2020 6275 636b 6574 5f75 7269 203d 2073    bucket_uri = s
-0001c930: 656c 662e 4372 6561 7465 4275 636b 6574  elf.CreateBucket
-0001c940: 2829 0a20 2020 206f 626a 6563 745f 7572  ().    object_ur
-0001c950: 6920 3d20 7365 6c66 2e43 7265 6174 654f  i = self.CreateO
-0001c960: 626a 6563 7428 6275 636b 6574 5f75 7269  bject(bucket_uri
-0001c970: 3d62 7563 6b65 745f 7572 692c 2063 6f6e  =bucket_uri, con
-0001c980: 7465 6e74 733d 6227 666f 6f27 290a 2020  tents=b'foo').  
-0001c990: 2020 2320 416e 6f6e 796d 6f75 7320 7573    # Anonymous us
-0001c9a0: 6572 2063 616e 2072 6561 6420 7468 6520  er can read the 
-0001c9b0: 6f62 6a65 6374 2061 6e64 2077 7269 7465  object and write
-0001c9c0: 2074 6f20 7468 6520 6275 636b 6574 2c20   to the bucket, 
-0001c9d0: 6275 7420 646f 6573 0a20 2020 2023 206e  but does.    # n
-0001c9e0: 6f74 206f 776e 2074 6865 206f 626a 6563  ot own the objec
-0001c9f0: 742e 0a20 2020 2073 656c 662e 5275 6e47  t..    self.RunG
-0001ca00: 7355 7469 6c28 5b27 6163 6c27 2c20 2763  sUtil(['acl', 'c
-0001ca10: 6827 2c20 272d 7527 2c20 2741 6c6c 5573  h', '-u', 'AllUs
-0001ca20: 6572 733a 5227 2c20 7375 7269 286f 626a  ers:R', suri(obj
-0001ca30: 6563 745f 7572 6929 5d29 0a20 2020 2073  ect_uri)]).    s
-0001ca40: 656c 662e 5275 6e47 7355 7469 6c28 5b27  elf.RunGsUtil(['
-0001ca50: 6163 6c27 2c20 2763 6827 2c20 272d 7527  acl', 'ch', '-u'
-0001ca60: 2c20 2741 6c6c 5573 6572 733a 5727 2c20  , 'AllUsers:W', 
-0001ca70: 7375 7269 2862 7563 6b65 745f 7572 6929  suri(bucket_uri)
-0001ca80: 5d29 0a20 2020 2077 6974 6820 7365 6c66  ]).    with self
-0001ca90: 2e53 6574 416e 6f6e 796d 6f75 7342 6f74  .SetAnonymousBot
-0001caa0: 6f43 7265 6473 2829 3a0a 2020 2020 2020  oCreds():.      
-0001cab0: 7374 6465 7272 203d 2073 656c 662e 5275  stderr = self.Ru
-0001cac0: 6e47 7355 7469 6c28 0a20 2020 2020 2020  nGsUtil(.       
-0001cad0: 2020 205b 2763 7027 2c20 272d 7027 2c20     ['cp', '-p', 
-0001cae0: 7375 7269 286f 626a 6563 745f 7572 6929  suri(object_uri)
-0001caf0: 2c0a 2020 2020 2020 2020 2020 2073 7572  ,.           sur
-0001cb00: 6928 6275 636b 6574 5f75 7269 2c20 2766  i(bucket_uri, 'f
-0001cb10: 6f6f 2729 5d2c 0a20 2020 2020 2020 2020  oo')],.         
-0001cb20: 2072 6574 7572 6e5f 7374 6465 7272 3d54   return_stderr=T
-0001cb30: 7275 652c 0a20 2020 2020 2020 2020 2065  rue,.          e
-0001cb40: 7870 6563 7465 645f 7374 6174 7573 3d31  xpected_status=1
-0001cb50: 290a 2020 2020 2020 7365 6c66 2e61 7373  ).      self.ass
-0001cb60: 6572 7449 6e28 274f 574e 4552 2070 6572  ertIn('OWNER per
-0001cb70: 6d69 7373 696f 6e20 6973 2072 6571 7569  mission is requi
-0001cb80: 7265 6420 666f 7220 7072 6573 6572 7669  red for preservi
-0001cb90: 6e67 2041 434c 7327 2c20 7374 6465 7272  ng ACLs', stderr
-0001cba0: 290a 0a20 2040 536b 6970 466f 7253 3328  )..  @SkipForS3(
-0001cbb0: 274e 6f20 7265 7375 6d61 626c 6520 7570  'No resumable up
-0001cbc0: 6c6f 6164 2073 7570 706f 7274 2066 6f72  load support for
-0001cbd0: 2053 332e 2729 0a20 2064 6566 2074 6573   S3.').  def tes
-0001cbe0: 745f 6370 5f70 726f 6772 6573 735f 6361  t_cp_progress_ca
-0001cbf0: 6c6c 6261 636b 7328 7365 6c66 293a 0a20  llbacks(self):. 
-0001cc00: 2020 2062 7563 6b65 745f 7572 6920 3d20     bucket_uri = 
-0001cc10: 7365 6c66 2e43 7265 6174 6542 7563 6b65  self.CreateBucke
-0001cc20: 7428 290a 2020 2020 6669 6e61 6c5f 7369  t().    final_si
-0001cc30: 7a65 5f73 7472 696e 6720 3d20 4279 7465  ze_string = Byte
-0001cc40: 7354 6f46 6978 6564 5769 6474 6853 7472  sToFixedWidthStr
-0001cc50: 696e 6728 3130 3234 2a2a 3229 0a20 2020  ing(1024**2).   
-0001cc60: 2066 696e 616c 5f70 726f 6772 6573 735f   final_progress_
-0001cc70: 6361 6c6c 6261 636b 203d 2066 696e 616c  callback = final
-0001cc80: 5f73 697a 655f 7374 7269 6e67 202b 2027  _size_string + '
-0001cc90: 2f27 202b 2066 696e 616c 5f73 697a 655f  /' + final_size_
-0001cca0: 7374 7269 6e67 0a20 2020 2066 7061 7468  string.    fpath
-0001ccb0: 203d 2073 656c 662e 4372 6561 7465 5465   = self.CreateTe
-0001ccc0: 6d70 4669 6c65 2863 6f6e 7465 6e74 733d  mpFile(contents=
-0001ccd0: 6227 6127 202a 204f 4e45 5f4d 4942 2c20  b'a' * ONE_MIB, 
-0001cce0: 6669 6c65 5f6e 616d 653d 2766 6f6f 2729  file_name='foo')
-0001ccf0: 0a20 2020 2062 6f74 6f5f 636f 6e66 6967  .    boto_config
-0001cd00: 5f66 6f72 5f74 6573 7420 3d20 2827 4753  _for_test = ('GS
-0001cd10: 5574 696c 272c 2027 7265 7375 6d61 626c  Util', 'resumabl
-0001cd20: 655f 7468 7265 7368 6f6c 6427 2c20 7374  e_threshold', st
-0001cd30: 7228 4f4e 455f 4b49 4229 290a 2020 2020  r(ONE_KIB)).    
-0001cd40: 7769 7468 2053 6574 426f 746f 436f 6e66  with SetBotoConf
-0001cd50: 6967 466f 7254 6573 7428 5b62 6f74 6f5f  igForTest([boto_
-0001cd60: 636f 6e66 6967 5f66 6f72 5f74 6573 745d  config_for_test]
-0001cd70: 293a 0a20 2020 2020 2073 7464 6572 7220  ):.      stderr 
-0001cd80: 3d20 7365 6c66 2e52 756e 4773 5574 696c  = self.RunGsUtil
-0001cd90: 285b 2763 7027 2c20 6670 6174 682c 2073  (['cp', fpath, s
-0001cda0: 7572 6928 6275 636b 6574 5f75 7269 295d  uri(bucket_uri)]
-0001cdb0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-0001cdc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cdd0: 7265 7475 726e 5f73 7464 6572 723d 5472  return_stderr=Tr
-0001cde0: 7565 290a 2020 2020 2020 7365 6c66 2e61  ue).      self.a
-0001cdf0: 7373 6572 7445 7175 616c 7328 312c 2073  ssertEquals(1, s
-0001ce00: 7464 6572 722e 636f 756e 7428 6669 6e61  tderr.count(fina
-0001ce10: 6c5f 7072 6f67 7265 7373 5f63 616c 6c62  l_progress_callb
-0001ce20: 6163 6b29 290a 2020 2020 626f 746f 5f63  ack)).    boto_c
-0001ce30: 6f6e 6669 675f 666f 725f 7465 7374 203d  onfig_for_test =
-0001ce40: 2028 2747 5355 7469 6c27 2c20 2772 6573   ('GSUtil', 'res
-0001ce50: 756d 6162 6c65 5f74 6872 6573 686f 6c64  umable_threshold
-0001ce60: 272c 2073 7472 2832 202a 204f 4e45 5f4d  ', str(2 * ONE_M
-0001ce70: 4942 2929 0a20 2020 2077 6974 6820 5365  IB)).    with Se
-0001ce80: 7442 6f74 6f43 6f6e 6669 6746 6f72 5465  tBotoConfigForTe
-0001ce90: 7374 285b 626f 746f 5f63 6f6e 6669 675f  st([boto_config_
-0001cea0: 666f 725f 7465 7374 5d29 3a0a 2020 2020  for_test]):.    
-0001ceb0: 2020 7374 6465 7272 203d 2073 656c 662e    stderr = self.
-0001cec0: 5275 6e47 7355 7469 6c28 5b27 6370 272c  RunGsUtil(['cp',
-0001ced0: 2066 7061 7468 2c20 7375 7269 2862 7563   fpath, suri(buc
-0001cee0: 6b65 745f 7572 6929 5d2c 0a20 2020 2020  ket_uri)],.     
-0001cef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cf00: 2020 2020 2020 2020 2072 6574 7572 6e5f           return_
-0001cf10: 7374 6465 7272 3d54 7275 6529 0a20 2020  stderr=True).   
-0001cf20: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-0001cf30: 7561 6c73 2831 2c20 7374 6465 7272 2e63  uals(1, stderr.c
-0001cf40: 6f75 6e74 2866 696e 616c 5f70 726f 6772  ount(final_progr
-0001cf50: 6573 735f 6361 6c6c 6261 636b 2929 0a20  ess_callback)). 
-0001cf60: 2020 2073 7464 6572 7220 3d20 7365 6c66     stderr = self
-0001cf70: 2e52 756e 4773 5574 696c 285b 2763 7027  .RunGsUtil(['cp'
-0001cf80: 2c20 7375 7269 2862 7563 6b65 745f 7572  , suri(bucket_ur
-0001cf90: 692c 2027 666f 6f27 292c 2066 7061 7468  i, 'foo'), fpath
-0001cfa0: 5d2c 0a20 2020 2020 2020 2020 2020 2020  ],.             
-0001cfb0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0001cfc0: 6574 7572 6e5f 7374 6465 7272 3d54 7275  eturn_stderr=Tru
-0001cfd0: 6529 0a20 2020 2073 656c 662e 6173 7365  e).    self.asse
-0001cfe0: 7274 4571 7561 6c73 2831 2c20 7374 6465  rtEquals(1, stde
-0001cff0: 7272 2e63 6f75 6e74 2866 696e 616c 5f70  rr.count(final_p
-0001d000: 726f 6772 6573 735f 6361 6c6c 6261 636b  rogress_callback
-0001d010: 2929 0a0a 2020 4053 6b69 7046 6f72 5333  ))..  @SkipForS3
-0001d020: 2827 4e6f 2072 6573 756d 6162 6c65 2075  ('No resumable u
-0001d030: 706c 6f61 6420 7375 7070 6f72 7420 666f  pload support fo
-0001d040: 7220 5333 2e27 290a 2020 6465 6620 7465  r S3.').  def te
-0001d050: 7374 5f63 705f 7265 7375 6d61 626c 655f  st_cp_resumable_
-0001d060: 7570 6c6f 6164 2873 656c 6629 3a0a 2020  upload(self):.  
-0001d070: 2020 2222 2254 6573 7473 2074 6861 7420    """Tests that 
-0001d080: 6120 6261 7369 6320 7265 7375 6d61 626c  a basic resumabl
-0001d090: 6520 7570 6c6f 6164 2063 6f6d 706c 6574  e upload complet
-0001d0a0: 6573 2073 7563 6365 7373 6675 6c6c 792e  es successfully.
-0001d0b0: 2222 220a 2020 2020 6275 636b 6574 5f75  """.    bucket_u
-0001d0c0: 7269 203d 2073 656c 662e 4372 6561 7465  ri = self.Create
-0001d0d0: 4275 636b 6574 2829 0a20 2020 2066 7061  Bucket().    fpa
-0001d0e0: 7468 203d 2073 656c 662e 4372 6561 7465  th = self.Create
-0001d0f0: 5465 6d70 4669 6c65 2863 6f6e 7465 6e74  TempFile(content
-0001d100: 733d 6227 6127 202a 2073 656c 662e 6861  s=b'a' * self.ha
-0001d110: 6c74 5f73 697a 6529 0a20 2020 2062 6f74  lt_size).    bot
-0001d120: 6f5f 636f 6e66 6967 5f66 6f72 5f74 6573  o_config_for_tes
-0001d130: 7420 3d20 2827 4753 5574 696c 272c 2027  t = ('GSUtil', '
-0001d140: 7265 7375 6d61 626c 655f 7468 7265 7368  resumable_thresh
-0001d150: 6f6c 6427 2c20 7374 7228 4f4e 455f 4b49  old', str(ONE_KI
-0001d160: 4229 290a 2020 2020 7769 7468 2053 6574  B)).    with Set
-0001d170: 426f 746f 436f 6e66 6967 466f 7254 6573  BotoConfigForTes
-0001d180: 7428 5b62 6f74 6f5f 636f 6e66 6967 5f66  t([boto_config_f
-0001d190: 6f72 5f74 6573 745d 293a 0a20 2020 2020  or_test]):.     
-0001d1a0: 2073 656c 662e 5275 6e47 7355 7469 6c28   self.RunGsUtil(
-0001d1b0: 5b27 6370 272c 2066 7061 7468 2c20 7375  ['cp', fpath, su
-0001d1c0: 7269 2862 7563 6b65 745f 7572 6929 5d29  ri(bucket_uri)])
-0001d1d0: 0a0a 2020 4053 6b69 7046 6f72 5333 2827  ..  @SkipForS3('
-0001d1e0: 4e6f 2072 6573 756d 6162 6c65 2075 706c  No resumable upl
-0001d1f0: 6f61 6420 7375 7070 6f72 7420 666f 7220  oad support for 
-0001d200: 5333 2e27 290a 2020 6465 6620 7465 7374  S3.').  def test
-0001d210: 5f72 6573 756d 6162 6c65 5f75 706c 6f61  _resumable_uploa
-0001d220: 645f 6272 6561 6b5f 6c65 6176 6573 5f74  d_break_leaves_t
-0001d230: 7261 636b 6572 2873 656c 6629 3a0a 2020  racker(self):.  
-0001d240: 2020 2222 2254 6573 7473 2074 6861 7420    """Tests that 
-0001d250: 6120 7472 6163 6b65 7220 6669 6c65 2069  a tracker file i
-0001d260: 7320 6372 6561 7465 6420 7769 7468 2061  s created with a
-0001d270: 2072 6573 756d 6162 6c65 2075 706c 6f61   resumable uploa
-0001d280: 642e 2222 220a 2020 2020 6275 636b 6574  d.""".    bucket
-0001d290: 5f75 7269 203d 2073 656c 662e 4372 6561  _uri = self.Crea
-0001d2a0: 7465 4275 636b 6574 2829 0a20 2020 2066  teBucket().    f
-0001d2b0: 7061 7468 203d 2073 656c 662e 4372 6561  path = self.Crea
-0001d2c0: 7465 5465 6d70 4669 6c65 2866 696c 655f  teTempFile(file_
-0001d2d0: 6e61 6d65 3d27 666f 6f27 2c20 636f 6e74  name='foo', cont
-0001d2e0: 656e 7473 3d62 2761 2720 2a20 7365 6c66  ents=b'a' * self
-0001d2f0: 2e68 616c 745f 7369 7a65 290a 2020 2020  .halt_size).    
-0001d300: 626f 746f 5f63 6f6e 6669 675f 666f 725f  boto_config_for_
-0001d310: 7465 7374 203d 2028 2747 5355 7469 6c27  test = ('GSUtil'
-0001d320: 2c20 2772 6573 756d 6162 6c65 5f74 6872  , 'resumable_thr
-0001d330: 6573 686f 6c64 272c 2073 7472 284f 4e45  eshold', str(ONE
-0001d340: 5f4b 4942 2929 0a20 2020 2077 6974 6820  _KIB)).    with 
-0001d350: 5365 7442 6f74 6f43 6f6e 6669 6746 6f72  SetBotoConfigFor
-0001d360: 5465 7374 285b 626f 746f 5f63 6f6e 6669  Test([boto_confi
-0001d370: 675f 666f 725f 7465 7374 5d29 3a0a 2020  g_for_test]):.  
-0001d380: 2020 2020 7472 6163 6b65 725f 6669 6c65      tracker_file
-0001d390: 6e61 6d65 203d 2047 6574 5472 6163 6b65  name = GetTracke
-0001d3a0: 7246 696c 6550 6174 6828 0a20 2020 2020  rFilePath(.     
-0001d3b0: 2020 2020 2053 746f 7261 6765 5572 6c46       StorageUrlF
-0001d3c0: 726f 6d53 7472 696e 6728 7375 7269 2862  romString(suri(b
-0001d3d0: 7563 6b65 745f 7572 692c 2027 666f 6f27  ucket_uri, 'foo'
-0001d3e0: 2929 2c20 5472 6163 6b65 7246 696c 6554  )), TrackerFileT
-0001d3f0: 7970 652e 5550 4c4f 4144 2c0a 2020 2020  ype.UPLOAD,.    
-0001d400: 2020 2020 2020 7365 6c66 2e74 6573 745f        self.test_
-0001d410: 6170 6929 0a20 2020 2020 2074 6573 745f  api).      test_
-0001d420: 6361 6c6c 6261 636b 5f66 696c 6520 3d20  callback_file = 
-0001d430: 7365 6c66 2e43 7265 6174 6554 656d 7046  self.CreateTempF
-0001d440: 696c 6528 0a20 2020 2020 2020 2020 2063  ile(.          c
-0001d450: 6f6e 7465 6e74 733d 7069 636b 6c65 2e64  ontents=pickle.d
-0001d460: 756d 7073 2848 616c 7469 6e67 436f 7079  umps(HaltingCopy
-0001d470: 4361 6c6c 6261 636b 4861 6e64 6c65 7228  CallbackHandler(
-0001d480: 5472 7565 2c20 3529 2929 0a20 2020 2020  True, 5))).     
-0001d490: 2074 7279 3a0a 2020 2020 2020 2020 7374   try:.        st
-0001d4a0: 6465 7272 203d 2073 656c 662e 5275 6e47  derr = self.RunG
-0001d4b0: 7355 7469 6c28 5b0a 2020 2020 2020 2020  sUtil([.        
-0001d4c0: 2020 2020 2763 7027 2c20 272d 2d74 6573      'cp', '--tes
-0001d4d0: 7463 616c 6c62 6163 6b66 696c 6527 2c20  tcallbackfile', 
-0001d4e0: 7465 7374 5f63 616c 6c62 6163 6b5f 6669  test_callback_fi
-0001d4f0: 6c65 2c20 6670 6174 682c 0a20 2020 2020  le, fpath,.     
-0001d500: 2020 2020 2020 2073 7572 6928 6275 636b         suri(buck
-0001d510: 6574 5f75 7269 2c20 2766 6f6f 2729 0a20  et_uri, 'foo'). 
-0001d520: 2020 2020 2020 205d 2c0a 2020 2020 2020         ],.      
-0001d530: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d540: 2020 2020 2020 2020 2020 6578 7065 6374            expect
-0001d550: 6564 5f73 7461 7475 733d 312c 0a20 2020  ed_status=1,.   
-0001d560: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d570: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-0001d580: 7572 6e5f 7374 6465 7272 3d54 7275 6529  urn_stderr=True)
-0001d590: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-0001d5a0: 7365 7274 496e 2827 4172 7469 6669 6361  sertIn('Artifica
-0001d5b0: 6c6c 7920 6861 6c74 696e 6720 7570 6c6f  lly halting uplo
-0001d5c0: 6164 272c 2073 7464 6572 7229 0a20 2020  ad', stderr).   
-0001d5d0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-0001d5e0: 5472 7565 286f 732e 7061 7468 2e65 7869  True(os.path.exi
-0001d5f0: 7374 7328 7472 6163 6b65 725f 6669 6c65  sts(tracker_file
-0001d600: 6e61 6d65 292c 0a20 2020 2020 2020 2020  name),.         
-0001d610: 2020 2020 2020 2020 2020 2020 2020 2027                 '
-0001d620: 5472 6163 6b65 7220 6669 6c65 2025 7320  Tracker file %s 
-0001d630: 6e6f 7420 7072 6573 656e 742e 2720 2520  not present.' % 
-0001d640: 7472 6163 6b65 725f 6669 6c65 6e61 6d65  tracker_filename
-0001d650: 290a 2020 2020 2020 2020 2320 5465 7374  ).        # Test
-0001d660: 2074 6865 2070 6572 6d69 7373 696f 6e73   the permissions
-0001d670: 0a20 2020 2020 2020 2069 6620 6f73 2e6e  .        if os.n
-0001d680: 616d 6520 3d3d 2027 706f 7369 7827 3a0a  ame == 'posix':.
-0001d690: 2020 2020 2020 2020 2020 6d6f 6465 203d            mode =
-0001d6a0: 206f 6374 2873 7461 742e 535f 494d 4f44   oct(stat.S_IMOD
-0001d6b0: 4528 6f73 2e73 7461 7428 7472 6163 6b65  E(os.stat(tracke
-0001d6c0: 725f 6669 6c65 6e61 6d65 292e 7374 5f6d  r_filename).st_m
-0001d6d0: 6f64 6529 290a 2020 2020 2020 2020 2020  ode)).          
-0001d6e0: 2320 4173 7365 7274 2074 6861 7420 6f6e  # Assert that on
-0001d6f0: 6c79 2075 7365 7220 6861 7320 7265 6164  ly user has read
-0001d700: 2f77 7269 7465 2070 6572 6d69 7373 696f  /write permissio
-0001d710: 6e0a 2020 2020 2020 2020 2020 7365 6c66  n.          self
-0001d720: 2e61 7373 6572 7445 7175 616c 286f 6374  .assertEqual(oct
-0001d730: 2830 6f36 3030 292c 206d 6f64 6529 0a20  (0o600), mode). 
-0001d740: 2020 2020 2066 696e 616c 6c79 3a0a 2020       finally:.  
-0001d750: 2020 2020 2020 4465 6c65 7465 5472 6163        DeleteTrac
-0001d760: 6b65 7246 696c 6528 7472 6163 6b65 725f  kerFile(tracker_
-0001d770: 6669 6c65 6e61 6d65 290a 0a20 2040 536b  filename)..  @Sk
-0001d780: 6970 466f 7253 3328 274e 6f20 7265 7375  ipForS3('No resu
-0001d790: 6d61 626c 6520 7570 6c6f 6164 2073 7570  mable upload sup
-0001d7a0: 706f 7274 2066 6f72 2053 332e 2729 0a20  port for S3.'). 
-0001d7b0: 2064 6566 2074 6573 745f 6370 5f72 6573   def test_cp_res
-0001d7c0: 756d 6162 6c65 5f75 706c 6f61 645f 6272  umable_upload_br
-0001d7d0: 6561 6b5f 6669 6c65 5f73 697a 655f 6368  eak_file_size_ch
-0001d7e0: 616e 6765 2873 656c 6629 3a0a 2020 2020  ange(self):.    
-0001d7f0: 2222 2254 6573 7473 2061 2072 6573 756d  """Tests a resum
-0001d800: 6162 6c65 2075 706c 6f61 6420 7768 6572  able upload wher
-0001d810: 6520 7468 6520 7570 6c6f 6164 6564 2066  e the uploaded f
-0001d820: 696c 6520 6368 616e 6765 7320 7369 7a65  ile changes size
-0001d830: 2e0a 0a20 2020 2054 6869 7320 7368 6f75  ...    This shou
-0001d840: 6c64 2066 6169 6c20 7768 656e 2077 6520  ld fail when we 
-0001d850: 7265 6164 2074 6865 2074 7261 636b 6572  read the tracker
-0001d860: 2064 6174 612e 0a20 2020 2022 2222 0a20   data..    """. 
-0001d870: 2020 2062 7563 6b65 745f 7572 6920 3d20     bucket_uri = 
-0001d880: 7365 6c66 2e43 7265 6174 6542 7563 6b65  self.CreateBucke
-0001d890: 7428 290a 2020 2020 746d 705f 6469 7220  t().    tmp_dir 
-0001d8a0: 3d20 7365 6c66 2e43 7265 6174 6554 656d  = self.CreateTem
-0001d8b0: 7044 6972 2829 0a20 2020 2066 7061 7468  pDir().    fpath
-0001d8c0: 203d 2073 656c 662e 4372 6561 7465 5465   = self.CreateTe
-0001d8d0: 6d70 4669 6c65 2866 696c 655f 6e61 6d65  mpFile(file_name
-0001d8e0: 3d27 666f 6f27 2c0a 2020 2020 2020 2020  ='foo',.        
-0001d8f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d900: 2020 2020 2020 2020 746d 7064 6972 3d74          tmpdir=t
-0001d910: 6d70 5f64 6972 2c0a 2020 2020 2020 2020  mp_dir,.        
-0001d920: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d930: 2020 2020 2020 2020 636f 6e74 656e 7473          contents
-0001d940: 3d62 2761 2720 2a20 7365 6c66 2e68 616c  =b'a' * self.hal
-0001d950: 745f 7369 7a65 290a 2020 2020 7465 7374  t_size).    test
-0001d960: 5f63 616c 6c62 6163 6b5f 6669 6c65 203d  _callback_file =
-0001d970: 2073 656c 662e 4372 6561 7465 5465 6d70   self.CreateTemp
-0001d980: 4669 6c65 280a 2020 2020 2020 2020 636f  File(.        co
-0001d990: 6e74 656e 7473 3d70 6963 6b6c 652e 6475  ntents=pickle.du
-0001d9a0: 6d70 7328 4861 6c74 696e 6743 6f70 7943  mps(HaltingCopyC
-0001d9b0: 616c 6c62 6163 6b48 616e 646c 6572 2854  allbackHandler(T
-0001d9c0: 7275 652c 2035 2929 290a 0a20 2020 2062  rue, 5)))..    b
-0001d9d0: 6f74 6f5f 636f 6e66 6967 5f66 6f72 5f74  oto_config_for_t
-0001d9e0: 6573 7420 3d20 2827 4753 5574 696c 272c  est = ('GSUtil',
-0001d9f0: 2027 7265 7375 6d61 626c 655f 7468 7265   'resumable_thre
-0001da00: 7368 6f6c 6427 2c20 7374 7228 4f4e 455f  shold', str(ONE_
-0001da10: 4b49 4229 290a 2020 2020 7769 7468 2053  KIB)).    with S
-0001da20: 6574 426f 746f 436f 6e66 6967 466f 7254  etBotoConfigForT
-0001da30: 6573 7428 5b62 6f74 6f5f 636f 6e66 6967  est([boto_config
-0001da40: 5f66 6f72 5f74 6573 745d 293a 0a20 2020  _for_test]):.   
-0001da50: 2020 2073 7464 6572 7220 3d20 7365 6c66     stderr = self
-0001da60: 2e52 756e 4773 5574 696c 285b 0a20 2020  .RunGsUtil([.   
-0001da70: 2020 2020 2020 2027 6370 272c 2027 2d2d         'cp', '--
-0001da80: 7465 7374 6361 6c6c 6261 636b 6669 6c65  testcallbackfile
-0001da90: 272c 2074 6573 745f 6361 6c6c 6261 636b  ', test_callback
-0001daa0: 5f66 696c 652c 2066 7061 7468 2c0a 2020  _file, fpath,.  
-0001dab0: 2020 2020 2020 2020 7375 7269 2862 7563          suri(buc
-0001dac0: 6b65 745f 7572 6929 0a20 2020 2020 205d  ket_uri).      ]
-0001dad0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-0001dae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001daf0: 6578 7065 6374 6564 5f73 7461 7475 733d  expected_status=
-0001db00: 312c 0a20 2020 2020 2020 2020 2020 2020  1,.             
-0001db10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001db20: 2072 6574 7572 6e5f 7374 6465 7272 3d54   return_stderr=T
-0001db30: 7275 6529 0a20 2020 2020 2073 656c 662e  rue).      self.
-0001db40: 6173 7365 7274 496e 2827 4172 7469 6669  assertIn('Artifi
-0001db50: 6361 6c6c 7920 6861 6c74 696e 6720 7570  cally halting up
-0001db60: 6c6f 6164 272c 2073 7464 6572 7229 0a20  load', stderr). 
-0001db70: 2020 2020 2066 7061 7468 203d 2073 656c       fpath = sel
-0001db80: 662e 4372 6561 7465 5465 6d70 4669 6c65  f.CreateTempFile
-0001db90: 2866 696c 655f 6e61 6d65 3d27 666f 6f27  (file_name='foo'
-0001dba0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-0001dbb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001dbc0: 2020 2020 746d 7064 6972 3d74 6d70 5f64      tmpdir=tmp_d
-0001dbd0: 6972 2c0a 2020 2020 2020 2020 2020 2020  ir,.            
-0001dbe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001dbf0: 2020 2020 2020 636f 6e74 656e 7473 3d62        contents=b
-0001dc00: 2761 2720 2a20 7365 6c66 2e68 616c 745f  'a' * self.halt_
-0001dc10: 7369 7a65 202a 2032 290a 2020 2020 2020  size * 2).      
-0001dc20: 7374 6465 7272 203d 2073 656c 662e 5275  stderr = self.Ru
-0001dc30: 6e47 7355 7469 6c28 5b27 6370 272c 2066  nGsUtil(['cp', f
-0001dc40: 7061 7468 2c20 7375 7269 2862 7563 6b65  path, suri(bucke
-0001dc50: 745f 7572 6929 5d2c 0a20 2020 2020 2020  t_uri)],.       
-0001dc60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001dc70: 2020 2020 2020 2065 7870 6563 7465 645f         expected_
-0001dc80: 7374 6174 7573 3d31 2c0a 2020 2020 2020  status=1,.      
-0001dc90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001dca0: 2020 2020 2020 2020 7265 7475 726e 5f73          return_s
-0001dcb0: 7464 6572 723d 5472 7565 290a 2020 2020  tderr=True).    
-0001dcc0: 2020 7365 6c66 2e61 7373 6572 7449 6e28    self.assertIn(
-0001dcd0: 2752 6573 756d 6162 6c65 5570 6c6f 6164  'ResumableUpload
-0001dce0: 4162 6f72 7445 7863 6570 7469 6f6e 272c  AbortException',
-0001dcf0: 2073 7464 6572 7229 0a0a 2020 4053 6b69   stderr)..  @Ski
-0001dd00: 7046 6f72 5333 2827 4e6f 2072 6573 756d  pForS3('No resum
-0001dd10: 6162 6c65 2075 706c 6f61 6420 7375 7070  able upload supp
-0001dd20: 6f72 7420 666f 7220 5333 2e27 290a 2020  ort for S3.').  
-0001dd30: 6465 6620 7465 7374 5f63 705f 7265 7375  def test_cp_resu
-0001dd40: 6d61 626c 655f 7570 6c6f 6164 5f62 7265  mable_upload_bre
-0001dd50: 616b 5f66 696c 655f 636f 6e74 656e 745f  ak_file_content_
-0001dd60: 6368 616e 6765 2873 656c 6629 3a0a 2020  change(self):.  
-0001dd70: 2020 2222 2254 6573 7473 2061 2072 6573    """Tests a res
-0001dd80: 756d 6162 6c65 2075 706c 6f61 6420 7768  umable upload wh
-0001dd90: 6572 6520 7468 6520 7570 6c6f 6164 6564  ere the uploaded
-0001dda0: 2066 696c 6520 6368 616e 6765 7320 636f   file changes co
-0001ddb0: 6e74 656e 742e 2222 220a 2020 2020 6966  ntent.""".    if
-0001ddc0: 2073 656c 662e 7465 7374 5f61 7069 203d   self.test_api =
-0001ddd0: 3d20 4170 6953 656c 6563 746f 722e 584d  = ApiSelector.XM
-0001dde0: 4c3a 0a20 2020 2020 2072 6574 7572 6e20  L:.      return 
-0001ddf0: 756e 6974 7465 7374 2e73 6b69 7028 0a20  unittest.skip(. 
-0001de00: 2020 2020 2020 2020 2027 584d 4c20 646f           'XML do
-0001de10: 6573 6e5c 2774 206d 616b 6520 7365 7061  esn\'t make sepa
-0001de20: 7261 7465 2048 5454 5020 6361 6c6c 7320  rate HTTP calls 
-0001de30: 6174 2066 6978 6564 2d73 697a 6520 626f  at fixed-size bo
-0001de40: 756e 6461 7269 6573 2066 6f72 2027 0a20  undaries for '. 
-0001de50: 2020 2020 2020 2020 2027 7265 7375 6d61           'resuma
-0001de60: 626c 6520 7570 6c6f 6164 732c 2073 6f20  ble uploads, so 
-0001de70: 7765 2063 616e 5c27 7420 6775 6172 616e  we can\'t guaran
-0001de80: 7465 6520 7468 6174 2074 6865 2073 6572  tee that the ser
-0001de90: 7665 7220 7361 7665 7320 6120 270a 2020  ver saves a '.  
-0001dea0: 2020 2020 2020 2020 2773 7065 6369 6669          'specifi
-0001deb0: 6320 7061 7274 206f 6620 7468 6520 7570  c part of the up
-0001dec0: 6c6f 6164 2e27 290a 2020 2020 6275 636b  load.').    buck
-0001ded0: 6574 5f75 7269 203d 2073 656c 662e 4372  et_uri = self.Cr
-0001dee0: 6561 7465 4275 636b 6574 2829 0a20 2020  eateBucket().   
-0001def0: 2074 6d70 5f64 6972 203d 2073 656c 662e   tmp_dir = self.
-0001df00: 4372 6561 7465 5465 6d70 4469 7228 290a  CreateTempDir().
-0001df10: 2020 2020 6670 6174 6820 3d20 7365 6c66      fpath = self
-0001df20: 2e43 7265 6174 6554 656d 7046 696c 6528  .CreateTempFile(
-0001df30: 6669 6c65 5f6e 616d 653d 2766 6f6f 272c  file_name='foo',
-0001df40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001df50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001df60: 2074 6d70 6469 723d 746d 705f 6469 722c   tmpdir=tmp_dir,
-0001df70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001df80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001df90: 2063 6f6e 7465 6e74 733d 6227 6127 202a   contents=b'a' *
-0001dfa0: 204f 4e45 5f4b 4942 202a 204f 4e45 5f4b   ONE_KIB * ONE_K
-0001dfb0: 4942 290a 2020 2020 7465 7374 5f63 616c  IB).    test_cal
-0001dfc0: 6c62 6163 6b5f 6669 6c65 203d 2073 656c  lback_file = sel
-0001dfd0: 662e 4372 6561 7465 5465 6d70 4669 6c65  f.CreateTempFile
-0001dfe0: 2863 6f6e 7465 6e74 733d 7069 636b 6c65  (contents=pickle
-0001dff0: 2e64 756d 7073 280a 2020 2020 2020 2020  .dumps(.        
-0001e000: 4861 6c74 696e 6743 6f70 7943 616c 6c62  HaltingCopyCallb
-0001e010: 6163 6b48 616e 646c 6572 2854 7275 652c  ackHandler(True,
-0001e020: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001e030: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e040: 2020 2020 696e 7428 4f4e 455f 4b49 4229      int(ONE_KIB)
-0001e050: 202a 2035 3132 2929 290a 2020 2020 7265   * 512))).    re
-0001e060: 7375 6d61 626c 655f 7468 7265 7368 6f6c  sumable_threshol
-0001e070: 645f 666f 725f 7465 7374 203d 2028 2747  d_for_test = ('G
-0001e080: 5355 7469 6c27 2c20 2772 6573 756d 6162  SUtil', 'resumab
-0001e090: 6c65 5f74 6872 6573 686f 6c64 272c 0a20  le_threshold',. 
-0001e0a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e0b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e0c0: 2020 2073 7472 284f 4e45 5f4b 4942 2929     str(ONE_KIB))
-0001e0d0: 0a20 2020 2072 6573 756d 6162 6c65 5f63  .    resumable_c
-0001e0e0: 6875 6e6b 5f73 697a 655f 666f 725f 7465  hunk_size_for_te
-0001e0f0: 7374 203d 2028 2747 5355 7469 6c27 2c20  st = ('GSUtil', 
-0001e100: 276a 736f 6e5f 7265 7375 6d61 626c 655f  'json_resumable_
-0001e110: 6368 756e 6b5f 7369 7a65 272c 0a20 2020  chunk_size',.   
-0001e120: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e130: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e140: 2020 7374 7228 4f4e 455f 4b49 4220 2a20    str(ONE_KIB * 
-0001e150: 3235 3629 290a 2020 2020 7769 7468 2053  256)).    with S
-0001e160: 6574 426f 746f 436f 6e66 6967 466f 7254  etBotoConfigForT
-0001e170: 6573 7428 0a20 2020 2020 2020 205b 7265  est(.        [re
-0001e180: 7375 6d61 626c 655f 7468 7265 7368 6f6c  sumable_threshol
-0001e190: 645f 666f 725f 7465 7374 2c20 7265 7375  d_for_test, resu
-0001e1a0: 6d61 626c 655f 6368 756e 6b5f 7369 7a65  mable_chunk_size
-0001e1b0: 5f66 6f72 5f74 6573 745d 293a 0a20 2020  _for_test]):.   
-0001e1c0: 2020 2073 7464 6572 7220 3d20 7365 6c66     stderr = self
-0001e1d0: 2e52 756e 4773 5574 696c 285b 0a20 2020  .RunGsUtil([.   
-0001e1e0: 2020 2020 2020 2027 6370 272c 2027 2d2d         'cp', '--
-0001e1f0: 7465 7374 6361 6c6c 6261 636b 6669 6c65  testcallbackfile
-0001e200: 272c 2074 6573 745f 6361 6c6c 6261 636b  ', test_callback
-0001e210: 5f66 696c 652c 2066 7061 7468 2c0a 2020  _file, fpath,.  
-0001e220: 2020 2020 2020 2020 7375 7269 2862 7563          suri(buc
-0001e230: 6b65 745f 7572 6929 0a20 2020 2020 205d  ket_uri).      ]
-0001e240: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-0001e250: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e260: 6578 7065 6374 6564 5f73 7461 7475 733d  expected_status=
-0001e270: 312c 0a20 2020 2020 2020 2020 2020 2020  1,.             
-0001e280: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e290: 2072 6574 7572 6e5f 7374 6465 7272 3d54   return_stderr=T
-0001e2a0: 7275 6529 0a20 2020 2020 2073 656c 662e  rue).      self.
-0001e2b0: 6173 7365 7274 496e 2827 4172 7469 6669  assertIn('Artifi
-0001e2c0: 6361 6c6c 7920 6861 6c74 696e 6720 7570  cally halting up
-0001e2d0: 6c6f 6164 272c 2073 7464 6572 7229 0a20  load', stderr). 
-0001e2e0: 2020 2020 2066 7061 7468 203d 2073 656c       fpath = sel
-0001e2f0: 662e 4372 6561 7465 5465 6d70 4669 6c65  f.CreateTempFile
-0001e300: 2866 696c 655f 6e61 6d65 3d27 666f 6f27  (file_name='foo'
-0001e310: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-0001e320: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e330: 2020 2020 746d 7064 6972 3d74 6d70 5f64      tmpdir=tmp_d
-0001e340: 6972 2c0a 2020 2020 2020 2020 2020 2020  ir,.            
-0001e350: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e360: 2020 2020 2020 636f 6e74 656e 7473 3d62        contents=b
-0001e370: 2762 2720 2a20 4f4e 455f 4b49 4220 2a20  'b' * ONE_KIB * 
-0001e380: 4f4e 455f 4b49 4229 0a20 2020 2020 2073  ONE_KIB).      s
-0001e390: 7464 6572 7220 3d20 7365 6c66 2e52 756e  tderr = self.Run
-0001e3a0: 4773 5574 696c 285b 2763 7027 2c20 6670  GsUtil(['cp', fp
-0001e3b0: 6174 682c 2073 7572 6928 6275 636b 6574  ath, suri(bucket
-0001e3c0: 5f75 7269 295d 2c0a 2020 2020 2020 2020  _uri)],.        
-0001e3d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e3e0: 2020 2020 2020 6578 7065 6374 6564 5f73        expected_s
-0001e3f0: 7461 7475 733d 312c 0a20 2020 2020 2020  tatus=1,.       
+0000ee70: 2020 2020 2020 2020 636f 6e74 656e 7473          contents
+0000ee80: 3d62 2762 2720 2a20 3130 3234 202a 2031  =b'b' * 1024 * 1
+0000ee90: 3032 3429 0a20 2020 2073 656c 662e 5275  024).    self.Ru
+0000eea0: 6e47 7355 7469 6c28 5b27 6370 272c 2073  nGsUtil(['cp', s
+0000eeb0: 7572 6928 7333 5f6b 6579 292c 2073 7572  uri(s3_key), sur
+0000eec0: 6928 6773 5f62 7563 6b65 7429 5d29 0a20  i(gs_bucket)]). 
+0000eed0: 2020 2073 656c 662e 5275 6e47 7355 7469     self.RunGsUti
+0000eee0: 6c28 5b27 6370 272c 2073 7572 6928 6773  l(['cp', suri(gs
+0000eef0: 5f6b 6579 292c 2073 7572 6928 7333 5f62  _key), suri(s3_b
+0000ef00: 7563 6b65 7429 5d29 0a20 2020 2077 6974  ucket)]).    wit
+0000ef10: 6820 5365 7442 6f74 6f43 6f6e 6669 6746  h SetBotoConfigF
+0000ef20: 6f72 5465 7374 285b 2827 4753 5574 696c  orTest([('GSUtil
+0000ef30: 272c 2027 7265 7375 6d61 626c 655f 7468  ', 'resumable_th
+0000ef40: 7265 7368 6f6c 6427 2c20 7374 7228 4f4e  reshold', str(ON
+0000ef50: 455f 4b49 4229 292c 0a20 2020 2020 2020  E_KIB)),.       
+0000ef60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ef70: 2020 2020 2020 2020 2827 4753 5574 696c          ('GSUtil
+0000ef80: 272c 2027 6a73 6f6e 5f72 6573 756d 6162  ', 'json_resumab
+0000ef90: 6c65 5f63 6875 6e6b 5f73 697a 6527 2c0a  le_chunk_size',.
+0000efa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000efb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000efc0: 7374 7228 4f4e 455f 4b49 4220 2a20 3235  str(ONE_KIB * 25
+0000efd0: 3629 295d 293a 0a20 2020 2020 2023 2045  6))]):.      # E
+0000efe0: 6e73 7572 6520 636f 7079 2061 6c73 6f20  nsure copy also 
+0000eff0: 776f 726b 7320 6163 726f 7373 206a 736f  works across jso
+0000f000: 6e20 7570 6c6f 6164 2063 6875 6e6b 2062  n upload chunk b
+0000f010: 6f75 6e64 6172 6965 732e 0a20 2020 2020  oundaries..     
+0000f020: 2073 656c 662e 5275 6e47 7355 7469 6c28   self.RunGsUtil(
+0000f030: 5b27 6370 272c 2073 7572 6928 7333 5f6b  ['cp', suri(s3_k
+0000f040: 6579 292c 2073 7572 6928 6773 5f62 7563  ey), suri(gs_buc
+0000f050: 6b65 7429 5d29 0a0a 2020 4075 6e69 7474  ket)])..  @unitt
+0000f060: 6573 742e 736b 6970 556e 6c65 7373 2848  est.skipUnless(H
+0000f070: 4153 5f53 335f 4352 4544 532c 2027 5465  AS_S3_CREDS, 'Te
+0000f080: 7374 2072 6571 7569 7265 7320 626f 7468  st requires both
+0000f090: 2053 3320 616e 6420 4753 2063 7265 6465   S3 and GS crede
+0000f0a0: 6e74 6961 6c73 2729 0a20 2064 6566 2074  ntials').  def t
+0000f0b0: 6573 745f 6773 5f74 6f5f 7333 5f6d 756c  est_gs_to_s3_mul
+0000f0c0: 7469 7061 7274 5f63 7028 7365 6c66 293a  tipart_cp(self):
+0000f0d0: 0a20 2020 2022 2222 456e 7375 7265 2064  .    """Ensure d
+0000f0e0: 6169 7379 5f63 6861 696e 2077 6f72 6b73  aisy_chain works
+0000f0f0: 2066 6f72 2061 6e20 6f62 6a65 6374 2074   for an object t
+0000f100: 6861 7420 6973 2064 6f77 6e6c 6f61 6465  hat is downloade
+0000f110: 6420 696e 2032 2070 6172 7473 2e22 2222  d in 2 parts."""
+0000f120: 0a20 2020 2073 335f 6275 636b 6574 203d  .    s3_bucket =
+0000f130: 2073 656c 662e 4372 6561 7465 4275 636b   self.CreateBuck
+0000f140: 6574 2870 726f 7669 6465 723d 2773 3327  et(provider='s3'
+0000f150: 290a 2020 2020 6773 5f62 7563 6b65 7420  ).    gs_bucket 
+0000f160: 3d20 7365 6c66 2e43 7265 6174 6542 7563  = self.CreateBuc
+0000f170: 6b65 7428 7072 6f76 6964 6572 3d27 6773  ket(provider='gs
+0000f180: 272c 2070 7265 6665 725f 6a73 6f6e 5f61  ', prefer_json_a
+0000f190: 7069 3d54 7275 6529 0a20 2020 206e 756d  pi=True).    num
+0000f1a0: 5f62 7974 6573 203d 2069 6e74 285f 4445  _bytes = int(_DE
+0000f1b0: 4641 554c 545f 444f 574e 4c4f 4144 5f43  FAULT_DOWNLOAD_C
+0000f1c0: 4855 4e4b 5f53 495a 4520 2a20 312e 3129  HUNK_SIZE * 1.1)
+0000f1d0: 0a20 2020 2067 735f 6b65 7920 3d20 7365  .    gs_key = se
+0000f1e0: 6c66 2e43 7265 6174 654f 626a 6563 7428  lf.CreateObject(
+0000f1f0: 6275 636b 6574 5f75 7269 3d67 735f 6275  bucket_uri=gs_bu
+0000f200: 636b 6574 2c0a 2020 2020 2020 2020 2020  cket,.          
+0000f210: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f220: 2020 2020 2063 6f6e 7465 6e74 733d 6227       contents=b'
+0000f230: 6227 202a 206e 756d 5f62 7974 6573 2c0a  b' * num_bytes,.
+0000f240: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f250: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+0000f260: 7265 6665 725f 6a73 6f6e 5f61 7069 3d54  refer_json_api=T
+0000f270: 7275 6529 0a20 2020 2073 656c 662e 5275  rue).    self.Ru
+0000f280: 6e47 7355 7469 6c28 5b0a 2020 2020 2020  nGsUtil([.      
+0000f290: 2020 272d 6f27 2c20 2773 333a 7573 652d    '-o', 's3:use-
+0000f2a0: 7369 6776 343d 5472 7565 272c 2027 2d6f  sigv4=True', '-o
+0000f2b0: 272c 2027 7333 3a68 6f73 743d 7333 2e61  ', 's3:host=s3.a
+0000f2c0: 6d61 7a6f 6e61 7773 2e63 6f6d 272c 2027  mazonaws.com', '
+0000f2d0: 6370 272c 0a20 2020 2020 2020 2073 7572  cp',.        sur
+0000f2e0: 6928 6773 5f6b 6579 292c 0a20 2020 2020  i(gs_key),.     
+0000f2f0: 2020 2073 7572 6928 7333 5f62 7563 6b65     suri(s3_bucke
+0000f300: 7429 0a20 2020 205d 290a 0a20 2040 756e  t).    ])..  @un
+0000f310: 6974 7465 7374 2e73 6b69 7028 2754 6869  ittest.skip('Thi
+0000f320: 7320 7465 7374 2069 7320 736c 6f77 2064  s test is slow d
+0000f330: 7565 2074 6f20 6372 6561 7469 6e67 206d  ue to creating m
+0000f340: 616e 7920 6f62 6a65 6374 732c 2027 0a20  any objects, '. 
+0000f350: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f360: 2762 7574 2072 656d 6169 6e73 2068 6572  'but remains her
+0000f370: 6520 666f 7220 6465 6275 6767 696e 6720  e for debugging 
+0000f380: 7075 7270 6f73 6573 2e27 290a 2020 6465  purposes.').  de
+0000f390: 6620 7465 7374 5f64 6169 7379 5f63 6861  f test_daisy_cha
+0000f3a0: 696e 5f63 705f 6669 6c65 5f73 697a 6573  in_cp_file_sizes
+0000f3b0: 2873 656c 6629 3a0a 2020 2020 2222 2245  (self):.    """E
+0000f3c0: 6e73 7572 6520 6461 6973 7920 6368 6169  nsure daisy chai
+0000f3d0: 6e20 6370 2077 6f72 6b73 2077 6974 6820  n cp works with 
+0000f3e0: 6120 7769 6465 206f 6620 6669 6c65 2073  a wide of file s
+0000f3f0: 697a 6573 2e22 2222 0a20 2020 2062 7563  izes.""".    buc
+0000f400: 6b65 745f 7572 6920 3d20 7365 6c66 2e43  ket_uri = self.C
+0000f410: 7265 6174 6542 7563 6b65 7428 290a 2020  reateBucket().  
+0000f420: 2020 6275 636b 6574 325f 7572 6920 3d20    bucket2_uri = 
+0000f430: 7365 6c66 2e43 7265 6174 6542 7563 6b65  self.CreateBucke
+0000f440: 7428 290a 2020 2020 6578 706f 6e65 6e74  t().    exponent
+0000f450: 5f63 6170 203d 2032 3820 2023 2055 7020  _cap = 28  # Up 
+0000f460: 746f 2032 3536 204d 6942 2069 6e20 7369  to 256 MiB in si
+0000f470: 7a65 2e0a 2020 2020 666f 7220 6920 696e  ze..    for i in
+0000f480: 2072 616e 6765 2865 7870 6f6e 656e 745f   range(exponent_
+0000f490: 6361 7029 3a0a 2020 2020 2020 6f6e 655f  cap):.      one_
+0000f4a0: 6279 7465 5f73 6d61 6c6c 6572 203d 2032  byte_smaller = 2
+0000f4b0: 2a2a 6920 2d20 310a 2020 2020 2020 6e6f  **i - 1.      no
+0000f4c0: 726d 616c 203d 2032 2a2a 690a 2020 2020  rmal = 2**i.    
+0000f4d0: 2020 6f6e 655f 6279 7465 5f6c 6172 6765    one_byte_large
+0000f4e0: 7220 3d20 322a 2a69 202b 2031 0a20 2020  r = 2**i + 1.   
+0000f4f0: 2020 2073 656c 662e 4372 6561 7465 4f62     self.CreateOb
+0000f500: 6a65 6374 2862 7563 6b65 745f 7572 693d  ject(bucket_uri=
+0000f510: 6275 636b 6574 5f75 7269 2c20 636f 6e74  bucket_uri, cont
+0000f520: 656e 7473 3d62 2761 2720 2a20 6f6e 655f  ents=b'a' * one_
+0000f530: 6279 7465 5f73 6d61 6c6c 6572 290a 2020  byte_smaller).  
+0000f540: 2020 2020 7365 6c66 2e43 7265 6174 654f      self.CreateO
+0000f550: 626a 6563 7428 6275 636b 6574 5f75 7269  bject(bucket_uri
+0000f560: 3d62 7563 6b65 745f 7572 692c 2063 6f6e  =bucket_uri, con
+0000f570: 7465 6e74 733d 6227 6227 202a 206e 6f72  tents=b'b' * nor
+0000f580: 6d61 6c29 0a20 2020 2020 2073 656c 662e  mal).      self.
+0000f590: 4372 6561 7465 4f62 6a65 6374 2862 7563  CreateObject(buc
+0000f5a0: 6b65 745f 7572 693d 6275 636b 6574 5f75  ket_uri=bucket_u
+0000f5b0: 7269 2c20 636f 6e74 656e 7473 3d62 2763  ri, contents=b'c
+0000f5c0: 2720 2a20 6f6e 655f 6279 7465 5f6c 6172  ' * one_byte_lar
+0000f5d0: 6765 7229 0a0a 2020 2020 7365 6c66 2e41  ger)..    self.A
+0000f5e0: 7373 6572 744e 4f62 6a65 6374 7349 6e42  ssertNObjectsInB
+0000f5f0: 7563 6b65 7428 6275 636b 6574 5f75 7269  ucket(bucket_uri
+0000f600: 2c20 6578 706f 6e65 6e74 5f63 6170 202a  , exponent_cap *
+0000f610: 2033 290a 2020 2020 7365 6c66 2e52 756e   3).    self.Run
+0000f620: 4773 5574 696c 280a 2020 2020 2020 2020  GsUtil(.        
+0000f630: 5b27 2d6d 272c 2027 6370 272c 2027 2d44  ['-m', 'cp', '-D
+0000f640: 272c 0a20 2020 2020 2020 2020 7375 7269  ',.         suri
+0000f650: 2862 7563 6b65 745f 7572 692c 2027 2a2a  (bucket_uri, '**
+0000f660: 2729 2c0a 2020 2020 2020 2020 2073 7572  '),.         sur
+0000f670: 6928 6275 636b 6574 325f 7572 6929 5d29  i(bucket2_uri)])
+0000f680: 0a0a 2020 2020 7365 6c66 2e41 7373 6572  ..    self.Asser
+0000f690: 744e 4f62 6a65 6374 7349 6e42 7563 6b65  tNObjectsInBucke
+0000f6a0: 7428 6275 636b 6574 325f 7572 692c 2065  t(bucket2_uri, e
+0000f6b0: 7870 6f6e 656e 745f 6361 7020 2a20 3329  xponent_cap * 3)
+0000f6c0: 0a0a 2020 6465 6620 7465 7374 5f64 6169  ..  def test_dai
+0000f6d0: 7379 5f63 6861 696e 5f63 7028 7365 6c66  sy_chain_cp(self
+0000f6e0: 293a 0a20 2020 2022 2222 5465 7374 7320  ):.    """Tests 
+0000f6f0: 6370 2077 6974 6820 7468 6520 2d44 206f  cp with the -D o
+0000f700: 7074 696f 6e2e 2222 220a 2020 2020 6275  ption.""".    bu
+0000f710: 636b 6574 315f 7572 6920 3d20 7365 6c66  cket1_uri = self
+0000f720: 2e43 7265 6174 6542 7563 6b65 7428 7374  .CreateBucket(st
+0000f730: 6f72 6167 655f 636c 6173 733d 2773 7461  orage_class='sta
+0000f740: 6e64 6172 6427 290a 2020 2020 6275 636b  ndard').    buck
+0000f750: 6574 325f 7572 6920 3d20 7365 6c66 2e43  et2_uri = self.C
+0000f760: 7265 6174 6542 7563 6b65 7428 0a20 2020  reateBucket(.   
+0000f770: 2020 2020 2073 746f 7261 6765 5f63 6c61       storage_cla
+0000f780: 7373 3d27 6475 7261 626c 655f 7265 6475  ss='durable_redu
+0000f790: 6365 645f 6176 6169 6c61 6269 6c69 7479  ced_availability
+0000f7a0: 2729 0a20 2020 206b 6579 5f75 7269 203d  ').    key_uri =
+0000f7b0: 2073 656c 662e 4372 6561 7465 4f62 6a65   self.CreateObje
+0000f7c0: 6374 2862 7563 6b65 745f 7572 693d 6275  ct(bucket_uri=bu
+0000f7d0: 636b 6574 315f 7572 692c 2063 6f6e 7465  cket1_uri, conte
+0000f7e0: 6e74 733d 6227 666f 6f27 290a 2020 2020  nts=b'foo').    
+0000f7f0: 2320 5365 7420 736f 6d65 2068 6561 6465  # Set some heade
+0000f800: 7273 206f 6e20 736f 7572 6365 206f 626a  rs on source obj
+0000f810: 6563 7420 736f 2077 6520 6361 6e20 7665  ect so we can ve
+0000f820: 7269 6679 2074 6861 7420 6865 6164 6572  rify that header
+0000f830: 7320 6172 650a 2020 2020 2320 7072 6573  s are.    # pres
+0000f840: 6572 6576 6564 2062 7920 6461 6973 792d  ereved by daisy-
+0000f850: 6368 6169 6e20 636f 7079 2e0a 2020 2020  chain copy..    
+0000f860: 7365 6c66 2e52 756e 4773 5574 696c 285b  self.RunGsUtil([
+0000f870: 0a20 2020 2020 2020 2027 7365 746d 6574  .        'setmet
+0000f880: 6127 2c20 272d 6827 2c20 2743 6163 6865  a', '-h', 'Cache
+0000f890: 2d43 6f6e 7472 6f6c 3a70 7562 6c69 632c  -Control:public,
+0000f8a0: 6d61 782d 6167 653d 3132 272c 2027 2d68  max-age=12', '-h
+0000f8b0: 272c 0a20 2020 2020 2020 2027 436f 6e74  ',.        'Cont
+0000f8c0: 656e 742d 5479 7065 3a69 6d61 6765 2f67  ent-Type:image/g
+0000f8d0: 6966 272c 2027 2d68 272c 0a20 2020 2020  if', '-h',.     
+0000f8e0: 2020 2027 782d 2573 2d6d 6574 612d 313a     'x-%s-meta-1:
+0000f8f0: 6162 6364 2720 2520 7365 6c66 2e70 726f  abcd' % self.pro
+0000f900: 7669 6465 725f 6375 7374 6f6d 5f6d 6574  vider_custom_met
+0000f910: 612c 0a20 2020 2020 2020 2073 7572 6928  a,.        suri(
+0000f920: 6b65 795f 7572 6929 0a20 2020 205d 290a  key_uri).    ]).
+0000f930: 2020 2020 2320 5365 7420 7075 626c 6963      # Set public
+0000f940: 2d72 6561 6420 286e 6f6e 2d64 6566 6175  -read (non-defau
+0000f950: 6c74 2920 4143 4c20 736f 2077 6520 6361  lt) ACL so we ca
+0000f960: 6e20 7665 7269 6679 2074 6861 7420 6370  n verify that cp
+0000f970: 202d 4420 2d70 2077 6f72 6b73 2e0a 2020   -D -p works..  
+0000f980: 2020 7365 6c66 2e52 756e 4773 5574 696c    self.RunGsUtil
+0000f990: 285b 2761 636c 272c 2027 7365 7427 2c20  (['acl', 'set', 
+0000f9a0: 2770 7562 6c69 632d 7265 6164 272c 2073  'public-read', s
+0000f9b0: 7572 6928 6b65 795f 7572 6929 5d29 0a20  uri(key_uri)]). 
+0000f9c0: 2020 2061 636c 5f6a 736f 6e20 3d20 7365     acl_json = se
+0000f9d0: 6c66 2e52 756e 4773 5574 696c 285b 2761  lf.RunGsUtil(['a
+0000f9e0: 636c 272c 2027 6765 7427 2c20 7375 7269  cl', 'get', suri
+0000f9f0: 286b 6579 5f75 7269 295d 2c20 7265 7475  (key_uri)], retu
+0000fa00: 726e 5f73 7464 6f75 743d 5472 7565 290a  rn_stdout=True).
+0000fa10: 2020 2020 2320 5065 7266 6f72 6d20 6461      # Perform da
+0000fa20: 6973 792d 6368 6169 6e20 636f 7079 2061  isy-chain copy a
+0000fa30: 6e64 2076 6572 6966 7920 7468 6174 2073  nd verify that s
+0000fa40: 6f75 7263 6520 6f62 6a65 6374 2068 6561  ource object hea
+0000fa50: 6465 7273 2061 6e64 2041 434c 0a20 2020  ders and ACL.   
+0000fa60: 2023 2077 6572 6520 7072 6573 6572 7665   # were preserve
+0000fa70: 642e 2041 6c73 6f20 7370 6563 6966 7920  d. Also specify 
+0000fa80: 2d6e 206f 7074 696f 6e20 746f 2074 6573  -n option to tes
+0000fa90: 7420 7468 6174 2067 7375 7469 6c20 636f  t that gsutil co
+0000faa0: 7272 6563 746c 790a 2020 2020 2320 7265  rrectly.    # re
+0000fab0: 6d6f 7665 7320 7468 6520 782d 676f 6f67  moves the x-goog
+0000fac0: 2d69 662d 6765 6e65 7261 7469 6f6e 2d6d  -if-generation-m
+0000fad0: 6174 6368 3a30 2068 6561 6465 7220 7468  atch:0 header th
+0000fae0: 6174 2077 6173 2073 6574 2061 7420 7570  at was set at up
+0000faf0: 6c6f 6164 696e 670a 2020 2020 2320 7469  loading.    # ti
+0000fb00: 6d65 2077 6865 6e20 7570 6461 7469 6e67  me when updating
+0000fb10: 2074 6865 2041 434c 2e0a 2020 2020 7374   the ACL..    st
+0000fb20: 6465 7272 203d 2073 656c 662e 5275 6e47  derr = self.RunG
+0000fb30: 7355 7469 6c28 0a20 2020 2020 2020 205b  sUtil(.        [
+0000fb40: 2763 7027 2c20 272d 4470 6e27 2c20 7375  'cp', '-Dpn', su
+0000fb50: 7269 286b 6579 5f75 7269 292c 0a20 2020  ri(key_uri),.   
+0000fb60: 2020 2020 2020 7375 7269 2862 7563 6b65        suri(bucke
+0000fb70: 7432 5f75 7269 295d 2c20 7265 7475 726e  t2_uri)], return
+0000fb80: 5f73 7464 6572 723d 5472 7565 290a 2020  _stderr=True).  
+0000fb90: 2020 7365 6c66 2e61 7373 6572 744e 6f74    self.assertNot
+0000fba0: 496e 2827 436f 7079 2d69 6e2d 7468 652d  In('Copy-in-the-
+0000fbb0: 636c 6f75 6420 6469 7361 6c6c 6f77 6564  cloud disallowed
+0000fbc0: 272c 2073 7464 6572 7229 0a0a 2020 2020  ', stderr)..    
+0000fbd0: 4052 6574 7279 2841 7373 6572 7469 6f6e  @Retry(Assertion
+0000fbe0: 4572 726f 722c 2074 7269 6573 3d33 2c20  Error, tries=3, 
+0000fbf0: 7469 6d65 6f75 745f 7365 6373 3d31 290a  timeout_secs=1).
+0000fc00: 2020 2020 6465 6620 5f43 6865 636b 2829      def _Check()
+0000fc10: 3a0a 2020 2020 2020 7572 6920 3d20 7375  :.      uri = su
+0000fc20: 7269 2862 7563 6b65 7432 5f75 7269 2c20  ri(bucket2_uri, 
+0000fc30: 6b65 795f 7572 692e 6f62 6a65 6374 5f6e  key_uri.object_n
+0000fc40: 616d 6529 0a20 2020 2020 2073 7464 6f75  ame).      stdou
+0000fc50: 7420 3d20 7365 6c66 2e52 756e 4773 5574  t = self.RunGsUt
+0000fc60: 696c 285b 276c 7327 2c20 272d 4c27 2c20  il(['ls', '-L', 
+0000fc70: 7572 695d 2c20 7265 7475 726e 5f73 7464  uri], return_std
+0000fc80: 6f75 743d 5472 7565 290a 2020 2020 2020  out=True).      
+0000fc90: 7365 6c66 2e61 7373 6572 7452 6567 6578  self.assertRegex
+0000fca0: 2873 7464 6f75 742c 2072 2743 6163 6865  (stdout, r'Cache
+0000fcb0: 2d43 6f6e 7472 6f6c 3a5c 732b 7075 626c  -Control:\s+publ
+0000fcc0: 6963 2c6d 6178 2d61 6765 3d31 3227 290a  ic,max-age=12').
+0000fcd0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+0000fce0: 7452 6567 6578 2873 7464 6f75 742c 2072  tRegex(stdout, r
+0000fcf0: 2743 6f6e 7465 6e74 2d54 7970 653a 5c73  'Content-Type:\s
+0000fd00: 2b69 6d61 6765 2f67 6966 2729 0a20 2020  +image/gif').   
+0000fd10: 2020 2073 656c 662e 6173 7365 7274 5265     self.assertRe
+0000fd20: 6765 7828 7374 646f 7574 2c20 7227 4d65  gex(stdout, r'Me
+0000fd30: 7461 6461 7461 3a5c 732b 313a 5c73 2b61  tadata:\s+1:\s+a
+0000fd40: 6263 6427 290a 2020 2020 2020 6e65 775f  bcd').      new_
+0000fd50: 6163 6c5f 6a73 6f6e 203d 2073 656c 662e  acl_json = self.
+0000fd60: 5275 6e47 7355 7469 6c28 5b27 6163 6c27  RunGsUtil(['acl'
+0000fd70: 2c20 2767 6574 272c 2075 7269 5d2c 2072  , 'get', uri], r
+0000fd80: 6574 7572 6e5f 7374 646f 7574 3d54 7275  eturn_stdout=Tru
+0000fd90: 6529 0a20 2020 2020 2073 656c 662e 6173  e).      self.as
+0000fda0: 7365 7274 4571 7561 6c28 6163 6c5f 6a73  sertEqual(acl_js
+0000fdb0: 6f6e 2c20 6e65 775f 6163 6c5f 6a73 6f6e  on, new_acl_json
+0000fdc0: 290a 0a20 2020 205f 4368 6563 6b28 290a  )..    _Check().
+0000fdd0: 0a20 2040 756e 6974 7465 7374 2e73 6b69  .  @unittest.ski
+0000fde0: 7055 6e6c 6573 7328 0a20 2020 2020 206e  pUnless(.      n
+0000fdf0: 6f74 2048 4153 5f47 535f 504f 5254 2c20  ot HAS_GS_PORT, 
+0000fe00: 2767 735f 706f 7274 2069 7320 6465 6669  'gs_port is defi
+0000fe10: 6e65 6420 696e 2063 6f6e 6669 6720 7768  ned in config wh
+0000fe20: 6963 6820 6361 6e20 6361 7573 6520 270a  ich can cause '.
+0000fe30: 2020 2020 2020 2770 726f 626c 656d 7320        'problems 
+0000fe40: 7768 656e 2075 706c 6f61 6469 6e67 2061  when uploading a
+0000fe50: 6e64 2064 6f77 6e6c 6f61 6469 6e67 2074  nd downloading t
+0000fe60: 6f20 7468 6520 7361 6d65 206c 6f63 616c  o the same local
+0000fe70: 2068 6f73 7420 706f 7274 2729 0a20 2064   host port').  d
+0000fe80: 6566 2074 6573 745f 6461 6973 795f 6368  ef test_daisy_ch
+0000fe90: 6169 6e5f 6370 5f64 6f77 6e6c 6f61 645f  ain_cp_download_
+0000fea0: 6661 696c 7572 6528 7365 6c66 293a 0a20  failure(self):. 
+0000feb0: 2020 2022 2222 5465 7374 7320 6370 2077     """Tests cp w
+0000fec0: 6974 6820 7468 6520 2d44 206f 7074 696f  ith the -D optio
+0000fed0: 6e20 7768 656e 2074 6865 2064 6f77 6e6c  n when the downl
+0000fee0: 6f61 6420 7468 7265 6164 2064 6965 732e  oad thread dies.
+0000fef0: 2222 220a 2020 2020 6275 636b 6574 315f  """.    bucket1_
+0000ff00: 7572 6920 3d20 7365 6c66 2e43 7265 6174  uri = self.Creat
+0000ff10: 6542 7563 6b65 7428 290a 2020 2020 6275  eBucket().    bu
+0000ff20: 636b 6574 325f 7572 6920 3d20 7365 6c66  cket2_uri = self
+0000ff30: 2e43 7265 6174 6542 7563 6b65 7428 290a  .CreateBucket().
+0000ff40: 2020 2020 6b65 795f 7572 6920 3d20 7365      key_uri = se
+0000ff50: 6c66 2e43 7265 6174 654f 626a 6563 7428  lf.CreateObject(
+0000ff60: 6275 636b 6574 5f75 7269 3d62 7563 6b65  bucket_uri=bucke
+0000ff70: 7431 5f75 7269 2c0a 2020 2020 2020 2020  t1_uri,.        
+0000ff80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ff90: 2020 2020 2020 2020 636f 6e74 656e 7473          contents
+0000ffa0: 3d62 2761 2720 2a20 7365 6c66 2e68 616c  =b'a' * self.hal
+0000ffb0: 745f 7369 7a65 290a 2020 2020 626f 746f  t_size).    boto
+0000ffc0: 5f63 6f6e 6669 675f 666f 725f 7465 7374  _config_for_test
+0000ffd0: 203d 2028 2747 5355 7469 6c27 2c20 2772   = ('GSUtil', 'r
+0000ffe0: 6573 756d 6162 6c65 5f74 6872 6573 686f  esumable_thresho
+0000fff0: 6c64 272c 2073 7472 284f 4e45 5f4b 4942  ld', str(ONE_KIB
+00010000: 2929 0a20 2020 2074 6573 745f 6361 6c6c  )).    test_call
+00010010: 6261 636b 5f66 696c 6520 3d20 7365 6c66  back_file = self
+00010020: 2e43 7265 6174 6554 656d 7046 696c 6528  .CreateTempFile(
+00010030: 0a20 2020 2020 2020 2063 6f6e 7465 6e74  .        content
+00010040: 733d 7069 636b 6c65 2e64 756d 7073 2848  s=pickle.dumps(H
+00010050: 616c 7469 6e67 436f 7079 4361 6c6c 6261  altingCopyCallba
+00010060: 636b 4861 6e64 6c65 7228 4661 6c73 652c  ckHandler(False,
+00010070: 2035 2929 290a 2020 2020 7769 7468 2053   5))).    with S
+00010080: 6574 426f 746f 436f 6e66 6967 466f 7254  etBotoConfigForT
+00010090: 6573 7428 5b62 6f74 6f5f 636f 6e66 6967  est([boto_config
+000100a0: 5f66 6f72 5f74 6573 745d 293a 0a20 2020  _for_test]):.   
+000100b0: 2020 2073 7464 6572 7220 3d20 7365 6c66     stderr = self
+000100c0: 2e52 756e 4773 5574 696c 285b 0a20 2020  .RunGsUtil([.   
+000100d0: 2020 2020 2020 2027 6370 272c 2027 2d2d         'cp', '--
+000100e0: 7465 7374 6361 6c6c 6261 636b 6669 6c65  testcallbackfile
+000100f0: 272c 2074 6573 745f 6361 6c6c 6261 636b  ', test_callback
+00010100: 5f66 696c 652c 2027 2d44 272c 0a20 2020  _file, '-D',.   
+00010110: 2020 2020 2020 2073 7572 6928 6b65 795f         suri(key_
+00010120: 7572 6929 2c0a 2020 2020 2020 2020 2020  uri),.          
+00010130: 7375 7269 2862 7563 6b65 7432 5f75 7269  suri(bucket2_uri
+00010140: 290a 2020 2020 2020 5d2c 0a20 2020 2020  ).      ],.     
+00010150: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010160: 2020 2020 2020 2020 2065 7870 6563 7465           expecte
+00010170: 645f 7374 6174 7573 3d31 2c0a 2020 2020  d_status=1,.    
+00010180: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010190: 2020 2020 2020 2020 2020 7265 7475 726e            return
+000101a0: 5f73 7464 6572 723d 5472 7565 290a 2020  _stderr=True).  
+000101b0: 2020 2020 2320 5368 6f75 6c64 2068 6176      # Should hav
+000101c0: 6520 7468 7265 6520 6578 6365 7074 696f  e three exceptio
+000101d0: 6e20 7472 6163 6573 3b20 6f6e 6520 6672  n traces; one fr
+000101e0: 6f6d 2074 6865 2064 6f77 6e6c 6f61 6420  om the download 
+000101f0: 7468 7265 6164 2061 6e64 0a20 2020 2020  thread and.     
+00010200: 2023 2074 776f 2066 726f 6d20 7468 6520   # two from the 
+00010210: 7570 6c6f 6164 2074 6872 6561 6420 2865  upload thread (e
+00010220: 7870 6563 7469 6f6e 206d 6573 7361 6765  xpection message
+00010230: 2069 7320 7265 7065 6174 6564 2069 6e20   is repeated in 
+00010240: 6d61 696e 2773 0a20 2020 2020 2023 205f  main's.      # _
+00010250: 4f75 7470 7574 416e 6445 7869 7429 2e0a  OutputAndExit)..
+00010260: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+00010270: 7445 7175 616c 280a 2020 2020 2020 2020  tEqual(.        
+00010280: 2020 7374 6465 7272 2e63 6f75 6e74 280a    stderr.count(.
+00010290: 2020 2020 2020 2020 2020 2020 2020 2752                'R
+000102a0: 6573 756d 6162 6c65 446f 776e 6c6f 6164  esumableDownload
+000102b0: 4578 6365 7074 696f 6e3a 2041 7274 6966  Exception: Artif
+000102c0: 6963 616c 6c79 2068 616c 7469 6e67 2064  ically halting d
+000102d0: 6f77 6e6c 6f61 6427 292c 2033 290a 0a20  ownload'), 3).. 
+000102e0: 2064 6566 2074 6573 745f 7374 7265 616d   def test_stream
+000102f0: 696e 675f 677a 6970 5f75 706c 6f61 6428  ing_gzip_upload(
+00010300: 7365 6c66 293a 0a20 2020 2022 2222 5465  self):.    """Te
+00010310: 7374 7320 6572 726f 7220 7768 656e 2063  sts error when c
+00010320: 6f6d 7072 6573 7369 6f6e 2066 6c61 6720  ompression flag 
+00010330: 6973 2072 6571 7565 7374 6564 206f 6e20  is requested on 
+00010340: 6120 7374 7265 616d 696e 6720 736f 7572  a streaming sour
+00010350: 6365 2e22 2222 0a20 2020 2062 7563 6b65  ce.""".    bucke
+00010360: 745f 7572 6920 3d20 7365 6c66 2e43 7265  t_uri = self.Cre
+00010370: 6174 6542 7563 6b65 7428 290a 2020 2020  ateBucket().    
+00010380: 7374 6465 7272 203d 2073 656c 662e 5275  stderr = self.Ru
+00010390: 6e47 7355 7469 6c28 0a20 2020 2020 2020  nGsUtil(.       
+000103a0: 205b 2763 7027 2c20 272d 5a27 2c20 272d   ['cp', '-Z', '-
+000103b0: 272c 2073 7572 6928 6275 636b 6574 5f75  ', suri(bucket_u
+000103c0: 7269 2c20 2766 6f6f 2729 5d2c 0a20 2020  ri, 'foo')],.   
+000103d0: 2020 2020 2072 6574 7572 6e5f 7374 6465       return_stde
+000103e0: 7272 3d54 7275 652c 0a20 2020 2020 2020  rr=True,.       
+000103f0: 2065 7870 6563 7465 645f 7374 6174 7573   expected_status
+00010400: 3d31 2c0a 2020 2020 2020 2020 7374 6469  =1,.        stdi
+00010410: 6e3d 2773 7472 6561 6d69 6e67 2064 6174  n='streaming dat
+00010420: 6127 290a 2020 2020 7365 6c66 2e61 7373  a').    self.ass
+00010430: 6572 7449 6e28 0a20 2020 2020 2020 2027  ertIn(.        '
+00010440: 677a 6970 2063 6f6d 7072 6573 7369 6f6e  gzip compression
+00010450: 2069 7320 6e6f 7420 6375 7272 656e 746c   is not currentl
+00010460: 7920 7375 7070 6f72 7465 6420 6f6e 2073  y supported on s
+00010470: 7472 6561 6d69 6e67 2075 706c 6f61 6473  treaming uploads
+00010480: 272c 0a20 2020 2020 2020 2073 7464 6572  ',.        stder
+00010490: 7229 0a0a 2020 6465 6620 7465 7374 5f73  r)..  def test_s
+000104a0: 6565 6b5f 6168 6561 645f 7570 6c6f 6164  eek_ahead_upload
+000104b0: 5f63 7028 7365 6c66 293a 0a20 2020 2022  _cp(self):.    "
+000104c0: 2222 5465 7374 7320 7468 6174 2074 6865  ""Tests that the
+000104d0: 2073 6565 6b2d 6168 6561 6420 6974 6572   seek-ahead iter
+000104e0: 6174 6f72 2065 7374 696d 6174 6573 2074  ator estimates t
+000104f0: 6f74 616c 2075 706c 6f61 6420 776f 726b  otal upload work
+00010500: 2e22 2222 0a20 2020 2074 6d70 6469 7220  .""".    tmpdir 
+00010510: 3d20 7365 6c66 2e43 7265 6174 6554 656d  = self.CreateTem
+00010520: 7044 6972 2874 6573 745f 6669 6c65 733d  pDir(test_files=
+00010530: 3329 0a20 2020 2062 7563 6b65 745f 7572  3).    bucket_ur
+00010540: 6920 3d20 7365 6c66 2e43 7265 6174 6542  i = self.CreateB
+00010550: 7563 6b65 7428 290a 0a20 2020 2077 6974  ucket()..    wit
+00010560: 6820 5365 7442 6f74 6f43 6f6e 6669 6746  h SetBotoConfigF
+00010570: 6f72 5465 7374 285b 2827 4753 5574 696c  orTest([('GSUtil
+00010580: 272c 2027 7461 736b 5f65 7374 696d 6174  ', 'task_estimat
+00010590: 696f 6e5f 7468 7265 7368 6f6c 6427 2c20  ion_threshold', 
+000105a0: 2731 2729 2c0a 2020 2020 2020 2020 2020  '1'),.          
+000105b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000105c0: 2020 2020 2028 2747 5355 7469 6c27 2c20       ('GSUtil', 
+000105d0: 2774 6173 6b5f 6573 7469 6d61 7469 6f6e  'task_estimation
+000105e0: 5f66 6f72 6365 272c 2027 5472 7565 2729  _force', 'True')
+000105f0: 5d29 3a0a 2020 2020 2020 7374 6465 7272  ]):.      stderr
+00010600: 203d 2073 656c 662e 5275 6e47 7355 7469   = self.RunGsUti
+00010610: 6c28 0a20 2020 2020 2020 2020 205b 272d  l(.          ['-
+00010620: 6d27 2c20 2763 7027 2c20 272d 7227 2c20  m', 'cp', '-r', 
+00010630: 746d 7064 6972 2c20 7375 7269 2862 7563  tmpdir, suri(buc
+00010640: 6b65 745f 7572 6929 5d2c 2072 6574 7572  ket_uri)], retur
+00010650: 6e5f 7374 6465 7272 3d54 7275 6529 0a20  n_stderr=True). 
+00010660: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+00010670: 496e 280a 2020 2020 2020 2020 2020 2745  In(.          'E
+00010680: 7374 696d 6174 6564 2077 6f72 6b20 666f  stimated work fo
+00010690: 7220 7468 6973 2063 6f6d 6d61 6e64 3a20  r this command: 
+000106a0: 6f62 6a65 6374 733a 2033 2c20 746f 7461  objects: 3, tota
+000106b0: 6c20 7369 7a65 3a20 3138 272c 2073 7464  l size: 18', std
+000106c0: 6572 7229 0a0a 2020 2020 7769 7468 2053  err)..    with S
+000106d0: 6574 426f 746f 436f 6e66 6967 466f 7254  etBotoConfigForT
+000106e0: 6573 7428 5b28 2747 5355 7469 6c27 2c20  est([('GSUtil', 
+000106f0: 2774 6173 6b5f 6573 7469 6d61 7469 6f6e  'task_estimation
+00010700: 5f74 6872 6573 686f 6c64 272c 2027 3027  _threshold', '0'
+00010710: 292c 0a20 2020 2020 2020 2020 2020 2020  ),.             
+00010720: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010730: 2020 2827 4753 5574 696c 272c 2027 7461    ('GSUtil', 'ta
+00010740: 736b 5f65 7374 696d 6174 696f 6e5f 666f  sk_estimation_fo
+00010750: 7263 6527 2c20 2754 7275 6527 295d 293a  rce', 'True')]):
+00010760: 0a20 2020 2020 2073 7464 6572 7220 3d20  .      stderr = 
+00010770: 7365 6c66 2e52 756e 4773 5574 696c 280a  self.RunGsUtil(.
+00010780: 2020 2020 2020 2020 2020 5b27 2d6d 272c            ['-m',
+00010790: 2027 6370 272c 2027 2d72 272c 2074 6d70   'cp', '-r', tmp
+000107a0: 6469 722c 2073 7572 6928 6275 636b 6574  dir, suri(bucket
+000107b0: 5f75 7269 295d 2c20 7265 7475 726e 5f73  _uri)], return_s
+000107c0: 7464 6572 723d 5472 7565 290a 2020 2020  tderr=True).    
+000107d0: 2020 7365 6c66 2e61 7373 6572 744e 6f74    self.assertNot
+000107e0: 496e 2827 4573 7469 6d61 7465 6420 776f  In('Estimated wo
+000107f0: 726b 272c 2073 7464 6572 7229 0a0a 2020  rk', stderr)..  
+00010800: 6465 6620 7465 7374 5f73 6565 6b5f 6168  def test_seek_ah
+00010810: 6561 645f 646f 776e 6c6f 6164 5f63 7028  ead_download_cp(
+00010820: 7365 6c66 293a 0a20 2020 2074 6d70 6469  self):.    tmpdi
+00010830: 7220 3d20 7365 6c66 2e43 7265 6174 6554  r = self.CreateT
+00010840: 656d 7044 6972 2829 0a20 2020 2062 7563  empDir().    buc
+00010850: 6b65 745f 7572 6920 3d20 7365 6c66 2e43  ket_uri = self.C
+00010860: 7265 6174 6542 7563 6b65 7428 7465 7374  reateBucket(test
+00010870: 5f6f 626a 6563 7473 3d33 290a 2020 2020  _objects=3).    
+00010880: 7365 6c66 2e41 7373 6572 744e 4f62 6a65  self.AssertNObje
+00010890: 6374 7349 6e42 7563 6b65 7428 6275 636b  ctsInBucket(buck
+000108a0: 6574 5f75 7269 2c20 3329 0a0a 2020 2020  et_uri, 3)..    
+000108b0: 7769 7468 2053 6574 426f 746f 436f 6e66  with SetBotoConf
+000108c0: 6967 466f 7254 6573 7428 5b28 2747 5355  igForTest([('GSU
+000108d0: 7469 6c27 2c20 2774 6173 6b5f 6573 7469  til', 'task_esti
+000108e0: 6d61 7469 6f6e 5f74 6872 6573 686f 6c64  mation_threshold
+000108f0: 272c 2027 3127 292c 0a20 2020 2020 2020  ', '1'),.       
+00010900: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010910: 2020 2020 2020 2020 2827 4753 5574 696c          ('GSUtil
+00010920: 272c 2027 7461 736b 5f65 7374 696d 6174  ', 'task_estimat
+00010930: 696f 6e5f 666f 7263 6527 2c20 2754 7275  ion_force', 'Tru
+00010940: 6527 295d 293a 0a20 2020 2020 2073 7464  e')]):.      std
+00010950: 6572 7220 3d20 7365 6c66 2e52 756e 4773  err = self.RunGs
+00010960: 5574 696c 280a 2020 2020 2020 2020 2020  Util(.          
+00010970: 5b27 2d6d 272c 2027 6370 272c 2027 2d72  ['-m', 'cp', '-r
+00010980: 272c 2073 7572 6928 6275 636b 6574 5f75  ', suri(bucket_u
+00010990: 7269 292c 2074 6d70 6469 725d 2c20 7265  ri), tmpdir], re
+000109a0: 7475 726e 5f73 7464 6572 723d 5472 7565  turn_stderr=True
+000109b0: 290a 2020 2020 2020 7365 6c66 2e61 7373  ).      self.ass
+000109c0: 6572 7449 6e28 0a20 2020 2020 2020 2020  ertIn(.         
+000109d0: 2027 4573 7469 6d61 7465 6420 776f 726b   'Estimated work
+000109e0: 2066 6f72 2074 6869 7320 636f 6d6d 616e   for this comman
+000109f0: 643a 206f 626a 6563 7473 3a20 332c 2074  d: objects: 3, t
+00010a00: 6f74 616c 2073 697a 653a 2031 3827 2c20  otal size: 18', 
+00010a10: 7374 6465 7272 290a 0a20 2020 2077 6974  stderr)..    wit
+00010a20: 6820 5365 7442 6f74 6f43 6f6e 6669 6746  h SetBotoConfigF
+00010a30: 6f72 5465 7374 285b 2827 4753 5574 696c  orTest([('GSUtil
+00010a40: 272c 2027 7461 736b 5f65 7374 696d 6174  ', 'task_estimat
+00010a50: 696f 6e5f 7468 7265 7368 6f6c 6427 2c20  ion_threshold', 
+00010a60: 2730 2729 2c0a 2020 2020 2020 2020 2020  '0'),.          
+00010a70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010a80: 2020 2020 2028 2747 5355 7469 6c27 2c20       ('GSUtil', 
+00010a90: 2774 6173 6b5f 6573 7469 6d61 7469 6f6e  'task_estimation
+00010aa0: 5f66 6f72 6365 272c 2027 5472 7565 2729  _force', 'True')
+00010ab0: 5d29 3a0a 2020 2020 2020 7374 6465 7272  ]):.      stderr
+00010ac0: 203d 2073 656c 662e 5275 6e47 7355 7469   = self.RunGsUti
+00010ad0: 6c28 0a20 2020 2020 2020 2020 205b 272d  l(.          ['-
+00010ae0: 6d27 2c20 2763 7027 2c20 272d 7227 2c20  m', 'cp', '-r', 
+00010af0: 7375 7269 2862 7563 6b65 745f 7572 6929  suri(bucket_uri)
+00010b00: 2c20 746d 7064 6972 5d2c 2072 6574 7572  , tmpdir], retur
+00010b10: 6e5f 7374 6465 7272 3d54 7275 6529 0a20  n_stderr=True). 
+00010b20: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+00010b30: 4e6f 7449 6e28 2745 7374 696d 6174 6564  NotIn('Estimated
+00010b40: 2077 6f72 6b27 2c20 7374 6465 7272 290a   work', stderr).
+00010b50: 0a20 2064 6566 2074 6573 745f 6361 6e6e  .  def test_cann
+00010b60: 6564 5f61 636c 5f63 7028 7365 6c66 293a  ed_acl_cp(self):
+00010b70: 0a20 2020 2022 2222 5465 7374 7320 636f  .    """Tests co
+00010b80: 7079 696e 6720 7769 7468 2061 2063 616e  pying with a can
+00010b90: 6e65 6420 4143 4c2e 2222 220a 2020 2020  ned ACL.""".    
+00010ba0: 6275 636b 6574 315f 7572 6920 3d20 7365  bucket1_uri = se
+00010bb0: 6c66 2e43 7265 6174 6542 7563 6b65 7428  lf.CreateBucket(
+00010bc0: 290a 2020 2020 6275 636b 6574 325f 7572  ).    bucket2_ur
+00010bd0: 6920 3d20 7365 6c66 2e43 7265 6174 6542  i = self.CreateB
+00010be0: 7563 6b65 7428 290a 2020 2020 6b65 795f  ucket().    key_
+00010bf0: 7572 6920 3d20 7365 6c66 2e43 7265 6174  uri = self.Creat
+00010c00: 654f 626a 6563 7428 6275 636b 6574 5f75  eObject(bucket_u
+00010c10: 7269 3d62 7563 6b65 7431 5f75 7269 2c20  ri=bucket1_uri, 
+00010c20: 636f 6e74 656e 7473 3d62 2766 6f6f 2729  contents=b'foo')
+00010c30: 0a20 2020 2073 656c 662e 5275 6e47 7355  .    self.RunGsU
+00010c40: 7469 6c28 0a20 2020 2020 2020 205b 2763  til(.        ['c
+00010c50: 7027 2c20 272d 6127 2c20 2770 7562 6c69  p', '-a', 'publi
+00010c60: 632d 7265 6164 272c 0a20 2020 2020 2020  c-read',.       
+00010c70: 2020 7375 7269 286b 6579 5f75 7269 292c    suri(key_uri),
+00010c80: 0a20 2020 2020 2020 2020 7375 7269 2862  .         suri(b
+00010c90: 7563 6b65 7432 5f75 7269 295d 290a 2020  ucket2_uri)]).  
+00010ca0: 2020 2320 5365 7420 7075 626c 6963 2d72    # Set public-r
+00010cb0: 6561 6420 6f6e 2074 6865 206f 7269 6769  ead on the origi
+00010cc0: 6e61 6c20 6b65 7920 6166 7465 7220 7468  nal key after th
+00010cd0: 6520 636f 7079 2073 6f20 7765 2063 616e  e copy so we can
+00010ce0: 2063 6f6d 7061 7265 0a20 2020 2023 2074   compare.    # t
+00010cf0: 6865 2041 434c 732e 0a20 2020 2073 656c  he ACLs..    sel
+00010d00: 662e 5275 6e47 7355 7469 6c28 5b27 6163  f.RunGsUtil(['ac
+00010d10: 6c27 2c20 2773 6574 272c 2027 7075 626c  l', 'set', 'publ
+00010d20: 6963 2d72 6561 6427 2c20 7375 7269 286b  ic-read', suri(k
+00010d30: 6579 5f75 7269 295d 290a 2020 2020 7075  ey_uri)]).    pu
+00010d40: 626c 6963 5f72 6561 645f 6163 6c20 3d20  blic_read_acl = 
+00010d50: 7365 6c66 2e52 756e 4773 5574 696c 285b  self.RunGsUtil([
+00010d60: 2761 636c 272c 2027 6765 7427 2c20 7375  'acl', 'get', su
+00010d70: 7269 286b 6579 5f75 7269 295d 2c0a 2020  ri(key_uri)],.  
+00010d80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010d90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010da0: 2020 2072 6574 7572 6e5f 7374 646f 7574     return_stdout
+00010db0: 3d54 7275 6529 0a0a 2020 2020 4052 6574  =True)..    @Ret
+00010dc0: 7279 2841 7373 6572 7469 6f6e 4572 726f  ry(AssertionErro
+00010dd0: 722c 2074 7269 6573 3d33 2c20 7469 6d65  r, tries=3, time
+00010de0: 6f75 745f 7365 6373 3d31 290a 2020 2020  out_secs=1).    
+00010df0: 6465 6620 5f43 6865 636b 2829 3a0a 2020  def _Check():.  
+00010e00: 2020 2020 7572 6920 3d20 7375 7269 2862      uri = suri(b
+00010e10: 7563 6b65 7432 5f75 7269 2c20 6b65 795f  ucket2_uri, key_
+00010e20: 7572 692e 6f62 6a65 6374 5f6e 616d 6529  uri.object_name)
+00010e30: 0a20 2020 2020 206e 6577 5f61 636c 5f6a  .      new_acl_j
+00010e40: 736f 6e20 3d20 7365 6c66 2e52 756e 4773  son = self.RunGs
+00010e50: 5574 696c 285b 2761 636c 272c 2027 6765  Util(['acl', 'ge
+00010e60: 7427 2c20 7572 695d 2c20 7265 7475 726e  t', uri], return
+00010e70: 5f73 7464 6f75 743d 5472 7565 290a 2020  _stdout=True).  
+00010e80: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+00010e90: 7175 616c 2870 7562 6c69 635f 7265 6164  qual(public_read
+00010ea0: 5f61 636c 2c20 6e65 775f 6163 6c5f 6a73  _acl, new_acl_js
+00010eb0: 6f6e 290a 0a20 2020 205f 4368 6563 6b28  on)..    _Check(
+00010ec0: 290a 0a20 2040 5365 7175 656e 7469 616c  )..  @Sequential
+00010ed0: 416e 6450 6172 616c 6c65 6c54 7261 6e73  AndParallelTrans
+00010ee0: 6665 720a 2020 6465 6620 7465 7374 5f63  fer.  def test_c
+00010ef0: 616e 6e65 645f 6163 6c5f 7570 6c6f 6164  anned_acl_upload
+00010f00: 2873 656c 6629 3a0a 2020 2020 2222 2254  (self):.    """T
+00010f10: 6573 7473 2075 706c 6f61 6469 6e67 2061  ests uploading a
+00010f20: 2066 696c 6520 7769 7468 2061 2063 616e   file with a can
+00010f30: 6e65 6420 4143 4c2e 2222 220a 2020 2020  ned ACL.""".    
+00010f40: 6275 636b 6574 315f 7572 6920 3d20 7365  bucket1_uri = se
+00010f50: 6c66 2e43 7265 6174 6542 7563 6b65 7428  lf.CreateBucket(
+00010f60: 290a 2020 2020 6b65 795f 7572 6920 3d20  ).    key_uri = 
+00010f70: 7365 6c66 2e43 7265 6174 654f 626a 6563  self.CreateObjec
+00010f80: 7428 6275 636b 6574 5f75 7269 3d62 7563  t(bucket_uri=buc
+00010f90: 6b65 7431 5f75 7269 2c20 636f 6e74 656e  ket1_uri, conten
+00010fa0: 7473 3d62 2766 6f6f 2729 0a20 2020 2023  ts=b'foo').    #
+00010fb0: 2053 6574 2070 7562 6c69 632d 7265 6164   Set public-read
+00010fc0: 206f 6e20 7468 6520 6f62 6a65 6374 2073   on the object s
+00010fd0: 6f20 7765 2063 616e 2063 6f6d 7061 7265  o we can compare
+00010fe0: 2074 6865 2041 434c 732e 0a20 2020 2073   the ACLs..    s
+00010ff0: 656c 662e 5275 6e47 7355 7469 6c28 5b27  elf.RunGsUtil(['
+00011000: 6163 6c27 2c20 2773 6574 272c 2027 7075  acl', 'set', 'pu
+00011010: 626c 6963 2d72 6561 6427 2c20 7375 7269  blic-read', suri
+00011020: 286b 6579 5f75 7269 295d 290a 2020 2020  (key_uri)]).    
+00011030: 7075 626c 6963 5f72 6561 645f 6163 6c20  public_read_acl 
+00011040: 3d20 7365 6c66 2e52 756e 4773 5574 696c  = self.RunGsUtil
+00011050: 285b 2761 636c 272c 2027 6765 7427 2c20  (['acl', 'get', 
+00011060: 7375 7269 286b 6579 5f75 7269 295d 2c0a  suri(key_uri)],.
+00011070: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011080: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011090: 2020 2020 2072 6574 7572 6e5f 7374 646f       return_stdo
+000110a0: 7574 3d54 7275 6529 0a0a 2020 2020 6669  ut=True)..    fi
+000110b0: 6c65 5f6e 616d 6520 3d20 2762 6172 270a  le_name = 'bar'.
+000110c0: 2020 2020 6670 6174 6820 3d20 7365 6c66      fpath = self
+000110d0: 2e43 7265 6174 6554 656d 7046 696c 6528  .CreateTempFile(
+000110e0: 6669 6c65 5f6e 616d 653d 6669 6c65 5f6e  file_name=file_n
+000110f0: 616d 652c 2063 6f6e 7465 6e74 733d 6227  ame, contents=b'
+00011100: 666f 6f27 290a 2020 2020 7365 6c66 2e52  foo').    self.R
+00011110: 756e 4773 5574 696c 285b 2763 7027 2c20  unGsUtil(['cp', 
+00011120: 272d 6127 2c20 2770 7562 6c69 632d 7265  '-a', 'public-re
+00011130: 6164 272c 2066 7061 7468 2c20 7375 7269  ad', fpath, suri
+00011140: 2862 7563 6b65 7431 5f75 7269 295d 290a  (bucket1_uri)]).
+00011150: 2020 2020 6e65 775f 6163 6c5f 6a73 6f6e      new_acl_json
+00011160: 203d 2073 656c 662e 5275 6e47 7355 7469   = self.RunGsUti
+00011170: 6c28 0a20 2020 2020 2020 205b 2761 636c  l(.        ['acl
+00011180: 272c 2027 6765 7427 2c20 7375 7269 2862  ', 'get', suri(b
+00011190: 7563 6b65 7431 5f75 7269 2c20 6669 6c65  ucket1_uri, file
+000111a0: 5f6e 616d 6529 5d2c 2072 6574 7572 6e5f  _name)], return_
+000111b0: 7374 646f 7574 3d54 7275 6529 0a20 2020  stdout=True).   
+000111c0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+000111d0: 6c28 7075 626c 6963 5f72 6561 645f 6163  l(public_read_ac
+000111e0: 6c2c 206e 6577 5f61 636c 5f6a 736f 6e29  l, new_acl_json)
+000111f0: 0a0a 2020 2020 7265 7375 6d61 626c 655f  ..    resumable_
+00011200: 7369 7a65 203d 204f 4e45 5f4b 4942 0a20  size = ONE_KIB. 
+00011210: 2020 2062 6f74 6f5f 636f 6e66 6967 5f66     boto_config_f
+00011220: 6f72 5f74 6573 7420 3d20 2827 4753 5574  or_test = ('GSUt
+00011230: 696c 272c 2027 7265 7375 6d61 626c 655f  il', 'resumable_
+00011240: 7468 7265 7368 6f6c 6427 2c0a 2020 2020  threshold',.    
+00011250: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011260: 2020 2020 2020 2020 7374 7228 7265 7375          str(resu
+00011270: 6d61 626c 655f 7369 7a65 2929 0a20 2020  mable_size)).   
+00011280: 2077 6974 6820 5365 7442 6f74 6f43 6f6e   with SetBotoCon
+00011290: 6669 6746 6f72 5465 7374 285b 626f 746f  figForTest([boto
+000112a0: 5f63 6f6e 6669 675f 666f 725f 7465 7374  _config_for_test
+000112b0: 5d29 3a0a 2020 2020 2020 7265 7375 6d61  ]):.      resuma
+000112c0: 626c 655f 6669 6c65 5f6e 616d 6520 3d20  ble_file_name = 
+000112d0: 2772 6573 756d 6162 6c65 5f62 6172 270a  'resumable_bar'.
+000112e0: 2020 2020 2020 7265 7375 6d61 626c 655f        resumable_
+000112f0: 636f 6e74 656e 7473 203d 206f 732e 7572  contents = os.ur
+00011300: 616e 646f 6d28 7265 7375 6d61 626c 655f  andom(resumable_
+00011310: 7369 7a65 290a 2020 2020 2020 7265 7375  size).      resu
+00011320: 6d61 626c 655f 6670 6174 6820 3d20 7365  mable_fpath = se
+00011330: 6c66 2e43 7265 6174 6554 656d 7046 696c  lf.CreateTempFil
+00011340: 6528 6669 6c65 5f6e 616d 653d 7265 7375  e(file_name=resu
+00011350: 6d61 626c 655f 6669 6c65 5f6e 616d 652c  mable_file_name,
+00011360: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00011370: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011380: 2020 2020 2020 2020 2020 2020 2063 6f6e               con
+00011390: 7465 6e74 733d 7265 7375 6d61 626c 655f  tents=resumable_
+000113a0: 636f 6e74 656e 7473 290a 2020 2020 2020  contents).      
+000113b0: 7365 6c66 2e52 756e 4773 5574 696c 280a  self.RunGsUtil(.
+000113c0: 2020 2020 2020 2020 2020 5b27 6370 272c            ['cp',
+000113d0: 2027 2d61 272c 2027 7075 626c 6963 2d72   '-a', 'public-r
+000113e0: 6561 6427 2c20 7265 7375 6d61 626c 655f  ead', resumable_
+000113f0: 6670 6174 682c 0a20 2020 2020 2020 2020  fpath,.         
+00011400: 2020 7375 7269 2862 7563 6b65 7431 5f75    suri(bucket1_u
+00011410: 7269 295d 290a 2020 2020 2020 6e65 775f  ri)]).      new_
+00011420: 7265 7375 6d61 626c 655f 6163 6c5f 6a73  resumable_acl_js
+00011430: 6f6e 203d 2073 656c 662e 5275 6e47 7355  on = self.RunGsU
+00011440: 7469 6c28 0a20 2020 2020 2020 2020 205b  til(.          [
+00011450: 2761 636c 272c 2027 6765 7427 2c20 7375  'acl', 'get', su
+00011460: 7269 2862 7563 6b65 7431 5f75 7269 2c20  ri(bucket1_uri, 
+00011470: 7265 7375 6d61 626c 655f 6669 6c65 5f6e  resumable_file_n
+00011480: 616d 6529 5d2c 0a20 2020 2020 2020 2020  ame)],.         
+00011490: 2072 6574 7572 6e5f 7374 646f 7574 3d54   return_stdout=T
+000114a0: 7275 6529 0a20 2020 2020 2073 656c 662e  rue).      self.
+000114b0: 6173 7365 7274 4571 7561 6c28 7075 626c  assertEqual(publ
+000114c0: 6963 5f72 6561 645f 6163 6c2c 206e 6577  ic_read_acl, new
+000114d0: 5f72 6573 756d 6162 6c65 5f61 636c 5f6a  _resumable_acl_j
+000114e0: 736f 6e29 0a0a 2020 6465 6620 7465 7374  son)..  def test
+000114f0: 5f63 705f 6b65 795f 746f 5f6c 6f63 616c  _cp_key_to_local
+00011500: 5f73 7472 6561 6d28 7365 6c66 293a 0a20  _stream(self):. 
+00011510: 2020 2062 7563 6b65 745f 7572 6920 3d20     bucket_uri = 
+00011520: 7365 6c66 2e43 7265 6174 6542 7563 6b65  self.CreateBucke
+00011530: 7428 290a 2020 2020 636f 6e74 656e 7473  t().    contents
+00011540: 203d 2062 2766 6f6f 270a 2020 2020 6b65   = b'foo'.    ke
+00011550: 795f 7572 6920 3d20 7365 6c66 2e43 7265  y_uri = self.Cre
+00011560: 6174 654f 626a 6563 7428 6275 636b 6574  ateObject(bucket
+00011570: 5f75 7269 3d62 7563 6b65 745f 7572 692c  _uri=bucket_uri,
+00011580: 2063 6f6e 7465 6e74 733d 636f 6e74 656e   contents=conten
+00011590: 7473 290a 2020 2020 7374 646f 7574 203d  ts).    stdout =
+000115a0: 2073 656c 662e 5275 6e47 7355 7469 6c28   self.RunGsUtil(
+000115b0: 5b27 6370 272c 2073 7572 6928 6b65 795f  ['cp', suri(key_
+000115c0: 7572 6929 2c20 272d 275d 2c20 7265 7475  uri), '-'], retu
+000115d0: 726e 5f73 7464 6f75 743d 5472 7565 290a  rn_stdout=True).
+000115e0: 2020 2020 7365 6c66 2e61 7373 6572 7449      self.assertI
+000115f0: 6e28 636f 6e74 656e 7473 2c20 7374 646f  n(contents, stdo
+00011600: 7574 2e65 6e63 6f64 6528 2761 7363 6969  ut.encode('ascii
+00011610: 2729 290a 0a20 2064 6566 2074 6573 745f  '))..  def test_
+00011620: 6370 5f6c 6f63 616c 5f66 696c 655f 746f  cp_local_file_to
+00011630: 5f6c 6f63 616c 5f73 7472 6561 6d28 7365  _local_stream(se
+00011640: 6c66 293a 0a20 2020 2063 6f6e 7465 6e74  lf):.    content
+00011650: 7320 3d20 6227 636f 6e74 656e 7427 0a20  s = b'content'. 
+00011660: 2020 2066 7061 7468 203d 2073 656c 662e     fpath = self.
+00011670: 4372 6561 7465 5465 6d70 4669 6c65 2863  CreateTempFile(c
+00011680: 6f6e 7465 6e74 733d 636f 6e74 656e 7473  ontents=contents
+00011690: 290a 2020 2020 7374 646f 7574 203d 2073  ).    stdout = s
+000116a0: 656c 662e 5275 6e47 7355 7469 6c28 5b27  elf.RunGsUtil(['
+000116b0: 6370 272c 2066 7061 7468 2c20 272d 275d  cp', fpath, '-']
+000116c0: 2c20 7265 7475 726e 5f73 7464 6f75 743d  , return_stdout=
+000116d0: 5472 7565 290a 2020 2020 7365 6c66 2e61  True).    self.a
+000116e0: 7373 6572 7449 6e28 636f 6e74 656e 7473  ssertIn(contents
+000116f0: 2c20 7374 646f 7574 2e65 6e63 6f64 6528  , stdout.encode(
+00011700: 5554 4638 2929 0a0a 2020 4053 6571 7565  UTF8))..  @Seque
+00011710: 6e74 6961 6c41 6e64 5061 7261 6c6c 656c  ntialAndParallel
+00011720: 5472 616e 7366 6572 0a20 2064 6566 2074  Transfer.  def t
+00011730: 6573 745f 6370 5f7a 6572 6f5f 6279 7465  est_cp_zero_byte
+00011740: 5f66 696c 6528 7365 6c66 293a 0a20 2020  _file(self):.   
+00011750: 2064 7374 5f62 7563 6b65 745f 7572 6920   dst_bucket_uri 
+00011760: 3d20 7365 6c66 2e43 7265 6174 6542 7563  = self.CreateBuc
+00011770: 6b65 7428 290a 2020 2020 7372 635f 6469  ket().    src_di
+00011780: 7220 3d20 7365 6c66 2e43 7265 6174 6554  r = self.CreateT
+00011790: 656d 7044 6972 2829 0a20 2020 2066 7061  empDir().    fpa
+000117a0: 7468 203d 206f 732e 7061 7468 2e6a 6f69  th = os.path.joi
+000117b0: 6e28 7372 635f 6469 722c 2027 7a65 726f  n(src_dir, 'zero
+000117c0: 5f62 7974 6527 290a 2020 2020 7769 7468  _byte').    with
+000117d0: 206f 7065 6e28 6670 6174 682c 2027 7727   open(fpath, 'w'
+000117e0: 2920 6173 2075 6e75 7365 645f 6f75 745f  ) as unused_out_
+000117f0: 6669 6c65 3a0a 2020 2020 2020 7061 7373  file:.      pass
+00011800: 2020 2320 5772 6974 6520 6120 7a65 726f    # Write a zero
+00011810: 2062 7974 6520 6669 6c65 0a20 2020 2073   byte file.    s
+00011820: 656c 662e 5275 6e47 7355 7469 6c28 5b27  elf.RunGsUtil(['
+00011830: 6370 272c 2066 7061 7468 2c20 7375 7269  cp', fpath, suri
+00011840: 2864 7374 5f62 7563 6b65 745f 7572 6929  (dst_bucket_uri)
+00011850: 5d29 0a0a 2020 2020 4052 6574 7279 2841  ])..    @Retry(A
+00011860: 7373 6572 7469 6f6e 4572 726f 722c 2074  ssertionError, t
+00011870: 7269 6573 3d33 2c20 7469 6d65 6f75 745f  ries=3, timeout_
+00011880: 7365 6373 3d31 290a 2020 2020 6465 6620  secs=1).    def 
+00011890: 5f43 6865 636b 3128 293a 0a20 2020 2020  _Check1():.     
+000118a0: 2073 7464 6f75 7420 3d20 7365 6c66 2e52   stdout = self.R
+000118b0: 756e 4773 5574 696c 285b 276c 7327 2c20  unGsUtil(['ls', 
+000118c0: 7375 7269 2864 7374 5f62 7563 6b65 745f  suri(dst_bucket_
+000118d0: 7572 6929 5d2c 2072 6574 7572 6e5f 7374  uri)], return_st
+000118e0: 646f 7574 3d54 7275 6529 0a20 2020 2020  dout=True).     
+000118f0: 2073 656c 662e 6173 7365 7274 496e 286f   self.assertIn(o
+00011900: 732e 7061 7468 2e62 6173 656e 616d 6528  s.path.basename(
+00011910: 6670 6174 6829 2c20 7374 646f 7574 290a  fpath), stdout).
+00011920: 0a20 2020 205f 4368 6563 6b31 2829 0a0a  .    _Check1()..
+00011930: 2020 2020 646f 776e 6c6f 6164 5f70 6174      download_pat
+00011940: 6820 3d20 6f73 2e70 6174 682e 6a6f 696e  h = os.path.join
+00011950: 2873 7263 5f64 6972 2c20 277a 6572 6f5f  (src_dir, 'zero_
+00011960: 6279 7465 5f64 6f77 6e6c 6f61 6427 290a  byte_download').
+00011970: 2020 2020 7365 6c66 2e52 756e 4773 5574      self.RunGsUt
+00011980: 696c 285b 2763 7027 2c20 7375 7269 2864  il(['cp', suri(d
+00011990: 7374 5f62 7563 6b65 745f 7572 692c 2027  st_bucket_uri, '
+000119a0: 7a65 726f 5f62 7974 6527 292c 2064 6f77  zero_byte'), dow
+000119b0: 6e6c 6f61 645f 7061 7468 5d29 0a20 2020  nload_path]).   
+000119c0: 2073 656c 662e 6173 7365 7274 5472 7565   self.assertTrue
+000119d0: 286f 732e 7374 6174 2864 6f77 6e6c 6f61  (os.stat(downloa
+000119e0: 645f 7061 7468 2929 0a0a 2020 6465 6620  d_path))..  def 
+000119f0: 7465 7374 5f63 6f70 795f 6275 636b 6574  test_copy_bucket
+00011a00: 5f74 6f5f 6275 636b 6574 2873 656c 6629  _to_bucket(self)
+00011a10: 3a0a 2020 2020 2222 2254 6573 7473 2072  :.    """Tests r
+00011a20: 6563 7572 7369 7665 6c79 2063 6f70 7969  ecursively copyi
+00011a30: 6e67 2066 726f 6d20 6275 636b 6574 2074  ng from bucket t
+00011a40: 6f20 6275 636b 6574 2e0a 0a20 2020 2054  o bucket...    T
+00011a50: 6869 7320 7368 6f75 6c64 2070 726f 6475  his should produ
+00011a60: 6365 2069 6465 6e74 6963 616c 6c79 206e  ce identically n
+00011a70: 616d 6564 206f 626a 6563 7473 2028 616e  amed objects (an
+00011a80: 6420 6e6f 742c 2069 6e20 7061 7274 6963  d not, in partic
+00011a90: 756c 6172 2c0a 2020 2020 6465 7374 696e  ular,.    destin
+00011aa0: 6174 696f 6e20 6f62 6a65 6374 7320 6e61  ation objects na
+00011ab0: 6d65 6420 6279 2074 6865 2076 6572 7369  med by the versi
+00011ac0: 6f6e 2d73 7065 6369 6669 6320 5552 4920  on-specific URI 
+00011ad0: 6672 6f6d 2073 6f75 7263 6520 6f62 6a65  from source obje
+00011ae0: 6374 7329 2e0a 2020 2020 2222 220a 2020  cts)..    """.  
+00011af0: 2020 7372 635f 6275 636b 6574 5f75 7269    src_bucket_uri
+00011b00: 203d 2073 656c 662e 4372 6561 7465 5665   = self.CreateVe
+00011b10: 7273 696f 6e65 6442 7563 6b65 7428 290a  rsionedBucket().
+00011b20: 2020 2020 6473 745f 6275 636b 6574 5f75      dst_bucket_u
+00011b30: 7269 203d 2073 656c 662e 4372 6561 7465  ri = self.Create
+00011b40: 5665 7273 696f 6e65 6442 7563 6b65 7428  VersionedBucket(
+00011b50: 290a 2020 2020 7365 6c66 2e43 7265 6174  ).    self.Creat
+00011b60: 654f 626a 6563 7428 6275 636b 6574 5f75  eObject(bucket_u
+00011b70: 7269 3d73 7263 5f62 7563 6b65 745f 7572  ri=src_bucket_ur
+00011b80: 692c 0a20 2020 2020 2020 2020 2020 2020  i,.             
+00011b90: 2020 2020 2020 2020 206f 626a 6563 745f           object_
+00011ba0: 6e61 6d65 3d27 6f62 6a30 272c 0a20 2020  name='obj0',.   
+00011bb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011bc0: 2020 2063 6f6e 7465 6e74 733d 6227 6162     contents=b'ab
+00011bd0: 6327 290a 2020 2020 7365 6c66 2e43 7265  c').    self.Cre
+00011be0: 6174 654f 626a 6563 7428 6275 636b 6574  ateObject(bucket
+00011bf0: 5f75 7269 3d73 7263 5f62 7563 6b65 745f  _uri=src_bucket_
+00011c00: 7572 692c 0a20 2020 2020 2020 2020 2020  uri,.           
+00011c10: 2020 2020 2020 2020 2020 206f 626a 6563             objec
+00011c20: 745f 6e61 6d65 3d27 6f62 6a31 272c 0a20  t_name='obj1',. 
+00011c30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011c40: 2020 2020 2063 6f6e 7465 6e74 733d 6227       contents=b'
+00011c50: 6465 6627 290a 0a20 2020 2023 2055 7365  def')..    # Use
+00011c60: 2040 5265 7472 7920 6173 2068 6564 6765   @Retry as hedge
+00011c70: 2061 6761 696e 7374 2062 7563 6b65 7420   against bucket 
+00011c80: 6c69 7374 696e 6720 6576 656e 7475 616c  listing eventual
+00011c90: 2063 6f6e 7369 7374 656e 6379 2e0a 2020   consistency..  
+00011ca0: 2020 4052 6574 7279 2841 7373 6572 7469    @Retry(Asserti
+00011cb0: 6f6e 4572 726f 722c 2074 7269 6573 3d33  onError, tries=3
+00011cc0: 2c20 7469 6d65 6f75 745f 7365 6373 3d31  , timeout_secs=1
+00011cd0: 290a 2020 2020 6465 6620 5f43 6f70 7941  ).    def _CopyA
+00011ce0: 6e64 4368 6563 6b28 293a 0a20 2020 2020  ndCheck():.     
+00011cf0: 2073 656c 662e 5275 6e47 7355 7469 6c28   self.RunGsUtil(
+00011d00: 5b27 6370 272c 2027 2d52 272c 2073 7572  ['cp', '-R', sur
+00011d10: 6928 7372 635f 6275 636b 6574 5f75 7269  i(src_bucket_uri
+00011d20: 292c 2073 7572 6928 6473 745f 6275 636b  ), suri(dst_buck
+00011d30: 6574 5f75 7269 295d 290a 2020 2020 2020  et_uri)]).      
+00011d40: 7374 646f 7574 203d 2073 656c 662e 5275  stdout = self.Ru
+00011d50: 6e47 7355 7469 6c28 5b27 6c73 272c 2027  nGsUtil(['ls', '
+00011d60: 2d52 272c 2064 7374 5f62 7563 6b65 745f  -R', dst_bucket_
+00011d70: 7572 692e 7572 695d 2c0a 2020 2020 2020  uri.uri],.      
+00011d80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011d90: 2020 2020 2020 2020 7265 7475 726e 5f73          return_s
+00011da0: 7464 6f75 743d 5472 7565 290a 2020 2020  tdout=True).    
+00011db0: 2020 7365 6c66 2e61 7373 6572 7449 6e28    self.assertIn(
+00011dc0: 0a20 2020 2020 2020 2020 2027 2573 2573  .          '%s%s
+00011dd0: 2f6f 626a 305c 6e27 2025 2028 6473 745f  /obj0\n' % (dst_
+00011de0: 6275 636b 6574 5f75 7269 2c20 7372 635f  bucket_uri, src_
+00011df0: 6275 636b 6574 5f75 7269 2e62 7563 6b65  bucket_uri.bucke
+00011e00: 745f 6e61 6d65 292c 2073 7464 6f75 7429  t_name), stdout)
+00011e10: 0a20 2020 2020 2073 656c 662e 6173 7365  .      self.asse
+00011e20: 7274 496e 280a 2020 2020 2020 2020 2020  rtIn(.          
+00011e30: 2725 7325 732f 6f62 6a31 5c6e 2720 2520  '%s%s/obj1\n' % 
+00011e40: 2864 7374 5f62 7563 6b65 745f 7572 692c  (dst_bucket_uri,
+00011e50: 2073 7263 5f62 7563 6b65 745f 7572 692e   src_bucket_uri.
+00011e60: 6275 636b 6574 5f6e 616d 6529 2c20 7374  bucket_name), st
+00011e70: 646f 7574 290a 0a20 2020 205f 436f 7079  dout)..    _Copy
+00011e80: 416e 6443 6865 636b 2829 0a0a 2020 6465  AndCheck()..  de
+00011e90: 6620 7465 7374 5f63 6f70 795f 6475 706c  f test_copy_dupl
+00011ea0: 6963 6174 655f 6e65 7374 6564 5f6f 626a  icate_nested_obj
+00011eb0: 6563 745f 6e61 6d65 735f 746f 5f6e 6577  ect_names_to_new
+00011ec0: 5f63 6c6f 7564 5f64 6972 2873 656c 6629  _cloud_dir(self)
+00011ed0: 3a0a 2020 2020 2222 2254 6573 7473 2063  :.    """Tests c
+00011ee0: 6f70 7969 6e67 2066 726f 6d20 6275 636b  opying from buck
+00011ef0: 6574 2074 6f20 7361 6d65 2062 7563 6b65  et to same bucke
+00011f00: 7420 7072 6573 6572 7665 7320 6669 6c65  t preserves file
+00011f10: 2073 7472 7563 7475 7265 2e22 2222 0a20   structure.""". 
+00011f20: 2020 2062 7563 6b65 745f 7572 6920 3d20     bucket_uri = 
+00011f30: 7365 6c66 2e43 7265 6174 6542 7563 6b65  self.CreateBucke
+00011f40: 7428 290a 2020 2020 7365 6c66 2e43 7265  t().    self.Cre
+00011f50: 6174 654f 626a 6563 7428 6275 636b 6574  ateObject(bucket
+00011f60: 5f75 7269 3d62 7563 6b65 745f 7572 692c  _uri=bucket_uri,
+00011f70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00011f80: 2020 2020 2020 206f 626a 6563 745f 6e61         object_na
+00011f90: 6d65 3d27 6469 7231 2f66 696c 652e 7478  me='dir1/file.tx
+00011fa0: 7427 2c0a 2020 2020 2020 2020 2020 2020  t',.            
+00011fb0: 2020 2020 2020 2020 2020 636f 6e74 656e            conten
+00011fc0: 7473 3d62 2764 6174 6127 290a 2020 2020  ts=b'data').    
+00011fd0: 7365 6c66 2e43 7265 6174 654f 626a 6563  self.CreateObjec
+00011fe0: 7428 6275 636b 6574 5f75 7269 3d62 7563  t(bucket_uri=buc
+00011ff0: 6b65 745f 7572 692c 0a20 2020 2020 2020  ket_uri,.       
+00012000: 2020 2020 2020 2020 2020 2020 2020 206f                 o
+00012010: 626a 6563 745f 6e61 6d65 3d27 6469 7232  bject_name='dir2
+00012020: 2f66 696c 652e 7478 7427 2c0a 2020 2020  /file.txt',.    
+00012030: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012040: 2020 636f 6e74 656e 7473 3d62 2764 6174    contents=b'dat
+00012050: 6127 290a 0a20 2020 2023 2055 7365 2040  a')..    # Use @
+00012060: 5265 7472 7920 6173 2068 6564 6765 2061  Retry as hedge a
+00012070: 6761 696e 7374 2062 7563 6b65 7420 6c69  gainst bucket li
+00012080: 7374 696e 6720 6576 656e 7475 616c 2063  sting eventual c
+00012090: 6f6e 7369 7374 656e 6379 2e0a 2020 2020  onsistency..    
+000120a0: 4052 6574 7279 2841 7373 6572 7469 6f6e  @Retry(Assertion
+000120b0: 4572 726f 722c 2074 7269 6573 3d33 2c20  Error, tries=3, 
+000120c0: 7469 6d65 6f75 745f 7365 6373 3d31 290a  timeout_secs=1).
+000120d0: 2020 2020 6465 6620 5f43 6f70 7941 6e64      def _CopyAnd
+000120e0: 4368 6563 6b28 293a 0a20 2020 2020 2073  Check():.      s
+000120f0: 656c 662e 5275 6e47 7355 7469 6c28 0a20  elf.RunGsUtil(. 
+00012100: 2020 2020 2020 2020 205b 2763 7027 2c20           ['cp', 
+00012110: 272d 5227 2c0a 2020 2020 2020 2020 2020  '-R',.          
+00012120: 2073 7572 6928 6275 636b 6574 5f75 7269   suri(bucket_uri
+00012130: 2920 2b20 272f 2a27 2c0a 2020 2020 2020  ) + '/*',.      
+00012140: 2020 2020 2073 7572 6928 6275 636b 6574       suri(bucket
+00012150: 5f75 7269 2920 2b20 272f 6473 7427 5d29  _uri) + '/dst'])
+00012160: 0a20 2020 2020 2073 7464 6f75 7420 3d20  .      stdout = 
+00012170: 7365 6c66 2e52 756e 4773 5574 696c 285b  self.RunGsUtil([
+00012180: 276c 7327 2c20 272d 5227 2c20 6275 636b  'ls', '-R', buck
+00012190: 6574 5f75 7269 2e75 7269 5d2c 2072 6574  et_uri.uri], ret
+000121a0: 7572 6e5f 7374 646f 7574 3d54 7275 6529  urn_stdout=True)
+000121b0: 0a20 2020 2020 2073 656c 662e 6173 7365  .      self.asse
+000121c0: 7274 496e 2873 7572 6928 6275 636b 6574  rtIn(suri(bucket
+000121d0: 5f75 7269 2920 2b20 272f 6473 742f 6469  _uri) + '/dst/di
+000121e0: 7231 2f66 696c 652e 7478 7427 2c20 7374  r1/file.txt', st
+000121f0: 646f 7574 290a 2020 2020 2020 7365 6c66  dout).      self
+00012200: 2e61 7373 6572 7449 6e28 7375 7269 2862  .assertIn(suri(b
+00012210: 7563 6b65 745f 7572 6929 202b 2027 2f64  ucket_uri) + '/d
+00012220: 7374 2f64 6972 322f 6669 6c65 2e74 7874  st/dir2/file.txt
+00012230: 272c 2073 7464 6f75 7429 0a0a 2020 2020  ', stdout)..    
+00012240: 5f43 6f70 7941 6e64 4368 6563 6b28 290a  _CopyAndCheck().
+00012250: 0a20 2064 6566 2074 6573 745f 636f 7079  .  def test_copy
+00012260: 5f64 7570 6c69 6361 7465 5f6e 6573 7465  _duplicate_neste
+00012270: 645f 6f62 6a65 6374 5f6e 616d 6573 5f74  d_object_names_t
+00012280: 6f5f 6578 6973 7469 6e67 5f63 6c6f 7564  o_existing_cloud
+00012290: 5f64 6972 2873 656c 6629 3a0a 2020 2020  _dir(self):.    
+000122a0: 2222 2254 6573 7473 2063 6f70 7969 6e67  """Tests copying
+000122b0: 2066 726f 6d20 6275 636b 6574 2074 6f20   from bucket to 
+000122c0: 7361 6d65 2062 7563 6b65 7420 7072 6573  same bucket pres
+000122d0: 6572 7665 7320 6669 6c65 2073 7472 7563  erves file struc
+000122e0: 7475 7265 2e22 2222 0a20 2020 2062 7563  ture.""".    buc
+000122f0: 6b65 745f 7572 6920 3d20 7365 6c66 2e43  ket_uri = self.C
+00012300: 7265 6174 6542 7563 6b65 7428 290a 2020  reateBucket().  
+00012310: 2020 7365 6c66 2e43 7265 6174 654f 626a    self.CreateObj
+00012320: 6563 7428 6275 636b 6574 5f75 7269 3d62  ect(bucket_uri=b
+00012330: 7563 6b65 745f 7572 692c 0a20 2020 2020  ucket_uri,.     
+00012340: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012350: 206f 626a 6563 745f 6e61 6d65 3d27 6469   object_name='di
+00012360: 7231 2f66 696c 652e 7478 7427 2c0a 2020  r1/file.txt',.  
+00012370: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012380: 2020 2020 636f 6e74 656e 7473 3d62 2764      contents=b'd
+00012390: 6174 6127 290a 2020 2020 7365 6c66 2e43  ata').    self.C
+000123a0: 7265 6174 654f 626a 6563 7428 6275 636b  reateObject(buck
+000123b0: 6574 5f75 7269 3d62 7563 6b65 745f 7572  et_uri=bucket_ur
+000123c0: 692c 0a20 2020 2020 2020 2020 2020 2020  i,.             
+000123d0: 2020 2020 2020 2020 206f 626a 6563 745f           object_
+000123e0: 6e61 6d65 3d27 6469 7232 2f66 696c 652e  name='dir2/file.
+000123f0: 7478 7427 2c0a 2020 2020 2020 2020 2020  txt',.          
+00012400: 2020 2020 2020 2020 2020 2020 636f 6e74              cont
+00012410: 656e 7473 3d62 2764 6174 6127 290a 2020  ents=b'data').  
+00012420: 2020 7365 6c66 2e43 7265 6174 654f 626a    self.CreateObj
+00012430: 6563 7428 6275 636b 6574 5f75 7269 3d62  ect(bucket_uri=b
+00012440: 7563 6b65 745f 7572 692c 0a20 2020 2020  ucket_uri,.     
+00012450: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012460: 206f 626a 6563 745f 6e61 6d65 3d27 6473   object_name='ds
+00012470: 742f 6578 6973 7469 6e67 5f66 696c 652e  t/existing_file.
+00012480: 7478 7427 2c0a 2020 2020 2020 2020 2020  txt',.          
+00012490: 2020 2020 2020 2020 2020 2020 636f 6e74              cont
+000124a0: 656e 7473 3d62 2764 6174 6127 290a 0a20  ents=b'data').. 
+000124b0: 2020 2023 2055 7365 2040 5265 7472 7920     # Use @Retry 
+000124c0: 6173 2068 6564 6765 2061 6761 696e 7374  as hedge against
+000124d0: 2062 7563 6b65 7420 6c69 7374 696e 6720   bucket listing 
+000124e0: 6576 656e 7475 616c 2063 6f6e 7369 7374  eventual consist
+000124f0: 656e 6379 2e0a 2020 2020 4052 6574 7279  ency..    @Retry
+00012500: 2841 7373 6572 7469 6f6e 4572 726f 722c  (AssertionError,
+00012510: 2074 7269 6573 3d33 2c20 7469 6d65 6f75   tries=3, timeou
+00012520: 745f 7365 6373 3d31 290a 2020 2020 6465  t_secs=1).    de
+00012530: 6620 5f43 6f70 7941 6e64 4368 6563 6b28  f _CopyAndCheck(
+00012540: 293a 0a20 2020 2020 2073 656c 662e 5275  ):.      self.Ru
+00012550: 6e47 7355 7469 6c28 0a20 2020 2020 2020  nGsUtil(.       
+00012560: 2020 205b 2763 7027 2c20 272d 5227 2c0a     ['cp', '-R',.
+00012570: 2020 2020 2020 2020 2020 2073 7572 6928             suri(
+00012580: 6275 636b 6574 5f75 7269 2920 2b20 272f  bucket_uri) + '/
+00012590: 2a27 2c0a 2020 2020 2020 2020 2020 2073  *',.           s
+000125a0: 7572 6928 6275 636b 6574 5f75 7269 2920  uri(bucket_uri) 
+000125b0: 2b20 272f 6473 7427 5d29 0a20 2020 2020  + '/dst']).     
+000125c0: 2073 7464 6f75 7420 3d20 7365 6c66 2e52   stdout = self.R
+000125d0: 756e 4773 5574 696c 285b 276c 7327 2c20  unGsUtil(['ls', 
+000125e0: 272d 5227 2c20 6275 636b 6574 5f75 7269  '-R', bucket_uri
+000125f0: 2e75 7269 5d2c 2072 6574 7572 6e5f 7374  .uri], return_st
+00012600: 646f 7574 3d54 7275 6529 0a20 2020 2020  dout=True).     
+00012610: 2073 656c 662e 6173 7365 7274 496e 2873   self.assertIn(s
+00012620: 7572 6928 6275 636b 6574 5f75 7269 2920  uri(bucket_uri) 
+00012630: 2b20 272f 6473 742f 6469 7231 2f66 696c  + '/dst/dir1/fil
+00012640: 652e 7478 7427 2c20 7374 646f 7574 290a  e.txt', stdout).
+00012650: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+00012660: 7449 6e28 7375 7269 2862 7563 6b65 745f  tIn(suri(bucket_
+00012670: 7572 6929 202b 2027 2f64 7374 2f64 6972  uri) + '/dst/dir
+00012680: 322f 6669 6c65 2e74 7874 272c 2073 7464  2/file.txt', std
+00012690: 6f75 7429 0a20 2020 2020 2073 656c 662e  out).      self.
+000126a0: 6173 7365 7274 496e 2873 7572 6928 6275  assertIn(suri(bu
+000126b0: 636b 6574 5f75 7269 2920 2b20 272f 6473  cket_uri) + '/ds
+000126c0: 742f 6578 6973 7469 6e67 5f66 696c 652e  t/existing_file.
+000126d0: 7478 7427 2c20 7374 646f 7574 290a 0a20  txt', stdout).. 
+000126e0: 2020 205f 436f 7079 416e 6443 6865 636b     _CopyAndCheck
+000126f0: 2829 0a0a 2020 4053 6b69 7046 6f72 4753  ()..  @SkipForGS
+00012700: 2827 4f6e 6c79 2073 3320 5634 2073 6967  ('Only s3 V4 sig
+00012710: 6e61 7475 7265 7320 6572 726f 7220 6f6e  natures error on
+00012720: 206c 6f63 6174 696f 6e20 6d69 736d 6174   location mismat
+00012730: 6368 6573 2e27 290a 2020 6465 6620 7465  ches.').  def te
+00012740: 7374 5f63 6f70 795f 6275 636b 6574 5f74  st_copy_bucket_t
+00012750: 6f5f 6275 636b 6574 5f77 6974 685f 6c6f  o_bucket_with_lo
+00012760: 6361 7469 6f6e 5f72 6564 6972 6563 7428  cation_redirect(
+00012770: 7365 6c66 293a 0a20 2020 2023 2063 7020  self):.    # cp 
+00012780: 7573 6573 2061 2073 656e 6465 7220 6675  uses a sender fu
+00012790: 6e63 7469 6f6e 2074 6861 7420 7261 6973  nction that rais
+000127a0: 6573 2061 6e20 6578 6365 7074 696f 6e20  es an exception 
+000127b0: 6f6e 206c 6f63 6174 696f 6e20 6d69 736d  on location mism
+000127c0: 6174 6368 6573 2c0a 2020 2020 2320 696e  atches,.    # in
+000127d0: 7374 6561 6420 6f66 2072 6574 7572 6e69  stead of returni
+000127e0: 6e67 2061 2072 6573 706f 6e73 652e 2054  ng a response. T
+000127f0: 6869 7320 696e 7465 6772 6174 696f 6e20  his integration 
+00012800: 7465 7374 2065 6e73 7572 6573 2072 6574  test ensures ret
+00012810: 7269 6573 0a20 2020 2023 2066 726f 6d20  ries.    # from 
+00012820: 6578 6365 7074 696f 6e73 2077 6f72 6b20  exceptions work 
+00012830: 636f 7272 6563 746c 792e 0a0a 2020 2020  correctly...    
+00012840: 7372 635f 6275 636b 6574 5f72 6567 696f  src_bucket_regio
+00012850: 6e20 3d20 2761 702d 6561 7374 2d31 270a  n = 'ap-east-1'.
+00012860: 2020 2020 6465 7374 5f62 7563 6b65 745f      dest_bucket_
+00012870: 7265 6769 6f6e 203d 2027 7573 2d65 6173  region = 'us-eas
+00012880: 742d 3227 0a20 2020 2073 7263 5f62 7563  t-2'.    src_buc
+00012890: 6b65 745f 686f 7374 203d 2027 7333 2e25  ket_host = 's3.%
+000128a0: 732e 616d 617a 6f6e 6177 732e 636f 6d27  s.amazonaws.com'
+000128b0: 2025 2073 7263 5f62 7563 6b65 745f 7265   % src_bucket_re
+000128c0: 6769 6f6e 0a20 2020 2064 6573 745f 6275  gion.    dest_bu
+000128d0: 636b 6574 5f68 6f73 7420 3d20 2773 332e  cket_host = 's3.
+000128e0: 2573 2e61 6d61 7a6f 6e61 7773 2e63 6f6d  %s.amazonaws.com
+000128f0: 2720 2520 6465 7374 5f62 7563 6b65 745f  ' % dest_bucket_
+00012900: 7265 6769 6f6e 0a20 2020 2063 6c69 656e  region.    clien
+00012910: 745f 686f 7374 203d 2027 7333 2e65 752d  t_host = 's3.eu-
+00012920: 7765 7374 2d31 2e61 6d61 7a6f 6e61 7773  west-1.amazonaws
+00012930: 2e63 6f6d 270a 0a20 2020 2077 6974 6820  .com'..    with 
+00012940: 5365 7442 6f74 6f43 6f6e 6669 6746 6f72  SetBotoConfigFor
+00012950: 5465 7374 285b 2827 7333 272c 2027 686f  Test([('s3', 'ho
+00012960: 7374 272c 2073 7263 5f62 7563 6b65 745f  st', src_bucket_
+00012970: 686f 7374 295d 293a 0a20 2020 2020 2073  host)]):.      s
+00012980: 7263 5f62 7563 6b65 745f 7572 6920 3d20  rc_bucket_uri = 
+00012990: 7365 6c66 2e43 7265 6174 6542 7563 6b65  self.CreateBucke
+000129a0: 7428 6c6f 6361 7469 6f6e 3d73 7263 5f62  t(location=src_b
+000129b0: 7563 6b65 745f 7265 6769 6f6e 290a 2020  ucket_region).  
+000129c0: 2020 2020 7365 6c66 2e43 7265 6174 654f      self.CreateO
+000129d0: 626a 6563 7428 6275 636b 6574 5f75 7269  bject(bucket_uri
+000129e0: 3d73 7263 5f62 7563 6b65 745f 7572 692c  =src_bucket_uri,
+000129f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00012a00: 2020 2020 2020 2020 206f 626a 6563 745f           object_
+00012a10: 6e61 6d65 3d27 6f62 6a30 272c 0a20 2020  name='obj0',.   
+00012a20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012a30: 2020 2020 2063 6f6e 7465 6e74 733d 6227       contents=b'
+00012a40: 6162 6327 290a 2020 2020 2020 7365 6c66  abc').      self
+00012a50: 2e43 7265 6174 654f 626a 6563 7428 6275  .CreateObject(bu
+00012a60: 636b 6574 5f75 7269 3d73 7263 5f62 7563  cket_uri=src_buc
+00012a70: 6b65 745f 7572 692c 0a20 2020 2020 2020  ket_uri,.       
+00012a80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012a90: 206f 626a 6563 745f 6e61 6d65 3d27 6f62   object_name='ob
+00012aa0: 6a31 272c 0a20 2020 2020 2020 2020 2020  j1',.           
+00012ab0: 2020 2020 2020 2020 2020 2020 2063 6f6e               con
+00012ac0: 7465 6e74 733d 6227 6465 6627 290a 0a20  tents=b'def').. 
+00012ad0: 2020 2077 6974 6820 5365 7442 6f74 6f43     with SetBotoC
+00012ae0: 6f6e 6669 6746 6f72 5465 7374 285b 2827  onfigForTest([('
+00012af0: 7333 272c 2027 686f 7374 272c 2064 6573  s3', 'host', des
+00012b00: 745f 6275 636b 6574 5f68 6f73 7429 5d29  t_bucket_host)])
+00012b10: 3a0a 2020 2020 2020 6473 745f 6275 636b  :.      dst_buck
+00012b20: 6574 5f75 7269 203d 2073 656c 662e 4372  et_uri = self.Cr
+00012b30: 6561 7465 4275 636b 6574 286c 6f63 6174  eateBucket(locat
+00012b40: 696f 6e3d 6465 7374 5f62 7563 6b65 745f  ion=dest_bucket_
+00012b50: 7265 6769 6f6e 290a 0a20 2020 2023 2055  region)..    # U
+00012b60: 7365 2040 5265 7472 7920 6173 2068 6564  se @Retry as hed
+00012b70: 6765 2061 6761 696e 7374 2062 7563 6b65  ge against bucke
+00012b80: 7420 6c69 7374 696e 6720 6576 656e 7475  t listing eventu
+00012b90: 616c 2063 6f6e 7369 7374 656e 6379 2e0a  al consistency..
+00012ba0: 2020 2020 4052 6574 7279 2841 7373 6572      @Retry(Asser
+00012bb0: 7469 6f6e 4572 726f 722c 2074 7269 6573  tionError, tries
+00012bc0: 3d33 2c20 7469 6d65 6f75 745f 7365 6373  =3, timeout_secs
+00012bd0: 3d31 290a 2020 2020 6465 6620 5f43 6f70  =1).    def _Cop
+00012be0: 7941 6e64 4368 6563 6b28 293a 0a20 2020  yAndCheck():.   
+00012bf0: 2020 2073 656c 662e 5275 6e47 7355 7469     self.RunGsUti
+00012c00: 6c28 5b27 6370 272c 2027 2d52 272c 2073  l(['cp', '-R', s
+00012c10: 7572 6928 7372 635f 6275 636b 6574 5f75  uri(src_bucket_u
+00012c20: 7269 292c 2073 7572 6928 6473 745f 6275  ri), suri(dst_bu
+00012c30: 636b 6574 5f75 7269 295d 290a 2020 2020  cket_uri)]).    
+00012c40: 2020 7374 646f 7574 203d 2073 656c 662e    stdout = self.
+00012c50: 5275 6e47 7355 7469 6c28 5b27 6c73 272c  RunGsUtil(['ls',
+00012c60: 2027 2d52 272c 2064 7374 5f62 7563 6b65   '-R', dst_bucke
+00012c70: 745f 7572 692e 7572 695d 2c0a 2020 2020  t_uri.uri],.    
+00012c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012c90: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00012ca0: 5f73 7464 6f75 743d 5472 7565 290a 2020  _stdout=True).  
+00012cb0: 2020 2020 7365 6c66 2e61 7373 6572 7449      self.assertI
+00012cc0: 6e28 0a20 2020 2020 2020 2020 2027 2573  n(.          '%s
+00012cd0: 2573 2f6f 626a 305c 6e27 2025 2028 6473  %s/obj0\n' % (ds
+00012ce0: 745f 6275 636b 6574 5f75 7269 2c20 7372  t_bucket_uri, sr
+00012cf0: 635f 6275 636b 6574 5f75 7269 2e62 7563  c_bucket_uri.buc
+00012d00: 6b65 745f 6e61 6d65 292c 2073 7464 6f75  ket_name), stdou
+00012d10: 7429 0a20 2020 2020 2073 656c 662e 6173  t).      self.as
+00012d20: 7365 7274 496e 280a 2020 2020 2020 2020  sertIn(.        
+00012d30: 2020 2725 7325 732f 6f62 6a31 5c6e 2720    '%s%s/obj1\n' 
+00012d40: 2520 2864 7374 5f62 7563 6b65 745f 7572  % (dst_bucket_ur
+00012d50: 692c 2073 7263 5f62 7563 6b65 745f 7572  i, src_bucket_ur
+00012d60: 692e 6275 636b 6574 5f6e 616d 6529 2c20  i.bucket_name), 
+00012d70: 7374 646f 7574 290a 0a20 2020 2077 6974  stdout)..    wit
+00012d80: 6820 5365 7442 6f74 6f43 6f6e 6669 6746  h SetBotoConfigF
+00012d90: 6f72 5465 7374 285b 2827 7333 272c 2027  orTest([('s3', '
+00012da0: 686f 7374 272c 2063 6c69 656e 745f 686f  host', client_ho
+00012db0: 7374 295d 293a 0a20 2020 2020 205f 436f  st)]):.      _Co
+00012dc0: 7079 416e 6443 6865 636b 2829 0a0a 2020  pyAndCheck()..  
+00012dd0: 6465 6620 7465 7374 5f63 6f70 795f 6275  def test_copy_bu
+00012de0: 636b 6574 5f74 6f5f 6469 7228 7365 6c66  cket_to_dir(self
+00012df0: 293a 0a20 2020 2022 2222 5465 7374 7320  ):.    """Tests 
+00012e00: 7265 6375 7273 6976 656c 7920 636f 7079  recursively copy
+00012e10: 696e 6720 6672 6f6d 2062 7563 6b65 7420  ing from bucket 
+00012e20: 746f 2061 2064 6972 6563 746f 7279 2e0a  to a directory..
+00012e30: 0a20 2020 2054 6869 7320 7368 6f75 6c64  .    This should
+00012e40: 2070 726f 6475 6365 2069 6465 6e74 6963   produce identic
+00012e50: 616c 6c79 206e 616d 6564 206f 626a 6563  ally named objec
+00012e60: 7473 2028 616e 6420 6e6f 742c 2069 6e20  ts (and not, in 
+00012e70: 7061 7274 6963 756c 6172 2c0a 2020 2020  particular,.    
+00012e80: 6465 7374 696e 6174 696f 6e20 6f62 6a65  destination obje
+00012e90: 6374 7320 6e61 6d65 6420 6279 2074 6865  cts named by the
+00012ea0: 2076 6572 7369 6f6e 2d20 7370 6563 6966   version- specif
+00012eb0: 6963 2055 5249 2066 726f 6d20 736f 7572  ic URI from sour
+00012ec0: 6365 206f 626a 6563 7473 292e 0a20 2020  ce objects)..   
+00012ed0: 2022 2222 0a20 2020 2073 7263 5f62 7563   """.    src_buc
+00012ee0: 6b65 745f 7572 6920 3d20 7365 6c66 2e43  ket_uri = self.C
+00012ef0: 7265 6174 6542 7563 6b65 7428 290a 2020  reateBucket().  
+00012f00: 2020 6473 745f 6469 7220 3d20 7365 6c66    dst_dir = self
+00012f10: 2e43 7265 6174 6554 656d 7044 6972 2829  .CreateTempDir()
+00012f20: 0a20 2020 2073 656c 662e 4372 6561 7465  .    self.Create
+00012f30: 4f62 6a65 6374 2862 7563 6b65 745f 7572  Object(bucket_ur
+00012f40: 693d 7372 635f 6275 636b 6574 5f75 7269  i=src_bucket_uri
+00012f50: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00012f60: 2020 2020 2020 2020 6f62 6a65 6374 5f6e          object_n
+00012f70: 616d 653d 276f 626a 3027 2c0a 2020 2020  ame='obj0',.    
+00012f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012f90: 2020 636f 6e74 656e 7473 3d62 2761 6263    contents=b'abc
+00012fa0: 2729 0a20 2020 2073 656c 662e 4372 6561  ').    self.Crea
+00012fb0: 7465 4f62 6a65 6374 2862 7563 6b65 745f  teObject(bucket_
+00012fc0: 7572 693d 7372 635f 6275 636b 6574 5f75  uri=src_bucket_u
+00012fd0: 7269 2c0a 2020 2020 2020 2020 2020 2020  ri,.            
+00012fe0: 2020 2020 2020 2020 2020 6f62 6a65 6374            object
+00012ff0: 5f6e 616d 653d 276f 626a 3127 2c0a 2020  _name='obj1',.  
+00013000: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013010: 2020 2020 636f 6e74 656e 7473 3d62 2764      contents=b'd
+00013020: 6566 2729 0a0a 2020 2020 2320 5573 6520  ef')..    # Use 
+00013030: 4052 6574 7279 2061 7320 6865 6467 6520  @Retry as hedge 
+00013040: 6167 6169 6e73 7420 6275 636b 6574 206c  against bucket l
+00013050: 6973 7469 6e67 2065 7665 6e74 7561 6c20  isting eventual 
+00013060: 636f 6e73 6973 7465 6e63 792e 0a20 2020  consistency..   
+00013070: 2040 5265 7472 7928 4173 7365 7274 696f   @Retry(Assertio
+00013080: 6e45 7272 6f72 2c20 7472 6965 733d 332c  nError, tries=3,
+00013090: 2074 696d 656f 7574 5f73 6563 733d 3129   timeout_secs=1)
+000130a0: 0a20 2020 2064 6566 205f 436f 7079 416e  .    def _CopyAn
+000130b0: 6443 6865 636b 2829 3a0a 2020 2020 2020  dCheck():.      
+000130c0: 2222 2243 6f70 6965 7320 7468 6520 6275  """Copies the bu
+000130d0: 636b 6574 2072 6563 7572 7369 7665 6c79  cket recursively
+000130e0: 2061 6e64 2076 616c 6964 6174 6573 2074   and validates t
+000130f0: 6865 2072 6573 756c 7473 2e22 2222 0a20  he results.""". 
+00013100: 2020 2020 2073 656c 662e 5275 6e47 7355       self.RunGsU
+00013110: 7469 6c28 5b27 6370 272c 2027 2d52 272c  til(['cp', '-R',
+00013120: 2073 7572 6928 7372 635f 6275 636b 6574   suri(src_bucket
+00013130: 5f75 7269 292c 2064 7374 5f64 6972 5d29  _uri), dst_dir])
+00013140: 0a20 2020 2020 2064 6972 5f6c 6973 7420  .      dir_list 
+00013150: 3d20 5b5d 0a20 2020 2020 2066 6f72 2064  = [].      for d
+00013160: 6972 6e61 6d65 2c20 5f2c 2066 696c 656e  irname, _, filen
+00013170: 616d 6573 2069 6e20 6f73 2e77 616c 6b28  ames in os.walk(
+00013180: 6473 745f 6469 7229 3a0a 2020 2020 2020  dst_dir):.      
+00013190: 2020 666f 7220 6669 6c65 6e61 6d65 2069    for filename i
+000131a0: 6e20 6669 6c65 6e61 6d65 733a 0a20 2020  n filenames:.   
+000131b0: 2020 2020 2020 2064 6972 5f6c 6973 742e         dir_list.
+000131c0: 6170 7065 6e64 286f 732e 7061 7468 2e6a  append(os.path.j
+000131d0: 6f69 6e28 6469 726e 616d 652c 2066 696c  oin(dirname, fil
+000131e0: 656e 616d 6529 290a 2020 2020 2020 6469  ename)).      di
+000131f0: 725f 6c69 7374 203d 2073 6f72 7465 6428  r_list = sorted(
+00013200: 6469 725f 6c69 7374 290a 2020 2020 2020  dir_list).      
+00013210: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+00013220: 286c 656e 2864 6972 5f6c 6973 7429 2c20  (len(dir_list), 
+00013230: 3229 0a20 2020 2020 2073 656c 662e 6173  2).      self.as
+00013240: 7365 7274 4571 7561 6c28 0a20 2020 2020  sertEqual(.     
+00013250: 2020 2020 206f 732e 7061 7468 2e6a 6f69       os.path.joi
+00013260: 6e28 6473 745f 6469 722c 2073 7263 5f62  n(dst_dir, src_b
+00013270: 7563 6b65 745f 7572 692e 6275 636b 6574  ucket_uri.bucket
+00013280: 5f6e 616d 652c 2027 6f62 6a30 2729 2c0a  _name, 'obj0'),.
+00013290: 2020 2020 2020 2020 2020 6469 725f 6c69            dir_li
+000132a0: 7374 5b30 5d29 0a20 2020 2020 2073 656c  st[0]).      sel
+000132b0: 662e 6173 7365 7274 4571 7561 6c28 0a20  f.assertEqual(. 
+000132c0: 2020 2020 2020 2020 206f 732e 7061 7468           os.path
+000132d0: 2e6a 6f69 6e28 6473 745f 6469 722c 2073  .join(dst_dir, s
+000132e0: 7263 5f62 7563 6b65 745f 7572 692e 6275  rc_bucket_uri.bu
+000132f0: 636b 6574 5f6e 616d 652c 2027 6f62 6a31  cket_name, 'obj1
+00013300: 2729 2c0a 2020 2020 2020 2020 2020 6469  '),.          di
+00013310: 725f 6c69 7374 5b31 5d29 0a0a 2020 2020  r_list[1])..    
+00013320: 5f43 6f70 7941 6e64 4368 6563 6b28 290a  _CopyAndCheck().
+00013330: 0a20 2040 756e 6974 7465 7374 2e73 6b69  .  @unittest.ski
+00013340: 7055 6e6c 6573 7328 4841 535f 5333 5f43  pUnless(HAS_S3_C
+00013350: 5245 4453 2c20 2754 6573 7420 7265 7175  REDS, 'Test requ
+00013360: 6972 6573 2062 6f74 6820 5333 2061 6e64  ires both S3 and
+00013370: 2047 5320 6372 6564 656e 7469 616c 7327   GS credentials'
+00013380: 290a 2020 6465 6620 7465 7374 5f63 6f70  ).  def test_cop
+00013390: 795f 6f62 6a65 6374 5f74 6f5f 6469 725f  y_object_to_dir_
+000133a0: 7333 5f76 3428 7365 6c66 293a 0a20 2020  s3_v4(self):.   
+000133b0: 2022 2222 5465 7374 7320 636f 7079 696e   """Tests copyin
+000133c0: 6720 6f62 6a65 6374 2066 726f 6d20 7333  g object from s3
+000133d0: 2074 6f20 6c6f 6361 6c20 6469 7220 7769   to local dir wi
+000133e0: 7468 2076 3420 7369 676e 6174 7572 652e  th v4 signature.
+000133f0: 0a0a 2020 2020 5265 6769 6f6e 7320 6c69  ..    Regions li
+00013400: 6b65 2075 732d 6561 7374 3220 6163 6365  ke us-east2 acce
+00013410: 7074 206f 6e6c 7920 5634 2073 6967 6e61  pt only V4 signa
+00013420: 7475 7265 2c20 6865 6e63 6520 7765 2077  ture, hence we w
+00013430: 696c 6c20 6372 6561 7465 0a20 2020 2074  ill create.    t
+00013440: 6865 2062 7563 6b65 7420 696e 2075 732d  he bucket in us-
+00013450: 6561 7374 3220 7265 6769 6f6e 2074 6f20  east2 region to 
+00013460: 656e 666f 7263 6520 7465 7374 696e 6720  enforce testing 
+00013470: 7769 7468 2056 3420 7369 676e 6174 7572  with V4 signatur
+00013480: 652e 0a20 2020 2022 2222 0a20 2020 2073  e..    """.    s
+00013490: 7263 5f62 7563 6b65 745f 7572 6920 3d20  rc_bucket_uri = 
+000134a0: 7365 6c66 2e43 7265 6174 6542 7563 6b65  self.CreateBucke
+000134b0: 7428 7072 6f76 6964 6572 3d27 7333 272c  t(provider='s3',
+000134c0: 206c 6f63 6174 696f 6e3d 2775 732d 6561   location='us-ea
+000134d0: 7374 2d32 2729 0a20 2020 2064 7374 5f64  st-2').    dst_d
+000134e0: 6972 203d 2073 656c 662e 4372 6561 7465  ir = self.Create
+000134f0: 5465 6d70 4469 7228 290a 2020 2020 7365  TempDir().    se
+00013500: 6c66 2e43 7265 6174 654f 626a 6563 7428  lf.CreateObject(
+00013510: 6275 636b 6574 5f75 7269 3d73 7263 5f62  bucket_uri=src_b
+00013520: 7563 6b65 745f 7572 692c 0a20 2020 2020  ucket_uri,.     
+00013530: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013540: 206f 626a 6563 745f 6e61 6d65 3d27 6f62   object_name='ob
+00013550: 6a30 272c 0a20 2020 2020 2020 2020 2020  j0',.           
+00013560: 2020 2020 2020 2020 2020 2063 6f6e 7465             conte
+00013570: 6e74 733d 6227 6162 6327 290a 2020 2020  nts=b'abc').    
+00013580: 7365 6c66 2e43 7265 6174 654f 626a 6563  self.CreateObjec
+00013590: 7428 6275 636b 6574 5f75 7269 3d73 7263  t(bucket_uri=src
+000135a0: 5f62 7563 6b65 745f 7572 692c 0a20 2020  _bucket_uri,.   
+000135b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000135c0: 2020 206f 626a 6563 745f 6e61 6d65 3d27     object_name='
+000135d0: 6f62 6a31 272c 0a20 2020 2020 2020 2020  obj1',.         
+000135e0: 2020 2020 2020 2020 2020 2020 2063 6f6e               con
+000135f0: 7465 6e74 733d 6227 6465 6627 290a 0a20  tents=b'def').. 
+00013600: 2020 2023 2055 7365 2040 5265 7472 7920     # Use @Retry 
+00013610: 6173 2068 6564 6765 2061 6761 696e 7374  as hedge against
+00013620: 2062 7563 6b65 7420 6c69 7374 696e 6720   bucket listing 
+00013630: 6576 656e 7475 616c 2063 6f6e 7369 7374  eventual consist
+00013640: 656e 6379 2e0a 2020 2020 4052 6574 7279  ency..    @Retry
+00013650: 2841 7373 6572 7469 6f6e 4572 726f 722c  (AssertionError,
+00013660: 2074 7269 6573 3d33 2c20 7469 6d65 6f75   tries=3, timeou
+00013670: 745f 7365 6373 3d31 290a 2020 2020 6465  t_secs=1).    de
+00013680: 6620 5f43 6f70 7941 6e64 4368 6563 6b28  f _CopyAndCheck(
+00013690: 293a 0a20 2020 2020 2022 2222 436f 7069  ):.      """Copi
+000136a0: 6573 2074 6865 2062 7563 6b65 7420 7265  es the bucket re
+000136b0: 6375 7273 6976 656c 7920 616e 6420 7661  cursively and va
+000136c0: 6c69 6461 7465 7320 7468 6520 7265 7375  lidates the resu
+000136d0: 6c74 732e 2222 220a 2020 2020 2020 7365  lts.""".      se
+000136e0: 6c66 2e52 756e 4773 5574 696c 285b 2763  lf.RunGsUtil(['c
+000136f0: 7027 2c20 272d 5227 2c20 7375 7269 2873  p', '-R', suri(s
+00013700: 7263 5f62 7563 6b65 745f 7572 6929 2c20  rc_bucket_uri), 
+00013710: 6473 745f 6469 725d 290a 2020 2020 2020  dst_dir]).      
+00013720: 6469 725f 6c69 7374 203d 205b 5d0a 2020  dir_list = [].  
+00013730: 2020 2020 666f 7220 6469 726e 616d 652c      for dirname,
+00013740: 205f 2c20 6669 6c65 6e61 6d65 7320 696e   _, filenames in
+00013750: 206f 732e 7761 6c6b 2864 7374 5f64 6972   os.walk(dst_dir
+00013760: 293a 0a20 2020 2020 2020 2066 6f72 2066  ):.        for f
+00013770: 696c 656e 616d 6520 696e 2066 696c 656e  ilename in filen
+00013780: 616d 6573 3a0a 2020 2020 2020 2020 2020  ames:.          
+00013790: 6469 725f 6c69 7374 2e61 7070 656e 6428  dir_list.append(
+000137a0: 6f73 2e70 6174 682e 6a6f 696e 2864 6972  os.path.join(dir
+000137b0: 6e61 6d65 2c20 6669 6c65 6e61 6d65 2929  name, filename))
+000137c0: 0a20 2020 2020 2064 6972 5f6c 6973 7420  .      dir_list 
+000137d0: 3d20 736f 7274 6564 2864 6972 5f6c 6973  = sorted(dir_lis
+000137e0: 7429 0a20 2020 2020 2073 656c 662e 6173  t).      self.as
+000137f0: 7365 7274 4571 7561 6c28 6c65 6e28 6469  sertEqual(len(di
+00013800: 725f 6c69 7374 292c 2032 290a 2020 2020  r_list), 2).    
+00013810: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+00013820: 616c 280a 2020 2020 2020 2020 2020 6f73  al(.          os
+00013830: 2e70 6174 682e 6a6f 696e 2864 7374 5f64  .path.join(dst_d
+00013840: 6972 2c20 7372 635f 6275 636b 6574 5f75  ir, src_bucket_u
+00013850: 7269 2e62 7563 6b65 745f 6e61 6d65 2c20  ri.bucket_name, 
+00013860: 276f 626a 3027 292c 0a20 2020 2020 2020  'obj0'),.       
+00013870: 2020 2064 6972 5f6c 6973 745b 305d 290a     dir_list[0]).
+00013880: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+00013890: 7445 7175 616c 280a 2020 2020 2020 2020  tEqual(.        
+000138a0: 2020 6f73 2e70 6174 682e 6a6f 696e 2864    os.path.join(d
+000138b0: 7374 5f64 6972 2c20 7372 635f 6275 636b  st_dir, src_buck
+000138c0: 6574 5f75 7269 2e62 7563 6b65 745f 6e61  et_uri.bucket_na
+000138d0: 6d65 2c20 276f 626a 3127 292c 0a20 2020  me, 'obj1'),.   
+000138e0: 2020 2020 2020 2064 6972 5f6c 6973 745b         dir_list[
+000138f0: 315d 290a 0a20 2020 205f 436f 7079 416e  1])..    _CopyAn
+00013900: 6443 6865 636b 2829 0a0a 2020 4053 6b69  dCheck()..  @Ski
+00013910: 7046 6f72 5333 2827 5468 6520 626f 746f  pForS3('The boto
+00013920: 206c 6962 2075 7365 6420 666f 7220 5333   lib used for S3
+00013930: 2064 6f65 7320 6e6f 7420 6861 6e64 6c65   does not handle
+00013940: 206f 626a 6563 7473 2027 0a20 2020 2020   objects '.     
+00013950: 2020 2020 2020 2020 2773 7461 7274 696e          'startin
+00013960: 6720 7769 7468 2073 6c61 7368 6573 2069  g with slashes i
+00013970: 6620 7765 2075 7365 2056 3420 7369 676e  f we use V4 sign
+00013980: 6174 7572 6527 290a 2020 6465 6620 7465  ature').  def te
+00013990: 7374 5f72 6563 7572 7369 7665 5f64 6f77  st_recursive_dow
+000139a0: 6e6c 6f61 645f 7769 7468 5f6c 6566 746f  nload_with_lefto
+000139b0: 7665 725f 736c 6173 685f 6f6e 6c79 5f64  ver_slash_only_d
+000139c0: 6972 5f70 6c61 6365 686f 6c64 6572 2873  ir_placeholder(s
+000139d0: 656c 6629 3a0a 2020 2020 2222 2254 6573  elf):.    """Tes
+000139e0: 7473 2074 6861 7420 7765 2063 6f72 7265  ts that we corre
+000139f0: 6374 6c79 2068 616e 646c 6520 6c65 6674  ctly handle left
+00013a00: 6f76 6572 2064 6972 2070 6c61 6365 686f  over dir placeho
+00013a10: 6c64 6572 732e 2222 220a 2020 2020 7372  lders.""".    sr
+00013a20: 635f 6275 636b 6574 5f75 7269 203d 2073  c_bucket_uri = s
+00013a30: 656c 662e 4372 6561 7465 4275 636b 6574  elf.CreateBucket
+00013a40: 2829 0a20 2020 2064 7374 5f64 6972 203d  ().    dst_dir =
+00013a50: 2073 656c 662e 4372 6561 7465 5465 6d70   self.CreateTemp
+00013a60: 4469 7228 290a 2020 2020 7365 6c66 2e43  Dir().    self.C
+00013a70: 7265 6174 654f 626a 6563 7428 6275 636b  reateObject(buck
+00013a80: 6574 5f75 7269 3d73 7263 5f62 7563 6b65  et_uri=src_bucke
+00013a90: 745f 7572 692c 0a20 2020 2020 2020 2020  t_uri,.         
+00013aa0: 2020 2020 2020 2020 2020 2020 206f 626a               obj
+00013ab0: 6563 745f 6e61 6d65 3d27 6f62 6a30 272c  ect_name='obj0',
+00013ac0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00013ad0: 2020 2020 2020 2063 6f6e 7465 6e74 733d         contents=
+00013ae0: 6227 6162 6327 290a 2020 2020 7365 6c66  b'abc').    self
+00013af0: 2e43 7265 6174 654f 626a 6563 7428 6275  .CreateObject(bu
+00013b00: 636b 6574 5f75 7269 3d73 7263 5f62 7563  cket_uri=src_buc
+00013b10: 6b65 745f 7572 692c 0a20 2020 2020 2020  ket_uri,.       
+00013b20: 2020 2020 2020 2020 2020 2020 2020 206f                 o
+00013b30: 626a 6563 745f 6e61 6d65 3d27 6f62 6a31  bject_name='obj1
+00013b40: 272c 0a20 2020 2020 2020 2020 2020 2020  ',.             
+00013b50: 2020 2020 2020 2020 2063 6f6e 7465 6e74           content
+00013b60: 733d 6227 6465 6627 290a 0a20 2020 2023  s=b'def')..    #
+00013b70: 2043 7265 6174 6520 6120 706c 6163 6568   Create a placeh
+00013b80: 6f6c 6465 7220 6c69 6b65 2077 6861 7420  older like what 
+00013b90: 6361 6e20 6265 206c 6566 7420 6f76 6572  can be left over
+00013ba0: 2062 7920 7765 6220 4755 4920 746f 6f6c   by web GUI tool
+00013bb0: 732e 0a20 2020 206b 6579 5f75 7269 203d  s..    key_uri =
+00013bc0: 2073 656c 662e 5374 6f72 6167 6555 7269   self.StorageUri
+00013bd0: 436c 6f6e 6552 6570 6c61 6365 4e61 6d65  CloneReplaceName
+00013be0: 2873 7263 5f62 7563 6b65 745f 7572 692c  (src_bucket_uri,
+00013bf0: 2027 2f27 290a 2020 2020 7365 6c66 2e53   '/').    self.S
+00013c00: 746f 7261 6765 5572 6953 6574 436f 6e74  torageUriSetCont
+00013c10: 656e 7473 4672 6f6d 5374 7269 6e67 286b  entsFromString(k
+00013c20: 6579 5f75 7269 2c20 2727 290a 2020 2020  ey_uri, '').    
+00013c30: 7365 6c66 2e41 7373 6572 744e 4f62 6a65  self.AssertNObje
+00013c40: 6374 7349 6e42 7563 6b65 7428 7372 635f  ctsInBucket(src_
+00013c50: 6275 636b 6574 5f75 7269 2c20 3329 0a0a  bucket_uri, 3)..
+00013c60: 2020 2020 7365 6c66 2e52 756e 4773 5574      self.RunGsUt
+00013c70: 696c 285b 2763 7027 2c20 272d 5227 2c20  il(['cp', '-R', 
+00013c80: 7375 7269 2873 7263 5f62 7563 6b65 745f  suri(src_bucket_
+00013c90: 7572 6929 2c20 6473 745f 6469 725d 290a  uri), dst_dir]).
+00013ca0: 2020 2020 6469 725f 6c69 7374 203d 205b      dir_list = [
+00013cb0: 5d0a 2020 2020 666f 7220 6469 726e 616d  ].    for dirnam
+00013cc0: 652c 205f 2c20 6669 6c65 6e61 6d65 7320  e, _, filenames 
+00013cd0: 696e 206f 732e 7761 6c6b 2864 7374 5f64  in os.walk(dst_d
+00013ce0: 6972 293a 0a20 2020 2020 2066 6f72 2066  ir):.      for f
+00013cf0: 696c 656e 616d 6520 696e 2066 696c 656e  ilename in filen
+00013d00: 616d 6573 3a0a 2020 2020 2020 2020 6469  ames:.        di
+00013d10: 725f 6c69 7374 2e61 7070 656e 6428 6f73  r_list.append(os
+00013d20: 2e70 6174 682e 6a6f 696e 2864 6972 6e61  .path.join(dirna
+00013d30: 6d65 2c20 6669 6c65 6e61 6d65 2929 0a20  me, filename)). 
+00013d40: 2020 2064 6972 5f6c 6973 7420 3d20 736f     dir_list = so
+00013d50: 7274 6564 2864 6972 5f6c 6973 7429 0a20  rted(dir_list). 
+00013d60: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+00013d70: 7561 6c28 6c65 6e28 6469 725f 6c69 7374  ual(len(dir_list
+00013d80: 292c 2032 290a 2020 2020 7365 6c66 2e61  ), 2).    self.a
+00013d90: 7373 6572 7445 7175 616c 286f 732e 7061  ssertEqual(os.pa
+00013da0: 7468 2e6a 6f69 6e28 6473 745f 6469 722c  th.join(dst_dir,
+00013db0: 2073 7263 5f62 7563 6b65 745f 7572 692e   src_bucket_uri.
+00013dc0: 6275 636b 6574 5f6e 616d 652c 2027 6f62  bucket_name, 'ob
+00013dd0: 6a30 2729 2c0a 2020 2020 2020 2020 2020  j0'),.          
+00013de0: 2020 2020 2020 2020 2020 2064 6972 5f6c             dir_l
+00013df0: 6973 745b 305d 290a 2020 2020 7365 6c66  ist[0]).    self
+00013e00: 2e61 7373 6572 7445 7175 616c 286f 732e  .assertEqual(os.
+00013e10: 7061 7468 2e6a 6f69 6e28 6473 745f 6469  path.join(dst_di
+00013e20: 722c 2073 7263 5f62 7563 6b65 745f 7572  r, src_bucket_ur
+00013e30: 692e 6275 636b 6574 5f6e 616d 652c 2027  i.bucket_name, '
+00013e40: 6f62 6a31 2729 2c0a 2020 2020 2020 2020  obj1'),.        
+00013e50: 2020 2020 2020 2020 2020 2020 2064 6972               dir
+00013e60: 5f6c 6973 745b 315d 290a 0a20 2064 6566  _list[1])..  def
+00013e70: 2074 6573 745f 7265 6375 7273 6976 655f   test_recursive_
+00013e80: 646f 776e 6c6f 6164 5f77 6974 685f 6c65  download_with_le
+00013e90: 6674 6f76 6572 5f64 6972 5f70 6c61 6365  ftover_dir_place
+00013ea0: 686f 6c64 6572 2873 656c 6629 3a0a 2020  holder(self):.  
+00013eb0: 2020 2222 2254 6573 7473 2074 6861 7420    """Tests that 
+00013ec0: 7765 2063 6f72 7265 6374 6c79 2068 616e  we correctly han
+00013ed0: 646c 6520 6c65 6674 6f76 6572 2064 6972  dle leftover dir
+00013ee0: 2070 6c61 6365 686f 6c64 6572 732e 2222   placeholders.""
+00013ef0: 220a 2020 2020 7372 635f 6275 636b 6574  ".    src_bucket
+00013f00: 5f75 7269 203d 2073 656c 662e 4372 6561  _uri = self.Crea
+00013f10: 7465 4275 636b 6574 2829 0a20 2020 2064  teBucket().    d
+00013f20: 7374 5f64 6972 203d 2073 656c 662e 4372  st_dir = self.Cr
+00013f30: 6561 7465 5465 6d70 4469 7228 290a 2020  eateTempDir().  
+00013f40: 2020 7365 6c66 2e43 7265 6174 654f 626a    self.CreateObj
+00013f50: 6563 7428 6275 636b 6574 5f75 7269 3d73  ect(bucket_uri=s
+00013f60: 7263 5f62 7563 6b65 745f 7572 692c 0a20  rc_bucket_uri,. 
+00013f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013f80: 2020 2020 206f 626a 6563 745f 6e61 6d65       object_name
+00013f90: 3d27 6f62 6a30 272c 0a20 2020 2020 2020  ='obj0',.       
+00013fa0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+00013fb0: 6f6e 7465 6e74 733d 6227 6162 6327 290a  ontents=b'abc').
+00013fc0: 2020 2020 7365 6c66 2e43 7265 6174 654f      self.CreateO
+00013fd0: 626a 6563 7428 6275 636b 6574 5f75 7269  bject(bucket_uri
+00013fe0: 3d73 7263 5f62 7563 6b65 745f 7572 692c  =src_bucket_uri,
+00013ff0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00014000: 2020 2020 2020 206f 626a 6563 745f 6e61         object_na
+00014010: 6d65 3d27 6f62 6a31 272c 0a20 2020 2020  me='obj1',.     
+00014020: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014030: 2063 6f6e 7465 6e74 733d 6227 6465 6627   contents=b'def'
+00014040: 290a 0a20 2020 2023 2043 7265 6174 6520  )..    # Create 
+00014050: 6120 706c 6163 6568 6f6c 6465 7220 6c69  a placeholder li
+00014060: 6b65 2077 6861 7420 6361 6e20 6265 206c  ke what can be l
+00014070: 6566 7420 6f76 6572 2062 7920 7765 6220  eft over by web 
+00014080: 4755 4920 746f 6f6c 732e 0a20 2020 206b  GUI tools..    k
+00014090: 6579 5f75 7269 203d 2073 656c 662e 5374  ey_uri = self.St
+000140a0: 6f72 6167 6555 7269 436c 6f6e 6552 6570  orageUriCloneRep
+000140b0: 6c61 6365 4e61 6d65 2873 7263 5f62 7563  laceName(src_buc
+000140c0: 6b65 745f 7572 692c 2027 666f 6f2f 2729  ket_uri, 'foo/')
+000140d0: 0a20 2020 2073 656c 662e 5374 6f72 6167  .    self.Storag
+000140e0: 6555 7269 5365 7443 6f6e 7465 6e74 7346  eUriSetContentsF
+000140f0: 726f 6d53 7472 696e 6728 6b65 795f 7572  romString(key_ur
+00014100: 692c 2027 2729 0a20 2020 2073 656c 662e  i, '').    self.
+00014110: 4173 7365 7274 4e4f 626a 6563 7473 496e  AssertNObjectsIn
+00014120: 4275 636b 6574 2873 7263 5f62 7563 6b65  Bucket(src_bucke
+00014130: 745f 7572 692c 2033 290a 0a20 2020 2073  t_uri, 3)..    s
+00014140: 656c 662e 5275 6e47 7355 7469 6c28 5b27  elf.RunGsUtil(['
+00014150: 6370 272c 2027 2d52 272c 2073 7572 6928  cp', '-R', suri(
+00014160: 7372 635f 6275 636b 6574 5f75 7269 292c  src_bucket_uri),
+00014170: 2064 7374 5f64 6972 5d29 0a20 2020 2064   dst_dir]).    d
+00014180: 6972 5f6c 6973 7420 3d20 5b5d 0a20 2020  ir_list = [].   
+00014190: 2066 6f72 2064 6972 6e61 6d65 2c20 5f2c   for dirname, _,
+000141a0: 2066 696c 656e 616d 6573 2069 6e20 6f73   filenames in os
+000141b0: 2e77 616c 6b28 6473 745f 6469 7229 3a0a  .walk(dst_dir):.
+000141c0: 2020 2020 2020 666f 7220 6669 6c65 6e61        for filena
+000141d0: 6d65 2069 6e20 6669 6c65 6e61 6d65 733a  me in filenames:
+000141e0: 0a20 2020 2020 2020 2064 6972 5f6c 6973  .        dir_lis
+000141f0: 742e 6170 7065 6e64 286f 732e 7061 7468  t.append(os.path
+00014200: 2e6a 6f69 6e28 6469 726e 616d 652c 2066  .join(dirname, f
+00014210: 696c 656e 616d 6529 290a 2020 2020 6469  ilename)).    di
+00014220: 725f 6c69 7374 203d 2073 6f72 7465 6428  r_list = sorted(
+00014230: 6469 725f 6c69 7374 290a 2020 2020 7365  dir_list).    se
+00014240: 6c66 2e61 7373 6572 7445 7175 616c 286c  lf.assertEqual(l
+00014250: 656e 2864 6972 5f6c 6973 7429 2c20 3229  en(dir_list), 2)
+00014260: 0a20 2020 2073 656c 662e 6173 7365 7274  .    self.assert
+00014270: 4571 7561 6c28 6f73 2e70 6174 682e 6a6f  Equal(os.path.jo
+00014280: 696e 2864 7374 5f64 6972 2c20 7372 635f  in(dst_dir, src_
+00014290: 6275 636b 6574 5f75 7269 2e62 7563 6b65  bucket_uri.bucke
+000142a0: 745f 6e61 6d65 2c20 276f 626a 3027 292c  t_name, 'obj0'),
+000142b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000142c0: 2020 2020 2020 6469 725f 6c69 7374 5b30        dir_list[0
+000142d0: 5d29 0a20 2020 2073 656c 662e 6173 7365  ]).    self.asse
+000142e0: 7274 4571 7561 6c28 6f73 2e70 6174 682e  rtEqual(os.path.
+000142f0: 6a6f 696e 2864 7374 5f64 6972 2c20 7372  join(dst_dir, sr
+00014300: 635f 6275 636b 6574 5f75 7269 2e62 7563  c_bucket_uri.buc
+00014310: 6b65 745f 6e61 6d65 2c20 276f 626a 3127  ket_name, 'obj1'
+00014320: 292c 0a20 2020 2020 2020 2020 2020 2020  ),.             
+00014330: 2020 2020 2020 2020 6469 725f 6c69 7374          dir_list
+00014340: 5b31 5d29 0a0a 2020 6465 6620 7465 7374  [1])..  def test
+00014350: 5f63 6f70 795f 7175 6965 7428 7365 6c66  _copy_quiet(self
+00014360: 293a 0a20 2020 2062 7563 6b65 745f 7572  ):.    bucket_ur
+00014370: 6920 3d20 7365 6c66 2e43 7265 6174 6542  i = self.CreateB
+00014380: 7563 6b65 7428 290a 2020 2020 6b65 795f  ucket().    key_
+00014390: 7572 6920 3d20 7365 6c66 2e43 7265 6174  uri = self.Creat
+000143a0: 654f 626a 6563 7428 6275 636b 6574 5f75  eObject(bucket_u
+000143b0: 7269 3d62 7563 6b65 745f 7572 692c 2063  ri=bucket_uri, c
+000143c0: 6f6e 7465 6e74 733d 6227 666f 6f27 290a  ontents=b'foo').
+000143d0: 2020 2020 7374 6465 7272 203d 2073 656c      stderr = sel
+000143e0: 662e 5275 6e47 7355 7469 6c28 5b0a 2020  f.RunGsUtil([.  
+000143f0: 2020 2020 2020 272d 7127 2c20 2763 7027        '-q', 'cp'
+00014400: 2c0a 2020 2020 2020 2020 7375 7269 286b  ,.        suri(k
+00014410: 6579 5f75 7269 292c 0a20 2020 2020 2020  ey_uri),.       
+00014420: 2073 7572 6928 7365 6c66 2e53 746f 7261   suri(self.Stora
+00014430: 6765 5572 6943 6c6f 6e65 5265 706c 6163  geUriCloneReplac
+00014440: 654e 616d 6528 6275 636b 6574 5f75 7269  eName(bucket_uri
+00014450: 2c20 276f 3227 2929 0a20 2020 205d 2c0a  , 'o2')).    ],.
+00014460: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014470: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00014480: 726e 5f73 7464 6572 723d 5472 7565 290a  rn_stderr=True).
+00014490: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+000144a0: 7175 616c 2873 7464 6572 722e 636f 756e  qual(stderr.coun
+000144b0: 7428 2743 6f70 7969 6e67 2027 292c 2030  t('Copying '), 0
+000144c0: 290a 0a20 2064 6566 2074 6573 745f 6370  )..  def test_cp
+000144d0: 5f6d 6435 5f6d 6174 6368 2873 656c 6629  _md5_match(self)
+000144e0: 3a0a 2020 2020 2222 2254 6573 7473 2074  :.    """Tests t
+000144f0: 6861 7420 7468 6520 7570 6c6f 6164 6564  hat the uploaded
+00014500: 206f 626a 6563 7420 6861 7320 7468 6520   object has the 
+00014510: 6578 7065 6374 6564 204d 4435 2e0a 0a20  expected MD5... 
+00014520: 2020 204e 6f74 6520 7468 6174 2077 6869     Note that whi
+00014530: 6c65 2074 6869 7320 646f 6573 2070 6572  le this does per
+00014540: 666f 726d 2061 2066 696c 6520 746f 206f  form a file to o
+00014550: 626a 6563 7420 7570 6c6f 6164 2c20 4d44  bject upload, MD
+00014560: 3527 7320 6172 650a 2020 2020 6e6f 7420  5's are.    not 
+00014570: 7375 7070 6f72 7465 6420 666f 7220 636f  supported for co
+00014580: 6d70 6f73 6974 6520 6f62 6a65 6374 7320  mposite objects 
+00014590: 736f 2077 6520 646f 6e27 7420 7573 6520  so we don't use 
+000145a0: 7468 6520 6465 636f 7261 746f 7220 696e  the decorator in
+000145b0: 2074 6869 730a 2020 2020 6361 7365 2e0a   this.    case..
+000145c0: 2020 2020 2222 220a 2020 2020 6275 636b      """.    buck
+000145d0: 6574 5f75 7269 203d 2073 656c 662e 4372  et_uri = self.Cr
+000145e0: 6561 7465 4275 636b 6574 2829 0a20 2020  eateBucket().   
+000145f0: 2066 7061 7468 203d 2073 656c 662e 4372   fpath = self.Cr
+00014600: 6561 7465 5465 6d70 4669 6c65 2863 6f6e  eateTempFile(con
+00014610: 7465 6e74 733d 6227 6261 7227 290a 2020  tents=b'bar').  
+00014620: 2020 7769 7468 206f 7065 6e28 6670 6174    with open(fpat
+00014630: 682c 2027 7262 2729 2061 7320 665f 696e  h, 'rb') as f_in
+00014640: 3a0a 2020 2020 2020 6d64 3520 3d20 6269  :.      md5 = bi
+00014650: 6e61 7363 6969 2e75 6e68 6578 6c69 6679  nascii.unhexlify
+00014660: 2843 616c 6375 6c61 7465 4d64 3546 726f  (CalculateMd5Fro
+00014670: 6d43 6f6e 7465 6e74 7328 665f 696e 2929  mContents(f_in))
+00014680: 0a20 2020 2020 2074 7279 3a0a 2020 2020  .      try:.    
+00014690: 2020 2020 656e 636f 6465 645f 6279 7465      encoded_byte
+000146a0: 7320 3d20 6261 7365 3634 2e65 6e63 6f64  s = base64.encod
+000146b0: 6562 7974 6573 286d 6435 290a 2020 2020  ebytes(md5).    
+000146c0: 2020 6578 6365 7074 2041 7474 7269 6275    except Attribu
+000146d0: 7465 4572 726f 723a 0a20 2020 2020 2020  teError:.       
+000146e0: 2023 2046 6f72 2050 7974 686f 6e20 3220   # For Python 2 
+000146f0: 636f 6d70 6174 6162 696c 6974 792e 0a20  compatability.. 
+00014700: 2020 2020 2020 2065 6e63 6f64 6564 5f62         encoded_b
+00014710: 7974 6573 203d 2062 6173 6536 342e 656e  ytes = base64.en
+00014720: 636f 6465 7374 7269 6e67 286d 6435 290a  codestring(md5).
+00014730: 2020 2020 2020 6669 6c65 5f6d 6435 203d        file_md5 =
+00014740: 2065 6e63 6f64 6564 5f62 7974 6573 2e72   encoded_bytes.r
+00014750: 7374 7269 7028 6227 5c6e 2729 0a20 2020  strip(b'\n').   
+00014760: 2073 656c 662e 5275 6e47 7355 7469 6c28   self.RunGsUtil(
+00014770: 5b27 6370 272c 2066 7061 7468 2c20 7375  ['cp', fpath, su
+00014780: 7269 2862 7563 6b65 745f 7572 6929 5d29  ri(bucket_uri)])
+00014790: 0a0a 2020 2020 2320 5573 6520 4052 6574  ..    # Use @Ret
+000147a0: 7279 2061 7320 6865 6467 6520 6167 6169  ry as hedge agai
+000147b0: 6e73 7420 6275 636b 6574 206c 6973 7469  nst bucket listi
+000147c0: 6e67 2065 7665 6e74 7561 6c20 636f 6e73  ng eventual cons
+000147d0: 6973 7465 6e63 792e 0a20 2020 2040 5265  istency..    @Re
+000147e0: 7472 7928 4173 7365 7274 696f 6e45 7272  try(AssertionErr
+000147f0: 6f72 2c20 7472 6965 733d 332c 2074 696d  or, tries=3, tim
+00014800: 656f 7574 5f73 6563 733d 3129 0a20 2020  eout_secs=1).   
+00014810: 2064 6566 205f 4368 6563 6b31 2829 3a0a   def _Check1():.
+00014820: 2020 2020 2020 7374 646f 7574 203d 2073        stdout = s
+00014830: 656c 662e 5275 6e47 7355 7469 6c28 5b27  elf.RunGsUtil(['
+00014840: 6c73 272c 2027 2d4c 272c 2073 7572 6928  ls', '-L', suri(
+00014850: 6275 636b 6574 5f75 7269 295d 2c0a 2020  bucket_uri)],.  
+00014860: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014870: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00014880: 726e 5f73 7464 6f75 743d 5472 7565 290a  rn_stdout=True).
+00014890: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+000148a0: 7452 6567 6578 280a 2020 2020 2020 2020  tRegex(.        
+000148b0: 2020 7374 646f 7574 2c20 7227 4861 7368    stdout, r'Hash
+000148c0: 5c73 2b5c 286d 6435 5c29 3a5c 732b 2573  \s+\(md5\):\s+%s
+000148d0: 2720 2520 7265 2e65 7363 6170 6528 6669  ' % re.escape(fi
+000148e0: 6c65 5f6d 6435 2e64 6563 6f64 6528 2761  le_md5.decode('a
+000148f0: 7363 6969 2729 2929 0a0a 2020 2020 5f43  scii')))..    _C
+00014900: 6865 636b 3128 290a 0a20 2040 756e 6974  heck1()..  @unit
+00014910: 7465 7374 2e73 6b69 7049 6628 4953 5f57  test.skipIf(IS_W
+00014920: 494e 444f 5753 2c0a 2020 2020 2020 2020  INDOWS,.        
+00014930: 2020 2020 2020 2020 2020 2027 556e 6963             'Unic
+00014940: 6f64 6520 6861 6e64 6c69 6e67 206f 6e20  ode handling on 
+00014950: 5769 6e64 6f77 7320 7265 7175 6972 6573  Windows requires
+00014960: 206d 6f64 7320 746f 2073 6974 652d 7061   mods to site-pa
+00014970: 636b 6167 6573 2729 0a20 2040 5365 7175  ckages').  @Sequ
+00014980: 656e 7469 616c 416e 6450 6172 616c 6c65  entialAndParalle
+00014990: 6c54 7261 6e73 6665 720a 2020 6465 6620  lTransfer.  def 
+000149a0: 7465 7374 5f63 705f 6d61 6e69 6665 7374  test_cp_manifest
+000149b0: 5f75 706c 6f61 645f 756e 6963 6f64 6528  _upload_unicode(
+000149c0: 7365 6c66 293a 0a20 2020 2072 6574 7572  self):.    retur
+000149d0: 6e20 7365 6c66 2e5f 4d61 6e69 6665 7374  n self._Manifest
+000149e0: 5570 6c6f 6164 2827 666f 6f2d 756e 6963  Upload('foo-unic
+000149f0: c3b6 6465 272e 656e 636f 6465 2855 5446  ..de'.encode(UTF
+00014a00: 3829 2c0a 2020 2020 2020 2020 2020 2020  8),.            
+00014a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014a20: 2020 2020 2762 6172 2d75 6e69 63c3 b664      'bar-unic..d
+00014a30: 6527 2e65 6e63 6f64 6528 5554 4638 292c  e'.encode(UTF8),
+00014a40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00014a50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014a60: 2027 6d61 6e69 6665 7374 2d75 6e69 63c3   'manifest-unic.
+00014a70: b664 6527 2e65 6e63 6f64 6528 5554 4638  .de'.encode(UTF8
+00014a80: 2929 0a0a 2020 4053 6571 7565 6e74 6961  ))..  @Sequentia
+00014a90: 6c41 6e64 5061 7261 6c6c 656c 5472 616e  lAndParallelTran
+00014aa0: 7366 6572 0a20 2064 6566 2074 6573 745f  sfer.  def test_
+00014ab0: 6370 5f6d 616e 6966 6573 745f 7570 6c6f  cp_manifest_uplo
+00014ac0: 6164 2873 656c 6629 3a0a 2020 2020 2222  ad(self):.    ""
+00014ad0: 2254 6573 7473 2075 706c 6f61 6469 6e67  "Tests uploading
+00014ae0: 2077 6974 6820 6120 6d6e 6966 6573 7420   with a mnifest 
+00014af0: 6669 6c65 2e22 2222 0a20 2020 2072 6574  file.""".    ret
+00014b00: 7572 6e20 7365 6c66 2e5f 4d61 6e69 6665  urn self._Manife
+00014b10: 7374 5570 6c6f 6164 2827 666f 6f27 2c20  stUpload('foo', 
+00014b20: 2762 6172 272c 2027 6d61 6e69 6665 7374  'bar', 'manifest
+00014b30: 2729 0a0a 2020 6465 6620 5f4d 616e 6966  ')..  def _Manif
+00014b40: 6573 7455 706c 6f61 6428 7365 6c66 2c20  estUpload(self, 
+00014b50: 6669 6c65 5f6e 616d 652c 206f 626a 6563  file_name, objec
+00014b60: 745f 6e61 6d65 2c20 6d61 6e69 6665 7374  t_name, manifest
+00014b70: 5f6e 616d 6529 3a0a 2020 2020 2222 2254  _name):.    """T
+00014b80: 6573 7473 2075 706c 6f61 6469 6e67 2077  ests uploading w
+00014b90: 6974 6820 6120 6d61 6e69 6665 7374 2066  ith a manifest f
+00014ba0: 696c 652e 2222 220a 2020 2020 6275 636b  ile.""".    buck
+00014bb0: 6574 5f75 7269 203d 2073 656c 662e 4372  et_uri = self.Cr
+00014bc0: 6561 7465 4275 636b 6574 2829 0a20 2020  eateBucket().   
+00014bd0: 2064 7374 7572 6920 3d20 7375 7269 2862   dsturi = suri(b
+00014be0: 7563 6b65 745f 7572 692c 206f 626a 6563  ucket_uri, objec
+00014bf0: 745f 6e61 6d65 290a 0a20 2020 2066 7061  t_name)..    fpa
+00014c00: 7468 203d 2073 656c 662e 4372 6561 7465  th = self.Create
+00014c10: 5465 6d70 4669 6c65 2866 696c 655f 6e61  TempFile(file_na
+00014c20: 6d65 3d66 696c 655f 6e61 6d65 2c20 636f  me=file_name, co
+00014c30: 6e74 656e 7473 3d62 2762 6172 2729 0a20  ntents=b'bar'). 
+00014c40: 2020 206c 6f67 7061 7468 203d 2073 656c     logpath = sel
+00014c50: 662e 4372 6561 7465 5465 6d70 4669 6c65  f.CreateTempFile
+00014c60: 2866 696c 655f 6e61 6d65 3d6d 616e 6966  (file_name=manif
+00014c70: 6573 745f 6e61 6d65 2c20 636f 6e74 656e  est_name, conten
+00014c80: 7473 3d62 2727 290a 2020 2020 2320 456e  ts=b'').    # En
+00014c90: 7375 7265 2074 6865 2066 696c 6520 6973  sure the file is
+00014ca0: 2065 6d70 7479 2e0a 2020 2020 6f70 656e   empty..    open
+00014cb0: 286c 6f67 7061 7468 2c20 2777 2729 2e63  (logpath, 'w').c
+00014cc0: 6c6f 7365 2829 0a20 2020 2073 656c 662e  lose().    self.
+00014cd0: 5275 6e47 7355 7469 6c28 5b27 6370 272c  RunGsUtil(['cp',
+00014ce0: 2027 2d4c 272c 206c 6f67 7061 7468 2c20   '-L', logpath, 
+00014cf0: 6670 6174 682c 2064 7374 7572 695d 290a  fpath, dsturi]).
+00014d00: 0a20 2020 2077 6974 6820 6f70 656e 286c  .    with open(l
+00014d10: 6f67 7061 7468 2c20 2772 2729 2061 7320  ogpath, 'r') as 
+00014d20: 663a 0a20 2020 2020 206c 696e 6573 203d  f:.      lines =
+00014d30: 2066 2e72 6561 646c 696e 6573 2829 0a20   f.readlines(). 
+00014d40: 2020 2069 6620 7369 782e 5059 323a 0a20     if six.PY2:. 
+00014d50: 2020 2020 206c 696e 6573 203d 205b 7369       lines = [si
+00014d60: 782e 7465 7874 5f74 7970 6528 6c69 6e65  x.text_type(line
+00014d70: 2c20 5554 4638 2920 666f 7220 6c69 6e65  , UTF8) for line
+00014d80: 2069 6e20 6c69 6e65 735d 0a0a 2020 2020   in lines]..    
+00014d90: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+00014da0: 286c 656e 286c 696e 6573 292c 2032 290a  (len(lines), 2).
+00014db0: 0a20 2020 2065 7870 6563 7465 645f 6865  .    expected_he
+00014dc0: 6164 6572 7320 3d20 5b0a 2020 2020 2020  aders = [.      
+00014dd0: 2020 2753 6f75 7263 6527 2c20 2744 6573    'Source', 'Des
+00014de0: 7469 6e61 7469 6f6e 272c 2027 5374 6172  tination', 'Star
+00014df0: 7427 2c20 2745 6e64 272c 2027 4d64 3527  t', 'End', 'Md5'
+00014e00: 2c20 2755 706c 6f61 6449 6427 2c0a 2020  , 'UploadId',.  
+00014e10: 2020 2020 2020 2753 6f75 7263 6520 5369        'Source Si
+00014e20: 7a65 272c 2027 4279 7465 7320 5472 616e  ze', 'Bytes Tran
+00014e30: 7366 6572 7265 6427 2c20 2752 6573 756c  sferred', 'Resul
+00014e40: 7427 2c20 2744 6573 6372 6970 7469 6f6e  t', 'Description
+00014e50: 270a 2020 2020 5d0a 2020 2020 7365 6c66  '.    ].    self
+00014e60: 2e61 7373 6572 7445 7175 616c 2865 7870  .assertEqual(exp
+00014e70: 6563 7465 645f 6865 6164 6572 732c 206c  ected_headers, l
+00014e80: 696e 6573 5b30 5d2e 7374 7269 7028 292e  ines[0].strip().
+00014e90: 7370 6c69 7428 272c 2729 290a 2020 2020  split(',')).    
+00014ea0: 7265 7375 6c74 7320 3d20 6c69 6e65 735b  results = lines[
+00014eb0: 315d 2e73 7472 6970 2829 2e73 706c 6974  1].strip().split
+00014ec0: 2827 2c27 290a 0a20 2020 2072 6573 756c  (',')..    resul
+00014ed0: 7473 203d 2064 6963 7428 7a69 7028 6578  ts = dict(zip(ex
+00014ee0: 7065 6374 6564 5f68 6561 6465 7273 2c20  pected_headers, 
+00014ef0: 7265 7375 6c74 7329 290a 0a20 2020 2073  results))..    s
+00014f00: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+00014f10: 0a20 2020 2020 2020 2072 6573 756c 7473  .        results
+00014f20: 5b27 536f 7572 6365 275d 2c0a 2020 2020  ['Source'],.    
+00014f30: 2020 2020 2766 696c 653a 2f2f 2720 2b20      'file://' + 
+00014f40: 6670 6174 682c 0a20 2020 2029 0a20 2020  fpath,.    ).   
+00014f50: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+00014f60: 6c28 0a20 2020 2020 2020 2072 6573 756c  l(.        resul
+00014f70: 7473 5b27 4465 7374 696e 6174 696f 6e27  ts['Destination'
+00014f80: 5d2c 0a20 2020 2020 2020 2064 7374 7572  ],.        dstur
+00014f90: 692c 0a20 2020 2029 0a0a 2020 2020 6461  i,.    )..    da
+00014fa0: 7465 5f66 6f72 6d61 7420 3d20 2725 592d  te_format = '%Y-
+00014fb0: 256d 2d25 6454 2548 3a25 4d3a 2553 2e25  %m-%dT%H:%M:%S.%
+00014fc0: 665a 270a 2020 2020 7374 6172 745f 6461  fZ'.    start_da
+00014fd0: 7465 203d 2064 6174 6574 696d 652e 6461  te = datetime.da
+00014fe0: 7465 7469 6d65 2e73 7472 7074 696d 6528  tetime.strptime(
+00014ff0: 7265 7375 6c74 735b 2753 7461 7274 275d  results['Start']
+00015000: 2c20 6461 7465 5f66 6f72 6d61 7429 0a20  , date_format). 
+00015010: 2020 2065 6e64 5f64 6174 6520 3d20 6461     end_date = da
+00015020: 7465 7469 6d65 2e64 6174 6574 696d 652e  tetime.datetime.
+00015030: 7374 7270 7469 6d65 2872 6573 756c 7473  strptime(results
+00015040: 5b27 456e 6427 5d2c 2064 6174 655f 666f  ['End'], date_fo
+00015050: 726d 6174 290a 2020 2020 7365 6c66 2e61  rmat).    self.a
+00015060: 7373 6572 7445 7175 616c 2865 6e64 5f64  ssertEqual(end_d
+00015070: 6174 6520 3e20 7374 6172 745f 6461 7465  ate > start_date
+00015080: 2c20 5472 7565 290a 0a20 2020 2069 6620  , True)..    if 
+00015090: 7365 6c66 2e52 756e 4773 5574 696c 203d  self.RunGsUtil =
+000150a0: 3d20 7465 7374 6361 7365 2e47 7355 7469  = testcase.GsUti
+000150b0: 6c49 6e74 6567 7261 7469 6f6e 5465 7374  lIntegrationTest
+000150c0: 4361 7365 2e52 756e 4773 5574 696c 3a0a  Case.RunGsUtil:.
+000150d0: 2020 2020 2020 2320 4368 6563 6b20 7468        # Check th
+000150e0: 6174 2077 6520 6469 646e 2774 2064 6f20  at we didn't do 
+000150f0: 6175 746f 6d61 7469 6320 7061 7261 6c6c  automatic parall
+00015100: 656c 2075 706c 6f61 6473 202d 2063 6f6d  el uploads - com
+00015110: 706f 7365 2064 6f65 736e 2774 0a20 2020  pose doesn't.   
+00015120: 2020 2023 2063 616c 6375 6c61 7465 2074     # calculate t
+00015130: 6865 204d 4435 2068 6173 682e 2053 696e  he MD5 hash. Sin
+00015140: 6365 2052 756e 4773 5574 696c 2069 7320  ce RunGsUtil is 
+00015150: 6f76 6572 7269 6465 6e20 696e 0a20 2020  overriden in.   
+00015160: 2020 2023 2054 6573 7443 7050 6172 616c     # TestCpParal
+00015170: 6c65 6c55 706c 6f61 6473 2074 6f20 666f  lelUploads to fo
+00015180: 7263 6520 7061 7261 6c6c 656c 2075 706c  rce parallel upl
+00015190: 6f61 6473 2c20 7765 2063 616e 2063 6865  oads, we can che
+000151a0: 636b 2077 6869 6368 0a20 2020 2020 2023  ck which.      #
+000151b0: 206d 6574 686f 6420 7761 7320 7573 6564   method was used
+000151c0: 2e0a 2020 2020 2020 7365 6c66 2e61 7373  ..      self.ass
+000151d0: 6572 7445 7175 616c 2872 6573 756c 7473  ertEqual(results
+000151e0: 5b27 4d64 3527 5d2c 2027 724c 3059 3230  ['Md5'], 'rL0Y20
+000151f0: 7a43 2b46 7a74 3732 5650 7a4d 536b 3241  zC+Fzt72VPzMSk2A
+00015200: 3d3d 2729 0a0a 2020 2020 7365 6c66 2e61  ==')..    self.a
+00015210: 7373 6572 7445 7175 616c 2869 6e74 2872  ssertEqual(int(r
+00015220: 6573 756c 7473 5b27 536f 7572 6365 2053  esults['Source S
+00015230: 697a 6527 5d29 2c20 3329 0a20 2020 2073  ize']), 3).    s
+00015240: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+00015250: 696e 7428 7265 7375 6c74 735b 2742 7974  int(results['Byt
+00015260: 6573 2054 7261 6e73 6665 7272 6564 275d  es Transferred']
+00015270: 292c 2033 290a 2020 2020 7365 6c66 2e61  ), 3).    self.a
+00015280: 7373 6572 7445 7175 616c 2872 6573 756c  ssertEqual(resul
+00015290: 7473 5b27 5265 7375 6c74 275d 2c20 274f  ts['Result'], 'O
+000152a0: 4b27 290a 0a20 2040 5365 7175 656e 7469  K')..  @Sequenti
+000152b0: 616c 416e 6450 6172 616c 6c65 6c54 7261  alAndParallelTra
+000152c0: 6e73 6665 720a 2020 6465 6620 7465 7374  nsfer.  def test
+000152d0: 5f63 705f 6d61 6e69 6665 7374 5f64 6f77  _cp_manifest_dow
+000152e0: 6e6c 6f61 6428 7365 6c66 293a 0a20 2020  nload(self):.   
+000152f0: 2022 2222 5465 7374 7320 646f 776e 6c6f   """Tests downlo
+00015300: 6164 696e 6720 7769 7468 2061 206d 616e  ading with a man
+00015310: 6966 6573 7420 6669 6c65 2e22 2222 0a20  ifest file.""". 
+00015320: 2020 206b 6579 5f75 7269 203d 2073 656c     key_uri = sel
+00015330: 662e 4372 6561 7465 4f62 6a65 6374 2863  f.CreateObject(c
+00015340: 6f6e 7465 6e74 733d 6227 666f 6f27 290a  ontents=b'foo').
+00015350: 2020 2020 6670 6174 6820 3d20 7365 6c66      fpath = self
+00015360: 2e43 7265 6174 6554 656d 7046 696c 6528  .CreateTempFile(
+00015370: 636f 6e74 656e 7473 3d62 2727 290a 2020  contents=b'').  
+00015380: 2020 6c6f 6770 6174 6820 3d20 7365 6c66    logpath = self
+00015390: 2e43 7265 6174 6554 656d 7046 696c 6528  .CreateTempFile(
+000153a0: 636f 6e74 656e 7473 3d62 2727 290a 2020  contents=b'').  
+000153b0: 2020 2320 456e 7375 7265 2074 6865 2066    # Ensure the f
+000153c0: 696c 6520 6973 2065 6d70 7479 2e0a 2020  ile is empty..  
+000153d0: 2020 6f70 656e 286c 6f67 7061 7468 2c20    open(logpath, 
+000153e0: 2777 2729 2e63 6c6f 7365 2829 0a20 2020  'w').close().   
+000153f0: 2073 656c 662e 5275 6e47 7355 7469 6c28   self.RunGsUtil(
+00015400: 0a20 2020 2020 2020 205b 2763 7027 2c20  .        ['cp', 
+00015410: 272d 4c27 2c20 6c6f 6770 6174 682c 2073  '-L', logpath, s
+00015420: 7572 6928 6b65 795f 7572 6929 2c20 6670  uri(key_uri), fp
+00015430: 6174 685d 2c20 7265 7475 726e 5f73 7464  ath], return_std
+00015440: 6f75 743d 5472 7565 290a 2020 2020 7769  out=True).    wi
+00015450: 7468 206f 7065 6e28 6c6f 6770 6174 682c  th open(logpath,
+00015460: 2027 7227 2920 6173 2066 3a0a 2020 2020   'r') as f:.    
+00015470: 2020 6c69 6e65 7320 3d20 662e 7265 6164    lines = f.read
+00015480: 6c69 6e65 7328 290a 2020 2020 6966 2073  lines().    if s
+00015490: 6978 2e50 5933 3a0a 2020 2020 2020 6465  ix.PY3:.      de
+000154a0: 636f 6465 5f6c 696e 6573 203d 205b 5d0a  code_lines = [].
+000154b0: 2020 2020 2020 666f 7220 6c69 6e65 2069        for line i
+000154c0: 6e20 6c69 6e65 733a 0a20 2020 2020 2020  n lines:.       
+000154d0: 2069 6620 6c69 6e65 2e73 7461 7274 7377   if line.startsw
+000154e0: 6974 6828 2262 2722 293a 0a20 2020 2020  ith("b'"):.     
+000154f0: 2020 2020 2073 6f6d 655f 7374 7273 203d       some_strs =
+00015500: 206c 696e 652e 7370 6c69 7428 272c 2729   line.split(',')
+00015510: 0a20 2020 2020 2020 2020 206c 696e 655f  .          line_
+00015520: 7061 7274 7320 3d20 5b5d 0a20 2020 2020  parts = [].     
+00015530: 2020 2020 2066 6f72 2073 6f6d 655f 7374       for some_st
+00015540: 7220 696e 2073 6f6d 655f 7374 7273 3a0a  r in some_strs:.
+00015550: 2020 2020 2020 2020 2020 2020 6966 2073              if s
+00015560: 6f6d 655f 7374 722e 7374 6172 7473 7769  ome_str.startswi
+00015570: 7468 2822 6227 2229 3a0a 2020 2020 2020  th("b'"):.      
+00015580: 2020 2020 2020 2020 6c69 6e65 5f70 6172          line_par
+00015590: 7473 2e61 7070 656e 6428 6173 742e 6c69  ts.append(ast.li
+000155a0: 7465 7261 6c5f 6576 616c 2873 6f6d 655f  teral_eval(some_
+000155b0: 7374 7229 2e64 6563 6f64 6528 5554 4638  str).decode(UTF8
+000155c0: 2929 0a20 2020 2020 2020 2020 2020 2065  )).            e
+000155d0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+000155e0: 2020 206c 696e 655f 7061 7274 732e 6170     line_parts.ap
+000155f0: 7065 6e64 2873 6f6d 655f 7374 7229 0a20  pend(some_str). 
+00015600: 2020 2020 2020 2020 2064 6563 6f64 655f           decode_
+00015610: 6c69 6e65 732e 6170 7065 6e64 2827 2c27  lines.append(','
+00015620: 2e6a 6f69 6e28 6c69 6e65 5f70 6172 7473  .join(line_parts
+00015630: 2929 0a20 2020 2020 2020 2065 6c73 653a  )).        else:
+00015640: 0a20 2020 2020 2020 2020 2064 6563 6f64  .          decod
+00015650: 655f 6c69 6e65 732e 6170 7065 6e64 286c  e_lines.append(l
+00015660: 696e 6529 0a20 2020 2020 206c 696e 6573  ine).      lines
+00015670: 203d 2064 6563 6f64 655f 6c69 6e65 730a   = decode_lines.
+00015680: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+00015690: 7175 616c 286c 656e 286c 696e 6573 292c  qual(len(lines),
+000156a0: 2032 290a 0a20 2020 2065 7870 6563 7465   2)..    expecte
+000156b0: 645f 6865 6164 6572 7320 3d20 5b0a 2020  d_headers = [.  
+000156c0: 2020 2020 2020 2753 6f75 7263 6527 2c20        'Source', 
+000156d0: 2744 6573 7469 6e61 7469 6f6e 272c 2027  'Destination', '
+000156e0: 5374 6172 7427 2c20 2745 6e64 272c 2027  Start', 'End', '
+000156f0: 4d64 3527 2c20 2755 706c 6f61 6449 6427  Md5', 'UploadId'
+00015700: 2c0a 2020 2020 2020 2020 2753 6f75 7263  ,.        'Sourc
+00015710: 6520 5369 7a65 272c 2027 4279 7465 7320  e Size', 'Bytes 
+00015720: 5472 616e 7366 6572 7265 6427 2c20 2752  Transferred', 'R
+00015730: 6573 756c 7427 2c20 2744 6573 6372 6970  esult', 'Descrip
+00015740: 7469 6f6e 270a 2020 2020 5d0a 2020 2020  tion'.    ].    
+00015750: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+00015760: 2865 7870 6563 7465 645f 6865 6164 6572  (expected_header
+00015770: 732c 206c 696e 6573 5b30 5d2e 7374 7269  s, lines[0].stri
+00015780: 7028 292e 7370 6c69 7428 272c 2729 290a  p().split(',')).
+00015790: 2020 2020 7265 7375 6c74 7320 3d20 6c69      results = li
+000157a0: 6e65 735b 315d 2e73 7472 6970 2829 2e73  nes[1].strip().s
+000157b0: 706c 6974 2827 2c27 290a 2020 2020 7365  plit(',').    se
+000157c0: 6c66 2e61 7373 6572 7445 7175 616c 2872  lf.assertEqual(r
+000157d0: 6573 756c 7473 5b30 5d5b 3a35 5d2c 2027  esults[0][:5], '
+000157e0: 2573 3a2f 2f27 2025 2073 656c 662e 6465  %s://' % self.de
+000157f0: 6661 756c 745f 7072 6f76 6964 6572 2920  fault_provider) 
+00015800: 2023 2073 6f75 7263 650a 2020 2020 7365   # source.    se
+00015810: 6c66 2e61 7373 6572 7445 7175 616c 2872  lf.assertEqual(r
+00015820: 6573 756c 7473 5b31 5d5b 3a37 5d2c 2027  esults[1][:7], '
+00015830: 6669 6c65 3a2f 2f27 2920 2023 2064 6573  file://')  # des
+00015840: 7469 6e61 7469 6f6e 0a20 2020 2064 6174  tination.    dat
+00015850: 655f 666f 726d 6174 203d 2027 2559 2d25  e_format = '%Y-%
+00015860: 6d2d 2564 5425 483a 254d 3a25 532e 2566  m-%dT%H:%M:%S.%f
+00015870: 5a27 0a20 2020 2073 7461 7274 5f64 6174  Z'.    start_dat
+00015880: 6520 3d20 6461 7465 7469 6d65 2e64 6174  e = datetime.dat
+00015890: 6574 696d 652e 7374 7270 7469 6d65 2872  etime.strptime(r
+000158a0: 6573 756c 7473 5b32 5d2c 2064 6174 655f  esults[2], date_
+000158b0: 666f 726d 6174 290a 2020 2020 656e 645f  format).    end_
+000158c0: 6461 7465 203d 2064 6174 6574 696d 652e  date = datetime.
+000158d0: 6461 7465 7469 6d65 2e73 7472 7074 696d  datetime.strptim
+000158e0: 6528 7265 7375 6c74 735b 335d 2c20 6461  e(results[3], da
+000158f0: 7465 5f66 6f72 6d61 7429 0a20 2020 2073  te_format).    s
+00015900: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+00015910: 656e 645f 6461 7465 203e 2073 7461 7274  end_date > start
+00015920: 5f64 6174 652c 2054 7275 6529 0a20 2020  _date, True).   
+00015930: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+00015940: 6c28 696e 7428 7265 7375 6c74 735b 365d  l(int(results[6]
+00015950: 292c 2033 2920 2023 2053 6f75 7263 6520  ), 3)  # Source 
+00015960: 5369 7a65 0a20 2020 2023 2042 7974 6573  Size.    # Bytes
+00015970: 2074 7261 6e73 6665 7272 6564 206d 6967   transferred mig
+00015980: 6874 2062 6520 6d6f 7265 2074 6861 6e20  ht be more than 
+00015990: 3320 6966 2074 6865 2066 696c 6520 7761  3 if the file wa
+000159a0: 7320 677a 6970 7065 642c 2073 696e 6365  s gzipped, since
+000159b0: 0a20 2020 2023 2074 6865 206d 696e 696d  .    # the minim
+000159c0: 756d 2067 7a69 7020 6865 6164 6572 2069  um gzip header i
+000159d0: 7320 3130 2062 7974 6573 2e0a 2020 2020  s 10 bytes..    
+000159e0: 7365 6c66 2e61 7373 6572 7447 7265 6174  self.assertGreat
+000159f0: 6572 4571 7561 6c28 696e 7428 7265 7375  erEqual(int(resu
+00015a00: 6c74 735b 375d 292c 2033 2920 2023 2042  lts[7]), 3)  # B
+00015a10: 7974 6573 2054 7261 6e73 6665 7272 6564  ytes Transferred
+00015a20: 0a20 2020 2073 656c 662e 6173 7365 7274  .    self.assert
+00015a30: 4571 7561 6c28 7265 7375 6c74 735b 385d  Equal(results[8]
+00015a40: 2c20 274f 4b27 2920 2023 2052 6573 756c  , 'OK')  # Resul
+00015a50: 740a 0a20 2040 5365 7175 656e 7469 616c  t..  @Sequential
+00015a60: 416e 6450 6172 616c 6c65 6c54 7261 6e73  AndParallelTrans
+00015a70: 6665 720a 2020 6465 6620 7465 7374 5f63  fer.  def test_c
+00015a80: 6f70 795f 756e 6963 6f64 655f 6e6f 6e5f  opy_unicode_non_
+00015a90: 6173 6369 695f 6669 6c65 6e61 6d65 2873  ascii_filename(s
+00015aa0: 656c 6629 3a0a 2020 2020 6b65 795f 7572  elf):.    key_ur
+00015ab0: 6920 3d20 7365 6c66 2e43 7265 6174 654f  i = self.CreateO
+00015ac0: 626a 6563 7428 290a 2020 2020 2320 5472  bject().    # Tr
+00015ad0: 7920 7769 7468 2061 6e64 2077 6974 686f  y with and witho
+00015ae0: 7574 2072 6573 756d 6162 6c65 2075 706c  ut resumable upl
+00015af0: 6f61 6420 7468 7265 7368 6f6c 642c 2074  oad threshold, t
+00015b00: 6f20 656e 7375 7265 2074 6861 7420 6561  o ensure that ea
+00015b10: 6368 0a20 2020 2023 2073 6365 6e61 7269  ch.    # scenari
+00015b20: 6f20 776f 726b 732e 2049 6e20 7061 7274  o works. In part
+00015b30: 6963 756c 6172 2c20 7265 7375 6d61 626c  icular, resumabl
+00015b40: 6520 7570 6c6f 6164 7320 6861 7665 2074  e uploads have t
+00015b50: 7261 636b 6572 2066 696c 656e 616d 650a  racker filename.
+00015b60: 2020 2020 2320 6c6f 6769 632e 0a20 2020      # logic..   
+00015b70: 2066 696c 655f 636f 6e74 656e 7473 203d   file_contents =
+00015b80: 2062 2778 2720 2a20 5354 4152 545f 4341   b'x' * START_CA
+00015b90: 4c4c 4241 434b 5f50 4552 5f42 5954 4553  LLBACK_PER_BYTES
+00015ba0: 202a 2032 0a20 2020 2066 7061 7468 203d   * 2.    fpath =
+00015bb0: 2073 656c 662e 4372 6561 7465 5465 6d70   self.CreateTemp
+00015bc0: 4669 6c65 2866 696c 655f 6e61 6d65 3d27  File(file_name='
+00015bd0: d090 d183 d0b4 d0b8 d0be d0b0 d180 d185  ................
+00015be0: d0b8 d0b2 272c 2063 6f6e 7465 6e74 733d  ....', contents=
+00015bf0: 6669 6c65 5f63 6f6e 7465 6e74 7329 0a20  file_contents). 
+00015c00: 2020 2077 6974 6820 5365 7442 6f74 6f43     with SetBotoC
+00015c10: 6f6e 6669 6746 6f72 5465 7374 285b 2827  onfigForTest([('
+00015c20: 4753 5574 696c 272c 2027 7265 7375 6d61  GSUtil', 'resuma
+00015c30: 626c 655f 7468 7265 7368 6f6c 6427 2c20  ble_threshold', 
+00015c40: 2731 2729 5d29 3a0a 2020 2020 2020 2320  '1')]):.      # 
+00015c50: 6670 6174 685f 6279 7465 7320 3d20 6670  fpath_bytes = fp
+00015c60: 6174 682e 656e 636f 6465 2855 5446 3829  ath.encode(UTF8)
+00015c70: 0a20 2020 2020 2073 656c 662e 5275 6e47  .      self.RunG
+00015c80: 7355 7469 6c28 5b27 6370 272c 2066 7061  sUtil(['cp', fpa
+00015c90: 7468 2c20 7375 7269 286b 6579 5f75 7269  th, suri(key_uri
+00015ca0: 295d 2c20 7265 7475 726e 5f73 7464 6572  )], return_stder
+00015cb0: 723d 5472 7565 290a 2020 2020 2020 7374  r=True).      st
+00015cc0: 646f 7574 203d 2073 656c 662e 5275 6e47  dout = self.RunG
+00015cd0: 7355 7469 6c28 5b27 6361 7427 2c20 7375  sUtil(['cat', su
+00015ce0: 7269 286b 6579 5f75 7269 295d 2c0a 2020  ri(key_uri)],.  
+00015cf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015d00: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00015d10: 726e 5f73 7464 6f75 743d 5472 7565 2c0a  rn_stdout=True,.
+00015d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015d30: 2020 2020 2020 2020 2020 2020 2020 666f                fo
+00015d40: 7263 655f 6773 7574 696c 3d54 7275 6529  rce_gsutil=True)
+00015d50: 0a20 2020 2020 2073 656c 662e 6173 7365  .      self.asse
+00015d60: 7274 4571 7561 6c73 2873 7464 6f75 742e  rtEquals(stdout.
+00015d70: 656e 636f 6465 2827 6173 6369 6927 292c  encode('ascii'),
+00015d80: 2066 696c 655f 636f 6e74 656e 7473 290a   file_contents).
+00015d90: 2020 2020 7769 7468 2053 6574 426f 746f      with SetBoto
+00015da0: 436f 6e66 6967 466f 7254 6573 7428 5b28  ConfigForTest([(
+00015db0: 2747 5355 7469 6c27 2c20 2772 6573 756d  'GSUtil', 'resum
+00015dc0: 6162 6c65 5f74 6872 6573 686f 6c64 272c  able_threshold',
+00015dd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00015de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015df0: 2073 7472 2853 5441 5254 5f43 414c 4c42   str(START_CALLB
+00015e00: 4143 4b5f 5045 525f 4259 5445 5320 2a20  ACK_PER_BYTES * 
+00015e10: 3329 295d 293a 0a20 2020 2020 2073 656c  3))]):.      sel
+00015e20: 662e 5275 6e47 7355 7469 6c28 5b27 6370  f.RunGsUtil(['cp
+00015e30: 272c 2066 7061 7468 2c20 7375 7269 286b  ', fpath, suri(k
+00015e40: 6579 5f75 7269 295d 2c20 7265 7475 726e  ey_uri)], return
+00015e50: 5f73 7464 6572 723d 5472 7565 290a 2020  _stderr=True).  
+00015e60: 2020 2020 7374 646f 7574 203d 2073 656c      stdout = sel
+00015e70: 662e 5275 6e47 7355 7469 6c28 5b27 6361  f.RunGsUtil(['ca
+00015e80: 7427 2c20 7375 7269 286b 6579 5f75 7269  t', suri(key_uri
+00015e90: 295d 2c0a 2020 2020 2020 2020 2020 2020  )],.            
+00015ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015eb0: 2020 7265 7475 726e 5f73 7464 6f75 743d    return_stdout=
+00015ec0: 5472 7565 2c0a 2020 2020 2020 2020 2020  True,.          
+00015ed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015ee0: 2020 2020 666f 7263 655f 6773 7574 696c      force_gsutil
+00015ef0: 3d54 7275 6529 0a20 2020 2020 2073 656c  =True).      sel
+00015f00: 662e 6173 7365 7274 4571 7561 6c73 2873  f.assertEquals(s
+00015f10: 7464 6f75 742e 656e 636f 6465 2827 6173  tdout.encode('as
+00015f20: 6369 6927 292c 2066 696c 655f 636f 6e74  cii'), file_cont
+00015f30: 656e 7473 290a 0a20 2023 204e 6f74 653a  ents)..  # Note:
+00015f40: 2057 6520 6f72 6967 696e 616c 6c79 206f   We originally o
+00015f50: 6e65 2074 696d 6520 696d 706c 656d 656e  ne time implemen
+00015f60: 7465 6420 6120 7465 7374 0a20 2023 2028  ted a test.  # (
+00015f70: 7465 7374 5f63 6f70 795f 696e 7661 6c69  test_copy_invali
+00015f80: 645f 756e 6963 6f64 655f 6669 6c65 6e61  d_unicode_filena
+00015f90: 6d65 2920 7468 6174 2069 6e76 616c 6964  me) that invalid
+00015fa0: 2075 6e69 636f 6465 2066 696c 656e 616d   unicode filenam
+00015fb0: 6573 2077 6572 650a 2020 2320 736b 6970  es were.  # skip
+00015fc0: 7065 642c 2062 7574 2069 7420 7475 726e  ped, but it turn
+00015fd0: 7320 6f75 7420 6f73 2e77 616c 6b28 2920  s out os.walk() 
+00015fe0: 6f6e 206d 6163 4f53 2064 6f65 736e 2774  on macOS doesn't
+00015ff0: 2068 6176 6520 7072 6f62 6c65 6d73 2077   have problems w
+00016000: 6974 680a 2020 2320 7375 6368 2066 696c  ith.  # such fil
+00016010: 6573 2028 736f 2c20 6661 696c 6564 2074  es (so, failed t
+00016020: 6861 7420 7465 7374 292e 2047 6976 656e  hat test). Given
+00016030: 2074 6861 742c 2077 6520 6465 6369 6465   that, we decide
+00016040: 6420 746f 2072 656d 6f76 6520 7468 650a  d to remove the.
+00016050: 2020 2320 7465 7374 2e0a 0a20 2040 5365    # test...  @Se
+00016060: 7175 656e 7469 616c 416e 6450 6172 616c  quentialAndParal
+00016070: 6c65 6c54 7261 6e73 6665 720a 2020 6465  lelTransfer.  de
+00016080: 6620 7465 7374 5f67 7a69 705f 7570 6c6f  f test_gzip_uplo
+00016090: 6164 5f61 6e64 5f64 6f77 6e6c 6f61 6428  ad_and_download(
+000160a0: 7365 6c66 293a 0a20 2020 2062 7563 6b65  self):.    bucke
+000160b0: 745f 7572 6920 3d20 7365 6c66 2e43 7265  t_uri = self.Cre
+000160c0: 6174 6542 7563 6b65 7428 290a 2020 2020  ateBucket().    
+000160d0: 636f 6e74 656e 7473 203d 2062 2778 2720  contents = b'x' 
+000160e0: 2a20 3130 3030 300a 2020 2020 746d 7064  * 10000.    tmpd
+000160f0: 6972 203d 2073 656c 662e 4372 6561 7465  ir = self.Create
+00016100: 5465 6d70 4469 7228 290a 2020 2020 7365  TempDir().    se
+00016110: 6c66 2e43 7265 6174 6554 656d 7046 696c  lf.CreateTempFil
+00016120: 6528 6669 6c65 5f6e 616d 653d 2774 6573  e(file_name='tes
+00016130: 742e 6874 6d6c 272c 2074 6d70 6469 723d  t.html', tmpdir=
+00016140: 746d 7064 6972 2c20 636f 6e74 656e 7473  tmpdir, contents
+00016150: 3d63 6f6e 7465 6e74 7329 0a20 2020 2073  =contents).    s
+00016160: 656c 662e 4372 6561 7465 5465 6d70 4669  elf.CreateTempFi
+00016170: 6c65 2866 696c 655f 6e61 6d65 3d27 7465  le(file_name='te
+00016180: 7374 2e6a 7327 2c20 746d 7064 6972 3d74  st.js', tmpdir=t
+00016190: 6d70 6469 722c 2063 6f6e 7465 6e74 733d  mpdir, contents=
+000161a0: 636f 6e74 656e 7473 290a 2020 2020 7365  contents).    se
+000161b0: 6c66 2e43 7265 6174 6554 656d 7046 696c  lf.CreateTempFil
+000161c0: 6528 6669 6c65 5f6e 616d 653d 2774 6573  e(file_name='tes
+000161d0: 742e 7478 7427 2c20 746d 7064 6972 3d74  t.txt', tmpdir=t
+000161e0: 6d70 6469 722c 2063 6f6e 7465 6e74 733d  mpdir, contents=
+000161f0: 636f 6e74 656e 7473 290a 2020 2020 2320  contents).    # 
+00016200: 5465 7374 2074 6861 7420 636f 7079 696e  Test that copyin
+00016210: 6720 7370 6563 6966 7969 6e67 206f 6e6c  g specifying onl
+00016220: 7920 3220 6f66 2074 6865 2033 2070 7265  y 2 of the 3 pre
+00016230: 6669 7865 7320 677a 6970 7320 7468 6520  fixes gzips the 
+00016240: 636f 7272 6563 740a 2020 2020 2320 6669  correct.    # fi
+00016250: 6c65 732c 2061 6e64 2074 6573 7420 7468  les, and test th
+00016260: 6174 2069 6e63 6c75 6469 6e67 2077 6869  at including whi
+00016270: 7465 7370 6163 6520 696e 2074 6865 2065  tespace in the e
+00016280: 7874 656e 7369 6f6e 206c 6973 7420 776f  xtension list wo
+00016290: 726b 732e 0a20 2020 2073 656c 662e 5275  rks..    self.Ru
+000162a0: 6e47 7355 7469 6c28 5b0a 2020 2020 2020  nGsUtil([.      
+000162b0: 2020 2763 7027 2c20 272d 7a27 2c20 276a    'cp', '-z', 'j
+000162c0: 732c 2068 746d 6c27 2c0a 2020 2020 2020  s, html',.      
+000162d0: 2020 6f73 2e70 6174 682e 6a6f 696e 2874    os.path.join(t
+000162e0: 6d70 6469 722c 2027 7465 7374 2e2a 2729  mpdir, 'test.*')
+000162f0: 2c0a 2020 2020 2020 2020 7375 7269 2862  ,.        suri(b
+00016300: 7563 6b65 745f 7572 6929 0a20 2020 205d  ucket_uri).    ]
+00016310: 290a 2020 2020 7365 6c66 2e41 7373 6572  ).    self.Asser
+00016320: 744e 4f62 6a65 6374 7349 6e42 7563 6b65  tNObjectsInBucke
+00016330: 7428 6275 636b 6574 5f75 7269 2c20 3329  t(bucket_uri, 3)
+00016340: 0a20 2020 2075 7269 3120 3d20 7375 7269  .    uri1 = suri
+00016350: 2862 7563 6b65 745f 7572 692c 2027 7465  (bucket_uri, 'te
+00016360: 7374 2e68 746d 6c27 290a 2020 2020 7572  st.html').    ur
+00016370: 6932 203d 2073 7572 6928 6275 636b 6574  i2 = suri(bucket
+00016380: 5f75 7269 2c20 2774 6573 742e 6a73 2729  _uri, 'test.js')
+00016390: 0a20 2020 2075 7269 3320 3d20 7375 7269  .    uri3 = suri
+000163a0: 2862 7563 6b65 745f 7572 692c 2027 7465  (bucket_uri, 'te
+000163b0: 7374 2e74 7874 2729 0a20 2020 2073 7464  st.txt').    std
+000163c0: 6f75 7420 3d20 7365 6c66 2e52 756e 4773  out = self.RunGs
+000163d0: 5574 696c 285b 2773 7461 7427 2c20 7572  Util(['stat', ur
+000163e0: 6931 5d2c 2072 6574 7572 6e5f 7374 646f  i1], return_stdo
+000163f0: 7574 3d54 7275 6529 0a20 2020 2073 656c  ut=True).    sel
+00016400: 662e 6173 7365 7274 5265 6765 7828 7374  f.assertRegex(st
+00016410: 646f 7574 2c20 7227 436f 6e74 656e 742d  dout, r'Content-
+00016420: 456e 636f 6469 6e67 3a5c 732b 677a 6970  Encoding:\s+gzip
+00016430: 2729 0a20 2020 2073 7464 6f75 7420 3d20  ').    stdout = 
+00016440: 7365 6c66 2e52 756e 4773 5574 696c 285b  self.RunGsUtil([
+00016450: 2773 7461 7427 2c20 7572 6932 5d2c 2072  'stat', uri2], r
+00016460: 6574 7572 6e5f 7374 646f 7574 3d54 7275  eturn_stdout=Tru
+00016470: 6529 0a20 2020 2073 656c 662e 6173 7365  e).    self.asse
+00016480: 7274 5265 6765 7828 7374 646f 7574 2c20  rtRegex(stdout, 
+00016490: 7227 436f 6e74 656e 742d 456e 636f 6469  r'Content-Encodi
+000164a0: 6e67 3a5c 732b 677a 6970 2729 0a20 2020  ng:\s+gzip').   
+000164b0: 2073 7464 6f75 7420 3d20 7365 6c66 2e52   stdout = self.R
+000164c0: 756e 4773 5574 696c 285b 2773 7461 7427  unGsUtil(['stat'
+000164d0: 2c20 7572 6933 5d2c 2072 6574 7572 6e5f  , uri3], return_
+000164e0: 7374 646f 7574 3d54 7275 6529 0a20 2020  stdout=True).   
+000164f0: 2073 656c 662e 6173 7365 7274 4e6f 7452   self.assertNotR
+00016500: 6567 6578 2873 7464 6f75 742c 2072 2743  egex(stdout, r'C
+00016510: 6f6e 7465 6e74 2d45 6e63 6f64 696e 673a  ontent-Encoding:
+00016520: 5c73 2b67 7a69 7027 290a 2020 2020 6670  \s+gzip').    fp
+00016530: 6174 6834 203d 2073 656c 662e 4372 6561  ath4 = self.Crea
+00016540: 7465 5465 6d70 4669 6c65 2829 0a20 2020  teTempFile().   
+00016550: 2066 6f72 2075 7269 2069 6e20 2875 7269   for uri in (uri
+00016560: 312c 2075 7269 322c 2075 7269 3329 3a0a  1, uri2, uri3):.
+00016570: 2020 2020 2020 7365 6c66 2e52 756e 4773        self.RunGs
+00016580: 5574 696c 285b 2763 7027 2c20 7572 692c  Util(['cp', uri,
+00016590: 2073 7572 6928 6670 6174 6834 295d 290a   suri(fpath4)]).
+000165a0: 2020 2020 2020 7769 7468 206f 7065 6e28        with open(
+000165b0: 6670 6174 6834 2c20 2772 6227 2920 6173  fpath4, 'rb') as
+000165c0: 2066 3a0a 2020 2020 2020 2020 7365 6c66   f:.        self
+000165d0: 2e61 7373 6572 7445 7175 616c 2866 2e72  .assertEqual(f.r
+000165e0: 6561 6428 292c 2063 6f6e 7465 6e74 7329  ead(), contents)
+000165f0: 0a0a 2020 4053 6b69 7046 6f72 5333 2827  ..  @SkipForS3('
+00016600: 4e6f 2063 6f6d 7072 6573 7365 6420 7472  No compressed tr
+00016610: 616e 7370 6f72 7420 656e 636f 6469 6e67  ansport encoding
+00016620: 2073 7570 706f 7274 2066 6f72 2053 332e   support for S3.
+00016630: 2729 0a20 2040 536b 6970 466f 7258 4d4c  ').  @SkipForXML
+00016640: 2827 4e6f 2063 6f6d 7072 6573 7365 6420  ('No compressed 
+00016650: 7472 616e 7370 6f72 7420 656e 636f 6469  transport encodi
+00016660: 6e67 2073 7570 706f 7274 2066 6f72 2074  ng support for t
+00016670: 6865 2058 4d4c 2041 5049 2e27 290a 2020  he XML API.').  
+00016680: 4053 6571 7565 6e74 6961 6c41 6e64 5061  @SequentialAndPa
+00016690: 7261 6c6c 656c 5472 616e 7366 6572 0a20  rallelTransfer. 
+000166a0: 2064 6566 2074 6573 745f 677a 6970 5f74   def test_gzip_t
+000166b0: 7261 6e73 706f 7274 5f65 6e63 6f64 6564  ransport_encoded
+000166c0: 5f75 706c 6f61 645f 616e 645f 646f 776e  _upload_and_down
+000166d0: 6c6f 6164 2873 656c 6629 3a0a 2020 2020  load(self):.    
+000166e0: 2222 2254 6573 7420 677a 6970 2065 6e63  """Test gzip enc
+000166f0: 6f64 6564 2066 696c 6573 2075 706c 6f61  oded files uploa
+00016700: 6420 636f 7272 6563 746c 792e 0a0a 2020  d correctly...  
+00016710: 2020 5468 6973 2063 6865 636b 7320 7468    This checks th
+00016720: 6174 2066 696c 6573 2061 7265 206e 6f74  at files are not
+00016730: 2074 6167 6765 6420 7769 7468 2061 2067   tagged with a g
+00016740: 7a69 7020 636f 6e74 656e 7420 656e 636f  zip content enco
+00016750: 6469 6e67 2061 6e64 0a20 2020 2074 6861  ding and.    tha
+00016760: 7420 7468 6520 636f 6e74 656e 7473 206f  t the contents o
+00016770: 6620 7468 6520 6669 6c65 7320 6172 6520  f the files are 
+00016780: 756e 636f 6d70 7265 7373 6564 2069 6e20  uncompressed in 
+00016790: 4743 532e 2054 6869 7320 7465 7374 2075  GCS. This test u
+000167a0: 7365 7320 7468 650a 2020 2020 2d6a 2066  ses the.    -j f
+000167b0: 6c61 6720 746f 2074 6172 6765 7420 7370  lag to target sp
+000167c0: 6563 6966 6963 2065 7874 656e 7369 6f6e  ecific extension
+000167d0: 732e 0a20 2020 2022 2222 0a0a 2020 2020  s..    """..    
+000167e0: 6465 6620 5f63 7265 6174 655f 7465 7374  def _create_test
+000167f0: 5f64 6174 6128 293a 2020 2320 7079 6c69  _data():  # pyli
+00016800: 6e74 3a20 6469 7361 626c 653d 696e 7661  nt: disable=inva
+00016810: 6c69 642d 6e61 6d65 0a20 2020 2020 2022  lid-name.      "
+00016820: 2222 5365 7475 7020 7468 6520 6275 636b  ""Setup the buck
+00016830: 6574 2061 6e64 206c 6f63 616c 2064 6174  et and local dat
+00016840: 6120 746f 2074 6573 7420 7769 7468 2e0a  a to test with..
+00016850: 0a20 2020 2020 2052 6574 7572 6e73 3a0a  .      Returns:.
+00016860: 2020 2020 2020 2020 5472 6970 6c65 7420          Triplet 
+00016870: 636f 6e74 6169 6e69 6e67 2074 6865 2066  containing the f
+00016880: 6f6c 6c6f 7769 6e67 2076 616c 7565 733a  ollowing values:
+00016890: 0a20 2020 2020 2020 2020 2062 7563 6b65  .          bucke
+000168a0: 745f 7572 693a 2053 7472 696e 6720 5552  t_uri: String UR
+000168b0: 4920 6f66 2063 6c6f 7564 2073 746f 7261  I of cloud stora
+000168c0: 6765 2062 7563 6b65 7420 746f 2075 706c  ge bucket to upl
+000168d0: 6f61 6420 6d6f 636b 2064 6174 610a 2020  oad mock data.  
+000168e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000168f0: 2020 2020 746f 2e0a 2020 2020 2020 2020      to..        
+00016900: 2020 746d 7064 6972 3a20 5374 7269 6e67    tmpdir: String
+00016910: 2c20 7061 7468 206f 6620 6120 7465 6d70  , path of a temp
+00016920: 6f72 6172 7920 6469 7265 6374 6f72 7920  orary directory 
+00016930: 746f 2077 7269 7465 206d 6f63 6b20 6461  to write mock da
+00016940: 7461 2074 6f2e 0a20 2020 2020 2020 2020  ta to..         
+00016950: 206c 6f63 616c 5f75 7269 733a 2054 7570   local_uris: Tup
+00016960: 6c65 206f 6620 7468 7265 6520 7374 7269  le of three stri
+00016970: 6e67 733b 2065 6163 6820 6973 2074 6865  ngs; each is the
+00016980: 2066 696c 6520 7061 7468 2074 6f20 6120   file path to a 
+00016990: 6669 6c65 0a20 2020 2020 2020 2020 2020  file.           
+000169a0: 2020 2020 2020 2020 2020 2063 6f6e 7461             conta
+000169b0: 696e 696e 6720 6d6f 636b 2064 6174 612e  ining mock data.
+000169c0: 0a20 2020 2020 2022 2222 0a20 2020 2020  .      """.     
+000169d0: 2062 7563 6b65 745f 7572 6920 3d20 7365   bucket_uri = se
+000169e0: 6c66 2e43 7265 6174 6542 7563 6b65 7428  lf.CreateBucket(
+000169f0: 290a 2020 2020 2020 636f 6e74 656e 7473  ).      contents
+00016a00: 203d 2062 2778 2720 2a20 3130 3030 300a   = b'x' * 10000.
+00016a10: 2020 2020 2020 746d 7064 6972 203d 2073        tmpdir = s
+00016a20: 656c 662e 4372 6561 7465 5465 6d70 4469  elf.CreateTempDi
+00016a30: 7228 290a 0a20 2020 2020 206c 6f63 616c  r()..      local
+00016a40: 5f75 7269 7320 3d20 5b5d 0a20 2020 2020  _uris = [].     
+00016a50: 2066 6f72 2066 696c 656e 616d 6520 696e   for filename in
+00016a60: 2028 2774 6573 742e 6874 6d6c 272c 2027   ('test.html', '
+00016a70: 7465 7374 2e6a 7327 2c20 2774 6573 742e  test.js', 'test.
+00016a80: 7478 7427 293a 0a20 2020 2020 2020 206c  txt'):.        l
+00016a90: 6f63 616c 5f75 7269 732e 6170 7065 6e64  ocal_uris.append
+00016aa0: 280a 2020 2020 2020 2020 2020 2020 7365  (.            se
+00016ab0: 6c66 2e43 7265 6174 6554 656d 7046 696c  lf.CreateTempFil
+00016ac0: 6528 6669 6c65 5f6e 616d 653d 6669 6c65  e(file_name=file
+00016ad0: 6e61 6d65 2c0a 2020 2020 2020 2020 2020  name,.          
+00016ae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016af0: 2020 2020 2020 746d 7064 6972 3d74 6d70        tmpdir=tmp
+00016b00: 6469 722c 0a20 2020 2020 2020 2020 2020  dir,.           
+00016b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016b20: 2020 2020 2063 6f6e 7465 6e74 733d 636f       contents=co
+00016b30: 6e74 656e 7473 2929 0a0a 2020 2020 2020  ntents))..      
+00016b40: 7265 7475 726e 2028 6275 636b 6574 5f75  return (bucket_u
+00016b50: 7269 2c20 746d 7064 6972 2c20 6c6f 6361  ri, tmpdir, loca
+00016b60: 6c5f 7572 6973 290a 0a20 2020 2064 6566  l_uris)..    def
+00016b70: 205f 7570 6c6f 6164 5f74 6573 745f 6461   _upload_test_da
+00016b80: 7461 2874 6d70 6469 722c 2062 7563 6b65  ta(tmpdir, bucke
+00016b90: 745f 7572 6929 3a20 2023 2070 796c 696e  t_uri):  # pylin
+00016ba0: 743a 2064 6973 6162 6c65 3d69 6e76 616c  t: disable=inval
+00016bb0: 6964 2d6e 616d 650a 2020 2020 2020 2222  id-name.      ""
+00016bc0: 2255 706c 6f61 6420 6c6f 6361 6c20 7465  "Upload local te
+00016bd0: 7374 2064 6174 612e 0a0a 2020 2020 2020  st data...      
+00016be0: 4172 6773 3a0a 2020 2020 2020 2020 746d  Args:.        tm
+00016bf0: 7064 6972 3a20 5374 7269 6e67 2c20 7061  pdir: String, pa
+00016c00: 7468 206f 6620 6120 7465 6d70 6f72 6172  th of a temporar
+00016c10: 7920 6469 7265 6374 6f72 7920 746f 2077  y directory to w
+00016c20: 7269 7465 206d 6f63 6b20 6461 7461 2074  rite mock data t
+00016c30: 6f2e 0a20 2020 2020 2020 2062 7563 6b65  o..        bucke
+00016c40: 745f 7572 693a 2053 7472 696e 6720 5552  t_uri: String UR
+00016c50: 4920 6f66 2063 6c6f 7564 2073 746f 7261  I of cloud stora
+00016c60: 6765 2062 7563 6b65 7420 746f 2075 706c  ge bucket to upl
+00016c70: 6f61 6420 6d6f 636b 2064 6174 6120 746f  oad mock data to
+00016c80: 2e0a 0a20 2020 2020 2052 6574 7572 6e73  ...      Returns
+00016c90: 3a0a 2020 2020 2020 2020 7374 6465 7272  :.        stderr
+00016ca0: 3a20 5374 7269 6e67 206f 7574 7075 7420  : String output 
+00016cb0: 6672 6f6d 2072 756e 6e69 6e67 2074 6865  from running the
+00016cc0: 2067 7375 7469 6c20 636f 6d6d 616e 6420   gsutil command 
+00016cd0: 746f 2075 706c 6f61 6420 6d6f 636b 0a20  to upload mock. 
+00016ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016cf0: 2064 6174 612e 0a20 2020 2020 2022 2222   data..      """
+00016d00: 0a20 2020 2020 2073 7464 6572 7220 3d20  .      stderr = 
+00016d10: 7365 6c66 2e52 756e 4773 5574 696c 285b  self.RunGsUtil([
+00016d20: 0a20 2020 2020 2020 2020 2027 2d44 272c  .          '-D',
+00016d30: 2027 6370 272c 2027 2d6a 272c 2027 6a73   'cp', '-j', 'js
+00016d40: 2c20 6874 6d6c 272c 0a20 2020 2020 2020  , html',.       
+00016d50: 2020 206f 732e 7061 7468 2e6a 6f69 6e28     os.path.join(
+00016d60: 746d 7064 6972 2c20 2774 6573 742a 2729  tmpdir, 'test*')
+00016d70: 2c0a 2020 2020 2020 2020 2020 7375 7269  ,.          suri
+00016d80: 2862 7563 6b65 745f 7572 6929 0a20 2020  (bucket_uri).   
+00016d90: 2020 205d 2c0a 2020 2020 2020 2020 2020     ],.          
+00016da0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016db0: 2020 2020 7265 7475 726e 5f73 7464 6572      return_stder
+00016dc0: 723d 5472 7565 290a 2020 2020 2020 7365  r=True).      se
+00016dd0: 6c66 2e41 7373 6572 744e 4f62 6a65 6374  lf.AssertNObject
+00016de0: 7349 6e42 7563 6b65 7428 6275 636b 6574  sInBucket(bucket
+00016df0: 5f75 7269 2c20 3329 0a20 2020 2020 2072  _uri, 3).      r
+00016e00: 6574 7572 6e20 7374 6465 7272 0a0a 2020  eturn stderr..  
+00016e10: 2020 6465 6620 5f61 7373 6572 745f 7365    def _assert_se
+00016e20: 6e74 5f63 6f6d 7072 6573 7365 6428 6c6f  nt_compressed(lo
+00016e30: 6361 6c5f 7572 6973 2c20 7374 6465 7272  cal_uris, stderr
+00016e40: 293a 2020 2320 7079 6c69 6e74 3a20 6469  ):  # pylint: di
+00016e50: 7361 626c 653d 696e 7661 6c69 642d 6e61  sable=invalid-na
+00016e60: 6d65 0a20 2020 2020 2022 2222 456e 7375  me.      """Ensu
+00016e70: 7265 2074 6865 2063 6f72 7265 6374 2066  re the correct f
+00016e80: 696c 6573 2077 6572 6520 6d61 726b 6564  iles were marked
+00016e90: 2066 6f72 2063 6f6d 7072 6573 7369 6f6e   for compression
+00016ea0: 2e0a 0a20 2020 2020 2041 7267 733a 0a20  ...      Args:. 
+00016eb0: 2020 2020 2020 206c 6f63 616c 5f75 7269         local_uri
+00016ec0: 733a 2054 7570 6c65 206f 6620 7468 7265  s: Tuple of thre
+00016ed0: 6520 7374 7269 6e67 733b 2065 6163 6820  e strings; each 
+00016ee0: 6973 2074 6865 2066 696c 6520 7061 7468  is the file path
+00016ef0: 2074 6f20 6120 6669 6c65 0a20 2020 2020   to a file.     
+00016f00: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+00016f10: 6f6e 7461 696e 696e 6720 6d6f 636b 2064  ontaining mock d
+00016f20: 6174 612e 0a20 2020 2020 2020 2073 7464  ata..        std
+00016f30: 6572 723a 2053 7472 696e 6720 6f75 7470  err: String outp
+00016f40: 7574 2066 726f 6d20 7275 6e6e 696e 6720  ut from running 
+00016f50: 7468 6520 6773 7574 696c 2063 6f6d 6d61  the gsutil comma
+00016f60: 6e64 2074 6f20 7570 6c6f 6164 206d 6f63  nd to upload moc
+00016f70: 6b0a 2020 2020 2020 2020 2020 2020 2020  k.              
+00016f80: 2020 6461 7461 2e0a 2020 2020 2020 2222    data..      ""
+00016f90: 220a 2020 2020 2020 6c6f 6361 6c5f 7572  ".      local_ur
+00016fa0: 695f 6874 6d6c 2c20 6c6f 6361 6c5f 7572  i_html, local_ur
+00016fb0: 695f 6a73 2c20 6c6f 6361 6c5f 7572 695f  i_js, local_uri_
+00016fc0: 7478 7420 3d20 6c6f 6361 6c5f 7572 6973  txt = local_uris
+00016fd0: 0a20 2020 2020 2061 7373 6572 745f 6261  .      assert_ba
+00016fe0: 7365 5f73 7472 696e 6720 3d20 2755 7369  se_string = 'Usi
+00016ff0: 6e67 2063 6f6d 7072 6573 7365 6420 7472  ng compressed tr
+00017000: 616e 7370 6f72 7420 656e 636f 6469 6e67  ansport encoding
+00017010: 2066 6f72 2066 696c 653a 2f2f 7b7d 2e27   for file://{}.'
+00017020: 0a20 2020 2020 2073 656c 662e 6173 7365  .      self.asse
+00017030: 7274 496e 2861 7373 6572 745f 6261 7365  rtIn(assert_base
+00017040: 5f73 7472 696e 672e 666f 726d 6174 286c  _string.format(l
+00017050: 6f63 616c 5f75 7269 5f68 746d 6c29 2c20  ocal_uri_html), 
+00017060: 7374 6465 7272 290a 2020 2020 2020 7365  stderr).      se
+00017070: 6c66 2e61 7373 6572 7449 6e28 6173 7365  lf.assertIn(asse
+00017080: 7274 5f62 6173 655f 7374 7269 6e67 2e66  rt_base_string.f
+00017090: 6f72 6d61 7428 6c6f 6361 6c5f 7572 695f  ormat(local_uri_
+000170a0: 6a73 292c 2073 7464 6572 7229 0a20 2020  js), stderr).   
+000170b0: 2020 2073 656c 662e 6173 7365 7274 4e6f     self.assertNo
+000170c0: 7449 6e28 6173 7365 7274 5f62 6173 655f  tIn(assert_base_
+000170d0: 7374 7269 6e67 2e66 6f72 6d61 7428 6c6f  string.format(lo
+000170e0: 6361 6c5f 7572 695f 7478 7429 2c20 7374  cal_uri_txt), st
+000170f0: 6465 7272 290a 0a20 2020 2064 6566 205f  derr)..    def _
+00017100: 6173 7365 7274 5f73 746f 7265 645f 756e  assert_stored_un
+00017110: 636f 6d70 7265 7373 6564 2862 7563 6b65  compressed(bucke
+00017120: 745f 7572 692c 2063 6f6e 7465 6e74 733d  t_uri, contents=
+00017130: 6227 7827 202a 2031 3030 3030 293a 2020  b'x' * 10000):  
+00017140: 2320 7079 6c69 6e74 3a20 6469 7361 626c  # pylint: disabl
+00017150: 653d 696e 7661 6c69 642d 6e61 6d65 0a20  e=invalid-name. 
+00017160: 2020 2020 2022 2222 456e 7375 7265 2074       """Ensure t
+00017170: 6865 2066 696c 6573 2061 7265 206e 6f74  he files are not
+00017180: 2063 6f6d 7072 6573 7365 6420 7768 656e   compressed when
+00017190: 2074 6865 7920 6172 6520 7374 6f72 6564   they are stored
+000171a0: 2069 6e20 7468 6520 6275 636b 6574 2e0a   in the bucket..
+000171b0: 0a20 2020 2020 2041 7267 733a 0a20 2020  .      Args:.   
+000171c0: 2020 2020 2062 7563 6b65 745f 7572 693a       bucket_uri:
+000171d0: 2053 7472 696e 6720 7769 7468 2055 5249   String with URI
+000171e0: 2066 6f72 2062 7563 6b65 7420 636f 6e74   for bucket cont
+000171f0: 6169 6e69 6e67 2075 706c 6f61 6465 6420  aining uploaded 
+00017200: 7465 7374 2064 6174 612e 0a20 2020 2020  test data..     
+00017210: 2020 2063 6f6e 7465 6e74 733a 2042 7974     contents: Byt
+00017220: 6520 7374 7269 6e67 2074 6861 7420 6172  e string that ar
+00017230: 6520 7374 6f72 6564 2069 6e20 6561 6368  e stored in each
+00017240: 2066 696c 6520 696e 2074 6865 2062 7563   file in the buc
+00017250: 6b65 742e 0a20 2020 2020 2022 2222 0a20  ket..      """. 
+00017260: 2020 2020 206c 6f63 616c 5f75 7269 5f68       local_uri_h
+00017270: 746d 6c20 3d20 7375 7269 2862 7563 6b65  tml = suri(bucke
+00017280: 745f 7572 692c 2027 7465 7374 2e68 746d  t_uri, 'test.htm
+00017290: 6c27 290a 2020 2020 2020 6c6f 6361 6c5f  l').      local_
+000172a0: 7572 695f 6a73 203d 2073 7572 6928 6275  uri_js = suri(bu
+000172b0: 636b 6574 5f75 7269 2c20 2774 6573 742e  cket_uri, 'test.
+000172c0: 6a73 2729 0a20 2020 2020 206c 6f63 616c  js').      local
+000172d0: 5f75 7269 5f74 7874 203d 2073 7572 6928  _uri_txt = suri(
+000172e0: 6275 636b 6574 5f75 7269 2c20 2774 6573  bucket_uri, 'tes
+000172f0: 742e 7478 7427 290a 2020 2020 2020 6670  t.txt').      fp
+00017300: 6174 6834 203d 2073 656c 662e 4372 6561  ath4 = self.Crea
+00017310: 7465 5465 6d70 4669 6c65 2829 0a0a 2020  teTempFile()..  
+00017320: 2020 2020 666f 7220 7572 6920 696e 2028      for uri in (
+00017330: 6c6f 6361 6c5f 7572 695f 6874 6d6c 2c20  local_uri_html, 
+00017340: 6c6f 6361 6c5f 7572 695f 6a73 2c20 6c6f  local_uri_js, lo
+00017350: 6361 6c5f 7572 695f 7478 7429 3a0a 2020  cal_uri_txt):.  
+00017360: 2020 2020 2020 7374 646f 7574 203d 2073        stdout = s
+00017370: 656c 662e 5275 6e47 7355 7469 6c28 5b27  elf.RunGsUtil(['
+00017380: 7374 6174 272c 2075 7269 5d2c 2072 6574  stat', uri], ret
+00017390: 7572 6e5f 7374 646f 7574 3d54 7275 6529  urn_stdout=True)
+000173a0: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+000173b0: 7365 7274 4e6f 7452 6567 6578 2873 7464  sertNotRegex(std
+000173c0: 6f75 742c 2072 2743 6f6e 7465 6e74 2d45  out, r'Content-E
+000173d0: 6e63 6f64 696e 673a 5c73 2b67 7a69 7027  ncoding:\s+gzip'
+000173e0: 290a 2020 2020 2020 2020 7365 6c66 2e52  ).        self.R
+000173f0: 756e 4773 5574 696c 285b 2763 7027 2c20  unGsUtil(['cp', 
+00017400: 7572 692c 2073 7572 6928 6670 6174 6834  uri, suri(fpath4
+00017410: 295d 290a 2020 2020 2020 2020 7769 7468  )]).        with
+00017420: 206f 7065 6e28 6670 6174 6834 2c20 2772   open(fpath4, 'r
+00017430: 6227 2920 6173 2066 3a0a 2020 2020 2020  b') as f:.      
+00017440: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+00017450: 7175 616c 2866 2e72 6561 6428 292c 2063  qual(f.read(), c
+00017460: 6f6e 7465 6e74 7329 0a0a 2020 2020 2320  ontents)..    # 
+00017470: 4765 7420 6d6f 636b 2064 6174 612c 2072  Get mock data, r
+00017480: 756e 2074 6573 7473 0a20 2020 2062 7563  un tests.    buc
+00017490: 6b65 745f 7572 692c 2074 6d70 6469 722c  ket_uri, tmpdir,
+000174a0: 206c 6f63 616c 5f75 7269 7320 3d20 5f63   local_uris = _c
+000174b0: 7265 6174 655f 7465 7374 5f64 6174 6128  reate_test_data(
+000174c0: 290a 2020 2020 7374 6465 7272 203d 205f  ).    stderr = _
+000174d0: 7570 6c6f 6164 5f74 6573 745f 6461 7461  upload_test_data
+000174e0: 2874 6d70 6469 722c 2062 7563 6b65 745f  (tmpdir, bucket_
+000174f0: 7572 6929 0a20 2020 205f 6173 7365 7274  uri).    _assert
+00017500: 5f73 656e 745f 636f 6d70 7265 7373 6564  _sent_compressed
+00017510: 286c 6f63 616c 5f75 7269 732c 2073 7464  (local_uris, std
+00017520: 6572 7229 0a20 2020 205f 6173 7365 7274  err).    _assert
+00017530: 5f73 746f 7265 645f 756e 636f 6d70 7265  _stored_uncompre
+00017540: 7373 6564 2862 7563 6b65 745f 7572 6929  ssed(bucket_uri)
+00017550: 0a0a 2020 4053 6b69 7046 6f72 5333 2827  ..  @SkipForS3('
+00017560: 4e6f 2063 6f6d 7072 6573 7365 6420 7472  No compressed tr
+00017570: 616e 7370 6f72 7420 656e 636f 6469 6e67  ansport encoding
+00017580: 2073 7570 706f 7274 2066 6f72 2053 332e   support for S3.
+00017590: 2729 0a20 2040 536b 6970 466f 7258 4d4c  ').  @SkipForXML
+000175a0: 2827 4e6f 2063 6f6d 7072 6573 7365 6420  ('No compressed 
+000175b0: 7472 616e 7370 6f72 7420 656e 636f 6469  transport encodi
+000175c0: 6e67 2073 7570 706f 7274 2066 6f72 2074  ng support for t
+000175d0: 6865 2058 4d4c 2041 5049 2e27 290a 2020  he XML API.').  
+000175e0: 4053 6571 7565 6e74 6961 6c41 6e64 5061  @SequentialAndPa
+000175f0: 7261 6c6c 656c 5472 616e 7366 6572 0a20  rallelTransfer. 
+00017600: 2064 6566 2074 6573 745f 677a 6970 5f74   def test_gzip_t
+00017610: 7261 6e73 706f 7274 5f65 6e63 6f64 6564  ransport_encoded
+00017620: 5f70 6172 616c 6c65 6c5f 7570 6c6f 6164  _parallel_upload
+00017630: 5f6e 6f6e 5f72 6573 756d 6162 6c65 2873  _non_resumable(s
+00017640: 656c 6629 3a0a 2020 2020 2222 2254 6573  elf):.    """Tes
+00017650: 7420 6e6f 6e20 7265 7375 6d61 626c 652c  t non resumable,
+00017660: 2067 7a69 7020 656e 636f 6465 6420 6669   gzip encoded fi
+00017670: 6c65 7320 7570 6c6f 6164 2063 6f72 7265  les upload corre
+00017680: 6374 6c79 2069 6e20 7061 7261 6c6c 656c  ctly in parallel
+00017690: 2e0a 0a20 2020 2054 6869 7320 7465 7374  ...    This test
+000176a0: 2067 656e 6572 6174 6573 2061 2073 6d61   generates a sma
+000176b0: 6c6c 2061 6d6f 756e 7420 6f66 2064 6174  ll amount of dat
+000176c0: 6120 2865 2e67 2e20 3130 3020 6368 6172  a (e.g. 100 char
+000176d0: 7329 2074 6f20 7570 6c6f 6164 2e0a 2020  s) to upload..  
+000176e0: 2020 4475 6520 746f 2074 6865 2073 6d61    Due to the sma
+000176f0: 6c6c 2073 697a 652c 2069 7420 7769 6c6c  ll size, it will
+00017700: 2062 6520 6265 6c6f 7720 7468 6520 7265   be below the re
+00017710: 7375 6d61 626c 6520 7468 7265 7368 6f6c  sumable threshol
+00017720: 642c 0a20 2020 2061 6e64 2074 6573 7420  d,.    and test 
+00017730: 7468 6520 6265 6861 7669 6f72 206f 6620  the behavior of 
+00017740: 6e6f 6e2d 7265 7375 6d61 626c 6520 7570  non-resumable up
+00017750: 6c6f 6164 732e 0a20 2020 2022 2222 0a20  loads..    """. 
+00017760: 2020 2023 2053 6574 7570 2074 6865 2062     # Setup the b
+00017770: 7563 6b65 7420 616e 6420 6c6f 6361 6c20  ucket and local 
+00017780: 6461 7461 2e0a 2020 2020 6275 636b 6574  data..    bucket
+00017790: 5f75 7269 203d 2073 656c 662e 4372 6561  _uri = self.Crea
+000177a0: 7465 4275 636b 6574 2829 0a20 2020 2063  teBucket().    c
+000177b0: 6f6e 7465 6e74 7320 3d20 6227 7827 202a  ontents = b'x' *
+000177c0: 2031 3030 0a20 2020 2074 6d70 6469 7220   100.    tmpdir 
+000177d0: 3d20 7365 6c66 2e43 7265 6174 6554 656d  = self.CreateTem
+000177e0: 7044 6972 2874 6573 745f 6669 6c65 733d  pDir(test_files=
+000177f0: 3130 2c20 636f 6e74 656e 7473 3d63 6f6e  10, contents=con
+00017800: 7465 6e74 7329 0a20 2020 2023 2055 706c  tents).    # Upl
+00017810: 6f61 6420 7468 6520 6461 7461 2e0a 2020  oad the data..  
+00017820: 2020 7769 7468 2053 6574 426f 746f 436f    with SetBotoCo
+00017830: 6e66 6967 466f 7254 6573 7428 5b28 2747  nfigForTest([('G
+00017840: 5355 7469 6c27 2c20 2772 6573 756d 6162  SUtil', 'resumab
+00017850: 6c65 5f74 6872 6573 686f 6c64 272c 2073  le_threshold', s
+00017860: 7472 284f 4e45 5f4b 4942 2929 0a20 2020  tr(ONE_KIB)).   
+00017870: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017880: 2020 2020 2020 2020 2020 205d 293a 0a20             ]):. 
+00017890: 2020 2020 2073 7464 6572 7220 3d20 7365       stderr = se
+000178a0: 6c66 2e52 756e 4773 5574 696c 280a 2020  lf.RunGsUtil(.  
+000178b0: 2020 2020 2020 2020 5b27 2d44 272c 2027          ['-D', '
+000178c0: 2d6d 272c 2027 6370 272c 2027 2d4a 272c  -m', 'cp', '-J',
+000178d0: 2027 2d72 272c 2074 6d70 6469 722c 0a20   '-r', tmpdir,. 
+000178e0: 2020 2020 2020 2020 2020 7375 7269 2862            suri(b
+000178f0: 7563 6b65 745f 7572 6929 5d2c 0a20 2020  ucket_uri)],.   
+00017900: 2020 2020 2020 2072 6574 7572 6e5f 7374         return_st
+00017910: 6465 7272 3d54 7275 6529 0a20 2020 2020  derr=True).     
+00017920: 2023 2045 6e73 7572 6520 616c 6c20 6f62   # Ensure all ob
+00017930: 6a65 6374 7320 6172 6520 7570 6c6f 6164  jects are upload
+00017940: 6564 2e0a 2020 2020 2020 7365 6c66 2e41  ed..      self.A
+00017950: 7373 6572 744e 4f62 6a65 6374 7349 6e42  ssertNObjectsInB
+00017960: 7563 6b65 7428 6275 636b 6574 5f75 7269  ucket(bucket_uri
+00017970: 2c20 3130 290a 2020 2020 2020 2320 456e  , 10).      # En
+00017980: 7375 7265 2074 6865 2070 726f 6772 6573  sure the progres
+00017990: 7320 6c6f 6767 6572 2073 6565 7320 6120  s logger sees a 
+000179a0: 677a 6970 2065 6e63 6f64 696e 672e 0a20  gzip encoding.. 
+000179b0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+000179c0: 496e 2827 7365 6e64 3a20 5573 696e 6720  In('send: Using 
+000179d0: 677a 6970 2074 7261 6e73 706f 7274 2065  gzip transport e
+000179e0: 6e63 6f64 696e 6720 666f 7220 7468 6520  ncoding for the 
+000179f0: 7265 7175 6573 742e 272c 0a20 2020 2020  request.',.     
+00017a00: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00017a10: 7464 6572 7229 0a0a 2020 4053 6b69 7046  tderr)..  @SkipF
+00017a20: 6f72 5333 2827 4e6f 2063 6f6d 7072 6573  orS3('No compres
+00017a30: 7365 6420 7472 616e 7370 6f72 7420 656e  sed transport en
+00017a40: 636f 6469 6e67 2073 7570 706f 7274 2066  coding support f
+00017a50: 6f72 2053 332e 2729 0a20 2040 536b 6970  or S3.').  @Skip
+00017a60: 466f 7258 4d4c 2827 4e6f 2063 6f6d 7072  ForXML('No compr
+00017a70: 6573 7365 6420 7472 616e 7370 6f72 7420  essed transport 
+00017a80: 656e 636f 6469 6e67 2073 7570 706f 7274  encoding support
+00017a90: 2066 6f72 2074 6865 2058 4d4c 2041 5049   for the XML API
+00017aa0: 2e27 290a 2020 4053 6571 7565 6e74 6961  .').  @Sequentia
+00017ab0: 6c41 6e64 5061 7261 6c6c 656c 5472 616e  lAndParallelTran
+00017ac0: 7366 6572 0a20 2064 6566 2074 6573 745f  sfer.  def test_
+00017ad0: 677a 6970 5f74 7261 6e73 706f 7274 5f65  gzip_transport_e
+00017ae0: 6e63 6f64 6564 5f70 6172 616c 6c65 6c5f  ncoded_parallel_
+00017af0: 7570 6c6f 6164 5f72 6573 756d 6162 6c65  upload_resumable
+00017b00: 2873 656c 6629 3a0a 2020 2020 2222 2254  (self):.    """T
+00017b10: 6573 7420 7265 7375 6d61 626c 652c 2067  est resumable, g
+00017b20: 7a69 7020 656e 636f 6465 6420 6669 6c65  zip encoded file
+00017b30: 7320 7570 6c6f 6164 2063 6f72 7265 6374  s upload correct
+00017b40: 6c79 2069 6e20 7061 7261 6c6c 656c 2e0a  ly in parallel..
+00017b50: 0a20 2020 2054 6869 7320 7465 7374 2067  .    This test g
+00017b60: 656e 6572 6174 6573 2061 206c 6172 6765  enerates a large
+00017b70: 2061 6d6f 756e 7420 6f66 2064 6174 6120   amount of data 
+00017b80: 2865 2e67 2e20 6861 6c74 5f73 697a 6520  (e.g. halt_size 
+00017b90: 616d 6f75 6e74 206f 6620 6368 6172 7329  amount of chars)
+00017ba0: 0a20 2020 2074 6f20 7570 6c6f 6164 2e20  .    to upload. 
+00017bb0: 4475 6520 746f 2074 6865 206c 6172 6765  Due to the large
+00017bc0: 2073 697a 652c 2069 7420 7769 6c6c 2062   size, it will b
+00017bd0: 6520 6162 6f76 6520 7468 6520 7265 7375  e above the resu
+00017be0: 6d61 626c 6520 7468 7265 7368 6f6c 642c  mable threshold,
+00017bf0: 0a20 2020 2061 6e64 2074 6573 7420 7468  .    and test th
+00017c00: 6520 6265 6861 7669 6f72 206f 6620 7265  e behavior of re
+00017c10: 7375 6d61 626c 6520 7570 6c6f 6164 732e  sumable uploads.
+00017c20: 0a20 2020 2022 2222 0a20 2020 2023 2053  .    """.    # S
+00017c30: 6574 7570 2074 6865 2062 7563 6b65 7420  etup the bucket 
+00017c40: 616e 6420 6c6f 6361 6c20 6461 7461 2e0a  and local data..
+00017c50: 2020 2020 6275 636b 6574 5f75 7269 203d      bucket_uri =
+00017c60: 2073 656c 662e 4372 6561 7465 4275 636b   self.CreateBuck
+00017c70: 6574 2829 0a20 2020 2063 6f6e 7465 6e74  et().    content
+00017c80: 7320 3d20 6765 745f 7261 6e64 6f6d 5f61  s = get_random_a
+00017c90: 7363 6969 5f63 6861 7273 2873 697a 653d  scii_chars(size=
+00017ca0: 7365 6c66 2e68 616c 745f 7369 7a65 290a  self.halt_size).
+00017cb0: 2020 2020 746d 7064 6972 203d 2073 656c      tmpdir = sel
+00017cc0: 662e 4372 6561 7465 5465 6d70 4469 7228  f.CreateTempDir(
+00017cd0: 7465 7374 5f66 696c 6573 3d31 302c 2063  test_files=10, c
+00017ce0: 6f6e 7465 6e74 733d 636f 6e74 656e 7473  ontents=contents
+00017cf0: 290a 2020 2020 2320 5570 6c6f 6164 2074  ).    # Upload t
+00017d00: 6865 2064 6174 612e 0a20 2020 2077 6974  he data..    wit
+00017d10: 6820 5365 7442 6f74 6f43 6f6e 6669 6746  h SetBotoConfigF
+00017d20: 6f72 5465 7374 285b 2827 4753 5574 696c  orTest([('GSUtil
+00017d30: 272c 2027 7265 7375 6d61 626c 655f 7468  ', 'resumable_th
+00017d40: 7265 7368 6f6c 6427 2c20 7374 7228 4f4e  reshold', str(ON
+00017d50: 455f 4b49 4229 290a 2020 2020 2020 2020  E_KIB)).        
+00017d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017d70: 2020 2020 2020 5d29 3a0a 2020 2020 2020        ]):.      
+00017d80: 7374 6465 7272 203d 2073 656c 662e 5275  stderr = self.Ru
+00017d90: 6e47 7355 7469 6c28 0a20 2020 2020 2020  nGsUtil(.       
+00017da0: 2020 205b 272d 4427 2c20 272d 6d27 2c20     ['-D', '-m', 
+00017db0: 2763 7027 2c20 272d 4a27 2c20 272d 7227  'cp', '-J', '-r'
+00017dc0: 2c20 746d 7064 6972 2c0a 2020 2020 2020  , tmpdir,.      
+00017dd0: 2020 2020 2073 7572 6928 6275 636b 6574       suri(bucket
+00017de0: 5f75 7269 295d 2c0a 2020 2020 2020 2020  _uri)],.        
+00017df0: 2020 7265 7475 726e 5f73 7464 6572 723d    return_stderr=
+00017e00: 5472 7565 290a 2020 2020 2020 2320 456e  True).      # En
+00017e10: 7375 7265 2061 6c6c 206f 626a 6563 7473  sure all objects
+00017e20: 2061 7265 2075 706c 6f61 6465 642e 0a20   are uploaded.. 
+00017e30: 2020 2020 2073 656c 662e 4173 7365 7274       self.Assert
+00017e40: 4e4f 626a 6563 7473 496e 4275 636b 6574  NObjectsInBucket
+00017e50: 2862 7563 6b65 745f 7572 692c 2031 3029  (bucket_uri, 10)
+00017e60: 0a20 2020 2020 2023 2045 6e73 7572 6520  .      # Ensure 
+00017e70: 7468 6520 7072 6f67 7265 7373 206c 6f67  the progress log
+00017e80: 6765 7220 7365 6573 2061 2067 7a69 7020  ger sees a gzip 
+00017e90: 656e 636f 6469 6e67 2e0a 2020 2020 2020  encoding..      
+00017ea0: 7365 6c66 2e61 7373 6572 7449 6e28 2773  self.assertIn('s
+00017eb0: 656e 643a 2055 7369 6e67 2067 7a69 7020  end: Using gzip 
+00017ec0: 7472 616e 7370 6f72 7420 656e 636f 6469  transport encodi
+00017ed0: 6e67 2066 6f72 2074 6865 2072 6571 7565  ng for the reque
+00017ee0: 7374 2e27 2c0a 2020 2020 2020 2020 2020  st.',.          
+00017ef0: 2020 2020 2020 2020 2020 7374 6465 7272            stderr
+00017f00: 290a 0a20 2040 5365 7175 656e 7469 616c  )..  @Sequential
+00017f10: 416e 6450 6172 616c 6c65 6c54 7261 6e73  AndParallelTrans
+00017f20: 6665 720a 2020 6465 6620 7465 7374 5f67  fer.  def test_g
+00017f30: 7a69 705f 616c 6c5f 7570 6c6f 6164 5f61  zip_all_upload_a
+00017f40: 6e64 5f64 6f77 6e6c 6f61 6428 7365 6c66  nd_download(self
+00017f50: 293a 0a20 2020 2062 7563 6b65 745f 7572  ):.    bucket_ur
+00017f60: 6920 3d20 7365 6c66 2e43 7265 6174 6542  i = self.CreateB
+00017f70: 7563 6b65 7428 290a 2020 2020 636f 6e74  ucket().    cont
+00017f80: 656e 7473 203d 2062 2778 2720 2a20 3130  ents = b'x' * 10
+00017f90: 3030 300a 2020 2020 746d 7064 6972 203d  000.    tmpdir =
+00017fa0: 2073 656c 662e 4372 6561 7465 5465 6d70   self.CreateTemp
+00017fb0: 4469 7228 290a 2020 2020 7365 6c66 2e43  Dir().    self.C
+00017fc0: 7265 6174 6554 656d 7046 696c 6528 6669  reateTempFile(fi
+00017fd0: 6c65 5f6e 616d 653d 2774 6573 742e 6874  le_name='test.ht
+00017fe0: 6d6c 272c 2074 6d70 6469 723d 746d 7064  ml', tmpdir=tmpd
+00017ff0: 6972 2c20 636f 6e74 656e 7473 3d63 6f6e  ir, contents=con
+00018000: 7465 6e74 7329 0a20 2020 2073 656c 662e  tents).    self.
+00018010: 4372 6561 7465 5465 6d70 4669 6c65 2866  CreateTempFile(f
+00018020: 696c 655f 6e61 6d65 3d27 7465 7374 2e6a  ile_name='test.j
+00018030: 7327 2c20 746d 7064 6972 3d74 6d70 6469  s', tmpdir=tmpdi
+00018040: 722c 2063 6f6e 7465 6e74 733d 636f 6e74  r, contents=cont
+00018050: 656e 7473 290a 2020 2020 7365 6c66 2e43  ents).    self.C
+00018060: 7265 6174 6554 656d 7046 696c 6528 6669  reateTempFile(fi
+00018070: 6c65 5f6e 616d 653d 2774 6573 742e 7478  le_name='test.tx
+00018080: 7427 2c20 746d 7064 6972 3d74 6d70 6469  t', tmpdir=tmpdi
+00018090: 722c 2063 6f6e 7465 6e74 733d 636f 6e74  r, contents=cont
+000180a0: 656e 7473 290a 2020 2020 7365 6c66 2e43  ents).    self.C
+000180b0: 7265 6174 6554 656d 7046 696c 6528 6669  reateTempFile(fi
+000180c0: 6c65 5f6e 616d 653d 2774 6573 7427 2c20  le_name='test', 
+000180d0: 746d 7064 6972 3d74 6d70 6469 722c 2063  tmpdir=tmpdir, c
+000180e0: 6f6e 7465 6e74 733d 636f 6e74 656e 7473  ontents=contents
+000180f0: 290a 2020 2020 2320 5465 7374 2074 6861  ).    # Test tha
+00018100: 7420 616c 6c20 6669 6c65 7320 6172 6520  t all files are 
+00018110: 636f 6d70 7265 7373 6564 2e0a 2020 2020  compressed..    
+00018120: 7365 6c66 2e52 756e 4773 5574 696c 280a  self.RunGsUtil(.
+00018130: 2020 2020 2020 2020 5b27 6370 272c 2027          ['cp', '
+00018140: 2d5a 272c 0a20 2020 2020 2020 2020 6f73  -Z',.         os
+00018150: 2e70 6174 682e 6a6f 696e 2874 6d70 6469  .path.join(tmpdi
+00018160: 722c 2027 7465 7374 2a27 292c 0a20 2020  r, 'test*'),.   
+00018170: 2020 2020 2020 7375 7269 2862 7563 6b65        suri(bucke
+00018180: 745f 7572 6929 5d29 0a20 2020 2073 656c  t_uri)]).    sel
+00018190: 662e 4173 7365 7274 4e4f 626a 6563 7473  f.AssertNObjects
+000181a0: 496e 4275 636b 6574 2862 7563 6b65 745f  InBucket(bucket_
+000181b0: 7572 692c 2034 290a 2020 2020 7572 6931  uri, 4).    uri1
+000181c0: 203d 2073 7572 6928 6275 636b 6574 5f75   = suri(bucket_u
+000181d0: 7269 2c20 2774 6573 742e 6874 6d6c 2729  ri, 'test.html')
+000181e0: 0a20 2020 2075 7269 3220 3d20 7375 7269  .    uri2 = suri
+000181f0: 2862 7563 6b65 745f 7572 692c 2027 7465  (bucket_uri, 'te
+00018200: 7374 2e6a 7327 290a 2020 2020 7572 6933  st.js').    uri3
+00018210: 203d 2073 7572 6928 6275 636b 6574 5f75   = suri(bucket_u
+00018220: 7269 2c20 2774 6573 742e 7478 7427 290a  ri, 'test.txt').
+00018230: 2020 2020 7572 6934 203d 2073 7572 6928      uri4 = suri(
+00018240: 6275 636b 6574 5f75 7269 2c20 2774 6573  bucket_uri, 'tes
+00018250: 7427 290a 2020 2020 7374 646f 7574 203d  t').    stdout =
+00018260: 2073 656c 662e 5275 6e47 7355 7469 6c28   self.RunGsUtil(
+00018270: 5b27 7374 6174 272c 2075 7269 315d 2c20  ['stat', uri1], 
+00018280: 7265 7475 726e 5f73 7464 6f75 743d 5472  return_stdout=Tr
+00018290: 7565 290a 2020 2020 7365 6c66 2e61 7373  ue).    self.ass
+000182a0: 6572 7452 6567 6578 2873 7464 6f75 742c  ertRegex(stdout,
+000182b0: 2072 2743 6f6e 7465 6e74 2d45 6e63 6f64   r'Content-Encod
+000182c0: 696e 673a 5c73 2b67 7a69 7027 290a 2020  ing:\s+gzip').  
+000182d0: 2020 7374 646f 7574 203d 2073 656c 662e    stdout = self.
+000182e0: 5275 6e47 7355 7469 6c28 5b27 7374 6174  RunGsUtil(['stat
+000182f0: 272c 2075 7269 325d 2c20 7265 7475 726e  ', uri2], return
+00018300: 5f73 7464 6f75 743d 5472 7565 290a 2020  _stdout=True).  
+00018310: 2020 7365 6c66 2e61 7373 6572 7452 6567    self.assertReg
+00018320: 6578 2873 7464 6f75 742c 2072 2743 6f6e  ex(stdout, r'Con
+00018330: 7465 6e74 2d45 6e63 6f64 696e 673a 5c73  tent-Encoding:\s
+00018340: 2b67 7a69 7027 290a 2020 2020 7374 646f  +gzip').    stdo
+00018350: 7574 203d 2073 656c 662e 5275 6e47 7355  ut = self.RunGsU
+00018360: 7469 6c28 5b27 7374 6174 272c 2075 7269  til(['stat', uri
+00018370: 335d 2c20 7265 7475 726e 5f73 7464 6f75  3], return_stdou
+00018380: 743d 5472 7565 290a 2020 2020 7365 6c66  t=True).    self
+00018390: 2e61 7373 6572 7452 6567 6578 2873 7464  .assertRegex(std
+000183a0: 6f75 742c 2072 2743 6f6e 7465 6e74 2d45  out, r'Content-E
+000183b0: 6e63 6f64 696e 673a 5c73 2b67 7a69 7027  ncoding:\s+gzip'
+000183c0: 290a 2020 2020 7374 646f 7574 203d 2073  ).    stdout = s
+000183d0: 656c 662e 5275 6e47 7355 7469 6c28 5b27  elf.RunGsUtil(['
+000183e0: 7374 6174 272c 2075 7269 345d 2c20 7265  stat', uri4], re
+000183f0: 7475 726e 5f73 7464 6f75 743d 5472 7565  turn_stdout=True
+00018400: 290a 2020 2020 7365 6c66 2e61 7373 6572  ).    self.asser
+00018410: 7452 6567 6578 2873 7464 6f75 742c 2072  tRegex(stdout, r
+00018420: 2743 6f6e 7465 6e74 2d45 6e63 6f64 696e  'Content-Encodin
+00018430: 673a 5c73 2b67 7a69 7027 290a 2020 2020  g:\s+gzip').    
+00018440: 6670 6174 6834 203d 2073 656c 662e 4372  fpath4 = self.Cr
+00018450: 6561 7465 5465 6d70 4669 6c65 2829 0a20  eateTempFile(). 
+00018460: 2020 2066 6f72 2075 7269 2069 6e20 2875     for uri in (u
+00018470: 7269 312c 2075 7269 322c 2075 7269 332c  ri1, uri2, uri3,
+00018480: 2075 7269 3429 3a0a 2020 2020 2020 7365   uri4):.      se
+00018490: 6c66 2e52 756e 4773 5574 696c 285b 2763  lf.RunGsUtil(['c
+000184a0: 7027 2c20 7572 692c 2073 7572 6928 6670  p', uri, suri(fp
+000184b0: 6174 6834 295d 290a 2020 2020 2020 7769  ath4)]).      wi
+000184c0: 7468 206f 7065 6e28 6670 6174 6834 2c20  th open(fpath4, 
+000184d0: 2772 6227 2920 6173 2066 3a0a 2020 2020  'rb') as f:.    
+000184e0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+000184f0: 7175 616c 2866 2e72 6561 6428 292c 2063  qual(f.read(), c
+00018500: 6f6e 7465 6e74 7329 0a0a 2020 4053 6b69  ontents)..  @Ski
+00018510: 7046 6f72 5333 2827 4e6f 2063 6f6d 7072  pForS3('No compr
+00018520: 6573 7365 6420 7472 616e 7370 6f72 7420  essed transport 
+00018530: 656e 636f 6469 6e67 2073 7570 706f 7274  encoding support
+00018540: 2066 6f72 2053 332e 2729 0a20 2040 536b   for S3.').  @Sk
+00018550: 6970 466f 7258 4d4c 2827 4e6f 2063 6f6d  ipForXML('No com
+00018560: 7072 6573 7365 6420 7472 616e 7370 6f72  pressed transpor
+00018570: 7420 656e 636f 6469 6e67 2073 7570 706f  t encoding suppo
+00018580: 7274 2066 6f72 2074 6865 2058 4d4c 2041  rt for the XML A
+00018590: 5049 2e27 290a 2020 4053 6571 7565 6e74  PI.').  @Sequent
+000185a0: 6961 6c41 6e64 5061 7261 6c6c 656c 5472  ialAndParallelTr
+000185b0: 616e 7366 6572 0a20 2064 6566 2074 6573  ansfer.  def tes
+000185c0: 745f 677a 6970 5f74 7261 6e73 706f 7274  t_gzip_transport
+000185d0: 5f65 6e63 6f64 6564 5f61 6c6c 5f75 706c  _encoded_all_upl
+000185e0: 6f61 645f 616e 645f 646f 776e 6c6f 6164  oad_and_download
+000185f0: 2873 656c 6629 3a0a 2020 2020 2222 2254  (self):.    """T
+00018600: 6573 7420 677a 6970 2065 6e63 6f64 6564  est gzip encoded
+00018610: 2066 696c 6573 2075 706c 6f61 6420 636f   files upload co
+00018620: 7272 6563 746c 792e 0a0a 2020 2020 5468  rrectly...    Th
+00018630: 6973 2063 6865 636b 7320 7468 6174 2066  is checks that f
+00018640: 696c 6573 2061 7265 206e 6f74 2074 6167  iles are not tag
+00018650: 6765 6420 7769 7468 2061 2067 7a69 7020  ged with a gzip 
+00018660: 636f 6e74 656e 7420 656e 636f 6469 6e67  content encoding
+00018670: 2061 6e64 0a20 2020 2074 6861 7420 7468   and.    that th
+00018680: 6520 636f 6e74 656e 7473 206f 6620 7468  e contents of th
+00018690: 6520 6669 6c65 7320 6172 6520 756e 636f  e files are unco
+000186a0: 6d70 7265 7373 6564 2069 6e20 4743 532e  mpressed in GCS.
+000186b0: 2054 6869 7320 7465 7374 2075 7365 7320   This test uses 
+000186c0: 7468 650a 2020 2020 2d4a 2066 6c61 6720  the.    -J flag 
+000186d0: 746f 2074 6172 6765 7420 616c 6c20 6669  to target all fi
+000186e0: 6c65 732e 0a20 2020 2022 2222 0a20 2020  les..    """.   
+000186f0: 2023 2053 6574 7570 2074 6865 2062 7563   # Setup the buc
+00018700: 6b65 7420 616e 6420 6c6f 6361 6c20 6461  ket and local da
+00018710: 7461 2e0a 2020 2020 6275 636b 6574 5f75  ta..    bucket_u
+00018720: 7269 203d 2073 656c 662e 4372 6561 7465  ri = self.Create
+00018730: 4275 636b 6574 2829 0a20 2020 2063 6f6e  Bucket().    con
+00018740: 7465 6e74 7320 3d20 6227 7827 202a 2031  tents = b'x' * 1
+00018750: 3030 3030 0a20 2020 2074 6d70 6469 7220  0000.    tmpdir 
+00018760: 3d20 7365 6c66 2e43 7265 6174 6554 656d  = self.CreateTem
+00018770: 7044 6972 2829 0a20 2020 206c 6f63 616c  pDir().    local
+00018780: 5f75 7269 3120 3d20 7365 6c66 2e43 7265  _uri1 = self.Cre
+00018790: 6174 6554 656d 7046 696c 6528 6669 6c65  ateTempFile(file
+000187a0: 5f6e 616d 653d 2774 6573 742e 7478 7427  _name='test.txt'
+000187b0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+000187c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000187d0: 2020 2020 2020 2074 6d70 6469 723d 746d         tmpdir=tm
+000187e0: 7064 6972 2c0a 2020 2020 2020 2020 2020  pdir,.          
+000187f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018800: 2020 2020 2020 2020 2020 2063 6f6e 7465             conte
+00018810: 6e74 733d 636f 6e74 656e 7473 290a 2020  nts=contents).  
+00018820: 2020 6c6f 6361 6c5f 7572 6932 203d 2073    local_uri2 = s
+00018830: 656c 662e 4372 6561 7465 5465 6d70 4669  elf.CreateTempFi
+00018840: 6c65 2866 696c 655f 6e61 6d65 3d27 7465  le(file_name='te
+00018850: 7374 272c 0a20 2020 2020 2020 2020 2020  st',.           
+00018860: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018870: 2020 2020 2020 2020 2020 746d 7064 6972            tmpdir
+00018880: 3d74 6d70 6469 722c 0a20 2020 2020 2020  =tmpdir,.       
+00018890: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000188a0: 2020 2020 2020 2020 2020 2020 2020 636f                co
+000188b0: 6e74 656e 7473 3d63 6f6e 7465 6e74 7329  ntents=contents)
+000188c0: 0a20 2020 2023 2055 706c 6f61 6420 7468  .    # Upload th
+000188d0: 6520 6461 7461 2e0a 2020 2020 7374 6465  e data..    stde
+000188e0: 7272 203d 2073 656c 662e 5275 6e47 7355  rr = self.RunGsU
+000188f0: 7469 6c28 0a20 2020 2020 2020 205b 272d  til(.        ['-
+00018900: 4427 2c20 2763 7027 2c20 272d 4a27 2c0a  D', 'cp', '-J',.
+00018910: 2020 2020 2020 2020 206f 732e 7061 7468           os.path
+00018920: 2e6a 6f69 6e28 746d 7064 6972 2c20 2774  .join(tmpdir, 't
+00018930: 6573 742a 2729 2c0a 2020 2020 2020 2020  est*'),.        
+00018940: 2073 7572 6928 6275 636b 6574 5f75 7269   suri(bucket_uri
+00018950: 295d 2c0a 2020 2020 2020 2020 7265 7475  )],.        retu
+00018960: 726e 5f73 7464 6572 723d 5472 7565 290a  rn_stderr=True).
+00018970: 2020 2020 7365 6c66 2e41 7373 6572 744e      self.AssertN
+00018980: 4f62 6a65 6374 7349 6e42 7563 6b65 7428  ObjectsInBucket(
+00018990: 6275 636b 6574 5f75 7269 2c20 3229 0a20  bucket_uri, 2). 
+000189a0: 2020 2023 2045 6e73 7572 6520 7468 6520     # Ensure the 
+000189b0: 636f 7272 6563 7420 6669 6c65 7320 7765  correct files we
+000189c0: 7265 206d 6172 6b65 6420 666f 7220 636f  re marked for co
+000189d0: 6d70 7265 7373 696f 6e2e 0a20 2020 2073  mpression..    s
+000189e0: 656c 662e 6173 7365 7274 496e 280a 2020  elf.assertIn(.  
+000189f0: 2020 2020 2020 2755 7369 6e67 2063 6f6d        'Using com
+00018a00: 7072 6573 7365 6420 7472 616e 7370 6f72  pressed transpor
+00018a10: 7420 656e 636f 6469 6e67 2066 6f72 2066  t encoding for f
+00018a20: 696c 653a 2f2f 2573 2e27 2025 2028 6c6f  ile://%s.' % (lo
+00018a30: 6361 6c5f 7572 6931 292c 0a20 2020 2020  cal_uri1),.     
+00018a40: 2020 2073 7464 6572 7229 0a20 2020 2073     stderr).    s
+00018a50: 656c 662e 6173 7365 7274 496e 280a 2020  elf.assertIn(.  
+00018a60: 2020 2020 2020 2755 7369 6e67 2063 6f6d        'Using com
+00018a70: 7072 6573 7365 6420 7472 616e 7370 6f72  pressed transpor
+00018a80: 7420 656e 636f 6469 6e67 2066 6f72 2066  t encoding for f
+00018a90: 696c 653a 2f2f 2573 2e27 2025 2028 6c6f  ile://%s.' % (lo
+00018aa0: 6361 6c5f 7572 6932 292c 0a20 2020 2020  cal_uri2),.     
+00018ab0: 2020 2073 7464 6572 7229 0a20 2020 2023     stderr).    #
+00018ac0: 2045 6e73 7572 6520 7468 6520 7072 6f67   Ensure the prog
+00018ad0: 7265 7373 206c 6f67 6765 7220 7365 6573  ress logger sees
+00018ae0: 2061 2067 7a69 7020 656e 636f 6469 6e67   a gzip encoding
+00018af0: 2e0a 2020 2020 7365 6c66 2e61 7373 6572  ..    self.asser
+00018b00: 7449 6e28 2773 656e 643a 2055 7369 6e67  tIn('send: Using
+00018b10: 2067 7a69 7020 7472 616e 7370 6f72 7420   gzip transport 
+00018b20: 656e 636f 6469 6e67 2066 6f72 2074 6865  encoding for the
+00018b30: 2072 6571 7565 7374 2e27 2c0a 2020 2020   request.',.    
+00018b40: 2020 2020 2020 2020 2020 2020 2020 7374                st
+00018b50: 6465 7272 290a 2020 2020 2320 456e 7375  derr).    # Ensu
+00018b60: 7265 2074 6865 2066 696c 6573 2064 6f20  re the files do 
+00018b70: 6e6f 7420 6861 7665 2061 2073 746f 7265  not have a store
+00018b80: 6420 656e 636f 6469 6e67 206f 6620 677a  d encoding of gz
+00018b90: 6970 2061 6e64 2061 7265 2073 746f 7265  ip and are store
+00018ba0: 640a 2020 2020 2320 756e 636f 6d70 7265  d.    # uncompre
+00018bb0: 7373 6564 2e0a 2020 2020 7265 6d6f 7465  ssed..    remote
+00018bc0: 5f75 7269 3120 3d20 7375 7269 2862 7563  _uri1 = suri(buc
+00018bd0: 6b65 745f 7572 692c 2027 7465 7374 2e74  ket_uri, 'test.t
+00018be0: 7874 2729 0a20 2020 2072 656d 6f74 655f  xt').    remote_
+00018bf0: 7572 6932 203d 2073 7572 6928 6275 636b  uri2 = suri(buck
+00018c00: 6574 5f75 7269 2c20 2774 6573 7427 290a  et_uri, 'test').
+00018c10: 2020 2020 6670 6174 6834 203d 2073 656c      fpath4 = sel
+00018c20: 662e 4372 6561 7465 5465 6d70 4669 6c65  f.CreateTempFile
+00018c30: 2829 0a20 2020 2066 6f72 2075 7269 2069  ().    for uri i
+00018c40: 6e20 2872 656d 6f74 655f 7572 6931 2c20  n (remote_uri1, 
+00018c50: 7265 6d6f 7465 5f75 7269 3229 3a0a 2020  remote_uri2):.  
+00018c60: 2020 2020 7374 646f 7574 203d 2073 656c      stdout = sel
+00018c70: 662e 5275 6e47 7355 7469 6c28 5b27 7374  f.RunGsUtil(['st
+00018c80: 6174 272c 2075 7269 5d2c 2072 6574 7572  at', uri], retur
+00018c90: 6e5f 7374 646f 7574 3d54 7275 6529 0a20  n_stdout=True). 
+00018ca0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+00018cb0: 4e6f 7452 6567 6578 2873 7464 6f75 742c  NotRegex(stdout,
+00018cc0: 2072 2743 6f6e 7465 6e74 2d45 6e63 6f64   r'Content-Encod
+00018cd0: 696e 673a 5c73 2b67 7a69 7027 290a 2020  ing:\s+gzip').  
+00018ce0: 2020 2020 7365 6c66 2e52 756e 4773 5574      self.RunGsUt
+00018cf0: 696c 285b 2763 7027 2c20 7572 692c 2073  il(['cp', uri, s
+00018d00: 7572 6928 6670 6174 6834 295d 290a 2020  uri(fpath4)]).  
+00018d10: 2020 2020 7769 7468 206f 7065 6e28 6670      with open(fp
+00018d20: 6174 6834 2c20 2772 6227 2920 6173 2066  ath4, 'rb') as f
+00018d30: 3a0a 2020 2020 2020 2020 7365 6c66 2e61  :.        self.a
+00018d40: 7373 6572 7445 7175 616c 2866 2e72 6561  ssertEqual(f.rea
+00018d50: 6428 292c 2063 6f6e 7465 6e74 7329 0a0a  d(), contents)..
+00018d60: 2020 6465 6620 7465 7374 5f62 6f74 685f    def test_both_
+00018d70: 677a 6970 5f6f 7074 696f 6e73 5f65 7272  gzip_options_err
+00018d80: 6f72 2873 656c 6629 3a0a 2020 2020 2222  or(self):.    ""
+00018d90: 2254 6573 7420 7468 6174 206d 6978 696e  "Test that mixin
+00018da0: 6720 636f 6d70 7265 7373 696f 6e20 666c  g compression fl
+00018db0: 6167 7320 6572 726f 722e 2222 220a 2020  ags error.""".  
+00018dc0: 2020 6361 7365 7320 3d20 280a 2020 2020    cases = (.    
+00018dd0: 2020 2020 2320 5465 7374 2077 6974 6820      # Test with 
+00018de0: 2d5a 2061 6e64 202d 7a0a 2020 2020 2020  -Z and -z.      
+00018df0: 2020 5b27 6370 272c 2027 2d5a 272c 2027    ['cp', '-Z', '
+00018e00: 2d7a 272c 2027 6874 6d6c 2c20 6a73 272c  -z', 'html, js',
+00018e10: 2027 612e 6a73 272c 2027 622e 6a73 275d   'a.js', 'b.js']
+00018e20: 2c0a 2020 2020 2020 2020 2320 5361 6d65  ,.        # Same
+00018e30: 2074 6573 742c 2062 7574 2077 6974 6820   test, but with 
+00018e40: 6172 6775 6d65 6e74 7320 696e 2074 6865  arguments in the
+00018e50: 206f 7070 6f73 6974 6520 6f72 6465 722e   opposite order.
+00018e60: 0a20 2020 2020 2020 205b 2763 7027 2c20  .        ['cp', 
+00018e70: 272d 7a27 2c20 2768 746d 6c2c 206a 7327  '-z', 'html, js'
+00018e80: 2c20 272d 5a27 2c20 2761 2e6a 7327 2c20  , '-Z', 'a.js', 
+00018e90: 2762 2e6a 7327 5d29 0a0a 2020 2020 666f  'b.js'])..    fo
+00018ea0: 7220 6361 7365 2069 6e20 6361 7365 733a  r case in cases:
+00018eb0: 0a20 2020 2020 2073 7464 6572 7220 3d20  .      stderr = 
+00018ec0: 7365 6c66 2e52 756e 4773 5574 696c 2863  self.RunGsUtil(c
+00018ed0: 6173 652c 2072 6574 7572 6e5f 7374 6465  ase, return_stde
+00018ee0: 7272 3d54 7275 652c 2065 7870 6563 7465  rr=True, expecte
+00018ef0: 645f 7374 6174 7573 3d31 290a 2020 2020  d_status=1).    
+00018f00: 2020 7365 6c66 2e61 7373 6572 7449 6e28    self.assertIn(
+00018f10: 2743 6f6d 6d61 6e64 4578 6365 7074 696f  'CommandExceptio
+00018f20: 6e27 2c20 7374 6465 7272 290a 2020 2020  n', stderr).    
+00018f30: 2020 7365 6c66 2e61 7373 6572 7449 6e28    self.assertIn(
+00018f40: 0a20 2020 2020 2020 2020 2027 5370 6563  .          'Spec
+00018f50: 6966 7969 6e67 2062 6f74 6820 7468 6520  ifying both the 
+00018f60: 2d7a 2061 6e64 202d 5a20 6f70 7469 6f6e  -z and -Z option
+00018f70: 7320 746f 6765 7468 6572 2069 7320 696e  s together is in
+00018f80: 7661 6c69 642e 272c 2073 7464 6572 7229  valid.', stderr)
+00018f90: 0a0a 2020 6465 6620 7465 7374 5f62 6f74  ..  def test_bot
+00018fa0: 685f 677a 6970 5f74 7261 6e73 706f 7274  h_gzip_transport
+00018fb0: 5f65 6e63 6f64 696e 675f 6f70 7469 6f6e  _encoding_option
+00018fc0: 735f 6572 726f 7228 7365 6c66 293a 0a20  s_error(self):. 
+00018fd0: 2020 2022 2222 5465 7374 2074 6861 7420     """Test that 
+00018fe0: 6d69 7869 6e67 2074 7261 6e73 706f 7274  mixing transport
+00018ff0: 2065 6e63 6f64 696e 6720 666c 6167 7320   encoding flags 
+00019000: 6572 726f 722e 2222 220a 2020 2020 6361  error.""".    ca
+00019010: 7365 7320 3d20 280a 2020 2020 2020 2020  ses = (.        
+00019020: 2320 5465 7374 2077 6974 6820 2d4a 2061  # Test with -J a
+00019030: 6e64 202d 6a0a 2020 2020 2020 2020 5b27  nd -j.        ['
+00019040: 6370 272c 2027 2d4a 272c 2027 2d6a 272c  cp', '-J', '-j',
+00019050: 2027 6874 6d6c 2c20 6a73 272c 2027 612e   'html, js', 'a.
+00019060: 6a73 272c 2027 622e 6a73 275d 2c0a 2020  js', 'b.js'],.  
+00019070: 2020 2020 2020 2320 5361 6d65 2074 6573        # Same tes
+00019080: 742c 2062 7574 2077 6974 6820 6172 6775  t, but with argu
+00019090: 6d65 6e74 7320 696e 2074 6865 206f 7070  ments in the opp
+000190a0: 6f73 6974 6520 6f72 6465 722e 0a20 2020  osite order..   
+000190b0: 2020 2020 205b 2763 7027 2c20 272d 6a27       ['cp', '-j'
+000190c0: 2c20 2768 746d 6c2c 206a 7327 2c20 272d  , 'html, js', '-
+000190d0: 4a27 2c20 2761 2e6a 7327 2c20 2762 2e6a  J', 'a.js', 'b.j
+000190e0: 7327 5d29 0a0a 2020 2020 666f 7220 6361  s'])..    for ca
+000190f0: 7365 2069 6e20 6361 7365 733a 0a20 2020  se in cases:.   
+00019100: 2020 2073 7464 6572 7220 3d20 7365 6c66     stderr = self
+00019110: 2e52 756e 4773 5574 696c 2863 6173 652c  .RunGsUtil(case,
+00019120: 2072 6574 7572 6e5f 7374 6465 7272 3d54   return_stderr=T
+00019130: 7275 652c 2065 7870 6563 7465 645f 7374  rue, expected_st
+00019140: 6174 7573 3d31 290a 2020 2020 2020 7365  atus=1).      se
+00019150: 6c66 2e61 7373 6572 7449 6e28 2743 6f6d  lf.assertIn('Com
+00019160: 6d61 6e64 4578 6365 7074 696f 6e27 2c20  mandException', 
+00019170: 7374 6465 7272 290a 2020 2020 2020 7365  stderr).      se
+00019180: 6c66 2e61 7373 6572 7449 6e28 0a20 2020  lf.assertIn(.   
+00019190: 2020 2020 2020 2027 5370 6563 6966 7969         'Specifyi
+000191a0: 6e67 2062 6f74 6820 7468 6520 2d6a 2061  ng both the -j a
+000191b0: 6e64 202d 4a20 6f70 7469 6f6e 7320 746f  nd -J options to
+000191c0: 6765 7468 6572 2069 7320 696e 7661 6c69  gether is invali
+000191d0: 642e 272c 2073 7464 6572 7229 0a0a 2020  d.', stderr)..  
+000191e0: 6465 6620 7465 7374 5f63 6f6d 6269 6e65  def test_combine
+000191f0: 645f 677a 6970 5f6f 7074 696f 6e73 5f65  d_gzip_options_e
+00019200: 7272 6f72 2873 656c 6629 3a0a 2020 2020  rror(self):.    
+00019210: 2222 2254 6573 7420 7468 6174 206d 6978  """Test that mix
+00019220: 696e 6720 7472 616e 7370 6f72 7420 656e  ing transport en
+00019230: 636f 6469 6e67 2061 6e64 2063 6f6d 7072  coding and compr
+00019240: 6573 7369 6f6e 2066 6c61 6773 2065 7272  ession flags err
+00019250: 6f72 2e22 2222 0a20 2020 2063 6173 6573  or.""".    cases
+00019260: 203d 2028 5b27 6370 272c 2027 2d5a 272c   = (['cp', '-Z',
+00019270: 2027 2d6a 272c 2027 6874 6d6c 2c20 6a73   '-j', 'html, js
+00019280: 272c 2027 612e 6a73 272c 0a20 2020 2020  ', 'a.js',.     
+00019290: 2020 2020 2020 2020 2027 622e 6a73 275d           'b.js']
+000192a0: 2c20 5b27 6370 272c 2027 2d4a 272c 2027  , ['cp', '-J', '
+000192b0: 2d7a 272c 2027 6874 6d6c 2c20 6a73 272c  -z', 'html, js',
+000192c0: 2027 612e 6a73 272c 0a20 2020 2020 2020   'a.js',.       
+000192d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000192e0: 2027 622e 6a73 275d 2c20 5b27 6370 272c   'b.js'], ['cp',
+000192f0: 2027 2d6a 272c 2027 6874 6d6c 2c20 6a73   '-j', 'html, js
+00019300: 272c 2027 2d5a 272c 2027 612e 6a73 272c  ', '-Z', 'a.js',
+00019310: 2027 622e 6a73 275d 2c0a 2020 2020 2020   'b.js'],.      
+00019320: 2020 2020 2020 205b 2763 7027 2c20 272d         ['cp', '-
+00019330: 7a27 2c20 2768 746d 6c2c 206a 7327 2c20  z', 'html, js', 
+00019340: 272d 4a27 2c20 2761 2e6a 7327 2c20 2762  '-J', 'a.js', 'b
+00019350: 2e6a 7327 5d29 0a0a 2020 2020 666f 7220  .js'])..    for 
+00019360: 6361 7365 2069 6e20 6361 7365 733a 0a20  case in cases:. 
+00019370: 2020 2020 2073 7464 6572 7220 3d20 7365       stderr = se
+00019380: 6c66 2e52 756e 4773 5574 696c 2863 6173  lf.RunGsUtil(cas
+00019390: 652c 2072 6574 7572 6e5f 7374 6465 7272  e, return_stderr
+000193a0: 3d54 7275 652c 2065 7870 6563 7465 645f  =True, expected_
+000193b0: 7374 6174 7573 3d31 290a 2020 2020 2020  status=1).      
+000193c0: 7365 6c66 2e61 7373 6572 7449 6e28 2743  self.assertIn('C
+000193d0: 6f6d 6d61 6e64 4578 6365 7074 696f 6e27  ommandException'
+000193e0: 2c20 7374 6465 7272 290a 2020 2020 2020  , stderr).      
+000193f0: 7365 6c66 2e61 7373 6572 7449 6e28 0a20  self.assertIn(. 
+00019400: 2020 2020 2020 2020 2027 5370 6563 6966           'Specif
+00019410: 7969 6e67 2062 6f74 6820 7468 6520 2d6a  ying both the -j
+00019420: 2f2d 4a20 616e 6420 2d7a 2f2d 5a20 6f70  /-J and -z/-Z op
+00019430: 7469 6f6e 7320 746f 6765 7468 6572 2069  tions together i
+00019440: 7320 696e 7661 6c69 642e 272c 0a20 2020  s invalid.',.   
+00019450: 2020 2020 2020 2073 7464 6572 7229 0a0a         stderr)..
+00019460: 2020 6465 6620 7465 7374 5f75 706c 6f61    def test_uploa
+00019470: 645f 7769 7468 5f73 7562 6469 725f 616e  d_with_subdir_an
+00019480: 645f 756e 6578 7061 6e64 6564 5f77 696c  d_unexpanded_wil
+00019490: 6463 6172 6428 7365 6c66 293a 0a20 2020  dcard(self):.   
+000194a0: 2066 7061 7468 3120 3d20 7365 6c66 2e43   fpath1 = self.C
+000194b0: 7265 6174 6554 656d 7046 696c 6528 6669  reateTempFile(fi
+000194c0: 6c65 5f6e 616d 653d 2827 746d 7027 2c20  le_name=('tmp', 
+000194d0: 2778 272c 2027 7927 2c20 277a 2729 290a  'x', 'y', 'z')).
+000194e0: 2020 2020 6275 636b 6574 5f75 7269 203d      bucket_uri =
+000194f0: 2073 656c 662e 4372 6561 7465 4275 636b   self.CreateBuck
+00019500: 6574 2829 0a20 2020 2077 696c 6463 6172  et().    wildcar
+00019510: 645f 7572 6920 3d20 2725 732a 2720 2520  d_uri = '%s*' % 
+00019520: 6670 6174 6831 5b3a 2d35 5d0a 2020 2020  fpath1[:-5].    
+00019530: 7374 6465 7272 203d 2073 656c 662e 5275  stderr = self.Ru
+00019540: 6e47 7355 7469 6c28 0a20 2020 2020 2020  nGsUtil(.       
+00019550: 205b 2763 7027 2c20 272d 5227 2c20 7769   ['cp', '-R', wi
+00019560: 6c64 6361 7264 5f75 7269 2c20 7375 7269  ldcard_uri, suri
+00019570: 2862 7563 6b65 745f 7572 6929 5d2c 2072  (bucket_uri)], r
+00019580: 6574 7572 6e5f 7374 6465 7272 3d54 7275  eturn_stderr=Tru
+00019590: 6529 0a20 2020 2073 656c 662e 6173 7365  e).    self.asse
+000195a0: 7274 496e 2827 436f 7079 696e 6720 6669  rtIn('Copying fi
+000195b0: 6c65 3a27 2c20 7374 6465 7272 290a 2020  le:', stderr).  
+000195c0: 2020 7365 6c66 2e41 7373 6572 744e 4f62    self.AssertNOb
+000195d0: 6a65 6374 7349 6e42 7563 6b65 7428 6275  jectsInBucket(bu
+000195e0: 636b 6574 5f75 7269 2c20 3129 0a0a 2020  cket_uri, 1)..  
+000195f0: 6465 6620 7465 7374 5f75 706c 6f61 645f  def test_upload_
+00019600: 646f 6573 5f6e 6f74 5f72 6169 7365 5f77  does_not_raise_w
+00019610: 6974 685f 636f 6e74 656e 745f 6d64 355f  ith_content_md5_
+00019620: 616e 645f 6368 6563 6b5f 6861 7368 6573  and_check_hashes
+00019630: 5f6e 6576 6572 2873 656c 6629 3a0a 2020  _never(self):.  
+00019640: 2020 6670 6174 6831 203d 2073 656c 662e    fpath1 = self.
+00019650: 4372 6561 7465 5465 6d70 4669 6c65 2866  CreateTempFile(f
+00019660: 696c 655f 6e61 6d65 3d28 2766 6f6f 2729  ile_name=('foo')
+00019670: 290a 2020 2020 6275 636b 6574 5f75 7269  ).    bucket_uri
+00019680: 203d 2073 656c 662e 4372 6561 7465 4275   = self.CreateBu
+00019690: 636b 6574 2829 0a20 2020 2077 6974 6820  cket().    with 
+000196a0: 5365 7442 6f74 6f43 6f6e 6669 6746 6f72  SetBotoConfigFor
+000196b0: 5465 7374 285b 2827 4753 5574 696c 272c  Test([('GSUtil',
+000196c0: 2027 6368 6563 6b5f 6861 7368 6573 272c   'check_hashes',
+000196d0: 2027 6e65 7665 7227 295d 293a 0a20 2020   'never')]):.   
+000196e0: 2020 2073 7464 6572 7220 3d20 7365 6c66     stderr = self
+000196f0: 2e52 756e 4773 5574 696c 280a 2020 2020  .RunGsUtil(.    
+00019700: 2020 2020 2020 5b27 2d68 272c 2027 436f        ['-h', 'Co
+00019710: 6e74 656e 742d 4d44 353a 2069 6e76 616c  ntent-MD5: inval
+00019720: 6964 2d6d 6435 272c 2027 6370 272c 2066  id-md5', 'cp', f
+00019730: 7061 7468 312c 0a20 2020 2020 2020 2020  path1,.         
+00019740: 2020 7375 7269 2862 7563 6b65 745f 7572    suri(bucket_ur
+00019750: 6929 5d2c 0a20 2020 2020 2020 2020 2072  i)],.          r
+00019760: 6574 7572 6e5f 7374 6465 7272 3d54 7275  eturn_stderr=Tru
+00019770: 6529 0a20 2020 2020 2073 656c 662e 6173  e).      self.as
+00019780: 7365 7274 496e 2827 436f 7079 696e 6720  sertIn('Copying 
+00019790: 6669 6c65 3a27 2c20 7374 6465 7272 290a  file:', stderr).
+000197a0: 2020 2020 7365 6c66 2e41 7373 6572 744e      self.AssertN
+000197b0: 4f62 6a65 6374 7349 6e42 7563 6b65 7428  ObjectsInBucket(
+000197c0: 6275 636b 6574 5f75 7269 2c20 3129 0a0a  bucket_uri, 1)..
+000197d0: 2020 4053 6571 7565 6e74 6961 6c41 6e64    @SequentialAnd
+000197e0: 5061 7261 6c6c 656c 5472 616e 7366 6572  ParallelTransfer
+000197f0: 0a20 2064 6566 2074 6573 745f 6370 5f6f  .  def test_cp_o
+00019800: 626a 6563 745f 656e 6469 6e67 5f77 6974  bject_ending_wit
+00019810: 685f 736c 6173 6828 7365 6c66 293a 0a20  h_slash(self):. 
+00019820: 2020 2022 2222 5465 7374 7320 7468 6174     """Tests that
+00019830: 2063 7020 776f 726b 7320 7769 7468 206f   cp works with o
+00019840: 626a 6563 7420 6e61 6d65 7320 656e 6469  bject names endi
+00019850: 6e67 2077 6974 6820 736c 6173 682e 2222  ng with slash.""
+00019860: 220a 2020 2020 746d 7064 6972 203d 2073  ".    tmpdir = s
+00019870: 656c 662e 4372 6561 7465 5465 6d70 4469  elf.CreateTempDi
+00019880: 7228 290a 2020 2020 6275 636b 6574 5f75  r().    bucket_u
+00019890: 7269 203d 2073 656c 662e 4372 6561 7465  ri = self.Create
+000198a0: 4275 636b 6574 2829 0a20 2020 2073 656c  Bucket().    sel
+000198b0: 662e 4372 6561 7465 4f62 6a65 6374 2862  f.CreateObject(b
+000198c0: 7563 6b65 745f 7572 693d 6275 636b 6574  ucket_uri=bucket
+000198d0: 5f75 7269 2c0a 2020 2020 2020 2020 2020  _uri,.          
+000198e0: 2020 2020 2020 2020 2020 2020 6f62 6a65              obje
+000198f0: 6374 5f6e 616d 653d 2761 6263 2f27 2c0a  ct_name='abc/',.
+00019900: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019910: 2020 2020 2020 636f 6e74 656e 7473 3d62        contents=b
+00019920: 2764 6972 2729 0a20 2020 2073 656c 662e  'dir').    self.
+00019930: 4372 6561 7465 4f62 6a65 6374 2862 7563  CreateObject(buc
+00019940: 6b65 745f 7572 693d 6275 636b 6574 5f75  ket_uri=bucket_u
+00019950: 7269 2c0a 2020 2020 2020 2020 2020 2020  ri,.            
+00019960: 2020 2020 2020 2020 2020 6f62 6a65 6374            object
+00019970: 5f6e 616d 653d 2761 6263 2f64 6566 272c  _name='abc/def',
+00019980: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00019990: 2020 2020 2020 2063 6f6e 7465 6e74 733d         contents=
+000199a0: 6227 6465 6627 290a 2020 2020 7365 6c66  b'def').    self
+000199b0: 2e41 7373 6572 744e 4f62 6a65 6374 7349  .AssertNObjectsI
+000199c0: 6e42 7563 6b65 7428 6275 636b 6574 5f75  nBucket(bucket_u
+000199d0: 7269 2c20 3229 0a20 2020 2073 656c 662e  ri, 2).    self.
+000199e0: 5275 6e47 7355 7469 6c28 5b27 6370 272c  RunGsUtil(['cp',
+000199f0: 2027 2d52 272c 2073 7572 6928 6275 636b   '-R', suri(buck
+00019a00: 6574 5f75 7269 292c 2074 6d70 6469 725d  et_uri), tmpdir]
+00019a10: 290a 2020 2020 2320 4368 6563 6b20 7468  ).    # Check th
+00019a20: 6174 2066 696c 6573 2069 6e20 7468 6520  at files in the 
+00019a30: 7375 6264 6972 2067 6f74 2063 6f70 6965  subdir got copie
+00019a40: 6420 6576 656e 2074 686f 7567 6820 7375  d even though su
+00019a50: 6264 6972 206f 626a 6563 740a 2020 2020  bdir object.    
+00019a60: 2320 646f 776e 6c6f 6164 2077 6173 2073  # download was s
+00019a70: 6b69 7070 6564 2e0a 2020 2020 7769 7468  kipped..    with
+00019a80: 206f 7065 6e28 6f73 2e70 6174 682e 6a6f   open(os.path.jo
+00019a90: 696e 2874 6d70 6469 722c 2062 7563 6b65  in(tmpdir, bucke
+00019aa0: 745f 7572 692e 6275 636b 6574 5f6e 616d  t_uri.bucket_nam
+00019ab0: 652c 2027 6162 6327 2c20 2764 6566 2729  e, 'abc', 'def')
+00019ac0: 2920 6173 2066 3a0a 2020 2020 2020 7365  ) as f:.      se
+00019ad0: 6c66 2e61 7373 6572 7445 7175 616c 7328  lf.assertEquals(
+00019ae0: 2764 6566 272c 2027 5c6e 272e 6a6f 696e  'def', '\n'.join
+00019af0: 2866 2e72 6561 646c 696e 6573 2829 2929  (f.readlines()))
+00019b00: 0a0a 2020 6465 6620 7465 7374 5f63 705f  ..  def test_cp_
+00019b10: 7769 7468 6f75 745f 7265 6164 5f61 6363  without_read_acc
+00019b20: 6573 7328 7365 6c66 293a 0a20 2020 2022  ess(self):.    "
+00019b30: 2222 5465 7374 7320 7468 6174 2063 7020  ""Tests that cp 
+00019b40: 6661 696c 7320 7769 7468 6f75 7420 7265  fails without re
+00019b50: 6164 2061 6363 6573 7320 746f 2074 6865  ad access to the
+00019b60: 206f 626a 6563 742e 2222 220a 2020 2020   object.""".    
+00019b70: 2320 544f 444f 3a20 5769 7468 2034 3031  # TODO: With 401
+00019b80: 2773 2074 7269 6767 6572 696e 6720 7265  's triggering re
+00019b90: 7472 6965 7320 696e 2061 7069 746f 6f6c  tries in apitool
+00019ba0: 732c 2074 6869 7320 7465 7374 2077 696c  s, this test wil
+00019bb0: 6c20 7461 6b65 0a20 2020 2023 2061 206c  l take.    # a l
+00019bc0: 6f6e 6720 7469 6d65 2e20 2049 6465 616c  ong time.  Ideal
+00019bd0: 6c79 2c20 6d61 6b65 2061 7069 746f 6f6c  ly, make apitool
+00019be0: 7320 6163 6365 7074 2061 206e 756d 5f72  s accept a num_r
+00019bf0: 6574 7269 6573 2063 6f6e 6669 6720 666f  etries config fo
+00019c00: 7220 7468 6973 0a20 2020 2023 2075 6e74  r this.    # unt
+00019c10: 696c 2077 6520 7374 6f70 2072 6574 7279  il we stop retry
+00019c20: 696e 6720 7468 6520 3430 3127 732e 0a20  ing the 401's.. 
+00019c30: 2020 2062 7563 6b65 745f 7572 6920 3d20     bucket_uri = 
+00019c40: 7365 6c66 2e43 7265 6174 6542 7563 6b65  self.CreateBucke
+00019c50: 7428 290a 2020 2020 6f62 6a65 6374 5f75  t().    object_u
+00019c60: 7269 203d 2073 656c 662e 4372 6561 7465  ri = self.Create
+00019c70: 4f62 6a65 6374 2862 7563 6b65 745f 7572  Object(bucket_ur
+00019c80: 693d 6275 636b 6574 5f75 7269 2c20 636f  i=bucket_uri, co
+00019c90: 6e74 656e 7473 3d62 2766 6f6f 2729 0a0a  ntents=b'foo')..
+00019ca0: 2020 2020 2320 5573 6520 4052 6574 7279      # Use @Retry
+00019cb0: 2061 7320 6865 6467 6520 6167 6169 6e73   as hedge agains
+00019cc0: 7420 6275 636b 6574 206c 6973 7469 6e67  t bucket listing
+00019cd0: 2065 7665 6e74 7561 6c20 636f 6e73 6973   eventual consis
+00019ce0: 7465 6e63 792e 0a20 2020 2073 656c 662e  tency..    self.
+00019cf0: 4173 7365 7274 4e4f 626a 6563 7473 496e  AssertNObjectsIn
+00019d00: 4275 636b 6574 2862 7563 6b65 745f 7572  Bucket(bucket_ur
+00019d10: 692c 2031 290a 0a20 2020 2069 6620 7365  i, 1)..    if se
+00019d20: 6c66 2e64 6566 6175 6c74 5f70 726f 7669  lf.default_provi
+00019d30: 6465 7220 3d3d 2027 7333 273a 0a20 2020  der == 's3':.   
+00019d40: 2020 2065 7870 6563 7465 645f 6572 726f     expected_erro
+00019d50: 725f 7265 6765 7820 3d20 7227 4163 6365  r_regex = r'Acce
+00019d60: 7373 4465 6e69 6564 270a 2020 2020 656c  ssDenied'.    el
+00019d70: 7365 3a0a 2020 2020 2020 6578 7065 6374  se:.      expect
+00019d80: 6564 5f65 7272 6f72 5f72 6567 6578 203d  ed_error_regex =
+00019d90: 2072 2741 6e6f 6e79 6d6f 7573 205c 532b   r'Anonymous \S+
+00019da0: 2064 6f28 6573 293f 206e 6f74 2068 6176   do(es)? not hav
+00019db0: 6527 0a0a 2020 2020 7769 7468 2073 656c  e'..    with sel
+00019dc0: 662e 5365 7441 6e6f 6e79 6d6f 7573 426f  f.SetAnonymousBo
+00019dd0: 746f 4372 6564 7328 293a 0a20 2020 2020  toCreds():.     
+00019de0: 2073 7464 6572 7220 3d20 7365 6c66 2e52   stderr = self.R
+00019df0: 756e 4773 5574 696c 285b 2763 7027 2c20  unGsUtil(['cp', 
+00019e00: 7375 7269 286f 626a 6563 745f 7572 6929  suri(object_uri)
+00019e10: 2c20 2766 6f6f 275d 2c0a 2020 2020 2020  , 'foo'],.      
+00019e20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019e30: 2020 2020 2020 2020 7265 7475 726e 5f73          return_s
+00019e40: 7464 6572 723d 5472 7565 2c0a 2020 2020  tderr=True,.    
+00019e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019e60: 2020 2020 2020 2020 2020 6578 7065 6374            expect
+00019e70: 6564 5f73 7461 7475 733d 3129 0a20 2020  ed_status=1).   
+00019e80: 2073 656c 662e 6173 7365 7274 5265 6765   self.assertRege
+00019e90: 7828 7374 6465 7272 2c20 6578 7065 6374  x(stderr, expect
+00019ea0: 6564 5f65 7272 6f72 5f72 6567 6578 290a  ed_error_regex).
+00019eb0: 0a20 2040 756e 6974 7465 7374 2e73 6b69  .  @unittest.ski
+00019ec0: 7049 6628 4953 5f57 494e 444f 5753 2c20  pIf(IS_WINDOWS, 
+00019ed0: 276f 732e 7379 6d6c 696e 6b28 2920 6973  'os.symlink() is
+00019ee0: 206e 6f74 2061 7661 696c 6162 6c65 206f   not available o
+00019ef0: 6e20 5769 6e64 6f77 732e 2729 0a20 2064  n Windows.').  d
+00019f00: 6566 2074 6573 745f 6370 5f6d 696e 7573  ef test_cp_minus
+00019f10: 5f72 5f6d 696e 7573 5f65 2873 656c 6629  _r_minus_e(self)
+00019f20: 3a0a 2020 2020 2222 2254 6573 7473 2074  :.    """Tests t
+00019f30: 6861 7420 6370 202d 6520 2d72 2069 676e  hat cp -e -r ign
+00019f40: 6f72 6573 2073 796d 6c69 6e6b 7320 7768  ores symlinks wh
+00019f50: 656e 2072 6563 7572 7369 6e67 2e22 2222  en recursing."""
+00019f60: 0a20 2020 2062 7563 6b65 745f 7572 6920  .    bucket_uri 
+00019f70: 3d20 7365 6c66 2e43 7265 6174 6542 7563  = self.CreateBuc
+00019f80: 6b65 7428 290a 2020 2020 746d 7064 6972  ket().    tmpdir
+00019f90: 203d 2073 656c 662e 4372 6561 7465 5465   = self.CreateTe
+00019fa0: 6d70 4469 7228 290a 2020 2020 2320 4372  mpDir().    # Cr
+00019fb0: 6561 7465 2061 2076 616c 6964 2066 696c  eate a valid fil
+00019fc0: 652c 2073 696e 6365 2063 7020 6578 7065  e, since cp expe
+00019fd0: 6374 7320 746f 2063 6f70 7920 6174 206c  cts to copy at l
+00019fe0: 6561 7374 206f 6e65 2073 6f75 7263 6520  east one source 
+00019ff0: 5552 4c0a 2020 2020 2320 7375 6363 6573  URL.    # succes
+0001a000: 7366 756c 6c79 2e0a 2020 2020 7365 6c66  sfully..    self
+0001a010: 2e43 7265 6174 6554 656d 7046 696c 6528  .CreateTempFile(
+0001a020: 746d 7064 6972 3d74 6d70 6469 722c 2063  tmpdir=tmpdir, c
+0001a030: 6f6e 7465 6e74 733d 6227 666f 6f27 290a  ontents=b'foo').
+0001a040: 2020 2020 7375 6264 6972 203d 206f 732e      subdir = os.
+0001a050: 7061 7468 2e6a 6f69 6e28 746d 7064 6972  path.join(tmpdir
+0001a060: 2c20 2773 7562 6469 7227 290a 2020 2020  , 'subdir').    
+0001a070: 6f73 2e6d 6b64 6972 2873 7562 6469 7229  os.mkdir(subdir)
+0001a080: 0a20 2020 206f 732e 6d6b 6469 7228 6f73  .    os.mkdir(os
+0001a090: 2e70 6174 682e 6a6f 696e 2874 6d70 6469  .path.join(tmpdi
+0001a0a0: 722c 2027 6d69 7373 696e 6727 2929 0a20  r, 'missing')). 
+0001a0b0: 2020 2023 2043 7265 6174 6520 6120 626c     # Create a bl
+0001a0c0: 616e 6b20 6469 7265 6374 6f72 7920 7468  ank directory th
+0001a0d0: 6174 2069 7320 6120 6272 6f6b 656e 2073  at is a broken s
+0001a0e0: 796d 6c69 6e6b 2074 6f20 656e 7375 7265  ymlink to ensure
+0001a0f0: 2074 6861 7420 7765 0a20 2020 2023 2064   that we.    # d
+0001a100: 6f6e 2774 2066 6169 6c20 7265 6375 7273  on't fail recurs
+0001a110: 6976 6520 656e 756d 6572 6174 696f 6e20  ive enumeration 
+0001a120: 7769 7468 2061 2062 6164 2073 796d 6c69  with a bad symli
+0001a130: 6e6b 2e0a 2020 2020 6f73 2e73 796d 6c69  nk..    os.symli
+0001a140: 6e6b 286f 732e 7061 7468 2e6a 6f69 6e28  nk(os.path.join(
+0001a150: 746d 7064 6972 2c20 276d 6973 7369 6e67  tmpdir, 'missing
+0001a160: 2729 2c20 6f73 2e70 6174 682e 6a6f 696e  '), os.path.join
+0001a170: 2873 7562 6469 722c 2027 6d69 7373 696e  (subdir, 'missin
+0001a180: 6727 2929 0a20 2020 206f 732e 726d 6469  g')).    os.rmdi
+0001a190: 7228 6f73 2e70 6174 682e 6a6f 696e 2874  r(os.path.join(t
+0001a1a0: 6d70 6469 722c 2027 6d69 7373 696e 6727  mpdir, 'missing'
+0001a1b0: 2929 0a20 2020 2073 656c 662e 5275 6e47  )).    self.RunG
+0001a1c0: 7355 7469 6c28 5b27 6370 272c 2027 2d72  sUtil(['cp', '-r
+0001a1d0: 272c 2027 2d65 272c 2074 6d70 6469 722c  ', '-e', tmpdir,
+0001a1e0: 2073 7572 6928 6275 636b 6574 5f75 7269   suri(bucket_uri
+0001a1f0: 295d 290a 0a20 2040 756e 6974 7465 7374  )])..  @unittest
+0001a200: 2e73 6b69 7049 6628 4953 5f57 494e 444f  .skipIf(IS_WINDO
+0001a210: 5753 2c20 276f 732e 7379 6d6c 696e 6b28  WS, 'os.symlink(
+0001a220: 2920 6973 206e 6f74 2061 7661 696c 6162  ) is not availab
+0001a230: 6c65 206f 6e20 5769 6e64 6f77 732e 2729  le on Windows.')
+0001a240: 0a20 2064 6566 2074 6573 745f 6370 5f6d  .  def test_cp_m
+0001a250: 696e 7573 5f65 2873 656c 6629 3a0a 2020  inus_e(self):.  
+0001a260: 2020 6670 6174 685f 6469 7220 3d20 7365    fpath_dir = se
+0001a270: 6c66 2e43 7265 6174 6554 656d 7044 6972  lf.CreateTempDir
+0001a280: 2829 0a20 2020 2066 7061 7468 3120 3d20  ().    fpath1 = 
+0001a290: 7365 6c66 2e43 7265 6174 6554 656d 7046  self.CreateTempF
+0001a2a0: 696c 6528 746d 7064 6972 3d66 7061 7468  ile(tmpdir=fpath
+0001a2b0: 5f64 6972 290a 2020 2020 6670 6174 6832  _dir).    fpath2
+0001a2c0: 203d 206f 732e 7061 7468 2e6a 6f69 6e28   = os.path.join(
+0001a2d0: 6670 6174 685f 6469 722c 2027 6370 5f6d  fpath_dir, 'cp_m
+0001a2e0: 696e 7573 5f65 2729 0a20 2020 2062 7563  inus_e').    buc
+0001a2f0: 6b65 745f 7572 6920 3d20 7365 6c66 2e43  ket_uri = self.C
+0001a300: 7265 6174 6542 7563 6b65 7428 290a 2020  reateBucket().  
+0001a310: 2020 6f73 2e73 796d 6c69 6e6b 2866 7061    os.symlink(fpa
+0001a320: 7468 312c 2066 7061 7468 3229 0a20 2020  th1, fpath2).   
+0001a330: 2023 2057 6520 616c 736f 2075 7365 202d   # We also use -
+0001a340: 6320 746f 2063 6f6e 7469 6e75 6520 6f6e  c to continue on
+0001a350: 2065 7272 6f72 732e 204f 6e65 206f 6620   errors. One of 
+0001a360: 7468 6520 6578 7061 6e64 6564 2067 6c6f  the expanded glo
+0001a370: 6220 656e 7472 6965 730a 2020 2020 2320  b entries.    # 
+0001a380: 7368 6f75 6c64 2062 6520 7468 6520 7379  should be the sy
+0001a390: 6d6c 696e 6b65 6420 6669 6c65 2c20 7768  mlinked file, wh
+0001a3a0: 6963 6820 7368 6f75 6c64 2074 6872 6f77  ich should throw
+0001a3b0: 2061 2043 6f6d 6d61 6e64 4578 6365 7074   a CommandExcept
+0001a3c0: 696f 6e20 7369 6e63 650a 2020 2020 2320  ion since.    # 
+0001a3d0: 6e6f 2076 616c 6964 2028 6e6f 6e2d 7379  no valid (non-sy
+0001a3e0: 6d6c 696e 6b65 6429 2066 696c 6573 2063  mlinked) files c
+0001a3f0: 6f75 6c64 2062 6520 666f 756e 6420 6174  ould be found at
+0001a400: 2074 6861 7420 7061 7468 3b20 7765 2064   that path; we d
+0001a410: 6f6e 2774 2077 616e 740a 2020 2020 2320  on't want.    # 
+0001a420: 7468 6520 636f 6d6d 616e 6420 746f 2074  the command to t
+0001a430: 6572 6d69 6e61 7465 2069 6620 7468 6174  erminate if that
+0001a440: 2773 2074 6865 2066 6972 7374 2066 696c  's the first fil
+0001a450: 6520 7765 2061 7474 656d 7074 2074 6f20  e we attempt to 
+0001a460: 636f 7079 2e0a 2020 2020 7374 6465 7272  copy..    stderr
+0001a470: 203d 2073 656c 662e 5275 6e47 7355 7469   = self.RunGsUti
+0001a480: 6c28 5b0a 2020 2020 2020 2020 272d 6d27  l([.        '-m'
+0001a490: 2c20 2763 7027 2c20 272d 6527 2c0a 2020  , 'cp', '-e',.  
+0001a4a0: 2020 2020 2020 2725 7325 732a 2720 2520        '%s%s*' % 
+0001a4b0: 2866 7061 7468 5f64 6972 2c20 6f73 2e70  (fpath_dir, os.p
+0001a4c0: 6174 682e 7365 7029 2c0a 2020 2020 2020  ath.sep),.      
+0001a4d0: 2020 7375 7269 2862 7563 6b65 745f 7572    suri(bucket_ur
+0001a4e0: 692c 2027 6669 6c65 7327 290a 2020 2020  i, 'files').    
+0001a4f0: 5d2c 0a20 2020 2020 2020 2020 2020 2020  ],.             
+0001a500: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+0001a510: 6574 7572 6e5f 7374 6465 7272 3d54 7275  eturn_stderr=Tru
+0001a520: 6529 0a20 2020 2073 656c 662e 6173 7365  e).    self.asse
+0001a530: 7274 496e 2827 436f 7079 696e 6720 6669  rtIn('Copying fi
+0001a540: 6c65 272c 2073 7464 6572 7229 0a20 2020  le', stderr).   
+0001a550: 2069 6620 7365 6c66 2e5f 7573 655f 6763   if self._use_gc
+0001a560: 6c6f 7564 5f73 746f 7261 6765 3a0a 2020  loud_storage:.  
+0001a570: 2020 2020 7365 6c66 2e61 7373 6572 7449      self.assertI
+0001a580: 6e28 2753 6b69 7070 696e 6720 7379 6d6c  n('Skipping syml
+0001a590: 696e 6b27 2c20 7374 6465 7272 290a 2020  ink', stderr).  
+0001a5a0: 2020 656c 7365 3a0a 2020 2020 2020 7365    else:.      se
+0001a5b0: 6c66 2e61 7373 6572 7449 6e28 2753 6b69  lf.assertIn('Ski
+0001a5c0: 7070 696e 6720 7379 6d62 6f6c 6963 206c  pping symbolic l
+0001a5d0: 696e 6b27 2c20 7374 6465 7272 290a 0a20  ink', stderr).. 
+0001a5e0: 2020 2023 2045 6e73 7572 6520 7468 6174     # Ensure that
+0001a5f0: 2074 6f70 2d6c 6576 656c 2061 7267 756d   top-level argum
+0001a600: 656e 7473 2061 7265 2069 676e 6f72 6564  ents are ignored
+0001a610: 2069 6620 7468 6579 2061 7265 2073 796d   if they are sym
+0001a620: 6c69 6e6b 732e 2054 6865 2066 696c 650a  links. The file.
+0001a630: 2020 2020 2320 6174 2066 7061 7468 3120      # at fpath1 
+0001a640: 7368 6f75 6c64 2062 6520 7375 6363 6573  should be succes
+0001a650: 7366 756c 6c79 2063 6f70 6965 642c 2074  sfully copied, t
+0001a660: 6865 6e20 636f 7079 696e 6720 7468 6520  hen copying the 
+0001a670: 7379 6d6c 696e 6b20 6174 0a20 2020 2023  symlink at.    #
+0001a680: 2066 7061 7468 3220 7368 6f75 6c64 2066   fpath2 should f
+0001a690: 6169 6c2e 0a20 2020 2073 7464 6572 7220  ail..    stderr 
+0001a6a0: 3d20 7365 6c66 2e52 756e 4773 5574 696c  = self.RunGsUtil
+0001a6b0: 280a 2020 2020 2020 2020 5b27 6370 272c  (.        ['cp',
+0001a6c0: 2027 2d65 272c 2027 2d72 272c 2066 7061   '-e', '-r', fpa
+0001a6d0: 7468 312c 2066 7061 7468 322c 0a20 2020  th1, fpath2,.   
+0001a6e0: 2020 2020 2020 7375 7269 2862 7563 6b65        suri(bucke
+0001a6f0: 745f 7572 692c 2027 6669 6c65 7327 295d  t_uri, 'files')]
+0001a700: 2c0a 2020 2020 2020 2020 7265 7475 726e  ,.        return
+0001a710: 5f73 7464 6572 723d 5472 7565 2c0a 2020  _stderr=True,.  
+0001a720: 2020 2020 2020 6578 7065 6374 6564 5f73        expected_s
+0001a730: 7461 7475 733d 3129 0a20 2020 2073 656c  tatus=1).    sel
+0001a740: 662e 6173 7365 7274 496e 2827 436f 7079  f.assertIn('Copy
+0001a750: 696e 6720 6669 6c65 272c 2073 7464 6572  ing file', stder
+0001a760: 7229 0a20 2020 2069 6620 7365 6c66 2e5f  r).    if self._
+0001a770: 7573 655f 6763 6c6f 7564 5f73 746f 7261  use_gcloud_stora
+0001a780: 6765 3a0a 2020 2020 2020 7365 6c66 2e61  ge:.      self.a
+0001a790: 7373 6572 7449 6e28 2753 6b69 7070 696e  ssertIn('Skippin
+0001a7a0: 6720 7379 6d6c 696e 6b27 2c20 7374 6465  g symlink', stde
+0001a7b0: 7272 290a 2020 2020 2020 7365 6c66 2e61  rr).      self.a
+0001a7c0: 7373 6572 7449 6e28 2755 524c 206d 6174  ssertIn('URL mat
+0001a7d0: 6368 6564 206e 6f20 6f62 6a65 6374 7320  ched no objects 
+0001a7e0: 6f72 2066 696c 6573 3a20 2573 2720 2520  or files: %s' % 
+0001a7f0: 6670 6174 6832 2c20 7374 6465 7272 290a  fpath2, stderr).
+0001a800: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0001a810: 7365 6c66 2e61 7373 6572 7449 6e28 2753  self.assertIn('S
+0001a820: 6b69 7070 696e 6720 7379 6d62 6f6c 6963  kipping symbolic
+0001a830: 206c 696e 6b27 2c20 7374 6465 7272 290a   link', stderr).
+0001a840: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+0001a850: 7449 6e28 2743 6f6d 6d61 6e64 4578 6365  tIn('CommandExce
+0001a860: 7074 696f 6e3a 204e 6f20 5552 4c73 206d  ption: No URLs m
+0001a870: 6174 6368 6564 3a20 2573 2720 2520 6670  atched: %s' % fp
+0001a880: 6174 6832 2c20 7374 6465 7272 290a 0a20  ath2, stderr).. 
+0001a890: 2064 6566 2074 6573 745f 6370 5f6d 756c   def test_cp_mul
+0001a8a0: 7469 7468 7265 6164 6564 5f77 696c 6463  tithreaded_wildc
+0001a8b0: 6172 6428 7365 6c66 293a 0a20 2020 2022  ard(self):.    "
+0001a8c0: 2222 5465 7374 7320 7468 6174 2063 7020  ""Tests that cp 
+0001a8d0: 2d6d 2077 6f72 6b73 2077 6974 6820 6120  -m works with a 
+0001a8e0: 7769 6c64 6361 7264 2e22 2222 0a20 2020  wildcard.""".   
+0001a8f0: 206e 756d 5f74 6573 745f 6669 6c65 7320   num_test_files 
+0001a900: 3d20 350a 2020 2020 746d 705f 6469 7220  = 5.    tmp_dir 
+0001a910: 3d20 7365 6c66 2e43 7265 6174 6554 656d  = self.CreateTem
+0001a920: 7044 6972 2874 6573 745f 6669 6c65 733d  pDir(test_files=
+0001a930: 6e75 6d5f 7465 7374 5f66 696c 6573 290a  num_test_files).
+0001a940: 2020 2020 6275 636b 6574 5f75 7269 203d      bucket_uri =
+0001a950: 2073 656c 662e 4372 6561 7465 4275 636b   self.CreateBuck
+0001a960: 6574 2829 0a20 2020 2077 696c 6463 6172  et().    wildcar
+0001a970: 645f 7572 6920 3d20 2725 7325 732a 2720  d_uri = '%s%s*' 
+0001a980: 2520 2874 6d70 5f64 6972 2c20 6f73 2e73  % (tmp_dir, os.s
+0001a990: 6570 290a 2020 2020 7365 6c66 2e52 756e  ep).    self.Run
+0001a9a0: 4773 5574 696c 285b 272d 6d27 2c20 2763  GsUtil(['-m', 'c
+0001a9b0: 7027 2c20 7769 6c64 6361 7264 5f75 7269  p', wildcard_uri
+0001a9c0: 2c20 7375 7269 2862 7563 6b65 745f 7572  , suri(bucket_ur
+0001a9d0: 6929 5d29 0a20 2020 2073 656c 662e 4173  i)]).    self.As
+0001a9e0: 7365 7274 4e4f 626a 6563 7473 496e 4275  sertNObjectsInBu
+0001a9f0: 636b 6574 2862 7563 6b65 745f 7572 692c  cket(bucket_uri,
+0001aa00: 206e 756d 5f74 6573 745f 6669 6c65 7329   num_test_files)
+0001aa10: 0a0a 2020 4053 6571 7565 6e74 6961 6c41  ..  @SequentialA
+0001aa20: 6e64 5061 7261 6c6c 656c 5472 616e 7366  ndParallelTransf
+0001aa30: 6572 0a20 2064 6566 2074 6573 745f 6370  er.  def test_cp
+0001aa40: 5f64 7570 6c69 6361 7465 5f73 6f75 7263  _duplicate_sourc
+0001aa50: 655f 6172 6773 2873 656c 6629 3a0a 2020  e_args(self):.  
+0001aa60: 2020 2222 2254 6573 7473 2074 6861 7420    """Tests that 
+0001aa70: 6370 202d 6d20 776f 726b 7320 7768 656e  cp -m works when
+0001aa80: 2061 2073 6f75 7263 6520 6172 6775 6d65   a source argume
+0001aa90: 6e74 2069 7320 7072 6f76 6964 6564 2074  nt is provided t
+0001aaa0: 7769 6365 2e22 2222 0a20 2020 206f 626a  wice.""".    obj
+0001aab0: 6563 745f 636f 6e74 656e 7473 203d 2062  ect_contents = b
+0001aac0: 2765 6467 6527 0a20 2020 206f 626a 6563  'edge'.    objec
+0001aad0: 745f 7572 6920 3d20 7365 6c66 2e43 7265  t_uri = self.Cre
+0001aae0: 6174 654f 626a 6563 7428 6f62 6a65 6374  ateObject(object
+0001aaf0: 5f6e 616d 653d 2766 6f6f 272c 2063 6f6e  _name='foo', con
+0001ab00: 7465 6e74 733d 6f62 6a65 6374 5f63 6f6e  tents=object_con
+0001ab10: 7465 6e74 7329 0a20 2020 2074 6d70 5f64  tents).    tmp_d
+0001ab20: 6972 203d 2073 656c 662e 4372 6561 7465  ir = self.Create
+0001ab30: 5465 6d70 4469 7228 290a 2020 2020 7365  TempDir().    se
+0001ab40: 6c66 2e52 756e 4773 5574 696c 285b 272d  lf.RunGsUtil(['-
+0001ab50: 6d27 2c20 2763 7027 2c20 7375 7269 286f  m', 'cp', suri(o
+0001ab60: 626a 6563 745f 7572 6929 2c20 7375 7269  bject_uri), suri
+0001ab70: 286f 626a 6563 745f 7572 6929 2c20 746d  (object_uri), tm
+0001ab80: 705f 6469 725d 290a 2020 2020 7769 7468  p_dir]).    with
+0001ab90: 206f 7065 6e28 6f73 2e70 6174 682e 6a6f   open(os.path.jo
+0001aba0: 696e 2874 6d70 5f64 6972 2c20 2766 6f6f  in(tmp_dir, 'foo
+0001abb0: 2729 2c20 2772 6227 2920 6173 2069 6e5f  '), 'rb') as in_
+0001abc0: 6670 3a0a 2020 2020 2020 636f 6e74 656e  fp:.      conten
+0001abd0: 7473 203d 2069 6e5f 6670 2e72 6561 6428  ts = in_fp.read(
+0001abe0: 290a 2020 2020 2020 2320 436f 6e74 656e  ).      # Conten
+0001abf0: 7473 2073 686f 756c 6420 6265 206e 6f74  ts should be not
+0001ac00: 2064 7570 6c69 6361 7465 642e 0a20 2020   duplicated..   
+0001ac10: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+0001ac20: 7561 6c28 636f 6e74 656e 7473 2c20 6f62  ual(contents, ob
+0001ac30: 6a65 6374 5f63 6f6e 7465 6e74 7329 0a0a  ject_contents)..
+0001ac40: 2020 4053 6b69 7046 6f72 5333 2827 6773    @SkipForS3('gs
+0001ac50: 7574 696c 2064 6f65 736e 5c27 7420 7375  util doesn\'t su
+0001ac60: 7070 6f72 7420 5333 2063 7573 746f 6d65  pport S3 custome
+0001ac70: 722d 7375 7070 6c69 6564 2065 6e63 7279  r-supplied encry
+0001ac80: 7074 696f 6e20 6b65 7973 2e27 290a 2020  ption keys.').  
+0001ac90: 4053 6571 7565 6e74 6961 6c41 6e64 5061  @SequentialAndPa
+0001aca0: 7261 6c6c 656c 5472 616e 7366 6572 0a20  rallelTransfer. 
+0001acb0: 2064 6566 2074 6573 745f 6370 5f64 6f77   def test_cp_dow
+0001acc0: 6e6c 6f61 645f 656e 6372 7970 7465 645f  nload_encrypted_
+0001acd0: 6f62 6a65 6374 2873 656c 6629 3a0a 2020  object(self):.  
+0001ace0: 2020 2222 2254 6573 7473 2064 6f77 6e6c    """Tests downl
+0001acf0: 6f61 6469 6e67 2061 6e20 656e 6372 7970  oading an encryp
+0001ad00: 7465 6420 6f62 6a65 6374 2e22 2222 0a20  ted object.""". 
+0001ad10: 2020 2069 6620 7365 6c66 2e74 6573 745f     if self.test_
+0001ad20: 6170 6920 3d3d 2041 7069 5365 6c65 6374  api == ApiSelect
+0001ad30: 6f72 2e58 4d4c 3a0a 2020 2020 2020 7265  or.XML:.      re
+0001ad40: 7475 726e 2075 6e69 7474 6573 742e 736b  turn unittest.sk
+0001ad50: 6970 280a 2020 2020 2020 2020 2020 2767  ip(.          'g
+0001ad60: 7375 7469 6c20 646f 6573 206e 6f74 2073  sutil does not s
+0001ad70: 7570 706f 7274 2065 6e63 7279 7074 696f  upport encryptio
+0001ad80: 6e20 7769 7468 2074 6865 2058 4d4c 2041  n with the XML A
+0001ad90: 5049 2729 0a20 2020 206f 626a 6563 745f  PI').    object_
+0001ada0: 636f 6e74 656e 7473 203d 2062 2762 6172  contents = b'bar
+0001adb0: 270a 2020 2020 6f62 6a65 6374 5f75 7269  '.    object_uri
+0001adc0: 203d 2073 656c 662e 4372 6561 7465 4f62   = self.CreateOb
+0001add0: 6a65 6374 286f 626a 6563 745f 6e61 6d65  ject(object_name
+0001ade0: 3d27 666f 6f27 2c0a 2020 2020 2020 2020  ='foo',.        
+0001adf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ae00: 2020 2020 2020 2020 2020 2063 6f6e 7465             conte
+0001ae10: 6e74 733d 6f62 6a65 6374 5f63 6f6e 7465  nts=object_conte
+0001ae20: 6e74 732c 0a20 2020 2020 2020 2020 2020  nts,.           
+0001ae30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ae40: 2020 2020 2020 2020 656e 6372 7970 7469          encrypti
+0001ae50: 6f6e 5f6b 6579 3d54 4553 545f 454e 4352  on_key=TEST_ENCR
+0001ae60: 5950 5449 4f4e 5f4b 4559 3129 0a20 2020  YPTION_KEY1).   
+0001ae70: 2066 7061 7468 203d 2073 656c 662e 4372   fpath = self.Cr
+0001ae80: 6561 7465 5465 6d70 4669 6c65 2829 0a20  eateTempFile(). 
+0001ae90: 2020 2062 6f74 6f5f 636f 6e66 6967 5f66     boto_config_f
+0001aea0: 6f72 5f74 6573 7420 3d20 5b28 2747 5355  or_test = [('GSU
+0001aeb0: 7469 6c27 2c20 2765 6e63 7279 7074 696f  til', 'encryptio
+0001aec0: 6e5f 6b65 7927 2c20 5445 5354 5f45 4e43  n_key', TEST_ENC
+0001aed0: 5259 5054 494f 4e5f 4b45 5931 295d 0a0a  RYPTION_KEY1)]..
+0001aee0: 2020 2020 7769 7468 2053 6574 426f 746f      with SetBoto
+0001aef0: 436f 6e66 6967 466f 7254 6573 7428 626f  ConfigForTest(bo
+0001af00: 746f 5f63 6f6e 6669 675f 666f 725f 7465  to_config_for_te
+0001af10: 7374 293a 0a20 2020 2020 2073 656c 662e  st):.      self.
+0001af20: 5275 6e47 7355 7469 6c28 5b27 6370 272c  RunGsUtil(['cp',
+0001af30: 2073 7572 6928 6f62 6a65 6374 5f75 7269   suri(object_uri
+0001af40: 292c 2073 7572 6928 6670 6174 6829 5d29  ), suri(fpath)])
+0001af50: 0a20 2020 2077 6974 6820 6f70 656e 2866  .    with open(f
+0001af60: 7061 7468 2c20 2772 6227 2920 6173 2066  path, 'rb') as f
+0001af70: 3a0a 2020 2020 2020 7365 6c66 2e61 7373  :.      self.ass
+0001af80: 6572 7445 7175 616c 2866 2e72 6561 6428  ertEqual(f.read(
+0001af90: 292c 206f 626a 6563 745f 636f 6e74 656e  ), object_conten
+0001afa0: 7473 290a 0a20 2020 2023 2049 6620 6d75  ts)..    # If mu
+0001afb0: 6c74 6970 6c65 206b 6579 7320 6172 6520  ltiple keys are 
+0001afc0: 7375 7070 6c69 6564 2061 6e64 206f 6e65  supplied and one
+0001afd0: 2069 7320 636f 7272 6563 742c 2064 6f77   is correct, dow
+0001afe0: 6e6c 6f61 6420 7368 6f75 6c64 2073 7563  nload should suc
+0001aff0: 6365 6564 2e0a 2020 2020 6670 6174 6832  ceed..    fpath2
+0001b000: 203d 2073 656c 662e 4372 6561 7465 5465   = self.CreateTe
+0001b010: 6d70 4669 6c65 2829 0a20 2020 2062 6f74  mpFile().    bot
+0001b020: 6f5f 636f 6e66 6967 5f66 6f72 5f74 6573  o_config_for_tes
+0001b030: 7432 203d 205b 0a20 2020 2020 2020 2028  t2 = [.        (
+0001b040: 2747 5355 7469 6c27 2c20 2765 6e63 7279  'GSUtil', 'encry
+0001b050: 7074 696f 6e5f 6b65 7927 2c20 5445 5354  ption_key', TEST
+0001b060: 5f45 4e43 5259 5054 494f 4e5f 4b45 5933  _ENCRYPTION_KEY3
+0001b070: 292c 0a20 2020 2020 2020 2028 2747 5355  ),.        ('GSU
+0001b080: 7469 6c27 2c20 2764 6563 7279 7074 696f  til', 'decryptio
+0001b090: 6e5f 6b65 7931 272c 2054 4553 545f 454e  n_key1', TEST_EN
+0001b0a0: 4352 5950 5449 4f4e 5f4b 4559 3229 2c0a  CRYPTION_KEY2),.
+0001b0b0: 2020 2020 2020 2020 2827 4753 5574 696c          ('GSUtil
+0001b0c0: 272c 2027 6465 6372 7970 7469 6f6e 5f6b  ', 'decryption_k
+0001b0d0: 6579 3227 2c20 5445 5354 5f45 4e43 5259  ey2', TEST_ENCRY
+0001b0e0: 5054 494f 4e5f 4b45 5931 290a 2020 2020  PTION_KEY1).    
+0001b0f0: 5d0a 0a20 2020 2077 6974 6820 5365 7442  ]..    with SetB
+0001b100: 6f74 6f43 6f6e 6669 6746 6f72 5465 7374  otoConfigForTest
+0001b110: 2862 6f74 6f5f 636f 6e66 6967 5f66 6f72  (boto_config_for
+0001b120: 5f74 6573 7432 293a 0a20 2020 2020 2073  _test2):.      s
+0001b130: 656c 662e 5275 6e47 7355 7469 6c28 5b27  elf.RunGsUtil(['
+0001b140: 6370 272c 2073 7572 6928 6f62 6a65 6374  cp', suri(object
+0001b150: 5f75 7269 292c 2073 7572 6928 6670 6174  _uri), suri(fpat
+0001b160: 6832 295d 290a 2020 2020 7769 7468 206f  h2)]).    with o
+0001b170: 7065 6e28 6670 6174 6832 2c20 2772 6227  pen(fpath2, 'rb'
+0001b180: 2920 6173 2066 3a0a 2020 2020 2020 7365  ) as f:.      se
+0001b190: 6c66 2e61 7373 6572 7445 7175 616c 2866  lf.assertEqual(f
+0001b1a0: 2e72 6561 6428 292c 206f 626a 6563 745f  .read(), object_
+0001b1b0: 636f 6e74 656e 7473 290a 0a20 2040 536b  contents)..  @Sk
+0001b1c0: 6970 466f 7253 3328 2767 7375 7469 6c20  ipForS3('gsutil 
+0001b1d0: 646f 6573 6e5c 2774 2073 7570 706f 7274  doesn\'t support
+0001b1e0: 2053 3320 6375 7374 6f6d 6572 2d73 7570   S3 customer-sup
+0001b1f0: 706c 6965 6420 656e 6372 7970 7469 6f6e  plied encryption
+0001b200: 206b 6579 732e 2729 0a20 2040 5365 7175   keys.').  @Sequ
+0001b210: 656e 7469 616c 416e 6450 6172 616c 6c65  entialAndParalle
+0001b220: 6c54 7261 6e73 6665 720a 2020 6465 6620  lTransfer.  def 
+0001b230: 7465 7374 5f63 705f 646f 776e 6c6f 6164  test_cp_download
+0001b240: 5f65 6e63 7279 7074 6564 5f6f 626a 6563  _encrypted_objec
+0001b250: 745f 7769 7468 6f75 745f 6b65 7928 7365  t_without_key(se
+0001b260: 6c66 293a 0a20 2020 2022 2222 5465 7374  lf):.    """Test
+0001b270: 7320 646f 776e 6c6f 6164 696e 6720 616e  s downloading an
+0001b280: 2065 6e63 7279 7074 6564 206f 626a 6563   encrypted objec
+0001b290: 7420 7769 7468 6f75 7420 7468 6520 6e65  t without the ne
+0001b2a0: 6365 7373 6172 7920 6b65 792e 2222 220a  cessary key.""".
+0001b2b0: 2020 2020 6966 2073 656c 662e 7465 7374      if self.test
+0001b2c0: 5f61 7069 203d 3d20 4170 6953 656c 6563  _api == ApiSelec
+0001b2d0: 746f 722e 584d 4c3a 0a20 2020 2020 2072  tor.XML:.      r
+0001b2e0: 6574 7572 6e20 756e 6974 7465 7374 2e73  eturn unittest.s
+0001b2f0: 6b69 7028 0a20 2020 2020 2020 2020 2027  kip(.          '
+0001b300: 6773 7574 696c 2064 6f65 7320 6e6f 7420  gsutil does not 
+0001b310: 7375 7070 6f72 7420 656e 6372 7970 7469  support encrypti
+0001b320: 6f6e 2077 6974 6820 7468 6520 584d 4c20  on with the XML 
+0001b330: 4150 4927 290a 2020 2020 6f62 6a65 6374  API').    object
+0001b340: 5f63 6f6e 7465 6e74 7320 3d20 6227 6261  _contents = b'ba
+0001b350: 7227 0a20 2020 206f 626a 6563 745f 7572  r'.    object_ur
+0001b360: 6920 3d20 7365 6c66 2e43 7265 6174 654f  i = self.CreateO
+0001b370: 626a 6563 7428 6f62 6a65 6374 5f6e 616d  bject(object_nam
+0001b380: 653d 2766 6f6f 272c 0a20 2020 2020 2020  e='foo',.       
+0001b390: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b3a0: 2020 2020 2020 2020 2020 2020 636f 6e74              cont
+0001b3b0: 656e 7473 3d6f 626a 6563 745f 636f 6e74  ents=object_cont
+0001b3c0: 656e 7473 2c0a 2020 2020 2020 2020 2020  ents,.          
+0001b3d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b3e0: 2020 2020 2020 2020 2065 6e63 7279 7074           encrypt
+0001b3f0: 696f 6e5f 6b65 793d 5445 5354 5f45 4e43  ion_key=TEST_ENC
+0001b400: 5259 5054 494f 4e5f 4b45 5931 290a 2020  RYPTION_KEY1).  
+0001b410: 2020 6670 6174 6820 3d20 7365 6c66 2e43    fpath = self.C
+0001b420: 7265 6174 6554 656d 7046 696c 6528 290a  reateTempFile().
+0001b430: 0a20 2020 2073 7464 6572 7220 3d20 7365  .    stderr = se
+0001b440: 6c66 2e52 756e 4773 5574 696c 280a 2020  lf.RunGsUtil(.  
+0001b450: 2020 2020 2020 5b27 6370 272c 2073 7572        ['cp', sur
+0001b460: 6928 6f62 6a65 6374 5f75 7269 292c 2073  i(object_uri), s
+0001b470: 7572 6928 6670 6174 6829 5d2c 0a20 2020  uri(fpath)],.   
+0001b480: 2020 2020 2065 7870 6563 7465 645f 7374       expected_st
+0001b490: 6174 7573 3d31 2c0a 2020 2020 2020 2020  atus=1,.        
+0001b4a0: 7265 7475 726e 5f73 7464 6572 723d 5472  return_stderr=Tr
+0001b4b0: 7565 290a 2020 2020 7365 6c66 2e61 7373  ue).    self.ass
+0001b4c0: 6572 7449 6e28 0a20 2020 2020 2020 2027  ertIn(.        '
+0001b4d0: 4d69 7373 696e 6720 6465 6372 7970 7469  Missing decrypti
+0001b4e0: 6f6e 206b 6579 2077 6974 6820 5348 4132  on key with SHA2
+0001b4f0: 3536 2068 6173 6820 2573 2720 250a 2020  56 hash %s' %.  
+0001b500: 2020 2020 2020 5445 5354 5f45 4e43 5259        TEST_ENCRY
+0001b510: 5054 494f 4e5f 4b45 5931 5f53 4841 3235  PTION_KEY1_SHA25
+0001b520: 365f 4236 342c 2073 7464 6572 7229 0a0a  6_B64, stderr)..
+0001b530: 2020 4053 6b69 7046 6f72 5333 2827 6773    @SkipForS3('gs
+0001b540: 7574 696c 2064 6f65 736e 5c27 7420 7375  util doesn\'t su
+0001b550: 7070 6f72 7420 5333 2063 7573 746f 6d65  pport S3 custome
+0001b560: 722d 7375 7070 6c69 6564 2065 6e63 7279  r-supplied encry
+0001b570: 7074 696f 6e20 6b65 7973 2e27 290a 2020  ption keys.').  
+0001b580: 4053 6571 7565 6e74 6961 6c41 6e64 5061  @SequentialAndPa
+0001b590: 7261 6c6c 656c 5472 616e 7366 6572 0a20  rallelTransfer. 
+0001b5a0: 2064 6566 2074 6573 745f 6370 5f75 706c   def test_cp_upl
+0001b5b0: 6f61 645f 656e 6372 7970 7465 645f 6f62  oad_encrypted_ob
+0001b5c0: 6a65 6374 2873 656c 6629 3a0a 2020 2020  ject(self):.    
+0001b5d0: 2222 2254 6573 7473 2075 706c 6f61 6469  """Tests uploadi
+0001b5e0: 6e67 2061 6e20 656e 6372 7970 7465 6420  ng an encrypted 
+0001b5f0: 6f62 6a65 6374 2e22 2222 0a20 2020 2069  object.""".    i
+0001b600: 6620 7365 6c66 2e74 6573 745f 6170 6920  f self.test_api 
+0001b610: 3d3d 2041 7069 5365 6c65 6374 6f72 2e58  == ApiSelector.X
+0001b620: 4d4c 3a0a 2020 2020 2020 7265 7475 726e  ML:.      return
+0001b630: 2075 6e69 7474 6573 742e 736b 6970 280a   unittest.skip(.
+0001b640: 2020 2020 2020 2020 2020 2767 7375 7469            'gsuti
+0001b650: 6c20 646f 6573 206e 6f74 2073 7570 706f  l does not suppo
+0001b660: 7274 2065 6e63 7279 7074 696f 6e20 7769  rt encryption wi
+0001b670: 7468 2074 6865 2058 4d4c 2041 5049 2729  th the XML API')
+0001b680: 0a20 2020 2062 7563 6b65 745f 7572 6920  .    bucket_uri 
+0001b690: 3d20 7365 6c66 2e43 7265 6174 6542 7563  = self.CreateBuc
+0001b6a0: 6b65 7428 290a 2020 2020 6f62 6a65 6374  ket().    object
+0001b6b0: 5f75 7269 203d 2073 7572 6928 6275 636b  _uri = suri(buck
+0001b6c0: 6574 5f75 7269 2c20 2766 6f6f 2729 0a20  et_uri, 'foo'). 
+0001b6d0: 2020 2066 696c 655f 636f 6e74 656e 7473     file_contents
+0001b6e0: 203d 2062 2762 6172 270a 2020 2020 6670   = b'bar'.    fp
+0001b6f0: 6174 6820 3d20 7365 6c66 2e43 7265 6174  ath = self.Creat
+0001b700: 6554 656d 7046 696c 6528 636f 6e74 656e  eTempFile(conten
+0001b710: 7473 3d66 696c 655f 636f 6e74 656e 7473  ts=file_contents
+0001b720: 2c20 6669 6c65 5f6e 616d 653d 2766 6f6f  , file_name='foo
+0001b730: 2729 0a0a 2020 2020 626f 746f 5f63 6f6e  ')..    boto_con
+0001b740: 6669 675f 666f 725f 7465 7374 203d 205b  fig_for_test = [
+0001b750: 2827 4753 5574 696c 272c 2027 656e 6372  ('GSUtil', 'encr
+0001b760: 7970 7469 6f6e 5f6b 6579 272c 2054 4553  yption_key', TES
+0001b770: 545f 454e 4352 5950 5449 4f4e 5f4b 4559  T_ENCRYPTION_KEY
+0001b780: 3129 5d0a 0a20 2020 2023 2055 706c 6f61  1)]..    # Uploa
+0001b790: 6469 6e67 2074 6865 206f 626a 6563 7420  ding the object 
+0001b7a0: 7368 6f75 6c64 2073 7563 6365 6564 2e0a  should succeed..
+0001b7b0: 2020 2020 7769 7468 2053 6574 426f 746f      with SetBoto
+0001b7c0: 436f 6e66 6967 466f 7254 6573 7428 626f  ConfigForTest(bo
+0001b7d0: 746f 5f63 6f6e 6669 675f 666f 725f 7465  to_config_for_te
+0001b7e0: 7374 293a 0a20 2020 2020 2073 656c 662e  st):.      self.
+0001b7f0: 5275 6e47 7355 7469 6c28 5b27 6370 272c  RunGsUtil(['cp',
+0001b800: 2073 7572 6928 6670 6174 6829 2c20 7375   suri(fpath), su
+0001b810: 7269 2862 7563 6b65 745f 7572 6929 5d29  ri(bucket_uri)])
+0001b820: 0a0a 2020 2020 7365 6c66 2e41 7373 6572  ..    self.Asser
+0001b830: 744f 626a 6563 7455 7365 7343 5345 4b28  tObjectUsesCSEK(
+0001b840: 6f62 6a65 6374 5f75 7269 2c20 5445 5354  object_uri, TEST
+0001b850: 5f45 4e43 5259 5054 494f 4e5f 4b45 5931  _ENCRYPTION_KEY1
+0001b860: 290a 0a20 2020 2077 6974 6820 5365 7442  )..    with SetB
+0001b870: 6f74 6f43 6f6e 6669 6746 6f72 5465 7374  otoConfigForTest
+0001b880: 2862 6f74 6f5f 636f 6e66 6967 5f66 6f72  (boto_config_for
+0001b890: 5f74 6573 7429 3a0a 2020 2020 2020 2320  _test):.      # 
+0001b8a0: 5265 6164 696e 6720 7468 6520 6f62 6a65  Reading the obje
+0001b8b0: 6374 2062 6163 6b20 7368 6f75 6c64 2073  ct back should s
+0001b8c0: 7563 6365 6564 2e0a 2020 2020 2020 6670  ucceed..      fp
+0001b8d0: 6174 6832 203d 2073 656c 662e 4372 6561  ath2 = self.Crea
+0001b8e0: 7465 5465 6d70 4669 6c65 2829 0a20 2020  teTempFile().   
+0001b8f0: 2020 2073 656c 662e 5275 6e47 7355 7469     self.RunGsUti
+0001b900: 6c28 5b27 6370 272c 2073 7572 6928 6275  l(['cp', suri(bu
+0001b910: 636b 6574 5f75 7269 2c20 2766 6f6f 2729  cket_uri, 'foo')
+0001b920: 2c20 7375 7269 2866 7061 7468 3229 5d29  , suri(fpath2)])
+0001b930: 0a20 2020 2020 2077 6974 6820 6f70 656e  .      with open
+0001b940: 2866 7061 7468 322c 2027 7262 2729 2061  (fpath2, 'rb') a
+0001b950: 7320 663a 0a20 2020 2020 2020 2073 656c  s f:.        sel
+0001b960: 662e 6173 7365 7274 4571 7561 6c28 662e  f.assertEqual(f.
+0001b970: 7265 6164 2829 2c20 6669 6c65 5f63 6f6e  read(), file_con
+0001b980: 7465 6e74 7329 0a0a 2020 4053 6b69 7046  tents)..  @SkipF
+0001b990: 6f72 5333 2827 4e6f 2072 6573 756d 6162  orS3('No resumab
+0001b9a0: 6c65 2075 706c 6f61 6420 6f72 2065 6e63  le upload or enc
+0001b9b0: 7279 7074 696f 6e20 7375 7070 6f72 7420  ryption support 
+0001b9c0: 666f 7220 5333 2e27 290a 2020 6465 6620  for S3.').  def 
+0001b9d0: 7465 7374 5f63 705f 7265 7375 6d61 626c  test_cp_resumabl
+0001b9e0: 655f 7570 6c6f 6164 5f65 6e63 7279 7074  e_upload_encrypt
+0001b9f0: 6564 5f6f 626a 6563 745f 6272 6561 6b28  ed_object_break(
+0001ba00: 7365 6c66 293a 0a20 2020 2022 2222 5465  self):.    """Te
+0001ba10: 7374 7320 7468 6174 2061 6e20 656e 6372  sts that an encr
+0001ba20: 7970 7465 6420 7570 6c6f 6164 2072 6573  ypted upload res
+0001ba30: 756d 6573 2061 6674 6572 2061 2063 6f6e  umes after a con
+0001ba40: 6e65 6374 696f 6e20 6272 6561 6b2e 2222  nection break.""
+0001ba50: 220a 2020 2020 6966 2073 656c 662e 7465  ".    if self.te
+0001ba60: 7374 5f61 7069 203d 3d20 4170 6953 656c  st_api == ApiSel
+0001ba70: 6563 746f 722e 584d 4c3a 0a20 2020 2020  ector.XML:.     
+0001ba80: 2072 6574 7572 6e20 756e 6974 7465 7374   return unittest
+0001ba90: 2e73 6b69 7028 0a20 2020 2020 2020 2020  .skip(.         
+0001baa0: 2027 6773 7574 696c 2064 6f65 7320 6e6f   'gsutil does no
+0001bab0: 7420 7375 7070 6f72 7420 656e 6372 7970  t support encryp
+0001bac0: 7469 6f6e 2077 6974 6820 7468 6520 584d  tion with the XM
+0001bad0: 4c20 4150 4927 290a 2020 2020 6275 636b  L API').    buck
+0001bae0: 6574 5f75 7269 203d 2073 656c 662e 4372  et_uri = self.Cr
+0001baf0: 6561 7465 4275 636b 6574 2829 0a20 2020  eateBucket().   
+0001bb00: 206f 626a 6563 745f 7572 695f 7374 7220   object_uri_str 
+0001bb10: 3d20 7375 7269 2862 7563 6b65 745f 7572  = suri(bucket_ur
+0001bb20: 692c 2027 666f 6f27 290a 2020 2020 6670  i, 'foo').    fp
+0001bb30: 6174 6820 3d20 7365 6c66 2e43 7265 6174  ath = self.Creat
+0001bb40: 6554 656d 7046 696c 6528 636f 6e74 656e  eTempFile(conten
+0001bb50: 7473 3d62 2761 2720 2a20 7365 6c66 2e68  ts=b'a' * self.h
+0001bb60: 616c 745f 7369 7a65 290a 2020 2020 626f  alt_size).    bo
+0001bb70: 746f 5f63 6f6e 6669 675f 666f 725f 7465  to_config_for_te
+0001bb80: 7374 203d 205b 2827 4753 5574 696c 272c  st = [('GSUtil',
+0001bb90: 2027 7265 7375 6d61 626c 655f 7468 7265   'resumable_thre
+0001bba0: 7368 6f6c 6427 2c20 7374 7228 4f4e 455f  shold', str(ONE_
+0001bbb0: 4b49 4229 292c 0a20 2020 2020 2020 2020  KIB)),.         
+0001bbc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bbd0: 2020 2028 2747 5355 7469 6c27 2c20 2765     ('GSUtil', 'e
+0001bbe0: 6e63 7279 7074 696f 6e5f 6b65 7927 2c20  ncryption_key', 
+0001bbf0: 5445 5354 5f45 4e43 5259 5054 494f 4e5f  TEST_ENCRYPTION_
+0001bc00: 4b45 5931 295d 0a20 2020 2074 6573 745f  KEY1)].    test_
+0001bc10: 6361 6c6c 6261 636b 5f66 696c 6520 3d20  callback_file = 
+0001bc20: 7365 6c66 2e43 7265 6174 6554 656d 7046  self.CreateTempF
+0001bc30: 696c 6528 0a20 2020 2020 2020 2063 6f6e  ile(.        con
+0001bc40: 7465 6e74 733d 7069 636b 6c65 2e64 756d  tents=pickle.dum
+0001bc50: 7073 2848 616c 7469 6e67 436f 7079 4361  ps(HaltingCopyCa
+0001bc60: 6c6c 6261 636b 4861 6e64 6c65 7228 5472  llbackHandler(Tr
+0001bc70: 7565 2c20 3529 2929 0a0a 2020 2020 7769  ue, 5)))..    wi
+0001bc80: 7468 2053 6574 426f 746f 436f 6e66 6967  th SetBotoConfig
+0001bc90: 466f 7254 6573 7428 626f 746f 5f63 6f6e  ForTest(boto_con
+0001bca0: 6669 675f 666f 725f 7465 7374 293a 0a20  fig_for_test):. 
+0001bcb0: 2020 2020 2073 7464 6572 7220 3d20 7365       stderr = se
+0001bcc0: 6c66 2e52 756e 4773 5574 696c 285b 0a20  lf.RunGsUtil([. 
+0001bcd0: 2020 2020 2020 2020 2027 6370 272c 2027           'cp', '
+0001bce0: 2d2d 7465 7374 6361 6c6c 6261 636b 6669  --testcallbackfi
+0001bcf0: 6c65 272c 2074 6573 745f 6361 6c6c 6261  le', test_callba
+0001bd00: 636b 5f66 696c 652c 2066 7061 7468 2c20  ck_file, fpath, 
+0001bd10: 6f62 6a65 6374 5f75 7269 5f73 7472 0a20  object_uri_str. 
+0001bd20: 2020 2020 205d 2c0a 2020 2020 2020 2020       ],.        
+0001bd30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bd40: 2020 2020 2020 6578 7065 6374 6564 5f73        expected_s
+0001bd50: 7461 7475 733d 312c 0a20 2020 2020 2020  tatus=1,.       
+0001bd60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bd70: 2020 2020 2020 2072 6574 7572 6e5f 7374         return_st
+0001bd80: 6465 7272 3d54 7275 6529 0a20 2020 2020  derr=True).     
+0001bd90: 2073 656c 662e 6173 7365 7274 496e 2827   self.assertIn('
+0001bda0: 4172 7469 6669 6361 6c6c 7920 6861 6c74  Artifically halt
+0001bdb0: 696e 6720 7570 6c6f 6164 272c 2073 7464  ing upload', std
+0001bdc0: 6572 7229 0a20 2020 2020 2073 7464 6572  err).      stder
+0001bdd0: 7220 3d20 7365 6c66 2e52 756e 4773 5574  r = self.RunGsUt
+0001bde0: 696c 285b 2763 7027 2c20 6670 6174 682c  il(['cp', fpath,
+0001bdf0: 206f 626a 6563 745f 7572 695f 7374 725d   object_uri_str]
+0001be00: 2c20 7265 7475 726e 5f73 7464 6572 723d  , return_stderr=
+0001be10: 5472 7565 290a 2020 2020 2020 7365 6c66  True).      self
+0001be20: 2e61 7373 6572 7449 6e28 2752 6573 756d  .assertIn('Resum
+0001be30: 696e 6720 7570 6c6f 6164 272c 2073 7464  ing upload', std
+0001be40: 6572 7229 0a20 2020 2020 2073 7464 6f75  err).      stdou
+0001be50: 7420 3d20 7365 6c66 2e52 756e 4773 5574  t = self.RunGsUt
+0001be60: 696c 285b 2773 7461 7427 2c20 6f62 6a65  il(['stat', obje
+0001be70: 6374 5f75 7269 5f73 7472 5d2c 2072 6574  ct_uri_str], ret
+0001be80: 7572 6e5f 7374 646f 7574 3d54 7275 6529  urn_stdout=True)
+0001be90: 0a20 2020 2020 2077 6974 6820 6f70 656e  .      with open
+0001bea0: 2866 7061 7468 2c20 2772 6227 2920 6173  (fpath, 'rb') as
+0001beb0: 2066 703a 0a20 2020 2020 2020 2073 656c   fp:.        sel
+0001bec0: 662e 6173 7365 7274 496e 2843 616c 6375  f.assertIn(Calcu
+0001bed0: 6c61 7465 4236 3445 6e63 6f64 6564 4d64  lateB64EncodedMd
+0001bee0: 3546 726f 6d43 6f6e 7465 6e74 7328 6670  5FromContents(fp
+0001bef0: 292c 2073 7464 6f75 7429 0a0a 2020 2020  ), stdout)..    
+0001bf00: 7365 6c66 2e41 7373 6572 744f 626a 6563  self.AssertObjec
+0001bf10: 7455 7365 7343 5345 4b28 6f62 6a65 6374  tUsesCSEK(object
+0001bf20: 5f75 7269 5f73 7472 2c20 5445 5354 5f45  _uri_str, TEST_E
+0001bf30: 4e43 5259 5054 494f 4e5f 4b45 5931 290a  NCRYPTION_KEY1).
+0001bf40: 0a20 2040 536b 6970 466f 7253 3328 274e  .  @SkipForS3('N
+0001bf50: 6f20 7265 7375 6d61 626c 6520 7570 6c6f  o resumable uplo
+0001bf60: 6164 206f 7220 656e 6372 7970 7469 6f6e  ad or encryption
+0001bf70: 2073 7570 706f 7274 2066 6f72 2053 332e   support for S3.
+0001bf80: 2729 0a20 2064 6566 2074 6573 745f 6370  ').  def test_cp
+0001bf90: 5f72 6573 756d 6162 6c65 5f75 706c 6f61  _resumable_uploa
+0001bfa0: 645f 656e 6372 7970 7465 645f 6f62 6a65  d_encrypted_obje
+0001bfb0: 6374 5f64 6966 6665 7265 6e74 5f6b 6579  ct_different_key
+0001bfc0: 2873 656c 6629 3a0a 2020 2020 2222 2254  (self):.    """T
+0001bfd0: 6573 7473 2074 6861 7420 616e 2065 6e63  ests that an enc
+0001bfe0: 7279 7074 6564 2075 706c 6f61 6420 7265  rypted upload re
+0001bff0: 7375 6d65 2075 7365 7320 6f72 6967 696e  sume uses origin
+0001c000: 616c 2065 6e63 7279 7074 696f 6e20 6b65  al encryption ke
+0001c010: 792e 2222 220a 2020 2020 6966 2073 656c  y.""".    if sel
+0001c020: 662e 7465 7374 5f61 7069 203d 3d20 4170  f.test_api == Ap
+0001c030: 6953 656c 6563 746f 722e 584d 4c3a 0a20  iSelector.XML:. 
+0001c040: 2020 2020 2072 6574 7572 6e20 756e 6974       return unit
+0001c050: 7465 7374 2e73 6b69 7028 0a20 2020 2020  test.skip(.     
+0001c060: 2020 2020 2027 6773 7574 696c 2064 6f65       'gsutil doe
+0001c070: 7320 6e6f 7420 7375 7070 6f72 7420 656e  s not support en
+0001c080: 6372 7970 7469 6f6e 2077 6974 6820 7468  cryption with th
+0001c090: 6520 584d 4c20 4150 4927 290a 2020 2020  e XML API').    
+0001c0a0: 6275 636b 6574 5f75 7269 203d 2073 656c  bucket_uri = sel
+0001c0b0: 662e 4372 6561 7465 4275 636b 6574 2829  f.CreateBucket()
+0001c0c0: 0a20 2020 206f 626a 6563 745f 7572 695f  .    object_uri_
+0001c0d0: 7374 7220 3d20 7375 7269 2862 7563 6b65  str = suri(bucke
+0001c0e0: 745f 7572 692c 2027 666f 6f27 290a 2020  t_uri, 'foo').  
+0001c0f0: 2020 6669 6c65 5f63 6f6e 7465 6e74 7320    file_contents 
+0001c100: 3d20 6227 6127 202a 2073 656c 662e 6861  = b'a' * self.ha
+0001c110: 6c74 5f73 697a 650a 2020 2020 6670 6174  lt_size.    fpat
+0001c120: 6820 3d20 7365 6c66 2e43 7265 6174 6554  h = self.CreateT
+0001c130: 656d 7046 696c 6528 636f 6e74 656e 7473  empFile(contents
+0001c140: 3d66 696c 655f 636f 6e74 656e 7473 290a  =file_contents).
+0001c150: 2020 2020 626f 746f 5f63 6f6e 6669 675f      boto_config_
+0001c160: 666f 725f 7465 7374 203d 205b 2827 4753  for_test = [('GS
+0001c170: 5574 696c 272c 2027 7265 7375 6d61 626c  Util', 'resumabl
+0001c180: 655f 7468 7265 7368 6f6c 6427 2c20 7374  e_threshold', st
+0001c190: 7228 4f4e 455f 4b49 4229 292c 0a20 2020  r(ONE_KIB)),.   
+0001c1a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c1b0: 2020 2020 2020 2020 2028 2747 5355 7469           ('GSUti
+0001c1c0: 6c27 2c20 2765 6e63 7279 7074 696f 6e5f  l', 'encryption_
+0001c1d0: 6b65 7927 2c20 5445 5354 5f45 4e43 5259  key', TEST_ENCRY
+0001c1e0: 5054 494f 4e5f 4b45 5931 295d 0a20 2020  PTION_KEY1)].   
+0001c1f0: 2074 6573 745f 6361 6c6c 6261 636b 5f66   test_callback_f
+0001c200: 696c 6520 3d20 7365 6c66 2e43 7265 6174  ile = self.Creat
+0001c210: 6554 656d 7046 696c 6528 0a20 2020 2020  eTempFile(.     
+0001c220: 2020 2063 6f6e 7465 6e74 733d 7069 636b     contents=pick
+0001c230: 6c65 2e64 756d 7073 2848 616c 7469 6e67  le.dumps(Halting
+0001c240: 436f 7079 4361 6c6c 6261 636b 4861 6e64  CopyCallbackHand
+0001c250: 6c65 7228 5472 7565 2c20 3529 2929 0a0a  ler(True, 5)))..
+0001c260: 2020 2020 7769 7468 2053 6574 426f 746f      with SetBoto
+0001c270: 436f 6e66 6967 466f 7254 6573 7428 626f  ConfigForTest(bo
+0001c280: 746f 5f63 6f6e 6669 675f 666f 725f 7465  to_config_for_te
+0001c290: 7374 293a 0a20 2020 2020 2073 7464 6572  st):.      stder
+0001c2a0: 7220 3d20 7365 6c66 2e52 756e 4773 5574  r = self.RunGsUt
+0001c2b0: 696c 285b 0a20 2020 2020 2020 2020 2027  il([.          '
+0001c2c0: 6370 272c 2027 2d2d 7465 7374 6361 6c6c  cp', '--testcall
+0001c2d0: 6261 636b 6669 6c65 272c 2074 6573 745f  backfile', test_
+0001c2e0: 6361 6c6c 6261 636b 5f66 696c 652c 2066  callback_file, f
+0001c2f0: 7061 7468 2c20 6f62 6a65 6374 5f75 7269  path, object_uri
+0001c300: 5f73 7472 0a20 2020 2020 205d 2c0a 2020  _str.      ],.  
+0001c310: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c320: 2020 2020 2020 2020 2020 2020 6578 7065              expe
+0001c330: 6374 6564 5f73 7461 7475 733d 312c 0a20  cted_status=1,. 
+0001c340: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c350: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+0001c360: 7572 6e5f 7374 6465 7272 3d54 7275 6529  urn_stderr=True)
+0001c370: 0a20 2020 2020 2073 656c 662e 6173 7365  .      self.asse
+0001c380: 7274 496e 2827 4172 7469 6669 6361 6c6c  rtIn('Artificall
+0001c390: 7920 6861 6c74 696e 6720 7570 6c6f 6164  y halting upload
+0001c3a0: 272c 2073 7464 6572 7229 0a0a 2020 2020  ', stderr)..    
+0001c3b0: 2320 5265 7375 6d65 2074 6865 2075 706c  # Resume the upl
+0001c3c0: 6f61 6420 7769 7468 206d 756c 7469 706c  oad with multipl
+0001c3d0: 6520 6b65 7973 2c20 696e 636c 7564 696e  e keys, includin
+0001c3e0: 6720 7468 6520 6f72 6967 696e 616c 2e0a  g the original..
+0001c3f0: 2020 2020 626f 746f 5f63 6f6e 6669 675f      boto_config_
+0001c400: 666f 725f 7465 7374 3220 3d20 5b28 2747  for_test2 = [('G
+0001c410: 5355 7469 6c27 2c20 2772 6573 756d 6162  SUtil', 'resumab
+0001c420: 6c65 5f74 6872 6573 686f 6c64 272c 2073  le_threshold', s
+0001c430: 7472 284f 4e45 5f4b 4942 2929 2c0a 2020  tr(ONE_KIB)),.  
+0001c440: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c450: 2020 2020 2020 2020 2020 2028 2747 5355             ('GSU
+0001c460: 7469 6c27 2c20 2764 6563 7279 7074 696f  til', 'decryptio
+0001c470: 6e5f 6b65 7931 272c 0a20 2020 2020 2020  n_key1',.       
+0001c480: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c490: 2020 2020 2020 2054 4553 545f 454e 4352         TEST_ENCR
+0001c4a0: 5950 5449 4f4e 5f4b 4559 3229 2c0a 2020  YPTION_KEY2),.  
+0001c4b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c4c0: 2020 2020 2020 2020 2020 2028 2747 5355             ('GSU
+0001c4d0: 7469 6c27 2c20 2765 6e63 7279 7074 696f  til', 'encryptio
+0001c4e0: 6e5f 6b65 7927 2c20 5445 5354 5f45 4e43  n_key', TEST_ENC
+0001c4f0: 5259 5054 494f 4e5f 4b45 5931 295d 0a0a  RYPTION_KEY1)]..
+0001c500: 2020 2020 7769 7468 2053 6574 426f 746f      with SetBoto
+0001c510: 436f 6e66 6967 466f 7254 6573 7428 626f  ConfigForTest(bo
+0001c520: 746f 5f63 6f6e 6669 675f 666f 725f 7465  to_config_for_te
+0001c530: 7374 3229 3a0a 2020 2020 2020 7374 6465  st2):.      stde
+0001c540: 7272 203d 2073 656c 662e 5275 6e47 7355  rr = self.RunGsU
+0001c550: 7469 6c28 5b27 6370 272c 2066 7061 7468  til(['cp', fpath
+0001c560: 2c20 6f62 6a65 6374 5f75 7269 5f73 7472  , object_uri_str
+0001c570: 5d2c 2072 6574 7572 6e5f 7374 6465 7272  ], return_stderr
+0001c580: 3d54 7275 6529 0a20 2020 2020 2073 656c  =True).      sel
+0001c590: 662e 6173 7365 7274 496e 2827 5265 7375  f.assertIn('Resu
+0001c5a0: 6d69 6e67 2075 706c 6f61 6427 2c20 7374  ming upload', st
+0001c5b0: 6465 7272 290a 0a20 2020 2023 204f 626a  derr)..    # Obj
+0001c5c0: 6563 7420 7368 6f75 6c64 2068 6176 6520  ect should have 
+0001c5d0: 7468 6520 6f72 6967 696e 616c 206b 6579  the original key
+0001c5e0: 2e0a 2020 2020 7365 6c66 2e41 7373 6572  ..    self.Asser
+0001c5f0: 744f 626a 6563 7455 7365 7343 5345 4b28  tObjectUsesCSEK(
+0001c600: 6f62 6a65 6374 5f75 7269 5f73 7472 2c20  object_uri_str, 
+0001c610: 5445 5354 5f45 4e43 5259 5054 494f 4e5f  TEST_ENCRYPTION_
+0001c620: 4b45 5931 290a 0a20 2040 536b 6970 466f  KEY1)..  @SkipFo
+0001c630: 7253 3328 274e 6f20 7265 7375 6d61 626c  rS3('No resumabl
+0001c640: 6520 7570 6c6f 6164 206f 7220 656e 6372  e upload or encr
+0001c650: 7970 7469 6f6e 2073 7570 706f 7274 2066  yption support f
+0001c660: 6f72 2053 332e 2729 0a20 2064 6566 2074  or S3.').  def t
+0001c670: 6573 745f 6370 5f72 6573 756d 6162 6c65  est_cp_resumable
+0001c680: 5f75 706c 6f61 645f 656e 6372 7970 7465  _upload_encrypte
+0001c690: 645f 6f62 6a65 6374 5f6d 6973 7369 6e67  d_object_missing
+0001c6a0: 5f6b 6579 2873 656c 6629 3a0a 2020 2020  _key(self):.    
+0001c6b0: 2222 2254 6573 7473 2074 6861 7420 616e  """Tests that an
+0001c6c0: 2065 6e63 7279 7074 6564 2075 706c 6f61   encrypted uploa
+0001c6d0: 6420 646f 6573 206e 6f74 2072 6573 756d  d does not resum
+0001c6e0: 6520 7769 7468 6f75 7420 6f72 6967 696e  e without origin
+0001c6f0: 616c 206b 6579 2e22 2222 0a20 2020 2069  al key.""".    i
+0001c700: 6620 7365 6c66 2e74 6573 745f 6170 6920  f self.test_api 
+0001c710: 3d3d 2041 7069 5365 6c65 6374 6f72 2e58  == ApiSelector.X
+0001c720: 4d4c 3a0a 2020 2020 2020 7265 7475 726e  ML:.      return
+0001c730: 2075 6e69 7474 6573 742e 736b 6970 280a   unittest.skip(.
+0001c740: 2020 2020 2020 2020 2020 2767 7375 7469            'gsuti
+0001c750: 6c20 646f 6573 206e 6f74 2073 7570 706f  l does not suppo
+0001c760: 7274 2065 6e63 7279 7074 696f 6e20 7769  rt encryption wi
+0001c770: 7468 2074 6865 2058 4d4c 2041 5049 2729  th the XML API')
+0001c780: 0a20 2020 2062 7563 6b65 745f 7572 6920  .    bucket_uri 
+0001c790: 3d20 7365 6c66 2e43 7265 6174 6542 7563  = self.CreateBuc
+0001c7a0: 6b65 7428 290a 2020 2020 6f62 6a65 6374  ket().    object
+0001c7b0: 5f75 7269 5f73 7472 203d 2073 7572 6928  _uri_str = suri(
+0001c7c0: 6275 636b 6574 5f75 7269 2c20 2766 6f6f  bucket_uri, 'foo
+0001c7d0: 2729 0a20 2020 2066 696c 655f 636f 6e74  ').    file_cont
+0001c7e0: 656e 7473 203d 2062 2761 2720 2a20 7365  ents = b'a' * se
+0001c7f0: 6c66 2e68 616c 745f 7369 7a65 0a20 2020  lf.halt_size.   
+0001c800: 2066 7061 7468 203d 2073 656c 662e 4372   fpath = self.Cr
+0001c810: 6561 7465 5465 6d70 4669 6c65 2863 6f6e  eateTempFile(con
+0001c820: 7465 6e74 733d 6669 6c65 5f63 6f6e 7465  tents=file_conte
+0001c830: 6e74 7329 0a20 2020 2062 6f74 6f5f 636f  nts).    boto_co
+0001c840: 6e66 6967 5f66 6f72 5f74 6573 7420 3d20  nfig_for_test = 
+0001c850: 5b28 2747 5355 7469 6c27 2c20 2772 6573  [('GSUtil', 'res
+0001c860: 756d 6162 6c65 5f74 6872 6573 686f 6c64  umable_threshold
+0001c870: 272c 2073 7472 284f 4e45 5f4b 4942 2929  ', str(ONE_KIB))
+0001c880: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+0001c890: 2020 2020 2020 2020 2020 2020 2020 2827                ('
+0001c8a0: 4753 5574 696c 272c 2027 656e 6372 7970  GSUtil', 'encryp
+0001c8b0: 7469 6f6e 5f6b 6579 272c 2054 4553 545f  tion_key', TEST_
+0001c8c0: 454e 4352 5950 5449 4f4e 5f4b 4559 3129  ENCRYPTION_KEY1)
+0001c8d0: 5d0a 2020 2020 7465 7374 5f63 616c 6c62  ].    test_callb
+0001c8e0: 6163 6b5f 6669 6c65 203d 2073 656c 662e  ack_file = self.
+0001c8f0: 4372 6561 7465 5465 6d70 4669 6c65 280a  CreateTempFile(.
+0001c900: 2020 2020 2020 2020 636f 6e74 656e 7473          contents
+0001c910: 3d70 6963 6b6c 652e 6475 6d70 7328 4861  =pickle.dumps(Ha
+0001c920: 6c74 696e 6743 6f70 7943 616c 6c62 6163  ltingCopyCallbac
+0001c930: 6b48 616e 646c 6572 2854 7275 652c 2035  kHandler(True, 5
+0001c940: 2929 290a 0a20 2020 2077 6974 6820 5365  )))..    with Se
+0001c950: 7442 6f74 6f43 6f6e 6669 6746 6f72 5465  tBotoConfigForTe
+0001c960: 7374 2862 6f74 6f5f 636f 6e66 6967 5f66  st(boto_config_f
+0001c970: 6f72 5f74 6573 7429 3a0a 2020 2020 2020  or_test):.      
+0001c980: 7374 6465 7272 203d 2073 656c 662e 5275  stderr = self.Ru
+0001c990: 6e47 7355 7469 6c28 5b0a 2020 2020 2020  nGsUtil([.      
+0001c9a0: 2020 2020 2763 7027 2c20 272d 2d74 6573      'cp', '--tes
+0001c9b0: 7463 616c 6c62 6163 6b66 696c 6527 2c20  tcallbackfile', 
+0001c9c0: 7465 7374 5f63 616c 6c62 6163 6b5f 6669  test_callback_fi
+0001c9d0: 6c65 2c20 6670 6174 682c 206f 626a 6563  le, fpath, objec
+0001c9e0: 745f 7572 695f 7374 720a 2020 2020 2020  t_uri_str.      
+0001c9f0: 5d2c 0a20 2020 2020 2020 2020 2020 2020  ],.             
+0001ca00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ca10: 2065 7870 6563 7465 645f 7374 6174 7573   expected_status
+0001ca20: 3d31 2c0a 2020 2020 2020 2020 2020 2020  =1,.            
+0001ca30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ca40: 2020 7265 7475 726e 5f73 7464 6572 723d    return_stderr=
+0001ca50: 5472 7565 290a 2020 2020 2020 7365 6c66  True).      self
+0001ca60: 2e61 7373 6572 7449 6e28 2741 7274 6966  .assertIn('Artif
+0001ca70: 6963 616c 6c79 2068 616c 7469 6e67 2075  ically halting u
+0001ca80: 706c 6f61 6427 2c20 7374 6465 7272 290a  pload', stderr).
+0001ca90: 0a20 2020 2023 2052 6573 756d 6520 7468  .    # Resume th
+0001caa0: 6520 7570 6c6f 6164 2077 6974 686f 7574  e upload without
+0001cab0: 2074 6865 206f 7269 6769 6e61 6c20 6b65   the original ke
+0001cac0: 792e 0a20 2020 2062 6f74 6f5f 636f 6e66  y..    boto_conf
+0001cad0: 6967 5f66 6f72 5f74 6573 7432 203d 205b  ig_for_test2 = [
+0001cae0: 2827 4753 5574 696c 272c 2027 7265 7375  ('GSUtil', 'resu
+0001caf0: 6d61 626c 655f 7468 7265 7368 6f6c 6427  mable_threshold'
+0001cb00: 2c20 7374 7228 4f4e 455f 4b49 4229 292c  , str(ONE_KIB)),
+0001cb10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001cb20: 2020 2020 2020 2020 2020 2020 2020 2827                ('
+0001cb30: 4753 5574 696c 272c 2027 656e 6372 7970  GSUtil', 'encryp
+0001cb40: 7469 6f6e 5f6b 6579 272c 2054 4553 545f  tion_key', TEST_
+0001cb50: 454e 4352 5950 5449 4f4e 5f4b 4559 3229  ENCRYPTION_KEY2)
+0001cb60: 5d0a 0a20 2020 2077 6974 6820 5365 7442  ]..    with SetB
+0001cb70: 6f74 6f43 6f6e 6669 6746 6f72 5465 7374  otoConfigForTest
+0001cb80: 2862 6f74 6f5f 636f 6e66 6967 5f66 6f72  (boto_config_for
+0001cb90: 5f74 6573 7432 293a 0a20 2020 2020 2073  _test2):.      s
+0001cba0: 7464 6572 7220 3d20 7365 6c66 2e52 756e  tderr = self.Run
+0001cbb0: 4773 5574 696c 285b 2763 7027 2c20 6670  GsUtil(['cp', fp
+0001cbc0: 6174 682c 206f 626a 6563 745f 7572 695f  ath, object_uri_
+0001cbd0: 7374 725d 2c20 7265 7475 726e 5f73 7464  str], return_std
+0001cbe0: 6572 723d 5472 7565 290a 2020 2020 2020  err=True).      
+0001cbf0: 7365 6c66 2e61 7373 6572 744e 6f74 496e  self.assertNotIn
+0001cc00: 2827 5265 7375 6d69 6e67 2075 706c 6f61  ('Resuming uploa
+0001cc10: 6427 2c20 7374 6465 7272 290a 2020 2020  d', stderr).    
+0001cc20: 2020 7365 6c66 2e61 7373 6572 7449 6e28    self.assertIn(
+0001cc30: 2764 6f65 7320 6e6f 7420 6d61 7463 6820  'does not match 
+0001cc40: 6375 7272 656e 7420 656e 6372 7970 7469  current encrypti
+0001cc50: 6f6e 206b 6579 272c 2073 7464 6572 7229  on key', stderr)
+0001cc60: 0a20 2020 2020 2073 656c 662e 6173 7365  .      self.asse
+0001cc70: 7274 496e 2827 5265 7374 6172 7469 6e67  rtIn('Restarting
+0001cc80: 2075 706c 6f61 6420 6672 6f6d 2073 6372   upload from scr
+0001cc90: 6174 6368 272c 2073 7464 6572 7229 0a0a  atch', stderr)..
+0001cca0: 2020 2020 2020 2320 4f62 6a65 6374 2073        # Object s
+0001ccb0: 686f 756c 6420 6861 7665 2074 6865 206e  hould have the n
+0001ccc0: 6577 206b 6579 2e0a 2020 2020 2020 7365  ew key..      se
+0001ccd0: 6c66 2e41 7373 6572 744f 626a 6563 7455  lf.AssertObjectU
+0001cce0: 7365 7343 5345 4b28 6f62 6a65 6374 5f75  sesCSEK(object_u
+0001ccf0: 7269 5f73 7472 2c20 5445 5354 5f45 4e43  ri_str, TEST_ENC
+0001cd00: 5259 5054 494f 4e5f 4b45 5932 290a 0a20  RYPTION_KEY2).. 
+0001cd10: 2064 6566 205f 656e 7375 7265 5f6f 626a   def _ensure_obj
+0001cd20: 6563 745f 756e 656e 6372 7970 7465 6428  ect_unencrypted(
+0001cd30: 7365 6c66 2c20 6f62 6a65 6374 5f75 7269  self, object_uri
+0001cd40: 5f73 7472 293a 0a20 2020 2022 2222 5374  _str):.    """St
+0001cd50: 726f 6e67 6c79 2063 6f6e 7369 7374 656e  rongly consisten
+0001cd60: 7420 6368 6563 6b20 7468 6174 2074 6865  t check that the
+0001cd70: 206f 626a 6563 7420 6973 2075 6e65 6e63   object is unenc
+0001cd80: 7279 7074 6564 2e22 2222 0a20 2020 2073  rypted.""".    s
+0001cd90: 7464 6f75 7420 3d20 7365 6c66 2e52 756e  tdout = self.Run
+0001cda0: 4773 5574 696c 285b 2773 7461 7427 2c20  GsUtil(['stat', 
+0001cdb0: 6f62 6a65 6374 5f75 7269 5f73 7472 5d2c  object_uri_str],
+0001cdc0: 2072 6574 7572 6e5f 7374 646f 7574 3d54   return_stdout=T
+0001cdd0: 7275 6529 0a20 2020 2073 656c 662e 6173  rue).    self.as
+0001cde0: 7365 7274 4e6f 7449 6e28 2745 6e63 7279  sertNotIn('Encry
+0001cdf0: 7074 696f 6e20 4b65 7927 2c20 7374 646f  ption Key', stdo
+0001ce00: 7574 290a 0a20 2040 536b 6970 466f 7253  ut)..  @SkipForS
+0001ce10: 3328 274e 6f20 7265 7375 6d61 626c 6520  3('No resumable 
+0001ce20: 7570 6c6f 6164 2073 7570 706f 7274 2066  upload support f
+0001ce30: 6f72 2053 332e 2729 0a20 2064 6566 2074  or S3.').  def t
+0001ce40: 6573 745f 6370 5f72 6573 756d 6162 6c65  est_cp_resumable
+0001ce50: 5f75 706c 6f61 645f 6272 6561 6b28 7365  _upload_break(se
+0001ce60: 6c66 293a 0a20 2020 2022 2222 5465 7374  lf):.    """Test
+0001ce70: 7320 7468 6174 2061 6e20 7570 6c6f 6164  s that an upload
+0001ce80: 2063 616e 2062 6520 7265 7375 6d65 6420   can be resumed 
+0001ce90: 6166 7465 7220 6120 636f 6e6e 6563 7469  after a connecti
+0001cea0: 6f6e 2062 7265 616b 2e22 2222 0a20 2020  on break.""".   
+0001ceb0: 2062 7563 6b65 745f 7572 6920 3d20 7365   bucket_uri = se
+0001cec0: 6c66 2e43 7265 6174 6542 7563 6b65 7428  lf.CreateBucket(
+0001ced0: 290a 2020 2020 6670 6174 6820 3d20 7365  ).    fpath = se
+0001cee0: 6c66 2e43 7265 6174 6554 656d 7046 696c  lf.CreateTempFil
+0001cef0: 6528 636f 6e74 656e 7473 3d62 2761 2720  e(contents=b'a' 
+0001cf00: 2a20 7365 6c66 2e68 616c 745f 7369 7a65  * self.halt_size
+0001cf10: 290a 2020 2020 626f 746f 5f63 6f6e 6669  ).    boto_confi
+0001cf20: 675f 666f 725f 7465 7374 203d 2028 2747  g_for_test = ('G
+0001cf30: 5355 7469 6c27 2c20 2772 6573 756d 6162  SUtil', 'resumab
+0001cf40: 6c65 5f74 6872 6573 686f 6c64 272c 2073  le_threshold', s
+0001cf50: 7472 284f 4e45 5f4b 4942 2929 0a20 2020  tr(ONE_KIB)).   
+0001cf60: 2074 6573 745f 6361 6c6c 6261 636b 5f66   test_callback_f
+0001cf70: 696c 6520 3d20 7365 6c66 2e43 7265 6174  ile = self.Creat
+0001cf80: 6554 656d 7046 696c 6528 0a20 2020 2020  eTempFile(.     
+0001cf90: 2020 2063 6f6e 7465 6e74 733d 7069 636b     contents=pick
+0001cfa0: 6c65 2e64 756d 7073 2848 616c 7469 6e67  le.dumps(Halting
+0001cfb0: 436f 7079 4361 6c6c 6261 636b 4861 6e64  CopyCallbackHand
+0001cfc0: 6c65 7228 5472 7565 2c20 3529 2929 0a0a  ler(True, 5)))..
+0001cfd0: 2020 2020 7769 7468 2053 6574 426f 746f      with SetBoto
+0001cfe0: 436f 6e66 6967 466f 7254 6573 7428 5b62  ConfigForTest([b
+0001cff0: 6f74 6f5f 636f 6e66 6967 5f66 6f72 5f74  oto_config_for_t
+0001d000: 6573 745d 293a 0a20 2020 2020 2073 7464  est]):.      std
+0001d010: 6572 7220 3d20 7365 6c66 2e52 756e 4773  err = self.RunGs
+0001d020: 5574 696c 285b 0a20 2020 2020 2020 2020  Util([.         
+0001d030: 2027 6370 272c 2027 2d2d 7465 7374 6361   'cp', '--testca
+0001d040: 6c6c 6261 636b 6669 6c65 272c 2074 6573  llbackfile', tes
+0001d050: 745f 6361 6c6c 6261 636b 5f66 696c 652c  t_callback_file,
+0001d060: 2066 7061 7468 2c0a 2020 2020 2020 2020   fpath,.        
+0001d070: 2020 7375 7269 2862 7563 6b65 745f 7572    suri(bucket_ur
+0001d080: 6929 0a20 2020 2020 205d 2c0a 2020 2020  i).      ],.    
+0001d090: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d0a0: 2020 2020 2020 2020 2020 6578 7065 6374            expect
+0001d0b0: 6564 5f73 7461 7475 733d 312c 0a20 2020  ed_status=1,.   
+0001d0c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d0d0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0001d0e0: 6e5f 7374 6465 7272 3d54 7275 6529 0a20  n_stderr=True). 
+0001d0f0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+0001d100: 496e 2827 4172 7469 6669 6361 6c6c 7920  In('Artifically 
+0001d110: 6861 6c74 696e 6720 7570 6c6f 6164 272c  halting upload',
+0001d120: 2073 7464 6572 7229 0a20 2020 2020 2073   stderr).      s
+0001d130: 7464 6572 7220 3d20 7365 6c66 2e52 756e  tderr = self.Run
+0001d140: 4773 5574 696c 285b 2763 7027 2c20 6670  GsUtil(['cp', fp
+0001d150: 6174 682c 2073 7572 6928 6275 636b 6574  ath, suri(bucket
+0001d160: 5f75 7269 295d 2c0a 2020 2020 2020 2020  _uri)],.        
+0001d170: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d180: 2020 2020 2020 7265 7475 726e 5f73 7464        return_std
+0001d190: 6572 723d 5472 7565 290a 2020 2020 2020  err=True).      
+0001d1a0: 7365 6c66 2e61 7373 6572 7449 6e28 2752  self.assertIn('R
+0001d1b0: 6573 756d 696e 6720 7570 6c6f 6164 272c  esuming upload',
+0001d1c0: 2073 7464 6572 7229 0a0a 2020 4053 6b69   stderr)..  @Ski
+0001d1d0: 7046 6f72 5333 2827 4e6f 2063 6f6d 7072  pForS3('No compr
+0001d1e0: 6573 7365 6420 7472 616e 7370 6f72 7420  essed transport 
+0001d1f0: 656e 636f 6469 6e67 2073 7570 706f 7274  encoding support
+0001d200: 2066 6f72 2053 332e 2729 0a20 2040 536b   for S3.').  @Sk
+0001d210: 6970 466f 7258 4d4c 2827 4e6f 2063 6f6d  ipForXML('No com
+0001d220: 7072 6573 7365 6420 7472 616e 7370 6f72  pressed transpor
+0001d230: 7420 656e 636f 6469 6e67 2073 7570 706f  t encoding suppo
+0001d240: 7274 2066 6f72 2074 6865 2058 4d4c 2041  rt for the XML A
+0001d250: 5049 2e27 290a 2020 4053 6571 7565 6e74  PI.').  @Sequent
+0001d260: 6961 6c41 6e64 5061 7261 6c6c 656c 5472  ialAndParallelTr
+0001d270: 616e 7366 6572 0a20 2064 6566 2074 6573  ansfer.  def tes
+0001d280: 745f 6370 5f72 6573 756d 6162 6c65 5f75  t_cp_resumable_u
+0001d290: 706c 6f61 645f 677a 6970 5f65 6e63 6f64  pload_gzip_encod
+0001d2a0: 6564 5f62 7265 616b 2873 656c 6629 3a0a  ed_break(self):.
+0001d2b0: 2020 2020 2222 2254 6573 7473 2074 6861      """Tests tha
+0001d2c0: 7420 6120 677a 6970 2065 6e63 6f64 6564  t a gzip encoded
+0001d2d0: 2075 706c 6f61 6420 6361 6e20 6265 2072   upload can be r
+0001d2e0: 6573 756d 6564 2e22 2222 0a20 2020 2023  esumed.""".    #
+0001d2f0: 2053 6574 7570 2074 6865 2062 7563 6b65   Setup the bucke
+0001d300: 7420 616e 6420 6c6f 6361 6c20 6461 7461  t and local data
+0001d310: 2e20 4669 6c65 2063 6f6e 7465 6e74 7320  . File contents 
+0001d320: 6172 6520 7261 6e64 6f6d 697a 6564 2074  are randomized t
+0001d330: 6f20 7072 6576 656e 740a 2020 2020 2320  o prevent.    # 
+0001d340: 7468 656d 2066 726f 6d20 636f 6d70 7265  them from compre
+0001d350: 7373 696e 6720 6265 6c6f 7720 7468 6520  ssing below the 
+0001d360: 7265 7375 6d61 626c 652d 7468 7265 7368  resumable-thresh
+0001d370: 6f6c 6420 616e 6420 6661 696c 696e 6720  old and failing 
+0001d380: 7468 6520 7465 7374 2e0a 2020 2020 6275  the test..    bu
+0001d390: 636b 6574 5f75 7269 203d 2073 656c 662e  cket_uri = self.
+0001d3a0: 4372 6561 7465 4275 636b 6574 2829 0a20  CreateBucket(). 
+0001d3b0: 2020 2063 6f6e 7465 6e74 7320 3d20 6765     contents = ge
+0001d3c0: 745f 7261 6e64 6f6d 5f61 7363 6969 5f63  t_random_ascii_c
+0001d3d0: 6861 7273 2873 697a 653d 7365 6c66 2e68  hars(size=self.h
+0001d3e0: 616c 745f 7369 7a65 290a 2020 2020 6c6f  alt_size).    lo
+0001d3f0: 6361 6c5f 7572 6920 3d20 7365 6c66 2e43  cal_uri = self.C
+0001d400: 7265 6174 6554 656d 7046 696c 6528 6669  reateTempFile(fi
+0001d410: 6c65 5f6e 616d 653d 2774 6573 742e 7478  le_name='test.tx
+0001d420: 7427 2c20 636f 6e74 656e 7473 3d63 6f6e  t', contents=con
+0001d430: 7465 6e74 7329 0a20 2020 2023 2043 6f6e  tents).    # Con
+0001d440: 6669 6775 7265 2062 6f74 6f0a 2020 2020  figure boto.    
+0001d450: 626f 746f 5f63 6f6e 6669 675f 666f 725f  boto_config_for_
+0001d460: 7465 7374 203d 2028 2747 5355 7469 6c27  test = ('GSUtil'
+0001d470: 2c20 2772 6573 756d 6162 6c65 5f74 6872  , 'resumable_thr
+0001d480: 6573 686f 6c64 272c 2073 7472 284f 4e45  eshold', str(ONE
+0001d490: 5f4b 4942 2929 0a20 2020 2074 6573 745f  _KIB)).    test_
+0001d4a0: 6361 6c6c 6261 636b 5f66 696c 6520 3d20  callback_file = 
+0001d4b0: 7365 6c66 2e43 7265 6174 6554 656d 7046  self.CreateTempF
+0001d4c0: 696c 6528 0a20 2020 2020 2020 2063 6f6e  ile(.        con
+0001d4d0: 7465 6e74 733d 7069 636b 6c65 2e64 756d  tents=pickle.dum
+0001d4e0: 7073 2848 616c 7469 6e67 436f 7079 4361  ps(HaltingCopyCa
+0001d4f0: 6c6c 6261 636b 4861 6e64 6c65 7228 5472  llbackHandler(Tr
+0001d500: 7565 2c20 3529 2929 0a0a 2020 2020 7769  ue, 5)))..    wi
+0001d510: 7468 2053 6574 426f 746f 436f 6e66 6967  th SetBotoConfig
+0001d520: 466f 7254 6573 7428 5b62 6f74 6f5f 636f  ForTest([boto_co
+0001d530: 6e66 6967 5f66 6f72 5f74 6573 745d 293a  nfig_for_test]):
+0001d540: 0a20 2020 2020 2073 7464 6572 7220 3d20  .      stderr = 
+0001d550: 7365 6c66 2e52 756e 4773 5574 696c 285b  self.RunGsUtil([
+0001d560: 0a20 2020 2020 2020 2020 2027 2d44 272c  .          '-D',
+0001d570: 2027 6370 272c 2027 2d4a 272c 2027 2d2d   'cp', '-J', '--
+0001d580: 7465 7374 6361 6c6c 6261 636b 6669 6c65  testcallbackfile
+0001d590: 272c 2074 6573 745f 6361 6c6c 6261 636b  ', test_callback
+0001d5a0: 5f66 696c 652c 206c 6f63 616c 5f75 7269  _file, local_uri
+0001d5b0: 2c0a 2020 2020 2020 2020 2020 7375 7269  ,.          suri
+0001d5c0: 2862 7563 6b65 745f 7572 6929 0a20 2020  (bucket_uri).   
+0001d5d0: 2020 205d 2c0a 2020 2020 2020 2020 2020     ],.          
+0001d5e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d5f0: 2020 2020 6578 7065 6374 6564 5f73 7461      expected_sta
+0001d600: 7475 733d 312c 0a20 2020 2020 2020 2020  tus=1,.         
+0001d610: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d620: 2020 2020 2072 6574 7572 6e5f 7374 6465       return_stde
+0001d630: 7272 3d54 7275 6529 0a20 2020 2020 2023  rr=True).      #
+0001d640: 2045 6e73 7572 6520 7468 6520 7072 6f67   Ensure the prog
+0001d650: 7265 7373 206c 6f67 6765 7220 7365 6573  ress logger sees
+0001d660: 2061 2067 7a69 7020 656e 636f 6469 6e67   a gzip encoding
+0001d670: 2e0a 2020 2020 2020 7365 6c66 2e61 7373  ..      self.ass
+0001d680: 6572 7449 6e28 2773 656e 643a 2055 7369  ertIn('send: Usi
+0001d690: 6e67 2067 7a69 7020 7472 616e 7370 6f72  ng gzip transpor
+0001d6a0: 7420 656e 636f 6469 6e67 2066 6f72 2074  t encoding for t
+0001d6b0: 6865 2072 6571 7565 7374 2e27 2c0a 2020  he request.',.  
+0001d6c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d6d0: 2020 7374 6465 7272 290a 2020 2020 2020    stderr).      
+0001d6e0: 7365 6c66 2e61 7373 6572 7449 6e28 2741  self.assertIn('A
+0001d6f0: 7274 6966 6963 616c 6c79 2068 616c 7469  rtifically halti
+0001d700: 6e67 2075 706c 6f61 6427 2c20 7374 6465  ng upload', stde
+0001d710: 7272 290a 2020 2020 2020 7374 6465 7272  rr).      stderr
+0001d720: 203d 2073 656c 662e 5275 6e47 7355 7469   = self.RunGsUti
+0001d730: 6c28 5b27 2d44 272c 2027 6370 272c 2027  l(['-D', 'cp', '
+0001d740: 2d4a 272c 206c 6f63 616c 5f75 7269 2c0a  -J', local_uri,.
+0001d750: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d760: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0001d770: 7572 6928 6275 636b 6574 5f75 7269 295d  uri(bucket_uri)]
+0001d780: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+0001d790: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d7a0: 7265 7475 726e 5f73 7464 6572 723d 5472  return_stderr=Tr
+0001d7b0: 7565 290a 2020 2020 2020 7365 6c66 2e61  ue).      self.a
+0001d7c0: 7373 6572 7449 6e28 2752 6573 756d 696e  ssertIn('Resumin
+0001d7d0: 6720 7570 6c6f 6164 272c 2073 7464 6572  g upload', stder
+0001d7e0: 7229 0a20 2020 2020 2023 2045 6e73 7572  r).      # Ensur
+0001d7f0: 6520 7468 6520 7072 6f67 7265 7373 206c  e the progress l
+0001d800: 6f67 6765 7220 6973 2073 7469 6c6c 2073  ogger is still s
+0001d810: 6565 696e 6720 6120 677a 6970 2065 6e63  eeing a gzip enc
+0001d820: 6f64 696e 672e 0a20 2020 2020 2073 656c  oding..      sel
+0001d830: 662e 6173 7365 7274 496e 2827 7365 6e64  f.assertIn('send
+0001d840: 3a20 5573 696e 6720 677a 6970 2074 7261  : Using gzip tra
+0001d850: 6e73 706f 7274 2065 6e63 6f64 696e 6720  nsport encoding 
+0001d860: 666f 7220 7468 6520 7265 7175 6573 742e  for the request.
+0001d870: 272c 0a20 2020 2020 2020 2020 2020 2020  ',.             
+0001d880: 2020 2020 2020 2073 7464 6572 7229 0a20         stderr). 
+0001d890: 2020 2023 2045 6e73 7572 6520 7468 6520     # Ensure the 
+0001d8a0: 6669 6c65 7320 646f 206e 6f74 2068 6176  files do not hav
+0001d8b0: 6520 6120 7374 6f72 6564 2065 6e63 6f64  e a stored encod
+0001d8c0: 696e 6720 6f66 2067 7a69 7020 616e 6420  ing of gzip and 
+0001d8d0: 6172 6520 7374 6f72 6564 0a20 2020 2023  are stored.    #
+0001d8e0: 2075 6e63 6f6d 7072 6573 7365 642e 0a20   uncompressed.. 
+0001d8f0: 2020 2074 656d 705f 7572 6920 3d20 7365     temp_uri = se
+0001d900: 6c66 2e43 7265 6174 6554 656d 7046 696c  lf.CreateTempFil
+0001d910: 6528 290a 2020 2020 7265 6d6f 7465 5f75  e().    remote_u
+0001d920: 7269 203d 2073 7572 6928 6275 636b 6574  ri = suri(bucket
+0001d930: 5f75 7269 2c20 2774 6573 742e 7478 7427  _uri, 'test.txt'
+0001d940: 290a 2020 2020 7374 646f 7574 203d 2073  ).    stdout = s
+0001d950: 656c 662e 5275 6e47 7355 7469 6c28 5b27  elf.RunGsUtil(['
+0001d960: 7374 6174 272c 2072 656d 6f74 655f 7572  stat', remote_ur
+0001d970: 695d 2c20 7265 7475 726e 5f73 7464 6f75  i], return_stdou
+0001d980: 743d 5472 7565 290a 2020 2020 7365 6c66  t=True).    self
+0001d990: 2e61 7373 6572 744e 6f74 5265 6765 7828  .assertNotRegex(
+0001d9a0: 7374 646f 7574 2c20 7227 436f 6e74 656e  stdout, r'Conten
+0001d9b0: 742d 456e 636f 6469 6e67 3a5c 732b 677a  t-Encoding:\s+gz
+0001d9c0: 6970 2729 0a20 2020 2073 656c 662e 5275  ip').    self.Ru
+0001d9d0: 6e47 7355 7469 6c28 5b27 6370 272c 2072  nGsUtil(['cp', r
+0001d9e0: 656d 6f74 655f 7572 692c 2073 7572 6928  emote_uri, suri(
+0001d9f0: 7465 6d70 5f75 7269 295d 290a 2020 2020  temp_uri)]).    
+0001da00: 7769 7468 206f 7065 6e28 7465 6d70 5f75  with open(temp_u
+0001da10: 7269 2c20 2772 6227 2920 6173 2066 3a0a  ri, 'rb') as f:.
+0001da20: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+0001da30: 7445 7175 616c 2866 2e72 6561 6428 292c  tEqual(f.read(),
+0001da40: 2063 6f6e 7465 6e74 7329 0a0a 2020 4053   contents)..  @S
+0001da50: 6b69 7046 6f72 5333 2827 4e6f 2072 6573  kipForS3('No res
+0001da60: 756d 6162 6c65 2075 706c 6f61 6420 7375  umable upload su
+0001da70: 7070 6f72 7420 666f 7220 5333 2e27 290a  pport for S3.').
+0001da80: 2020 6465 6620 7465 7374 5f63 705f 7265    def test_cp_re
+0001da90: 7375 6d61 626c 655f 7570 6c6f 6164 5f72  sumable_upload_r
+0001daa0: 6574 7279 2873 656c 6629 3a0a 2020 2020  etry(self):.    
+0001dab0: 2222 2254 6573 7473 2074 6861 7420 6120  """Tests that a 
+0001dac0: 7265 7375 6d61 626c 6520 7570 6c6f 6164  resumable upload
+0001dad0: 2063 6f6d 706c 6574 6573 2077 6974 6820   completes with 
+0001dae0: 6f6e 6520 7265 7472 792e 2222 220a 2020  one retry.""".  
+0001daf0: 2020 6275 636b 6574 5f75 7269 203d 2073    bucket_uri = s
+0001db00: 656c 662e 4372 6561 7465 4275 636b 6574  elf.CreateBucket
+0001db10: 2829 0a20 2020 2066 7061 7468 203d 2073  ().    fpath = s
+0001db20: 656c 662e 4372 6561 7465 5465 6d70 4669  elf.CreateTempFi
+0001db30: 6c65 2863 6f6e 7465 6e74 733d 6227 6127  le(contents=b'a'
+0001db40: 202a 2073 656c 662e 6861 6c74 5f73 697a   * self.halt_siz
+0001db50: 6529 0a20 2020 2023 2054 4f44 4f3a 2052  e).    # TODO: R
+0001db60: 6169 7369 6e67 2061 6e20 6874 7470 6c69  aising an httpli
+0001db70: 6220 6f72 2073 6f63 6b65 7420 6572 726f  b or socket erro
+0001db80: 7220 626c 6f63 6b73 2062 7563 6b65 7420  r blocks bucket 
+0001db90: 7465 6172 646f 776e 0a20 2020 2023 2069  teardown.    # i
+0001dba0: 6e20 4a53 4f4e 2066 6f72 2036 302d 3132  n JSON for 60-12
+0001dbb0: 3073 206f 6e20 6120 6d75 6c74 6970 726f  0s on a multipro
+0001dbc0: 6365 7373 696e 6720 6c6f 636b 2061 6371  cessing lock acq
+0001dbd0: 7569 7265 2e20 4669 6775 7265 206f 7574  uire. Figure out
+0001dbe0: 2077 6879 3b0a 2020 2020 2320 756e 7469   why;.    # unti
+0001dbf0: 6c20 7468 656e 2c20 7261 6973 6520 616e  l then, raise an
+0001dc00: 2061 7069 746f 6f6c 7320 7265 7472 7961   apitools retrya
+0001dc10: 626c 6520 6578 6365 7074 696f 6e2e 0a20  ble exception.. 
+0001dc20: 2020 2069 6620 7365 6c66 2e74 6573 745f     if self.test_
+0001dc30: 6170 6920 3d3d 2041 7069 5365 6c65 6374  api == ApiSelect
+0001dc40: 6f72 2e58 4d4c 3a0a 2020 2020 2020 7465  or.XML:.      te
+0001dc50: 7374 5f63 616c 6c62 6163 6b5f 6669 6c65  st_callback_file
+0001dc60: 203d 2073 656c 662e 4372 6561 7465 5465   = self.CreateTe
+0001dc70: 6d70 4669 6c65 2863 6f6e 7465 6e74 733d  mpFile(contents=
+0001dc80: 7069 636b 6c65 2e64 756d 7073 280a 2020  pickle.dumps(.  
+0001dc90: 2020 2020 2020 2020 5f52 6573 756d 6162          _Resumab
+0001dca0: 6c65 5570 6c6f 6164 5265 7472 7948 616e  leUploadRetryHan
+0001dcb0: 646c 6572 2835 2c20 6874 7470 5f63 6c69  dler(5, http_cli
+0001dcc0: 656e 742e 4261 6453 7461 7475 734c 696e  ent.BadStatusLin
+0001dcd0: 652c 2028 0a20 2020 2020 2020 2020 2020  e, (.           
+0001dce0: 2020 2027 756e 7573 6564 272c 2929 2929     'unused',))))
+0001dcf0: 0a20 2020 2065 6c73 653a 0a20 2020 2020  .    else:.     
+0001dd00: 2074 6573 745f 6361 6c6c 6261 636b 5f66   test_callback_f
+0001dd10: 696c 6520 3d20 7365 6c66 2e43 7265 6174  ile = self.Creat
+0001dd20: 6554 656d 7046 696c 6528 636f 6e74 656e  eTempFile(conten
+0001dd30: 7473 3d70 6963 6b6c 652e 6475 6d70 7328  ts=pickle.dumps(
+0001dd40: 0a20 2020 2020 2020 2020 205f 5265 7375  .          _Resu
+0001dd50: 6d61 626c 6555 706c 6f61 6452 6574 7279  mableUploadRetry
+0001dd60: 4861 6e64 6c65 7228 0a20 2020 2020 2020  Handler(.       
+0001dd70: 2020 2020 2020 2035 2c20 6170 6974 6f6f         5, apitoo
+0001dd80: 6c73 5f65 7863 6570 7469 6f6e 732e 4261  ls_exceptions.Ba
+0001dd90: 6453 7461 7475 7343 6f64 6545 7272 6f72  dStatusCodeError
+0001dda0: 2c20 2827 756e 7573 6564 272c 2027 756e  , ('unused', 'un
+0001ddb0: 7573 6564 272c 0a20 2020 2020 2020 2020  used',.         
+0001ddc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ddd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001dde0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ddf0: 2027 756e 7573 6564 2729 2929 290a 2020   'unused')))).  
+0001de00: 2020 626f 746f 5f63 6f6e 6669 675f 666f    boto_config_fo
+0001de10: 725f 7465 7374 203d 2028 2747 5355 7469  r_test = ('GSUti
+0001de20: 6c27 2c20 2772 6573 756d 6162 6c65 5f74  l', 'resumable_t
+0001de30: 6872 6573 686f 6c64 272c 2073 7472 284f  hreshold', str(O
+0001de40: 4e45 5f4b 4942 2929 0a20 2020 2077 6974  NE_KIB)).    wit
+0001de50: 6820 5365 7442 6f74 6f43 6f6e 6669 6746  h SetBotoConfigF
+0001de60: 6f72 5465 7374 285b 626f 746f 5f63 6f6e  orTest([boto_con
+0001de70: 6669 675f 666f 725f 7465 7374 5d29 3a0a  fig_for_test]):.
+0001de80: 2020 2020 2020 7374 6465 7272 203d 2073        stderr = s
+0001de90: 656c 662e 5275 6e47 7355 7469 6c28 5b0a  elf.RunGsUtil([.
+0001dea0: 2020 2020 2020 2020 2020 272d 4427 2c20            '-D', 
+0001deb0: 2763 7027 2c20 272d 2d74 6573 7463 616c  'cp', '--testcal
+0001dec0: 6c62 6163 6b66 696c 6527 2c20 7465 7374  lbackfile', test
+0001ded0: 5f63 616c 6c62 6163 6b5f 6669 6c65 2c20  _callback_file, 
+0001dee0: 6670 6174 682c 0a20 2020 2020 2020 2020  fpath,.         
+0001def0: 2073 7572 6928 6275 636b 6574 5f75 7269   suri(bucket_uri
+0001df00: 290a 2020 2020 2020 5d2c 0a20 2020 2020  ).      ],.     
+0001df10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001df20: 2020 2020 2020 2020 2072 6574 7572 6e5f           return_
+0001df30: 7374 6465 7272 3d31 290a 2020 2020 2020  stderr=1).      
+0001df40: 6966 2073 656c 662e 7465 7374 5f61 7069  if self.test_api
+0001df50: 203d 3d20 4170 6953 656c 6563 746f 722e   == ApiSelector.
+0001df60: 584d 4c3a 0a20 2020 2020 2020 2073 656c  XML:.        sel
+0001df70: 662e 6173 7365 7274 496e 2827 476f 7420  f.assertIn('Got 
+0001df80: 7265 7472 7961 626c 6520 6661 696c 7572  retryable failur
+0001df90: 6527 2c20 7374 6465 7272 290a 2020 2020  e', stderr).    
+0001dfa0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+0001dfb0: 7365 6c66 2e61 7373 6572 7449 6e28 2752  self.assertIn('R
+0001dfc0: 6574 7279 696e 6727 2c20 7374 6465 7272  etrying', stderr
+0001dfd0: 290a 0a20 2040 536b 6970 466f 7253 3328  )..  @SkipForS3(
+0001dfe0: 274e 6f20 7265 7375 6d61 626c 6520 7570  'No resumable up
+0001dff0: 6c6f 6164 2073 7570 706f 7274 2066 6f72  load support for
+0001e000: 2053 332e 2729 0a20 2064 6566 2074 6573   S3.').  def tes
+0001e010: 745f 6370 5f72 6573 756d 6162 6c65 5f73  t_cp_resumable_s
+0001e020: 7472 6561 6d69 6e67 5f75 706c 6f61 645f  treaming_upload_
+0001e030: 7265 7472 7928 7365 6c66 293a 0a20 2020  retry(self):.   
+0001e040: 2022 2222 5465 7374 7320 7468 6174 2061   """Tests that a
+0001e050: 2073 7472 6561 6d69 6e67 2072 6573 756d   streaming resum
+0001e060: 6162 6c65 2075 706c 6f61 6420 636f 6d70  able upload comp
+0001e070: 6c65 7465 7320 7769 7468 206f 6e65 2072  letes with one r
+0001e080: 6574 7279 2e22 2222 0a20 2020 2069 6620  etry.""".    if 
+0001e090: 7365 6c66 2e74 6573 745f 6170 6920 3d3d  self.test_api ==
+0001e0a0: 2041 7069 5365 6c65 6374 6f72 2e58 4d4c   ApiSelector.XML
+0001e0b0: 3a0a 2020 2020 2020 7265 7475 726e 2075  :.      return u
+0001e0c0: 6e69 7474 6573 742e 736b 6970 2827 584d  nittest.skip('XM
+0001e0d0: 4c20 646f 6573 206e 6f74 2073 7570 706f  L does not suppo
+0001e0e0: 7274 2072 6573 756d 6162 6c65 2073 7472  rt resumable str
+0001e0f0: 6561 6d69 6e67 2075 706c 6f61 6473 2e27  eaming uploads.'
+0001e100: 290a 2020 2020 6275 636b 6574 5f75 7269  ).    bucket_uri
+0001e110: 203d 2073 656c 662e 4372 6561 7465 4275   = self.CreateBu
+0001e120: 636b 6574 2829 0a0a 2020 2020 7465 7374  cket()..    test
+0001e130: 5f63 616c 6c62 6163 6b5f 6669 6c65 203d  _callback_file =
+0001e140: 2073 656c 662e 4372 6561 7465 5465 6d70   self.CreateTemp
+0001e150: 4669 6c65 2863 6f6e 7465 6e74 733d 7069  File(contents=pi
+0001e160: 636b 6c65 2e64 756d 7073 280a 2020 2020  ckle.dumps(.    
+0001e170: 2020 2020 5f52 6573 756d 6162 6c65 5570      _ResumableUp
+0001e180: 6c6f 6164 5265 7472 7948 616e 646c 6572  loadRetryHandler
+0001e190: 2835 2c20 6170 6974 6f6f 6c73 5f65 7863  (5, apitools_exc
+0001e1a0: 6570 7469 6f6e 732e 4261 6453 7461 7475  eptions.BadStatu
+0001e1b0: 7343 6f64 6545 7272 6f72 2c0a 2020 2020  sCodeError,.    
+0001e1c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e1d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e1e0: 2028 2775 6e75 7365 6427 2c20 2775 6e75   ('unused', 'unu
+0001e1f0: 7365 6427 2c20 2775 6e75 7365 6427 2929  sed', 'unused'))
+0001e200: 2929 0a20 2020 2023 204e 6565 6420 746f  )).    # Need to
+0001e210: 2072 6564 7563 6520 7468 6520 4a53 4f4e   reduce the JSON
+0001e220: 2063 6875 6e6b 2073 697a 6520 7369 6e63   chunk size sinc
+0001e230: 6520 7374 7265 616d 696e 6720 7570 6c6f  e streaming uplo
+0001e240: 6164 7320 6275 6666 6572 2061 0a20 2020  ads buffer a.   
+0001e250: 2023 2066 756c 6c20 6368 756e 6b2e 0a20   # full chunk.. 
+0001e260: 2020 2062 6f74 6f5f 636f 6e66 6967 735f     boto_configs_
+0001e270: 666f 725f 7465 7374 203d 205b 2827 4753  for_test = [('GS
+0001e280: 5574 696c 272c 2027 6a73 6f6e 5f72 6573  Util', 'json_res
+0001e290: 756d 6162 6c65 5f63 6875 6e6b 5f73 697a  umable_chunk_siz
+0001e2a0: 6527 2c0a 2020 2020 2020 2020 2020 2020  e',.            
+0001e2b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e2c0: 2020 7374 7228 3235 3620 2a20 4f4e 455f    str(256 * ONE_
+0001e2d0: 4b49 4229 292c 2028 2742 6f74 6f27 2c20  KIB)), ('Boto', 
+0001e2e0: 276e 756d 5f72 6574 7269 6573 272c 2027  'num_retries', '
+0001e2f0: 3227 295d 0a20 2020 2077 6974 6820 5365  2')].    with Se
+0001e300: 7442 6f74 6f43 6f6e 6669 6746 6f72 5465  tBotoConfigForTe
+0001e310: 7374 2862 6f74 6f5f 636f 6e66 6967 735f  st(boto_configs_
+0001e320: 666f 725f 7465 7374 293a 0a20 2020 2020  for_test):.     
+0001e330: 2073 7464 6572 7220 3d20 7365 6c66 2e52   stderr = self.R
+0001e340: 756e 4773 5574 696c 285b 0a20 2020 2020  unGsUtil([.     
+0001e350: 2020 2020 2027 2d44 272c 2027 6370 272c       '-D', 'cp',
+0001e360: 2027 2d2d 7465 7374 6361 6c6c 6261 636b   '--testcallback
+0001e370: 6669 6c65 272c 2074 6573 745f 6361 6c6c  file', test_call
+0001e380: 6261 636b 5f66 696c 652c 2027 2d27 2c0a  back_file, '-',.
+0001e390: 2020 2020 2020 2020 2020 7375 7269 2862            suri(b
+0001e3a0: 7563 6b65 745f 7572 692c 2027 666f 6f27  ucket_uri, 'foo'
+0001e3b0: 290a 2020 2020 2020 5d2c 0a20 2020 2020  ).      ],.     
+0001e3c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e3d0: 2020 2020 2020 2020 2073 7464 696e 3d27           stdin='
+0001e3e0: 6127 202a 2035 3132 202a 204f 4e45 5f4b  a' * 512 * ONE_K
+0001e3f0: 4942 2c0a 2020 2020 2020 2020 2020 2020  IB,.            
 0001e400: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e410: 2020 2020 2020 2072 6574 7572 6e5f 7374         return_st
-0001e420: 6465 7272 3d54 7275 6529 0a20 2020 2020  derr=True).     
-0001e430: 2073 656c 662e 6173 7365 7274 496e 2827   self.assertIn('
-0001e440: 646f 6573 6e5c 2774 206d 6174 6368 2063  doesn\'t match c
-0001e450: 6c6f 7564 2d73 7570 706c 6965 6420 6469  loud-supplied di
-0001e460: 6765 7374 272c 2073 7464 6572 7229 0a0a  gest', stderr)..
-0001e470: 2020 4053 6b69 7046 6f72 5333 2827 4e6f    @SkipForS3('No
-0001e480: 2072 6573 756d 6162 6c65 2075 706c 6f61   resumable uploa
-0001e490: 6420 7375 7070 6f72 7420 666f 7220 5333  d support for S3
-0001e4a0: 2e27 290a 2020 6465 6620 7465 7374 5f63  .').  def test_c
-0001e4b0: 705f 7265 7375 6d61 626c 655f 7570 6c6f  p_resumable_uplo
-0001e4c0: 6164 5f62 7265 616b 5f66 696c 655f 736d  ad_break_file_sm
-0001e4d0: 616c 6c65 725f 7369 7a65 2873 656c 6629  aller_size(self)
-0001e4e0: 3a0a 2020 2020 2222 2254 6573 7473 2061  :.    """Tests a
-0001e4f0: 2072 6573 756d 6162 6c65 2075 706c 6f61   resumable uploa
-0001e500: 6420 7768 6572 6520 7468 6520 7570 6c6f  d where the uplo
-0001e510: 6164 6564 2066 696c 6520 6368 616e 6765  aded file change
-0001e520: 7320 636f 6e74 656e 742e 0a0a 2020 2020  s content...    
-0001e530: 5468 6973 2073 686f 756c 6420 6661 696c  This should fail
-0001e540: 2068 6173 6820 7661 6c69 6461 7469 6f6e   hash validation
-0001e550: 2e0a 2020 2020 2222 220a 2020 2020 6275  ..    """.    bu
-0001e560: 636b 6574 5f75 7269 203d 2073 656c 662e  cket_uri = self.
-0001e570: 4372 6561 7465 4275 636b 6574 2829 0a20  CreateBucket(). 
-0001e580: 2020 2074 6d70 5f64 6972 203d 2073 656c     tmp_dir = sel
-0001e590: 662e 4372 6561 7465 5465 6d70 4469 7228  f.CreateTempDir(
-0001e5a0: 290a 2020 2020 6670 6174 6820 3d20 7365  ).    fpath = se
-0001e5b0: 6c66 2e43 7265 6174 6554 656d 7046 696c  lf.CreateTempFil
-0001e5c0: 6528 6669 6c65 5f6e 616d 653d 2766 6f6f  e(file_name='foo
-0001e5d0: 272c 0a20 2020 2020 2020 2020 2020 2020  ',.             
-0001e5e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e5f0: 2020 2074 6d70 6469 723d 746d 705f 6469     tmpdir=tmp_di
-0001e600: 722c 0a20 2020 2020 2020 2020 2020 2020  r,.             
-0001e610: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e620: 2020 2063 6f6e 7465 6e74 733d 6227 6127     contents=b'a'
-0001e630: 202a 204f 4e45 5f4b 4942 202a 204f 4e45   * ONE_KIB * ONE
-0001e640: 5f4b 4942 290a 2020 2020 7465 7374 5f63  _KIB).    test_c
-0001e650: 616c 6c62 6163 6b5f 6669 6c65 203d 2073  allback_file = s
-0001e660: 656c 662e 4372 6561 7465 5465 6d70 4669  elf.CreateTempFi
-0001e670: 6c65 2863 6f6e 7465 6e74 733d 7069 636b  le(contents=pick
-0001e680: 6c65 2e64 756d 7073 280a 2020 2020 2020  le.dumps(.      
-0001e690: 2020 4861 6c74 696e 6743 6f70 7943 616c    HaltingCopyCal
-0001e6a0: 6c62 6163 6b48 616e 646c 6572 2854 7275  lbackHandler(Tru
-0001e6b0: 652c 0a20 2020 2020 2020 2020 2020 2020  e,.             
-0001e6c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e6d0: 2020 2020 2020 696e 7428 4f4e 455f 4b49        int(ONE_KI
-0001e6e0: 4229 202a 2035 3132 2929 290a 2020 2020  B) * 512))).    
-0001e6f0: 7265 7375 6d61 626c 655f 7468 7265 7368  resumable_thresh
-0001e700: 6f6c 645f 666f 725f 7465 7374 203d 2028  old_for_test = (
-0001e710: 2747 5355 7469 6c27 2c20 2772 6573 756d  'GSUtil', 'resum
-0001e720: 6162 6c65 5f74 6872 6573 686f 6c64 272c  able_threshold',
-0001e730: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001e740: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e750: 2020 2020 2073 7472 284f 4e45 5f4b 4942       str(ONE_KIB
-0001e760: 2929 0a20 2020 2072 6573 756d 6162 6c65  )).    resumable
-0001e770: 5f63 6875 6e6b 5f73 697a 655f 666f 725f  _chunk_size_for_
-0001e780: 7465 7374 203d 2028 2747 5355 7469 6c27  test = ('GSUtil'
-0001e790: 2c20 276a 736f 6e5f 7265 7375 6d61 626c  , 'json_resumabl
-0001e7a0: 655f 6368 756e 6b5f 7369 7a65 272c 0a20  e_chunk_size',. 
-0001e7b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e7c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e7d0: 2020 2020 7374 7228 4f4e 455f 4b49 4220      str(ONE_KIB 
-0001e7e0: 2a20 3235 3629 290a 2020 2020 7769 7468  * 256)).    with
-0001e7f0: 2053 6574 426f 746f 436f 6e66 6967 466f   SetBotoConfigFo
-0001e800: 7254 6573 7428 0a20 2020 2020 2020 205b  rTest(.        [
-0001e810: 7265 7375 6d61 626c 655f 7468 7265 7368  resumable_thresh
-0001e820: 6f6c 645f 666f 725f 7465 7374 2c20 7265  old_for_test, re
-0001e830: 7375 6d61 626c 655f 6368 756e 6b5f 7369  sumable_chunk_si
-0001e840: 7a65 5f66 6f72 5f74 6573 745d 293a 0a20  ze_for_test]):. 
-0001e850: 2020 2020 2073 7464 6572 7220 3d20 7365       stderr = se
-0001e860: 6c66 2e52 756e 4773 5574 696c 285b 0a20  lf.RunGsUtil([. 
-0001e870: 2020 2020 2020 2020 2027 6370 272c 2027           'cp', '
-0001e880: 2d2d 7465 7374 6361 6c6c 6261 636b 6669  --testcallbackfi
-0001e890: 6c65 272c 2074 6573 745f 6361 6c6c 6261  le', test_callba
-0001e8a0: 636b 5f66 696c 652c 2066 7061 7468 2c0a  ck_file, fpath,.
-0001e8b0: 2020 2020 2020 2020 2020 7375 7269 2862            suri(b
-0001e8c0: 7563 6b65 745f 7572 6929 0a20 2020 2020  ucket_uri).     
-0001e8d0: 205d 2c0a 2020 2020 2020 2020 2020 2020   ],.            
-0001e8e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e8f0: 2020 6578 7065 6374 6564 5f73 7461 7475    expected_statu
-0001e900: 733d 312c 0a20 2020 2020 2020 2020 2020  s=1,.           
-0001e910: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e920: 2020 2072 6574 7572 6e5f 7374 6465 7272     return_stderr
-0001e930: 3d54 7275 6529 0a20 2020 2020 2073 656c  =True).      sel
-0001e940: 662e 6173 7365 7274 496e 2827 4172 7469  f.assertIn('Arti
-0001e950: 6669 6361 6c6c 7920 6861 6c74 696e 6720  fically halting 
-0001e960: 7570 6c6f 6164 272c 2073 7464 6572 7229  upload', stderr)
-0001e970: 0a20 2020 2020 2066 7061 7468 203d 2073  .      fpath = s
-0001e980: 656c 662e 4372 6561 7465 5465 6d70 4669  elf.CreateTempFi
-0001e990: 6c65 2866 696c 655f 6e61 6d65 3d27 666f  le(file_name='fo
-0001e9a0: 6f27 2c0a 2020 2020 2020 2020 2020 2020  o',.            
-0001e9b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e9c0: 2020 2020 2020 746d 7064 6972 3d74 6d70        tmpdir=tmp
-0001e9d0: 5f64 6972 2c0a 2020 2020 2020 2020 2020  _dir,.          
-0001e9e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e9f0: 2020 2020 2020 2020 636f 6e74 656e 7473          contents
-0001ea00: 3d62 2761 2720 2a20 4f4e 455f 4b49 4229  =b'a' * ONE_KIB)
-0001ea10: 0a20 2020 2020 2073 7464 6572 7220 3d20  .      stderr = 
-0001ea20: 7365 6c66 2e52 756e 4773 5574 696c 285b  self.RunGsUtil([
-0001ea30: 2763 7027 2c20 6670 6174 682c 2073 7572  'cp', fpath, sur
-0001ea40: 6928 6275 636b 6574 5f75 7269 295d 2c0a  i(bucket_uri)],.
-0001ea50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ea60: 2020 2020 2020 2020 2020 2020 2020 6578                ex
-0001ea70: 7065 6374 6564 5f73 7461 7475 733d 312c  pected_status=1,
-0001ea80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001ea90: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0001eaa0: 6574 7572 6e5f 7374 6465 7272 3d54 7275  eturn_stderr=Tru
-0001eab0: 6529 0a20 2020 2020 2073 656c 662e 6173  e).      self.as
-0001eac0: 7365 7274 496e 2827 5265 7375 6d61 626c  sertIn('Resumabl
-0001ead0: 6555 706c 6f61 6441 626f 7274 4578 6365  eUploadAbortExce
-0001eae0: 7074 696f 6e27 2c20 7374 6465 7272 290a  ption', stderr).
-0001eaf0: 0a20 2040 536b 6970 466f 7253 3328 274e  .  @SkipForS3('N
-0001eb00: 6f20 7265 7375 6d61 626c 6520 7570 6c6f  o resumable uplo
-0001eb10: 6164 2073 7570 706f 7274 2066 6f72 2053  ad support for S
-0001eb20: 332e 2729 0a20 2064 6566 2074 6573 745f  3.').  def test_
-0001eb30: 6370 5f63 6f6d 706f 7369 7465 5f65 6e63  cp_composite_enc
-0001eb40: 7279 7074 6564 5f75 706c 6f61 645f 7265  rypted_upload_re
-0001eb50: 7375 6d65 2873 656c 6629 3a0a 2020 2020  sume(self):.    
-0001eb60: 2222 2254 6573 7473 2074 6861 7420 616e  """Tests that an
-0001eb70: 2065 6e63 7279 7074 6564 2063 6f6d 706f   encrypted compo
-0001eb80: 7369 7465 2075 706c 6f61 6420 7265 7375  site upload resu
-0001eb90: 6d65 7320 7375 6363 6573 7366 756c 6c79  mes successfully
-0001eba0: 2e22 2222 0a20 2020 2069 6620 7365 6c66  .""".    if self
-0001ebb0: 2e74 6573 745f 6170 6920 3d3d 2041 7069  .test_api == Api
-0001ebc0: 5365 6c65 6374 6f72 2e58 4d4c 3a0a 2020  Selector.XML:.  
-0001ebd0: 2020 2020 7265 7475 726e 2075 6e69 7474      return unitt
-0001ebe0: 6573 742e 736b 6970 280a 2020 2020 2020  est.skip(.      
-0001ebf0: 2020 2020 2767 7375 7469 6c20 646f 6573      'gsutil does
-0001ec00: 206e 6f74 2073 7570 706f 7274 2065 6e63   not support enc
-0001ec10: 7279 7074 696f 6e20 7769 7468 2074 6865  ryption with the
-0001ec20: 2058 4d4c 2041 5049 2729 0a20 2020 2062   XML API').    b
-0001ec30: 7563 6b65 745f 7572 6920 3d20 7365 6c66  ucket_uri = self
-0001ec40: 2e43 7265 6174 6542 7563 6b65 7428 290a  .CreateBucket().
-0001ec50: 2020 2020 6473 745f 7572 6c20 3d20 5374      dst_url = St
-0001ec60: 6f72 6167 6555 726c 4672 6f6d 5374 7269  orageUrlFromStri
-0001ec70: 6e67 2873 7572 6928 6275 636b 6574 5f75  ng(suri(bucket_u
-0001ec80: 7269 2c20 2766 6f6f 2729 290a 0a20 2020  ri, 'foo'))..   
-0001ec90: 2066 696c 655f 636f 6e74 656e 7473 203d   file_contents =
-0001eca0: 2062 2766 6f6f 6261 7227 0a20 2020 2066   b'foobar'.    f
-0001ecb0: 696c 655f 6e61 6d65 203d 2027 666f 6f62  ile_name = 'foob
-0001ecc0: 6172 270a 2020 2020 736f 7572 6365 5f66  ar'.    source_f
-0001ecd0: 696c 6520 3d20 7365 6c66 2e43 7265 6174  ile = self.Creat
-0001ece0: 6554 656d 7046 696c 6528 636f 6e74 656e  eTempFile(conten
-0001ecf0: 7473 3d66 696c 655f 636f 6e74 656e 7473  ts=file_contents
-0001ed00: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-0001ed10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ed20: 2020 2020 2020 2020 6669 6c65 5f6e 616d          file_nam
-0001ed30: 653d 6669 6c65 5f6e 616d 6529 0a20 2020  e=file_name).   
-0001ed40: 2073 7263 5f75 726c 203d 2053 746f 7261   src_url = Stora
-0001ed50: 6765 5572 6c46 726f 6d53 7472 696e 6728  geUrlFromString(
-0001ed60: 736f 7572 6365 5f66 696c 6529 0a0a 2020  source_file)..  
-0001ed70: 2020 2320 5369 6d75 6c61 7465 2061 6e20    # Simulate an 
-0001ed80: 7570 6c6f 6164 2074 6861 7420 6861 6420  upload that had 
-0001ed90: 6f63 6375 7272 6564 2062 7920 7772 6974  occurred by writ
-0001eda0: 696e 6720 6120 7472 6163 6b65 7220 6669  ing a tracker fi
-0001edb0: 6c65 0a20 2020 2023 2074 6861 7420 706f  le.    # that po
-0001edc0: 696e 7473 2074 6f20 6120 7072 6576 696f  ints to a previo
-0001edd0: 7573 6c79 2075 706c 6f61 6465 6420 636f  usly uploaded co
-0001ede0: 6d70 6f6e 656e 742e 0a20 2020 2074 7261  mponent..    tra
-0001edf0: 636b 6572 5f66 696c 655f 6e61 6d65 203d  cker_file_name =
-0001ee00: 2047 6574 5472 6163 6b65 7246 696c 6550   GetTrackerFileP
-0001ee10: 6174 6828 6473 745f 7572 6c2c 0a20 2020  ath(dst_url,.   
-0001ee20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ee30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ee40: 2020 2020 2020 2020 5472 6163 6b65 7246          TrackerF
-0001ee50: 696c 6554 7970 652e 5041 5241 4c4c 454c  ileType.PARALLEL
-0001ee60: 5f55 504c 4f41 442c 0a20 2020 2020 2020  _UPLOAD,.       
-0001ee70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ee80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ee90: 2020 2020 7365 6c66 2e74 6573 745f 6170      self.test_ap
-0001eea0: 692c 2073 7263 5f75 726c 290a 2020 2020  i, src_url).    
-0001eeb0: 7472 6163 6b65 725f 7072 6566 6978 203d  tracker_prefix =
-0001eec0: 2027 3132 3327 0a0a 2020 2020 2320 4372   '123'..    # Cr
-0001eed0: 6561 7465 2063 6f6d 706f 6e65 6e74 2030  eate component 0
-0001eee0: 2074 6f20 6265 2075 7365 6420 696e 2074   to be used in t
-0001eef0: 6865 2072 6573 756d 653b 2069 7420 6d75  he resume; it mu
-0001ef00: 7374 206d 6174 6368 2074 6865 206e 616d  st match the nam
-0001ef10: 650a 2020 2020 2320 7468 6174 2077 696c  e.    # that wil
-0001ef20: 6c20 6265 2067 656e 6572 6174 6564 2069  l be generated i
-0001ef30: 6e20 636f 7079 5f68 656c 7065 722c 2073  n copy_helper, s
-0001ef40: 6f20 7765 2075 7365 2074 6865 2073 616d  o we use the sam
-0001ef50: 6520 7363 6865 6d65 2e0a 2020 2020 656e  e scheme..    en
-0001ef60: 636f 6465 645f 6e61 6d65 203d 2028 5041  coded_name = (PA
-0001ef70: 5241 4c4c 454c 5f55 504c 4f41 445f 5354  RALLEL_UPLOAD_ST
-0001ef80: 4154 4943 5f53 414c 5420 2b20 736f 7572  ATIC_SALT + sour
-0001ef90: 6365 5f66 696c 6529 2e65 6e63 6f64 6528  ce_file).encode(
-0001efa0: 5554 4638 290a 2020 2020 636f 6e74 656e  UTF8).    conten
-0001efb0: 745f 6d64 3520 3d20 4765 744d 6435 2829  t_md5 = GetMd5()
-0001efc0: 0a20 2020 2063 6f6e 7465 6e74 5f6d 6435  .    content_md5
-0001efd0: 2e75 7064 6174 6528 656e 636f 6465 645f  .update(encoded_
-0001efe0: 6e61 6d65 290a 2020 2020 6469 6765 7374  name).    digest
-0001eff0: 203d 2063 6f6e 7465 6e74 5f6d 6435 2e68   = content_md5.h
-0001f000: 6578 6469 6765 7374 2829 0a20 2020 2063  exdigest().    c
-0001f010: 6f6d 706f 6e65 6e74 5f6f 626a 6563 745f  omponent_object_
-0001f020: 6e61 6d65 203d 2028 7472 6163 6b65 725f  name = (tracker_
-0001f030: 7072 6566 6978 202b 2050 4152 414c 4c45  prefix + PARALLE
-0001f040: 4c5f 5550 4c4f 4144 5f54 454d 505f 4e41  L_UPLOAD_TEMP_NA
-0001f050: 4d45 5350 4143 4520 2b0a 2020 2020 2020  MESPACE +.      
-0001f060: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f070: 2020 2020 2020 2064 6967 6573 7420 2b20         digest + 
-0001f080: 275f 3027 290a 0a20 2020 2063 6f6d 706f  '_0')..    compo
-0001f090: 6e65 6e74 5f73 697a 6520 3d20 330a 2020  nent_size = 3.  
-0001f0a0: 2020 6f62 6a65 6374 5f75 7269 203d 2073    object_uri = s
-0001f0b0: 656c 662e 4372 6561 7465 4f62 6a65 6374  elf.CreateObject
-0001f0c0: 2862 7563 6b65 745f 7572 693d 6275 636b  (bucket_uri=buck
-0001f0d0: 6574 5f75 7269 2c0a 2020 2020 2020 2020  et_uri,.        
-0001f0e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f0f0: 2020 2020 2020 2020 2020 206f 626a 6563             objec
-0001f100: 745f 6e61 6d65 3d63 6f6d 706f 6e65 6e74  t_name=component
-0001f110: 5f6f 626a 6563 745f 6e61 6d65 2c0a 2020  _object_name,.  
-0001f120: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f130: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f140: 2063 6f6e 7465 6e74 733d 6669 6c65 5f63   contents=file_c
-0001f150: 6f6e 7465 6e74 735b 3a63 6f6d 706f 6e65  ontents[:compone
-0001f160: 6e74 5f73 697a 655d 2c0a 2020 2020 2020  nt_size],.      
-0001f170: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f180: 2020 2020 2020 2020 2020 2020 2065 6e63               enc
-0001f190: 7279 7074 696f 6e5f 6b65 793d 5445 5354  ryption_key=TEST
-0001f1a0: 5f45 4e43 5259 5054 494f 4e5f 4b45 5931  _ENCRYPTION_KEY1
-0001f1b0: 290a 2020 2020 6578 6973 7469 6e67 5f63  ).    existing_c
-0001f1c0: 6f6d 706f 6e65 6e74 203d 204f 626a 6563  omponent = Objec
-0001f1d0: 7446 726f 6d54 7261 636b 6572 2863 6f6d  tFromTracker(com
-0001f1e0: 706f 6e65 6e74 5f6f 626a 6563 745f 6e61  ponent_object_na
-0001f1f0: 6d65 2c0a 2020 2020 2020 2020 2020 2020  me,.            
-0001f200: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f210: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0001f220: 7472 286f 626a 6563 745f 7572 692e 6765  tr(object_uri.ge
-0001f230: 6e65 7261 7469 6f6e 2929 0a20 2020 2065  neration)).    e
-0001f240: 7869 7374 696e 675f 636f 6d70 6f6e 656e  xisting_componen
-0001f250: 7473 203d 205b 6578 6973 7469 6e67 5f63  ts = [existing_c
-0001f260: 6f6d 706f 6e65 6e74 5d0a 2020 2020 656e  omponent].    en
-0001f270: 635f 6b65 795f 7368 6132 3536 203d 2054  c_key_sha256 = T
-0001f280: 4553 545f 454e 4352 5950 5449 4f4e 5f4b  EST_ENCRYPTION_K
-0001f290: 4559 315f 5348 4132 3536 5f42 3634 0a0a  EY1_SHA256_B64..
-0001f2a0: 2020 2020 5772 6974 6550 6172 616c 6c65      WriteParalle
-0001f2b0: 6c55 706c 6f61 6454 7261 636b 6572 4669  lUploadTrackerFi
-0001f2c0: 6c65 2874 7261 636b 6572 5f66 696c 655f  le(tracker_file_
-0001f2d0: 6e61 6d65 2c0a 2020 2020 2020 2020 2020  name,.          
-0001f2e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f2f0: 2020 2020 2020 2020 2074 7261 636b 6572           tracker
-0001f300: 5f70 7265 6669 782c 0a20 2020 2020 2020  _prefix,.       
-0001f310: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f320: 2020 2020 2020 2020 2020 2020 6578 6973              exis
-0001f330: 7469 6e67 5f63 6f6d 706f 6e65 6e74 732c  ting_components,
-0001f340: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001f350: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f360: 2020 2020 656e 6372 7970 7469 6f6e 5f6b      encryption_k
-0001f370: 6579 5f73 6861 3235 363d 656e 635f 6b65  ey_sha256=enc_ke
-0001f380: 795f 7368 6132 3536 290a 0a20 2020 2074  y_sha256)..    t
-0001f390: 7279 3a0a 2020 2020 2020 2320 4e6f 7720  ry:.      # Now 
-0001f3a0: 2272 6573 756d 6522 2074 6865 2075 706c  "resume" the upl
-0001f3b0: 6f61 6420 7573 696e 6720 7468 6520 6f72  oad using the or
-0001f3c0: 6967 696e 616c 2065 6e63 7279 7074 696f  iginal encryptio
-0001f3d0: 6e20 6b65 792e 0a20 2020 2020 2077 6974  n key..      wit
-0001f3e0: 6820 5365 7442 6f74 6f43 6f6e 6669 6746  h SetBotoConfigF
-0001f3f0: 6f72 5465 7374 285b 0a20 2020 2020 2020  orTest([.       
-0001f400: 2020 2028 2747 5355 7469 6c27 2c20 2770     ('GSUtil', 'p
-0001f410: 6172 616c 6c65 6c5f 636f 6d70 6f73 6974  arallel_composit
-0001f420: 655f 7570 6c6f 6164 5f74 6872 6573 686f  e_upload_thresho
-0001f430: 6c64 272c 2027 3127 292c 0a20 2020 2020  ld', '1'),.     
-0001f440: 2020 2020 2028 2747 5355 7469 6c27 2c20       ('GSUtil', 
-0001f450: 2770 6172 616c 6c65 6c5f 636f 6d70 6f73  'parallel_compos
-0001f460: 6974 655f 7570 6c6f 6164 5f63 6f6d 706f  ite_upload_compo
-0001f470: 6e65 6e74 5f73 697a 6527 2c0a 2020 2020  nent_size',.    
-0001f480: 2020 2020 2020 2073 7472 2863 6f6d 706f         str(compo
-0001f490: 6e65 6e74 5f73 697a 6529 292c 0a20 2020  nent_size)),.   
-0001f4a0: 2020 2020 2020 2028 2747 5355 7469 6c27         ('GSUtil'
-0001f4b0: 2c20 2765 6e63 7279 7074 696f 6e5f 6b65  , 'encryption_ke
-0001f4c0: 7927 2c20 5445 5354 5f45 4e43 5259 5054  y', TEST_ENCRYPT
-0001f4d0: 494f 4e5f 4b45 5931 290a 2020 2020 2020  ION_KEY1).      
-0001f4e0: 5d29 3a0a 2020 2020 2020 2020 7374 6465  ]):.        stde
-0001f4f0: 7272 203d 2073 656c 662e 5275 6e47 7355  rr = self.RunGsU
-0001f500: 7469 6c28 0a20 2020 2020 2020 2020 2020  til(.           
-0001f510: 205b 2763 7027 2c20 736f 7572 6365 5f66   ['cp', source_f
-0001f520: 696c 652c 2073 7572 6928 6275 636b 6574  ile, suri(bucket
-0001f530: 5f75 7269 2c20 2766 6f6f 2729 5d2c 2072  _uri, 'foo')], r
-0001f540: 6574 7572 6e5f 7374 6465 7272 3d54 7275  eturn_stderr=Tru
-0001f550: 6529 0a20 2020 2020 2020 2073 656c 662e  e).        self.
-0001f560: 6173 7365 7274 496e 2827 466f 756e 6420  assertIn('Found 
-0001f570: 3120 6578 6973 7469 6e67 2074 656d 706f  1 existing tempo
-0001f580: 7261 7279 2063 6f6d 706f 6e65 6e74 7320  rary components 
-0001f590: 746f 2072 6575 7365 2e27 2c20 7374 6465  to reuse.', stde
-0001f5a0: 7272 290a 2020 2020 2020 2020 7365 6c66  rr).        self
-0001f5b0: 2e61 7373 6572 7446 616c 7365 280a 2020  .assertFalse(.  
-0001f5c0: 2020 2020 2020 2020 2020 6f73 2e70 6174            os.pat
-0001f5d0: 682e 6578 6973 7473 2874 7261 636b 6572  h.exists(tracker
-0001f5e0: 5f66 696c 655f 6e61 6d65 292c 0a20 2020  _file_name),.   
-0001f5f0: 2020 2020 2020 2020 2027 5472 6163 6b65           'Tracke
-0001f600: 7220 6669 6c65 2025 7320 7368 6f75 6c64  r file %s should
-0001f610: 2068 6176 6520 6265 656e 2064 656c 6574   have been delet
-0001f620: 6564 2e27 2025 2074 7261 636b 6572 5f66  ed.' % tracker_f
-0001f630: 696c 655f 6e61 6d65 290a 2020 2020 2020  ile_name).      
-0001f640: 2020 7265 6164 5f63 6f6e 7465 6e74 7320    read_contents 
-0001f650: 3d20 7365 6c66 2e52 756e 4773 5574 696c  = self.RunGsUtil
-0001f660: 285b 2763 6174 272c 2073 7572 6928 6275  (['cat', suri(bu
-0001f670: 636b 6574 5f75 7269 2c20 2766 6f6f 2729  cket_uri, 'foo')
-0001f680: 5d2c 0a20 2020 2020 2020 2020 2020 2020  ],.             
+0001e410: 2020 7265 7475 726e 5f73 7464 6572 723d    return_stderr=
+0001e420: 3129 0a20 2020 2020 2073 656c 662e 6173  1).      self.as
+0001e430: 7365 7274 496e 2827 5265 7472 7969 6e67  sertIn('Retrying
+0001e440: 272c 2073 7464 6572 7229 0a0a 2020 4053  ', stderr)..  @S
+0001e450: 6b69 7046 6f72 5333 2827 7072 6573 6572  kipForS3('preser
+0001e460: 7665 5f61 636c 2066 6c61 6720 6e6f 7420  ve_acl flag not 
+0001e470: 7375 7070 6f72 7465 6420 666f 7220 5333  supported for S3
+0001e480: 2e27 290a 2020 6465 6620 7465 7374 5f63  .').  def test_c
+0001e490: 705f 7072 6573 6572 7665 5f6e 6f5f 6f77  p_preserve_no_ow
+0001e4a0: 6e65 7228 7365 6c66 293a 0a20 2020 2062  ner(self):.    b
+0001e4b0: 7563 6b65 745f 7572 6920 3d20 7365 6c66  ucket_uri = self
+0001e4c0: 2e43 7265 6174 6542 7563 6b65 7428 290a  .CreateBucket().
+0001e4d0: 2020 2020 6f62 6a65 6374 5f75 7269 203d      object_uri =
+0001e4e0: 2073 656c 662e 4372 6561 7465 4f62 6a65   self.CreateObje
+0001e4f0: 6374 2862 7563 6b65 745f 7572 693d 6275  ct(bucket_uri=bu
+0001e500: 636b 6574 5f75 7269 2c20 636f 6e74 656e  cket_uri, conten
+0001e510: 7473 3d62 2766 6f6f 2729 0a20 2020 2023  ts=b'foo').    #
+0001e520: 2041 6e6f 6e79 6d6f 7573 2075 7365 7220   Anonymous user 
+0001e530: 6361 6e20 7265 6164 2074 6865 206f 626a  can read the obj
+0001e540: 6563 7420 616e 6420 7772 6974 6520 746f  ect and write to
+0001e550: 2074 6865 2062 7563 6b65 742c 2062 7574   the bucket, but
+0001e560: 2064 6f65 730a 2020 2020 2320 6e6f 7420   does.    # not 
+0001e570: 6f77 6e20 7468 6520 6f62 6a65 6374 2e0a  own the object..
+0001e580: 2020 2020 7365 6c66 2e52 756e 4773 5574      self.RunGsUt
+0001e590: 696c 285b 2761 636c 272c 2027 6368 272c  il(['acl', 'ch',
+0001e5a0: 2027 2d75 272c 2027 416c 6c55 7365 7273   '-u', 'AllUsers
+0001e5b0: 3a52 272c 2073 7572 6928 6f62 6a65 6374  :R', suri(object
+0001e5c0: 5f75 7269 295d 290a 2020 2020 7365 6c66  _uri)]).    self
+0001e5d0: 2e52 756e 4773 5574 696c 285b 2761 636c  .RunGsUtil(['acl
+0001e5e0: 272c 2027 6368 272c 2027 2d75 272c 2027  ', 'ch', '-u', '
+0001e5f0: 416c 6c55 7365 7273 3a57 272c 2073 7572  AllUsers:W', sur
+0001e600: 6928 6275 636b 6574 5f75 7269 295d 290a  i(bucket_uri)]).
+0001e610: 2020 2020 7769 7468 2073 656c 662e 5365      with self.Se
+0001e620: 7441 6e6f 6e79 6d6f 7573 426f 746f 4372  tAnonymousBotoCr
+0001e630: 6564 7328 293a 0a20 2020 2020 2073 7464  eds():.      std
+0001e640: 6572 7220 3d20 7365 6c66 2e52 756e 4773  err = self.RunGs
+0001e650: 5574 696c 280a 2020 2020 2020 2020 2020  Util(.          
+0001e660: 5b27 6370 272c 2027 2d70 272c 2073 7572  ['cp', '-p', sur
+0001e670: 6928 6f62 6a65 6374 5f75 7269 292c 0a20  i(object_uri),. 
+0001e680: 2020 2020 2020 2020 2020 7375 7269 2862            suri(b
+0001e690: 7563 6b65 745f 7572 692c 2027 666f 6f27  ucket_uri, 'foo'
+0001e6a0: 295d 2c0a 2020 2020 2020 2020 2020 7265  )],.          re
+0001e6b0: 7475 726e 5f73 7464 6572 723d 5472 7565  turn_stderr=True
+0001e6c0: 2c0a 2020 2020 2020 2020 2020 6578 7065  ,.          expe
+0001e6d0: 6374 6564 5f73 7461 7475 733d 3129 0a20  cted_status=1). 
+0001e6e0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+0001e6f0: 496e 2827 4f57 4e45 5220 7065 726d 6973  In('OWNER permis
+0001e700: 7369 6f6e 2069 7320 7265 7175 6972 6564  sion is required
+0001e710: 2066 6f72 2070 7265 7365 7276 696e 6720   for preserving 
+0001e720: 4143 4c73 272c 2073 7464 6572 7229 0a0a  ACLs', stderr)..
+0001e730: 2020 4053 6b69 7046 6f72 5333 2827 4e6f    @SkipForS3('No
+0001e740: 2072 6573 756d 6162 6c65 2075 706c 6f61   resumable uploa
+0001e750: 6420 7375 7070 6f72 7420 666f 7220 5333  d support for S3
+0001e760: 2e27 290a 2020 6465 6620 7465 7374 5f63  .').  def test_c
+0001e770: 705f 7072 6f67 7265 7373 5f63 616c 6c62  p_progress_callb
+0001e780: 6163 6b73 2873 656c 6629 3a0a 2020 2020  acks(self):.    
+0001e790: 6275 636b 6574 5f75 7269 203d 2073 656c  bucket_uri = sel
+0001e7a0: 662e 4372 6561 7465 4275 636b 6574 2829  f.CreateBucket()
+0001e7b0: 0a20 2020 2066 696e 616c 5f73 697a 655f  .    final_size_
+0001e7c0: 7374 7269 6e67 203d 2042 7974 6573 546f  string = BytesTo
+0001e7d0: 4669 7865 6457 6964 7468 5374 7269 6e67  FixedWidthString
+0001e7e0: 2831 3032 342a 2a32 290a 2020 2020 6669  (1024**2).    fi
+0001e7f0: 6e61 6c5f 7072 6f67 7265 7373 5f63 616c  nal_progress_cal
+0001e800: 6c62 6163 6b20 3d20 6669 6e61 6c5f 7369  lback = final_si
+0001e810: 7a65 5f73 7472 696e 6720 2b20 272f 2720  ze_string + '/' 
+0001e820: 2b20 6669 6e61 6c5f 7369 7a65 5f73 7472  + final_size_str
+0001e830: 696e 670a 2020 2020 6670 6174 6820 3d20  ing.    fpath = 
+0001e840: 7365 6c66 2e43 7265 6174 6554 656d 7046  self.CreateTempF
+0001e850: 696c 6528 636f 6e74 656e 7473 3d62 2761  ile(contents=b'a
+0001e860: 2720 2a20 4f4e 455f 4d49 422c 2066 696c  ' * ONE_MIB, fil
+0001e870: 655f 6e61 6d65 3d27 666f 6f27 290a 2020  e_name='foo').  
+0001e880: 2020 626f 746f 5f63 6f6e 6669 675f 666f    boto_config_fo
+0001e890: 725f 7465 7374 203d 2028 2747 5355 7469  r_test = ('GSUti
+0001e8a0: 6c27 2c20 2772 6573 756d 6162 6c65 5f74  l', 'resumable_t
+0001e8b0: 6872 6573 686f 6c64 272c 2073 7472 284f  hreshold', str(O
+0001e8c0: 4e45 5f4b 4942 2929 0a20 2020 2077 6974  NE_KIB)).    wit
+0001e8d0: 6820 5365 7442 6f74 6f43 6f6e 6669 6746  h SetBotoConfigF
+0001e8e0: 6f72 5465 7374 285b 626f 746f 5f63 6f6e  orTest([boto_con
+0001e8f0: 6669 675f 666f 725f 7465 7374 5d29 3a0a  fig_for_test]):.
+0001e900: 2020 2020 2020 7374 6465 7272 203d 2073        stderr = s
+0001e910: 656c 662e 5275 6e47 7355 7469 6c28 5b27  elf.RunGsUtil(['
+0001e920: 6370 272c 2066 7061 7468 2c20 7375 7269  cp', fpath, suri
+0001e930: 2862 7563 6b65 745f 7572 6929 5d2c 0a20  (bucket_uri)],. 
+0001e940: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e950: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+0001e960: 7572 6e5f 7374 6465 7272 3d54 7275 6529  urn_stderr=True)
+0001e970: 0a20 2020 2020 2073 656c 662e 6173 7365  .      self.asse
+0001e980: 7274 4571 7561 6c73 2831 2c20 7374 6465  rtEquals(1, stde
+0001e990: 7272 2e63 6f75 6e74 2866 696e 616c 5f70  rr.count(final_p
+0001e9a0: 726f 6772 6573 735f 6361 6c6c 6261 636b  rogress_callback
+0001e9b0: 2929 0a20 2020 2062 6f74 6f5f 636f 6e66  )).    boto_conf
+0001e9c0: 6967 5f66 6f72 5f74 6573 7420 3d20 2827  ig_for_test = ('
+0001e9d0: 4753 5574 696c 272c 2027 7265 7375 6d61  GSUtil', 'resuma
+0001e9e0: 626c 655f 7468 7265 7368 6f6c 6427 2c20  ble_threshold', 
+0001e9f0: 7374 7228 3220 2a20 4f4e 455f 4d49 4229  str(2 * ONE_MIB)
+0001ea00: 290a 2020 2020 7769 7468 2053 6574 426f  ).    with SetBo
+0001ea10: 746f 436f 6e66 6967 466f 7254 6573 7428  toConfigForTest(
+0001ea20: 5b62 6f74 6f5f 636f 6e66 6967 5f66 6f72  [boto_config_for
+0001ea30: 5f74 6573 745d 293a 0a20 2020 2020 2073  _test]):.      s
+0001ea40: 7464 6572 7220 3d20 7365 6c66 2e52 756e  tderr = self.Run
+0001ea50: 4773 5574 696c 285b 2763 7027 2c20 6670  GsUtil(['cp', fp
+0001ea60: 6174 682c 2073 7572 6928 6275 636b 6574  ath, suri(bucket
+0001ea70: 5f75 7269 295d 2c0a 2020 2020 2020 2020  _uri)],.        
+0001ea80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ea90: 2020 2020 2020 7265 7475 726e 5f73 7464        return_std
+0001eaa0: 6572 723d 5472 7565 290a 2020 2020 2020  err=True).      
+0001eab0: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+0001eac0: 7328 312c 2073 7464 6572 722e 636f 756e  s(1, stderr.coun
+0001ead0: 7428 6669 6e61 6c5f 7072 6f67 7265 7373  t(final_progress
+0001eae0: 5f63 616c 6c62 6163 6b29 290a 2020 2020  _callback)).    
+0001eaf0: 7374 6465 7272 203d 2073 656c 662e 5275  stderr = self.Ru
+0001eb00: 6e47 7355 7469 6c28 5b27 6370 272c 2073  nGsUtil(['cp', s
+0001eb10: 7572 6928 6275 636b 6574 5f75 7269 2c20  uri(bucket_uri, 
+0001eb20: 2766 6f6f 2729 2c20 6670 6174 685d 2c0a  'foo'), fpath],.
+0001eb30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001eb40: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0001eb50: 726e 5f73 7464 6572 723d 5472 7565 290a  rn_stderr=True).
+0001eb60: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+0001eb70: 7175 616c 7328 312c 2073 7464 6572 722e  quals(1, stderr.
+0001eb80: 636f 756e 7428 6669 6e61 6c5f 7072 6f67  count(final_prog
+0001eb90: 7265 7373 5f63 616c 6c62 6163 6b29 290a  ress_callback)).
+0001eba0: 0a20 2040 536b 6970 466f 7253 3328 274e  .  @SkipForS3('N
+0001ebb0: 6f20 7265 7375 6d61 626c 6520 7570 6c6f  o resumable uplo
+0001ebc0: 6164 2073 7570 706f 7274 2066 6f72 2053  ad support for S
+0001ebd0: 332e 2729 0a20 2064 6566 2074 6573 745f  3.').  def test_
+0001ebe0: 6370 5f72 6573 756d 6162 6c65 5f75 706c  cp_resumable_upl
+0001ebf0: 6f61 6428 7365 6c66 293a 0a20 2020 2022  oad(self):.    "
+0001ec00: 2222 5465 7374 7320 7468 6174 2061 2062  ""Tests that a b
+0001ec10: 6173 6963 2072 6573 756d 6162 6c65 2075  asic resumable u
+0001ec20: 706c 6f61 6420 636f 6d70 6c65 7465 7320  pload completes 
+0001ec30: 7375 6363 6573 7366 756c 6c79 2e22 2222  successfully."""
+0001ec40: 0a20 2020 2062 7563 6b65 745f 7572 6920  .    bucket_uri 
+0001ec50: 3d20 7365 6c66 2e43 7265 6174 6542 7563  = self.CreateBuc
+0001ec60: 6b65 7428 290a 2020 2020 6670 6174 6820  ket().    fpath 
+0001ec70: 3d20 7365 6c66 2e43 7265 6174 6554 656d  = self.CreateTem
+0001ec80: 7046 696c 6528 636f 6e74 656e 7473 3d62  pFile(contents=b
+0001ec90: 2761 2720 2a20 7365 6c66 2e68 616c 745f  'a' * self.halt_
+0001eca0: 7369 7a65 290a 2020 2020 626f 746f 5f63  size).    boto_c
+0001ecb0: 6f6e 6669 675f 666f 725f 7465 7374 203d  onfig_for_test =
+0001ecc0: 2028 2747 5355 7469 6c27 2c20 2772 6573   ('GSUtil', 'res
+0001ecd0: 756d 6162 6c65 5f74 6872 6573 686f 6c64  umable_threshold
+0001ece0: 272c 2073 7472 284f 4e45 5f4b 4942 2929  ', str(ONE_KIB))
+0001ecf0: 0a20 2020 2077 6974 6820 5365 7442 6f74  .    with SetBot
+0001ed00: 6f43 6f6e 6669 6746 6f72 5465 7374 285b  oConfigForTest([
+0001ed10: 626f 746f 5f63 6f6e 6669 675f 666f 725f  boto_config_for_
+0001ed20: 7465 7374 5d29 3a0a 2020 2020 2020 7365  test]):.      se
+0001ed30: 6c66 2e52 756e 4773 5574 696c 285b 2763  lf.RunGsUtil(['c
+0001ed40: 7027 2c20 6670 6174 682c 2073 7572 6928  p', fpath, suri(
+0001ed50: 6275 636b 6574 5f75 7269 295d 290a 0a20  bucket_uri)]).. 
+0001ed60: 2040 536b 6970 466f 7253 3328 274e 6f20   @SkipForS3('No 
+0001ed70: 7265 7375 6d61 626c 6520 7570 6c6f 6164  resumable upload
+0001ed80: 2073 7570 706f 7274 2066 6f72 2053 332e   support for S3.
+0001ed90: 2729 0a20 2064 6566 2074 6573 745f 7265  ').  def test_re
+0001eda0: 7375 6d61 626c 655f 7570 6c6f 6164 5f62  sumable_upload_b
+0001edb0: 7265 616b 5f6c 6561 7665 735f 7472 6163  reak_leaves_trac
+0001edc0: 6b65 7228 7365 6c66 293a 0a20 2020 2022  ker(self):.    "
+0001edd0: 2222 5465 7374 7320 7468 6174 2061 2074  ""Tests that a t
+0001ede0: 7261 636b 6572 2066 696c 6520 6973 2063  racker file is c
+0001edf0: 7265 6174 6564 2077 6974 6820 6120 7265  reated with a re
+0001ee00: 7375 6d61 626c 6520 7570 6c6f 6164 2e22  sumable upload."
+0001ee10: 2222 0a20 2020 2062 7563 6b65 745f 7572  "".    bucket_ur
+0001ee20: 6920 3d20 7365 6c66 2e43 7265 6174 6542  i = self.CreateB
+0001ee30: 7563 6b65 7428 290a 2020 2020 6670 6174  ucket().    fpat
+0001ee40: 6820 3d20 7365 6c66 2e43 7265 6174 6554  h = self.CreateT
+0001ee50: 656d 7046 696c 6528 6669 6c65 5f6e 616d  empFile(file_nam
+0001ee60: 653d 2766 6f6f 272c 2063 6f6e 7465 6e74  e='foo', content
+0001ee70: 733d 6227 6127 202a 2073 656c 662e 6861  s=b'a' * self.ha
+0001ee80: 6c74 5f73 697a 6529 0a20 2020 2062 6f74  lt_size).    bot
+0001ee90: 6f5f 636f 6e66 6967 5f66 6f72 5f74 6573  o_config_for_tes
+0001eea0: 7420 3d20 2827 4753 5574 696c 272c 2027  t = ('GSUtil', '
+0001eeb0: 7265 7375 6d61 626c 655f 7468 7265 7368  resumable_thresh
+0001eec0: 6f6c 6427 2c20 7374 7228 4f4e 455f 4b49  old', str(ONE_KI
+0001eed0: 4229 290a 2020 2020 7769 7468 2053 6574  B)).    with Set
+0001eee0: 426f 746f 436f 6e66 6967 466f 7254 6573  BotoConfigForTes
+0001eef0: 7428 5b62 6f74 6f5f 636f 6e66 6967 5f66  t([boto_config_f
+0001ef00: 6f72 5f74 6573 745d 293a 0a20 2020 2020  or_test]):.     
+0001ef10: 2074 7261 636b 6572 5f66 696c 656e 616d   tracker_filenam
+0001ef20: 6520 3d20 4765 7454 7261 636b 6572 4669  e = GetTrackerFi
+0001ef30: 6c65 5061 7468 280a 2020 2020 2020 2020  lePath(.        
+0001ef40: 2020 5374 6f72 6167 6555 726c 4672 6f6d    StorageUrlFrom
+0001ef50: 5374 7269 6e67 2873 7572 6928 6275 636b  String(suri(buck
+0001ef60: 6574 5f75 7269 2c20 2766 6f6f 2729 292c  et_uri, 'foo')),
+0001ef70: 2054 7261 636b 6572 4669 6c65 5479 7065   TrackerFileType
+0001ef80: 2e55 504c 4f41 442c 0a20 2020 2020 2020  .UPLOAD,.       
+0001ef90: 2020 2073 656c 662e 7465 7374 5f61 7069     self.test_api
+0001efa0: 290a 2020 2020 2020 7465 7374 5f63 616c  ).      test_cal
+0001efb0: 6c62 6163 6b5f 6669 6c65 203d 2073 656c  lback_file = sel
+0001efc0: 662e 4372 6561 7465 5465 6d70 4669 6c65  f.CreateTempFile
+0001efd0: 280a 2020 2020 2020 2020 2020 636f 6e74  (.          cont
+0001efe0: 656e 7473 3d70 6963 6b6c 652e 6475 6d70  ents=pickle.dump
+0001eff0: 7328 4861 6c74 696e 6743 6f70 7943 616c  s(HaltingCopyCal
+0001f000: 6c62 6163 6b48 616e 646c 6572 2854 7275  lbackHandler(Tru
+0001f010: 652c 2035 2929 290a 2020 2020 2020 7472  e, 5))).      tr
+0001f020: 793a 0a20 2020 2020 2020 2073 7464 6572  y:.        stder
+0001f030: 7220 3d20 7365 6c66 2e52 756e 4773 5574  r = self.RunGsUt
+0001f040: 696c 285b 0a20 2020 2020 2020 2020 2020  il([.           
+0001f050: 2027 6370 272c 2027 2d2d 7465 7374 6361   'cp', '--testca
+0001f060: 6c6c 6261 636b 6669 6c65 272c 2074 6573  llbackfile', tes
+0001f070: 745f 6361 6c6c 6261 636b 5f66 696c 652c  t_callback_file,
+0001f080: 2066 7061 7468 2c0a 2020 2020 2020 2020   fpath,.        
+0001f090: 2020 2020 7375 7269 2862 7563 6b65 745f      suri(bucket_
+0001f0a0: 7572 692c 2027 666f 6f27 290a 2020 2020  uri, 'foo').    
+0001f0b0: 2020 2020 5d2c 0a20 2020 2020 2020 2020      ],.         
+0001f0c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001f0d0: 2020 2020 2020 2065 7870 6563 7465 645f         expected_
+0001f0e0: 7374 6174 7573 3d31 2c0a 2020 2020 2020  status=1,.      
+0001f0f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001f100: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0001f110: 5f73 7464 6572 723d 5472 7565 290a 2020  _stderr=True).  
+0001f120: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+0001f130: 7449 6e28 2741 7274 6966 6963 616c 6c79  tIn('Artifically
+0001f140: 2068 616c 7469 6e67 2075 706c 6f61 6427   halting upload'
+0001f150: 2c20 7374 6465 7272 290a 2020 2020 2020  , stderr).      
+0001f160: 2020 7365 6c66 2e61 7373 6572 7454 7275    self.assertTru
+0001f170: 6528 6f73 2e70 6174 682e 6578 6973 7473  e(os.path.exists
+0001f180: 2874 7261 636b 6572 5f66 696c 656e 616d  (tracker_filenam
+0001f190: 6529 2c0a 2020 2020 2020 2020 2020 2020  e),.            
+0001f1a0: 2020 2020 2020 2020 2020 2020 2754 7261              'Tra
+0001f1b0: 636b 6572 2066 696c 6520 2573 206e 6f74  cker file %s not
+0001f1c0: 2070 7265 7365 6e74 2e27 2025 2074 7261   present.' % tra
+0001f1d0: 636b 6572 5f66 696c 656e 616d 6529 0a20  cker_filename). 
+0001f1e0: 2020 2020 2020 2023 2054 6573 7420 7468         # Test th
+0001f1f0: 6520 7065 726d 6973 7369 6f6e 730a 2020  e permissions.  
+0001f200: 2020 2020 2020 6966 206f 732e 6e61 6d65        if os.name
+0001f210: 203d 3d20 2770 6f73 6978 273a 0a20 2020   == 'posix':.   
+0001f220: 2020 2020 2020 206d 6f64 6520 3d20 6f63         mode = oc
+0001f230: 7428 7374 6174 2e53 5f49 4d4f 4445 286f  t(stat.S_IMODE(o
+0001f240: 732e 7374 6174 2874 7261 636b 6572 5f66  s.stat(tracker_f
+0001f250: 696c 656e 616d 6529 2e73 745f 6d6f 6465  ilename).st_mode
+0001f260: 2929 0a20 2020 2020 2020 2020 2023 2041  )).          # A
+0001f270: 7373 6572 7420 7468 6174 206f 6e6c 7920  ssert that only 
+0001f280: 7573 6572 2068 6173 2072 6561 642f 7772  user has read/wr
+0001f290: 6974 6520 7065 726d 6973 7369 6f6e 0a20  ite permission. 
+0001f2a0: 2020 2020 2020 2020 2073 656c 662e 6173           self.as
+0001f2b0: 7365 7274 4571 7561 6c28 6f63 7428 306f  sertEqual(oct(0o
+0001f2c0: 3630 3029 2c20 6d6f 6465 290a 2020 2020  600), mode).    
+0001f2d0: 2020 6669 6e61 6c6c 793a 0a20 2020 2020    finally:.     
+0001f2e0: 2020 2044 656c 6574 6554 7261 636b 6572     DeleteTracker
+0001f2f0: 4669 6c65 2874 7261 636b 6572 5f66 696c  File(tracker_fil
+0001f300: 656e 616d 6529 0a0a 2020 4053 6b69 7046  ename)..  @SkipF
+0001f310: 6f72 5333 2827 4e6f 2072 6573 756d 6162  orS3('No resumab
+0001f320: 6c65 2075 706c 6f61 6420 7375 7070 6f72  le upload suppor
+0001f330: 7420 666f 7220 5333 2e27 290a 2020 6465  t for S3.').  de
+0001f340: 6620 7465 7374 5f63 705f 7265 7375 6d61  f test_cp_resuma
+0001f350: 626c 655f 7570 6c6f 6164 5f62 7265 616b  ble_upload_break
+0001f360: 5f66 696c 655f 7369 7a65 5f63 6861 6e67  _file_size_chang
+0001f370: 6528 7365 6c66 293a 0a20 2020 2022 2222  e(self):.    """
+0001f380: 5465 7374 7320 6120 7265 7375 6d61 626c  Tests a resumabl
+0001f390: 6520 7570 6c6f 6164 2077 6865 7265 2074  e upload where t
+0001f3a0: 6865 2075 706c 6f61 6465 6420 6669 6c65  he uploaded file
+0001f3b0: 2063 6861 6e67 6573 2073 697a 652e 0a0a   changes size...
+0001f3c0: 2020 2020 5468 6973 2073 686f 756c 6420      This should 
+0001f3d0: 6661 696c 2077 6865 6e20 7765 2072 6561  fail when we rea
+0001f3e0: 6420 7468 6520 7472 6163 6b65 7220 6461  d the tracker da
+0001f3f0: 7461 2e0a 2020 2020 2222 220a 2020 2020  ta..    """.    
+0001f400: 6275 636b 6574 5f75 7269 203d 2073 656c  bucket_uri = sel
+0001f410: 662e 4372 6561 7465 4275 636b 6574 2829  f.CreateBucket()
+0001f420: 0a20 2020 2074 6d70 5f64 6972 203d 2073  .    tmp_dir = s
+0001f430: 656c 662e 4372 6561 7465 5465 6d70 4469  elf.CreateTempDi
+0001f440: 7228 290a 2020 2020 6670 6174 6820 3d20  r().    fpath = 
+0001f450: 7365 6c66 2e43 7265 6174 6554 656d 7046  self.CreateTempF
+0001f460: 696c 6528 6669 6c65 5f6e 616d 653d 2766  ile(file_name='f
+0001f470: 6f6f 272c 0a20 2020 2020 2020 2020 2020  oo',.           
+0001f480: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001f490: 2020 2020 2074 6d70 6469 723d 746d 705f       tmpdir=tmp_
+0001f4a0: 6469 722c 0a20 2020 2020 2020 2020 2020  dir,.           
+0001f4b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001f4c0: 2020 2020 2063 6f6e 7465 6e74 733d 6227       contents=b'
+0001f4d0: 6127 202a 2073 656c 662e 6861 6c74 5f73  a' * self.halt_s
+0001f4e0: 697a 6529 0a20 2020 2074 6573 745f 6361  ize).    test_ca
+0001f4f0: 6c6c 6261 636b 5f66 696c 6520 3d20 7365  llback_file = se
+0001f500: 6c66 2e43 7265 6174 6554 656d 7046 696c  lf.CreateTempFil
+0001f510: 6528 0a20 2020 2020 2020 2063 6f6e 7465  e(.        conte
+0001f520: 6e74 733d 7069 636b 6c65 2e64 756d 7073  nts=pickle.dumps
+0001f530: 2848 616c 7469 6e67 436f 7079 4361 6c6c  (HaltingCopyCall
+0001f540: 6261 636b 4861 6e64 6c65 7228 5472 7565  backHandler(True
+0001f550: 2c20 3529 2929 0a0a 2020 2020 626f 746f  , 5)))..    boto
+0001f560: 5f63 6f6e 6669 675f 666f 725f 7465 7374  _config_for_test
+0001f570: 203d 2028 2747 5355 7469 6c27 2c20 2772   = ('GSUtil', 'r
+0001f580: 6573 756d 6162 6c65 5f74 6872 6573 686f  esumable_thresho
+0001f590: 6c64 272c 2073 7472 284f 4e45 5f4b 4942  ld', str(ONE_KIB
+0001f5a0: 2929 0a20 2020 2077 6974 6820 5365 7442  )).    with SetB
+0001f5b0: 6f74 6f43 6f6e 6669 6746 6f72 5465 7374  otoConfigForTest
+0001f5c0: 285b 626f 746f 5f63 6f6e 6669 675f 666f  ([boto_config_fo
+0001f5d0: 725f 7465 7374 5d29 3a0a 2020 2020 2020  r_test]):.      
+0001f5e0: 7374 6465 7272 203d 2073 656c 662e 5275  stderr = self.Ru
+0001f5f0: 6e47 7355 7469 6c28 5b0a 2020 2020 2020  nGsUtil([.      
+0001f600: 2020 2020 2763 7027 2c20 272d 2d74 6573      'cp', '--tes
+0001f610: 7463 616c 6c62 6163 6b66 696c 6527 2c20  tcallbackfile', 
+0001f620: 7465 7374 5f63 616c 6c62 6163 6b5f 6669  test_callback_fi
+0001f630: 6c65 2c20 6670 6174 682c 0a20 2020 2020  le, fpath,.     
+0001f640: 2020 2020 2073 7572 6928 6275 636b 6574       suri(bucket
+0001f650: 5f75 7269 290a 2020 2020 2020 5d2c 0a20  _uri).      ],. 
+0001f660: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001f670: 2020 2020 2020 2020 2020 2020 2065 7870               exp
+0001f680: 6563 7465 645f 7374 6174 7573 3d31 2c0a  ected_status=1,.
 0001f690: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f6a0: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0001f6b0: 5f73 7464 6f75 743d 5472 7565 290a 2020  _stdout=True).  
-0001f6c0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-0001f6d0: 7445 7175 616c 2872 6561 645f 636f 6e74  tEqual(read_cont
-0001f6e0: 656e 7473 2e65 6e63 6f64 6528 2761 7363  ents.encode('asc
-0001f6f0: 6969 2729 2c20 6669 6c65 5f63 6f6e 7465  ii'), file_conte
-0001f700: 6e74 7329 0a20 2020 2066 696e 616c 6c79  nts).    finally
-0001f710: 3a0a 2020 2020 2020 2320 436c 6561 6e20  :.      # Clean 
-0001f720: 7570 2069 6620 736f 6d65 7468 696e 6720  up if something 
-0001f730: 7765 6e74 2077 726f 6e67 2e0a 2020 2020  went wrong..    
-0001f740: 2020 4465 6c65 7465 5472 6163 6b65 7246    DeleteTrackerF
-0001f750: 696c 6528 7472 6163 6b65 725f 6669 6c65  ile(tracker_file
-0001f760: 5f6e 616d 6529 0a0a 2020 4053 6b69 7046  _name)..  @SkipF
-0001f770: 6f72 5333 2827 4e6f 2072 6573 756d 6162  orS3('No resumab
-0001f780: 6c65 2075 706c 6f61 6420 7375 7070 6f72  le upload suppor
-0001f790: 7420 666f 7220 5333 2e27 290a 2020 6465  t for S3.').  de
-0001f7a0: 6620 7465 7374 5f63 705f 636f 6d70 6f73  f test_cp_compos
-0001f7b0: 6974 655f 656e 6372 7970 7465 645f 7570  ite_encrypted_up
-0001f7c0: 6c6f 6164 5f72 6573 7461 7274 2873 656c  load_restart(sel
-0001f7d0: 6629 3a0a 2020 2020 2222 2254 6573 7473  f):.    """Tests
-0001f7e0: 2074 6861 7420 656e 6372 7970 7465 6420   that encrypted 
-0001f7f0: 636f 6d70 6f73 6974 6520 7570 6c6f 6164  composite upload
-0001f800: 2072 6573 7461 7274 7320 6769 7665 6e20   restarts given 
-0001f810: 6120 6469 6666 6572 656e 7420 6b65 792e  a different key.
-0001f820: 2222 220a 2020 2020 6966 2073 656c 662e  """.    if self.
-0001f830: 7465 7374 5f61 7069 203d 3d20 4170 6953  test_api == ApiS
-0001f840: 656c 6563 746f 722e 584d 4c3a 0a20 2020  elector.XML:.   
-0001f850: 2020 2072 6574 7572 6e20 756e 6974 7465     return unitte
-0001f860: 7374 2e73 6b69 7028 0a20 2020 2020 2020  st.skip(.       
-0001f870: 2020 2027 6773 7574 696c 2064 6f65 7320     'gsutil does 
-0001f880: 6e6f 7420 7375 7070 6f72 7420 656e 6372  not support encr
-0001f890: 7970 7469 6f6e 2077 6974 6820 7468 6520  yption with the 
-0001f8a0: 584d 4c20 4150 4927 290a 2020 2020 6275  XML API').    bu
-0001f8b0: 636b 6574 5f75 7269 203d 2073 656c 662e  cket_uri = self.
-0001f8c0: 4372 6561 7465 4275 636b 6574 2829 0a20  CreateBucket(). 
-0001f8d0: 2020 2064 7374 5f75 726c 203d 2053 746f     dst_url = Sto
-0001f8e0: 7261 6765 5572 6c46 726f 6d53 7472 696e  rageUrlFromStrin
-0001f8f0: 6728 7375 7269 2862 7563 6b65 745f 7572  g(suri(bucket_ur
-0001f900: 692c 2027 666f 6f27 2929 0a0a 2020 2020  i, 'foo'))..    
-0001f910: 6669 6c65 5f63 6f6e 7465 6e74 7320 3d20  file_contents = 
-0001f920: 6227 666f 6f62 6172 270a 2020 2020 736f  b'foobar'.    so
-0001f930: 7572 6365 5f66 696c 6520 3d20 7365 6c66  urce_file = self
-0001f940: 2e43 7265 6174 6554 656d 7046 696c 6528  .CreateTempFile(
-0001f950: 636f 6e74 656e 7473 3d66 696c 655f 636f  contents=file_co
-0001f960: 6e74 656e 7473 2c20 6669 6c65 5f6e 616d  ntents, file_nam
-0001f970: 653d 2766 6f6f 2729 0a20 2020 2073 7263  e='foo').    src
-0001f980: 5f75 726c 203d 2053 746f 7261 6765 5572  _url = StorageUr
-0001f990: 6c46 726f 6d53 7472 696e 6728 736f 7572  lFromString(sour
-0001f9a0: 6365 5f66 696c 6529 0a0a 2020 2020 2320  ce_file)..    # 
-0001f9b0: 5369 6d75 6c61 7465 2061 6e20 7570 6c6f  Simulate an uplo
-0001f9c0: 6164 2074 6861 7420 6861 6420 6f63 6375  ad that had occu
-0001f9d0: 7272 6564 2062 7920 7772 6974 696e 6720  rred by writing 
-0001f9e0: 6120 7472 6163 6b65 7220 6669 6c65 2e0a  a tracker file..
-0001f9f0: 2020 2020 7472 6163 6b65 725f 6669 6c65      tracker_file
-0001fa00: 5f6e 616d 6520 3d20 4765 7454 7261 636b  _name = GetTrack
-0001fa10: 6572 4669 6c65 5061 7468 2864 7374 5f75  erFilePath(dst_u
-0001fa20: 726c 2c0a 2020 2020 2020 2020 2020 2020  rl,.            
-0001fa30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fa40: 2020 2020 2020 2020 2020 2020 2020 2054                 T
-0001fa50: 7261 636b 6572 4669 6c65 5479 7065 2e50  rackerFileType.P
-0001fa60: 4152 414c 4c45 4c5f 5550 4c4f 4144 2c0a  ARALLEL_UPLOAD,.
-0001fa70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fa80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fa90: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0001faa0: 7465 7374 5f61 7069 2c20 7372 635f 7572  test_api, src_ur
-0001fab0: 6c29 0a20 2020 2074 7261 636b 6572 5f70  l).    tracker_p
-0001fac0: 7265 6669 7820 3d20 2731 3233 270a 2020  refix = '123'.  
-0001fad0: 2020 6578 6973 7469 6e67 5f63 6f6d 706f    existing_compo
-0001fae0: 6e65 6e74 5f6e 616d 6520 3d20 2766 6f6f  nent_name = 'foo
-0001faf0: 5f31 270a 2020 2020 6f62 6a65 6374 5f75  _1'.    object_u
-0001fb00: 7269 203d 2073 656c 662e 4372 6561 7465  ri = self.Create
-0001fb10: 4f62 6a65 6374 2862 7563 6b65 745f 7572  Object(bucket_ur
-0001fb20: 693d 6275 636b 6574 5f75 7269 2c0a 2020  i=bucket_uri,.  
-0001fb30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fb40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fb50: 206f 626a 6563 745f 6e61 6d65 3d27 666f   object_name='fo
-0001fb60: 6f5f 3127 2c0a 2020 2020 2020 2020 2020  o_1',.          
-0001fb70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fb80: 2020 2020 2020 2020 2063 6f6e 7465 6e74           content
-0001fb90: 733d 6227 666f 6f27 2c0a 2020 2020 2020  s=b'foo',.      
-0001fba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fbb0: 2020 2020 2020 2020 2020 2020 2065 6e63               enc
-0001fbc0: 7279 7074 696f 6e5f 6b65 793d 5445 5354  ryption_key=TEST
-0001fbd0: 5f45 4e43 5259 5054 494f 4e5f 4b45 5931  _ENCRYPTION_KEY1
-0001fbe0: 290a 2020 2020 6578 6973 7469 6e67 5f63  ).    existing_c
-0001fbf0: 6f6d 706f 6e65 6e74 203d 204f 626a 6563  omponent = Objec
-0001fc00: 7446 726f 6d54 7261 636b 6572 2865 7869  tFromTracker(exi
-0001fc10: 7374 696e 675f 636f 6d70 6f6e 656e 745f  sting_component_
-0001fc20: 6e61 6d65 2c0a 2020 2020 2020 2020 2020  name,.          
+0001f6a0: 2020 2020 2020 2020 2020 2020 2020 7265                re
+0001f6b0: 7475 726e 5f73 7464 6572 723d 5472 7565  turn_stderr=True
+0001f6c0: 290a 2020 2020 2020 7365 6c66 2e61 7373  ).      self.ass
+0001f6d0: 6572 7449 6e28 2741 7274 6966 6963 616c  ertIn('Artifical
+0001f6e0: 6c79 2068 616c 7469 6e67 2075 706c 6f61  ly halting uploa
+0001f6f0: 6427 2c20 7374 6465 7272 290a 2020 2020  d', stderr).    
+0001f700: 2020 6670 6174 6820 3d20 7365 6c66 2e43    fpath = self.C
+0001f710: 7265 6174 6554 656d 7046 696c 6528 6669  reateTempFile(fi
+0001f720: 6c65 5f6e 616d 653d 2766 6f6f 272c 0a20  le_name='foo',. 
+0001f730: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001f740: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001f750: 2074 6d70 6469 723d 746d 705f 6469 722c   tmpdir=tmp_dir,
+0001f760: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001f770: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001f780: 2020 2063 6f6e 7465 6e74 733d 6227 6127     contents=b'a'
+0001f790: 202a 2073 656c 662e 6861 6c74 5f73 697a   * self.halt_siz
+0001f7a0: 6520 2a20 3229 0a20 2020 2020 2073 7464  e * 2).      std
+0001f7b0: 6572 7220 3d20 7365 6c66 2e52 756e 4773  err = self.RunGs
+0001f7c0: 5574 696c 285b 2763 7027 2c20 6670 6174  Util(['cp', fpat
+0001f7d0: 682c 2073 7572 6928 6275 636b 6574 5f75  h, suri(bucket_u
+0001f7e0: 7269 295d 2c0a 2020 2020 2020 2020 2020  ri)],.          
+0001f7f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001f800: 2020 2020 6578 7065 6374 6564 5f73 7461      expected_sta
+0001f810: 7475 733d 312c 0a20 2020 2020 2020 2020  tus=1,.         
+0001f820: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001f830: 2020 2020 2072 6574 7572 6e5f 7374 6465       return_stde
+0001f840: 7272 3d54 7275 6529 0a20 2020 2020 2073  rr=True).      s
+0001f850: 656c 662e 6173 7365 7274 496e 2827 5265  elf.assertIn('Re
+0001f860: 7375 6d61 626c 6555 706c 6f61 6441 626f  sumableUploadAbo
+0001f870: 7274 4578 6365 7074 696f 6e27 2c20 7374  rtException', st
+0001f880: 6465 7272 290a 0a20 2040 536b 6970 466f  derr)..  @SkipFo
+0001f890: 7253 3328 274e 6f20 7265 7375 6d61 626c  rS3('No resumabl
+0001f8a0: 6520 7570 6c6f 6164 2073 7570 706f 7274  e upload support
+0001f8b0: 2066 6f72 2053 332e 2729 0a20 2064 6566   for S3.').  def
+0001f8c0: 2074 6573 745f 6370 5f72 6573 756d 6162   test_cp_resumab
+0001f8d0: 6c65 5f75 706c 6f61 645f 6272 6561 6b5f  le_upload_break_
+0001f8e0: 6669 6c65 5f63 6f6e 7465 6e74 5f63 6861  file_content_cha
+0001f8f0: 6e67 6528 7365 6c66 293a 0a20 2020 2022  nge(self):.    "
+0001f900: 2222 5465 7374 7320 6120 7265 7375 6d61  ""Tests a resuma
+0001f910: 626c 6520 7570 6c6f 6164 2077 6865 7265  ble upload where
+0001f920: 2074 6865 2075 706c 6f61 6465 6420 6669   the uploaded fi
+0001f930: 6c65 2063 6861 6e67 6573 2063 6f6e 7465  le changes conte
+0001f940: 6e74 2e22 2222 0a20 2020 2069 6620 7365  nt.""".    if se
+0001f950: 6c66 2e74 6573 745f 6170 6920 3d3d 2041  lf.test_api == A
+0001f960: 7069 5365 6c65 6374 6f72 2e58 4d4c 3a0a  piSelector.XML:.
+0001f970: 2020 2020 2020 7265 7475 726e 2075 6e69        return uni
+0001f980: 7474 6573 742e 736b 6970 280a 2020 2020  ttest.skip(.    
+0001f990: 2020 2020 2020 2758 4d4c 2064 6f65 736e        'XML doesn
+0001f9a0: 5c27 7420 6d61 6b65 2073 6570 6172 6174  \'t make separat
+0001f9b0: 6520 4854 5450 2063 616c 6c73 2061 7420  e HTTP calls at 
+0001f9c0: 6669 7865 642d 7369 7a65 2062 6f75 6e64  fixed-size bound
+0001f9d0: 6172 6965 7320 666f 7220 270a 2020 2020  aries for '.    
+0001f9e0: 2020 2020 2020 2772 6573 756d 6162 6c65        'resumable
+0001f9f0: 2075 706c 6f61 6473 2c20 736f 2077 6520   uploads, so we 
+0001fa00: 6361 6e5c 2774 2067 7561 7261 6e74 6565  can\'t guarantee
+0001fa10: 2074 6861 7420 7468 6520 7365 7276 6572   that the server
+0001fa20: 2073 6176 6573 2061 2027 0a20 2020 2020   saves a '.     
+0001fa30: 2020 2020 2027 7370 6563 6966 6963 2070       'specific p
+0001fa40: 6172 7420 6f66 2074 6865 2075 706c 6f61  art of the uploa
+0001fa50: 642e 2729 0a20 2020 2062 7563 6b65 745f  d.').    bucket_
+0001fa60: 7572 6920 3d20 7365 6c66 2e43 7265 6174  uri = self.Creat
+0001fa70: 6542 7563 6b65 7428 290a 2020 2020 746d  eBucket().    tm
+0001fa80: 705f 6469 7220 3d20 7365 6c66 2e43 7265  p_dir = self.Cre
+0001fa90: 6174 6554 656d 7044 6972 2829 0a20 2020  ateTempDir().   
+0001faa0: 2066 7061 7468 203d 2073 656c 662e 4372   fpath = self.Cr
+0001fab0: 6561 7465 5465 6d70 4669 6c65 2866 696c  eateTempFile(fil
+0001fac0: 655f 6e61 6d65 3d27 666f 6f27 2c0a 2020  e_name='foo',.  
+0001fad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fae0: 2020 2020 2020 2020 2020 2020 2020 746d                tm
+0001faf0: 7064 6972 3d74 6d70 5f64 6972 2c0a 2020  pdir=tmp_dir,.  
+0001fb00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fb10: 2020 2020 2020 2020 2020 2020 2020 636f                co
+0001fb20: 6e74 656e 7473 3d62 2761 2720 2a20 4f4e  ntents=b'a' * ON
+0001fb30: 455f 4b49 4220 2a20 4f4e 455f 4b49 4229  E_KIB * ONE_KIB)
+0001fb40: 0a20 2020 2074 6573 745f 6361 6c6c 6261  .    test_callba
+0001fb50: 636b 5f66 696c 6520 3d20 7365 6c66 2e43  ck_file = self.C
+0001fb60: 7265 6174 6554 656d 7046 696c 6528 636f  reateTempFile(co
+0001fb70: 6e74 656e 7473 3d70 6963 6b6c 652e 6475  ntents=pickle.du
+0001fb80: 6d70 7328 0a20 2020 2020 2020 2048 616c  mps(.        Hal
+0001fb90: 7469 6e67 436f 7079 4361 6c6c 6261 636b  tingCopyCallback
+0001fba0: 4861 6e64 6c65 7228 5472 7565 2c0a 2020  Handler(True,.  
+0001fbb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fbc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fbd0: 2069 6e74 284f 4e45 5f4b 4942 2920 2a20   int(ONE_KIB) * 
+0001fbe0: 3531 3229 2929 0a20 2020 2072 6573 756d  512))).    resum
+0001fbf0: 6162 6c65 5f74 6872 6573 686f 6c64 5f66  able_threshold_f
+0001fc00: 6f72 5f74 6573 7420 3d20 2827 4753 5574  or_test = ('GSUt
+0001fc10: 696c 272c 2027 7265 7375 6d61 626c 655f  il', 'resumable_
+0001fc20: 7468 7265 7368 6f6c 6427 2c0a 2020 2020  threshold',.    
 0001fc30: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0001fc40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fc50: 2073 7472 286f 626a 6563 745f 7572 692e   str(object_uri.
-0001fc60: 6765 6e65 7261 7469 6f6e 2929 0a20 2020  generation)).   
-0001fc70: 2065 7869 7374 696e 675f 636f 6d70 6f6e   existing_compon
-0001fc80: 656e 7473 203d 205b 6578 6973 7469 6e67  ents = [existing
-0001fc90: 5f63 6f6d 706f 6e65 6e74 5d0a 2020 2020  _component].    
-0001fca0: 656e 635f 6b65 795f 7368 6132 3536 203d  enc_key_sha256 =
-0001fcb0: 2054 4553 545f 454e 4352 5950 5449 4f4e   TEST_ENCRYPTION
-0001fcc0: 5f4b 4559 315f 5348 4132 3536 5f42 3634  _KEY1_SHA256_B64
-0001fcd0: 0a20 2020 2057 7269 7465 5061 7261 6c6c  .    WriteParall
-0001fce0: 656c 5570 6c6f 6164 5472 6163 6b65 7246  elUploadTrackerF
-0001fcf0: 696c 6528 7472 6163 6b65 725f 6669 6c65  ile(tracker_file
-0001fd00: 5f6e 616d 652c 2074 7261 636b 6572 5f70  _name, tracker_p
-0001fd10: 7265 6669 782c 0a20 2020 2020 2020 2020  refix,.         
-0001fd20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fd30: 2020 2020 2020 2020 2020 6578 6973 7469            existi
-0001fd40: 6e67 5f63 6f6d 706f 6e65 6e74 732c 0a20  ng_components,. 
-0001fd50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fd60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fd70: 2020 656e 635f 6b65 795f 7368 6132 3536    enc_key_sha256
-0001fd80: 2e64 6563 6f64 6528 2761 7363 6969 2729  .decode('ascii')
-0001fd90: 290a 0a20 2020 2074 7279 3a0a 2020 2020  )..    try:.    
-0001fda0: 2020 2320 4e6f 7720 2272 6573 756d 6522    # Now "resume"
-0001fdb0: 2074 6865 2075 706c 6f61 6420 7573 696e   the upload usin
-0001fdc0: 6720 7468 6520 6f72 6967 696e 616c 2065  g the original e
-0001fdd0: 6e63 7279 7074 696f 6e20 6b65 792e 0a20  ncryption key.. 
-0001fde0: 2020 2020 2077 6974 6820 5365 7442 6f74       with SetBot
-0001fdf0: 6f43 6f6e 6669 6746 6f72 5465 7374 285b  oConfigForTest([
-0001fe00: 0a20 2020 2020 2020 2020 2028 2747 5355  .          ('GSU
-0001fe10: 7469 6c27 2c20 2770 6172 616c 6c65 6c5f  til', 'parallel_
-0001fe20: 636f 6d70 6f73 6974 655f 7570 6c6f 6164  composite_upload
-0001fe30: 5f74 6872 6573 686f 6c64 272c 2027 3127  _threshold', '1'
-0001fe40: 292c 0a20 2020 2020 2020 2020 2028 2747  ),.          ('G
-0001fe50: 5355 7469 6c27 2c20 2770 6172 616c 6c65  SUtil', 'paralle
-0001fe60: 6c5f 636f 6d70 6f73 6974 655f 7570 6c6f  l_composite_uplo
-0001fe70: 6164 5f63 6f6d 706f 6e65 6e74 5f73 697a  ad_component_siz
-0001fe80: 6527 2c20 2733 2729 2c0a 2020 2020 2020  e', '3'),.      
-0001fe90: 2020 2020 2827 4753 5574 696c 272c 2027      ('GSUtil', '
-0001fea0: 656e 6372 7970 7469 6f6e 5f6b 6579 272c  encryption_key',
-0001feb0: 2054 4553 545f 454e 4352 5950 5449 4f4e   TEST_ENCRYPTION
-0001fec0: 5f4b 4559 3229 0a20 2020 2020 205d 293a  _KEY2).      ]):
-0001fed0: 0a20 2020 2020 2020 2073 7464 6572 7220  .        stderr 
-0001fee0: 3d20 7365 6c66 2e52 756e 4773 5574 696c  = self.RunGsUtil
-0001fef0: 280a 2020 2020 2020 2020 2020 2020 5b27  (.            ['
-0001ff00: 6370 272c 2073 6f75 7263 655f 6669 6c65  cp', source_file
-0001ff10: 2c20 7375 7269 2862 7563 6b65 745f 7572  , suri(bucket_ur
-0001ff20: 692c 2027 666f 6f27 295d 2c20 7265 7475  i, 'foo')], retu
-0001ff30: 726e 5f73 7464 6572 723d 5472 7565 290a  rn_stderr=True).
-0001ff40: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-0001ff50: 6572 7449 6e28 0a20 2020 2020 2020 2020  ertIn(.         
-0001ff60: 2020 2027 646f 6573 206e 6f74 206d 6174     'does not mat
-0001ff70: 6368 2063 7572 7265 6e74 2065 6e63 7279  ch current encry
-0001ff80: 7074 696f 6e20 6b65 792e 2027 0a20 2020  ption key. '.   
-0001ff90: 2020 2020 2020 2020 2027 4465 6c65 7469           'Deleti
-0001ffa0: 6e67 206f 6c64 2063 6f6d 706f 6e65 6e74  ng old component
-0001ffb0: 7320 616e 6420 7265 7374 6172 7469 6e67  s and restarting
-0001ffc0: 2075 706c 6f61 6427 2c20 7374 6465 7272   upload', stderr
-0001ffd0: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
-0001ffe0: 7373 6572 744e 6f74 496e 2827 6578 6973  ssertNotIn('exis
-0001fff0: 7469 6e67 2074 656d 706f 7261 7279 2063  ting temporary c
-00020000: 6f6d 706f 6e65 6e74 7320 746f 2072 6575  omponents to reu
-00020010: 7365 2e27 2c20 7374 6465 7272 290a 2020  se.', stderr).  
-00020020: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-00020030: 7446 616c 7365 280a 2020 2020 2020 2020  tFalse(.        
-00020040: 2020 2020 6f73 2e70 6174 682e 6578 6973      os.path.exis
-00020050: 7473 2874 7261 636b 6572 5f66 696c 655f  ts(tracker_file_
-00020060: 6e61 6d65 292c 0a20 2020 2020 2020 2020  name),.         
-00020070: 2020 2027 5472 6163 6b65 7220 6669 6c65     'Tracker file
-00020080: 2025 7320 7368 6f75 6c64 2068 6176 6520   %s should have 
-00020090: 6265 656e 2064 656c 6574 6564 2e27 2025  been deleted.' %
-000200a0: 2074 7261 636b 6572 5f66 696c 655f 6e61   tracker_file_na
-000200b0: 6d65 290a 2020 2020 2020 2020 7265 6164  me).        read
-000200c0: 5f63 6f6e 7465 6e74 7320 3d20 7365 6c66  _contents = self
-000200d0: 2e52 756e 4773 5574 696c 285b 2763 6174  .RunGsUtil(['cat
-000200e0: 272c 2073 7572 6928 6275 636b 6574 5f75  ', suri(bucket_u
-000200f0: 7269 2c20 2766 6f6f 2729 5d2c 0a20 2020  ri, 'foo')],.   
-00020100: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020110: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020120: 2020 2020 7265 7475 726e 5f73 7464 6f75      return_stdou
-00020130: 743d 5472 7565 290a 2020 2020 2020 2020  t=True).        
-00020140: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-00020150: 2872 6561 645f 636f 6e74 656e 7473 2e65  (read_contents.e
-00020160: 6e63 6f64 6528 2761 7363 6969 2729 2c20  ncode('ascii'), 
-00020170: 6669 6c65 5f63 6f6e 7465 6e74 7329 0a20  file_contents). 
-00020180: 2020 2066 696e 616c 6c79 3a0a 2020 2020     finally:.    
-00020190: 2020 2320 436c 6561 6e20 7570 2069 6620    # Clean up if 
-000201a0: 736f 6d65 7468 696e 6720 7765 6e74 2077  something went w
-000201b0: 726f 6e67 2e0a 2020 2020 2020 4465 6c65  rong..      Dele
-000201c0: 7465 5472 6163 6b65 7246 696c 6528 7472  teTrackerFile(tr
-000201d0: 6163 6b65 725f 6669 6c65 5f6e 616d 6529  acker_file_name)
-000201e0: 0a0a 2020 4053 6b69 7046 6f72 5333 2827  ..  @SkipForS3('
-000201f0: 5465 7374 2075 7365 7320 6773 2d73 7065  Test uses gs-spe
-00020200: 6369 6669 6320 4b4d 5320 656e 6372 7970  cific KMS encryp
-00020210: 7469 6f6e 2729 0a20 2064 6566 2074 6573  tion').  def tes
-00020220: 745f 6b6d 735f 6b65 795f 636f 7272 6563  t_kms_key_correc
-00020230: 746c 795f 6170 706c 6965 645f 746f 5f63  tly_applied_to_c
-00020240: 6f6d 706f 7369 7465 5f75 706c 6f61 6428  omposite_upload(
-00020250: 7365 6c66 293a 0a20 2020 2062 7563 6b65  self):.    bucke
-00020260: 745f 7572 6920 3d20 7365 6c66 2e43 7265  t_uri = self.Cre
-00020270: 6174 6542 7563 6b65 7428 290a 2020 2020  ateBucket().    
-00020280: 6670 6174 6820 3d20 7365 6c66 2e43 7265  fpath = self.Cre
-00020290: 6174 6554 656d 7046 696c 6528 636f 6e74  ateTempFile(cont
-000202a0: 656e 7473 3d62 2761 6263 6427 290a 2020  ents=b'abcd').  
-000202b0: 2020 6f62 6a5f 7375 7269 203d 2073 7572    obj_suri = sur
-000202c0: 6928 6275 636b 6574 5f75 7269 2c20 2763  i(bucket_uri, 'c
-000202d0: 6f6d 706f 7365 6427 290a 2020 2020 6b65  omposed').    ke
-000202e0: 795f 6671 6e20 3d20 7365 6c66 2e61 7574  y_fqn = self.aut
-000202f0: 686f 7269 7a65 5f70 726f 6a65 6374 5f74  horize_project_t
-00020300: 6f5f 7573 655f 7465 7374 696e 675f 6b6d  o_use_testing_km
-00020310: 735f 6b65 7928 290a 0a20 2020 2077 6974  s_key()..    wit
-00020320: 6820 5365 7442 6f74 6f43 6f6e 6669 6746  h SetBotoConfigF
-00020330: 6f72 5465 7374 285b 0a20 2020 2020 2020  orTest([.       
-00020340: 2028 2747 5355 7469 6c27 2c20 2765 6e63   ('GSUtil', 'enc
-00020350: 7279 7074 696f 6e5f 6b65 7927 2c20 6b65  ryption_key', ke
-00020360: 795f 6671 6e29 2c0a 2020 2020 2020 2020  y_fqn),.        
-00020370: 2827 4753 5574 696c 272c 2027 7061 7261  ('GSUtil', 'para
-00020380: 6c6c 656c 5f63 6f6d 706f 7369 7465 5f75  llel_composite_u
-00020390: 706c 6f61 645f 7468 7265 7368 6f6c 6427  pload_threshold'
-000203a0: 2c20 2731 2729 2c0a 2020 2020 2020 2020  , '1'),.        
-000203b0: 2827 4753 5574 696c 272c 2027 7061 7261  ('GSUtil', 'para
-000203c0: 6c6c 656c 5f63 6f6d 706f 7369 7465 5f75  llel_composite_u
-000203d0: 706c 6f61 645f 636f 6d70 6f6e 656e 745f  pload_component_
-000203e0: 7369 7a65 272c 2027 3127 290a 2020 2020  size', '1').    
-000203f0: 5d29 3a0a 2020 2020 2020 7365 6c66 2e52  ]):.      self.R
-00020400: 756e 4773 5574 696c 285b 2763 7027 2c20  unGsUtil(['cp', 
-00020410: 6670 6174 682c 206f 626a 5f73 7572 695d  fpath, obj_suri]
-00020420: 290a 0a20 2020 2077 6974 6820 5365 7442  )..    with SetB
-00020430: 6f74 6f43 6f6e 6669 6746 6f72 5465 7374  otoConfigForTest
-00020440: 285b 2827 4753 5574 696c 272c 2027 7072  ([('GSUtil', 'pr
-00020450: 6566 6572 5f61 7069 272c 2027 6a73 6f6e  efer_api', 'json
-00020460: 2729 5d29 3a0a 2020 2020 2020 7365 6c66  ')]):.      self
-00020470: 2e41 7373 6572 744f 626a 6563 7455 7365  .AssertObjectUse
-00020480: 7343 4d45 4b28 6f62 6a5f 7375 7269 2c20  sCMEK(obj_suri, 
-00020490: 6b65 795f 6671 6e29 0a0a 2020 2320 5468  key_fqn)..  # Th
-000204a0: 6973 2074 656d 706f 7261 7269 6c79 2063  is temporarily c
-000204b0: 6861 6e67 6573 2074 6865 2074 7261 636b  hanges the track
-000204c0: 6572 2064 6972 6563 746f 7279 2074 6f20  er directory to 
-000204d0: 756e 7772 6974 6162 6c65 2077 6869 6368  unwritable which
-000204e0: 0a20 2023 2069 6e74 6572 6665 7265 7320  .  # interferes 
-000204f0: 7769 7468 2061 6e79 2070 6172 616c 6c65  with any paralle
-00020500: 6c20 7275 6e6e 696e 6720 7465 7374 7320  l running tests 
-00020510: 7468 6174 2075 7365 2074 6865 2074 7261  that use the tra
-00020520: 636b 6572 2064 6972 6563 746f 7279 2e0a  cker directory..
-00020530: 2020 404e 6f74 5061 7261 6c6c 656c 697a    @NotParalleliz
-00020540: 6162 6c65 0a20 2040 536b 6970 466f 7253  able.  @SkipForS
-00020550: 3328 274e 6f20 7265 7375 6d61 626c 6520  3('No resumable 
-00020560: 7570 6c6f 6164 2073 7570 706f 7274 2066  upload support f
-00020570: 6f72 2053 332e 2729 0a20 2040 756e 6974  or S3.').  @unit
-00020580: 7465 7374 2e73 6b69 7049 6628 4953 5f57  test.skipIf(IS_W
-00020590: 494e 444f 5753 2c20 2763 686d 6f64 206f  INDOWS, 'chmod o
-000205a0: 6e20 6469 7220 756e 7375 7070 6f72 7465  n dir unsupporte
-000205b0: 6420 6f6e 2057 696e 646f 7773 2e27 290a  d on Windows.').
-000205c0: 2020 4053 6571 7565 6e74 6961 6c41 6e64    @SequentialAnd
-000205d0: 5061 7261 6c6c 656c 5472 616e 7366 6572  ParallelTransfer
-000205e0: 0a20 2064 6566 2074 6573 745f 6370 5f75  .  def test_cp_u
-000205f0: 6e77 7269 7461 626c 655f 7472 6163 6b65  nwritable_tracke
-00020600: 725f 6669 6c65 2873 656c 6629 3a0a 2020  r_file(self):.  
-00020610: 2020 2222 2254 6573 7473 2061 2072 6573    """Tests a res
-00020620: 756d 6162 6c65 2075 706c 6f61 6420 7769  umable upload wi
-00020630: 7468 2061 6e20 756e 7772 6974 6162 6c65  th an unwritable
-00020640: 2074 7261 636b 6572 2066 696c 652e 2222   tracker file.""
-00020650: 220a 2020 2020 6275 636b 6574 5f75 7269  ".    bucket_uri
-00020660: 203d 2073 656c 662e 4372 6561 7465 4275   = self.CreateBu
-00020670: 636b 6574 2829 0a20 2020 2074 7261 636b  cket().    track
-00020680: 6572 5f66 696c 656e 616d 6520 3d20 4765  er_filename = Ge
-00020690: 7454 7261 636b 6572 4669 6c65 5061 7468  tTrackerFilePath
-000206a0: 280a 2020 2020 2020 2020 5374 6f72 6167  (.        Storag
-000206b0: 6555 726c 4672 6f6d 5374 7269 6e67 2873  eUrlFromString(s
-000206c0: 7572 6928 6275 636b 6574 5f75 7269 2c20  uri(bucket_uri, 
-000206d0: 2766 6f6f 2729 292c 2054 7261 636b 6572  'foo')), Tracker
-000206e0: 4669 6c65 5479 7065 2e55 504c 4f41 442c  FileType.UPLOAD,
-000206f0: 0a20 2020 2020 2020 2073 656c 662e 7465  .        self.te
-00020700: 7374 5f61 7069 290a 2020 2020 7472 6163  st_api).    trac
-00020710: 6b65 725f 6469 7220 3d20 6f73 2e70 6174  ker_dir = os.pat
-00020720: 682e 6469 726e 616d 6528 7472 6163 6b65  h.dirname(tracke
-00020730: 725f 6669 6c65 6e61 6d65 290a 2020 2020  r_filename).    
-00020740: 6670 6174 6820 3d20 7365 6c66 2e43 7265  fpath = self.Cre
-00020750: 6174 6554 656d 7046 696c 6528 6669 6c65  ateTempFile(file
-00020760: 5f6e 616d 653d 2766 6f6f 272c 2063 6f6e  _name='foo', con
-00020770: 7465 6e74 733d 6227 6127 202a 204f 4e45  tents=b'a' * ONE
-00020780: 5f4b 4942 290a 2020 2020 626f 746f 5f63  _KIB).    boto_c
-00020790: 6f6e 6669 675f 666f 725f 7465 7374 203d  onfig_for_test =
-000207a0: 2028 2747 5355 7469 6c27 2c20 2772 6573   ('GSUtil', 'res
-000207b0: 756d 6162 6c65 5f74 6872 6573 686f 6c64  umable_threshold
-000207c0: 272c 2073 7472 284f 4e45 5f4b 4942 2929  ', str(ONE_KIB))
-000207d0: 0a20 2020 2073 6176 655f 6d6f 6420 3d20  .    save_mod = 
-000207e0: 6f73 2e73 7461 7428 7472 6163 6b65 725f  os.stat(tracker_
-000207f0: 6469 7229 2e73 745f 6d6f 6465 0a0a 2020  dir).st_mode..  
-00020800: 2020 7472 793a 0a20 2020 2020 206f 732e    try:.      os.
-00020810: 6368 6d6f 6428 7472 6163 6b65 725f 6469  chmod(tracker_di
-00020820: 722c 2030 290a 2020 2020 2020 7769 7468  r, 0).      with
-00020830: 2053 6574 426f 746f 436f 6e66 6967 466f   SetBotoConfigFo
-00020840: 7254 6573 7428 5b62 6f74 6f5f 636f 6e66  rTest([boto_conf
-00020850: 6967 5f66 6f72 5f74 6573 745d 293a 0a20  ig_for_test]):. 
-00020860: 2020 2020 2020 2073 7464 6572 7220 3d20         stderr = 
-00020870: 7365 6c66 2e52 756e 4773 5574 696c 285b  self.RunGsUtil([
-00020880: 2763 7027 2c20 6670 6174 682c 2073 7572  'cp', fpath, sur
-00020890: 6928 6275 636b 6574 5f75 7269 295d 2c0a  i(bucket_uri)],.
+0001fc50: 7374 7228 4f4e 455f 4b49 4229 290a 2020  str(ONE_KIB)).  
+0001fc60: 2020 7265 7375 6d61 626c 655f 6368 756e    resumable_chun
+0001fc70: 6b5f 7369 7a65 5f66 6f72 5f74 6573 7420  k_size_for_test 
+0001fc80: 3d20 2827 4753 5574 696c 272c 2027 6a73  = ('GSUtil', 'js
+0001fc90: 6f6e 5f72 6573 756d 6162 6c65 5f63 6875  on_resumable_chu
+0001fca0: 6e6b 5f73 697a 6527 2c0a 2020 2020 2020  nk_size',.      
+0001fcb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fcc0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0001fcd0: 7472 284f 4e45 5f4b 4942 202a 2032 3536  tr(ONE_KIB * 256
+0001fce0: 2929 0a20 2020 2077 6974 6820 5365 7442  )).    with SetB
+0001fcf0: 6f74 6f43 6f6e 6669 6746 6f72 5465 7374  otoConfigForTest
+0001fd00: 280a 2020 2020 2020 2020 5b72 6573 756d  (.        [resum
+0001fd10: 6162 6c65 5f74 6872 6573 686f 6c64 5f66  able_threshold_f
+0001fd20: 6f72 5f74 6573 742c 2072 6573 756d 6162  or_test, resumab
+0001fd30: 6c65 5f63 6875 6e6b 5f73 697a 655f 666f  le_chunk_size_fo
+0001fd40: 725f 7465 7374 5d29 3a0a 2020 2020 2020  r_test]):.      
+0001fd50: 7374 6465 7272 203d 2073 656c 662e 5275  stderr = self.Ru
+0001fd60: 6e47 7355 7469 6c28 5b0a 2020 2020 2020  nGsUtil([.      
+0001fd70: 2020 2020 2763 7027 2c20 272d 2d74 6573      'cp', '--tes
+0001fd80: 7463 616c 6c62 6163 6b66 696c 6527 2c20  tcallbackfile', 
+0001fd90: 7465 7374 5f63 616c 6c62 6163 6b5f 6669  test_callback_fi
+0001fda0: 6c65 2c20 6670 6174 682c 0a20 2020 2020  le, fpath,.     
+0001fdb0: 2020 2020 2073 7572 6928 6275 636b 6574       suri(bucket
+0001fdc0: 5f75 7269 290a 2020 2020 2020 5d2c 0a20  _uri).      ],. 
+0001fdd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fde0: 2020 2020 2020 2020 2020 2020 2065 7870               exp
+0001fdf0: 6563 7465 645f 7374 6174 7573 3d31 2c0a  ected_status=1,.
+0001fe00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fe10: 2020 2020 2020 2020 2020 2020 2020 7265                re
+0001fe20: 7475 726e 5f73 7464 6572 723d 5472 7565  turn_stderr=True
+0001fe30: 290a 2020 2020 2020 7365 6c66 2e61 7373  ).      self.ass
+0001fe40: 6572 7449 6e28 2741 7274 6966 6963 616c  ertIn('Artifical
+0001fe50: 6c79 2068 616c 7469 6e67 2075 706c 6f61  ly halting uploa
+0001fe60: 6427 2c20 7374 6465 7272 290a 2020 2020  d', stderr).    
+0001fe70: 2020 6670 6174 6820 3d20 7365 6c66 2e43    fpath = self.C
+0001fe80: 7265 6174 6554 656d 7046 696c 6528 6669  reateTempFile(fi
+0001fe90: 6c65 5f6e 616d 653d 2766 6f6f 272c 0a20  le_name='foo',. 
+0001fea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001feb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fec0: 2074 6d70 6469 723d 746d 705f 6469 722c   tmpdir=tmp_dir,
+0001fed0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001fee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fef0: 2020 2063 6f6e 7465 6e74 733d 6227 6227     contents=b'b'
+0001ff00: 202a 204f 4e45 5f4b 4942 202a 204f 4e45   * ONE_KIB * ONE
+0001ff10: 5f4b 4942 290a 2020 2020 2020 7374 6465  _KIB).      stde
+0001ff20: 7272 203d 2073 656c 662e 5275 6e47 7355  rr = self.RunGsU
+0001ff30: 7469 6c28 5b27 6370 272c 2066 7061 7468  til(['cp', fpath
+0001ff40: 2c20 7375 7269 2862 7563 6b65 745f 7572  , suri(bucket_ur
+0001ff50: 6929 5d2c 0a20 2020 2020 2020 2020 2020  i)],.           
+0001ff60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ff70: 2020 2065 7870 6563 7465 645f 7374 6174     expected_stat
+0001ff80: 7573 3d31 2c0a 2020 2020 2020 2020 2020  us=1,.          
+0001ff90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ffa0: 2020 2020 7265 7475 726e 5f73 7464 6572      return_stder
+0001ffb0: 723d 5472 7565 290a 2020 2020 2020 7365  r=True).      se
+0001ffc0: 6c66 2e61 7373 6572 7449 6e28 2764 6f65  lf.assertIn('doe
+0001ffd0: 736e 5c27 7420 6d61 7463 6820 636c 6f75  sn\'t match clou
+0001ffe0: 642d 7375 7070 6c69 6564 2064 6967 6573  d-supplied diges
+0001fff0: 7427 2c20 7374 6465 7272 290a 0a20 2040  t', stderr)..  @
+00020000: 536b 6970 466f 7253 3328 274e 6f20 7265  SkipForS3('No re
+00020010: 7375 6d61 626c 6520 7570 6c6f 6164 2073  sumable upload s
+00020020: 7570 706f 7274 2066 6f72 2053 332e 2729  upport for S3.')
+00020030: 0a20 2064 6566 2074 6573 745f 6370 5f72  .  def test_cp_r
+00020040: 6573 756d 6162 6c65 5f75 706c 6f61 645f  esumable_upload_
+00020050: 6272 6561 6b5f 6669 6c65 5f73 6d61 6c6c  break_file_small
+00020060: 6572 5f73 697a 6528 7365 6c66 293a 0a20  er_size(self):. 
+00020070: 2020 2022 2222 5465 7374 7320 6120 7265     """Tests a re
+00020080: 7375 6d61 626c 6520 7570 6c6f 6164 2077  sumable upload w
+00020090: 6865 7265 2074 6865 2075 706c 6f61 6465  here the uploade
+000200a0: 6420 6669 6c65 2063 6861 6e67 6573 2063  d file changes c
+000200b0: 6f6e 7465 6e74 2e0a 0a20 2020 2054 6869  ontent...    Thi
+000200c0: 7320 7368 6f75 6c64 2066 6169 6c20 6861  s should fail ha
+000200d0: 7368 2076 616c 6964 6174 696f 6e2e 0a20  sh validation.. 
+000200e0: 2020 2022 2222 0a20 2020 2062 7563 6b65     """.    bucke
+000200f0: 745f 7572 6920 3d20 7365 6c66 2e43 7265  t_uri = self.Cre
+00020100: 6174 6542 7563 6b65 7428 290a 2020 2020  ateBucket().    
+00020110: 746d 705f 6469 7220 3d20 7365 6c66 2e43  tmp_dir = self.C
+00020120: 7265 6174 6554 656d 7044 6972 2829 0a20  reateTempDir(). 
+00020130: 2020 2066 7061 7468 203d 2073 656c 662e     fpath = self.
+00020140: 4372 6561 7465 5465 6d70 4669 6c65 2866  CreateTempFile(f
+00020150: 696c 655f 6e61 6d65 3d27 666f 6f27 2c0a  ile_name='foo',.
+00020160: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020170: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020180: 746d 7064 6972 3d74 6d70 5f64 6972 2c0a  tmpdir=tmp_dir,.
+00020190: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000201a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000201b0: 636f 6e74 656e 7473 3d62 2761 2720 2a20  contents=b'a' * 
+000201c0: 4f4e 455f 4b49 4220 2a20 4f4e 455f 4b49  ONE_KIB * ONE_KI
+000201d0: 4229 0a20 2020 2074 6573 745f 6361 6c6c  B).    test_call
+000201e0: 6261 636b 5f66 696c 6520 3d20 7365 6c66  back_file = self
+000201f0: 2e43 7265 6174 6554 656d 7046 696c 6528  .CreateTempFile(
+00020200: 636f 6e74 656e 7473 3d70 6963 6b6c 652e  contents=pickle.
+00020210: 6475 6d70 7328 0a20 2020 2020 2020 2048  dumps(.        H
+00020220: 616c 7469 6e67 436f 7079 4361 6c6c 6261  altingCopyCallba
+00020230: 636b 4861 6e64 6c65 7228 5472 7565 2c0a  ckHandler(True,.
+00020240: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020250: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020260: 2020 2069 6e74 284f 4e45 5f4b 4942 2920     int(ONE_KIB) 
+00020270: 2a20 3531 3229 2929 0a20 2020 2072 6573  * 512))).    res
+00020280: 756d 6162 6c65 5f74 6872 6573 686f 6c64  umable_threshold
+00020290: 5f66 6f72 5f74 6573 7420 3d20 2827 4753  _for_test = ('GS
+000202a0: 5574 696c 272c 2027 7265 7375 6d61 626c  Util', 'resumabl
+000202b0: 655f 7468 7265 7368 6f6c 6427 2c0a 2020  e_threshold',.  
+000202c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000202d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000202e0: 2020 7374 7228 4f4e 455f 4b49 4229 290a    str(ONE_KIB)).
+000202f0: 2020 2020 7265 7375 6d61 626c 655f 6368      resumable_ch
+00020300: 756e 6b5f 7369 7a65 5f66 6f72 5f74 6573  unk_size_for_tes
+00020310: 7420 3d20 2827 4753 5574 696c 272c 2027  t = ('GSUtil', '
+00020320: 6a73 6f6e 5f72 6573 756d 6162 6c65 5f63  json_resumable_c
+00020330: 6875 6e6b 5f73 697a 6527 2c0a 2020 2020  hunk_size',.    
+00020340: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020350: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020360: 2073 7472 284f 4e45 5f4b 4942 202a 2032   str(ONE_KIB * 2
+00020370: 3536 2929 0a20 2020 2077 6974 6820 5365  56)).    with Se
+00020380: 7442 6f74 6f43 6f6e 6669 6746 6f72 5465  tBotoConfigForTe
+00020390: 7374 280a 2020 2020 2020 2020 5b72 6573  st(.        [res
+000203a0: 756d 6162 6c65 5f74 6872 6573 686f 6c64  umable_threshold
+000203b0: 5f66 6f72 5f74 6573 742c 2072 6573 756d  _for_test, resum
+000203c0: 6162 6c65 5f63 6875 6e6b 5f73 697a 655f  able_chunk_size_
+000203d0: 666f 725f 7465 7374 5d29 3a0a 2020 2020  for_test]):.    
+000203e0: 2020 7374 6465 7272 203d 2073 656c 662e    stderr = self.
+000203f0: 5275 6e47 7355 7469 6c28 5b0a 2020 2020  RunGsUtil([.    
+00020400: 2020 2020 2020 2763 7027 2c20 272d 2d74        'cp', '--t
+00020410: 6573 7463 616c 6c62 6163 6b66 696c 6527  estcallbackfile'
+00020420: 2c20 7465 7374 5f63 616c 6c62 6163 6b5f  , test_callback_
+00020430: 6669 6c65 2c20 6670 6174 682c 0a20 2020  file, fpath,.   
+00020440: 2020 2020 2020 2073 7572 6928 6275 636b         suri(buck
+00020450: 6574 5f75 7269 290a 2020 2020 2020 5d2c  et_uri).      ],
+00020460: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00020470: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+00020480: 7870 6563 7465 645f 7374 6174 7573 3d31  xpected_status=1
+00020490: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+000204a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000204b0: 7265 7475 726e 5f73 7464 6572 723d 5472  return_stderr=Tr
+000204c0: 7565 290a 2020 2020 2020 7365 6c66 2e61  ue).      self.a
+000204d0: 7373 6572 7449 6e28 2741 7274 6966 6963  ssertIn('Artific
+000204e0: 616c 6c79 2068 616c 7469 6e67 2075 706c  ally halting upl
+000204f0: 6f61 6427 2c20 7374 6465 7272 290a 2020  oad', stderr).  
+00020500: 2020 2020 6670 6174 6820 3d20 7365 6c66      fpath = self
+00020510: 2e43 7265 6174 6554 656d 7046 696c 6528  .CreateTempFile(
+00020520: 6669 6c65 5f6e 616d 653d 2766 6f6f 272c  file_name='foo',
+00020530: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00020540: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020550: 2020 2074 6d70 6469 723d 746d 705f 6469     tmpdir=tmp_di
+00020560: 722c 0a20 2020 2020 2020 2020 2020 2020  r,.             
+00020570: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020580: 2020 2020 2063 6f6e 7465 6e74 733d 6227       contents=b'
+00020590: 6127 202a 204f 4e45 5f4b 4942 290a 2020  a' * ONE_KIB).  
+000205a0: 2020 2020 7374 6465 7272 203d 2073 656c      stderr = sel
+000205b0: 662e 5275 6e47 7355 7469 6c28 5b27 6370  f.RunGsUtil(['cp
+000205c0: 272c 2066 7061 7468 2c20 7375 7269 2862  ', fpath, suri(b
+000205d0: 7563 6b65 745f 7572 6929 5d2c 0a20 2020  ucket_uri)],.   
+000205e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000205f0: 2020 2020 2020 2020 2020 2065 7870 6563             expec
+00020600: 7465 645f 7374 6174 7573 3d31 2c0a 2020  ted_status=1,.  
+00020610: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020620: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00020630: 726e 5f73 7464 6572 723d 5472 7565 290a  rn_stderr=True).
+00020640: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+00020650: 7449 6e28 2752 6573 756d 6162 6c65 5570  tIn('ResumableUp
+00020660: 6c6f 6164 4162 6f72 7445 7863 6570 7469  loadAbortExcepti
+00020670: 6f6e 272c 2073 7464 6572 7229 0a0a 2020  on', stderr)..  
+00020680: 4053 6b69 7046 6f72 5333 2827 4e6f 2072  @SkipForS3('No r
+00020690: 6573 756d 6162 6c65 2075 706c 6f61 6420  esumable upload 
+000206a0: 7375 7070 6f72 7420 666f 7220 5333 2e27  support for S3.'
+000206b0: 290a 2020 6465 6620 7465 7374 5f63 705f  ).  def test_cp_
+000206c0: 636f 6d70 6f73 6974 655f 656e 6372 7970  composite_encryp
+000206d0: 7465 645f 7570 6c6f 6164 5f72 6573 756d  ted_upload_resum
+000206e0: 6528 7365 6c66 293a 0a20 2020 2022 2222  e(self):.    """
+000206f0: 5465 7374 7320 7468 6174 2061 6e20 656e  Tests that an en
+00020700: 6372 7970 7465 6420 636f 6d70 6f73 6974  crypted composit
+00020710: 6520 7570 6c6f 6164 2072 6573 756d 6573  e upload resumes
+00020720: 2073 7563 6365 7373 6675 6c6c 792e 2222   successfully.""
+00020730: 220a 2020 2020 6966 2073 656c 662e 7465  ".    if self.te
+00020740: 7374 5f61 7069 203d 3d20 4170 6953 656c  st_api == ApiSel
+00020750: 6563 746f 722e 584d 4c3a 0a20 2020 2020  ector.XML:.     
+00020760: 2072 6574 7572 6e20 756e 6974 7465 7374   return unittest
+00020770: 2e73 6b69 7028 0a20 2020 2020 2020 2020  .skip(.         
+00020780: 2027 6773 7574 696c 2064 6f65 7320 6e6f   'gsutil does no
+00020790: 7420 7375 7070 6f72 7420 656e 6372 7970  t support encryp
+000207a0: 7469 6f6e 2077 6974 6820 7468 6520 584d  tion with the XM
+000207b0: 4c20 4150 4927 290a 2020 2020 6275 636b  L API').    buck
+000207c0: 6574 5f75 7269 203d 2073 656c 662e 4372  et_uri = self.Cr
+000207d0: 6561 7465 4275 636b 6574 2829 0a20 2020  eateBucket().   
+000207e0: 2064 7374 5f75 726c 203d 2053 746f 7261   dst_url = Stora
+000207f0: 6765 5572 6c46 726f 6d53 7472 696e 6728  geUrlFromString(
+00020800: 7375 7269 2862 7563 6b65 745f 7572 692c  suri(bucket_uri,
+00020810: 2027 666f 6f27 2929 0a0a 2020 2020 6669   'foo'))..    fi
+00020820: 6c65 5f63 6f6e 7465 6e74 7320 3d20 6227  le_contents = b'
+00020830: 666f 6f62 6172 270a 2020 2020 6669 6c65  foobar'.    file
+00020840: 5f6e 616d 6520 3d20 2766 6f6f 6261 7227  _name = 'foobar'
+00020850: 0a20 2020 2073 6f75 7263 655f 6669 6c65  .    source_file
+00020860: 203d 2073 656c 662e 4372 6561 7465 5465   = self.CreateTe
+00020870: 6d70 4669 6c65 2863 6f6e 7465 6e74 733d  mpFile(contents=
+00020880: 6669 6c65 5f63 6f6e 7465 6e74 732c 0a20  file_contents,. 
+00020890: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000208a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000208b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000208c0: 6578 7065 6374 6564 5f73 7461 7475 733d  expected_status=
-000208d0: 312c 0a20 2020 2020 2020 2020 2020 2020  1,.             
-000208e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000208f0: 2020 2072 6574 7572 6e5f 7374 6465 7272     return_stderr
-00020900: 3d54 7275 6529 0a20 2020 2020 2020 2073  =True).        s
-00020910: 656c 662e 6173 7365 7274 496e 2827 436f  elf.assertIn('Co
-00020920: 756c 646e 5c27 7420 7772 6974 6520 7472  uldn\'t write tr
-00020930: 6163 6b65 7220 6669 6c65 272c 2073 7464  acker file', std
-00020940: 6572 7229 0a20 2020 2066 696e 616c 6c79  err).    finally
-00020950: 3a0a 2020 2020 2020 6f73 2e63 686d 6f64  :.      os.chmod
-00020960: 2874 7261 636b 6572 5f64 6972 2c20 7361  (tracker_dir, sa
-00020970: 7665 5f6d 6f64 290a 2020 2020 2020 6966  ve_mod).      if
-00020980: 206f 732e 7061 7468 2e65 7869 7374 7328   os.path.exists(
-00020990: 7472 6163 6b65 725f 6669 6c65 6e61 6d65  tracker_filename
-000209a0: 293a 0a20 2020 2020 2020 206f 732e 756e  ):.        os.un
-000209b0: 6c69 6e6b 2874 7261 636b 6572 5f66 696c  link(tracker_fil
-000209c0: 656e 616d 6529 0a0a 2020 2320 5468 6973  ename)..  # This
-000209d0: 2074 656d 706f 7261 7269 6c79 2063 6861   temporarily cha
-000209e0: 6e67 6573 2074 6865 2074 7261 636b 6572  nges the tracker
-000209f0: 2064 6972 6563 746f 7279 2074 6f20 756e   directory to un
-00020a00: 7772 6974 6162 6c65 2077 6869 6368 0a20  writable which. 
-00020a10: 2023 2069 6e74 6572 6665 7265 7320 7769   # interferes wi
-00020a20: 7468 2061 6e79 2070 6172 616c 6c65 6c20  th any parallel 
-00020a30: 7275 6e6e 696e 6720 7465 7374 7320 7468  running tests th
-00020a40: 6174 2075 7365 2074 6865 2074 7261 636b  at use the track
-00020a50: 6572 2064 6972 6563 746f 7279 2e0a 2020  er directory..  
-00020a60: 404e 6f74 5061 7261 6c6c 656c 697a 6162  @NotParallelizab
-00020a70: 6c65 0a20 2040 756e 6974 7465 7374 2e73  le.  @unittest.s
-00020a80: 6b69 7049 6628 4953 5f57 494e 444f 5753  kipIf(IS_WINDOWS
-00020a90: 2c20 2763 686d 6f64 206f 6e20 6469 7220  , 'chmod on dir 
-00020aa0: 756e 7375 7070 6f72 7465 6420 6f6e 2057  unsupported on W
-00020ab0: 696e 646f 7773 2e27 290a 2020 4053 6571  indows.').  @Seq
-00020ac0: 7565 6e74 6961 6c41 6e64 5061 7261 6c6c  uentialAndParall
-00020ad0: 656c 5472 616e 7366 6572 0a20 2064 6566  elTransfer.  def
-00020ae0: 2074 6573 745f 6370 5f75 6e77 7269 7461   test_cp_unwrita
-00020af0: 626c 655f 7472 6163 6b65 725f 6669 6c65  ble_tracker_file
-00020b00: 5f64 6f77 6e6c 6f61 6428 7365 6c66 293a  _download(self):
-00020b10: 0a20 2020 2022 2222 5465 7374 7320 646f  .    """Tests do
-00020b20: 776e 6c6f 6164 7320 7769 7468 2061 6e20  wnloads with an 
-00020b30: 756e 7772 6974 6162 6c65 2074 7261 636b  unwritable track
-00020b40: 6572 2066 696c 652e 2222 220a 2020 2020  er file.""".    
-00020b50: 6f62 6a65 6374 5f75 7269 203d 2073 656c  object_uri = sel
-00020b60: 662e 4372 6561 7465 4f62 6a65 6374 2863  f.CreateObject(c
-00020b70: 6f6e 7465 6e74 733d 6227 666f 6f27 202a  ontents=b'foo' *
-00020b80: 204f 4e45 5f4b 4942 290a 2020 2020 7472   ONE_KIB).    tr
-00020b90: 6163 6b65 725f 6669 6c65 6e61 6d65 203d  acker_filename =
-00020ba0: 2047 6574 5472 6163 6b65 7246 696c 6550   GetTrackerFileP
-00020bb0: 6174 6828 0a20 2020 2020 2020 2053 746f  ath(.        Sto
-00020bc0: 7261 6765 5572 6c46 726f 6d53 7472 696e  rageUrlFromStrin
-00020bd0: 6728 7375 7269 286f 626a 6563 745f 7572  g(suri(object_ur
-00020be0: 6929 292c 2054 7261 636b 6572 4669 6c65  i)), TrackerFile
-00020bf0: 5479 7065 2e44 4f57 4e4c 4f41 442c 0a20  Type.DOWNLOAD,. 
-00020c00: 2020 2020 2020 2073 656c 662e 7465 7374         self.test
-00020c10: 5f61 7069 290a 2020 2020 7472 6163 6b65  _api).    tracke
-00020c20: 725f 6469 7220 3d20 6f73 2e70 6174 682e  r_dir = os.path.
-00020c30: 6469 726e 616d 6528 7472 6163 6b65 725f  dirname(tracker_
-00020c40: 6669 6c65 6e61 6d65 290a 2020 2020 6670  filename).    fp
-00020c50: 6174 6820 3d20 7365 6c66 2e43 7265 6174  ath = self.Creat
-00020c60: 6554 656d 7046 696c 6528 290a 2020 2020  eTempFile().    
-00020c70: 7361 7665 5f6d 6f64 203d 206f 732e 7374  save_mod = os.st
-00020c80: 6174 2874 7261 636b 6572 5f64 6972 292e  at(tracker_dir).
-00020c90: 7374 5f6d 6f64 650a 0a20 2020 2074 7279  st_mode..    try
-00020ca0: 3a0a 2020 2020 2020 6f73 2e63 686d 6f64  :.      os.chmod
-00020cb0: 2874 7261 636b 6572 5f64 6972 2c20 3029  (tracker_dir, 0)
-00020cc0: 0a20 2020 2020 2062 6f74 6f5f 636f 6e66  .      boto_conf
-00020cd0: 6967 5f66 6f72 5f74 6573 7420 3d20 2827  ig_for_test = ('
-00020ce0: 4753 5574 696c 272c 2027 7265 7375 6d61  GSUtil', 'resuma
-00020cf0: 626c 655f 7468 7265 7368 6f6c 6427 2c20  ble_threshold', 
-00020d00: 7374 7228 4549 4748 545f 4d49 4229 290a  str(EIGHT_MIB)).
-00020d10: 2020 2020 2020 7769 7468 2053 6574 426f        with SetBo
-00020d20: 746f 436f 6e66 6967 466f 7254 6573 7428  toConfigForTest(
-00020d30: 5b62 6f74 6f5f 636f 6e66 6967 5f66 6f72  [boto_config_for
-00020d40: 5f74 6573 745d 293a 0a20 2020 2020 2020  _test]):.       
-00020d50: 2023 2053 686f 756c 6420 7375 6363 6565   # Should succee
-00020d60: 6420 6265 6361 7573 6520 7765 2061 7265  d because we are
-00020d70: 2062 656c 6f77 2074 6865 2074 6872 6573   below the thres
-00020d80: 686f 6c64 2e0a 2020 2020 2020 2020 7365  hold..        se
-00020d90: 6c66 2e52 756e 4773 5574 696c 285b 2763  lf.RunGsUtil(['c
-00020da0: 7027 2c20 7375 7269 286f 626a 6563 745f  p', suri(object_
-00020db0: 7572 6929 2c20 6670 6174 685d 290a 2020  uri), fpath]).  
-00020dc0: 2020 2020 626f 746f 5f63 6f6e 6669 675f      boto_config_
-00020dd0: 666f 725f 7465 7374 203d 2028 2747 5355  for_test = ('GSU
-00020de0: 7469 6c27 2c20 2772 6573 756d 6162 6c65  til', 'resumable
-00020df0: 5f74 6872 6573 686f 6c64 272c 2073 7472  _threshold', str
-00020e00: 284f 4e45 5f4b 4942 2929 0a20 2020 2020  (ONE_KIB)).     
-00020e10: 2077 6974 6820 5365 7442 6f74 6f43 6f6e   with SetBotoCon
-00020e20: 6669 6746 6f72 5465 7374 285b 626f 746f  figForTest([boto
-00020e30: 5f63 6f6e 6669 675f 666f 725f 7465 7374  _config_for_test
-00020e40: 5d29 3a0a 2020 2020 2020 2020 7374 6465  ]):.        stde
-00020e50: 7272 203d 2073 656c 662e 5275 6e47 7355  rr = self.RunGsU
-00020e60: 7469 6c28 5b27 6370 272c 2073 7572 6928  til(['cp', suri(
-00020e70: 6f62 6a65 6374 5f75 7269 292c 2066 7061  object_uri), fpa
-00020e80: 7468 5d2c 0a20 2020 2020 2020 2020 2020  th],.           
-00020e90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020ea0: 2020 2020 2065 7870 6563 7465 645f 7374       expected_st
-00020eb0: 6174 7573 3d31 2c0a 2020 2020 2020 2020  atus=1,.        
-00020ec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020ed0: 2020 2020 2020 2020 7265 7475 726e 5f73          return_s
-00020ee0: 7464 6572 723d 5472 7565 290a 2020 2020  tderr=True).    
-00020ef0: 2020 2020 7365 6c66 2e61 7373 6572 7449      self.assertI
-00020f00: 6e28 2743 6f75 6c64 6e5c 2774 2077 7269  n('Couldn\'t wri
-00020f10: 7465 2074 7261 636b 6572 2066 696c 6527  te tracker file'
-00020f20: 2c20 7374 6465 7272 290a 2020 2020 6669  , stderr).    fi
-00020f30: 6e61 6c6c 793a 0a20 2020 2020 206f 732e  nally:.      os.
-00020f40: 6368 6d6f 6428 7472 6163 6b65 725f 6469  chmod(tracker_di
-00020f50: 722c 2073 6176 655f 6d6f 6429 0a20 2020  r, save_mod).   
-00020f60: 2020 2069 6620 6f73 2e70 6174 682e 6578     if os.path.ex
-00020f70: 6973 7473 2874 7261 636b 6572 5f66 696c  ists(tracker_fil
-00020f80: 656e 616d 6529 3a0a 2020 2020 2020 2020  ename):.        
-00020f90: 6f73 2e75 6e6c 696e 6b28 7472 6163 6b65  os.unlink(tracke
-00020fa0: 725f 6669 6c65 6e61 6d65 290a 0a20 2064  r_filename)..  d
-00020fb0: 6566 205f 7465 7374 5f63 705f 7265 7375  ef _test_cp_resu
-00020fc0: 6d61 626c 655f 646f 776e 6c6f 6164 5f62  mable_download_b
-00020fd0: 7265 616b 5f68 656c 7065 7228 7365 6c66  reak_helper(self
-00020fe0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00020ff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021000: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021010: 2062 6f74 6f5f 636f 6e66 6967 2c0a 2020   boto_config,.  
-00021020: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021030: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021040: 2020 2020 2020 2020 2020 2020 2065 6e63               enc
-00021050: 7279 7074 696f 6e5f 6b65 793d 4e6f 6e65  ryption_key=None
-00021060: 293a 0a20 2020 2022 2222 4865 6c70 6572  ):.    """Helper
-00021070: 2066 756e 6374 696f 6e20 666f 7220 6469   function for di
-00021080: 6666 6572 656e 7420 6d6f 6465 7320 6f66  fferent modes of
-00021090: 2072 6573 756d 6162 6c65 2064 6f77 6e6c   resumable downl
-000210a0: 6f61 6420 6272 6561 6b2e 0a0a 2020 2020  oad break...    
-000210b0: 4172 6773 3a0a 2020 2020 2020 626f 746f  Args:.      boto
-000210c0: 5f63 6f6e 6669 673a 204c 6973 7420 6f66  _config: List of
-000210d0: 2062 6f74 6f20 636f 6e66 6967 7572 6174   boto configurat
-000210e0: 696f 6e20 7475 706c 6573 2066 6f72 2075  ion tuples for u
-000210f0: 7365 2077 6974 680a 2020 2020 2020 2020  se with.        
-00021100: 2020 5365 7442 6f74 6f43 6f6e 6669 6746    SetBotoConfigF
-00021110: 6f72 5465 7374 2e0a 2020 2020 2020 656e  orTest..      en
-00021120: 6372 7970 7469 6f6e 5f6b 6579 3a20 4261  cryption_key: Ba
-00021130: 7365 3634 2065 6e63 7279 7074 696f 6e20  se64 encryption 
-00021140: 6b65 7920 666f 7220 6f62 6a65 6374 2065  key for object e
-00021150: 6e63 7279 7074 696f 6e20 2869 6620 616e  ncryption (if an
-00021160: 7929 2e0a 2020 2020 2222 220a 2020 2020  y)..    """.    
-00021170: 6275 636b 6574 5f75 7269 203d 2073 656c  bucket_uri = sel
-00021180: 662e 4372 6561 7465 4275 636b 6574 2829  f.CreateBucket()
-00021190: 0a20 2020 2066 696c 655f 636f 6e74 656e  .    file_conten
-000211a0: 7473 203d 2062 2761 2720 2a20 7365 6c66  ts = b'a' * self
-000211b0: 2e68 616c 745f 7369 7a65 0a20 2020 206f  .halt_size.    o
-000211c0: 626a 6563 745f 7572 6920 3d20 7365 6c66  bject_uri = self
-000211d0: 2e43 7265 6174 654f 626a 6563 7428 6275  .CreateObject(bu
-000211e0: 636b 6574 5f75 7269 3d62 7563 6b65 745f  cket_uri=bucket_
-000211f0: 7572 692c 0a20 2020 2020 2020 2020 2020  uri,.           
-00021200: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021210: 2020 2020 2020 2020 6f62 6a65 6374 5f6e          object_n
-00021220: 616d 653d 2766 6f6f 272c 0a20 2020 2020  ame='foo',.     
-00021230: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021240: 2020 2020 2020 2020 2020 2020 2020 636f                co
-00021250: 6e74 656e 7473 3d66 696c 655f 636f 6e74  ntents=file_cont
-00021260: 656e 7473 2c0a 2020 2020 2020 2020 2020  ents,.          
-00021270: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021280: 2020 2020 2020 2020 2065 6e63 7279 7074           encrypt
-00021290: 696f 6e5f 6b65 793d 656e 6372 7970 7469  ion_key=encrypti
-000212a0: 6f6e 5f6b 6579 290a 2020 2020 6670 6174  on_key).    fpat
-000212b0: 6820 3d20 7365 6c66 2e43 7265 6174 6554  h = self.CreateT
-000212c0: 656d 7046 696c 6528 290a 2020 2020 7465  empFile().    te
-000212d0: 7374 5f63 616c 6c62 6163 6b5f 6669 6c65  st_callback_file
-000212e0: 203d 2073 656c 662e 4372 6561 7465 5465   = self.CreateTe
-000212f0: 6d70 4669 6c65 280a 2020 2020 2020 2020  mpFile(.        
-00021300: 636f 6e74 656e 7473 3d70 6963 6b6c 652e  contents=pickle.
-00021310: 6475 6d70 7328 4861 6c74 696e 6743 6f70  dumps(HaltingCop
-00021320: 7943 616c 6c62 6163 6b48 616e 646c 6572  yCallbackHandler
-00021330: 2846 616c 7365 2c20 3529 2929 0a0a 2020  (False, 5)))..  
-00021340: 2020 7769 7468 2053 6574 426f 746f 436f    with SetBotoCo
-00021350: 6e66 6967 466f 7254 6573 7428 626f 746f  nfigForTest(boto
-00021360: 5f63 6f6e 6669 6729 3a0a 2020 2020 2020  _config):.      
-00021370: 7374 6465 7272 203d 2073 656c 662e 5275  stderr = self.Ru
-00021380: 6e47 7355 7469 6c28 5b0a 2020 2020 2020  nGsUtil([.      
-00021390: 2020 2020 2763 7027 2c20 272d 2d74 6573      'cp', '--tes
-000213a0: 7463 616c 6c62 6163 6b66 696c 6527 2c20  tcallbackfile', 
-000213b0: 7465 7374 5f63 616c 6c62 6163 6b5f 6669  test_callback_fi
-000213c0: 6c65 2c0a 2020 2020 2020 2020 2020 7375  le,.          su
-000213d0: 7269 286f 626a 6563 745f 7572 6929 2c20  ri(object_uri), 
-000213e0: 6670 6174 680a 2020 2020 2020 5d2c 0a20  fpath.      ],. 
-000213f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021400: 2020 2020 2020 2020 2020 2020 2065 7870               exp
-00021410: 6563 7465 645f 7374 6174 7573 3d31 2c0a  ected_status=1,.
-00021420: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021430: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00021440: 7475 726e 5f73 7464 6572 723d 5472 7565  turn_stderr=True
-00021450: 290a 2020 2020 2020 7365 6c66 2e61 7373  ).      self.ass
-00021460: 6572 7449 6e28 2741 7274 6966 6963 616c  ertIn('Artifical
-00021470: 6c79 2068 616c 7469 6e67 2064 6f77 6e6c  ly halting downl
-00021480: 6f61 642e 272c 2073 7464 6572 7229 0a20  oad.', stderr). 
-00021490: 2020 2020 2074 7261 636b 6572 5f66 696c       tracker_fil
-000214a0: 656e 616d 6520 3d20 4765 7454 7261 636b  ename = GetTrack
-000214b0: 6572 4669 6c65 5061 7468 2853 746f 7261  erFilePath(Stora
-000214c0: 6765 5572 6c46 726f 6d53 7472 696e 6728  geUrlFromString(
-000214d0: 6670 6174 6829 2c0a 2020 2020 2020 2020  fpath),.        
-000214e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000214f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021500: 2020 2020 5472 6163 6b65 7246 696c 6554      TrackerFileT
-00021510: 7970 652e 444f 574e 4c4f 4144 2c0a 2020  ype.DOWNLOAD,.  
-00021520: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021530: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021540: 2020 2020 2020 2020 2020 7365 6c66 2e74            self.t
-00021550: 6573 745f 6170 6929 0a20 2020 2020 2073  est_api).      s
-00021560: 656c 662e 6173 7365 7274 5472 7565 286f  elf.assertTrue(o
-00021570: 732e 7061 7468 2e69 7366 696c 6528 7472  s.path.isfile(tr
-00021580: 6163 6b65 725f 6669 6c65 6e61 6d65 2929  acker_filename))
-00021590: 0a20 2020 2020 2073 7464 6572 7220 3d20  .      stderr = 
-000215a0: 7365 6c66 2e52 756e 4773 5574 696c 285b  self.RunGsUtil([
-000215b0: 2763 7027 2c20 7375 7269 286f 626a 6563  'cp', suri(objec
-000215c0: 745f 7572 6929 2c20 6670 6174 685d 2c0a  t_uri), fpath],.
-000215d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000215e0: 2020 2020 2020 2020 2020 2020 2020 7265                re
-000215f0: 7475 726e 5f73 7464 6572 723d 5472 7565  turn_stderr=True
-00021600: 290a 2020 2020 2020 7365 6c66 2e61 7373  ).      self.ass
-00021610: 6572 7449 6e28 2752 6573 756d 696e 6720  ertIn('Resuming 
-00021620: 646f 776e 6c6f 6164 272c 2073 7464 6572  download', stder
-00021630: 7229 0a20 2020 2077 6974 6820 6f70 656e  r).    with open
-00021640: 2866 7061 7468 2c20 2772 6227 2920 6173  (fpath, 'rb') as
-00021650: 2066 3a0a 2020 2020 2020 7365 6c66 2e61   f:.      self.a
-00021660: 7373 6572 7445 7175 616c 2866 2e72 6561  ssertEqual(f.rea
-00021670: 6428 292c 2066 696c 655f 636f 6e74 656e  d(), file_conten
-00021680: 7473 2c20 2746 696c 6520 636f 6e74 656e  ts, 'File conten
-00021690: 7473 2064 6966 6665 7227 290a 0a20 2064  ts differ')..  d
-000216a0: 6566 2074 6573 745f 6370 5f72 6573 756d  ef test_cp_resum
-000216b0: 6162 6c65 5f64 6f77 6e6c 6f61 645f 6272  able_download_br
-000216c0: 6561 6b28 7365 6c66 293a 0a20 2020 2022  eak(self):.    "
-000216d0: 2222 5465 7374 7320 7468 6174 2061 2064  ""Tests that a d
-000216e0: 6f77 6e6c 6f61 6420 6361 6e20 6265 2072  ownload can be r
-000216f0: 6573 756d 6564 2061 6674 6572 2061 2063  esumed after a c
-00021700: 6f6e 6e65 6374 696f 6e20 6272 6561 6b2e  onnection break.
-00021710: 2222 220a 2020 2020 7365 6c66 2e5f 7465  """.    self._te
-00021720: 7374 5f63 705f 7265 7375 6d61 626c 655f  st_cp_resumable_
-00021730: 646f 776e 6c6f 6164 5f62 7265 616b 5f68  download_break_h
-00021740: 656c 7065 7228 5b0a 2020 2020 2020 2020  elper([.        
-00021750: 2827 4753 5574 696c 272c 2027 7265 7375  ('GSUtil', 'resu
-00021760: 6d61 626c 655f 7468 7265 7368 6f6c 6427  mable_threshold'
-00021770: 2c20 7374 7228 4f4e 455f 4b49 4229 290a  , str(ONE_KIB)).
-00021780: 2020 2020 5d29 0a0a 2020 4053 6b69 7046      ])..  @SkipF
-00021790: 6f72 5333 2827 6773 7574 696c 2064 6f65  orS3('gsutil doe
-000217a0: 736e 5c27 7420 7375 7070 6f72 7420 5333  sn\'t support S3
-000217b0: 2063 7573 746f 6d65 722d 7375 7070 6c69   customer-suppli
-000217c0: 6564 2065 6e63 7279 7074 696f 6e20 6b65  ed encryption ke
-000217d0: 7973 2e27 290a 2020 6465 6620 7465 7374  ys.').  def test
-000217e0: 5f63 705f 7265 7375 6d61 626c 655f 656e  _cp_resumable_en
-000217f0: 6372 7970 7465 645f 646f 776e 6c6f 6164  crypted_download
-00021800: 5f62 7265 616b 2873 656c 6629 3a0a 2020  _break(self):.  
-00021810: 2020 2222 2254 6573 7473 2074 6861 7420    """Tests that 
-00021820: 616e 2065 6e63 7279 7074 6564 2064 6f77  an encrypted dow
-00021830: 6e6c 6f61 6420 7265 7375 6d65 7320 6166  nload resumes af
-00021840: 7465 7220 6120 636f 6e6e 6563 7469 6f6e  ter a connection
-00021850: 2062 7265 616b 2e22 2222 0a20 2020 2069   break.""".    i
-00021860: 6620 7365 6c66 2e74 6573 745f 6170 6920  f self.test_api 
-00021870: 3d3d 2041 7069 5365 6c65 6374 6f72 2e58  == ApiSelector.X
-00021880: 4d4c 3a0a 2020 2020 2020 7265 7475 726e  ML:.      return
-00021890: 2075 6e69 7474 6573 742e 736b 6970 280a   unittest.skip(.
-000218a0: 2020 2020 2020 2020 2020 2767 7375 7469            'gsuti
-000218b0: 6c20 646f 6573 206e 6f74 2073 7570 706f  l does not suppo
-000218c0: 7274 2065 6e63 7279 7074 696f 6e20 7769  rt encryption wi
-000218d0: 7468 2074 6865 2058 4d4c 2041 5049 2729  th the XML API')
-000218e0: 0a20 2020 2073 656c 662e 5f74 6573 745f  .    self._test_
-000218f0: 6370 5f72 6573 756d 6162 6c65 5f64 6f77  cp_resumable_dow
-00021900: 6e6c 6f61 645f 6272 6561 6b5f 6865 6c70  nload_break_help
-00021910: 6572 280a 2020 2020 2020 2020 5b28 2747  er(.        [('G
-00021920: 5355 7469 6c27 2c20 2772 6573 756d 6162  SUtil', 'resumab
-00021930: 6c65 5f74 6872 6573 686f 6c64 272c 2073  le_threshold', s
-00021940: 7472 284f 4e45 5f4b 4942 2929 2c0a 2020  tr(ONE_KIB)),.  
-00021950: 2020 2020 2020 2028 2747 5355 7469 6c27         ('GSUtil'
-00021960: 2c20 2765 6e63 7279 7074 696f 6e5f 6b65  , 'encryption_ke
-00021970: 7927 2c20 5445 5354 5f45 4e43 5259 5054  y', TEST_ENCRYPT
-00021980: 494f 4e5f 4b45 5931 295d 2c0a 2020 2020  ION_KEY1)],.    
-00021990: 2020 2020 656e 6372 7970 7469 6f6e 5f6b      encryption_k
-000219a0: 6579 3d54 4553 545f 454e 4352 5950 5449  ey=TEST_ENCRYPTI
-000219b0: 4f4e 5f4b 4559 3129 0a0a 2020 4053 6b69  ON_KEY1)..  @Ski
-000219c0: 7046 6f72 5333 2827 6773 7574 696c 2064  pForS3('gsutil d
-000219d0: 6f65 736e 5c27 7420 7375 7070 6f72 7420  oesn\'t support 
-000219e0: 5333 2063 7573 746f 6d65 722d 7375 7070  S3 customer-supp
-000219f0: 6c69 6564 2065 6e63 7279 7074 696f 6e20  lied encryption 
-00021a00: 6b65 7973 2e27 290a 2020 6465 6620 7465  keys.').  def te
-00021a10: 7374 5f63 705f 7265 7375 6d61 626c 655f  st_cp_resumable_
-00021a20: 656e 6372 7970 7465 645f 646f 776e 6c6f  encrypted_downlo
-00021a30: 6164 5f6b 6579 5f72 6f74 6174 696f 6e28  ad_key_rotation(
-00021a40: 7365 6c66 293a 0a20 2020 2022 2222 5465  self):.    """Te
-00021a50: 7374 7320 7468 6174 2061 2064 6f77 6e6c  sts that a downl
-00021a60: 6f61 6420 7265 7374 6172 7473 2077 6974  oad restarts wit
-00021a70: 6820 6120 726f 7461 7465 6420 656e 6372  h a rotated encr
-00021a80: 7970 7469 6f6e 206b 6579 2e22 2222 0a20  yption key.""". 
-00021a90: 2020 2069 6620 7365 6c66 2e74 6573 745f     if self.test_
-00021aa0: 6170 6920 3d3d 2041 7069 5365 6c65 6374  api == ApiSelect
-00021ab0: 6f72 2e58 4d4c 3a0a 2020 2020 2020 7265  or.XML:.      re
-00021ac0: 7475 726e 2075 6e69 7474 6573 742e 736b  turn unittest.sk
-00021ad0: 6970 280a 2020 2020 2020 2020 2020 2767  ip(.          'g
-00021ae0: 7375 7469 6c20 646f 6573 206e 6f74 2073  sutil does not s
-00021af0: 7570 706f 7274 2065 6e63 7279 7074 696f  upport encryptio
-00021b00: 6e20 7769 7468 2074 6865 2058 4d4c 2041  n with the XML A
-00021b10: 5049 2729 0a20 2020 2062 7563 6b65 745f  PI').    bucket_
-00021b20: 7572 6920 3d20 7365 6c66 2e43 7265 6174  uri = self.Creat
-00021b30: 6542 7563 6b65 7428 290a 2020 2020 6669  eBucket().    fi
-00021b40: 6c65 5f63 6f6e 7465 6e74 7320 3d20 6227  le_contents = b'
-00021b50: 6127 202a 2073 656c 662e 6861 6c74 5f73  a' * self.halt_s
-00021b60: 697a 650a 2020 2020 6f62 6a65 6374 5f75  ize.    object_u
-00021b70: 7269 203d 2073 656c 662e 4372 6561 7465  ri = self.Create
-00021b80: 4f62 6a65 6374 2862 7563 6b65 745f 7572  Object(bucket_ur
-00021b90: 693d 6275 636b 6574 5f75 7269 2c0a 2020  i=bucket_uri,.  
-00021ba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021bb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021bc0: 206f 626a 6563 745f 6e61 6d65 3d27 666f   object_name='fo
-00021bd0: 6f27 2c0a 2020 2020 2020 2020 2020 2020  o',.            
-00021be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021bf0: 2020 2020 2020 2063 6f6e 7465 6e74 733d         contents=
-00021c00: 6669 6c65 5f63 6f6e 7465 6e74 732c 0a20  file_contents,. 
-00021c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021c30: 2020 656e 6372 7970 7469 6f6e 5f6b 6579    encryption_key
-00021c40: 3d54 4553 545f 454e 4352 5950 5449 4f4e  =TEST_ENCRYPTION
-00021c50: 5f4b 4559 3129 0a20 2020 2066 7061 7468  _KEY1).    fpath
-00021c60: 203d 2073 656c 662e 4372 6561 7465 5465   = self.CreateTe
-00021c70: 6d70 4669 6c65 2829 0a20 2020 2074 6573  mpFile().    tes
-00021c80: 745f 6361 6c6c 6261 636b 5f66 696c 6520  t_callback_file 
-00021c90: 3d20 7365 6c66 2e43 7265 6174 6554 656d  = self.CreateTem
-00021ca0: 7046 696c 6528 0a20 2020 2020 2020 2063  pFile(.        c
-00021cb0: 6f6e 7465 6e74 733d 7069 636b 6c65 2e64  ontents=pickle.d
-00021cc0: 756d 7073 2848 616c 7469 6e67 436f 7079  umps(HaltingCopy
-00021cd0: 4361 6c6c 6261 636b 4861 6e64 6c65 7228  CallbackHandler(
-00021ce0: 4661 6c73 652c 2035 2929 290a 0a20 2020  False, 5)))..   
-00021cf0: 2062 6f74 6f5f 636f 6e66 6967 5f66 6f72   boto_config_for
-00021d00: 5f74 6573 7420 3d20 5b28 2747 5355 7469  _test = [('GSUti
-00021d10: 6c27 2c20 2772 6573 756d 6162 6c65 5f74  l', 'resumable_t
-00021d20: 6872 6573 686f 6c64 272c 2073 7472 284f  hreshold', str(O
-00021d30: 4e45 5f4b 4942 2929 2c0a 2020 2020 2020  NE_KIB)),.      
-00021d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021d50: 2020 2020 2020 2827 4753 5574 696c 272c        ('GSUtil',
-00021d60: 2027 656e 6372 7970 7469 6f6e 5f6b 6579   'encryption_key
-00021d70: 272c 2054 4553 545f 454e 4352 5950 5449  ', TEST_ENCRYPTI
-00021d80: 4f4e 5f4b 4559 3129 5d0a 0a20 2020 2077  ON_KEY1)]..    w
-00021d90: 6974 6820 5365 7442 6f74 6f43 6f6e 6669  ith SetBotoConfi
-00021da0: 6746 6f72 5465 7374 2862 6f74 6f5f 636f  gForTest(boto_co
-00021db0: 6e66 6967 5f66 6f72 5f74 6573 7429 3a0a  nfig_for_test):.
-00021dc0: 2020 2020 2020 7374 6465 7272 203d 2073        stderr = s
-00021dd0: 656c 662e 5275 6e47 7355 7469 6c28 5b0a  elf.RunGsUtil([.
-00021de0: 2020 2020 2020 2020 2020 2763 7027 2c20            'cp', 
-00021df0: 272d 2d74 6573 7463 616c 6c62 6163 6b66  '--testcallbackf
-00021e00: 696c 6527 2c20 7465 7374 5f63 616c 6c62  ile', test_callb
-00021e10: 6163 6b5f 6669 6c65 2c0a 2020 2020 2020  ack_file,.      
-00021e20: 2020 2020 7375 7269 286f 626a 6563 745f      suri(object_
-00021e30: 7572 6929 2c20 6670 6174 680a 2020 2020  uri), fpath.    
-00021e40: 2020 5d2c 0a20 2020 2020 2020 2020 2020    ],.           
-00021e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021e60: 2020 2065 7870 6563 7465 645f 7374 6174     expected_stat
-00021e70: 7573 3d31 2c0a 2020 2020 2020 2020 2020  us=1,.          
-00021e80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021e90: 2020 2020 7265 7475 726e 5f73 7464 6572      return_stder
-00021ea0: 723d 5472 7565 290a 2020 2020 2020 7365  r=True).      se
-00021eb0: 6c66 2e61 7373 6572 7449 6e28 2741 7274  lf.assertIn('Art
-00021ec0: 6966 6963 616c 6c79 2068 616c 7469 6e67  ifically halting
-00021ed0: 2064 6f77 6e6c 6f61 642e 272c 2073 7464   download.', std
-00021ee0: 6572 7229 0a20 2020 2020 2074 7261 636b  err).      track
-00021ef0: 6572 5f66 696c 656e 616d 6520 3d20 4765  er_filename = Ge
-00021f00: 7454 7261 636b 6572 4669 6c65 5061 7468  tTrackerFilePath
-00021f10: 2853 746f 7261 6765 5572 6c46 726f 6d53  (StorageUrlFromS
-00021f20: 7472 696e 6728 6670 6174 6829 2c0a 2020  tring(fpath),.  
-00021f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021f40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021f50: 2020 2020 2020 2020 2020 5472 6163 6b65            Tracke
-00021f60: 7246 696c 6554 7970 652e 444f 574e 4c4f  rFileType.DOWNLO
-00021f70: 4144 2c0a 2020 2020 2020 2020 2020 2020  AD,.            
-00021f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021fa0: 7365 6c66 2e74 6573 745f 6170 6929 0a20  self.test_api). 
-00021fb0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00021fc0: 5472 7565 286f 732e 7061 7468 2e69 7366  True(os.path.isf
-00021fd0: 696c 6528 7472 6163 6b65 725f 6669 6c65  ile(tracker_file
-00021fe0: 6e61 6d65 2929 0a0a 2020 2020 2320 4166  name))..    # Af
-00021ff0: 7465 7220 7369 6d75 6c61 7465 6420 636f  ter simulated co
-00022000: 6e6e 6563 7469 6f6e 2062 7265 616b 2c20  nnection break, 
-00022010: 726f 7461 7465 2074 6865 206b 6579 206f  rotate the key o
-00022020: 6e20 7468 6520 6f62 6a65 6374 2e0a 2020  n the object..  
-00022030: 2020 626f 746f 5f63 6f6e 6669 675f 666f    boto_config_fo
-00022040: 725f 7465 7374 3220 3d20 5b28 2747 5355  r_test2 = [('GSU
-00022050: 7469 6c27 2c20 2772 6573 756d 6162 6c65  til', 'resumable
-00022060: 5f74 6872 6573 686f 6c64 272c 2073 7472  _threshold', str
-00022070: 284f 4e45 5f4b 4942 2929 2c0a 2020 2020  (ONE_KIB)),.    
-00022080: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00022090: 2020 2020 2020 2020 2028 2747 5355 7469           ('GSUti
-000220a0: 6c27 2c20 2764 6563 7279 7074 696f 6e5f  l', 'decryption_
-000220b0: 6b65 7931 272c 0a20 2020 2020 2020 2020  key1',.         
-000220c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000220d0: 2020 2020 2054 4553 545f 454e 4352 5950       TEST_ENCRYP
-000220e0: 5449 4f4e 5f4b 4559 3129 2c0a 2020 2020  TION_KEY1),.    
-000220f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00022100: 2020 2020 2020 2020 2028 2747 5355 7469           ('GSUti
-00022110: 6c27 2c20 2765 6e63 7279 7074 696f 6e5f  l', 'encryption_
-00022120: 6b65 7927 2c20 5445 5354 5f45 4e43 5259  key', TEST_ENCRY
-00022130: 5054 494f 4e5f 4b45 5932 295d 0a20 2020  PTION_KEY2)].   
-00022140: 2077 6974 6820 5365 7442 6f74 6f43 6f6e   with SetBotoCon
-00022150: 6669 6746 6f72 5465 7374 2862 6f74 6f5f  figForTest(boto_
-00022160: 636f 6e66 6967 5f66 6f72 5f74 6573 7432  config_for_test2
-00022170: 293a 0a20 2020 2020 2073 656c 662e 5275  ):.      self.Ru
-00022180: 6e47 7355 7469 6c28 5b27 7265 7772 6974  nGsUtil(['rewrit
-00022190: 6527 2c20 272d 6b27 2c20 7375 7269 286f  e', '-k', suri(o
-000221a0: 626a 6563 745f 7572 6929 5d29 0a0a 2020  bject_uri)])..  
-000221b0: 2020 2320 4e6f 7720 7265 7375 6d65 2074    # Now resume t
-000221c0: 6865 2064 6f77 6e6c 6f61 6420 7573 696e  he download usin
-000221d0: 6720 6f6e 6c79 2074 6865 206e 6577 2065  g only the new e
-000221e0: 6e63 7279 7074 696f 6e20 6b65 792e 2053  ncryption key. S
-000221f0: 696e 6365 2069 7473 0a20 2020 2023 2067  ince its.    # g
-00022200: 656e 6572 6174 696f 6e20 6368 616e 6765  eneration change
-00022210: 642c 2077 6520 6d75 7374 2072 6573 7461  d, we must resta
-00022220: 7274 2069 742e 0a20 2020 2062 6f74 6f5f  rt it..    boto_
-00022230: 636f 6e66 6967 5f66 6f72 5f74 6573 7433  config_for_test3
-00022240: 203d 205b 2827 4753 5574 696c 272c 2027   = [('GSUtil', '
-00022250: 7265 7375 6d61 626c 655f 7468 7265 7368  resumable_thresh
-00022260: 6f6c 6427 2c20 7374 7228 4f4e 455f 4b49  old', str(ONE_KI
-00022270: 4229 292c 0a20 2020 2020 2020 2020 2020  B)),.           
-00022280: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00022290: 2020 2827 4753 5574 696c 272c 2027 656e    ('GSUtil', 'en
-000222a0: 6372 7970 7469 6f6e 5f6b 6579 272c 2054  cryption_key', T
-000222b0: 4553 545f 454e 4352 5950 5449 4f4e 5f4b  EST_ENCRYPTION_K
-000222c0: 4559 3229 5d0a 2020 2020 7769 7468 2053  EY2)].    with S
-000222d0: 6574 426f 746f 436f 6e66 6967 466f 7254  etBotoConfigForT
-000222e0: 6573 7428 626f 746f 5f63 6f6e 6669 675f  est(boto_config_
-000222f0: 666f 725f 7465 7374 3329 3a0a 2020 2020  for_test3):.    
-00022300: 2020 7374 6465 7272 203d 2073 656c 662e    stderr = self.
-00022310: 5275 6e47 7355 7469 6c28 5b27 6370 272c  RunGsUtil(['cp',
-00022320: 2073 7572 6928 6f62 6a65 6374 5f75 7269   suri(object_uri
-00022330: 292c 2066 7061 7468 5d2c 0a20 2020 2020  ), fpath],.     
-00022340: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00022350: 2020 2020 2020 2020 2072 6574 7572 6e5f           return_
-00022360: 7374 6465 7272 3d54 7275 6529 0a20 2020  stderr=True).   
-00022370: 2020 2073 656c 662e 6173 7365 7274 496e     self.assertIn
-00022380: 2827 5265 7374 6172 7469 6e67 2064 6f77  ('Restarting dow
-00022390: 6e6c 6f61 6427 2c20 7374 6465 7272 290a  nload', stderr).
-000223a0: 2020 2020 7769 7468 206f 7065 6e28 6670      with open(fp
-000223b0: 6174 682c 2027 7262 2729 2061 7320 663a  ath, 'rb') as f:
-000223c0: 0a20 2020 2020 2073 656c 662e 6173 7365  .      self.asse
-000223d0: 7274 4571 7561 6c28 662e 7265 6164 2829  rtEqual(f.read()
-000223e0: 2c20 6669 6c65 5f63 6f6e 7465 6e74 732c  , file_contents,
-000223f0: 2027 4669 6c65 2063 6f6e 7465 6e74 7320   'File contents 
-00022400: 6469 6666 6572 2729 0a0a 2020 4053 6571  differ')..  @Seq
-00022410: 7565 6e74 6961 6c41 6e64 5061 7261 6c6c  uentialAndParall
-00022420: 656c 5472 616e 7366 6572 0a20 2064 6566  elTransfer.  def
-00022430: 2074 6573 745f 6370 5f72 6573 756d 6162   test_cp_resumab
-00022440: 6c65 5f64 6f77 6e6c 6f61 645f 6574 6167  le_download_etag
-00022450: 5f64 6966 6665 7273 2873 656c 6629 3a0a  _differs(self):.
-00022460: 2020 2020 2222 2254 6573 7473 2074 6861      """Tests tha
-00022470: 7420 646f 776e 6c6f 6164 2072 6573 7461  t download resta
-00022480: 7274 7320 7468 6520 6669 6c65 2077 6865  rts the file whe
-00022490: 6e20 7468 6520 736f 7572 6365 206f 626a  n the source obj
-000224a0: 6563 7420 6368 616e 6765 732e 0a0a 2020  ect changes...  
-000224b0: 2020 5468 6973 2063 6175 7365 7320 7468    This causes th
-000224c0: 6520 6574 6167 206e 6f74 2074 6f20 6d61  e etag not to ma
-000224d0: 7463 682e 0a20 2020 2022 2222 0a20 2020  tch..    """.   
-000224e0: 2062 7563 6b65 745f 7572 6920 3d20 7365   bucket_uri = se
-000224f0: 6c66 2e43 7265 6174 6542 7563 6b65 7428  lf.CreateBucket(
-00022500: 290a 2020 2020 6f62 6a65 6374 5f75 7269  ).    object_uri
-00022510: 203d 2073 656c 662e 4372 6561 7465 4f62   = self.CreateOb
-00022520: 6a65 6374 2862 7563 6b65 745f 7572 693d  ject(bucket_uri=
-00022530: 6275 636b 6574 5f75 7269 2c0a 2020 2020  bucket_uri,.    
-00022540: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00022550: 2020 2020 2020 2020 2020 2020 2020 206f                 o
-00022560: 626a 6563 745f 6e61 6d65 3d27 666f 6f27  bject_name='foo'
-00022570: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00022580: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00022590: 2020 2020 2063 6f6e 7465 6e74 733d 6227       contents=b'
-000225a0: 6162 6327 202a 2073 656c 662e 6861 6c74  abc' * self.halt
-000225b0: 5f73 697a 6529 0a20 2020 2066 7061 7468  _size).    fpath
-000225c0: 203d 2073 656c 662e 4372 6561 7465 5465   = self.CreateTe
-000225d0: 6d70 4669 6c65 2829 0a20 2020 2074 6573  mpFile().    tes
-000225e0: 745f 6361 6c6c 6261 636b 5f66 696c 6520  t_callback_file 
-000225f0: 3d20 7365 6c66 2e43 7265 6174 6554 656d  = self.CreateTem
-00022600: 7046 696c 6528 0a20 2020 2020 2020 2063  pFile(.        c
-00022610: 6f6e 7465 6e74 733d 7069 636b 6c65 2e64  ontents=pickle.d
-00022620: 756d 7073 2848 616c 7469 6e67 436f 7079  umps(HaltingCopy
-00022630: 4361 6c6c 6261 636b 4861 6e64 6c65 7228  CallbackHandler(
-00022640: 4661 6c73 652c 2035 2929 290a 2020 2020  False, 5))).    
-00022650: 626f 746f 5f63 6f6e 6669 675f 666f 725f  boto_config_for_
-00022660: 7465 7374 203d 2028 2747 5355 7469 6c27  test = ('GSUtil'
-00022670: 2c20 2772 6573 756d 6162 6c65 5f74 6872  , 'resumable_thr
-00022680: 6573 686f 6c64 272c 2073 7472 284f 4e45  eshold', str(ONE
-00022690: 5f4b 4942 2929 0a20 2020 2077 6974 6820  _KIB)).    with 
-000226a0: 5365 7442 6f74 6f43 6f6e 6669 6746 6f72  SetBotoConfigFor
-000226b0: 5465 7374 285b 626f 746f 5f63 6f6e 6669  Test([boto_confi
-000226c0: 675f 666f 725f 7465 7374 5d29 3a0a 2020  g_for_test]):.  
-000226d0: 2020 2020 2320 5468 6973 2077 696c 6c20      # This will 
-000226e0: 6372 6561 7465 2061 2074 7261 636b 6572  create a tracker
-000226f0: 2066 696c 6520 7769 7468 2061 6e20 4554   file with an ET
-00022700: 6167 2e0a 2020 2020 2020 7374 6465 7272  ag..      stderr
-00022710: 203d 2073 656c 662e 5275 6e47 7355 7469   = self.RunGsUti
-00022720: 6c28 5b0a 2020 2020 2020 2020 2020 2763  l([.          'c
-00022730: 7027 2c20 272d 2d74 6573 7463 616c 6c62  p', '--testcallb
-00022740: 6163 6b66 696c 6527 2c20 7465 7374 5f63  ackfile', test_c
-00022750: 616c 6c62 6163 6b5f 6669 6c65 2c0a 2020  allback_file,.  
-00022760: 2020 2020 2020 2020 7375 7269 286f 626a          suri(obj
-00022770: 6563 745f 7572 6929 2c20 6670 6174 680a  ect_uri), fpath.
-00022780: 2020 2020 2020 5d2c 0a20 2020 2020 2020        ],.       
-00022790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000227a0: 2020 2020 2020 2065 7870 6563 7465 645f         expected_
-000227b0: 7374 6174 7573 3d31 2c0a 2020 2020 2020  status=1,.      
-000227c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000227d0: 2020 2020 2020 2020 7265 7475 726e 5f73          return_s
-000227e0: 7464 6572 723d 5472 7565 290a 2020 2020  tderr=True).    
-000227f0: 2020 7365 6c66 2e61 7373 6572 7449 6e28    self.assertIn(
-00022800: 2741 7274 6966 6963 616c 6c79 2068 616c  'Artifically hal
-00022810: 7469 6e67 2064 6f77 6e6c 6f61 642e 272c  ting download.',
-00022820: 2073 7464 6572 7229 0a20 2020 2020 2023   stderr).      #
-00022830: 2043 7265 6174 6520 6120 6e65 7720 6f62   Create a new ob
-00022840: 6a65 6374 2077 6974 6820 6469 6666 6572  ject with differ
-00022850: 656e 7420 636f 6e74 656e 7473 202d 2069  ent contents - i
-00022860: 7420 7368 6f75 6c64 2068 6176 6520 610a  t should have a.
-00022870: 2020 2020 2020 2320 6469 6666 6572 656e        # differen
-00022880: 7420 4554 6167 2073 696e 6365 2074 6865  t ETag since the
-00022890: 2063 6f6e 7465 6e74 2068 6173 2063 6861   content has cha
-000228a0: 6e67 6564 2e0a 2020 2020 2020 6f62 6a65  nged..      obje
-000228b0: 6374 5f75 7269 203d 2073 656c 662e 4372  ct_uri = self.Cr
-000228c0: 6561 7465 4f62 6a65 6374 280a 2020 2020  eateObject(.    
-000228d0: 2020 2020 2020 6275 636b 6574 5f75 7269        bucket_uri
-000228e0: 3d62 7563 6b65 745f 7572 692c 0a20 2020  =bucket_uri,.   
-000228f0: 2020 2020 2020 206f 626a 6563 745f 6e61         object_na
-00022900: 6d65 3d27 666f 6f27 2c0a 2020 2020 2020  me='foo',.      
-00022910: 2020 2020 636f 6e74 656e 7473 3d62 2762      contents=b'b
-00022920: 2720 2a20 7365 6c66 2e68 616c 745f 7369  ' * self.halt_si
-00022930: 7a65 2c0a 2020 2020 2020 2020 2020 6773  ze,.          gs
-00022940: 5f69 6465 6d70 6f74 656e 745f 6765 6e65  _idempotent_gene
-00022950: 7261 7469 6f6e 3d6f 626a 6563 745f 7572  ration=object_ur
-00022960: 692e 6765 6e65 7261 7469 6f6e 290a 2020  i.generation).  
-00022970: 2020 2020 7374 6465 7272 203d 2073 656c      stderr = sel
-00022980: 662e 5275 6e47 7355 7469 6c28 5b27 6370  f.RunGsUtil(['cp
-00022990: 272c 2073 7572 6928 6f62 6a65 6374 5f75  ', suri(object_u
-000229a0: 7269 292c 2066 7061 7468 5d2c 0a20 2020  ri), fpath],.   
-000229b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000229c0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-000229d0: 6e5f 7374 6465 7272 3d54 7275 6529 0a20  n_stderr=True). 
-000229e0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-000229f0: 4e6f 7449 6e28 2752 6573 756d 696e 6720  NotIn('Resuming 
-00022a00: 646f 776e 6c6f 6164 272c 2073 7464 6572  download', stder
-00022a10: 7229 0a0a 2020 2320 544f 444f 3a20 456e  r)..  # TODO: En
-00022a20: 6162 6c65 2074 6869 7320 7465 7374 2066  able this test f
-00022a30: 6f72 2073 6571 7565 6e74 6961 6c20 646f  or sequential do
-00022a40: 776e 6c6f 6164 7320 7768 656e 2074 6865  wnloads when the
-00022a50: 6972 2074 7261 636b 6572 2066 696c 6573  ir tracker files
-00022a60: 2061 7265 0a20 2023 206d 6f64 6966 6965   are.  # modifie
-00022a70: 6420 746f 2063 6f6e 7461 696e 2074 6865  d to contain the
-00022a80: 2073 6f75 7263 6520 6f62 6a65 6374 2067   source object g
-00022a90: 656e 6572 6174 696f 6e2e 0a20 2040 756e  eneration..  @un
-00022aa0: 6974 7465 7374 2e73 6b69 7055 6e6c 6573  ittest.skipUnles
-00022ab0: 7328 5573 696e 6743 7263 6d6f 6445 7874  s(UsingCrcmodExt
-00022ac0: 656e 7369 6f6e 2829 2c0a 2020 2020 2020  ension(),.      
-00022ad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00022ae0: 2027 536c 6963 6564 2064 6f77 6e6c 6f61   'Sliced downloa
-00022af0: 6420 7265 7175 6972 6573 2066 6173 7420  d requires fast 
-00022b00: 6372 636d 6f64 2e27 290a 2020 4053 6b69  crcmod.').  @Ski
-00022b10: 7046 6f72 5333 2827 4e6f 2073 6c69 6365  pForS3('No slice
-00022b20: 6420 646f 776e 6c6f 6164 2073 7570 706f  d download suppo
-00022b30: 7274 2066 6f72 2053 332e 2729 0a20 2064  rt for S3.').  d
-00022b40: 6566 2074 6573 745f 6370 5f72 6573 756d  ef test_cp_resum
-00022b50: 6162 6c65 5f64 6f77 6e6c 6f61 645f 6765  able_download_ge
-00022b60: 6e65 7261 7469 6f6e 5f64 6966 6665 7273  neration_differs
-00022b70: 2873 656c 6629 3a0a 2020 2020 2222 2254  (self):.    """T
-00022b80: 6573 7473 2074 6861 7420 6120 7265 7375  ests that a resu
-00022b90: 6d61 626c 6520 646f 776e 6c6f 6164 2072  mable download r
-00022ba0: 6573 7461 7274 7320 6966 2074 6865 2067  estarts if the g
-00022bb0: 656e 6572 6174 696f 6e20 6469 6666 6572  eneration differ
-00022bc0: 732e 2222 220a 2020 2020 6275 636b 6574  s.""".    bucket
-00022bd0: 5f75 7269 203d 2073 656c 662e 4372 6561  _uri = self.Crea
-00022be0: 7465 4275 636b 6574 2829 0a20 2020 2066  teBucket().    f
-00022bf0: 696c 655f 636f 6e74 656e 7473 203d 2062  ile_contents = b
-00022c00: 2761 6263 6427 202a 2073 656c 662e 6861  'abcd' * self.ha
-00022c10: 6c74 5f73 697a 650a 2020 2020 6f62 6a65  lt_size.    obje
-00022c20: 6374 5f75 7269 203d 2073 656c 662e 4372  ct_uri = self.Cr
-00022c30: 6561 7465 4f62 6a65 6374 2862 7563 6b65  eateObject(bucke
-00022c40: 745f 7572 693d 6275 636b 6574 5f75 7269  t_uri=bucket_uri
-00022c50: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00022c60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00022c70: 2020 2020 206f 626a 6563 745f 6e61 6d65       object_name
-00022c80: 3d27 666f 6f27 2c0a 2020 2020 2020 2020  ='foo',.        
-00022c90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00022ca0: 2020 2020 2020 2020 2020 2063 6f6e 7465             conte
-00022cb0: 6e74 733d 6669 6c65 5f63 6f6e 7465 6e74  nts=file_content
-00022cc0: 7329 0a20 2020 2066 7061 7468 203d 2073  s).    fpath = s
-00022cd0: 656c 662e 4372 6561 7465 5465 6d70 4669  elf.CreateTempFi
-00022ce0: 6c65 2829 0a0a 2020 2020 7465 7374 5f63  le()..    test_c
-00022cf0: 616c 6c62 6163 6b5f 6669 6c65 203d 2073  allback_file = s
-00022d00: 656c 662e 4372 6561 7465 5465 6d70 4669  elf.CreateTempFi
-00022d10: 6c65 280a 2020 2020 2020 2020 636f 6e74  le(.        cont
-00022d20: 656e 7473 3d70 6963 6b6c 652e 6475 6d70  ents=pickle.dump
-00022d30: 7328 4861 6c74 696e 6743 6f70 7943 616c  s(HaltingCopyCal
-00022d40: 6c62 6163 6b48 616e 646c 6572 2846 616c  lbackHandler(Fal
-00022d50: 7365 2c20 3529 2929 0a0a 2020 2020 626f  se, 5)))..    bo
-00022d60: 746f 5f63 6f6e 6669 675f 666f 725f 7465  to_config_for_te
-00022d70: 7374 203d 205b 0a20 2020 2020 2020 2028  st = [.        (
-00022d80: 2747 5355 7469 6c27 2c20 2772 6573 756d  'GSUtil', 'resum
-00022d90: 6162 6c65 5f74 6872 6573 686f 6c64 272c  able_threshold',
-00022da0: 2073 7472 2873 656c 662e 6861 6c74 5f73   str(self.halt_s
-00022db0: 697a 6529 292c 0a20 2020 2020 2020 2028  ize)),.        (
-00022dc0: 2747 5355 7469 6c27 2c20 2773 6c69 6365  'GSUtil', 'slice
-00022dd0: 645f 6f62 6a65 6374 5f64 6f77 6e6c 6f61  d_object_downloa
-00022de0: 645f 7468 7265 7368 6f6c 6427 2c20 7374  d_threshold', st
-00022df0: 7228 7365 6c66 2e68 616c 745f 7369 7a65  r(self.halt_size
-00022e00: 2929 2c0a 2020 2020 2020 2020 2827 4753  )),.        ('GS
-00022e10: 5574 696c 272c 2027 736c 6963 6564 5f6f  Util', 'sliced_o
-00022e20: 626a 6563 745f 646f 776e 6c6f 6164 5f6d  bject_download_m
-00022e30: 6178 5f63 6f6d 706f 6e65 6e74 7327 2c20  ax_components', 
-00022e40: 2733 2729 0a20 2020 205d 0a0a 2020 2020  '3').    ]..    
-00022e50: 7769 7468 2053 6574 426f 746f 436f 6e66  with SetBotoConf
-00022e60: 6967 466f 7254 6573 7428 626f 746f 5f63  igForTest(boto_c
-00022e70: 6f6e 6669 675f 666f 725f 7465 7374 293a  onfig_for_test):
-00022e80: 0a20 2020 2020 2073 7464 6572 7220 3d20  .      stderr = 
-00022e90: 7365 6c66 2e52 756e 4773 5574 696c 285b  self.RunGsUtil([
-00022ea0: 0a20 2020 2020 2020 2020 2027 6370 272c  .          'cp',
-00022eb0: 2027 2d2d 7465 7374 6361 6c6c 6261 636b   '--testcallback
-00022ec0: 6669 6c65 272c 2074 6573 745f 6361 6c6c  file', test_call
-00022ed0: 6261 636b 5f66 696c 652c 0a20 2020 2020  back_file,.     
-00022ee0: 2020 2020 2073 7572 6928 6f62 6a65 6374       suri(object
-00022ef0: 5f75 7269 292c 0a20 2020 2020 2020 2020  _uri),.         
-00022f00: 2073 7572 6928 6670 6174 6829 0a20 2020   suri(fpath).   
-00022f10: 2020 205d 2c0a 2020 2020 2020 2020 2020     ],.          
-00022f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00022f30: 2020 2020 7265 7475 726e 5f73 7464 6572      return_stder
-00022f40: 723d 5472 7565 2c0a 2020 2020 2020 2020  r=True,.        
-00022f50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00022f60: 2020 2020 2020 6578 7065 6374 6564 5f73        expected_s
-00022f70: 7461 7475 733d 3129 0a20 2020 2020 2073  tatus=1).      s
-00022f80: 656c 662e 6173 7365 7274 496e 2827 4172  elf.assertIn('Ar
-00022f90: 7469 6669 6361 6c6c 7920 6861 6c74 696e  tifically haltin
-00022fa0: 6720 646f 776e 6c6f 6164 2e27 2c20 7374  g download.', st
-00022fb0: 6465 7272 290a 0a20 2020 2020 2023 204f  derr)..      # O
-00022fc0: 7665 7277 7269 7465 2074 6865 206f 626a  verwrite the obj
-00022fd0: 6563 7420 7769 7468 2061 6e20 6964 656e  ect with an iden
-00022fe0: 7469 6361 6c20 6f62 6a65 6374 2c20 696e  tical object, in
-00022ff0: 6372 6561 7369 6e67 0a20 2020 2020 2023  creasing.      #
-00023000: 2074 6865 2067 656e 6572 6174 696f 6e20   the generation 
-00023010: 6275 7420 6c65 6176 696e 6720 6f74 6865  but leaving othe
-00023020: 7220 6d65 7461 6461 7461 2074 6865 2073  r metadata the s
-00023030: 616d 652e 0a20 2020 2020 2069 6465 6e74  ame..      ident
-00023040: 6963 616c 5f66 696c 6520 3d20 7365 6c66  ical_file = self
-00023050: 2e43 7265 6174 6554 656d 7046 696c 6528  .CreateTempFile(
-00023060: 636f 6e74 656e 7473 3d66 696c 655f 636f  contents=file_co
-00023070: 6e74 656e 7473 290a 2020 2020 2020 7365  ntents).      se
-00023080: 6c66 2e52 756e 4773 5574 696c 285b 2763  lf.RunGsUtil(['c
-00023090: 7027 2c20 7375 7269 2869 6465 6e74 6963  p', suri(identic
-000230a0: 616c 5f66 696c 6529 2c20 7375 7269 286f  al_file), suri(o
-000230b0: 626a 6563 745f 7572 6929 5d29 0a0a 2020  bject_uri)])..  
-000230c0: 2020 2020 7374 6465 7272 203d 2073 656c      stderr = sel
-000230d0: 662e 5275 6e47 7355 7469 6c28 0a20 2020  f.RunGsUtil(.   
-000230e0: 2020 2020 2020 205b 2763 7027 2c20 7375         ['cp', su
-000230f0: 7269 286f 626a 6563 745f 7572 6929 2c20  ri(object_uri), 
-00023100: 7375 7269 2866 7061 7468 295d 2c20 7265  suri(fpath)], re
-00023110: 7475 726e 5f73 7464 6572 723d 5472 7565  turn_stderr=True
-00023120: 290a 2020 2020 2020 7365 6c66 2e61 7373  ).      self.ass
-00023130: 6572 7449 6e28 2752 6573 7461 7274 696e  ertIn('Restartin
-00023140: 6720 646f 776e 6c6f 6164 2066 726f 6d20  g download from 
-00023150: 7363 7261 7463 6827 2c20 7374 6465 7272  scratch', stderr
-00023160: 290a 2020 2020 2020 7769 7468 206f 7065  ).      with ope
-00023170: 6e28 6670 6174 682c 2027 7262 2729 2061  n(fpath, 'rb') a
-00023180: 7320 663a 0a20 2020 2020 2020 2073 656c  s f:.        sel
-00023190: 662e 6173 7365 7274 4571 7561 6c28 662e  f.assertEqual(f.
-000231a0: 7265 6164 2829 2c20 6669 6c65 5f63 6f6e  read(), file_con
-000231b0: 7465 6e74 732c 2027 4669 6c65 2063 6f6e  tents, 'File con
-000231c0: 7465 6e74 7320 6469 6666 6572 2729 0a0a  tents differ')..
-000231d0: 2020 6465 6620 7465 7374 5f63 705f 7265    def test_cp_re
-000231e0: 7375 6d61 626c 655f 646f 776e 6c6f 6164  sumable_download
-000231f0: 5f66 696c 655f 6c61 7267 6572 2873 656c  _file_larger(sel
-00023200: 6629 3a0a 2020 2020 2222 2254 6573 7473  f):.    """Tests
-00023210: 2064 6f77 6e6c 6f61 6420 6465 6c65 7465   download delete
-00023220: 7320 7468 6520 7472 6163 6b65 7220 6669  s the tracker fi
-00023230: 6c65 2077 6865 6e20 6578 6973 7469 6e67  le when existing
-00023240: 2066 696c 6520 6973 206c 6172 6765 722e   file is larger.
-00023250: 2222 220a 2020 2020 6275 636b 6574 5f75  """.    bucket_u
-00023260: 7269 203d 2073 656c 662e 4372 6561 7465  ri = self.Create
-00023270: 4275 636b 6574 2829 0a20 2020 2066 7061  Bucket().    fpa
-00023280: 7468 203d 2073 656c 662e 4372 6561 7465  th = self.Create
-00023290: 5465 6d70 4669 6c65 2829 0a20 2020 206f  TempFile().    o
-000232a0: 626a 6563 745f 7572 6920 3d20 7365 6c66  bject_uri = self
-000232b0: 2e43 7265 6174 654f 626a 6563 7428 6275  .CreateObject(bu
-000232c0: 636b 6574 5f75 7269 3d62 7563 6b65 745f  cket_uri=bucket_
-000232d0: 7572 692c 0a20 2020 2020 2020 2020 2020  uri,.           
-000232e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000232f0: 2020 2020 2020 2020 6f62 6a65 6374 5f6e          object_n
-00023300: 616d 653d 2766 6f6f 272c 0a20 2020 2020  ame='foo',.     
-00023310: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023320: 2020 2020 2020 2020 2020 2020 2020 636f                co
-00023330: 6e74 656e 7473 3d62 2761 2720 2a20 7365  ntents=b'a' * se
-00023340: 6c66 2e68 616c 745f 7369 7a65 290a 2020  lf.halt_size).  
-00023350: 2020 7465 7374 5f63 616c 6c62 6163 6b5f    test_callback_
-00023360: 6669 6c65 203d 2073 656c 662e 4372 6561  file = self.Crea
-00023370: 7465 5465 6d70 4669 6c65 280a 2020 2020  teTempFile(.    
-00023380: 2020 2020 636f 6e74 656e 7473 3d70 6963      contents=pic
-00023390: 6b6c 652e 6475 6d70 7328 4861 6c74 696e  kle.dumps(Haltin
-000233a0: 6743 6f70 7943 616c 6c62 6163 6b48 616e  gCopyCallbackHan
-000233b0: 646c 6572 2846 616c 7365 2c20 3529 2929  dler(False, 5)))
-000233c0: 0a20 2020 2062 6f74 6f5f 636f 6e66 6967  .    boto_config
-000233d0: 5f66 6f72 5f74 6573 7420 3d20 2827 4753  _for_test = ('GS
-000233e0: 5574 696c 272c 2027 7265 7375 6d61 626c  Util', 'resumabl
-000233f0: 655f 7468 7265 7368 6f6c 6427 2c20 7374  e_threshold', st
-00023400: 7228 4f4e 455f 4b49 4229 290a 2020 2020  r(ONE_KIB)).    
-00023410: 7769 7468 2053 6574 426f 746f 436f 6e66  with SetBotoConf
-00023420: 6967 466f 7254 6573 7428 5b62 6f74 6f5f  igForTest([boto_
-00023430: 636f 6e66 6967 5f66 6f72 5f74 6573 745d  config_for_test]
-00023440: 293a 0a20 2020 2020 2073 7464 6572 7220  ):.      stderr 
-00023450: 3d20 7365 6c66 2e52 756e 4773 5574 696c  = self.RunGsUtil
-00023460: 285b 0a20 2020 2020 2020 2020 2027 6370  ([.          'cp
-00023470: 272c 2027 2d2d 7465 7374 6361 6c6c 6261  ', '--testcallba
-00023480: 636b 6669 6c65 272c 2074 6573 745f 6361  ckfile', test_ca
-00023490: 6c6c 6261 636b 5f66 696c 652c 0a20 2020  llback_file,.   
-000234a0: 2020 2020 2020 2073 7572 6928 6f62 6a65         suri(obje
-000234b0: 6374 5f75 7269 292c 2066 7061 7468 0a20  ct_uri), fpath. 
-000234c0: 2020 2020 205d 2c0a 2020 2020 2020 2020       ],.        
-000234d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000234e0: 2020 2020 2020 6578 7065 6374 6564 5f73        expected_s
-000234f0: 7461 7475 733d 312c 0a20 2020 2020 2020  tatus=1,.       
-00023500: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023510: 2020 2020 2020 2072 6574 7572 6e5f 7374         return_st
-00023520: 6465 7272 3d54 7275 6529 0a20 2020 2020  derr=True).     
-00023530: 2073 656c 662e 6173 7365 7274 496e 2827   self.assertIn('
-00023540: 4172 7469 6669 6361 6c6c 7920 6861 6c74  Artifically halt
-00023550: 696e 6720 646f 776e 6c6f 6164 2e27 2c20  ing download.', 
-00023560: 7374 6465 7272 290a 2020 2020 2020 7769  stderr).      wi
-00023570: 7468 206f 7065 6e28 6670 6174 6820 2b20  th open(fpath + 
-00023580: 275f 2e67 7374 6d70 272c 2027 7727 2920  '_.gstmp', 'w') 
-00023590: 6173 206c 6172 6765 725f 6669 6c65 3a0a  as larger_file:.
-000235a0: 2020 2020 2020 2020 666f 7220 5f20 696e          for _ in
-000235b0: 2072 616e 6765 2873 656c 662e 6861 6c74   range(self.halt
-000235c0: 5f73 697a 6520 2a20 3229 3a0a 2020 2020  _size * 2):.    
-000235d0: 2020 2020 2020 6c61 7267 6572 5f66 696c        larger_fil
-000235e0: 652e 7772 6974 6528 2761 2729 0a20 2020  e.write('a').   
-000235f0: 2020 2073 7464 6572 7220 3d20 7365 6c66     stderr = self
-00023600: 2e52 756e 4773 5574 696c 285b 2763 7027  .RunGsUtil(['cp'
-00023610: 2c20 7375 7269 286f 626a 6563 745f 7572  , suri(object_ur
-00023620: 6929 2c20 6670 6174 685d 2c0a 2020 2020  i), fpath],.    
-00023630: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023640: 2020 2020 2020 2020 2020 6578 7065 6374            expect
-00023650: 6564 5f73 7461 7475 733d 312c 0a20 2020  ed_status=1,.   
-00023660: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023670: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00023680: 6e5f 7374 6465 7272 3d54 7275 6529 0a20  n_stderr=True). 
-00023690: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-000236a0: 4e6f 7449 6e28 2752 6573 756d 696e 6720  NotIn('Resuming 
-000236b0: 646f 776e 6c6f 6164 272c 2073 7464 6572  download', stder
-000236c0: 7229 0a20 2020 2020 2073 656c 662e 6173  r).      self.as
-000236d0: 7365 7274 496e 2827 4465 6c65 7469 6e67  sertIn('Deleting
-000236e0: 2074 7261 636b 6572 2066 696c 6527 2c20   tracker file', 
-000236f0: 7374 6465 7272 290a 0a20 2064 6566 2074  stderr)..  def t
-00023700: 6573 745f 6370 5f72 6573 756d 6162 6c65  est_cp_resumable
-00023710: 5f64 6f77 6e6c 6f61 645f 636f 6e74 656e  _download_conten
-00023720: 745f 6469 6666 6572 7328 7365 6c66 293a  t_differs(self):
-00023730: 0a20 2020 2022 2222 5465 7374 7320 7468  .    """Tests th
-00023740: 6174 2077 6520 646f 206e 6f74 2072 652d  at we do not re-
-00023750: 646f 776e 6c6f 6164 2077 6865 6e20 7472  download when tr
-00023760: 6163 6b65 7220 6669 6c65 206d 6174 6368  acker file match
-00023770: 6573 2065 7869 7374 696e 6720 6669 6c65  es existing file
-00023780: 2e0a 0a20 2020 2057 6520 6f6e 6c79 2063  ...    We only c
-00023790: 6f6d 7061 7265 2073 697a 652c 206e 6f74  ompare size, not
-000237a0: 2063 6f6e 7465 6e74 732c 2073 6f20 7265   contents, so re
-000237b0: 2d64 6f77 6e6c 6f61 6420 7368 6f75 6c64  -download should
-000237c0: 206e 6f74 206f 6363 7572 2065 7665 6e0a   not occur even.
-000237d0: 2020 2020 7468 6f75 6768 2074 6865 2063      though the c
-000237e0: 6f6e 7465 6e74 7320 6172 6520 7465 6368  ontents are tech
-000237f0: 6e69 6361 6c6c 7920 6469 6666 6572 656e  nically differen
-00023800: 742e 2048 6f77 6576 6572 2c20 6861 7368  t. However, hash
-00023810: 2076 616c 6964 6174 696f 6e20 6f6e 0a20   validation on. 
-00023820: 2020 2074 6865 2066 696c 6520 7368 6f75     the file shou
-00023830: 6c64 2073 7469 6c6c 206f 6363 7572 2061  ld still occur a
-00023840: 6e64 2077 6520 7769 6c6c 2064 656c 6574  nd we will delet
-00023850: 6520 7468 6520 6669 6c65 2074 6865 6e20  e the file then 
-00023860: 6265 6361 7573 650a 2020 2020 7468 6520  because.    the 
-00023870: 6861 7368 6573 2064 6966 6665 722e 0a20  hashes differ.. 
-00023880: 2020 2022 2222 0a20 2020 2062 7563 6b65     """.    bucke
-00023890: 745f 7572 6920 3d20 7365 6c66 2e43 7265  t_uri = self.Cre
-000238a0: 6174 6542 7563 6b65 7428 290a 2020 2020  ateBucket().    
-000238b0: 746d 705f 6469 7220 3d20 7365 6c66 2e43  tmp_dir = self.C
-000238c0: 7265 6174 6554 656d 7044 6972 2829 0a20  reateTempDir(). 
-000238d0: 2020 2066 7061 7468 203d 2073 656c 662e     fpath = self.
-000238e0: 4372 6561 7465 5465 6d70 4669 6c65 2874  CreateTempFile(t
-000238f0: 6d70 6469 723d 746d 705f 6469 7229 0a20  mpdir=tmp_dir). 
-00023900: 2020 2074 656d 705f 646f 776e 6c6f 6164     temp_download
-00023910: 5f66 696c 6520 3d20 6670 6174 6820 2b20  _file = fpath + 
-00023920: 275f 2e67 7374 6d70 270a 2020 2020 7769  '_.gstmp'.    wi
-00023930: 7468 206f 7065 6e28 7465 6d70 5f64 6f77  th open(temp_dow
-00023940: 6e6c 6f61 645f 6669 6c65 2c20 2777 2729  nload_file, 'w')
-00023950: 2061 7320 6670 3a0a 2020 2020 2020 6670   as fp:.      fp
-00023960: 2e77 7269 7465 2827 6162 6364 2720 2a20  .write('abcd' * 
-00023970: 4f4e 455f 4b49 4229 0a0a 2020 2020 6f62  ONE_KIB)..    ob
-00023980: 6a65 6374 5f75 7269 203d 2073 656c 662e  ject_uri = self.
-00023990: 4372 6561 7465 4f62 6a65 6374 2862 7563  CreateObject(buc
-000239a0: 6b65 745f 7572 693d 6275 636b 6574 5f75  ket_uri=bucket_u
-000239b0: 7269 2c0a 2020 2020 2020 2020 2020 2020  ri,.            
-000239c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000239d0: 2020 2020 2020 206f 626a 6563 745f 6e61         object_na
-000239e0: 6d65 3d27 666f 6f27 2c0a 2020 2020 2020  me='foo',.      
-000239f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023a00: 2020 2020 2020 2020 2020 2020 2063 6f6e               con
-00023a10: 7465 6e74 733d 6227 6566 6768 2720 2a20  tents=b'efgh' * 
-00023a20: 4f4e 455f 4b49 4229 0a20 2020 2073 7464  ONE_KIB).    std
-00023a30: 6f75 7420 3d20 7365 6c66 2e52 756e 4773  out = self.RunGs
-00023a40: 5574 696c 285b 276c 7327 2c20 272d 4c27  Util(['ls', '-L'
-00023a50: 2c20 7375 7269 286f 626a 6563 745f 7572  , suri(object_ur
-00023a60: 6929 5d2c 2072 6574 7572 6e5f 7374 646f  i)], return_stdo
-00023a70: 7574 3d54 7275 6529 0a20 2020 2065 7461  ut=True).    eta
-00023a80: 675f 6d61 7463 6820 3d20 7265 2e73 6561  g_match = re.sea
-00023a90: 7263 6828 7227 5c73 2a45 5461 673a 5c73  rch(r'\s*ETag:\s
-00023aa0: 2a28 2e2a 2927 2c20 7374 646f 7574 290a  *(.*)', stdout).
-00023ab0: 2020 2020 7365 6c66 2e61 7373 6572 7449      self.assertI
-00023ac0: 734e 6f74 4e6f 6e65 2865 7461 675f 6d61  sNotNone(etag_ma
-00023ad0: 7463 682c 2027 436f 756c 6420 6e6f 7420  tch, 'Could not 
-00023ae0: 6765 7420 6f62 6a65 6374 2045 5461 6727  get object ETag'
-00023af0: 290a 2020 2020 7365 6c66 2e61 7373 6572  ).    self.asser
-00023b00: 7445 7175 616c 286c 656e 2865 7461 675f  tEqual(len(etag_
-00023b10: 6d61 7463 682e 6772 6f75 7073 2829 292c  match.groups()),
-00023b20: 2031 2c0a 2020 2020 2020 2020 2020 2020   1,.            
-00023b30: 2020 2020 2020 2020 2027 4469 6420 6e6f           'Did no
-00023b40: 7420 6d61 7463 6820 6578 7065 6374 6564  t match expected
-00023b50: 2073 696e 676c 6520 4554 6167 2729 0a20   single ETag'). 
-00023b60: 2020 2065 7461 6720 3d20 6574 6167 5f6d     etag = etag_m
-00023b70: 6174 6368 2e67 726f 7570 2831 290a 0a20  atch.group(1).. 
-00023b80: 2020 2074 7261 636b 6572 5f66 696c 656e     tracker_filen
-00023b90: 616d 6520 3d20 4765 7454 7261 636b 6572  ame = GetTracker
-00023ba0: 4669 6c65 5061 7468 2853 746f 7261 6765  FilePath(Storage
-00023bb0: 5572 6c46 726f 6d53 7472 696e 6728 6670  UrlFromString(fp
-00023bc0: 6174 6829 2c0a 2020 2020 2020 2020 2020  ath),.          
-00023bd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023bf0: 5472 6163 6b65 7246 696c 6554 7970 652e  TrackerFileType.
-00023c00: 444f 574e 4c4f 4144 2c0a 2020 2020 2020  DOWNLOAD,.      
+000208b0: 2020 2020 2066 696c 655f 6e61 6d65 3d66       file_name=f
+000208c0: 696c 655f 6e61 6d65 290a 2020 2020 7372  ile_name).    sr
+000208d0: 635f 7572 6c20 3d20 5374 6f72 6167 6555  c_url = StorageU
+000208e0: 726c 4672 6f6d 5374 7269 6e67 2873 6f75  rlFromString(sou
+000208f0: 7263 655f 6669 6c65 290a 0a20 2020 2023  rce_file)..    #
+00020900: 2053 696d 756c 6174 6520 616e 2075 706c   Simulate an upl
+00020910: 6f61 6420 7468 6174 2068 6164 206f 6363  oad that had occ
+00020920: 7572 7265 6420 6279 2077 7269 7469 6e67  urred by writing
+00020930: 2061 2074 7261 636b 6572 2066 696c 650a   a tracker file.
+00020940: 2020 2020 2320 7468 6174 2070 6f69 6e74      # that point
+00020950: 7320 746f 2061 2070 7265 7669 6f75 736c  s to a previousl
+00020960: 7920 7570 6c6f 6164 6564 2063 6f6d 706f  y uploaded compo
+00020970: 6e65 6e74 2e0a 2020 2020 7472 6163 6b65  nent..    tracke
+00020980: 725f 6669 6c65 5f6e 616d 6520 3d20 4765  r_file_name = Ge
+00020990: 7454 7261 636b 6572 4669 6c65 5061 7468  tTrackerFilePath
+000209a0: 2864 7374 5f75 726c 2c0a 2020 2020 2020  (dst_url,.      
+000209b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000209c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000209d0: 2020 2020 2054 7261 636b 6572 4669 6c65       TrackerFile
+000209e0: 5479 7065 2e50 4152 414c 4c45 4c5f 5550  Type.PARALLEL_UP
+000209f0: 4c4f 4144 2c0a 2020 2020 2020 2020 2020  LOAD,.          
+00020a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020a20: 2073 656c 662e 7465 7374 5f61 7069 2c20   self.test_api, 
+00020a30: 7372 635f 7572 6c29 0a20 2020 2074 7261  src_url).    tra
+00020a40: 636b 6572 5f70 7265 6669 7820 3d20 2731  cker_prefix = '1
+00020a50: 3233 270a 0a20 2020 2023 2043 7265 6174  23'..    # Creat
+00020a60: 6520 636f 6d70 6f6e 656e 7420 3020 746f  e component 0 to
+00020a70: 2062 6520 7573 6564 2069 6e20 7468 6520   be used in the 
+00020a80: 7265 7375 6d65 3b20 6974 206d 7573 7420  resume; it must 
+00020a90: 6d61 7463 6820 7468 6520 6e61 6d65 0a20  match the name. 
+00020aa0: 2020 2023 2074 6861 7420 7769 6c6c 2062     # that will b
+00020ab0: 6520 6765 6e65 7261 7465 6420 696e 2063  e generated in c
+00020ac0: 6f70 795f 6865 6c70 6572 2c20 736f 2077  opy_helper, so w
+00020ad0: 6520 7573 6520 7468 6520 7361 6d65 2073  e use the same s
+00020ae0: 6368 656d 652e 0a20 2020 2065 6e63 6f64  cheme..    encod
+00020af0: 6564 5f6e 616d 6520 3d20 2850 4152 414c  ed_name = (PARAL
+00020b00: 4c45 4c5f 5550 4c4f 4144 5f53 5441 5449  LEL_UPLOAD_STATI
+00020b10: 435f 5341 4c54 202b 2073 6f75 7263 655f  C_SALT + source_
+00020b20: 6669 6c65 292e 656e 636f 6465 2855 5446  file).encode(UTF
+00020b30: 3829 0a20 2020 2063 6f6e 7465 6e74 5f6d  8).    content_m
+00020b40: 6435 203d 2047 6574 4d64 3528 290a 2020  d5 = GetMd5().  
+00020b50: 2020 636f 6e74 656e 745f 6d64 352e 7570    content_md5.up
+00020b60: 6461 7465 2865 6e63 6f64 6564 5f6e 616d  date(encoded_nam
+00020b70: 6529 0a20 2020 2064 6967 6573 7420 3d20  e).    digest = 
+00020b80: 636f 6e74 656e 745f 6d64 352e 6865 7864  content_md5.hexd
+00020b90: 6967 6573 7428 290a 2020 2020 636f 6d70  igest().    comp
+00020ba0: 6f6e 656e 745f 6f62 6a65 6374 5f6e 616d  onent_object_nam
+00020bb0: 6520 3d20 2874 7261 636b 6572 5f70 7265  e = (tracker_pre
+00020bc0: 6669 7820 2b20 5041 5241 4c4c 454c 5f55  fix + PARALLEL_U
+00020bd0: 504c 4f41 445f 5445 4d50 5f4e 414d 4553  PLOAD_TEMP_NAMES
+00020be0: 5041 4345 202b 0a20 2020 2020 2020 2020  PACE +.         
+00020bf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020c00: 2020 2020 6469 6765 7374 202b 2027 5f30      digest + '_0
+00020c10: 2729 0a0a 2020 2020 636f 6d70 6f6e 656e  ')..    componen
+00020c20: 745f 7369 7a65 203d 2033 0a20 2020 206f  t_size = 3.    o
+00020c30: 626a 6563 745f 7572 6920 3d20 7365 6c66  bject_uri = self
+00020c40: 2e43 7265 6174 654f 626a 6563 7428 6275  .CreateObject(bu
+00020c50: 636b 6574 5f75 7269 3d62 7563 6b65 745f  cket_uri=bucket_
+00020c60: 7572 692c 0a20 2020 2020 2020 2020 2020  uri,.           
+00020c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020c80: 2020 2020 2020 2020 6f62 6a65 6374 5f6e          object_n
+00020c90: 616d 653d 636f 6d70 6f6e 656e 745f 6f62  ame=component_ob
+00020ca0: 6a65 6374 5f6e 616d 652c 0a20 2020 2020  ject_name,.     
+00020cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020cc0: 2020 2020 2020 2020 2020 2020 2020 636f                co
+00020cd0: 6e74 656e 7473 3d66 696c 655f 636f 6e74  ntents=file_cont
+00020ce0: 656e 7473 5b3a 636f 6d70 6f6e 656e 745f  ents[:component_
+00020cf0: 7369 7a65 5d2c 0a20 2020 2020 2020 2020  size],.         
+00020d00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020d10: 2020 2020 2020 2020 2020 656e 6372 7970            encryp
+00020d20: 7469 6f6e 5f6b 6579 3d54 4553 545f 454e  tion_key=TEST_EN
+00020d30: 4352 5950 5449 4f4e 5f4b 4559 3129 0a20  CRYPTION_KEY1). 
+00020d40: 2020 2065 7869 7374 696e 675f 636f 6d70     existing_comp
+00020d50: 6f6e 656e 7420 3d20 4f62 6a65 6374 4672  onent = ObjectFr
+00020d60: 6f6d 5472 6163 6b65 7228 636f 6d70 6f6e  omTracker(compon
+00020d70: 656e 745f 6f62 6a65 6374 5f6e 616d 652c  ent_object_name,
+00020d80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00020d90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020da0: 2020 2020 2020 2020 2020 2020 7374 7228              str(
+00020db0: 6f62 6a65 6374 5f75 7269 2e67 656e 6572  object_uri.gener
+00020dc0: 6174 696f 6e29 290a 2020 2020 6578 6973  ation)).    exis
+00020dd0: 7469 6e67 5f63 6f6d 706f 6e65 6e74 7320  ting_components 
+00020de0: 3d20 5b65 7869 7374 696e 675f 636f 6d70  = [existing_comp
+00020df0: 6f6e 656e 745d 0a20 2020 2065 6e63 5f6b  onent].    enc_k
+00020e00: 6579 5f73 6861 3235 3620 3d20 5445 5354  ey_sha256 = TEST
+00020e10: 5f45 4e43 5259 5054 494f 4e5f 4b45 5931  _ENCRYPTION_KEY1
+00020e20: 5f53 4841 3235 365f 4236 340a 0a20 2020  _SHA256_B64..   
+00020e30: 2057 7269 7465 5061 7261 6c6c 656c 5570   WriteParallelUp
+00020e40: 6c6f 6164 5472 6163 6b65 7246 696c 6528  loadTrackerFile(
+00020e50: 7472 6163 6b65 725f 6669 6c65 5f6e 616d  tracker_file_nam
+00020e60: 652c 0a20 2020 2020 2020 2020 2020 2020  e,.             
+00020e70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020e80: 2020 2020 2020 7472 6163 6b65 725f 7072        tracker_pr
+00020e90: 6566 6978 2c0a 2020 2020 2020 2020 2020  efix,.          
+00020ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020eb0: 2020 2020 2020 2020 2065 7869 7374 696e           existin
+00020ec0: 675f 636f 6d70 6f6e 656e 7473 2c0a 2020  g_components,.  
+00020ed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020ee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020ef0: 2065 6e63 7279 7074 696f 6e5f 6b65 795f   encryption_key_
+00020f00: 7368 6132 3536 3d65 6e63 5f6b 6579 5f73  sha256=enc_key_s
+00020f10: 6861 3235 3629 0a0a 2020 2020 7472 793a  ha256)..    try:
+00020f20: 0a20 2020 2020 2023 204e 6f77 2022 7265  .      # Now "re
+00020f30: 7375 6d65 2220 7468 6520 7570 6c6f 6164  sume" the upload
+00020f40: 2075 7369 6e67 2074 6865 206f 7269 6769   using the origi
+00020f50: 6e61 6c20 656e 6372 7970 7469 6f6e 206b  nal encryption k
+00020f60: 6579 2e0a 2020 2020 2020 7769 7468 2053  ey..      with S
+00020f70: 6574 426f 746f 436f 6e66 6967 466f 7254  etBotoConfigForT
+00020f80: 6573 7428 5b0a 2020 2020 2020 2020 2020  est([.          
+00020f90: 2827 4753 5574 696c 272c 2027 7061 7261  ('GSUtil', 'para
+00020fa0: 6c6c 656c 5f63 6f6d 706f 7369 7465 5f75  llel_composite_u
+00020fb0: 706c 6f61 645f 7468 7265 7368 6f6c 6427  pload_threshold'
+00020fc0: 2c20 2731 2729 2c0a 2020 2020 2020 2020  , '1'),.        
+00020fd0: 2020 2827 4753 5574 696c 272c 2027 7061    ('GSUtil', 'pa
+00020fe0: 7261 6c6c 656c 5f63 6f6d 706f 7369 7465  rallel_composite
+00020ff0: 5f75 706c 6f61 645f 636f 6d70 6f6e 656e  _upload_componen
+00021000: 745f 7369 7a65 272c 0a20 2020 2020 2020  t_size',.       
+00021010: 2020 2020 7374 7228 636f 6d70 6f6e 656e      str(componen
+00021020: 745f 7369 7a65 2929 2c0a 2020 2020 2020  t_size)),.      
+00021030: 2020 2020 2827 4753 5574 696c 272c 2027      ('GSUtil', '
+00021040: 656e 6372 7970 7469 6f6e 5f6b 6579 272c  encryption_key',
+00021050: 2054 4553 545f 454e 4352 5950 5449 4f4e   TEST_ENCRYPTION
+00021060: 5f4b 4559 3129 0a20 2020 2020 205d 293a  _KEY1).      ]):
+00021070: 0a20 2020 2020 2020 2073 7464 6572 7220  .        stderr 
+00021080: 3d20 7365 6c66 2e52 756e 4773 5574 696c  = self.RunGsUtil
+00021090: 280a 2020 2020 2020 2020 2020 2020 5b27  (.            ['
+000210a0: 6370 272c 2073 6f75 7263 655f 6669 6c65  cp', source_file
+000210b0: 2c20 7375 7269 2862 7563 6b65 745f 7572  , suri(bucket_ur
+000210c0: 692c 2027 666f 6f27 295d 2c20 7265 7475  i, 'foo')], retu
+000210d0: 726e 5f73 7464 6572 723d 5472 7565 290a  rn_stderr=True).
+000210e0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+000210f0: 6572 7449 6e28 2746 6f75 6e64 2031 2065  ertIn('Found 1 e
+00021100: 7869 7374 696e 6720 7465 6d70 6f72 6172  xisting temporar
+00021110: 7920 636f 6d70 6f6e 656e 7473 2074 6f20  y components to 
+00021120: 7265 7573 652e 272c 2073 7464 6572 7229  reuse.', stderr)
+00021130: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+00021140: 7365 7274 4661 6c73 6528 0a20 2020 2020  sertFalse(.     
+00021150: 2020 2020 2020 206f 732e 7061 7468 2e65         os.path.e
+00021160: 7869 7374 7328 7472 6163 6b65 725f 6669  xists(tracker_fi
+00021170: 6c65 5f6e 616d 6529 2c0a 2020 2020 2020  le_name),.      
+00021180: 2020 2020 2020 2754 7261 636b 6572 2066        'Tracker f
+00021190: 696c 6520 2573 2073 686f 756c 6420 6861  ile %s should ha
+000211a0: 7665 2062 6565 6e20 6465 6c65 7465 642e  ve been deleted.
+000211b0: 2720 2520 7472 6163 6b65 725f 6669 6c65  ' % tracker_file
+000211c0: 5f6e 616d 6529 0a20 2020 2020 2020 2072  _name).        r
+000211d0: 6561 645f 636f 6e74 656e 7473 203d 2073  ead_contents = s
+000211e0: 656c 662e 5275 6e47 7355 7469 6c28 5b27  elf.RunGsUtil(['
+000211f0: 6361 7427 2c20 7375 7269 2862 7563 6b65  cat', suri(bucke
+00021200: 745f 7572 692c 2027 666f 6f27 295d 2c0a  t_uri, 'foo')],.
+00021210: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021220: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021230: 2020 2020 2020 2072 6574 7572 6e5f 7374         return_st
+00021240: 646f 7574 3d54 7275 6529 0a20 2020 2020  dout=True).     
+00021250: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+00021260: 7561 6c28 7265 6164 5f63 6f6e 7465 6e74  ual(read_content
+00021270: 732e 656e 636f 6465 2827 6173 6369 6927  s.encode('ascii'
+00021280: 292c 2066 696c 655f 636f 6e74 656e 7473  ), file_contents
+00021290: 290a 2020 2020 6669 6e61 6c6c 793a 0a20  ).    finally:. 
+000212a0: 2020 2020 2023 2043 6c65 616e 2075 7020       # Clean up 
+000212b0: 6966 2073 6f6d 6574 6869 6e67 2077 656e  if something wen
+000212c0: 7420 7772 6f6e 672e 0a20 2020 2020 2044  t wrong..      D
+000212d0: 656c 6574 6554 7261 636b 6572 4669 6c65  eleteTrackerFile
+000212e0: 2874 7261 636b 6572 5f66 696c 655f 6e61  (tracker_file_na
+000212f0: 6d65 290a 0a20 2040 536b 6970 466f 7253  me)..  @SkipForS
+00021300: 3328 274e 6f20 7265 7375 6d61 626c 6520  3('No resumable 
+00021310: 7570 6c6f 6164 2073 7570 706f 7274 2066  upload support f
+00021320: 6f72 2053 332e 2729 0a20 2064 6566 2074  or S3.').  def t
+00021330: 6573 745f 6370 5f63 6f6d 706f 7369 7465  est_cp_composite
+00021340: 5f65 6e63 7279 7074 6564 5f75 706c 6f61  _encrypted_uploa
+00021350: 645f 7265 7374 6172 7428 7365 6c66 293a  d_restart(self):
+00021360: 0a20 2020 2022 2222 5465 7374 7320 7468  .    """Tests th
+00021370: 6174 2065 6e63 7279 7074 6564 2063 6f6d  at encrypted com
+00021380: 706f 7369 7465 2075 706c 6f61 6420 7265  posite upload re
+00021390: 7374 6172 7473 2067 6976 656e 2061 2064  starts given a d
+000213a0: 6966 6665 7265 6e74 206b 6579 2e22 2222  ifferent key."""
+000213b0: 0a20 2020 2069 6620 7365 6c66 2e74 6573  .    if self.tes
+000213c0: 745f 6170 6920 3d3d 2041 7069 5365 6c65  t_api == ApiSele
+000213d0: 6374 6f72 2e58 4d4c 3a0a 2020 2020 2020  ctor.XML:.      
+000213e0: 7265 7475 726e 2075 6e69 7474 6573 742e  return unittest.
+000213f0: 736b 6970 280a 2020 2020 2020 2020 2020  skip(.          
+00021400: 2767 7375 7469 6c20 646f 6573 206e 6f74  'gsutil does not
+00021410: 2073 7570 706f 7274 2065 6e63 7279 7074   support encrypt
+00021420: 696f 6e20 7769 7468 2074 6865 2058 4d4c  ion with the XML
+00021430: 2041 5049 2729 0a20 2020 2062 7563 6b65   API').    bucke
+00021440: 745f 7572 6920 3d20 7365 6c66 2e43 7265  t_uri = self.Cre
+00021450: 6174 6542 7563 6b65 7428 290a 2020 2020  ateBucket().    
+00021460: 6473 745f 7572 6c20 3d20 5374 6f72 6167  dst_url = Storag
+00021470: 6555 726c 4672 6f6d 5374 7269 6e67 2873  eUrlFromString(s
+00021480: 7572 6928 6275 636b 6574 5f75 7269 2c20  uri(bucket_uri, 
+00021490: 2766 6f6f 2729 290a 0a20 2020 2066 696c  'foo'))..    fil
+000214a0: 655f 636f 6e74 656e 7473 203d 2062 2766  e_contents = b'f
+000214b0: 6f6f 6261 7227 0a20 2020 2073 6f75 7263  oobar'.    sourc
+000214c0: 655f 6669 6c65 203d 2073 656c 662e 4372  e_file = self.Cr
+000214d0: 6561 7465 5465 6d70 4669 6c65 2863 6f6e  eateTempFile(con
+000214e0: 7465 6e74 733d 6669 6c65 5f63 6f6e 7465  tents=file_conte
+000214f0: 6e74 732c 2066 696c 655f 6e61 6d65 3d27  nts, file_name='
+00021500: 666f 6f27 290a 2020 2020 7372 635f 7572  foo').    src_ur
+00021510: 6c20 3d20 5374 6f72 6167 6555 726c 4672  l = StorageUrlFr
+00021520: 6f6d 5374 7269 6e67 2873 6f75 7263 655f  omString(source_
+00021530: 6669 6c65 290a 0a20 2020 2023 2053 696d  file)..    # Sim
+00021540: 756c 6174 6520 616e 2075 706c 6f61 6420  ulate an upload 
+00021550: 7468 6174 2068 6164 206f 6363 7572 7265  that had occurre
+00021560: 6420 6279 2077 7269 7469 6e67 2061 2074  d by writing a t
+00021570: 7261 636b 6572 2066 696c 652e 0a20 2020  racker file..   
+00021580: 2074 7261 636b 6572 5f66 696c 655f 6e61   tracker_file_na
+00021590: 6d65 203d 2047 6574 5472 6163 6b65 7246  me = GetTrackerF
+000215a0: 696c 6550 6174 6828 6473 745f 7572 6c2c  ilePath(dst_url,
+000215b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000215c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000215d0: 2020 2020 2020 2020 2020 2020 5472 6163              Trac
+000215e0: 6b65 7246 696c 6554 7970 652e 5041 5241  kerFileType.PARA
+000215f0: 4c4c 454c 5f55 504c 4f41 442c 0a20 2020  LLEL_UPLOAD,.   
+00021600: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021610: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021620: 2020 2020 2020 2020 7365 6c66 2e74 6573          self.tes
+00021630: 745f 6170 692c 2073 7263 5f75 726c 290a  t_api, src_url).
+00021640: 2020 2020 7472 6163 6b65 725f 7072 6566      tracker_pref
+00021650: 6978 203d 2027 3132 3327 0a20 2020 2065  ix = '123'.    e
+00021660: 7869 7374 696e 675f 636f 6d70 6f6e 656e  xisting_componen
+00021670: 745f 6e61 6d65 203d 2027 666f 6f5f 3127  t_name = 'foo_1'
+00021680: 0a20 2020 206f 626a 6563 745f 7572 6920  .    object_uri 
+00021690: 3d20 7365 6c66 2e43 7265 6174 654f 626a  = self.CreateObj
+000216a0: 6563 7428 6275 636b 6574 5f75 7269 3d62  ect(bucket_uri=b
+000216b0: 7563 6b65 745f 7572 692c 0a20 2020 2020  ucket_uri,.     
+000216c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000216d0: 2020 2020 2020 2020 2020 2020 2020 6f62                ob
+000216e0: 6a65 6374 5f6e 616d 653d 2766 6f6f 5f31  ject_name='foo_1
+000216f0: 272c 0a20 2020 2020 2020 2020 2020 2020  ',.             
+00021700: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021710: 2020 2020 2020 636f 6e74 656e 7473 3d62        contents=b
+00021720: 2766 6f6f 272c 0a20 2020 2020 2020 2020  'foo',.         
+00021730: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021740: 2020 2020 2020 2020 2020 656e 6372 7970            encryp
+00021750: 7469 6f6e 5f6b 6579 3d54 4553 545f 454e  tion_key=TEST_EN
+00021760: 4352 5950 5449 4f4e 5f4b 4559 3129 0a20  CRYPTION_KEY1). 
+00021770: 2020 2065 7869 7374 696e 675f 636f 6d70     existing_comp
+00021780: 6f6e 656e 7420 3d20 4f62 6a65 6374 4672  onent = ObjectFr
+00021790: 6f6d 5472 6163 6b65 7228 6578 6973 7469  omTracker(existi
+000217a0: 6e67 5f63 6f6d 706f 6e65 6e74 5f6e 616d  ng_component_nam
+000217b0: 652c 0a20 2020 2020 2020 2020 2020 2020  e,.             
+000217c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000217d0: 2020 2020 2020 2020 2020 2020 2020 7374                st
+000217e0: 7228 6f62 6a65 6374 5f75 7269 2e67 656e  r(object_uri.gen
+000217f0: 6572 6174 696f 6e29 290a 2020 2020 6578  eration)).    ex
+00021800: 6973 7469 6e67 5f63 6f6d 706f 6e65 6e74  isting_component
+00021810: 7320 3d20 5b65 7869 7374 696e 675f 636f  s = [existing_co
+00021820: 6d70 6f6e 656e 745d 0a20 2020 2065 6e63  mponent].    enc
+00021830: 5f6b 6579 5f73 6861 3235 3620 3d20 5445  _key_sha256 = TE
+00021840: 5354 5f45 4e43 5259 5054 494f 4e5f 4b45  ST_ENCRYPTION_KE
+00021850: 5931 5f53 4841 3235 365f 4236 340a 2020  Y1_SHA256_B64.  
+00021860: 2020 5772 6974 6550 6172 616c 6c65 6c55    WriteParallelU
+00021870: 706c 6f61 6454 7261 636b 6572 4669 6c65  ploadTrackerFile
+00021880: 2874 7261 636b 6572 5f66 696c 655f 6e61  (tracker_file_na
+00021890: 6d65 2c20 7472 6163 6b65 725f 7072 6566  me, tracker_pref
+000218a0: 6978 2c0a 2020 2020 2020 2020 2020 2020  ix,.            
+000218b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000218c0: 2020 2020 2020 2065 7869 7374 696e 675f         existing_
+000218d0: 636f 6d70 6f6e 656e 7473 2c0a 2020 2020  components,.    
+000218e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000218f0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+00021900: 6e63 5f6b 6579 5f73 6861 3235 362e 6465  nc_key_sha256.de
+00021910: 636f 6465 2827 6173 6369 6927 2929 0a0a  code('ascii'))..
+00021920: 2020 2020 7472 793a 0a20 2020 2020 2023      try:.      #
+00021930: 204e 6f77 2022 7265 7375 6d65 2220 7468   Now "resume" th
+00021940: 6520 7570 6c6f 6164 2075 7369 6e67 2074  e upload using t
+00021950: 6865 206f 7269 6769 6e61 6c20 656e 6372  he original encr
+00021960: 7970 7469 6f6e 206b 6579 2e0a 2020 2020  yption key..    
+00021970: 2020 7769 7468 2053 6574 426f 746f 436f    with SetBotoCo
+00021980: 6e66 6967 466f 7254 6573 7428 5b0a 2020  nfigForTest([.  
+00021990: 2020 2020 2020 2020 2827 4753 5574 696c          ('GSUtil
+000219a0: 272c 2027 7061 7261 6c6c 656c 5f63 6f6d  ', 'parallel_com
+000219b0: 706f 7369 7465 5f75 706c 6f61 645f 7468  posite_upload_th
+000219c0: 7265 7368 6f6c 6427 2c20 2731 2729 2c0a  reshold', '1'),.
+000219d0: 2020 2020 2020 2020 2020 2827 4753 5574            ('GSUt
+000219e0: 696c 272c 2027 7061 7261 6c6c 656c 5f63  il', 'parallel_c
+000219f0: 6f6d 706f 7369 7465 5f75 706c 6f61 645f  omposite_upload_
+00021a00: 636f 6d70 6f6e 656e 745f 7369 7a65 272c  component_size',
+00021a10: 2027 3327 292c 0a20 2020 2020 2020 2020   '3'),.         
+00021a20: 2028 2747 5355 7469 6c27 2c20 2765 6e63   ('GSUtil', 'enc
+00021a30: 7279 7074 696f 6e5f 6b65 7927 2c20 5445  ryption_key', TE
+00021a40: 5354 5f45 4e43 5259 5054 494f 4e5f 4b45  ST_ENCRYPTION_KE
+00021a50: 5932 290a 2020 2020 2020 5d29 3a0a 2020  Y2).      ]):.  
+00021a60: 2020 2020 2020 7374 6465 7272 203d 2073        stderr = s
+00021a70: 656c 662e 5275 6e47 7355 7469 6c28 0a20  elf.RunGsUtil(. 
+00021a80: 2020 2020 2020 2020 2020 205b 2763 7027             ['cp'
+00021a90: 2c20 736f 7572 6365 5f66 696c 652c 2073  , source_file, s
+00021aa0: 7572 6928 6275 636b 6574 5f75 7269 2c20  uri(bucket_uri, 
+00021ab0: 2766 6f6f 2729 5d2c 2072 6574 7572 6e5f  'foo')], return_
+00021ac0: 7374 6465 7272 3d54 7275 6529 0a20 2020  stderr=True).   
+00021ad0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+00021ae0: 496e 280a 2020 2020 2020 2020 2020 2020  In(.            
+00021af0: 2764 6f65 7320 6e6f 7420 6d61 7463 6820  'does not match 
+00021b00: 6375 7272 656e 7420 656e 6372 7970 7469  current encrypti
+00021b10: 6f6e 206b 6579 2e20 270a 2020 2020 2020  on key. '.      
+00021b20: 2020 2020 2020 2744 656c 6574 696e 6720        'Deleting 
+00021b30: 6f6c 6420 636f 6d70 6f6e 656e 7473 2061  old components a
+00021b40: 6e64 2072 6573 7461 7274 696e 6720 7570  nd restarting up
+00021b50: 6c6f 6164 272c 2073 7464 6572 7229 0a20  load', stderr). 
+00021b60: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+00021b70: 7274 4e6f 7449 6e28 2765 7869 7374 696e  rtNotIn('existin
+00021b80: 6720 7465 6d70 6f72 6172 7920 636f 6d70  g temporary comp
+00021b90: 6f6e 656e 7473 2074 6f20 7265 7573 652e  onents to reuse.
+00021ba0: 272c 2073 7464 6572 7229 0a20 2020 2020  ', stderr).     
+00021bb0: 2020 2073 656c 662e 6173 7365 7274 4661     self.assertFa
+00021bc0: 6c73 6528 0a20 2020 2020 2020 2020 2020  lse(.           
+00021bd0: 206f 732e 7061 7468 2e65 7869 7374 7328   os.path.exists(
+00021be0: 7472 6163 6b65 725f 6669 6c65 5f6e 616d  tracker_file_nam
+00021bf0: 6529 2c0a 2020 2020 2020 2020 2020 2020  e),.            
+00021c00: 2754 7261 636b 6572 2066 696c 6520 2573  'Tracker file %s
+00021c10: 2073 686f 756c 6420 6861 7665 2062 6565   should have bee
+00021c20: 6e20 6465 6c65 7465 642e 2720 2520 7472  n deleted.' % tr
+00021c30: 6163 6b65 725f 6669 6c65 5f6e 616d 6529  acker_file_name)
+00021c40: 0a20 2020 2020 2020 2072 6561 645f 636f  .        read_co
+00021c50: 6e74 656e 7473 203d 2073 656c 662e 5275  ntents = self.Ru
+00021c60: 6e47 7355 7469 6c28 5b27 6361 7427 2c20  nGsUtil(['cat', 
+00021c70: 7375 7269 2862 7563 6b65 745f 7572 692c  suri(bucket_uri,
+00021c80: 2027 666f 6f27 295d 2c0a 2020 2020 2020   'foo')],.      
+00021c90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021cb0: 2072 6574 7572 6e5f 7374 646f 7574 3d54   return_stdout=T
+00021cc0: 7275 6529 0a20 2020 2020 2020 2073 656c  rue).        sel
+00021cd0: 662e 6173 7365 7274 4571 7561 6c28 7265  f.assertEqual(re
+00021ce0: 6164 5f63 6f6e 7465 6e74 732e 656e 636f  ad_contents.enco
+00021cf0: 6465 2827 6173 6369 6927 292c 2066 696c  de('ascii'), fil
+00021d00: 655f 636f 6e74 656e 7473 290a 2020 2020  e_contents).    
+00021d10: 6669 6e61 6c6c 793a 0a20 2020 2020 2023  finally:.      #
+00021d20: 2043 6c65 616e 2075 7020 6966 2073 6f6d   Clean up if som
+00021d30: 6574 6869 6e67 2077 656e 7420 7772 6f6e  ething went wron
+00021d40: 672e 0a20 2020 2020 2044 656c 6574 6554  g..      DeleteT
+00021d50: 7261 636b 6572 4669 6c65 2874 7261 636b  rackerFile(track
+00021d60: 6572 5f66 696c 655f 6e61 6d65 290a 0a20  er_file_name).. 
+00021d70: 2040 536b 6970 466f 7253 3328 2754 6573   @SkipForS3('Tes
+00021d80: 7420 7573 6573 2067 732d 7370 6563 6966  t uses gs-specif
+00021d90: 6963 204b 4d53 2065 6e63 7279 7074 696f  ic KMS encryptio
+00021da0: 6e27 290a 2020 6465 6620 7465 7374 5f6b  n').  def test_k
+00021db0: 6d73 5f6b 6579 5f63 6f72 7265 6374 6c79  ms_key_correctly
+00021dc0: 5f61 7070 6c69 6564 5f74 6f5f 636f 6d70  _applied_to_comp
+00021dd0: 6f73 6974 655f 7570 6c6f 6164 2873 656c  osite_upload(sel
+00021de0: 6629 3a0a 2020 2020 6275 636b 6574 5f75  f):.    bucket_u
+00021df0: 7269 203d 2073 656c 662e 4372 6561 7465  ri = self.Create
+00021e00: 4275 636b 6574 2829 0a20 2020 2066 7061  Bucket().    fpa
+00021e10: 7468 203d 2073 656c 662e 4372 6561 7465  th = self.Create
+00021e20: 5465 6d70 4669 6c65 2863 6f6e 7465 6e74  TempFile(content
+00021e30: 733d 6227 6162 6364 2729 0a20 2020 206f  s=b'abcd').    o
+00021e40: 626a 5f73 7572 6920 3d20 7375 7269 2862  bj_suri = suri(b
+00021e50: 7563 6b65 745f 7572 692c 2027 636f 6d70  ucket_uri, 'comp
+00021e60: 6f73 6564 2729 0a20 2020 206b 6579 5f66  osed').    key_f
+00021e70: 716e 203d 2073 656c 662e 6175 7468 6f72  qn = self.author
+00021e80: 697a 655f 7072 6f6a 6563 745f 746f 5f75  ize_project_to_u
+00021e90: 7365 5f74 6573 7469 6e67 5f6b 6d73 5f6b  se_testing_kms_k
+00021ea0: 6579 2829 0a0a 2020 2020 7769 7468 2053  ey()..    with S
+00021eb0: 6574 426f 746f 436f 6e66 6967 466f 7254  etBotoConfigForT
+00021ec0: 6573 7428 5b0a 2020 2020 2020 2020 2827  est([.        ('
+00021ed0: 4753 5574 696c 272c 2027 656e 6372 7970  GSUtil', 'encryp
+00021ee0: 7469 6f6e 5f6b 6579 272c 206b 6579 5f66  tion_key', key_f
+00021ef0: 716e 292c 0a20 2020 2020 2020 2028 2747  qn),.        ('G
+00021f00: 5355 7469 6c27 2c20 2770 6172 616c 6c65  SUtil', 'paralle
+00021f10: 6c5f 636f 6d70 6f73 6974 655f 7570 6c6f  l_composite_uplo
+00021f20: 6164 5f74 6872 6573 686f 6c64 272c 2027  ad_threshold', '
+00021f30: 3127 292c 0a20 2020 2020 2020 2028 2747  1'),.        ('G
+00021f40: 5355 7469 6c27 2c20 2770 6172 616c 6c65  SUtil', 'paralle
+00021f50: 6c5f 636f 6d70 6f73 6974 655f 7570 6c6f  l_composite_uplo
+00021f60: 6164 5f63 6f6d 706f 6e65 6e74 5f73 697a  ad_component_siz
+00021f70: 6527 2c20 2731 2729 0a20 2020 205d 293a  e', '1').    ]):
+00021f80: 0a20 2020 2020 2073 656c 662e 5275 6e47  .      self.RunG
+00021f90: 7355 7469 6c28 5b27 6370 272c 2066 7061  sUtil(['cp', fpa
+00021fa0: 7468 2c20 6f62 6a5f 7375 7269 5d29 0a0a  th, obj_suri])..
+00021fb0: 2020 2020 7769 7468 2053 6574 426f 746f      with SetBoto
+00021fc0: 436f 6e66 6967 466f 7254 6573 7428 5b28  ConfigForTest([(
+00021fd0: 2747 5355 7469 6c27 2c20 2770 7265 6665  'GSUtil', 'prefe
+00021fe0: 725f 6170 6927 2c20 276a 736f 6e27 295d  r_api', 'json')]
+00021ff0: 293a 0a20 2020 2020 2073 656c 662e 4173  ):.      self.As
+00022000: 7365 7274 4f62 6a65 6374 5573 6573 434d  sertObjectUsesCM
+00022010: 454b 286f 626a 5f73 7572 692c 206b 6579  EK(obj_suri, key
+00022020: 5f66 716e 290a 0a20 2023 2054 6869 7320  _fqn)..  # This 
+00022030: 7465 6d70 6f72 6172 696c 7920 6368 616e  temporarily chan
+00022040: 6765 7320 7468 6520 7472 6163 6b65 7220  ges the tracker 
+00022050: 6469 7265 6374 6f72 7920 746f 2075 6e77  directory to unw
+00022060: 7269 7461 626c 6520 7768 6963 680a 2020  ritable which.  
+00022070: 2320 696e 7465 7266 6572 6573 2077 6974  # interferes wit
+00022080: 6820 616e 7920 7061 7261 6c6c 656c 2072  h any parallel r
+00022090: 756e 6e69 6e67 2074 6573 7473 2074 6861  unning tests tha
+000220a0: 7420 7573 6520 7468 6520 7472 6163 6b65  t use the tracke
+000220b0: 7220 6469 7265 6374 6f72 792e 0a20 2040  r directory..  @
+000220c0: 4e6f 7450 6172 616c 6c65 6c69 7a61 626c  NotParallelizabl
+000220d0: 650a 2020 4053 6b69 7046 6f72 5333 2827  e.  @SkipForS3('
+000220e0: 4e6f 2072 6573 756d 6162 6c65 2075 706c  No resumable upl
+000220f0: 6f61 6420 7375 7070 6f72 7420 666f 7220  oad support for 
+00022100: 5333 2e27 290a 2020 4075 6e69 7474 6573  S3.').  @unittes
+00022110: 742e 736b 6970 4966 2849 535f 5749 4e44  t.skipIf(IS_WIND
+00022120: 4f57 532c 2027 6368 6d6f 6420 6f6e 2064  OWS, 'chmod on d
+00022130: 6972 2075 6e73 7570 706f 7274 6564 206f  ir unsupported o
+00022140: 6e20 5769 6e64 6f77 732e 2729 0a20 2040  n Windows.').  @
+00022150: 5365 7175 656e 7469 616c 416e 6450 6172  SequentialAndPar
+00022160: 616c 6c65 6c54 7261 6e73 6665 720a 2020  allelTransfer.  
+00022170: 6465 6620 7465 7374 5f63 705f 756e 7772  def test_cp_unwr
+00022180: 6974 6162 6c65 5f74 7261 636b 6572 5f66  itable_tracker_f
+00022190: 696c 6528 7365 6c66 293a 0a20 2020 2022  ile(self):.    "
+000221a0: 2222 5465 7374 7320 6120 7265 7375 6d61  ""Tests a resuma
+000221b0: 626c 6520 7570 6c6f 6164 2077 6974 6820  ble upload with 
+000221c0: 616e 2075 6e77 7269 7461 626c 6520 7472  an unwritable tr
+000221d0: 6163 6b65 7220 6669 6c65 2e22 2222 0a20  acker file.""". 
+000221e0: 2020 2062 7563 6b65 745f 7572 6920 3d20     bucket_uri = 
+000221f0: 7365 6c66 2e43 7265 6174 6542 7563 6b65  self.CreateBucke
+00022200: 7428 290a 2020 2020 7472 6163 6b65 725f  t().    tracker_
+00022210: 6669 6c65 6e61 6d65 203d 2047 6574 5472  filename = GetTr
+00022220: 6163 6b65 7246 696c 6550 6174 6828 0a20  ackerFilePath(. 
+00022230: 2020 2020 2020 2053 746f 7261 6765 5572         StorageUr
+00022240: 6c46 726f 6d53 7472 696e 6728 7375 7269  lFromString(suri
+00022250: 2862 7563 6b65 745f 7572 692c 2027 666f  (bucket_uri, 'fo
+00022260: 6f27 2929 2c20 5472 6163 6b65 7246 696c  o')), TrackerFil
+00022270: 6554 7970 652e 5550 4c4f 4144 2c0a 2020  eType.UPLOAD,.  
+00022280: 2020 2020 2020 7365 6c66 2e74 6573 745f        self.test_
+00022290: 6170 6929 0a20 2020 2074 7261 636b 6572  api).    tracker
+000222a0: 5f64 6972 203d 206f 732e 7061 7468 2e64  _dir = os.path.d
+000222b0: 6972 6e61 6d65 2874 7261 636b 6572 5f66  irname(tracker_f
+000222c0: 696c 656e 616d 6529 0a20 2020 2066 7061  ilename).    fpa
+000222d0: 7468 203d 2073 656c 662e 4372 6561 7465  th = self.Create
+000222e0: 5465 6d70 4669 6c65 2866 696c 655f 6e61  TempFile(file_na
+000222f0: 6d65 3d27 666f 6f27 2c20 636f 6e74 656e  me='foo', conten
+00022300: 7473 3d62 2761 2720 2a20 4f4e 455f 4b49  ts=b'a' * ONE_KI
+00022310: 4229 0a20 2020 2062 6f74 6f5f 636f 6e66  B).    boto_conf
+00022320: 6967 5f66 6f72 5f74 6573 7420 3d20 2827  ig_for_test = ('
+00022330: 4753 5574 696c 272c 2027 7265 7375 6d61  GSUtil', 'resuma
+00022340: 626c 655f 7468 7265 7368 6f6c 6427 2c20  ble_threshold', 
+00022350: 7374 7228 4f4e 455f 4b49 4229 290a 2020  str(ONE_KIB)).  
+00022360: 2020 7361 7665 5f6d 6f64 203d 206f 732e    save_mod = os.
+00022370: 7374 6174 2874 7261 636b 6572 5f64 6972  stat(tracker_dir
+00022380: 292e 7374 5f6d 6f64 650a 0a20 2020 2074  ).st_mode..    t
+00022390: 7279 3a0a 2020 2020 2020 6f73 2e63 686d  ry:.      os.chm
+000223a0: 6f64 2874 7261 636b 6572 5f64 6972 2c20  od(tracker_dir, 
+000223b0: 3029 0a20 2020 2020 2077 6974 6820 5365  0).      with Se
+000223c0: 7442 6f74 6f43 6f6e 6669 6746 6f72 5465  tBotoConfigForTe
+000223d0: 7374 285b 626f 746f 5f63 6f6e 6669 675f  st([boto_config_
+000223e0: 666f 725f 7465 7374 5d29 3a0a 2020 2020  for_test]):.    
+000223f0: 2020 2020 7374 6465 7272 203d 2073 656c      stderr = sel
+00022400: 662e 5275 6e47 7355 7469 6c28 5b27 6370  f.RunGsUtil(['cp
+00022410: 272c 2066 7061 7468 2c20 7375 7269 2862  ', fpath, suri(b
+00022420: 7563 6b65 745f 7572 6929 5d2c 0a20 2020  ucket_uri)],.   
+00022430: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022440: 2020 2020 2020 2020 2020 2020 2065 7870               exp
+00022450: 6563 7465 645f 7374 6174 7573 3d31 2c0a  ected_status=1,.
+00022460: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022470: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022480: 7265 7475 726e 5f73 7464 6572 723d 5472  return_stderr=Tr
+00022490: 7565 290a 2020 2020 2020 2020 7365 6c66  ue).        self
+000224a0: 2e61 7373 6572 7449 6e28 2743 6f75 6c64  .assertIn('Could
+000224b0: 6e5c 2774 2077 7269 7465 2074 7261 636b  n\'t write track
+000224c0: 6572 2066 696c 6527 2c20 7374 6465 7272  er file', stderr
+000224d0: 290a 2020 2020 6669 6e61 6c6c 793a 0a20  ).    finally:. 
+000224e0: 2020 2020 206f 732e 6368 6d6f 6428 7472       os.chmod(tr
+000224f0: 6163 6b65 725f 6469 722c 2073 6176 655f  acker_dir, save_
+00022500: 6d6f 6429 0a20 2020 2020 2069 6620 6f73  mod).      if os
+00022510: 2e70 6174 682e 6578 6973 7473 2874 7261  .path.exists(tra
+00022520: 636b 6572 5f66 696c 656e 616d 6529 3a0a  cker_filename):.
+00022530: 2020 2020 2020 2020 6f73 2e75 6e6c 696e          os.unlin
+00022540: 6b28 7472 6163 6b65 725f 6669 6c65 6e61  k(tracker_filena
+00022550: 6d65 290a 0a20 2023 2054 6869 7320 7465  me)..  # This te
+00022560: 6d70 6f72 6172 696c 7920 6368 616e 6765  mporarily change
+00022570: 7320 7468 6520 7472 6163 6b65 7220 6469  s the tracker di
+00022580: 7265 6374 6f72 7920 746f 2075 6e77 7269  rectory to unwri
+00022590: 7461 626c 6520 7768 6963 680a 2020 2320  table which.  # 
+000225a0: 696e 7465 7266 6572 6573 2077 6974 6820  interferes with 
+000225b0: 616e 7920 7061 7261 6c6c 656c 2072 756e  any parallel run
+000225c0: 6e69 6e67 2074 6573 7473 2074 6861 7420  ning tests that 
+000225d0: 7573 6520 7468 6520 7472 6163 6b65 7220  use the tracker 
+000225e0: 6469 7265 6374 6f72 792e 0a20 2040 4e6f  directory..  @No
+000225f0: 7450 6172 616c 6c65 6c69 7a61 626c 650a  tParallelizable.
+00022600: 2020 4075 6e69 7474 6573 742e 736b 6970    @unittest.skip
+00022610: 4966 2849 535f 5749 4e44 4f57 532c 2027  If(IS_WINDOWS, '
+00022620: 6368 6d6f 6420 6f6e 2064 6972 2075 6e73  chmod on dir uns
+00022630: 7570 706f 7274 6564 206f 6e20 5769 6e64  upported on Wind
+00022640: 6f77 732e 2729 0a20 2040 5365 7175 656e  ows.').  @Sequen
+00022650: 7469 616c 416e 6450 6172 616c 6c65 6c54  tialAndParallelT
+00022660: 7261 6e73 6665 720a 2020 6465 6620 7465  ransfer.  def te
+00022670: 7374 5f63 705f 756e 7772 6974 6162 6c65  st_cp_unwritable
+00022680: 5f74 7261 636b 6572 5f66 696c 655f 646f  _tracker_file_do
+00022690: 776e 6c6f 6164 2873 656c 6629 3a0a 2020  wnload(self):.  
+000226a0: 2020 2222 2254 6573 7473 2064 6f77 6e6c    """Tests downl
+000226b0: 6f61 6473 2077 6974 6820 616e 2075 6e77  oads with an unw
+000226c0: 7269 7461 626c 6520 7472 6163 6b65 7220  ritable tracker 
+000226d0: 6669 6c65 2e22 2222 0a20 2020 206f 626a  file.""".    obj
+000226e0: 6563 745f 7572 6920 3d20 7365 6c66 2e43  ect_uri = self.C
+000226f0: 7265 6174 654f 626a 6563 7428 636f 6e74  reateObject(cont
+00022700: 656e 7473 3d62 2766 6f6f 2720 2a20 4f4e  ents=b'foo' * ON
+00022710: 455f 4b49 4229 0a20 2020 2074 7261 636b  E_KIB).    track
+00022720: 6572 5f66 696c 656e 616d 6520 3d20 4765  er_filename = Ge
+00022730: 7454 7261 636b 6572 4669 6c65 5061 7468  tTrackerFilePath
+00022740: 280a 2020 2020 2020 2020 5374 6f72 6167  (.        Storag
+00022750: 6555 726c 4672 6f6d 5374 7269 6e67 2873  eUrlFromString(s
+00022760: 7572 6928 6f62 6a65 6374 5f75 7269 2929  uri(object_uri))
+00022770: 2c20 5472 6163 6b65 7246 696c 6554 7970  , TrackerFileTyp
+00022780: 652e 444f 574e 4c4f 4144 2c0a 2020 2020  e.DOWNLOAD,.    
+00022790: 2020 2020 7365 6c66 2e74 6573 745f 6170      self.test_ap
+000227a0: 6929 0a20 2020 2074 7261 636b 6572 5f64  i).    tracker_d
+000227b0: 6972 203d 206f 732e 7061 7468 2e64 6972  ir = os.path.dir
+000227c0: 6e61 6d65 2874 7261 636b 6572 5f66 696c  name(tracker_fil
+000227d0: 656e 616d 6529 0a20 2020 2066 7061 7468  ename).    fpath
+000227e0: 203d 2073 656c 662e 4372 6561 7465 5465   = self.CreateTe
+000227f0: 6d70 4669 6c65 2829 0a20 2020 2073 6176  mpFile().    sav
+00022800: 655f 6d6f 6420 3d20 6f73 2e73 7461 7428  e_mod = os.stat(
+00022810: 7472 6163 6b65 725f 6469 7229 2e73 745f  tracker_dir).st_
+00022820: 6d6f 6465 0a0a 2020 2020 7472 793a 0a20  mode..    try:. 
+00022830: 2020 2020 206f 732e 6368 6d6f 6428 7472       os.chmod(tr
+00022840: 6163 6b65 725f 6469 722c 2030 290a 2020  acker_dir, 0).  
+00022850: 2020 2020 626f 746f 5f63 6f6e 6669 675f      boto_config_
+00022860: 666f 725f 7465 7374 203d 2028 2747 5355  for_test = ('GSU
+00022870: 7469 6c27 2c20 2772 6573 756d 6162 6c65  til', 'resumable
+00022880: 5f74 6872 6573 686f 6c64 272c 2073 7472  _threshold', str
+00022890: 2845 4947 4854 5f4d 4942 2929 0a20 2020  (EIGHT_MIB)).   
+000228a0: 2020 2077 6974 6820 5365 7442 6f74 6f43     with SetBotoC
+000228b0: 6f6e 6669 6746 6f72 5465 7374 285b 626f  onfigForTest([bo
+000228c0: 746f 5f63 6f6e 6669 675f 666f 725f 7465  to_config_for_te
+000228d0: 7374 5d29 3a0a 2020 2020 2020 2020 2320  st]):.        # 
+000228e0: 5368 6f75 6c64 2073 7563 6365 6564 2062  Should succeed b
+000228f0: 6563 6175 7365 2077 6520 6172 6520 6265  ecause we are be
+00022900: 6c6f 7720 7468 6520 7468 7265 7368 6f6c  low the threshol
+00022910: 642e 0a20 2020 2020 2020 2073 656c 662e  d..        self.
+00022920: 5275 6e47 7355 7469 6c28 5b27 6370 272c  RunGsUtil(['cp',
+00022930: 2073 7572 6928 6f62 6a65 6374 5f75 7269   suri(object_uri
+00022940: 292c 2066 7061 7468 5d29 0a20 2020 2020  ), fpath]).     
+00022950: 2062 6f74 6f5f 636f 6e66 6967 5f66 6f72   boto_config_for
+00022960: 5f74 6573 7420 3d20 2827 4753 5574 696c  _test = ('GSUtil
+00022970: 272c 2027 7265 7375 6d61 626c 655f 7468  ', 'resumable_th
+00022980: 7265 7368 6f6c 6427 2c20 7374 7228 4f4e  reshold', str(ON
+00022990: 455f 4b49 4229 290a 2020 2020 2020 7769  E_KIB)).      wi
+000229a0: 7468 2053 6574 426f 746f 436f 6e66 6967  th SetBotoConfig
+000229b0: 466f 7254 6573 7428 5b62 6f74 6f5f 636f  ForTest([boto_co
+000229c0: 6e66 6967 5f66 6f72 5f74 6573 745d 293a  nfig_for_test]):
+000229d0: 0a20 2020 2020 2020 2073 7464 6572 7220  .        stderr 
+000229e0: 3d20 7365 6c66 2e52 756e 4773 5574 696c  = self.RunGsUtil
+000229f0: 285b 2763 7027 2c20 7375 7269 286f 626a  (['cp', suri(obj
+00022a00: 6563 745f 7572 6929 2c20 6670 6174 685d  ect_uri), fpath]
+00022a10: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00022a20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022a30: 2020 6578 7065 6374 6564 5f73 7461 7475    expected_statu
+00022a40: 733d 312c 0a20 2020 2020 2020 2020 2020  s=1,.           
+00022a50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022a60: 2020 2020 2072 6574 7572 6e5f 7374 6465       return_stde
+00022a70: 7272 3d54 7275 6529 0a20 2020 2020 2020  rr=True).       
+00022a80: 2073 656c 662e 6173 7365 7274 496e 2827   self.assertIn('
+00022a90: 436f 756c 646e 5c27 7420 7772 6974 6520  Couldn\'t write 
+00022aa0: 7472 6163 6b65 7220 6669 6c65 272c 2073  tracker file', s
+00022ab0: 7464 6572 7229 0a20 2020 2066 696e 616c  tderr).    final
+00022ac0: 6c79 3a0a 2020 2020 2020 6f73 2e63 686d  ly:.      os.chm
+00022ad0: 6f64 2874 7261 636b 6572 5f64 6972 2c20  od(tracker_dir, 
+00022ae0: 7361 7665 5f6d 6f64 290a 2020 2020 2020  save_mod).      
+00022af0: 6966 206f 732e 7061 7468 2e65 7869 7374  if os.path.exist
+00022b00: 7328 7472 6163 6b65 725f 6669 6c65 6e61  s(tracker_filena
+00022b10: 6d65 293a 0a20 2020 2020 2020 206f 732e  me):.        os.
+00022b20: 756e 6c69 6e6b 2874 7261 636b 6572 5f66  unlink(tracker_f
+00022b30: 696c 656e 616d 6529 0a0a 2020 6465 6620  ilename)..  def 
+00022b40: 5f74 6573 745f 6370 5f72 6573 756d 6162  _test_cp_resumab
+00022b50: 6c65 5f64 6f77 6e6c 6f61 645f 6272 6561  le_download_brea
+00022b60: 6b5f 6865 6c70 6572 2873 656c 662c 0a20  k_helper(self,. 
+00022b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022b90: 2020 2020 2020 2020 2020 2020 2020 626f                bo
+00022ba0: 746f 5f63 6f6e 6669 672c 0a20 2020 2020  to_config,.     
+00022bb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022bc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022bd0: 2020 2020 2020 2020 2020 656e 6372 7970            encryp
+00022be0: 7469 6f6e 5f6b 6579 3d4e 6f6e 6529 3a0a  tion_key=None):.
+00022bf0: 2020 2020 2222 2248 656c 7065 7220 6675      """Helper fu
+00022c00: 6e63 7469 6f6e 2066 6f72 2064 6966 6665  nction for diffe
+00022c10: 7265 6e74 206d 6f64 6573 206f 6620 7265  rent modes of re
+00022c20: 7375 6d61 626c 6520 646f 776e 6c6f 6164  sumable download
+00022c30: 2062 7265 616b 2e0a 0a20 2020 2041 7267   break...    Arg
+00022c40: 733a 0a20 2020 2020 2062 6f74 6f5f 636f  s:.      boto_co
+00022c50: 6e66 6967 3a20 4c69 7374 206f 6620 626f  nfig: List of bo
+00022c60: 746f 2063 6f6e 6669 6775 7261 7469 6f6e  to configuration
+00022c70: 2074 7570 6c65 7320 666f 7220 7573 6520   tuples for use 
+00022c80: 7769 7468 0a20 2020 2020 2020 2020 2053  with.          S
+00022c90: 6574 426f 746f 436f 6e66 6967 466f 7254  etBotoConfigForT
+00022ca0: 6573 742e 0a20 2020 2020 2065 6e63 7279  est..      encry
+00022cb0: 7074 696f 6e5f 6b65 793a 2042 6173 6536  ption_key: Base6
+00022cc0: 3420 656e 6372 7970 7469 6f6e 206b 6579  4 encryption key
+00022cd0: 2066 6f72 206f 626a 6563 7420 656e 6372   for object encr
+00022ce0: 7970 7469 6f6e 2028 6966 2061 6e79 292e  yption (if any).
+00022cf0: 0a20 2020 2022 2222 0a20 2020 2062 7563  .    """.    buc
+00022d00: 6b65 745f 7572 6920 3d20 7365 6c66 2e43  ket_uri = self.C
+00022d10: 7265 6174 6542 7563 6b65 7428 290a 2020  reateBucket().  
+00022d20: 2020 6669 6c65 5f63 6f6e 7465 6e74 7320    file_contents 
+00022d30: 3d20 6227 6127 202a 2073 656c 662e 6861  = b'a' * self.ha
+00022d40: 6c74 5f73 697a 650a 2020 2020 6f62 6a65  lt_size.    obje
+00022d50: 6374 5f75 7269 203d 2073 656c 662e 4372  ct_uri = self.Cr
+00022d60: 6561 7465 4f62 6a65 6374 2862 7563 6b65  eateObject(bucke
+00022d70: 745f 7572 693d 6275 636b 6574 5f75 7269  t_uri=bucket_uri
+00022d80: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00022d90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022da0: 2020 2020 206f 626a 6563 745f 6e61 6d65       object_name
+00022db0: 3d27 666f 6f27 2c0a 2020 2020 2020 2020  ='foo',.        
+00022dc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022dd0: 2020 2020 2020 2020 2020 2063 6f6e 7465             conte
+00022de0: 6e74 733d 6669 6c65 5f63 6f6e 7465 6e74  nts=file_content
+00022df0: 732c 0a20 2020 2020 2020 2020 2020 2020  s,.             
+00022e00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022e10: 2020 2020 2020 656e 6372 7970 7469 6f6e        encryption
+00022e20: 5f6b 6579 3d65 6e63 7279 7074 696f 6e5f  _key=encryption_
+00022e30: 6b65 7929 0a20 2020 2066 7061 7468 203d  key).    fpath =
+00022e40: 2073 656c 662e 4372 6561 7465 5465 6d70   self.CreateTemp
+00022e50: 4669 6c65 2829 0a20 2020 2074 6573 745f  File().    test_
+00022e60: 6361 6c6c 6261 636b 5f66 696c 6520 3d20  callback_file = 
+00022e70: 7365 6c66 2e43 7265 6174 6554 656d 7046  self.CreateTempF
+00022e80: 696c 6528 0a20 2020 2020 2020 2063 6f6e  ile(.        con
+00022e90: 7465 6e74 733d 7069 636b 6c65 2e64 756d  tents=pickle.dum
+00022ea0: 7073 2848 616c 7469 6e67 436f 7079 4361  ps(HaltingCopyCa
+00022eb0: 6c6c 6261 636b 4861 6e64 6c65 7228 4661  llbackHandler(Fa
+00022ec0: 6c73 652c 2035 2929 290a 0a20 2020 2077  lse, 5)))..    w
+00022ed0: 6974 6820 5365 7442 6f74 6f43 6f6e 6669  ith SetBotoConfi
+00022ee0: 6746 6f72 5465 7374 2862 6f74 6f5f 636f  gForTest(boto_co
+00022ef0: 6e66 6967 293a 0a20 2020 2020 2073 7464  nfig):.      std
+00022f00: 6572 7220 3d20 7365 6c66 2e52 756e 4773  err = self.RunGs
+00022f10: 5574 696c 285b 0a20 2020 2020 2020 2020  Util([.         
+00022f20: 2027 6370 272c 2027 2d2d 7465 7374 6361   'cp', '--testca
+00022f30: 6c6c 6261 636b 6669 6c65 272c 2074 6573  llbackfile', tes
+00022f40: 745f 6361 6c6c 6261 636b 5f66 696c 652c  t_callback_file,
+00022f50: 0a20 2020 2020 2020 2020 2073 7572 6928  .          suri(
+00022f60: 6f62 6a65 6374 5f75 7269 292c 2066 7061  object_uri), fpa
+00022f70: 7468 0a20 2020 2020 205d 2c0a 2020 2020  th.      ],.    
+00022f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022f90: 2020 2020 2020 2020 2020 6578 7065 6374            expect
+00022fa0: 6564 5f73 7461 7475 733d 312c 0a20 2020  ed_status=1,.   
+00022fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022fc0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00022fd0: 6e5f 7374 6465 7272 3d54 7275 6529 0a20  n_stderr=True). 
+00022fe0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+00022ff0: 496e 2827 4172 7469 6669 6361 6c6c 7920  In('Artifically 
+00023000: 6861 6c74 696e 6720 646f 776e 6c6f 6164  halting download
+00023010: 2e27 2c20 7374 6465 7272 290a 2020 2020  .', stderr).    
+00023020: 2020 7472 6163 6b65 725f 6669 6c65 6e61    tracker_filena
+00023030: 6d65 203d 2047 6574 5472 6163 6b65 7246  me = GetTrackerF
+00023040: 696c 6550 6174 6828 5374 6f72 6167 6555  ilePath(StorageU
+00023050: 726c 4672 6f6d 5374 7269 6e67 2866 7061  rlFromString(fpa
+00023060: 7468 292c 0a20 2020 2020 2020 2020 2020  th),.           
+00023070: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023080: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023090: 2054 7261 636b 6572 4669 6c65 5479 7065   TrackerFileType
+000230a0: 2e44 4f57 4e4c 4f41 442c 0a20 2020 2020  .DOWNLOAD,.     
+000230b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000230c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000230d0: 2020 2020 2020 2073 656c 662e 7465 7374         self.test
+000230e0: 5f61 7069 290a 2020 2020 2020 7365 6c66  _api).      self
+000230f0: 2e61 7373 6572 7454 7275 6528 6f73 2e70  .assertTrue(os.p
+00023100: 6174 682e 6973 6669 6c65 2874 7261 636b  ath.isfile(track
+00023110: 6572 5f66 696c 656e 616d 6529 290a 2020  er_filename)).  
+00023120: 2020 2020 7374 6465 7272 203d 2073 656c      stderr = sel
+00023130: 662e 5275 6e47 7355 7469 6c28 5b27 6370  f.RunGsUtil(['cp
+00023140: 272c 2073 7572 6928 6f62 6a65 6374 5f75  ', suri(object_u
+00023150: 7269 292c 2066 7061 7468 5d2c 0a20 2020  ri), fpath],.   
+00023160: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023170: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00023180: 6e5f 7374 6465 7272 3d54 7275 6529 0a20  n_stderr=True). 
+00023190: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+000231a0: 496e 2827 5265 7375 6d69 6e67 2064 6f77  In('Resuming dow
+000231b0: 6e6c 6f61 6427 2c20 7374 6465 7272 290a  nload', stderr).
+000231c0: 2020 2020 7769 7468 206f 7065 6e28 6670      with open(fp
+000231d0: 6174 682c 2027 7262 2729 2061 7320 663a  ath, 'rb') as f:
+000231e0: 0a20 2020 2020 2073 656c 662e 6173 7365  .      self.asse
+000231f0: 7274 4571 7561 6c28 662e 7265 6164 2829  rtEqual(f.read()
+00023200: 2c20 6669 6c65 5f63 6f6e 7465 6e74 732c  , file_contents,
+00023210: 2027 4669 6c65 2063 6f6e 7465 6e74 7320   'File contents 
+00023220: 6469 6666 6572 2729 0a0a 2020 6465 6620  differ')..  def 
+00023230: 7465 7374 5f63 705f 7265 7375 6d61 626c  test_cp_resumabl
+00023240: 655f 646f 776e 6c6f 6164 5f62 7265 616b  e_download_break
+00023250: 2873 656c 6629 3a0a 2020 2020 2222 2254  (self):.    """T
+00023260: 6573 7473 2074 6861 7420 6120 646f 776e  ests that a down
+00023270: 6c6f 6164 2063 616e 2062 6520 7265 7375  load can be resu
+00023280: 6d65 6420 6166 7465 7220 6120 636f 6e6e  med after a conn
+00023290: 6563 7469 6f6e 2062 7265 616b 2e22 2222  ection break."""
+000232a0: 0a20 2020 2073 656c 662e 5f74 6573 745f  .    self._test_
+000232b0: 6370 5f72 6573 756d 6162 6c65 5f64 6f77  cp_resumable_dow
+000232c0: 6e6c 6f61 645f 6272 6561 6b5f 6865 6c70  nload_break_help
+000232d0: 6572 285b 0a20 2020 2020 2020 2028 2747  er([.        ('G
+000232e0: 5355 7469 6c27 2c20 2772 6573 756d 6162  SUtil', 'resumab
+000232f0: 6c65 5f74 6872 6573 686f 6c64 272c 2073  le_threshold', s
+00023300: 7472 284f 4e45 5f4b 4942 2929 0a20 2020  tr(ONE_KIB)).   
+00023310: 205d 290a 0a20 2040 536b 6970 466f 7253   ])..  @SkipForS
+00023320: 3328 2767 7375 7469 6c20 646f 6573 6e5c  3('gsutil doesn\
+00023330: 2774 2073 7570 706f 7274 2053 3320 6375  't support S3 cu
+00023340: 7374 6f6d 6572 2d73 7570 706c 6965 6420  stomer-supplied 
+00023350: 656e 6372 7970 7469 6f6e 206b 6579 732e  encryption keys.
+00023360: 2729 0a20 2064 6566 2074 6573 745f 6370  ').  def test_cp
+00023370: 5f72 6573 756d 6162 6c65 5f65 6e63 7279  _resumable_encry
+00023380: 7074 6564 5f64 6f77 6e6c 6f61 645f 6272  pted_download_br
+00023390: 6561 6b28 7365 6c66 293a 0a20 2020 2022  eak(self):.    "
+000233a0: 2222 5465 7374 7320 7468 6174 2061 6e20  ""Tests that an 
+000233b0: 656e 6372 7970 7465 6420 646f 776e 6c6f  encrypted downlo
+000233c0: 6164 2072 6573 756d 6573 2061 6674 6572  ad resumes after
+000233d0: 2061 2063 6f6e 6e65 6374 696f 6e20 6272   a connection br
+000233e0: 6561 6b2e 2222 220a 2020 2020 6966 2073  eak.""".    if s
+000233f0: 656c 662e 7465 7374 5f61 7069 203d 3d20  elf.test_api == 
+00023400: 4170 6953 656c 6563 746f 722e 584d 4c3a  ApiSelector.XML:
+00023410: 0a20 2020 2020 2072 6574 7572 6e20 756e  .      return un
+00023420: 6974 7465 7374 2e73 6b69 7028 0a20 2020  ittest.skip(.   
+00023430: 2020 2020 2020 2027 6773 7574 696c 2064         'gsutil d
+00023440: 6f65 7320 6e6f 7420 7375 7070 6f72 7420  oes not support 
+00023450: 656e 6372 7970 7469 6f6e 2077 6974 6820  encryption with 
+00023460: 7468 6520 584d 4c20 4150 4927 290a 2020  the XML API').  
+00023470: 2020 7365 6c66 2e5f 7465 7374 5f63 705f    self._test_cp_
+00023480: 7265 7375 6d61 626c 655f 646f 776e 6c6f  resumable_downlo
+00023490: 6164 5f62 7265 616b 5f68 656c 7065 7228  ad_break_helper(
+000234a0: 0a20 2020 2020 2020 205b 2827 4753 5574  .        [('GSUt
+000234b0: 696c 272c 2027 7265 7375 6d61 626c 655f  il', 'resumable_
+000234c0: 7468 7265 7368 6f6c 6427 2c20 7374 7228  threshold', str(
+000234d0: 4f4e 455f 4b49 4229 292c 0a20 2020 2020  ONE_KIB)),.     
+000234e0: 2020 2020 2827 4753 5574 696c 272c 2027      ('GSUtil', '
+000234f0: 656e 6372 7970 7469 6f6e 5f6b 6579 272c  encryption_key',
+00023500: 2054 4553 545f 454e 4352 5950 5449 4f4e   TEST_ENCRYPTION
+00023510: 5f4b 4559 3129 5d2c 0a20 2020 2020 2020  _KEY1)],.       
+00023520: 2065 6e63 7279 7074 696f 6e5f 6b65 793d   encryption_key=
+00023530: 5445 5354 5f45 4e43 5259 5054 494f 4e5f  TEST_ENCRYPTION_
+00023540: 4b45 5931 290a 0a20 2040 536b 6970 466f  KEY1)..  @SkipFo
+00023550: 7253 3328 2767 7375 7469 6c20 646f 6573  rS3('gsutil does
+00023560: 6e5c 2774 2073 7570 706f 7274 2053 3320  n\'t support S3 
+00023570: 6375 7374 6f6d 6572 2d73 7570 706c 6965  customer-supplie
+00023580: 6420 656e 6372 7970 7469 6f6e 206b 6579  d encryption key
+00023590: 732e 2729 0a20 2064 6566 2074 6573 745f  s.').  def test_
+000235a0: 6370 5f72 6573 756d 6162 6c65 5f65 6e63  cp_resumable_enc
+000235b0: 7279 7074 6564 5f64 6f77 6e6c 6f61 645f  rypted_download_
+000235c0: 6b65 795f 726f 7461 7469 6f6e 2873 656c  key_rotation(sel
+000235d0: 6629 3a0a 2020 2020 2222 2254 6573 7473  f):.    """Tests
+000235e0: 2074 6861 7420 6120 646f 776e 6c6f 6164   that a download
+000235f0: 2072 6573 7461 7274 7320 7769 7468 2061   restarts with a
+00023600: 2072 6f74 6174 6564 2065 6e63 7279 7074   rotated encrypt
+00023610: 696f 6e20 6b65 792e 2222 220a 2020 2020  ion key.""".    
+00023620: 6966 2073 656c 662e 7465 7374 5f61 7069  if self.test_api
+00023630: 203d 3d20 4170 6953 656c 6563 746f 722e   == ApiSelector.
+00023640: 584d 4c3a 0a20 2020 2020 2072 6574 7572  XML:.      retur
+00023650: 6e20 756e 6974 7465 7374 2e73 6b69 7028  n unittest.skip(
+00023660: 0a20 2020 2020 2020 2020 2027 6773 7574  .          'gsut
+00023670: 696c 2064 6f65 7320 6e6f 7420 7375 7070  il does not supp
+00023680: 6f72 7420 656e 6372 7970 7469 6f6e 2077  ort encryption w
+00023690: 6974 6820 7468 6520 584d 4c20 4150 4927  ith the XML API'
+000236a0: 290a 2020 2020 6275 636b 6574 5f75 7269  ).    bucket_uri
+000236b0: 203d 2073 656c 662e 4372 6561 7465 4275   = self.CreateBu
+000236c0: 636b 6574 2829 0a20 2020 2066 696c 655f  cket().    file_
+000236d0: 636f 6e74 656e 7473 203d 2062 2761 2720  contents = b'a' 
+000236e0: 2a20 7365 6c66 2e68 616c 745f 7369 7a65  * self.halt_size
+000236f0: 0a20 2020 206f 626a 6563 745f 7572 6920  .    object_uri 
+00023700: 3d20 7365 6c66 2e43 7265 6174 654f 626a  = self.CreateObj
+00023710: 6563 7428 6275 636b 6574 5f75 7269 3d62  ect(bucket_uri=b
+00023720: 7563 6b65 745f 7572 692c 0a20 2020 2020  ucket_uri,.     
+00023730: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023740: 2020 2020 2020 2020 2020 2020 2020 6f62                ob
+00023750: 6a65 6374 5f6e 616d 653d 2766 6f6f 272c  ject_name='foo',
+00023760: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00023770: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023780: 2020 2020 636f 6e74 656e 7473 3d66 696c      contents=fil
+00023790: 655f 636f 6e74 656e 7473 2c0a 2020 2020  e_contents,.    
+000237a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000237b0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+000237c0: 6e63 7279 7074 696f 6e5f 6b65 793d 5445  ncryption_key=TE
+000237d0: 5354 5f45 4e43 5259 5054 494f 4e5f 4b45  ST_ENCRYPTION_KE
+000237e0: 5931 290a 2020 2020 6670 6174 6820 3d20  Y1).    fpath = 
+000237f0: 7365 6c66 2e43 7265 6174 6554 656d 7046  self.CreateTempF
+00023800: 696c 6528 290a 2020 2020 7465 7374 5f63  ile().    test_c
+00023810: 616c 6c62 6163 6b5f 6669 6c65 203d 2073  allback_file = s
+00023820: 656c 662e 4372 6561 7465 5465 6d70 4669  elf.CreateTempFi
+00023830: 6c65 280a 2020 2020 2020 2020 636f 6e74  le(.        cont
+00023840: 656e 7473 3d70 6963 6b6c 652e 6475 6d70  ents=pickle.dump
+00023850: 7328 4861 6c74 696e 6743 6f70 7943 616c  s(HaltingCopyCal
+00023860: 6c62 6163 6b48 616e 646c 6572 2846 616c  lbackHandler(Fal
+00023870: 7365 2c20 3529 2929 0a0a 2020 2020 626f  se, 5)))..    bo
+00023880: 746f 5f63 6f6e 6669 675f 666f 725f 7465  to_config_for_te
+00023890: 7374 203d 205b 2827 4753 5574 696c 272c  st = [('GSUtil',
+000238a0: 2027 7265 7375 6d61 626c 655f 7468 7265   'resumable_thre
+000238b0: 7368 6f6c 6427 2c20 7374 7228 4f4e 455f  shold', str(ONE_
+000238c0: 4b49 4229 292c 0a20 2020 2020 2020 2020  KIB)),.         
+000238d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000238e0: 2020 2028 2747 5355 7469 6c27 2c20 2765     ('GSUtil', 'e
+000238f0: 6e63 7279 7074 696f 6e5f 6b65 7927 2c20  ncryption_key', 
+00023900: 5445 5354 5f45 4e43 5259 5054 494f 4e5f  TEST_ENCRYPTION_
+00023910: 4b45 5931 295d 0a0a 2020 2020 7769 7468  KEY1)]..    with
+00023920: 2053 6574 426f 746f 436f 6e66 6967 466f   SetBotoConfigFo
+00023930: 7254 6573 7428 626f 746f 5f63 6f6e 6669  rTest(boto_confi
+00023940: 675f 666f 725f 7465 7374 293a 0a20 2020  g_for_test):.   
+00023950: 2020 2073 7464 6572 7220 3d20 7365 6c66     stderr = self
+00023960: 2e52 756e 4773 5574 696c 285b 0a20 2020  .RunGsUtil([.   
+00023970: 2020 2020 2020 2027 6370 272c 2027 2d2d         'cp', '--
+00023980: 7465 7374 6361 6c6c 6261 636b 6669 6c65  testcallbackfile
+00023990: 272c 2074 6573 745f 6361 6c6c 6261 636b  ', test_callback
+000239a0: 5f66 696c 652c 0a20 2020 2020 2020 2020  _file,.         
+000239b0: 2073 7572 6928 6f62 6a65 6374 5f75 7269   suri(object_uri
+000239c0: 292c 2066 7061 7468 0a20 2020 2020 205d  ), fpath.      ]
+000239d0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+000239e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000239f0: 6578 7065 6374 6564 5f73 7461 7475 733d  expected_status=
+00023a00: 312c 0a20 2020 2020 2020 2020 2020 2020  1,.             
+00023a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023a20: 2072 6574 7572 6e5f 7374 6465 7272 3d54   return_stderr=T
+00023a30: 7275 6529 0a20 2020 2020 2073 656c 662e  rue).      self.
+00023a40: 6173 7365 7274 496e 2827 4172 7469 6669  assertIn('Artifi
+00023a50: 6361 6c6c 7920 6861 6c74 696e 6720 646f  cally halting do
+00023a60: 776e 6c6f 6164 2e27 2c20 7374 6465 7272  wnload.', stderr
+00023a70: 290a 2020 2020 2020 7472 6163 6b65 725f  ).      tracker_
+00023a80: 6669 6c65 6e61 6d65 203d 2047 6574 5472  filename = GetTr
+00023a90: 6163 6b65 7246 696c 6550 6174 6828 5374  ackerFilePath(St
+00023aa0: 6f72 6167 6555 726c 4672 6f6d 5374 7269  orageUrlFromStri
+00023ab0: 6e67 2866 7061 7468 292c 0a20 2020 2020  ng(fpath),.     
+00023ac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023ad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023ae0: 2020 2020 2020 2054 7261 636b 6572 4669         TrackerFi
+00023af0: 6c65 5479 7065 2e44 4f57 4e4c 4f41 442c  leType.DOWNLOAD,
+00023b00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00023b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023b20: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+00023b30: 662e 7465 7374 5f61 7069 290a 2020 2020  f.test_api).    
+00023b40: 2020 7365 6c66 2e61 7373 6572 7454 7275    self.assertTru
+00023b50: 6528 6f73 2e70 6174 682e 6973 6669 6c65  e(os.path.isfile
+00023b60: 2874 7261 636b 6572 5f66 696c 656e 616d  (tracker_filenam
+00023b70: 6529 290a 0a20 2020 2023 2041 6674 6572  e))..    # After
+00023b80: 2073 696d 756c 6174 6564 2063 6f6e 6e65   simulated conne
+00023b90: 6374 696f 6e20 6272 6561 6b2c 2072 6f74  ction break, rot
+00023ba0: 6174 6520 7468 6520 6b65 7920 6f6e 2074  ate the key on t
+00023bb0: 6865 206f 626a 6563 742e 0a20 2020 2062  he object..    b
+00023bc0: 6f74 6f5f 636f 6e66 6967 5f66 6f72 5f74  oto_config_for_t
+00023bd0: 6573 7432 203d 205b 2827 4753 5574 696c  est2 = [('GSUtil
+00023be0: 272c 2027 7265 7375 6d61 626c 655f 7468  ', 'resumable_th
+00023bf0: 7265 7368 6f6c 6427 2c20 7374 7228 4f4e  reshold', str(ON
+00023c00: 455f 4b49 4229 292c 0a20 2020 2020 2020  E_KIB)),.       
 00023c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023c30: 2020 2020 7365 6c66 2e74 6573 745f 6170      self.test_ap
-00023c40: 6929 0a20 2020 2074 7279 3a0a 2020 2020  i).    try:.    
-00023c50: 2020 7769 7468 206f 7065 6e28 7472 6163    with open(trac
-00023c60: 6b65 725f 6669 6c65 6e61 6d65 2c20 2777  ker_filename, 'w
-00023c70: 2729 2061 7320 7472 6163 6b65 725f 6670  ') as tracker_fp
-00023c80: 3a0a 2020 2020 2020 2020 7472 6163 6b65  :.        tracke
-00023c90: 725f 6670 2e77 7269 7465 2865 7461 6729  r_fp.write(etag)
-00023ca0: 0a20 2020 2020 2062 6f74 6f5f 636f 6e66  .      boto_conf
-00023cb0: 6967 5f66 6f72 5f74 6573 7420 3d20 2827  ig_for_test = ('
-00023cc0: 4753 5574 696c 272c 2027 7265 7375 6d61  GSUtil', 'resuma
-00023cd0: 626c 655f 7468 7265 7368 6f6c 6427 2c20  ble_threshold', 
-00023ce0: 7374 7228 4f4e 455f 4b49 4229 290a 2020  str(ONE_KIB)).  
-00023cf0: 2020 2020 7769 7468 2053 6574 426f 746f      with SetBoto
-00023d00: 436f 6e66 6967 466f 7254 6573 7428 5b62  ConfigForTest([b
-00023d10: 6f74 6f5f 636f 6e66 6967 5f66 6f72 5f74  oto_config_for_t
-00023d20: 6573 745d 293a 0a20 2020 2020 2020 2073  est]):.        s
-00023d30: 7464 6572 7220 3d20 7365 6c66 2e52 756e  tderr = self.Run
-00023d40: 4773 5574 696c 285b 2763 7027 2c20 7375  GsUtil(['cp', su
-00023d50: 7269 286f 626a 6563 745f 7572 6929 2c20  ri(object_uri), 
-00023d60: 6670 6174 685d 2c0a 2020 2020 2020 2020  fpath],.        
-00023d70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023d80: 2020 2020 2020 2020 7265 7475 726e 5f73          return_s
-00023d90: 7464 6572 723d 5472 7565 2c0a 2020 2020  tderr=True,.    
-00023da0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023db0: 2020 2020 2020 2020 2020 2020 6578 7065              expe
-00023dc0: 6374 6564 5f73 7461 7475 733d 3129 0a20  cted_status=1). 
-00023dd0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-00023de0: 7274 496e 2827 446f 776e 6c6f 6164 2061  rtIn('Download a
-00023df0: 6c72 6561 6479 2063 6f6d 706c 6574 6527  lready complete'
-00023e00: 2c20 7374 6465 7272 290a 2020 2020 2020  , stderr).      
-00023e10: 2020 7365 6c66 2e61 7373 6572 7449 6e28    self.assertIn(
-00023e20: 2764 6f65 736e 5c27 7420 6d61 7463 6820  'doesn\'t match 
-00023e30: 636c 6f75 642d 7375 7070 6c69 6564 2064  cloud-supplied d
-00023e40: 6967 6573 7427 2c20 7374 6465 7272 290a  igest', stderr).
-00023e50: 2020 2020 2020 2020 2320 4669 6c65 2061          # File a
-00023e60: 6e64 2074 7261 636b 6572 2066 696c 6520  nd tracker file 
-00023e70: 7368 6f75 6c64 2062 6520 6465 6c65 7465  should be delete
-00023e80: 642e 0a20 2020 2020 2020 2073 656c 662e  d..        self.
-00023e90: 6173 7365 7274 4661 6c73 6528 6f73 2e70  assertFalse(os.p
-00023ea0: 6174 682e 6973 6669 6c65 2874 656d 705f  ath.isfile(temp_
-00023eb0: 646f 776e 6c6f 6164 5f66 696c 6529 290a  download_file)).
-00023ec0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-00023ed0: 6572 7446 616c 7365 286f 732e 7061 7468  ertFalse(os.path
-00023ee0: 2e69 7366 696c 6528 7472 6163 6b65 725f  .isfile(tracker_
-00023ef0: 6669 6c65 6e61 6d65 2929 0a20 2020 2020  filename)).     
-00023f00: 2020 2023 2050 6572 6d61 6e65 6e74 2066     # Permanent f
-00023f10: 696c 6520 7368 6f75 6c64 206e 6f74 2068  ile should not h
-00023f20: 6176 6520 6265 656e 2063 7265 6174 6564  ave been created
-00023f30: 2e0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
-00023f40: 7373 6572 7446 616c 7365 286f 732e 7061  ssertFalse(os.pa
-00023f50: 7468 2e69 7366 696c 6528 6670 6174 6829  th.isfile(fpath)
-00023f60: 290a 2020 2020 6669 6e61 6c6c 793a 0a20  ).    finally:. 
-00023f70: 2020 2020 2069 6620 6f73 2e70 6174 682e       if os.path.
-00023f80: 6578 6973 7473 2874 7261 636b 6572 5f66  exists(tracker_f
-00023f90: 696c 656e 616d 6529 3a0a 2020 2020 2020  ilename):.      
-00023fa0: 2020 6f73 2e75 6e6c 696e 6b28 7472 6163    os.unlink(trac
-00023fb0: 6b65 725f 6669 6c65 6e61 6d65 290a 0a20  ker_filename).. 
-00023fc0: 2064 6566 2074 6573 745f 6370 5f72 6573   def test_cp_res
-00023fd0: 756d 6162 6c65 5f64 6f77 6e6c 6f61 645f  umable_download_
-00023fe0: 636f 6e74 656e 745f 6d61 7463 6865 7328  content_matches(
-00023ff0: 7365 6c66 293a 0a20 2020 2022 2222 5465  self):.    """Te
-00024000: 7374 7320 646f 776e 6c6f 6164 206e 6f2d  sts download no-
-00024010: 6f70 7320 7768 656e 2074 7261 636b 6572  ops when tracker
-00024020: 2066 696c 6520 6d61 7463 6865 7320 6578   file matches ex
-00024030: 6973 7469 6e67 2066 696c 652e 2222 220a  isting file.""".
-00024040: 2020 2020 6275 636b 6574 5f75 7269 203d      bucket_uri =
-00024050: 2073 656c 662e 4372 6561 7465 4275 636b   self.CreateBuck
-00024060: 6574 2829 0a20 2020 2074 6d70 5f64 6972  et().    tmp_dir
-00024070: 203d 2073 656c 662e 4372 6561 7465 5465   = self.CreateTe
-00024080: 6d70 4469 7228 290a 2020 2020 6670 6174  mpDir().    fpat
-00024090: 6820 3d20 7365 6c66 2e43 7265 6174 6554  h = self.CreateT
-000240a0: 656d 7046 696c 6528 746d 7064 6972 3d74  empFile(tmpdir=t
-000240b0: 6d70 5f64 6972 290a 2020 2020 6d61 7463  mp_dir).    matc
-000240c0: 6869 6e67 5f63 6f6e 7465 6e74 7320 3d20  hing_contents = 
-000240d0: 6227 6162 6364 2720 2a20 4f4e 455f 4b49  b'abcd' * ONE_KI
-000240e0: 420a 2020 2020 7465 6d70 5f64 6f77 6e6c  B.    temp_downl
-000240f0: 6f61 645f 6669 6c65 203d 2066 7061 7468  oad_file = fpath
-00024100: 202b 2027 5f2e 6773 746d 7027 0a20 2020   + '_.gstmp'.   
-00024110: 2077 6974 6820 6f70 656e 2874 656d 705f   with open(temp_
-00024120: 646f 776e 6c6f 6164 5f66 696c 652c 2027  download_file, '
-00024130: 7762 2729 2061 7320 6670 3a0a 2020 2020  wb') as fp:.    
-00024140: 2020 6670 2e77 7269 7465 286d 6174 6368    fp.write(match
-00024150: 696e 675f 636f 6e74 656e 7473 290a 0a20  ing_contents).. 
-00024160: 2020 206f 626a 6563 745f 7572 6920 3d20     object_uri = 
-00024170: 7365 6c66 2e43 7265 6174 654f 626a 6563  self.CreateObjec
-00024180: 7428 6275 636b 6574 5f75 7269 3d62 7563  t(bucket_uri=buc
-00024190: 6b65 745f 7572 692c 0a20 2020 2020 2020  ket_uri,.       
-000241a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000241b0: 2020 2020 2020 2020 2020 2020 6f62 6a65              obje
-000241c0: 6374 5f6e 616d 653d 2766 6f6f 272c 0a20  ct_name='foo',. 
-000241d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000241e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000241f0: 2020 636f 6e74 656e 7473 3d6d 6174 6368    contents=match
-00024200: 696e 675f 636f 6e74 656e 7473 290a 2020  ing_contents).  
-00024210: 2020 7374 646f 7574 203d 2073 656c 662e    stdout = self.
-00024220: 5275 6e47 7355 7469 6c28 5b27 6c73 272c  RunGsUtil(['ls',
-00024230: 2027 2d4c 272c 2073 7572 6928 6f62 6a65   '-L', suri(obje
-00024240: 6374 5f75 7269 295d 2c20 7265 7475 726e  ct_uri)], return
-00024250: 5f73 7464 6f75 743d 5472 7565 290a 2020  _stdout=True).  
-00024260: 2020 6574 6167 5f6d 6174 6368 203d 2072    etag_match = r
-00024270: 652e 7365 6172 6368 2872 275c 732a 4554  e.search(r'\s*ET
-00024280: 6167 3a5c 732a 282e 2a29 272c 2073 7464  ag:\s*(.*)', std
-00024290: 6f75 7429 0a20 2020 2073 656c 662e 6173  out).    self.as
-000242a0: 7365 7274 4973 4e6f 744e 6f6e 6528 6574  sertIsNotNone(et
-000242b0: 6167 5f6d 6174 6368 2c20 2743 6f75 6c64  ag_match, 'Could
-000242c0: 206e 6f74 2067 6574 206f 626a 6563 7420   not get object 
-000242d0: 4554 6167 2729 0a20 2020 2073 656c 662e  ETag').    self.
-000242e0: 6173 7365 7274 4571 7561 6c28 6c65 6e28  assertEqual(len(
-000242f0: 6574 6167 5f6d 6174 6368 2e67 726f 7570  etag_match.group
-00024300: 7328 2929 2c20 312c 0a20 2020 2020 2020  s()), 1,.       
-00024310: 2020 2020 2020 2020 2020 2020 2020 2744                'D
-00024320: 6964 206e 6f74 206d 6174 6368 2065 7870  id not match exp
-00024330: 6563 7465 6420 7369 6e67 6c65 2045 5461  ected single ETa
-00024340: 6727 290a 2020 2020 6574 6167 203d 2065  g').    etag = e
-00024350: 7461 675f 6d61 7463 682e 6772 6f75 7028  tag_match.group(
-00024360: 3129 0a20 2020 2074 7261 636b 6572 5f66  1).    tracker_f
-00024370: 696c 656e 616d 6520 3d20 4765 7454 7261  ilename = GetTra
-00024380: 636b 6572 4669 6c65 5061 7468 2853 746f  ckerFilePath(Sto
-00024390: 7261 6765 5572 6c46 726f 6d53 7472 696e  rageUrlFromStrin
-000243a0: 6728 6670 6174 6829 2c0a 2020 2020 2020  g(fpath),.      
-000243b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000243c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000243d0: 2020 2020 5472 6163 6b65 7246 696c 6554      TrackerFileT
-000243e0: 7970 652e 444f 574e 4c4f 4144 2c0a 2020  ype.DOWNLOAD,.  
-000243f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024400: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024410: 2020 2020 2020 2020 7365 6c66 2e74 6573          self.tes
-00024420: 745f 6170 6929 0a20 2020 2077 6974 6820  t_api).    with 
-00024430: 6f70 656e 2874 7261 636b 6572 5f66 696c  open(tracker_fil
-00024440: 656e 616d 652c 2027 7727 2920 6173 2074  ename, 'w') as t
-00024450: 7261 636b 6572 5f66 703a 0a20 2020 2020  racker_fp:.     
-00024460: 2074 7261 636b 6572 5f66 702e 7772 6974   tracker_fp.writ
-00024470: 6528 6574 6167 290a 2020 2020 7472 793a  e(etag).    try:
-00024480: 0a20 2020 2020 2062 6f74 6f5f 636f 6e66  .      boto_conf
-00024490: 6967 5f66 6f72 5f74 6573 7420 3d20 2827  ig_for_test = ('
-000244a0: 4753 5574 696c 272c 2027 7265 7375 6d61  GSUtil', 'resuma
-000244b0: 626c 655f 7468 7265 7368 6f6c 6427 2c20  ble_threshold', 
-000244c0: 7374 7228 4f4e 455f 4b49 4229 290a 2020  str(ONE_KIB)).  
-000244d0: 2020 2020 7769 7468 2053 6574 426f 746f      with SetBoto
-000244e0: 436f 6e66 6967 466f 7254 6573 7428 5b62  ConfigForTest([b
-000244f0: 6f74 6f5f 636f 6e66 6967 5f66 6f72 5f74  oto_config_for_t
-00024500: 6573 745d 293a 0a20 2020 2020 2020 2073  est]):.        s
-00024510: 7464 6572 7220 3d20 7365 6c66 2e52 756e  tderr = self.Run
-00024520: 4773 5574 696c 285b 2763 7027 2c20 7375  GsUtil(['cp', su
-00024530: 7269 286f 626a 6563 745f 7572 6929 2c20  ri(object_uri), 
-00024540: 6670 6174 685d 2c0a 2020 2020 2020 2020  fpath],.        
-00024550: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024560: 2020 2020 2020 2020 7265 7475 726e 5f73          return_s
-00024570: 7464 6572 723d 5472 7565 290a 2020 2020  tderr=True).    
-00024580: 2020 2020 7365 6c66 2e61 7373 6572 7449      self.assertI
-00024590: 6e28 2744 6f77 6e6c 6f61 6420 616c 7265  n('Download alre
-000245a0: 6164 7920 636f 6d70 6c65 7465 272c 2073  ady complete', s
-000245b0: 7464 6572 7229 0a20 2020 2020 2020 2023  tderr).        #
-000245c0: 2054 7261 636b 6572 2066 696c 6520 7368   Tracker file sh
-000245d0: 6f75 6c64 2062 6520 7265 6d6f 7665 6420  ould be removed 
-000245e0: 6166 7465 7220 7375 6363 6573 7366 756c  after successful
-000245f0: 2068 6173 6820 7661 6c69 6461 7469 6f6e   hash validation
-00024600: 2e0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
-00024610: 7373 6572 7446 616c 7365 286f 732e 7061  ssertFalse(os.pa
-00024620: 7468 2e69 7366 696c 6528 7472 6163 6b65  th.isfile(tracke
-00024630: 725f 6669 6c65 6e61 6d65 2929 0a20 2020  r_filename)).   
-00024640: 2066 696e 616c 6c79 3a0a 2020 2020 2020   finally:.      
-00024650: 6966 206f 732e 7061 7468 2e65 7869 7374  if os.path.exist
-00024660: 7328 7472 6163 6b65 725f 6669 6c65 6e61  s(tracker_filena
-00024670: 6d65 293a 0a20 2020 2020 2020 206f 732e  me):.        os.
-00024680: 756e 6c69 6e6b 2874 7261 636b 6572 5f66  unlink(tracker_f
-00024690: 696c 656e 616d 6529 0a0a 2020 6465 6620  ilename)..  def 
-000246a0: 7465 7374 5f63 705f 7265 7375 6d61 626c  test_cp_resumabl
-000246b0: 655f 646f 776e 6c6f 6164 5f74 7261 636b  e_download_track
-000246c0: 6572 5f66 696c 655f 6e6f 745f 6d61 7463  er_file_not_matc
-000246d0: 6865 7328 7365 6c66 293a 0a20 2020 2022  hes(self):.    "
-000246e0: 2222 5465 7374 7320 7468 6174 2064 6f77  ""Tests that dow
-000246f0: 6e6c 6f61 6420 6f76 6572 7772 6974 6573  nload overwrites
-00024700: 2077 6865 6e20 7472 6163 6b65 7220 6669   when tracker fi
-00024710: 6c65 2065 7461 6720 646f 6573 206e 6f74  le etag does not
-00024720: 206d 6174 6368 2e22 2222 0a20 2020 2062   match.""".    b
-00024730: 7563 6b65 745f 7572 6920 3d20 7365 6c66  ucket_uri = self
-00024740: 2e43 7265 6174 6542 7563 6b65 7428 290a  .CreateBucket().
-00024750: 2020 2020 746d 705f 6469 7220 3d20 7365      tmp_dir = se
-00024760: 6c66 2e43 7265 6174 6554 656d 7044 6972  lf.CreateTempDir
-00024770: 2829 0a20 2020 2066 7061 7468 203d 2073  ().    fpath = s
-00024780: 656c 662e 4372 6561 7465 5465 6d70 4669  elf.CreateTempFi
-00024790: 6c65 2874 6d70 6469 723d 746d 705f 6469  le(tmpdir=tmp_di
-000247a0: 722c 2063 6f6e 7465 6e74 733d 6227 6162  r, contents=b'ab
-000247b0: 6364 2720 2a20 4f4e 455f 4b49 4229 0a20  cd' * ONE_KIB). 
-000247c0: 2020 206f 626a 6563 745f 7572 6920 3d20     object_uri = 
-000247d0: 7365 6c66 2e43 7265 6174 654f 626a 6563  self.CreateObjec
-000247e0: 7428 6275 636b 6574 5f75 7269 3d62 7563  t(bucket_uri=buc
-000247f0: 6b65 745f 7572 692c 0a20 2020 2020 2020  ket_uri,.       
-00024800: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024810: 2020 2020 2020 2020 2020 2020 6f62 6a65              obje
-00024820: 6374 5f6e 616d 653d 2766 6f6f 272c 0a20  ct_name='foo',. 
-00024830: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024850: 2020 636f 6e74 656e 7473 3d62 2765 6667    contents=b'efg
-00024860: 6827 202a 204f 4e45 5f4b 4942 290a 2020  h' * ONE_KIB).  
-00024870: 2020 7374 646f 7574 203d 2073 656c 662e    stdout = self.
-00024880: 5275 6e47 7355 7469 6c28 5b27 6c73 272c  RunGsUtil(['ls',
-00024890: 2027 2d4c 272c 2073 7572 6928 6f62 6a65   '-L', suri(obje
-000248a0: 6374 5f75 7269 295d 2c20 7265 7475 726e  ct_uri)], return
-000248b0: 5f73 7464 6f75 743d 5472 7565 290a 2020  _stdout=True).  
-000248c0: 2020 6574 6167 5f6d 6174 6368 203d 2072    etag_match = r
-000248d0: 652e 7365 6172 6368 2872 275c 732a 4554  e.search(r'\s*ET
-000248e0: 6167 3a5c 732a 282e 2a29 272c 2073 7464  ag:\s*(.*)', std
-000248f0: 6f75 7429 0a20 2020 2073 656c 662e 6173  out).    self.as
-00024900: 7365 7274 4973 4e6f 744e 6f6e 6528 6574  sertIsNotNone(et
-00024910: 6167 5f6d 6174 6368 2c20 2743 6f75 6c64  ag_match, 'Could
-00024920: 206e 6f74 2067 6574 206f 626a 6563 7420   not get object 
-00024930: 4554 6167 2729 0a20 2020 2073 656c 662e  ETag').    self.
-00024940: 6173 7365 7274 4571 7561 6c28 6c65 6e28  assertEqual(len(
-00024950: 6574 6167 5f6d 6174 6368 2e67 726f 7570  etag_match.group
-00024960: 7328 2929 2c20 312c 0a20 2020 2020 2020  s()), 1,.       
-00024970: 2020 2020 2020 2020 2020 2020 2020 2744                'D
-00024980: 6964 206e 6f74 206d 6174 6368 2072 6567  id not match reg
-00024990: 6578 2066 6f72 2065 7861 6374 6c79 206f  ex for exactly o
-000249a0: 6e65 206f 626a 6563 7420 4554 6167 2729  ne object ETag')
-000249b0: 0a20 2020 2065 7461 6720 3d20 6574 6167  .    etag = etag
-000249c0: 5f6d 6174 6368 2e67 726f 7570 2831 290a  _match.group(1).
-000249d0: 2020 2020 6574 6167 202b 3d20 276e 6f6e      etag += 'non
-000249e0: 6d61 7463 6869 6e67 270a 2020 2020 7472  matching'.    tr
-000249f0: 6163 6b65 725f 6669 6c65 6e61 6d65 203d  acker_filename =
-00024a00: 2047 6574 5472 6163 6b65 7246 696c 6550   GetTrackerFileP
-00024a10: 6174 6828 5374 6f72 6167 6555 726c 4672  ath(StorageUrlFr
-00024a20: 6f6d 5374 7269 6e67 2866 7061 7468 292c  omString(fpath),
-00024a30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00024a40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024a50: 2020 2020 2020 2020 2020 2054 7261 636b             Track
-00024a60: 6572 4669 6c65 5479 7065 2e44 4f57 4e4c  erFileType.DOWNL
-00024a70: 4f41 442c 0a20 2020 2020 2020 2020 2020  OAD,.           
-00024a80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024a90: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00024aa0: 656c 662e 7465 7374 5f61 7069 290a 2020  elf.test_api).  
-00024ab0: 2020 7769 7468 206f 7065 6e28 7472 6163    with open(trac
-00024ac0: 6b65 725f 6669 6c65 6e61 6d65 2c20 2777  ker_filename, 'w
-00024ad0: 2729 2061 7320 7472 6163 6b65 725f 6670  ') as tracker_fp
-00024ae0: 3a0a 2020 2020 2020 7472 6163 6b65 725f  :.      tracker_
-00024af0: 6670 2e77 7269 7465 2865 7461 6729 0a20  fp.write(etag). 
-00024b00: 2020 2074 7279 3a0a 2020 2020 2020 626f     try:.      bo
-00024b10: 746f 5f63 6f6e 6669 675f 666f 725f 7465  to_config_for_te
-00024b20: 7374 203d 2028 2747 5355 7469 6c27 2c20  st = ('GSUtil', 
-00024b30: 2772 6573 756d 6162 6c65 5f74 6872 6573  'resumable_thres
-00024b40: 686f 6c64 272c 2073 7472 284f 4e45 5f4b  hold', str(ONE_K
-00024b50: 4942 2929 0a20 2020 2020 2077 6974 6820  IB)).      with 
-00024b60: 5365 7442 6f74 6f43 6f6e 6669 6746 6f72  SetBotoConfigFor
-00024b70: 5465 7374 285b 626f 746f 5f63 6f6e 6669  Test([boto_confi
-00024b80: 675f 666f 725f 7465 7374 5d29 3a0a 2020  g_for_test]):.  
-00024b90: 2020 2020 2020 7374 6465 7272 203d 2073        stderr = s
-00024ba0: 656c 662e 5275 6e47 7355 7469 6c28 5b27  elf.RunGsUtil(['
-00024bb0: 6370 272c 2073 7572 6928 6f62 6a65 6374  cp', suri(object
-00024bc0: 5f75 7269 292c 2066 7061 7468 5d2c 0a20  _uri), fpath],. 
-00024bd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024be0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00024bf0: 6574 7572 6e5f 7374 6465 7272 3d54 7275  eturn_stderr=Tru
-00024c00: 6529 0a20 2020 2020 2020 2073 656c 662e  e).        self.
-00024c10: 6173 7365 7274 4e6f 7449 6e28 2752 6573  assertNotIn('Res
-00024c20: 756d 696e 6720 646f 776e 6c6f 6164 272c  uming download',
-00024c30: 2073 7464 6572 7229 0a20 2020 2020 2020   stderr).       
-00024c40: 2023 2045 6e73 7572 6520 7468 6520 6669   # Ensure the fi
-00024c50: 6c65 2077 6173 206f 7665 7277 7269 7474  le was overwritt
-00024c60: 656e 2e0a 2020 2020 2020 2020 7769 7468  en..        with
-00024c70: 206f 7065 6e28 6670 6174 682c 2027 7227   open(fpath, 'r'
-00024c80: 2920 6173 2069 6e5f 6670 3a0a 2020 2020  ) as in_fp:.    
-00024c90: 2020 2020 2020 636f 6e74 656e 7473 203d        contents =
-00024ca0: 2069 6e5f 6670 2e72 6561 6428 290a 2020   in_fp.read().  
-00024cb0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-00024cc0: 6572 7445 7175 616c 280a 2020 2020 2020  ertEqual(.      
-00024cd0: 2020 2020 2020 2020 636f 6e74 656e 7473          contents
-00024ce0: 2c20 2765 6667 6827 202a 204f 4e45 5f4b  , 'efgh' * ONE_K
-00024cf0: 4942 2c0a 2020 2020 2020 2020 2020 2020  IB,.            
-00024d00: 2020 2746 696c 6520 6e6f 7420 6f76 6572    'File not over
-00024d10: 7772 6974 7465 6e20 7768 656e 2069 7420  written when it 
-00024d20: 7368 6f75 6c64 2068 6176 6520 6265 656e  should have been
-00024d30: 2027 0a20 2020 2020 2020 2020 2020 2020   '.             
-00024d40: 2027 6475 6520 746f 2061 206e 6f6e 2d6d   'due to a non-m
-00024d50: 6174 6368 696e 6720 7472 6163 6b65 7220  atching tracker 
-00024d60: 6669 6c65 2e27 290a 2020 2020 2020 2020  file.').        
-00024d70: 7365 6c66 2e61 7373 6572 7446 616c 7365  self.assertFalse
-00024d80: 286f 732e 7061 7468 2e69 7366 696c 6528  (os.path.isfile(
-00024d90: 7472 6163 6b65 725f 6669 6c65 6e61 6d65  tracker_filename
-00024da0: 2929 0a20 2020 2066 696e 616c 6c79 3a0a  )).    finally:.
-00024db0: 2020 2020 2020 6966 206f 732e 7061 7468        if os.path
-00024dc0: 2e65 7869 7374 7328 7472 6163 6b65 725f  .exists(tracker_
-00024dd0: 6669 6c65 6e61 6d65 293a 0a20 2020 2020  filename):.     
-00024de0: 2020 206f 732e 756e 6c69 6e6b 2874 7261     os.unlink(tra
-00024df0: 636b 6572 5f66 696c 656e 616d 6529 0a0a  cker_filename)..
-00024e00: 2020 6465 6620 7465 7374 5f63 705f 646f    def test_cp_do
-00024e10: 7562 6c65 5f67 7a69 7028 7365 6c66 293a  uble_gzip(self):
-00024e20: 0a20 2020 2022 2222 5465 7374 7320 7468  .    """Tests th
-00024e30: 6174 2075 706c 6f61 6420 616e 6420 646f  at upload and do
-00024e40: 776e 6c6f 6164 206f 6620 6120 646f 7562  wnload of a doub
-00024e50: 6c79 2d67 7a69 7070 6564 2066 696c 6520  ly-gzipped file 
-00024e60: 7375 6363 6565 6473 2e22 2222 0a20 2020  succeeds.""".   
-00024e70: 2062 7563 6b65 745f 7572 6920 3d20 7365   bucket_uri = se
-00024e80: 6c66 2e43 7265 6174 6542 7563 6b65 7428  lf.CreateBucket(
-00024e90: 290a 2020 2020 6670 6174 6820 3d20 7365  ).    fpath = se
-00024ea0: 6c66 2e43 7265 6174 6554 656d 7046 696c  lf.CreateTempFil
-00024eb0: 6528 6669 6c65 5f6e 616d 653d 276c 6f6f  e(file_name='loo
-00024ec0: 6b73 2d7a 6970 7065 642e 677a 272c 2063  ks-zipped.gz', c
-00024ed0: 6f6e 7465 6e74 733d 6227 666f 6f27 290a  ontents=b'foo').
-00024ee0: 2020 2020 7365 6c66 2e52 756e 4773 5574      self.RunGsUt
-00024ef0: 696c 285b 0a20 2020 2020 2020 2027 2d68  il([.        '-h
-00024f00: 272c 2027 636f 6e74 656e 742d 7479 7065  ', 'content-type
-00024f10: 3a61 7070 6c69 6361 7469 6f6e 2f67 7a69  :application/gzi
-00024f20: 7027 2c20 2763 7027 2c20 272d 5a27 2c0a  p', 'cp', '-Z',.
-00024f30: 2020 2020 2020 2020 7375 7269 2866 7061          suri(fpa
-00024f40: 7468 292c 0a20 2020 2020 2020 2073 7572  th),.        sur
-00024f50: 6928 6275 636b 6574 5f75 7269 2c20 2766  i(bucket_uri, 'f
-00024f60: 6f6f 2729 0a20 2020 205d 290a 2020 2020  oo').    ]).    
-00024f70: 7365 6c66 2e52 756e 4773 5574 696c 285b  self.RunGsUtil([
-00024f80: 2763 7027 2c20 7375 7269 2862 7563 6b65  'cp', suri(bucke
-00024f90: 745f 7572 692c 2027 666f 6f27 292c 2066  t_uri, 'foo'), f
-00024fa0: 7061 7468 5d29 0a0a 2020 4053 6b69 7046  path])..  @SkipF
-00024fb0: 6f72 5333 2827 4e6f 2063 6f6d 7072 6573  orS3('No compres
-00024fc0: 7365 6420 7472 616e 7370 6f72 7420 656e  sed transport en
-00024fd0: 636f 6469 6e67 2073 7570 706f 7274 2066  coding support f
-00024fe0: 6f72 2053 332e 2729 0a20 2040 536b 6970  or S3.').  @Skip
-00024ff0: 466f 7258 4d4c 2827 4e6f 2063 6f6d 7072  ForXML('No compr
-00025000: 6573 7365 6420 7472 616e 7370 6f72 7420  essed transport 
-00025010: 656e 636f 6469 6e67 2073 7570 706f 7274  encoding support
-00025020: 2066 6f72 2074 6865 2058 4d4c 2041 5049   for the XML API
-00025030: 2e27 290a 2020 4053 6571 7565 6e74 6961  .').  @Sequentia
-00025040: 6c41 6e64 5061 7261 6c6c 656c 5472 616e  lAndParallelTran
-00025050: 7366 6572 0a20 2064 6566 2074 6573 745f  sfer.  def test_
-00025060: 6370 5f64 6f75 626c 655f 677a 6970 5f74  cp_double_gzip_t
-00025070: 7261 6e73 706f 7274 5f65 6e63 6f64 6564  ransport_encoded
-00025080: 2873 656c 6629 3a0a 2020 2020 2222 2254  (self):.    """T
-00025090: 6573 7473 2074 6861 7420 7570 6c6f 6164  ests that upload
-000250a0: 2061 6e64 2064 6f77 6e6c 6f61 6420 6f66   and download of
-000250b0: 2061 2064 6f75 626c 792d 677a 6970 7065   a doubly-gzippe
-000250c0: 6420 6669 6c65 2073 7563 6365 6564 732e  d file succeeds.
-000250d0: 2222 220a 2020 2020 6275 636b 6574 5f75  """.    bucket_u
-000250e0: 7269 203d 2073 656c 662e 4372 6561 7465  ri = self.Create
-000250f0: 4275 636b 6574 2829 0a20 2020 2066 7061  Bucket().    fpa
-00025100: 7468 203d 2073 656c 662e 4372 6561 7465  th = self.Create
-00025110: 5465 6d70 4669 6c65 2866 696c 655f 6e61  TempFile(file_na
-00025120: 6d65 3d27 6c6f 6f6b 732d 7a69 7070 6564  me='looks-zipped
-00025130: 2e67 7a27 2c20 636f 6e74 656e 7473 3d62  .gz', contents=b
-00025140: 2766 6f6f 2729 0a20 2020 2073 7464 6572  'foo').    stder
-00025150: 7220 3d20 7365 6c66 2e52 756e 4773 5574  r = self.RunGsUt
-00025160: 696c 285b 0a20 2020 2020 2020 2027 2d44  il([.        '-D
-00025170: 272c 2027 2d68 272c 2027 636f 6e74 656e  ', '-h', 'conten
-00025180: 742d 7479 7065 3a61 7070 6c69 6361 7469  t-type:applicati
-00025190: 6f6e 2f67 7a69 7027 2c20 2763 7027 2c20  on/gzip', 'cp', 
-000251a0: 272d 4a27 2c0a 2020 2020 2020 2020 7375  '-J',.        su
-000251b0: 7269 2866 7061 7468 292c 0a20 2020 2020  ri(fpath),.     
-000251c0: 2020 2073 7572 6928 6275 636b 6574 5f75     suri(bucket_u
-000251d0: 7269 2c20 2766 6f6f 2729 0a20 2020 205d  ri, 'foo').    ]
-000251e0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-000251f0: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00025200: 7475 726e 5f73 7464 6572 723d 5472 7565  turn_stderr=True
-00025210: 290a 2020 2020 2320 456e 7375 7265 2074  ).    # Ensure t
-00025220: 6865 2070 726f 6772 6573 7320 6c6f 6767  he progress logg
-00025230: 6572 2073 6565 7320 6120 677a 6970 2065  er sees a gzip e
-00025240: 6e63 6f64 696e 672e 0a20 2020 2073 656c  ncoding..    sel
-00025250: 662e 6173 7365 7274 496e 2827 7365 6e64  f.assertIn('send
-00025260: 3a20 5573 696e 6720 677a 6970 2074 7261  : Using gzip tra
-00025270: 6e73 706f 7274 2065 6e63 6f64 696e 6720  nsport encoding 
-00025280: 666f 7220 7468 6520 7265 7175 6573 742e  for the request.
-00025290: 272c 0a20 2020 2020 2020 2020 2020 2020  ',.             
-000252a0: 2020 2020 2073 7464 6572 7229 0a20 2020       stderr).   
-000252b0: 2073 656c 662e 5275 6e47 7355 7469 6c28   self.RunGsUtil(
-000252c0: 5b27 6370 272c 2073 7572 6928 6275 636b  ['cp', suri(buck
-000252d0: 6574 5f75 7269 2c20 2766 6f6f 2729 2c20  et_uri, 'foo'), 
-000252e0: 6670 6174 685d 290a 0a20 2040 5365 7175  fpath])..  @Sequ
-000252f0: 656e 7469 616c 416e 6450 6172 616c 6c65  entialAndParalle
-00025300: 6c54 7261 6e73 6665 720a 2020 6465 6620  lTransfer.  def 
-00025310: 7465 7374 5f63 705f 7265 7375 6d61 626c  test_cp_resumabl
-00025320: 655f 646f 776e 6c6f 6164 5f67 7a69 7028  e_download_gzip(
-00025330: 7365 6c66 293a 0a20 2020 2022 2222 5465  self):.    """Te
-00025340: 7374 7320 7468 6174 2064 6f77 6e6c 6f61  sts that downloa
-00025350: 6420 6361 6e20 6265 2072 6573 756d 6564  d can be resumed
-00025360: 2073 7563 6365 7373 6675 6c6c 7920 7769   successfully wi
-00025370: 7468 2061 2067 7a69 7070 6564 2066 696c  th a gzipped fil
-00025380: 652e 2222 220a 2020 2020 2320 4765 6e65  e.""".    # Gene
-00025390: 7261 7465 2073 6f6d 6520 7265 6173 6f6e  rate some reason
-000253a0: 6162 6c79 2069 6e63 6f6d 7072 6573 7369  ably incompressi
-000253b0: 626c 6520 6461 7461 2e20 2054 6869 7320  ble data.  This 
-000253c0: 636f 6d70 7265 7373 6573 2074 6f20 6120  compresses to a 
-000253d0: 6269 740a 2020 2020 2320 6172 6f75 6e64  bit.    # around
-000253e0: 2031 3238 4b20 696e 2070 7261 6374 6963   128K in practic
-000253f0: 652c 2062 7574 2077 6520 6173 7365 7274  e, but we assert
-00025400: 2073 7065 6369 6669 6361 6c6c 7920 6265   specifically be
-00025410: 6c6f 7720 7468 6174 2069 7420 6973 0a20  low that it is. 
-00025420: 2020 2023 206c 6172 6765 7220 7468 616e     # larger than
-00025430: 2073 656c 662e 6861 6c74 5f73 697a 6520   self.halt_size 
-00025440: 746f 2067 7561 7261 6e74 6565 2074 6861  to guarantee tha
-00025450: 7420 7765 2063 616e 2068 616c 7420 7468  t we can halt th
-00025460: 6520 646f 776e 6c6f 6164 0a20 2020 2023  e download.    #
-00025470: 2070 6172 7477 6179 2074 6872 6f75 6768   partway through
-00025480: 2e0a 2020 2020 6f62 6a65 6374 5f75 7269  ..    object_uri
-00025490: 203d 2073 656c 662e 4372 6561 7465 4f62   = self.CreateOb
-000254a0: 6a65 6374 2829 0a20 2020 2072 616e 646f  ject().    rando
-000254b0: 6d2e 7365 6564 2830 290a 2020 2020 636f  m.seed(0).    co
-000254c0: 6e74 656e 7473 203d 2073 7472 285b 0a20  ntents = str([. 
-000254d0: 2020 2020 2020 2072 616e 646f 6d2e 6368         random.ch
-000254e0: 6f69 6365 2873 7472 696e 672e 6173 6369  oice(string.asci
-000254f0: 695f 6c65 7474 6572 7329 2066 6f72 205f  i_letters) for _
-00025500: 2069 6e20 7872 616e 6765 2873 656c 662e   in xrange(self.
-00025510: 6861 6c74 5f73 697a 6529 0a20 2020 205d  halt_size).    ]
-00025520: 292e 656e 636f 6465 2827 6173 6369 6927  ).encode('ascii'
-00025530: 290a 2020 2020 7261 6e64 6f6d 2e73 6565  ).    random.see
-00025540: 6428 2920 2023 2052 6573 6574 2074 6865  d()  # Reset the
-00025550: 2073 6565 6420 666f 7220 616e 7920 6f74   seed for any ot
-00025560: 6865 7220 7465 7374 732e 0a20 2020 2066  her tests..    f
-00025570: 7061 7468 3120 3d20 7365 6c66 2e43 7265  path1 = self.Cre
-00025580: 6174 6554 656d 7046 696c 6528 6669 6c65  ateTempFile(file
-00025590: 5f6e 616d 653d 2775 6e7a 6970 7065 642e  _name='unzipped.
-000255a0: 7478 7427 2c20 636f 6e74 656e 7473 3d63  txt', contents=c
-000255b0: 6f6e 7465 6e74 7329 0a20 2020 2073 656c  ontents).    sel
-000255c0: 662e 5275 6e47 7355 7469 6c28 5b27 6370  f.RunGsUtil(['cp
-000255d0: 272c 2027 2d7a 272c 2027 7478 7427 2c20  ', '-z', 'txt', 
-000255e0: 7375 7269 2866 7061 7468 3129 2c20 7375  suri(fpath1), su
-000255f0: 7269 286f 626a 6563 745f 7572 6929 5d29  ri(object_uri)])
-00025600: 0a0a 2020 2020 2320 5573 6520 4052 6574  ..    # Use @Ret
-00025610: 7279 2061 7320 6865 6467 6520 6167 6169  ry as hedge agai
-00025620: 6e73 7420 6275 636b 6574 206c 6973 7469  nst bucket listi
-00025630: 6e67 2065 7665 6e74 7561 6c20 636f 6e73  ng eventual cons
-00025640: 6973 7465 6e63 792e 0a20 2020 2040 5265  istency..    @Re
-00025650: 7472 7928 4173 7365 7274 696f 6e45 7272  try(AssertionErr
-00025660: 6f72 2c20 7472 6965 733d 332c 2074 696d  or, tries=3, tim
-00025670: 656f 7574 5f73 6563 733d 3129 0a20 2020  eout_secs=1).   
-00025680: 2064 6566 205f 4765 744f 626a 6563 7453   def _GetObjectS
-00025690: 697a 6528 293a 0a20 2020 2020 2073 7464  ize():.      std
-000256a0: 6f75 7420 3d20 7365 6c66 2e52 756e 4773  out = self.RunGs
-000256b0: 5574 696c 285b 2764 7527 2c20 7375 7269  Util(['du', suri
-000256c0: 286f 626a 6563 745f 7572 6929 5d2c 2072  (object_uri)], r
-000256d0: 6574 7572 6e5f 7374 646f 7574 3d54 7275  eturn_stdout=Tru
-000256e0: 6529 0a20 2020 2020 2073 697a 655f 6d61  e).      size_ma
-000256f0: 7463 6820 3d20 7265 2e73 6561 7263 6828  tch = re.search(
-00025700: 7227 285c 642b 295c 732b 2e2a 272c 2073  r'(\d+)\s+.*', s
-00025710: 7464 6f75 7429 0a20 2020 2020 2073 656c  tdout).      sel
-00025720: 662e 6173 7365 7274 4973 4e6f 744e 6f6e  f.assertIsNotNon
-00025730: 6528 7369 7a65 5f6d 6174 6368 2c20 2743  e(size_match, 'C
-00025740: 6f75 6c64 206e 6f74 2067 6574 206f 626a  ould not get obj
-00025750: 6563 7420 7369 7a65 2729 0a20 2020 2020  ect size').     
-00025760: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-00025770: 6c28 6c65 6e28 7369 7a65 5f6d 6174 6368  l(len(size_match
-00025780: 2e67 726f 7570 7328 2929 2c20 312c 0a20  .groups()), 1,. 
-00025790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000257a0: 2020 2020 2020 2744 6964 206e 6f74 206d        'Did not m
-000257b0: 6174 6368 2072 6567 6578 2066 6f72 2065  atch regex for e
-000257c0: 7861 6374 6c79 206f 6e65 206f 626a 6563  xactly one objec
-000257d0: 7420 7369 7a65 2e27 290a 2020 2020 2020  t size.').      
-000257e0: 7265 7475 726e 206c 6f6e 6728 7369 7a65  return long(size
-000257f0: 5f6d 6174 6368 2e67 726f 7570 2831 2929  _match.group(1))
-00025800: 0a0a 2020 2020 6f62 6a65 6374 5f73 697a  ..    object_siz
-00025810: 6520 3d20 5f47 6574 4f62 6a65 6374 5369  e = _GetObjectSi
-00025820: 7a65 2829 0a20 2020 2073 656c 662e 6173  ze().    self.as
-00025830: 7365 7274 4772 6561 7465 7245 7175 616c  sertGreaterEqual
-00025840: 280a 2020 2020 2020 2020 6f62 6a65 6374  (.        object
-00025850: 5f73 697a 652c 2073 656c 662e 6861 6c74  _size, self.halt
-00025860: 5f73 697a 652c 0a20 2020 2020 2020 2027  _size,.        '
-00025870: 436f 6d70 7265 7365 6420 6f62 6a65 6374  Compresed object
-00025880: 2073 697a 6520 7761 7320 6e6f 7420 6c61   size was not la
-00025890: 7267 6520 656e 6f75 6768 2074 6f20 270a  rge enough to '.
-000258a0: 2020 2020 2020 2020 2761 6c6c 6f77 2066          'allow f
-000258b0: 6f72 2061 2068 616c 7465 6420 646f 776e  or a halted down
-000258c0: 6c6f 6164 2c20 736f 2074 6865 2074 6573  load, so the tes
-000258d0: 7420 7265 7375 6c74 7320 270a 2020 2020  t results '.    
-000258e0: 2020 2020 2777 6f75 6c64 2062 6520 696e      'would be in
-000258f0: 7661 6c69 642e 2050 6c65 6173 6520 696e  valid. Please in
-00025900: 6372 6561 7365 2074 6865 2063 6f6d 7072  crease the compr
-00025910: 6573 7365 6420 270a 2020 2020 2020 2020  essed '.        
-00025920: 276f 626a 6563 7420 7369 7a65 2069 6e20  'object size in 
-00025930: 7468 6520 7465 7374 2e27 290a 2020 2020  the test.').    
-00025940: 6670 6174 6832 203d 2073 656c 662e 4372  fpath2 = self.Cr
-00025950: 6561 7465 5465 6d70 4669 6c65 2829 0a20  eateTempFile(). 
-00025960: 2020 2074 6573 745f 6361 6c6c 6261 636b     test_callback
-00025970: 5f66 696c 6520 3d20 7365 6c66 2e43 7265  _file = self.Cre
-00025980: 6174 6554 656d 7046 696c 6528 0a20 2020  ateTempFile(.   
-00025990: 2020 2020 2063 6f6e 7465 6e74 733d 7069       contents=pi
-000259a0: 636b 6c65 2e64 756d 7073 2848 616c 7469  ckle.dumps(Halti
-000259b0: 6e67 436f 7079 4361 6c6c 6261 636b 4861  ngCopyCallbackHa
-000259c0: 6e64 6c65 7228 4661 6c73 652c 2035 2929  ndler(False, 5))
-000259d0: 290a 0a20 2020 2062 6f74 6f5f 636f 6e66  )..    boto_conf
-000259e0: 6967 5f66 6f72 5f74 6573 7420 3d20 2827  ig_for_test = ('
-000259f0: 4753 5574 696c 272c 2027 7265 7375 6d61  GSUtil', 'resuma
-00025a00: 626c 655f 7468 7265 7368 6f6c 6427 2c20  ble_threshold', 
-00025a10: 7374 7228 4f4e 455f 4b49 4229 290a 2020  str(ONE_KIB)).  
-00025a20: 2020 7769 7468 2053 6574 426f 746f 436f    with SetBotoCo
-00025a30: 6e66 6967 466f 7254 6573 7428 5b62 6f74  nfigForTest([bot
-00025a40: 6f5f 636f 6e66 6967 5f66 6f72 5f74 6573  o_config_for_tes
-00025a50: 745d 293a 0a20 2020 2020 2073 7464 6572  t]):.      stder
-00025a60: 7220 3d20 7365 6c66 2e52 756e 4773 5574  r = self.RunGsUt
-00025a70: 696c 285b 0a20 2020 2020 2020 2020 2027  il([.          '
-00025a80: 6370 272c 2027 2d2d 7465 7374 6361 6c6c  cp', '--testcall
-00025a90: 6261 636b 6669 6c65 272c 2074 6573 745f  backfile', test_
-00025aa0: 6361 6c6c 6261 636b 5f66 696c 652c 0a20  callback_file,. 
-00025ab0: 2020 2020 2020 2020 2073 7572 6928 6f62           suri(ob
-00025ac0: 6a65 6374 5f75 7269 292c 0a20 2020 2020  ject_uri),.     
-00025ad0: 2020 2020 2073 7572 6928 6670 6174 6832       suri(fpath2
-00025ae0: 290a 2020 2020 2020 5d2c 0a20 2020 2020  ).      ],.     
-00025af0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025b00: 2020 2020 2020 2020 2072 6574 7572 6e5f           return_
-00025b10: 7374 6465 7272 3d54 7275 652c 0a20 2020  stderr=True,.   
-00025b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025b30: 2020 2020 2020 2020 2020 2065 7870 6563             expec
-00025b40: 7465 645f 7374 6174 7573 3d31 290a 2020  ted_status=1).  
-00025b50: 2020 2020 7365 6c66 2e61 7373 6572 7449      self.assertI
-00025b60: 6e28 2741 7274 6966 6963 616c 6c79 2068  n('Artifically h
-00025b70: 616c 7469 6e67 2064 6f77 6e6c 6f61 642e  alting download.
-00025b80: 272c 2073 7464 6572 7229 0a20 2020 2020  ', stderr).     
-00025b90: 2073 656c 662e 6173 7365 7274 496e 2827   self.assertIn('
-00025ba0: 446f 776e 6c6f 6164 696e 6720 746f 2074  Downloading to t
-00025bb0: 656d 7020 677a 6970 2066 696c 656e 616d  emp gzip filenam
-00025bc0: 6527 2c20 7374 6465 7272 290a 0a20 2020  e', stderr)..   
-00025bd0: 2020 2023 2054 7261 636b 6572 2066 696c     # Tracker fil
-00025be0: 6573 2077 696c 6c20 6861 7665 2064 6966  es will have dif
-00025bf0: 6665 7265 6e74 206e 616d 6573 2064 6570  ferent names dep
-00025c00: 656e 6469 6e67 206f 6e20 6966 2077 6520  ending on if we 
-00025c10: 6172 650a 2020 2020 2020 2320 646f 776e  are.      # down
-00025c20: 6c6f 6164 696e 6720 7365 7175 656e 7469  loading sequenti
-00025c30: 616c 6c79 206f 7220 696e 2070 6172 616c  ally or in paral
-00025c40: 6c65 6c2e 0a20 2020 2020 2073 6c69 6365  lel..      slice
-00025c50: 645f 646f 776e 6c6f 6164 5f74 6872 6573  d_download_thres
-00025c60: 686f 6c64 203d 2048 756d 616e 5265 6164  hold = HumanRead
-00025c70: 6162 6c65 546f 4279 7465 7328 0a20 2020  ableToBytes(.   
-00025c80: 2020 2020 2020 2062 6f74 6f2e 636f 6e66         boto.conf
-00025c90: 6967 2e67 6574 2827 4753 5574 696c 272c  ig.get('GSUtil',
-00025ca0: 2027 736c 6963 6564 5f6f 626a 6563 745f   'sliced_object_
-00025cb0: 646f 776e 6c6f 6164 5f74 6872 6573 686f  download_thresho
-00025cc0: 6c64 272c 0a20 2020 2020 2020 2020 2020  ld',.           
-00025cd0: 2020 2020 2020 2020 2020 2020 2020 2044                 D
-00025ce0: 4546 4155 4c54 5f53 4c49 4345 445f 4f42  EFAULT_SLICED_OB
-00025cf0: 4a45 4354 5f44 4f57 4e4c 4f41 445f 5448  JECT_DOWNLOAD_TH
-00025d00: 5245 5348 4f4c 4429 290a 2020 2020 2020  RESHOLD)).      
-00025d10: 736c 6963 6564 5f64 6f77 6e6c 6f61 6420  sliced_download 
-00025d20: 3d20 286c 656e 2863 6f6e 7465 6e74 7329  = (len(contents)
-00025d30: 203e 2073 6c69 6365 645f 646f 776e 6c6f   > sliced_downlo
-00025d40: 6164 5f74 6872 6573 686f 6c64 2061 6e64  ad_threshold and
-00025d50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00025d60: 2020 2020 2020 2020 2020 736c 6963 6564            sliced
-00025d70: 5f64 6f77 6e6c 6f61 645f 7468 7265 7368  _download_thresh
-00025d80: 6f6c 6420 3e20 3020 616e 640a 2020 2020  old > 0 and.    
-00025d90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025da0: 2020 2020 2055 7369 6e67 4372 636d 6f64       UsingCrcmod
-00025db0: 4578 7465 6e73 696f 6e28 2929 0a20 2020  Extension()).   
-00025dc0: 2020 2069 6620 736c 6963 6564 5f64 6f77     if sliced_dow
-00025dd0: 6e6c 6f61 643a 0a20 2020 2020 2020 2074  nload:.        t
-00025de0: 7261 636b 6572 6669 6c65 5f74 7970 6520  rackerfile_type 
-00025df0: 3d20 5472 6163 6b65 7246 696c 6554 7970  = TrackerFileTyp
-00025e00: 652e 534c 4943 4544 5f44 4f57 4e4c 4f41  e.SLICED_DOWNLOA
-00025e10: 440a 2020 2020 2020 656c 7365 3a0a 2020  D.      else:.  
-00025e20: 2020 2020 2020 7472 6163 6b65 7266 696c        trackerfil
-00025e30: 655f 7479 7065 203d 2054 7261 636b 6572  e_type = Tracker
-00025e40: 4669 6c65 5479 7065 2e44 4f57 4e4c 4f41  FileType.DOWNLOA
-00025e50: 440a 2020 2020 2020 7472 6163 6b65 725f  D.      tracker_
-00025e60: 6669 6c65 6e61 6d65 203d 2047 6574 5472  filename = GetTr
-00025e70: 6163 6b65 7246 696c 6550 6174 6828 5374  ackerFilePath(St
-00025e80: 6f72 6167 6555 726c 4672 6f6d 5374 7269  orageUrlFromStri
-00025e90: 6e67 2866 7061 7468 3229 2c0a 2020 2020  ng(fpath2),.    
-00025ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025ec0: 2020 2020 2020 2020 7472 6163 6b65 7266          trackerf
-00025ed0: 696c 655f 7479 7065 2c20 7365 6c66 2e74  ile_type, self.t
-00025ee0: 6573 745f 6170 6929 0a0a 2020 2020 2020  est_api)..      
-00025ef0: 2320 5765 2073 686f 756c 6420 6861 7665  # We should have
-00025f00: 2061 2074 656d 706f 7261 7279 2067 7a69   a temporary gzi
-00025f10: 7070 6564 2066 696c 652c 2061 2074 7261  pped file, a tra
-00025f20: 636b 6572 2066 696c 652c 2061 6e64 206e  cker file, and n
-00025f30: 6f0a 2020 2020 2020 2320 6669 6e61 6c20  o.      # final 
-00025f40: 6669 6c65 2079 6574 2e0a 2020 2020 2020  file yet..      
-00025f50: 7365 6c66 2e61 7373 6572 7454 7275 6528  self.assertTrue(
-00025f60: 6f73 2e70 6174 682e 6973 6669 6c65 2874  os.path.isfile(t
-00025f70: 7261 636b 6572 5f66 696c 656e 616d 6529  racker_filename)
-00025f80: 290a 2020 2020 2020 7365 6c66 2e61 7373  ).      self.ass
-00025f90: 6572 7454 7275 6528 6f73 2e70 6174 682e  ertTrue(os.path.
-00025fa0: 6973 6669 6c65 2827 2573 5f2e 677a 746d  isfile('%s_.gztm
-00025fb0: 7027 2025 2066 7061 7468 3229 290a 2020  p' % fpath2)).  
-00025fc0: 2020 2020 7374 6465 7272 203d 2073 656c      stderr = sel
-00025fd0: 662e 5275 6e47 7355 7469 6c28 0a20 2020  f.RunGsUtil(.   
-00025fe0: 2020 2020 2020 205b 2763 7027 2c20 7375         ['cp', su
-00025ff0: 7269 286f 626a 6563 745f 7572 6929 2c20  ri(object_uri), 
-00026000: 7375 7269 2866 7061 7468 3229 5d2c 2072  suri(fpath2)], r
-00026010: 6574 7572 6e5f 7374 6465 7272 3d54 7275  eturn_stderr=Tru
-00026020: 6529 0a20 2020 2020 2073 656c 662e 6173  e).      self.as
-00026030: 7365 7274 496e 2827 5265 7375 6d69 6e67  sertIn('Resuming
-00026040: 2064 6f77 6e6c 6f61 6427 2c20 7374 6465   download', stde
-00026050: 7272 290a 2020 2020 2020 7769 7468 206f  rr).      with o
-00026060: 7065 6e28 6670 6174 6832 2c20 2772 6227  pen(fpath2, 'rb'
-00026070: 2920 6173 2066 3a0a 2020 2020 2020 2020  ) as f:.        
-00026080: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-00026090: 2866 2e72 6561 6428 292c 2063 6f6e 7465  (f.read(), conte
-000260a0: 6e74 732c 2027 4669 6c65 2063 6f6e 7465  nts, 'File conte
-000260b0: 6e74 7320 6469 6420 6e6f 7420 6d61 7463  nts did not matc
-000260c0: 682e 2729 0a20 2020 2020 2073 656c 662e  h.').      self.
-000260d0: 6173 7365 7274 4661 6c73 6528 6f73 2e70  assertFalse(os.p
-000260e0: 6174 682e 6973 6669 6c65 2874 7261 636b  ath.isfile(track
-000260f0: 6572 5f66 696c 656e 616d 6529 290a 2020  er_filename)).  
-00026100: 2020 2020 7365 6c66 2e61 7373 6572 7446      self.assertF
-00026110: 616c 7365 286f 732e 7061 7468 2e69 7366  alse(os.path.isf
-00026120: 696c 6528 2725 735f 2e67 7a74 6d70 2720  ile('%s_.gztmp' 
-00026130: 2520 6670 6174 6832 2929 0a0a 2020 6465  % fpath2))..  de
-00026140: 6620 5f47 6574 4661 7669 636f 6e46 696c  f _GetFaviconFil
-00026150: 6528 7365 6c66 293a 0a20 2020 2023 204d  e(self):.    # M
-00026160: 616b 6520 6120 7465 6d70 2066 696c 6520  ake a temp file 
-00026170: 6672 6f6d 2066 6176 6963 6f6e 2e69 636f  from favicon.ico
-00026180: 2e67 7a2e 2046 696e 6469 6e67 2074 6865  .gz. Finding the
-00026190: 206c 6f63 6174 696f 6e20 6f66 206f 7572   location of our
-000261a0: 2074 6573 740a 2020 2020 2320 6461 7461   test.    # data
-000261b0: 2076 6172 6965 7320 6465 7065 6e64 696e   varies dependin
-000261c0: 6720 6f6e 2068 6f77 2f77 6865 7265 2067  g on how/where g
-000261d0: 7375 7469 6c20 7761 7320 696e 7374 616c  sutil was instal
-000261e0: 6c65 642c 2073 6f20 7765 2067 6574 2074  led, so we get t
-000261f0: 6865 0a20 2020 2023 2064 6174 6120 7669  he.    # data vi
-00026200: 6120 706b 6775 7469 6c20 616e 6420 7573  a pkgutil and us
-00026210: 6520 7468 6973 2077 6f72 6b61 726f 756e  e this workaroun
-00026220: 642e 0a20 2020 2069 6620 6e6f 7420 6861  d..    if not ha
-00026230: 7361 7474 7228 7365 6c66 2c20 2774 6573  sattr(self, 'tes
-00026240: 745f 6461 7461 5f66 6176 6963 6f6e 5f66  t_data_favicon_f
-00026250: 696c 6527 293a 0a20 2020 2020 2063 6f6e  ile'):.      con
-00026260: 7465 6e74 7320 3d20 706b 6775 7469 6c2e  tents = pkgutil.
-00026270: 6765 745f 6461 7461 2827 6773 6c69 6227  get_data('gslib'
-00026280: 2c20 2774 6573 7473 2f74 6573 745f 6461  , 'tests/test_da
-00026290: 7461 2f66 6176 6963 6f6e 2e69 636f 2e67  ta/favicon.ico.g
-000262a0: 7a27 290a 2020 2020 2020 7365 6c66 2e74  z').      self.t
-000262b0: 6573 745f 6461 7461 5f66 6176 6963 6f6e  est_data_favicon
-000262c0: 5f66 696c 6520 3d20 7365 6c66 2e43 7265  _file = self.Cre
-000262d0: 6174 6554 656d 7046 696c 6528 636f 6e74  ateTempFile(cont
-000262e0: 656e 7473 3d63 6f6e 7465 6e74 7329 0a20  ents=contents). 
-000262f0: 2020 2072 6574 7572 6e20 7365 6c66 2e74     return self.t
-00026300: 6573 745f 6461 7461 5f66 6176 6963 6f6e  est_data_favicon
-00026310: 5f66 696c 650a 0a20 2064 6566 2074 6573  _file..  def tes
-00026320: 745f 6370 5f64 6f77 6e6c 6f61 645f 7472  t_cp_download_tr
-00026330: 616e 7366 6572 5f65 6e63 6f64 6564 2873  ansfer_encoded(s
-00026340: 656c 6629 3a0a 2020 2020 2222 2254 6573  elf):.    """Tes
-00026350: 7473 2063 6875 6e6b 6564 2074 7261 6e73  ts chunked trans
-00026360: 6665 7220 656e 636f 6465 6420 646f 776e  fer encoded down
-00026370: 6c6f 6164 2068 616e 646c 696e 672e 0a0a  load handling...
-00026380: 2020 2020 5465 7374 7320 7468 6174 2064      Tests that d
-00026390: 6f77 6e6c 6f61 6420 776f 726b 7320 636f  ownload works co
-000263a0: 7272 6563 746c 7920 7769 7468 2061 2067  rrectly with a g
-000263b0: 7a69 7070 6564 2063 6875 6e6b 6564 2074  zipped chunked t
-000263c0: 7261 6e73 6665 722d 656e 636f 6465 640a  ransfer-encoded.
-000263d0: 2020 2020 6f62 6a65 6374 2028 7768 6963      object (whic
-000263e0: 6820 7468 6572 6566 6f72 6520 6c61 636b  h therefore lack
-000263f0: 7320 436f 6e74 656e 742d 4c65 6e67 7468  s Content-Length
-00026400: 2920 6f66 2061 2073 697a 6520 7468 6174  ) of a size that
-00026410: 2067 6574 7320 6665 7463 6865 640a 2020   gets fetched.  
-00026420: 2020 696e 2061 2073 696e 676c 6520 6368    in a single ch
-00026430: 756e 6b20 2865 7865 7263 6973 696e 6720  unk (exercising 
-00026440: 646f 776e 6c6f 6164 696e 6720 6f66 206f  downloading of o
-00026450: 626a 6563 7473 206c 6163 6b69 6e67 2061  bjects lacking a
-00026460: 206c 656e 6774 680a 2020 2020 7265 7370   length.    resp
-00026470: 6f6e 7365 2068 6561 6465 7229 2e0a 2020  onse header)..  
-00026480: 2020 2222 220a 2020 2020 2320 5570 6c6f    """.    # Uplo
-00026490: 6164 2061 2066 696c 6520 2f20 636f 6e74  ad a file / cont
-000264a0: 656e 742d 656e 636f 6469 6e67 202f 2063  ent-encoding / c
-000264b0: 6f6e 7465 6e74 2d74 7970 6520 7468 6174  ontent-type that
-000264c0: 2074 7269 6767 6572 7320 7468 6973 2066   triggers this f
-000264d0: 6c6f 772e 0a20 2020 2023 204e 6f74 653a  low..    # Note:
-000264e0: 2057 6520 6e65 6564 2074 6f20 7573 6520   We need to use 
-000264f0: 7468 6520 6669 6c65 2077 6974 6820 7072  the file with pr
-00026500: 652d 7a69 7070 6564 2066 6f72 6d61 7420  e-zipped format 
-00026510: 616e 6420 6d61 6e75 616c 6c79 2073 6574  and manually set
-00026520: 2074 6865 0a20 2020 2023 2063 6f6e 7465   the.    # conte
-00026530: 6e74 2d65 6e63 6f64 696e 6720 616e 6420  nt-encoding and 
-00026540: 636f 6e74 656e 742d 7479 7065 2062 6563  content-type bec
-00026550: 6175 7365 2074 6865 2050 7974 686f 6e20  ause the Python 
-00026560: 677a 6970 206d 6f64 756c 6520 2875 7365  gzip module (use
-00026570: 6420 6279 0a20 2020 2023 2067 7375 7469  d by.    # gsuti
-00026580: 6c20 6370 202d 5a29 2077 6f6e 2774 2072  l cp -Z) won't r
-00026590: 6570 726f 6475 6365 2074 6865 2062 7974  eproduce the byt
-000265a0: 6573 2074 6861 7420 7472 6967 6765 7220  es that trigger 
-000265b0: 7468 6973 2070 726f 626c 656d 2e0a 2020  this problem..  
-000265c0: 2020 6275 636b 6574 5f75 7269 203d 2073    bucket_uri = s
-000265d0: 656c 662e 4372 6561 7465 4275 636b 6574  elf.CreateBucket
-000265e0: 2829 0a20 2020 206f 626a 6563 745f 7572  ().    object_ur
-000265f0: 6920 3d20 7365 6c66 2e43 7265 6174 654f  i = self.CreateO
-00026600: 626a 6563 7428 6275 636b 6574 5f75 7269  bject(bucket_uri
-00026610: 3d62 7563 6b65 745f 7572 692c 206f 626a  =bucket_uri, obj
-00026620: 6563 745f 6e61 6d65 3d27 666f 6f27 290a  ect_name='foo').
-00026630: 2020 2020 696e 7075 745f 6669 6c65 6e61      input_filena
-00026640: 6d65 203d 2073 656c 662e 5f47 6574 4661  me = self._GetFa
-00026650: 7669 636f 6e46 696c 6528 290a 2020 2020  viconFile().    
-00026660: 7365 6c66 2e52 756e 4773 5574 696c 285b  self.RunGsUtil([
-00026670: 0a20 2020 2020 2020 2027 2d68 272c 2027  .        '-h', '
-00026680: 436f 6e74 656e 742d 456e 636f 6469 6e67  Content-Encoding
-00026690: 3a67 7a69 7027 2c20 272d 6827 2c20 2743  :gzip', '-h', 'C
-000266a0: 6f6e 7465 6e74 2d54 7970 653a 696d 6167  ontent-Type:imag
-000266b0: 652f 782d 6963 6f6e 272c 2027 6370 272c  e/x-icon', 'cp',
-000266c0: 0a20 2020 2020 2020 2073 7572 6928 696e  .        suri(in
-000266d0: 7075 745f 6669 6c65 6e61 6d65 292c 0a20  put_filename),. 
-000266e0: 2020 2020 2020 2073 7572 6928 6f62 6a65         suri(obje
-000266f0: 6374 5f75 7269 290a 2020 2020 5d29 0a20  ct_uri).    ]). 
-00026700: 2020 2023 2043 6f6d 7075 7465 2074 6865     # Compute the
-00026710: 204d 4435 206f 6620 7468 6520 756e 636f   MD5 of the unco
-00026720: 6d70 7265 7373 6564 2062 7974 6573 2e0a  mpressed bytes..
-00026730: 2020 2020 7769 7468 2067 7a69 702e 6f70      with gzip.op
-00026740: 656e 2869 6e70 7574 5f66 696c 656e 616d  en(input_filenam
-00026750: 6529 2061 7320 6670 3a0a 2020 2020 2020  e) as fp:.      
-00026760: 6861 7368 5f64 6963 7420 3d20 7b27 6d64  hash_dict = {'md
-00026770: 3527 3a20 4765 744d 6435 2829 7d0a 2020  5': GetMd5()}.  
-00026780: 2020 2020 6861 7368 696e 675f 6865 6c70      hashing_help
-00026790: 6572 2e43 616c 6375 6c61 7465 4861 7368  er.CalculateHash
-000267a0: 6573 4672 6f6d 436f 6e74 656e 7473 2866  esFromContents(f
-000267b0: 702c 2068 6173 685f 6469 6374 290a 2020  p, hash_dict).  
-000267c0: 2020 2020 696e 5f66 696c 655f 6d64 3520      in_file_md5 
-000267d0: 3d20 6861 7368 5f64 6963 745b 276d 6435  = hash_dict['md5
-000267e0: 275d 2e64 6967 6573 7428 290a 0a20 2020  '].digest()..   
-000267f0: 2023 2044 6f77 6e6c 6f61 6469 6e67 2074   # Downloading t
-00026800: 6869 7320 6669 6c65 2074 7269 6767 6572  his file trigger
-00026810: 7320 7468 6520 666c 6f77 2e0a 2020 2020  s the flow..    
-00026820: 6670 6174 6832 203d 2073 656c 662e 4372  fpath2 = self.Cr
-00026830: 6561 7465 5465 6d70 4669 6c65 2829 0a20  eateTempFile(). 
-00026840: 2020 2073 656c 662e 5275 6e47 7355 7469     self.RunGsUti
-00026850: 6c28 5b27 6370 272c 2073 7572 6928 6f62  l(['cp', suri(ob
-00026860: 6a65 6374 5f75 7269 292c 2073 7572 6928  ject_uri), suri(
-00026870: 6670 6174 6832 295d 290a 2020 2020 2320  fpath2)]).    # 
-00026880: 436f 6d70 7574 6520 4d44 3520 6f66 2074  Compute MD5 of t
-00026890: 6865 2064 6f77 6e6c 6f61 6465 6420 2875  he downloaded (u
-000268a0: 6e63 6f6d 7072 6573 7365 6429 2066 696c  ncompressed) fil
-000268b0: 652c 2061 6e64 2076 616c 6964 6174 6520  e, and validate 
-000268c0: 6974 2e0a 2020 2020 7769 7468 206f 7065  it..    with ope
-000268d0: 6e28 6670 6174 6832 2c20 2772 6227 2920  n(fpath2, 'rb') 
-000268e0: 6173 2066 703a 0a20 2020 2020 2068 6173  as fp:.      has
-000268f0: 685f 6469 6374 203d 207b 276d 6435 273a  h_dict = {'md5':
-00026900: 2047 6574 4d64 3528 297d 0a20 2020 2020   GetMd5()}.     
-00026910: 2068 6173 6869 6e67 5f68 656c 7065 722e   hashing_helper.
-00026920: 4361 6c63 756c 6174 6548 6173 6865 7346  CalculateHashesF
-00026930: 726f 6d43 6f6e 7465 6e74 7328 6670 2c20  romContents(fp, 
-00026940: 6861 7368 5f64 6963 7429 0a20 2020 2020  hash_dict).     
-00026950: 206f 7574 5f66 696c 655f 6d64 3520 3d20   out_file_md5 = 
-00026960: 6861 7368 5f64 6963 745b 276d 6435 275d  hash_dict['md5']
-00026970: 2e64 6967 6573 7428 290a 2020 2020 7365  .digest().    se
-00026980: 6c66 2e61 7373 6572 7445 7175 616c 2869  lf.assertEqual(i
-00026990: 6e5f 6669 6c65 5f6d 6435 2c20 6f75 745f  n_file_md5, out_
-000269a0: 6669 6c65 5f6d 6435 290a 0a20 2040 5365  file_md5)..  @Se
-000269b0: 7175 656e 7469 616c 416e 6450 6172 616c  quentialAndParal
-000269c0: 6c65 6c54 7261 6e73 6665 720a 2020 6465  lelTransfer.  de
-000269d0: 6620 7465 7374 5f63 705f 7265 7375 6d61  f test_cp_resuma
-000269e0: 626c 655f 646f 776e 6c6f 6164 5f63 6865  ble_download_che
-000269f0: 636b 5f68 6173 6865 735f 6e65 7665 7228  ck_hashes_never(
-00026a00: 7365 6c66 293a 0a20 2020 2022 2222 5465  self):.    """Te
-00026a10: 7374 7320 7468 6174 2072 6573 756d 626c  sts that resumbl
-00026a20: 6520 646f 776e 6c6f 6164 7320 776f 726b  e downloads work
-00026a30: 2077 6974 6820 6368 6563 6b5f 6861 7368   with check_hash
-00026a40: 6573 203d 206e 6576 6572 2e22 2222 0a20  es = never.""". 
-00026a50: 2020 2062 7563 6b65 745f 7572 6920 3d20     bucket_uri = 
-00026a60: 7365 6c66 2e43 7265 6174 6542 7563 6b65  self.CreateBucke
-00026a70: 7428 290a 2020 2020 636f 6e74 656e 7473  t().    contents
-00026a80: 203d 2062 2761 6263 6427 202a 2073 656c   = b'abcd' * sel
-00026a90: 662e 6861 6c74 5f73 697a 650a 2020 2020  f.halt_size.    
-00026aa0: 6f62 6a65 6374 5f75 7269 203d 2073 656c  object_uri = sel
-00026ab0: 662e 4372 6561 7465 4f62 6a65 6374 2862  f.CreateObject(b
-00026ac0: 7563 6b65 745f 7572 693d 6275 636b 6574  ucket_uri=bucket
-00026ad0: 5f75 7269 2c0a 2020 2020 2020 2020 2020  _uri,.          
-00026ae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026af0: 2020 2020 2020 2020 206f 626a 6563 745f           object_
-00026b00: 6e61 6d65 3d27 666f 6f27 2c0a 2020 2020  name='foo',.    
-00026b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026b20: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-00026b30: 6f6e 7465 6e74 733d 636f 6e74 656e 7473  ontents=contents
-00026b40: 290a 2020 2020 6670 6174 6820 3d20 7365  ).    fpath = se
-00026b50: 6c66 2e43 7265 6174 6554 656d 7046 696c  lf.CreateTempFil
-00026b60: 6528 290a 2020 2020 7465 7374 5f63 616c  e().    test_cal
-00026b70: 6c62 6163 6b5f 6669 6c65 203d 2073 656c  lback_file = sel
-00026b80: 662e 4372 6561 7465 5465 6d70 4669 6c65  f.CreateTempFile
-00026b90: 280a 2020 2020 2020 2020 636f 6e74 656e  (.        conten
-00026ba0: 7473 3d70 6963 6b6c 652e 6475 6d70 7328  ts=pickle.dumps(
-00026bb0: 4861 6c74 696e 6743 6f70 7943 616c 6c62  HaltingCopyCallb
-00026bc0: 6163 6b48 616e 646c 6572 2846 616c 7365  ackHandler(False
-00026bd0: 2c20 3529 2929 0a0a 2020 2020 626f 746f  , 5)))..    boto
-00026be0: 5f63 6f6e 6669 675f 666f 725f 7465 7374  _config_for_test
-00026bf0: 203d 205b 2827 4753 5574 696c 272c 2027   = [('GSUtil', '
-00026c00: 7265 7375 6d61 626c 655f 7468 7265 7368  resumable_thresh
-00026c10: 6f6c 6427 2c20 7374 7228 4f4e 455f 4b49  old', str(ONE_KI
-00026c20: 4229 292c 0a20 2020 2020 2020 2020 2020  B)),.           
-00026c30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026c40: 2028 2747 5355 7469 6c27 2c20 2763 6865   ('GSUtil', 'che
-00026c50: 636b 5f68 6173 6865 7327 2c20 276e 6576  ck_hashes', 'nev
-00026c60: 6572 2729 5d0a 2020 2020 7769 7468 2053  er')].    with S
-00026c70: 6574 426f 746f 436f 6e66 6967 466f 7254  etBotoConfigForT
-00026c80: 6573 7428 626f 746f 5f63 6f6e 6669 675f  est(boto_config_
-00026c90: 666f 725f 7465 7374 293a 0a20 2020 2020  for_test):.     
-00026ca0: 2073 7464 6572 7220 3d20 7365 6c66 2e52   stderr = self.R
-00026cb0: 756e 4773 5574 696c 285b 0a20 2020 2020  unGsUtil([.     
-00026cc0: 2020 2020 2027 6370 272c 2027 2d2d 7465       'cp', '--te
-00026cd0: 7374 6361 6c6c 6261 636b 6669 6c65 272c  stcallbackfile',
-00026ce0: 2074 6573 745f 6361 6c6c 6261 636b 5f66   test_callback_f
-00026cf0: 696c 652c 0a20 2020 2020 2020 2020 2073  ile,.          s
-00026d00: 7572 6928 6f62 6a65 6374 5f75 7269 292c  uri(object_uri),
-00026d10: 2066 7061 7468 0a20 2020 2020 205d 2c0a   fpath.      ],.
-00026d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026d30: 2020 2020 2020 2020 2020 2020 2020 6578                ex
-00026d40: 7065 6374 6564 5f73 7461 7475 733d 312c  pected_status=1,
-00026d50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00026d60: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00026d70: 6574 7572 6e5f 7374 6465 7272 3d54 7275  eturn_stderr=Tru
-00026d80: 6529 0a20 2020 2020 2073 656c 662e 6173  e).      self.as
-00026d90: 7365 7274 496e 2827 4172 7469 6669 6361  sertIn('Artifica
-00026da0: 6c6c 7920 6861 6c74 696e 6720 646f 776e  lly halting down
-00026db0: 6c6f 6164 2e27 2c20 7374 6465 7272 290a  load.', stderr).
-00026dc0: 2020 2020 2020 7374 6465 7272 203d 2073        stderr = s
-00026dd0: 656c 662e 5275 6e47 7355 7469 6c28 5b27  elf.RunGsUtil(['
-00026de0: 6370 272c 2073 7572 6928 6f62 6a65 6374  cp', suri(object
-00026df0: 5f75 7269 292c 2066 7061 7468 5d2c 0a20  _uri), fpath],. 
-00026e00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026e10: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00026e20: 7572 6e5f 7374 6465 7272 3d54 7275 6529  urn_stderr=True)
-00026e30: 0a20 2020 2020 2073 656c 662e 6173 7365  .      self.asse
-00026e40: 7274 496e 2827 5265 7375 6d69 6e67 2064  rtIn('Resuming d
-00026e50: 6f77 6e6c 6f61 6427 2c20 7374 6465 7272  ownload', stderr
-00026e60: 290a 2020 2020 2020 7365 6c66 2e61 7373  ).      self.ass
-00026e70: 6572 7449 6e28 2746 6f75 6e64 206e 6f20  ertIn('Found no 
-00026e80: 6861 7368 6573 2074 6f20 7661 6c69 6461  hashes to valida
-00026e90: 7465 206f 626a 6563 7420 646f 776e 6c6f  te object downlo
-00026ea0: 6164 6564 272c 2073 7464 6572 7229 0a20  aded', stderr). 
-00026eb0: 2020 2020 2077 6974 6820 6f70 656e 2866       with open(f
-00026ec0: 7061 7468 2c20 2772 6227 2920 6173 2066  path, 'rb') as f
-00026ed0: 3a0a 2020 2020 2020 2020 7365 6c66 2e61  :.        self.a
-00026ee0: 7373 6572 7445 7175 616c 2866 2e72 6561  ssertEqual(f.rea
-00026ef0: 6428 292c 2063 6f6e 7465 6e74 732c 2027  d(), contents, '
-00026f00: 4669 6c65 2063 6f6e 7465 6e74 7320 6469  File contents di
-00026f10: 6420 6e6f 7420 6d61 7463 682e 2729 0a0a  d not match.')..
-00026f20: 2020 4053 6b69 7046 6f72 5333 2827 4e6f    @SkipForS3('No
-00026f30: 2072 6573 756d 6162 6c65 2075 706c 6f61   resumable uploa
-00026f40: 6420 7375 7070 6f72 7420 666f 7220 5333  d support for S3
-00026f50: 2e27 290a 2020 6465 6620 7465 7374 5f63  .').  def test_c
-00026f60: 705f 7265 7375 6d61 626c 655f 7570 6c6f  p_resumable_uplo
-00026f70: 6164 5f62 7563 6b65 745f 6465 6c65 7465  ad_bucket_delete
-00026f80: 6428 7365 6c66 293a 0a20 2020 2022 2222  d(self):.    """
-00026f90: 5465 7374 7320 7468 6174 2061 206e 6f74  Tests that a not
-00026fa0: 2066 6f75 6e64 2065 7863 6570 7469 6f6e   found exception
-00026fb0: 2069 7320 7261 6973 6564 2069 6620 6275   is raised if bu
-00026fc0: 636b 6574 206e 6f20 6c6f 6e67 6572 2065  cket no longer e
-00026fd0: 7869 7374 732e 2222 220a 2020 2020 6275  xists.""".    bu
-00026fe0: 636b 6574 5f75 7269 203d 2073 656c 662e  cket_uri = self.
-00026ff0: 4372 6561 7465 4275 636b 6574 2829 0a20  CreateBucket(). 
-00027000: 2020 2066 7061 7468 203d 2073 656c 662e     fpath = self.
-00027010: 4372 6561 7465 5465 6d70 4669 6c65 2863  CreateTempFile(c
-00027020: 6f6e 7465 6e74 733d 6227 6127 202a 2032  ontents=b'a' * 2
-00027030: 202a 204f 4e45 5f4b 4942 290a 2020 2020   * ONE_KIB).    
-00027040: 626f 746f 5f63 6f6e 6669 675f 666f 725f  boto_config_for_
-00027050: 7465 7374 203d 2028 2747 5355 7469 6c27  test = ('GSUtil'
-00027060: 2c20 2772 6573 756d 6162 6c65 5f74 6872  , 'resumable_thr
-00027070: 6573 686f 6c64 272c 2073 7472 284f 4e45  eshold', str(ONE
-00027080: 5f4b 4942 2929 0a20 2020 2074 6573 745f  _KIB)).    test_
-00027090: 6361 6c6c 6261 636b 5f66 696c 6520 3d20  callback_file = 
-000270a0: 7365 6c66 2e43 7265 6174 6554 656d 7046  self.CreateTempF
-000270b0: 696c 6528 636f 6e74 656e 7473 3d70 6963  ile(contents=pic
-000270c0: 6b6c 652e 6475 6d70 7328 0a20 2020 2020  kle.dumps(.     
-000270d0: 2020 205f 4465 6c65 7465 4275 636b 6574     _DeleteBucket
-000270e0: 5468 656e 5374 6172 744f 7665 7243 6f70  ThenStartOverCop
-000270f0: 7943 616c 6c62 6163 6b48 616e 646c 6572  yCallbackHandler
-00027100: 2835 2c20 6275 636b 6574 5f75 7269 2929  (5, bucket_uri))
-00027110: 290a 0a20 2020 2077 6974 6820 5365 7442  )..    with SetB
-00027120: 6f74 6f43 6f6e 6669 6746 6f72 5465 7374  otoConfigForTest
-00027130: 285b 626f 746f 5f63 6f6e 6669 675f 666f  ([boto_config_fo
-00027140: 725f 7465 7374 5d29 3a0a 2020 2020 2020  r_test]):.      
-00027150: 7374 6465 7272 203d 2073 656c 662e 5275  stderr = self.Ru
-00027160: 6e47 7355 7469 6c28 5b0a 2020 2020 2020  nGsUtil([.      
-00027170: 2020 2020 2763 7027 2c20 272d 2d74 6573      'cp', '--tes
-00027180: 7463 616c 6c62 6163 6b66 696c 6527 2c20  tcallbackfile', 
-00027190: 7465 7374 5f63 616c 6c62 6163 6b5f 6669  test_callback_fi
-000271a0: 6c65 2c20 6670 6174 682c 0a20 2020 2020  le, fpath,.     
-000271b0: 2020 2020 2073 7572 6928 6275 636b 6574       suri(bucket
-000271c0: 5f75 7269 290a 2020 2020 2020 5d2c 0a20  _uri).      ],. 
-000271d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000271e0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-000271f0: 7572 6e5f 7374 6465 7272 3d54 7275 652c  urn_stderr=True,
-00027200: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00027210: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00027220: 7870 6563 7465 645f 7374 6174 7573 3d31  xpected_status=1
-00027230: 290a 2020 2020 7365 6c66 2e61 7373 6572  ).    self.asser
-00027240: 7449 6e28 2744 656c 6574 696e 6720 6275  tIn('Deleting bu
-00027250: 636b 6574 272c 2073 7464 6572 7229 0a20  cket', stderr). 
-00027260: 2020 2073 656c 662e 6173 7365 7274 496e     self.assertIn
-00027270: 2827 6275 636b 6574 2064 6f65 7320 6e6f  ('bucket does no
-00027280: 7420 6578 6973 7427 2c20 7374 6465 7272  t exist', stderr
-00027290: 290a 0a20 2040 536b 6970 466f 7253 3328  )..  @SkipForS3(
-000272a0: 274e 6f20 736c 6963 6564 2064 6f77 6e6c  'No sliced downl
-000272b0: 6f61 6420 7375 7070 6f72 7420 666f 7220  oad support for 
-000272c0: 5333 2e27 290a 2020 6465 6620 7465 7374  S3.').  def test
-000272d0: 5f63 705f 736c 6963 6564 5f64 6f77 6e6c  _cp_sliced_downl
-000272e0: 6f61 6428 7365 6c66 293a 0a20 2020 2022  oad(self):.    "
-000272f0: 2222 5465 7374 7320 7468 6174 2073 6c69  ""Tests that sli
-00027300: 6365 6420 6f62 6a65 6374 2064 6f77 6e6c  ced object downl
-00027310: 6f61 6420 776f 726b 7320 696e 2074 6865  oad works in the
-00027320: 2067 656e 6572 616c 2063 6173 652e 2222   general case.""
-00027330: 220a 2020 2020 6275 636b 6574 5f75 7269  ".    bucket_uri
-00027340: 203d 2073 656c 662e 4372 6561 7465 4275   = self.CreateBu
-00027350: 636b 6574 2829 0a20 2020 206f 626a 6563  cket().    objec
-00027360: 745f 7572 6920 3d20 7365 6c66 2e43 7265  t_uri = self.Cre
-00027370: 6174 654f 626a 6563 7428 6275 636b 6574  ateObject(bucket
-00027380: 5f75 7269 3d62 7563 6b65 745f 7572 692c  _uri=bucket_uri,
-00027390: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000273a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000273b0: 2020 2020 6f62 6a65 6374 5f6e 616d 653d      object_name=
-000273c0: 2766 6f6f 272c 0a20 2020 2020 2020 2020  'foo',.         
-000273d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000273e0: 2020 2020 2020 2020 2020 636f 6e74 656e            conten
-000273f0: 7473 3d62 2761 6263 2720 2a20 4f4e 455f  ts=b'abc' * ONE_
-00027400: 4b49 4229 0a20 2020 2066 7061 7468 203d  KIB).    fpath =
-00027410: 2073 656c 662e 4372 6561 7465 5465 6d70   self.CreateTemp
-00027420: 4669 6c65 2829 0a0a 2020 2020 2320 466f  File()..    # Fo
-00027430: 7263 6520 6661 7374 2063 7263 6d6f 6420  rce fast crcmod 
-00027440: 746f 2072 6574 7572 6e20 5472 7565 2074  to return True t
-00027450: 6f20 7465 7374 2074 6865 2062 6173 6963  o test the basic
-00027460: 2073 6c69 6365 6420 646f 776e 6c6f 6164   sliced download
-00027470: 0a20 2020 2023 2073 6365 6e61 7269 6f2c  .    # scenario,
-00027480: 2065 6e73 7572 696e 6720 7468 6174 2069   ensuring that i
-00027490: 6620 7468 6520 7573 6572 2069 6e73 7461  f the user insta
-000274a0: 6c6c 7320 6372 636d 6f64 2c20 6974 2077  lls crcmod, it w
-000274b0: 696c 6c20 776f 726b 2e0a 2020 2020 626f  ill work..    bo
-000274c0: 746f 5f63 6f6e 6669 675f 666f 725f 7465  to_config_for_te
-000274d0: 7374 203d 205b 0a20 2020 2020 2020 2028  st = [.        (
-000274e0: 2747 5355 7469 6c27 2c20 2772 6573 756d  'GSUtil', 'resum
-000274f0: 6162 6c65 5f74 6872 6573 686f 6c64 272c  able_threshold',
-00027500: 2073 7472 284f 4e45 5f4b 4942 2929 2c0a   str(ONE_KIB)),.
-00027510: 2020 2020 2020 2020 2827 4753 5574 696c          ('GSUtil
-00027520: 272c 2027 7465 7374 5f61 7373 756d 655f  ', 'test_assume_
-00027530: 6661 7374 5f63 7263 6d6f 6427 2c20 2754  fast_crcmod', 'T
-00027540: 7275 6527 292c 0a20 2020 2020 2020 2028  rue'),.        (
-00027550: 2747 5355 7469 6c27 2c20 2773 6c69 6365  'GSUtil', 'slice
-00027560: 645f 6f62 6a65 6374 5f64 6f77 6e6c 6f61  d_object_downloa
-00027570: 645f 7468 7265 7368 6f6c 6427 2c20 7374  d_threshold', st
-00027580: 7228 4f4e 455f 4b49 4229 292c 0a20 2020  r(ONE_KIB)),.   
-00027590: 2020 2020 2028 2747 5355 7469 6c27 2c20       ('GSUtil', 
-000275a0: 2773 6c69 6365 645f 6f62 6a65 6374 5f64  'sliced_object_d
-000275b0: 6f77 6e6c 6f61 645f 6d61 785f 636f 6d70  ownload_max_comp
-000275c0: 6f6e 656e 7473 272c 2027 3327 290a 2020  onents', '3').  
-000275d0: 2020 5d0a 0a20 2020 2077 6974 6820 5365    ]..    with Se
-000275e0: 7442 6f74 6f43 6f6e 6669 6746 6f72 5465  tBotoConfigForTe
-000275f0: 7374 2862 6f74 6f5f 636f 6e66 6967 5f66  st(boto_config_f
-00027600: 6f72 5f74 6573 7429 3a0a 2020 2020 2020  or_test):.      
-00027610: 7365 6c66 2e52 756e 4773 5574 696c 285b  self.RunGsUtil([
-00027620: 2763 7027 2c20 7375 7269 286f 626a 6563  'cp', suri(objec
-00027630: 745f 7572 6929 2c20 6670 6174 685d 290a  t_uri), fpath]).
-00027640: 0a20 2020 2020 2023 2045 6163 6820 7472  .      # Each tr
-00027650: 6163 6b65 7220 6669 6c65 2073 686f 756c  acker file shoul
-00027660: 6420 6861 7665 2062 6565 6e20 6465 6c65  d have been dele
-00027670: 7465 642e 0a20 2020 2020 2074 7261 636b  ted..      track
-00027680: 6572 5f66 696c 656e 616d 6573 203d 2047  er_filenames = G
-00027690: 6574 536c 6963 6564 446f 776e 6c6f 6164  etSlicedDownload
-000276a0: 5472 6163 6b65 7246 696c 6550 6174 6873  TrackerFilePaths
-000276b0: 280a 2020 2020 2020 2020 2020 5374 6f72  (.          Stor
-000276c0: 6167 6555 726c 4672 6f6d 5374 7269 6e67  ageUrlFromString
-000276d0: 2866 7061 7468 292c 2073 656c 662e 7465  (fpath), self.te
-000276e0: 7374 5f61 7069 290a 2020 2020 2020 666f  st_api).      fo
-000276f0: 7220 7472 6163 6b65 725f 6669 6c65 6e61  r tracker_filena
-00027700: 6d65 2069 6e20 7472 6163 6b65 725f 6669  me in tracker_fi
-00027710: 6c65 6e61 6d65 733a 0a20 2020 2020 2020  lenames:.       
-00027720: 2073 656c 662e 6173 7365 7274 4661 6c73   self.assertFals
-00027730: 6528 6f73 2e70 6174 682e 6973 6669 6c65  e(os.path.isfile
-00027740: 2874 7261 636b 6572 5f66 696c 656e 616d  (tracker_filenam
-00027750: 6529 290a 0a20 2020 2020 2077 6974 6820  e))..      with 
-00027760: 6f70 656e 2866 7061 7468 2c20 2772 6227  open(fpath, 'rb'
-00027770: 2920 6173 2066 3a0a 2020 2020 2020 2020  ) as f:.        
-00027780: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-00027790: 2866 2e72 6561 6428 292c 2062 2761 6263  (f.read(), b'abc
-000277a0: 2720 2a20 4f4e 455f 4b49 422c 2027 4669  ' * ONE_KIB, 'Fi
-000277b0: 6c65 2063 6f6e 7465 6e74 7320 6469 6666  le contents diff
-000277c0: 6572 2729 0a0a 2020 4075 6e69 7474 6573  er')..  @unittes
-000277d0: 742e 736b 6970 556e 6c65 7373 2855 7369  t.skipUnless(Usi
-000277e0: 6e67 4372 636d 6f64 4578 7465 6e73 696f  ngCrcmodExtensio
-000277f0: 6e28 292c 0a20 2020 2020 2020 2020 2020  n(),.           
-00027800: 2020 2020 2020 2020 2020 2020 2753 6c69              'Sli
-00027810: 6365 6420 646f 776e 6c6f 6164 2072 6571  ced download req
-00027820: 7569 7265 7320 6661 7374 2063 7263 6d6f  uires fast crcmo
-00027830: 642e 2729 0a20 2040 536b 6970 466f 7253  d.').  @SkipForS
-00027840: 3328 274e 6f20 736c 6963 6564 2064 6f77  3('No sliced dow
-00027850: 6e6c 6f61 6420 7375 7070 6f72 7420 666f  nload support fo
-00027860: 7220 5333 2e27 290a 2020 6465 6620 7465  r S3.').  def te
-00027870: 7374 5f63 705f 756e 7265 7375 6d61 626c  st_cp_unresumabl
-00027880: 655f 736c 6963 6564 5f64 6f77 6e6c 6f61  e_sliced_downloa
-00027890: 6428 7365 6c66 293a 0a20 2020 2022 2222  d(self):.    """
-000278a0: 5465 7374 7320 736c 6963 6564 2064 6f77  Tests sliced dow
-000278b0: 6e6c 6f61 6420 776f 726b 7320 7768 656e  nload works when
-000278c0: 2072 6573 756d 6162 696c 6974 7920 6973   resumability is
-000278d0: 2064 6973 6162 6c65 642e 2222 220a 2020   disabled.""".  
-000278e0: 2020 6275 636b 6574 5f75 7269 203d 2073    bucket_uri = s
-000278f0: 656c 662e 4372 6561 7465 4275 636b 6574  elf.CreateBucket
-00027900: 2829 0a20 2020 206f 626a 6563 745f 7572  ().    object_ur
-00027910: 6920 3d20 7365 6c66 2e43 7265 6174 654f  i = self.CreateO
-00027920: 626a 6563 7428 6275 636b 6574 5f75 7269  bject(bucket_uri
-00027930: 3d62 7563 6b65 745f 7572 692c 0a20 2020  =bucket_uri,.   
-00027940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027950: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027960: 6f62 6a65 6374 5f6e 616d 653d 2766 6f6f  object_name='foo
-00027970: 272c 0a20 2020 2020 2020 2020 2020 2020  ',.             
-00027980: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027990: 2020 2020 2020 636f 6e74 656e 7473 3d62        contents=b
-000279a0: 2761 6263 6427 202a 2073 656c 662e 6861  'abcd' * self.ha
-000279b0: 6c74 5f73 697a 6529 0a20 2020 2066 7061  lt_size).    fpa
-000279c0: 7468 203d 2073 656c 662e 4372 6561 7465  th = self.Create
-000279d0: 5465 6d70 4669 6c65 2829 0a20 2020 2074  TempFile().    t
-000279e0: 6573 745f 6361 6c6c 6261 636b 5f66 696c  est_callback_fil
-000279f0: 6520 3d20 7365 6c66 2e43 7265 6174 6554  e = self.CreateT
-00027a00: 656d 7046 696c 6528 0a20 2020 2020 2020  empFile(.       
-00027a10: 2063 6f6e 7465 6e74 733d 7069 636b 6c65   contents=pickle
-00027a20: 2e64 756d 7073 2848 616c 7469 6e67 436f  .dumps(HaltingCo
-00027a30: 7079 4361 6c6c 6261 636b 4861 6e64 6c65  pyCallbackHandle
-00027a40: 7228 4661 6c73 652c 2035 2929 290a 0a20  r(False, 5))).. 
-00027a50: 2020 2062 6f74 6f5f 636f 6e66 6967 5f66     boto_config_f
-00027a60: 6f72 5f74 6573 7420 3d20 5b0a 2020 2020  or_test = [.    
-00027a70: 2020 2020 2827 4753 5574 696c 272c 2027      ('GSUtil', '
-00027a80: 7265 7375 6d61 626c 655f 7468 7265 7368  resumable_thresh
-00027a90: 6f6c 6427 2c20 7374 7228 7365 6c66 2e68  old', str(self.h
-00027aa0: 616c 745f 7369 7a65 202a 2035 2929 2c0a  alt_size * 5)),.
-00027ab0: 2020 2020 2020 2020 2827 4753 5574 696c          ('GSUtil
-00027ac0: 272c 2027 736c 6963 6564 5f6f 626a 6563  ', 'sliced_objec
-00027ad0: 745f 646f 776e 6c6f 6164 5f74 6872 6573  t_download_thres
-00027ae0: 686f 6c64 272c 2073 7472 2873 656c 662e  hold', str(self.
-00027af0: 6861 6c74 5f73 697a 6529 292c 0a20 2020  halt_size)),.   
-00027b00: 2020 2020 2028 2747 5355 7469 6c27 2c20       ('GSUtil', 
-00027b10: 2773 6c69 6365 645f 6f62 6a65 6374 5f64  'sliced_object_d
-00027b20: 6f77 6e6c 6f61 645f 6d61 785f 636f 6d70  ownload_max_comp
-00027b30: 6f6e 656e 7473 272c 2027 3427 290a 2020  onents', '4').  
-00027b40: 2020 5d0a 0a20 2020 2077 6974 6820 5365    ]..    with Se
-00027b50: 7442 6f74 6f43 6f6e 6669 6746 6f72 5465  tBotoConfigForTe
-00027b60: 7374 2862 6f74 6f5f 636f 6e66 6967 5f66  st(boto_config_f
-00027b70: 6f72 5f74 6573 7429 3a0a 2020 2020 2020  or_test):.      
-00027b80: 7374 6465 7272 203d 2073 656c 662e 5275  stderr = self.Ru
-00027b90: 6e47 7355 7469 6c28 5b0a 2020 2020 2020  nGsUtil([.      
-00027ba0: 2020 2020 2763 7027 2c20 272d 2d74 6573      'cp', '--tes
-00027bb0: 7463 616c 6c62 6163 6b66 696c 6527 2c20  tcallbackfile', 
-00027bc0: 7465 7374 5f63 616c 6c62 6163 6b5f 6669  test_callback_fi
-00027bd0: 6c65 2c0a 2020 2020 2020 2020 2020 7375  le,.          su
-00027be0: 7269 286f 626a 6563 745f 7572 6929 2c0a  ri(object_uri),.
-00027bf0: 2020 2020 2020 2020 2020 7375 7269 2866            suri(f
-00027c00: 7061 7468 290a 2020 2020 2020 5d2c 0a20  path).      ],. 
-00027c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027c20: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00027c30: 7572 6e5f 7374 6465 7272 3d54 7275 652c  urn_stderr=True,
-00027c40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00027c50: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00027c60: 7870 6563 7465 645f 7374 6174 7573 3d31  xpected_status=1
-00027c70: 290a 2020 2020 2020 7365 6c66 2e61 7373  ).      self.ass
-00027c80: 6572 7449 6e28 276e 6f74 2064 6f77 6e6c  ertIn('not downl
-00027c90: 6f61 6465 6420 7375 6363 6573 7366 756c  oaded successful
-00027ca0: 6c79 272c 2073 7464 6572 7229 0a20 2020  ly', stderr).   
-00027cb0: 2020 2023 2054 656d 706f 7261 7279 2064     # Temporary d
-00027cc0: 6f77 6e6c 6f61 6420 6669 6c65 2073 686f  ownload file sho
-00027cd0: 756c 6420 6578 6973 742e 0a20 2020 2020  uld exist..     
-00027ce0: 2073 656c 662e 6173 7365 7274 5472 7565   self.assertTrue
-00027cf0: 286f 732e 7061 7468 2e69 7366 696c 6528  (os.path.isfile(
-00027d00: 6670 6174 6820 2b20 275f 2e67 7374 6d70  fpath + '_.gstmp
-00027d10: 2729 290a 0a20 2020 2020 2023 204e 6f20  '))..      # No 
-00027d20: 7472 6163 6b65 7220 6669 6c65 7320 7368  tracker files sh
-00027d30: 6f75 6c64 2065 7869 7374 2e0a 2020 2020  ould exist..    
-00027d40: 2020 7472 6163 6b65 725f 6669 6c65 6e61    tracker_filena
-00027d50: 6d65 7320 3d20 4765 7453 6c69 6365 6444  mes = GetSlicedD
-00027d60: 6f77 6e6c 6f61 6454 7261 636b 6572 4669  ownloadTrackerFi
-00027d70: 6c65 5061 7468 7328 0a20 2020 2020 2020  lePaths(.       
-00027d80: 2020 2053 746f 7261 6765 5572 6c46 726f     StorageUrlFro
-00027d90: 6d53 7472 696e 6728 6670 6174 6829 2c20  mString(fpath), 
-00027da0: 7365 6c66 2e74 6573 745f 6170 6929 0a20  self.test_api). 
-00027db0: 2020 2020 2066 6f72 2074 7261 636b 6572       for tracker
-00027dc0: 5f66 696c 656e 616d 6520 696e 2074 7261  _filename in tra
-00027dd0: 636b 6572 5f66 696c 656e 616d 6573 3a0a  cker_filenames:.
-00027de0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-00027df0: 6572 7446 616c 7365 286f 732e 7061 7468  ertFalse(os.path
-00027e00: 2e69 7366 696c 6528 7472 6163 6b65 725f  .isfile(tracker_
-00027e10: 6669 6c65 6e61 6d65 2929 0a0a 2020 2020  filename))..    
-00027e20: 2320 5065 7266 6f72 6d20 7468 6520 656e  # Perform the en
-00027e30: 7469 7265 2064 6f77 6e6c 6f61 642c 2077  tire download, w
-00027e40: 6974 686f 7574 2072 6573 756d 696e 672e  ithout resuming.
-00027e50: 0a20 2020 2077 6974 6820 5365 7442 6f74  .    with SetBot
-00027e60: 6f43 6f6e 6669 6746 6f72 5465 7374 2862  oConfigForTest(b
-00027e70: 6f74 6f5f 636f 6e66 6967 5f66 6f72 5f74  oto_config_for_t
-00027e80: 6573 7429 3a0a 2020 2020 2020 7374 6465  est):.      stde
-00027e90: 7272 203d 2073 656c 662e 5275 6e47 7355  rr = self.RunGsU
-00027ea0: 7469 6c28 0a20 2020 2020 2020 2020 205b  til(.          [
-00027eb0: 2763 7027 2c20 7375 7269 286f 626a 6563  'cp', suri(objec
-00027ec0: 745f 7572 6929 2c20 7375 7269 2866 7061  t_uri), suri(fpa
-00027ed0: 7468 295d 2c20 7265 7475 726e 5f73 7464  th)], return_std
-00027ee0: 6572 723d 5472 7565 290a 2020 2020 2020  err=True).      
-00027ef0: 7365 6c66 2e61 7373 6572 744e 6f74 496e  self.assertNotIn
-00027f00: 2827 5265 7375 6d69 6e67 2064 6f77 6e6c  ('Resuming downl
-00027f10: 6f61 6427 2c20 7374 6465 7272 290a 2020  oad', stderr).  
-00027f20: 2020 2020 2320 5465 6d70 6f72 6172 7920      # Temporary 
-00027f30: 646f 776e 6c6f 6164 2066 696c 6520 7368  download file sh
-00027f40: 6f75 6c64 2068 6176 6520 6265 656e 2064  ould have been d
-00027f50: 656c 6574 6564 2e0a 2020 2020 2020 7365  eleted..      se
-00027f60: 6c66 2e61 7373 6572 7446 616c 7365 286f  lf.assertFalse(o
-00027f70: 732e 7061 7468 2e69 7366 696c 6528 6670  s.path.isfile(fp
-00027f80: 6174 6820 2b20 275f 2e67 7374 6d70 2729  ath + '_.gstmp')
-00027f90: 290a 2020 2020 2020 7769 7468 206f 7065  ).      with ope
-00027fa0: 6e28 6670 6174 682c 2027 7262 2729 2061  n(fpath, 'rb') a
-00027fb0: 7320 663a 0a20 2020 2020 2020 2073 656c  s f:.        sel
-00027fc0: 662e 6173 7365 7274 4571 7561 6c28 662e  f.assertEqual(f.
-00027fd0: 7265 6164 2829 2c20 6227 6162 6364 2720  read(), b'abcd' 
-00027fe0: 2a20 7365 6c66 2e68 616c 745f 7369 7a65  * self.halt_size
-00027ff0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00028000: 2020 2020 2020 2020 2020 2027 4669 6c65             'File
-00028010: 2063 6f6e 7465 6e74 7320 6469 6666 6572   contents differ
-00028020: 2729 0a0a 2020 4075 6e69 7474 6573 742e  ')..  @unittest.
-00028030: 736b 6970 556e 6c65 7373 2855 7369 6e67  skipUnless(Using
-00028040: 4372 636d 6f64 4578 7465 6e73 696f 6e28  CrcmodExtension(
-00028050: 292c 0a20 2020 2020 2020 2020 2020 2020  ),.             
-00028060: 2020 2020 2020 2020 2020 2753 6c69 6365            'Slice
-00028070: 6420 646f 776e 6c6f 6164 2072 6571 7569  d download requi
-00028080: 7265 7320 6661 7374 2063 7263 6d6f 642e  res fast crcmod.
-00028090: 2729 0a20 2040 536b 6970 466f 7253 3328  ').  @SkipForS3(
-000280a0: 274e 6f20 736c 6963 6564 2064 6f77 6e6c  'No sliced downl
-000280b0: 6f61 6420 7375 7070 6f72 7420 666f 7220  oad support for 
-000280c0: 5333 2e27 290a 2020 6465 6620 7465 7374  S3.').  def test
-000280d0: 5f63 705f 736c 6963 6564 5f64 6f77 6e6c  _cp_sliced_downl
-000280e0: 6f61 645f 7265 7375 6d65 2873 656c 6629  oad_resume(self)
-000280f0: 3a0a 2020 2020 2222 2254 6573 7473 2074  :.    """Tests t
-00028100: 6861 7420 736c 6963 6564 206f 626a 6563  hat sliced objec
-00028110: 7420 646f 776e 6c6f 6164 2069 7320 7265  t download is re
-00028120: 7375 6d61 626c 652e 2222 220a 2020 2020  sumable.""".    
-00028130: 6275 636b 6574 5f75 7269 203d 2073 656c  bucket_uri = sel
-00028140: 662e 4372 6561 7465 4275 636b 6574 2829  f.CreateBucket()
-00028150: 0a20 2020 206f 626a 6563 745f 7572 6920  .    object_uri 
-00028160: 3d20 7365 6c66 2e43 7265 6174 654f 626a  = self.CreateObj
-00028170: 6563 7428 6275 636b 6574 5f75 7269 3d62  ect(bucket_uri=b
-00028180: 7563 6b65 745f 7572 692c 0a20 2020 2020  ucket_uri,.     
-00028190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000281a0: 2020 2020 2020 2020 2020 2020 2020 6f62                ob
-000281b0: 6a65 6374 5f6e 616d 653d 2766 6f6f 272c  ject_name='foo',
-000281c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000281d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000281e0: 2020 2020 636f 6e74 656e 7473 3d62 2761      contents=b'a
-000281f0: 6263 2720 2a20 7365 6c66 2e68 616c 745f  bc' * self.halt_
-00028200: 7369 7a65 290a 2020 2020 6670 6174 6820  size).    fpath 
-00028210: 3d20 7365 6c66 2e43 7265 6174 6554 656d  = self.CreateTem
-00028220: 7046 696c 6528 290a 2020 2020 7465 7374  pFile().    test
-00028230: 5f63 616c 6c62 6163 6b5f 6669 6c65 203d  _callback_file =
-00028240: 2073 656c 662e 4372 6561 7465 5465 6d70   self.CreateTemp
-00028250: 4669 6c65 280a 2020 2020 2020 2020 636f  File(.        co
-00028260: 6e74 656e 7473 3d70 6963 6b6c 652e 6475  ntents=pickle.du
-00028270: 6d70 7328 4861 6c74 696e 6743 6f70 7943  mps(HaltingCopyC
-00028280: 616c 6c62 6163 6b48 616e 646c 6572 2846  allbackHandler(F
-00028290: 616c 7365 2c20 3529 2929 0a0a 2020 2020  alse, 5)))..    
-000282a0: 626f 746f 5f63 6f6e 6669 675f 666f 725f  boto_config_for_
-000282b0: 7465 7374 203d 205b 0a20 2020 2020 2020  test = [.       
-000282c0: 2028 2747 5355 7469 6c27 2c20 2772 6573   ('GSUtil', 'res
-000282d0: 756d 6162 6c65 5f74 6872 6573 686f 6c64  umable_threshold
-000282e0: 272c 2073 7472 2873 656c 662e 6861 6c74  ', str(self.halt
-000282f0: 5f73 697a 6529 292c 0a20 2020 2020 2020  _size)),.       
-00028300: 2028 2747 5355 7469 6c27 2c20 2773 6c69   ('GSUtil', 'sli
-00028310: 6365 645f 6f62 6a65 6374 5f64 6f77 6e6c  ced_object_downl
-00028320: 6f61 645f 7468 7265 7368 6f6c 6427 2c20  oad_threshold', 
-00028330: 7374 7228 7365 6c66 2e68 616c 745f 7369  str(self.halt_si
-00028340: 7a65 2929 2c0a 2020 2020 2020 2020 2827  ze)),.        ('
-00028350: 4753 5574 696c 272c 2027 736c 6963 6564  GSUtil', 'sliced
-00028360: 5f6f 626a 6563 745f 646f 776e 6c6f 6164  _object_download
-00028370: 5f6d 6178 5f63 6f6d 706f 6e65 6e74 7327  _max_components'
-00028380: 2c20 2733 2729 0a20 2020 205d 0a0a 2020  , '3').    ]..  
-00028390: 2020 7769 7468 2053 6574 426f 746f 436f    with SetBotoCo
-000283a0: 6e66 6967 466f 7254 6573 7428 626f 746f  nfigForTest(boto
-000283b0: 5f63 6f6e 6669 675f 666f 725f 7465 7374  _config_for_test
-000283c0: 293a 0a20 2020 2020 2073 7464 6572 7220  ):.      stderr 
-000283d0: 3d20 7365 6c66 2e52 756e 4773 5574 696c  = self.RunGsUtil
-000283e0: 285b 0a20 2020 2020 2020 2020 2027 6370  ([.          'cp
-000283f0: 272c 2027 2d2d 7465 7374 6361 6c6c 6261  ', '--testcallba
-00028400: 636b 6669 6c65 272c 2074 6573 745f 6361  ckfile', test_ca
-00028410: 6c6c 6261 636b 5f66 696c 652c 0a20 2020  llback_file,.   
-00028420: 2020 2020 2020 2073 7572 6928 6f62 6a65         suri(obje
-00028430: 6374 5f75 7269 292c 0a20 2020 2020 2020  ct_uri),.       
-00028440: 2020 2073 7572 6928 6670 6174 6829 0a20     suri(fpath). 
-00028450: 2020 2020 205d 2c0a 2020 2020 2020 2020       ],.        
-00028460: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028470: 2020 2020 2020 7265 7475 726e 5f73 7464        return_std
-00028480: 6572 723d 5472 7565 2c0a 2020 2020 2020  err=True,.      
-00028490: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000284a0: 2020 2020 2020 2020 6578 7065 6374 6564          expected
-000284b0: 5f73 7461 7475 733d 3129 0a20 2020 2020  _status=1).     
-000284c0: 2073 656c 662e 6173 7365 7274 496e 2827   self.assertIn('
-000284d0: 6e6f 7420 646f 776e 6c6f 6164 6564 2073  not downloaded s
-000284e0: 7563 6365 7373 6675 6c6c 7927 2c20 7374  uccessfully', st
-000284f0: 6465 7272 290a 0a20 2020 2020 2023 2045  derr)..      # E
-00028500: 6163 6820 7472 6163 6b65 7220 6669 6c65  ach tracker file
-00028510: 2073 686f 756c 6420 6578 6973 742e 0a20   should exist.. 
-00028520: 2020 2020 2074 7261 636b 6572 5f66 696c       tracker_fil
-00028530: 656e 616d 6573 203d 2047 6574 536c 6963  enames = GetSlic
-00028540: 6564 446f 776e 6c6f 6164 5472 6163 6b65  edDownloadTracke
-00028550: 7246 696c 6550 6174 6873 280a 2020 2020  rFilePaths(.    
-00028560: 2020 2020 2020 5374 6f72 6167 6555 726c        StorageUrl
-00028570: 4672 6f6d 5374 7269 6e67 2866 7061 7468  FromString(fpath
-00028580: 292c 2073 656c 662e 7465 7374 5f61 7069  ), self.test_api
-00028590: 290a 2020 2020 2020 666f 7220 7472 6163  ).      for trac
-000285a0: 6b65 725f 6669 6c65 6e61 6d65 2069 6e20  ker_filename in 
-000285b0: 7472 6163 6b65 725f 6669 6c65 6e61 6d65  tracker_filename
-000285c0: 733a 0a20 2020 2020 2020 2073 656c 662e  s:.        self.
-000285d0: 6173 7365 7274 5472 7565 286f 732e 7061  assertTrue(os.pa
-000285e0: 7468 2e69 7366 696c 6528 7472 6163 6b65  th.isfile(tracke
-000285f0: 725f 6669 6c65 6e61 6d65 2929 0a0a 2020  r_filename))..  
-00028600: 2020 2020 7374 6465 7272 203d 2073 656c      stderr = sel
-00028610: 662e 5275 6e47 7355 7469 6c28 5b27 6370  f.RunGsUtil(['cp
-00028620: 272c 2073 7572 6928 6f62 6a65 6374 5f75  ', suri(object_u
-00028630: 7269 292c 2066 7061 7468 5d2c 0a20 2020  ri), fpath],.   
-00028640: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028650: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00028660: 6e5f 7374 6465 7272 3d54 7275 6529 0a20  n_stderr=True). 
-00028670: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00028680: 496e 2827 5265 7375 6d69 6e67 2064 6f77  In('Resuming dow
-00028690: 6e6c 6f61 6427 2c20 7374 6465 7272 290a  nload', stderr).
-000286a0: 0a20 2020 2020 2023 2045 6163 6820 7472  .      # Each tr
-000286b0: 6163 6b65 7220 6669 6c65 2073 686f 756c  acker file shoul
-000286c0: 6420 6861 7665 2062 6565 6e20 6465 6c65  d have been dele
-000286d0: 7465 642e 0a20 2020 2020 2074 7261 636b  ted..      track
-000286e0: 6572 5f66 696c 656e 616d 6573 203d 2047  er_filenames = G
-000286f0: 6574 536c 6963 6564 446f 776e 6c6f 6164  etSlicedDownload
-00028700: 5472 6163 6b65 7246 696c 6550 6174 6873  TrackerFilePaths
-00028710: 280a 2020 2020 2020 2020 2020 5374 6f72  (.          Stor
-00028720: 6167 6555 726c 4672 6f6d 5374 7269 6e67  ageUrlFromString
-00028730: 2866 7061 7468 292c 2073 656c 662e 7465  (fpath), self.te
-00028740: 7374 5f61 7069 290a 2020 2020 2020 666f  st_api).      fo
-00028750: 7220 7472 6163 6b65 725f 6669 6c65 6e61  r tracker_filena
-00028760: 6d65 2069 6e20 7472 6163 6b65 725f 6669  me in tracker_fi
-00028770: 6c65 6e61 6d65 733a 0a20 2020 2020 2020  lenames:.       
-00028780: 2073 656c 662e 6173 7365 7274 4661 6c73   self.assertFals
-00028790: 6528 6f73 2e70 6174 682e 6973 6669 6c65  e(os.path.isfile
-000287a0: 2874 7261 636b 6572 5f66 696c 656e 616d  (tracker_filenam
-000287b0: 6529 290a 0a20 2020 2020 2077 6974 6820  e))..      with 
-000287c0: 6f70 656e 2866 7061 7468 2c20 2772 6227  open(fpath, 'rb'
-000287d0: 2920 6173 2066 3a0a 2020 2020 2020 2020  ) as f:.        
-000287e0: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-000287f0: 2866 2e72 6561 6428 292c 2062 2761 6263  (f.read(), b'abc
-00028800: 2720 2a20 7365 6c66 2e68 616c 745f 7369  ' * self.halt_si
-00028810: 7a65 2c0a 2020 2020 2020 2020 2020 2020  ze,.            
-00028820: 2020 2020 2020 2020 2020 2020 2027 4669               'Fi
-00028830: 6c65 2063 6f6e 7465 6e74 7320 6469 6666  le contents diff
-00028840: 6572 2729 0a0a 2020 4075 6e69 7474 6573  er')..  @unittes
-00028850: 742e 736b 6970 556e 6c65 7373 2855 7369  t.skipUnless(Usi
-00028860: 6e67 4372 636d 6f64 4578 7465 6e73 696f  ngCrcmodExtensio
-00028870: 6e28 292c 0a20 2020 2020 2020 2020 2020  n(),.           
-00028880: 2020 2020 2020 2020 2020 2020 2753 6c69              'Sli
-00028890: 6365 6420 646f 776e 6c6f 6164 2072 6571  ced download req
-000288a0: 7569 7265 7320 6661 7374 2063 7263 6d6f  uires fast crcmo
-000288b0: 642e 2729 0a20 2040 536b 6970 466f 7253  d.').  @SkipForS
-000288c0: 3328 274e 6f20 736c 6963 6564 2064 6f77  3('No sliced dow
-000288d0: 6e6c 6f61 6420 7375 7070 6f72 7420 666f  nload support fo
-000288e0: 7220 5333 2e27 290a 2020 6465 6620 7465  r S3.').  def te
-000288f0: 7374 5f63 705f 736c 6963 6564 5f64 6f77  st_cp_sliced_dow
-00028900: 6e6c 6f61 645f 7061 7274 6961 6c5f 7265  nload_partial_re
-00028910: 7375 6d65 2873 656c 6629 3a0a 2020 2020  sume(self):.    
-00028920: 2222 2254 6573 7420 736c 6963 6564 2064  """Test sliced d
-00028930: 6f77 6e6c 6f61 6420 7265 7375 6d61 6269  ownload resumabi
-00028940: 6c69 7479 2077 6865 6e20 736f 6d65 2063  lity when some c
-00028950: 6f6d 706f 6e65 6e74 7320 6172 6520 6669  omponents are fi
-00028960: 6e69 7368 6564 2e22 2222 0a20 2020 2062  nished.""".    b
-00028970: 7563 6b65 745f 7572 6920 3d20 7365 6c66  ucket_uri = self
-00028980: 2e43 7265 6174 6542 7563 6b65 7428 290a  .CreateBucket().
-00028990: 2020 2020 6f62 6a65 6374 5f75 7269 203d      object_uri =
-000289a0: 2073 656c 662e 4372 6561 7465 4f62 6a65   self.CreateObje
-000289b0: 6374 2862 7563 6b65 745f 7572 693d 6275  ct(bucket_uri=bu
-000289c0: 636b 6574 5f75 7269 2c0a 2020 2020 2020  cket_uri,.      
-000289d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000289e0: 2020 2020 2020 2020 2020 2020 206f 626a               obj
-000289f0: 6563 745f 6e61 6d65 3d27 666f 6f27 2c0a  ect_name='foo',.
-00028a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028a20: 2020 2063 6f6e 7465 6e74 733d 6227 6162     contents=b'ab
-00028a30: 6327 202a 2073 656c 662e 6861 6c74 5f73  c' * self.halt_s
-00028a40: 697a 6529 0a20 2020 2066 7061 7468 203d  ize).    fpath =
-00028a50: 2073 656c 662e 4372 6561 7465 5465 6d70   self.CreateTemp
-00028a60: 4669 6c65 2829 0a20 2020 2074 6573 745f  File().    test_
-00028a70: 6361 6c6c 6261 636b 5f66 696c 6520 3d20  callback_file = 
-00028a80: 7365 6c66 2e43 7265 6174 6554 656d 7046  self.CreateTempF
-00028a90: 696c 6528 0a20 2020 2020 2020 2063 6f6e  ile(.        con
-00028aa0: 7465 6e74 733d 7069 636b 6c65 2e64 756d  tents=pickle.dum
-00028ab0: 7073 2848 616c 744f 6e65 436f 6d70 6f6e  ps(HaltOneCompon
-00028ac0: 656e 7443 6f70 7943 616c 6c62 6163 6b48  entCopyCallbackH
-00028ad0: 616e 646c 6572 2835 2929 290a 0a20 2020  andler(5)))..   
-00028ae0: 2062 6f74 6f5f 636f 6e66 6967 5f66 6f72   boto_config_for
-00028af0: 5f74 6573 7420 3d20 5b0a 2020 2020 2020  _test = [.      
-00028b00: 2020 2827 4753 5574 696c 272c 2027 7265    ('GSUtil', 're
-00028b10: 7375 6d61 626c 655f 7468 7265 7368 6f6c  sumable_threshol
-00028b20: 6427 2c20 7374 7228 7365 6c66 2e68 616c  d', str(self.hal
-00028b30: 745f 7369 7a65 2929 2c0a 2020 2020 2020  t_size)),.      
-00028b40: 2020 2827 4753 5574 696c 272c 2027 736c    ('GSUtil', 'sl
-00028b50: 6963 6564 5f6f 626a 6563 745f 646f 776e  iced_object_down
-00028b60: 6c6f 6164 5f74 6872 6573 686f 6c64 272c  load_threshold',
-00028b70: 2073 7472 2873 656c 662e 6861 6c74 5f73   str(self.halt_s
-00028b80: 697a 6529 292c 0a20 2020 2020 2020 2028  ize)),.        (
-00028b90: 2747 5355 7469 6c27 2c20 2773 6c69 6365  'GSUtil', 'slice
-00028ba0: 645f 6f62 6a65 6374 5f64 6f77 6e6c 6f61  d_object_downloa
-00028bb0: 645f 6d61 785f 636f 6d70 6f6e 656e 7473  d_max_components
-00028bc0: 272c 2027 3327 290a 2020 2020 5d0a 0a20  ', '3').    ].. 
-00028bd0: 2020 2077 6974 6820 5365 7442 6f74 6f43     with SetBotoC
-00028be0: 6f6e 6669 6746 6f72 5465 7374 2862 6f74  onfigForTest(bot
-00028bf0: 6f5f 636f 6e66 6967 5f66 6f72 5f74 6573  o_config_for_tes
-00028c00: 7429 3a0a 2020 2020 2020 7374 6465 7272  t):.      stderr
-00028c10: 203d 2073 656c 662e 5275 6e47 7355 7469   = self.RunGsUti
-00028c20: 6c28 5b0a 2020 2020 2020 2020 2020 2763  l([.          'c
-00028c30: 7027 2c20 272d 2d74 6573 7463 616c 6c62  p', '--testcallb
-00028c40: 6163 6b66 696c 6527 2c20 7465 7374 5f63  ackfile', test_c
-00028c50: 616c 6c62 6163 6b5f 6669 6c65 2c0a 2020  allback_file,.  
-00028c60: 2020 2020 2020 2020 7375 7269 286f 626a          suri(obj
-00028c70: 6563 745f 7572 6929 2c0a 2020 2020 2020  ect_uri),.      
-00028c80: 2020 2020 7375 7269 2866 7061 7468 290a      suri(fpath).
-00028c90: 2020 2020 2020 5d2c 0a20 2020 2020 2020        ],.       
-00028ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028cb0: 2020 2020 2020 2072 6574 7572 6e5f 7374         return_st
-00028cc0: 6465 7272 3d54 7275 652c 0a20 2020 2020  derr=True,.     
-00028cd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028ce0: 2020 2020 2020 2020 2065 7870 6563 7465           expecte
-00028cf0: 645f 7374 6174 7573 3d31 290a 2020 2020  d_status=1).    
-00028d00: 2020 7365 6c66 2e61 7373 6572 7449 6e28    self.assertIn(
-00028d10: 276e 6f74 2064 6f77 6e6c 6f61 6465 6420  'not downloaded 
-00028d20: 7375 6363 6573 7366 756c 6c79 272c 2073  successfully', s
-00028d30: 7464 6572 7229 0a0a 2020 2020 2020 2320  tderr)..      # 
-00028d40: 4561 6368 2074 7261 636b 6572 2066 696c  Each tracker fil
-00028d50: 6520 7368 6f75 6c64 2065 7869 7374 2e0a  e should exist..
-00028d60: 2020 2020 2020 7472 6163 6b65 725f 6669        tracker_fi
-00028d70: 6c65 6e61 6d65 7320 3d20 4765 7453 6c69  lenames = GetSli
-00028d80: 6365 6444 6f77 6e6c 6f61 6454 7261 636b  cedDownloadTrack
-00028d90: 6572 4669 6c65 5061 7468 7328 0a20 2020  erFilePaths(.   
-00028da0: 2020 2020 2020 2053 746f 7261 6765 5572         StorageUr
-00028db0: 6c46 726f 6d53 7472 696e 6728 6670 6174  lFromString(fpat
-00028dc0: 6829 2c20 7365 6c66 2e74 6573 745f 6170  h), self.test_ap
-00028dd0: 6929 0a20 2020 2020 2066 6f72 2074 7261  i).      for tra
-00028de0: 636b 6572 5f66 696c 656e 616d 6520 696e  cker_filename in
-00028df0: 2074 7261 636b 6572 5f66 696c 656e 616d   tracker_filenam
-00028e00: 6573 3a0a 2020 2020 2020 2020 7365 6c66  es:.        self
-00028e10: 2e61 7373 6572 7454 7275 6528 6f73 2e70  .assertTrue(os.p
-00028e20: 6174 682e 6973 6669 6c65 2874 7261 636b  ath.isfile(track
-00028e30: 6572 5f66 696c 656e 616d 6529 290a 0a20  er_filename)).. 
-00028e40: 2020 2020 2073 7464 6572 7220 3d20 7365       stderr = se
-00028e50: 6c66 2e52 756e 4773 5574 696c 285b 2763  lf.RunGsUtil(['c
-00028e60: 7027 2c20 7375 7269 286f 626a 6563 745f  p', suri(object_
-00028e70: 7572 6929 2c20 6670 6174 685d 2c0a 2020  uri), fpath],.  
-00028e80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028e90: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00028ea0: 726e 5f73 7464 6572 723d 5472 7565 290a  rn_stderr=True).
-00028eb0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-00028ec0: 7449 6e28 2752 6573 756d 696e 6720 646f  tIn('Resuming do
-00028ed0: 776e 6c6f 6164 272c 2073 7464 6572 7229  wnload', stderr)
-00028ee0: 0a20 2020 2020 2073 656c 662e 6173 7365  .      self.asse
-00028ef0: 7274 496e 2827 446f 776e 6c6f 6164 2061  rtIn('Download a
-00028f00: 6c72 6561 6479 2063 6f6d 706c 6574 6527  lready complete'
-00028f10: 2c20 7374 6465 7272 290a 0a20 2020 2020  , stderr)..     
-00028f20: 2023 2045 6163 6820 7472 6163 6b65 7220   # Each tracker 
-00028f30: 6669 6c65 2073 686f 756c 6420 6861 7665  file should have
-00028f40: 2062 6565 6e20 6465 6c65 7465 642e 0a20   been deleted.. 
-00028f50: 2020 2020 2074 7261 636b 6572 5f66 696c       tracker_fil
-00028f60: 656e 616d 6573 203d 2047 6574 536c 6963  enames = GetSlic
-00028f70: 6564 446f 776e 6c6f 6164 5472 6163 6b65  edDownloadTracke
-00028f80: 7246 696c 6550 6174 6873 280a 2020 2020  rFilePaths(.    
-00028f90: 2020 2020 2020 5374 6f72 6167 6555 726c        StorageUrl
-00028fa0: 4672 6f6d 5374 7269 6e67 2866 7061 7468  FromString(fpath
-00028fb0: 292c 2073 656c 662e 7465 7374 5f61 7069  ), self.test_api
-00028fc0: 290a 2020 2020 2020 666f 7220 7472 6163  ).      for trac
-00028fd0: 6b65 725f 6669 6c65 6e61 6d65 2069 6e20  ker_filename in 
-00028fe0: 7472 6163 6b65 725f 6669 6c65 6e61 6d65  tracker_filename
-00028ff0: 733a 0a20 2020 2020 2020 2073 656c 662e  s:.        self.
-00029000: 6173 7365 7274 4661 6c73 6528 6f73 2e70  assertFalse(os.p
-00029010: 6174 682e 6973 6669 6c65 2874 7261 636b  ath.isfile(track
-00029020: 6572 5f66 696c 656e 616d 6529 290a 0a20  er_filename)).. 
-00029030: 2020 2020 2077 6974 6820 6f70 656e 2866       with open(f
-00029040: 7061 7468 2c20 2772 6227 2920 6173 2066  path, 'rb') as f
-00029050: 3a0a 2020 2020 2020 2020 7365 6c66 2e61  :.        self.a
-00029060: 7373 6572 7445 7175 616c 2866 2e72 6561  ssertEqual(f.rea
-00029070: 6428 292c 2062 2761 6263 2720 2a20 7365  d(), b'abc' * se
-00029080: 6c66 2e68 616c 745f 7369 7a65 2c0a 2020  lf.halt_size,.  
-00029090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000290a0: 2020 2020 2020 2027 4669 6c65 2063 6f6e         'File con
-000290b0: 7465 6e74 7320 6469 6666 6572 2729 0a0a  tents differ')..
-000290c0: 2020 4075 6e69 7474 6573 742e 736b 6970    @unittest.skip
-000290d0: 556e 6c65 7373 2855 7369 6e67 4372 636d  Unless(UsingCrcm
-000290e0: 6f64 4578 7465 6e73 696f 6e28 292c 0a20  odExtension(),. 
-000290f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029100: 2020 2020 2020 2753 6c69 6365 6420 646f        'Sliced do
-00029110: 776e 6c6f 6164 2072 6571 7569 7265 7320  wnload requires 
-00029120: 6661 7374 2063 7263 6d6f 642e 2729 0a20  fast crcmod.'). 
-00029130: 2040 536b 6970 466f 7253 3328 274e 6f20   @SkipForS3('No 
-00029140: 736c 6963 6564 2064 6f77 6e6c 6f61 6420  sliced download 
-00029150: 7375 7070 6f72 7420 666f 7220 5333 2e27  support for S3.'
-00029160: 290a 2020 6465 6620 7465 7374 5f63 705f  ).  def test_cp_
-00029170: 736c 6963 6564 5f64 6f77 6e6c 6f61 645f  sliced_download_
-00029180: 7265 7375 6d65 5f63 6f6e 7465 6e74 5f64  resume_content_d
-00029190: 6966 6665 7273 2873 656c 6629 3a0a 2020  iffers(self):.  
-000291a0: 2020 2222 2254 6573 7473 2064 6966 6665    """Tests diffe
-000291b0: 7269 6e67 2066 696c 6520 636f 6e74 656e  ring file conten
-000291c0: 7473 2061 7265 2064 6574 6563 7465 6420  ts are detected 
-000291d0: 6279 2073 6c69 6365 6420 646f 776e 6c6f  by sliced downlo
-000291e0: 6164 732e 2222 220a 2020 2020 6275 636b  ads.""".    buck
-000291f0: 6574 5f75 7269 203d 2073 656c 662e 4372  et_uri = self.Cr
-00029200: 6561 7465 4275 636b 6574 2829 0a20 2020  eateBucket().   
-00029210: 206f 626a 6563 745f 7572 6920 3d20 7365   object_uri = se
-00029220: 6c66 2e43 7265 6174 654f 626a 6563 7428  lf.CreateObject(
-00029230: 6275 636b 6574 5f75 7269 3d62 7563 6b65  bucket_uri=bucke
-00029240: 745f 7572 692c 0a20 2020 2020 2020 2020  t_uri,.         
-00029250: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029260: 2020 2020 2020 2020 2020 6f62 6a65 6374            object
-00029270: 5f6e 616d 653d 2766 6f6f 272c 0a20 2020  _name='foo',.   
-00029280: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029290: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000292a0: 636f 6e74 656e 7473 3d62 2761 6263 2720  contents=b'abc' 
-000292b0: 2a20 7365 6c66 2e68 616c 745f 7369 7a65  * self.halt_size
-000292c0: 290a 2020 2020 6670 6174 6820 3d20 7365  ).    fpath = se
-000292d0: 6c66 2e43 7265 6174 6554 656d 7046 696c  lf.CreateTempFil
-000292e0: 6528 636f 6e74 656e 7473 3d62 2727 290a  e(contents=b'').
-000292f0: 2020 2020 7465 7374 5f63 616c 6c62 6163      test_callbac
-00029300: 6b5f 6669 6c65 203d 2073 656c 662e 4372  k_file = self.Cr
-00029310: 6561 7465 5465 6d70 4669 6c65 280a 2020  eateTempFile(.  
-00029320: 2020 2020 2020 636f 6e74 656e 7473 3d70        contents=p
-00029330: 6963 6b6c 652e 6475 6d70 7328 4861 6c74  ickle.dumps(Halt
-00029340: 696e 6743 6f70 7943 616c 6c62 6163 6b48  ingCopyCallbackH
-00029350: 616e 646c 6572 2846 616c 7365 2c20 3529  andler(False, 5)
-00029360: 2929 0a0a 2020 2020 626f 746f 5f63 6f6e  ))..    boto_con
-00029370: 6669 675f 666f 725f 7465 7374 203d 205b  fig_for_test = [
-00029380: 0a20 2020 2020 2020 2028 2747 5355 7469  .        ('GSUti
-00029390: 6c27 2c20 2772 6573 756d 6162 6c65 5f74  l', 'resumable_t
-000293a0: 6872 6573 686f 6c64 272c 2073 7472 2873  hreshold', str(s
-000293b0: 656c 662e 6861 6c74 5f73 697a 6529 292c  elf.halt_size)),
-000293c0: 0a20 2020 2020 2020 2028 2747 5355 7469  .        ('GSUti
-000293d0: 6c27 2c20 2773 6c69 6365 645f 6f62 6a65  l', 'sliced_obje
-000293e0: 6374 5f64 6f77 6e6c 6f61 645f 7468 7265  ct_download_thre
-000293f0: 7368 6f6c 6427 2c20 7374 7228 7365 6c66  shold', str(self
-00029400: 2e68 616c 745f 7369 7a65 2929 2c0a 2020  .halt_size)),.  
-00029410: 2020 2020 2020 2827 4753 5574 696c 272c        ('GSUtil',
-00029420: 2027 736c 6963 6564 5f6f 626a 6563 745f   'sliced_object_
-00029430: 646f 776e 6c6f 6164 5f6d 6178 5f63 6f6d  download_max_com
-00029440: 706f 6e65 6e74 7327 2c20 2733 2729 0a20  ponents', '3'). 
-00029450: 2020 205d 0a0a 2020 2020 7769 7468 2053     ]..    with S
-00029460: 6574 426f 746f 436f 6e66 6967 466f 7254  etBotoConfigForT
-00029470: 6573 7428 626f 746f 5f63 6f6e 6669 675f  est(boto_config_
-00029480: 666f 725f 7465 7374 293a 0a20 2020 2020  for_test):.     
-00029490: 2073 7464 6572 7220 3d20 7365 6c66 2e52   stderr = self.R
-000294a0: 756e 4773 5574 696c 285b 0a20 2020 2020  unGsUtil([.     
-000294b0: 2020 2020 2027 6370 272c 2027 2d2d 7465       'cp', '--te
-000294c0: 7374 6361 6c6c 6261 636b 6669 6c65 272c  stcallbackfile',
-000294d0: 2074 6573 745f 6361 6c6c 6261 636b 5f66   test_callback_f
-000294e0: 696c 652c 0a20 2020 2020 2020 2020 2073  ile,.          s
-000294f0: 7572 6928 6f62 6a65 6374 5f75 7269 292c  uri(object_uri),
-00029500: 0a20 2020 2020 2020 2020 2073 7572 6928  .          suri(
-00029510: 6670 6174 6829 0a20 2020 2020 205d 2c0a  fpath).      ],.
-00029520: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029530: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00029540: 7475 726e 5f73 7464 6572 723d 5472 7565  turn_stderr=True
-00029550: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00029560: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029570: 6578 7065 6374 6564 5f73 7461 7475 733d  expected_status=
-00029580: 3129 0a20 2020 2020 2073 656c 662e 6173  1).      self.as
-00029590: 7365 7274 496e 2827 6e6f 7420 646f 776e  sertIn('not down
-000295a0: 6c6f 6164 6564 2073 7563 6365 7373 6675  loaded successfu
-000295b0: 6c6c 7927 2c20 7374 6465 7272 290a 0a20  lly', stderr).. 
-000295c0: 2020 2020 2023 2054 656d 706f 7261 7279       # Temporary
-000295d0: 2064 6f77 6e6c 6f61 6420 6669 6c65 2073   download file s
-000295e0: 686f 756c 6420 6578 6973 742e 0a20 2020  hould exist..   
-000295f0: 2020 2073 656c 662e 6173 7365 7274 5472     self.assertTr
-00029600: 7565 286f 732e 7061 7468 2e69 7366 696c  ue(os.path.isfil
-00029610: 6528 6670 6174 6820 2b20 275f 2e67 7374  e(fpath + '_.gst
-00029620: 6d70 2729 290a 0a20 2020 2020 2023 2045  mp'))..      # E
-00029630: 6163 6820 7472 6163 6b65 7220 6669 6c65  ach tracker file
-00029640: 2073 686f 756c 6420 6578 6973 742e 0a20   should exist.. 
-00029650: 2020 2020 2074 7261 636b 6572 5f66 696c       tracker_fil
-00029660: 656e 616d 6573 203d 2047 6574 536c 6963  enames = GetSlic
-00029670: 6564 446f 776e 6c6f 6164 5472 6163 6b65  edDownloadTracke
-00029680: 7246 696c 6550 6174 6873 280a 2020 2020  rFilePaths(.    
-00029690: 2020 2020 2020 5374 6f72 6167 6555 726c        StorageUrl
-000296a0: 4672 6f6d 5374 7269 6e67 2866 7061 7468  FromString(fpath
-000296b0: 292c 2073 656c 662e 7465 7374 5f61 7069  ), self.test_api
-000296c0: 290a 2020 2020 2020 666f 7220 7472 6163  ).      for trac
-000296d0: 6b65 725f 6669 6c65 6e61 6d65 2069 6e20  ker_filename in 
-000296e0: 7472 6163 6b65 725f 6669 6c65 6e61 6d65  tracker_filename
-000296f0: 733a 0a20 2020 2020 2020 2073 656c 662e  s:.        self.
-00029700: 6173 7365 7274 5472 7565 286f 732e 7061  assertTrue(os.pa
-00029710: 7468 2e69 7366 696c 6528 7472 6163 6b65  th.isfile(tracke
-00029720: 725f 6669 6c65 6e61 6d65 2929 0a0a 2020  r_filename))..  
-00029730: 2020 2020 7769 7468 206f 7065 6e28 6670      with open(fp
-00029740: 6174 6820 2b20 275f 2e67 7374 6d70 272c  ath + '_.gstmp',
-00029750: 2027 722b 6227 2920 6173 2066 3a0a 2020   'r+b') as f:.  
-00029760: 2020 2020 2020 662e 7772 6974 6528 6227        f.write(b'
-00029770: 616c 7465 7265 6420 6669 6c65 2063 6f6e  altered file con
-00029780: 7465 6e74 7327 290a 0a20 2020 2020 2073  tents')..      s
-00029790: 7464 6572 7220 3d20 7365 6c66 2e52 756e  tderr = self.Run
-000297a0: 4773 5574 696c 285b 2763 7027 2c20 7375  GsUtil(['cp', su
-000297b0: 7269 286f 626a 6563 745f 7572 6929 2c20  ri(object_uri), 
-000297c0: 6670 6174 685d 2c0a 2020 2020 2020 2020  fpath],.        
+00023c20: 2020 2020 2020 2827 4753 5574 696c 272c        ('GSUtil',
+00023c30: 2027 6465 6372 7970 7469 6f6e 5f6b 6579   'decryption_key
+00023c40: 3127 2c0a 2020 2020 2020 2020 2020 2020  1',.            
+00023c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023c60: 2020 5445 5354 5f45 4e43 5259 5054 494f    TEST_ENCRYPTIO
+00023c70: 4e5f 4b45 5931 292c 0a20 2020 2020 2020  N_KEY1),.       
+00023c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023c90: 2020 2020 2020 2827 4753 5574 696c 272c        ('GSUtil',
+00023ca0: 2027 656e 6372 7970 7469 6f6e 5f6b 6579   'encryption_key
+00023cb0: 272c 2054 4553 545f 454e 4352 5950 5449  ', TEST_ENCRYPTI
+00023cc0: 4f4e 5f4b 4559 3229 5d0a 2020 2020 7769  ON_KEY2)].    wi
+00023cd0: 7468 2053 6574 426f 746f 436f 6e66 6967  th SetBotoConfig
+00023ce0: 466f 7254 6573 7428 626f 746f 5f63 6f6e  ForTest(boto_con
+00023cf0: 6669 675f 666f 725f 7465 7374 3229 3a0a  fig_for_test2):.
+00023d00: 2020 2020 2020 7365 6c66 2e52 756e 4773        self.RunGs
+00023d10: 5574 696c 285b 2772 6577 7269 7465 272c  Util(['rewrite',
+00023d20: 2027 2d6b 272c 2073 7572 6928 6f62 6a65   '-k', suri(obje
+00023d30: 6374 5f75 7269 295d 290a 0a20 2020 2023  ct_uri)])..    #
+00023d40: 204e 6f77 2072 6573 756d 6520 7468 6520   Now resume the 
+00023d50: 646f 776e 6c6f 6164 2075 7369 6e67 206f  download using o
+00023d60: 6e6c 7920 7468 6520 6e65 7720 656e 6372  nly the new encr
+00023d70: 7970 7469 6f6e 206b 6579 2e20 5369 6e63  yption key. Sinc
+00023d80: 6520 6974 730a 2020 2020 2320 6765 6e65  e its.    # gene
+00023d90: 7261 7469 6f6e 2063 6861 6e67 6564 2c20  ration changed, 
+00023da0: 7765 206d 7573 7420 7265 7374 6172 7420  we must restart 
+00023db0: 6974 2e0a 2020 2020 626f 746f 5f63 6f6e  it..    boto_con
+00023dc0: 6669 675f 666f 725f 7465 7374 3320 3d20  fig_for_test3 = 
+00023dd0: 5b28 2747 5355 7469 6c27 2c20 2772 6573  [('GSUtil', 'res
+00023de0: 756d 6162 6c65 5f74 6872 6573 686f 6c64  umable_threshold
+00023df0: 272c 2073 7472 284f 4e45 5f4b 4942 2929  ', str(ONE_KIB))
+00023e00: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00023e10: 2020 2020 2020 2020 2020 2020 2020 2028                 (
+00023e20: 2747 5355 7469 6c27 2c20 2765 6e63 7279  'GSUtil', 'encry
+00023e30: 7074 696f 6e5f 6b65 7927 2c20 5445 5354  ption_key', TEST
+00023e40: 5f45 4e43 5259 5054 494f 4e5f 4b45 5932  _ENCRYPTION_KEY2
+00023e50: 295d 0a20 2020 2077 6974 6820 5365 7442  )].    with SetB
+00023e60: 6f74 6f43 6f6e 6669 6746 6f72 5465 7374  otoConfigForTest
+00023e70: 2862 6f74 6f5f 636f 6e66 6967 5f66 6f72  (boto_config_for
+00023e80: 5f74 6573 7433 293a 0a20 2020 2020 2073  _test3):.      s
+00023e90: 7464 6572 7220 3d20 7365 6c66 2e52 756e  tderr = self.Run
+00023ea0: 4773 5574 696c 285b 2763 7027 2c20 7375  GsUtil(['cp', su
+00023eb0: 7269 286f 626a 6563 745f 7572 6929 2c20  ri(object_uri), 
+00023ec0: 6670 6174 685d 2c0a 2020 2020 2020 2020  fpath],.        
+00023ed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023ee0: 2020 2020 2020 7265 7475 726e 5f73 7464        return_std
+00023ef0: 6572 723d 5472 7565 290a 2020 2020 2020  err=True).      
+00023f00: 7365 6c66 2e61 7373 6572 7449 6e28 2752  self.assertIn('R
+00023f10: 6573 7461 7274 696e 6720 646f 776e 6c6f  estarting downlo
+00023f20: 6164 272c 2073 7464 6572 7229 0a20 2020  ad', stderr).   
+00023f30: 2077 6974 6820 6f70 656e 2866 7061 7468   with open(fpath
+00023f40: 2c20 2772 6227 2920 6173 2066 3a0a 2020  , 'rb') as f:.  
+00023f50: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+00023f60: 7175 616c 2866 2e72 6561 6428 292c 2066  qual(f.read(), f
+00023f70: 696c 655f 636f 6e74 656e 7473 2c20 2746  ile_contents, 'F
+00023f80: 696c 6520 636f 6e74 656e 7473 2064 6966  ile contents dif
+00023f90: 6665 7227 290a 0a20 2040 5365 7175 656e  fer')..  @Sequen
+00023fa0: 7469 616c 416e 6450 6172 616c 6c65 6c54  tialAndParallelT
+00023fb0: 7261 6e73 6665 720a 2020 6465 6620 7465  ransfer.  def te
+00023fc0: 7374 5f63 705f 7265 7375 6d61 626c 655f  st_cp_resumable_
+00023fd0: 646f 776e 6c6f 6164 5f65 7461 675f 6469  download_etag_di
+00023fe0: 6666 6572 7328 7365 6c66 293a 0a20 2020  ffers(self):.   
+00023ff0: 2022 2222 5465 7374 7320 7468 6174 2064   """Tests that d
+00024000: 6f77 6e6c 6f61 6420 7265 7374 6172 7473  ownload restarts
+00024010: 2074 6865 2066 696c 6520 7768 656e 2074   the file when t
+00024020: 6865 2073 6f75 7263 6520 6f62 6a65 6374  he source object
+00024030: 2063 6861 6e67 6573 2e0a 0a20 2020 2054   changes...    T
+00024040: 6869 7320 6361 7573 6573 2074 6865 2065  his causes the e
+00024050: 7461 6720 6e6f 7420 746f 206d 6174 6368  tag not to match
+00024060: 2e0a 2020 2020 2222 220a 2020 2020 6275  ..    """.    bu
+00024070: 636b 6574 5f75 7269 203d 2073 656c 662e  cket_uri = self.
+00024080: 4372 6561 7465 4275 636b 6574 2829 0a20  CreateBucket(). 
+00024090: 2020 206f 626a 6563 745f 7572 6920 3d20     object_uri = 
+000240a0: 7365 6c66 2e43 7265 6174 654f 626a 6563  self.CreateObjec
+000240b0: 7428 6275 636b 6574 5f75 7269 3d62 7563  t(bucket_uri=buc
+000240c0: 6b65 745f 7572 692c 0a20 2020 2020 2020  ket_uri,.       
+000240d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000240e0: 2020 2020 2020 2020 2020 2020 6f62 6a65              obje
+000240f0: 6374 5f6e 616d 653d 2766 6f6f 272c 0a20  ct_name='foo',. 
+00024100: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024110: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024120: 2020 636f 6e74 656e 7473 3d62 2761 6263    contents=b'abc
+00024130: 2720 2a20 7365 6c66 2e68 616c 745f 7369  ' * self.halt_si
+00024140: 7a65 290a 2020 2020 6670 6174 6820 3d20  ze).    fpath = 
+00024150: 7365 6c66 2e43 7265 6174 6554 656d 7046  self.CreateTempF
+00024160: 696c 6528 290a 2020 2020 7465 7374 5f63  ile().    test_c
+00024170: 616c 6c62 6163 6b5f 6669 6c65 203d 2073  allback_file = s
+00024180: 656c 662e 4372 6561 7465 5465 6d70 4669  elf.CreateTempFi
+00024190: 6c65 280a 2020 2020 2020 2020 636f 6e74  le(.        cont
+000241a0: 656e 7473 3d70 6963 6b6c 652e 6475 6d70  ents=pickle.dump
+000241b0: 7328 4861 6c74 696e 6743 6f70 7943 616c  s(HaltingCopyCal
+000241c0: 6c62 6163 6b48 616e 646c 6572 2846 616c  lbackHandler(Fal
+000241d0: 7365 2c20 3529 2929 0a20 2020 2062 6f74  se, 5))).    bot
+000241e0: 6f5f 636f 6e66 6967 5f66 6f72 5f74 6573  o_config_for_tes
+000241f0: 7420 3d20 2827 4753 5574 696c 272c 2027  t = ('GSUtil', '
+00024200: 7265 7375 6d61 626c 655f 7468 7265 7368  resumable_thresh
+00024210: 6f6c 6427 2c20 7374 7228 4f4e 455f 4b49  old', str(ONE_KI
+00024220: 4229 290a 2020 2020 7769 7468 2053 6574  B)).    with Set
+00024230: 426f 746f 436f 6e66 6967 466f 7254 6573  BotoConfigForTes
+00024240: 7428 5b62 6f74 6f5f 636f 6e66 6967 5f66  t([boto_config_f
+00024250: 6f72 5f74 6573 745d 293a 0a20 2020 2020  or_test]):.     
+00024260: 2023 2054 6869 7320 7769 6c6c 2063 7265   # This will cre
+00024270: 6174 6520 6120 7472 6163 6b65 7220 6669  ate a tracker fi
+00024280: 6c65 2077 6974 6820 616e 2045 5461 672e  le with an ETag.
+00024290: 0a20 2020 2020 2073 7464 6572 7220 3d20  .      stderr = 
+000242a0: 7365 6c66 2e52 756e 4773 5574 696c 285b  self.RunGsUtil([
+000242b0: 0a20 2020 2020 2020 2020 2027 6370 272c  .          'cp',
+000242c0: 2027 2d2d 7465 7374 6361 6c6c 6261 636b   '--testcallback
+000242d0: 6669 6c65 272c 2074 6573 745f 6361 6c6c  file', test_call
+000242e0: 6261 636b 5f66 696c 652c 0a20 2020 2020  back_file,.     
+000242f0: 2020 2020 2073 7572 6928 6f62 6a65 6374       suri(object
+00024300: 5f75 7269 292c 2066 7061 7468 0a20 2020  _uri), fpath.   
+00024310: 2020 205d 2c0a 2020 2020 2020 2020 2020     ],.          
+00024320: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024330: 2020 2020 6578 7065 6374 6564 5f73 7461      expected_sta
+00024340: 7475 733d 312c 0a20 2020 2020 2020 2020  tus=1,.         
+00024350: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024360: 2020 2020 2072 6574 7572 6e5f 7374 6465       return_stde
+00024370: 7272 3d54 7275 6529 0a20 2020 2020 2073  rr=True).      s
+00024380: 656c 662e 6173 7365 7274 496e 2827 4172  elf.assertIn('Ar
+00024390: 7469 6669 6361 6c6c 7920 6861 6c74 696e  tifically haltin
+000243a0: 6720 646f 776e 6c6f 6164 2e27 2c20 7374  g download.', st
+000243b0: 6465 7272 290a 2020 2020 2020 2320 4372  derr).      # Cr
+000243c0: 6561 7465 2061 206e 6577 206f 626a 6563  eate a new objec
+000243d0: 7420 7769 7468 2064 6966 6665 7265 6e74  t with different
+000243e0: 2063 6f6e 7465 6e74 7320 2d20 6974 2073   contents - it s
+000243f0: 686f 756c 6420 6861 7665 2061 0a20 2020  hould have a.   
+00024400: 2020 2023 2064 6966 6665 7265 6e74 2045     # different E
+00024410: 5461 6720 7369 6e63 6520 7468 6520 636f  Tag since the co
+00024420: 6e74 656e 7420 6861 7320 6368 616e 6765  ntent has change
+00024430: 642e 0a20 2020 2020 206f 626a 6563 745f  d..      object_
+00024440: 7572 6920 3d20 7365 6c66 2e43 7265 6174  uri = self.Creat
+00024450: 654f 626a 6563 7428 0a20 2020 2020 2020  eObject(.       
+00024460: 2020 2062 7563 6b65 745f 7572 693d 6275     bucket_uri=bu
+00024470: 636b 6574 5f75 7269 2c0a 2020 2020 2020  cket_uri,.      
+00024480: 2020 2020 6f62 6a65 6374 5f6e 616d 653d      object_name=
+00024490: 2766 6f6f 272c 0a20 2020 2020 2020 2020  'foo',.         
+000244a0: 2063 6f6e 7465 6e74 733d 6227 6227 202a   contents=b'b' *
+000244b0: 2073 656c 662e 6861 6c74 5f73 697a 652c   self.halt_size,
+000244c0: 0a20 2020 2020 2020 2020 2067 735f 6964  .          gs_id
+000244d0: 656d 706f 7465 6e74 5f67 656e 6572 6174  empotent_generat
+000244e0: 696f 6e3d 6f62 6a65 6374 5f75 7269 2e67  ion=object_uri.g
+000244f0: 656e 6572 6174 696f 6e29 0a20 2020 2020  eneration).     
+00024500: 2073 7464 6572 7220 3d20 7365 6c66 2e52   stderr = self.R
+00024510: 756e 4773 5574 696c 285b 2763 7027 2c20  unGsUtil(['cp', 
+00024520: 7375 7269 286f 626a 6563 745f 7572 6929  suri(object_uri)
+00024530: 2c20 6670 6174 685d 2c0a 2020 2020 2020  , fpath],.      
+00024540: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024550: 2020 2020 2020 2020 7265 7475 726e 5f73          return_s
+00024560: 7464 6572 723d 5472 7565 290a 2020 2020  tderr=True).    
+00024570: 2020 7365 6c66 2e61 7373 6572 744e 6f74    self.assertNot
+00024580: 496e 2827 5265 7375 6d69 6e67 2064 6f77  In('Resuming dow
+00024590: 6e6c 6f61 6427 2c20 7374 6465 7272 290a  nload', stderr).
+000245a0: 0a20 2023 2054 4f44 4f3a 2045 6e61 626c  .  # TODO: Enabl
+000245b0: 6520 7468 6973 2074 6573 7420 666f 7220  e this test for 
+000245c0: 7365 7175 656e 7469 616c 2064 6f77 6e6c  sequential downl
+000245d0: 6f61 6473 2077 6865 6e20 7468 6569 7220  oads when their 
+000245e0: 7472 6163 6b65 7220 6669 6c65 7320 6172  tracker files ar
+000245f0: 650a 2020 2320 6d6f 6469 6669 6564 2074  e.  # modified t
+00024600: 6f20 636f 6e74 6169 6e20 7468 6520 736f  o contain the so
+00024610: 7572 6365 206f 626a 6563 7420 6765 6e65  urce object gene
+00024620: 7261 7469 6f6e 2e0a 2020 4075 6e69 7474  ration..  @unitt
+00024630: 6573 742e 736b 6970 556e 6c65 7373 2855  est.skipUnless(U
+00024640: 7369 6e67 4372 636d 6f64 4578 7465 6e73  singCrcmodExtens
+00024650: 696f 6e28 292c 0a20 2020 2020 2020 2020  ion(),.         
+00024660: 2020 2020 2020 2020 2020 2020 2020 2753                'S
+00024670: 6c69 6365 6420 646f 776e 6c6f 6164 2072  liced download r
+00024680: 6571 7569 7265 7320 6661 7374 2063 7263  equires fast crc
+00024690: 6d6f 642e 2729 0a20 2040 536b 6970 466f  mod.').  @SkipFo
+000246a0: 7253 3328 274e 6f20 736c 6963 6564 2064  rS3('No sliced d
+000246b0: 6f77 6e6c 6f61 6420 7375 7070 6f72 7420  ownload support 
+000246c0: 666f 7220 5333 2e27 290a 2020 6465 6620  for S3.').  def 
+000246d0: 7465 7374 5f63 705f 7265 7375 6d61 626c  test_cp_resumabl
+000246e0: 655f 646f 776e 6c6f 6164 5f67 656e 6572  e_download_gener
+000246f0: 6174 696f 6e5f 6469 6666 6572 7328 7365  ation_differs(se
+00024700: 6c66 293a 0a20 2020 2022 2222 5465 7374  lf):.    """Test
+00024710: 7320 7468 6174 2061 2072 6573 756d 6162  s that a resumab
+00024720: 6c65 2064 6f77 6e6c 6f61 6420 7265 7374  le download rest
+00024730: 6172 7473 2069 6620 7468 6520 6765 6e65  arts if the gene
+00024740: 7261 7469 6f6e 2064 6966 6665 7273 2e22  ration differs."
+00024750: 2222 0a20 2020 2062 7563 6b65 745f 7572  "".    bucket_ur
+00024760: 6920 3d20 7365 6c66 2e43 7265 6174 6542  i = self.CreateB
+00024770: 7563 6b65 7428 290a 2020 2020 6669 6c65  ucket().    file
+00024780: 5f63 6f6e 7465 6e74 7320 3d20 6227 6162  _contents = b'ab
+00024790: 6364 2720 2a20 7365 6c66 2e68 616c 745f  cd' * self.halt_
+000247a0: 7369 7a65 0a20 2020 206f 626a 6563 745f  size.    object_
+000247b0: 7572 6920 3d20 7365 6c66 2e43 7265 6174  uri = self.Creat
+000247c0: 654f 626a 6563 7428 6275 636b 6574 5f75  eObject(bucket_u
+000247d0: 7269 3d62 7563 6b65 745f 7572 692c 0a20  ri=bucket_uri,. 
+000247e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000247f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024800: 2020 6f62 6a65 6374 5f6e 616d 653d 2766    object_name='f
+00024810: 6f6f 272c 0a20 2020 2020 2020 2020 2020  oo',.           
+00024820: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024830: 2020 2020 2020 2020 636f 6e74 656e 7473          contents
+00024840: 3d66 696c 655f 636f 6e74 656e 7473 290a  =file_contents).
+00024850: 2020 2020 6670 6174 6820 3d20 7365 6c66      fpath = self
+00024860: 2e43 7265 6174 6554 656d 7046 696c 6528  .CreateTempFile(
+00024870: 290a 0a20 2020 2074 6573 745f 6361 6c6c  )..    test_call
+00024880: 6261 636b 5f66 696c 6520 3d20 7365 6c66  back_file = self
+00024890: 2e43 7265 6174 6554 656d 7046 696c 6528  .CreateTempFile(
+000248a0: 0a20 2020 2020 2020 2063 6f6e 7465 6e74  .        content
+000248b0: 733d 7069 636b 6c65 2e64 756d 7073 2848  s=pickle.dumps(H
+000248c0: 616c 7469 6e67 436f 7079 4361 6c6c 6261  altingCopyCallba
+000248d0: 636b 4861 6e64 6c65 7228 4661 6c73 652c  ckHandler(False,
+000248e0: 2035 2929 290a 0a20 2020 2062 6f74 6f5f   5)))..    boto_
+000248f0: 636f 6e66 6967 5f66 6f72 5f74 6573 7420  config_for_test 
+00024900: 3d20 5b0a 2020 2020 2020 2020 2827 4753  = [.        ('GS
+00024910: 5574 696c 272c 2027 7265 7375 6d61 626c  Util', 'resumabl
+00024920: 655f 7468 7265 7368 6f6c 6427 2c20 7374  e_threshold', st
+00024930: 7228 7365 6c66 2e68 616c 745f 7369 7a65  r(self.halt_size
+00024940: 2929 2c0a 2020 2020 2020 2020 2827 4753  )),.        ('GS
+00024950: 5574 696c 272c 2027 736c 6963 6564 5f6f  Util', 'sliced_o
+00024960: 626a 6563 745f 646f 776e 6c6f 6164 5f74  bject_download_t
+00024970: 6872 6573 686f 6c64 272c 2073 7472 2873  hreshold', str(s
+00024980: 656c 662e 6861 6c74 5f73 697a 6529 292c  elf.halt_size)),
+00024990: 0a20 2020 2020 2020 2028 2747 5355 7469  .        ('GSUti
+000249a0: 6c27 2c20 2773 6c69 6365 645f 6f62 6a65  l', 'sliced_obje
+000249b0: 6374 5f64 6f77 6e6c 6f61 645f 6d61 785f  ct_download_max_
+000249c0: 636f 6d70 6f6e 656e 7473 272c 2027 3327  components', '3'
+000249d0: 290a 2020 2020 5d0a 0a20 2020 2077 6974  ).    ]..    wit
+000249e0: 6820 5365 7442 6f74 6f43 6f6e 6669 6746  h SetBotoConfigF
+000249f0: 6f72 5465 7374 2862 6f74 6f5f 636f 6e66  orTest(boto_conf
+00024a00: 6967 5f66 6f72 5f74 6573 7429 3a0a 2020  ig_for_test):.  
+00024a10: 2020 2020 7374 6465 7272 203d 2073 656c      stderr = sel
+00024a20: 662e 5275 6e47 7355 7469 6c28 5b0a 2020  f.RunGsUtil([.  
+00024a30: 2020 2020 2020 2020 2763 7027 2c20 272d          'cp', '-
+00024a40: 2d74 6573 7463 616c 6c62 6163 6b66 696c  -testcallbackfil
+00024a50: 6527 2c20 7465 7374 5f63 616c 6c62 6163  e', test_callbac
+00024a60: 6b5f 6669 6c65 2c0a 2020 2020 2020 2020  k_file,.        
+00024a70: 2020 7375 7269 286f 626a 6563 745f 7572    suri(object_ur
+00024a80: 6929 2c0a 2020 2020 2020 2020 2020 7375  i),.          su
+00024a90: 7269 2866 7061 7468 290a 2020 2020 2020  ri(fpath).      
+00024aa0: 5d2c 0a20 2020 2020 2020 2020 2020 2020  ],.             
+00024ab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024ac0: 2072 6574 7572 6e5f 7374 6465 7272 3d54   return_stderr=T
+00024ad0: 7275 652c 0a20 2020 2020 2020 2020 2020  rue,.           
+00024ae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024af0: 2020 2065 7870 6563 7465 645f 7374 6174     expected_stat
+00024b00: 7573 3d31 290a 2020 2020 2020 7365 6c66  us=1).      self
+00024b10: 2e61 7373 6572 7449 6e28 2741 7274 6966  .assertIn('Artif
+00024b20: 6963 616c 6c79 2068 616c 7469 6e67 2064  ically halting d
+00024b30: 6f77 6e6c 6f61 642e 272c 2073 7464 6572  ownload.', stder
+00024b40: 7229 0a0a 2020 2020 2020 2320 4f76 6572  r)..      # Over
+00024b50: 7772 6974 6520 7468 6520 6f62 6a65 6374  write the object
+00024b60: 2077 6974 6820 616e 2069 6465 6e74 6963   with an identic
+00024b70: 616c 206f 626a 6563 742c 2069 6e63 7265  al object, incre
+00024b80: 6173 696e 670a 2020 2020 2020 2320 7468  asing.      # th
+00024b90: 6520 6765 6e65 7261 7469 6f6e 2062 7574  e generation but
+00024ba0: 206c 6561 7669 6e67 206f 7468 6572 206d   leaving other m
+00024bb0: 6574 6164 6174 6120 7468 6520 7361 6d65  etadata the same
+00024bc0: 2e0a 2020 2020 2020 6964 656e 7469 6361  ..      identica
+00024bd0: 6c5f 6669 6c65 203d 2073 656c 662e 4372  l_file = self.Cr
+00024be0: 6561 7465 5465 6d70 4669 6c65 2863 6f6e  eateTempFile(con
+00024bf0: 7465 6e74 733d 6669 6c65 5f63 6f6e 7465  tents=file_conte
+00024c00: 6e74 7329 0a20 2020 2020 2073 656c 662e  nts).      self.
+00024c10: 5275 6e47 7355 7469 6c28 5b27 6370 272c  RunGsUtil(['cp',
+00024c20: 2073 7572 6928 6964 656e 7469 6361 6c5f   suri(identical_
+00024c30: 6669 6c65 292c 2073 7572 6928 6f62 6a65  file), suri(obje
+00024c40: 6374 5f75 7269 295d 290a 0a20 2020 2020  ct_uri)])..     
+00024c50: 2073 7464 6572 7220 3d20 7365 6c66 2e52   stderr = self.R
+00024c60: 756e 4773 5574 696c 280a 2020 2020 2020  unGsUtil(.      
+00024c70: 2020 2020 5b27 6370 272c 2073 7572 6928      ['cp', suri(
+00024c80: 6f62 6a65 6374 5f75 7269 292c 2073 7572  object_uri), sur
+00024c90: 6928 6670 6174 6829 5d2c 2072 6574 7572  i(fpath)], retur
+00024ca0: 6e5f 7374 6465 7272 3d54 7275 6529 0a20  n_stderr=True). 
+00024cb0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+00024cc0: 496e 2827 5265 7374 6172 7469 6e67 2064  In('Restarting d
+00024cd0: 6f77 6e6c 6f61 6420 6672 6f6d 2073 6372  ownload from scr
+00024ce0: 6174 6368 272c 2073 7464 6572 7229 0a20  atch', stderr). 
+00024cf0: 2020 2020 2077 6974 6820 6f70 656e 2866       with open(f
+00024d00: 7061 7468 2c20 2772 6227 2920 6173 2066  path, 'rb') as f
+00024d10: 3a0a 2020 2020 2020 2020 7365 6c66 2e61  :.        self.a
+00024d20: 7373 6572 7445 7175 616c 2866 2e72 6561  ssertEqual(f.rea
+00024d30: 6428 292c 2066 696c 655f 636f 6e74 656e  d(), file_conten
+00024d40: 7473 2c20 2746 696c 6520 636f 6e74 656e  ts, 'File conten
+00024d50: 7473 2064 6966 6665 7227 290a 0a20 2064  ts differ')..  d
+00024d60: 6566 2074 6573 745f 6370 5f72 6573 756d  ef test_cp_resum
+00024d70: 6162 6c65 5f64 6f77 6e6c 6f61 645f 6669  able_download_fi
+00024d80: 6c65 5f6c 6172 6765 7228 7365 6c66 293a  le_larger(self):
+00024d90: 0a20 2020 2022 2222 5465 7374 7320 646f  .    """Tests do
+00024da0: 776e 6c6f 6164 2064 656c 6574 6573 2074  wnload deletes t
+00024db0: 6865 2074 7261 636b 6572 2066 696c 6520  he tracker file 
+00024dc0: 7768 656e 2065 7869 7374 696e 6720 6669  when existing fi
+00024dd0: 6c65 2069 7320 6c61 7267 6572 2e22 2222  le is larger."""
+00024de0: 0a20 2020 2062 7563 6b65 745f 7572 6920  .    bucket_uri 
+00024df0: 3d20 7365 6c66 2e43 7265 6174 6542 7563  = self.CreateBuc
+00024e00: 6b65 7428 290a 2020 2020 6670 6174 6820  ket().    fpath 
+00024e10: 3d20 7365 6c66 2e43 7265 6174 6554 656d  = self.CreateTem
+00024e20: 7046 696c 6528 290a 2020 2020 6f62 6a65  pFile().    obje
+00024e30: 6374 5f75 7269 203d 2073 656c 662e 4372  ct_uri = self.Cr
+00024e40: 6561 7465 4f62 6a65 6374 2862 7563 6b65  eateObject(bucke
+00024e50: 745f 7572 693d 6275 636b 6574 5f75 7269  t_uri=bucket_uri
+00024e60: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00024e70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024e80: 2020 2020 206f 626a 6563 745f 6e61 6d65       object_name
+00024e90: 3d27 666f 6f27 2c0a 2020 2020 2020 2020  ='foo',.        
+00024ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024eb0: 2020 2020 2020 2020 2020 2063 6f6e 7465             conte
+00024ec0: 6e74 733d 6227 6127 202a 2073 656c 662e  nts=b'a' * self.
+00024ed0: 6861 6c74 5f73 697a 6529 0a20 2020 2074  halt_size).    t
+00024ee0: 6573 745f 6361 6c6c 6261 636b 5f66 696c  est_callback_fil
+00024ef0: 6520 3d20 7365 6c66 2e43 7265 6174 6554  e = self.CreateT
+00024f00: 656d 7046 696c 6528 0a20 2020 2020 2020  empFile(.       
+00024f10: 2063 6f6e 7465 6e74 733d 7069 636b 6c65   contents=pickle
+00024f20: 2e64 756d 7073 2848 616c 7469 6e67 436f  .dumps(HaltingCo
+00024f30: 7079 4361 6c6c 6261 636b 4861 6e64 6c65  pyCallbackHandle
+00024f40: 7228 4661 6c73 652c 2035 2929 290a 2020  r(False, 5))).  
+00024f50: 2020 626f 746f 5f63 6f6e 6669 675f 666f    boto_config_fo
+00024f60: 725f 7465 7374 203d 2028 2747 5355 7469  r_test = ('GSUti
+00024f70: 6c27 2c20 2772 6573 756d 6162 6c65 5f74  l', 'resumable_t
+00024f80: 6872 6573 686f 6c64 272c 2073 7472 284f  hreshold', str(O
+00024f90: 4e45 5f4b 4942 2929 0a20 2020 2077 6974  NE_KIB)).    wit
+00024fa0: 6820 5365 7442 6f74 6f43 6f6e 6669 6746  h SetBotoConfigF
+00024fb0: 6f72 5465 7374 285b 626f 746f 5f63 6f6e  orTest([boto_con
+00024fc0: 6669 675f 666f 725f 7465 7374 5d29 3a0a  fig_for_test]):.
+00024fd0: 2020 2020 2020 7374 6465 7272 203d 2073        stderr = s
+00024fe0: 656c 662e 5275 6e47 7355 7469 6c28 5b0a  elf.RunGsUtil([.
+00024ff0: 2020 2020 2020 2020 2020 2763 7027 2c20            'cp', 
+00025000: 272d 2d74 6573 7463 616c 6c62 6163 6b66  '--testcallbackf
+00025010: 696c 6527 2c20 7465 7374 5f63 616c 6c62  ile', test_callb
+00025020: 6163 6b5f 6669 6c65 2c0a 2020 2020 2020  ack_file,.      
+00025030: 2020 2020 7375 7269 286f 626a 6563 745f      suri(object_
+00025040: 7572 6929 2c20 6670 6174 680a 2020 2020  uri), fpath.    
+00025050: 2020 5d2c 0a20 2020 2020 2020 2020 2020    ],.           
+00025060: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025070: 2020 2065 7870 6563 7465 645f 7374 6174     expected_stat
+00025080: 7573 3d31 2c0a 2020 2020 2020 2020 2020  us=1,.          
+00025090: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000250a0: 2020 2020 7265 7475 726e 5f73 7464 6572      return_stder
+000250b0: 723d 5472 7565 290a 2020 2020 2020 7365  r=True).      se
+000250c0: 6c66 2e61 7373 6572 7449 6e28 2741 7274  lf.assertIn('Art
+000250d0: 6966 6963 616c 6c79 2068 616c 7469 6e67  ifically halting
+000250e0: 2064 6f77 6e6c 6f61 642e 272c 2073 7464   download.', std
+000250f0: 6572 7229 0a20 2020 2020 2077 6974 6820  err).      with 
+00025100: 6f70 656e 2866 7061 7468 202b 2027 5f2e  open(fpath + '_.
+00025110: 6773 746d 7027 2c20 2777 2729 2061 7320  gstmp', 'w') as 
+00025120: 6c61 7267 6572 5f66 696c 653a 0a20 2020  larger_file:.   
+00025130: 2020 2020 2066 6f72 205f 2069 6e20 7261       for _ in ra
+00025140: 6e67 6528 7365 6c66 2e68 616c 745f 7369  nge(self.halt_si
+00025150: 7a65 202a 2032 293a 0a20 2020 2020 2020  ze * 2):.       
+00025160: 2020 206c 6172 6765 725f 6669 6c65 2e77     larger_file.w
+00025170: 7269 7465 2827 6127 290a 2020 2020 2020  rite('a').      
+00025180: 7374 6465 7272 203d 2073 656c 662e 5275  stderr = self.Ru
+00025190: 6e47 7355 7469 6c28 5b27 6370 272c 2073  nGsUtil(['cp', s
+000251a0: 7572 6928 6f62 6a65 6374 5f75 7269 292c  uri(object_uri),
+000251b0: 2066 7061 7468 5d2c 0a20 2020 2020 2020   fpath],.       
+000251c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000251d0: 2020 2020 2020 2065 7870 6563 7465 645f         expected_
+000251e0: 7374 6174 7573 3d31 2c0a 2020 2020 2020  status=1,.      
+000251f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025200: 2020 2020 2020 2020 7265 7475 726e 5f73          return_s
+00025210: 7464 6572 723d 5472 7565 290a 2020 2020  tderr=True).    
+00025220: 2020 7365 6c66 2e61 7373 6572 744e 6f74    self.assertNot
+00025230: 496e 2827 5265 7375 6d69 6e67 2064 6f77  In('Resuming dow
+00025240: 6e6c 6f61 6427 2c20 7374 6465 7272 290a  nload', stderr).
+00025250: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+00025260: 7449 6e28 2744 656c 6574 696e 6720 7472  tIn('Deleting tr
+00025270: 6163 6b65 7220 6669 6c65 272c 2073 7464  acker file', std
+00025280: 6572 7229 0a0a 2020 6465 6620 7465 7374  err)..  def test
+00025290: 5f63 705f 7265 7375 6d61 626c 655f 646f  _cp_resumable_do
+000252a0: 776e 6c6f 6164 5f63 6f6e 7465 6e74 5f64  wnload_content_d
+000252b0: 6966 6665 7273 2873 656c 6629 3a0a 2020  iffers(self):.  
+000252c0: 2020 2222 2254 6573 7473 2074 6861 7420    """Tests that 
+000252d0: 7765 2064 6f20 6e6f 7420 7265 2d64 6f77  we do not re-dow
+000252e0: 6e6c 6f61 6420 7768 656e 2074 7261 636b  nload when track
+000252f0: 6572 2066 696c 6520 6d61 7463 6865 7320  er file matches 
+00025300: 6578 6973 7469 6e67 2066 696c 652e 0a0a  existing file...
+00025310: 2020 2020 5765 206f 6e6c 7920 636f 6d70      We only comp
+00025320: 6172 6520 7369 7a65 2c20 6e6f 7420 636f  are size, not co
+00025330: 6e74 656e 7473 2c20 736f 2072 652d 646f  ntents, so re-do
+00025340: 776e 6c6f 6164 2073 686f 756c 6420 6e6f  wnload should no
+00025350: 7420 6f63 6375 7220 6576 656e 0a20 2020  t occur even.   
+00025360: 2074 686f 7567 6820 7468 6520 636f 6e74   though the cont
+00025370: 656e 7473 2061 7265 2074 6563 686e 6963  ents are technic
+00025380: 616c 6c79 2064 6966 6665 7265 6e74 2e20  ally different. 
+00025390: 486f 7765 7665 722c 2068 6173 6820 7661  However, hash va
+000253a0: 6c69 6461 7469 6f6e 206f 6e0a 2020 2020  lidation on.    
+000253b0: 7468 6520 6669 6c65 2073 686f 756c 6420  the file should 
+000253c0: 7374 696c 6c20 6f63 6375 7220 616e 6420  still occur and 
+000253d0: 7765 2077 696c 6c20 6465 6c65 7465 2074  we will delete t
+000253e0: 6865 2066 696c 6520 7468 656e 2062 6563  he file then bec
+000253f0: 6175 7365 0a20 2020 2074 6865 2068 6173  ause.    the has
+00025400: 6865 7320 6469 6666 6572 2e0a 2020 2020  hes differ..    
+00025410: 2222 220a 2020 2020 6275 636b 6574 5f75  """.    bucket_u
+00025420: 7269 203d 2073 656c 662e 4372 6561 7465  ri = self.Create
+00025430: 4275 636b 6574 2829 0a20 2020 2074 6d70  Bucket().    tmp
+00025440: 5f64 6972 203d 2073 656c 662e 4372 6561  _dir = self.Crea
+00025450: 7465 5465 6d70 4469 7228 290a 2020 2020  teTempDir().    
+00025460: 6670 6174 6820 3d20 7365 6c66 2e43 7265  fpath = self.Cre
+00025470: 6174 6554 656d 7046 696c 6528 746d 7064  ateTempFile(tmpd
+00025480: 6972 3d74 6d70 5f64 6972 290a 2020 2020  ir=tmp_dir).    
+00025490: 7465 6d70 5f64 6f77 6e6c 6f61 645f 6669  temp_download_fi
+000254a0: 6c65 203d 2066 7061 7468 202b 2027 5f2e  le = fpath + '_.
+000254b0: 6773 746d 7027 0a20 2020 2077 6974 6820  gstmp'.    with 
+000254c0: 6f70 656e 2874 656d 705f 646f 776e 6c6f  open(temp_downlo
+000254d0: 6164 5f66 696c 652c 2027 7727 2920 6173  ad_file, 'w') as
+000254e0: 2066 703a 0a20 2020 2020 2066 702e 7772   fp:.      fp.wr
+000254f0: 6974 6528 2761 6263 6427 202a 204f 4e45  ite('abcd' * ONE
+00025500: 5f4b 4942 290a 0a20 2020 206f 626a 6563  _KIB)..    objec
+00025510: 745f 7572 6920 3d20 7365 6c66 2e43 7265  t_uri = self.Cre
+00025520: 6174 654f 626a 6563 7428 6275 636b 6574  ateObject(bucket
+00025530: 5f75 7269 3d62 7563 6b65 745f 7572 692c  _uri=bucket_uri,
+00025540: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00025550: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025560: 2020 2020 6f62 6a65 6374 5f6e 616d 653d      object_name=
+00025570: 2766 6f6f 272c 0a20 2020 2020 2020 2020  'foo',.         
+00025580: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025590: 2020 2020 2020 2020 2020 636f 6e74 656e            conten
+000255a0: 7473 3d62 2765 6667 6827 202a 204f 4e45  ts=b'efgh' * ONE
+000255b0: 5f4b 4942 290a 2020 2020 7374 646f 7574  _KIB).    stdout
+000255c0: 203d 2073 656c 662e 5275 6e47 7355 7469   = self.RunGsUti
+000255d0: 6c28 5b27 6c73 272c 2027 2d4c 272c 2073  l(['ls', '-L', s
+000255e0: 7572 6928 6f62 6a65 6374 5f75 7269 295d  uri(object_uri)]
+000255f0: 2c20 7265 7475 726e 5f73 7464 6f75 743d  , return_stdout=
+00025600: 5472 7565 290a 2020 2020 6574 6167 5f6d  True).    etag_m
+00025610: 6174 6368 203d 2072 652e 7365 6172 6368  atch = re.search
+00025620: 2872 275c 732a 4554 6167 3a5c 732a 282e  (r'\s*ETag:\s*(.
+00025630: 2a29 272c 2073 7464 6f75 7429 0a20 2020  *)', stdout).   
+00025640: 2073 656c 662e 6173 7365 7274 4973 4e6f   self.assertIsNo
+00025650: 744e 6f6e 6528 6574 6167 5f6d 6174 6368  tNone(etag_match
+00025660: 2c20 2743 6f75 6c64 206e 6f74 2067 6574  , 'Could not get
+00025670: 206f 626a 6563 7420 4554 6167 2729 0a20   object ETag'). 
+00025680: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+00025690: 7561 6c28 6c65 6e28 6574 6167 5f6d 6174  ual(len(etag_mat
+000256a0: 6368 2e67 726f 7570 7328 2929 2c20 312c  ch.groups()), 1,
+000256b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000256c0: 2020 2020 2020 2744 6964 206e 6f74 206d        'Did not m
+000256d0: 6174 6368 2065 7870 6563 7465 6420 7369  atch expected si
+000256e0: 6e67 6c65 2045 5461 6727 290a 2020 2020  ngle ETag').    
+000256f0: 6574 6167 203d 2065 7461 675f 6d61 7463  etag = etag_matc
+00025700: 682e 6772 6f75 7028 3129 0a0a 2020 2020  h.group(1)..    
+00025710: 7472 6163 6b65 725f 6669 6c65 6e61 6d65  tracker_filename
+00025720: 203d 2047 6574 5472 6163 6b65 7246 696c   = GetTrackerFil
+00025730: 6550 6174 6828 5374 6f72 6167 6555 726c  ePath(StorageUrl
+00025740: 4672 6f6d 5374 7269 6e67 2866 7061 7468  FromString(fpath
+00025750: 292c 0a20 2020 2020 2020 2020 2020 2020  ),.             
+00025760: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025770: 2020 2020 2020 2020 2020 2020 2054 7261               Tra
+00025780: 636b 6572 4669 6c65 5479 7065 2e44 4f57  ckerFileType.DOW
+00025790: 4e4c 4f41 442c 0a20 2020 2020 2020 2020  NLOAD,.         
+000257a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000257b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000257c0: 2073 656c 662e 7465 7374 5f61 7069 290a   self.test_api).
+000257d0: 2020 2020 7472 793a 0a20 2020 2020 2077      try:.      w
+000257e0: 6974 6820 6f70 656e 2874 7261 636b 6572  ith open(tracker
+000257f0: 5f66 696c 656e 616d 652c 2027 7727 2920  _filename, 'w') 
+00025800: 6173 2074 7261 636b 6572 5f66 703a 0a20  as tracker_fp:. 
+00025810: 2020 2020 2020 2074 7261 636b 6572 5f66         tracker_f
+00025820: 702e 7772 6974 6528 6574 6167 290a 2020  p.write(etag).  
+00025830: 2020 2020 626f 746f 5f63 6f6e 6669 675f      boto_config_
+00025840: 666f 725f 7465 7374 203d 2028 2747 5355  for_test = ('GSU
+00025850: 7469 6c27 2c20 2772 6573 756d 6162 6c65  til', 'resumable
+00025860: 5f74 6872 6573 686f 6c64 272c 2073 7472  _threshold', str
+00025870: 284f 4e45 5f4b 4942 2929 0a20 2020 2020  (ONE_KIB)).     
+00025880: 2077 6974 6820 5365 7442 6f74 6f43 6f6e   with SetBotoCon
+00025890: 6669 6746 6f72 5465 7374 285b 626f 746f  figForTest([boto
+000258a0: 5f63 6f6e 6669 675f 666f 725f 7465 7374  _config_for_test
+000258b0: 5d29 3a0a 2020 2020 2020 2020 7374 6465  ]):.        stde
+000258c0: 7272 203d 2073 656c 662e 5275 6e47 7355  rr = self.RunGsU
+000258d0: 7469 6c28 5b27 6370 272c 2073 7572 6928  til(['cp', suri(
+000258e0: 6f62 6a65 6374 5f75 7269 292c 2066 7061  object_uri), fpa
+000258f0: 7468 5d2c 0a20 2020 2020 2020 2020 2020  th],.           
+00025900: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025910: 2020 2020 2072 6574 7572 6e5f 7374 6465       return_stde
+00025920: 7272 3d54 7275 652c 0a20 2020 2020 2020  rr=True,.       
+00025930: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025940: 2020 2020 2020 2020 2065 7870 6563 7465           expecte
+00025950: 645f 7374 6174 7573 3d31 290a 2020 2020  d_status=1).    
+00025960: 2020 2020 7365 6c66 2e61 7373 6572 7449      self.assertI
+00025970: 6e28 2744 6f77 6e6c 6f61 6420 616c 7265  n('Download alre
+00025980: 6164 7920 636f 6d70 6c65 7465 272c 2073  ady complete', s
+00025990: 7464 6572 7229 0a20 2020 2020 2020 2073  tderr).        s
+000259a0: 656c 662e 6173 7365 7274 496e 2827 646f  elf.assertIn('do
+000259b0: 6573 6e5c 2774 206d 6174 6368 2063 6c6f  esn\'t match clo
+000259c0: 7564 2d73 7570 706c 6965 6420 6469 6765  ud-supplied dige
+000259d0: 7374 272c 2073 7464 6572 7229 0a20 2020  st', stderr).   
+000259e0: 2020 2020 2023 2046 696c 6520 616e 6420       # File and 
+000259f0: 7472 6163 6b65 7220 6669 6c65 2073 686f  tracker file sho
+00025a00: 756c 6420 6265 2064 656c 6574 6564 2e0a  uld be deleted..
+00025a10: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+00025a20: 6572 7446 616c 7365 286f 732e 7061 7468  ertFalse(os.path
+00025a30: 2e69 7366 696c 6528 7465 6d70 5f64 6f77  .isfile(temp_dow
+00025a40: 6e6c 6f61 645f 6669 6c65 2929 0a20 2020  nload_file)).   
+00025a50: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+00025a60: 4661 6c73 6528 6f73 2e70 6174 682e 6973  False(os.path.is
+00025a70: 6669 6c65 2874 7261 636b 6572 5f66 696c  file(tracker_fil
+00025a80: 656e 616d 6529 290a 2020 2020 2020 2020  ename)).        
+00025a90: 2320 5065 726d 616e 656e 7420 6669 6c65  # Permanent file
+00025aa0: 2073 686f 756c 6420 6e6f 7420 6861 7665   should not have
+00025ab0: 2062 6565 6e20 6372 6561 7465 642e 0a20   been created.. 
+00025ac0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+00025ad0: 7274 4661 6c73 6528 6f73 2e70 6174 682e  rtFalse(os.path.
+00025ae0: 6973 6669 6c65 2866 7061 7468 2929 0a20  isfile(fpath)). 
+00025af0: 2020 2066 696e 616c 6c79 3a0a 2020 2020     finally:.    
+00025b00: 2020 6966 206f 732e 7061 7468 2e65 7869    if os.path.exi
+00025b10: 7374 7328 7472 6163 6b65 725f 6669 6c65  sts(tracker_file
+00025b20: 6e61 6d65 293a 0a20 2020 2020 2020 206f  name):.        o
+00025b30: 732e 756e 6c69 6e6b 2874 7261 636b 6572  s.unlink(tracker
+00025b40: 5f66 696c 656e 616d 6529 0a0a 2020 6465  _filename)..  de
+00025b50: 6620 7465 7374 5f63 705f 7265 7375 6d61  f test_cp_resuma
+00025b60: 626c 655f 646f 776e 6c6f 6164 5f63 6f6e  ble_download_con
+00025b70: 7465 6e74 5f6d 6174 6368 6573 2873 656c  tent_matches(sel
+00025b80: 6629 3a0a 2020 2020 2222 2254 6573 7473  f):.    """Tests
+00025b90: 2064 6f77 6e6c 6f61 6420 6e6f 2d6f 7073   download no-ops
+00025ba0: 2077 6865 6e20 7472 6163 6b65 7220 6669   when tracker fi
+00025bb0: 6c65 206d 6174 6368 6573 2065 7869 7374  le matches exist
+00025bc0: 696e 6720 6669 6c65 2e22 2222 0a20 2020  ing file.""".   
+00025bd0: 2062 7563 6b65 745f 7572 6920 3d20 7365   bucket_uri = se
+00025be0: 6c66 2e43 7265 6174 6542 7563 6b65 7428  lf.CreateBucket(
+00025bf0: 290a 2020 2020 746d 705f 6469 7220 3d20  ).    tmp_dir = 
+00025c00: 7365 6c66 2e43 7265 6174 6554 656d 7044  self.CreateTempD
+00025c10: 6972 2829 0a20 2020 2066 7061 7468 203d  ir().    fpath =
+00025c20: 2073 656c 662e 4372 6561 7465 5465 6d70   self.CreateTemp
+00025c30: 4669 6c65 2874 6d70 6469 723d 746d 705f  File(tmpdir=tmp_
+00025c40: 6469 7229 0a20 2020 206d 6174 6368 696e  dir).    matchin
+00025c50: 675f 636f 6e74 656e 7473 203d 2062 2761  g_contents = b'a
+00025c60: 6263 6427 202a 204f 4e45 5f4b 4942 0a20  bcd' * ONE_KIB. 
+00025c70: 2020 2074 656d 705f 646f 776e 6c6f 6164     temp_download
+00025c80: 5f66 696c 6520 3d20 6670 6174 6820 2b20  _file = fpath + 
+00025c90: 275f 2e67 7374 6d70 270a 2020 2020 7769  '_.gstmp'.    wi
+00025ca0: 7468 206f 7065 6e28 7465 6d70 5f64 6f77  th open(temp_dow
+00025cb0: 6e6c 6f61 645f 6669 6c65 2c20 2777 6227  nload_file, 'wb'
+00025cc0: 2920 6173 2066 703a 0a20 2020 2020 2066  ) as fp:.      f
+00025cd0: 702e 7772 6974 6528 6d61 7463 6869 6e67  p.write(matching
+00025ce0: 5f63 6f6e 7465 6e74 7329 0a0a 2020 2020  _contents)..    
+00025cf0: 6f62 6a65 6374 5f75 7269 203d 2073 656c  object_uri = sel
+00025d00: 662e 4372 6561 7465 4f62 6a65 6374 2862  f.CreateObject(b
+00025d10: 7563 6b65 745f 7572 693d 6275 636b 6574  ucket_uri=bucket
+00025d20: 5f75 7269 2c0a 2020 2020 2020 2020 2020  _uri,.          
+00025d30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025d40: 2020 2020 2020 2020 206f 626a 6563 745f           object_
+00025d50: 6e61 6d65 3d27 666f 6f27 2c0a 2020 2020  name='foo',.    
+00025d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025d70: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+00025d80: 6f6e 7465 6e74 733d 6d61 7463 6869 6e67  ontents=matching
+00025d90: 5f63 6f6e 7465 6e74 7329 0a20 2020 2073  _contents).    s
+00025da0: 7464 6f75 7420 3d20 7365 6c66 2e52 756e  tdout = self.Run
+00025db0: 4773 5574 696c 285b 276c 7327 2c20 272d  GsUtil(['ls', '-
+00025dc0: 4c27 2c20 7375 7269 286f 626a 6563 745f  L', suri(object_
+00025dd0: 7572 6929 5d2c 2072 6574 7572 6e5f 7374  uri)], return_st
+00025de0: 646f 7574 3d54 7275 6529 0a20 2020 2065  dout=True).    e
+00025df0: 7461 675f 6d61 7463 6820 3d20 7265 2e73  tag_match = re.s
+00025e00: 6561 7263 6828 7227 5c73 2a45 5461 673a  earch(r'\s*ETag:
+00025e10: 5c73 2a28 2e2a 2927 2c20 7374 646f 7574  \s*(.*)', stdout
+00025e20: 290a 2020 2020 7365 6c66 2e61 7373 6572  ).    self.asser
+00025e30: 7449 734e 6f74 4e6f 6e65 2865 7461 675f  tIsNotNone(etag_
+00025e40: 6d61 7463 682c 2027 436f 756c 6420 6e6f  match, 'Could no
+00025e50: 7420 6765 7420 6f62 6a65 6374 2045 5461  t get object ETa
+00025e60: 6727 290a 2020 2020 7365 6c66 2e61 7373  g').    self.ass
+00025e70: 6572 7445 7175 616c 286c 656e 2865 7461  ertEqual(len(eta
+00025e80: 675f 6d61 7463 682e 6772 6f75 7073 2829  g_match.groups()
+00025e90: 292c 2031 2c0a 2020 2020 2020 2020 2020  ), 1,.          
+00025ea0: 2020 2020 2020 2020 2020 2027 4469 6420             'Did 
+00025eb0: 6e6f 7420 6d61 7463 6820 6578 7065 6374  not match expect
+00025ec0: 6564 2073 696e 676c 6520 4554 6167 2729  ed single ETag')
+00025ed0: 0a20 2020 2065 7461 6720 3d20 6574 6167  .    etag = etag
+00025ee0: 5f6d 6174 6368 2e67 726f 7570 2831 290a  _match.group(1).
+00025ef0: 2020 2020 7472 6163 6b65 725f 6669 6c65      tracker_file
+00025f00: 6e61 6d65 203d 2047 6574 5472 6163 6b65  name = GetTracke
+00025f10: 7246 696c 6550 6174 6828 5374 6f72 6167  rFilePath(Storag
+00025f20: 6555 726c 4672 6f6d 5374 7269 6e67 2866  eUrlFromString(f
+00025f30: 7061 7468 292c 0a20 2020 2020 2020 2020  path),.         
+00025f40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025f50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025f60: 2054 7261 636b 6572 4669 6c65 5479 7065   TrackerFileType
+00025f70: 2e44 4f57 4e4c 4f41 442c 0a20 2020 2020  .DOWNLOAD,.     
+00025f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025fa0: 2020 2020 2073 656c 662e 7465 7374 5f61       self.test_a
+00025fb0: 7069 290a 2020 2020 7769 7468 206f 7065  pi).    with ope
+00025fc0: 6e28 7472 6163 6b65 725f 6669 6c65 6e61  n(tracker_filena
+00025fd0: 6d65 2c20 2777 2729 2061 7320 7472 6163  me, 'w') as trac
+00025fe0: 6b65 725f 6670 3a0a 2020 2020 2020 7472  ker_fp:.      tr
+00025ff0: 6163 6b65 725f 6670 2e77 7269 7465 2865  acker_fp.write(e
+00026000: 7461 6729 0a20 2020 2074 7279 3a0a 2020  tag).    try:.  
+00026010: 2020 2020 626f 746f 5f63 6f6e 6669 675f      boto_config_
+00026020: 666f 725f 7465 7374 203d 2028 2747 5355  for_test = ('GSU
+00026030: 7469 6c27 2c20 2772 6573 756d 6162 6c65  til', 'resumable
+00026040: 5f74 6872 6573 686f 6c64 272c 2073 7472  _threshold', str
+00026050: 284f 4e45 5f4b 4942 2929 0a20 2020 2020  (ONE_KIB)).     
+00026060: 2077 6974 6820 5365 7442 6f74 6f43 6f6e   with SetBotoCon
+00026070: 6669 6746 6f72 5465 7374 285b 626f 746f  figForTest([boto
+00026080: 5f63 6f6e 6669 675f 666f 725f 7465 7374  _config_for_test
+00026090: 5d29 3a0a 2020 2020 2020 2020 7374 6465  ]):.        stde
+000260a0: 7272 203d 2073 656c 662e 5275 6e47 7355  rr = self.RunGsU
+000260b0: 7469 6c28 5b27 6370 272c 2073 7572 6928  til(['cp', suri(
+000260c0: 6f62 6a65 6374 5f75 7269 292c 2066 7061  object_uri), fpa
+000260d0: 7468 5d2c 0a20 2020 2020 2020 2020 2020  th],.           
+000260e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000260f0: 2020 2020 2072 6574 7572 6e5f 7374 6465       return_stde
+00026100: 7272 3d54 7275 6529 0a20 2020 2020 2020  rr=True).       
+00026110: 2073 656c 662e 6173 7365 7274 496e 2827   self.assertIn('
+00026120: 446f 776e 6c6f 6164 2061 6c72 6561 6479  Download already
+00026130: 2063 6f6d 706c 6574 6527 2c20 7374 6465   complete', stde
+00026140: 7272 290a 2020 2020 2020 2020 2320 5472  rr).        # Tr
+00026150: 6163 6b65 7220 6669 6c65 2073 686f 756c  acker file shoul
+00026160: 6420 6265 2072 656d 6f76 6564 2061 6674  d be removed aft
+00026170: 6572 2073 7563 6365 7373 6675 6c20 6861  er successful ha
+00026180: 7368 2076 616c 6964 6174 696f 6e2e 0a20  sh validation.. 
+00026190: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+000261a0: 7274 4661 6c73 6528 6f73 2e70 6174 682e  rtFalse(os.path.
+000261b0: 6973 6669 6c65 2874 7261 636b 6572 5f66  isfile(tracker_f
+000261c0: 696c 656e 616d 6529 290a 2020 2020 6669  ilename)).    fi
+000261d0: 6e61 6c6c 793a 0a20 2020 2020 2069 6620  nally:.      if 
+000261e0: 6f73 2e70 6174 682e 6578 6973 7473 2874  os.path.exists(t
+000261f0: 7261 636b 6572 5f66 696c 656e 616d 6529  racker_filename)
+00026200: 3a0a 2020 2020 2020 2020 6f73 2e75 6e6c  :.        os.unl
+00026210: 696e 6b28 7472 6163 6b65 725f 6669 6c65  ink(tracker_file
+00026220: 6e61 6d65 290a 0a20 2064 6566 2074 6573  name)..  def tes
+00026230: 745f 6370 5f72 6573 756d 6162 6c65 5f64  t_cp_resumable_d
+00026240: 6f77 6e6c 6f61 645f 7472 6163 6b65 725f  ownload_tracker_
+00026250: 6669 6c65 5f6e 6f74 5f6d 6174 6368 6573  file_not_matches
+00026260: 2873 656c 6629 3a0a 2020 2020 2222 2254  (self):.    """T
+00026270: 6573 7473 2074 6861 7420 646f 776e 6c6f  ests that downlo
+00026280: 6164 206f 7665 7277 7269 7465 7320 7768  ad overwrites wh
+00026290: 656e 2074 7261 636b 6572 2066 696c 6520  en tracker file 
+000262a0: 6574 6167 2064 6f65 7320 6e6f 7420 6d61  etag does not ma
+000262b0: 7463 682e 2222 220a 2020 2020 6275 636b  tch.""".    buck
+000262c0: 6574 5f75 7269 203d 2073 656c 662e 4372  et_uri = self.Cr
+000262d0: 6561 7465 4275 636b 6574 2829 0a20 2020  eateBucket().   
+000262e0: 2074 6d70 5f64 6972 203d 2073 656c 662e   tmp_dir = self.
+000262f0: 4372 6561 7465 5465 6d70 4469 7228 290a  CreateTempDir().
+00026300: 2020 2020 6670 6174 6820 3d20 7365 6c66      fpath = self
+00026310: 2e43 7265 6174 6554 656d 7046 696c 6528  .CreateTempFile(
+00026320: 746d 7064 6972 3d74 6d70 5f64 6972 2c20  tmpdir=tmp_dir, 
+00026330: 636f 6e74 656e 7473 3d62 2761 6263 6427  contents=b'abcd'
+00026340: 202a 204f 4e45 5f4b 4942 290a 2020 2020   * ONE_KIB).    
+00026350: 6f62 6a65 6374 5f75 7269 203d 2073 656c  object_uri = sel
+00026360: 662e 4372 6561 7465 4f62 6a65 6374 2862  f.CreateObject(b
+00026370: 7563 6b65 745f 7572 693d 6275 636b 6574  ucket_uri=bucket
+00026380: 5f75 7269 2c0a 2020 2020 2020 2020 2020  _uri,.          
+00026390: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000263a0: 2020 2020 2020 2020 206f 626a 6563 745f           object_
+000263b0: 6e61 6d65 3d27 666f 6f27 2c0a 2020 2020  name='foo',.    
+000263c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000263d0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+000263e0: 6f6e 7465 6e74 733d 6227 6566 6768 2720  ontents=b'efgh' 
+000263f0: 2a20 4f4e 455f 4b49 4229 0a20 2020 2073  * ONE_KIB).    s
+00026400: 7464 6f75 7420 3d20 7365 6c66 2e52 756e  tdout = self.Run
+00026410: 4773 5574 696c 285b 276c 7327 2c20 272d  GsUtil(['ls', '-
+00026420: 4c27 2c20 7375 7269 286f 626a 6563 745f  L', suri(object_
+00026430: 7572 6929 5d2c 2072 6574 7572 6e5f 7374  uri)], return_st
+00026440: 646f 7574 3d54 7275 6529 0a20 2020 2065  dout=True).    e
+00026450: 7461 675f 6d61 7463 6820 3d20 7265 2e73  tag_match = re.s
+00026460: 6561 7263 6828 7227 5c73 2a45 5461 673a  earch(r'\s*ETag:
+00026470: 5c73 2a28 2e2a 2927 2c20 7374 646f 7574  \s*(.*)', stdout
+00026480: 290a 2020 2020 7365 6c66 2e61 7373 6572  ).    self.asser
+00026490: 7449 734e 6f74 4e6f 6e65 2865 7461 675f  tIsNotNone(etag_
+000264a0: 6d61 7463 682c 2027 436f 756c 6420 6e6f  match, 'Could no
+000264b0: 7420 6765 7420 6f62 6a65 6374 2045 5461  t get object ETa
+000264c0: 6727 290a 2020 2020 7365 6c66 2e61 7373  g').    self.ass
+000264d0: 6572 7445 7175 616c 286c 656e 2865 7461  ertEqual(len(eta
+000264e0: 675f 6d61 7463 682e 6772 6f75 7073 2829  g_match.groups()
+000264f0: 292c 2031 2c0a 2020 2020 2020 2020 2020  ), 1,.          
+00026500: 2020 2020 2020 2020 2020 2027 4469 6420             'Did 
+00026510: 6e6f 7420 6d61 7463 6820 7265 6765 7820  not match regex 
+00026520: 666f 7220 6578 6163 746c 7920 6f6e 6520  for exactly one 
+00026530: 6f62 6a65 6374 2045 5461 6727 290a 2020  object ETag').  
+00026540: 2020 6574 6167 203d 2065 7461 675f 6d61    etag = etag_ma
+00026550: 7463 682e 6772 6f75 7028 3129 0a20 2020  tch.group(1).   
+00026560: 2065 7461 6720 2b3d 2027 6e6f 6e6d 6174   etag += 'nonmat
+00026570: 6368 696e 6727 0a20 2020 2074 7261 636b  ching'.    track
+00026580: 6572 5f66 696c 656e 616d 6520 3d20 4765  er_filename = Ge
+00026590: 7454 7261 636b 6572 4669 6c65 5061 7468  tTrackerFilePath
+000265a0: 2853 746f 7261 6765 5572 6c46 726f 6d53  (StorageUrlFromS
+000265b0: 7472 696e 6728 6670 6174 6829 2c0a 2020  tring(fpath),.  
+000265c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000265d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000265e0: 2020 2020 2020 2020 5472 6163 6b65 7246          TrackerF
+000265f0: 696c 6554 7970 652e 444f 574e 4c4f 4144  ileType.DOWNLOAD
+00026600: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00026610: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00026620: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00026630: 2e74 6573 745f 6170 6929 0a20 2020 2077  .test_api).    w
+00026640: 6974 6820 6f70 656e 2874 7261 636b 6572  ith open(tracker
+00026650: 5f66 696c 656e 616d 652c 2027 7727 2920  _filename, 'w') 
+00026660: 6173 2074 7261 636b 6572 5f66 703a 0a20  as tracker_fp:. 
+00026670: 2020 2020 2074 7261 636b 6572 5f66 702e       tracker_fp.
+00026680: 7772 6974 6528 6574 6167 290a 2020 2020  write(etag).    
+00026690: 7472 793a 0a20 2020 2020 2062 6f74 6f5f  try:.      boto_
+000266a0: 636f 6e66 6967 5f66 6f72 5f74 6573 7420  config_for_test 
+000266b0: 3d20 2827 4753 5574 696c 272c 2027 7265  = ('GSUtil', 're
+000266c0: 7375 6d61 626c 655f 7468 7265 7368 6f6c  sumable_threshol
+000266d0: 6427 2c20 7374 7228 4f4e 455f 4b49 4229  d', str(ONE_KIB)
+000266e0: 290a 2020 2020 2020 7769 7468 2053 6574  ).      with Set
+000266f0: 426f 746f 436f 6e66 6967 466f 7254 6573  BotoConfigForTes
+00026700: 7428 5b62 6f74 6f5f 636f 6e66 6967 5f66  t([boto_config_f
+00026710: 6f72 5f74 6573 745d 293a 0a20 2020 2020  or_test]):.     
+00026720: 2020 2073 7464 6572 7220 3d20 7365 6c66     stderr = self
+00026730: 2e52 756e 4773 5574 696c 285b 2763 7027  .RunGsUtil(['cp'
+00026740: 2c20 7375 7269 286f 626a 6563 745f 7572  , suri(object_ur
+00026750: 6929 2c20 6670 6174 685d 2c0a 2020 2020  i), fpath],.    
+00026760: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00026770: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00026780: 726e 5f73 7464 6572 723d 5472 7565 290a  rn_stderr=True).
+00026790: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+000267a0: 6572 744e 6f74 496e 2827 5265 7375 6d69  ertNotIn('Resumi
+000267b0: 6e67 2064 6f77 6e6c 6f61 6427 2c20 7374  ng download', st
+000267c0: 6465 7272 290a 2020 2020 2020 2020 2320  derr).        # 
+000267d0: 456e 7375 7265 2074 6865 2066 696c 6520  Ensure the file 
+000267e0: 7761 7320 6f76 6572 7772 6974 7465 6e2e  was overwritten.
+000267f0: 0a20 2020 2020 2020 2077 6974 6820 6f70  .        with op
+00026800: 656e 2866 7061 7468 2c20 2772 2729 2061  en(fpath, 'r') a
+00026810: 7320 696e 5f66 703a 0a20 2020 2020 2020  s in_fp:.       
+00026820: 2020 2063 6f6e 7465 6e74 7320 3d20 696e     contents = in
+00026830: 5f66 702e 7265 6164 2829 0a20 2020 2020  _fp.read().     
+00026840: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+00026850: 4571 7561 6c28 0a20 2020 2020 2020 2020  Equal(.         
+00026860: 2020 2020 2063 6f6e 7465 6e74 732c 2027       contents, '
+00026870: 6566 6768 2720 2a20 4f4e 455f 4b49 422c  efgh' * ONE_KIB,
+00026880: 0a20 2020 2020 2020 2020 2020 2020 2027  .              '
+00026890: 4669 6c65 206e 6f74 206f 7665 7277 7269  File not overwri
+000268a0: 7474 656e 2077 6865 6e20 6974 2073 686f  tten when it sho
+000268b0: 756c 6420 6861 7665 2062 6565 6e20 270a  uld have been '.
+000268c0: 2020 2020 2020 2020 2020 2020 2020 2764                'd
+000268d0: 7565 2074 6f20 6120 6e6f 6e2d 6d61 7463  ue to a non-matc
+000268e0: 6869 6e67 2074 7261 636b 6572 2066 696c  hing tracker fil
+000268f0: 652e 2729 0a20 2020 2020 2020 2073 656c  e.').        sel
+00026900: 662e 6173 7365 7274 4661 6c73 6528 6f73  f.assertFalse(os
+00026910: 2e70 6174 682e 6973 6669 6c65 2874 7261  .path.isfile(tra
+00026920: 636b 6572 5f66 696c 656e 616d 6529 290a  cker_filename)).
+00026930: 2020 2020 6669 6e61 6c6c 793a 0a20 2020      finally:.   
+00026940: 2020 2069 6620 6f73 2e70 6174 682e 6578     if os.path.ex
+00026950: 6973 7473 2874 7261 636b 6572 5f66 696c  ists(tracker_fil
+00026960: 656e 616d 6529 3a0a 2020 2020 2020 2020  ename):.        
+00026970: 6f73 2e75 6e6c 696e 6b28 7472 6163 6b65  os.unlink(tracke
+00026980: 725f 6669 6c65 6e61 6d65 290a 0a20 2064  r_filename)..  d
+00026990: 6566 2074 6573 745f 6370 5f64 6f75 626c  ef test_cp_doubl
+000269a0: 655f 677a 6970 2873 656c 6629 3a0a 2020  e_gzip(self):.  
+000269b0: 2020 2222 2254 6573 7473 2074 6861 7420    """Tests that 
+000269c0: 7570 6c6f 6164 2061 6e64 2064 6f77 6e6c  upload and downl
+000269d0: 6f61 6420 6f66 2061 2064 6f75 626c 792d  oad of a doubly-
+000269e0: 677a 6970 7065 6420 6669 6c65 2073 7563  gzipped file suc
+000269f0: 6365 6564 732e 2222 220a 2020 2020 6275  ceeds.""".    bu
+00026a00: 636b 6574 5f75 7269 203d 2073 656c 662e  cket_uri = self.
+00026a10: 4372 6561 7465 4275 636b 6574 2829 0a20  CreateBucket(). 
+00026a20: 2020 2066 7061 7468 203d 2073 656c 662e     fpath = self.
+00026a30: 4372 6561 7465 5465 6d70 4669 6c65 2866  CreateTempFile(f
+00026a40: 696c 655f 6e61 6d65 3d27 6c6f 6f6b 732d  ile_name='looks-
+00026a50: 7a69 7070 6564 2e67 7a27 2c20 636f 6e74  zipped.gz', cont
+00026a60: 656e 7473 3d62 2766 6f6f 2729 0a20 2020  ents=b'foo').   
+00026a70: 2073 656c 662e 5275 6e47 7355 7469 6c28   self.RunGsUtil(
+00026a80: 5b0a 2020 2020 2020 2020 272d 6827 2c20  [.        '-h', 
+00026a90: 2763 6f6e 7465 6e74 2d74 7970 653a 6170  'content-type:ap
+00026aa0: 706c 6963 6174 696f 6e2f 677a 6970 272c  plication/gzip',
+00026ab0: 2027 6370 272c 2027 2d5a 272c 0a20 2020   'cp', '-Z',.   
+00026ac0: 2020 2020 2073 7572 6928 6670 6174 6829       suri(fpath)
+00026ad0: 2c0a 2020 2020 2020 2020 7375 7269 2862  ,.        suri(b
+00026ae0: 7563 6b65 745f 7572 692c 2027 666f 6f27  ucket_uri, 'foo'
+00026af0: 290a 2020 2020 5d29 0a20 2020 2073 656c  ).    ]).    sel
+00026b00: 662e 5275 6e47 7355 7469 6c28 5b27 6370  f.RunGsUtil(['cp
+00026b10: 272c 2073 7572 6928 6275 636b 6574 5f75  ', suri(bucket_u
+00026b20: 7269 2c20 2766 6f6f 2729 2c20 6670 6174  ri, 'foo'), fpat
+00026b30: 685d 290a 0a20 2040 536b 6970 466f 7253  h])..  @SkipForS
+00026b40: 3328 274e 6f20 636f 6d70 7265 7373 6564  3('No compressed
+00026b50: 2074 7261 6e73 706f 7274 2065 6e63 6f64   transport encod
+00026b60: 696e 6720 7375 7070 6f72 7420 666f 7220  ing support for 
+00026b70: 5333 2e27 290a 2020 4053 6b69 7046 6f72  S3.').  @SkipFor
+00026b80: 584d 4c28 274e 6f20 636f 6d70 7265 7373  XML('No compress
+00026b90: 6564 2074 7261 6e73 706f 7274 2065 6e63  ed transport enc
+00026ba0: 6f64 696e 6720 7375 7070 6f72 7420 666f  oding support fo
+00026bb0: 7220 7468 6520 584d 4c20 4150 492e 2729  r the XML API.')
+00026bc0: 0a20 2040 5365 7175 656e 7469 616c 416e  .  @SequentialAn
+00026bd0: 6450 6172 616c 6c65 6c54 7261 6e73 6665  dParallelTransfe
+00026be0: 720a 2020 6465 6620 7465 7374 5f63 705f  r.  def test_cp_
+00026bf0: 646f 7562 6c65 5f67 7a69 705f 7472 616e  double_gzip_tran
+00026c00: 7370 6f72 745f 656e 636f 6465 6428 7365  sport_encoded(se
+00026c10: 6c66 293a 0a20 2020 2022 2222 5465 7374  lf):.    """Test
+00026c20: 7320 7468 6174 2075 706c 6f61 6420 616e  s that upload an
+00026c30: 6420 646f 776e 6c6f 6164 206f 6620 6120  d download of a 
+00026c40: 646f 7562 6c79 2d67 7a69 7070 6564 2066  doubly-gzipped f
+00026c50: 696c 6520 7375 6363 6565 6473 2e22 2222  ile succeeds."""
+00026c60: 0a20 2020 2062 7563 6b65 745f 7572 6920  .    bucket_uri 
+00026c70: 3d20 7365 6c66 2e43 7265 6174 6542 7563  = self.CreateBuc
+00026c80: 6b65 7428 290a 2020 2020 6670 6174 6820  ket().    fpath 
+00026c90: 3d20 7365 6c66 2e43 7265 6174 6554 656d  = self.CreateTem
+00026ca0: 7046 696c 6528 6669 6c65 5f6e 616d 653d  pFile(file_name=
+00026cb0: 276c 6f6f 6b73 2d7a 6970 7065 642e 677a  'looks-zipped.gz
+00026cc0: 272c 2063 6f6e 7465 6e74 733d 6227 666f  ', contents=b'fo
+00026cd0: 6f27 290a 2020 2020 7374 6465 7272 203d  o').    stderr =
+00026ce0: 2073 656c 662e 5275 6e47 7355 7469 6c28   self.RunGsUtil(
+00026cf0: 5b0a 2020 2020 2020 2020 272d 4427 2c20  [.        '-D', 
+00026d00: 272d 6827 2c20 2763 6f6e 7465 6e74 2d74  '-h', 'content-t
+00026d10: 7970 653a 6170 706c 6963 6174 696f 6e2f  ype:application/
+00026d20: 677a 6970 272c 2027 6370 272c 2027 2d4a  gzip', 'cp', '-J
+00026d30: 272c 0a20 2020 2020 2020 2073 7572 6928  ',.        suri(
+00026d40: 6670 6174 6829 2c0a 2020 2020 2020 2020  fpath),.        
+00026d50: 7375 7269 2862 7563 6b65 745f 7572 692c  suri(bucket_uri,
+00026d60: 2027 666f 6f27 290a 2020 2020 5d2c 0a20   'foo').    ],. 
+00026d70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00026d80: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00026d90: 6e5f 7374 6465 7272 3d54 7275 6529 0a20  n_stderr=True). 
+00026da0: 2020 2023 2045 6e73 7572 6520 7468 6520     # Ensure the 
+00026db0: 7072 6f67 7265 7373 206c 6f67 6765 7220  progress logger 
+00026dc0: 7365 6573 2061 2067 7a69 7020 656e 636f  sees a gzip enco
+00026dd0: 6469 6e67 2e0a 2020 2020 7365 6c66 2e61  ding..    self.a
+00026de0: 7373 6572 7449 6e28 2773 656e 643a 2055  ssertIn('send: U
+00026df0: 7369 6e67 2067 7a69 7020 7472 616e 7370  sing gzip transp
+00026e00: 6f72 7420 656e 636f 6469 6e67 2066 6f72  ort encoding for
+00026e10: 2074 6865 2072 6571 7565 7374 2e27 2c0a   the request.',.
+00026e20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00026e30: 2020 7374 6465 7272 290a 2020 2020 7365    stderr).    se
+00026e40: 6c66 2e52 756e 4773 5574 696c 285b 2763  lf.RunGsUtil(['c
+00026e50: 7027 2c20 7375 7269 2862 7563 6b65 745f  p', suri(bucket_
+00026e60: 7572 692c 2027 666f 6f27 292c 2066 7061  uri, 'foo'), fpa
+00026e70: 7468 5d29 0a0a 2020 4053 6571 7565 6e74  th])..  @Sequent
+00026e80: 6961 6c41 6e64 5061 7261 6c6c 656c 5472  ialAndParallelTr
+00026e90: 616e 7366 6572 0a20 2064 6566 2074 6573  ansfer.  def tes
+00026ea0: 745f 6370 5f72 6573 756d 6162 6c65 5f64  t_cp_resumable_d
+00026eb0: 6f77 6e6c 6f61 645f 677a 6970 2873 656c  ownload_gzip(sel
+00026ec0: 6629 3a0a 2020 2020 2222 2254 6573 7473  f):.    """Tests
+00026ed0: 2074 6861 7420 646f 776e 6c6f 6164 2063   that download c
+00026ee0: 616e 2062 6520 7265 7375 6d65 6420 7375  an be resumed su
+00026ef0: 6363 6573 7366 756c 6c79 2077 6974 6820  ccessfully with 
+00026f00: 6120 677a 6970 7065 6420 6669 6c65 2e22  a gzipped file."
+00026f10: 2222 0a20 2020 2023 2047 656e 6572 6174  "".    # Generat
+00026f20: 6520 736f 6d65 2072 6561 736f 6e61 626c  e some reasonabl
+00026f30: 7920 696e 636f 6d70 7265 7373 6962 6c65  y incompressible
+00026f40: 2064 6174 612e 2020 5468 6973 2063 6f6d   data.  This com
+00026f50: 7072 6573 7365 7320 746f 2061 2062 6974  presses to a bit
+00026f60: 0a20 2020 2023 2061 726f 756e 6420 3132  .    # around 12
+00026f70: 384b 2069 6e20 7072 6163 7469 6365 2c20  8K in practice, 
+00026f80: 6275 7420 7765 2061 7373 6572 7420 7370  but we assert sp
+00026f90: 6563 6966 6963 616c 6c79 2062 656c 6f77  ecifically below
+00026fa0: 2074 6861 7420 6974 2069 730a 2020 2020   that it is.    
+00026fb0: 2320 6c61 7267 6572 2074 6861 6e20 7365  # larger than se
+00026fc0: 6c66 2e68 616c 745f 7369 7a65 2074 6f20  lf.halt_size to 
+00026fd0: 6775 6172 616e 7465 6520 7468 6174 2077  guarantee that w
+00026fe0: 6520 6361 6e20 6861 6c74 2074 6865 2064  e can halt the d
+00026ff0: 6f77 6e6c 6f61 640a 2020 2020 2320 7061  ownload.    # pa
+00027000: 7274 7761 7920 7468 726f 7567 682e 0a20  rtway through.. 
+00027010: 2020 206f 626a 6563 745f 7572 6920 3d20     object_uri = 
+00027020: 7365 6c66 2e43 7265 6174 654f 626a 6563  self.CreateObjec
+00027030: 7428 290a 2020 2020 7261 6e64 6f6d 2e73  t().    random.s
+00027040: 6565 6428 3029 0a20 2020 2063 6f6e 7465  eed(0).    conte
+00027050: 6e74 7320 3d20 7374 7228 5b0a 2020 2020  nts = str([.    
+00027060: 2020 2020 7261 6e64 6f6d 2e63 686f 6963      random.choic
+00027070: 6528 7374 7269 6e67 2e61 7363 6969 5f6c  e(string.ascii_l
+00027080: 6574 7465 7273 2920 666f 7220 5f20 696e  etters) for _ in
+00027090: 2078 7261 6e67 6528 7365 6c66 2e68 616c   xrange(self.hal
+000270a0: 745f 7369 7a65 290a 2020 2020 5d29 2e65  t_size).    ]).e
+000270b0: 6e63 6f64 6528 2761 7363 6969 2729 0a20  ncode('ascii'). 
+000270c0: 2020 2072 616e 646f 6d2e 7365 6564 2829     random.seed()
+000270d0: 2020 2320 5265 7365 7420 7468 6520 7365    # Reset the se
+000270e0: 6564 2066 6f72 2061 6e79 206f 7468 6572  ed for any other
+000270f0: 2074 6573 7473 2e0a 2020 2020 6670 6174   tests..    fpat
+00027100: 6831 203d 2073 656c 662e 4372 6561 7465  h1 = self.Create
+00027110: 5465 6d70 4669 6c65 2866 696c 655f 6e61  TempFile(file_na
+00027120: 6d65 3d27 756e 7a69 7070 6564 2e74 7874  me='unzipped.txt
+00027130: 272c 2063 6f6e 7465 6e74 733d 636f 6e74  ', contents=cont
+00027140: 656e 7473 290a 2020 2020 7365 6c66 2e52  ents).    self.R
+00027150: 756e 4773 5574 696c 285b 2763 7027 2c20  unGsUtil(['cp', 
+00027160: 272d 7a27 2c20 2774 7874 272c 2073 7572  '-z', 'txt', sur
+00027170: 6928 6670 6174 6831 292c 2073 7572 6928  i(fpath1), suri(
+00027180: 6f62 6a65 6374 5f75 7269 295d 290a 0a20  object_uri)]).. 
+00027190: 2020 2023 2055 7365 2040 5265 7472 7920     # Use @Retry 
+000271a0: 6173 2068 6564 6765 2061 6761 696e 7374  as hedge against
+000271b0: 2062 7563 6b65 7420 6c69 7374 696e 6720   bucket listing 
+000271c0: 6576 656e 7475 616c 2063 6f6e 7369 7374  eventual consist
+000271d0: 656e 6379 2e0a 2020 2020 4052 6574 7279  ency..    @Retry
+000271e0: 2841 7373 6572 7469 6f6e 4572 726f 722c  (AssertionError,
+000271f0: 2074 7269 6573 3d33 2c20 7469 6d65 6f75   tries=3, timeou
+00027200: 745f 7365 6373 3d31 290a 2020 2020 6465  t_secs=1).    de
+00027210: 6620 5f47 6574 4f62 6a65 6374 5369 7a65  f _GetObjectSize
+00027220: 2829 3a0a 2020 2020 2020 7374 646f 7574  ():.      stdout
+00027230: 203d 2073 656c 662e 5275 6e47 7355 7469   = self.RunGsUti
+00027240: 6c28 5b27 6475 272c 2073 7572 6928 6f62  l(['du', suri(ob
+00027250: 6a65 6374 5f75 7269 295d 2c20 7265 7475  ject_uri)], retu
+00027260: 726e 5f73 7464 6f75 743d 5472 7565 290a  rn_stdout=True).
+00027270: 2020 2020 2020 7369 7a65 5f6d 6174 6368        size_match
+00027280: 203d 2072 652e 7365 6172 6368 2872 2728   = re.search(r'(
+00027290: 5c64 2b29 5c73 2b2e 2a27 2c20 7374 646f  \d+)\s+.*', stdo
+000272a0: 7574 290a 2020 2020 2020 7365 6c66 2e61  ut).      self.a
+000272b0: 7373 6572 7449 734e 6f74 4e6f 6e65 2873  ssertIsNotNone(s
+000272c0: 697a 655f 6d61 7463 682c 2027 436f 756c  ize_match, 'Coul
+000272d0: 6420 6e6f 7420 6765 7420 6f62 6a65 6374  d not get object
+000272e0: 2073 697a 6527 290a 2020 2020 2020 7365   size').      se
+000272f0: 6c66 2e61 7373 6572 7445 7175 616c 286c  lf.assertEqual(l
+00027300: 656e 2873 697a 655f 6d61 7463 682e 6772  en(size_match.gr
+00027310: 6f75 7073 2829 292c 2031 2c0a 2020 2020  oups()), 1,.    
+00027320: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027330: 2020 2027 4469 6420 6e6f 7420 6d61 7463     'Did not matc
+00027340: 6820 7265 6765 7820 666f 7220 6578 6163  h regex for exac
+00027350: 746c 7920 6f6e 6520 6f62 6a65 6374 2073  tly one object s
+00027360: 697a 652e 2729 0a20 2020 2020 2072 6574  ize.').      ret
+00027370: 7572 6e20 6c6f 6e67 2873 697a 655f 6d61  urn long(size_ma
+00027380: 7463 682e 6772 6f75 7028 3129 290a 0a20  tch.group(1)).. 
+00027390: 2020 206f 626a 6563 745f 7369 7a65 203d     object_size =
+000273a0: 205f 4765 744f 626a 6563 7453 697a 6528   _GetObjectSize(
+000273b0: 290a 2020 2020 7365 6c66 2e61 7373 6572  ).    self.asser
+000273c0: 7447 7265 6174 6572 4571 7561 6c28 0a20  tGreaterEqual(. 
+000273d0: 2020 2020 2020 206f 626a 6563 745f 7369         object_si
+000273e0: 7a65 2c20 7365 6c66 2e68 616c 745f 7369  ze, self.halt_si
+000273f0: 7a65 2c0a 2020 2020 2020 2020 2743 6f6d  ze,.        'Com
+00027400: 7072 6573 6564 206f 626a 6563 7420 7369  presed object si
+00027410: 7a65 2077 6173 206e 6f74 206c 6172 6765  ze was not large
+00027420: 2065 6e6f 7567 6820 746f 2027 0a20 2020   enough to '.   
+00027430: 2020 2020 2027 616c 6c6f 7720 666f 7220       'allow for 
+00027440: 6120 6861 6c74 6564 2064 6f77 6e6c 6f61  a halted downloa
+00027450: 642c 2073 6f20 7468 6520 7465 7374 2072  d, so the test r
+00027460: 6573 756c 7473 2027 0a20 2020 2020 2020  esults '.       
+00027470: 2027 776f 756c 6420 6265 2069 6e76 616c   'would be inval
+00027480: 6964 2e20 506c 6561 7365 2069 6e63 7265  id. Please incre
+00027490: 6173 6520 7468 6520 636f 6d70 7265 7373  ase the compress
+000274a0: 6564 2027 0a20 2020 2020 2020 2027 6f62  ed '.        'ob
+000274b0: 6a65 6374 2073 697a 6520 696e 2074 6865  ject size in the
+000274c0: 2074 6573 742e 2729 0a20 2020 2066 7061   test.').    fpa
+000274d0: 7468 3220 3d20 7365 6c66 2e43 7265 6174  th2 = self.Creat
+000274e0: 6554 656d 7046 696c 6528 290a 2020 2020  eTempFile().    
+000274f0: 7465 7374 5f63 616c 6c62 6163 6b5f 6669  test_callback_fi
+00027500: 6c65 203d 2073 656c 662e 4372 6561 7465  le = self.Create
+00027510: 5465 6d70 4669 6c65 280a 2020 2020 2020  TempFile(.      
+00027520: 2020 636f 6e74 656e 7473 3d70 6963 6b6c    contents=pickl
+00027530: 652e 6475 6d70 7328 4861 6c74 696e 6743  e.dumps(HaltingC
+00027540: 6f70 7943 616c 6c62 6163 6b48 616e 646c  opyCallbackHandl
+00027550: 6572 2846 616c 7365 2c20 3529 2929 0a0a  er(False, 5)))..
+00027560: 2020 2020 626f 746f 5f63 6f6e 6669 675f      boto_config_
+00027570: 666f 725f 7465 7374 203d 2028 2747 5355  for_test = ('GSU
+00027580: 7469 6c27 2c20 2772 6573 756d 6162 6c65  til', 'resumable
+00027590: 5f74 6872 6573 686f 6c64 272c 2073 7472  _threshold', str
+000275a0: 284f 4e45 5f4b 4942 2929 0a20 2020 2077  (ONE_KIB)).    w
+000275b0: 6974 6820 5365 7442 6f74 6f43 6f6e 6669  ith SetBotoConfi
+000275c0: 6746 6f72 5465 7374 285b 626f 746f 5f63  gForTest([boto_c
+000275d0: 6f6e 6669 675f 666f 725f 7465 7374 5d29  onfig_for_test])
+000275e0: 3a0a 2020 2020 2020 7374 6465 7272 203d  :.      stderr =
+000275f0: 2073 656c 662e 5275 6e47 7355 7469 6c28   self.RunGsUtil(
+00027600: 5b0a 2020 2020 2020 2020 2020 2763 7027  [.          'cp'
+00027610: 2c20 272d 2d74 6573 7463 616c 6c62 6163  , '--testcallbac
+00027620: 6b66 696c 6527 2c20 7465 7374 5f63 616c  kfile', test_cal
+00027630: 6c62 6163 6b5f 6669 6c65 2c0a 2020 2020  lback_file,.    
+00027640: 2020 2020 2020 7375 7269 286f 626a 6563        suri(objec
+00027650: 745f 7572 6929 2c0a 2020 2020 2020 2020  t_uri),.        
+00027660: 2020 7375 7269 2866 7061 7468 3229 0a20    suri(fpath2). 
+00027670: 2020 2020 205d 2c0a 2020 2020 2020 2020       ],.        
+00027680: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027690: 2020 2020 2020 7265 7475 726e 5f73 7464        return_std
+000276a0: 6572 723d 5472 7565 2c0a 2020 2020 2020  err=True,.      
+000276b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000276c0: 2020 2020 2020 2020 6578 7065 6374 6564          expected
+000276d0: 5f73 7461 7475 733d 3129 0a20 2020 2020  _status=1).     
+000276e0: 2073 656c 662e 6173 7365 7274 496e 2827   self.assertIn('
+000276f0: 4172 7469 6669 6361 6c6c 7920 6861 6c74  Artifically halt
+00027700: 696e 6720 646f 776e 6c6f 6164 2e27 2c20  ing download.', 
+00027710: 7374 6465 7272 290a 2020 2020 2020 7365  stderr).      se
+00027720: 6c66 2e61 7373 6572 7449 6e28 2744 6f77  lf.assertIn('Dow
+00027730: 6e6c 6f61 6469 6e67 2074 6f20 7465 6d70  nloading to temp
+00027740: 2067 7a69 7020 6669 6c65 6e61 6d65 272c   gzip filename',
+00027750: 2073 7464 6572 7229 0a0a 2020 2020 2020   stderr)..      
+00027760: 2320 5472 6163 6b65 7220 6669 6c65 7320  # Tracker files 
+00027770: 7769 6c6c 2068 6176 6520 6469 6666 6572  will have differ
+00027780: 656e 7420 6e61 6d65 7320 6465 7065 6e64  ent names depend
+00027790: 696e 6720 6f6e 2069 6620 7765 2061 7265  ing on if we are
+000277a0: 0a20 2020 2020 2023 2064 6f77 6e6c 6f61  .      # downloa
+000277b0: 6469 6e67 2073 6571 7565 6e74 6961 6c6c  ding sequentiall
+000277c0: 7920 6f72 2069 6e20 7061 7261 6c6c 656c  y or in parallel
+000277d0: 2e0a 2020 2020 2020 736c 6963 6564 5f64  ..      sliced_d
+000277e0: 6f77 6e6c 6f61 645f 7468 7265 7368 6f6c  ownload_threshol
+000277f0: 6420 3d20 4875 6d61 6e52 6561 6461 626c  d = HumanReadabl
+00027800: 6554 6f42 7974 6573 280a 2020 2020 2020  eToBytes(.      
+00027810: 2020 2020 626f 746f 2e63 6f6e 6669 672e      boto.config.
+00027820: 6765 7428 2747 5355 7469 6c27 2c20 2773  get('GSUtil', 's
+00027830: 6c69 6365 645f 6f62 6a65 6374 5f64 6f77  liced_object_dow
+00027840: 6e6c 6f61 645f 7468 7265 7368 6f6c 6427  nload_threshold'
+00027850: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00027860: 2020 2020 2020 2020 2020 2020 4445 4641              DEFA
+00027870: 554c 545f 534c 4943 4544 5f4f 424a 4543  ULT_SLICED_OBJEC
+00027880: 545f 444f 574e 4c4f 4144 5f54 4852 4553  T_DOWNLOAD_THRES
+00027890: 484f 4c44 2929 0a20 2020 2020 2073 6c69  HOLD)).      sli
+000278a0: 6365 645f 646f 776e 6c6f 6164 203d 2028  ced_download = (
+000278b0: 6c65 6e28 636f 6e74 656e 7473 2920 3e20  len(contents) > 
+000278c0: 736c 6963 6564 5f64 6f77 6e6c 6f61 645f  sliced_download_
+000278d0: 7468 7265 7368 6f6c 6420 616e 640a 2020  threshold and.  
+000278e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000278f0: 2020 2020 2020 2073 6c69 6365 645f 646f         sliced_do
+00027900: 776e 6c6f 6164 5f74 6872 6573 686f 6c64  wnload_threshold
+00027910: 203e 2030 2061 6e64 0a20 2020 2020 2020   > 0 and.       
+00027920: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027930: 2020 5573 696e 6743 7263 6d6f 6445 7874    UsingCrcmodExt
+00027940: 656e 7369 6f6e 2829 290a 2020 2020 2020  ension()).      
+00027950: 6966 2073 6c69 6365 645f 646f 776e 6c6f  if sliced_downlo
+00027960: 6164 3a0a 2020 2020 2020 2020 7472 6163  ad:.        trac
+00027970: 6b65 7266 696c 655f 7479 7065 203d 2054  kerfile_type = T
+00027980: 7261 636b 6572 4669 6c65 5479 7065 2e53  rackerFileType.S
+00027990: 4c49 4345 445f 444f 574e 4c4f 4144 0a20  LICED_DOWNLOAD. 
+000279a0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+000279b0: 2020 2074 7261 636b 6572 6669 6c65 5f74     trackerfile_t
+000279c0: 7970 6520 3d20 5472 6163 6b65 7246 696c  ype = TrackerFil
+000279d0: 6554 7970 652e 444f 574e 4c4f 4144 0a20  eType.DOWNLOAD. 
+000279e0: 2020 2020 2074 7261 636b 6572 5f66 696c       tracker_fil
+000279f0: 656e 616d 6520 3d20 4765 7454 7261 636b  ename = GetTrack
+00027a00: 6572 4669 6c65 5061 7468 2853 746f 7261  erFilePath(Stora
+00027a10: 6765 5572 6c46 726f 6d53 7472 696e 6728  geUrlFromString(
+00027a20: 6670 6174 6832 292c 0a20 2020 2020 2020  fpath2),.       
+00027a30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027a40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027a50: 2020 2020 2074 7261 636b 6572 6669 6c65       trackerfile
+00027a60: 5f74 7970 652c 2073 656c 662e 7465 7374  _type, self.test
+00027a70: 5f61 7069 290a 0a20 2020 2020 2023 2057  _api)..      # W
+00027a80: 6520 7368 6f75 6c64 2068 6176 6520 6120  e should have a 
+00027a90: 7465 6d70 6f72 6172 7920 677a 6970 7065  temporary gzippe
+00027aa0: 6420 6669 6c65 2c20 6120 7472 6163 6b65  d file, a tracke
+00027ab0: 7220 6669 6c65 2c20 616e 6420 6e6f 0a20  r file, and no. 
+00027ac0: 2020 2020 2023 2066 696e 616c 2066 696c       # final fil
+00027ad0: 6520 7965 742e 0a20 2020 2020 2073 656c  e yet..      sel
+00027ae0: 662e 6173 7365 7274 5472 7565 286f 732e  f.assertTrue(os.
+00027af0: 7061 7468 2e69 7366 696c 6528 7472 6163  path.isfile(trac
+00027b00: 6b65 725f 6669 6c65 6e61 6d65 2929 0a20  ker_filename)). 
+00027b10: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+00027b20: 5472 7565 286f 732e 7061 7468 2e69 7366  True(os.path.isf
+00027b30: 696c 6528 2725 735f 2e67 7a74 6d70 2720  ile('%s_.gztmp' 
+00027b40: 2520 6670 6174 6832 2929 0a20 2020 2020  % fpath2)).     
+00027b50: 2073 7464 6572 7220 3d20 7365 6c66 2e52   stderr = self.R
+00027b60: 756e 4773 5574 696c 280a 2020 2020 2020  unGsUtil(.      
+00027b70: 2020 2020 5b27 6370 272c 2073 7572 6928      ['cp', suri(
+00027b80: 6f62 6a65 6374 5f75 7269 292c 2073 7572  object_uri), sur
+00027b90: 6928 6670 6174 6832 295d 2c20 7265 7475  i(fpath2)], retu
+00027ba0: 726e 5f73 7464 6572 723d 5472 7565 290a  rn_stderr=True).
+00027bb0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+00027bc0: 7449 6e28 2752 6573 756d 696e 6720 646f  tIn('Resuming do
+00027bd0: 776e 6c6f 6164 272c 2073 7464 6572 7229  wnload', stderr)
+00027be0: 0a20 2020 2020 2077 6974 6820 6f70 656e  .      with open
+00027bf0: 2866 7061 7468 322c 2027 7262 2729 2061  (fpath2, 'rb') a
+00027c00: 7320 663a 0a20 2020 2020 2020 2073 656c  s f:.        sel
+00027c10: 662e 6173 7365 7274 4571 7561 6c28 662e  f.assertEqual(f.
+00027c20: 7265 6164 2829 2c20 636f 6e74 656e 7473  read(), contents
+00027c30: 2c20 2746 696c 6520 636f 6e74 656e 7473  , 'File contents
+00027c40: 2064 6964 206e 6f74 206d 6174 6368 2e27   did not match.'
+00027c50: 290a 2020 2020 2020 7365 6c66 2e61 7373  ).      self.ass
+00027c60: 6572 7446 616c 7365 286f 732e 7061 7468  ertFalse(os.path
+00027c70: 2e69 7366 696c 6528 7472 6163 6b65 725f  .isfile(tracker_
+00027c80: 6669 6c65 6e61 6d65 2929 0a20 2020 2020  filename)).     
+00027c90: 2073 656c 662e 6173 7365 7274 4661 6c73   self.assertFals
+00027ca0: 6528 6f73 2e70 6174 682e 6973 6669 6c65  e(os.path.isfile
+00027cb0: 2827 2573 5f2e 677a 746d 7027 2025 2066  ('%s_.gztmp' % f
+00027cc0: 7061 7468 3229 290a 0a20 2064 6566 205f  path2))..  def _
+00027cd0: 4765 7446 6176 6963 6f6e 4669 6c65 2873  GetFaviconFile(s
+00027ce0: 656c 6629 3a0a 2020 2020 2320 4d61 6b65  elf):.    # Make
+00027cf0: 2061 2074 656d 7020 6669 6c65 2066 726f   a temp file fro
+00027d00: 6d20 6661 7669 636f 6e2e 6963 6f2e 677a  m favicon.ico.gz
+00027d10: 2e20 4669 6e64 696e 6720 7468 6520 6c6f  . Finding the lo
+00027d20: 6361 7469 6f6e 206f 6620 6f75 7220 7465  cation of our te
+00027d30: 7374 0a20 2020 2023 2064 6174 6120 7661  st.    # data va
+00027d40: 7269 6573 2064 6570 656e 6469 6e67 206f  ries depending o
+00027d50: 6e20 686f 772f 7768 6572 6520 6773 7574  n how/where gsut
+00027d60: 696c 2077 6173 2069 6e73 7461 6c6c 6564  il was installed
+00027d70: 2c20 736f 2077 6520 6765 7420 7468 650a  , so we get the.
+00027d80: 2020 2020 2320 6461 7461 2076 6961 2070      # data via p
+00027d90: 6b67 7574 696c 2061 6e64 2075 7365 2074  kgutil and use t
+00027da0: 6869 7320 776f 726b 6172 6f75 6e64 2e0a  his workaround..
+00027db0: 2020 2020 6966 206e 6f74 2068 6173 6174      if not hasat
+00027dc0: 7472 2873 656c 662c 2027 7465 7374 5f64  tr(self, 'test_d
+00027dd0: 6174 615f 6661 7669 636f 6e5f 6669 6c65  ata_favicon_file
+00027de0: 2729 3a0a 2020 2020 2020 636f 6e74 656e  '):.      conten
+00027df0: 7473 203d 2070 6b67 7574 696c 2e67 6574  ts = pkgutil.get
+00027e00: 5f64 6174 6128 2767 736c 6962 272c 2027  _data('gslib', '
+00027e10: 7465 7374 732f 7465 7374 5f64 6174 612f  tests/test_data/
+00027e20: 6661 7669 636f 6e2e 6963 6f2e 677a 2729  favicon.ico.gz')
+00027e30: 0a20 2020 2020 2073 656c 662e 7465 7374  .      self.test
+00027e40: 5f64 6174 615f 6661 7669 636f 6e5f 6669  _data_favicon_fi
+00027e50: 6c65 203d 2073 656c 662e 4372 6561 7465  le = self.Create
+00027e60: 5465 6d70 4669 6c65 2863 6f6e 7465 6e74  TempFile(content
+00027e70: 733d 636f 6e74 656e 7473 290a 2020 2020  s=contents).    
+00027e80: 7265 7475 726e 2073 656c 662e 7465 7374  return self.test
+00027e90: 5f64 6174 615f 6661 7669 636f 6e5f 6669  _data_favicon_fi
+00027ea0: 6c65 0a0a 2020 6465 6620 7465 7374 5f63  le..  def test_c
+00027eb0: 705f 646f 776e 6c6f 6164 5f74 7261 6e73  p_download_trans
+00027ec0: 6665 725f 656e 636f 6465 6428 7365 6c66  fer_encoded(self
+00027ed0: 293a 0a20 2020 2022 2222 5465 7374 7320  ):.    """Tests 
+00027ee0: 6368 756e 6b65 6420 7472 616e 7366 6572  chunked transfer
+00027ef0: 2065 6e63 6f64 6564 2064 6f77 6e6c 6f61   encoded downloa
+00027f00: 6420 6861 6e64 6c69 6e67 2e0a 0a20 2020  d handling...   
+00027f10: 2054 6573 7473 2074 6861 7420 646f 776e   Tests that down
+00027f20: 6c6f 6164 2077 6f72 6b73 2063 6f72 7265  load works corre
+00027f30: 6374 6c79 2077 6974 6820 6120 677a 6970  ctly with a gzip
+00027f40: 7065 6420 6368 756e 6b65 6420 7472 616e  ped chunked tran
+00027f50: 7366 6572 2d65 6e63 6f64 6564 0a20 2020  sfer-encoded.   
+00027f60: 206f 626a 6563 7420 2877 6869 6368 2074   object (which t
+00027f70: 6865 7265 666f 7265 206c 6163 6b73 2043  herefore lacks C
+00027f80: 6f6e 7465 6e74 2d4c 656e 6774 6829 206f  ontent-Length) o
+00027f90: 6620 6120 7369 7a65 2074 6861 7420 6765  f a size that ge
+00027fa0: 7473 2066 6574 6368 6564 0a20 2020 2069  ts fetched.    i
+00027fb0: 6e20 6120 7369 6e67 6c65 2063 6875 6e6b  n a single chunk
+00027fc0: 2028 6578 6572 6369 7369 6e67 2064 6f77   (exercising dow
+00027fd0: 6e6c 6f61 6469 6e67 206f 6620 6f62 6a65  nloading of obje
+00027fe0: 6374 7320 6c61 636b 696e 6720 6120 6c65  cts lacking a le
+00027ff0: 6e67 7468 0a20 2020 2072 6573 706f 6e73  ngth.    respons
+00028000: 6520 6865 6164 6572 292e 0a20 2020 2022  e header)..    "
+00028010: 2222 0a20 2020 2023 2055 706c 6f61 6420  "".    # Upload 
+00028020: 6120 6669 6c65 202f 2063 6f6e 7465 6e74  a file / content
+00028030: 2d65 6e63 6f64 696e 6720 2f20 636f 6e74  -encoding / cont
+00028040: 656e 742d 7479 7065 2074 6861 7420 7472  ent-type that tr
+00028050: 6967 6765 7273 2074 6869 7320 666c 6f77  iggers this flow
+00028060: 2e0a 2020 2020 2320 4e6f 7465 3a20 5765  ..    # Note: We
+00028070: 206e 6565 6420 746f 2075 7365 2074 6865   need to use the
+00028080: 2066 696c 6520 7769 7468 2070 7265 2d7a   file with pre-z
+00028090: 6970 7065 6420 666f 726d 6174 2061 6e64  ipped format and
+000280a0: 206d 616e 7561 6c6c 7920 7365 7420 7468   manually set th
+000280b0: 650a 2020 2020 2320 636f 6e74 656e 742d  e.    # content-
+000280c0: 656e 636f 6469 6e67 2061 6e64 2063 6f6e  encoding and con
+000280d0: 7465 6e74 2d74 7970 6520 6265 6361 7573  tent-type becaus
+000280e0: 6520 7468 6520 5079 7468 6f6e 2067 7a69  e the Python gzi
+000280f0: 7020 6d6f 6475 6c65 2028 7573 6564 2062  p module (used b
+00028100: 790a 2020 2020 2320 6773 7574 696c 2063  y.    # gsutil c
+00028110: 7020 2d5a 2920 776f 6e27 7420 7265 7072  p -Z) won't repr
+00028120: 6f64 7563 6520 7468 6520 6279 7465 7320  oduce the bytes 
+00028130: 7468 6174 2074 7269 6767 6572 2074 6869  that trigger thi
+00028140: 7320 7072 6f62 6c65 6d2e 0a20 2020 2062  s problem..    b
+00028150: 7563 6b65 745f 7572 6920 3d20 7365 6c66  ucket_uri = self
+00028160: 2e43 7265 6174 6542 7563 6b65 7428 290a  .CreateBucket().
+00028170: 2020 2020 6f62 6a65 6374 5f75 7269 203d      object_uri =
+00028180: 2073 656c 662e 4372 6561 7465 4f62 6a65   self.CreateObje
+00028190: 6374 2862 7563 6b65 745f 7572 693d 6275  ct(bucket_uri=bu
+000281a0: 636b 6574 5f75 7269 2c20 6f62 6a65 6374  cket_uri, object
+000281b0: 5f6e 616d 653d 2766 6f6f 2729 0a20 2020  _name='foo').   
+000281c0: 2069 6e70 7574 5f66 696c 656e 616d 6520   input_filename 
+000281d0: 3d20 7365 6c66 2e5f 4765 7446 6176 6963  = self._GetFavic
+000281e0: 6f6e 4669 6c65 2829 0a20 2020 2073 656c  onFile().    sel
+000281f0: 662e 5275 6e47 7355 7469 6c28 5b0a 2020  f.RunGsUtil([.  
+00028200: 2020 2020 2020 272d 6827 2c20 2743 6f6e        '-h', 'Con
+00028210: 7465 6e74 2d45 6e63 6f64 696e 673a 677a  tent-Encoding:gz
+00028220: 6970 272c 2027 2d68 272c 2027 436f 6e74  ip', '-h', 'Cont
+00028230: 656e 742d 5479 7065 3a69 6d61 6765 2f78  ent-Type:image/x
+00028240: 2d69 636f 6e27 2c20 2763 7027 2c0a 2020  -icon', 'cp',.  
+00028250: 2020 2020 2020 7375 7269 2869 6e70 7574        suri(input
+00028260: 5f66 696c 656e 616d 6529 2c0a 2020 2020  _filename),.    
+00028270: 2020 2020 7375 7269 286f 626a 6563 745f      suri(object_
+00028280: 7572 6929 0a20 2020 205d 290a 2020 2020  uri).    ]).    
+00028290: 2320 436f 6d70 7574 6520 7468 6520 4d44  # Compute the MD
+000282a0: 3520 6f66 2074 6865 2075 6e63 6f6d 7072  5 of the uncompr
+000282b0: 6573 7365 6420 6279 7465 732e 0a20 2020  essed bytes..   
+000282c0: 2077 6974 6820 677a 6970 2e6f 7065 6e28   with gzip.open(
+000282d0: 696e 7075 745f 6669 6c65 6e61 6d65 2920  input_filename) 
+000282e0: 6173 2066 703a 0a20 2020 2020 2068 6173  as fp:.      has
+000282f0: 685f 6469 6374 203d 207b 276d 6435 273a  h_dict = {'md5':
+00028300: 2047 6574 4d64 3528 297d 0a20 2020 2020   GetMd5()}.     
+00028310: 2068 6173 6869 6e67 5f68 656c 7065 722e   hashing_helper.
+00028320: 4361 6c63 756c 6174 6548 6173 6865 7346  CalculateHashesF
+00028330: 726f 6d43 6f6e 7465 6e74 7328 6670 2c20  romContents(fp, 
+00028340: 6861 7368 5f64 6963 7429 0a20 2020 2020  hash_dict).     
+00028350: 2069 6e5f 6669 6c65 5f6d 6435 203d 2068   in_file_md5 = h
+00028360: 6173 685f 6469 6374 5b27 6d64 3527 5d2e  ash_dict['md5'].
+00028370: 6469 6765 7374 2829 0a0a 2020 2020 2320  digest()..    # 
+00028380: 446f 776e 6c6f 6164 696e 6720 7468 6973  Downloading this
+00028390: 2066 696c 6520 7472 6967 6765 7273 2074   file triggers t
+000283a0: 6865 2066 6c6f 772e 0a20 2020 2066 7061  he flow..    fpa
+000283b0: 7468 3220 3d20 7365 6c66 2e43 7265 6174  th2 = self.Creat
+000283c0: 6554 656d 7046 696c 6528 290a 2020 2020  eTempFile().    
+000283d0: 7365 6c66 2e52 756e 4773 5574 696c 285b  self.RunGsUtil([
+000283e0: 2763 7027 2c20 7375 7269 286f 626a 6563  'cp', suri(objec
+000283f0: 745f 7572 6929 2c20 7375 7269 2866 7061  t_uri), suri(fpa
+00028400: 7468 3229 5d29 0a20 2020 2023 2043 6f6d  th2)]).    # Com
+00028410: 7075 7465 204d 4435 206f 6620 7468 6520  pute MD5 of the 
+00028420: 646f 776e 6c6f 6164 6564 2028 756e 636f  downloaded (unco
+00028430: 6d70 7265 7373 6564 2920 6669 6c65 2c20  mpressed) file, 
+00028440: 616e 6420 7661 6c69 6461 7465 2069 742e  and validate it.
+00028450: 0a20 2020 2077 6974 6820 6f70 656e 2866  .    with open(f
+00028460: 7061 7468 322c 2027 7262 2729 2061 7320  path2, 'rb') as 
+00028470: 6670 3a0a 2020 2020 2020 6861 7368 5f64  fp:.      hash_d
+00028480: 6963 7420 3d20 7b27 6d64 3527 3a20 4765  ict = {'md5': Ge
+00028490: 744d 6435 2829 7d0a 2020 2020 2020 6861  tMd5()}.      ha
+000284a0: 7368 696e 675f 6865 6c70 6572 2e43 616c  shing_helper.Cal
+000284b0: 6375 6c61 7465 4861 7368 6573 4672 6f6d  culateHashesFrom
+000284c0: 436f 6e74 656e 7473 2866 702c 2068 6173  Contents(fp, has
+000284d0: 685f 6469 6374 290a 2020 2020 2020 6f75  h_dict).      ou
+000284e0: 745f 6669 6c65 5f6d 6435 203d 2068 6173  t_file_md5 = has
+000284f0: 685f 6469 6374 5b27 6d64 3527 5d2e 6469  h_dict['md5'].di
+00028500: 6765 7374 2829 0a20 2020 2073 656c 662e  gest().    self.
+00028510: 6173 7365 7274 4571 7561 6c28 696e 5f66  assertEqual(in_f
+00028520: 696c 655f 6d64 352c 206f 7574 5f66 696c  ile_md5, out_fil
+00028530: 655f 6d64 3529 0a0a 2020 4053 6571 7565  e_md5)..  @Seque
+00028540: 6e74 6961 6c41 6e64 5061 7261 6c6c 656c  ntialAndParallel
+00028550: 5472 616e 7366 6572 0a20 2064 6566 2074  Transfer.  def t
+00028560: 6573 745f 6370 5f72 6573 756d 6162 6c65  est_cp_resumable
+00028570: 5f64 6f77 6e6c 6f61 645f 6368 6563 6b5f  _download_check_
+00028580: 6861 7368 6573 5f6e 6576 6572 2873 656c  hashes_never(sel
+00028590: 6629 3a0a 2020 2020 2222 2254 6573 7473  f):.    """Tests
+000285a0: 2074 6861 7420 7265 7375 6d62 6c65 2064   that resumble d
+000285b0: 6f77 6e6c 6f61 6473 2077 6f72 6b20 7769  ownloads work wi
+000285c0: 7468 2063 6865 636b 5f68 6173 6865 7320  th check_hashes 
+000285d0: 3d20 6e65 7665 722e 2222 220a 2020 2020  = never.""".    
+000285e0: 6275 636b 6574 5f75 7269 203d 2073 656c  bucket_uri = sel
+000285f0: 662e 4372 6561 7465 4275 636b 6574 2829  f.CreateBucket()
+00028600: 0a20 2020 2063 6f6e 7465 6e74 7320 3d20  .    contents = 
+00028610: 6227 6162 6364 2720 2a20 7365 6c66 2e68  b'abcd' * self.h
+00028620: 616c 745f 7369 7a65 0a20 2020 206f 626a  alt_size.    obj
+00028630: 6563 745f 7572 6920 3d20 7365 6c66 2e43  ect_uri = self.C
+00028640: 7265 6174 654f 626a 6563 7428 6275 636b  reateObject(buck
+00028650: 6574 5f75 7269 3d62 7563 6b65 745f 7572  et_uri=bucket_ur
+00028660: 692c 0a20 2020 2020 2020 2020 2020 2020  i,.             
+00028670: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028680: 2020 2020 2020 6f62 6a65 6374 5f6e 616d        object_nam
+00028690: 653d 2766 6f6f 272c 0a20 2020 2020 2020  e='foo',.       
+000286a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000286b0: 2020 2020 2020 2020 2020 2020 636f 6e74              cont
+000286c0: 656e 7473 3d63 6f6e 7465 6e74 7329 0a20  ents=contents). 
+000286d0: 2020 2066 7061 7468 203d 2073 656c 662e     fpath = self.
+000286e0: 4372 6561 7465 5465 6d70 4669 6c65 2829  CreateTempFile()
+000286f0: 0a20 2020 2074 6573 745f 6361 6c6c 6261  .    test_callba
+00028700: 636b 5f66 696c 6520 3d20 7365 6c66 2e43  ck_file = self.C
+00028710: 7265 6174 6554 656d 7046 696c 6528 0a20  reateTempFile(. 
+00028720: 2020 2020 2020 2063 6f6e 7465 6e74 733d         contents=
+00028730: 7069 636b 6c65 2e64 756d 7073 2848 616c  pickle.dumps(Hal
+00028740: 7469 6e67 436f 7079 4361 6c6c 6261 636b  tingCopyCallback
+00028750: 4861 6e64 6c65 7228 4661 6c73 652c 2035  Handler(False, 5
+00028760: 2929 290a 0a20 2020 2062 6f74 6f5f 636f  )))..    boto_co
+00028770: 6e66 6967 5f66 6f72 5f74 6573 7420 3d20  nfig_for_test = 
+00028780: 5b28 2747 5355 7469 6c27 2c20 2772 6573  [('GSUtil', 'res
+00028790: 756d 6162 6c65 5f74 6872 6573 686f 6c64  umable_threshold
+000287a0: 272c 2073 7472 284f 4e45 5f4b 4942 2929  ', str(ONE_KIB))
+000287b0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+000287c0: 2020 2020 2020 2020 2020 2020 2020 2827                ('
+000287d0: 4753 5574 696c 272c 2027 6368 6563 6b5f  GSUtil', 'check_
+000287e0: 6861 7368 6573 272c 2027 6e65 7665 7227  hashes', 'never'
+000287f0: 295d 0a20 2020 2077 6974 6820 5365 7442  )].    with SetB
+00028800: 6f74 6f43 6f6e 6669 6746 6f72 5465 7374  otoConfigForTest
+00028810: 2862 6f74 6f5f 636f 6e66 6967 5f66 6f72  (boto_config_for
+00028820: 5f74 6573 7429 3a0a 2020 2020 2020 7374  _test):.      st
+00028830: 6465 7272 203d 2073 656c 662e 5275 6e47  derr = self.RunG
+00028840: 7355 7469 6c28 5b0a 2020 2020 2020 2020  sUtil([.        
+00028850: 2020 2763 7027 2c20 272d 2d74 6573 7463    'cp', '--testc
+00028860: 616c 6c62 6163 6b66 696c 6527 2c20 7465  allbackfile', te
+00028870: 7374 5f63 616c 6c62 6163 6b5f 6669 6c65  st_callback_file
+00028880: 2c0a 2020 2020 2020 2020 2020 7375 7269  ,.          suri
+00028890: 286f 626a 6563 745f 7572 6929 2c20 6670  (object_uri), fp
+000288a0: 6174 680a 2020 2020 2020 5d2c 0a20 2020  ath.      ],.   
+000288b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000288c0: 2020 2020 2020 2020 2020 2065 7870 6563             expec
+000288d0: 7465 645f 7374 6174 7573 3d31 2c0a 2020  ted_status=1,.  
+000288e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000288f0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00028900: 726e 5f73 7464 6572 723d 5472 7565 290a  rn_stderr=True).
+00028910: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+00028920: 7449 6e28 2741 7274 6966 6963 616c 6c79  tIn('Artifically
+00028930: 2068 616c 7469 6e67 2064 6f77 6e6c 6f61   halting downloa
+00028940: 642e 272c 2073 7464 6572 7229 0a20 2020  d.', stderr).   
+00028950: 2020 2073 7464 6572 7220 3d20 7365 6c66     stderr = self
+00028960: 2e52 756e 4773 5574 696c 285b 2763 7027  .RunGsUtil(['cp'
+00028970: 2c20 7375 7269 286f 626a 6563 745f 7572  , suri(object_ur
+00028980: 6929 2c20 6670 6174 685d 2c0a 2020 2020  i), fpath],.    
+00028990: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000289a0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+000289b0: 5f73 7464 6572 723d 5472 7565 290a 2020  _stderr=True).  
+000289c0: 2020 2020 7365 6c66 2e61 7373 6572 7449      self.assertI
+000289d0: 6e28 2752 6573 756d 696e 6720 646f 776e  n('Resuming down
+000289e0: 6c6f 6164 272c 2073 7464 6572 7229 0a20  load', stderr). 
+000289f0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+00028a00: 496e 2827 466f 756e 6420 6e6f 2068 6173  In('Found no has
+00028a10: 6865 7320 746f 2076 616c 6964 6174 6520  hes to validate 
+00028a20: 6f62 6a65 6374 2064 6f77 6e6c 6f61 6465  object downloade
+00028a30: 6427 2c20 7374 6465 7272 290a 2020 2020  d', stderr).    
+00028a40: 2020 7769 7468 206f 7065 6e28 6670 6174    with open(fpat
+00028a50: 682c 2027 7262 2729 2061 7320 663a 0a20  h, 'rb') as f:. 
+00028a60: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+00028a70: 7274 4571 7561 6c28 662e 7265 6164 2829  rtEqual(f.read()
+00028a80: 2c20 636f 6e74 656e 7473 2c20 2746 696c  , contents, 'Fil
+00028a90: 6520 636f 6e74 656e 7473 2064 6964 206e  e contents did n
+00028aa0: 6f74 206d 6174 6368 2e27 290a 0a20 2040  ot match.')..  @
+00028ab0: 536b 6970 466f 7253 3328 274e 6f20 7265  SkipForS3('No re
+00028ac0: 7375 6d61 626c 6520 7570 6c6f 6164 2073  sumable upload s
+00028ad0: 7570 706f 7274 2066 6f72 2053 332e 2729  upport for S3.')
+00028ae0: 0a20 2064 6566 2074 6573 745f 6370 5f72  .  def test_cp_r
+00028af0: 6573 756d 6162 6c65 5f75 706c 6f61 645f  esumable_upload_
+00028b00: 6275 636b 6574 5f64 656c 6574 6564 2873  bucket_deleted(s
+00028b10: 656c 6629 3a0a 2020 2020 2222 2254 6573  elf):.    """Tes
+00028b20: 7473 2074 6861 7420 6120 6e6f 7420 666f  ts that a not fo
+00028b30: 756e 6420 6578 6365 7074 696f 6e20 6973  und exception is
+00028b40: 2072 6169 7365 6420 6966 2062 7563 6b65   raised if bucke
+00028b50: 7420 6e6f 206c 6f6e 6765 7220 6578 6973  t no longer exis
+00028b60: 7473 2e22 2222 0a20 2020 2062 7563 6b65  ts.""".    bucke
+00028b70: 745f 7572 6920 3d20 7365 6c66 2e43 7265  t_uri = self.Cre
+00028b80: 6174 6542 7563 6b65 7428 290a 2020 2020  ateBucket().    
+00028b90: 6670 6174 6820 3d20 7365 6c66 2e43 7265  fpath = self.Cre
+00028ba0: 6174 6554 656d 7046 696c 6528 636f 6e74  ateTempFile(cont
+00028bb0: 656e 7473 3d62 2761 2720 2a20 3220 2a20  ents=b'a' * 2 * 
+00028bc0: 4f4e 455f 4b49 4229 0a20 2020 2062 6f74  ONE_KIB).    bot
+00028bd0: 6f5f 636f 6e66 6967 5f66 6f72 5f74 6573  o_config_for_tes
+00028be0: 7420 3d20 2827 4753 5574 696c 272c 2027  t = ('GSUtil', '
+00028bf0: 7265 7375 6d61 626c 655f 7468 7265 7368  resumable_thresh
+00028c00: 6f6c 6427 2c20 7374 7228 4f4e 455f 4b49  old', str(ONE_KI
+00028c10: 4229 290a 2020 2020 7465 7374 5f63 616c  B)).    test_cal
+00028c20: 6c62 6163 6b5f 6669 6c65 203d 2073 656c  lback_file = sel
+00028c30: 662e 4372 6561 7465 5465 6d70 4669 6c65  f.CreateTempFile
+00028c40: 2863 6f6e 7465 6e74 733d 7069 636b 6c65  (contents=pickle
+00028c50: 2e64 756d 7073 280a 2020 2020 2020 2020  .dumps(.        
+00028c60: 5f44 656c 6574 6542 7563 6b65 7454 6865  _DeleteBucketThe
+00028c70: 6e53 7461 7274 4f76 6572 436f 7079 4361  nStartOverCopyCa
+00028c80: 6c6c 6261 636b 4861 6e64 6c65 7228 352c  llbackHandler(5,
+00028c90: 2062 7563 6b65 745f 7572 6929 2929 0a0a   bucket_uri)))..
+00028ca0: 2020 2020 7769 7468 2053 6574 426f 746f      with SetBoto
+00028cb0: 436f 6e66 6967 466f 7254 6573 7428 5b62  ConfigForTest([b
+00028cc0: 6f74 6f5f 636f 6e66 6967 5f66 6f72 5f74  oto_config_for_t
+00028cd0: 6573 745d 293a 0a20 2020 2020 2073 7464  est]):.      std
+00028ce0: 6572 7220 3d20 7365 6c66 2e52 756e 4773  err = self.RunGs
+00028cf0: 5574 696c 285b 0a20 2020 2020 2020 2020  Util([.         
+00028d00: 2027 6370 272c 2027 2d2d 7465 7374 6361   'cp', '--testca
+00028d10: 6c6c 6261 636b 6669 6c65 272c 2074 6573  llbackfile', tes
+00028d20: 745f 6361 6c6c 6261 636b 5f66 696c 652c  t_callback_file,
+00028d30: 2066 7061 7468 2c0a 2020 2020 2020 2020   fpath,.        
+00028d40: 2020 7375 7269 2862 7563 6b65 745f 7572    suri(bucket_ur
+00028d50: 6929 0a20 2020 2020 205d 2c0a 2020 2020  i).      ],.    
+00028d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028d70: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00028d80: 5f73 7464 6572 723d 5472 7565 2c0a 2020  _stderr=True,.  
+00028d90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028da0: 2020 2020 2020 2020 2020 2020 6578 7065              expe
+00028db0: 6374 6564 5f73 7461 7475 733d 3129 0a20  cted_status=1). 
+00028dc0: 2020 2073 656c 662e 6173 7365 7274 496e     self.assertIn
+00028dd0: 2827 4465 6c65 7469 6e67 2062 7563 6b65  ('Deleting bucke
+00028de0: 7427 2c20 7374 6465 7272 290a 2020 2020  t', stderr).    
+00028df0: 7365 6c66 2e61 7373 6572 7449 6e28 2762  self.assertIn('b
+00028e00: 7563 6b65 7420 646f 6573 206e 6f74 2065  ucket does not e
+00028e10: 7869 7374 272c 2073 7464 6572 7229 0a0a  xist', stderr)..
+00028e20: 2020 4053 6b69 7046 6f72 5333 2827 4e6f    @SkipForS3('No
+00028e30: 2073 6c69 6365 6420 646f 776e 6c6f 6164   sliced download
+00028e40: 2073 7570 706f 7274 2066 6f72 2053 332e   support for S3.
+00028e50: 2729 0a20 2064 6566 2074 6573 745f 6370  ').  def test_cp
+00028e60: 5f73 6c69 6365 645f 646f 776e 6c6f 6164  _sliced_download
+00028e70: 2873 656c 6629 3a0a 2020 2020 2222 2254  (self):.    """T
+00028e80: 6573 7473 2074 6861 7420 736c 6963 6564  ests that sliced
+00028e90: 206f 626a 6563 7420 646f 776e 6c6f 6164   object download
+00028ea0: 2077 6f72 6b73 2069 6e20 7468 6520 6765   works in the ge
+00028eb0: 6e65 7261 6c20 6361 7365 2e22 2222 0a20  neral case.""". 
+00028ec0: 2020 2062 7563 6b65 745f 7572 6920 3d20     bucket_uri = 
+00028ed0: 7365 6c66 2e43 7265 6174 6542 7563 6b65  self.CreateBucke
+00028ee0: 7428 290a 2020 2020 6f62 6a65 6374 5f75  t().    object_u
+00028ef0: 7269 203d 2073 656c 662e 4372 6561 7465  ri = self.Create
+00028f00: 4f62 6a65 6374 2862 7563 6b65 745f 7572  Object(bucket_ur
+00028f10: 693d 6275 636b 6574 5f75 7269 2c0a 2020  i=bucket_uri,.  
+00028f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028f40: 206f 626a 6563 745f 6e61 6d65 3d27 666f   object_name='fo
+00028f50: 6f27 2c0a 2020 2020 2020 2020 2020 2020  o',.            
+00028f60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028f70: 2020 2020 2020 2063 6f6e 7465 6e74 733d         contents=
+00028f80: 6227 6162 6327 202a 204f 4e45 5f4b 4942  b'abc' * ONE_KIB
+00028f90: 290a 2020 2020 6670 6174 6820 3d20 7365  ).    fpath = se
+00028fa0: 6c66 2e43 7265 6174 6554 656d 7046 696c  lf.CreateTempFil
+00028fb0: 6528 290a 0a20 2020 2023 2046 6f72 6365  e()..    # Force
+00028fc0: 2066 6173 7420 6372 636d 6f64 2074 6f20   fast crcmod to 
+00028fd0: 7265 7475 726e 2054 7275 6520 746f 2074  return True to t
+00028fe0: 6573 7420 7468 6520 6261 7369 6320 736c  est the basic sl
+00028ff0: 6963 6564 2064 6f77 6e6c 6f61 640a 2020  iced download.  
+00029000: 2020 2320 7363 656e 6172 696f 2c20 656e    # scenario, en
+00029010: 7375 7269 6e67 2074 6861 7420 6966 2074  suring that if t
+00029020: 6865 2075 7365 7220 696e 7374 616c 6c73  he user installs
+00029030: 2063 7263 6d6f 642c 2069 7420 7769 6c6c   crcmod, it will
+00029040: 2077 6f72 6b2e 0a20 2020 2062 6f74 6f5f   work..    boto_
+00029050: 636f 6e66 6967 5f66 6f72 5f74 6573 7420  config_for_test 
+00029060: 3d20 5b0a 2020 2020 2020 2020 2827 4753  = [.        ('GS
+00029070: 5574 696c 272c 2027 7265 7375 6d61 626c  Util', 'resumabl
+00029080: 655f 7468 7265 7368 6f6c 6427 2c20 7374  e_threshold', st
+00029090: 7228 4f4e 455f 4b49 4229 292c 0a20 2020  r(ONE_KIB)),.   
+000290a0: 2020 2020 2028 2747 5355 7469 6c27 2c20       ('GSUtil', 
+000290b0: 2774 6573 745f 6173 7375 6d65 5f66 6173  'test_assume_fas
+000290c0: 745f 6372 636d 6f64 272c 2027 5472 7565  t_crcmod', 'True
+000290d0: 2729 2c0a 2020 2020 2020 2020 2827 4753  '),.        ('GS
+000290e0: 5574 696c 272c 2027 736c 6963 6564 5f6f  Util', 'sliced_o
+000290f0: 626a 6563 745f 646f 776e 6c6f 6164 5f74  bject_download_t
+00029100: 6872 6573 686f 6c64 272c 2073 7472 284f  hreshold', str(O
+00029110: 4e45 5f4b 4942 2929 2c0a 2020 2020 2020  NE_KIB)),.      
+00029120: 2020 2827 4753 5574 696c 272c 2027 736c    ('GSUtil', 'sl
+00029130: 6963 6564 5f6f 626a 6563 745f 646f 776e  iced_object_down
+00029140: 6c6f 6164 5f6d 6178 5f63 6f6d 706f 6e65  load_max_compone
+00029150: 6e74 7327 2c20 2733 2729 0a20 2020 205d  nts', '3').    ]
+00029160: 0a0a 2020 2020 7769 7468 2053 6574 426f  ..    with SetBo
+00029170: 746f 436f 6e66 6967 466f 7254 6573 7428  toConfigForTest(
+00029180: 626f 746f 5f63 6f6e 6669 675f 666f 725f  boto_config_for_
+00029190: 7465 7374 293a 0a20 2020 2020 2073 656c  test):.      sel
+000291a0: 662e 5275 6e47 7355 7469 6c28 5b27 6370  f.RunGsUtil(['cp
+000291b0: 272c 2073 7572 6928 6f62 6a65 6374 5f75  ', suri(object_u
+000291c0: 7269 292c 2066 7061 7468 5d29 0a0a 2020  ri), fpath])..  
+000291d0: 2020 2020 2320 4561 6368 2074 7261 636b      # Each track
+000291e0: 6572 2066 696c 6520 7368 6f75 6c64 2068  er file should h
+000291f0: 6176 6520 6265 656e 2064 656c 6574 6564  ave been deleted
+00029200: 2e0a 2020 2020 2020 7472 6163 6b65 725f  ..      tracker_
+00029210: 6669 6c65 6e61 6d65 7320 3d20 4765 7453  filenames = GetS
+00029220: 6c69 6365 6444 6f77 6e6c 6f61 6454 7261  licedDownloadTra
+00029230: 636b 6572 4669 6c65 5061 7468 7328 0a20  ckerFilePaths(. 
+00029240: 2020 2020 2020 2020 2053 746f 7261 6765           Storage
+00029250: 5572 6c46 726f 6d53 7472 696e 6728 6670  UrlFromString(fp
+00029260: 6174 6829 2c20 7365 6c66 2e74 6573 745f  ath), self.test_
+00029270: 6170 6929 0a20 2020 2020 2066 6f72 2074  api).      for t
+00029280: 7261 636b 6572 5f66 696c 656e 616d 6520  racker_filename 
+00029290: 696e 2074 7261 636b 6572 5f66 696c 656e  in tracker_filen
+000292a0: 616d 6573 3a0a 2020 2020 2020 2020 7365  ames:.        se
+000292b0: 6c66 2e61 7373 6572 7446 616c 7365 286f  lf.assertFalse(o
+000292c0: 732e 7061 7468 2e69 7366 696c 6528 7472  s.path.isfile(tr
+000292d0: 6163 6b65 725f 6669 6c65 6e61 6d65 2929  acker_filename))
+000292e0: 0a0a 2020 2020 2020 7769 7468 206f 7065  ..      with ope
+000292f0: 6e28 6670 6174 682c 2027 7262 2729 2061  n(fpath, 'rb') a
+00029300: 7320 663a 0a20 2020 2020 2020 2073 656c  s f:.        sel
+00029310: 662e 6173 7365 7274 4571 7561 6c28 662e  f.assertEqual(f.
+00029320: 7265 6164 2829 2c20 6227 6162 6327 202a  read(), b'abc' *
+00029330: 204f 4e45 5f4b 4942 2c20 2746 696c 6520   ONE_KIB, 'File 
+00029340: 636f 6e74 656e 7473 2064 6966 6665 7227  contents differ'
+00029350: 290a 0a20 2040 756e 6974 7465 7374 2e73  )..  @unittest.s
+00029360: 6b69 7055 6e6c 6573 7328 5573 696e 6743  kipUnless(UsingC
+00029370: 7263 6d6f 6445 7874 656e 7369 6f6e 2829  rcmodExtension()
+00029380: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00029390: 2020 2020 2020 2020 2027 536c 6963 6564           'Sliced
+000293a0: 2064 6f77 6e6c 6f61 6420 7265 7175 6972   download requir
+000293b0: 6573 2066 6173 7420 6372 636d 6f64 2e27  es fast crcmod.'
+000293c0: 290a 2020 4053 6b69 7046 6f72 5333 2827  ).  @SkipForS3('
+000293d0: 4e6f 2073 6c69 6365 6420 646f 776e 6c6f  No sliced downlo
+000293e0: 6164 2073 7570 706f 7274 2066 6f72 2053  ad support for S
+000293f0: 332e 2729 0a20 2064 6566 2074 6573 745f  3.').  def test_
+00029400: 6370 5f75 6e72 6573 756d 6162 6c65 5f73  cp_unresumable_s
+00029410: 6c69 6365 645f 646f 776e 6c6f 6164 2873  liced_download(s
+00029420: 656c 6629 3a0a 2020 2020 2222 2254 6573  elf):.    """Tes
+00029430: 7473 2073 6c69 6365 6420 646f 776e 6c6f  ts sliced downlo
+00029440: 6164 2077 6f72 6b73 2077 6865 6e20 7265  ad works when re
+00029450: 7375 6d61 6269 6c69 7479 2069 7320 6469  sumability is di
+00029460: 7361 626c 6564 2e22 2222 0a20 2020 2062  sabled.""".    b
+00029470: 7563 6b65 745f 7572 6920 3d20 7365 6c66  ucket_uri = self
+00029480: 2e43 7265 6174 6542 7563 6b65 7428 290a  .CreateBucket().
+00029490: 2020 2020 6f62 6a65 6374 5f75 7269 203d      object_uri =
+000294a0: 2073 656c 662e 4372 6561 7465 4f62 6a65   self.CreateObje
+000294b0: 6374 2862 7563 6b65 745f 7572 693d 6275  ct(bucket_uri=bu
+000294c0: 636b 6574 5f75 7269 2c0a 2020 2020 2020  cket_uri,.      
+000294d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000294e0: 2020 2020 2020 2020 2020 2020 206f 626a               obj
+000294f0: 6563 745f 6e61 6d65 3d27 666f 6f27 2c0a  ect_name='foo',.
+00029500: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00029510: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00029520: 2020 2063 6f6e 7465 6e74 733d 6227 6162     contents=b'ab
+00029530: 6364 2720 2a20 7365 6c66 2e68 616c 745f  cd' * self.halt_
+00029540: 7369 7a65 290a 2020 2020 6670 6174 6820  size).    fpath 
+00029550: 3d20 7365 6c66 2e43 7265 6174 6554 656d  = self.CreateTem
+00029560: 7046 696c 6528 290a 2020 2020 7465 7374  pFile().    test
+00029570: 5f63 616c 6c62 6163 6b5f 6669 6c65 203d  _callback_file =
+00029580: 2073 656c 662e 4372 6561 7465 5465 6d70   self.CreateTemp
+00029590: 4669 6c65 280a 2020 2020 2020 2020 636f  File(.        co
+000295a0: 6e74 656e 7473 3d70 6963 6b6c 652e 6475  ntents=pickle.du
+000295b0: 6d70 7328 4861 6c74 696e 6743 6f70 7943  mps(HaltingCopyC
+000295c0: 616c 6c62 6163 6b48 616e 646c 6572 2846  allbackHandler(F
+000295d0: 616c 7365 2c20 3529 2929 0a0a 2020 2020  alse, 5)))..    
+000295e0: 626f 746f 5f63 6f6e 6669 675f 666f 725f  boto_config_for_
+000295f0: 7465 7374 203d 205b 0a20 2020 2020 2020  test = [.       
+00029600: 2028 2747 5355 7469 6c27 2c20 2772 6573   ('GSUtil', 'res
+00029610: 756d 6162 6c65 5f74 6872 6573 686f 6c64  umable_threshold
+00029620: 272c 2073 7472 2873 656c 662e 6861 6c74  ', str(self.halt
+00029630: 5f73 697a 6520 2a20 3529 292c 0a20 2020  _size * 5)),.   
+00029640: 2020 2020 2028 2747 5355 7469 6c27 2c20       ('GSUtil', 
+00029650: 2773 6c69 6365 645f 6f62 6a65 6374 5f64  'sliced_object_d
+00029660: 6f77 6e6c 6f61 645f 7468 7265 7368 6f6c  ownload_threshol
+00029670: 6427 2c20 7374 7228 7365 6c66 2e68 616c  d', str(self.hal
+00029680: 745f 7369 7a65 2929 2c0a 2020 2020 2020  t_size)),.      
+00029690: 2020 2827 4753 5574 696c 272c 2027 736c    ('GSUtil', 'sl
+000296a0: 6963 6564 5f6f 626a 6563 745f 646f 776e  iced_object_down
+000296b0: 6c6f 6164 5f6d 6178 5f63 6f6d 706f 6e65  load_max_compone
+000296c0: 6e74 7327 2c20 2734 2729 0a20 2020 205d  nts', '4').    ]
+000296d0: 0a0a 2020 2020 7769 7468 2053 6574 426f  ..    with SetBo
+000296e0: 746f 436f 6e66 6967 466f 7254 6573 7428  toConfigForTest(
+000296f0: 626f 746f 5f63 6f6e 6669 675f 666f 725f  boto_config_for_
+00029700: 7465 7374 293a 0a20 2020 2020 2073 7464  test):.      std
+00029710: 6572 7220 3d20 7365 6c66 2e52 756e 4773  err = self.RunGs
+00029720: 5574 696c 285b 0a20 2020 2020 2020 2020  Util([.         
+00029730: 2027 6370 272c 2027 2d2d 7465 7374 6361   'cp', '--testca
+00029740: 6c6c 6261 636b 6669 6c65 272c 2074 6573  llbackfile', tes
+00029750: 745f 6361 6c6c 6261 636b 5f66 696c 652c  t_callback_file,
+00029760: 0a20 2020 2020 2020 2020 2073 7572 6928  .          suri(
+00029770: 6f62 6a65 6374 5f75 7269 292c 0a20 2020  object_uri),.   
+00029780: 2020 2020 2020 2073 7572 6928 6670 6174         suri(fpat
+00029790: 6829 0a20 2020 2020 205d 2c0a 2020 2020  h).      ],.    
+000297a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000297b0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+000297c0: 5f73 7464 6572 723d 5472 7565 2c0a 2020  _stderr=True,.  
 000297d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000297e0: 2020 2020 2020 7265 7475 726e 5f73 7464        return_std
-000297f0: 6572 723d 5472 7565 2c0a 2020 2020 2020  err=True,.      
-00029800: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029810: 2020 2020 2020 2020 6578 7065 6374 6564          expected
-00029820: 5f73 7461 7475 733d 3129 0a20 2020 2020  _status=1).     
-00029830: 2073 656c 662e 6173 7365 7274 496e 2827   self.assertIn('
-00029840: 5265 7375 6d69 6e67 2064 6f77 6e6c 6f61  Resuming downloa
-00029850: 6427 2c20 7374 6465 7272 290a 2020 2020  d', stderr).    
-00029860: 2020 7365 6c66 2e61 7373 6572 7449 6e28    self.assertIn(
-00029870: 2764 6f65 736e 5c27 7420 6d61 7463 6820  'doesn\'t match 
-00029880: 636c 6f75 642d 7375 7070 6c69 6564 2064  cloud-supplied d
-00029890: 6967 6573 7427 2c20 7374 6465 7272 290a  igest', stderr).
-000298a0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-000298b0: 7449 6e28 2748 6173 684d 6973 6d61 7463  tIn('HashMismatc
-000298c0: 6845 7863 6570 7469 6f6e 3a20 6372 6333  hException: crc3
-000298d0: 3263 272c 2073 7464 6572 7229 0a0a 2020  2c', stderr)..  
-000298e0: 2020 2020 2320 4561 6368 2074 7261 636b      # Each track
-000298f0: 6572 2066 696c 6520 7368 6f75 6c64 2068  er file should h
-00029900: 6176 6520 6265 656e 2064 656c 6574 6564  ave been deleted
-00029910: 2e0a 2020 2020 2020 7472 6163 6b65 725f  ..      tracker_
-00029920: 6669 6c65 6e61 6d65 7320 3d20 4765 7453  filenames = GetS
-00029930: 6c69 6365 6444 6f77 6e6c 6f61 6454 7261  licedDownloadTra
-00029940: 636b 6572 4669 6c65 5061 7468 7328 0a20  ckerFilePaths(. 
-00029950: 2020 2020 2020 2020 2053 746f 7261 6765           Storage
-00029960: 5572 6c46 726f 6d53 7472 696e 6728 6670  UrlFromString(fp
-00029970: 6174 6829 2c20 7365 6c66 2e74 6573 745f  ath), self.test_
-00029980: 6170 6929 0a20 2020 2020 2066 6f72 2074  api).      for t
-00029990: 7261 636b 6572 5f66 696c 656e 616d 6520  racker_filename 
-000299a0: 696e 2074 7261 636b 6572 5f66 696c 656e  in tracker_filen
-000299b0: 616d 6573 3a0a 2020 2020 2020 2020 7365  ames:.        se
-000299c0: 6c66 2e61 7373 6572 7446 616c 7365 286f  lf.assertFalse(o
-000299d0: 732e 7061 7468 2e69 7366 696c 6528 7472  s.path.isfile(tr
-000299e0: 6163 6b65 725f 6669 6c65 6e61 6d65 2929  acker_filename))
-000299f0: 0a0a 2020 2020 2020 2320 5465 6d70 6f72  ..      # Tempor
-00029a00: 6172 7920 6669 6c65 2073 686f 756c 6420  ary file should 
-00029a10: 6861 7665 2062 6565 6e20 6465 6c65 7465  have been delete
-00029a20: 6420 6475 6520 746f 2068 6173 6820 6d69  d due to hash mi
-00029a30: 736d 6174 6368 2e0a 2020 2020 2020 7365  smatch..      se
-00029a40: 6c66 2e61 7373 6572 7446 616c 7365 286f  lf.assertFalse(o
-00029a50: 732e 7061 7468 2e69 7366 696c 6528 6670  s.path.isfile(fp
-00029a60: 6174 6820 2b20 275f 2e67 7374 6d70 2729  ath + '_.gstmp')
-00029a70: 290a 2020 2020 2020 2320 4669 6e61 6c20  ).      # Final 
-00029a80: 6669 6c65 2073 686f 756c 6420 6e6f 7420  file should not 
-00029a90: 6578 6973 742e 0a20 2020 2020 2073 656c  exist..      sel
-00029aa0: 662e 6173 7365 7274 4661 6c73 6528 6f73  f.assertFalse(os
-00029ab0: 2e70 6174 682e 6973 6669 6c65 2866 7061  .path.isfile(fpa
-00029ac0: 7468 2929 0a0a 2020 4075 6e69 7474 6573  th))..  @unittes
-00029ad0: 742e 736b 6970 556e 6c65 7373 2855 7369  t.skipUnless(Usi
-00029ae0: 6e67 4372 636d 6f64 4578 7465 6e73 696f  ngCrcmodExtensio
-00029af0: 6e28 292c 0a20 2020 2020 2020 2020 2020  n(),.           
-00029b00: 2020 2020 2020 2020 2020 2020 2753 6c69              'Sli
-00029b10: 6365 6420 646f 776e 6c6f 6164 2072 6571  ced download req
-00029b20: 7569 7265 7320 6661 7374 2063 7263 6d6f  uires fast crcmo
-00029b30: 642e 2729 0a20 2040 536b 6970 466f 7253  d.').  @SkipForS
-00029b40: 3328 274e 6f20 736c 6963 6564 2064 6f77  3('No sliced dow
-00029b50: 6e6c 6f61 6420 7375 7070 6f72 7420 666f  nload support fo
-00029b60: 7220 5333 2e27 290a 2020 6465 6620 7465  r S3.').  def te
-00029b70: 7374 5f63 705f 736c 6963 6564 5f64 6f77  st_cp_sliced_dow
-00029b80: 6e6c 6f61 645f 636f 6d70 6f6e 656e 745f  nload_component_
-00029b90: 7369 7a65 5f63 6861 6e67 6564 2873 656c  size_changed(sel
-00029ba0: 6629 3a0a 2020 2020 2222 2254 6573 7473  f):.    """Tests
-00029bb0: 2073 6c69 6365 6420 646f 776e 6c6f 6164   sliced download
-00029bc0: 2064 6f65 736e 2774 2062 7265 616b 2077   doesn't break w
-00029bd0: 6865 6e20 7468 6520 626f 746f 2063 6f6e  hen the boto con
-00029be0: 6669 6720 6368 616e 6765 732e 0a0a 2020  fig changes...  
-00029bf0: 2020 4966 2074 6865 206e 756d 6265 7220    If the number 
-00029c00: 6f66 2063 6f6d 706f 6e65 6e74 7320 7573  of components us
-00029c10: 6564 2063 6861 6e67 6573 2063 726f 7373  ed changes cross
-00029c20: 2d70 726f 6365 7373 2c20 7468 6520 646f  -process, the do
-00029c30: 776e 6c6f 6164 2073 686f 756c 640a 2020  wnload should.  
-00029c40: 2020 6265 2072 6573 7461 7274 6564 2e0a    be restarted..
-00029c50: 2020 2020 2222 220a 2020 2020 6275 636b      """.    buck
-00029c60: 6574 5f75 7269 203d 2073 656c 662e 4372  et_uri = self.Cr
-00029c70: 6561 7465 4275 636b 6574 2829 0a20 2020  eateBucket().   
-00029c80: 206f 626a 6563 745f 7572 6920 3d20 7365   object_uri = se
-00029c90: 6c66 2e43 7265 6174 654f 626a 6563 7428  lf.CreateObject(
-00029ca0: 6275 636b 6574 5f75 7269 3d62 7563 6b65  bucket_uri=bucke
-00029cb0: 745f 7572 692c 0a20 2020 2020 2020 2020  t_uri,.         
-00029cc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029cd0: 2020 2020 2020 2020 2020 6f62 6a65 6374            object
-00029ce0: 5f6e 616d 653d 2766 6f6f 272c 0a20 2020  _name='foo',.   
-00029cf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029d00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029d10: 636f 6e74 656e 7473 3d62 2761 6263 6427  contents=b'abcd'
-00029d20: 202a 2073 656c 662e 6861 6c74 5f73 697a   * self.halt_siz
-00029d30: 6529 0a20 2020 2066 7061 7468 203d 2073  e).    fpath = s
-00029d40: 656c 662e 4372 6561 7465 5465 6d70 4669  elf.CreateTempFi
-00029d50: 6c65 2829 0a20 2020 2074 6573 745f 6361  le().    test_ca
-00029d60: 6c6c 6261 636b 5f66 696c 6520 3d20 7365  llback_file = se
-00029d70: 6c66 2e43 7265 6174 6554 656d 7046 696c  lf.CreateTempFil
-00029d80: 6528 0a20 2020 2020 2020 2063 6f6e 7465  e(.        conte
-00029d90: 6e74 733d 7069 636b 6c65 2e64 756d 7073  nts=pickle.dumps
-00029da0: 2848 616c 7469 6e67 436f 7079 4361 6c6c  (HaltingCopyCall
-00029db0: 6261 636b 4861 6e64 6c65 7228 4661 6c73  backHandler(Fals
-00029dc0: 652c 2035 2929 290a 0a20 2020 2062 6f74  e, 5)))..    bot
-00029dd0: 6f5f 636f 6e66 6967 5f66 6f72 5f74 6573  o_config_for_tes
-00029de0: 7420 3d20 5b0a 2020 2020 2020 2020 2827  t = [.        ('
-00029df0: 4753 5574 696c 272c 2027 7265 7375 6d61  GSUtil', 'resuma
-00029e00: 626c 655f 7468 7265 7368 6f6c 6427 2c20  ble_threshold', 
-00029e10: 7374 7228 7365 6c66 2e68 616c 745f 7369  str(self.halt_si
-00029e20: 7a65 2929 2c0a 2020 2020 2020 2020 2827  ze)),.        ('
-00029e30: 4753 5574 696c 272c 2027 736c 6963 6564  GSUtil', 'sliced
-00029e40: 5f6f 626a 6563 745f 646f 776e 6c6f 6164  _object_download
-00029e50: 5f74 6872 6573 686f 6c64 272c 2073 7472  _threshold', str
-00029e60: 2873 656c 662e 6861 6c74 5f73 697a 6529  (self.halt_size)
-00029e70: 292c 0a20 2020 2020 2020 2028 2747 5355  ),.        ('GSU
-00029e80: 7469 6c27 2c20 2773 6c69 6365 645f 6f62  til', 'sliced_ob
-00029e90: 6a65 6374 5f64 6f77 6e6c 6f61 645f 636f  ject_download_co
-00029ea0: 6d70 6f6e 656e 745f 7369 7a65 272c 0a20  mponent_size',. 
-00029eb0: 2020 2020 2020 2020 7374 7228 7365 6c66          str(self
-00029ec0: 2e68 616c 745f 7369 7a65 202f 2f20 3429  .halt_size // 4)
+000297e0: 2020 2020 2020 2020 2020 2020 6578 7065              expe
+000297f0: 6374 6564 5f73 7461 7475 733d 3129 0a20  cted_status=1). 
+00029800: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+00029810: 496e 2827 6e6f 7420 646f 776e 6c6f 6164  In('not download
+00029820: 6564 2073 7563 6365 7373 6675 6c6c 7927  ed successfully'
+00029830: 2c20 7374 6465 7272 290a 2020 2020 2020  , stderr).      
+00029840: 2320 5465 6d70 6f72 6172 7920 646f 776e  # Temporary down
+00029850: 6c6f 6164 2066 696c 6520 7368 6f75 6c64  load file should
+00029860: 2065 7869 7374 2e0a 2020 2020 2020 7365   exist..      se
+00029870: 6c66 2e61 7373 6572 7454 7275 6528 6f73  lf.assertTrue(os
+00029880: 2e70 6174 682e 6973 6669 6c65 2866 7061  .path.isfile(fpa
+00029890: 7468 202b 2027 5f2e 6773 746d 7027 2929  th + '_.gstmp'))
+000298a0: 0a0a 2020 2020 2020 2320 4e6f 2074 7261  ..      # No tra
+000298b0: 636b 6572 2066 696c 6573 2073 686f 756c  cker files shoul
+000298c0: 6420 6578 6973 742e 0a20 2020 2020 2074  d exist..      t
+000298d0: 7261 636b 6572 5f66 696c 656e 616d 6573  racker_filenames
+000298e0: 203d 2047 6574 536c 6963 6564 446f 776e   = GetSlicedDown
+000298f0: 6c6f 6164 5472 6163 6b65 7246 696c 6550  loadTrackerFileP
+00029900: 6174 6873 280a 2020 2020 2020 2020 2020  aths(.          
+00029910: 5374 6f72 6167 6555 726c 4672 6f6d 5374  StorageUrlFromSt
+00029920: 7269 6e67 2866 7061 7468 292c 2073 656c  ring(fpath), sel
+00029930: 662e 7465 7374 5f61 7069 290a 2020 2020  f.test_api).    
+00029940: 2020 666f 7220 7472 6163 6b65 725f 6669    for tracker_fi
+00029950: 6c65 6e61 6d65 2069 6e20 7472 6163 6b65  lename in tracke
+00029960: 725f 6669 6c65 6e61 6d65 733a 0a20 2020  r_filenames:.   
+00029970: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+00029980: 4661 6c73 6528 6f73 2e70 6174 682e 6973  False(os.path.is
+00029990: 6669 6c65 2874 7261 636b 6572 5f66 696c  file(tracker_fil
+000299a0: 656e 616d 6529 290a 0a20 2020 2023 2050  ename))..    # P
+000299b0: 6572 666f 726d 2074 6865 2065 6e74 6972  erform the entir
+000299c0: 6520 646f 776e 6c6f 6164 2c20 7769 7468  e download, with
+000299d0: 6f75 7420 7265 7375 6d69 6e67 2e0a 2020  out resuming..  
+000299e0: 2020 7769 7468 2053 6574 426f 746f 436f    with SetBotoCo
+000299f0: 6e66 6967 466f 7254 6573 7428 626f 746f  nfigForTest(boto
+00029a00: 5f63 6f6e 6669 675f 666f 725f 7465 7374  _config_for_test
+00029a10: 293a 0a20 2020 2020 2073 7464 6572 7220  ):.      stderr 
+00029a20: 3d20 7365 6c66 2e52 756e 4773 5574 696c  = self.RunGsUtil
+00029a30: 280a 2020 2020 2020 2020 2020 5b27 6370  (.          ['cp
+00029a40: 272c 2073 7572 6928 6f62 6a65 6374 5f75  ', suri(object_u
+00029a50: 7269 292c 2073 7572 6928 6670 6174 6829  ri), suri(fpath)
+00029a60: 5d2c 2072 6574 7572 6e5f 7374 6465 7272  ], return_stderr
+00029a70: 3d54 7275 6529 0a20 2020 2020 2073 656c  =True).      sel
+00029a80: 662e 6173 7365 7274 4e6f 7449 6e28 2752  f.assertNotIn('R
+00029a90: 6573 756d 696e 6720 646f 776e 6c6f 6164  esuming download
+00029aa0: 272c 2073 7464 6572 7229 0a20 2020 2020  ', stderr).     
+00029ab0: 2023 2054 656d 706f 7261 7279 2064 6f77   # Temporary dow
+00029ac0: 6e6c 6f61 6420 6669 6c65 2073 686f 756c  nload file shoul
+00029ad0: 6420 6861 7665 2062 6565 6e20 6465 6c65  d have been dele
+00029ae0: 7465 642e 0a20 2020 2020 2073 656c 662e  ted..      self.
+00029af0: 6173 7365 7274 4661 6c73 6528 6f73 2e70  assertFalse(os.p
+00029b00: 6174 682e 6973 6669 6c65 2866 7061 7468  ath.isfile(fpath
+00029b10: 202b 2027 5f2e 6773 746d 7027 2929 0a20   + '_.gstmp')). 
+00029b20: 2020 2020 2077 6974 6820 6f70 656e 2866       with open(f
+00029b30: 7061 7468 2c20 2772 6227 2920 6173 2066  path, 'rb') as f
+00029b40: 3a0a 2020 2020 2020 2020 7365 6c66 2e61  :.        self.a
+00029b50: 7373 6572 7445 7175 616c 2866 2e72 6561  ssertEqual(f.rea
+00029b60: 6428 292c 2062 2761 6263 6427 202a 2073  d(), b'abcd' * s
+00029b70: 656c 662e 6861 6c74 5f73 697a 652c 0a20  elf.halt_size,. 
+00029b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00029b90: 2020 2020 2020 2020 2746 696c 6520 636f          'File co
+00029ba0: 6e74 656e 7473 2064 6966 6665 7227 290a  ntents differ').
+00029bb0: 0a20 2040 756e 6974 7465 7374 2e73 6b69  .  @unittest.ski
+00029bc0: 7055 6e6c 6573 7328 5573 696e 6743 7263  pUnless(UsingCrc
+00029bd0: 6d6f 6445 7874 656e 7369 6f6e 2829 2c0a  modExtension(),.
+00029be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00029bf0: 2020 2020 2020 2027 536c 6963 6564 2064         'Sliced d
+00029c00: 6f77 6e6c 6f61 6420 7265 7175 6972 6573  ownload requires
+00029c10: 2066 6173 7420 6372 636d 6f64 2e27 290a   fast crcmod.').
+00029c20: 2020 4053 6b69 7046 6f72 5333 2827 4e6f    @SkipForS3('No
+00029c30: 2073 6c69 6365 6420 646f 776e 6c6f 6164   sliced download
+00029c40: 2073 7570 706f 7274 2066 6f72 2053 332e   support for S3.
+00029c50: 2729 0a20 2064 6566 2074 6573 745f 6370  ').  def test_cp
+00029c60: 5f73 6c69 6365 645f 646f 776e 6c6f 6164  _sliced_download
+00029c70: 5f72 6573 756d 6528 7365 6c66 293a 0a20  _resume(self):. 
+00029c80: 2020 2022 2222 5465 7374 7320 7468 6174     """Tests that
+00029c90: 2073 6c69 6365 6420 6f62 6a65 6374 2064   sliced object d
+00029ca0: 6f77 6e6c 6f61 6420 6973 2072 6573 756d  ownload is resum
+00029cb0: 6162 6c65 2e22 2222 0a20 2020 2062 7563  able.""".    buc
+00029cc0: 6b65 745f 7572 6920 3d20 7365 6c66 2e43  ket_uri = self.C
+00029cd0: 7265 6174 6542 7563 6b65 7428 290a 2020  reateBucket().  
+00029ce0: 2020 6f62 6a65 6374 5f75 7269 203d 2073    object_uri = s
+00029cf0: 656c 662e 4372 6561 7465 4f62 6a65 6374  elf.CreateObject
+00029d00: 2862 7563 6b65 745f 7572 693d 6275 636b  (bucket_uri=buck
+00029d10: 6574 5f75 7269 2c0a 2020 2020 2020 2020  et_uri,.        
+00029d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00029d30: 2020 2020 2020 2020 2020 206f 626a 6563             objec
+00029d40: 745f 6e61 6d65 3d27 666f 6f27 2c0a 2020  t_name='foo',.  
+00029d50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00029d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00029d70: 2063 6f6e 7465 6e74 733d 6227 6162 6327   contents=b'abc'
+00029d80: 202a 2073 656c 662e 6861 6c74 5f73 697a   * self.halt_siz
+00029d90: 6529 0a20 2020 2066 7061 7468 203d 2073  e).    fpath = s
+00029da0: 656c 662e 4372 6561 7465 5465 6d70 4669  elf.CreateTempFi
+00029db0: 6c65 2829 0a20 2020 2074 6573 745f 6361  le().    test_ca
+00029dc0: 6c6c 6261 636b 5f66 696c 6520 3d20 7365  llback_file = se
+00029dd0: 6c66 2e43 7265 6174 6554 656d 7046 696c  lf.CreateTempFil
+00029de0: 6528 0a20 2020 2020 2020 2063 6f6e 7465  e(.        conte
+00029df0: 6e74 733d 7069 636b 6c65 2e64 756d 7073  nts=pickle.dumps
+00029e00: 2848 616c 7469 6e67 436f 7079 4361 6c6c  (HaltingCopyCall
+00029e10: 6261 636b 4861 6e64 6c65 7228 4661 6c73  backHandler(Fals
+00029e20: 652c 2035 2929 290a 0a20 2020 2062 6f74  e, 5)))..    bot
+00029e30: 6f5f 636f 6e66 6967 5f66 6f72 5f74 6573  o_config_for_tes
+00029e40: 7420 3d20 5b0a 2020 2020 2020 2020 2827  t = [.        ('
+00029e50: 4753 5574 696c 272c 2027 7265 7375 6d61  GSUtil', 'resuma
+00029e60: 626c 655f 7468 7265 7368 6f6c 6427 2c20  ble_threshold', 
+00029e70: 7374 7228 7365 6c66 2e68 616c 745f 7369  str(self.halt_si
+00029e80: 7a65 2929 2c0a 2020 2020 2020 2020 2827  ze)),.        ('
+00029e90: 4753 5574 696c 272c 2027 736c 6963 6564  GSUtil', 'sliced
+00029ea0: 5f6f 626a 6563 745f 646f 776e 6c6f 6164  _object_download
+00029eb0: 5f74 6872 6573 686f 6c64 272c 2073 7472  _threshold', str
+00029ec0: 2873 656c 662e 6861 6c74 5f73 697a 6529  (self.halt_size)
 00029ed0: 292c 0a20 2020 2020 2020 2028 2747 5355  ),.        ('GSU
 00029ee0: 7469 6c27 2c20 2773 6c69 6365 645f 6f62  til', 'sliced_ob
 00029ef0: 6a65 6374 5f64 6f77 6e6c 6f61 645f 6d61  ject_download_ma
 00029f00: 785f 636f 6d70 6f6e 656e 7473 272c 2027  x_components', '
-00029f10: 3427 290a 2020 2020 5d0a 0a20 2020 2077  4').    ]..    w
+00029f10: 3327 290a 2020 2020 5d0a 0a20 2020 2077  3').    ]..    w
 00029f20: 6974 6820 5365 7442 6f74 6f43 6f6e 6669  ith SetBotoConfi
 00029f30: 6746 6f72 5465 7374 2862 6f74 6f5f 636f  gForTest(boto_co
 00029f40: 6e66 6967 5f66 6f72 5f74 6573 7429 3a0a  nfig_for_test):.
 00029f50: 2020 2020 2020 7374 6465 7272 203d 2073        stderr = s
 00029f60: 656c 662e 5275 6e47 7355 7469 6c28 5b0a  elf.RunGsUtil([.
 00029f70: 2020 2020 2020 2020 2020 2763 7027 2c20            'cp', 
 00029f80: 272d 2d74 6573 7463 616c 6c62 6163 6b66  '--testcallbackf
@@ -10754,2227 +10754,2677 @@
 0002a010: 3d54 7275 652c 0a20 2020 2020 2020 2020  =True,.         
 0002a020: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0002a030: 2020 2020 2065 7870 6563 7465 645f 7374       expected_st
 0002a040: 6174 7573 3d31 290a 2020 2020 2020 7365  atus=1).      se
 0002a050: 6c66 2e61 7373 6572 7449 6e28 276e 6f74  lf.assertIn('not
 0002a060: 2064 6f77 6e6c 6f61 6465 6420 7375 6363   downloaded succ
 0002a070: 6573 7366 756c 6c79 272c 2073 7464 6572  essfully', stder
-0002a080: 7229 0a0a 2020 2020 626f 746f 5f63 6f6e  r)..    boto_con
-0002a090: 6669 675f 666f 725f 7465 7374 203d 205b  fig_for_test = [
-0002a0a0: 0a20 2020 2020 2020 2028 2747 5355 7469  .        ('GSUti
-0002a0b0: 6c27 2c20 2772 6573 756d 6162 6c65 5f74  l', 'resumable_t
-0002a0c0: 6872 6573 686f 6c64 272c 2073 7472 2873  hreshold', str(s
-0002a0d0: 656c 662e 6861 6c74 5f73 697a 6529 292c  elf.halt_size)),
-0002a0e0: 0a20 2020 2020 2020 2028 2747 5355 7469  .        ('GSUti
-0002a0f0: 6c27 2c20 2773 6c69 6365 645f 6f62 6a65  l', 'sliced_obje
-0002a100: 6374 5f64 6f77 6e6c 6f61 645f 7468 7265  ct_download_thre
-0002a110: 7368 6f6c 6427 2c20 7374 7228 7365 6c66  shold', str(self
-0002a120: 2e68 616c 745f 7369 7a65 2929 2c0a 2020  .halt_size)),.  
-0002a130: 2020 2020 2020 2827 4753 5574 696c 272c        ('GSUtil',
-0002a140: 2027 736c 6963 6564 5f6f 626a 6563 745f   'sliced_object_
-0002a150: 646f 776e 6c6f 6164 5f63 6f6d 706f 6e65  download_compone
-0002a160: 6e74 5f73 697a 6527 2c0a 2020 2020 2020  nt_size',.      
-0002a170: 2020 2073 7472 2873 656c 662e 6861 6c74     str(self.halt
-0002a180: 5f73 697a 6520 2f2f 2032 2929 2c0a 2020  _size // 2)),.  
-0002a190: 2020 2020 2020 2827 4753 5574 696c 272c        ('GSUtil',
-0002a1a0: 2027 736c 6963 6564 5f6f 626a 6563 745f   'sliced_object_
-0002a1b0: 646f 776e 6c6f 6164 5f6d 6178 5f63 6f6d  download_max_com
-0002a1c0: 706f 6e65 6e74 7327 2c20 2732 2729 0a20  ponents', '2'). 
-0002a1d0: 2020 205d 0a0a 2020 2020 7769 7468 2053     ]..    with S
-0002a1e0: 6574 426f 746f 436f 6e66 6967 466f 7254  etBotoConfigForT
-0002a1f0: 6573 7428 626f 746f 5f63 6f6e 6669 675f  est(boto_config_
-0002a200: 666f 725f 7465 7374 293a 0a20 2020 2020  for_test):.     
-0002a210: 2073 7464 6572 7220 3d20 7365 6c66 2e52   stderr = self.R
-0002a220: 756e 4773 5574 696c 285b 2763 7027 2c20  unGsUtil(['cp', 
-0002a230: 7375 7269 286f 626a 6563 745f 7572 6929  suri(object_uri)
-0002a240: 2c20 6670 6174 685d 2c0a 2020 2020 2020  , fpath],.      
-0002a250: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a260: 2020 2020 2020 2020 7265 7475 726e 5f73          return_s
-0002a270: 7464 6572 723d 5472 7565 290a 2020 2020  tderr=True).    
-0002a280: 2020 7365 6c66 2e61 7373 6572 7449 6e28    self.assertIn(
-0002a290: 2753 6c69 6365 6420 646f 776e 6c6f 6164  'Sliced download
-0002a2a0: 2074 7261 636b 6572 2066 696c 6520 646f   tracker file do
-0002a2b0: 6573 6e5c 2774 206d 6174 6368 2027 2c20  esn\'t match ', 
-0002a2c0: 7374 6465 7272 290a 2020 2020 2020 7365  stderr).      se
-0002a2d0: 6c66 2e61 7373 6572 7449 6e28 2752 6573  lf.assertIn('Res
-0002a2e0: 7461 7274 696e 6720 646f 776e 6c6f 6164  tarting download
-0002a2f0: 2066 726f 6d20 7363 7261 7463 6827 2c20   from scratch', 
-0002a300: 7374 6465 7272 290a 2020 2020 2020 7365  stderr).      se
-0002a310: 6c66 2e61 7373 6572 744e 6f74 496e 2827  lf.assertNotIn('
-0002a320: 5265 7375 6d69 6e67 2064 6f77 6e6c 6f61  Resuming downloa
-0002a330: 6427 2c20 7374 6465 7272 290a 0a20 2040  d', stderr)..  @
-0002a340: 756e 6974 7465 7374 2e73 6b69 7055 6e6c  unittest.skipUnl
-0002a350: 6573 7328 5573 696e 6743 7263 6d6f 6445  ess(UsingCrcmodE
-0002a360: 7874 656e 7369 6f6e 2829 2c0a 2020 2020  xtension(),.    
-0002a370: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a380: 2020 2027 536c 6963 6564 2064 6f77 6e6c     'Sliced downl
-0002a390: 6f61 6420 7265 7175 6972 6573 2066 6173  oad requires fas
-0002a3a0: 7420 6372 636d 6f64 2e27 290a 2020 4053  t crcmod.').  @S
-0002a3b0: 6b69 7046 6f72 5333 2827 4e6f 2073 6c69  kipForS3('No sli
-0002a3c0: 6365 6420 646f 776e 6c6f 6164 2073 7570  ced download sup
-0002a3d0: 706f 7274 2066 6f72 2053 332e 2729 0a20  port for S3.'). 
-0002a3e0: 2064 6566 2074 6573 745f 6370 5f73 6c69   def test_cp_sli
-0002a3f0: 6365 645f 646f 776e 6c6f 6164 5f64 6973  ced_download_dis
-0002a400: 6162 6c65 645f 6372 6f73 735f 7072 6f63  abled_cross_proc
-0002a410: 6573 7328 7365 6c66 293a 0a20 2020 2022  ess(self):.    "
-0002a420: 2222 5465 7374 7320 7465 6d70 6f72 6172  ""Tests temporar
-0002a430: 7920 6669 6c65 7320 6172 6520 6e6f 7420  y files are not 
-0002a440: 6f72 7068 616e 6564 2069 6620 736c 6963  orphaned if slic
-0002a450: 6564 2064 6f77 6e6c 6f61 6420 6973 2064  ed download is d
-0002a460: 6973 6162 6c65 642e 0a0a 2020 2020 5370  isabled...    Sp
-0002a470: 6563 6966 6963 616c 6c79 2c20 7465 6d70  ecifically, temp
-0002a480: 6f72 6172 7920 6669 6c65 7320 7368 6f75  orary files shou
-0002a490: 6c64 2062 6520 6465 6c65 7465 6420 7768  ld be deleted wh
-0002a4a0: 656e 2074 6865 2063 6f72 7265 7370 6f6e  en the correspon
-0002a4b0: 6469 6e67 0a20 2020 206e 6f6e 2d73 6c69  ding.    non-sli
-0002a4c0: 6365 6420 646f 776e 6c6f 6164 2069 7320  ced download is 
-0002a4d0: 636f 6d70 6c65 7465 642e 0a20 2020 2022  completed..    "
-0002a4e0: 2222 0a20 2020 2062 7563 6b65 745f 7572  "".    bucket_ur
-0002a4f0: 6920 3d20 7365 6c66 2e43 7265 6174 6542  i = self.CreateB
-0002a500: 7563 6b65 7428 290a 2020 2020 6f62 6a65  ucket().    obje
-0002a510: 6374 5f75 7269 203d 2073 656c 662e 4372  ct_uri = self.Cr
-0002a520: 6561 7465 4f62 6a65 6374 2862 7563 6b65  eateObject(bucke
-0002a530: 745f 7572 693d 6275 636b 6574 5f75 7269  t_uri=bucket_uri
-0002a540: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-0002a550: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a560: 2020 2020 206f 626a 6563 745f 6e61 6d65       object_name
-0002a570: 3d27 666f 6f27 2c0a 2020 2020 2020 2020  ='foo',.        
-0002a580: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a590: 2020 2020 2020 2020 2020 2063 6f6e 7465             conte
-0002a5a0: 6e74 733d 6227 6162 6364 2720 2a20 7365  nts=b'abcd' * se
-0002a5b0: 6c66 2e68 616c 745f 7369 7a65 290a 2020  lf.halt_size).  
-0002a5c0: 2020 6670 6174 6820 3d20 7365 6c66 2e43    fpath = self.C
-0002a5d0: 7265 6174 6554 656d 7046 696c 6528 290a  reateTempFile().
-0002a5e0: 2020 2020 7465 7374 5f63 616c 6c62 6163      test_callbac
-0002a5f0: 6b5f 6669 6c65 203d 2073 656c 662e 4372  k_file = self.Cr
-0002a600: 6561 7465 5465 6d70 4669 6c65 280a 2020  eateTempFile(.  
-0002a610: 2020 2020 2020 636f 6e74 656e 7473 3d70        contents=p
-0002a620: 6963 6b6c 652e 6475 6d70 7328 4861 6c74  ickle.dumps(Halt
-0002a630: 696e 6743 6f70 7943 616c 6c62 6163 6b48  ingCopyCallbackH
-0002a640: 616e 646c 6572 2846 616c 7365 2c20 3529  andler(False, 5)
-0002a650: 2929 0a0a 2020 2020 626f 746f 5f63 6f6e  ))..    boto_con
-0002a660: 6669 675f 666f 725f 7465 7374 203d 205b  fig_for_test = [
-0002a670: 0a20 2020 2020 2020 2028 2747 5355 7469  .        ('GSUti
-0002a680: 6c27 2c20 2772 6573 756d 6162 6c65 5f74  l', 'resumable_t
-0002a690: 6872 6573 686f 6c64 272c 2073 7472 2873  hreshold', str(s
-0002a6a0: 656c 662e 6861 6c74 5f73 697a 6529 292c  elf.halt_size)),
-0002a6b0: 0a20 2020 2020 2020 2028 2747 5355 7469  .        ('GSUti
-0002a6c0: 6c27 2c20 2773 6c69 6365 645f 6f62 6a65  l', 'sliced_obje
-0002a6d0: 6374 5f64 6f77 6e6c 6f61 645f 7468 7265  ct_download_thre
-0002a6e0: 7368 6f6c 6427 2c20 7374 7228 7365 6c66  shold', str(self
-0002a6f0: 2e68 616c 745f 7369 7a65 2929 2c0a 2020  .halt_size)),.  
-0002a700: 2020 2020 2020 2827 4753 5574 696c 272c        ('GSUtil',
-0002a710: 2027 736c 6963 6564 5f6f 626a 6563 745f   'sliced_object_
-0002a720: 646f 776e 6c6f 6164 5f6d 6178 5f63 6f6d  download_max_com
-0002a730: 706f 6e65 6e74 7327 2c20 2734 2729 0a20  ponents', '4'). 
-0002a740: 2020 205d 0a0a 2020 2020 7769 7468 2053     ]..    with S
-0002a750: 6574 426f 746f 436f 6e66 6967 466f 7254  etBotoConfigForT
-0002a760: 6573 7428 626f 746f 5f63 6f6e 6669 675f  est(boto_config_
-0002a770: 666f 725f 7465 7374 293a 0a20 2020 2020  for_test):.     
-0002a780: 2073 7464 6572 7220 3d20 7365 6c66 2e52   stderr = self.R
-0002a790: 756e 4773 5574 696c 285b 0a20 2020 2020  unGsUtil([.     
-0002a7a0: 2020 2020 2027 6370 272c 2027 2d2d 7465       'cp', '--te
-0002a7b0: 7374 6361 6c6c 6261 636b 6669 6c65 272c  stcallbackfile',
-0002a7c0: 2074 6573 745f 6361 6c6c 6261 636b 5f66   test_callback_f
-0002a7d0: 696c 652c 0a20 2020 2020 2020 2020 2073  ile,.          s
-0002a7e0: 7572 6928 6f62 6a65 6374 5f75 7269 292c  uri(object_uri),
-0002a7f0: 0a20 2020 2020 2020 2020 2073 7572 6928  .          suri(
-0002a800: 6670 6174 6829 0a20 2020 2020 205d 2c0a  fpath).      ],.
-0002a810: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a820: 2020 2020 2020 2020 2020 2020 2020 7265                re
-0002a830: 7475 726e 5f73 7464 6572 723d 5472 7565  turn_stderr=True
-0002a840: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-0002a850: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a860: 6578 7065 6374 6564 5f73 7461 7475 733d  expected_status=
-0002a870: 3129 0a20 2020 2020 2073 656c 662e 6173  1).      self.as
-0002a880: 7365 7274 496e 2827 6e6f 7420 646f 776e  sertIn('not down
-0002a890: 6c6f 6164 6564 2073 7563 6365 7373 6675  loaded successfu
-0002a8a0: 6c6c 7927 2c20 7374 6465 7272 290a 2020  lly', stderr).  
-0002a8b0: 2020 2020 2320 5465 6d70 6f72 6172 7920      # Temporary 
-0002a8c0: 646f 776e 6c6f 6164 2066 696c 6520 7368  download file sh
-0002a8d0: 6f75 6c64 2065 7869 7374 2e0a 2020 2020  ould exist..    
-0002a8e0: 2020 7365 6c66 2e61 7373 6572 7454 7275    self.assertTru
-0002a8f0: 6528 6f73 2e70 6174 682e 6973 6669 6c65  e(os.path.isfile
-0002a900: 2866 7061 7468 202b 2027 5f2e 6773 746d  (fpath + '_.gstm
-0002a910: 7027 2929 0a0a 2020 2020 2020 2320 4561  p'))..      # Ea
-0002a920: 6368 2074 7261 636b 6572 2066 696c 6520  ch tracker file 
-0002a930: 7368 6f75 6c64 2065 7869 7374 2e0a 2020  should exist..  
-0002a940: 2020 2020 7472 6163 6b65 725f 6669 6c65      tracker_file
-0002a950: 6e61 6d65 7320 3d20 4765 7453 6c69 6365  names = GetSlice
-0002a960: 6444 6f77 6e6c 6f61 6454 7261 636b 6572  dDownloadTracker
-0002a970: 4669 6c65 5061 7468 7328 0a20 2020 2020  FilePaths(.     
-0002a980: 2020 2020 2053 746f 7261 6765 5572 6c46       StorageUrlF
-0002a990: 726f 6d53 7472 696e 6728 6670 6174 6829  romString(fpath)
-0002a9a0: 2c20 7365 6c66 2e74 6573 745f 6170 6929  , self.test_api)
-0002a9b0: 0a20 2020 2020 2066 6f72 2074 7261 636b  .      for track
-0002a9c0: 6572 5f66 696c 656e 616d 6520 696e 2074  er_filename in t
-0002a9d0: 7261 636b 6572 5f66 696c 656e 616d 6573  racker_filenames
-0002a9e0: 3a0a 2020 2020 2020 2020 7365 6c66 2e61  :.        self.a
-0002a9f0: 7373 6572 7454 7275 6528 6f73 2e70 6174  ssertTrue(os.pat
-0002aa00: 682e 6973 6669 6c65 2874 7261 636b 6572  h.isfile(tracker
-0002aa10: 5f66 696c 656e 616d 6529 290a 0a20 2020  _filename))..   
-0002aa20: 2023 2044 6973 6162 6c65 2073 6c69 6365   # Disable slice
-0002aa30: 6420 646f 776e 6c6f 6164 7320 6279 2069  d downloads by i
-0002aa40: 6e63 7265 6173 696e 6720 7468 6520 7468  ncreasing the th
-0002aa50: 7265 7368 6f6c 640a 2020 2020 626f 746f  reshold.    boto
-0002aa60: 5f63 6f6e 6669 675f 666f 725f 7465 7374  _config_for_test
-0002aa70: 203d 205b 0a20 2020 2020 2020 2028 2747   = [.        ('G
-0002aa80: 5355 7469 6c27 2c20 2772 6573 756d 6162  SUtil', 'resumab
-0002aa90: 6c65 5f74 6872 6573 686f 6c64 272c 2073  le_threshold', s
-0002aaa0: 7472 2873 656c 662e 6861 6c74 5f73 697a  tr(self.halt_siz
-0002aab0: 6529 292c 0a20 2020 2020 2020 2028 2747  e)),.        ('G
-0002aac0: 5355 7469 6c27 2c20 2773 6c69 6365 645f  SUtil', 'sliced_
-0002aad0: 6f62 6a65 6374 5f64 6f77 6e6c 6f61 645f  object_download_
-0002aae0: 7468 7265 7368 6f6c 6427 2c20 7374 7228  threshold', str(
-0002aaf0: 7365 6c66 2e68 616c 745f 7369 7a65 202a  self.halt_size *
-0002ab00: 2035 2929 2c0a 2020 2020 2020 2020 2827   5)),.        ('
-0002ab10: 4753 5574 696c 272c 2027 736c 6963 6564  GSUtil', 'sliced
-0002ab20: 5f6f 626a 6563 745f 646f 776e 6c6f 6164  _object_download
-0002ab30: 5f6d 6178 5f63 6f6d 706f 6e65 6e74 7327  _max_components'
-0002ab40: 2c20 2734 2729 0a20 2020 205d 0a0a 2020  , '4').    ]..  
-0002ab50: 2020 7769 7468 2053 6574 426f 746f 436f    with SetBotoCo
-0002ab60: 6e66 6967 466f 7254 6573 7428 626f 746f  nfigForTest(boto
-0002ab70: 5f63 6f6e 6669 675f 666f 725f 7465 7374  _config_for_test
-0002ab80: 293a 0a20 2020 2020 2073 7464 6572 7220  ):.      stderr 
-0002ab90: 3d20 7365 6c66 2e52 756e 4773 5574 696c  = self.RunGsUtil
-0002aba0: 285b 2763 7027 2c20 7375 7269 286f 626a  (['cp', suri(obj
-0002abb0: 6563 745f 7572 6929 2c20 6670 6174 685d  ect_uri), fpath]
-0002abc0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-0002abd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002abe0: 7265 7475 726e 5f73 7464 6572 723d 5472  return_stderr=Tr
-0002abf0: 7565 290a 2020 2020 2020 7365 6c66 2e61  ue).      self.a
-0002ac00: 7373 6572 744e 6f74 496e 2827 5265 7375  ssertNotIn('Resu
-0002ac10: 6d69 6e67 2064 6f77 6e6c 6f61 6427 2c20  ming download', 
-0002ac20: 7374 6465 7272 290a 2020 2020 2020 2320  stderr).      # 
-0002ac30: 5465 6d70 6f72 6172 7920 646f 776e 6c6f  Temporary downlo
-0002ac40: 6164 2066 696c 6520 7368 6f75 6c64 2068  ad file should h
-0002ac50: 6176 6520 6265 656e 2064 656c 6574 6564  ave been deleted
-0002ac60: 2e0a 2020 2020 2020 7365 6c66 2e61 7373  ..      self.ass
-0002ac70: 6572 7446 616c 7365 286f 732e 7061 7468  ertFalse(os.path
-0002ac80: 2e69 7366 696c 6528 6670 6174 6820 2b20  .isfile(fpath + 
-0002ac90: 275f 2e67 7374 6d70 2729 290a 0a20 2020  '_.gstmp'))..   
-0002aca0: 2020 2023 2045 6163 6820 7472 6163 6b65     # Each tracke
-0002acb0: 7220 6669 6c65 2073 686f 756c 6420 6861  r file should ha
-0002acc0: 7665 2062 6565 6e20 6465 6c65 7465 642e  ve been deleted.
-0002acd0: 0a20 2020 2020 2066 6f72 2074 7261 636b  .      for track
-0002ace0: 6572 5f66 696c 656e 616d 6520 696e 2074  er_filename in t
-0002acf0: 7261 636b 6572 5f66 696c 656e 616d 6573  racker_filenames
-0002ad00: 3a0a 2020 2020 2020 2020 7365 6c66 2e61  :.        self.a
-0002ad10: 7373 6572 7446 616c 7365 286f 732e 7061  ssertFalse(os.pa
-0002ad20: 7468 2e69 7366 696c 6528 7472 6163 6b65  th.isfile(tracke
-0002ad30: 725f 6669 6c65 6e61 6d65 2929 0a20 2020  r_filename)).   
-0002ad40: 2020 2077 6974 6820 6f70 656e 2866 7061     with open(fpa
-0002ad50: 7468 2c20 2772 6227 2920 6173 2066 3a0a  th, 'rb') as f:.
-0002ad60: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-0002ad70: 6572 7445 7175 616c 2866 2e72 6561 6428  ertEqual(f.read(
-0002ad80: 292c 2062 2761 6263 6427 202a 2073 656c  ), b'abcd' * sel
-0002ad90: 662e 6861 6c74 5f73 697a 6529 0a0a 2020  f.halt_size)..  
-0002ada0: 4053 6b69 7046 6f72 5333 2827 4e6f 2072  @SkipForS3('No r
-0002adb0: 6573 756d 6162 6c65 2075 706c 6f61 6420  esumable upload 
-0002adc0: 7375 7070 6f72 7420 666f 7220 5333 2e27  support for S3.'
-0002add0: 290a 2020 6465 6620 7465 7374 5f63 705f  ).  def test_cp_
-0002ade0: 7265 7375 6d61 626c 655f 7570 6c6f 6164  resumable_upload
-0002adf0: 5f73 7461 7274 5f6f 7665 725f 6874 7470  _start_over_http
-0002ae00: 5f65 7272 6f72 2873 656c 6629 3a0a 2020  _error(self):.  
-0002ae10: 2020 666f 7220 7374 6172 745f 6f76 6572    for start_over
-0002ae20: 5f65 7272 6f72 2069 6e20 280a 2020 2020  _error in (.    
-0002ae30: 2020 2020 3430 332c 2020 2320 4966 2075      403,  # If u
-0002ae40: 7365 7220 646f 6573 6e27 7420 6861 7665  ser doesn't have
-0002ae50: 2073 746f 7261 6765 2e62 7563 6b65 7473   storage.buckets
-0002ae60: 2e67 6574 2061 6363 6573 7320 746f 2064  .get access to d
-0002ae70: 6573 7420 6275 636b 6574 2e0a 2020 2020  est bucket..    
-0002ae80: 2020 2020 3430 342c 2020 2320 4966 2074      404,  # If t
-0002ae90: 6865 2064 6573 7420 6275 636b 6574 2065  he dest bucket e
-0002aea0: 7869 7374 732c 2062 7574 2074 6865 2064  xists, but the d
-0002aeb0: 6573 7420 6f62 6a65 6374 2064 6f65 7320  est object does 
-0002aec0: 6e6f 742e 0a20 2020 2020 2020 2034 3130  not..        410
-0002aed0: 293a 2020 2320 4966 2074 6865 2073 6572  ):  # If the ser
-0002aee0: 7669 6365 2074 656c 6c73 2075 7320 746f  vice tells us to
-0002aef0: 2072 6573 7461 7274 2074 6865 2075 706c   restart the upl
-0002af00: 6f61 6420 6672 6f6d 2073 6372 6174 6368  oad from scratch
-0002af10: 2e0a 2020 2020 2020 7365 6c66 2e73 7461  ..      self.sta
-0002af20: 7274 5f6f 7665 725f 6572 726f 725f 7465  rt_over_error_te
-0002af30: 7374 5f68 656c 7065 7228 7374 6172 745f  st_helper(start_
-0002af40: 6f76 6572 5f65 7272 6f72 290a 0a20 2064  over_error)..  d
-0002af50: 6566 2073 7461 7274 5f6f 7665 725f 6572  ef start_over_er
-0002af60: 726f 725f 7465 7374 5f68 656c 7065 7228  ror_test_helper(
-0002af70: 7365 6c66 2c20 6874 7470 5f65 7272 6f72  self, http_error
-0002af80: 5f6e 756d 293a 0a20 2020 2062 7563 6b65  _num):.    bucke
-0002af90: 745f 7572 6920 3d20 7365 6c66 2e43 7265  t_uri = self.Cre
-0002afa0: 6174 6542 7563 6b65 7428 290a 2020 2020  ateBucket().    
-0002afb0: 2320 5468 6520 6f62 6a65 6374 2063 6f6e  # The object con
-0002afc0: 7465 6e74 7320 6e65 6564 2074 6f20 6265  tents need to be
-0002afd0: 2066 6169 726c 7920 6c61 7267 6520 746f   fairly large to
-0002afe0: 2061 766f 6964 2074 6865 2072 6163 6520   avoid the race 
-0002aff0: 636f 6e64 6974 696f 6e0a 2020 2020 2320  condition.    # 
-0002b000: 7768 6572 6520 7468 6520 636f 6e74 656e  where the conten
-0002b010: 7473 2066 696e 6973 6820 7570 6c6f 6164  ts finish upload
-0002b020: 696e 6720 6265 666f 7265 2077 6520 6172  ing before we ar
-0002b030: 7469 6669 6361 6c6c 7920 6861 6c74 2074  tifically halt t
-0002b040: 6865 2063 6f70 792e 0a20 2020 2072 616e  he copy..    ran
-0002b050: 645f 6368 6172 7320 3d20 6765 745f 7261  d_chars = get_ra
-0002b060: 6e64 6f6d 5f61 7363 6969 5f63 6861 7273  ndom_ascii_chars
-0002b070: 2873 697a 653d 284f 4e45 5f4d 4942 202a  (size=(ONE_MIB *
-0002b080: 2034 2929 0a20 2020 2066 7061 7468 203d   4)).    fpath =
-0002b090: 2073 656c 662e 4372 6561 7465 5465 6d70   self.CreateTemp
-0002b0a0: 4669 6c65 2863 6f6e 7465 6e74 733d 7261  File(contents=ra
-0002b0b0: 6e64 5f63 6861 7273 290a 2020 2020 626f  nd_chars).    bo
-0002b0c0: 746f 5f63 6f6e 6669 675f 666f 725f 7465  to_config_for_te
-0002b0d0: 7374 203d 2028 2747 5355 7469 6c27 2c20  st = ('GSUtil', 
-0002b0e0: 2772 6573 756d 6162 6c65 5f74 6872 6573  'resumable_thres
-0002b0f0: 686f 6c64 272c 2073 7472 284f 4e45 5f4b  hold', str(ONE_K
-0002b100: 4942 2929 0a20 2020 2069 6620 7365 6c66  IB)).    if self
-0002b110: 2e74 6573 745f 6170 6920 3d3d 2041 7069  .test_api == Api
-0002b120: 5365 6c65 6374 6f72 2e4a 534f 4e3a 0a20  Selector.JSON:. 
-0002b130: 2020 2020 2074 6573 745f 6361 6c6c 6261       test_callba
-0002b140: 636b 5f66 696c 6520 3d20 7365 6c66 2e43  ck_file = self.C
-0002b150: 7265 6174 6554 656d 7046 696c 6528 0a20  reateTempFile(. 
-0002b160: 2020 2020 2020 2020 2063 6f6e 7465 6e74           content
-0002b170: 733d 7069 636b 6c65 2e64 756d 7073 285f  s=pickle.dumps(_
-0002b180: 4a53 4f4e 466f 7263 6548 5454 5045 7272  JSONForceHTTPErr
-0002b190: 6f72 436f 7079 4361 6c6c 6261 636b 4861  orCopyCallbackHa
-0002b1a0: 6e64 6c65 7228 352c 2034 3034 2929 290a  ndler(5, 404))).
-0002b1b0: 2020 2020 656c 6966 2073 656c 662e 7465      elif self.te
-0002b1c0: 7374 5f61 7069 203d 3d20 4170 6953 656c  st_api == ApiSel
-0002b1d0: 6563 746f 722e 584d 4c3a 0a20 2020 2020  ector.XML:.     
-0002b1e0: 2074 6573 745f 6361 6c6c 6261 636b 5f66   test_callback_f
-0002b1f0: 696c 6520 3d20 7365 6c66 2e43 7265 6174  ile = self.Creat
-0002b200: 6554 656d 7046 696c 6528 636f 6e74 656e  eTempFile(conten
-0002b210: 7473 3d70 6963 6b6c 652e 6475 6d70 7328  ts=pickle.dumps(
-0002b220: 0a20 2020 2020 2020 2020 205f 584d 4c52  .          _XMLR
-0002b230: 6573 756d 6162 6c65 5570 6c6f 6164 5374  esumableUploadSt
-0002b240: 6172 744f 7665 7243 6f70 7943 616c 6c62  artOverCopyCallb
-0002b250: 6163 6b48 616e 646c 6572 2835 2929 290a  ackHandler(5))).
-0002b260: 0a20 2020 2077 6974 6820 5365 7442 6f74  .    with SetBot
-0002b270: 6f43 6f6e 6669 6746 6f72 5465 7374 285b  oConfigForTest([
-0002b280: 626f 746f 5f63 6f6e 6669 675f 666f 725f  boto_config_for_
-0002b290: 7465 7374 5d29 3a0a 2020 2020 2020 7374  test]):.      st
-0002b2a0: 6465 7272 203d 2073 656c 662e 5275 6e47  derr = self.RunG
-0002b2b0: 7355 7469 6c28 5b0a 2020 2020 2020 2020  sUtil([.        
-0002b2c0: 2020 2763 7027 2c20 272d 2d74 6573 7463    'cp', '--testc
-0002b2d0: 616c 6c62 6163 6b66 696c 6527 2c20 7465  allbackfile', te
-0002b2e0: 7374 5f63 616c 6c62 6163 6b5f 6669 6c65  st_callback_file
-0002b2f0: 2c20 6670 6174 682c 0a20 2020 2020 2020  , fpath,.       
-0002b300: 2020 2073 7572 6928 6275 636b 6574 5f75     suri(bucket_u
-0002b310: 7269 290a 2020 2020 2020 5d2c 0a20 2020  ri).      ],.   
-0002b320: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b330: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0002b340: 6e5f 7374 6465 7272 3d54 7275 6529 0a20  n_stderr=True). 
-0002b350: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-0002b360: 496e 2827 5265 7374 6172 7469 6e67 2075  In('Restarting u
-0002b370: 706c 6f61 6420 6f66 272c 2073 7464 6572  pload of', stder
-0002b380: 7229 0a0a 2020 6465 6620 7465 7374 5f63  r)..  def test_c
-0002b390: 705f 6d69 6e75 735f 6328 7365 6c66 293a  p_minus_c(self):
-0002b3a0: 0a20 2020 2062 7563 6b65 745f 7572 6920  .    bucket_uri 
-0002b3b0: 3d20 7365 6c66 2e43 7265 6174 6542 7563  = self.CreateBuc
-0002b3c0: 6b65 7428 290a 2020 2020 6f62 6a65 6374  ket().    object
-0002b3d0: 5f75 7269 203d 2073 656c 662e 4372 6561  _uri = self.Crea
-0002b3e0: 7465 4f62 6a65 6374 2862 7563 6b65 745f  teObject(bucket_
-0002b3f0: 7572 693d 6275 636b 6574 5f75 7269 2c0a  uri=bucket_uri,.
-0002b400: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b410: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b420: 2020 206f 626a 6563 745f 6e61 6d65 3d27     object_name='
-0002b430: 666f 6f27 2c0a 2020 2020 2020 2020 2020  foo',.          
-0002b440: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b450: 2020 2020 2020 2020 2063 6f6e 7465 6e74           content
-0002b460: 733d 6227 666f 6f27 290a 2020 2020 7365  s=b'foo').    se
-0002b470: 6c66 2e52 756e 4773 5574 696c 285b 0a20  lf.RunGsUtil([. 
-0002b480: 2020 2020 2020 2027 6370 272c 2027 2d63         'cp', '-c
-0002b490: 272c 0a20 2020 2020 2020 2073 7572 6928  ',.        suri(
-0002b4a0: 6275 636b 6574 5f75 7269 2920 2b20 272f  bucket_uri) + '/
-0002b4b0: 666f 6f32 272c 0a20 2020 2020 2020 2073  foo2',.        s
-0002b4c0: 7572 6928 6f62 6a65 6374 5f75 7269 292c  uri(object_uri),
-0002b4d0: 0a20 2020 2020 2020 2073 7572 6928 6275  .        suri(bu
-0002b4e0: 636b 6574 5f75 7269 2920 2b20 272f 6469  cket_uri) + '/di
-0002b4f0: 722f 270a 2020 2020 5d2c 0a20 2020 2020  r/'.    ],.     
-0002b500: 2020 2020 2020 2020 2020 2020 2020 6578                ex
-0002b510: 7065 6374 6564 5f73 7461 7475 733d 3129  pected_status=1)
-0002b520: 0a20 2020 2073 656c 662e 5275 6e47 7355  .    self.RunGsU
-0002b530: 7469 6c28 5b27 7374 6174 272c 2027 2573  til(['stat', '%s
-0002b540: 2f64 6972 2f66 6f6f 2720 2520 7375 7269  /dir/foo' % suri
-0002b550: 2862 7563 6b65 745f 7572 6929 5d2c 2066  (bucket_uri)], f
-0002b560: 6f72 6365 5f67 7375 7469 6c3d 5472 7565  orce_gsutil=True
-0002b570: 290a 0a20 2064 6566 2074 6573 745f 7265  )..  def test_re
-0002b580: 7772 6974 655f 6370 2873 656c 6629 3a0a  write_cp(self):.
-0002b590: 2020 2020 2222 2254 6573 7473 2074 6865      """Tests the
-0002b5a0: 204a 534f 4e20 5265 7772 6974 6520 4150   JSON Rewrite AP
-0002b5b0: 492e 2222 220a 2020 2020 6966 2073 656c  I.""".    if sel
-0002b5c0: 662e 7465 7374 5f61 7069 203d 3d20 4170  f.test_api == Ap
-0002b5d0: 6953 656c 6563 746f 722e 584d 4c3a 0a20  iSelector.XML:. 
-0002b5e0: 2020 2020 2072 6574 7572 6e20 756e 6974       return unit
-0002b5f0: 7465 7374 2e73 6b69 7028 2752 6577 7269  test.skip('Rewri
-0002b600: 7465 2041 5049 2069 7320 6f6e 6c79 2073  te API is only s
-0002b610: 7570 706f 7274 6564 2069 6e20 4a53 4f4e  upported in JSON
-0002b620: 2e27 290a 2020 2020 6275 636b 6574 5f75  .').    bucket_u
-0002b630: 7269 203d 2073 656c 662e 4372 6561 7465  ri = self.Create
-0002b640: 4275 636b 6574 2829 0a20 2020 206f 626a  Bucket().    obj
-0002b650: 6563 745f 7572 6920 3d20 7365 6c66 2e43  ect_uri = self.C
-0002b660: 7265 6174 654f 626a 6563 7428 6275 636b  reateObject(buck
-0002b670: 6574 5f75 7269 3d62 7563 6b65 745f 7572  et_uri=bucket_ur
-0002b680: 692c 0a20 2020 2020 2020 2020 2020 2020  i,.             
-0002b690: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b6a0: 2020 2020 2020 6f62 6a65 6374 5f6e 616d        object_nam
-0002b6b0: 653d 2766 6f6f 272c 0a20 2020 2020 2020  e='foo',.       
-0002b6c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b6d0: 2020 2020 2020 2020 2020 2020 636f 6e74              cont
-0002b6e0: 656e 7473 3d62 2762 6172 2729 0a20 2020  ents=b'bar').   
-0002b6f0: 2067 7375 7469 6c5f 6170 6920 3d20 4763   gsutil_api = Gc
-0002b700: 734a 736f 6e41 7069 2842 7563 6b65 7453  sJsonApi(BucketS
-0002b710: 746f 7261 6765 5572 692c 206c 6f67 6769  torageUri, loggi
-0002b720: 6e67 2e67 6574 4c6f 6767 6572 2829 2c0a  ng.getLogger(),.
-0002b730: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b740: 2020 2020 2020 2020 2020 2020 4469 7363              Disc
-0002b750: 6172 644d 6573 7361 6765 7351 7565 7565  ardMessagesQueue
-0002b760: 2829 2c20 7365 6c66 2e64 6566 6175 6c74  (), self.default
-0002b770: 5f70 726f 7669 6465 7229 0a20 2020 206b  _provider).    k
-0002b780: 6579 203d 206f 626a 6563 745f 7572 692e  ey = object_uri.
-0002b790: 6765 745f 6b65 7928 290a 2020 2020 7372  get_key().    sr
-0002b7a0: 635f 6f62 6a5f 6d65 7461 6461 7461 203d  c_obj_metadata =
-0002b7b0: 2061 7069 746f 6f6c 735f 6d65 7373 6167   apitools_messag
-0002b7c0: 6573 2e4f 626a 6563 7428 6e61 6d65 3d6b  es.Object(name=k
-0002b7d0: 6579 2e6e 616d 652c 0a20 2020 2020 2020  ey.name,.       
-0002b7e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b7f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b800: 2020 2020 2020 2020 2062 7563 6b65 743d           bucket=
-0002b810: 6b65 792e 6275 636b 6574 2e6e 616d 652c  key.bucket.name,
-0002b820: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002b830: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b850: 2063 6f6e 7465 6e74 5479 7065 3d6b 6579   contentType=key
-0002b860: 2e63 6f6e 7465 6e74 5f74 7970 6529 0a20  .content_type). 
-0002b870: 2020 2064 7374 5f6f 626a 5f6d 6574 6164     dst_obj_metad
-0002b880: 6174 6120 3d20 6170 6974 6f6f 6c73 5f6d  ata = apitools_m
-0002b890: 6573 7361 6765 732e 4f62 6a65 6374 280a  essages.Object(.
-0002b8a0: 2020 2020 2020 2020 6275 636b 6574 3d73          bucket=s
-0002b8b0: 7263 5f6f 626a 5f6d 6574 6164 6174 612e  rc_obj_metadata.
-0002b8c0: 6275 636b 6574 2c0a 2020 2020 2020 2020  bucket,.        
-0002b8d0: 6e61 6d65 3d73 656c 662e 4d61 6b65 5465  name=self.MakeTe
-0002b8e0: 6d70 4e61 6d65 2827 6f62 6a65 6374 2729  mpName('object')
-0002b8f0: 2c0a 2020 2020 2020 2020 636f 6e74 656e  ,.        conten
-0002b900: 7454 7970 653d 7372 635f 6f62 6a5f 6d65  tType=src_obj_me
-0002b910: 7461 6461 7461 2e63 6f6e 7465 6e74 5479  tadata.contentTy
-0002b920: 7065 290a 2020 2020 6773 7574 696c 5f61  pe).    gsutil_a
-0002b930: 7069 2e43 6f70 794f 626a 6563 7428 7372  pi.CopyObject(sr
-0002b940: 635f 6f62 6a5f 6d65 7461 6461 7461 2c20  c_obj_metadata, 
-0002b950: 6473 745f 6f62 6a5f 6d65 7461 6461 7461  dst_obj_metadata
-0002b960: 290a 2020 2020 7365 6c66 2e61 7373 6572  ).    self.asser
-0002b970: 7445 7175 616c 280a 2020 2020 2020 2020  tEqual(.        
-0002b980: 6773 7574 696c 5f61 7069 2e47 6574 4f62  gsutil_api.GetOb
-0002b990: 6a65 6374 4d65 7461 6461 7461 2873 7263  jectMetadata(src
-0002b9a0: 5f6f 626a 5f6d 6574 6164 6174 612e 6275  _obj_metadata.bu
-0002b9b0: 636b 6574 2c0a 2020 2020 2020 2020 2020  cket,.          
-0002b9c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b9d0: 2020 2020 2020 2020 2020 2073 7263 5f6f             src_o
-0002b9e0: 626a 5f6d 6574 6164 6174 612e 6e61 6d65  bj_metadata.name
-0002b9f0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-0002ba00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ba10: 2020 2020 2020 2066 6965 6c64 733d 5b27         fields=['
-0002ba20: 6375 7374 6f6d 6572 456e 6372 7970 7469  customerEncrypti
-0002ba30: 6f6e 272c 0a20 2020 2020 2020 2020 2020  on',.           
-0002ba40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ba50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ba60: 2020 276d 6435 4861 7368 275d 292e 6d64    'md5Hash']).md
-0002ba70: 3548 6173 682c 0a20 2020 2020 2020 2067  5Hash,.        g
-0002ba80: 7375 7469 6c5f 6170 692e 4765 744f 626a  sutil_api.GetObj
-0002ba90: 6563 744d 6574 6164 6174 6128 6473 745f  ectMetadata(dst_
-0002baa0: 6f62 6a5f 6d65 7461 6461 7461 2e62 7563  obj_metadata.buc
-0002bab0: 6b65 742c 0a20 2020 2020 2020 2020 2020  ket,.           
-0002bac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bad0: 2020 2020 2020 2020 2020 6473 745f 6f62            dst_ob
-0002bae0: 6a5f 6d65 7461 6461 7461 2e6e 616d 652c  j_metadata.name,
-0002baf0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002bb00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bb10: 2020 2020 2020 6669 656c 6473 3d5b 2763        fields=['c
-0002bb20: 7573 746f 6d65 7245 6e63 7279 7074 696f  ustomerEncryptio
-0002bb30: 6e27 2c0a 2020 2020 2020 2020 2020 2020  n',.            
-0002bb40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bb50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bb60: 2027 6d64 3548 6173 6827 5d29 2e6d 6435   'md5Hash']).md5
-0002bb70: 4861 7368 2c0a 2020 2020 2020 2020 2745  Hash,.        'E
-0002bb80: 7272 6f72 3a20 5265 7772 6974 7465 6e20  rror: Rewritten 
-0002bb90: 6f62 6a65 6374 5c27 7320 6861 7368 2064  object\'s hash d
-0002bba0: 6f65 736e 5c27 7420 6d61 7463 6820 736f  oesn\'t match so
-0002bbb0: 7572 6365 206f 626a 6563 742e 2729 0a0a  urce object.')..
-0002bbc0: 2020 6465 6620 7465 7374 5f72 6577 7269    def test_rewri
-0002bbd0: 7465 5f63 705f 7265 7375 6d65 2873 656c  te_cp_resume(sel
-0002bbe0: 6629 3a0a 2020 2020 2222 2254 6573 7473  f):.    """Tests
-0002bbf0: 2074 6865 204a 534f 4e20 5265 7772 6974   the JSON Rewrit
-0002bc00: 6520 4150 492c 2062 7265 616b 696e 6720  e API, breaking 
-0002bc10: 616e 6420 7265 7375 6d69 6e67 2076 6961  and resuming via
-0002bc20: 2061 2074 7261 636b 6572 2066 696c 652e   a tracker file.
-0002bc30: 2222 220a 2020 2020 6966 2073 656c 662e  """.    if self.
-0002bc40: 7465 7374 5f61 7069 203d 3d20 4170 6953  test_api == ApiS
-0002bc50: 656c 6563 746f 722e 584d 4c3a 0a20 2020  elector.XML:.   
-0002bc60: 2020 2072 6574 7572 6e20 756e 6974 7465     return unitte
-0002bc70: 7374 2e73 6b69 7028 2752 6577 7269 7465  st.skip('Rewrite
-0002bc80: 2041 5049 2069 7320 6f6e 6c79 2073 7570   API is only sup
-0002bc90: 706f 7274 6564 2069 6e20 4a53 4f4e 2e27  ported in JSON.'
-0002bca0: 290a 2020 2020 6275 636b 6574 5f75 7269  ).    bucket_uri
-0002bcb0: 203d 2073 656c 662e 4372 6561 7465 4275   = self.CreateBu
-0002bcc0: 636b 6574 2829 0a20 2020 2023 2053 6563  cket().    # Sec
-0002bcd0: 6f6e 6420 6275 636b 6574 206e 6565 6473  ond bucket needs
-0002bce0: 2074 6f20 6265 2061 2064 6966 6665 7265   to be a differe
-0002bcf0: 6e74 2073 746f 7261 6765 2063 6c61 7373  nt storage class
-0002bd00: 2073 6f20 7468 6520 7365 7276 6963 650a   so the service.
-0002bd10: 2020 2020 2320 6163 7475 616c 6c79 2072      # actually r
-0002bd20: 6577 7269 7465 7320 7468 6520 6279 7465  ewrites the byte
-0002bd30: 732e 0a20 2020 2062 7563 6b65 745f 7572  s..    bucket_ur
-0002bd40: 6932 203d 2073 656c 662e 4372 6561 7465  i2 = self.Create
-0002bd50: 4275 636b 6574 280a 2020 2020 2020 2020  Bucket(.        
-0002bd60: 7374 6f72 6167 655f 636c 6173 733d 2764  storage_class='d
-0002bd70: 7572 6162 6c65 5f72 6564 7563 6564 5f61  urable_reduced_a
-0002bd80: 7661 696c 6162 696c 6974 7927 290a 2020  vailability').  
-0002bd90: 2020 2320 6d61 7842 7974 6573 5065 7243    # maxBytesPerC
-0002bda0: 616c 6c20 6d75 7374 2062 6520 3e3d 2031  all must be >= 1
-0002bdb0: 204d 6942 2c20 736f 2063 7265 6174 6520   MiB, so create 
-0002bdc0: 616e 206f 626a 6563 7420 3e20 3220 4d69  an object > 2 Mi
-0002bdd0: 4220 6265 6361 7573 6520 7765 0a20 2020  B because we.   
-0002bde0: 2023 206e 6565 6420 3220 7265 7370 6f6e   # need 2 respon
-0002bdf0: 7365 2066 726f 6d20 7468 6520 7365 7276  se from the serv
-0002be00: 6963 653a 2031 2073 7563 6365 7373 2c20  ice: 1 success, 
-0002be10: 3120 6661 696c 7572 6520 7072 696f 7220  1 failure prior 
-0002be20: 746f 0a20 2020 2023 2063 6f6d 706c 6574  to.    # complet
-0002be30: 696f 6e2e 0a20 2020 206f 626a 6563 745f  ion..    object_
-0002be40: 7572 6920 3d20 7365 6c66 2e43 7265 6174  uri = self.Creat
-0002be50: 654f 626a 6563 7428 6275 636b 6574 5f75  eObject(bucket_u
-0002be60: 7269 3d62 7563 6b65 745f 7572 692c 0a20  ri=bucket_uri,. 
-0002be70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002be80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002be90: 2020 6f62 6a65 6374 5f6e 616d 653d 2766    object_name='f
-0002bea0: 6f6f 272c 0a20 2020 2020 2020 2020 2020  oo',.           
-0002beb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bec0: 2020 2020 2020 2020 636f 6e74 656e 7473          contents
-0002bed0: 3d28 6227 3132 2720 2a20 4f4e 455f 4d49  =(b'12' * ONE_MI
-0002bee0: 4229 202b 2062 2762 6172 272c 0a20 2020  B) + b'bar',.   
-0002bef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002a080: 7229 0a0a 2020 2020 2020 2320 4561 6368  r)..      # Each
+0002a090: 2074 7261 636b 6572 2066 696c 6520 7368   tracker file sh
+0002a0a0: 6f75 6c64 2065 7869 7374 2e0a 2020 2020  ould exist..    
+0002a0b0: 2020 7472 6163 6b65 725f 6669 6c65 6e61    tracker_filena
+0002a0c0: 6d65 7320 3d20 4765 7453 6c69 6365 6444  mes = GetSlicedD
+0002a0d0: 6f77 6e6c 6f61 6454 7261 636b 6572 4669  ownloadTrackerFi
+0002a0e0: 6c65 5061 7468 7328 0a20 2020 2020 2020  lePaths(.       
+0002a0f0: 2020 2053 746f 7261 6765 5572 6c46 726f     StorageUrlFro
+0002a100: 6d53 7472 696e 6728 6670 6174 6829 2c20  mString(fpath), 
+0002a110: 7365 6c66 2e74 6573 745f 6170 6929 0a20  self.test_api). 
+0002a120: 2020 2020 2066 6f72 2074 7261 636b 6572       for tracker
+0002a130: 5f66 696c 656e 616d 6520 696e 2074 7261  _filename in tra
+0002a140: 636b 6572 5f66 696c 656e 616d 6573 3a0a  cker_filenames:.
+0002a150: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+0002a160: 6572 7454 7275 6528 6f73 2e70 6174 682e  ertTrue(os.path.
+0002a170: 6973 6669 6c65 2874 7261 636b 6572 5f66  isfile(tracker_f
+0002a180: 696c 656e 616d 6529 290a 0a20 2020 2020  ilename))..     
+0002a190: 2073 7464 6572 7220 3d20 7365 6c66 2e52   stderr = self.R
+0002a1a0: 756e 4773 5574 696c 285b 2763 7027 2c20  unGsUtil(['cp', 
+0002a1b0: 7375 7269 286f 626a 6563 745f 7572 6929  suri(object_uri)
+0002a1c0: 2c20 6670 6174 685d 2c0a 2020 2020 2020  , fpath],.      
+0002a1d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002a1e0: 2020 2020 2020 2020 7265 7475 726e 5f73          return_s
+0002a1f0: 7464 6572 723d 5472 7565 290a 2020 2020  tderr=True).    
+0002a200: 2020 7365 6c66 2e61 7373 6572 7449 6e28    self.assertIn(
+0002a210: 2752 6573 756d 696e 6720 646f 776e 6c6f  'Resuming downlo
+0002a220: 6164 272c 2073 7464 6572 7229 0a0a 2020  ad', stderr)..  
+0002a230: 2020 2020 2320 4561 6368 2074 7261 636b      # Each track
+0002a240: 6572 2066 696c 6520 7368 6f75 6c64 2068  er file should h
+0002a250: 6176 6520 6265 656e 2064 656c 6574 6564  ave been deleted
+0002a260: 2e0a 2020 2020 2020 7472 6163 6b65 725f  ..      tracker_
+0002a270: 6669 6c65 6e61 6d65 7320 3d20 4765 7453  filenames = GetS
+0002a280: 6c69 6365 6444 6f77 6e6c 6f61 6454 7261  licedDownloadTra
+0002a290: 636b 6572 4669 6c65 5061 7468 7328 0a20  ckerFilePaths(. 
+0002a2a0: 2020 2020 2020 2020 2053 746f 7261 6765           Storage
+0002a2b0: 5572 6c46 726f 6d53 7472 696e 6728 6670  UrlFromString(fp
+0002a2c0: 6174 6829 2c20 7365 6c66 2e74 6573 745f  ath), self.test_
+0002a2d0: 6170 6929 0a20 2020 2020 2066 6f72 2074  api).      for t
+0002a2e0: 7261 636b 6572 5f66 696c 656e 616d 6520  racker_filename 
+0002a2f0: 696e 2074 7261 636b 6572 5f66 696c 656e  in tracker_filen
+0002a300: 616d 6573 3a0a 2020 2020 2020 2020 7365  ames:.        se
+0002a310: 6c66 2e61 7373 6572 7446 616c 7365 286f  lf.assertFalse(o
+0002a320: 732e 7061 7468 2e69 7366 696c 6528 7472  s.path.isfile(tr
+0002a330: 6163 6b65 725f 6669 6c65 6e61 6d65 2929  acker_filename))
+0002a340: 0a0a 2020 2020 2020 7769 7468 206f 7065  ..      with ope
+0002a350: 6e28 6670 6174 682c 2027 7262 2729 2061  n(fpath, 'rb') a
+0002a360: 7320 663a 0a20 2020 2020 2020 2073 656c  s f:.        sel
+0002a370: 662e 6173 7365 7274 4571 7561 6c28 662e  f.assertEqual(f.
+0002a380: 7265 6164 2829 2c20 6227 6162 6327 202a  read(), b'abc' *
+0002a390: 2073 656c 662e 6861 6c74 5f73 697a 652c   self.halt_size,
+0002a3a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002a3b0: 2020 2020 2020 2020 2020 2746 696c 6520            'File 
+0002a3c0: 636f 6e74 656e 7473 2064 6966 6665 7227  contents differ'
+0002a3d0: 290a 0a20 2040 756e 6974 7465 7374 2e73  )..  @unittest.s
+0002a3e0: 6b69 7055 6e6c 6573 7328 5573 696e 6743  kipUnless(UsingC
+0002a3f0: 7263 6d6f 6445 7874 656e 7369 6f6e 2829  rcmodExtension()
+0002a400: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+0002a410: 2020 2020 2020 2020 2027 536c 6963 6564           'Sliced
+0002a420: 2064 6f77 6e6c 6f61 6420 7265 7175 6972   download requir
+0002a430: 6573 2066 6173 7420 6372 636d 6f64 2e27  es fast crcmod.'
+0002a440: 290a 2020 4053 6b69 7046 6f72 5333 2827  ).  @SkipForS3('
+0002a450: 4e6f 2073 6c69 6365 6420 646f 776e 6c6f  No sliced downlo
+0002a460: 6164 2073 7570 706f 7274 2066 6f72 2053  ad support for S
+0002a470: 332e 2729 0a20 2064 6566 2074 6573 745f  3.').  def test_
+0002a480: 6370 5f73 6c69 6365 645f 646f 776e 6c6f  cp_sliced_downlo
+0002a490: 6164 5f70 6172 7469 616c 5f72 6573 756d  ad_partial_resum
+0002a4a0: 6528 7365 6c66 293a 0a20 2020 2022 2222  e(self):.    """
+0002a4b0: 5465 7374 2073 6c69 6365 6420 646f 776e  Test sliced down
+0002a4c0: 6c6f 6164 2072 6573 756d 6162 696c 6974  load resumabilit
+0002a4d0: 7920 7768 656e 2073 6f6d 6520 636f 6d70  y when some comp
+0002a4e0: 6f6e 656e 7473 2061 7265 2066 696e 6973  onents are finis
+0002a4f0: 6865 642e 2222 220a 2020 2020 6275 636b  hed.""".    buck
+0002a500: 6574 5f75 7269 203d 2073 656c 662e 4372  et_uri = self.Cr
+0002a510: 6561 7465 4275 636b 6574 2829 0a20 2020  eateBucket().   
+0002a520: 206f 626a 6563 745f 7572 6920 3d20 7365   object_uri = se
+0002a530: 6c66 2e43 7265 6174 654f 626a 6563 7428  lf.CreateObject(
+0002a540: 6275 636b 6574 5f75 7269 3d62 7563 6b65  bucket_uri=bucke
+0002a550: 745f 7572 692c 0a20 2020 2020 2020 2020  t_uri,.         
+0002a560: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002a570: 2020 2020 2020 2020 2020 6f62 6a65 6374            object
+0002a580: 5f6e 616d 653d 2766 6f6f 272c 0a20 2020  _name='foo',.   
+0002a590: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002a5a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002a5b0: 636f 6e74 656e 7473 3d62 2761 6263 2720  contents=b'abc' 
+0002a5c0: 2a20 7365 6c66 2e68 616c 745f 7369 7a65  * self.halt_size
+0002a5d0: 290a 2020 2020 6670 6174 6820 3d20 7365  ).    fpath = se
+0002a5e0: 6c66 2e43 7265 6174 6554 656d 7046 696c  lf.CreateTempFil
+0002a5f0: 6528 290a 2020 2020 7465 7374 5f63 616c  e().    test_cal
+0002a600: 6c62 6163 6b5f 6669 6c65 203d 2073 656c  lback_file = sel
+0002a610: 662e 4372 6561 7465 5465 6d70 4669 6c65  f.CreateTempFile
+0002a620: 280a 2020 2020 2020 2020 636f 6e74 656e  (.        conten
+0002a630: 7473 3d70 6963 6b6c 652e 6475 6d70 7328  ts=pickle.dumps(
+0002a640: 4861 6c74 4f6e 6543 6f6d 706f 6e65 6e74  HaltOneComponent
+0002a650: 436f 7079 4361 6c6c 6261 636b 4861 6e64  CopyCallbackHand
+0002a660: 6c65 7228 3529 2929 0a0a 2020 2020 626f  ler(5)))..    bo
+0002a670: 746f 5f63 6f6e 6669 675f 666f 725f 7465  to_config_for_te
+0002a680: 7374 203d 205b 0a20 2020 2020 2020 2028  st = [.        (
+0002a690: 2747 5355 7469 6c27 2c20 2772 6573 756d  'GSUtil', 'resum
+0002a6a0: 6162 6c65 5f74 6872 6573 686f 6c64 272c  able_threshold',
+0002a6b0: 2073 7472 2873 656c 662e 6861 6c74 5f73   str(self.halt_s
+0002a6c0: 697a 6529 292c 0a20 2020 2020 2020 2028  ize)),.        (
+0002a6d0: 2747 5355 7469 6c27 2c20 2773 6c69 6365  'GSUtil', 'slice
+0002a6e0: 645f 6f62 6a65 6374 5f64 6f77 6e6c 6f61  d_object_downloa
+0002a6f0: 645f 7468 7265 7368 6f6c 6427 2c20 7374  d_threshold', st
+0002a700: 7228 7365 6c66 2e68 616c 745f 7369 7a65  r(self.halt_size
+0002a710: 2929 2c0a 2020 2020 2020 2020 2827 4753  )),.        ('GS
+0002a720: 5574 696c 272c 2027 736c 6963 6564 5f6f  Util', 'sliced_o
+0002a730: 626a 6563 745f 646f 776e 6c6f 6164 5f6d  bject_download_m
+0002a740: 6178 5f63 6f6d 706f 6e65 6e74 7327 2c20  ax_components', 
+0002a750: 2733 2729 0a20 2020 205d 0a0a 2020 2020  '3').    ]..    
+0002a760: 7769 7468 2053 6574 426f 746f 436f 6e66  with SetBotoConf
+0002a770: 6967 466f 7254 6573 7428 626f 746f 5f63  igForTest(boto_c
+0002a780: 6f6e 6669 675f 666f 725f 7465 7374 293a  onfig_for_test):
+0002a790: 0a20 2020 2020 2073 7464 6572 7220 3d20  .      stderr = 
+0002a7a0: 7365 6c66 2e52 756e 4773 5574 696c 285b  self.RunGsUtil([
+0002a7b0: 0a20 2020 2020 2020 2020 2027 6370 272c  .          'cp',
+0002a7c0: 2027 2d2d 7465 7374 6361 6c6c 6261 636b   '--testcallback
+0002a7d0: 6669 6c65 272c 2074 6573 745f 6361 6c6c  file', test_call
+0002a7e0: 6261 636b 5f66 696c 652c 0a20 2020 2020  back_file,.     
+0002a7f0: 2020 2020 2073 7572 6928 6f62 6a65 6374       suri(object
+0002a800: 5f75 7269 292c 0a20 2020 2020 2020 2020  _uri),.         
+0002a810: 2073 7572 6928 6670 6174 6829 0a20 2020   suri(fpath).   
+0002a820: 2020 205d 2c0a 2020 2020 2020 2020 2020     ],.          
+0002a830: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002a840: 2020 2020 7265 7475 726e 5f73 7464 6572      return_stder
+0002a850: 723d 5472 7565 2c0a 2020 2020 2020 2020  r=True,.        
+0002a860: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002a870: 2020 2020 2020 6578 7065 6374 6564 5f73        expected_s
+0002a880: 7461 7475 733d 3129 0a20 2020 2020 2073  tatus=1).      s
+0002a890: 656c 662e 6173 7365 7274 496e 2827 6e6f  elf.assertIn('no
+0002a8a0: 7420 646f 776e 6c6f 6164 6564 2073 7563  t downloaded suc
+0002a8b0: 6365 7373 6675 6c6c 7927 2c20 7374 6465  cessfully', stde
+0002a8c0: 7272 290a 0a20 2020 2020 2023 2045 6163  rr)..      # Eac
+0002a8d0: 6820 7472 6163 6b65 7220 6669 6c65 2073  h tracker file s
+0002a8e0: 686f 756c 6420 6578 6973 742e 0a20 2020  hould exist..   
+0002a8f0: 2020 2074 7261 636b 6572 5f66 696c 656e     tracker_filen
+0002a900: 616d 6573 203d 2047 6574 536c 6963 6564  ames = GetSliced
+0002a910: 446f 776e 6c6f 6164 5472 6163 6b65 7246  DownloadTrackerF
+0002a920: 696c 6550 6174 6873 280a 2020 2020 2020  ilePaths(.      
+0002a930: 2020 2020 5374 6f72 6167 6555 726c 4672      StorageUrlFr
+0002a940: 6f6d 5374 7269 6e67 2866 7061 7468 292c  omString(fpath),
+0002a950: 2073 656c 662e 7465 7374 5f61 7069 290a   self.test_api).
+0002a960: 2020 2020 2020 666f 7220 7472 6163 6b65        for tracke
+0002a970: 725f 6669 6c65 6e61 6d65 2069 6e20 7472  r_filename in tr
+0002a980: 6163 6b65 725f 6669 6c65 6e61 6d65 733a  acker_filenames:
+0002a990: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+0002a9a0: 7365 7274 5472 7565 286f 732e 7061 7468  sertTrue(os.path
+0002a9b0: 2e69 7366 696c 6528 7472 6163 6b65 725f  .isfile(tracker_
+0002a9c0: 6669 6c65 6e61 6d65 2929 0a0a 2020 2020  filename))..    
+0002a9d0: 2020 7374 6465 7272 203d 2073 656c 662e    stderr = self.
+0002a9e0: 5275 6e47 7355 7469 6c28 5b27 6370 272c  RunGsUtil(['cp',
+0002a9f0: 2073 7572 6928 6f62 6a65 6374 5f75 7269   suri(object_uri
+0002aa00: 292c 2066 7061 7468 5d2c 0a20 2020 2020  ), fpath],.     
+0002aa10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002aa20: 2020 2020 2020 2020 2072 6574 7572 6e5f           return_
+0002aa30: 7374 6465 7272 3d54 7275 6529 0a20 2020  stderr=True).   
+0002aa40: 2020 2073 656c 662e 6173 7365 7274 496e     self.assertIn
+0002aa50: 2827 5265 7375 6d69 6e67 2064 6f77 6e6c  ('Resuming downl
+0002aa60: 6f61 6427 2c20 7374 6465 7272 290a 2020  oad', stderr).  
+0002aa70: 2020 2020 7365 6c66 2e61 7373 6572 7449      self.assertI
+0002aa80: 6e28 2744 6f77 6e6c 6f61 6420 616c 7265  n('Download alre
+0002aa90: 6164 7920 636f 6d70 6c65 7465 272c 2073  ady complete', s
+0002aaa0: 7464 6572 7229 0a0a 2020 2020 2020 2320  tderr)..      # 
+0002aab0: 4561 6368 2074 7261 636b 6572 2066 696c  Each tracker fil
+0002aac0: 6520 7368 6f75 6c64 2068 6176 6520 6265  e should have be
+0002aad0: 656e 2064 656c 6574 6564 2e0a 2020 2020  en deleted..    
+0002aae0: 2020 7472 6163 6b65 725f 6669 6c65 6e61    tracker_filena
+0002aaf0: 6d65 7320 3d20 4765 7453 6c69 6365 6444  mes = GetSlicedD
+0002ab00: 6f77 6e6c 6f61 6454 7261 636b 6572 4669  ownloadTrackerFi
+0002ab10: 6c65 5061 7468 7328 0a20 2020 2020 2020  lePaths(.       
+0002ab20: 2020 2053 746f 7261 6765 5572 6c46 726f     StorageUrlFro
+0002ab30: 6d53 7472 696e 6728 6670 6174 6829 2c20  mString(fpath), 
+0002ab40: 7365 6c66 2e74 6573 745f 6170 6929 0a20  self.test_api). 
+0002ab50: 2020 2020 2066 6f72 2074 7261 636b 6572       for tracker
+0002ab60: 5f66 696c 656e 616d 6520 696e 2074 7261  _filename in tra
+0002ab70: 636b 6572 5f66 696c 656e 616d 6573 3a0a  cker_filenames:.
+0002ab80: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+0002ab90: 6572 7446 616c 7365 286f 732e 7061 7468  ertFalse(os.path
+0002aba0: 2e69 7366 696c 6528 7472 6163 6b65 725f  .isfile(tracker_
+0002abb0: 6669 6c65 6e61 6d65 2929 0a0a 2020 2020  filename))..    
+0002abc0: 2020 7769 7468 206f 7065 6e28 6670 6174    with open(fpat
+0002abd0: 682c 2027 7262 2729 2061 7320 663a 0a20  h, 'rb') as f:. 
+0002abe0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+0002abf0: 7274 4571 7561 6c28 662e 7265 6164 2829  rtEqual(f.read()
+0002ac00: 2c20 6227 6162 6327 202a 2073 656c 662e  , b'abc' * self.
+0002ac10: 6861 6c74 5f73 697a 652c 0a20 2020 2020  halt_size,.     
+0002ac20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ac30: 2020 2020 2746 696c 6520 636f 6e74 656e      'File conten
+0002ac40: 7473 2064 6966 6665 7227 290a 0a20 2040  ts differ')..  @
+0002ac50: 756e 6974 7465 7374 2e73 6b69 7055 6e6c  unittest.skipUnl
+0002ac60: 6573 7328 5573 696e 6743 7263 6d6f 6445  ess(UsingCrcmodE
+0002ac70: 7874 656e 7369 6f6e 2829 2c0a 2020 2020  xtension(),.    
+0002ac80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ac90: 2020 2027 536c 6963 6564 2064 6f77 6e6c     'Sliced downl
+0002aca0: 6f61 6420 7265 7175 6972 6573 2066 6173  oad requires fas
+0002acb0: 7420 6372 636d 6f64 2e27 290a 2020 4053  t crcmod.').  @S
+0002acc0: 6b69 7046 6f72 5333 2827 4e6f 2073 6c69  kipForS3('No sli
+0002acd0: 6365 6420 646f 776e 6c6f 6164 2073 7570  ced download sup
+0002ace0: 706f 7274 2066 6f72 2053 332e 2729 0a20  port for S3.'). 
+0002acf0: 2064 6566 2074 6573 745f 6370 5f73 6c69   def test_cp_sli
+0002ad00: 6365 645f 646f 776e 6c6f 6164 5f72 6573  ced_download_res
+0002ad10: 756d 655f 636f 6e74 656e 745f 6469 6666  ume_content_diff
+0002ad20: 6572 7328 7365 6c66 293a 0a20 2020 2022  ers(self):.    "
+0002ad30: 2222 5465 7374 7320 6469 6666 6572 696e  ""Tests differin
+0002ad40: 6720 6669 6c65 2063 6f6e 7465 6e74 7320  g file contents 
+0002ad50: 6172 6520 6465 7465 6374 6564 2062 7920  are detected by 
+0002ad60: 736c 6963 6564 2064 6f77 6e6c 6f61 6473  sliced downloads
+0002ad70: 2e22 2222 0a20 2020 2062 7563 6b65 745f  .""".    bucket_
+0002ad80: 7572 6920 3d20 7365 6c66 2e43 7265 6174  uri = self.Creat
+0002ad90: 6542 7563 6b65 7428 290a 2020 2020 6f62  eBucket().    ob
+0002ada0: 6a65 6374 5f75 7269 203d 2073 656c 662e  ject_uri = self.
+0002adb0: 4372 6561 7465 4f62 6a65 6374 2862 7563  CreateObject(buc
+0002adc0: 6b65 745f 7572 693d 6275 636b 6574 5f75  ket_uri=bucket_u
+0002add0: 7269 2c0a 2020 2020 2020 2020 2020 2020  ri,.            
+0002ade0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002adf0: 2020 2020 2020 206f 626a 6563 745f 6e61         object_na
+0002ae00: 6d65 3d27 666f 6f27 2c0a 2020 2020 2020  me='foo',.      
+0002ae10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ae20: 2020 2020 2020 2020 2020 2020 2063 6f6e               con
+0002ae30: 7465 6e74 733d 6227 6162 6327 202a 2073  tents=b'abc' * s
+0002ae40: 656c 662e 6861 6c74 5f73 697a 6529 0a20  elf.halt_size). 
+0002ae50: 2020 2066 7061 7468 203d 2073 656c 662e     fpath = self.
+0002ae60: 4372 6561 7465 5465 6d70 4669 6c65 2863  CreateTempFile(c
+0002ae70: 6f6e 7465 6e74 733d 6227 2729 0a20 2020  ontents=b'').   
+0002ae80: 2074 6573 745f 6361 6c6c 6261 636b 5f66   test_callback_f
+0002ae90: 696c 6520 3d20 7365 6c66 2e43 7265 6174  ile = self.Creat
+0002aea0: 6554 656d 7046 696c 6528 0a20 2020 2020  eTempFile(.     
+0002aeb0: 2020 2063 6f6e 7465 6e74 733d 7069 636b     contents=pick
+0002aec0: 6c65 2e64 756d 7073 2848 616c 7469 6e67  le.dumps(Halting
+0002aed0: 436f 7079 4361 6c6c 6261 636b 4861 6e64  CopyCallbackHand
+0002aee0: 6c65 7228 4661 6c73 652c 2035 2929 290a  ler(False, 5))).
+0002aef0: 0a20 2020 2062 6f74 6f5f 636f 6e66 6967  .    boto_config
+0002af00: 5f66 6f72 5f74 6573 7420 3d20 5b0a 2020  _for_test = [.  
+0002af10: 2020 2020 2020 2827 4753 5574 696c 272c        ('GSUtil',
+0002af20: 2027 7265 7375 6d61 626c 655f 7468 7265   'resumable_thre
+0002af30: 7368 6f6c 6427 2c20 7374 7228 7365 6c66  shold', str(self
+0002af40: 2e68 616c 745f 7369 7a65 2929 2c0a 2020  .halt_size)),.  
+0002af50: 2020 2020 2020 2827 4753 5574 696c 272c        ('GSUtil',
+0002af60: 2027 736c 6963 6564 5f6f 626a 6563 745f   'sliced_object_
+0002af70: 646f 776e 6c6f 6164 5f74 6872 6573 686f  download_thresho
+0002af80: 6c64 272c 2073 7472 2873 656c 662e 6861  ld', str(self.ha
+0002af90: 6c74 5f73 697a 6529 292c 0a20 2020 2020  lt_size)),.     
+0002afa0: 2020 2028 2747 5355 7469 6c27 2c20 2773     ('GSUtil', 's
+0002afb0: 6c69 6365 645f 6f62 6a65 6374 5f64 6f77  liced_object_dow
+0002afc0: 6e6c 6f61 645f 6d61 785f 636f 6d70 6f6e  nload_max_compon
+0002afd0: 656e 7473 272c 2027 3327 290a 2020 2020  ents', '3').    
+0002afe0: 5d0a 0a20 2020 2077 6974 6820 5365 7442  ]..    with SetB
+0002aff0: 6f74 6f43 6f6e 6669 6746 6f72 5465 7374  otoConfigForTest
+0002b000: 2862 6f74 6f5f 636f 6e66 6967 5f66 6f72  (boto_config_for
+0002b010: 5f74 6573 7429 3a0a 2020 2020 2020 7374  _test):.      st
+0002b020: 6465 7272 203d 2073 656c 662e 5275 6e47  derr = self.RunG
+0002b030: 7355 7469 6c28 5b0a 2020 2020 2020 2020  sUtil([.        
+0002b040: 2020 2763 7027 2c20 272d 2d74 6573 7463    'cp', '--testc
+0002b050: 616c 6c62 6163 6b66 696c 6527 2c20 7465  allbackfile', te
+0002b060: 7374 5f63 616c 6c62 6163 6b5f 6669 6c65  st_callback_file
+0002b070: 2c0a 2020 2020 2020 2020 2020 7375 7269  ,.          suri
+0002b080: 286f 626a 6563 745f 7572 6929 2c0a 2020  (object_uri),.  
+0002b090: 2020 2020 2020 2020 7375 7269 2866 7061          suri(fpa
+0002b0a0: 7468 290a 2020 2020 2020 5d2c 0a20 2020  th).      ],.   
+0002b0b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b0c0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0002b0d0: 6e5f 7374 6465 7272 3d54 7275 652c 0a20  n_stderr=True,. 
+0002b0e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b0f0: 2020 2020 2020 2020 2020 2020 2065 7870               exp
+0002b100: 6563 7465 645f 7374 6174 7573 3d31 290a  ected_status=1).
+0002b110: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+0002b120: 7449 6e28 276e 6f74 2064 6f77 6e6c 6f61  tIn('not downloa
+0002b130: 6465 6420 7375 6363 6573 7366 756c 6c79  ded successfully
+0002b140: 272c 2073 7464 6572 7229 0a0a 2020 2020  ', stderr)..    
+0002b150: 2020 2320 5465 6d70 6f72 6172 7920 646f    # Temporary do
+0002b160: 776e 6c6f 6164 2066 696c 6520 7368 6f75  wnload file shou
+0002b170: 6c64 2065 7869 7374 2e0a 2020 2020 2020  ld exist..      
+0002b180: 7365 6c66 2e61 7373 6572 7454 7275 6528  self.assertTrue(
+0002b190: 6f73 2e70 6174 682e 6973 6669 6c65 2866  os.path.isfile(f
+0002b1a0: 7061 7468 202b 2027 5f2e 6773 746d 7027  path + '_.gstmp'
+0002b1b0: 2929 0a0a 2020 2020 2020 2320 4561 6368  ))..      # Each
+0002b1c0: 2074 7261 636b 6572 2066 696c 6520 7368   tracker file sh
+0002b1d0: 6f75 6c64 2065 7869 7374 2e0a 2020 2020  ould exist..    
+0002b1e0: 2020 7472 6163 6b65 725f 6669 6c65 6e61    tracker_filena
+0002b1f0: 6d65 7320 3d20 4765 7453 6c69 6365 6444  mes = GetSlicedD
+0002b200: 6f77 6e6c 6f61 6454 7261 636b 6572 4669  ownloadTrackerFi
+0002b210: 6c65 5061 7468 7328 0a20 2020 2020 2020  lePaths(.       
+0002b220: 2020 2053 746f 7261 6765 5572 6c46 726f     StorageUrlFro
+0002b230: 6d53 7472 696e 6728 6670 6174 6829 2c20  mString(fpath), 
+0002b240: 7365 6c66 2e74 6573 745f 6170 6929 0a20  self.test_api). 
+0002b250: 2020 2020 2066 6f72 2074 7261 636b 6572       for tracker
+0002b260: 5f66 696c 656e 616d 6520 696e 2074 7261  _filename in tra
+0002b270: 636b 6572 5f66 696c 656e 616d 6573 3a0a  cker_filenames:.
+0002b280: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+0002b290: 6572 7454 7275 6528 6f73 2e70 6174 682e  ertTrue(os.path.
+0002b2a0: 6973 6669 6c65 2874 7261 636b 6572 5f66  isfile(tracker_f
+0002b2b0: 696c 656e 616d 6529 290a 0a20 2020 2020  ilename))..     
+0002b2c0: 2077 6974 6820 6f70 656e 2866 7061 7468   with open(fpath
+0002b2d0: 202b 2027 5f2e 6773 746d 7027 2c20 2772   + '_.gstmp', 'r
+0002b2e0: 2b62 2729 2061 7320 663a 0a20 2020 2020  +b') as f:.     
+0002b2f0: 2020 2066 2e77 7269 7465 2862 2761 6c74     f.write(b'alt
+0002b300: 6572 6564 2066 696c 6520 636f 6e74 656e  ered file conten
+0002b310: 7473 2729 0a0a 2020 2020 2020 7374 6465  ts')..      stde
+0002b320: 7272 203d 2073 656c 662e 5275 6e47 7355  rr = self.RunGsU
+0002b330: 7469 6c28 5b27 6370 272c 2073 7572 6928  til(['cp', suri(
+0002b340: 6f62 6a65 6374 5f75 7269 292c 2066 7061  object_uri), fpa
+0002b350: 7468 5d2c 0a20 2020 2020 2020 2020 2020  th],.           
+0002b360: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b370: 2020 2072 6574 7572 6e5f 7374 6465 7272     return_stderr
+0002b380: 3d54 7275 652c 0a20 2020 2020 2020 2020  =True,.         
+0002b390: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b3a0: 2020 2020 2065 7870 6563 7465 645f 7374       expected_st
+0002b3b0: 6174 7573 3d31 290a 2020 2020 2020 7365  atus=1).      se
+0002b3c0: 6c66 2e61 7373 6572 7449 6e28 2752 6573  lf.assertIn('Res
+0002b3d0: 756d 696e 6720 646f 776e 6c6f 6164 272c  uming download',
+0002b3e0: 2073 7464 6572 7229 0a20 2020 2020 2073   stderr).      s
+0002b3f0: 656c 662e 6173 7365 7274 496e 2827 646f  elf.assertIn('do
+0002b400: 6573 6e5c 2774 206d 6174 6368 2063 6c6f  esn\'t match clo
+0002b410: 7564 2d73 7570 706c 6965 6420 6469 6765  ud-supplied dige
+0002b420: 7374 272c 2073 7464 6572 7229 0a20 2020  st', stderr).   
+0002b430: 2020 2073 656c 662e 6173 7365 7274 496e     self.assertIn
+0002b440: 2827 4861 7368 4d69 736d 6174 6368 4578  ('HashMismatchEx
+0002b450: 6365 7074 696f 6e3a 2063 7263 3332 6327  ception: crc32c'
+0002b460: 2c20 7374 6465 7272 290a 0a20 2020 2020  , stderr)..     
+0002b470: 2023 2045 6163 6820 7472 6163 6b65 7220   # Each tracker 
+0002b480: 6669 6c65 2073 686f 756c 6420 6861 7665  file should have
+0002b490: 2062 6565 6e20 6465 6c65 7465 642e 0a20   been deleted.. 
+0002b4a0: 2020 2020 2074 7261 636b 6572 5f66 696c       tracker_fil
+0002b4b0: 656e 616d 6573 203d 2047 6574 536c 6963  enames = GetSlic
+0002b4c0: 6564 446f 776e 6c6f 6164 5472 6163 6b65  edDownloadTracke
+0002b4d0: 7246 696c 6550 6174 6873 280a 2020 2020  rFilePaths(.    
+0002b4e0: 2020 2020 2020 5374 6f72 6167 6555 726c        StorageUrl
+0002b4f0: 4672 6f6d 5374 7269 6e67 2866 7061 7468  FromString(fpath
+0002b500: 292c 2073 656c 662e 7465 7374 5f61 7069  ), self.test_api
+0002b510: 290a 2020 2020 2020 666f 7220 7472 6163  ).      for trac
+0002b520: 6b65 725f 6669 6c65 6e61 6d65 2069 6e20  ker_filename in 
+0002b530: 7472 6163 6b65 725f 6669 6c65 6e61 6d65  tracker_filename
+0002b540: 733a 0a20 2020 2020 2020 2073 656c 662e  s:.        self.
+0002b550: 6173 7365 7274 4661 6c73 6528 6f73 2e70  assertFalse(os.p
+0002b560: 6174 682e 6973 6669 6c65 2874 7261 636b  ath.isfile(track
+0002b570: 6572 5f66 696c 656e 616d 6529 290a 0a20  er_filename)).. 
+0002b580: 2020 2020 2023 2054 656d 706f 7261 7279       # Temporary
+0002b590: 2066 696c 6520 7368 6f75 6c64 2068 6176   file should hav
+0002b5a0: 6520 6265 656e 2064 656c 6574 6564 2064  e been deleted d
+0002b5b0: 7565 2074 6f20 6861 7368 206d 6973 6d61  ue to hash misma
+0002b5c0: 7463 682e 0a20 2020 2020 2073 656c 662e  tch..      self.
+0002b5d0: 6173 7365 7274 4661 6c73 6528 6f73 2e70  assertFalse(os.p
+0002b5e0: 6174 682e 6973 6669 6c65 2866 7061 7468  ath.isfile(fpath
+0002b5f0: 202b 2027 5f2e 6773 746d 7027 2929 0a20   + '_.gstmp')). 
+0002b600: 2020 2020 2023 2046 696e 616c 2066 696c       # Final fil
+0002b610: 6520 7368 6f75 6c64 206e 6f74 2065 7869  e should not exi
+0002b620: 7374 2e0a 2020 2020 2020 7365 6c66 2e61  st..      self.a
+0002b630: 7373 6572 7446 616c 7365 286f 732e 7061  ssertFalse(os.pa
+0002b640: 7468 2e69 7366 696c 6528 6670 6174 6829  th.isfile(fpath)
+0002b650: 290a 0a20 2040 756e 6974 7465 7374 2e73  )..  @unittest.s
+0002b660: 6b69 7055 6e6c 6573 7328 5573 696e 6743  kipUnless(UsingC
+0002b670: 7263 6d6f 6445 7874 656e 7369 6f6e 2829  rcmodExtension()
+0002b680: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+0002b690: 2020 2020 2020 2020 2027 536c 6963 6564           'Sliced
+0002b6a0: 2064 6f77 6e6c 6f61 6420 7265 7175 6972   download requir
+0002b6b0: 6573 2066 6173 7420 6372 636d 6f64 2e27  es fast crcmod.'
+0002b6c0: 290a 2020 4053 6b69 7046 6f72 5333 2827  ).  @SkipForS3('
+0002b6d0: 4e6f 2073 6c69 6365 6420 646f 776e 6c6f  No sliced downlo
+0002b6e0: 6164 2073 7570 706f 7274 2066 6f72 2053  ad support for S
+0002b6f0: 332e 2729 0a20 2064 6566 2074 6573 745f  3.').  def test_
+0002b700: 6370 5f73 6c69 6365 645f 646f 776e 6c6f  cp_sliced_downlo
+0002b710: 6164 5f63 6f6d 706f 6e65 6e74 5f73 697a  ad_component_siz
+0002b720: 655f 6368 616e 6765 6428 7365 6c66 293a  e_changed(self):
+0002b730: 0a20 2020 2022 2222 5465 7374 7320 736c  .    """Tests sl
+0002b740: 6963 6564 2064 6f77 6e6c 6f61 6420 646f  iced download do
+0002b750: 6573 6e27 7420 6272 6561 6b20 7768 656e  esn't break when
+0002b760: 2074 6865 2062 6f74 6f20 636f 6e66 6967   the boto config
+0002b770: 2063 6861 6e67 6573 2e0a 0a20 2020 2049   changes...    I
+0002b780: 6620 7468 6520 6e75 6d62 6572 206f 6620  f the number of 
+0002b790: 636f 6d70 6f6e 656e 7473 2075 7365 6420  components used 
+0002b7a0: 6368 616e 6765 7320 6372 6f73 732d 7072  changes cross-pr
+0002b7b0: 6f63 6573 732c 2074 6865 2064 6f77 6e6c  ocess, the downl
+0002b7c0: 6f61 6420 7368 6f75 6c64 0a20 2020 2062  oad should.    b
+0002b7d0: 6520 7265 7374 6172 7465 642e 0a20 2020  e restarted..   
+0002b7e0: 2022 2222 0a20 2020 2062 7563 6b65 745f   """.    bucket_
+0002b7f0: 7572 6920 3d20 7365 6c66 2e43 7265 6174  uri = self.Creat
+0002b800: 6542 7563 6b65 7428 290a 2020 2020 6f62  eBucket().    ob
+0002b810: 6a65 6374 5f75 7269 203d 2073 656c 662e  ject_uri = self.
+0002b820: 4372 6561 7465 4f62 6a65 6374 2862 7563  CreateObject(buc
+0002b830: 6b65 745f 7572 693d 6275 636b 6574 5f75  ket_uri=bucket_u
+0002b840: 7269 2c0a 2020 2020 2020 2020 2020 2020  ri,.            
+0002b850: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b860: 2020 2020 2020 206f 626a 6563 745f 6e61         object_na
+0002b870: 6d65 3d27 666f 6f27 2c0a 2020 2020 2020  me='foo',.      
+0002b880: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b890: 2020 2020 2020 2020 2020 2020 2063 6f6e               con
+0002b8a0: 7465 6e74 733d 6227 6162 6364 2720 2a20  tents=b'abcd' * 
+0002b8b0: 7365 6c66 2e68 616c 745f 7369 7a65 290a  self.halt_size).
+0002b8c0: 2020 2020 6670 6174 6820 3d20 7365 6c66      fpath = self
+0002b8d0: 2e43 7265 6174 6554 656d 7046 696c 6528  .CreateTempFile(
+0002b8e0: 290a 2020 2020 7465 7374 5f63 616c 6c62  ).    test_callb
+0002b8f0: 6163 6b5f 6669 6c65 203d 2073 656c 662e  ack_file = self.
+0002b900: 4372 6561 7465 5465 6d70 4669 6c65 280a  CreateTempFile(.
+0002b910: 2020 2020 2020 2020 636f 6e74 656e 7473          contents
+0002b920: 3d70 6963 6b6c 652e 6475 6d70 7328 4861  =pickle.dumps(Ha
+0002b930: 6c74 696e 6743 6f70 7943 616c 6c62 6163  ltingCopyCallbac
+0002b940: 6b48 616e 646c 6572 2846 616c 7365 2c20  kHandler(False, 
+0002b950: 3529 2929 0a0a 2020 2020 626f 746f 5f63  5)))..    boto_c
+0002b960: 6f6e 6669 675f 666f 725f 7465 7374 203d  onfig_for_test =
+0002b970: 205b 0a20 2020 2020 2020 2028 2747 5355   [.        ('GSU
+0002b980: 7469 6c27 2c20 2772 6573 756d 6162 6c65  til', 'resumable
+0002b990: 5f74 6872 6573 686f 6c64 272c 2073 7472  _threshold', str
+0002b9a0: 2873 656c 662e 6861 6c74 5f73 697a 6529  (self.halt_size)
+0002b9b0: 292c 0a20 2020 2020 2020 2028 2747 5355  ),.        ('GSU
+0002b9c0: 7469 6c27 2c20 2773 6c69 6365 645f 6f62  til', 'sliced_ob
+0002b9d0: 6a65 6374 5f64 6f77 6e6c 6f61 645f 7468  ject_download_th
+0002b9e0: 7265 7368 6f6c 6427 2c20 7374 7228 7365  reshold', str(se
+0002b9f0: 6c66 2e68 616c 745f 7369 7a65 2929 2c0a  lf.halt_size)),.
+0002ba00: 2020 2020 2020 2020 2827 4753 5574 696c          ('GSUtil
+0002ba10: 272c 2027 736c 6963 6564 5f6f 626a 6563  ', 'sliced_objec
+0002ba20: 745f 646f 776e 6c6f 6164 5f63 6f6d 706f  t_download_compo
+0002ba30: 6e65 6e74 5f73 697a 6527 2c0a 2020 2020  nent_size',.    
+0002ba40: 2020 2020 2073 7472 2873 656c 662e 6861       str(self.ha
+0002ba50: 6c74 5f73 697a 6520 2f2f 2034 2929 2c0a  lt_size // 4)),.
+0002ba60: 2020 2020 2020 2020 2827 4753 5574 696c          ('GSUtil
+0002ba70: 272c 2027 736c 6963 6564 5f6f 626a 6563  ', 'sliced_objec
+0002ba80: 745f 646f 776e 6c6f 6164 5f6d 6178 5f63  t_download_max_c
+0002ba90: 6f6d 706f 6e65 6e74 7327 2c20 2734 2729  omponents', '4')
+0002baa0: 0a20 2020 205d 0a0a 2020 2020 7769 7468  .    ]..    with
+0002bab0: 2053 6574 426f 746f 436f 6e66 6967 466f   SetBotoConfigFo
+0002bac0: 7254 6573 7428 626f 746f 5f63 6f6e 6669  rTest(boto_confi
+0002bad0: 675f 666f 725f 7465 7374 293a 0a20 2020  g_for_test):.   
+0002bae0: 2020 2073 7464 6572 7220 3d20 7365 6c66     stderr = self
+0002baf0: 2e52 756e 4773 5574 696c 285b 0a20 2020  .RunGsUtil([.   
+0002bb00: 2020 2020 2020 2027 6370 272c 2027 2d2d         'cp', '--
+0002bb10: 7465 7374 6361 6c6c 6261 636b 6669 6c65  testcallbackfile
+0002bb20: 272c 2074 6573 745f 6361 6c6c 6261 636b  ', test_callback
+0002bb30: 5f66 696c 652c 0a20 2020 2020 2020 2020  _file,.         
+0002bb40: 2073 7572 6928 6f62 6a65 6374 5f75 7269   suri(object_uri
+0002bb50: 292c 0a20 2020 2020 2020 2020 2073 7572  ),.          sur
+0002bb60: 6928 6670 6174 6829 0a20 2020 2020 205d  i(fpath).      ]
+0002bb70: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+0002bb80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002bb90: 7265 7475 726e 5f73 7464 6572 723d 5472  return_stderr=Tr
+0002bba0: 7565 2c0a 2020 2020 2020 2020 2020 2020  ue,.            
+0002bbb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002bbc0: 2020 6578 7065 6374 6564 5f73 7461 7475    expected_statu
+0002bbd0: 733d 3129 0a20 2020 2020 2073 656c 662e  s=1).      self.
+0002bbe0: 6173 7365 7274 496e 2827 6e6f 7420 646f  assertIn('not do
+0002bbf0: 776e 6c6f 6164 6564 2073 7563 6365 7373  wnloaded success
+0002bc00: 6675 6c6c 7927 2c20 7374 6465 7272 290a  fully', stderr).
+0002bc10: 0a20 2020 2062 6f74 6f5f 636f 6e66 6967  .    boto_config
+0002bc20: 5f66 6f72 5f74 6573 7420 3d20 5b0a 2020  _for_test = [.  
+0002bc30: 2020 2020 2020 2827 4753 5574 696c 272c        ('GSUtil',
+0002bc40: 2027 7265 7375 6d61 626c 655f 7468 7265   'resumable_thre
+0002bc50: 7368 6f6c 6427 2c20 7374 7228 7365 6c66  shold', str(self
+0002bc60: 2e68 616c 745f 7369 7a65 2929 2c0a 2020  .halt_size)),.  
+0002bc70: 2020 2020 2020 2827 4753 5574 696c 272c        ('GSUtil',
+0002bc80: 2027 736c 6963 6564 5f6f 626a 6563 745f   'sliced_object_
+0002bc90: 646f 776e 6c6f 6164 5f74 6872 6573 686f  download_thresho
+0002bca0: 6c64 272c 2073 7472 2873 656c 662e 6861  ld', str(self.ha
+0002bcb0: 6c74 5f73 697a 6529 292c 0a20 2020 2020  lt_size)),.     
+0002bcc0: 2020 2028 2747 5355 7469 6c27 2c20 2773     ('GSUtil', 's
+0002bcd0: 6c69 6365 645f 6f62 6a65 6374 5f64 6f77  liced_object_dow
+0002bce0: 6e6c 6f61 645f 636f 6d70 6f6e 656e 745f  nload_component_
+0002bcf0: 7369 7a65 272c 0a20 2020 2020 2020 2020  size',.         
+0002bd00: 7374 7228 7365 6c66 2e68 616c 745f 7369  str(self.halt_si
+0002bd10: 7a65 202f 2f20 3229 292c 0a20 2020 2020  ze // 2)),.     
+0002bd20: 2020 2028 2747 5355 7469 6c27 2c20 2773     ('GSUtil', 's
+0002bd30: 6c69 6365 645f 6f62 6a65 6374 5f64 6f77  liced_object_dow
+0002bd40: 6e6c 6f61 645f 6d61 785f 636f 6d70 6f6e  nload_max_compon
+0002bd50: 656e 7473 272c 2027 3227 290a 2020 2020  ents', '2').    
+0002bd60: 5d0a 0a20 2020 2077 6974 6820 5365 7442  ]..    with SetB
+0002bd70: 6f74 6f43 6f6e 6669 6746 6f72 5465 7374  otoConfigForTest
+0002bd80: 2862 6f74 6f5f 636f 6e66 6967 5f66 6f72  (boto_config_for
+0002bd90: 5f74 6573 7429 3a0a 2020 2020 2020 7374  _test):.      st
+0002bda0: 6465 7272 203d 2073 656c 662e 5275 6e47  derr = self.RunG
+0002bdb0: 7355 7469 6c28 5b27 6370 272c 2073 7572  sUtil(['cp', sur
+0002bdc0: 6928 6f62 6a65 6374 5f75 7269 292c 2066  i(object_uri), f
+0002bdd0: 7061 7468 5d2c 0a20 2020 2020 2020 2020  path],.         
+0002bde0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002bdf0: 2020 2020 2072 6574 7572 6e5f 7374 6465       return_stde
+0002be00: 7272 3d54 7275 6529 0a20 2020 2020 2073  rr=True).      s
+0002be10: 656c 662e 6173 7365 7274 496e 2827 536c  elf.assertIn('Sl
+0002be20: 6963 6564 2064 6f77 6e6c 6f61 6420 7472  iced download tr
+0002be30: 6163 6b65 7220 6669 6c65 2064 6f65 736e  acker file doesn
+0002be40: 5c27 7420 6d61 7463 6820 272c 2073 7464  \'t match ', std
+0002be50: 6572 7229 0a20 2020 2020 2073 656c 662e  err).      self.
+0002be60: 6173 7365 7274 496e 2827 5265 7374 6172  assertIn('Restar
+0002be70: 7469 6e67 2064 6f77 6e6c 6f61 6420 6672  ting download fr
+0002be80: 6f6d 2073 6372 6174 6368 272c 2073 7464  om scratch', std
+0002be90: 6572 7229 0a20 2020 2020 2073 656c 662e  err).      self.
+0002bea0: 6173 7365 7274 4e6f 7449 6e28 2752 6573  assertNotIn('Res
+0002beb0: 756d 696e 6720 646f 776e 6c6f 6164 272c  uming download',
+0002bec0: 2073 7464 6572 7229 0a0a 2020 4075 6e69   stderr)..  @uni
+0002bed0: 7474 6573 742e 736b 6970 556e 6c65 7373  ttest.skipUnless
+0002bee0: 2855 7369 6e67 4372 636d 6f64 4578 7465  (UsingCrcmodExte
+0002bef0: 6e73 696f 6e28 292c 0a20 2020 2020 2020  nsion(),.       
 0002bf00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bf10: 7072 6566 6572 5f6a 736f 6e5f 6170 693d  prefer_json_api=
-0002bf20: 5472 7565 290a 2020 2020 6773 7574 696c  True).    gsutil
-0002bf30: 5f61 7069 203d 2047 6373 4a73 6f6e 4170  _api = GcsJsonAp
-0002bf40: 6928 4275 636b 6574 5374 6f72 6167 6555  i(BucketStorageU
-0002bf50: 7269 2c20 6c6f 6767 696e 672e 6765 744c  ri, logging.getL
-0002bf60: 6f67 6765 7228 292c 0a20 2020 2020 2020  ogger(),.       
-0002bf70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bf80: 2020 2020 2044 6973 6361 7264 4d65 7373       DiscardMess
-0002bf90: 6167 6573 5175 6575 6528 292c 2073 656c  agesQueue(), sel
-0002bfa0: 662e 6465 6661 756c 745f 7072 6f76 6964  f.default_provid
-0002bfb0: 6572 290a 2020 2020 6b65 7920 3d20 6f62  er).    key = ob
-0002bfc0: 6a65 6374 5f75 7269 2e67 6574 5f6b 6579  ject_uri.get_key
-0002bfd0: 2829 0a20 2020 2073 7263 5f6f 626a 5f6d  ().    src_obj_m
-0002bfe0: 6574 6164 6174 6120 3d20 6170 6974 6f6f  etadata = apitoo
-0002bff0: 6c73 5f6d 6573 7361 6765 732e 4f62 6a65  ls_messages.Obje
-0002c000: 6374 286e 616d 653d 6b65 792e 6e61 6d65  ct(name=key.name
-0002c010: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-0002c020: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c030: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c040: 2020 6275 636b 6574 3d6b 6579 2e62 7563    bucket=key.buc
-0002c050: 6b65 742e 6e61 6d65 2c0a 2020 2020 2020  ket.name,.      
-0002c060: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c070: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c080: 2020 2020 2020 2020 2020 636f 6e74 656e            conten
-0002c090: 7454 7970 653d 6b65 792e 636f 6e74 656e  tType=key.conten
-0002c0a0: 745f 7479 7065 2c0a 2020 2020 2020 2020  t_type,.        
-0002c0b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c0c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c0d0: 2020 2020 2020 2020 6574 6167 3d6b 6579          etag=key
-0002c0e0: 2e65 7461 672e 7374 7269 7028 2722 5c27  .etag.strip('"\'
-0002c0f0: 2729 290a 2020 2020 6473 745f 6f62 6a5f  ')).    dst_obj_
-0002c100: 6e61 6d65 203d 2073 656c 662e 4d61 6b65  name = self.Make
-0002c110: 5465 6d70 4e61 6d65 2827 6f62 6a65 6374  TempName('object
-0002c120: 2729 0a20 2020 2064 7374 5f6f 626a 5f6d  ').    dst_obj_m
-0002c130: 6574 6164 6174 6120 3d20 6170 6974 6f6f  etadata = apitoo
-0002c140: 6c73 5f6d 6573 7361 6765 732e 4f62 6a65  ls_messages.Obje
-0002c150: 6374 280a 2020 2020 2020 2020 6275 636b  ct(.        buck
-0002c160: 6574 3d62 7563 6b65 745f 7572 6932 2e62  et=bucket_uri2.b
-0002c170: 7563 6b65 745f 6e61 6d65 2c0a 2020 2020  ucket_name,.    
-0002c180: 2020 2020 6e61 6d65 3d64 7374 5f6f 626a      name=dst_obj
-0002c190: 5f6e 616d 652c 0a20 2020 2020 2020 2063  _name,.        c
-0002c1a0: 6f6e 7465 6e74 5479 7065 3d73 7263 5f6f  ontentType=src_o
-0002c1b0: 626a 5f6d 6574 6164 6174 612e 636f 6e74  bj_metadata.cont
-0002c1c0: 656e 7454 7970 6529 0a20 2020 2074 7261  entType).    tra
-0002c1d0: 636b 6572 5f66 696c 655f 6e61 6d65 203d  cker_file_name =
-0002c1e0: 2047 6574 5265 7772 6974 6554 7261 636b   GetRewriteTrack
-0002c1f0: 6572 4669 6c65 5061 7468 2873 7263 5f6f  erFilePath(src_o
-0002c200: 626a 5f6d 6574 6164 6174 612e 6275 636b  bj_metadata.buck
-0002c210: 6574 2c0a 2020 2020 2020 2020 2020 2020  et,.            
-0002c220: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c230: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c240: 2020 2020 2020 7372 635f 6f62 6a5f 6d65        src_obj_me
-0002c250: 7461 6461 7461 2e6e 616d 652c 0a20 2020  tadata.name,.   
-0002c260: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c270: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c280: 2020 2020 2020 2020 2020 2020 2020 2064                 d
-0002c290: 7374 5f6f 626a 5f6d 6574 6164 6174 612e  st_obj_metadata.
-0002c2a0: 6275 636b 6574 2c0a 2020 2020 2020 2020  bucket,.        
-0002c2b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c2c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c2d0: 2020 2020 2020 2020 2020 6473 745f 6f62            dst_ob
-0002c2e0: 6a5f 6d65 7461 6461 7461 2e6e 616d 652c  j_metadata.name,
-0002c2f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002c300: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c310: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c320: 2020 2073 656c 662e 7465 7374 5f61 7069     self.test_api
-0002c330: 290a 2020 2020 7472 793a 0a20 2020 2020  ).    try:.     
-0002c340: 2074 7279 3a0a 2020 2020 2020 2020 6773   try:.        gs
-0002c350: 7574 696c 5f61 7069 2e43 6f70 794f 626a  util_api.CopyObj
-0002c360: 6563 7428 7372 635f 6f62 6a5f 6d65 7461  ect(src_obj_meta
-0002c370: 6461 7461 2c0a 2020 2020 2020 2020 2020  data,.          
-0002c380: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c390: 2020 2020 6473 745f 6f62 6a5f 6d65 7461      dst_obj_meta
-0002c3a0: 6461 7461 2c0a 2020 2020 2020 2020 2020  data,.          
-0002c3b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c3c0: 2020 2020 7072 6f67 7265 7373 5f63 616c      progress_cal
-0002c3d0: 6c62 6163 6b3d 4861 6c74 696e 6752 6577  lback=HaltingRew
-0002c3e0: 7269 7465 4361 6c6c 6261 636b 4861 6e64  riteCallbackHand
-0002c3f0: 6c65 7228 0a20 2020 2020 2020 2020 2020  ler(.           
-0002c400: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c410: 2020 2020 2020 204f 4e45 5f4d 4942 202a         ONE_MIB *
-0002c420: 2032 292e 6361 6c6c 2c0a 2020 2020 2020   2).call,.      
-0002c430: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c440: 2020 2020 2020 2020 6d61 785f 6279 7465          max_byte
-0002c450: 735f 7065 725f 6361 6c6c 3d4f 4e45 5f4d  s_per_call=ONE_M
-0002c460: 4942 290a 2020 2020 2020 2020 7365 6c66  IB).        self
-0002c470: 2e66 6169 6c28 2745 7870 6563 7465 6420  .fail('Expected 
-0002c480: 5265 7772 6974 6548 616c 7445 7863 6570  RewriteHaltExcep
-0002c490: 7469 6f6e 2e27 290a 2020 2020 2020 6578  tion.').      ex
-0002c4a0: 6365 7074 2052 6577 7269 7465 4861 6c74  cept RewriteHalt
-0002c4b0: 4578 6365 7074 696f 6e3a 0a20 2020 2020  Exception:.     
-0002c4c0: 2020 2070 6173 730a 0a20 2020 2020 2023     pass..      #
-0002c4d0: 2054 7261 636b 6572 2066 696c 6520 7368   Tracker file sh
-0002c4e0: 6f75 6c64 2062 6520 6c65 6674 206f 7665  ould be left ove
-0002c4f0: 722e 0a20 2020 2020 2073 656c 662e 6173  r..      self.as
-0002c500: 7365 7274 5472 7565 286f 732e 7061 7468  sertTrue(os.path
-0002c510: 2e65 7869 7374 7328 7472 6163 6b65 725f  .exists(tracker_
-0002c520: 6669 6c65 5f6e 616d 6529 290a 0a20 2020  file_name))..   
-0002c530: 2020 2023 204e 6f77 2072 6573 756d 652e     # Now resume.
-0002c540: 2043 616c 6c62 6163 6b20 656e 7375 7265   Callback ensure
-0002c550: 7320 7765 2064 6964 6e27 7420 7374 6172  s we didn't star
-0002c560: 7420 6f76 6572 2e0a 2020 2020 2020 6773  t over..      gs
-0002c570: 7574 696c 5f61 7069 2e43 6f70 794f 626a  util_api.CopyObj
-0002c580: 6563 7428 0a20 2020 2020 2020 2020 2073  ect(.          s
-0002c590: 7263 5f6f 626a 5f6d 6574 6164 6174 612c  rc_obj_metadata,
-0002c5a0: 0a20 2020 2020 2020 2020 2064 7374 5f6f  .          dst_o
-0002c5b0: 626a 5f6d 6574 6164 6174 612c 0a20 2020  bj_metadata,.   
-0002c5c0: 2020 2020 2020 2070 726f 6772 6573 735f         progress_
-0002c5d0: 6361 6c6c 6261 636b 3d45 6e73 7572 6552  callback=EnsureR
-0002c5e0: 6577 7269 7465 5265 7375 6d65 4361 6c6c  ewriteResumeCall
-0002c5f0: 6261 636b 4861 6e64 6c65 7228 4f4e 455f  backHandler(ONE_
-0002c600: 4d49 4220 2a0a 2020 2020 2020 2020 2020  MIB *.          
-0002c610: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c630: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c640: 2020 2020 2032 292e 6361 6c6c 2c0a 2020       2).call,.  
-0002c650: 2020 2020 2020 2020 6d61 785f 6279 7465          max_byte
-0002c660: 735f 7065 725f 6361 6c6c 3d4f 4e45 5f4d  s_per_call=ONE_M
-0002c670: 4942 290a 0a20 2020 2020 2023 2043 6f70  IB)..      # Cop
-0002c680: 7920 636f 6d70 6c65 7465 643b 2074 7261  y completed; tra
-0002c690: 636b 6572 2066 696c 6520 7368 6f75 6c64  cker file should
-0002c6a0: 2062 6520 6465 6c65 7465 642e 0a20 2020   be deleted..   
-0002c6b0: 2020 2073 656c 662e 6173 7365 7274 4661     self.assertFa
-0002c6c0: 6c73 6528 6f73 2e70 6174 682e 6578 6973  lse(os.path.exis
-0002c6d0: 7473 2874 7261 636b 6572 5f66 696c 655f  ts(tracker_file_
-0002c6e0: 6e61 6d65 2929 0a0a 2020 2020 2020 7365  name))..      se
-0002c6f0: 6c66 2e61 7373 6572 7445 7175 616c 280a  lf.assertEqual(.
-0002c700: 2020 2020 2020 2020 2020 6773 7574 696c            gsutil
-0002c710: 5f61 7069 2e47 6574 4f62 6a65 6374 4d65  _api.GetObjectMe
-0002c720: 7461 6461 7461 2873 7263 5f6f 626a 5f6d  tadata(src_obj_m
-0002c730: 6574 6164 6174 612e 6275 636b 6574 2c0a  etadata.bucket,.
-0002c740: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002bf10: 2753 6c69 6365 6420 646f 776e 6c6f 6164  'Sliced download
+0002bf20: 2072 6571 7569 7265 7320 6661 7374 2063   requires fast c
+0002bf30: 7263 6d6f 642e 2729 0a20 2040 536b 6970  rcmod.').  @Skip
+0002bf40: 466f 7253 3328 274e 6f20 736c 6963 6564  ForS3('No sliced
+0002bf50: 2064 6f77 6e6c 6f61 6420 7375 7070 6f72   download suppor
+0002bf60: 7420 666f 7220 5333 2e27 290a 2020 6465  t for S3.').  de
+0002bf70: 6620 7465 7374 5f63 705f 736c 6963 6564  f test_cp_sliced
+0002bf80: 5f64 6f77 6e6c 6f61 645f 6469 7361 626c  _download_disabl
+0002bf90: 6564 5f63 726f 7373 5f70 726f 6365 7373  ed_cross_process
+0002bfa0: 2873 656c 6629 3a0a 2020 2020 2222 2254  (self):.    """T
+0002bfb0: 6573 7473 2074 656d 706f 7261 7279 2066  ests temporary f
+0002bfc0: 696c 6573 2061 7265 206e 6f74 206f 7270  iles are not orp
+0002bfd0: 6861 6e65 6420 6966 2073 6c69 6365 6420  haned if sliced 
+0002bfe0: 646f 776e 6c6f 6164 2069 7320 6469 7361  download is disa
+0002bff0: 626c 6564 2e0a 0a20 2020 2053 7065 6369  bled...    Speci
+0002c000: 6669 6361 6c6c 792c 2074 656d 706f 7261  fically, tempora
+0002c010: 7279 2066 696c 6573 2073 686f 756c 6420  ry files should 
+0002c020: 6265 2064 656c 6574 6564 2077 6865 6e20  be deleted when 
+0002c030: 7468 6520 636f 7272 6573 706f 6e64 696e  the correspondin
+0002c040: 670a 2020 2020 6e6f 6e2d 736c 6963 6564  g.    non-sliced
+0002c050: 2064 6f77 6e6c 6f61 6420 6973 2063 6f6d   download is com
+0002c060: 706c 6574 6564 2e0a 2020 2020 2222 220a  pleted..    """.
+0002c070: 2020 2020 6275 636b 6574 5f75 7269 203d      bucket_uri =
+0002c080: 2073 656c 662e 4372 6561 7465 4275 636b   self.CreateBuck
+0002c090: 6574 2829 0a20 2020 206f 626a 6563 745f  et().    object_
+0002c0a0: 7572 6920 3d20 7365 6c66 2e43 7265 6174  uri = self.Creat
+0002c0b0: 654f 626a 6563 7428 6275 636b 6574 5f75  eObject(bucket_u
+0002c0c0: 7269 3d62 7563 6b65 745f 7572 692c 0a20  ri=bucket_uri,. 
+0002c0d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c0e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c0f0: 2020 6f62 6a65 6374 5f6e 616d 653d 2766    object_name='f
+0002c100: 6f6f 272c 0a20 2020 2020 2020 2020 2020  oo',.           
+0002c110: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c120: 2020 2020 2020 2020 636f 6e74 656e 7473          contents
+0002c130: 3d62 2761 6263 6427 202a 2073 656c 662e  =b'abcd' * self.
+0002c140: 6861 6c74 5f73 697a 6529 0a20 2020 2066  halt_size).    f
+0002c150: 7061 7468 203d 2073 656c 662e 4372 6561  path = self.Crea
+0002c160: 7465 5465 6d70 4669 6c65 2829 0a20 2020  teTempFile().   
+0002c170: 2074 6573 745f 6361 6c6c 6261 636b 5f66   test_callback_f
+0002c180: 696c 6520 3d20 7365 6c66 2e43 7265 6174  ile = self.Creat
+0002c190: 6554 656d 7046 696c 6528 0a20 2020 2020  eTempFile(.     
+0002c1a0: 2020 2063 6f6e 7465 6e74 733d 7069 636b     contents=pick
+0002c1b0: 6c65 2e64 756d 7073 2848 616c 7469 6e67  le.dumps(Halting
+0002c1c0: 436f 7079 4361 6c6c 6261 636b 4861 6e64  CopyCallbackHand
+0002c1d0: 6c65 7228 4661 6c73 652c 2035 2929 290a  ler(False, 5))).
+0002c1e0: 0a20 2020 2062 6f74 6f5f 636f 6e66 6967  .    boto_config
+0002c1f0: 5f66 6f72 5f74 6573 7420 3d20 5b0a 2020  _for_test = [.  
+0002c200: 2020 2020 2020 2827 4753 5574 696c 272c        ('GSUtil',
+0002c210: 2027 7265 7375 6d61 626c 655f 7468 7265   'resumable_thre
+0002c220: 7368 6f6c 6427 2c20 7374 7228 7365 6c66  shold', str(self
+0002c230: 2e68 616c 745f 7369 7a65 2929 2c0a 2020  .halt_size)),.  
+0002c240: 2020 2020 2020 2827 4753 5574 696c 272c        ('GSUtil',
+0002c250: 2027 736c 6963 6564 5f6f 626a 6563 745f   'sliced_object_
+0002c260: 646f 776e 6c6f 6164 5f74 6872 6573 686f  download_thresho
+0002c270: 6c64 272c 2073 7472 2873 656c 662e 6861  ld', str(self.ha
+0002c280: 6c74 5f73 697a 6529 292c 0a20 2020 2020  lt_size)),.     
+0002c290: 2020 2028 2747 5355 7469 6c27 2c20 2773     ('GSUtil', 's
+0002c2a0: 6c69 6365 645f 6f62 6a65 6374 5f64 6f77  liced_object_dow
+0002c2b0: 6e6c 6f61 645f 6d61 785f 636f 6d70 6f6e  nload_max_compon
+0002c2c0: 656e 7473 272c 2027 3427 290a 2020 2020  ents', '4').    
+0002c2d0: 5d0a 0a20 2020 2077 6974 6820 5365 7442  ]..    with SetB
+0002c2e0: 6f74 6f43 6f6e 6669 6746 6f72 5465 7374  otoConfigForTest
+0002c2f0: 2862 6f74 6f5f 636f 6e66 6967 5f66 6f72  (boto_config_for
+0002c300: 5f74 6573 7429 3a0a 2020 2020 2020 7374  _test):.      st
+0002c310: 6465 7272 203d 2073 656c 662e 5275 6e47  derr = self.RunG
+0002c320: 7355 7469 6c28 5b0a 2020 2020 2020 2020  sUtil([.        
+0002c330: 2020 2763 7027 2c20 272d 2d74 6573 7463    'cp', '--testc
+0002c340: 616c 6c62 6163 6b66 696c 6527 2c20 7465  allbackfile', te
+0002c350: 7374 5f63 616c 6c62 6163 6b5f 6669 6c65  st_callback_file
+0002c360: 2c0a 2020 2020 2020 2020 2020 7375 7269  ,.          suri
+0002c370: 286f 626a 6563 745f 7572 6929 2c0a 2020  (object_uri),.  
+0002c380: 2020 2020 2020 2020 7375 7269 2866 7061          suri(fpa
+0002c390: 7468 290a 2020 2020 2020 5d2c 0a20 2020  th).      ],.   
+0002c3a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c3b0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0002c3c0: 6e5f 7374 6465 7272 3d54 7275 652c 0a20  n_stderr=True,. 
+0002c3d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c3e0: 2020 2020 2020 2020 2020 2020 2065 7870               exp
+0002c3f0: 6563 7465 645f 7374 6174 7573 3d31 290a  ected_status=1).
+0002c400: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+0002c410: 7449 6e28 276e 6f74 2064 6f77 6e6c 6f61  tIn('not downloa
+0002c420: 6465 6420 7375 6363 6573 7366 756c 6c79  ded successfully
+0002c430: 272c 2073 7464 6572 7229 0a20 2020 2020  ', stderr).     
+0002c440: 2023 2054 656d 706f 7261 7279 2064 6f77   # Temporary dow
+0002c450: 6e6c 6f61 6420 6669 6c65 2073 686f 756c  nload file shoul
+0002c460: 6420 6578 6973 742e 0a20 2020 2020 2073  d exist..      s
+0002c470: 656c 662e 6173 7365 7274 5472 7565 286f  elf.assertTrue(o
+0002c480: 732e 7061 7468 2e69 7366 696c 6528 6670  s.path.isfile(fp
+0002c490: 6174 6820 2b20 275f 2e67 7374 6d70 2729  ath + '_.gstmp')
+0002c4a0: 290a 0a20 2020 2020 2023 2045 6163 6820  )..      # Each 
+0002c4b0: 7472 6163 6b65 7220 6669 6c65 2073 686f  tracker file sho
+0002c4c0: 756c 6420 6578 6973 742e 0a20 2020 2020  uld exist..     
+0002c4d0: 2074 7261 636b 6572 5f66 696c 656e 616d   tracker_filenam
+0002c4e0: 6573 203d 2047 6574 536c 6963 6564 446f  es = GetSlicedDo
+0002c4f0: 776e 6c6f 6164 5472 6163 6b65 7246 696c  wnloadTrackerFil
+0002c500: 6550 6174 6873 280a 2020 2020 2020 2020  ePaths(.        
+0002c510: 2020 5374 6f72 6167 6555 726c 4672 6f6d    StorageUrlFrom
+0002c520: 5374 7269 6e67 2866 7061 7468 292c 2073  String(fpath), s
+0002c530: 656c 662e 7465 7374 5f61 7069 290a 2020  elf.test_api).  
+0002c540: 2020 2020 666f 7220 7472 6163 6b65 725f      for tracker_
+0002c550: 6669 6c65 6e61 6d65 2069 6e20 7472 6163  filename in trac
+0002c560: 6b65 725f 6669 6c65 6e61 6d65 733a 0a20  ker_filenames:. 
+0002c570: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+0002c580: 7274 5472 7565 286f 732e 7061 7468 2e69  rtTrue(os.path.i
+0002c590: 7366 696c 6528 7472 6163 6b65 725f 6669  sfile(tracker_fi
+0002c5a0: 6c65 6e61 6d65 2929 0a0a 2020 2020 2320  lename))..    # 
+0002c5b0: 4469 7361 626c 6520 736c 6963 6564 2064  Disable sliced d
+0002c5c0: 6f77 6e6c 6f61 6473 2062 7920 696e 6372  ownloads by incr
+0002c5d0: 6561 7369 6e67 2074 6865 2074 6872 6573  easing the thres
+0002c5e0: 686f 6c64 0a20 2020 2062 6f74 6f5f 636f  hold.    boto_co
+0002c5f0: 6e66 6967 5f66 6f72 5f74 6573 7420 3d20  nfig_for_test = 
+0002c600: 5b0a 2020 2020 2020 2020 2827 4753 5574  [.        ('GSUt
+0002c610: 696c 272c 2027 7265 7375 6d61 626c 655f  il', 'resumable_
+0002c620: 7468 7265 7368 6f6c 6427 2c20 7374 7228  threshold', str(
+0002c630: 7365 6c66 2e68 616c 745f 7369 7a65 2929  self.halt_size))
+0002c640: 2c0a 2020 2020 2020 2020 2827 4753 5574  ,.        ('GSUt
+0002c650: 696c 272c 2027 736c 6963 6564 5f6f 626a  il', 'sliced_obj
+0002c660: 6563 745f 646f 776e 6c6f 6164 5f74 6872  ect_download_thr
+0002c670: 6573 686f 6c64 272c 2073 7472 2873 656c  eshold', str(sel
+0002c680: 662e 6861 6c74 5f73 697a 6520 2a20 3529  f.halt_size * 5)
+0002c690: 292c 0a20 2020 2020 2020 2028 2747 5355  ),.        ('GSU
+0002c6a0: 7469 6c27 2c20 2773 6c69 6365 645f 6f62  til', 'sliced_ob
+0002c6b0: 6a65 6374 5f64 6f77 6e6c 6f61 645f 6d61  ject_download_ma
+0002c6c0: 785f 636f 6d70 6f6e 656e 7473 272c 2027  x_components', '
+0002c6d0: 3427 290a 2020 2020 5d0a 0a20 2020 2077  4').    ]..    w
+0002c6e0: 6974 6820 5365 7442 6f74 6f43 6f6e 6669  ith SetBotoConfi
+0002c6f0: 6746 6f72 5465 7374 2862 6f74 6f5f 636f  gForTest(boto_co
+0002c700: 6e66 6967 5f66 6f72 5f74 6573 7429 3a0a  nfig_for_test):.
+0002c710: 2020 2020 2020 7374 6465 7272 203d 2073        stderr = s
+0002c720: 656c 662e 5275 6e47 7355 7469 6c28 5b27  elf.RunGsUtil(['
+0002c730: 6370 272c 2073 7572 6928 6f62 6a65 6374  cp', suri(object
+0002c740: 5f75 7269 292c 2066 7061 7468 5d2c 0a20  _uri), fpath],. 
 0002c750: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c760: 2020 2020 2020 2073 7263 5f6f 626a 5f6d         src_obj_m
-0002c770: 6574 6164 6174 612e 6e61 6d65 2c0a 2020  etadata.name,.  
-0002c780: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c7a0: 2020 2020 2066 6965 6c64 733d 5b27 6375       fields=['cu
-0002c7b0: 7374 6f6d 6572 456e 6372 7970 7469 6f6e  stomerEncryption
-0002c7c0: 272c 0a20 2020 2020 2020 2020 2020 2020  ',.             
-0002c7d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c7e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c7f0: 2020 276d 6435 4861 7368 275d 292e 6d64    'md5Hash']).md
-0002c800: 3548 6173 682c 0a20 2020 2020 2020 2020  5Hash,.         
-0002c810: 2067 7375 7469 6c5f 6170 692e 4765 744f   gsutil_api.GetO
-0002c820: 626a 6563 744d 6574 6164 6174 6128 6473  bjectMetadata(ds
-0002c830: 745f 6f62 6a5f 6d65 7461 6461 7461 2e62  t_obj_metadata.b
-0002c840: 7563 6b65 742c 0a20 2020 2020 2020 2020  ucket,.         
-0002c850: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c860: 2020 2020 2020 2020 2020 2020 2020 6473                ds
-0002c870: 745f 6f62 6a5f 6d65 7461 6461 7461 2e6e  t_obj_metadata.n
-0002c880: 616d 652c 0a20 2020 2020 2020 2020 2020  ame,.           
-0002c890: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c8a0: 2020 2020 2020 2020 2020 2020 6669 656c              fiel
-0002c8b0: 6473 3d5b 2763 7573 746f 6d65 7245 6e63  ds=['customerEnc
-0002c8c0: 7279 7074 696f 6e27 2c0a 2020 2020 2020  ryption',.      
-0002c8d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c8e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c8f0: 2020 2020 2020 2020 2027 6d64 3548 6173           'md5Has
-0002c900: 6827 5d29 2e6d 6435 4861 7368 2c0a 2020  h']).md5Hash,.  
-0002c910: 2020 2020 2020 2020 2745 7272 6f72 3a20          'Error: 
-0002c920: 5265 7772 6974 7465 6e20 6f62 6a65 6374  Rewritten object
-0002c930: 5c27 7320 6861 7368 2064 6f65 736e 5c27  \'s hash doesn\'
-0002c940: 7420 6d61 7463 6820 736f 7572 6365 206f  t match source o
-0002c950: 626a 6563 742e 2729 0a20 2020 2066 696e  bject.').    fin
-0002c960: 616c 6c79 3a0a 2020 2020 2020 2320 436c  ally:.      # Cl
-0002c970: 6561 6e20 7570 2069 6620 736f 6d65 7468  ean up if someth
-0002c980: 696e 6720 7765 6e74 2077 726f 6e67 2e0a  ing went wrong..
-0002c990: 2020 2020 2020 4465 6c65 7465 5472 6163        DeleteTrac
-0002c9a0: 6b65 7246 696c 6528 7472 6163 6b65 725f  kerFile(tracker_
-0002c9b0: 6669 6c65 5f6e 616d 6529 0a0a 2020 6465  file_name)..  de
-0002c9c0: 6620 7465 7374 5f72 6577 7269 7465 5f63  f test_rewrite_c
-0002c9d0: 705f 7265 7375 6d65 5f73 6f75 7263 655f  p_resume_source_
-0002c9e0: 6368 616e 6765 6428 7365 6c66 293a 0a20  changed(self):. 
-0002c9f0: 2020 2022 2222 5465 7374 7320 7468 6174     """Tests that
-0002ca00: 2052 6577 7269 7465 2073 7461 7274 7320   Rewrite starts 
-0002ca10: 6f76 6572 2077 6865 6e20 7468 6520 736f  over when the so
-0002ca20: 7572 6365 206f 626a 6563 7420 6861 7320  urce object has 
-0002ca30: 6368 616e 6765 642e 2222 220a 2020 2020  changed.""".    
-0002ca40: 6966 2073 656c 662e 7465 7374 5f61 7069  if self.test_api
-0002ca50: 203d 3d20 4170 6953 656c 6563 746f 722e   == ApiSelector.
-0002ca60: 584d 4c3a 0a20 2020 2020 2072 6574 7572  XML:.      retur
-0002ca70: 6e20 756e 6974 7465 7374 2e73 6b69 7028  n unittest.skip(
-0002ca80: 2752 6577 7269 7465 2041 5049 2069 7320  'Rewrite API is 
-0002ca90: 6f6e 6c79 2073 7570 706f 7274 6564 2069  only supported i
-0002caa0: 6e20 4a53 4f4e 2e27 290a 2020 2020 6275  n JSON.').    bu
-0002cab0: 636b 6574 5f75 7269 203d 2073 656c 662e  cket_uri = self.
-0002cac0: 4372 6561 7465 4275 636b 6574 2829 0a20  CreateBucket(). 
-0002cad0: 2020 2023 2053 6563 6f6e 6420 6275 636b     # Second buck
-0002cae0: 6574 206e 6565 6473 2074 6f20 6265 2061  et needs to be a
-0002caf0: 2064 6966 6665 7265 6e74 2073 746f 7261   different stora
-0002cb00: 6765 2063 6c61 7373 2073 6f20 7468 6520  ge class so the 
-0002cb10: 7365 7276 6963 650a 2020 2020 2320 6163  service.    # ac
-0002cb20: 7475 616c 6c79 2072 6577 7269 7465 7320  tually rewrites 
-0002cb30: 7468 6520 6279 7465 732e 0a20 2020 2062  the bytes..    b
-0002cb40: 7563 6b65 745f 7572 6932 203d 2073 656c  ucket_uri2 = sel
-0002cb50: 662e 4372 6561 7465 4275 636b 6574 280a  f.CreateBucket(.
-0002cb60: 2020 2020 2020 2020 7374 6f72 6167 655f          storage_
-0002cb70: 636c 6173 733d 2764 7572 6162 6c65 5f72  class='durable_r
-0002cb80: 6564 7563 6564 5f61 7661 696c 6162 696c  educed_availabil
-0002cb90: 6974 7927 290a 2020 2020 2320 6d61 7842  ity').    # maxB
-0002cba0: 7974 6573 5065 7243 616c 6c20 6d75 7374  ytesPerCall must
-0002cbb0: 2062 6520 3e3d 2031 204d 6942 2c20 736f   be >= 1 MiB, so
-0002cbc0: 2063 7265 6174 6520 616e 206f 626a 6563   create an objec
-0002cbd0: 7420 3e20 3220 4d69 4220 6265 6361 7573  t > 2 MiB becaus
-0002cbe0: 6520 7765 0a20 2020 2023 206e 6565 6420  e we.    # need 
-0002cbf0: 3220 7265 7370 6f6e 7365 2066 726f 6d20  2 response from 
-0002cc00: 7468 6520 7365 7276 6963 653a 2031 2073  the service: 1 s
-0002cc10: 7563 6365 7373 2c20 3120 6661 696c 7572  uccess, 1 failur
-0002cc20: 6520 7072 696f 7220 746f 0a20 2020 2023  e prior to.    #
-0002cc30: 2063 6f6d 706c 6574 696f 6e2e 0a20 2020   completion..   
-0002cc40: 206f 626a 6563 745f 7572 6920 3d20 7365   object_uri = se
-0002cc50: 6c66 2e43 7265 6174 654f 626a 6563 7428  lf.CreateObject(
-0002cc60: 6275 636b 6574 5f75 7269 3d62 7563 6b65  bucket_uri=bucke
-0002cc70: 745f 7572 692c 0a20 2020 2020 2020 2020  t_uri,.         
-0002cc80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002cc90: 2020 2020 2020 2020 2020 6f62 6a65 6374            object
-0002cca0: 5f6e 616d 653d 2766 6f6f 272c 0a20 2020  _name='foo',.   
-0002ccb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ccc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ccd0: 636f 6e74 656e 7473 3d28 6227 3132 2720  contents=(b'12' 
-0002cce0: 2a20 4f4e 455f 4d49 4229 202b 2062 2762  * ONE_MIB) + b'b
-0002ccf0: 6172 272c 0a20 2020 2020 2020 2020 2020  ar',.           
-0002cd00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002cd10: 2020 2020 2020 2020 7072 6566 6572 5f6a          prefer_j
-0002cd20: 736f 6e5f 6170 693d 5472 7565 290a 2020  son_api=True).  
-0002cd30: 2020 6773 7574 696c 5f61 7069 203d 2047    gsutil_api = G
-0002cd40: 6373 4a73 6f6e 4170 6928 4275 636b 6574  csJsonApi(Bucket
-0002cd50: 5374 6f72 6167 6555 7269 2c20 6c6f 6767  StorageUri, logg
-0002cd60: 696e 672e 6765 744c 6f67 6765 7228 292c  ing.getLogger(),
-0002cd70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002cd80: 2020 2020 2020 2020 2020 2020 2044 6973               Dis
-0002cd90: 6361 7264 4d65 7373 6167 6573 5175 6575  cardMessagesQueu
-0002cda0: 6528 292c 2073 656c 662e 6465 6661 756c  e(), self.defaul
-0002cdb0: 745f 7072 6f76 6964 6572 290a 2020 2020  t_provider).    
-0002cdc0: 6b65 7920 3d20 6f62 6a65 6374 5f75 7269  key = object_uri
-0002cdd0: 2e67 6574 5f6b 6579 2829 0a20 2020 2073  .get_key().    s
-0002cde0: 7263 5f6f 626a 5f6d 6574 6164 6174 6120  rc_obj_metadata 
-0002cdf0: 3d20 6170 6974 6f6f 6c73 5f6d 6573 7361  = apitools_messa
-0002ce00: 6765 732e 4f62 6a65 6374 286e 616d 653d  ges.Object(name=
-0002ce10: 6b65 792e 6e61 6d65 2c0a 2020 2020 2020  key.name,.      
-0002ce20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ce30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ce40: 2020 2020 2020 2020 2020 6275 636b 6574            bucket
-0002ce50: 3d6b 6579 2e62 7563 6b65 742e 6e61 6d65  =key.bucket.name
-0002ce60: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-0002ce70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ce80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ce90: 2020 636f 6e74 656e 7454 7970 653d 6b65    contentType=ke
-0002cea0: 792e 636f 6e74 656e 745f 7479 7065 2c0a  y.content_type,.
+0002c760: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+0002c770: 7572 6e5f 7374 6465 7272 3d54 7275 6529  urn_stderr=True)
+0002c780: 0a20 2020 2020 2073 656c 662e 6173 7365  .      self.asse
+0002c790: 7274 4e6f 7449 6e28 2752 6573 756d 696e  rtNotIn('Resumin
+0002c7a0: 6720 646f 776e 6c6f 6164 272c 2073 7464  g download', std
+0002c7b0: 6572 7229 0a20 2020 2020 2023 2054 656d  err).      # Tem
+0002c7c0: 706f 7261 7279 2064 6f77 6e6c 6f61 6420  porary download 
+0002c7d0: 6669 6c65 2073 686f 756c 6420 6861 7665  file should have
+0002c7e0: 2062 6565 6e20 6465 6c65 7465 642e 0a20   been deleted.. 
+0002c7f0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+0002c800: 4661 6c73 6528 6f73 2e70 6174 682e 6973  False(os.path.is
+0002c810: 6669 6c65 2866 7061 7468 202b 2027 5f2e  file(fpath + '_.
+0002c820: 6773 746d 7027 2929 0a0a 2020 2020 2020  gstmp'))..      
+0002c830: 2320 4561 6368 2074 7261 636b 6572 2066  # Each tracker f
+0002c840: 696c 6520 7368 6f75 6c64 2068 6176 6520  ile should have 
+0002c850: 6265 656e 2064 656c 6574 6564 2e0a 2020  been deleted..  
+0002c860: 2020 2020 666f 7220 7472 6163 6b65 725f      for tracker_
+0002c870: 6669 6c65 6e61 6d65 2069 6e20 7472 6163  filename in trac
+0002c880: 6b65 725f 6669 6c65 6e61 6d65 733a 0a20  ker_filenames:. 
+0002c890: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+0002c8a0: 7274 4661 6c73 6528 6f73 2e70 6174 682e  rtFalse(os.path.
+0002c8b0: 6973 6669 6c65 2874 7261 636b 6572 5f66  isfile(tracker_f
+0002c8c0: 696c 656e 616d 6529 290a 2020 2020 2020  ilename)).      
+0002c8d0: 7769 7468 206f 7065 6e28 6670 6174 682c  with open(fpath,
+0002c8e0: 2027 7262 2729 2061 7320 663a 0a20 2020   'rb') as f:.   
+0002c8f0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+0002c900: 4571 7561 6c28 662e 7265 6164 2829 2c20  Equal(f.read(), 
+0002c910: 6227 6162 6364 2720 2a20 7365 6c66 2e68  b'abcd' * self.h
+0002c920: 616c 745f 7369 7a65 290a 0a20 2040 536b  alt_size)..  @Sk
+0002c930: 6970 466f 7253 3328 274e 6f20 7265 7375  ipForS3('No resu
+0002c940: 6d61 626c 6520 7570 6c6f 6164 2073 7570  mable upload sup
+0002c950: 706f 7274 2066 6f72 2053 332e 2729 0a20  port for S3.'). 
+0002c960: 2064 6566 2074 6573 745f 6370 5f72 6573   def test_cp_res
+0002c970: 756d 6162 6c65 5f75 706c 6f61 645f 7374  umable_upload_st
+0002c980: 6172 745f 6f76 6572 5f68 7474 705f 6572  art_over_http_er
+0002c990: 726f 7228 7365 6c66 293a 0a20 2020 2066  ror(self):.    f
+0002c9a0: 6f72 2073 7461 7274 5f6f 7665 725f 6572  or start_over_er
+0002c9b0: 726f 7220 696e 2028 0a20 2020 2020 2020  ror in (.       
+0002c9c0: 2034 3033 2c20 2023 2049 6620 7573 6572   403,  # If user
+0002c9d0: 2064 6f65 736e 2774 2068 6176 6520 7374   doesn't have st
+0002c9e0: 6f72 6167 652e 6275 636b 6574 732e 6765  orage.buckets.ge
+0002c9f0: 7420 6163 6365 7373 2074 6f20 6465 7374  t access to dest
+0002ca00: 2062 7563 6b65 742e 0a20 2020 2020 2020   bucket..       
+0002ca10: 2034 3034 2c20 2023 2049 6620 7468 6520   404,  # If the 
+0002ca20: 6465 7374 2062 7563 6b65 7420 6578 6973  dest bucket exis
+0002ca30: 7473 2c20 6275 7420 7468 6520 6465 7374  ts, but the dest
+0002ca40: 206f 626a 6563 7420 646f 6573 206e 6f74   object does not
+0002ca50: 2e0a 2020 2020 2020 2020 3431 3029 3a20  ..        410): 
+0002ca60: 2023 2049 6620 7468 6520 7365 7276 6963   # If the servic
+0002ca70: 6520 7465 6c6c 7320 7573 2074 6f20 7265  e tells us to re
+0002ca80: 7374 6172 7420 7468 6520 7570 6c6f 6164  start the upload
+0002ca90: 2066 726f 6d20 7363 7261 7463 682e 0a20   from scratch.. 
+0002caa0: 2020 2020 2073 656c 662e 7374 6172 745f       self.start_
+0002cab0: 6f76 6572 5f65 7272 6f72 5f74 6573 745f  over_error_test_
+0002cac0: 6865 6c70 6572 2873 7461 7274 5f6f 7665  helper(start_ove
+0002cad0: 725f 6572 726f 7229 0a0a 2020 6465 6620  r_error)..  def 
+0002cae0: 7374 6172 745f 6f76 6572 5f65 7272 6f72  start_over_error
+0002caf0: 5f74 6573 745f 6865 6c70 6572 2873 656c  _test_helper(sel
+0002cb00: 662c 2068 7474 705f 6572 726f 725f 6e75  f, http_error_nu
+0002cb10: 6d29 3a0a 2020 2020 6275 636b 6574 5f75  m):.    bucket_u
+0002cb20: 7269 203d 2073 656c 662e 4372 6561 7465  ri = self.Create
+0002cb30: 4275 636b 6574 2829 0a20 2020 2023 2054  Bucket().    # T
+0002cb40: 6865 206f 626a 6563 7420 636f 6e74 656e  he object conten
+0002cb50: 7473 206e 6565 6420 746f 2062 6520 6661  ts need to be fa
+0002cb60: 6972 6c79 206c 6172 6765 2074 6f20 6176  irly large to av
+0002cb70: 6f69 6420 7468 6520 7261 6365 2063 6f6e  oid the race con
+0002cb80: 6469 7469 6f6e 0a20 2020 2023 2077 6865  dition.    # whe
+0002cb90: 7265 2074 6865 2063 6f6e 7465 6e74 7320  re the contents 
+0002cba0: 6669 6e69 7368 2075 706c 6f61 6469 6e67  finish uploading
+0002cbb0: 2062 6566 6f72 6520 7765 2061 7274 6966   before we artif
+0002cbc0: 6963 616c 6c79 2068 616c 7420 7468 6520  ically halt the 
+0002cbd0: 636f 7079 2e0a 2020 2020 7261 6e64 5f63  copy..    rand_c
+0002cbe0: 6861 7273 203d 2067 6574 5f72 616e 646f  hars = get_rando
+0002cbf0: 6d5f 6173 6369 695f 6368 6172 7328 7369  m_ascii_chars(si
+0002cc00: 7a65 3d28 4f4e 455f 4d49 4220 2a20 3429  ze=(ONE_MIB * 4)
+0002cc10: 290a 2020 2020 6670 6174 6820 3d20 7365  ).    fpath = se
+0002cc20: 6c66 2e43 7265 6174 6554 656d 7046 696c  lf.CreateTempFil
+0002cc30: 6528 636f 6e74 656e 7473 3d72 616e 645f  e(contents=rand_
+0002cc40: 6368 6172 7329 0a20 2020 2062 6f74 6f5f  chars).    boto_
+0002cc50: 636f 6e66 6967 5f66 6f72 5f74 6573 7420  config_for_test 
+0002cc60: 3d20 2827 4753 5574 696c 272c 2027 7265  = ('GSUtil', 're
+0002cc70: 7375 6d61 626c 655f 7468 7265 7368 6f6c  sumable_threshol
+0002cc80: 6427 2c20 7374 7228 4f4e 455f 4b49 4229  d', str(ONE_KIB)
+0002cc90: 290a 2020 2020 6966 2073 656c 662e 7465  ).    if self.te
+0002cca0: 7374 5f61 7069 203d 3d20 4170 6953 656c  st_api == ApiSel
+0002ccb0: 6563 746f 722e 4a53 4f4e 3a0a 2020 2020  ector.JSON:.    
+0002ccc0: 2020 7465 7374 5f63 616c 6c62 6163 6b5f    test_callback_
+0002ccd0: 6669 6c65 203d 2073 656c 662e 4372 6561  file = self.Crea
+0002cce0: 7465 5465 6d70 4669 6c65 280a 2020 2020  teTempFile(.    
+0002ccf0: 2020 2020 2020 636f 6e74 656e 7473 3d70        contents=p
+0002cd00: 6963 6b6c 652e 6475 6d70 7328 5f4a 534f  ickle.dumps(_JSO
+0002cd10: 4e46 6f72 6365 4854 5450 4572 726f 7243  NForceHTTPErrorC
+0002cd20: 6f70 7943 616c 6c62 6163 6b48 616e 646c  opyCallbackHandl
+0002cd30: 6572 2835 2c20 3430 3429 2929 0a20 2020  er(5, 404))).   
+0002cd40: 2065 6c69 6620 7365 6c66 2e74 6573 745f   elif self.test_
+0002cd50: 6170 6920 3d3d 2041 7069 5365 6c65 6374  api == ApiSelect
+0002cd60: 6f72 2e58 4d4c 3a0a 2020 2020 2020 7465  or.XML:.      te
+0002cd70: 7374 5f63 616c 6c62 6163 6b5f 6669 6c65  st_callback_file
+0002cd80: 203d 2073 656c 662e 4372 6561 7465 5465   = self.CreateTe
+0002cd90: 6d70 4669 6c65 2863 6f6e 7465 6e74 733d  mpFile(contents=
+0002cda0: 7069 636b 6c65 2e64 756d 7073 280a 2020  pickle.dumps(.  
+0002cdb0: 2020 2020 2020 2020 5f58 4d4c 5265 7375          _XMLResu
+0002cdc0: 6d61 626c 6555 706c 6f61 6453 7461 7274  mableUploadStart
+0002cdd0: 4f76 6572 436f 7079 4361 6c6c 6261 636b  OverCopyCallback
+0002cde0: 4861 6e64 6c65 7228 3529 2929 0a0a 2020  Handler(5)))..  
+0002cdf0: 2020 7769 7468 2053 6574 426f 746f 436f    with SetBotoCo
+0002ce00: 6e66 6967 466f 7254 6573 7428 5b62 6f74  nfigForTest([bot
+0002ce10: 6f5f 636f 6e66 6967 5f66 6f72 5f74 6573  o_config_for_tes
+0002ce20: 745d 293a 0a20 2020 2020 2073 7464 6572  t]):.      stder
+0002ce30: 7220 3d20 7365 6c66 2e52 756e 4773 5574  r = self.RunGsUt
+0002ce40: 696c 285b 0a20 2020 2020 2020 2020 2027  il([.          '
+0002ce50: 6370 272c 2027 2d2d 7465 7374 6361 6c6c  cp', '--testcall
+0002ce60: 6261 636b 6669 6c65 272c 2074 6573 745f  backfile', test_
+0002ce70: 6361 6c6c 6261 636b 5f66 696c 652c 2066  callback_file, f
+0002ce80: 7061 7468 2c0a 2020 2020 2020 2020 2020  path,.          
+0002ce90: 7375 7269 2862 7563 6b65 745f 7572 6929  suri(bucket_uri)
+0002cea0: 0a20 2020 2020 205d 2c0a 2020 2020 2020  .      ],.      
 0002ceb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002cec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ced0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002cee0: 6574 6167 3d6b 6579 2e65 7461 672e 7374  etag=key.etag.st
-0002cef0: 7269 7028 2722 5c27 2729 290a 2020 2020  rip('"\'')).    
-0002cf00: 6473 745f 6f62 6a5f 6e61 6d65 203d 2073  dst_obj_name = s
-0002cf10: 656c 662e 4d61 6b65 5465 6d70 4e61 6d65  elf.MakeTempName
-0002cf20: 2827 6f62 6a65 6374 2729 0a20 2020 2064  ('object').    d
-0002cf30: 7374 5f6f 626a 5f6d 6574 6164 6174 6120  st_obj_metadata 
-0002cf40: 3d20 6170 6974 6f6f 6c73 5f6d 6573 7361  = apitools_messa
-0002cf50: 6765 732e 4f62 6a65 6374 280a 2020 2020  ges.Object(.    
-0002cf60: 2020 2020 6275 636b 6574 3d62 7563 6b65      bucket=bucke
-0002cf70: 745f 7572 6932 2e62 7563 6b65 745f 6e61  t_uri2.bucket_na
-0002cf80: 6d65 2c0a 2020 2020 2020 2020 6e61 6d65  me,.        name
-0002cf90: 3d64 7374 5f6f 626a 5f6e 616d 652c 0a20  =dst_obj_name,. 
-0002cfa0: 2020 2020 2020 2063 6f6e 7465 6e74 5479         contentTy
-0002cfb0: 7065 3d73 7263 5f6f 626a 5f6d 6574 6164  pe=src_obj_metad
-0002cfc0: 6174 612e 636f 6e74 656e 7454 7970 6529  ata.contentType)
-0002cfd0: 0a20 2020 2074 7261 636b 6572 5f66 696c  .    tracker_fil
-0002cfe0: 655f 6e61 6d65 203d 2047 6574 5265 7772  e_name = GetRewr
-0002cff0: 6974 6554 7261 636b 6572 4669 6c65 5061  iteTrackerFilePa
-0002d000: 7468 2873 7263 5f6f 626a 5f6d 6574 6164  th(src_obj_metad
-0002d010: 6174 612e 6275 636b 6574 2c0a 2020 2020  ata.bucket,.    
-0002d020: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d030: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d040: 2020 2020 2020 2020 2020 2020 2020 7372                sr
-0002d050: 635f 6f62 6a5f 6d65 7461 6461 7461 2e6e  c_obj_metadata.n
-0002d060: 616d 652c 0a20 2020 2020 2020 2020 2020  ame,.           
-0002d070: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d080: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d090: 2020 2020 2020 2064 7374 5f6f 626a 5f6d         dst_obj_m
-0002d0a0: 6574 6164 6174 612e 6275 636b 6574 2c0a  etadata.bucket,.
-0002d0b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d0c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d0d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d0e0: 2020 6473 745f 6f62 6a5f 6d65 7461 6461    dst_obj_metada
-0002d0f0: 7461 2e6e 616d 652c 0a20 2020 2020 2020  ta.name,.       
-0002d100: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d110: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d120: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0002d130: 7465 7374 5f61 7069 290a 2020 2020 7472  test_api).    tr
-0002d140: 793a 0a20 2020 2020 2074 7279 3a0a 2020  y:.      try:.  
-0002d150: 2020 2020 2020 6773 7574 696c 5f61 7069        gsutil_api
-0002d160: 2e43 6f70 794f 626a 6563 7428 7372 635f  .CopyObject(src_
-0002d170: 6f62 6a5f 6d65 7461 6461 7461 2c0a 2020  obj_metadata,.  
-0002d180: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d190: 2020 2020 2020 2020 2020 2020 6473 745f              dst_
-0002d1a0: 6f62 6a5f 6d65 7461 6461 7461 2c0a 2020  obj_metadata,.  
-0002d1b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d1c0: 2020 2020 2020 2020 2020 2020 7072 6f67              prog
-0002d1d0: 7265 7373 5f63 616c 6c62 6163 6b3d 4861  ress_callback=Ha
-0002d1e0: 6c74 696e 6752 6577 7269 7465 4361 6c6c  ltingRewriteCall
-0002d1f0: 6261 636b 4861 6e64 6c65 7228 0a20 2020  backHandler(.   
-0002d200: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d210: 2020 2020 2020 2020 2020 2020 2020 204f                 O
-0002d220: 4e45 5f4d 4942 202a 2032 292e 6361 6c6c  NE_MIB * 2).call
-0002d230: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-0002d240: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d250: 6d61 785f 6279 7465 735f 7065 725f 6361  max_bytes_per_ca
-0002d260: 6c6c 3d4f 4e45 5f4d 4942 290a 2020 2020  ll=ONE_MIB).    
-0002d270: 2020 2020 7365 6c66 2e66 6169 6c28 2745      self.fail('E
-0002d280: 7870 6563 7465 6420 5265 7772 6974 6548  xpected RewriteH
-0002d290: 616c 7445 7863 6570 7469 6f6e 2e27 290a  altException.').
-0002d2a0: 2020 2020 2020 6578 6365 7074 2052 6577        except Rew
-0002d2b0: 7269 7465 4861 6c74 4578 6365 7074 696f  riteHaltExceptio
-0002d2c0: 6e3a 0a20 2020 2020 2020 2070 6173 730a  n:.        pass.
-0002d2d0: 2020 2020 2020 2320 4f76 6572 7772 6974        # Overwrit
-0002d2e0: 6520 7468 6520 6f72 6967 696e 616c 206f  e the original o
-0002d2f0: 626a 6563 742e 0a20 2020 2020 206f 626a  bject..      obj
-0002d300: 6563 745f 7572 6932 203d 2073 656c 662e  ect_uri2 = self.
-0002d310: 4372 6561 7465 4f62 6a65 6374 2862 7563  CreateObject(buc
-0002d320: 6b65 745f 7572 693d 6275 636b 6574 5f75  ket_uri=bucket_u
-0002d330: 7269 2c0a 2020 2020 2020 2020 2020 2020  ri,.            
-0002d340: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d350: 2020 2020 2020 2020 2020 6f62 6a65 6374            object
-0002d360: 5f6e 616d 653d 2766 6f6f 272c 0a20 2020  _name='foo',.   
+0002cec0: 2020 2020 2020 2020 7265 7475 726e 5f73          return_s
+0002ced0: 7464 6572 723d 5472 7565 290a 2020 2020  tderr=True).    
+0002cee0: 2020 7365 6c66 2e61 7373 6572 7449 6e28    self.assertIn(
+0002cef0: 2752 6573 7461 7274 696e 6720 7570 6c6f  'Restarting uplo
+0002cf00: 6164 206f 6627 2c20 7374 6465 7272 290a  ad of', stderr).
+0002cf10: 0a20 2064 6566 2074 6573 745f 6370 5f6d  .  def test_cp_m
+0002cf20: 696e 7573 5f63 2873 656c 6629 3a0a 2020  inus_c(self):.  
+0002cf30: 2020 6275 636b 6574 5f75 7269 203d 2073    bucket_uri = s
+0002cf40: 656c 662e 4372 6561 7465 4275 636b 6574  elf.CreateBucket
+0002cf50: 2829 0a20 2020 206f 626a 6563 745f 7572  ().    object_ur
+0002cf60: 6920 3d20 7365 6c66 2e43 7265 6174 654f  i = self.CreateO
+0002cf70: 626a 6563 7428 6275 636b 6574 5f75 7269  bject(bucket_uri
+0002cf80: 3d62 7563 6b65 745f 7572 692c 0a20 2020  =bucket_uri,.   
+0002cf90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cfa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cfb0: 6f62 6a65 6374 5f6e 616d 653d 2766 6f6f  object_name='foo
+0002cfc0: 272c 0a20 2020 2020 2020 2020 2020 2020  ',.             
+0002cfd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cfe0: 2020 2020 2020 636f 6e74 656e 7473 3d62        contents=b
+0002cff0: 2766 6f6f 2729 0a20 2020 2073 656c 662e  'foo').    self.
+0002d000: 5275 6e47 7355 7469 6c28 5b0a 2020 2020  RunGsUtil([.    
+0002d010: 2020 2020 2763 7027 2c20 272d 6327 2c0a      'cp', '-c',.
+0002d020: 2020 2020 2020 2020 7375 7269 2862 7563          suri(buc
+0002d030: 6b65 745f 7572 6929 202b 2027 2f66 6f6f  ket_uri) + '/foo
+0002d040: 3227 2c0a 2020 2020 2020 2020 7375 7269  2',.        suri
+0002d050: 286f 626a 6563 745f 7572 6929 2c0a 2020  (object_uri),.  
+0002d060: 2020 2020 2020 7375 7269 2862 7563 6b65        suri(bucke
+0002d070: 745f 7572 6929 202b 2027 2f64 6972 2f27  t_uri) + '/dir/'
+0002d080: 0a20 2020 205d 2c0a 2020 2020 2020 2020  .    ],.        
+0002d090: 2020 2020 2020 2020 2020 2065 7870 6563             expec
+0002d0a0: 7465 645f 7374 6174 7573 3d31 290a 2020  ted_status=1).  
+0002d0b0: 2020 7365 6c66 2e52 756e 4773 5574 696c    self.RunGsUtil
+0002d0c0: 285b 2773 7461 7427 2c20 2725 732f 6469  (['stat', '%s/di
+0002d0d0: 722f 666f 6f27 2025 2073 7572 6928 6275  r/foo' % suri(bu
+0002d0e0: 636b 6574 5f75 7269 295d 2c20 666f 7263  cket_uri)], forc
+0002d0f0: 655f 6773 7574 696c 3d54 7275 6529 0a0a  e_gsutil=True)..
+0002d100: 2020 6465 6620 7465 7374 5f72 6577 7269    def test_rewri
+0002d110: 7465 5f63 7028 7365 6c66 293a 0a20 2020  te_cp(self):.   
+0002d120: 2022 2222 5465 7374 7320 7468 6520 4a53   """Tests the JS
+0002d130: 4f4e 2052 6577 7269 7465 2041 5049 2e22  ON Rewrite API."
+0002d140: 2222 0a20 2020 2069 6620 7365 6c66 2e74  "".    if self.t
+0002d150: 6573 745f 6170 6920 3d3d 2041 7069 5365  est_api == ApiSe
+0002d160: 6c65 6374 6f72 2e58 4d4c 3a0a 2020 2020  lector.XML:.    
+0002d170: 2020 7265 7475 726e 2075 6e69 7474 6573    return unittes
+0002d180: 742e 736b 6970 2827 5265 7772 6974 6520  t.skip('Rewrite 
+0002d190: 4150 4920 6973 206f 6e6c 7920 7375 7070  API is only supp
+0002d1a0: 6f72 7465 6420 696e 204a 534f 4e2e 2729  orted in JSON.')
+0002d1b0: 0a20 2020 2062 7563 6b65 745f 7572 6920  .    bucket_uri 
+0002d1c0: 3d20 7365 6c66 2e43 7265 6174 6542 7563  = self.CreateBuc
+0002d1d0: 6b65 7428 290a 2020 2020 6f62 6a65 6374  ket().    object
+0002d1e0: 5f75 7269 203d 2073 656c 662e 4372 6561  _uri = self.Crea
+0002d1f0: 7465 4f62 6a65 6374 2862 7563 6b65 745f  teObject(bucket_
+0002d200: 7572 693d 6275 636b 6574 5f75 7269 2c0a  uri=bucket_uri,.
+0002d210: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d220: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d230: 2020 206f 626a 6563 745f 6e61 6d65 3d27     object_name='
+0002d240: 666f 6f27 2c0a 2020 2020 2020 2020 2020  foo',.          
+0002d250: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d260: 2020 2020 2020 2020 2063 6f6e 7465 6e74           content
+0002d270: 733d 6227 6261 7227 290a 2020 2020 6773  s=b'bar').    gs
+0002d280: 7574 696c 5f61 7069 203d 2047 6373 4a73  util_api = GcsJs
+0002d290: 6f6e 4170 6928 4275 636b 6574 5374 6f72  onApi(BucketStor
+0002d2a0: 6167 6555 7269 2c20 6c6f 6767 696e 672e  ageUri, logging.
+0002d2b0: 6765 744c 6f67 6765 7228 292c 0a20 2020  getLogger(),.   
+0002d2c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d2d0: 2020 2020 2020 2020 2044 6973 6361 7264           Discard
+0002d2e0: 4d65 7373 6167 6573 5175 6575 6528 292c  MessagesQueue(),
+0002d2f0: 2073 656c 662e 6465 6661 756c 745f 7072   self.default_pr
+0002d300: 6f76 6964 6572 290a 2020 2020 6b65 7920  ovider).    key 
+0002d310: 3d20 6f62 6a65 6374 5f75 7269 2e67 6574  = object_uri.get
+0002d320: 5f6b 6579 2829 0a20 2020 2073 7263 5f6f  _key().    src_o
+0002d330: 626a 5f6d 6574 6164 6174 6120 3d20 6170  bj_metadata = ap
+0002d340: 6974 6f6f 6c73 5f6d 6573 7361 6765 732e  itools_messages.
+0002d350: 4f62 6a65 6374 286e 616d 653d 6b65 792e  Object(name=key.
+0002d360: 6e61 6d65 2c0a 2020 2020 2020 2020 2020  name,.          
 0002d370: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0002d380: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d390: 2020 2063 6f6e 7465 6e74 733d 6227 6261     contents=b'ba
-0002d3a0: 7227 2c0a 2020 2020 2020 2020 2020 2020  r',.            
+0002d390: 2020 2020 2020 6275 636b 6574 3d6b 6579        bucket=key
+0002d3a0: 2e62 7563 6b65 742e 6e61 6d65 2c0a 2020  .bucket.name,.  
 0002d3b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d3c0: 2020 2020 2020 2020 2020 7072 6566 6572            prefer
-0002d3d0: 5f6a 736f 6e5f 6170 693d 5472 7565 290a  _json_api=True).
-0002d3e0: 2020 2020 2020 6b65 7932 203d 206f 626a        key2 = obj
-0002d3f0: 6563 745f 7572 6932 2e67 6574 5f6b 6579  ect_uri2.get_key
-0002d400: 2829 0a20 2020 2020 2073 7263 5f6f 626a  ().      src_obj
-0002d410: 5f6d 6574 6164 6174 6132 203d 2061 7069  _metadata2 = api
-0002d420: 746f 6f6c 735f 6d65 7373 6167 6573 2e4f  tools_messages.O
-0002d430: 626a 6563 7428 0a20 2020 2020 2020 2020  bject(.         
-0002d440: 206e 616d 653d 6b65 7932 2e6e 616d 652c   name=key2.name,
-0002d450: 0a20 2020 2020 2020 2020 2062 7563 6b65  .          bucke
-0002d460: 743d 6b65 7932 2e62 7563 6b65 742e 6e61  t=key2.bucket.na
-0002d470: 6d65 2c0a 2020 2020 2020 2020 2020 636f  me,.          co
-0002d480: 6e74 656e 7454 7970 653d 6b65 7932 2e63  ntentType=key2.c
-0002d490: 6f6e 7465 6e74 5f74 7970 652c 0a20 2020  ontent_type,.   
-0002d4a0: 2020 2020 2020 2065 7461 673d 6b65 7932         etag=key2
-0002d4b0: 2e65 7461 672e 7374 7269 7028 2722 5c27  .etag.strip('"\'
-0002d4c0: 2729 290a 0a20 2020 2020 2023 2054 7261  '))..      # Tra
-0002d4d0: 636b 6572 2066 696c 6520 666f 7220 6f72  cker file for or
-0002d4e0: 6967 696e 616c 206f 626a 6563 7420 7368  iginal object sh
-0002d4f0: 6f75 6c64 2073 7469 6c6c 2065 7869 7374  ould still exist
-0002d500: 2e0a 2020 2020 2020 7365 6c66 2e61 7373  ..      self.ass
-0002d510: 6572 7454 7275 6528 6f73 2e70 6174 682e  ertTrue(os.path.
-0002d520: 6578 6973 7473 2874 7261 636b 6572 5f66  exists(tracker_f
-0002d530: 696c 655f 6e61 6d65 2929 0a0a 2020 2020  ile_name))..    
-0002d540: 2020 2320 436f 7079 2074 6865 206e 6577    # Copy the new
-0002d550: 206f 626a 6563 742e 0a20 2020 2020 2067   object..      g
-0002d560: 7375 7469 6c5f 6170 692e 436f 7079 4f62  sutil_api.CopyOb
-0002d570: 6a65 6374 2873 7263 5f6f 626a 5f6d 6574  ject(src_obj_met
-0002d580: 6164 6174 6132 2c0a 2020 2020 2020 2020  adata2,.        
+0002d3c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d3d0: 2020 2020 2020 2020 2020 2020 2020 636f                co
+0002d3e0: 6e74 656e 7454 7970 653d 6b65 792e 636f  ntentType=key.co
+0002d3f0: 6e74 656e 745f 7479 7065 290a 2020 2020  ntent_type).    
+0002d400: 6473 745f 6f62 6a5f 6d65 7461 6461 7461  dst_obj_metadata
+0002d410: 203d 2061 7069 746f 6f6c 735f 6d65 7373   = apitools_mess
+0002d420: 6167 6573 2e4f 626a 6563 7428 0a20 2020  ages.Object(.   
+0002d430: 2020 2020 2062 7563 6b65 743d 7372 635f       bucket=src_
+0002d440: 6f62 6a5f 6d65 7461 6461 7461 2e62 7563  obj_metadata.buc
+0002d450: 6b65 742c 0a20 2020 2020 2020 206e 616d  ket,.        nam
+0002d460: 653d 7365 6c66 2e4d 616b 6554 656d 704e  e=self.MakeTempN
+0002d470: 616d 6528 276f 626a 6563 7427 292c 0a20  ame('object'),. 
+0002d480: 2020 2020 2020 2063 6f6e 7465 6e74 5479         contentTy
+0002d490: 7065 3d73 7263 5f6f 626a 5f6d 6574 6164  pe=src_obj_metad
+0002d4a0: 6174 612e 636f 6e74 656e 7454 7970 6529  ata.contentType)
+0002d4b0: 0a20 2020 2067 7375 7469 6c5f 6170 692e  .    gsutil_api.
+0002d4c0: 436f 7079 4f62 6a65 6374 2873 7263 5f6f  CopyObject(src_o
+0002d4d0: 626a 5f6d 6574 6164 6174 612c 2064 7374  bj_metadata, dst
+0002d4e0: 5f6f 626a 5f6d 6574 6164 6174 6129 0a20  _obj_metadata). 
+0002d4f0: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+0002d500: 7561 6c28 0a20 2020 2020 2020 2067 7375  ual(.        gsu
+0002d510: 7469 6c5f 6170 692e 4765 744f 626a 6563  til_api.GetObjec
+0002d520: 744d 6574 6164 6174 6128 7372 635f 6f62  tMetadata(src_ob
+0002d530: 6a5f 6d65 7461 6461 7461 2e62 7563 6b65  j_metadata.bucke
+0002d540: 742c 0a20 2020 2020 2020 2020 2020 2020  t,.             
+0002d550: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d560: 2020 2020 2020 2020 7372 635f 6f62 6a5f          src_obj_
+0002d570: 6d65 7461 6461 7461 2e6e 616d 652c 0a20  metadata.name,. 
+0002d580: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0002d590: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d5a0: 2020 2020 6473 745f 6f62 6a5f 6d65 7461      dst_obj_meta
-0002d5b0: 6461 7461 2c0a 2020 2020 2020 2020 2020  data,.          
-0002d5c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d5d0: 2020 6d61 785f 6279 7465 735f 7065 725f    max_bytes_per_
-0002d5e0: 6361 6c6c 3d4f 4e45 5f4d 4942 290a 0a20  call=ONE_MIB).. 
-0002d5f0: 2020 2020 2023 2043 6f70 7920 636f 6d70       # Copy comp
-0002d600: 6c65 7465 643b 206f 7269 6769 6e61 6c20  leted; original 
-0002d610: 7472 6163 6b65 7220 6669 6c65 2073 686f  tracker file sho
-0002d620: 756c 6420 6265 2064 656c 6574 6564 2e0a  uld be deleted..
-0002d630: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-0002d640: 7446 616c 7365 286f 732e 7061 7468 2e65  tFalse(os.path.e
-0002d650: 7869 7374 7328 7472 6163 6b65 725f 6669  xists(tracker_fi
-0002d660: 6c65 5f6e 616d 6529 290a 0a20 2020 2020  le_name))..     
-0002d670: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-0002d680: 6c28 0a20 2020 2020 2020 2020 2067 7375  l(.          gsu
-0002d690: 7469 6c5f 6170 692e 4765 744f 626a 6563  til_api.GetObjec
-0002d6a0: 744d 6574 6164 6174 6128 7372 635f 6f62  tMetadata(src_ob
-0002d6b0: 6a5f 6d65 7461 6461 7461 322e 6275 636b  j_metadata2.buck
-0002d6c0: 6574 2c0a 2020 2020 2020 2020 2020 2020  et,.            
+0002d5a0: 2020 2020 6669 656c 6473 3d5b 2763 7573      fields=['cus
+0002d5b0: 746f 6d65 7245 6e63 7279 7074 696f 6e27  tomerEncryption'
+0002d5c0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+0002d5d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d5e0: 2020 2020 2020 2020 2020 2020 2020 2027                 '
+0002d5f0: 6d64 3548 6173 6827 5d29 2e6d 6435 4861  md5Hash']).md5Ha
+0002d600: 7368 2c0a 2020 2020 2020 2020 6773 7574  sh,.        gsut
+0002d610: 696c 5f61 7069 2e47 6574 4f62 6a65 6374  il_api.GetObject
+0002d620: 4d65 7461 6461 7461 2864 7374 5f6f 626a  Metadata(dst_obj
+0002d630: 5f6d 6574 6164 6174 612e 6275 636b 6574  _metadata.bucket
+0002d640: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+0002d650: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d660: 2020 2020 2020 2064 7374 5f6f 626a 5f6d         dst_obj_m
+0002d670: 6574 6164 6174 612e 6e61 6d65 2c0a 2020  etadata.name,.  
+0002d680: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d690: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d6a0: 2020 2066 6965 6c64 733d 5b27 6375 7374     fields=['cust
+0002d6b0: 6f6d 6572 456e 6372 7970 7469 6f6e 272c  omerEncryption',
+0002d6c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 0002d6d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d6e0: 2020 2020 2020 2020 2020 2073 7263 5f6f             src_o
-0002d6f0: 626a 5f6d 6574 6164 6174 6132 2e6e 616d  bj_metadata2.nam
-0002d700: 652c 0a20 2020 2020 2020 2020 2020 2020  e,.             
-0002d710: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d720: 2020 2020 2020 2020 2020 6669 656c 6473            fields
-0002d730: 3d5b 2763 7573 746f 6d65 7245 6e63 7279  =['customerEncry
-0002d740: 7074 696f 6e27 2c0a 2020 2020 2020 2020  ption',.        
-0002d750: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d770: 2020 2020 2020 2027 6d64 3548 6173 6827         'md5Hash'
-0002d780: 5d29 2e6d 6435 4861 7368 2c0a 2020 2020  ]).md5Hash,.    
-0002d790: 2020 2020 2020 6773 7574 696c 5f61 7069        gsutil_api
-0002d7a0: 2e47 6574 4f62 6a65 6374 4d65 7461 6461  .GetObjectMetada
-0002d7b0: 7461 2864 7374 5f6f 626a 5f6d 6574 6164  ta(dst_obj_metad
-0002d7c0: 6174 612e 6275 636b 6574 2c0a 2020 2020  ata.bucket,.    
-0002d7d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d7e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d7f0: 2020 2064 7374 5f6f 626a 5f6d 6574 6164     dst_obj_metad
-0002d800: 6174 612e 6e61 6d65 2c0a 2020 2020 2020  ata.name,.      
-0002d810: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d820: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d830: 2066 6965 6c64 733d 5b27 6375 7374 6f6d   fields=['custom
-0002d840: 6572 456e 6372 7970 7469 6f6e 272c 0a20  erEncryption',. 
-0002d850: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d860: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d870: 2020 2020 2020 2020 2020 2020 2020 276d                'm
-0002d880: 6435 4861 7368 275d 292e 6d64 3548 6173  d5Hash']).md5Has
-0002d890: 682c 0a20 2020 2020 2020 2020 2027 4572  h,.          'Er
-0002d8a0: 726f 723a 2052 6577 7269 7474 656e 206f  ror: Rewritten o
-0002d8b0: 626a 6563 745c 2773 2068 6173 6820 646f  bject\'s hash do
-0002d8c0: 6573 6e5c 2774 206d 6174 6368 2073 6f75  esn\'t match sou
-0002d8d0: 7263 6520 6f62 6a65 6374 2e27 290a 2020  rce object.').  
-0002d8e0: 2020 6669 6e61 6c6c 793a 0a20 2020 2020    finally:.     
-0002d8f0: 2023 2043 6c65 616e 2075 7020 6966 2073   # Clean up if s
-0002d900: 6f6d 6574 6869 6e67 2077 656e 7420 7772  omething went wr
-0002d910: 6f6e 672e 0a20 2020 2020 2044 656c 6574  ong..      Delet
-0002d920: 6554 7261 636b 6572 4669 6c65 2874 7261  eTrackerFile(tra
-0002d930: 636b 6572 5f66 696c 655f 6e61 6d65 290a  cker_file_name).
-0002d940: 0a20 2064 6566 2074 6573 745f 7265 7772  .  def test_rewr
-0002d950: 6974 655f 6370 5f72 6573 756d 655f 636f  ite_cp_resume_co
-0002d960: 6d6d 616e 645f 6368 616e 6765 6428 7365  mmand_changed(se
-0002d970: 6c66 293a 0a20 2020 2022 2222 5465 7374  lf):.    """Test
-0002d980: 7320 7468 6174 2052 6577 7269 7465 2073  s that Rewrite s
-0002d990: 7461 7274 7320 6f76 6572 2077 6865 6e20  tarts over when 
-0002d9a0: 7468 6520 6172 6775 6d65 6e74 7320 6368  the arguments ch
-0002d9b0: 616e 6765 642e 2222 220a 2020 2020 6966  anged.""".    if
-0002d9c0: 2073 656c 662e 7465 7374 5f61 7069 203d   self.test_api =
-0002d9d0: 3d20 4170 6953 656c 6563 746f 722e 584d  = ApiSelector.XM
-0002d9e0: 4c3a 0a20 2020 2020 2072 6574 7572 6e20  L:.      return 
-0002d9f0: 756e 6974 7465 7374 2e73 6b69 7028 2752  unittest.skip('R
-0002da00: 6577 7269 7465 2041 5049 2069 7320 6f6e  ewrite API is on
-0002da10: 6c79 2073 7570 706f 7274 6564 2069 6e20  ly supported in 
-0002da20: 4a53 4f4e 2e27 290a 2020 2020 6275 636b  JSON.').    buck
-0002da30: 6574 5f75 7269 203d 2073 656c 662e 4372  et_uri = self.Cr
-0002da40: 6561 7465 4275 636b 6574 2829 0a20 2020  eateBucket().   
-0002da50: 2023 2053 6563 6f6e 6420 6275 636b 6574   # Second bucket
-0002da60: 206e 6565 6473 2074 6f20 6265 2061 2064   needs to be a d
-0002da70: 6966 6665 7265 6e74 2073 746f 7261 6765  ifferent storage
-0002da80: 2063 6c61 7373 2073 6f20 7468 6520 7365   class so the se
-0002da90: 7276 6963 650a 2020 2020 2320 6163 7475  rvice.    # actu
-0002daa0: 616c 6c79 2072 6577 7269 7465 7320 7468  ally rewrites th
-0002dab0: 6520 6279 7465 732e 0a20 2020 2062 7563  e bytes..    buc
-0002dac0: 6b65 745f 7572 6932 203d 2073 656c 662e  ket_uri2 = self.
-0002dad0: 4372 6561 7465 4275 636b 6574 280a 2020  CreateBucket(.  
-0002dae0: 2020 2020 2020 7374 6f72 6167 655f 636c        storage_cl
-0002daf0: 6173 733d 2764 7572 6162 6c65 5f72 6564  ass='durable_red
-0002db00: 7563 6564 5f61 7661 696c 6162 696c 6974  uced_availabilit
-0002db10: 7927 290a 2020 2020 2320 6d61 7842 7974  y').    # maxByt
-0002db20: 6573 5065 7243 616c 6c20 6d75 7374 2062  esPerCall must b
-0002db30: 6520 3e3d 2031 204d 6942 2c20 736f 2063  e >= 1 MiB, so c
-0002db40: 7265 6174 6520 616e 206f 626a 6563 7420  reate an object 
-0002db50: 3e20 3220 4d69 4220 6265 6361 7573 6520  > 2 MiB because 
-0002db60: 7765 0a20 2020 2023 206e 6565 6420 3220  we.    # need 2 
-0002db70: 7265 7370 6f6e 7365 2066 726f 6d20 7468  response from th
-0002db80: 6520 7365 7276 6963 653a 2031 2073 7563  e service: 1 suc
-0002db90: 6365 7373 2c20 3120 6661 696c 7572 6520  cess, 1 failure 
-0002dba0: 7072 696f 7220 746f 0a20 2020 2023 2063  prior to.    # c
-0002dbb0: 6f6d 706c 6574 696f 6e2e 0a20 2020 206f  ompletion..    o
-0002dbc0: 626a 6563 745f 7572 6920 3d20 7365 6c66  bject_uri = self
-0002dbd0: 2e43 7265 6174 654f 626a 6563 7428 6275  .CreateObject(bu
-0002dbe0: 636b 6574 5f75 7269 3d62 7563 6b65 745f  cket_uri=bucket_
-0002dbf0: 7572 692c 0a20 2020 2020 2020 2020 2020  uri,.           
+0002d6e0: 2020 2020 2020 2020 2020 2020 2020 276d                'm
+0002d6f0: 6435 4861 7368 275d 292e 6d64 3548 6173  d5Hash']).md5Has
+0002d700: 682c 0a20 2020 2020 2020 2027 4572 726f  h,.        'Erro
+0002d710: 723a 2052 6577 7269 7474 656e 206f 626a  r: Rewritten obj
+0002d720: 6563 745c 2773 2068 6173 6820 646f 6573  ect\'s hash does
+0002d730: 6e5c 2774 206d 6174 6368 2073 6f75 7263  n\'t match sourc
+0002d740: 6520 6f62 6a65 6374 2e27 290a 0a20 2064  e object.')..  d
+0002d750: 6566 2074 6573 745f 7265 7772 6974 655f  ef test_rewrite_
+0002d760: 6370 5f72 6573 756d 6528 7365 6c66 293a  cp_resume(self):
+0002d770: 0a20 2020 2022 2222 5465 7374 7320 7468  .    """Tests th
+0002d780: 6520 4a53 4f4e 2052 6577 7269 7465 2041  e JSON Rewrite A
+0002d790: 5049 2c20 6272 6561 6b69 6e67 2061 6e64  PI, breaking and
+0002d7a0: 2072 6573 756d 696e 6720 7669 6120 6120   resuming via a 
+0002d7b0: 7472 6163 6b65 7220 6669 6c65 2e22 2222  tracker file."""
+0002d7c0: 0a20 2020 2069 6620 7365 6c66 2e74 6573  .    if self.tes
+0002d7d0: 745f 6170 6920 3d3d 2041 7069 5365 6c65  t_api == ApiSele
+0002d7e0: 6374 6f72 2e58 4d4c 3a0a 2020 2020 2020  ctor.XML:.      
+0002d7f0: 7265 7475 726e 2075 6e69 7474 6573 742e  return unittest.
+0002d800: 736b 6970 2827 5265 7772 6974 6520 4150  skip('Rewrite AP
+0002d810: 4920 6973 206f 6e6c 7920 7375 7070 6f72  I is only suppor
+0002d820: 7465 6420 696e 204a 534f 4e2e 2729 0a20  ted in JSON.'). 
+0002d830: 2020 2062 7563 6b65 745f 7572 6920 3d20     bucket_uri = 
+0002d840: 7365 6c66 2e43 7265 6174 6542 7563 6b65  self.CreateBucke
+0002d850: 7428 290a 2020 2020 2320 5365 636f 6e64  t().    # Second
+0002d860: 2062 7563 6b65 7420 6e65 6564 7320 746f   bucket needs to
+0002d870: 2062 6520 6120 6469 6666 6572 656e 7420   be a different 
+0002d880: 7374 6f72 6167 6520 636c 6173 7320 736f  storage class so
+0002d890: 2074 6865 2073 6572 7669 6365 0a20 2020   the service.   
+0002d8a0: 2023 2061 6374 7561 6c6c 7920 7265 7772   # actually rewr
+0002d8b0: 6974 6573 2074 6865 2062 7974 6573 2e0a  ites the bytes..
+0002d8c0: 2020 2020 6275 636b 6574 5f75 7269 3220      bucket_uri2 
+0002d8d0: 3d20 7365 6c66 2e43 7265 6174 6542 7563  = self.CreateBuc
+0002d8e0: 6b65 7428 0a20 2020 2020 2020 2073 746f  ket(.        sto
+0002d8f0: 7261 6765 5f63 6c61 7373 3d27 6475 7261  rage_class='dura
+0002d900: 626c 655f 7265 6475 6365 645f 6176 6169  ble_reduced_avai
+0002d910: 6c61 6269 6c69 7479 2729 0a20 2020 2023  lability').    #
+0002d920: 206d 6178 4279 7465 7350 6572 4361 6c6c   maxBytesPerCall
+0002d930: 206d 7573 7420 6265 203e 3d20 3120 4d69   must be >= 1 Mi
+0002d940: 422c 2073 6f20 6372 6561 7465 2061 6e20  B, so create an 
+0002d950: 6f62 6a65 6374 203e 2032 204d 6942 2062  object > 2 MiB b
+0002d960: 6563 6175 7365 2077 650a 2020 2020 2320  ecause we.    # 
+0002d970: 6e65 6564 2032 2072 6573 706f 6e73 6520  need 2 response 
+0002d980: 6672 6f6d 2074 6865 2073 6572 7669 6365  from the service
+0002d990: 3a20 3120 7375 6363 6573 732c 2031 2066  : 1 success, 1 f
+0002d9a0: 6169 6c75 7265 2070 7269 6f72 2074 6f0a  ailure prior to.
+0002d9b0: 2020 2020 2320 636f 6d70 6c65 7469 6f6e      # completion
+0002d9c0: 2e0a 2020 2020 6f62 6a65 6374 5f75 7269  ..    object_uri
+0002d9d0: 203d 2073 656c 662e 4372 6561 7465 4f62   = self.CreateOb
+0002d9e0: 6a65 6374 2862 7563 6b65 745f 7572 693d  ject(bucket_uri=
+0002d9f0: 6275 636b 6574 5f75 7269 2c0a 2020 2020  bucket_uri,.    
+0002da00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002da10: 2020 2020 2020 2020 2020 2020 2020 206f                 o
+0002da20: 626a 6563 745f 6e61 6d65 3d27 666f 6f27  bject_name='foo'
+0002da30: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+0002da40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002da50: 2020 2020 2063 6f6e 7465 6e74 733d 2862       contents=(b
+0002da60: 2731 3227 202a 204f 4e45 5f4d 4942 2920  '12' * ONE_MIB) 
+0002da70: 2b20 6227 6261 7227 2c0a 2020 2020 2020  + b'bar',.      
+0002da80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002da90: 2020 2020 2020 2020 2020 2020 2070 7265               pre
+0002daa0: 6665 725f 6a73 6f6e 5f61 7069 3d54 7275  fer_json_api=Tru
+0002dab0: 6529 0a20 2020 2067 7375 7469 6c5f 6170  e).    gsutil_ap
+0002dac0: 6920 3d20 4763 734a 736f 6e41 7069 2842  i = GcsJsonApi(B
+0002dad0: 7563 6b65 7453 746f 7261 6765 5572 692c  ucketStorageUri,
+0002dae0: 206c 6f67 6769 6e67 2e67 6574 4c6f 6767   logging.getLogg
+0002daf0: 6572 2829 2c0a 2020 2020 2020 2020 2020  er(),.          
+0002db00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002db10: 2020 4469 7363 6172 644d 6573 7361 6765    DiscardMessage
+0002db20: 7351 7565 7565 2829 2c20 7365 6c66 2e64  sQueue(), self.d
+0002db30: 6566 6175 6c74 5f70 726f 7669 6465 7229  efault_provider)
+0002db40: 0a20 2020 206b 6579 203d 206f 626a 6563  .    key = objec
+0002db50: 745f 7572 692e 6765 745f 6b65 7928 290a  t_uri.get_key().
+0002db60: 2020 2020 7372 635f 6f62 6a5f 6d65 7461      src_obj_meta
+0002db70: 6461 7461 203d 2061 7069 746f 6f6c 735f  data = apitools_
+0002db80: 6d65 7373 6167 6573 2e4f 626a 6563 7428  messages.Object(
+0002db90: 6e61 6d65 3d6b 6579 2e6e 616d 652c 0a20  name=key.name,. 
+0002dba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dbb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dbc0: 2020 2020 2020 2020 2020 2020 2020 2062                 b
+0002dbd0: 7563 6b65 743d 6b65 792e 6275 636b 6574  ucket=key.bucket
+0002dbe0: 2e6e 616d 652c 0a20 2020 2020 2020 2020  .name,.         
+0002dbf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0002dc00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002dc10: 2020 2020 2020 2020 6f62 6a65 6374 5f6e          object_n
-0002dc20: 616d 653d 2766 6f6f 272c 0a20 2020 2020  ame='foo',.     
-0002dc30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002dc40: 2020 2020 2020 2020 2020 2020 2020 636f                co
-0002dc50: 6e74 656e 7473 3d28 6227 3132 2720 2a20  ntents=(b'12' * 
-0002dc60: 4f4e 455f 4d49 4229 202b 2062 2762 6172  ONE_MIB) + b'bar
-0002dc70: 272c 0a20 2020 2020 2020 2020 2020 2020  ',.             
-0002dc80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002dc90: 2020 2020 2020 7072 6566 6572 5f6a 736f        prefer_jso
-0002dca0: 6e5f 6170 693d 5472 7565 290a 2020 2020  n_api=True).    
-0002dcb0: 6773 7574 696c 5f61 7069 203d 2047 6373  gsutil_api = Gcs
-0002dcc0: 4a73 6f6e 4170 6928 4275 636b 6574 5374  JsonApi(BucketSt
-0002dcd0: 6f72 6167 6555 7269 2c20 6c6f 6767 696e  orageUri, loggin
-0002dce0: 672e 6765 744c 6f67 6765 7228 292c 0a20  g.getLogger(),. 
-0002dcf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002dd00: 2020 2020 2020 2020 2020 2044 6973 6361             Disca
-0002dd10: 7264 4d65 7373 6167 6573 5175 6575 6528  rdMessagesQueue(
-0002dd20: 292c 2073 656c 662e 6465 6661 756c 745f  ), self.default_
-0002dd30: 7072 6f76 6964 6572 290a 2020 2020 6b65  provider).    ke
-0002dd40: 7920 3d20 6f62 6a65 6374 5f75 7269 2e67  y = object_uri.g
-0002dd50: 6574 5f6b 6579 2829 0a20 2020 2073 7263  et_key().    src
-0002dd60: 5f6f 626a 5f6d 6574 6164 6174 6120 3d20  _obj_metadata = 
-0002dd70: 6170 6974 6f6f 6c73 5f6d 6573 7361 6765  apitools_message
-0002dd80: 732e 4f62 6a65 6374 286e 616d 653d 6b65  s.Object(name=ke
-0002dd90: 792e 6e61 6d65 2c0a 2020 2020 2020 2020  y.name,.        
-0002dda0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dc10: 2020 2020 2020 2063 6f6e 7465 6e74 5479         contentTy
+0002dc20: 7065 3d6b 6579 2e63 6f6e 7465 6e74 5f74  pe=key.content_t
+0002dc30: 7970 652c 0a20 2020 2020 2020 2020 2020  ype,.           
+0002dc40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dc50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dc60: 2020 2020 2065 7461 673d 6b65 792e 6574       etag=key.et
+0002dc70: 6167 2e73 7472 6970 2827 225c 2727 2929  ag.strip('"\''))
+0002dc80: 0a20 2020 2064 7374 5f6f 626a 5f6e 616d  .    dst_obj_nam
+0002dc90: 6520 3d20 7365 6c66 2e4d 616b 6554 656d  e = self.MakeTem
+0002dca0: 704e 616d 6528 276f 626a 6563 7427 290a  pName('object').
+0002dcb0: 2020 2020 6473 745f 6f62 6a5f 6d65 7461      dst_obj_meta
+0002dcc0: 6461 7461 203d 2061 7069 746f 6f6c 735f  data = apitools_
+0002dcd0: 6d65 7373 6167 6573 2e4f 626a 6563 7428  messages.Object(
+0002dce0: 0a20 2020 2020 2020 2062 7563 6b65 743d  .        bucket=
+0002dcf0: 6275 636b 6574 5f75 7269 322e 6275 636b  bucket_uri2.buck
+0002dd00: 6574 5f6e 616d 652c 0a20 2020 2020 2020  et_name,.       
+0002dd10: 206e 616d 653d 6473 745f 6f62 6a5f 6e61   name=dst_obj_na
+0002dd20: 6d65 2c0a 2020 2020 2020 2020 636f 6e74  me,.        cont
+0002dd30: 656e 7454 7970 653d 7372 635f 6f62 6a5f  entType=src_obj_
+0002dd40: 6d65 7461 6461 7461 2e63 6f6e 7465 6e74  metadata.content
+0002dd50: 5479 7065 290a 2020 2020 7472 6163 6b65  Type).    tracke
+0002dd60: 725f 6669 6c65 5f6e 616d 6520 3d20 4765  r_file_name = Ge
+0002dd70: 7452 6577 7269 7465 5472 6163 6b65 7246  tRewriteTrackerF
+0002dd80: 696c 6550 6174 6828 7372 635f 6f62 6a5f  ilePath(src_obj_
+0002dd90: 6d65 7461 6461 7461 2e62 7563 6b65 742c  metadata.bucket,
+0002dda0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 0002ddb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ddc0: 2020 2020 2020 2020 6275 636b 6574 3d6b          bucket=k
-0002ddd0: 6579 2e62 7563 6b65 742e 6e61 6d65 2c0a  ey.bucket.name,.
-0002dde0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ddc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ddd0: 2020 2073 7263 5f6f 626a 5f6d 6574 6164     src_obj_metad
+0002dde0: 6174 612e 6e61 6d65 2c0a 2020 2020 2020  ata.name,.      
 0002ddf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0002de00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002de10: 636f 6e74 656e 7454 7970 653d 6b65 792e  contentType=key.
-0002de20: 636f 6e74 656e 745f 7479 7065 2c0a 2020  content_type,.  
-0002de30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002de10: 2020 2020 2020 2020 2020 2020 6473 745f              dst_
+0002de20: 6f62 6a5f 6d65 7461 6461 7461 2e62 7563  obj_metadata.buc
+0002de30: 6b65 742c 0a20 2020 2020 2020 2020 2020  ket,.           
 0002de40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002de50: 2020 2020 2020 2020 2020 2020 2020 6574                et
-0002de60: 6167 3d6b 6579 2e65 7461 672e 7374 7269  ag=key.etag.stri
-0002de70: 7028 2722 5c27 2729 290a 2020 2020 6473  p('"\'')).    ds
-0002de80: 745f 6f62 6a5f 6e61 6d65 203d 2073 656c  t_obj_name = sel
-0002de90: 662e 4d61 6b65 5465 6d70 4e61 6d65 2827  f.MakeTempName('
-0002dea0: 6f62 6a65 6374 2729 0a20 2020 2064 7374  object').    dst
-0002deb0: 5f6f 626a 5f6d 6574 6164 6174 6120 3d20  _obj_metadata = 
-0002dec0: 6170 6974 6f6f 6c73 5f6d 6573 7361 6765  apitools_message
-0002ded0: 732e 4f62 6a65 6374 280a 2020 2020 2020  s.Object(.      
-0002dee0: 2020 6275 636b 6574 3d62 7563 6b65 745f    bucket=bucket_
-0002def0: 7572 6932 2e62 7563 6b65 745f 6e61 6d65  uri2.bucket_name
-0002df00: 2c0a 2020 2020 2020 2020 6e61 6d65 3d64  ,.        name=d
-0002df10: 7374 5f6f 626a 5f6e 616d 652c 0a20 2020  st_obj_name,.   
-0002df20: 2020 2020 2063 6f6e 7465 6e74 5479 7065       contentType
-0002df30: 3d73 7263 5f6f 626a 5f6d 6574 6164 6174  =src_obj_metadat
-0002df40: 612e 636f 6e74 656e 7454 7970 6529 0a20  a.contentType). 
-0002df50: 2020 2074 7261 636b 6572 5f66 696c 655f     tracker_file_
-0002df60: 6e61 6d65 203d 2047 6574 5265 7772 6974  name = GetRewrit
-0002df70: 6554 7261 636b 6572 4669 6c65 5061 7468  eTrackerFilePath
-0002df80: 2873 7263 5f6f 626a 5f6d 6574 6164 6174  (src_obj_metadat
-0002df90: 612e 6275 636b 6574 2c0a 2020 2020 2020  a.bucket,.      
-0002dfa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002dfb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002dfc0: 2020 2020 2020 2020 2020 2020 7372 635f              src_
-0002dfd0: 6f62 6a5f 6d65 7461 6461 7461 2e6e 616d  obj_metadata.nam
-0002dfe0: 652c 0a20 2020 2020 2020 2020 2020 2020  e,.             
-0002dff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e000: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e010: 2020 2020 2064 7374 5f6f 626a 5f6d 6574       dst_obj_met
-0002e020: 6164 6174 612e 6275 636b 6574 2c0a 2020  adata.bucket,.  
-0002e030: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e040: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e060: 6473 745f 6f62 6a5f 6d65 7461 6461 7461  dst_obj_metadata
-0002e070: 2e6e 616d 652c 0a20 2020 2020 2020 2020  .name,.         
-0002e080: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e0a0: 2020 2020 2020 2020 2073 656c 662e 7465           self.te
-0002e0b0: 7374 5f61 7069 290a 2020 2020 7472 793a  st_api).    try:
-0002e0c0: 0a20 2020 2020 2074 7279 3a0a 2020 2020  .      try:.    
-0002e0d0: 2020 2020 6773 7574 696c 5f61 7069 2e43      gsutil_api.C
-0002e0e0: 6f70 794f 626a 6563 7428 7372 635f 6f62  opyObject(src_ob
-0002e0f0: 6a5f 6d65 7461 6461 7461 2c0a 2020 2020  j_metadata,.    
-0002e100: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e110: 2020 2020 2020 2020 2020 6473 745f 6f62            dst_ob
-0002e120: 6a5f 6d65 7461 6461 7461 2c0a 2020 2020  j_metadata,.    
-0002e130: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e140: 2020 2020 2020 2020 2020 6361 6e6e 6564            canned
-0002e150: 5f61 636c 3d27 7072 6976 6174 6527 2c0a  _acl='private',.
-0002e160: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e170: 2020 2020 2020 2020 2020 2020 2020 7072                pr
-0002e180: 6f67 7265 7373 5f63 616c 6c62 6163 6b3d  ogress_callback=
-0002e190: 4861 6c74 696e 6752 6577 7269 7465 4361  HaltingRewriteCa
-0002e1a0: 6c6c 6261 636b 4861 6e64 6c65 7228 0a20  llbackHandler(. 
+0002de50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002de60: 2020 2020 2020 2064 7374 5f6f 626a 5f6d         dst_obj_m
+0002de70: 6574 6164 6174 612e 6e61 6d65 2c0a 2020  etadata.name,.  
+0002de80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002de90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002deb0: 7365 6c66 2e74 6573 745f 6170 6929 0a20  self.test_api). 
+0002dec0: 2020 2074 7279 3a0a 2020 2020 2020 7472     try:.      tr
+0002ded0: 793a 0a20 2020 2020 2020 2067 7375 7469  y:.        gsuti
+0002dee0: 6c5f 6170 692e 436f 7079 4f62 6a65 6374  l_api.CopyObject
+0002def0: 2873 7263 5f6f 626a 5f6d 6574 6164 6174  (src_obj_metadat
+0002df00: 612c 0a20 2020 2020 2020 2020 2020 2020  a,.             
+0002df10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002df20: 2064 7374 5f6f 626a 5f6d 6574 6164 6174   dst_obj_metadat
+0002df30: 612c 0a20 2020 2020 2020 2020 2020 2020  a,.             
+0002df40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002df50: 2070 726f 6772 6573 735f 6361 6c6c 6261   progress_callba
+0002df60: 636b 3d48 616c 7469 6e67 5265 7772 6974  ck=HaltingRewrit
+0002df70: 6543 616c 6c62 6163 6b48 616e 646c 6572  eCallbackHandler
+0002df80: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+0002df90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dfa0: 2020 2020 4f4e 455f 4d49 4220 2a20 3229      ONE_MIB * 2)
+0002dfb0: 2e63 616c 6c2c 0a20 2020 2020 2020 2020  .call,.         
+0002dfc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dfd0: 2020 2020 206d 6178 5f62 7974 6573 5f70       max_bytes_p
+0002dfe0: 6572 5f63 616c 6c3d 4f4e 455f 4d49 4229  er_call=ONE_MIB)
+0002dff0: 0a20 2020 2020 2020 2073 656c 662e 6661  .        self.fa
+0002e000: 696c 2827 4578 7065 6374 6564 2052 6577  il('Expected Rew
+0002e010: 7269 7465 4861 6c74 4578 6365 7074 696f  riteHaltExceptio
+0002e020: 6e2e 2729 0a20 2020 2020 2065 7863 6570  n.').      excep
+0002e030: 7420 5265 7772 6974 6548 616c 7445 7863  t RewriteHaltExc
+0002e040: 6570 7469 6f6e 3a0a 2020 2020 2020 2020  eption:.        
+0002e050: 7061 7373 0a0a 2020 2020 2020 2320 5472  pass..      # Tr
+0002e060: 6163 6b65 7220 6669 6c65 2073 686f 756c  acker file shoul
+0002e070: 6420 6265 206c 6566 7420 6f76 6572 2e0a  d be left over..
+0002e080: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+0002e090: 7454 7275 6528 6f73 2e70 6174 682e 6578  tTrue(os.path.ex
+0002e0a0: 6973 7473 2874 7261 636b 6572 5f66 696c  ists(tracker_fil
+0002e0b0: 655f 6e61 6d65 2929 0a0a 2020 2020 2020  e_name))..      
+0002e0c0: 2320 4e6f 7720 7265 7375 6d65 2e20 4361  # Now resume. Ca
+0002e0d0: 6c6c 6261 636b 2065 6e73 7572 6573 2077  llback ensures w
+0002e0e0: 6520 6469 646e 2774 2073 7461 7274 206f  e didn't start o
+0002e0f0: 7665 722e 0a20 2020 2020 2067 7375 7469  ver..      gsuti
+0002e100: 6c5f 6170 692e 436f 7079 4f62 6a65 6374  l_api.CopyObject
+0002e110: 280a 2020 2020 2020 2020 2020 7372 635f  (.          src_
+0002e120: 6f62 6a5f 6d65 7461 6461 7461 2c0a 2020  obj_metadata,.  
+0002e130: 2020 2020 2020 2020 6473 745f 6f62 6a5f          dst_obj_
+0002e140: 6d65 7461 6461 7461 2c0a 2020 2020 2020  metadata,.      
+0002e150: 2020 2020 7072 6f67 7265 7373 5f63 616c      progress_cal
+0002e160: 6c62 6163 6b3d 456e 7375 7265 5265 7772  lback=EnsureRewr
+0002e170: 6974 6552 6573 756d 6543 616c 6c62 6163  iteResumeCallbac
+0002e180: 6b48 616e 646c 6572 284f 4e45 5f4d 4942  kHandler(ONE_MIB
+0002e190: 202a 0a20 2020 2020 2020 2020 2020 2020   *.             
+0002e1a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0002e1b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0002e1c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e1d0: 204f 4e45 5f4d 4942 202a 2032 292e 6361   ONE_MIB * 2).ca
-0002e1e0: 6c6c 2c0a 2020 2020 2020 2020 2020 2020  ll,.            
-0002e1f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e200: 2020 6d61 785f 6279 7465 735f 7065 725f    max_bytes_per_
-0002e210: 6361 6c6c 3d4f 4e45 5f4d 4942 290a 2020  call=ONE_MIB).  
-0002e220: 2020 2020 2020 7365 6c66 2e66 6169 6c28        self.fail(
-0002e230: 2745 7870 6563 7465 6420 5265 7772 6974  'Expected Rewrit
-0002e240: 6548 616c 7445 7863 6570 7469 6f6e 2e27  eHaltException.'
-0002e250: 290a 2020 2020 2020 6578 6365 7074 2052  ).      except R
-0002e260: 6577 7269 7465 4861 6c74 4578 6365 7074  ewriteHaltExcept
-0002e270: 696f 6e3a 0a20 2020 2020 2020 2070 6173  ion:.        pas
-0002e280: 730a 0a20 2020 2020 2023 2054 7261 636b  s..      # Track
-0002e290: 6572 2066 696c 6520 666f 7220 6f72 6967  er file for orig
-0002e2a0: 696e 616c 206f 626a 6563 7420 7368 6f75  inal object shou
-0002e2b0: 6c64 2073 7469 6c6c 2065 7869 7374 2e0a  ld still exist..
-0002e2c0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-0002e2d0: 7454 7275 6528 6f73 2e70 6174 682e 6578  tTrue(os.path.ex
-0002e2e0: 6973 7473 2874 7261 636b 6572 5f66 696c  ists(tracker_fil
-0002e2f0: 655f 6e61 6d65 2929 0a0a 2020 2020 2020  e_name))..      
-0002e300: 2320 436f 7079 2074 6865 2073 616d 6520  # Copy the same 
-0002e310: 6f62 6a65 6374 2062 7574 2077 6974 6820  object but with 
-0002e320: 6469 6666 6572 656e 7420 6361 6c6c 2070  different call p
-0002e330: 6172 616d 6574 6572 732e 0a20 2020 2020  arameters..     
-0002e340: 2067 7375 7469 6c5f 6170 692e 436f 7079   gsutil_api.Copy
-0002e350: 4f62 6a65 6374 2873 7263 5f6f 626a 5f6d  Object(src_obj_m
-0002e360: 6574 6164 6174 612c 0a20 2020 2020 2020  etadata,.       
-0002e370: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e380: 2020 2020 2064 7374 5f6f 626a 5f6d 6574       dst_obj_met
-0002e390: 6164 6174 612c 0a20 2020 2020 2020 2020  adata,.         
-0002e3a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e3b0: 2020 2063 616e 6e65 645f 6163 6c3d 2770     canned_acl='p
-0002e3c0: 7562 6c69 632d 7265 6164 272c 0a20 2020  ublic-read',.   
-0002e3d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e3e0: 2020 2020 2020 2020 206d 6178 5f62 7974           max_byt
-0002e3f0: 6573 5f70 6572 5f63 616c 6c3d 4f4e 455f  es_per_call=ONE_
-0002e400: 4d49 4229 0a0a 2020 2020 2020 2320 436f  MIB)..      # Co
-0002e410: 7079 2063 6f6d 706c 6574 6564 3b20 6f72  py completed; or
-0002e420: 6967 696e 616c 2074 7261 636b 6572 2066  iginal tracker f
-0002e430: 696c 6520 7368 6f75 6c64 2062 6520 6465  ile should be de
-0002e440: 6c65 7465 642e 0a20 2020 2020 2073 656c  leted..      sel
-0002e450: 662e 6173 7365 7274 4661 6c73 6528 6f73  f.assertFalse(os
-0002e460: 2e70 6174 682e 6578 6973 7473 2874 7261  .path.exists(tra
-0002e470: 636b 6572 5f66 696c 655f 6e61 6d65 2929  cker_file_name))
-0002e480: 0a0a 2020 2020 2020 6e65 775f 6f62 6a5f  ..      new_obj_
-0002e490: 6d65 7461 6461 7461 203d 2067 7375 7469  metadata = gsuti
-0002e4a0: 6c5f 6170 692e 4765 744f 626a 6563 744d  l_api.GetObjectM
-0002e4b0: 6574 6164 6174 6128 0a20 2020 2020 2020  etadata(.       
-0002e4c0: 2020 2064 7374 5f6f 626a 5f6d 6574 6164     dst_obj_metad
-0002e4d0: 6174 612e 6275 636b 6574 2c0a 2020 2020  ata.bucket,.    
-0002e4e0: 2020 2020 2020 6473 745f 6f62 6a5f 6d65        dst_obj_me
-0002e4f0: 7461 6461 7461 2e6e 616d 652c 0a20 2020  tadata.name,.   
-0002e500: 2020 2020 2020 2066 6965 6c64 733d 5b27         fields=['
-0002e510: 6163 6c27 2c20 2763 7573 746f 6d65 7245  acl', 'customerE
-0002e520: 6e63 7279 7074 696f 6e27 2c20 276d 6435  ncryption', 'md5
-0002e530: 4861 7368 275d 290a 2020 2020 2020 7365  Hash']).      se
-0002e540: 6c66 2e61 7373 6572 7445 7175 616c 280a  lf.assertEqual(.
-0002e550: 2020 2020 2020 2020 2020 6773 7574 696c            gsutil
-0002e560: 5f61 7069 2e47 6574 4f62 6a65 6374 4d65  _api.GetObjectMe
-0002e570: 7461 6461 7461 2873 7263 5f6f 626a 5f6d  tadata(src_obj_m
-0002e580: 6574 6164 6174 612e 6275 636b 6574 2c0a  etadata.bucket,.
-0002e590: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e5a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e5b0: 2020 2020 2020 2073 7263 5f6f 626a 5f6d         src_obj_m
-0002e5c0: 6574 6164 6174 612e 6e61 6d65 2c0a 2020  etadata.name,.  
-0002e5d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e5e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e5f0: 2020 2020 2066 6965 6c64 733d 5b27 6375       fields=['cu
-0002e600: 7374 6f6d 6572 456e 6372 7970 7469 6f6e  stomerEncryption
-0002e610: 272c 0a20 2020 2020 2020 2020 2020 2020  ',.             
-0002e620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e630: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e640: 2020 276d 6435 4861 7368 275d 292e 6d64    'md5Hash']).md
-0002e650: 3548 6173 682c 0a20 2020 2020 2020 2020  5Hash,.         
-0002e660: 206e 6577 5f6f 626a 5f6d 6574 6164 6174   new_obj_metadat
-0002e670: 612e 6d64 3548 6173 682c 0a20 2020 2020  a.md5Hash,.     
-0002e680: 2020 2020 2027 4572 726f 723a 2052 6577       'Error: Rew
-0002e690: 7269 7474 656e 206f 626a 6563 745c 2773  ritten object\'s
-0002e6a0: 2068 6173 6820 646f 6573 6e5c 2774 206d   hash doesn\'t m
-0002e6b0: 6174 6368 2073 6f75 7263 6520 6f62 6a65  atch source obje
-0002e6c0: 6374 2e27 290a 2020 2020 2020 2320 4e65  ct.').      # Ne
-0002e6d0: 7720 6f62 6a65 6374 2073 686f 756c 6420  w object should 
-0002e6e0: 6861 7665 2061 2070 7562 6c69 632d 7265  have a public-re
-0002e6f0: 6164 2041 434c 2066 726f 6d20 7468 6520  ad ACL from the 
-0002e700: 7365 636f 6e64 2063 6f6d 6d61 6e64 2e0a  second command..
-0002e710: 2020 2020 2020 666f 756e 645f 7075 626c        found_publ
-0002e720: 6963 5f61 636c 203d 2046 616c 7365 0a20  ic_acl = False. 
-0002e730: 2020 2020 2066 6f72 2061 636c 5f65 6e74       for acl_ent
-0002e740: 7279 2069 6e20 6e65 775f 6f62 6a5f 6d65  ry in new_obj_me
-0002e750: 7461 6461 7461 2e61 636c 3a0a 2020 2020  tadata.acl:.    
-0002e760: 2020 2020 6966 2061 636c 5f65 6e74 7279      if acl_entry
-0002e770: 2e65 6e74 6974 7920 3d3d 2027 616c 6c55  .entity == 'allU
-0002e780: 7365 7273 273a 0a20 2020 2020 2020 2020  sers':.         
-0002e790: 2066 6f75 6e64 5f70 7562 6c69 635f 6163   found_public_ac
-0002e7a0: 6c20 3d20 5472 7565 0a20 2020 2020 2073  l = True.      s
-0002e7b0: 656c 662e 6173 7365 7274 5472 7565 2866  elf.assertTrue(f
-0002e7c0: 6f75 6e64 5f70 7562 6c69 635f 6163 6c2c  ound_public_acl,
-0002e7d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002e7e0: 2020 2020 2020 2027 4e65 7720 6f62 6a65         'New obje
-0002e7f0: 6374 2077 6173 206e 6f74 2077 7269 7474  ct was not writt
-0002e800: 656e 2077 6974 6820 6120 7075 626c 6963  en with a public
-0002e810: 2041 434c 2e27 290a 2020 2020 6669 6e61   ACL.').    fina
-0002e820: 6c6c 793a 0a20 2020 2020 2023 2043 6c65  lly:.      # Cle
-0002e830: 616e 2075 7020 6966 2073 6f6d 6574 6869  an up if somethi
-0002e840: 6e67 2077 656e 7420 7772 6f6e 672e 0a20  ng went wrong.. 
-0002e850: 2020 2020 2044 656c 6574 6554 7261 636b       DeleteTrack
-0002e860: 6572 4669 6c65 2874 7261 636b 6572 5f66  erFile(tracker_f
-0002e870: 696c 655f 6e61 6d65 290a 0a20 2040 756e  ile_name)..  @un
-0002e880: 6974 7465 7374 2e73 6b69 7049 6628 4953  ittest.skipIf(IS
-0002e890: 5f57 494e 444f 5753 2c20 2750 4f53 4958  _WINDOWS, 'POSIX
-0002e8a0: 2061 7474 7269 6275 7465 7320 6e6f 7420   attributes not 
-0002e8b0: 6176 6169 6c61 626c 6520 6f6e 2057 696e  available on Win
-0002e8c0: 646f 7773 2e27 290a 2020 4075 6e69 7474  dows.').  @unitt
-0002e8d0: 6573 742e 736b 6970 556e 6c65 7373 2855  est.skipUnless(U
-0002e8e0: 7369 6e67 4372 636d 6f64 4578 7465 6e73  singCrcmodExtens
-0002e8f0: 696f 6e28 292c 2027 5465 7374 2072 6571  ion(), 'Test req
-0002e900: 7569 7265 7320 6661 7374 2063 7263 6d6f  uires fast crcmo
-0002e910: 642e 2729 0a20 2064 6566 2074 6573 745f  d.').  def test_
-0002e920: 6370 5f70 7265 7365 7276 655f 706f 7369  cp_preserve_posi
-0002e930: 785f 6275 636b 6574 5f74 6f5f 6469 725f  x_bucket_to_dir_
-0002e940: 6e6f 5f65 7272 6f72 7328 7365 6c66 293a  no_errors(self):
-0002e950: 0a20 2020 2022 2222 5465 7374 7320 7573  .    """Tests us
-0002e960: 6520 6f66 2074 6865 202d 5020 666c 6167  e of the -P flag
-0002e970: 2077 6974 6820 6370 2066 726f 6d20 6120   with cp from a 
-0002e980: 6275 636b 6574 2074 6f20 6120 6c6f 6361  bucket to a loca
-0002e990: 6c20 6469 722e 0a0a 2020 2020 5370 6563  l dir...    Spec
-0002e9a0: 6966 6963 616c 6c79 2074 6573 7473 2063  ifically tests c
-0002e9b0: 6f6d 6269 6e61 7469 6f6e 7320 6f66 2050  ombinations of P
-0002e9c0: 4f53 4958 2061 7474 7269 6275 7465 7320  OSIX attributes 
-0002e9d0: 696e 206d 6574 6164 6174 6120 7468 6174  in metadata that
-0002e9e0: 2077 696c 6c0a 2020 2020 7061 7373 2076   will.    pass v
-0002e9f0: 616c 6964 6174 696f 6e2e 0a20 2020 2022  alidation..    "
-0002ea00: 2222 0a20 2020 2062 7563 6b65 745f 7572  "".    bucket_ur
-0002ea10: 6920 3d20 7365 6c66 2e43 7265 6174 6542  i = self.CreateB
-0002ea20: 7563 6b65 7428 290a 2020 2020 746d 7064  ucket().    tmpd
-0002ea30: 6972 203d 2073 656c 662e 4372 6561 7465  ir = self.Create
-0002ea40: 5465 6d70 4469 7228 290a 2020 2020 5465  TempDir().    Te
-0002ea50: 7374 4370 4d76 504f 5349 5842 7563 6b65  stCpMvPOSIXBucke
-0002ea60: 7454 6f4c 6f63 616c 4e6f 4572 726f 7273  tToLocalNoErrors
-0002ea70: 2873 656c 662c 2062 7563 6b65 745f 7572  (self, bucket_ur
-0002ea80: 692c 2074 6d70 6469 722c 2069 735f 6370  i, tmpdir, is_cp
-0002ea90: 3d54 7275 6529 0a0a 2020 4075 6e69 7474  =True)..  @unitt
-0002eaa0: 6573 742e 736b 6970 4966 2849 535f 5749  est.skipIf(IS_WI
-0002eab0: 4e44 4f57 532c 2027 504f 5349 5820 6174  NDOWS, 'POSIX at
-0002eac0: 7472 6962 7574 6573 206e 6f74 2061 7661  tributes not ava
-0002ead0: 696c 6162 6c65 206f 6e20 5769 6e64 6f77  ilable on Window
-0002eae0: 732e 2729 0a20 2064 6566 2074 6573 745f  s.').  def test_
-0002eaf0: 6370 5f70 7265 7365 7276 655f 706f 7369  cp_preserve_posi
-0002eb00: 785f 6275 636b 6574 5f74 6f5f 6469 725f  x_bucket_to_dir_
-0002eb10: 6572 726f 7273 2873 656c 6629 3a0a 2020  errors(self):.  
-0002eb20: 2020 2222 2254 6573 7473 2075 7365 206f    """Tests use o
-0002eb30: 6620 7468 6520 2d50 2066 6c61 6720 7769  f the -P flag wi
-0002eb40: 7468 2063 7020 6672 6f6d 2061 2062 7563  th cp from a buc
-0002eb50: 6b65 7420 746f 2061 206c 6f63 616c 2064  ket to a local d
-0002eb60: 6972 2e0a 0a20 2020 2053 7065 6369 6669  ir...    Specifi
-0002eb70: 6361 6c6c 792c 2063 6f6d 6269 6e61 7469  cally, combinati
-0002eb80: 6f6e 7320 6f66 2050 4f53 4958 2061 7474  ons of POSIX att
-0002eb90: 7269 6275 7465 7320 696e 206d 6574 6164  ributes in metad
-0002eba0: 6174 6120 7468 6174 2077 696c 6c20 6661  ata that will fa
-0002ebb0: 696c 0a20 2020 2076 616c 6964 6174 696f  il.    validatio
-0002ebc0: 6e2e 0a20 2020 2022 2222 0a20 2020 2062  n..    """.    b
-0002ebd0: 7563 6b65 745f 7572 6920 3d20 7365 6c66  ucket_uri = self
-0002ebe0: 2e43 7265 6174 6542 7563 6b65 7428 290a  .CreateBucket().
-0002ebf0: 2020 2020 746d 7064 6972 203d 2073 656c      tmpdir = sel
-0002ec00: 662e 4372 6561 7465 5465 6d70 4469 7228  f.CreateTempDir(
-0002ec10: 290a 0a20 2020 206f 626a 203d 2073 656c  )..    obj = sel
-0002ec20: 662e 4372 6561 7465 4f62 6a65 6374 2862  f.CreateObject(b
-0002ec30: 7563 6b65 745f 7572 693d 6275 636b 6574  ucket_uri=bucket
-0002ec40: 5f75 7269 2c0a 2020 2020 2020 2020 2020  _uri,.          
+0002e1d0: 2020 3229 2e63 616c 6c2c 0a20 2020 2020    2).call,.     
+0002e1e0: 2020 2020 206d 6178 5f62 7974 6573 5f70       max_bytes_p
+0002e1f0: 6572 5f63 616c 6c3d 4f4e 455f 4d49 4229  er_call=ONE_MIB)
+0002e200: 0a0a 2020 2020 2020 2320 436f 7079 2063  ..      # Copy c
+0002e210: 6f6d 706c 6574 6564 3b20 7472 6163 6b65  ompleted; tracke
+0002e220: 7220 6669 6c65 2073 686f 756c 6420 6265  r file should be
+0002e230: 2064 656c 6574 6564 2e0a 2020 2020 2020   deleted..      
+0002e240: 7365 6c66 2e61 7373 6572 7446 616c 7365  self.assertFalse
+0002e250: 286f 732e 7061 7468 2e65 7869 7374 7328  (os.path.exists(
+0002e260: 7472 6163 6b65 725f 6669 6c65 5f6e 616d  tracker_file_nam
+0002e270: 6529 290a 0a20 2020 2020 2073 656c 662e  e))..      self.
+0002e280: 6173 7365 7274 4571 7561 6c28 0a20 2020  assertEqual(.   
+0002e290: 2020 2020 2020 2067 7375 7469 6c5f 6170         gsutil_ap
+0002e2a0: 692e 4765 744f 626a 6563 744d 6574 6164  i.GetObjectMetad
+0002e2b0: 6174 6128 7372 635f 6f62 6a5f 6d65 7461  ata(src_obj_meta
+0002e2c0: 6461 7461 2e62 7563 6b65 742c 0a20 2020  data.bucket,.   
+0002e2d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e2e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e2f0: 2020 2020 7372 635f 6f62 6a5f 6d65 7461      src_obj_meta
+0002e300: 6461 7461 2e6e 616d 652c 0a20 2020 2020  data.name,.     
+0002e310: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e320: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e330: 2020 6669 656c 6473 3d5b 2763 7573 746f    fields=['custo
+0002e340: 6d65 7245 6e63 7279 7074 696f 6e27 2c0a  merEncryption',.
+0002e350: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e360: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e370: 2020 2020 2020 2020 2020 2020 2020 2027                 '
+0002e380: 6d64 3548 6173 6827 5d29 2e6d 6435 4861  md5Hash']).md5Ha
+0002e390: 7368 2c0a 2020 2020 2020 2020 2020 6773  sh,.          gs
+0002e3a0: 7574 696c 5f61 7069 2e47 6574 4f62 6a65  util_api.GetObje
+0002e3b0: 6374 4d65 7461 6461 7461 2864 7374 5f6f  ctMetadata(dst_o
+0002e3c0: 626a 5f6d 6574 6164 6174 612e 6275 636b  bj_metadata.buck
+0002e3d0: 6574 2c0a 2020 2020 2020 2020 2020 2020  et,.            
+0002e3e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e3f0: 2020 2020 2020 2020 2020 2064 7374 5f6f             dst_o
+0002e400: 626a 5f6d 6574 6164 6174 612e 6e61 6d65  bj_metadata.name
+0002e410: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+0002e420: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e430: 2020 2020 2020 2020 2066 6965 6c64 733d           fields=
+0002e440: 5b27 6375 7374 6f6d 6572 456e 6372 7970  ['customerEncryp
+0002e450: 7469 6f6e 272c 0a20 2020 2020 2020 2020  tion',.         
+0002e460: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e470: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e480: 2020 2020 2020 276d 6435 4861 7368 275d        'md5Hash']
+0002e490: 292e 6d64 3548 6173 682c 0a20 2020 2020  ).md5Hash,.     
+0002e4a0: 2020 2020 2027 4572 726f 723a 2052 6577       'Error: Rew
+0002e4b0: 7269 7474 656e 206f 626a 6563 745c 2773  ritten object\'s
+0002e4c0: 2068 6173 6820 646f 6573 6e5c 2774 206d   hash doesn\'t m
+0002e4d0: 6174 6368 2073 6f75 7263 6520 6f62 6a65  atch source obje
+0002e4e0: 6374 2e27 290a 2020 2020 6669 6e61 6c6c  ct.').    finall
+0002e4f0: 793a 0a20 2020 2020 2023 2043 6c65 616e  y:.      # Clean
+0002e500: 2075 7020 6966 2073 6f6d 6574 6869 6e67   up if something
+0002e510: 2077 656e 7420 7772 6f6e 672e 0a20 2020   went wrong..   
+0002e520: 2020 2044 656c 6574 6554 7261 636b 6572     DeleteTracker
+0002e530: 4669 6c65 2874 7261 636b 6572 5f66 696c  File(tracker_fil
+0002e540: 655f 6e61 6d65 290a 0a20 2064 6566 2074  e_name)..  def t
+0002e550: 6573 745f 7265 7772 6974 655f 6370 5f72  est_rewrite_cp_r
+0002e560: 6573 756d 655f 736f 7572 6365 5f63 6861  esume_source_cha
+0002e570: 6e67 6564 2873 656c 6629 3a0a 2020 2020  nged(self):.    
+0002e580: 2222 2254 6573 7473 2074 6861 7420 5265  """Tests that Re
+0002e590: 7772 6974 6520 7374 6172 7473 206f 7665  write starts ove
+0002e5a0: 7220 7768 656e 2074 6865 2073 6f75 7263  r when the sourc
+0002e5b0: 6520 6f62 6a65 6374 2068 6173 2063 6861  e object has cha
+0002e5c0: 6e67 6564 2e22 2222 0a20 2020 2069 6620  nged.""".    if 
+0002e5d0: 7365 6c66 2e74 6573 745f 6170 6920 3d3d  self.test_api ==
+0002e5e0: 2041 7069 5365 6c65 6374 6f72 2e58 4d4c   ApiSelector.XML
+0002e5f0: 3a0a 2020 2020 2020 7265 7475 726e 2075  :.      return u
+0002e600: 6e69 7474 6573 742e 736b 6970 2827 5265  nittest.skip('Re
+0002e610: 7772 6974 6520 4150 4920 6973 206f 6e6c  write API is onl
+0002e620: 7920 7375 7070 6f72 7465 6420 696e 204a  y supported in J
+0002e630: 534f 4e2e 2729 0a20 2020 2062 7563 6b65  SON.').    bucke
+0002e640: 745f 7572 6920 3d20 7365 6c66 2e43 7265  t_uri = self.Cre
+0002e650: 6174 6542 7563 6b65 7428 290a 2020 2020  ateBucket().    
+0002e660: 2320 5365 636f 6e64 2062 7563 6b65 7420  # Second bucket 
+0002e670: 6e65 6564 7320 746f 2062 6520 6120 6469  needs to be a di
+0002e680: 6666 6572 656e 7420 7374 6f72 6167 6520  fferent storage 
+0002e690: 636c 6173 7320 736f 2074 6865 2073 6572  class so the ser
+0002e6a0: 7669 6365 0a20 2020 2023 2061 6374 7561  vice.    # actua
+0002e6b0: 6c6c 7920 7265 7772 6974 6573 2074 6865  lly rewrites the
+0002e6c0: 2062 7974 6573 2e0a 2020 2020 6275 636b   bytes..    buck
+0002e6d0: 6574 5f75 7269 3220 3d20 7365 6c66 2e43  et_uri2 = self.C
+0002e6e0: 7265 6174 6542 7563 6b65 7428 0a20 2020  reateBucket(.   
+0002e6f0: 2020 2020 2073 746f 7261 6765 5f63 6c61       storage_cla
+0002e700: 7373 3d27 6475 7261 626c 655f 7265 6475  ss='durable_redu
+0002e710: 6365 645f 6176 6169 6c61 6269 6c69 7479  ced_availability
+0002e720: 2729 0a20 2020 2023 206d 6178 4279 7465  ').    # maxByte
+0002e730: 7350 6572 4361 6c6c 206d 7573 7420 6265  sPerCall must be
+0002e740: 203e 3d20 3120 4d69 422c 2073 6f20 6372   >= 1 MiB, so cr
+0002e750: 6561 7465 2061 6e20 6f62 6a65 6374 203e  eate an object >
+0002e760: 2032 204d 6942 2062 6563 6175 7365 2077   2 MiB because w
+0002e770: 650a 2020 2020 2320 6e65 6564 2032 2072  e.    # need 2 r
+0002e780: 6573 706f 6e73 6520 6672 6f6d 2074 6865  esponse from the
+0002e790: 2073 6572 7669 6365 3a20 3120 7375 6363   service: 1 succ
+0002e7a0: 6573 732c 2031 2066 6169 6c75 7265 2070  ess, 1 failure p
+0002e7b0: 7269 6f72 2074 6f0a 2020 2020 2320 636f  rior to.    # co
+0002e7c0: 6d70 6c65 7469 6f6e 2e0a 2020 2020 6f62  mpletion..    ob
+0002e7d0: 6a65 6374 5f75 7269 203d 2073 656c 662e  ject_uri = self.
+0002e7e0: 4372 6561 7465 4f62 6a65 6374 2862 7563  CreateObject(buc
+0002e7f0: 6b65 745f 7572 693d 6275 636b 6574 5f75  ket_uri=bucket_u
+0002e800: 7269 2c0a 2020 2020 2020 2020 2020 2020  ri,.            
+0002e810: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e820: 2020 2020 2020 206f 626a 6563 745f 6e61         object_na
+0002e830: 6d65 3d27 666f 6f27 2c0a 2020 2020 2020  me='foo',.      
+0002e840: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e850: 2020 2020 2020 2020 2020 2020 2063 6f6e               con
+0002e860: 7465 6e74 733d 2862 2731 3227 202a 204f  tents=(b'12' * O
+0002e870: 4e45 5f4d 4942 2920 2b20 6227 6261 7227  NE_MIB) + b'bar'
+0002e880: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+0002e890: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e8a0: 2020 2020 2070 7265 6665 725f 6a73 6f6e       prefer_json
+0002e8b0: 5f61 7069 3d54 7275 6529 0a20 2020 2067  _api=True).    g
+0002e8c0: 7375 7469 6c5f 6170 6920 3d20 4763 734a  sutil_api = GcsJ
+0002e8d0: 736f 6e41 7069 2842 7563 6b65 7453 746f  sonApi(BucketSto
+0002e8e0: 7261 6765 5572 692c 206c 6f67 6769 6e67  rageUri, logging
+0002e8f0: 2e67 6574 4c6f 6767 6572 2829 2c0a 2020  .getLogger(),.  
+0002e900: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e910: 2020 2020 2020 2020 2020 4469 7363 6172            Discar
+0002e920: 644d 6573 7361 6765 7351 7565 7565 2829  dMessagesQueue()
+0002e930: 2c20 7365 6c66 2e64 6566 6175 6c74 5f70  , self.default_p
+0002e940: 726f 7669 6465 7229 0a20 2020 206b 6579  rovider).    key
+0002e950: 203d 206f 626a 6563 745f 7572 692e 6765   = object_uri.ge
+0002e960: 745f 6b65 7928 290a 2020 2020 7372 635f  t_key().    src_
+0002e970: 6f62 6a5f 6d65 7461 6461 7461 203d 2061  obj_metadata = a
+0002e980: 7069 746f 6f6c 735f 6d65 7373 6167 6573  pitools_messages
+0002e990: 2e4f 626a 6563 7428 6e61 6d65 3d6b 6579  .Object(name=key
+0002e9a0: 2e6e 616d 652c 0a20 2020 2020 2020 2020  .name,.         
+0002e9b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e9c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e9d0: 2020 2020 2020 2062 7563 6b65 743d 6b65         bucket=ke
+0002e9e0: 792e 6275 636b 6574 2e6e 616d 652c 0a20  y.bucket.name,. 
+0002e9f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ea00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ea10: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+0002ea20: 6f6e 7465 6e74 5479 7065 3d6b 6579 2e63  ontentType=key.c
+0002ea30: 6f6e 7465 6e74 5f74 7970 652c 0a20 2020  ontent_type,.   
+0002ea40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ea50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ea60: 2020 2020 2020 2020 2020 2020 2065 7461               eta
+0002ea70: 673d 6b65 792e 6574 6167 2e73 7472 6970  g=key.etag.strip
+0002ea80: 2827 225c 2727 2929 0a20 2020 2064 7374  ('"\'')).    dst
+0002ea90: 5f6f 626a 5f6e 616d 6520 3d20 7365 6c66  _obj_name = self
+0002eaa0: 2e4d 616b 6554 656d 704e 616d 6528 276f  .MakeTempName('o
+0002eab0: 626a 6563 7427 290a 2020 2020 6473 745f  bject').    dst_
+0002eac0: 6f62 6a5f 6d65 7461 6461 7461 203d 2061  obj_metadata = a
+0002ead0: 7069 746f 6f6c 735f 6d65 7373 6167 6573  pitools_messages
+0002eae0: 2e4f 626a 6563 7428 0a20 2020 2020 2020  .Object(.       
+0002eaf0: 2062 7563 6b65 743d 6275 636b 6574 5f75   bucket=bucket_u
+0002eb00: 7269 322e 6275 636b 6574 5f6e 616d 652c  ri2.bucket_name,
+0002eb10: 0a20 2020 2020 2020 206e 616d 653d 6473  .        name=ds
+0002eb20: 745f 6f62 6a5f 6e61 6d65 2c0a 2020 2020  t_obj_name,.    
+0002eb30: 2020 2020 636f 6e74 656e 7454 7970 653d      contentType=
+0002eb40: 7372 635f 6f62 6a5f 6d65 7461 6461 7461  src_obj_metadata
+0002eb50: 2e63 6f6e 7465 6e74 5479 7065 290a 2020  .contentType).  
+0002eb60: 2020 7472 6163 6b65 725f 6669 6c65 5f6e    tracker_file_n
+0002eb70: 616d 6520 3d20 4765 7452 6577 7269 7465  ame = GetRewrite
+0002eb80: 5472 6163 6b65 7246 696c 6550 6174 6828  TrackerFilePath(
+0002eb90: 7372 635f 6f62 6a5f 6d65 7461 6461 7461  src_obj_metadata
+0002eba0: 2e62 7563 6b65 742c 0a20 2020 2020 2020  .bucket,.       
+0002ebb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ebc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ebd0: 2020 2020 2020 2020 2020 2073 7263 5f6f             src_o
+0002ebe0: 626a 5f6d 6574 6164 6174 612e 6e61 6d65  bj_metadata.name
+0002ebf0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+0002ec00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ec10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ec20: 2020 2020 6473 745f 6f62 6a5f 6d65 7461      dst_obj_meta
+0002ec30: 6461 7461 2e62 7563 6b65 742c 0a20 2020  data.bucket,.   
+0002ec40: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0002ec50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ec60: 2020 6f62 6a65 6374 5f6e 616d 653d 276f    object_name='o
-0002ec70: 626a 272c 0a20 2020 2020 2020 2020 2020  bj',.           
-0002ec80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ec90: 2063 6f6e 7465 6e74 733d 6227 6f62 6a27   contents=b'obj'
-0002eca0: 290a 2020 2020 5465 7374 4370 4d76 504f  ).    TestCpMvPO
-0002ecb0: 5349 5842 7563 6b65 7454 6f4c 6f63 616c  SIXBucketToLocal
-0002ecc0: 4572 726f 7273 2873 656c 662c 2062 7563  Errors(self, buc
-0002ecd0: 6b65 745f 7572 692c 206f 626a 2c20 746d  ket_uri, obj, tm
-0002ece0: 7064 6972 2c20 6973 5f63 703d 5472 7565  pdir, is_cp=True
-0002ecf0: 290a 0a20 2040 756e 6974 7465 7374 2e73  )..  @unittest.s
-0002ed00: 6b69 7049 6628 4953 5f57 494e 444f 5753  kipIf(IS_WINDOWS
-0002ed10: 2c20 2750 4f53 4958 2061 7474 7269 6275  , 'POSIX attribu
-0002ed20: 7465 7320 6e6f 7420 6176 6169 6c61 626c  tes not availabl
-0002ed30: 6520 6f6e 2057 696e 646f 7773 2e27 290a  e on Windows.').
-0002ed40: 2020 6465 6620 7465 7374 5f63 705f 7072    def test_cp_pr
-0002ed50: 6573 6576 655f 706f 7369 785f 6469 725f  eseve_posix_dir_
-0002ed60: 746f 5f62 7563 6b65 745f 6e6f 5f65 7272  to_bucket_no_err
-0002ed70: 6f72 7328 7365 6c66 293a 0a20 2020 2022  ors(self):.    "
-0002ed80: 2222 5465 7374 7320 7573 6520 6f66 2074  ""Tests use of t
-0002ed90: 6865 202d 5020 666c 6167 2077 6974 6820  he -P flag with 
-0002eda0: 6370 2066 726f 6d20 6120 6c6f 6361 6c20  cp from a local 
-0002edb0: 6469 7220 746f 2061 2062 7563 6b65 742e  dir to a bucket.
-0002edc0: 2222 220a 2020 2020 6275 636b 6574 5f75  """.    bucket_u
-0002edd0: 7269 203d 2073 656c 662e 4372 6561 7465  ri = self.Create
-0002ede0: 4275 636b 6574 2829 0a20 2020 2054 6573  Bucket().    Tes
-0002edf0: 7443 704d 7650 4f53 4958 4c6f 6361 6c54  tCpMvPOSIXLocalT
-0002ee00: 6f42 7563 6b65 744e 6f45 7272 6f72 7328  oBucketNoErrors(
-0002ee10: 7365 6c66 2c20 6275 636b 6574 5f75 7269  self, bucket_uri
-0002ee20: 2c20 6973 5f63 703d 5472 7565 290a 0a20  , is_cp=True).. 
-0002ee30: 2064 6566 2074 6573 745f 6370 5f6d 696e   def test_cp_min
-0002ee40: 7573 5f73 5f74 6f5f 6e6f 6e5f 636c 6f75  us_s_to_non_clou
-0002ee50: 645f 6465 7374 5f66 6169 6c73 2873 656c  d_dest_fails(sel
-0002ee60: 6629 3a0a 2020 2020 2222 2254 6573 7420  f):.    """Test 
-0002ee70: 7468 6174 2063 7020 2d73 206f 7065 7261  that cp -s opera
-0002ee80: 7469 6f6e 7320 746f 2061 206e 6f6e 2d63  tions to a non-c
-0002ee90: 6c6f 7564 2064 6573 7469 6e61 7469 6f6e  loud destination
-0002eea0: 2061 7265 2070 7265 7665 6e74 6564 2e22   are prevented."
-0002eeb0: 2222 0a20 2020 206c 6f63 616c 5f66 696c  "".    local_fil
-0002eec0: 6520 3d20 7365 6c66 2e43 7265 6174 6554  e = self.CreateT
-0002eed0: 656d 7046 696c 6528 636f 6e74 656e 7473  empFile(contents
-0002eee0: 3d62 2766 6f6f 2729 0a20 2020 2064 6573  =b'foo').    des
-0002eef0: 745f 6469 7220 3d20 7365 6c66 2e43 7265  t_dir = self.Cre
-0002ef00: 6174 6554 656d 7044 6972 2829 0a20 2020  ateTempDir().   
-0002ef10: 2073 7464 6572 7220 3d20 7365 6c66 2e52   stderr = self.R
-0002ef20: 756e 4773 5574 696c 285b 2763 7027 2c20  unGsUtil(['cp', 
-0002ef30: 272d 7327 2c20 2773 7461 6e64 6172 6427  '-s', 'standard'
-0002ef40: 2c20 6c6f 6361 6c5f 6669 6c65 2c20 6465  , local_file, de
-0002ef50: 7374 5f64 6972 5d2c 0a20 2020 2020 2020  st_dir],.       
-0002ef60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ef70: 2020 2020 2065 7870 6563 7465 645f 7374       expected_st
-0002ef80: 6174 7573 3d31 2c0a 2020 2020 2020 2020  atus=1,.        
-0002ef90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002efa0: 2020 2020 7265 7475 726e 5f73 7464 6572      return_stder
-0002efb0: 723d 5472 7565 290a 2020 2020 7365 6c66  r=True).    self
-0002efc0: 2e61 7373 6572 7449 6e28 2743 616e 6e6f  .assertIn('Canno
-0002efd0: 7420 7370 6563 6966 7920 7374 6f72 6167  t specify storag
-0002efe0: 6520 636c 6173 7320 666f 7220 6120 6e6f  e class for a no
-0002eff0: 6e2d 636c 6f75 6420 6465 7374 696e 6174  n-cloud destinat
-0002f000: 696f 6e3a 272c 0a20 2020 2020 2020 2020  ion:',.         
-0002f010: 2020 2020 2020 2020 2073 7464 6572 7229           stderr)
-0002f020: 0a0a 2020 2320 544f 444f 3a20 5265 6d6f  ..  # TODO: Remo
-0002f030: 7665 2040 736b 6970 2061 6e6e 6f74 6174  ve @skip annotat
-0002f040: 696f 6e20 6672 6f6d 2074 6869 7320 7465  ion from this te
-0002f050: 7374 206f 6e63 6520 7765 2075 7067 7261  st once we upgra
-0002f060: 6465 2074 6f20 7468 6520 426f 746f 0a20  de to the Boto. 
-0002f070: 2023 2076 6572 7369 6f6e 2074 6861 7420   # version that 
-0002f080: 7061 7273 6573 2074 6865 2073 746f 7261  parses the stora
-0002f090: 6765 2063 6c61 7373 2068 6561 6465 7220  ge class header 
-0002f0a0: 666f 7220 4845 4144 204f 626a 6563 7420  for HEAD Object 
-0002f0b0: 7265 7370 6f6e 7365 732e 0a20 2040 536b  responses..  @Sk
-0002f0c0: 6970 466f 7258 4d4c 2827 4e65 6564 2042  ipForXML('Need B
-0002f0d0: 6f74 6f20 7665 7273 696f 6e20 3e20 322e  oto version > 2.
-0002f0e0: 3436 2e31 2729 0a20 2064 6566 2074 6573  46.1').  def tes
-0002f0f0: 745f 6370 5f73 7065 6369 6679 5f6e 6f6e  t_cp_specify_non
-0002f100: 6465 6661 756c 745f 7374 6f72 6167 655f  default_storage_
-0002f110: 636c 6173 7328 7365 6c66 293a 0a20 2020  class(self):.   
-0002f120: 2062 7563 6b65 745f 7572 6920 3d20 7365   bucket_uri = se
-0002f130: 6c66 2e43 7265 6174 6542 7563 6b65 7428  lf.CreateBucket(
-0002f140: 290a 2020 2020 6f62 6a65 6374 5f75 7269  ).    object_uri
-0002f150: 203d 2073 656c 662e 4372 6561 7465 4f62   = self.CreateOb
-0002f160: 6a65 6374 2862 7563 6b65 745f 7572 693d  ject(bucket_uri=
-0002f170: 6275 636b 6574 5f75 7269 2c0a 2020 2020  bucket_uri,.    
-0002f180: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f190: 2020 2020 2020 2020 2020 2020 2020 206f                 o
-0002f1a0: 626a 6563 745f 6e61 6d65 3d27 666f 6f27  bject_name='foo'
-0002f1b0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-0002f1c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f1d0: 2020 2020 2063 6f6e 7465 6e74 733d 6227       contents=b'
-0002f1e0: 666f 6f27 290a 2020 2020 6f62 6a65 6374  foo').    object
-0002f1f0: 325f 7375 7269 203d 2073 7572 6928 6f62  2_suri = suri(ob
-0002f200: 6a65 6374 5f75 7269 2920 2b20 2762 6172  ject_uri) + 'bar
-0002f210: 270a 2020 2020 2320 5370 6563 6966 7920  '.    # Specify 
-0002f220: 7374 6f72 6167 6520 636c 6173 7320 6e61  storage class na
-0002f230: 6d65 2061 7320 6d69 7865 6420 6361 7365  me as mixed case
-0002f240: 2068 6572 6520 746f 2065 6e73 7572 6520   here to ensure 
-0002f250: 7468 6174 2069 740a 2020 2020 2320 6765  that it.    # ge
-0002f260: 7473 206e 6f72 6d61 6c69 7a65 6420 746f  ts normalized to
-0002f270: 2075 7070 6572 6361 7365 2028 5333 2077   uppercase (S3 w
-0002f280: 6f75 6c64 2072 6574 7572 6e20 616e 2065  ould return an e
-0002f290: 7272 6f72 206f 7468 6572 7769 7365 292c  rror otherwise),
-0002f2a0: 2061 6e64 0a20 2020 2023 2074 6861 7420   and.    # that 
-0002f2b0: 7573 696e 6720 7468 6520 6e6f 726d 616c  using the normal
-0002f2c0: 697a 6564 2063 6173 6520 6973 2061 6363  ized case is acc
-0002f2d0: 6570 7465 6420 6279 2065 6163 6820 4150  epted by each AP
-0002f2e0: 492e 0a20 2020 206e 6f6e 6465 6661 756c  I..    nondefaul
-0002f2f0: 745f 7374 6f72 6167 655f 636c 6173 7320  t_storage_class 
-0002f300: 3d20 7b0a 2020 2020 2020 2020 2773 3327  = {.        's3'
-0002f310: 3a20 2753 7461 6e64 6172 645f 6941 272c  : 'Standard_iA',
-0002f320: 0a20 2020 2020 2020 2027 6773 273a 2027  .        'gs': '
-0002f330: 6475 7261 626c 655f 5245 4455 4345 445f  durable_REDUCED_
-0002f340: 6176 6169 6c61 6269 6c69 7479 270a 2020  availability'.  
-0002f350: 2020 7d0a 2020 2020 7374 6f72 6167 655f    }.    storage_
-0002f360: 636c 6173 7320 3d20 6e6f 6e64 6566 6175  class = nondefau
-0002f370: 6c74 5f73 746f 7261 6765 5f63 6c61 7373  lt_storage_class
-0002f380: 5b73 656c 662e 6465 6661 756c 745f 7072  [self.default_pr
-0002f390: 6f76 6964 6572 5d0a 2020 2020 7365 6c66  ovider].    self
-0002f3a0: 2e52 756e 4773 5574 696c 285b 2763 7027  .RunGsUtil(['cp'
-0002f3b0: 2c20 272d 7327 2c20 7374 6f72 6167 655f  , '-s', storage_
-0002f3c0: 636c 6173 732c 2073 7572 6928 6f62 6a65  class, suri(obje
-0002f3d0: 6374 5f75 7269 292c 206f 626a 6563 7432  ct_uri), object2
-0002f3e0: 5f73 7572 695d 290a 2020 2020 7374 646f  _suri]).    stdo
-0002f3f0: 7574 203d 2073 656c 662e 5275 6e47 7355  ut = self.RunGsU
-0002f400: 7469 6c28 5b27 7374 6174 272c 206f 626a  til(['stat', obj
-0002f410: 6563 7432 5f73 7572 695d 2c20 7265 7475  ect2_suri], retu
-0002f420: 726e 5f73 7464 6f75 743d 5472 7565 290a  rn_stdout=True).
-0002f430: 2020 2020 7365 6c66 2e61 7373 6572 7452      self.assertR
-0002f440: 6567 6578 704d 6174 6368 6573 5769 7468  egexpMatchesWith
-0002f450: 466c 6167 7328 7374 646f 7574 2c0a 2020  Flags(stdout,.  
-0002f460: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f470: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f480: 2020 2020 7227 5374 6f72 6167 6520 636c      r'Storage cl
-0002f490: 6173 733a 5c73 2b25 7327 2025 2073 746f  ass:\s+%s' % sto
-0002f4a0: 7261 6765 5f63 6c61 7373 2c0a 2020 2020  rage_class,.    
-0002f4b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f4c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f4d0: 2020 666c 6167 733d 7265 2e49 474e 4f52    flags=re.IGNOR
-0002f4e0: 4543 4153 4529 0a0a 2020 4053 6b69 7046  ECASE)..  @SkipF
-0002f4f0: 6f72 5333 2827 5465 7374 2075 7365 7320  orS3('Test uses 
-0002f500: 6773 2d73 7065 6369 6669 6320 7374 6f72  gs-specific stor
-0002f510: 6167 6520 636c 6173 7365 732e 2729 0a20  age classes.'). 
-0002f520: 2064 6566 2074 6573 745f 6370 5f73 6574   def test_cp_set
-0002f530: 735f 636f 7272 6563 745f 6465 7374 5f73  s_correct_dest_s
-0002f540: 746f 7261 6765 5f63 6c61 7373 2873 656c  torage_class(sel
-0002f550: 6629 3a0a 2020 2020 2222 2254 6573 7473  f):.    """Tests
-0002f560: 2074 6861 7420 6f62 6a65 6374 2073 746f   that object sto
-0002f570: 7261 6765 2063 6c61 7373 2069 7320 7365  rage class is se
-0002f580: 7420 636f 7272 6563 746c 7920 7769 7468  t correctly with
-0002f590: 2061 6e64 2077 6974 686f 7574 202d 732e   and without -s.
-0002f5a0: 2222 220a 2020 2020 2320 5573 6520 6120  """.    # Use a 
-0002f5b0: 6e6f 6e2d 6465 6661 756c 7420 7374 6f72  non-default stor
-0002f5c0: 6167 6520 636c 6173 7320 6173 2074 6865  age class as the
-0002f5d0: 2064 6566 6175 6c74 2066 6f72 2074 6865   default for the
-0002f5e0: 2062 7563 6b65 742e 0a20 2020 2062 7563   bucket..    buc
-0002f5f0: 6b65 745f 7572 6920 3d20 7365 6c66 2e43  ket_uri = self.C
-0002f600: 7265 6174 6542 7563 6b65 7428 7374 6f72  reateBucket(stor
-0002f610: 6167 655f 636c 6173 733d 276e 6561 726c  age_class='nearl
-0002f620: 696e 6527 290a 2020 2020 2320 456e 7375  ine').    # Ensu
-0002f630: 7265 2073 746f 7261 6765 2063 6c61 7373  re storage class
-0002f640: 2069 7320 7365 7420 636f 7272 6563 746c   is set correctl
-0002f650: 7920 666f 7220 6120 6c6f 6361 6c2d 746f  y for a local-to
-0002f660: 2d63 6c6f 7564 2063 6f70 792e 0a20 2020  -cloud copy..   
-0002f670: 206c 6f63 616c 5f66 6e61 6d65 203d 2027   local_fname = '
-0002f680: 666f 6f2d 6f72 6967 270a 2020 2020 6c6f  foo-orig'.    lo
-0002f690: 6361 6c5f 6670 6174 6820 3d20 7365 6c66  cal_fpath = self
-0002f6a0: 2e43 7265 6174 6554 656d 7046 696c 6528  .CreateTempFile(
-0002f6b0: 636f 6e74 656e 7473 3d62 2766 6f6f 272c  contents=b'foo',
-0002f6c0: 2066 696c 655f 6e61 6d65 3d6c 6f63 616c   file_name=local
-0002f6d0: 5f66 6e61 6d65 290a 2020 2020 666f 6f5f  _fname).    foo_
-0002f6e0: 636c 6f75 645f 7375 7269 203d 2073 7572  cloud_suri = sur
-0002f6f0: 6928 6275 636b 6574 5f75 7269 2920 2b20  i(bucket_uri) + 
-0002f700: 272f 2720 2b20 6c6f 6361 6c5f 666e 616d  '/' + local_fnam
-0002f710: 650a 2020 2020 7365 6c66 2e52 756e 4773  e.    self.RunGs
-0002f720: 5574 696c 285b 2763 7027 2c20 272d 7327  Util(['cp', '-s'
-0002f730: 2c20 2773 7461 6e64 6172 6427 2c20 6c6f  , 'standard', lo
-0002f740: 6361 6c5f 6670 6174 682c 2066 6f6f 5f63  cal_fpath, foo_c
-0002f750: 6c6f 7564 5f73 7572 695d 290a 2020 2020  loud_suri]).    
-0002f760: 7769 7468 2053 6574 426f 746f 436f 6e66  with SetBotoConf
-0002f770: 6967 466f 7254 6573 7428 5b28 2747 5355  igForTest([('GSU
-0002f780: 7469 6c27 2c20 2770 7265 6665 725f 6170  til', 'prefer_ap
-0002f790: 6927 2c20 276a 736f 6e27 295d 293a 0a20  i', 'json')]):. 
-0002f7a0: 2020 2020 2073 7464 6f75 7420 3d20 7365       stdout = se
-0002f7b0: 6c66 2e52 756e 4773 5574 696c 285b 2773  lf.RunGsUtil(['s
-0002f7c0: 7461 7427 2c20 666f 6f5f 636c 6f75 645f  tat', foo_cloud_
-0002f7d0: 7375 7269 5d2c 2072 6574 7572 6e5f 7374  suri], return_st
-0002f7e0: 646f 7574 3d54 7275 6529 0a20 2020 2073  dout=True).    s
-0002f7f0: 656c 662e 6173 7365 7274 5265 6765 7870  elf.assertRegexp
-0002f800: 4d61 7463 6865 7357 6974 6846 6c61 6773  MatchesWithFlags
-0002f810: 2873 7464 6f75 742c 0a20 2020 2020 2020  (stdout,.       
-0002f820: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f830: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0002f840: 2753 746f 7261 6765 2063 6c61 7373 3a5c  'Storage class:\
-0002f850: 732b 5354 414e 4441 5244 272c 0a20 2020  s+STANDARD',.   
-0002f860: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f870: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f880: 2020 2066 6c61 6773 3d72 652e 4947 4e4f     flags=re.IGNO
-0002f890: 5245 4341 5345 290a 0a20 2020 2023 2045  RECASE)..    # E
-0002f8a0: 6e73 7572 6520 7374 6f72 6167 6520 636c  nsure storage cl
-0002f8b0: 6173 7320 6973 2073 6574 2063 6f72 7265  ass is set corre
-0002f8c0: 6374 6c79 2066 6f72 2061 2063 6c6f 7564  ctly for a cloud
-0002f8d0: 2d74 6f2d 636c 6f75 6420 636f 7079 2077  -to-cloud copy w
-0002f8e0: 6865 6e20 6e6f 0a20 2020 2023 2064 6573  hen no.    # des
-0002f8f0: 7469 6e61 7469 6f6e 2073 746f 7261 6765  tination storage
-0002f900: 2063 6c61 7373 2069 7320 7370 6563 6966   class is specif
-0002f910: 6965 642e 0a20 2020 2066 6f6f 5f6e 6c5f  ied..    foo_nl_
-0002f920: 7375 7269 203d 2073 7572 6928 6275 636b  suri = suri(buck
-0002f930: 6574 5f75 7269 2920 2b20 272f 666f 6f2d  et_uri) + '/foo-
-0002f940: 6e6c 270a 2020 2020 7365 6c66 2e52 756e  nl'.    self.Run
-0002f950: 4773 5574 696c 285b 2763 7027 2c20 666f  GsUtil(['cp', fo
-0002f960: 6f5f 636c 6f75 645f 7375 7269 2c20 666f  o_cloud_suri, fo
-0002f970: 6f5f 6e6c 5f73 7572 695d 290a 2020 2020  o_nl_suri]).    
-0002f980: 2320 544f 444f 3a20 5265 6d6f 7665 2077  # TODO: Remove w
-0002f990: 6974 682d 636c 6175 7365 2061 6674 6572  ith-clause after
-0002f9a0: 2061 6464 696e 6720 7374 6f72 6167 6520   adding storage 
-0002f9b0: 636c 6173 7320 7061 7273 696e 6720 696e  class parsing in
-0002f9c0: 2042 6f74 6f2e 0a20 2020 2077 6974 6820   Boto..    with 
-0002f9d0: 5365 7442 6f74 6f43 6f6e 6669 6746 6f72  SetBotoConfigFor
-0002f9e0: 5465 7374 285b 2827 4753 5574 696c 272c  Test([('GSUtil',
-0002f9f0: 2027 7072 6566 6572 5f61 7069 272c 2027   'prefer_api', '
-0002fa00: 6a73 6f6e 2729 5d29 3a0a 2020 2020 2020  json')]):.      
-0002fa10: 7374 646f 7574 203d 2073 656c 662e 5275  stdout = self.Ru
-0002fa20: 6e47 7355 7469 6c28 5b27 7374 6174 272c  nGsUtil(['stat',
-0002fa30: 2066 6f6f 5f6e 6c5f 7375 7269 5d2c 2072   foo_nl_suri], r
-0002fa40: 6574 7572 6e5f 7374 646f 7574 3d54 7275  eturn_stdout=Tru
-0002fa50: 6529 0a20 2020 2073 656c 662e 6173 7365  e).    self.asse
-0002fa60: 7274 5265 6765 7870 4d61 7463 6865 7357  rtRegexpMatchesW
-0002fa70: 6974 6846 6c61 6773 2873 7464 6f75 742c  ithFlags(stdout,
-0002fa80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002fa90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002faa0: 2020 2020 2020 2072 2753 746f 7261 6765         r'Storage
-0002fab0: 2063 6c61 7373 3a5c 732b 4e45 4152 4c49   class:\s+NEARLI
-0002fac0: 4e45 272c 0a20 2020 2020 2020 2020 2020  NE',.           
-0002fad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002fae0: 2020 2020 2020 2020 2020 2066 6c61 6773             flags
-0002faf0: 3d72 652e 4947 4e4f 5245 4341 5345 290a  =re.IGNORECASE).
-0002fb00: 0a20 2020 2023 2045 6e73 7572 6520 7374  .    # Ensure st
-0002fb10: 6f72 6167 6520 636c 6173 7320 6973 2073  orage class is s
-0002fb20: 6574 2063 6f72 7265 6374 6c79 2066 6f72  et correctly for
-0002fb30: 2061 2063 6c6f 7564 2d74 6f2d 636c 6f75   a cloud-to-clou
-0002fb40: 6420 636f 7079 2077 6865 6e20 610a 2020  d copy when a.  
-0002fb50: 2020 2320 6e6f 6e2d 6275 636b 6574 2d64    # non-bucket-d
-0002fb60: 6566 6175 6c74 2073 746f 7261 6765 2063  efault storage c
-0002fb70: 6c61 7373 2069 7320 7370 6563 6966 6965  lass is specifie
-0002fb80: 642e 0a20 2020 2066 6f6f 5f73 7464 5f73  d..    foo_std_s
-0002fb90: 7572 6920 3d20 7375 7269 2862 7563 6b65  uri = suri(bucke
-0002fba0: 745f 7572 6929 202b 2027 2f66 6f6f 2d73  t_uri) + '/foo-s
-0002fbb0: 7464 270a 2020 2020 7365 6c66 2e52 756e  td'.    self.Run
-0002fbc0: 4773 5574 696c 285b 2763 7027 2c20 272d  GsUtil(['cp', '-
-0002fbd0: 7327 2c20 2773 7461 6e64 6172 6427 2c20  s', 'standard', 
-0002fbe0: 666f 6f5f 6e6c 5f73 7572 692c 2066 6f6f  foo_nl_suri, foo
-0002fbf0: 5f73 7464 5f73 7572 695d 290a 2020 2020  _std_suri]).    
-0002fc00: 2320 544f 444f 3a20 5265 6d6f 7665 2077  # TODO: Remove w
-0002fc10: 6974 682d 636c 6175 7365 2061 6674 6572  ith-clause after
-0002fc20: 2061 6464 696e 6720 7374 6f72 6167 6520   adding storage 
-0002fc30: 636c 6173 7320 7061 7273 696e 6720 696e  class parsing in
-0002fc40: 2042 6f74 6f2e 0a20 2020 2077 6974 6820   Boto..    with 
-0002fc50: 5365 7442 6f74 6f43 6f6e 6669 6746 6f72  SetBotoConfigFor
-0002fc60: 5465 7374 285b 2827 4753 5574 696c 272c  Test([('GSUtil',
-0002fc70: 2027 7072 6566 6572 5f61 7069 272c 2027   'prefer_api', '
-0002fc80: 6a73 6f6e 2729 5d29 3a0a 2020 2020 2020  json')]):.      
-0002fc90: 7374 646f 7574 203d 2073 656c 662e 5275  stdout = self.Ru
-0002fca0: 6e47 7355 7469 6c28 5b27 7374 6174 272c  nGsUtil(['stat',
-0002fcb0: 2066 6f6f 5f73 7464 5f73 7572 695d 2c20   foo_std_suri], 
-0002fcc0: 7265 7475 726e 5f73 7464 6f75 743d 5472  return_stdout=Tr
-0002fcd0: 7565 290a 2020 2020 7365 6c66 2e61 7373  ue).    self.ass
-0002fce0: 6572 7452 6567 6578 704d 6174 6368 6573  ertRegexpMatches
-0002fcf0: 5769 7468 466c 6167 7328 7374 646f 7574  WithFlags(stdout
-0002fd00: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-0002fd10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002fd20: 2020 2020 2020 2020 7227 5374 6f72 6167          r'Storag
-0002fd30: 6520 636c 6173 733a 5c73 2b53 5441 4e44  e class:\s+STAND
-0002fd40: 4152 4427 2c0a 2020 2020 2020 2020 2020  ARD',.          
-0002fd50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002fd60: 2020 2020 2020 2020 2020 2020 666c 6167              flag
-0002fd70: 733d 7265 2e49 474e 4f52 4543 4153 4529  s=re.IGNORECASE)
-0002fd80: 0a0a 2020 6465 6620 6175 7468 6f72 697a  ..  def authoriz
-0002fd90: 655f 7072 6f6a 6563 745f 746f 5f75 7365  e_project_to_use
-0002fda0: 5f74 6573 7469 6e67 5f6b 6d73 5f6b 6579  _testing_kms_key
-0002fdb0: 280a 2020 2020 2020 7365 6c66 2c20 6b65  (.      self, ke
-0002fdc0: 795f 6e61 6d65 3d74 6573 7463 6173 652e  y_name=testcase.
-0002fdd0: 4b6d 7354 6573 7469 6e67 5265 736f 7572  KmsTestingResour
-0002fde0: 6365 732e 434f 4e53 5441 4e54 5f4b 4559  ces.CONSTANT_KEY
-0002fdf0: 5f4e 414d 4529 3a0a 2020 2020 2320 4d61  _NAME):.    # Ma
-0002fe00: 6b65 2073 7572 6520 6f75 7220 6b65 7952  ke sure our keyR
-0002fe10: 696e 6720 616e 6420 6372 7970 746f 4b65  ing and cryptoKe
-0002fe20: 7920 6578 6973 742e 0a20 2020 206b 6579  y exist..    key
-0002fe30: 7269 6e67 5f66 716e 203d 2073 656c 662e  ring_fqn = self.
-0002fe40: 6b6d 735f 6170 692e 4372 6561 7465 4b65  kms_api.CreateKe
-0002fe50: 7952 696e 6728 0a20 2020 2020 2020 2050  yRing(.        P
-0002fe60: 6f70 756c 6174 6550 726f 6a65 6374 4964  opulateProjectId
-0002fe70: 284e 6f6e 6529 2c0a 2020 2020 2020 2020  (None),.        
-0002fe80: 7465 7374 6361 7365 2e4b 6d73 5465 7374  testcase.KmsTest
-0002fe90: 696e 6752 6573 6f75 7263 6573 2e4b 4559  ingResources.KEY
-0002fea0: 5249 4e47 5f4e 414d 452c 0a20 2020 2020  RING_NAME,.     
-0002feb0: 2020 206c 6f63 6174 696f 6e3d 7465 7374     location=test
-0002fec0: 6361 7365 2e4b 6d73 5465 7374 696e 6752  case.KmsTestingR
-0002fed0: 6573 6f75 7263 6573 2e4b 4559 5249 4e47  esources.KEYRING
-0002fee0: 5f4c 4f43 4154 494f 4e29 0a20 2020 206b  _LOCATION).    k
-0002fef0: 6579 5f66 716e 203d 2073 656c 662e 6b6d  ey_fqn = self.km
-0002ff00: 735f 6170 692e 4372 6561 7465 4372 7970  s_api.CreateCryp
-0002ff10: 746f 4b65 7928 6b65 7972 696e 675f 6671  toKey(keyring_fq
-0002ff20: 6e2c 206b 6579 5f6e 616d 6529 0a20 2020  n, key_name).   
-0002ff30: 2023 204d 616b 6520 7375 7265 2074 6861   # Make sure tha
-0002ff40: 7420 7468 6520 7365 7276 6963 6520 6163  t the service ac
-0002ff50: 636f 756e 7420 666f 7220 6f75 7220 6465  count for our de
-0002ff60: 6661 756c 7420 7072 6f6a 6563 7420 6973  fault project is
-0002ff70: 2061 7574 686f 7269 7a65 640a 2020 2020   authorized.    
-0002ff80: 2320 746f 2075 7365 206f 7572 2074 6573  # to use our tes
-0002ff90: 7420 4b4d 5320 6b65 792e 0a20 2020 2073  t KMS key..    s
-0002ffa0: 656c 662e 5275 6e47 7355 7469 6c28 5b27  elf.RunGsUtil(['
-0002ffb0: 6b6d 7327 2c20 2761 7574 686f 7269 7a65  kms', 'authorize
-0002ffc0: 272c 2027 2d6b 272c 206b 6579 5f66 716e  ', '-k', key_fqn
-0002ffd0: 5d2c 2066 6f72 6365 5f67 7375 7469 6c3d  ], force_gsutil=
-0002ffe0: 5472 7565 290a 2020 2020 7265 7475 726e  True).    return
-0002fff0: 206b 6579 5f66 716e 0a0a 2020 4053 6b69   key_fqn..  @Ski
-00030000: 7046 6f72 5333 2827 5465 7374 2075 7365  pForS3('Test use
-00030010: 7320 6773 2d73 7065 6369 6669 6320 4b4d  s gs-specific KM
-00030020: 5320 656e 6372 7970 7469 6f6e 2729 0a20  S encryption'). 
-00030030: 2064 6566 2074 6573 745f 6b6d 735f 6b65   def test_kms_ke
-00030040: 795f 636f 7272 6563 746c 795f 6170 706c  y_correctly_appl
-00030050: 6965 645f 746f 5f64 7374 5f6f 626a 5f66  ied_to_dst_obj_f
-00030060: 726f 6d5f 7372 635f 7769 7468 5f6e 6f5f  rom_src_with_no_
-00030070: 6b65 7928 7365 6c66 293a 0a20 2020 2062  key(self):.    b
-00030080: 7563 6b65 745f 7572 6920 3d20 7365 6c66  ucket_uri = self
-00030090: 2e43 7265 6174 6542 7563 6b65 7428 290a  .CreateBucket().
-000300a0: 2020 2020 6f62 6a31 5f6e 616d 6520 3d20      obj1_name = 
-000300b0: 2766 6f6f 270a 2020 2020 6f62 6a32 5f6e  'foo'.    obj2_n
-000300c0: 616d 6520 3d20 2762 6172 270a 2020 2020  ame = 'bar'.    
-000300d0: 6b65 795f 6671 6e20 3d20 7365 6c66 2e61  key_fqn = self.a
-000300e0: 7574 686f 7269 7a65 5f70 726f 6a65 6374  uthorize_project
-000300f0: 5f74 6f5f 7573 655f 7465 7374 696e 675f  _to_use_testing_
-00030100: 6b6d 735f 6b65 7928 290a 0a20 2020 2023  kms_key()..    #
-00030110: 2043 7265 6174 6520 7468 6520 756e 656e   Create the unen
-00030120: 6372 7970 7465 6420 6f62 6a65 6374 2c20  crypted object, 
-00030130: 7468 656e 2063 6f70 7920 6974 2c20 7370  then copy it, sp
-00030140: 6563 6966 7969 6e67 2061 204b 4d53 206b  ecifying a KMS k
-00030150: 6579 2066 6f72 2074 6865 0a20 2020 2023  ey for the.    #
-00030160: 206e 6577 206f 626a 6563 742e 0a20 2020   new object..   
-00030170: 206f 626a 5f75 7269 203d 2073 656c 662e   obj_uri = self.
-00030180: 4372 6561 7465 4f62 6a65 6374 2862 7563  CreateObject(buc
-00030190: 6b65 745f 7572 693d 6275 636b 6574 5f75  ket_uri=bucket_u
-000301a0: 7269 2c0a 2020 2020 2020 2020 2020 2020  ri,.            
+0002ec60: 2020 2020 2020 2020 2020 2020 2020 2064                 d
+0002ec70: 7374 5f6f 626a 5f6d 6574 6164 6174 612e  st_obj_metadata.
+0002ec80: 6e61 6d65 2c0a 2020 2020 2020 2020 2020  name,.          
+0002ec90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002eca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ecb0: 2020 2020 2020 2020 7365 6c66 2e74 6573          self.tes
+0002ecc0: 745f 6170 6929 0a20 2020 2074 7279 3a0a  t_api).    try:.
+0002ecd0: 2020 2020 2020 7472 793a 0a20 2020 2020        try:.     
+0002ece0: 2020 2067 7375 7469 6c5f 6170 692e 436f     gsutil_api.Co
+0002ecf0: 7079 4f62 6a65 6374 2873 7263 5f6f 626a  pyObject(src_obj
+0002ed00: 5f6d 6574 6164 6174 612c 0a20 2020 2020  _metadata,.     
+0002ed10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ed20: 2020 2020 2020 2020 2064 7374 5f6f 626a           dst_obj
+0002ed30: 5f6d 6574 6164 6174 612c 0a20 2020 2020  _metadata,.     
+0002ed40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ed50: 2020 2020 2020 2020 2070 726f 6772 6573           progres
+0002ed60: 735f 6361 6c6c 6261 636b 3d48 616c 7469  s_callback=Halti
+0002ed70: 6e67 5265 7772 6974 6543 616c 6c62 6163  ngRewriteCallbac
+0002ed80: 6b48 616e 646c 6572 280a 2020 2020 2020  kHandler(.      
+0002ed90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002eda0: 2020 2020 2020 2020 2020 2020 4f4e 455f              ONE_
+0002edb0: 4d49 4220 2a20 3229 2e63 616c 6c2c 0a20  MIB * 2).call,. 
+0002edc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002edd0: 2020 2020 2020 2020 2020 2020 206d 6178               max
+0002ede0: 5f62 7974 6573 5f70 6572 5f63 616c 6c3d  _bytes_per_call=
+0002edf0: 4f4e 455f 4d49 4229 0a20 2020 2020 2020  ONE_MIB).       
+0002ee00: 2073 656c 662e 6661 696c 2827 4578 7065   self.fail('Expe
+0002ee10: 6374 6564 2052 6577 7269 7465 4861 6c74  cted RewriteHalt
+0002ee20: 4578 6365 7074 696f 6e2e 2729 0a20 2020  Exception.').   
+0002ee30: 2020 2065 7863 6570 7420 5265 7772 6974     except Rewrit
+0002ee40: 6548 616c 7445 7863 6570 7469 6f6e 3a0a  eHaltException:.
+0002ee50: 2020 2020 2020 2020 7061 7373 0a20 2020          pass.   
+0002ee60: 2020 2023 204f 7665 7277 7269 7465 2074     # Overwrite t
+0002ee70: 6865 206f 7269 6769 6e61 6c20 6f62 6a65  he original obje
+0002ee80: 6374 2e0a 2020 2020 2020 6f62 6a65 6374  ct..      object
+0002ee90: 5f75 7269 3220 3d20 7365 6c66 2e43 7265  _uri2 = self.Cre
+0002eea0: 6174 654f 626a 6563 7428 6275 636b 6574  ateObject(bucket
+0002eeb0: 5f75 7269 3d62 7563 6b65 745f 7572 692c  _uri=bucket_uri,
+0002eec0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002eed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002eee0: 2020 2020 2020 206f 626a 6563 745f 6e61         object_na
+0002eef0: 6d65 3d27 666f 6f27 2c0a 2020 2020 2020  me='foo',.      
+0002ef00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ef10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ef20: 636f 6e74 656e 7473 3d62 2762 6172 272c  contents=b'bar',
+0002ef30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002ef40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ef50: 2020 2020 2020 2070 7265 6665 725f 6a73         prefer_js
+0002ef60: 6f6e 5f61 7069 3d54 7275 6529 0a20 2020  on_api=True).   
+0002ef70: 2020 206b 6579 3220 3d20 6f62 6a65 6374     key2 = object
+0002ef80: 5f75 7269 322e 6765 745f 6b65 7928 290a  _uri2.get_key().
+0002ef90: 2020 2020 2020 7372 635f 6f62 6a5f 6d65        src_obj_me
+0002efa0: 7461 6461 7461 3220 3d20 6170 6974 6f6f  tadata2 = apitoo
+0002efb0: 6c73 5f6d 6573 7361 6765 732e 4f62 6a65  ls_messages.Obje
+0002efc0: 6374 280a 2020 2020 2020 2020 2020 6e61  ct(.          na
+0002efd0: 6d65 3d6b 6579 322e 6e61 6d65 2c0a 2020  me=key2.name,.  
+0002efe0: 2020 2020 2020 2020 6275 636b 6574 3d6b          bucket=k
+0002eff0: 6579 322e 6275 636b 6574 2e6e 616d 652c  ey2.bucket.name,
+0002f000: 0a20 2020 2020 2020 2020 2063 6f6e 7465  .          conte
+0002f010: 6e74 5479 7065 3d6b 6579 322e 636f 6e74  ntType=key2.cont
+0002f020: 656e 745f 7479 7065 2c0a 2020 2020 2020  ent_type,.      
+0002f030: 2020 2020 6574 6167 3d6b 6579 322e 6574      etag=key2.et
+0002f040: 6167 2e73 7472 6970 2827 225c 2727 2929  ag.strip('"\''))
+0002f050: 0a0a 2020 2020 2020 2320 5472 6163 6b65  ..      # Tracke
+0002f060: 7220 6669 6c65 2066 6f72 206f 7269 6769  r file for origi
+0002f070: 6e61 6c20 6f62 6a65 6374 2073 686f 756c  nal object shoul
+0002f080: 6420 7374 696c 6c20 6578 6973 742e 0a20  d still exist.. 
+0002f090: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+0002f0a0: 5472 7565 286f 732e 7061 7468 2e65 7869  True(os.path.exi
+0002f0b0: 7374 7328 7472 6163 6b65 725f 6669 6c65  sts(tracker_file
+0002f0c0: 5f6e 616d 6529 290a 0a20 2020 2020 2023  _name))..      #
+0002f0d0: 2043 6f70 7920 7468 6520 6e65 7720 6f62   Copy the new ob
+0002f0e0: 6a65 6374 2e0a 2020 2020 2020 6773 7574  ject..      gsut
+0002f0f0: 696c 5f61 7069 2e43 6f70 794f 626a 6563  il_api.CopyObjec
+0002f100: 7428 7372 635f 6f62 6a5f 6d65 7461 6461  t(src_obj_metada
+0002f110: 7461 322c 0a20 2020 2020 2020 2020 2020  ta2,.           
+0002f120: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f130: 2064 7374 5f6f 626a 5f6d 6574 6164 6174   dst_obj_metadat
+0002f140: 612c 0a20 2020 2020 2020 2020 2020 2020  a,.             
+0002f150: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+0002f160: 6178 5f62 7974 6573 5f70 6572 5f63 616c  ax_bytes_per_cal
+0002f170: 6c3d 4f4e 455f 4d49 4229 0a0a 2020 2020  l=ONE_MIB)..    
+0002f180: 2020 2320 436f 7079 2063 6f6d 706c 6574    # Copy complet
+0002f190: 6564 3b20 6f72 6967 696e 616c 2074 7261  ed; original tra
+0002f1a0: 636b 6572 2066 696c 6520 7368 6f75 6c64  cker file should
+0002f1b0: 2062 6520 6465 6c65 7465 642e 0a20 2020   be deleted..   
+0002f1c0: 2020 2073 656c 662e 6173 7365 7274 4661     self.assertFa
+0002f1d0: 6c73 6528 6f73 2e70 6174 682e 6578 6973  lse(os.path.exis
+0002f1e0: 7473 2874 7261 636b 6572 5f66 696c 655f  ts(tracker_file_
+0002f1f0: 6e61 6d65 2929 0a0a 2020 2020 2020 7365  name))..      se
+0002f200: 6c66 2e61 7373 6572 7445 7175 616c 280a  lf.assertEqual(.
+0002f210: 2020 2020 2020 2020 2020 6773 7574 696c            gsutil
+0002f220: 5f61 7069 2e47 6574 4f62 6a65 6374 4d65  _api.GetObjectMe
+0002f230: 7461 6461 7461 2873 7263 5f6f 626a 5f6d  tadata(src_obj_m
+0002f240: 6574 6164 6174 6132 2e62 7563 6b65 742c  etadata2.bucket,
+0002f250: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002f260: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f270: 2020 2020 2020 2020 7372 635f 6f62 6a5f          src_obj_
+0002f280: 6d65 7461 6461 7461 322e 6e61 6d65 2c0a  metadata2.name,.
+0002f290: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f2a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f2b0: 2020 2020 2020 2066 6965 6c64 733d 5b27         fields=['
+0002f2c0: 6375 7374 6f6d 6572 456e 6372 7970 7469  customerEncrypti
+0002f2d0: 6f6e 272c 0a20 2020 2020 2020 2020 2020  on',.           
+0002f2e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f2f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f300: 2020 2020 276d 6435 4861 7368 275d 292e      'md5Hash']).
+0002f310: 6d64 3548 6173 682c 0a20 2020 2020 2020  md5Hash,.       
+0002f320: 2020 2067 7375 7469 6c5f 6170 692e 4765     gsutil_api.Ge
+0002f330: 744f 626a 6563 744d 6574 6164 6174 6128  tObjectMetadata(
+0002f340: 6473 745f 6f62 6a5f 6d65 7461 6461 7461  dst_obj_metadata
+0002f350: 2e62 7563 6b65 742c 0a20 2020 2020 2020  .bucket,.       
+0002f360: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f370: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f380: 6473 745f 6f62 6a5f 6d65 7461 6461 7461  dst_obj_metadata
+0002f390: 2e6e 616d 652c 0a20 2020 2020 2020 2020  .name,.         
+0002f3a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f3b0: 2020 2020 2020 2020 2020 2020 2020 6669                fi
+0002f3c0: 656c 6473 3d5b 2763 7573 746f 6d65 7245  elds=['customerE
+0002f3d0: 6e63 7279 7074 696f 6e27 2c0a 2020 2020  ncryption',.    
+0002f3e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f3f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f400: 2020 2020 2020 2020 2020 2027 6d64 3548             'md5H
+0002f410: 6173 6827 5d29 2e6d 6435 4861 7368 2c0a  ash']).md5Hash,.
+0002f420: 2020 2020 2020 2020 2020 2745 7272 6f72            'Error
+0002f430: 3a20 5265 7772 6974 7465 6e20 6f62 6a65  : Rewritten obje
+0002f440: 6374 5c27 7320 6861 7368 2064 6f65 736e  ct\'s hash doesn
+0002f450: 5c27 7420 6d61 7463 6820 736f 7572 6365  \'t match source
+0002f460: 206f 626a 6563 742e 2729 0a20 2020 2066   object.').    f
+0002f470: 696e 616c 6c79 3a0a 2020 2020 2020 2320  inally:.      # 
+0002f480: 436c 6561 6e20 7570 2069 6620 736f 6d65  Clean up if some
+0002f490: 7468 696e 6720 7765 6e74 2077 726f 6e67  thing went wrong
+0002f4a0: 2e0a 2020 2020 2020 4465 6c65 7465 5472  ..      DeleteTr
+0002f4b0: 6163 6b65 7246 696c 6528 7472 6163 6b65  ackerFile(tracke
+0002f4c0: 725f 6669 6c65 5f6e 616d 6529 0a0a 2020  r_file_name)..  
+0002f4d0: 6465 6620 7465 7374 5f72 6577 7269 7465  def test_rewrite
+0002f4e0: 5f63 705f 7265 7375 6d65 5f63 6f6d 6d61  _cp_resume_comma
+0002f4f0: 6e64 5f63 6861 6e67 6564 2873 656c 6629  nd_changed(self)
+0002f500: 3a0a 2020 2020 2222 2254 6573 7473 2074  :.    """Tests t
+0002f510: 6861 7420 5265 7772 6974 6520 7374 6172  hat Rewrite star
+0002f520: 7473 206f 7665 7220 7768 656e 2074 6865  ts over when the
+0002f530: 2061 7267 756d 656e 7473 2063 6861 6e67   arguments chang
+0002f540: 6564 2e22 2222 0a20 2020 2069 6620 7365  ed.""".    if se
+0002f550: 6c66 2e74 6573 745f 6170 6920 3d3d 2041  lf.test_api == A
+0002f560: 7069 5365 6c65 6374 6f72 2e58 4d4c 3a0a  piSelector.XML:.
+0002f570: 2020 2020 2020 7265 7475 726e 2075 6e69        return uni
+0002f580: 7474 6573 742e 736b 6970 2827 5265 7772  ttest.skip('Rewr
+0002f590: 6974 6520 4150 4920 6973 206f 6e6c 7920  ite API is only 
+0002f5a0: 7375 7070 6f72 7465 6420 696e 204a 534f  supported in JSO
+0002f5b0: 4e2e 2729 0a20 2020 2062 7563 6b65 745f  N.').    bucket_
+0002f5c0: 7572 6920 3d20 7365 6c66 2e43 7265 6174  uri = self.Creat
+0002f5d0: 6542 7563 6b65 7428 290a 2020 2020 2320  eBucket().    # 
+0002f5e0: 5365 636f 6e64 2062 7563 6b65 7420 6e65  Second bucket ne
+0002f5f0: 6564 7320 746f 2062 6520 6120 6469 6666  eds to be a diff
+0002f600: 6572 656e 7420 7374 6f72 6167 6520 636c  erent storage cl
+0002f610: 6173 7320 736f 2074 6865 2073 6572 7669  ass so the servi
+0002f620: 6365 0a20 2020 2023 2061 6374 7561 6c6c  ce.    # actuall
+0002f630: 7920 7265 7772 6974 6573 2074 6865 2062  y rewrites the b
+0002f640: 7974 6573 2e0a 2020 2020 6275 636b 6574  ytes..    bucket
+0002f650: 5f75 7269 3220 3d20 7365 6c66 2e43 7265  _uri2 = self.Cre
+0002f660: 6174 6542 7563 6b65 7428 0a20 2020 2020  ateBucket(.     
+0002f670: 2020 2073 746f 7261 6765 5f63 6c61 7373     storage_class
+0002f680: 3d27 6475 7261 626c 655f 7265 6475 6365  ='durable_reduce
+0002f690: 645f 6176 6169 6c61 6269 6c69 7479 2729  d_availability')
+0002f6a0: 0a20 2020 2023 206d 6178 4279 7465 7350  .    # maxBytesP
+0002f6b0: 6572 4361 6c6c 206d 7573 7420 6265 203e  erCall must be >
+0002f6c0: 3d20 3120 4d69 422c 2073 6f20 6372 6561  = 1 MiB, so crea
+0002f6d0: 7465 2061 6e20 6f62 6a65 6374 203e 2032  te an object > 2
+0002f6e0: 204d 6942 2062 6563 6175 7365 2077 650a   MiB because we.
+0002f6f0: 2020 2020 2320 6e65 6564 2032 2072 6573      # need 2 res
+0002f700: 706f 6e73 6520 6672 6f6d 2074 6865 2073  ponse from the s
+0002f710: 6572 7669 6365 3a20 3120 7375 6363 6573  ervice: 1 succes
+0002f720: 732c 2031 2066 6169 6c75 7265 2070 7269  s, 1 failure pri
+0002f730: 6f72 2074 6f0a 2020 2020 2320 636f 6d70  or to.    # comp
+0002f740: 6c65 7469 6f6e 2e0a 2020 2020 6f62 6a65  letion..    obje
+0002f750: 6374 5f75 7269 203d 2073 656c 662e 4372  ct_uri = self.Cr
+0002f760: 6561 7465 4f62 6a65 6374 2862 7563 6b65  eateObject(bucke
+0002f770: 745f 7572 693d 6275 636b 6574 5f75 7269  t_uri=bucket_uri
+0002f780: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+0002f790: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f7a0: 2020 2020 206f 626a 6563 745f 6e61 6d65       object_name
+0002f7b0: 3d27 666f 6f27 2c0a 2020 2020 2020 2020  ='foo',.        
+0002f7c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f7d0: 2020 2020 2020 2020 2020 2063 6f6e 7465             conte
+0002f7e0: 6e74 733d 2862 2731 3227 202a 204f 4e45  nts=(b'12' * ONE
+0002f7f0: 5f4d 4942 2920 2b20 6227 6261 7227 2c0a  _MIB) + b'bar',.
+0002f800: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f810: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f820: 2020 2070 7265 6665 725f 6a73 6f6e 5f61     prefer_json_a
+0002f830: 7069 3d54 7275 6529 0a20 2020 2067 7375  pi=True).    gsu
+0002f840: 7469 6c5f 6170 6920 3d20 4763 734a 736f  til_api = GcsJso
+0002f850: 6e41 7069 2842 7563 6b65 7453 746f 7261  nApi(BucketStora
+0002f860: 6765 5572 692c 206c 6f67 6769 6e67 2e67  geUri, logging.g
+0002f870: 6574 4c6f 6767 6572 2829 2c0a 2020 2020  etLogger(),.    
+0002f880: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f890: 2020 2020 2020 2020 4469 7363 6172 644d          DiscardM
+0002f8a0: 6573 7361 6765 7351 7565 7565 2829 2c20  essagesQueue(), 
+0002f8b0: 7365 6c66 2e64 6566 6175 6c74 5f70 726f  self.default_pro
+0002f8c0: 7669 6465 7229 0a20 2020 206b 6579 203d  vider).    key =
+0002f8d0: 206f 626a 6563 745f 7572 692e 6765 745f   object_uri.get_
+0002f8e0: 6b65 7928 290a 2020 2020 7372 635f 6f62  key().    src_ob
+0002f8f0: 6a5f 6d65 7461 6461 7461 203d 2061 7069  j_metadata = api
+0002f900: 746f 6f6c 735f 6d65 7373 6167 6573 2e4f  tools_messages.O
+0002f910: 626a 6563 7428 6e61 6d65 3d6b 6579 2e6e  bject(name=key.n
+0002f920: 616d 652c 0a20 2020 2020 2020 2020 2020  ame,.           
+0002f930: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f940: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f950: 2020 2020 2062 7563 6b65 743d 6b65 792e       bucket=key.
+0002f960: 6275 636b 6574 2e6e 616d 652c 0a20 2020  bucket.name,.   
+0002f970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f990: 2020 2020 2020 2020 2020 2020 2063 6f6e               con
+0002f9a0: 7465 6e74 5479 7065 3d6b 6579 2e63 6f6e  tentType=key.con
+0002f9b0: 7465 6e74 5f74 7970 652c 0a20 2020 2020  tent_type,.     
+0002f9c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f9d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f9e0: 2020 2020 2020 2020 2020 2065 7461 673d             etag=
+0002f9f0: 6b65 792e 6574 6167 2e73 7472 6970 2827  key.etag.strip('
+0002fa00: 225c 2727 2929 0a20 2020 2064 7374 5f6f  "\'')).    dst_o
+0002fa10: 626a 5f6e 616d 6520 3d20 7365 6c66 2e4d  bj_name = self.M
+0002fa20: 616b 6554 656d 704e 616d 6528 276f 626a  akeTempName('obj
+0002fa30: 6563 7427 290a 2020 2020 6473 745f 6f62  ect').    dst_ob
+0002fa40: 6a5f 6d65 7461 6461 7461 203d 2061 7069  j_metadata = api
+0002fa50: 746f 6f6c 735f 6d65 7373 6167 6573 2e4f  tools_messages.O
+0002fa60: 626a 6563 7428 0a20 2020 2020 2020 2062  bject(.        b
+0002fa70: 7563 6b65 743d 6275 636b 6574 5f75 7269  ucket=bucket_uri
+0002fa80: 322e 6275 636b 6574 5f6e 616d 652c 0a20  2.bucket_name,. 
+0002fa90: 2020 2020 2020 206e 616d 653d 6473 745f         name=dst_
+0002faa0: 6f62 6a5f 6e61 6d65 2c0a 2020 2020 2020  obj_name,.      
+0002fab0: 2020 636f 6e74 656e 7454 7970 653d 7372    contentType=sr
+0002fac0: 635f 6f62 6a5f 6d65 7461 6461 7461 2e63  c_obj_metadata.c
+0002fad0: 6f6e 7465 6e74 5479 7065 290a 2020 2020  ontentType).    
+0002fae0: 7472 6163 6b65 725f 6669 6c65 5f6e 616d  tracker_file_nam
+0002faf0: 6520 3d20 4765 7452 6577 7269 7465 5472  e = GetRewriteTr
+0002fb00: 6163 6b65 7246 696c 6550 6174 6828 7372  ackerFilePath(sr
+0002fb10: 635f 6f62 6a5f 6d65 7461 6461 7461 2e62  c_obj_metadata.b
+0002fb20: 7563 6b65 742c 0a20 2020 2020 2020 2020  ucket,.         
+0002fb30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002fb40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002fb50: 2020 2020 2020 2020 2073 7263 5f6f 626a           src_obj
+0002fb60: 5f6d 6574 6164 6174 612e 6e61 6d65 2c0a  _metadata.name,.
+0002fb70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002fb80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002fb90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002fba0: 2020 6473 745f 6f62 6a5f 6d65 7461 6461    dst_obj_metada
+0002fbb0: 7461 2e62 7563 6b65 742c 0a20 2020 2020  ta.bucket,.     
+0002fbc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002fbd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002fbe0: 2020 2020 2020 2020 2020 2020 2064 7374               dst
+0002fbf0: 5f6f 626a 5f6d 6574 6164 6174 612e 6e61  _obj_metadata.na
+0002fc00: 6d65 2c0a 2020 2020 2020 2020 2020 2020  me,.            
+0002fc10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002fc20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002fc30: 2020 2020 2020 7365 6c66 2e74 6573 745f        self.test_
+0002fc40: 6170 6929 0a20 2020 2074 7279 3a0a 2020  api).    try:.  
+0002fc50: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
+0002fc60: 2067 7375 7469 6c5f 6170 692e 436f 7079   gsutil_api.Copy
+0002fc70: 4f62 6a65 6374 2873 7263 5f6f 626a 5f6d  Object(src_obj_m
+0002fc80: 6574 6164 6174 612c 0a20 2020 2020 2020  etadata,.       
+0002fc90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002fca0: 2020 2020 2020 2064 7374 5f6f 626a 5f6d         dst_obj_m
+0002fcb0: 6574 6164 6174 612c 0a20 2020 2020 2020  etadata,.       
+0002fcc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002fcd0: 2020 2020 2020 2063 616e 6e65 645f 6163         canned_ac
+0002fce0: 6c3d 2770 7269 7661 7465 272c 0a20 2020  l='private',.   
+0002fcf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002fd00: 2020 2020 2020 2020 2020 2070 726f 6772             progr
+0002fd10: 6573 735f 6361 6c6c 6261 636b 3d48 616c  ess_callback=Hal
+0002fd20: 7469 6e67 5265 7772 6974 6543 616c 6c62  tingRewriteCallb
+0002fd30: 6163 6b48 616e 646c 6572 280a 2020 2020  ackHandler(.    
+0002fd40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002fd50: 2020 2020 2020 2020 2020 2020 2020 4f4e                ON
+0002fd60: 455f 4d49 4220 2a20 3229 2e63 616c 6c2c  E_MIB * 2).call,
+0002fd70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002fd80: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+0002fd90: 6178 5f62 7974 6573 5f70 6572 5f63 616c  ax_bytes_per_cal
+0002fda0: 6c3d 4f4e 455f 4d49 4229 0a20 2020 2020  l=ONE_MIB).     
+0002fdb0: 2020 2073 656c 662e 6661 696c 2827 4578     self.fail('Ex
+0002fdc0: 7065 6374 6564 2052 6577 7269 7465 4861  pected RewriteHa
+0002fdd0: 6c74 4578 6365 7074 696f 6e2e 2729 0a20  ltException.'). 
+0002fde0: 2020 2020 2065 7863 6570 7420 5265 7772       except Rewr
+0002fdf0: 6974 6548 616c 7445 7863 6570 7469 6f6e  iteHaltException
+0002fe00: 3a0a 2020 2020 2020 2020 7061 7373 0a0a  :.        pass..
+0002fe10: 2020 2020 2020 2320 5472 6163 6b65 7220        # Tracker 
+0002fe20: 6669 6c65 2066 6f72 206f 7269 6769 6e61  file for origina
+0002fe30: 6c20 6f62 6a65 6374 2073 686f 756c 6420  l object should 
+0002fe40: 7374 696c 6c20 6578 6973 742e 0a20 2020  still exist..   
+0002fe50: 2020 2073 656c 662e 6173 7365 7274 5472     self.assertTr
+0002fe60: 7565 286f 732e 7061 7468 2e65 7869 7374  ue(os.path.exist
+0002fe70: 7328 7472 6163 6b65 725f 6669 6c65 5f6e  s(tracker_file_n
+0002fe80: 616d 6529 290a 0a20 2020 2020 2023 2043  ame))..      # C
+0002fe90: 6f70 7920 7468 6520 7361 6d65 206f 626a  opy the same obj
+0002fea0: 6563 7420 6275 7420 7769 7468 2064 6966  ect but with dif
+0002feb0: 6665 7265 6e74 2063 616c 6c20 7061 7261  ferent call para
+0002fec0: 6d65 7465 7273 2e0a 2020 2020 2020 6773  meters..      gs
+0002fed0: 7574 696c 5f61 7069 2e43 6f70 794f 626a  util_api.CopyObj
+0002fee0: 6563 7428 7372 635f 6f62 6a5f 6d65 7461  ect(src_obj_meta
+0002fef0: 6461 7461 2c0a 2020 2020 2020 2020 2020  data,.          
+0002ff00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ff10: 2020 6473 745f 6f62 6a5f 6d65 7461 6461    dst_obj_metada
+0002ff20: 7461 2c0a 2020 2020 2020 2020 2020 2020  ta,.            
+0002ff30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ff40: 6361 6e6e 6564 5f61 636c 3d27 7075 626c  canned_acl='publ
+0002ff50: 6963 2d72 6561 6427 2c0a 2020 2020 2020  ic-read',.      
+0002ff60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ff70: 2020 2020 2020 6d61 785f 6279 7465 735f        max_bytes_
+0002ff80: 7065 725f 6361 6c6c 3d4f 4e45 5f4d 4942  per_call=ONE_MIB
+0002ff90: 290a 0a20 2020 2020 2023 2043 6f70 7920  )..      # Copy 
+0002ffa0: 636f 6d70 6c65 7465 643b 206f 7269 6769  completed; origi
+0002ffb0: 6e61 6c20 7472 6163 6b65 7220 6669 6c65  nal tracker file
+0002ffc0: 2073 686f 756c 6420 6265 2064 656c 6574   should be delet
+0002ffd0: 6564 2e0a 2020 2020 2020 7365 6c66 2e61  ed..      self.a
+0002ffe0: 7373 6572 7446 616c 7365 286f 732e 7061  ssertFalse(os.pa
+0002fff0: 7468 2e65 7869 7374 7328 7472 6163 6b65  th.exists(tracke
+00030000: 725f 6669 6c65 5f6e 616d 6529 290a 0a20  r_file_name)).. 
+00030010: 2020 2020 206e 6577 5f6f 626a 5f6d 6574       new_obj_met
+00030020: 6164 6174 6120 3d20 6773 7574 696c 5f61  adata = gsutil_a
+00030030: 7069 2e47 6574 4f62 6a65 6374 4d65 7461  pi.GetObjectMeta
+00030040: 6461 7461 280a 2020 2020 2020 2020 2020  data(.          
+00030050: 6473 745f 6f62 6a5f 6d65 7461 6461 7461  dst_obj_metadata
+00030060: 2e62 7563 6b65 742c 0a20 2020 2020 2020  .bucket,.       
+00030070: 2020 2064 7374 5f6f 626a 5f6d 6574 6164     dst_obj_metad
+00030080: 6174 612e 6e61 6d65 2c0a 2020 2020 2020  ata.name,.      
+00030090: 2020 2020 6669 656c 6473 3d5b 2761 636c      fields=['acl
+000300a0: 272c 2027 6375 7374 6f6d 6572 456e 6372  ', 'customerEncr
+000300b0: 7970 7469 6f6e 272c 2027 6d64 3548 6173  yption', 'md5Has
+000300c0: 6827 5d29 0a20 2020 2020 2073 656c 662e  h']).      self.
+000300d0: 6173 7365 7274 4571 7561 6c28 0a20 2020  assertEqual(.   
+000300e0: 2020 2020 2020 2067 7375 7469 6c5f 6170         gsutil_ap
+000300f0: 692e 4765 744f 626a 6563 744d 6574 6164  i.GetObjectMetad
+00030100: 6174 6128 7372 635f 6f62 6a5f 6d65 7461  ata(src_obj_meta
+00030110: 6461 7461 2e62 7563 6b65 742c 0a20 2020  data.bucket,.   
+00030120: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00030130: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00030140: 2020 2020 7372 635f 6f62 6a5f 6d65 7461      src_obj_meta
+00030150: 6461 7461 2e6e 616d 652c 0a20 2020 2020  data.name,.     
+00030160: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00030170: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00030180: 2020 6669 656c 6473 3d5b 2763 7573 746f    fields=['custo
+00030190: 6d65 7245 6e63 7279 7074 696f 6e27 2c0a  merEncryption',.
+000301a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000301b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000301c0: 2020 2020 6f62 6a65 6374 5f6e 616d 653d      object_name=
-000301d0: 6f62 6a31 5f6e 616d 652c 0a20 2020 2020  obj1_name,.     
-000301e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000301f0: 2020 2020 2020 2020 2020 2063 6f6e 7465             conte
-00030200: 6e74 733d 6227 666f 6f27 290a 2020 2020  nts=b'foo').    
-00030210: 7769 7468 2053 6574 426f 746f 436f 6e66  with SetBotoConf
-00030220: 6967 466f 7254 6573 7428 5b28 2747 5355  igForTest([('GSU
-00030230: 7469 6c27 2c20 2765 6e63 7279 7074 696f  til', 'encryptio
-00030240: 6e5f 6b65 7927 2c20 6b65 795f 6671 6e29  n_key', key_fqn)
-00030250: 5d29 3a0a 2020 2020 2020 7365 6c66 2e52  ]):.      self.R
-00030260: 756e 4773 5574 696c 280a 2020 2020 2020  unGsUtil(.      
-00030270: 2020 2020 5b27 6370 272c 2073 7572 6928      ['cp', suri(
-00030280: 6f62 6a5f 7572 6929 2c0a 2020 2020 2020  obj_uri),.      
-00030290: 2020 2020 2027 2573 2f25 7327 2025 2028       '%s/%s' % (
-000302a0: 7375 7269 2862 7563 6b65 745f 7572 6929  suri(bucket_uri)
-000302b0: 2c20 6f62 6a32 5f6e 616d 6529 5d29 0a0a  , obj2_name)])..
-000302c0: 2020 2020 2320 4d61 6b65 2073 7572 6520      # Make sure 
-000302d0: 7468 6520 6e65 7720 6f62 6a65 6374 2069  the new object i
-000302e0: 7320 656e 6372 7970 7465 6420 7769 7468  s encrypted with
-000302f0: 2074 6865 2073 7065 6369 6669 6564 204b   the specified K
-00030300: 4d53 206b 6579 2e0a 2020 2020 7769 7468  MS key..    with
-00030310: 2053 6574 426f 746f 436f 6e66 6967 466f   SetBotoConfigFo
-00030320: 7254 6573 7428 5b28 2747 5355 7469 6c27  rTest([('GSUtil'
-00030330: 2c20 2770 7265 6665 725f 6170 6927 2c20  , 'prefer_api', 
-00030340: 276a 736f 6e27 295d 293a 0a20 2020 2020  'json')]):.     
-00030350: 2073 656c 662e 4173 7365 7274 4f62 6a65   self.AssertObje
-00030360: 6374 5573 6573 434d 454b 2827 2573 2f25  ctUsesCMEK('%s/%
-00030370: 7327 2025 2028 7375 7269 2862 7563 6b65  s' % (suri(bucke
-00030380: 745f 7572 6929 2c20 6f62 6a32 5f6e 616d  t_uri), obj2_nam
-00030390: 6529 2c0a 2020 2020 2020 2020 2020 2020  e),.            
-000303a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000303b0: 2020 2020 6b65 795f 6671 6e29 0a0a 2020      key_fqn)..  
-000303c0: 4053 6b69 7046 6f72 5333 2827 5465 7374  @SkipForS3('Test
-000303d0: 2075 7365 7320 6773 2d73 7065 6369 6669   uses gs-specifi
-000303e0: 6320 4b4d 5320 656e 6372 7970 7469 6f6e  c KMS encryption
-000303f0: 2729 0a20 2064 6566 2074 6573 745f 6b6d  ').  def test_km
-00030400: 735f 6b65 795f 636f 7272 6563 746c 795f  s_key_correctly_
-00030410: 6170 706c 6965 645f 746f 5f64 7374 5f6f  applied_to_dst_o
-00030420: 626a 5f66 726f 6d5f 6c6f 6361 6c5f 6669  bj_from_local_fi
-00030430: 6c65 2873 656c 6629 3a0a 2020 2020 6275  le(self):.    bu
-00030440: 636b 6574 5f75 7269 203d 2073 656c 662e  cket_uri = self.
-00030450: 4372 6561 7465 4275 636b 6574 2829 0a20  CreateBucket(). 
-00030460: 2020 2066 7061 7468 203d 2073 656c 662e     fpath = self.
-00030470: 4372 6561 7465 5465 6d70 4669 6c65 2863  CreateTempFile(c
-00030480: 6f6e 7465 6e74 733d 6227 6162 6364 2729  ontents=b'abcd')
-00030490: 0a20 2020 206f 626a 5f6e 616d 6520 3d20  .    obj_name = 
-000304a0: 2766 6f6f 270a 2020 2020 6f62 6a5f 7375  'foo'.    obj_su
-000304b0: 7269 203d 2073 7572 6928 6275 636b 6574  ri = suri(bucket
-000304c0: 5f75 7269 2920 2b20 272f 2720 2b20 6f62  _uri) + '/' + ob
-000304d0: 6a5f 6e61 6d65 0a20 2020 206b 6579 5f66  j_name.    key_f
-000304e0: 716e 203d 2073 656c 662e 6175 7468 6f72  qn = self.author
-000304f0: 697a 655f 7072 6f6a 6563 745f 746f 5f75  ize_project_to_u
-00030500: 7365 5f74 6573 7469 6e67 5f6b 6d73 5f6b  se_testing_kms_k
-00030510: 6579 2829 0a0a 2020 2020 7769 7468 2053  ey()..    with S
-00030520: 6574 426f 746f 436f 6e66 6967 466f 7254  etBotoConfigForT
-00030530: 6573 7428 5b28 2747 5355 7469 6c27 2c20  est([('GSUtil', 
-00030540: 2765 6e63 7279 7074 696f 6e5f 6b65 7927  'encryption_key'
-00030550: 2c20 6b65 795f 6671 6e29 5d29 3a0a 2020  , key_fqn)]):.  
-00030560: 2020 2020 7365 6c66 2e52 756e 4773 5574      self.RunGsUt
-00030570: 696c 285b 2763 7027 2c20 6670 6174 682c  il(['cp', fpath,
-00030580: 206f 626a 5f73 7572 695d 290a 0a20 2020   obj_suri])..   
-00030590: 2077 6974 6820 5365 7442 6f74 6f43 6f6e   with SetBotoCon
-000305a0: 6669 6746 6f72 5465 7374 285b 2827 4753  figForTest([('GS
-000305b0: 5574 696c 272c 2027 7072 6566 6572 5f61  Util', 'prefer_a
-000305c0: 7069 272c 2027 6a73 6f6e 2729 5d29 3a0a  pi', 'json')]):.
-000305d0: 2020 2020 2020 7365 6c66 2e41 7373 6572        self.Asser
-000305e0: 744f 626a 6563 7455 7365 7343 4d45 4b28  tObjectUsesCMEK(
-000305f0: 6f62 6a5f 7375 7269 2c20 6b65 795f 6671  obj_suri, key_fq
-00030600: 6e29 0a0a 2020 4053 6b69 7046 6f72 5333  n)..  @SkipForS3
-00030610: 2827 5465 7374 2075 7365 7320 6773 2d73  ('Test uses gs-s
-00030620: 7065 6369 6669 6320 4b4d 5320 656e 6372  pecific KMS encr
-00030630: 7970 7469 6f6e 2729 0a20 2064 6566 2074  yption').  def t
-00030640: 6573 745f 6b6d 735f 6b65 795f 776f 726b  est_kms_key_work
-00030650: 735f 7769 7468 5f72 6573 756d 6162 6c65  s_with_resumable
-00030660: 5f75 706c 6f61 6428 7365 6c66 293a 0a20  _upload(self):. 
-00030670: 2020 2072 6573 756d 6162 6c65 5f74 6872     resumable_thr
-00030680: 6573 686f 6c64 203d 2031 3032 3420 2a20  eshold = 1024 * 
-00030690: 3130 3234 2020 2320 314d 0a20 2020 2062  1024  # 1M.    b
-000306a0: 7563 6b65 745f 7572 6920 3d20 7365 6c66  ucket_uri = self
-000306b0: 2e43 7265 6174 6542 7563 6b65 7428 290a  .CreateBucket().
-000306c0: 2020 2020 6670 6174 6820 3d20 7365 6c66      fpath = self
-000306d0: 2e43 7265 6174 6554 656d 7046 696c 6528  .CreateTempFile(
-000306e0: 636f 6e74 656e 7473 3d62 2761 2720 2a20  contents=b'a' * 
-000306f0: 7265 7375 6d61 626c 655f 7468 7265 7368  resumable_thresh
-00030700: 6f6c 6429 0a20 2020 206f 626a 5f6e 616d  old).    obj_nam
-00030710: 6520 3d20 2766 6f6f 270a 2020 2020 6f62  e = 'foo'.    ob
-00030720: 6a5f 7375 7269 203d 2073 7572 6928 6275  j_suri = suri(bu
-00030730: 636b 6574 5f75 7269 2920 2b20 272f 2720  cket_uri) + '/' 
-00030740: 2b20 6f62 6a5f 6e61 6d65 0a20 2020 206b  + obj_name.    k
-00030750: 6579 5f66 716e 203d 2073 656c 662e 6175  ey_fqn = self.au
-00030760: 7468 6f72 697a 655f 7072 6f6a 6563 745f  thorize_project_
-00030770: 746f 5f75 7365 5f74 6573 7469 6e67 5f6b  to_use_testing_k
-00030780: 6d73 5f6b 6579 2829 0a0a 2020 2020 7769  ms_key()..    wi
-00030790: 7468 2053 6574 426f 746f 436f 6e66 6967  th SetBotoConfig
-000307a0: 466f 7254 6573 7428 5b28 2747 5355 7469  ForTest([('GSUti
-000307b0: 6c27 2c20 2765 6e63 7279 7074 696f 6e5f  l', 'encryption_
-000307c0: 6b65 7927 2c20 6b65 795f 6671 6e29 2c0a  key', key_fqn),.
-000307d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000307e0: 2020 2020 2020 2020 2020 2020 2020 2028                 (
-000307f0: 2747 5355 7469 6c27 2c20 2772 6573 756d  'GSUtil', 'resum
-00030800: 6162 6c65 5f74 6872 6573 686f 6c64 272c  able_threshold',
-00030810: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00030820: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00030830: 2073 7472 2872 6573 756d 6162 6c65 5f74   str(resumable_t
-00030840: 6872 6573 686f 6c64 2929 5d29 3a0a 2020  hreshold))]):.  
-00030850: 2020 2020 7365 6c66 2e52 756e 4773 5574      self.RunGsUt
-00030860: 696c 285b 2763 7027 2c20 6670 6174 682c  il(['cp', fpath,
-00030870: 206f 626a 5f73 7572 695d 290a 0a20 2020   obj_suri])..   
-00030880: 2077 6974 6820 5365 7442 6f74 6f43 6f6e   with SetBotoCon
-00030890: 6669 6746 6f72 5465 7374 285b 2827 4753  figForTest([('GS
-000308a0: 5574 696c 272c 2027 7072 6566 6572 5f61  Util', 'prefer_a
-000308b0: 7069 272c 2027 6a73 6f6e 2729 5d29 3a0a  pi', 'json')]):.
-000308c0: 2020 2020 2020 7365 6c66 2e41 7373 6572        self.Asser
-000308d0: 744f 626a 6563 7455 7365 7343 4d45 4b28  tObjectUsesCMEK(
-000308e0: 6f62 6a5f 7375 7269 2c20 6b65 795f 6671  obj_suri, key_fq
-000308f0: 6e29 0a0a 2020 4053 6b69 7046 6f72 5333  n)..  @SkipForS3
-00030900: 2827 5465 7374 2075 7365 7320 6773 2d73  ('Test uses gs-s
-00030910: 7065 6369 6669 6320 4b4d 5320 656e 6372  pecific KMS encr
-00030920: 7970 7469 6f6e 2729 0a20 2064 6566 2074  yption').  def t
-00030930: 6573 745f 6b6d 735f 6b65 795f 636f 7272  est_kms_key_corr
-00030940: 6563 746c 795f 6170 706c 6965 645f 746f  ectly_applied_to
-00030950: 5f64 7374 5f6f 626a 5f66 726f 6d5f 7372  _dst_obj_from_sr
-00030960: 635f 7769 7468 5f64 6966 665f 6b65 7928  c_with_diff_key(
-00030970: 7365 6c66 293a 0a20 2020 2062 7563 6b65  self):.    bucke
-00030980: 745f 7572 6920 3d20 7365 6c66 2e43 7265  t_uri = self.Cre
-00030990: 6174 6542 7563 6b65 7428 290a 2020 2020  ateBucket().    
-000309a0: 6f62 6a31 5f6e 616d 6520 3d20 2766 6f6f  obj1_name = 'foo
-000309b0: 270a 2020 2020 6f62 6a32 5f6e 616d 6520  '.    obj2_name 
-000309c0: 3d20 2762 6172 270a 2020 2020 6b65 7931  = 'bar'.    key1
-000309d0: 5f66 716e 203d 2073 656c 662e 6175 7468  _fqn = self.auth
-000309e0: 6f72 697a 655f 7072 6f6a 6563 745f 746f  orize_project_to
-000309f0: 5f75 7365 5f74 6573 7469 6e67 5f6b 6d73  _use_testing_kms
-00030a00: 5f6b 6579 2829 0a20 2020 206b 6579 325f  _key().    key2_
-00030a10: 6671 6e20 3d20 7365 6c66 2e61 7574 686f  fqn = self.autho
-00030a20: 7269 7a65 5f70 726f 6a65 6374 5f74 6f5f  rize_project_to_
-00030a30: 7573 655f 7465 7374 696e 675f 6b6d 735f  use_testing_kms_
-00030a40: 6b65 7928 0a20 2020 2020 2020 206b 6579  key(.        key
-00030a50: 5f6e 616d 653d 7465 7374 6361 7365 2e4b  _name=testcase.K
-00030a60: 6d73 5465 7374 696e 6752 6573 6f75 7263  msTestingResourc
-00030a70: 6573 2e43 4f4e 5354 414e 545f 4b45 595f  es.CONSTANT_KEY_
-00030a80: 4e41 4d45 3229 0a20 2020 206f 626a 315f  NAME2).    obj1_
-00030a90: 7375 7269 203d 2073 7572 6928 0a20 2020  suri = suri(.   
-00030aa0: 2020 2020 2073 656c 662e 4372 6561 7465       self.Create
-00030ab0: 4f62 6a65 6374 2862 7563 6b65 745f 7572  Object(bucket_ur
-00030ac0: 693d 6275 636b 6574 5f75 7269 2c0a 2020  i=bucket_uri,.  
-00030ad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00030ae0: 2020 2020 2020 2020 6f62 6a65 6374 5f6e          object_n
-00030af0: 616d 653d 6f62 6a31 5f6e 616d 652c 0a20  ame=obj1_name,. 
-00030b00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00030b10: 2020 2020 2020 2020 2063 6f6e 7465 6e74           content
-00030b20: 733d 6227 666f 6f27 2c0a 2020 2020 2020  s=b'foo',.      
-00030b30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00030b40: 2020 2020 6b6d 735f 6b65 795f 6e61 6d65      kms_key_name
-00030b50: 3d6b 6579 315f 6671 6e29 290a 0a20 2020  =key1_fqn))..   
-00030b60: 2023 2043 6f70 7920 7468 6520 6f62 6a65   # Copy the obje
-00030b70: 6374 2074 6f20 7468 6520 7361 6d65 2062  ct to the same b
-00030b80: 7563 6b65 742c 2073 7065 6369 6679 696e  ucket, specifyin
-00030b90: 6720 6120 6469 6666 6572 656e 7420 6b65  g a different ke
-00030ba0: 7920 746f 2062 6520 7573 6564 2e0a 2020  y to be used..  
-00030bb0: 2020 6f62 6a32 5f73 7572 6920 3d20 2725    obj2_suri = '%
-00030bc0: 732f 2573 2720 2520 2873 7572 6928 6275  s/%s' % (suri(bu
-00030bd0: 636b 6574 5f75 7269 292c 206f 626a 325f  cket_uri), obj2_
-00030be0: 6e61 6d65 290a 2020 2020 7769 7468 2053  name).    with S
-00030bf0: 6574 426f 746f 436f 6e66 6967 466f 7254  etBotoConfigForT
-00030c00: 6573 7428 5b28 2747 5355 7469 6c27 2c20  est([('GSUtil', 
-00030c10: 2765 6e63 7279 7074 696f 6e5f 6b65 7927  'encryption_key'
-00030c20: 2c20 6b65 7932 5f66 716e 295d 293a 0a20  , key2_fqn)]):. 
-00030c30: 2020 2020 2073 656c 662e 5275 6e47 7355       self.RunGsU
-00030c40: 7469 6c28 5b27 6370 272c 206f 626a 315f  til(['cp', obj1_
-00030c50: 7375 7269 2c20 6f62 6a32 5f73 7572 695d  suri, obj2_suri]
-00030c60: 290a 0a20 2020 2023 2045 6e73 7572 6520  )..    # Ensure 
-00030c70: 7468 6520 6e65 7720 6f62 6a65 6374 2068  the new object h
-00030c80: 6173 2074 6865 2064 6966 6665 7265 6e74  as the different
-00030c90: 206b 6579 2e0a 2020 2020 7769 7468 2053   key..    with S
-00030ca0: 6574 426f 746f 436f 6e66 6967 466f 7254  etBotoConfigForT
-00030cb0: 6573 7428 5b28 2747 5355 7469 6c27 2c20  est([('GSUtil', 
-00030cc0: 2770 7265 6665 725f 6170 6927 2c20 276a  'prefer_api', 'j
-00030cd0: 736f 6e27 295d 293a 0a20 2020 2020 2073  son')]):.      s
-00030ce0: 656c 662e 4173 7365 7274 4f62 6a65 6374  elf.AssertObject
-00030cf0: 5573 6573 434d 454b 286f 626a 325f 7375  UsesCMEK(obj2_su
-00030d00: 7269 2c20 6b65 7932 5f66 716e 290a 0a20  ri, key2_fqn).. 
-00030d10: 2040 536b 6970 466f 7253 3328 2754 6573   @SkipForS3('Tes
-00030d20: 7420 7573 6573 2067 732d 7370 6563 6966  t uses gs-specif
-00030d30: 6963 204b 4d53 2065 6e63 7279 7074 696f  ic KMS encryptio
-00030d40: 6e27 290a 2020 4053 6b69 7046 6f72 584d  n').  @SkipForXM
-00030d50: 4c28 2743 6f70 7969 6e67 204b 4d53 2d65  L('Copying KMS-e
-00030d60: 6e63 7279 7074 6564 206f 626a 6563 7473  ncrypted objects
-00030d70: 2070 726f 6869 6269 7465 6420 7769 7468   prohibited with
-00030d80: 2058 4d4c 2041 5049 2729 0a20 2064 6566   XML API').  def
-00030d90: 2074 6573 745f 6b6d 735f 6b65 795f 6e6f   test_kms_key_no
-00030da0: 745f 6170 706c 6965 645f 746f 5f6e 6f6e  t_applied_to_non
-00030db0: 6b6d 735f 6473 745f 6f62 6a5f 6672 6f6d  kms_dst_obj_from
-00030dc0: 5f73 7263 5f77 6974 685f 6b6d 735f 6b65  _src_with_kms_ke
-00030dd0: 7928 7365 6c66 293a 0a20 2020 2062 7563  y(self):.    buc
-00030de0: 6b65 745f 7572 6920 3d20 7365 6c66 2e43  ket_uri = self.C
-00030df0: 7265 6174 6542 7563 6b65 7428 290a 2020  reateBucket().  
-00030e00: 2020 6f62 6a31 5f6e 616d 6520 3d20 2766    obj1_name = 'f
-00030e10: 6f6f 270a 2020 2020 6f62 6a32 5f6e 616d  oo'.    obj2_nam
-00030e20: 6520 3d20 2762 6172 270a 2020 2020 6b65  e = 'bar'.    ke
-00030e30: 7931 5f66 716e 203d 2073 656c 662e 6175  y1_fqn = self.au
-00030e40: 7468 6f72 697a 655f 7072 6f6a 6563 745f  thorize_project_
-00030e50: 746f 5f75 7365 5f74 6573 7469 6e67 5f6b  to_use_testing_k
-00030e60: 6d73 5f6b 6579 2829 0a20 2020 206f 626a  ms_key().    obj
-00030e70: 315f 7375 7269 203d 2073 7572 6928 0a20  1_suri = suri(. 
-00030e80: 2020 2020 2020 2073 656c 662e 4372 6561         self.Crea
-00030e90: 7465 4f62 6a65 6374 2862 7563 6b65 745f  teObject(bucket_
-00030ea0: 7572 693d 6275 636b 6574 5f75 7269 2c0a  uri=bucket_uri,.
-00030eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00030ec0: 2020 2020 2020 2020 2020 6f62 6a65 6374            object
-00030ed0: 5f6e 616d 653d 6f62 6a31 5f6e 616d 652c  _name=obj1_name,
-00030ee0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00030ef0: 2020 2020 2020 2020 2020 2063 6f6e 7465             conte
-00030f00: 6e74 733d 6227 666f 6f27 2c0a 2020 2020  nts=b'foo',.    
-00030f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00030f20: 2020 2020 2020 6b6d 735f 6b65 795f 6e61        kms_key_na
-00030f30: 6d65 3d6b 6579 315f 6671 6e29 290a 0a20  me=key1_fqn)).. 
-00030f40: 2020 2023 2043 6f70 7920 7468 6520 6f62     # Copy the ob
-00030f50: 6a65 6374 2074 6f20 7468 6520 7361 6d65  ject to the same
-00030f60: 2062 7563 6b65 742c 206e 6f74 2073 7065   bucket, not spe
-00030f70: 6369 6679 696e 6720 616e 7920 4b4d 5320  cifying any KMS 
-00030f80: 6b65 792e 0a20 2020 206f 626a 325f 7375  key..    obj2_su
-00030f90: 7269 203d 2027 2573 2f25 7327 2025 2028  ri = '%s/%s' % (
-00030fa0: 7375 7269 2862 7563 6b65 745f 7572 6929  suri(bucket_uri)
-00030fb0: 2c20 6f62 6a32 5f6e 616d 6529 0a20 2020  , obj2_name).   
-00030fc0: 2073 656c 662e 5275 6e47 7355 7469 6c28   self.RunGsUtil(
-00030fd0: 5b27 6370 272c 206f 626a 315f 7375 7269  ['cp', obj1_suri
-00030fe0: 2c20 6f62 6a32 5f73 7572 695d 290a 0a20  , obj2_suri]).. 
-00030ff0: 2020 2023 2045 6e73 7572 6520 7468 6520     # Ensure the 
-00031000: 6e65 7720 6f62 6a65 6374 2068 6173 206e  new object has n
-00031010: 6f20 4b4d 5320 6b65 792e 0a20 2020 2077  o KMS key..    w
-00031020: 6974 6820 5365 7442 6f74 6f43 6f6e 6669  ith SetBotoConfi
-00031030: 6746 6f72 5465 7374 285b 2827 4753 5574  gForTest([('GSUt
-00031040: 696c 272c 2027 7072 6566 6572 5f61 7069  il', 'prefer_api
-00031050: 272c 2027 6a73 6f6e 2729 5d29 3a0a 2020  ', 'json')]):.  
-00031060: 2020 2020 7365 6c66 2e41 7373 6572 744f      self.AssertO
-00031070: 626a 6563 7455 6e65 6e63 7279 7074 6564  bjectUnencrypted
-00031080: 286f 626a 325f 7375 7269 290a 0a20 2040  (obj2_suri)..  @
-00031090: 756e 6974 7465 7374 2e73 6b69 7055 6e6c  unittest.skipUnl
-000310a0: 6573 7328 0a20 2020 2020 2049 535f 5749  ess(.      IS_WI
-000310b0: 4e44 4f57 532c 0a20 2020 2020 2027 4f6e  NDOWS,.      'On
-000310c0: 6c79 2057 696e 646f 7773 2070 6174 6873  ly Windows paths
-000310d0: 206e 6565 6420 746f 2062 6520 6e6f 726d   need to be norm
-000310e0: 616c 697a 6564 2074 6f20 7573 6520 6261  alized to use ba
-000310f0: 636b 736c 6173 6865 7320 696e 7374 6561  ckslashes instea
-00031100: 6420 6f66 2027 0a20 2020 2020 2027 666f  d of '.      'fo
-00031110: 7277 6172 6420 736c 6173 6865 732e 2729  rward slashes.')
-00031120: 0a20 2064 6566 2074 6573 745f 7769 6e64  .  def test_wind
-00031130: 6f77 735f 7061 7468 5f77 6974 685f 6261  ows_path_with_ba
-00031140: 636b 5f61 6e64 5f66 6f72 7761 7264 5f73  ck_and_forward_s
-00031150: 6c61 7368 5f69 735f 6e6f 726d 616c 697a  lash_is_normaliz
-00031160: 6564 2873 656c 6629 3a0a 2020 2020 2320  ed(self):.    # 
-00031170: 5072 696f 7220 746f 2074 6869 7320 7465  Prior to this te
-00031180: 7374 2061 6e64 2069 7473 2063 6f72 7265  st and its corre
-00031190: 7370 6f6e 6469 6e67 2066 6978 2c20 7275  sponding fix, ru
-000311a0: 6e6e 696e 670a 2020 2020 2320 6067 7375  nning.    # `gsu
-000311b0: 7469 6c20 6370 2064 6972 2f2e 2f66 696c  til cp dir/./fil
-000311c0: 6520 6773 3a2f 2f62 7563 6b65 7460 2077  e gs://bucket` w
-000311d0: 6f75 6c64 2072 6573 756c 7420 696e 2061  ould result in a
-000311e0: 6e20 6f62 6a65 6374 2077 686f 7365 206e  n object whose n
-000311f0: 616d 650a 2020 2020 2320 7761 7320 2264  ame.    # was "d
-00031200: 6972 2f2e 2f66 696c 6522 2c20 7261 7468  ir/./file", rath
-00031210: 6572 2074 6861 6e20 6a75 7374 2022 6669  er than just "fi
-00031220: 6c65 222c 2061 7320 5769 6e64 6f77 7320  le", as Windows 
-00031230: 7472 6965 6420 746f 2073 706c 6974 206f  tried to split o
-00031240: 6e0a 2020 2020 2320 7468 6520 7061 7468  n.    # the path
-00031250: 2063 6f6d 706f 6e65 6e74 2073 6570 6172   component separ
-00031260: 6174 6f72 2022 5c22 2069 6e74 6561 6420  ator "\" intead 
-00031270: 6f66 2022 2f22 2e0a 2020 2020 746d 705f  of "/"..    tmp_
-00031280: 6469 7220 3d20 7365 6c66 2e43 7265 6174  dir = self.Creat
-00031290: 6554 656d 7044 6972 2829 0a20 2020 2073  eTempDir().    s
-000312a0: 656c 662e 4372 6561 7465 5465 6d70 4669  elf.CreateTempFi
-000312b0: 6c65 2874 6d70 6469 723d 746d 705f 6469  le(tmpdir=tmp_di
-000312c0: 722c 2066 696c 655f 6e61 6d65 3d27 6f62  r, file_name='ob
-000312d0: 6a31 272c 2063 6f6e 7465 6e74 733d 6227  j1', contents=b'
-000312e0: 666f 6f27 290a 2020 2020 6275 636b 6574  foo').    bucket
-000312f0: 5f75 7269 203d 2073 656c 662e 4372 6561  _uri = self.Crea
-00031300: 7465 4275 636b 6574 2829 0a20 2020 2073  teBucket().    s
-00031310: 656c 662e 5275 6e47 7355 7469 6c28 5b27  elf.RunGsUtil(['
-00031320: 6370 272c 2027 2573 5c5c 2e2f 6f62 6a31  cp', '%s\\./obj1
-00031330: 2720 2520 746d 705f 6469 722c 2073 7572  ' % tmp_dir, sur
-00031340: 6928 6275 636b 6574 5f75 7269 295d 290a  i(bucket_uri)]).
-00031350: 2020 2020 2320 4966 2074 6865 2064 6573      # If the des
-00031360: 7469 6e61 7469 6f6e 2070 6174 6820 7761  tination path wa
-00031370: 7320 6e6f 7420 6372 6561 7465 6420 636f  s not created co
-00031380: 7272 6563 746c 792c 2074 6869 7320 7374  rrectly, this st
-00031390: 6174 2063 616c 6c20 7368 6f75 6c64 0a20  at call should. 
-000313a0: 2020 2023 2066 6169 6c20 7769 7468 2061     # fail with a
-000313b0: 206e 6f6e 2d7a 6572 6f20 6578 6974 2063   non-zero exit c
-000313c0: 6f64 6520 6265 6361 7573 6520 7468 6520  ode because the 
-000313d0: 7370 6563 6966 6965 6420 6f62 6a65 6374  specified object
-000313e0: 2077 6f6e 2774 2065 7869 7374 2e0a 2020   won't exist..  
-000313f0: 2020 7365 6c66 2e52 756e 4773 5574 696c    self.RunGsUtil
-00031400: 285b 2773 7461 7427 2c20 2725 732f 6f62  (['stat', '%s/ob
-00031410: 6a31 2720 2520 7375 7269 2862 7563 6b65  j1' % suri(bucke
-00031420: 745f 7572 6929 5d29 0a0a 2020 6465 6620  t_uri)])..  def 
-00031430: 7465 7374 5f63 705f 6d69 6e75 735f 6d5f  test_cp_minus_m_
-00031440: 7374 7265 616d 696e 675f 7570 6c6f 6164  streaming_upload
-00031450: 2873 656c 6629 3a0a 2020 2020 2222 2254  (self):.    """T
-00031460: 6573 7473 2074 6861 7420 6370 202d 6d20  ests that cp -m 
-00031470: 2d20 616e 7974 6869 6e67 2069 7320 6469  - anything is di
-00031480: 7361 6c6c 6f77 6564 2e22 2222 0a20 2020  sallowed.""".   
-00031490: 2073 7464 6572 7220 3d20 7365 6c66 2e52   stderr = self.R
-000314a0: 756e 4773 5574 696c 285b 272d 6d27 2c20  unGsUtil(['-m', 
-000314b0: 2763 7027 2c20 272d 272c 2027 6669 6c65  'cp', '-', 'file
-000314c0: 275d 2c0a 2020 2020 2020 2020 2020 2020  '],.            
-000314d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000314e0: 7265 7475 726e 5f73 7464 6572 723d 5472  return_stderr=Tr
-000314f0: 7565 2c0a 2020 2020 2020 2020 2020 2020  ue,.            
-00031500: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00031510: 6578 7065 6374 6564 5f73 7461 7475 733d  expected_status=
-00031520: 3129 0a20 2020 2073 656c 662e 6173 7365  1).    self.asse
-00031530: 7274 496e 280a 2020 2020 2020 2020 2743  rtIn(.        'C
-00031540: 6f6d 6d61 6e64 4578 6365 7074 696f 6e3a  ommandException:
-00031550: 2043 616e 6e6f 7420 7570 6c6f 6164 2066   Cannot upload f
-00031560: 726f 6d20 6120 7374 7265 616d 2077 6865  rom a stream whe
-00031570: 6e20 7573 696e 6720 6773 7574 696c 202d  n using gsutil -
-00031580: 6d27 2c0a 2020 2020 2020 2020 7374 6465  m',.        stde
-00031590: 7272 290a 0a20 2040 5365 7175 656e 7469  rr)..  @Sequenti
-000315a0: 616c 416e 6450 6172 616c 6c65 6c54 7261  alAndParallelTra
-000315b0: 6e73 6665 720a 2020 6465 6620 7465 7374  nsfer.  def test
-000315c0: 5f63 705f 6f76 6572 7772 6974 6573 5f65  _cp_overwrites_e
-000315d0: 7869 7374 696e 675f 6465 7374 696e 6174  xisting_destinat
-000315e0: 696f 6e28 7365 6c66 293a 0a20 2020 206b  ion(self):.    k
-000315f0: 6579 5f75 7269 203d 2073 656c 662e 4372  ey_uri = self.Cr
-00031600: 6561 7465 4f62 6a65 6374 2863 6f6e 7465  eateObject(conte
-00031610: 6e74 733d 6227 666f 6f27 290a 2020 2020  nts=b'foo').    
-00031620: 6670 6174 6820 3d20 7365 6c66 2e43 7265  fpath = self.Cre
-00031630: 6174 6554 656d 7046 696c 6528 636f 6e74  ateTempFile(cont
-00031640: 656e 7473 3d62 2762 6172 2729 0a20 2020  ents=b'bar').   
-00031650: 2073 7464 6572 7220 3d20 7365 6c66 2e52   stderr = self.R
-00031660: 756e 4773 5574 696c 285b 2763 7027 2c20  unGsUtil(['cp', 
-00031670: 7375 7269 286b 6579 5f75 7269 292c 2066  suri(key_uri), f
-00031680: 7061 7468 5d2c 2072 6574 7572 6e5f 7374  path], return_st
-00031690: 6465 7272 3d54 7275 6529 0a20 2020 2077  derr=True).    w
-000316a0: 6974 6820 6f70 656e 2866 7061 7468 2c20  ith open(fpath, 
-000316b0: 2772 6227 2920 6173 2066 3a0a 2020 2020  'rb') as f:.    
-000316c0: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-000316d0: 616c 2866 2e72 6561 6428 292c 2062 2766  al(f.read(), b'f
-000316e0: 6f6f 2729 0a0a 2020 4053 6571 7565 6e74  oo')..  @Sequent
-000316f0: 6961 6c41 6e64 5061 7261 6c6c 656c 5472  ialAndParallelTr
-00031700: 616e 7366 6572 0a20 2064 6566 2074 6573  ansfer.  def tes
-00031710: 745f 646f 776e 6c6f 6164 735f 6172 655f  t_downloads_are_
-00031720: 7265 6c69 6162 6c65 5f77 6974 685f 6d6f  reliable_with_mo
-00031730: 7265 5f74 6861 6e5f 6f6e 655f 6773 7574  re_than_one_gsut
-00031740: 696c 5f69 6e73 7461 6e63 6528 7365 6c66  il_instance(self
-00031750: 293a 0a20 2020 2074 6573 745f 6669 6c65  ):.    test_file
-00031760: 5f63 6f75 6e74 203d 2031 300a 2020 2020  _count = 10.    
-00031770: 7465 6d70 6f72 6172 795f 6469 7265 6374  temporary_direct
-00031780: 6f72 7920 3d20 7365 6c66 2e43 7265 6174  ory = self.Creat
-00031790: 6554 656d 7044 6972 2829 0a20 2020 2062  eTempDir().    b
-000317a0: 7563 6b65 745f 7572 6920 3d20 7365 6c66  ucket_uri = self
-000317b0: 2e43 7265 6174 6542 7563 6b65 7428 7465  .CreateBucket(te
-000317c0: 7374 5f6f 626a 6563 7473 3d74 6573 745f  st_objects=test_
-000317d0: 6669 6c65 5f63 6f75 6e74 290a 0a20 2020  file_count)..   
-000317e0: 2063 705f 6172 6773 203d 205b 2763 7027   cp_args = ['cp'
-000317f0: 2c20 7375 7269 2862 7563 6b65 745f 7572  , suri(bucket_ur
-00031800: 692c 2027 2a27 292c 2074 656d 706f 7261  i, '*'), tempora
-00031810: 7279 5f64 6972 6563 746f 7279 5d0a 2020  ry_directory].  
-00031820: 2020 7468 7265 6164 7320 3d20 5b5d 0a20    threads = []. 
-00031830: 2020 2066 6f72 205f 2069 6e20 7261 6e67     for _ in rang
-00031840: 6528 3229 3a0a 2020 2020 2020 7468 7265  e(2):.      thre
-00031850: 6164 203d 2074 6872 6561 6469 6e67 2e54  ad = threading.T
-00031860: 6872 6561 6428 7461 7267 6574 3d73 656c  hread(target=sel
-00031870: 662e 5275 6e47 7355 7469 6c2c 2061 7267  f.RunGsUtil, arg
-00031880: 733d 5b63 705f 6172 6773 5d29 0a20 2020  s=[cp_args]).   
-00031890: 2020 2074 6872 6561 642e 7374 6172 7428     thread.start(
-000318a0: 290a 2020 2020 2020 7468 7265 6164 732e  ).      threads.
-000318b0: 6170 7065 6e64 2874 6872 6561 6429 0a20  append(thread). 
-000318c0: 2020 205b 742e 6a6f 696e 2829 2066 6f72     [t.join() for
-000318d0: 2074 2069 6e20 7468 7265 6164 735d 0a0a   t in threads]..
-000318e0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-000318f0: 7175 616c 286c 656e 286f 732e 6c69 7374  qual(len(os.list
-00031900: 6469 7228 7465 6d70 6f72 6172 795f 6469  dir(temporary_di
-00031910: 7265 6374 6f72 7929 292c 2074 6573 745f  rectory)), test_
-00031920: 6669 6c65 5f63 6f75 6e74 290a 0a0a 636c  file_count)...cl
-00031930: 6173 7320 5465 7374 4370 556e 6974 5465  ass TestCpUnitTe
-00031940: 7374 7328 7465 7374 6361 7365 2e47 7355  sts(testcase.GsU
-00031950: 7469 6c55 6e69 7454 6573 7443 6173 6529  tilUnitTestCase)
-00031960: 3a0a 2020 2222 2255 6e69 7420 7465 7374  :.  """Unit test
-00031970: 7320 666f 7220 6773 7574 696c 2063 702e  s for gsutil cp.
-00031980: 2222 220a 0a20 2064 6566 2074 6573 7444  """..  def testD
-00031990: 6f77 6e6c 6f61 6457 6974 684e 6f48 6173  ownloadWithNoHas
-000319a0: 6841 7661 696c 6162 6c65 2873 656c 6629  hAvailable(self)
-000319b0: 3a0a 2020 2020 2222 2254 6573 7473 2061  :.    """Tests a
-000319c0: 2064 6f77 6e6c 6f61 6420 7769 7468 206e   download with n
-000319d0: 6f20 7661 6c69 6420 7365 7276 6572 2d73  o valid server-s
-000319e0: 7570 706c 6965 6420 6861 7368 2e22 2222  upplied hash."""
-000319f0: 0a20 2020 2023 2053 3320 7368 6f75 6c64  .    # S3 should
-00031a00: 2068 6176 6520 6120 7370 6563 6961 6c20   have a special 
-00031a10: 6d65 7373 6167 6520 666f 7220 6e6f 6e2d  message for non-
-00031a20: 4d44 3520 6574 6167 732e 0a20 2020 2062  MD5 etags..    b
-00031a30: 7563 6b65 745f 7572 6920 3d20 7365 6c66  ucket_uri = self
-00031a40: 2e43 7265 6174 6542 7563 6b65 7428 7072  .CreateBucket(pr
-00031a50: 6f76 6964 6572 3d27 7333 2729 0a20 2020  ovider='s3').   
-00031a60: 206f 626a 6563 745f 7572 6920 3d20 7365   object_uri = se
-00031a70: 6c66 2e43 7265 6174 654f 626a 6563 7428  lf.CreateObject(
-00031a80: 6275 636b 6574 5f75 7269 3d62 7563 6b65  bucket_uri=bucke
-00031a90: 745f 7572 692c 2063 6f6e 7465 6e74 733d  t_uri, contents=
-00031aa0: 6227 666f 6f27 290a 2020 2020 6f62 6a65  b'foo').    obje
-00031ab0: 6374 5f75 7269 2e67 6574 5f6b 6579 2829  ct_uri.get_key()
-00031ac0: 2e65 7461 6720 3d20 2731 3233 3435 2720  .etag = '12345' 
-00031ad0: 2023 204e 6f74 2061 6e20 4d44 350a 2020   # Not an MD5.  
-00031ae0: 2020 6473 745f 6469 7220 3d20 7365 6c66    dst_dir = self
-00031af0: 2e43 7265 6174 6554 656d 7044 6972 2829  .CreateTempDir()
-00031b00: 0a0a 2020 2020 6c6f 675f 6861 6e64 6c65  ..    log_handle
-00031b10: 7220 3d20 7365 6c66 2e52 756e 436f 6d6d  r = self.RunComm
-00031b20: 616e 6428 2763 7027 2c20 5b73 7572 6928  and('cp', [suri(
-00031b30: 6f62 6a65 6374 5f75 7269 292c 2064 7374  object_uri), dst
-00031b40: 5f64 6972 5d2c 0a20 2020 2020 2020 2020  _dir],.         
-00031b50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00031b60: 2020 2020 2020 2020 2072 6574 7572 6e5f           return_
-00031b70: 6c6f 675f 6861 6e64 6c65 723d 5472 7565  log_handler=True
-00031b80: 290a 2020 2020 7761 726e 696e 675f 6d65  ).    warning_me
-00031b90: 7373 6167 6573 203d 206c 6f67 5f68 616e  ssages = log_han
-00031ba0: 646c 6572 2e6d 6573 7361 6765 735b 2777  dler.messages['w
-00031bb0: 6172 6e69 6e67 275d 0a20 2020 2073 656c  arning'].    sel
-00031bc0: 662e 6173 7365 7274 4571 7561 6c73 2832  f.assertEquals(2
-00031bd0: 2c20 6c65 6e28 7761 726e 696e 675f 6d65  , len(warning_me
-00031be0: 7373 6167 6573 2929 0a20 2020 2073 656c  ssages)).    sel
-00031bf0: 662e 6173 7365 7274 5265 6765 7828 0a20  f.assertRegex(. 
-00031c00: 2020 2020 2020 2077 6172 6e69 6e67 5f6d         warning_m
-00031c10: 6573 7361 6765 735b 305d 2c20 7227 4e6f  essages[0], r'No
-00031c20: 6e2d 4d44 3520 6574 6167 205c 2831 3233  n-MD5 etag \(123
-00031c30: 3435 5c29 2070 7265 7365 6e74 2066 6f72  45\) present for
-00031c40: 206b 6579 202e 2a2c 2027 0a20 2020 2020   key .*, '.     
-00031c50: 2020 2072 2764 6174 6120 696e 7465 6772     r'data integr
-00031c60: 6974 7920 6368 6563 6b73 2061 7265 206e  ity checks are n
-00031c70: 6f74 2070 6f73 7369 626c 6527 290a 2020  ot possible').  
-00031c80: 2020 7365 6c66 2e61 7373 6572 7449 6e28    self.assertIn(
-00031c90: 2749 6e74 6567 7269 7479 2063 616e 6e6f  'Integrity canno
-00031ca0: 7420 6265 2061 7373 7572 6564 272c 2077  t be assured', w
-00031cb0: 6172 6e69 6e67 5f6d 6573 7361 6765 735b  arning_messages[
-00031cc0: 315d 290a 0a20 2064 6566 2074 6573 7444  1])..  def testD
-00031cd0: 6f77 6e6c 6f61 6457 6974 6844 6573 7469  ownloadWithDesti
-00031ce0: 6e61 7469 6f6e 456e 6469 6e67 5769 7468  nationEndingWith
-00031cf0: 4465 6c69 6d69 7465 7252 6169 7365 7345  DelimiterRaisesE
-00031d00: 7272 6f72 2873 656c 6629 3a0a 2020 2020  rror(self):.    
-00031d10: 2222 2254 6573 7473 2061 2064 6f77 6e6c  """Tests a downl
-00031d20: 6f61 6420 7769 7468 206e 6f20 7661 6c69  oad with no vali
-00031d30: 6420 7365 7276 6572 2d73 7570 706c 6965  d server-supplie
-00031d40: 6420 6861 7368 2e22 2222 0a20 2020 2023  d hash.""".    #
-00031d50: 2053 3320 7368 6f75 6c64 2068 6176 6520   S3 should have 
-00031d60: 6120 7370 6563 6961 6c20 6d65 7373 6167  a special messag
-00031d70: 6520 666f 7220 6e6f 6e2d 4d44 3520 6574  e for non-MD5 et
-00031d80: 6167 732e 0a20 2020 2062 7563 6b65 745f  ags..    bucket_
-00031d90: 7572 6920 3d20 7365 6c66 2e43 7265 6174  uri = self.Creat
-00031da0: 6542 7563 6b65 7428 7072 6f76 6964 6572  eBucket(provider
-00031db0: 3d27 7333 2729 0a20 2020 206f 626a 6563  ='s3').    objec
-00031dc0: 745f 7572 6920 3d20 7365 6c66 2e43 7265  t_uri = self.Cre
-00031dd0: 6174 654f 626a 6563 7428 6275 636b 6574  ateObject(bucket
-00031de0: 5f75 7269 3d62 7563 6b65 745f 7572 692c  _uri=bucket_uri,
-00031df0: 2063 6f6e 7465 6e74 733d 6227 666f 6f27   contents=b'foo'
-00031e00: 290a 2020 2020 6465 7374 696e 6174 696f  ).    destinatio
-00031e10: 6e5f 7061 7468 203d 2027 7261 6e64 6f6d  n_path = 'random
-00031e20: 5f64 6972 2720 2b20 6f73 2e70 6174 682e  _dir' + os.path.
-00031e30: 7365 700a 0a20 2020 2077 6974 6820 7365  sep..    with se
-00031e40: 6c66 2e61 7373 6572 7452 6169 7365 7328  lf.assertRaises(
-00031e50: 496e 7661 6c69 6455 726c 4572 726f 7229  InvalidUrlError)
-00031e60: 2061 7320 6572 726f 723a 0a20 2020 2020   as error:.     
-00031e70: 2073 656c 662e 5275 6e43 6f6d 6d61 6e64   self.RunCommand
-00031e80: 2827 6370 272c 205b 7375 7269 286f 626a  ('cp', [suri(obj
-00031e90: 6563 745f 7572 6929 2c20 6465 7374 696e  ect_uri), destin
-00031ea0: 6174 696f 6e5f 7061 7468 5d29 0a20 2020  ation_path]).   
-00031eb0: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-00031ec0: 7561 6c28 7374 7228 6572 726f 7229 2c20  ual(str(error), 
-00031ed0: 2749 6e76 616c 6964 2064 6573 7469 6e61  'Invalid destina
-00031ee0: 7469 6f6e 2070 6174 683a 2072 616e 646f  tion path: rando
-00031ef0: 6d5f 6469 722f 2729 0a0a 2020 6465 6620  m_dir/')..  def 
-00031f00: 7465 7374 5f6f 626a 6563 745f 616e 645f  test_object_and_
-00031f10: 7072 6566 6978 5f73 616d 655f 6e61 6d65  prefix_same_name
-00031f20: 2873 656c 6629 3a0a 2020 2020 6275 636b  (self):.    buck
-00031f30: 6574 5f75 7269 203d 2073 656c 662e 4372  et_uri = self.Cr
-00031f40: 6561 7465 4275 636b 6574 2829 0a20 2020  eateBucket().   
-00031f50: 206f 626a 6563 745f 7572 6920 3d20 7365   object_uri = se
-00031f60: 6c66 2e43 7265 6174 654f 626a 6563 7428  lf.CreateObject(
-00031f70: 6275 636b 6574 5f75 7269 3d62 7563 6b65  bucket_uri=bucke
-00031f80: 745f 7572 692c 0a20 2020 2020 2020 2020  t_uri,.         
-00031f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00031fa0: 2020 2020 2020 2020 2020 6f62 6a65 6374            object
-00031fb0: 5f6e 616d 653d 2766 6f6f 272c 0a20 2020  _name='foo',.   
-00031fc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00031fd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00031fe0: 636f 6e74 656e 7473 3d62 2766 6f6f 2729  contents=b'foo')
-00031ff0: 0a20 2020 2073 656c 662e 4372 6561 7465  .    self.Create
-00032000: 4f62 6a65 6374 2862 7563 6b65 745f 7572  Object(bucket_ur
-00032010: 693d 6275 636b 6574 5f75 7269 2c0a 2020  i=bucket_uri,.  
-00032020: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00032030: 2020 2020 6f62 6a65 6374 5f6e 616d 653d      object_name=
-00032040: 2766 6f6f 2f62 6172 272c 0a20 2020 2020  'foo/bar',.     
-00032050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00032060: 2063 6f6e 7465 6e74 733d 6227 6261 7227   contents=b'bar'
-00032070: 290a 2020 2020 6670 6174 6820 3d20 7365  ).    fpath = se
-00032080: 6c66 2e43 7265 6174 6554 656d 7046 696c  lf.CreateTempFil
-00032090: 6528 290a 2020 2020 2320 4d6f 636b 4b65  e().    # MockKe
-000320a0: 7920 646f 6573 6e27 7420 7375 7070 6f72  y doesn't suppor
-000320b0: 7420 6861 7368 5f61 6c67 732c 2073 6f20  t hash_algs, so 
-000320c0: 7468 6520 4d44 3520 7769 6c6c 206e 6f74  the MD5 will not
-000320d0: 206d 6174 6368 2e0a 2020 2020 7769 7468   match..    with
-000320e0: 2053 6574 426f 746f 436f 6e66 6967 466f   SetBotoConfigFo
-000320f0: 7254 6573 7428 5b28 2747 5355 7469 6c27  rTest([('GSUtil'
-00032100: 2c20 2763 6865 636b 5f68 6173 6865 7327  , 'check_hashes'
-00032110: 2c20 276e 6576 6572 2729 5d29 3a0a 2020  , 'never')]):.  
-00032120: 2020 2020 7365 6c66 2e52 756e 436f 6d6d      self.RunComm
-00032130: 616e 6428 2763 7027 2c20 5b73 7572 6928  and('cp', [suri(
-00032140: 6f62 6a65 6374 5f75 7269 292c 2066 7061  object_uri), fpa
-00032150: 7468 5d29 0a20 2020 2077 6974 6820 6f70  th]).    with op
-00032160: 656e 2866 7061 7468 2c20 2772 6227 2920  en(fpath, 'rb') 
-00032170: 6173 2066 3a0a 2020 2020 2020 7365 6c66  as f:.      self
-00032180: 2e61 7373 6572 7445 7175 616c 2866 2e72  .assertEqual(f.r
-00032190: 6561 6428 292c 2062 2766 6f6f 2729 0a0a  ead(), b'foo')..
-000321a0: 2020 6465 6620 7465 7374 5f63 705f 7570    def test_cp_up
-000321b0: 6c6f 6164 5f72 6573 7065 6374 735f 6e6f  load_respects_no
-000321c0: 5f68 6173 6865 7328 7365 6c66 293a 0a20  _hashes(self):. 
-000321d0: 2020 2062 7563 6b65 745f 7572 6920 3d20     bucket_uri = 
-000321e0: 7365 6c66 2e43 7265 6174 6542 7563 6b65  self.CreateBucke
-000321f0: 7428 290a 2020 2020 6670 6174 6820 3d20  t().    fpath = 
-00032200: 7365 6c66 2e43 7265 6174 6554 656d 7046  self.CreateTempF
-00032210: 696c 6528 636f 6e74 656e 7473 3d62 2761  ile(contents=b'a
-00032220: 6263 6427 290a 2020 2020 7769 7468 2053  bcd').    with S
-00032230: 6574 426f 746f 436f 6e66 6967 466f 7254  etBotoConfigForT
-00032240: 6573 7428 5b28 2747 5355 7469 6c27 2c20  est([('GSUtil', 
-00032250: 2763 6865 636b 5f68 6173 6865 7327 2c20  'check_hashes', 
-00032260: 276e 6576 6572 2729 5d29 3a0a 2020 2020  'never')]):.    
-00032270: 2020 6c6f 675f 6861 6e64 6c65 7220 3d20    log_handler = 
-00032280: 7365 6c66 2e52 756e 436f 6d6d 616e 6428  self.RunCommand(
-00032290: 2763 7027 2c20 5b66 7061 7468 2c20 7375  'cp', [fpath, su
-000322a0: 7269 2862 7563 6b65 745f 7572 6929 5d2c  ri(bucket_uri)],
-000322b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000322c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000322d0: 2020 2020 2072 6574 7572 6e5f 6c6f 675f       return_log_
-000322e0: 6861 6e64 6c65 723d 5472 7565 290a 2020  handler=True).  
-000322f0: 2020 7761 726e 696e 675f 6d65 7373 6167    warning_messag
-00032300: 6573 203d 206c 6f67 5f68 616e 646c 6572  es = log_handler
-00032310: 2e6d 6573 7361 6765 735b 2777 6172 6e69  .messages['warni
-00032320: 6e67 275d 0a20 2020 2073 656c 662e 6173  ng'].    self.as
-00032330: 7365 7274 4571 7561 6c73 2831 2c20 6c65  sertEquals(1, le
-00032340: 6e28 7761 726e 696e 675f 6d65 7373 6167  n(warning_messag
-00032350: 6573 2929 0a20 2020 2073 656c 662e 6173  es)).    self.as
-00032360: 7365 7274 496e 2827 466f 756e 6420 6e6f  sertIn('Found no
-00032370: 2068 6173 6865 7320 746f 2076 616c 6964   hashes to valid
-00032380: 6174 6520 6f62 6a65 6374 2075 706c 6f61  ate object uploa
-00032390: 6427 2c0a 2020 2020 2020 2020 2020 2020  d',.            
-000323a0: 2020 2020 2020 7761 726e 696e 675f 6d65        warning_me
-000323b0: 7373 6167 6573 5b30 5d29 0a0a 2020 6465  ssages[0])..  de
-000323c0: 6620 7465 7374 5f73 6869 6d5f 7472 616e  f test_shim_tran
-000323d0: 736c 6174 6573 5f66 6c61 6773 2873 656c  slates_flags(sel
-000323e0: 6629 3a0a 2020 2020 6275 636b 6574 5f75  f):.    bucket_u
-000323f0: 7269 203d 2073 656c 662e 4372 6561 7465  ri = self.Create
-00032400: 4275 636b 6574 2829 0a20 2020 2066 7061  Bucket().    fpa
-00032410: 7468 203d 2073 656c 662e 4372 6561 7465  th = self.Create
-00032420: 5465 6d70 4669 6c65 2863 6f6e 7465 6e74  TempFile(content
-00032430: 733d 6227 6162 6364 2729 0a20 2020 2077  s=b'abcd').    w
-00032440: 6974 6820 5365 7442 6f74 6f43 6f6e 6669  ith SetBotoConfi
-00032450: 6746 6f72 5465 7374 285b 2827 4753 5574  gForTest([('GSUt
-00032460: 696c 272c 2027 7573 655f 6763 6c6f 7564  il', 'use_gcloud
-00032470: 5f73 746f 7261 6765 272c 2027 5472 7565  _storage', 'True
-00032480: 2729 2c0a 2020 2020 2020 2020 2020 2020  '),.            
-00032490: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000324a0: 2020 2028 2747 5355 7469 6c27 2c20 2768     ('GSUtil', 'h
-000324b0: 6964 6465 6e5f 7368 696d 5f6d 6f64 6527  idden_shim_mode'
-000324c0: 2c20 2764 7279 5f72 756e 2729 5d29 3a0a  , 'dry_run')]):.
-000324d0: 2020 2020 2020 7769 7468 2053 6574 456e        with SetEn
-000324e0: 7669 726f 6e6d 656e 7446 6f72 5465 7374  vironmentForTest
-000324f0: 287b 0a20 2020 2020 2020 2020 2027 434c  ({.          'CL
-00032500: 4f55 4453 444b 5f43 4f52 455f 5041 5353  OUDSDK_CORE_PASS
-00032510: 5f43 5245 4445 4e54 4941 4c53 5f54 4f5f  _CREDENTIALS_TO_
-00032520: 4753 5554 494c 273a 2027 5472 7565 272c  GSUTIL': 'True',
-00032530: 0a20 2020 2020 2020 2020 2027 434c 4f55  .          'CLOU
-00032540: 4453 444b 5f52 4f4f 545f 4449 5227 3a20  DSDK_ROOT_DIR': 
-00032550: 2766 616b 655f 6469 7227 2c0a 2020 2020  'fake_dir',.    
-00032560: 2020 7d29 3a0a 2020 2020 2020 2020 6d6f    }):.        mo
-00032570: 636b 5f6c 6f67 5f68 616e 646c 6572 203d  ck_log_handler =
-00032580: 2073 656c 662e 5275 6e43 6f6d 6d61 6e64   self.RunCommand
-00032590: 280a 2020 2020 2020 2020 2020 2020 2763  (.            'c
-000325a0: 7027 2c0a 2020 2020 2020 2020 2020 2020  p',.            
-000325b0: 5b27 2d72 272c 2027 2d52 272c 2027 2d65  ['-r', '-R', '-e
-000325c0: 272c 2066 7061 7468 2c20 7375 7269 2862  ', fpath, suri(b
-000325d0: 7563 6b65 745f 7572 6929 5d2c 0a20 2020  ucket_uri)],.   
-000325e0: 2020 2020 2020 2020 2072 6574 7572 6e5f           return_
-000325f0: 6c6f 675f 6861 6e64 6c65 723d 5472 7565  log_handler=True
-00032600: 290a 2020 2020 2020 2020 696e 666f 5f6c  ).        info_l
-00032610: 696e 6573 203d 2027 5c6e 272e 6a6f 696e  ines = '\n'.join
-00032620: 286d 6f63 6b5f 6c6f 675f 6861 6e64 6c65  (mock_log_handle
-00032630: 722e 6d65 7373 6167 6573 5b27 696e 666f  r.messages['info
-00032640: 275d 290a 2020 2020 2020 2020 7365 6c66  ']).        self
-00032650: 2e61 7373 6572 7449 6e28 0a20 2020 2020  .assertIn(.     
-00032660: 2020 2020 2020 2027 4763 6c6f 7564 2053         'Gcloud S
-00032670: 746f 7261 6765 2043 6f6d 6d61 6e64 3a20  torage Command: 
-00032680: 7b7d 2061 6c70 6861 2073 746f 7261 6765  {} alpha storage
-00032690: 2063 7027 0a20 2020 2020 2020 2020 2020   cp'.           
-000326a0: 2027 202d 7220 2d72 202d 2d69 676e 6f72   ' -r -r --ignor
-000326b0: 652d 7379 6d6c 696e 6b73 207b 7d20 7b7d  e-symlinks {} {}
-000326c0: 272e 666f 726d 6174 280a 2020 2020 2020  '.format(.      
-000326d0: 2020 2020 2020 2020 2020 6f73 2e70 6174            os.pat
-000326e0: 682e 6a6f 696e 2827 6661 6b65 5f64 6972  h.join('fake_dir
-000326f0: 272c 2027 6269 6e27 2c20 2767 636c 6f75  ', 'bin', 'gclou
-00032700: 6427 292c 2066 7061 7468 2c0a 2020 2020  d'), fpath,.    
-00032710: 2020 2020 2020 2020 2020 2020 7375 7269              suri
-00032720: 2862 7563 6b65 745f 7572 6929 292c 2069  (bucket_uri)), i
-00032730: 6e66 6f5f 6c69 6e65 7329 0a0a 2020 4075  nfo_lines)..  @u
-00032740: 6e69 7474 6573 742e 736b 6970 4966 2849  nittest.skipIf(I
-00032750: 535f 5749 4e44 4f57 532c 2027 504f 5349  S_WINDOWS, 'POSI
-00032760: 5820 6174 7472 6962 7574 6573 206e 6f74  X attributes not
-00032770: 2061 7661 696c 6162 6c65 206f 6e20 5769   available on Wi
-00032780: 6e64 6f77 732e 2729 0a20 2040 6d6f 636b  ndows.').  @mock
-00032790: 2e70 6174 6368 2827 6f73 2e67 6574 6575  .patch('os.geteu
-000327a0: 6964 272c 206e 6577 3d6d 6f63 6b2e 4d6f  id', new=mock.Mo
-000327b0: 636b 2872 6574 7572 6e5f 7661 6c75 653d  ck(return_value=
-000327c0: 3029 290a 2020 406d 6f63 6b2e 7061 7463  0)).  @mock.patc
-000327d0: 682e 6f62 6a65 6374 286f 732c 2027 6368  h.object(os, 'ch
-000327e0: 6f77 6e27 2c20 6175 746f 7370 6563 3d54  own', autospec=T
-000327f0: 7275 6529 0a20 2064 6566 2074 6573 745f  rue).  def test_
-00032800: 706f 7369 785f 7275 6e73 5f63 686f 776e  posix_runs_chown
-00032810: 5f61 735f 7375 7065 725f 7573 6572 2873  _as_super_user(s
-00032820: 656c 662c 206d 6f63 6b5f 6368 6f77 6e29  elf, mock_chown)
-00032830: 3a0a 2020 2020 6670 6174 6820 3d20 7365  :.    fpath = se
-00032840: 6c66 2e43 7265 6174 6554 656d 7046 696c  lf.CreateTempFil
-00032850: 6528 636f 6e74 656e 7473 3d62 2761 6263  e(contents=b'abc
-00032860: 6427 290a 2020 2020 6f62 6a20 3d20 6170  d').    obj = ap
-00032870: 6974 6f6f 6c73 5f6d 6573 7361 6765 732e  itools_messages.
-00032880: 4f62 6a65 6374 2829 0a20 2020 206f 626a  Object().    obj
-00032890: 2e6d 6574 6164 6174 6120 3d20 4372 6561  .metadata = Crea
-000328a0: 7465 4375 7374 6f6d 4d65 7461 6461 7461  teCustomMetadata
-000328b0: 2865 6e74 7269 6573 3d7b 5549 445f 4154  (entries={UID_AT
-000328c0: 5452 3a20 5553 4552 5f49 447d 290a 2020  TR: USER_ID}).  
-000328d0: 2020 5061 7273 6541 6e64 5365 7450 4f53    ParseAndSetPOS
-000328e0: 4958 4174 7472 6962 7574 6573 2866 7061  IXAttributes(fpa
-000328f0: 7468 2c20 6f62 6a2c 2046 616c 7365 2c20  th, obj, False, 
-00032900: 5472 7565 290a 2020 2020 6d6f 636b 5f63  True).    mock_c
-00032910: 686f 776e 2e61 7373 6572 745f 6361 6c6c  hown.assert_call
-00032920: 6564 5f6f 6e63 655f 7769 7468 2866 7061  ed_once_with(fpa
-00032930: 7468 2c20 5553 4552 5f49 442c 202d 3129  th, USER_ID, -1)
-00032940: 0a0a 2020 4075 6e69 7474 6573 742e 736b  ..  @unittest.sk
-00032950: 6970 4966 2849 535f 5749 4e44 4f57 532c  ipIf(IS_WINDOWS,
-00032960: 2027 504f 5349 5820 6174 7472 6962 7574   'POSIX attribut
-00032970: 6573 206e 6f74 2061 7661 696c 6162 6c65  es not available
-00032980: 206f 6e20 5769 6e64 6f77 732e 2729 0a20   on Windows.'). 
-00032990: 2040 6d6f 636b 2e70 6174 6368 2827 6f73   @mock.patch('os
-000329a0: 2e67 6574 6575 6964 272c 206e 6577 3d6d  .geteuid', new=m
-000329b0: 6f63 6b2e 4d6f 636b 2872 6574 7572 6e5f  ock.Mock(return_
-000329c0: 7661 6c75 653d 3129 290a 2020 406d 6f63  value=1)).  @moc
-000329d0: 6b2e 7061 7463 682e 6f62 6a65 6374 286f  k.patch.object(o
-000329e0: 732c 2027 6368 6f77 6e27 2c20 6175 746f  s, 'chown', auto
-000329f0: 7370 6563 3d54 7275 6529 0a20 2064 6566  spec=True).  def
-00032a00: 2074 6573 745f 706f 7369 785f 736b 6970   test_posix_skip
-00032a10: 735f 6368 6f77 6e5f 7768 656e 5f6e 6f74  s_chown_when_not
-00032a20: 5f73 7570 6572 5f75 7365 7228 7365 6c66  _super_user(self
-00032a30: 2c20 6d6f 636b 5f63 686f 776e 293a 0a20  , mock_chown):. 
-00032a40: 2020 2066 7061 7468 203d 2073 656c 662e     fpath = self.
-00032a50: 4372 6561 7465 5465 6d70 4669 6c65 2863  CreateTempFile(c
-00032a60: 6f6e 7465 6e74 733d 6227 6162 6364 2729  ontents=b'abcd')
-00032a70: 0a20 2020 206f 626a 203d 2061 7069 746f  .    obj = apito
-00032a80: 6f6c 735f 6d65 7373 6167 6573 2e4f 626a  ols_messages.Obj
-00032a90: 6563 7428 290a 2020 2020 6f62 6a2e 6d65  ect().    obj.me
-00032aa0: 7461 6461 7461 203d 2043 7265 6174 6543  tadata = CreateC
-00032ab0: 7573 746f 6d4d 6574 6164 6174 6128 656e  ustomMetadata(en
-00032ac0: 7472 6965 733d 7b55 4944 5f41 5454 523a  tries={UID_ATTR:
-00032ad0: 2055 5345 525f 4944 7d29 0a20 2020 2050   USER_ID}).    P
-00032ae0: 6172 7365 416e 6453 6574 504f 5349 5841  arseAndSetPOSIXA
-00032af0: 7474 7269 6275 7465 7328 6670 6174 682c  ttributes(fpath,
-00032b00: 206f 626a 2c20 4661 6c73 652c 2054 7275   obj, False, Tru
-00032b10: 6529 0a20 2020 206d 6f63 6b5f 6368 6f77  e).    mock_chow
-00032b20: 6e2e 6173 7365 7274 5f6e 6f74 5f63 616c  n.assert_not_cal
-00032b30: 6c65 6428 290a                           led().
+000301c0: 2020 2020 2020 2020 2020 2020 2020 2027                 '
+000301d0: 6d64 3548 6173 6827 5d29 2e6d 6435 4861  md5Hash']).md5Ha
+000301e0: 7368 2c0a 2020 2020 2020 2020 2020 6e65  sh,.          ne
+000301f0: 775f 6f62 6a5f 6d65 7461 6461 7461 2e6d  w_obj_metadata.m
+00030200: 6435 4861 7368 2c0a 2020 2020 2020 2020  d5Hash,.        
+00030210: 2020 2745 7272 6f72 3a20 5265 7772 6974    'Error: Rewrit
+00030220: 7465 6e20 6f62 6a65 6374 5c27 7320 6861  ten object\'s ha
+00030230: 7368 2064 6f65 736e 5c27 7420 6d61 7463  sh doesn\'t matc
+00030240: 6820 736f 7572 6365 206f 626a 6563 742e  h source object.
+00030250: 2729 0a20 2020 2020 2023 204e 6577 206f  ').      # New o
+00030260: 626a 6563 7420 7368 6f75 6c64 2068 6176  bject should hav
+00030270: 6520 6120 7075 626c 6963 2d72 6561 6420  e a public-read 
+00030280: 4143 4c20 6672 6f6d 2074 6865 2073 6563  ACL from the sec
+00030290: 6f6e 6420 636f 6d6d 616e 642e 0a20 2020  ond command..   
+000302a0: 2020 2066 6f75 6e64 5f70 7562 6c69 635f     found_public_
+000302b0: 6163 6c20 3d20 4661 6c73 650a 2020 2020  acl = False.    
+000302c0: 2020 666f 7220 6163 6c5f 656e 7472 7920    for acl_entry 
+000302d0: 696e 206e 6577 5f6f 626a 5f6d 6574 6164  in new_obj_metad
+000302e0: 6174 612e 6163 6c3a 0a20 2020 2020 2020  ata.acl:.       
+000302f0: 2069 6620 6163 6c5f 656e 7472 792e 656e   if acl_entry.en
+00030300: 7469 7479 203d 3d20 2761 6c6c 5573 6572  tity == 'allUser
+00030310: 7327 3a0a 2020 2020 2020 2020 2020 666f  s':.          fo
+00030320: 756e 645f 7075 626c 6963 5f61 636c 203d  und_public_acl =
+00030330: 2054 7275 650a 2020 2020 2020 7365 6c66   True.      self
+00030340: 2e61 7373 6572 7454 7275 6528 666f 756e  .assertTrue(foun
+00030350: 645f 7075 626c 6963 5f61 636c 2c0a 2020  d_public_acl,.  
+00030360: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00030370: 2020 2020 274e 6577 206f 626a 6563 7420      'New object 
+00030380: 7761 7320 6e6f 7420 7772 6974 7465 6e20  was not written 
+00030390: 7769 7468 2061 2070 7562 6c69 6320 4143  with a public AC
+000303a0: 4c2e 2729 0a20 2020 2066 696e 616c 6c79  L.').    finally
+000303b0: 3a0a 2020 2020 2020 2320 436c 6561 6e20  :.      # Clean 
+000303c0: 7570 2069 6620 736f 6d65 7468 696e 6720  up if something 
+000303d0: 7765 6e74 2077 726f 6e67 2e0a 2020 2020  went wrong..    
+000303e0: 2020 4465 6c65 7465 5472 6163 6b65 7246    DeleteTrackerF
+000303f0: 696c 6528 7472 6163 6b65 725f 6669 6c65  ile(tracker_file
+00030400: 5f6e 616d 6529 0a0a 2020 4075 6e69 7474  _name)..  @unitt
+00030410: 6573 742e 736b 6970 4966 2849 535f 5749  est.skipIf(IS_WI
+00030420: 4e44 4f57 532c 2027 504f 5349 5820 6174  NDOWS, 'POSIX at
+00030430: 7472 6962 7574 6573 206e 6f74 2061 7661  tributes not ava
+00030440: 696c 6162 6c65 206f 6e20 5769 6e64 6f77  ilable on Window
+00030450: 732e 2729 0a20 2040 756e 6974 7465 7374  s.').  @unittest
+00030460: 2e73 6b69 7055 6e6c 6573 7328 5573 696e  .skipUnless(Usin
+00030470: 6743 7263 6d6f 6445 7874 656e 7369 6f6e  gCrcmodExtension
+00030480: 2829 2c20 2754 6573 7420 7265 7175 6972  (), 'Test requir
+00030490: 6573 2066 6173 7420 6372 636d 6f64 2e27  es fast crcmod.'
+000304a0: 290a 2020 6465 6620 7465 7374 5f63 705f  ).  def test_cp_
+000304b0: 7072 6573 6572 7665 5f70 6f73 6978 5f62  preserve_posix_b
+000304c0: 7563 6b65 745f 746f 5f64 6972 5f6e 6f5f  ucket_to_dir_no_
+000304d0: 6572 726f 7273 2873 656c 6629 3a0a 2020  errors(self):.  
+000304e0: 2020 2222 2254 6573 7473 2075 7365 206f    """Tests use o
+000304f0: 6620 7468 6520 2d50 2066 6c61 6720 7769  f the -P flag wi
+00030500: 7468 2063 7020 6672 6f6d 2061 2062 7563  th cp from a buc
+00030510: 6b65 7420 746f 2061 206c 6f63 616c 2064  ket to a local d
+00030520: 6972 2e0a 0a20 2020 2053 7065 6369 6669  ir...    Specifi
+00030530: 6361 6c6c 7920 7465 7374 7320 636f 6d62  cally tests comb
+00030540: 696e 6174 696f 6e73 206f 6620 504f 5349  inations of POSI
+00030550: 5820 6174 7472 6962 7574 6573 2069 6e20  X attributes in 
+00030560: 6d65 7461 6461 7461 2074 6861 7420 7769  metadata that wi
+00030570: 6c6c 0a20 2020 2070 6173 7320 7661 6c69  ll.    pass vali
+00030580: 6461 7469 6f6e 2e0a 2020 2020 2222 220a  dation..    """.
+00030590: 2020 2020 6275 636b 6574 5f75 7269 203d      bucket_uri =
+000305a0: 2073 656c 662e 4372 6561 7465 4275 636b   self.CreateBuck
+000305b0: 6574 2829 0a20 2020 2074 6d70 6469 7220  et().    tmpdir 
+000305c0: 3d20 7365 6c66 2e43 7265 6174 6554 656d  = self.CreateTem
+000305d0: 7044 6972 2829 0a20 2020 2054 6573 7443  pDir().    TestC
+000305e0: 704d 7650 4f53 4958 4275 636b 6574 546f  pMvPOSIXBucketTo
+000305f0: 4c6f 6361 6c4e 6f45 7272 6f72 7328 7365  LocalNoErrors(se
+00030600: 6c66 2c20 6275 636b 6574 5f75 7269 2c20  lf, bucket_uri, 
+00030610: 746d 7064 6972 2c20 6973 5f63 703d 5472  tmpdir, is_cp=Tr
+00030620: 7565 290a 0a20 2040 756e 6974 7465 7374  ue)..  @unittest
+00030630: 2e73 6b69 7049 6628 4953 5f57 494e 444f  .skipIf(IS_WINDO
+00030640: 5753 2c20 2750 4f53 4958 2061 7474 7269  WS, 'POSIX attri
+00030650: 6275 7465 7320 6e6f 7420 6176 6169 6c61  butes not availa
+00030660: 626c 6520 6f6e 2057 696e 646f 7773 2e27  ble on Windows.'
+00030670: 290a 2020 6465 6620 7465 7374 5f63 705f  ).  def test_cp_
+00030680: 7072 6573 6572 7665 5f70 6f73 6978 5f62  preserve_posix_b
+00030690: 7563 6b65 745f 746f 5f64 6972 5f65 7272  ucket_to_dir_err
+000306a0: 6f72 7328 7365 6c66 293a 0a20 2020 2022  ors(self):.    "
+000306b0: 2222 5465 7374 7320 7573 6520 6f66 2074  ""Tests use of t
+000306c0: 6865 202d 5020 666c 6167 2077 6974 6820  he -P flag with 
+000306d0: 6370 2066 726f 6d20 6120 6275 636b 6574  cp from a bucket
+000306e0: 2074 6f20 6120 6c6f 6361 6c20 6469 722e   to a local dir.
+000306f0: 0a0a 2020 2020 5370 6563 6966 6963 616c  ..    Specifical
+00030700: 6c79 2c20 636f 6d62 696e 6174 696f 6e73  ly, combinations
+00030710: 206f 6620 504f 5349 5820 6174 7472 6962   of POSIX attrib
+00030720: 7574 6573 2069 6e20 6d65 7461 6461 7461  utes in metadata
+00030730: 2074 6861 7420 7769 6c6c 2066 6169 6c0a   that will fail.
+00030740: 2020 2020 7661 6c69 6461 7469 6f6e 2e0a      validation..
+00030750: 2020 2020 2222 220a 2020 2020 6275 636b      """.    buck
+00030760: 6574 5f75 7269 203d 2073 656c 662e 4372  et_uri = self.Cr
+00030770: 6561 7465 4275 636b 6574 2829 0a20 2020  eateBucket().   
+00030780: 2074 6d70 6469 7220 3d20 7365 6c66 2e43   tmpdir = self.C
+00030790: 7265 6174 6554 656d 7044 6972 2829 0a0a  reateTempDir()..
+000307a0: 2020 2020 6f62 6a20 3d20 7365 6c66 2e43      obj = self.C
+000307b0: 7265 6174 654f 626a 6563 7428 6275 636b  reateObject(buck
+000307c0: 6574 5f75 7269 3d62 7563 6b65 745f 7572  et_uri=bucket_ur
+000307d0: 692c 0a20 2020 2020 2020 2020 2020 2020  i,.             
+000307e0: 2020 2020 2020 2020 2020 2020 2020 206f                 o
+000307f0: 626a 6563 745f 6e61 6d65 3d27 6f62 6a27  bject_name='obj'
+00030800: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00030810: 2020 2020 2020 2020 2020 2020 2020 636f                co
+00030820: 6e74 656e 7473 3d62 276f 626a 2729 0a20  ntents=b'obj'). 
+00030830: 2020 2054 6573 7443 704d 7650 4f53 4958     TestCpMvPOSIX
+00030840: 4275 636b 6574 546f 4c6f 6361 6c45 7272  BucketToLocalErr
+00030850: 6f72 7328 7365 6c66 2c20 6275 636b 6574  ors(self, bucket
+00030860: 5f75 7269 2c20 6f62 6a2c 2074 6d70 6469  _uri, obj, tmpdi
+00030870: 722c 2069 735f 6370 3d54 7275 6529 0a0a  r, is_cp=True)..
+00030880: 2020 4075 6e69 7474 6573 742e 736b 6970    @unittest.skip
+00030890: 4966 2849 535f 5749 4e44 4f57 532c 2027  If(IS_WINDOWS, '
+000308a0: 504f 5349 5820 6174 7472 6962 7574 6573  POSIX attributes
+000308b0: 206e 6f74 2061 7661 696c 6162 6c65 206f   not available o
+000308c0: 6e20 5769 6e64 6f77 732e 2729 0a20 2064  n Windows.').  d
+000308d0: 6566 2074 6573 745f 6370 5f70 7265 7365  ef test_cp_prese
+000308e0: 7665 5f70 6f73 6978 5f64 6972 5f74 6f5f  ve_posix_dir_to_
+000308f0: 6275 636b 6574 5f6e 6f5f 6572 726f 7273  bucket_no_errors
+00030900: 2873 656c 6629 3a0a 2020 2020 2222 2254  (self):.    """T
+00030910: 6573 7473 2075 7365 206f 6620 7468 6520  ests use of the 
+00030920: 2d50 2066 6c61 6720 7769 7468 2063 7020  -P flag with cp 
+00030930: 6672 6f6d 2061 206c 6f63 616c 2064 6972  from a local dir
+00030940: 2074 6f20 6120 6275 636b 6574 2e22 2222   to a bucket."""
+00030950: 0a20 2020 2062 7563 6b65 745f 7572 6920  .    bucket_uri 
+00030960: 3d20 7365 6c66 2e43 7265 6174 6542 7563  = self.CreateBuc
+00030970: 6b65 7428 290a 2020 2020 5465 7374 4370  ket().    TestCp
+00030980: 4d76 504f 5349 584c 6f63 616c 546f 4275  MvPOSIXLocalToBu
+00030990: 636b 6574 4e6f 4572 726f 7273 2873 656c  cketNoErrors(sel
+000309a0: 662c 2062 7563 6b65 745f 7572 692c 2069  f, bucket_uri, i
+000309b0: 735f 6370 3d54 7275 6529 0a0a 2020 6465  s_cp=True)..  de
+000309c0: 6620 7465 7374 5f63 705f 6d69 6e75 735f  f test_cp_minus_
+000309d0: 735f 746f 5f6e 6f6e 5f63 6c6f 7564 5f64  s_to_non_cloud_d
+000309e0: 6573 745f 6661 696c 7328 7365 6c66 293a  est_fails(self):
+000309f0: 0a20 2020 2022 2222 5465 7374 2074 6861  .    """Test tha
+00030a00: 7420 6370 202d 7320 6f70 6572 6174 696f  t cp -s operatio
+00030a10: 6e73 2074 6f20 6120 6e6f 6e2d 636c 6f75  ns to a non-clou
+00030a20: 6420 6465 7374 696e 6174 696f 6e20 6172  d destination ar
+00030a30: 6520 7072 6576 656e 7465 642e 2222 220a  e prevented.""".
+00030a40: 2020 2020 6c6f 6361 6c5f 6669 6c65 203d      local_file =
+00030a50: 2073 656c 662e 4372 6561 7465 5465 6d70   self.CreateTemp
+00030a60: 4669 6c65 2863 6f6e 7465 6e74 733d 6227  File(contents=b'
+00030a70: 666f 6f27 290a 2020 2020 6465 7374 5f64  foo').    dest_d
+00030a80: 6972 203d 2073 656c 662e 4372 6561 7465  ir = self.Create
+00030a90: 5465 6d70 4469 7228 290a 2020 2020 7374  TempDir().    st
+00030aa0: 6465 7272 203d 2073 656c 662e 5275 6e47  derr = self.RunG
+00030ab0: 7355 7469 6c28 5b27 6370 272c 2027 2d73  sUtil(['cp', '-s
+00030ac0: 272c 2027 7374 616e 6461 7264 272c 206c  ', 'standard', l
+00030ad0: 6f63 616c 5f66 696c 652c 2064 6573 745f  ocal_file, dest_
+00030ae0: 6469 725d 2c0a 2020 2020 2020 2020 2020  dir],.          
+00030af0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00030b00: 2020 6578 7065 6374 6564 5f73 7461 7475    expected_statu
+00030b10: 733d 312c 0a20 2020 2020 2020 2020 2020  s=1,.           
+00030b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00030b30: 2072 6574 7572 6e5f 7374 6465 7272 3d54   return_stderr=T
+00030b40: 7275 6529 0a20 2020 2073 656c 662e 6173  rue).    self.as
+00030b50: 7365 7274 496e 2827 4361 6e6e 6f74 2073  sertIn('Cannot s
+00030b60: 7065 6369 6679 2073 746f 7261 6765 2063  pecify storage c
+00030b70: 6c61 7373 2066 6f72 2061 206e 6f6e 2d63  lass for a non-c
+00030b80: 6c6f 7564 2064 6573 7469 6e61 7469 6f6e  loud destination
+00030b90: 3a27 2c0a 2020 2020 2020 2020 2020 2020  :',.            
+00030ba0: 2020 2020 2020 7374 6465 7272 290a 0a20        stderr).. 
+00030bb0: 2023 2054 4f44 4f3a 2052 656d 6f76 6520   # TODO: Remove 
+00030bc0: 4073 6b69 7020 616e 6e6f 7461 7469 6f6e  @skip annotation
+00030bd0: 2066 726f 6d20 7468 6973 2074 6573 7420   from this test 
+00030be0: 6f6e 6365 2077 6520 7570 6772 6164 6520  once we upgrade 
+00030bf0: 746f 2074 6865 2042 6f74 6f0a 2020 2320  to the Boto.  # 
+00030c00: 7665 7273 696f 6e20 7468 6174 2070 6172  version that par
+00030c10: 7365 7320 7468 6520 7374 6f72 6167 6520  ses the storage 
+00030c20: 636c 6173 7320 6865 6164 6572 2066 6f72  class header for
+00030c30: 2048 4541 4420 4f62 6a65 6374 2072 6573   HEAD Object res
+00030c40: 706f 6e73 6573 2e0a 2020 4053 6b69 7046  ponses..  @SkipF
+00030c50: 6f72 584d 4c28 274e 6565 6420 426f 746f  orXML('Need Boto
+00030c60: 2076 6572 7369 6f6e 203e 2032 2e34 362e   version > 2.46.
+00030c70: 3127 290a 2020 6465 6620 7465 7374 5f63  1').  def test_c
+00030c80: 705f 7370 6563 6966 795f 6e6f 6e64 6566  p_specify_nondef
+00030c90: 6175 6c74 5f73 746f 7261 6765 5f63 6c61  ault_storage_cla
+00030ca0: 7373 2873 656c 6629 3a0a 2020 2020 6275  ss(self):.    bu
+00030cb0: 636b 6574 5f75 7269 203d 2073 656c 662e  cket_uri = self.
+00030cc0: 4372 6561 7465 4275 636b 6574 2829 0a20  CreateBucket(). 
+00030cd0: 2020 206f 626a 6563 745f 7572 6920 3d20     object_uri = 
+00030ce0: 7365 6c66 2e43 7265 6174 654f 626a 6563  self.CreateObjec
+00030cf0: 7428 6275 636b 6574 5f75 7269 3d62 7563  t(bucket_uri=buc
+00030d00: 6b65 745f 7572 692c 0a20 2020 2020 2020  ket_uri,.       
+00030d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00030d20: 2020 2020 2020 2020 2020 2020 6f62 6a65              obje
+00030d30: 6374 5f6e 616d 653d 2766 6f6f 272c 0a20  ct_name='foo',. 
+00030d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00030d50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00030d60: 2020 636f 6e74 656e 7473 3d62 2766 6f6f    contents=b'foo
+00030d70: 2729 0a20 2020 206f 626a 6563 7432 5f73  ').    object2_s
+00030d80: 7572 6920 3d20 7375 7269 286f 626a 6563  uri = suri(objec
+00030d90: 745f 7572 6929 202b 2027 6261 7227 0a20  t_uri) + 'bar'. 
+00030da0: 2020 2023 2053 7065 6369 6679 2073 746f     # Specify sto
+00030db0: 7261 6765 2063 6c61 7373 206e 616d 6520  rage class name 
+00030dc0: 6173 206d 6978 6564 2063 6173 6520 6865  as mixed case he
+00030dd0: 7265 2074 6f20 656e 7375 7265 2074 6861  re to ensure tha
+00030de0: 7420 6974 0a20 2020 2023 2067 6574 7320  t it.    # gets 
+00030df0: 6e6f 726d 616c 697a 6564 2074 6f20 7570  normalized to up
+00030e00: 7065 7263 6173 6520 2853 3320 776f 756c  percase (S3 woul
+00030e10: 6420 7265 7475 726e 2061 6e20 6572 726f  d return an erro
+00030e20: 7220 6f74 6865 7277 6973 6529 2c20 616e  r otherwise), an
+00030e30: 640a 2020 2020 2320 7468 6174 2075 7369  d.    # that usi
+00030e40: 6e67 2074 6865 206e 6f72 6d61 6c69 7a65  ng the normalize
+00030e50: 6420 6361 7365 2069 7320 6163 6365 7074  d case is accept
+00030e60: 6564 2062 7920 6561 6368 2041 5049 2e0a  ed by each API..
+00030e70: 2020 2020 6e6f 6e64 6566 6175 6c74 5f73      nondefault_s
+00030e80: 746f 7261 6765 5f63 6c61 7373 203d 207b  torage_class = {
+00030e90: 0a20 2020 2020 2020 2027 7333 273a 2027  .        's3': '
+00030ea0: 5374 616e 6461 7264 5f69 4127 2c0a 2020  Standard_iA',.  
+00030eb0: 2020 2020 2020 2767 7327 3a20 2764 7572        'gs': 'dur
+00030ec0: 6162 6c65 5f52 4544 5543 4544 5f61 7661  able_REDUCED_ava
+00030ed0: 696c 6162 696c 6974 7927 0a20 2020 207d  ilability'.    }
+00030ee0: 0a20 2020 2073 746f 7261 6765 5f63 6c61  .    storage_cla
+00030ef0: 7373 203d 206e 6f6e 6465 6661 756c 745f  ss = nondefault_
+00030f00: 7374 6f72 6167 655f 636c 6173 735b 7365  storage_class[se
+00030f10: 6c66 2e64 6566 6175 6c74 5f70 726f 7669  lf.default_provi
+00030f20: 6465 725d 0a20 2020 2073 656c 662e 5275  der].    self.Ru
+00030f30: 6e47 7355 7469 6c28 5b27 6370 272c 2027  nGsUtil(['cp', '
+00030f40: 2d73 272c 2073 746f 7261 6765 5f63 6c61  -s', storage_cla
+00030f50: 7373 2c20 7375 7269 286f 626a 6563 745f  ss, suri(object_
+00030f60: 7572 6929 2c20 6f62 6a65 6374 325f 7375  uri), object2_su
+00030f70: 7269 5d29 0a20 2020 2073 7464 6f75 7420  ri]).    stdout 
+00030f80: 3d20 7365 6c66 2e52 756e 4773 5574 696c  = self.RunGsUtil
+00030f90: 285b 2773 7461 7427 2c20 6f62 6a65 6374  (['stat', object
+00030fa0: 325f 7375 7269 5d2c 2072 6574 7572 6e5f  2_suri], return_
+00030fb0: 7374 646f 7574 3d54 7275 6529 0a20 2020  stdout=True).   
+00030fc0: 2073 656c 662e 6173 7365 7274 5265 6765   self.assertRege
+00030fd0: 7870 4d61 7463 6865 7357 6974 6846 6c61  xpMatchesWithFla
+00030fe0: 6773 2873 7464 6f75 742c 0a20 2020 2020  gs(stdout,.     
+00030ff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00031000: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00031010: 2072 2753 746f 7261 6765 2063 6c61 7373   r'Storage class
+00031020: 3a5c 732b 2573 2720 2520 7374 6f72 6167  :\s+%s' % storag
+00031030: 655f 636c 6173 732c 0a20 2020 2020 2020  e_class,.       
+00031040: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00031050: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00031060: 6c61 6773 3d72 652e 4947 4e4f 5245 4341  lags=re.IGNORECA
+00031070: 5345 290a 0a20 2040 536b 6970 466f 7253  SE)..  @SkipForS
+00031080: 3328 2754 6573 7420 7573 6573 2067 732d  3('Test uses gs-
+00031090: 7370 6563 6966 6963 2073 746f 7261 6765  specific storage
+000310a0: 2063 6c61 7373 6573 2e27 290a 2020 6465   classes.').  de
+000310b0: 6620 7465 7374 5f63 705f 7365 7473 5f63  f test_cp_sets_c
+000310c0: 6f72 7265 6374 5f64 6573 745f 7374 6f72  orrect_dest_stor
+000310d0: 6167 655f 636c 6173 7328 7365 6c66 293a  age_class(self):
+000310e0: 0a20 2020 2022 2222 5465 7374 7320 7468  .    """Tests th
+000310f0: 6174 206f 626a 6563 7420 7374 6f72 6167  at object storag
+00031100: 6520 636c 6173 7320 6973 2073 6574 2063  e class is set c
+00031110: 6f72 7265 6374 6c79 2077 6974 6820 616e  orrectly with an
+00031120: 6420 7769 7468 6f75 7420 2d73 2e22 2222  d without -s."""
+00031130: 0a20 2020 2023 2055 7365 2061 206e 6f6e  .    # Use a non
+00031140: 2d64 6566 6175 6c74 2073 746f 7261 6765  -default storage
+00031150: 2063 6c61 7373 2061 7320 7468 6520 6465   class as the de
+00031160: 6661 756c 7420 666f 7220 7468 6520 6275  fault for the bu
+00031170: 636b 6574 2e0a 2020 2020 6275 636b 6574  cket..    bucket
+00031180: 5f75 7269 203d 2073 656c 662e 4372 6561  _uri = self.Crea
+00031190: 7465 4275 636b 6574 2873 746f 7261 6765  teBucket(storage
+000311a0: 5f63 6c61 7373 3d27 6e65 6172 6c69 6e65  _class='nearline
+000311b0: 2729 0a20 2020 2023 2045 6e73 7572 6520  ').    # Ensure 
+000311c0: 7374 6f72 6167 6520 636c 6173 7320 6973  storage class is
+000311d0: 2073 6574 2063 6f72 7265 6374 6c79 2066   set correctly f
+000311e0: 6f72 2061 206c 6f63 616c 2d74 6f2d 636c  or a local-to-cl
+000311f0: 6f75 6420 636f 7079 2e0a 2020 2020 6c6f  oud copy..    lo
+00031200: 6361 6c5f 666e 616d 6520 3d20 2766 6f6f  cal_fname = 'foo
+00031210: 2d6f 7269 6727 0a20 2020 206c 6f63 616c  -orig'.    local
+00031220: 5f66 7061 7468 203d 2073 656c 662e 4372  _fpath = self.Cr
+00031230: 6561 7465 5465 6d70 4669 6c65 2863 6f6e  eateTempFile(con
+00031240: 7465 6e74 733d 6227 666f 6f27 2c20 6669  tents=b'foo', fi
+00031250: 6c65 5f6e 616d 653d 6c6f 6361 6c5f 666e  le_name=local_fn
+00031260: 616d 6529 0a20 2020 2066 6f6f 5f63 6c6f  ame).    foo_clo
+00031270: 7564 5f73 7572 6920 3d20 7375 7269 2862  ud_suri = suri(b
+00031280: 7563 6b65 745f 7572 6929 202b 2027 2f27  ucket_uri) + '/'
+00031290: 202b 206c 6f63 616c 5f66 6e61 6d65 0a20   + local_fname. 
+000312a0: 2020 2073 656c 662e 5275 6e47 7355 7469     self.RunGsUti
+000312b0: 6c28 5b27 6370 272c 2027 2d73 272c 2027  l(['cp', '-s', '
+000312c0: 7374 616e 6461 7264 272c 206c 6f63 616c  standard', local
+000312d0: 5f66 7061 7468 2c20 666f 6f5f 636c 6f75  _fpath, foo_clou
+000312e0: 645f 7375 7269 5d29 0a20 2020 2077 6974  d_suri]).    wit
+000312f0: 6820 5365 7442 6f74 6f43 6f6e 6669 6746  h SetBotoConfigF
+00031300: 6f72 5465 7374 285b 2827 4753 5574 696c  orTest([('GSUtil
+00031310: 272c 2027 7072 6566 6572 5f61 7069 272c  ', 'prefer_api',
+00031320: 2027 6a73 6f6e 2729 5d29 3a0a 2020 2020   'json')]):.    
+00031330: 2020 7374 646f 7574 203d 2073 656c 662e    stdout = self.
+00031340: 5275 6e47 7355 7469 6c28 5b27 7374 6174  RunGsUtil(['stat
+00031350: 272c 2066 6f6f 5f63 6c6f 7564 5f73 7572  ', foo_cloud_sur
+00031360: 695d 2c20 7265 7475 726e 5f73 7464 6f75  i], return_stdou
+00031370: 743d 5472 7565 290a 2020 2020 7365 6c66  t=True).    self
+00031380: 2e61 7373 6572 7452 6567 6578 704d 6174  .assertRegexpMat
+00031390: 6368 6573 5769 7468 466c 6167 7328 7374  chesWithFlags(st
+000313a0: 646f 7574 2c0a 2020 2020 2020 2020 2020  dout,.          
+000313b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000313c0: 2020 2020 2020 2020 2020 2020 7227 5374              r'St
+000313d0: 6f72 6167 6520 636c 6173 733a 5c73 2b53  orage class:\s+S
+000313e0: 5441 4e44 4152 4427 2c0a 2020 2020 2020  TANDARD',.      
+000313f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00031400: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00031410: 666c 6167 733d 7265 2e49 474e 4f52 4543  flags=re.IGNOREC
+00031420: 4153 4529 0a0a 2020 2020 2320 456e 7375  ASE)..    # Ensu
+00031430: 7265 2073 746f 7261 6765 2063 6c61 7373  re storage class
+00031440: 2069 7320 7365 7420 636f 7272 6563 746c   is set correctl
+00031450: 7920 666f 7220 6120 636c 6f75 642d 746f  y for a cloud-to
+00031460: 2d63 6c6f 7564 2063 6f70 7920 7768 656e  -cloud copy when
+00031470: 206e 6f0a 2020 2020 2320 6465 7374 696e   no.    # destin
+00031480: 6174 696f 6e20 7374 6f72 6167 6520 636c  ation storage cl
+00031490: 6173 7320 6973 2073 7065 6369 6669 6564  ass is specified
+000314a0: 2e0a 2020 2020 666f 6f5f 6e6c 5f73 7572  ..    foo_nl_sur
+000314b0: 6920 3d20 7375 7269 2862 7563 6b65 745f  i = suri(bucket_
+000314c0: 7572 6929 202b 2027 2f66 6f6f 2d6e 6c27  uri) + '/foo-nl'
+000314d0: 0a20 2020 2073 656c 662e 5275 6e47 7355  .    self.RunGsU
+000314e0: 7469 6c28 5b27 6370 272c 2066 6f6f 5f63  til(['cp', foo_c
+000314f0: 6c6f 7564 5f73 7572 692c 2066 6f6f 5f6e  loud_suri, foo_n
+00031500: 6c5f 7375 7269 5d29 0a20 2020 2023 2054  l_suri]).    # T
+00031510: 4f44 4f3a 2052 656d 6f76 6520 7769 7468  ODO: Remove with
+00031520: 2d63 6c61 7573 6520 6166 7465 7220 6164  -clause after ad
+00031530: 6469 6e67 2073 746f 7261 6765 2063 6c61  ding storage cla
+00031540: 7373 2070 6172 7369 6e67 2069 6e20 426f  ss parsing in Bo
+00031550: 746f 2e0a 2020 2020 7769 7468 2053 6574  to..    with Set
+00031560: 426f 746f 436f 6e66 6967 466f 7254 6573  BotoConfigForTes
+00031570: 7428 5b28 2747 5355 7469 6c27 2c20 2770  t([('GSUtil', 'p
+00031580: 7265 6665 725f 6170 6927 2c20 276a 736f  refer_api', 'jso
+00031590: 6e27 295d 293a 0a20 2020 2020 2073 7464  n')]):.      std
+000315a0: 6f75 7420 3d20 7365 6c66 2e52 756e 4773  out = self.RunGs
+000315b0: 5574 696c 285b 2773 7461 7427 2c20 666f  Util(['stat', fo
+000315c0: 6f5f 6e6c 5f73 7572 695d 2c20 7265 7475  o_nl_suri], retu
+000315d0: 726e 5f73 7464 6f75 743d 5472 7565 290a  rn_stdout=True).
+000315e0: 2020 2020 7365 6c66 2e61 7373 6572 7452      self.assertR
+000315f0: 6567 6578 704d 6174 6368 6573 5769 7468  egexpMatchesWith
+00031600: 466c 6167 7328 7374 646f 7574 2c0a 2020  Flags(stdout,.  
+00031610: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00031620: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00031630: 2020 2020 7227 5374 6f72 6167 6520 636c      r'Storage cl
+00031640: 6173 733a 5c73 2b4e 4541 524c 494e 4527  ass:\s+NEARLINE'
+00031650: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00031660: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00031670: 2020 2020 2020 2020 666c 6167 733d 7265          flags=re
+00031680: 2e49 474e 4f52 4543 4153 4529 0a0a 2020  .IGNORECASE)..  
+00031690: 2020 2320 456e 7375 7265 2073 746f 7261    # Ensure stora
+000316a0: 6765 2063 6c61 7373 2069 7320 7365 7420  ge class is set 
+000316b0: 636f 7272 6563 746c 7920 666f 7220 6120  correctly for a 
+000316c0: 636c 6f75 642d 746f 2d63 6c6f 7564 2063  cloud-to-cloud c
+000316d0: 6f70 7920 7768 656e 2061 0a20 2020 2023  opy when a.    #
+000316e0: 206e 6f6e 2d62 7563 6b65 742d 6465 6661   non-bucket-defa
+000316f0: 756c 7420 7374 6f72 6167 6520 636c 6173  ult storage clas
+00031700: 7320 6973 2073 7065 6369 6669 6564 2e0a  s is specified..
+00031710: 2020 2020 666f 6f5f 7374 645f 7375 7269      foo_std_suri
+00031720: 203d 2073 7572 6928 6275 636b 6574 5f75   = suri(bucket_u
+00031730: 7269 2920 2b20 272f 666f 6f2d 7374 6427  ri) + '/foo-std'
+00031740: 0a20 2020 2073 656c 662e 5275 6e47 7355  .    self.RunGsU
+00031750: 7469 6c28 5b27 6370 272c 2027 2d73 272c  til(['cp', '-s',
+00031760: 2027 7374 616e 6461 7264 272c 2066 6f6f   'standard', foo
+00031770: 5f6e 6c5f 7375 7269 2c20 666f 6f5f 7374  _nl_suri, foo_st
+00031780: 645f 7375 7269 5d29 0a20 2020 2023 2054  d_suri]).    # T
+00031790: 4f44 4f3a 2052 656d 6f76 6520 7769 7468  ODO: Remove with
+000317a0: 2d63 6c61 7573 6520 6166 7465 7220 6164  -clause after ad
+000317b0: 6469 6e67 2073 746f 7261 6765 2063 6c61  ding storage cla
+000317c0: 7373 2070 6172 7369 6e67 2069 6e20 426f  ss parsing in Bo
+000317d0: 746f 2e0a 2020 2020 7769 7468 2053 6574  to..    with Set
+000317e0: 426f 746f 436f 6e66 6967 466f 7254 6573  BotoConfigForTes
+000317f0: 7428 5b28 2747 5355 7469 6c27 2c20 2770  t([('GSUtil', 'p
+00031800: 7265 6665 725f 6170 6927 2c20 276a 736f  refer_api', 'jso
+00031810: 6e27 295d 293a 0a20 2020 2020 2073 7464  n')]):.      std
+00031820: 6f75 7420 3d20 7365 6c66 2e52 756e 4773  out = self.RunGs
+00031830: 5574 696c 285b 2773 7461 7427 2c20 666f  Util(['stat', fo
+00031840: 6f5f 7374 645f 7375 7269 5d2c 2072 6574  o_std_suri], ret
+00031850: 7572 6e5f 7374 646f 7574 3d54 7275 6529  urn_stdout=True)
+00031860: 0a20 2020 2073 656c 662e 6173 7365 7274  .    self.assert
+00031870: 5265 6765 7870 4d61 7463 6865 7357 6974  RegexpMatchesWit
+00031880: 6846 6c61 6773 2873 7464 6f75 742c 0a20  hFlags(stdout,. 
+00031890: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000318a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000318b0: 2020 2020 2072 2753 746f 7261 6765 2063       r'Storage c
+000318c0: 6c61 7373 3a5c 732b 5354 414e 4441 5244  lass:\s+STANDARD
+000318d0: 272c 0a20 2020 2020 2020 2020 2020 2020  ',.             
+000318e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000318f0: 2020 2020 2020 2020 2066 6c61 6773 3d72           flags=r
+00031900: 652e 4947 4e4f 5245 4341 5345 290a 0a20  e.IGNORECASE).. 
+00031910: 2064 6566 2061 7574 686f 7269 7a65 5f70   def authorize_p
+00031920: 726f 6a65 6374 5f74 6f5f 7573 655f 7465  roject_to_use_te
+00031930: 7374 696e 675f 6b6d 735f 6b65 7928 0a20  sting_kms_key(. 
+00031940: 2020 2020 2073 656c 662c 206b 6579 5f6e       self, key_n
+00031950: 616d 653d 7465 7374 6361 7365 2e4b 6d73  ame=testcase.Kms
+00031960: 5465 7374 696e 6752 6573 6f75 7263 6573  TestingResources
+00031970: 2e43 4f4e 5354 414e 545f 4b45 595f 4e41  .CONSTANT_KEY_NA
+00031980: 4d45 293a 0a20 2020 2023 204d 616b 6520  ME):.    # Make 
+00031990: 7375 7265 206f 7572 206b 6579 5269 6e67  sure our keyRing
+000319a0: 2061 6e64 2063 7279 7074 6f4b 6579 2065   and cryptoKey e
+000319b0: 7869 7374 2e0a 2020 2020 6b65 7972 696e  xist..    keyrin
+000319c0: 675f 6671 6e20 3d20 7365 6c66 2e6b 6d73  g_fqn = self.kms
+000319d0: 5f61 7069 2e43 7265 6174 654b 6579 5269  _api.CreateKeyRi
+000319e0: 6e67 280a 2020 2020 2020 2020 506f 7075  ng(.        Popu
+000319f0: 6c61 7465 5072 6f6a 6563 7449 6428 4e6f  lateProjectId(No
+00031a00: 6e65 292c 0a20 2020 2020 2020 2074 6573  ne),.        tes
+00031a10: 7463 6173 652e 4b6d 7354 6573 7469 6e67  tcase.KmsTesting
+00031a20: 5265 736f 7572 6365 732e 4b45 5952 494e  Resources.KEYRIN
+00031a30: 475f 4e41 4d45 2c0a 2020 2020 2020 2020  G_NAME,.        
+00031a40: 6c6f 6361 7469 6f6e 3d74 6573 7463 6173  location=testcas
+00031a50: 652e 4b6d 7354 6573 7469 6e67 5265 736f  e.KmsTestingReso
+00031a60: 7572 6365 732e 4b45 5952 494e 475f 4c4f  urces.KEYRING_LO
+00031a70: 4341 5449 4f4e 290a 2020 2020 6b65 795f  CATION).    key_
+00031a80: 6671 6e20 3d20 7365 6c66 2e6b 6d73 5f61  fqn = self.kms_a
+00031a90: 7069 2e43 7265 6174 6543 7279 7074 6f4b  pi.CreateCryptoK
+00031aa0: 6579 286b 6579 7269 6e67 5f66 716e 2c20  ey(keyring_fqn, 
+00031ab0: 6b65 795f 6e61 6d65 290a 2020 2020 2320  key_name).    # 
+00031ac0: 4d61 6b65 2073 7572 6520 7468 6174 2074  Make sure that t
+00031ad0: 6865 2073 6572 7669 6365 2061 6363 6f75  he service accou
+00031ae0: 6e74 2066 6f72 206f 7572 2064 6566 6175  nt for our defau
+00031af0: 6c74 2070 726f 6a65 6374 2069 7320 6175  lt project is au
+00031b00: 7468 6f72 697a 6564 0a20 2020 2023 2074  thorized.    # t
+00031b10: 6f20 7573 6520 6f75 7220 7465 7374 204b  o use our test K
+00031b20: 4d53 206b 6579 2e0a 2020 2020 7365 6c66  MS key..    self
+00031b30: 2e52 756e 4773 5574 696c 285b 276b 6d73  .RunGsUtil(['kms
+00031b40: 272c 2027 6175 7468 6f72 697a 6527 2c20  ', 'authorize', 
+00031b50: 272d 6b27 2c20 6b65 795f 6671 6e5d 2c20  '-k', key_fqn], 
+00031b60: 666f 7263 655f 6773 7574 696c 3d54 7275  force_gsutil=Tru
+00031b70: 6529 0a20 2020 2072 6574 7572 6e20 6b65  e).    return ke
+00031b80: 795f 6671 6e0a 0a20 2040 536b 6970 466f  y_fqn..  @SkipFo
+00031b90: 7253 3328 2754 6573 7420 7573 6573 2067  rS3('Test uses g
+00031ba0: 732d 7370 6563 6966 6963 204b 4d53 2065  s-specific KMS e
+00031bb0: 6e63 7279 7074 696f 6e27 290a 2020 6465  ncryption').  de
+00031bc0: 6620 7465 7374 5f6b 6d73 5f6b 6579 5f63  f test_kms_key_c
+00031bd0: 6f72 7265 6374 6c79 5f61 7070 6c69 6564  orrectly_applied
+00031be0: 5f74 6f5f 6473 745f 6f62 6a5f 6672 6f6d  _to_dst_obj_from
+00031bf0: 5f73 7263 5f77 6974 685f 6e6f 5f6b 6579  _src_with_no_key
+00031c00: 2873 656c 6629 3a0a 2020 2020 6275 636b  (self):.    buck
+00031c10: 6574 5f75 7269 203d 2073 656c 662e 4372  et_uri = self.Cr
+00031c20: 6561 7465 4275 636b 6574 2829 0a20 2020  eateBucket().   
+00031c30: 206f 626a 315f 6e61 6d65 203d 2027 666f   obj1_name = 'fo
+00031c40: 6f27 0a20 2020 206f 626a 325f 6e61 6d65  o'.    obj2_name
+00031c50: 203d 2027 6261 7227 0a20 2020 206b 6579   = 'bar'.    key
+00031c60: 5f66 716e 203d 2073 656c 662e 6175 7468  _fqn = self.auth
+00031c70: 6f72 697a 655f 7072 6f6a 6563 745f 746f  orize_project_to
+00031c80: 5f75 7365 5f74 6573 7469 6e67 5f6b 6d73  _use_testing_kms
+00031c90: 5f6b 6579 2829 0a0a 2020 2020 2320 4372  _key()..    # Cr
+00031ca0: 6561 7465 2074 6865 2075 6e65 6e63 7279  eate the unencry
+00031cb0: 7074 6564 206f 626a 6563 742c 2074 6865  pted object, the
+00031cc0: 6e20 636f 7079 2069 742c 2073 7065 6369  n copy it, speci
+00031cd0: 6679 696e 6720 6120 4b4d 5320 6b65 7920  fying a KMS key 
+00031ce0: 666f 7220 7468 650a 2020 2020 2320 6e65  for the.    # ne
+00031cf0: 7720 6f62 6a65 6374 2e0a 2020 2020 6f62  w object..    ob
+00031d00: 6a5f 7572 6920 3d20 7365 6c66 2e43 7265  j_uri = self.Cre
+00031d10: 6174 654f 626a 6563 7428 6275 636b 6574  ateObject(bucket
+00031d20: 5f75 7269 3d62 7563 6b65 745f 7572 692c  _uri=bucket_uri,
+00031d30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00031d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00031d50: 206f 626a 6563 745f 6e61 6d65 3d6f 626a   object_name=obj
+00031d60: 315f 6e61 6d65 2c0a 2020 2020 2020 2020  1_name,.        
+00031d70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00031d80: 2020 2020 2020 2020 636f 6e74 656e 7473          contents
+00031d90: 3d62 2766 6f6f 2729 0a20 2020 2077 6974  =b'foo').    wit
+00031da0: 6820 5365 7442 6f74 6f43 6f6e 6669 6746  h SetBotoConfigF
+00031db0: 6f72 5465 7374 285b 2827 4753 5574 696c  orTest([('GSUtil
+00031dc0: 272c 2027 656e 6372 7970 7469 6f6e 5f6b  ', 'encryption_k
+00031dd0: 6579 272c 206b 6579 5f66 716e 295d 293a  ey', key_fqn)]):
+00031de0: 0a20 2020 2020 2073 656c 662e 5275 6e47  .      self.RunG
+00031df0: 7355 7469 6c28 0a20 2020 2020 2020 2020  sUtil(.         
+00031e00: 205b 2763 7027 2c20 7375 7269 286f 626a   ['cp', suri(obj
+00031e10: 5f75 7269 292c 0a20 2020 2020 2020 2020  _uri),.         
+00031e20: 2020 2725 732f 2573 2720 2520 2873 7572    '%s/%s' % (sur
+00031e30: 6928 6275 636b 6574 5f75 7269 292c 206f  i(bucket_uri), o
+00031e40: 626a 325f 6e61 6d65 295d 290a 0a20 2020  bj2_name)])..   
+00031e50: 2023 204d 616b 6520 7375 7265 2074 6865   # Make sure the
+00031e60: 206e 6577 206f 626a 6563 7420 6973 2065   new object is e
+00031e70: 6e63 7279 7074 6564 2077 6974 6820 7468  ncrypted with th
+00031e80: 6520 7370 6563 6966 6965 6420 4b4d 5320  e specified KMS 
+00031e90: 6b65 792e 0a20 2020 2077 6974 6820 5365  key..    with Se
+00031ea0: 7442 6f74 6f43 6f6e 6669 6746 6f72 5465  tBotoConfigForTe
+00031eb0: 7374 285b 2827 4753 5574 696c 272c 2027  st([('GSUtil', '
+00031ec0: 7072 6566 6572 5f61 7069 272c 2027 6a73  prefer_api', 'js
+00031ed0: 6f6e 2729 5d29 3a0a 2020 2020 2020 7365  on')]):.      se
+00031ee0: 6c66 2e41 7373 6572 744f 626a 6563 7455  lf.AssertObjectU
+00031ef0: 7365 7343 4d45 4b28 2725 732f 2573 2720  sesCMEK('%s/%s' 
+00031f00: 2520 2873 7572 6928 6275 636b 6574 5f75  % (suri(bucket_u
+00031f10: 7269 292c 206f 626a 325f 6e61 6d65 292c  ri), obj2_name),
+00031f20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00031f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00031f40: 206b 6579 5f66 716e 290a 0a20 2040 536b   key_fqn)..  @Sk
+00031f50: 6970 466f 7253 3328 2754 6573 7420 7573  ipForS3('Test us
+00031f60: 6573 2067 732d 7370 6563 6966 6963 204b  es gs-specific K
+00031f70: 4d53 2065 6e63 7279 7074 696f 6e27 290a  MS encryption').
+00031f80: 2020 6465 6620 7465 7374 5f6b 6d73 5f6b    def test_kms_k
+00031f90: 6579 5f63 6f72 7265 6374 6c79 5f61 7070  ey_correctly_app
+00031fa0: 6c69 6564 5f74 6f5f 6473 745f 6f62 6a5f  lied_to_dst_obj_
+00031fb0: 6672 6f6d 5f6c 6f63 616c 5f66 696c 6528  from_local_file(
+00031fc0: 7365 6c66 293a 0a20 2020 2062 7563 6b65  self):.    bucke
+00031fd0: 745f 7572 6920 3d20 7365 6c66 2e43 7265  t_uri = self.Cre
+00031fe0: 6174 6542 7563 6b65 7428 290a 2020 2020  ateBucket().    
+00031ff0: 6670 6174 6820 3d20 7365 6c66 2e43 7265  fpath = self.Cre
+00032000: 6174 6554 656d 7046 696c 6528 636f 6e74  ateTempFile(cont
+00032010: 656e 7473 3d62 2761 6263 6427 290a 2020  ents=b'abcd').  
+00032020: 2020 6f62 6a5f 6e61 6d65 203d 2027 666f    obj_name = 'fo
+00032030: 6f27 0a20 2020 206f 626a 5f73 7572 6920  o'.    obj_suri 
+00032040: 3d20 7375 7269 2862 7563 6b65 745f 7572  = suri(bucket_ur
+00032050: 6929 202b 2027 2f27 202b 206f 626a 5f6e  i) + '/' + obj_n
+00032060: 616d 650a 2020 2020 6b65 795f 6671 6e20  ame.    key_fqn 
+00032070: 3d20 7365 6c66 2e61 7574 686f 7269 7a65  = self.authorize
+00032080: 5f70 726f 6a65 6374 5f74 6f5f 7573 655f  _project_to_use_
+00032090: 7465 7374 696e 675f 6b6d 735f 6b65 7928  testing_kms_key(
+000320a0: 290a 0a20 2020 2077 6974 6820 5365 7442  )..    with SetB
+000320b0: 6f74 6f43 6f6e 6669 6746 6f72 5465 7374  otoConfigForTest
+000320c0: 285b 2827 4753 5574 696c 272c 2027 656e  ([('GSUtil', 'en
+000320d0: 6372 7970 7469 6f6e 5f6b 6579 272c 206b  cryption_key', k
+000320e0: 6579 5f66 716e 295d 293a 0a20 2020 2020  ey_fqn)]):.     
+000320f0: 2073 656c 662e 5275 6e47 7355 7469 6c28   self.RunGsUtil(
+00032100: 5b27 6370 272c 2066 7061 7468 2c20 6f62  ['cp', fpath, ob
+00032110: 6a5f 7375 7269 5d29 0a0a 2020 2020 7769  j_suri])..    wi
+00032120: 7468 2053 6574 426f 746f 436f 6e66 6967  th SetBotoConfig
+00032130: 466f 7254 6573 7428 5b28 2747 5355 7469  ForTest([('GSUti
+00032140: 6c27 2c20 2770 7265 6665 725f 6170 6927  l', 'prefer_api'
+00032150: 2c20 276a 736f 6e27 295d 293a 0a20 2020  , 'json')]):.   
+00032160: 2020 2073 656c 662e 4173 7365 7274 4f62     self.AssertOb
+00032170: 6a65 6374 5573 6573 434d 454b 286f 626a  jectUsesCMEK(obj
+00032180: 5f73 7572 692c 206b 6579 5f66 716e 290a  _suri, key_fqn).
+00032190: 0a20 2040 536b 6970 466f 7253 3328 2754  .  @SkipForS3('T
+000321a0: 6573 7420 7573 6573 2067 732d 7370 6563  est uses gs-spec
+000321b0: 6966 6963 204b 4d53 2065 6e63 7279 7074  ific KMS encrypt
+000321c0: 696f 6e27 290a 2020 6465 6620 7465 7374  ion').  def test
+000321d0: 5f6b 6d73 5f6b 6579 5f77 6f72 6b73 5f77  _kms_key_works_w
+000321e0: 6974 685f 7265 7375 6d61 626c 655f 7570  ith_resumable_up
+000321f0: 6c6f 6164 2873 656c 6629 3a0a 2020 2020  load(self):.    
+00032200: 7265 7375 6d61 626c 655f 7468 7265 7368  resumable_thresh
+00032210: 6f6c 6420 3d20 3130 3234 202a 2031 3032  old = 1024 * 102
+00032220: 3420 2023 2031 4d0a 2020 2020 6275 636b  4  # 1M.    buck
+00032230: 6574 5f75 7269 203d 2073 656c 662e 4372  et_uri = self.Cr
+00032240: 6561 7465 4275 636b 6574 2829 0a20 2020  eateBucket().   
+00032250: 2066 7061 7468 203d 2073 656c 662e 4372   fpath = self.Cr
+00032260: 6561 7465 5465 6d70 4669 6c65 2863 6f6e  eateTempFile(con
+00032270: 7465 6e74 733d 6227 6127 202a 2072 6573  tents=b'a' * res
+00032280: 756d 6162 6c65 5f74 6872 6573 686f 6c64  umable_threshold
+00032290: 290a 2020 2020 6f62 6a5f 6e61 6d65 203d  ).    obj_name =
+000322a0: 2027 666f 6f27 0a20 2020 206f 626a 5f73   'foo'.    obj_s
+000322b0: 7572 6920 3d20 7375 7269 2862 7563 6b65  uri = suri(bucke
+000322c0: 745f 7572 6929 202b 2027 2f27 202b 206f  t_uri) + '/' + o
+000322d0: 626a 5f6e 616d 650a 2020 2020 6b65 795f  bj_name.    key_
+000322e0: 6671 6e20 3d20 7365 6c66 2e61 7574 686f  fqn = self.autho
+000322f0: 7269 7a65 5f70 726f 6a65 6374 5f74 6f5f  rize_project_to_
+00032300: 7573 655f 7465 7374 696e 675f 6b6d 735f  use_testing_kms_
+00032310: 6b65 7928 290a 0a20 2020 2077 6974 6820  key()..    with 
+00032320: 5365 7442 6f74 6f43 6f6e 6669 6746 6f72  SetBotoConfigFor
+00032330: 5465 7374 285b 2827 4753 5574 696c 272c  Test([('GSUtil',
+00032340: 2027 656e 6372 7970 7469 6f6e 5f6b 6579   'encryption_key
+00032350: 272c 206b 6579 5f66 716e 292c 0a20 2020  ', key_fqn),.   
+00032360: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00032370: 2020 2020 2020 2020 2020 2020 2827 4753              ('GS
+00032380: 5574 696c 272c 2027 7265 7375 6d61 626c  Util', 'resumabl
+00032390: 655f 7468 7265 7368 6f6c 6427 2c0a 2020  e_threshold',.  
+000323a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000323b0: 2020 2020 2020 2020 2020 2020 2020 7374                st
+000323c0: 7228 7265 7375 6d61 626c 655f 7468 7265  r(resumable_thre
+000323d0: 7368 6f6c 6429 295d 293a 0a20 2020 2020  shold))]):.     
+000323e0: 2073 656c 662e 5275 6e47 7355 7469 6c28   self.RunGsUtil(
+000323f0: 5b27 6370 272c 2066 7061 7468 2c20 6f62  ['cp', fpath, ob
+00032400: 6a5f 7375 7269 5d29 0a0a 2020 2020 7769  j_suri])..    wi
+00032410: 7468 2053 6574 426f 746f 436f 6e66 6967  th SetBotoConfig
+00032420: 466f 7254 6573 7428 5b28 2747 5355 7469  ForTest([('GSUti
+00032430: 6c27 2c20 2770 7265 6665 725f 6170 6927  l', 'prefer_api'
+00032440: 2c20 276a 736f 6e27 295d 293a 0a20 2020  , 'json')]):.   
+00032450: 2020 2073 656c 662e 4173 7365 7274 4f62     self.AssertOb
+00032460: 6a65 6374 5573 6573 434d 454b 286f 626a  jectUsesCMEK(obj
+00032470: 5f73 7572 692c 206b 6579 5f66 716e 290a  _suri, key_fqn).
+00032480: 0a20 2040 536b 6970 466f 7253 3328 2754  .  @SkipForS3('T
+00032490: 6573 7420 7573 6573 2067 732d 7370 6563  est uses gs-spec
+000324a0: 6966 6963 204b 4d53 2065 6e63 7279 7074  ific KMS encrypt
+000324b0: 696f 6e27 290a 2020 6465 6620 7465 7374  ion').  def test
+000324c0: 5f6b 6d73 5f6b 6579 5f63 6f72 7265 6374  _kms_key_correct
+000324d0: 6c79 5f61 7070 6c69 6564 5f74 6f5f 6473  ly_applied_to_ds
+000324e0: 745f 6f62 6a5f 6672 6f6d 5f73 7263 5f77  t_obj_from_src_w
+000324f0: 6974 685f 6469 6666 5f6b 6579 2873 656c  ith_diff_key(sel
+00032500: 6629 3a0a 2020 2020 6275 636b 6574 5f75  f):.    bucket_u
+00032510: 7269 203d 2073 656c 662e 4372 6561 7465  ri = self.Create
+00032520: 4275 636b 6574 2829 0a20 2020 206f 626a  Bucket().    obj
+00032530: 315f 6e61 6d65 203d 2027 666f 6f27 0a20  1_name = 'foo'. 
+00032540: 2020 206f 626a 325f 6e61 6d65 203d 2027     obj2_name = '
+00032550: 6261 7227 0a20 2020 206b 6579 315f 6671  bar'.    key1_fq
+00032560: 6e20 3d20 7365 6c66 2e61 7574 686f 7269  n = self.authori
+00032570: 7a65 5f70 726f 6a65 6374 5f74 6f5f 7573  ze_project_to_us
+00032580: 655f 7465 7374 696e 675f 6b6d 735f 6b65  e_testing_kms_ke
+00032590: 7928 290a 2020 2020 6b65 7932 5f66 716e  y().    key2_fqn
+000325a0: 203d 2073 656c 662e 6175 7468 6f72 697a   = self.authoriz
+000325b0: 655f 7072 6f6a 6563 745f 746f 5f75 7365  e_project_to_use
+000325c0: 5f74 6573 7469 6e67 5f6b 6d73 5f6b 6579  _testing_kms_key
+000325d0: 280a 2020 2020 2020 2020 6b65 795f 6e61  (.        key_na
+000325e0: 6d65 3d74 6573 7463 6173 652e 4b6d 7354  me=testcase.KmsT
+000325f0: 6573 7469 6e67 5265 736f 7572 6365 732e  estingResources.
+00032600: 434f 4e53 5441 4e54 5f4b 4559 5f4e 414d  CONSTANT_KEY_NAM
+00032610: 4532 290a 2020 2020 6f62 6a31 5f73 7572  E2).    obj1_sur
+00032620: 6920 3d20 7375 7269 280a 2020 2020 2020  i = suri(.      
+00032630: 2020 7365 6c66 2e43 7265 6174 654f 626a    self.CreateObj
+00032640: 6563 7428 6275 636b 6574 5f75 7269 3d62  ect(bucket_uri=b
+00032650: 7563 6b65 745f 7572 692c 0a20 2020 2020  ucket_uri,.     
+00032660: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00032670: 2020 2020 206f 626a 6563 745f 6e61 6d65       object_name
+00032680: 3d6f 626a 315f 6e61 6d65 2c0a 2020 2020  =obj1_name,.    
+00032690: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000326a0: 2020 2020 2020 636f 6e74 656e 7473 3d62        contents=b
+000326b0: 2766 6f6f 272c 0a20 2020 2020 2020 2020  'foo',.         
+000326c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000326d0: 206b 6d73 5f6b 6579 5f6e 616d 653d 6b65   kms_key_name=ke
+000326e0: 7931 5f66 716e 2929 0a0a 2020 2020 2320  y1_fqn))..    # 
+000326f0: 436f 7079 2074 6865 206f 626a 6563 7420  Copy the object 
+00032700: 746f 2074 6865 2073 616d 6520 6275 636b  to the same buck
+00032710: 6574 2c20 7370 6563 6966 7969 6e67 2061  et, specifying a
+00032720: 2064 6966 6665 7265 6e74 206b 6579 2074   different key t
+00032730: 6f20 6265 2075 7365 642e 0a20 2020 206f  o be used..    o
+00032740: 626a 325f 7375 7269 203d 2027 2573 2f25  bj2_suri = '%s/%
+00032750: 7327 2025 2028 7375 7269 2862 7563 6b65  s' % (suri(bucke
+00032760: 745f 7572 6929 2c20 6f62 6a32 5f6e 616d  t_uri), obj2_nam
+00032770: 6529 0a20 2020 2077 6974 6820 5365 7442  e).    with SetB
+00032780: 6f74 6f43 6f6e 6669 6746 6f72 5465 7374  otoConfigForTest
+00032790: 285b 2827 4753 5574 696c 272c 2027 656e  ([('GSUtil', 'en
+000327a0: 6372 7970 7469 6f6e 5f6b 6579 272c 206b  cryption_key', k
+000327b0: 6579 325f 6671 6e29 5d29 3a0a 2020 2020  ey2_fqn)]):.    
+000327c0: 2020 7365 6c66 2e52 756e 4773 5574 696c    self.RunGsUtil
+000327d0: 285b 2763 7027 2c20 6f62 6a31 5f73 7572  (['cp', obj1_sur
+000327e0: 692c 206f 626a 325f 7375 7269 5d29 0a0a  i, obj2_suri])..
+000327f0: 2020 2020 2320 456e 7375 7265 2074 6865      # Ensure the
+00032800: 206e 6577 206f 626a 6563 7420 6861 7320   new object has 
+00032810: 7468 6520 6469 6666 6572 656e 7420 6b65  the different ke
+00032820: 792e 0a20 2020 2077 6974 6820 5365 7442  y..    with SetB
+00032830: 6f74 6f43 6f6e 6669 6746 6f72 5465 7374  otoConfigForTest
+00032840: 285b 2827 4753 5574 696c 272c 2027 7072  ([('GSUtil', 'pr
+00032850: 6566 6572 5f61 7069 272c 2027 6a73 6f6e  efer_api', 'json
+00032860: 2729 5d29 3a0a 2020 2020 2020 7365 6c66  ')]):.      self
+00032870: 2e41 7373 6572 744f 626a 6563 7455 7365  .AssertObjectUse
+00032880: 7343 4d45 4b28 6f62 6a32 5f73 7572 692c  sCMEK(obj2_suri,
+00032890: 206b 6579 325f 6671 6e29 0a0a 2020 4053   key2_fqn)..  @S
+000328a0: 6b69 7046 6f72 5333 2827 5465 7374 2075  kipForS3('Test u
+000328b0: 7365 7320 6773 2d73 7065 6369 6669 6320  ses gs-specific 
+000328c0: 4b4d 5320 656e 6372 7970 7469 6f6e 2729  KMS encryption')
+000328d0: 0a20 2040 536b 6970 466f 7258 4d4c 2827  .  @SkipForXML('
+000328e0: 436f 7079 696e 6720 4b4d 532d 656e 6372  Copying KMS-encr
+000328f0: 7970 7465 6420 6f62 6a65 6374 7320 7072  ypted objects pr
+00032900: 6f68 6962 6974 6564 2077 6974 6820 584d  ohibited with XM
+00032910: 4c20 4150 4927 290a 2020 6465 6620 7465  L API').  def te
+00032920: 7374 5f6b 6d73 5f6b 6579 5f6e 6f74 5f61  st_kms_key_not_a
+00032930: 7070 6c69 6564 5f74 6f5f 6e6f 6e6b 6d73  pplied_to_nonkms
+00032940: 5f64 7374 5f6f 626a 5f66 726f 6d5f 7372  _dst_obj_from_sr
+00032950: 635f 7769 7468 5f6b 6d73 5f6b 6579 2873  c_with_kms_key(s
+00032960: 656c 6629 3a0a 2020 2020 6275 636b 6574  elf):.    bucket
+00032970: 5f75 7269 203d 2073 656c 662e 4372 6561  _uri = self.Crea
+00032980: 7465 4275 636b 6574 2829 0a20 2020 206f  teBucket().    o
+00032990: 626a 315f 6e61 6d65 203d 2027 666f 6f27  bj1_name = 'foo'
+000329a0: 0a20 2020 206f 626a 325f 6e61 6d65 203d  .    obj2_name =
+000329b0: 2027 6261 7227 0a20 2020 206b 6579 315f   'bar'.    key1_
+000329c0: 6671 6e20 3d20 7365 6c66 2e61 7574 686f  fqn = self.autho
+000329d0: 7269 7a65 5f70 726f 6a65 6374 5f74 6f5f  rize_project_to_
+000329e0: 7573 655f 7465 7374 696e 675f 6b6d 735f  use_testing_kms_
+000329f0: 6b65 7928 290a 2020 2020 6f62 6a31 5f73  key().    obj1_s
+00032a00: 7572 6920 3d20 7375 7269 280a 2020 2020  uri = suri(.    
+00032a10: 2020 2020 7365 6c66 2e43 7265 6174 654f      self.CreateO
+00032a20: 626a 6563 7428 6275 636b 6574 5f75 7269  bject(bucket_uri
+00032a30: 3d62 7563 6b65 745f 7572 692c 0a20 2020  =bucket_uri,.   
+00032a40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00032a50: 2020 2020 2020 206f 626a 6563 745f 6e61         object_na
+00032a60: 6d65 3d6f 626a 315f 6e61 6d65 2c0a 2020  me=obj1_name,.  
+00032a70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00032a80: 2020 2020 2020 2020 636f 6e74 656e 7473          contents
+00032a90: 3d62 2766 6f6f 272c 0a20 2020 2020 2020  =b'foo',.       
+00032aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00032ab0: 2020 206b 6d73 5f6b 6579 5f6e 616d 653d     kms_key_name=
+00032ac0: 6b65 7931 5f66 716e 2929 0a0a 2020 2020  key1_fqn))..    
+00032ad0: 2320 436f 7079 2074 6865 206f 626a 6563  # Copy the objec
+00032ae0: 7420 746f 2074 6865 2073 616d 6520 6275  t to the same bu
+00032af0: 636b 6574 2c20 6e6f 7420 7370 6563 6966  cket, not specif
+00032b00: 7969 6e67 2061 6e79 204b 4d53 206b 6579  ying any KMS key
+00032b10: 2e0a 2020 2020 6f62 6a32 5f73 7572 6920  ..    obj2_suri 
+00032b20: 3d20 2725 732f 2573 2720 2520 2873 7572  = '%s/%s' % (sur
+00032b30: 6928 6275 636b 6574 5f75 7269 292c 206f  i(bucket_uri), o
+00032b40: 626a 325f 6e61 6d65 290a 2020 2020 7365  bj2_name).    se
+00032b50: 6c66 2e52 756e 4773 5574 696c 285b 2763  lf.RunGsUtil(['c
+00032b60: 7027 2c20 6f62 6a31 5f73 7572 692c 206f  p', obj1_suri, o
+00032b70: 626a 325f 7375 7269 5d29 0a0a 2020 2020  bj2_suri])..    
+00032b80: 2320 456e 7375 7265 2074 6865 206e 6577  # Ensure the new
+00032b90: 206f 626a 6563 7420 6861 7320 6e6f 204b   object has no K
+00032ba0: 4d53 206b 6579 2e0a 2020 2020 7769 7468  MS key..    with
+00032bb0: 2053 6574 426f 746f 436f 6e66 6967 466f   SetBotoConfigFo
+00032bc0: 7254 6573 7428 5b28 2747 5355 7469 6c27  rTest([('GSUtil'
+00032bd0: 2c20 2770 7265 6665 725f 6170 6927 2c20  , 'prefer_api', 
+00032be0: 276a 736f 6e27 295d 293a 0a20 2020 2020  'json')]):.     
+00032bf0: 2073 656c 662e 4173 7365 7274 4f62 6a65   self.AssertObje
+00032c00: 6374 556e 656e 6372 7970 7465 6428 6f62  ctUnencrypted(ob
+00032c10: 6a32 5f73 7572 6929 0a0a 2020 4075 6e69  j2_suri)..  @uni
+00032c20: 7474 6573 742e 736b 6970 556e 6c65 7373  ttest.skipUnless
+00032c30: 280a 2020 2020 2020 4953 5f57 494e 444f  (.      IS_WINDO
+00032c40: 5753 2c0a 2020 2020 2020 274f 6e6c 7920  WS,.      'Only 
+00032c50: 5769 6e64 6f77 7320 7061 7468 7320 6e65  Windows paths ne
+00032c60: 6564 2074 6f20 6265 206e 6f72 6d61 6c69  ed to be normali
+00032c70: 7a65 6420 746f 2075 7365 2062 6163 6b73  zed to use backs
+00032c80: 6c61 7368 6573 2069 6e73 7465 6164 206f  lashes instead o
+00032c90: 6620 270a 2020 2020 2020 2766 6f72 7761  f '.      'forwa
+00032ca0: 7264 2073 6c61 7368 6573 2e27 290a 2020  rd slashes.').  
+00032cb0: 6465 6620 7465 7374 5f77 696e 646f 7773  def test_windows
+00032cc0: 5f70 6174 685f 7769 7468 5f62 6163 6b5f  _path_with_back_
+00032cd0: 616e 645f 666f 7277 6172 645f 736c 6173  and_forward_slas
+00032ce0: 685f 6973 5f6e 6f72 6d61 6c69 7a65 6428  h_is_normalized(
+00032cf0: 7365 6c66 293a 0a20 2020 2023 2050 7269  self):.    # Pri
+00032d00: 6f72 2074 6f20 7468 6973 2074 6573 7420  or to this test 
+00032d10: 616e 6420 6974 7320 636f 7272 6573 706f  and its correspo
+00032d20: 6e64 696e 6720 6669 782c 2072 756e 6e69  nding fix, runni
+00032d30: 6e67 0a20 2020 2023 2060 6773 7574 696c  ng.    # `gsutil
+00032d40: 2063 7020 6469 722f 2e2f 6669 6c65 2067   cp dir/./file g
+00032d50: 733a 2f2f 6275 636b 6574 6020 776f 756c  s://bucket` woul
+00032d60: 6420 7265 7375 6c74 2069 6e20 616e 206f  d result in an o
+00032d70: 626a 6563 7420 7768 6f73 6520 6e61 6d65  bject whose name
+00032d80: 0a20 2020 2023 2077 6173 2022 6469 722f  .    # was "dir/
+00032d90: 2e2f 6669 6c65 222c 2072 6174 6865 7220  ./file", rather 
+00032da0: 7468 616e 206a 7573 7420 2266 696c 6522  than just "file"
+00032db0: 2c20 6173 2057 696e 646f 7773 2074 7269  , as Windows tri
+00032dc0: 6564 2074 6f20 7370 6c69 7420 6f6e 0a20  ed to split on. 
+00032dd0: 2020 2023 2074 6865 2070 6174 6820 636f     # the path co
+00032de0: 6d70 6f6e 656e 7420 7365 7061 7261 746f  mponent separato
+00032df0: 7220 225c 2220 696e 7465 6164 206f 6620  r "\" intead of 
+00032e00: 222f 222e 0a20 2020 2074 6d70 5f64 6972  "/"..    tmp_dir
+00032e10: 203d 2073 656c 662e 4372 6561 7465 5465   = self.CreateTe
+00032e20: 6d70 4469 7228 290a 2020 2020 7365 6c66  mpDir().    self
+00032e30: 2e43 7265 6174 6554 656d 7046 696c 6528  .CreateTempFile(
+00032e40: 746d 7064 6972 3d74 6d70 5f64 6972 2c20  tmpdir=tmp_dir, 
+00032e50: 6669 6c65 5f6e 616d 653d 276f 626a 3127  file_name='obj1'
+00032e60: 2c20 636f 6e74 656e 7473 3d62 2766 6f6f  , contents=b'foo
+00032e70: 2729 0a20 2020 2062 7563 6b65 745f 7572  ').    bucket_ur
+00032e80: 6920 3d20 7365 6c66 2e43 7265 6174 6542  i = self.CreateB
+00032e90: 7563 6b65 7428 290a 2020 2020 7365 6c66  ucket().    self
+00032ea0: 2e52 756e 4773 5574 696c 285b 2763 7027  .RunGsUtil(['cp'
+00032eb0: 2c20 2725 735c 5c2e 2f6f 626a 3127 2025  , '%s\\./obj1' %
+00032ec0: 2074 6d70 5f64 6972 2c20 7375 7269 2862   tmp_dir, suri(b
+00032ed0: 7563 6b65 745f 7572 6929 5d29 0a20 2020  ucket_uri)]).   
+00032ee0: 2023 2049 6620 7468 6520 6465 7374 696e   # If the destin
+00032ef0: 6174 696f 6e20 7061 7468 2077 6173 206e  ation path was n
+00032f00: 6f74 2063 7265 6174 6564 2063 6f72 7265  ot created corre
+00032f10: 6374 6c79 2c20 7468 6973 2073 7461 7420  ctly, this stat 
+00032f20: 6361 6c6c 2073 686f 756c 640a 2020 2020  call should.    
+00032f30: 2320 6661 696c 2077 6974 6820 6120 6e6f  # fail with a no
+00032f40: 6e2d 7a65 726f 2065 7869 7420 636f 6465  n-zero exit code
+00032f50: 2062 6563 6175 7365 2074 6865 2073 7065   because the spe
+00032f60: 6369 6669 6564 206f 626a 6563 7420 776f  cified object wo
+00032f70: 6e27 7420 6578 6973 742e 0a20 2020 2073  n't exist..    s
+00032f80: 656c 662e 5275 6e47 7355 7469 6c28 5b27  elf.RunGsUtil(['
+00032f90: 7374 6174 272c 2027 2573 2f6f 626a 3127  stat', '%s/obj1'
+00032fa0: 2025 2073 7572 6928 6275 636b 6574 5f75   % suri(bucket_u
+00032fb0: 7269 295d 290a 0a20 2064 6566 2074 6573  ri)])..  def tes
+00032fc0: 745f 6370 5f6d 696e 7573 5f6d 5f73 7472  t_cp_minus_m_str
+00032fd0: 6561 6d69 6e67 5f75 706c 6f61 6428 7365  eaming_upload(se
+00032fe0: 6c66 293a 0a20 2020 2022 2222 5465 7374  lf):.    """Test
+00032ff0: 7320 7468 6174 2063 7020 2d6d 202d 2061  s that cp -m - a
+00033000: 6e79 7468 696e 6720 6973 2064 6973 616c  nything is disal
+00033010: 6c6f 7765 642e 2222 220a 2020 2020 7374  lowed.""".    st
+00033020: 6465 7272 203d 2073 656c 662e 5275 6e47  derr = self.RunG
+00033030: 7355 7469 6c28 5b27 2d6d 272c 2027 6370  sUtil(['-m', 'cp
+00033040: 272c 2027 2d27 2c20 2766 696c 6527 5d2c  ', '-', 'file'],
+00033050: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00033060: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+00033070: 7572 6e5f 7374 6465 7272 3d54 7275 652c  urn_stderr=True,
+00033080: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00033090: 2020 2020 2020 2020 2020 2020 2065 7870               exp
+000330a0: 6563 7465 645f 7374 6174 7573 3d31 290a  ected_status=1).
+000330b0: 2020 2020 7365 6c66 2e61 7373 6572 7449      self.assertI
+000330c0: 6e28 0a20 2020 2020 2020 2027 436f 6d6d  n(.        'Comm
+000330d0: 616e 6445 7863 6570 7469 6f6e 3a20 4361  andException: Ca
+000330e0: 6e6e 6f74 2075 706c 6f61 6420 6672 6f6d  nnot upload from
+000330f0: 2061 2073 7472 6561 6d20 7768 656e 2075   a stream when u
+00033100: 7369 6e67 2067 7375 7469 6c20 2d6d 272c  sing gsutil -m',
+00033110: 0a20 2020 2020 2020 2073 7464 6572 7229  .        stderr)
+00033120: 0a0a 2020 4053 6571 7565 6e74 6961 6c41  ..  @SequentialA
+00033130: 6e64 5061 7261 6c6c 656c 5472 616e 7366  ndParallelTransf
+00033140: 6572 0a20 2064 6566 2074 6573 745f 6370  er.  def test_cp
+00033150: 5f6f 7665 7277 7269 7465 735f 6578 6973  _overwrites_exis
+00033160: 7469 6e67 5f64 6573 7469 6e61 7469 6f6e  ting_destination
+00033170: 2873 656c 6629 3a0a 2020 2020 6b65 795f  (self):.    key_
+00033180: 7572 6920 3d20 7365 6c66 2e43 7265 6174  uri = self.Creat
+00033190: 654f 626a 6563 7428 636f 6e74 656e 7473  eObject(contents
+000331a0: 3d62 2766 6f6f 2729 0a20 2020 2066 7061  =b'foo').    fpa
+000331b0: 7468 203d 2073 656c 662e 4372 6561 7465  th = self.Create
+000331c0: 5465 6d70 4669 6c65 2863 6f6e 7465 6e74  TempFile(content
+000331d0: 733d 6227 6261 7227 290a 2020 2020 7374  s=b'bar').    st
+000331e0: 6465 7272 203d 2073 656c 662e 5275 6e47  derr = self.RunG
+000331f0: 7355 7469 6c28 5b27 6370 272c 2073 7572  sUtil(['cp', sur
+00033200: 6928 6b65 795f 7572 6929 2c20 6670 6174  i(key_uri), fpat
+00033210: 685d 2c20 7265 7475 726e 5f73 7464 6572  h], return_stder
+00033220: 723d 5472 7565 290a 2020 2020 7769 7468  r=True).    with
+00033230: 206f 7065 6e28 6670 6174 682c 2027 7262   open(fpath, 'rb
+00033240: 2729 2061 7320 663a 0a20 2020 2020 2073  ') as f:.      s
+00033250: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+00033260: 662e 7265 6164 2829 2c20 6227 666f 6f27  f.read(), b'foo'
+00033270: 290a 0a20 2040 5365 7175 656e 7469 616c  )..  @Sequential
+00033280: 416e 6450 6172 616c 6c65 6c54 7261 6e73  AndParallelTrans
+00033290: 6665 720a 2020 6465 6620 7465 7374 5f64  fer.  def test_d
+000332a0: 6f77 6e6c 6f61 6473 5f61 7265 5f72 656c  ownloads_are_rel
+000332b0: 6961 626c 655f 7769 7468 5f6d 6f72 655f  iable_with_more_
+000332c0: 7468 616e 5f6f 6e65 5f67 7375 7469 6c5f  than_one_gsutil_
+000332d0: 696e 7374 616e 6365 2873 656c 6629 3a0a  instance(self):.
+000332e0: 2020 2020 7465 7374 5f66 696c 655f 636f      test_file_co
+000332f0: 756e 7420 3d20 3130 0a20 2020 2074 656d  unt = 10.    tem
+00033300: 706f 7261 7279 5f64 6972 6563 746f 7279  porary_directory
+00033310: 203d 2073 656c 662e 4372 6561 7465 5465   = self.CreateTe
+00033320: 6d70 4469 7228 290a 2020 2020 6275 636b  mpDir().    buck
+00033330: 6574 5f75 7269 203d 2073 656c 662e 4372  et_uri = self.Cr
+00033340: 6561 7465 4275 636b 6574 2874 6573 745f  eateBucket(test_
+00033350: 6f62 6a65 6374 733d 7465 7374 5f66 696c  objects=test_fil
+00033360: 655f 636f 756e 7429 0a0a 2020 2020 6370  e_count)..    cp
+00033370: 5f61 7267 7320 3d20 5b27 6370 272c 2073  _args = ['cp', s
+00033380: 7572 6928 6275 636b 6574 5f75 7269 2c20  uri(bucket_uri, 
+00033390: 272a 2729 2c20 7465 6d70 6f72 6172 795f  '*'), temporary_
+000333a0: 6469 7265 6374 6f72 795d 0a20 2020 2074  directory].    t
+000333b0: 6872 6561 6473 203d 205b 5d0a 2020 2020  hreads = [].    
+000333c0: 666f 7220 5f20 696e 2072 616e 6765 2832  for _ in range(2
+000333d0: 293a 0a20 2020 2020 2074 6872 6561 6420  ):.      thread 
+000333e0: 3d20 7468 7265 6164 696e 672e 5468 7265  = threading.Thre
+000333f0: 6164 2874 6172 6765 743d 7365 6c66 2e52  ad(target=self.R
+00033400: 756e 4773 5574 696c 2c20 6172 6773 3d5b  unGsUtil, args=[
+00033410: 6370 5f61 7267 735d 290a 2020 2020 2020  cp_args]).      
+00033420: 7468 7265 6164 2e73 7461 7274 2829 0a20  thread.start(). 
+00033430: 2020 2020 2074 6872 6561 6473 2e61 7070       threads.app
+00033440: 656e 6428 7468 7265 6164 290a 2020 2020  end(thread).    
+00033450: 5b74 2e6a 6f69 6e28 2920 666f 7220 7420  [t.join() for t 
+00033460: 696e 2074 6872 6561 6473 5d0a 0a20 2020  in threads]..   
+00033470: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+00033480: 6c28 6c65 6e28 6f73 2e6c 6973 7464 6972  l(len(os.listdir
+00033490: 2874 656d 706f 7261 7279 5f64 6972 6563  (temporary_direc
+000334a0: 746f 7279 2929 2c20 7465 7374 5f66 696c  tory)), test_fil
+000334b0: 655f 636f 756e 7429 0a0a 0a63 6c61 7373  e_count)...class
+000334c0: 2054 6573 7443 7055 6e69 7454 6573 7473   TestCpUnitTests
+000334d0: 2874 6573 7463 6173 652e 4773 5574 696c  (testcase.GsUtil
+000334e0: 556e 6974 5465 7374 4361 7365 293a 0a20  UnitTestCase):. 
+000334f0: 2022 2222 556e 6974 2074 6573 7473 2066   """Unit tests f
+00033500: 6f72 2067 7375 7469 6c20 6370 2e22 2222  or gsutil cp."""
+00033510: 0a0a 2020 6465 6620 7465 7374 446f 776e  ..  def testDown
+00033520: 6c6f 6164 5769 7468 4e6f 4861 7368 4176  loadWithNoHashAv
+00033530: 6169 6c61 626c 6528 7365 6c66 293a 0a20  ailable(self):. 
+00033540: 2020 2022 2222 5465 7374 7320 6120 646f     """Tests a do
+00033550: 776e 6c6f 6164 2077 6974 6820 6e6f 2076  wnload with no v
+00033560: 616c 6964 2073 6572 7665 722d 7375 7070  alid server-supp
+00033570: 6c69 6564 2068 6173 682e 2222 220a 2020  lied hash.""".  
+00033580: 2020 2320 5333 2073 686f 756c 6420 6861    # S3 should ha
+00033590: 7665 2061 2073 7065 6369 616c 206d 6573  ve a special mes
+000335a0: 7361 6765 2066 6f72 206e 6f6e 2d4d 4435  sage for non-MD5
+000335b0: 2065 7461 6773 2e0a 2020 2020 6275 636b   etags..    buck
+000335c0: 6574 5f75 7269 203d 2073 656c 662e 4372  et_uri = self.Cr
+000335d0: 6561 7465 4275 636b 6574 2870 726f 7669  eateBucket(provi
+000335e0: 6465 723d 2773 3327 290a 2020 2020 6f62  der='s3').    ob
+000335f0: 6a65 6374 5f75 7269 203d 2073 656c 662e  ject_uri = self.
+00033600: 4372 6561 7465 4f62 6a65 6374 2862 7563  CreateObject(buc
+00033610: 6b65 745f 7572 693d 6275 636b 6574 5f75  ket_uri=bucket_u
+00033620: 7269 2c20 636f 6e74 656e 7473 3d62 2766  ri, contents=b'f
+00033630: 6f6f 2729 0a20 2020 206f 626a 6563 745f  oo').    object_
+00033640: 7572 692e 6765 745f 6b65 7928 292e 6574  uri.get_key().et
+00033650: 6167 203d 2027 3132 3334 3527 2020 2320  ag = '12345'  # 
+00033660: 4e6f 7420 616e 204d 4435 0a20 2020 2064  Not an MD5.    d
+00033670: 7374 5f64 6972 203d 2073 656c 662e 4372  st_dir = self.Cr
+00033680: 6561 7465 5465 6d70 4469 7228 290a 0a20  eateTempDir().. 
+00033690: 2020 206c 6f67 5f68 616e 646c 6572 203d     log_handler =
+000336a0: 2073 656c 662e 5275 6e43 6f6d 6d61 6e64   self.RunCommand
+000336b0: 2827 6370 272c 205b 7375 7269 286f 626a  ('cp', [suri(obj
+000336c0: 6563 745f 7572 6929 2c20 6473 745f 6469  ect_uri), dst_di
+000336d0: 725d 2c0a 2020 2020 2020 2020 2020 2020  r],.            
+000336e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000336f0: 2020 2020 2020 7265 7475 726e 5f6c 6f67        return_log
+00033700: 5f68 616e 646c 6572 3d54 7275 6529 0a20  _handler=True). 
+00033710: 2020 2077 6172 6e69 6e67 5f6d 6573 7361     warning_messa
+00033720: 6765 7320 3d20 6c6f 675f 6861 6e64 6c65  ges = log_handle
+00033730: 722e 6d65 7373 6167 6573 5b27 7761 726e  r.messages['warn
+00033740: 696e 6727 5d0a 2020 2020 7365 6c66 2e61  ing'].    self.a
+00033750: 7373 6572 7445 7175 616c 7328 322c 206c  ssertEquals(2, l
+00033760: 656e 2877 6172 6e69 6e67 5f6d 6573 7361  en(warning_messa
+00033770: 6765 7329 290a 2020 2020 7365 6c66 2e61  ges)).    self.a
+00033780: 7373 6572 7452 6567 6578 280a 2020 2020  ssertRegex(.    
+00033790: 2020 2020 7761 726e 696e 675f 6d65 7373      warning_mess
+000337a0: 6167 6573 5b30 5d2c 2072 274e 6f6e 2d4d  ages[0], r'Non-M
+000337b0: 4435 2065 7461 6720 5c28 3132 3334 355c  D5 etag \(12345\
+000337c0: 2920 7072 6573 656e 7420 666f 7220 6b65  ) present for ke
+000337d0: 7920 2e2a 2c20 270a 2020 2020 2020 2020  y .*, '.        
+000337e0: 7227 6461 7461 2069 6e74 6567 7269 7479  r'data integrity
+000337f0: 2063 6865 636b 7320 6172 6520 6e6f 7420   checks are not 
+00033800: 706f 7373 6962 6c65 2729 0a20 2020 2073  possible').    s
+00033810: 656c 662e 6173 7365 7274 496e 2827 496e  elf.assertIn('In
+00033820: 7465 6772 6974 7920 6361 6e6e 6f74 2062  tegrity cannot b
+00033830: 6520 6173 7375 7265 6427 2c20 7761 726e  e assured', warn
+00033840: 696e 675f 6d65 7373 6167 6573 5b31 5d29  ing_messages[1])
+00033850: 0a0a 2020 6465 6620 7465 7374 446f 776e  ..  def testDown
+00033860: 6c6f 6164 5769 7468 4465 7374 696e 6174  loadWithDestinat
+00033870: 696f 6e45 6e64 696e 6757 6974 6844 656c  ionEndingWithDel
+00033880: 696d 6974 6572 5261 6973 6573 4572 726f  imiterRaisesErro
+00033890: 7228 7365 6c66 293a 0a20 2020 2022 2222  r(self):.    """
+000338a0: 5465 7374 7320 6120 646f 776e 6c6f 6164  Tests a download
+000338b0: 2077 6974 6820 6e6f 2076 616c 6964 2073   with no valid s
+000338c0: 6572 7665 722d 7375 7070 6c69 6564 2068  erver-supplied h
+000338d0: 6173 682e 2222 220a 2020 2020 2320 5333  ash.""".    # S3
+000338e0: 2073 686f 756c 6420 6861 7665 2061 2073   should have a s
+000338f0: 7065 6369 616c 206d 6573 7361 6765 2066  pecial message f
+00033900: 6f72 206e 6f6e 2d4d 4435 2065 7461 6773  or non-MD5 etags
+00033910: 2e0a 2020 2020 6275 636b 6574 5f75 7269  ..    bucket_uri
+00033920: 203d 2073 656c 662e 4372 6561 7465 4275   = self.CreateBu
+00033930: 636b 6574 2870 726f 7669 6465 723d 2773  cket(provider='s
+00033940: 3327 290a 2020 2020 6f62 6a65 6374 5f75  3').    object_u
+00033950: 7269 203d 2073 656c 662e 4372 6561 7465  ri = self.Create
+00033960: 4f62 6a65 6374 2862 7563 6b65 745f 7572  Object(bucket_ur
+00033970: 693d 6275 636b 6574 5f75 7269 2c20 636f  i=bucket_uri, co
+00033980: 6e74 656e 7473 3d62 2766 6f6f 2729 0a20  ntents=b'foo'). 
+00033990: 2020 2064 6573 7469 6e61 7469 6f6e 5f70     destination_p
+000339a0: 6174 6820 3d20 2772 616e 646f 6d5f 6469  ath = 'random_di
+000339b0: 7227 202b 206f 732e 7061 7468 2e73 6570  r' + os.path.sep
+000339c0: 0a0a 2020 2020 7769 7468 2073 656c 662e  ..    with self.
+000339d0: 6173 7365 7274 5261 6973 6573 2849 6e76  assertRaises(Inv
+000339e0: 616c 6964 5572 6c45 7272 6f72 2920 6173  alidUrlError) as
+000339f0: 2065 7272 6f72 3a0a 2020 2020 2020 7365   error:.      se
+00033a00: 6c66 2e52 756e 436f 6d6d 616e 6428 2763  lf.RunCommand('c
+00033a10: 7027 2c20 5b73 7572 6928 6f62 6a65 6374  p', [suri(object
+00033a20: 5f75 7269 292c 2064 6573 7469 6e61 7469  _uri), destinati
+00033a30: 6f6e 5f70 6174 685d 290a 2020 2020 2020  on_path]).      
+00033a40: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+00033a50: 2873 7472 2865 7272 6f72 292c 2027 496e  (str(error), 'In
+00033a60: 7661 6c69 6420 6465 7374 696e 6174 696f  valid destinatio
+00033a70: 6e20 7061 7468 3a20 7261 6e64 6f6d 5f64  n path: random_d
+00033a80: 6972 2f27 290a 0a20 2064 6566 2074 6573  ir/')..  def tes
+00033a90: 745f 6f62 6a65 6374 5f61 6e64 5f70 7265  t_object_and_pre
+00033aa0: 6669 785f 7361 6d65 5f6e 616d 6528 7365  fix_same_name(se
+00033ab0: 6c66 293a 0a20 2020 2062 7563 6b65 745f  lf):.    bucket_
+00033ac0: 7572 6920 3d20 7365 6c66 2e43 7265 6174  uri = self.Creat
+00033ad0: 6542 7563 6b65 7428 290a 2020 2020 6f62  eBucket().    ob
+00033ae0: 6a65 6374 5f75 7269 203d 2073 656c 662e  ject_uri = self.
+00033af0: 4372 6561 7465 4f62 6a65 6374 2862 7563  CreateObject(buc
+00033b00: 6b65 745f 7572 693d 6275 636b 6574 5f75  ket_uri=bucket_u
+00033b10: 7269 2c0a 2020 2020 2020 2020 2020 2020  ri,.            
+00033b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00033b30: 2020 2020 2020 206f 626a 6563 745f 6e61         object_na
+00033b40: 6d65 3d27 666f 6f27 2c0a 2020 2020 2020  me='foo',.      
+00033b50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00033b60: 2020 2020 2020 2020 2020 2020 2063 6f6e               con
+00033b70: 7465 6e74 733d 6227 666f 6f27 290a 2020  tents=b'foo').  
+00033b80: 2020 7365 6c66 2e43 7265 6174 654f 626a    self.CreateObj
+00033b90: 6563 7428 6275 636b 6574 5f75 7269 3d62  ect(bucket_uri=b
+00033ba0: 7563 6b65 745f 7572 692c 0a20 2020 2020  ucket_uri,.     
+00033bb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00033bc0: 206f 626a 6563 745f 6e61 6d65 3d27 666f   object_name='fo
+00033bd0: 6f2f 6261 7227 2c0a 2020 2020 2020 2020  o/bar',.        
+00033be0: 2020 2020 2020 2020 2020 2020 2020 636f                co
+00033bf0: 6e74 656e 7473 3d62 2762 6172 2729 0a20  ntents=b'bar'). 
+00033c00: 2020 2066 7061 7468 203d 2073 656c 662e     fpath = self.
+00033c10: 4372 6561 7465 5465 6d70 4669 6c65 2829  CreateTempFile()
+00033c20: 0a20 2020 2023 204d 6f63 6b4b 6579 2064  .    # MockKey d
+00033c30: 6f65 736e 2774 2073 7570 706f 7274 2068  oesn't support h
+00033c40: 6173 685f 616c 6773 2c20 736f 2074 6865  ash_algs, so the
+00033c50: 204d 4435 2077 696c 6c20 6e6f 7420 6d61   MD5 will not ma
+00033c60: 7463 682e 0a20 2020 2077 6974 6820 5365  tch..    with Se
+00033c70: 7442 6f74 6f43 6f6e 6669 6746 6f72 5465  tBotoConfigForTe
+00033c80: 7374 285b 2827 4753 5574 696c 272c 2027  st([('GSUtil', '
+00033c90: 6368 6563 6b5f 6861 7368 6573 272c 2027  check_hashes', '
+00033ca0: 6e65 7665 7227 295d 293a 0a20 2020 2020  never')]):.     
+00033cb0: 2073 656c 662e 5275 6e43 6f6d 6d61 6e64   self.RunCommand
+00033cc0: 2827 6370 272c 205b 7375 7269 286f 626a  ('cp', [suri(obj
+00033cd0: 6563 745f 7572 6929 2c20 6670 6174 685d  ect_uri), fpath]
+00033ce0: 290a 2020 2020 7769 7468 206f 7065 6e28  ).    with open(
+00033cf0: 6670 6174 682c 2027 7262 2729 2061 7320  fpath, 'rb') as 
+00033d00: 663a 0a20 2020 2020 2073 656c 662e 6173  f:.      self.as
+00033d10: 7365 7274 4571 7561 6c28 662e 7265 6164  sertEqual(f.read
+00033d20: 2829 2c20 6227 666f 6f27 290a 0a20 2064  (), b'foo')..  d
+00033d30: 6566 2074 6573 745f 6370 5f75 706c 6f61  ef test_cp_uploa
+00033d40: 645f 7265 7370 6563 7473 5f6e 6f5f 6861  d_respects_no_ha
+00033d50: 7368 6573 2873 656c 6629 3a0a 2020 2020  shes(self):.    
+00033d60: 6275 636b 6574 5f75 7269 203d 2073 656c  bucket_uri = sel
+00033d70: 662e 4372 6561 7465 4275 636b 6574 2829  f.CreateBucket()
+00033d80: 0a20 2020 2066 7061 7468 203d 2073 656c  .    fpath = sel
+00033d90: 662e 4372 6561 7465 5465 6d70 4669 6c65  f.CreateTempFile
+00033da0: 2863 6f6e 7465 6e74 733d 6227 6162 6364  (contents=b'abcd
+00033db0: 2729 0a20 2020 2077 6974 6820 5365 7442  ').    with SetB
+00033dc0: 6f74 6f43 6f6e 6669 6746 6f72 5465 7374  otoConfigForTest
+00033dd0: 285b 2827 4753 5574 696c 272c 2027 6368  ([('GSUtil', 'ch
+00033de0: 6563 6b5f 6861 7368 6573 272c 2027 6e65  eck_hashes', 'ne
+00033df0: 7665 7227 295d 293a 0a20 2020 2020 206c  ver')]):.      l
+00033e00: 6f67 5f68 616e 646c 6572 203d 2073 656c  og_handler = sel
+00033e10: 662e 5275 6e43 6f6d 6d61 6e64 2827 6370  f.RunCommand('cp
+00033e20: 272c 205b 6670 6174 682c 2073 7572 6928  ', [fpath, suri(
+00033e30: 6275 636b 6574 5f75 7269 295d 2c0a 2020  bucket_uri)],.  
+00033e40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00033e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00033e60: 2020 7265 7475 726e 5f6c 6f67 5f68 616e    return_log_han
+00033e70: 646c 6572 3d54 7275 6529 0a20 2020 2077  dler=True).    w
+00033e80: 6172 6e69 6e67 5f6d 6573 7361 6765 7320  arning_messages 
+00033e90: 3d20 6c6f 675f 6861 6e64 6c65 722e 6d65  = log_handler.me
+00033ea0: 7373 6167 6573 5b27 7761 726e 696e 6727  ssages['warning'
+00033eb0: 5d0a 2020 2020 7365 6c66 2e61 7373 6572  ].    self.asser
+00033ec0: 7445 7175 616c 7328 312c 206c 656e 2877  tEquals(1, len(w
+00033ed0: 6172 6e69 6e67 5f6d 6573 7361 6765 7329  arning_messages)
+00033ee0: 290a 2020 2020 7365 6c66 2e61 7373 6572  ).    self.asser
+00033ef0: 7449 6e28 2746 6f75 6e64 206e 6f20 6861  tIn('Found no ha
+00033f00: 7368 6573 2074 6f20 7661 6c69 6461 7465  shes to validate
+00033f10: 206f 626a 6563 7420 7570 6c6f 6164 272c   object upload',
+00033f20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00033f30: 2020 2077 6172 6e69 6e67 5f6d 6573 7361     warning_messa
+00033f40: 6765 735b 305d 290a 0a20 2064 6566 2074  ges[0])..  def t
+00033f50: 6573 745f 7368 696d 5f74 7261 6e73 6c61  est_shim_transla
+00033f60: 7465 735f 666c 6167 7328 7365 6c66 293a  tes_flags(self):
+00033f70: 0a20 2020 2062 7563 6b65 745f 7572 6920  .    bucket_uri 
+00033f80: 3d20 7365 6c66 2e43 7265 6174 6542 7563  = self.CreateBuc
+00033f90: 6b65 7428 290a 2020 2020 6670 6174 6820  ket().    fpath 
+00033fa0: 3d20 7365 6c66 2e43 7265 6174 6554 656d  = self.CreateTem
+00033fb0: 7046 696c 6528 636f 6e74 656e 7473 3d62  pFile(contents=b
+00033fc0: 2761 6263 6427 290a 2020 2020 7769 7468  'abcd').    with
+00033fd0: 2053 6574 426f 746f 436f 6e66 6967 466f   SetBotoConfigFo
+00033fe0: 7254 6573 7428 5b28 2747 5355 7469 6c27  rTest([('GSUtil'
+00033ff0: 2c20 2775 7365 5f67 636c 6f75 645f 7374  , 'use_gcloud_st
+00034000: 6f72 6167 6527 2c20 2754 7275 6527 292c  orage', 'True'),
+00034010: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00034020: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00034030: 2827 4753 5574 696c 272c 2027 6869 6464  ('GSUtil', 'hidd
+00034040: 656e 5f73 6869 6d5f 6d6f 6465 272c 2027  en_shim_mode', '
+00034050: 6472 795f 7275 6e27 295d 293a 0a20 2020  dry_run')]):.   
+00034060: 2020 2077 6974 6820 5365 7445 6e76 6972     with SetEnvir
+00034070: 6f6e 6d65 6e74 466f 7254 6573 7428 7b0a  onmentForTest({.
+00034080: 2020 2020 2020 2020 2020 2743 4c4f 5544            'CLOUD
+00034090: 5344 4b5f 434f 5245 5f50 4153 535f 4352  SDK_CORE_PASS_CR
+000340a0: 4544 454e 5449 414c 535f 544f 5f47 5355  EDENTIALS_TO_GSU
+000340b0: 5449 4c27 3a20 2754 7275 6527 2c0a 2020  TIL': 'True',.  
+000340c0: 2020 2020 2020 2020 2743 4c4f 5544 5344          'CLOUDSD
+000340d0: 4b5f 524f 4f54 5f44 4952 273a 2027 6661  K_ROOT_DIR': 'fa
+000340e0: 6b65 5f64 6972 272c 0a20 2020 2020 207d  ke_dir',.      }
+000340f0: 293a 0a20 2020 2020 2020 206d 6f63 6b5f  ):.        mock_
+00034100: 6c6f 675f 6861 6e64 6c65 7220 3d20 7365  log_handler = se
+00034110: 6c66 2e52 756e 436f 6d6d 616e 6428 2763  lf.RunCommand('c
+00034120: 7027 2c20 5b0a 2020 2020 2020 2020 2020  p', [.          
+00034130: 2020 272d 6527 2c20 272d 6e27 2c20 272d    '-e', '-n', '-
+00034140: 7227 2c20 272d 5227 2c20 272d 7327 2c20  r', '-R', '-s', 
+00034150: 2773 6f6d 652d 636c 6173 7327 2c20 272d  'some-class', '-
+00034160: 7627 2c20 6670 6174 682c 0a20 2020 2020  v', fpath,.     
+00034170: 2020 2020 2020 2073 7572 6928 6275 636b         suri(buck
+00034180: 6574 5f75 7269 290a 2020 2020 2020 2020  et_uri).        
+00034190: 5d2c 0a20 2020 2020 2020 2020 2020 2020  ],.             
+000341a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000341b0: 2020 2020 2020 2020 2020 2020 2020 7265                re
+000341c0: 7475 726e 5f6c 6f67 5f68 616e 646c 6572  turn_log_handler
+000341d0: 3d54 7275 6529 0a20 2020 2020 2020 2069  =True).        i
+000341e0: 6e66 6f5f 6c69 6e65 7320 3d20 275c 6e27  nfo_lines = '\n'
+000341f0: 2e6a 6f69 6e28 6d6f 636b 5f6c 6f67 5f68  .join(mock_log_h
+00034200: 616e 646c 6572 2e6d 6573 7361 6765 735b  andler.messages[
+00034210: 2769 6e66 6f27 5d29 0a20 2020 2020 2020  'info']).       
+00034220: 2073 656c 662e 6173 7365 7274 496e 280a   self.assertIn(.
+00034230: 2020 2020 2020 2020 2020 2020 2747 636c              'Gcl
+00034240: 6f75 6420 5374 6f72 6167 6520 436f 6d6d  oud Storage Comm
+00034250: 616e 643a 207b 7d20 616c 7068 6120 7374  and: {} alpha st
+00034260: 6f72 6167 6520 6370 270a 2020 2020 2020  orage cp'.      
+00034270: 2020 2020 2020 2720 2d2d 6967 6e6f 7265        ' --ignore
+00034280: 2d73 796d 6c69 6e6b 7320 2d2d 6e6f 2d63  -symlinks --no-c
+00034290: 6c6f 6262 6572 202d 7220 2d72 202d 2d73  lobber -r -r --s
+000342a0: 746f 7261 6765 2d63 6c61 7373 2073 6f6d  torage-class som
+000342b0: 652d 636c 6173 7327 0a20 2020 2020 2020  e-class'.       
+000342c0: 2020 2020 2027 202d 2d70 7269 6e74 2d63       ' --print-c
+000342d0: 7265 6174 6564 2d6d 6573 7361 6765 207b  reated-message {
+000342e0: 7d20 7b7d 272e 666f 726d 6174 280a 2020  } {}'.format(.  
+000342f0: 2020 2020 2020 2020 2020 2020 2020 6f73                os
+00034300: 2e70 6174 682e 6a6f 696e 2827 6661 6b65  .path.join('fake
+00034310: 5f64 6972 272c 2027 6269 6e27 2c20 2767  _dir', 'bin', 'g
+00034320: 636c 6f75 6427 292c 2066 7061 7468 2c0a  cloud'), fpath,.
+00034330: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00034340: 7375 7269 2862 7563 6b65 745f 7572 6929  suri(bucket_uri)
+00034350: 292c 2069 6e66 6f5f 6c69 6e65 7329 0a0a  ), info_lines)..
+00034360: 2020 4075 6e69 7474 6573 742e 736b 6970    @unittest.skip
+00034370: 4966 2849 535f 5749 4e44 4f57 532c 2027  If(IS_WINDOWS, '
+00034380: 504f 5349 5820 6174 7472 6962 7574 6573  POSIX attributes
+00034390: 206e 6f74 2061 7661 696c 6162 6c65 206f   not available o
+000343a0: 6e20 5769 6e64 6f77 732e 2729 0a20 2040  n Windows.').  @
+000343b0: 6d6f 636b 2e70 6174 6368 2827 6f73 2e67  mock.patch('os.g
+000343c0: 6574 6575 6964 272c 206e 6577 3d6d 6f63  eteuid', new=moc
+000343d0: 6b2e 4d6f 636b 2872 6574 7572 6e5f 7661  k.Mock(return_va
+000343e0: 6c75 653d 3029 290a 2020 406d 6f63 6b2e  lue=0)).  @mock.
+000343f0: 7061 7463 682e 6f62 6a65 6374 286f 732c  patch.object(os,
+00034400: 2027 6368 6f77 6e27 2c20 6175 746f 7370   'chown', autosp
+00034410: 6563 3d54 7275 6529 0a20 2064 6566 2074  ec=True).  def t
+00034420: 6573 745f 706f 7369 785f 7275 6e73 5f63  est_posix_runs_c
+00034430: 686f 776e 5f61 735f 7375 7065 725f 7573  hown_as_super_us
+00034440: 6572 2873 656c 662c 206d 6f63 6b5f 6368  er(self, mock_ch
+00034450: 6f77 6e29 3a0a 2020 2020 6670 6174 6820  own):.    fpath 
+00034460: 3d20 7365 6c66 2e43 7265 6174 6554 656d  = self.CreateTem
+00034470: 7046 696c 6528 636f 6e74 656e 7473 3d62  pFile(contents=b
+00034480: 2761 6263 6427 290a 2020 2020 6f62 6a20  'abcd').    obj 
+00034490: 3d20 6170 6974 6f6f 6c73 5f6d 6573 7361  = apitools_messa
+000344a0: 6765 732e 4f62 6a65 6374 2829 0a20 2020  ges.Object().   
+000344b0: 206f 626a 2e6d 6574 6164 6174 6120 3d20   obj.metadata = 
+000344c0: 4372 6561 7465 4375 7374 6f6d 4d65 7461  CreateCustomMeta
+000344d0: 6461 7461 2865 6e74 7269 6573 3d7b 5549  data(entries={UI
+000344e0: 445f 4154 5452 3a20 5553 4552 5f49 447d  D_ATTR: USER_ID}
+000344f0: 290a 2020 2020 5061 7273 6541 6e64 5365  ).    ParseAndSe
+00034500: 7450 4f53 4958 4174 7472 6962 7574 6573  tPOSIXAttributes
+00034510: 2866 7061 7468 2c20 6f62 6a2c 2046 616c  (fpath, obj, Fal
+00034520: 7365 2c20 5472 7565 290a 2020 2020 6d6f  se, True).    mo
+00034530: 636b 5f63 686f 776e 2e61 7373 6572 745f  ck_chown.assert_
+00034540: 6361 6c6c 6564 5f6f 6e63 655f 7769 7468  called_once_with
+00034550: 2866 7061 7468 2c20 5553 4552 5f49 442c  (fpath, USER_ID,
+00034560: 202d 3129 0a0a 2020 4075 6e69 7474 6573   -1)..  @unittes
+00034570: 742e 736b 6970 4966 2849 535f 5749 4e44  t.skipIf(IS_WIND
+00034580: 4f57 532c 2027 504f 5349 5820 6174 7472  OWS, 'POSIX attr
+00034590: 6962 7574 6573 206e 6f74 2061 7661 696c  ibutes not avail
+000345a0: 6162 6c65 206f 6e20 5769 6e64 6f77 732e  able on Windows.
+000345b0: 2729 0a20 2040 6d6f 636b 2e70 6174 6368  ').  @mock.patch
+000345c0: 2827 6f73 2e67 6574 6575 6964 272c 206e  ('os.geteuid', n
+000345d0: 6577 3d6d 6f63 6b2e 4d6f 636b 2872 6574  ew=mock.Mock(ret
+000345e0: 7572 6e5f 7661 6c75 653d 3129 290a 2020  urn_value=1)).  
+000345f0: 406d 6f63 6b2e 7061 7463 682e 6f62 6a65  @mock.patch.obje
+00034600: 6374 286f 732c 2027 6368 6f77 6e27 2c20  ct(os, 'chown', 
+00034610: 6175 746f 7370 6563 3d54 7275 6529 0a20  autospec=True). 
+00034620: 2064 6566 2074 6573 745f 706f 7369 785f   def test_posix_
+00034630: 736b 6970 735f 6368 6f77 6e5f 7768 656e  skips_chown_when
+00034640: 5f6e 6f74 5f73 7570 6572 5f75 7365 7228  _not_super_user(
+00034650: 7365 6c66 2c20 6d6f 636b 5f63 686f 776e  self, mock_chown
+00034660: 293a 0a20 2020 2066 7061 7468 203d 2073  ):.    fpath = s
+00034670: 656c 662e 4372 6561 7465 5465 6d70 4669  elf.CreateTempFi
+00034680: 6c65 2863 6f6e 7465 6e74 733d 6227 6162  le(contents=b'ab
+00034690: 6364 2729 0a20 2020 206f 626a 203d 2061  cd').    obj = a
+000346a0: 7069 746f 6f6c 735f 6d65 7373 6167 6573  pitools_messages
+000346b0: 2e4f 626a 6563 7428 290a 2020 2020 6f62  .Object().    ob
+000346c0: 6a2e 6d65 7461 6461 7461 203d 2043 7265  j.metadata = Cre
+000346d0: 6174 6543 7573 746f 6d4d 6574 6164 6174  ateCustomMetadat
+000346e0: 6128 656e 7472 6965 733d 7b55 4944 5f41  a(entries={UID_A
+000346f0: 5454 523a 2055 5345 525f 4944 7d29 0a20  TTR: USER_ID}). 
+00034700: 2020 2050 6172 7365 416e 6453 6574 504f     ParseAndSetPO
+00034710: 5349 5841 7474 7269 6275 7465 7328 6670  SIXAttributes(fp
+00034720: 6174 682c 206f 626a 2c20 4661 6c73 652c  ath, obj, False,
+00034730: 2054 7275 6529 0a20 2020 206d 6f63 6b5f   True).    mock_
+00034740: 6368 6f77 6e2e 6173 7365 7274 5f6e 6f74  chown.assert_not
+00034750: 5f63 616c 6c65 6428 290a                 _called().
```

### Comparing `gsutil-5.8/gslib/tests/test_creds_config.py` & `gsutil-5.9/gslib/tests/test_creds_config.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_daisy_chain_wrapper.py` & `gsutil-5.9/gslib/tests/test_daisy_chain_wrapper.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_data/favicon.ico.gz` & `gsutil-5.9/gslib/tests/test_data/favicon.ico.gz`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_data/test.gif` & `gsutil-5.9/gslib/tests/test_data/test.gif`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_data/test.json` & `gsutil-5.9/gslib/tests/test_data/test.json`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_data/test.mp3` & `gsutil-5.9/gslib/tests/test_data/test.mp3`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_data/test.p12` & `gsutil-5.9/gslib/tests/test_data/test.p12`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_data/test.txt` & `gsutil-5.9/gslib/tests/test_data/test.txt`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_defacl.py` & `gsutil-5.9/gslib/tests/test_defacl.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_defstorageclass.py` & `gsutil-5.9/gslib/tests/test_defstorageclass.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_du.py` & `gsutil-5.9/gslib/tests/test_du.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_encryption_helper.py` & `gsutil-5.9/gslib/tests/test_encryption_helper.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_execution_util.py` & `gsutil-5.9/gslib/tests/test_execution_util.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_file_part.py` & `gsutil-5.9/gslib/tests/test_file_part.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_gcs_json_api.py` & `gsutil-5.9/gslib/tests/test_gcs_json_api.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_gcs_json_credentials.py` & `gsutil-5.9/gslib/tests/test_gcs_json_credentials.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_gcs_json_media.py` & `gsutil-5.9/gslib/tests/test_gcs_json_media.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_gsutil.py` & `gsutil-5.9/gslib/tests/test_gsutil.py`

 * *Files 11% similar despite different names*

```diff
@@ -11,37 +11,30 @@
 # distributed under the License is distributed on an "AS IS" BASIS,
 # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 # See the License for the specific language governing permissions and
 # limitations under the License.
 """Integration tests for top-level gsutil command."""
 
 from __future__ import absolute_import
-from __future__ import print_function
 from __future__ import division
+from __future__ import print_function
 from __future__ import unicode_literals
 
-import six
-import sys
 import importlib
 import unittest
+from unittest import mock
 
 import gslib
 import gslib.tests.testcase as testcase
 
 try:
-  import gsutil
-  GSUTIL_MODULE_LOADED = True
+  from gsutil import _fix_google_module  # pylint: disable=g-import-not-at-top
+  FIX_GOOGLE_MODULE_FUNCTION_AVAILABLE = True
 except ImportError:
-  GSUTIL_MODULE_LOADED = False
-
-six.add_move(six.MovedModule("mock", "mock", "unittest.mock"))
-from six.moves import mock
-
-if six.PY3:
-  long = int
+  FIX_GOOGLE_MODULE_FUNCTION_AVAILABLE = False
 
 
 class TestGsUtil(testcase.GsUtilIntegrationTestCase):
   """Integration tests for top-level gsutil command."""
 
   def test_long_version_arg(self):
     stdout = self.RunGsUtil(['--version'], return_stdout=True)
@@ -60,24 +53,24 @@
     self.assertIn('gsutil path', stdout)
 
 
 class TestGsUtilUnit(testcase.GsUtilUnitTestCase):
   """Unit tests for top-level gsutil command."""
 
   @unittest.skipUnless(
-      GSUTIL_MODULE_LOADED,
-      'For gsutil installed via pip, the gsutil module will not be present.')
-  @mock.patch.object(importlib, "reload", autospec=True)
+      FIX_GOOGLE_MODULE_FUNCTION_AVAILABLE,
+      'The gsutil.py file is not available for certain installations like pip.')
+  @mock.patch.object(importlib, 'reload', autospec=True)
   def test_fix_google_module(self, mock_reload):
-    with mock.patch.dict('sys.modules', {"google": "google"}):
-      gsutil._fix_google_module()
-      mock_reload.assert_called_once_with("google")
+    with mock.patch.dict('sys.modules', {'google': 'google'}):
+      _fix_google_module()
+      mock_reload.assert_called_once_with('google')
 
   @unittest.skipUnless(
-      GSUTIL_MODULE_LOADED,
-      'For gsutil installed via pip, the gsutil module will not be present.')
-  @mock.patch.object(importlib, "reload")
+      FIX_GOOGLE_MODULE_FUNCTION_AVAILABLE,
+      'The gsutil.py file is not available for certain installations like pip.')
+  @mock.patch.object(importlib, 'reload', autospec=True)
   def test_fix_google_module_does_not_reload_if_module_missing(
       self, mock_reload):
     with mock.patch.dict('sys.modules', {}, clear=True):
-      gsutil._fix_google_module()
-      mock_reload.assert_not_called()
+      _fix_google_module()
+      self.assertFalse(mock_reload.called)
```

### Comparing `gsutil-5.8/gslib/tests/test_hash.py` & `gsutil-5.9/gslib/tests/test_hash.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_hashing_helper.py` & `gsutil-5.9/gslib/tests/test_hashing_helper.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_help.py` & `gsutil-5.9/gslib/tests/test_help.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_hmac.py` & `gsutil-5.9/gslib/tests/test_hmac.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_iam.py` & `gsutil-5.9/gslib/tests/test_iam.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_kms.py` & `gsutil-5.9/gslib/tests/test_kms.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_label.py` & `gsutil-5.9/gslib/tests/test_label.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_lifecycle.py` & `gsutil-5.9/gslib/tests/test_lifecycle.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_logging.py` & `gsutil-5.9/gslib/tests/test_logging.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_ls.py` & `gsutil-5.9/gslib/tests/test_ls.py`

 * *Files 0% similar despite different names*

```diff
@@ -1139,23 +1139,21 @@
     # default replication and ls will not display the field if value is None.
     # self.assertRegex(stdout, r'RPO:\t\t\t\tDEFAULT')
     # Set RPO to ASYNC_TURBO
     self.RunGsUtil(['rpo', 'set', 'ASYNC_TURBO', suri(bucket_uri)])
     stdout = self.RunGsUtil(['ls', '-Lb', suri(bucket_uri)], return_stdout=True)
     self.assertRegex(stdout, r'RPO:\t\t\t\tASYNC_TURBO')
 
-  @SkipForXML('Custom Dual Region is not supported for the XML API.')
   @SkipForS3('Custom Dual Region is not supported for S3 buckets.')
-  def test_list_Lb_displays_custom_dual_region_placement_info(self):
+  def test_list_Lb_displays_custom_dual_region_info(self):
     bucket_name = 'gs://' + self.MakeTempName('bucket')
-    self.RunGsUtil(['mb', '--placement', 'us-central1,us-west1', bucket_name],
+    self.RunGsUtil(['mb', '-l', 'us-central1+us-west1', bucket_name],
                    expected_status=0)
     stdout = self.RunGsUtil(['ls', '-Lb', bucket_name], return_stdout=True)
-    self.assertRegex(stdout,
-                     r"Placement locations:\t\t\['US-CENTRAL1', 'US-WEST1'\]")
+    self.assertRegex(stdout, r"Location constraint:\t\tUS-CENTRAL1\+US-WEST1")
 
   @SkipForXML('Autoclass is not supported for the XML API.')
   @SkipForS3('Autoclass is not supported for S3 buckets.')
   def test_list_autoclass(self):
     bucket_uri = self.CreateBucket()
     stdout = self.RunGsUtil(['ls', '-Lb', suri(bucket_uri)], return_stdout=True)
     self.assertNotIn('Autoclass', stdout)
```

### Comparing `gsutil-5.8/gslib/tests/test_mb.py` & `gsutil-5.9/gslib/tests/test_mb.py`

 * *Files 3% similar despite different names*

```diff
@@ -262,55 +262,34 @@
     self.RunGsUtil(['kms', 'authorize', '-k', key])
     self.RunGsUtil([
         'mb', '-l', testcase.KmsTestingResources.KEYRING_LOCATION, '-k', key,
         suri(bucket_uri)
     ],
                    expected_status=0)
 
-  @SkipForXML('The --placement flag only works for GCS JSON API.')
-  def test_create_with_placement_flag(self):
+  @SkipForS3('Custom Dual Region is not supported for S3 buckets.')
+  def test_create_with_custom_dual_regions(self):
     bucket_name = self.MakeTempName('bucket')
     bucket_uri = boto.storage_uri('gs://%s' % (bucket_name.lower()),
                                   suppress_consec_slashes=False)
-    self.RunGsUtil(
-        ['mb', '--placement', 'us-central1,us-west1',
-         suri(bucket_uri)])
+    self.RunGsUtil(['mb', '-l', 'us-central1+us-west1', suri(bucket_uri)])
     stdout = self.RunGsUtil(['ls', '-Lb', suri(bucket_uri)], return_stdout=True)
-    self.assertRegex(stdout,
-                     r"Placement locations:\t\t\['US-CENTRAL1', 'US-WEST1'\]")
+    self.assertRegex(stdout, r"Location constraint:\t\tUS-CENTRAL1\+US-WEST1")
 
-  @SkipForXML('The --placement flag only works for GCS JSON API.')
-  def test_create_with_invalid_placement_flag_raises_error(self):
+  @SkipForS3('Custom Dual Region is not supported for S3 buckets.')
+  def test_create_with_invalid_dual_regions_raises_error(self):
     bucket_name = self.MakeTempName('bucket')
     bucket_uri = boto.storage_uri('gs://%s' % (bucket_name.lower()),
                                   suppress_consec_slashes=False)
     stderr = self.RunGsUtil(
-        ['mb', '--placement', 'invalid_reg1,invalid_reg2',
+        ['mb', '-l', 'invalid_reg1+invalid_reg2',
          suri(bucket_uri)],
         return_stderr=True,
         expected_status=1)
-    self.assertRegex(
-        stderr, r'.*BadRequestException: 400 (Invalid custom placement config|'
-        r'One or more unrecognized regions in dual-region, received:'
-        r' INVALID_REG1, INVALID_REG2).*')
-
-  @SkipForXML('The --placement flag only works for GCS JSON API.')
-  def test_create_with_incorrect_number_of_placement_values_raises_error(self):
-    bucket_name = self.MakeTempName('bucket')
-    bucket_uri = boto.storage_uri('gs://%s' % (bucket_name.lower()),
-                                  suppress_consec_slashes=False)
-    # Location nam4 is used for dual-region.
-    stderr = self.RunGsUtil(
-        ['mb', '--placement', 'val1,val2,val3',
-         suri(bucket_uri)],
-        return_stderr=True,
-        expected_status=1)
-    self.assertIn(
-        'CommandException: Please specify two regions separated by comma'
-        ' without space. Specified: val1,val2,val3', stderr)
+    self.assertIn('The specified location constraint is not valid', stderr)
 
   @SkipForJSON('Testing XML only behavior.')
   def test_single_json_only_flag_raises_error_with_xml_api(self):
     bucket_name = self.MakeTempName('bucket')
     bucket_uri = boto.storage_uri('gs://%s' % (bucket_name.lower()),
                                   suppress_consec_slashes=False)
     stderr = self.RunGsUtil(['mb', '--rpo', 'ASYNC_TURBO',
@@ -323,17 +302,17 @@
 
   @SkipForJSON('Testing XML only behavior.')
   def test_multiple_json_only_flags_raise_error_with_xml_api(self):
     bucket_name = self.MakeTempName('bucket')
     bucket_uri = boto.storage_uri('gs://%s' % (bucket_name.lower()),
                                   suppress_consec_slashes=False)
     stderr = self.RunGsUtil([
-        'mb', '--autoclass', '--pap', 'enabled', '--placement',
-        'uscentral-1,us-asia1', '--rpo', 'ASYNC_TURBO', '-b', 'on',
+        'mb', '--autoclass', '--pap', 'enabled', '--rpo', 'ASYNC_TURBO', '-b',
+        'on',
         suri(bucket_uri)
     ],
                             return_stderr=True,
                             expected_status=1)
     self.assertIn(
-        'CommandException: The --autoclass, --pap, --placement, --rpo,'
+        'CommandException: The --autoclass, --pap, --rpo,'
         ' -b option(s) can only be used for GCS Buckets with the JSON API',
         stderr)
```

### Comparing `gsutil-5.8/gslib/tests/test_metrics.py` & `gsutil-5.9/gslib/tests/test_metrics.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_mtls.py` & `gsutil-5.9/gslib/tests/test_mtls.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_mv.py` & `gsutil-5.9/gslib/tests/test_mv.py`

 * *Files 21% similar despite different names*

```diff
@@ -17,30 +17,99 @@
 from __future__ import absolute_import
 from __future__ import print_function
 from __future__ import division
 from __future__ import unicode_literals
 
 import os
 
-import crcmod
 from gslib.cs_api_map import ApiSelector
 from gslib.tests.test_cp import TestCpMvPOSIXBucketToLocalErrors
 from gslib.tests.test_cp import TestCpMvPOSIXBucketToLocalNoErrors
 from gslib.tests.test_cp import TestCpMvPOSIXLocalToBucketNoErrors
 import gslib.tests.testcase as testcase
 from gslib.tests.testcase.integration_testcase import SkipForS3
 from gslib.tests.util import ObjectToURI as suri
 from gslib.tests.util import SequentialAndParallelTransfer
 from gslib.tests.util import unittest
 from gslib.utils.boto_util import UsingCrcmodExtension
 from gslib.utils.retry_util import Retry
 from gslib.utils.system_util import IS_WINDOWS
 
 
-class TestMv(testcase.GsUtilIntegrationTestCase):
+class TestMvUnitTests(testcase.GsUtilUnitTestCase):
+  """Unit tests for mv command."""
+
+  def test_move_bucket_objects_with_duplicate_names_inter_bucket(self):
+    """Tests moving multiple top-level items between buckets."""
+    bucket1_uri = self.CreateBucket()
+    self.CreateObject(bucket_uri=bucket1_uri,
+                      object_name='dir1/file.txt',
+                      contents=b'data')
+    self.CreateObject(bucket_uri=bucket1_uri,
+                      object_name='dir2/file.txt',
+                      contents=b'data')
+    bucket2_uri = self.CreateBucket()
+
+    self.RunCommand('mv', [suri(bucket1_uri, '*'), suri(bucket2_uri)])
+
+    actual = set(
+        str(u)
+        for u in self._test_wildcard_iterator(suri(bucket2_uri, '**')).IterAll(
+            expand_top_level_buckets=True))
+    expected = set([
+        suri(bucket2_uri, 'dir1', 'file.txt'),
+        suri(bucket2_uri, 'dir2', 'file.txt'),
+    ])
+    self.assertEqual(actual, expected)
+
+  def test_move_bucket_objects_with_duplicate_names_to_bucket_subdir(self):
+    """Tests moving multiple top-level items between buckets."""
+    bucket1_uri = self.CreateBucket()
+    self.CreateObject(bucket_uri=bucket1_uri,
+                      object_name='dir1/file.txt',
+                      contents=b'data')
+    self.CreateObject(bucket_uri=bucket1_uri,
+                      object_name='dir2/file.txt',
+                      contents=b'data')
+    bucket2_uri = self.CreateBucket()
+
+    self.RunCommand('mv', [suri(bucket1_uri, '*'), suri(bucket2_uri, 'dir')])
+
+    actual = set(
+        str(u)
+        for u in self._test_wildcard_iterator(suri(bucket2_uri, '**')).IterAll(
+            expand_top_level_buckets=True))
+    expected = set([
+        suri(bucket2_uri, 'dir', 'dir1', 'file.txt'),
+        suri(bucket2_uri, 'dir', 'dir2', 'file.txt'),
+    ])
+    self.assertEqual(actual, expected)
+
+  def test_move_dirs_with_duplicate_file_names_to_bucket(self):
+    """Tests moving multiple top-level items to a bucket."""
+    bucket_uri = self.CreateBucket()
+    dir_path = self.CreateTempDir(test_files=[
+        ('dir1', 'file.txt'),
+        ('dir2', 'file.txt'),
+    ])
+
+    self.RunCommand('mv', [dir_path + '/*', suri(bucket_uri)])
+
+    actual = set(
+        str(u)
+        for u in self._test_wildcard_iterator(suri(bucket_uri, '**')).IterAll(
+            expand_top_level_buckets=True))
+    expected = set([
+        suri(bucket_uri, 'dir1', 'file.txt'),
+        suri(bucket_uri, 'dir2', 'file.txt'),
+    ])
+    self.assertEqual(actual, expected)
+
+
+class TestMvE2ETests(testcase.GsUtilIntegrationTestCase):
   """Integration tests for mv command."""
 
   def test_moving(self):
     """Tests moving two buckets, one with 2 objects and one with 0 objects."""
     bucket1_uri = self.CreateBucket(test_objects=2)
     self.AssertNObjectsInBucket(bucket1_uri, 2)
     bucket2_uri = self.CreateBucket()
@@ -197,7 +266,32 @@
     stderr = self.RunGsUtil(
         ['mv', suri(object_uri),
          suri(bucket_uri, 'foo')], return_stderr=True)
     self.assertIn(
         'Warning: moving nearline object %s may incur an early deletion '
         'charge, because the original object is less than 30 days old '
         'according to the local system time.' % suri(object_uri), stderr)
+
+  def test_move_bucket_objects_with_duplicate_names_to_dir(self):
+    """Tests moving multiple top-level items to a bucket."""
+    bucket_uri = self.CreateBucket()
+    self.CreateObject(bucket_uri=bucket_uri,
+                      object_name='dir1/file.txt',
+                      contents=b'data')
+    self.CreateObject(bucket_uri=bucket_uri,
+                      object_name='dir2/file.txt',
+                      contents=b'data')
+    self.AssertNObjectsInBucket(bucket_uri, 2)
+
+    tmpdir = self.CreateTempDir()
+    self.RunGsUtil(['mv', suri(bucket_uri, '*'), tmpdir])
+
+    file_list = []
+    for dirname, _, filenames in os.walk(tmpdir):
+      for filename in filenames:
+        file_list.append(os.path.join(dirname, filename))
+    self.assertEqual(len(file_list), 2)
+    self.assertIn('{}{}dir1{}file.txt'.format(tmpdir, os.sep, os.sep),
+                  file_list)
+    self.assertIn('{}{}dir2{}file.txt'.format(tmpdir, os.sep, os.sep),
+                  file_list)
+    self.AssertNObjectsInBucket(bucket_uri, 0)
```

### Comparing `gsutil-5.8/gslib/tests/test_naming.py` & `gsutil-5.9/gslib/tests/test_naming.py`

 * *Files 3% similar despite different names*

```diff
@@ -971,31 +971,103 @@
           suri(dst_bucket_uri, 'dst_subdir%d' % i, bucketname, 'f0'),
           suri(dst_bucket_uri, 'dst_subdir%d' % i, bucketname, 'nested', 'f1'),
           suri(dst_bucket_uri, 'dst_subdir%d' % i, tmp_dirname, 'f2'),
           suri(dst_bucket_uri, 'dst_subdir%d' % i, tmp_dirname, 'nested', 'f3')
       ])
       self.assertEqual(expected, actual)
 
-  # @SequentialAndParallelTransfer
+  def testRecursiveCopyFileToExistingBucketSubDirInvalidSourceParent(self):
+    """Tests recursive copy of invalid path file to existing bucket subdir."""
+    src_dir = self.CreateTempDir(test_files=[('nested', 'f0')])
+    dst_bucket_uri = self.CreateBucket(test_objects=['dst_subdir/existing_obj'])
+
+    for relative_path_string in ['.', '.' + os.sep]:
+      self.RunCommand('cp', [
+          '-R',
+          src_dir + os.sep + relative_path_string,
+          suri(dst_bucket_uri, 'dst_subdir'),
+      ])
+      actual = set(
+          str(u) for u in self._test_wildcard_iterator(
+              suri(dst_bucket_uri, 'dst_subdir', '**')).IterAll(
+                  expand_top_level_buckets=True))
+      expected = set([
+          suri(dst_bucket_uri, 'dst_subdir', 'nested', 'f0'),
+          suri(dst_bucket_uri, 'dst_subdir', 'existing_obj'),
+      ])
+      self.assertEqual(expected, actual)
+
+  def testRecursiveCopyFilesToExistingBucketSubDirInvalidSourceParent(self):
+    """Tests recursive copy of invalid paths files to existing bucket subdir."""
+    src_dir = self.CreateTempDir(test_files=['f0'])
+    dst_bucket_uri = self.CreateBucket(test_objects=['dst_subdir/existing_obj'])
+
+    for relative_path_string in ['.', '.' + os.sep, '..', '..' + os.sep]:
+      with self.assertRaises(InvalidUrlError):
+        self.RunCommand('cp', [
+            '-R',
+            src_dir,
+            relative_path_string,
+            suri(dst_bucket_uri, 'dst_subdir'),
+        ])
+
   def testRecursiveCopyObjsAndFilesToNonExistentBucketSubDir(self):
     """Tests recursive copy of objs + files to non-existent bucket subdir."""
     src_bucket_uri = self.CreateBucket(test_objects=['f0', 'nested/f1'])
-    src_dir = self.CreateTempDir(test_files=['f2', ('nested', 'f3')])
+    src_dir = self.CreateTempDir(test_files=[
+        ('parent', 'f2'),
+        ('parent', 'nested', 'f3'),
+    ])
     dst_bucket_uri = self.CreateBucket()
     self.RunCommand('cp', [
-        '-R', src_dir,
+        '-R',
+        os.path.join(src_dir, 'parent'),
         suri(src_bucket_uri),
         suri(dst_bucket_uri, 'dst_subdir')
     ])
     actual = set(
         str(u) for u in self._test_wildcard_iterator(suri(
             dst_bucket_uri, '**')).IterAll(expand_top_level_buckets=True))
     expected = set([
+        suri(dst_bucket_uri, 'dst_subdir', src_bucket_uri.bucket_name, 'f0'),
+        suri(dst_bucket_uri, 'dst_subdir', src_bucket_uri.bucket_name, 'nested',
+             'f1'),
+        suri(dst_bucket_uri, 'dst_subdir', 'parent', 'f2'),
+        suri(dst_bucket_uri, 'dst_subdir', 'parent', 'nested', 'f3')
+    ])
+    self.assertEqual(expected, actual)
+
+  def testRecursiveCopyNestedObjsToNonExistentBucketSubDir(self):
+    """Tests recursive copy of objs + files to non-existent bucket subdir."""
+    src_bucket_uri = self.CreateBucket(
+        test_objects=['parent/f0', 'parent/nested/f1'])
+    dst_bucket_uri = self.CreateBucket()
+    self.RunCommand('cp', [
+        '-R',
+        suri(src_bucket_uri, 'parent'),
+        suri(dst_bucket_uri, 'dst_subdir')
+    ])
+    actual = set(
+        str(u) for u in self._test_wildcard_iterator(suri(
+            dst_bucket_uri, '**')).IterAll(expand_top_level_buckets=True))
+    expected = set([
         suri(dst_bucket_uri, 'dst_subdir', 'f0'),
         suri(dst_bucket_uri, 'dst_subdir', 'nested', 'f1'),
+    ])
+    self.assertEqual(expected, actual)
+
+  def testRecursiveCopyFilesToNonExistentBucketSubDir(self):
+    """Tests recursive copy of objs + files to non-existent bucket subdir."""
+    src_dir = self.CreateTempDir(test_files=['f2', ('nested', 'f3')])
+    dst_bucket_uri = self.CreateBucket()
+    self.RunCommand('cp', ['-R', src_dir, suri(dst_bucket_uri, 'dst_subdir')])
+    actual = set(
+        str(u) for u in self._test_wildcard_iterator(suri(
+            dst_bucket_uri, '**')).IterAll(expand_top_level_buckets=True))
+    expected = set([
         suri(dst_bucket_uri, 'dst_subdir', 'f2'),
         suri(dst_bucket_uri, 'dst_subdir', 'nested', 'f3')
     ])
     self.assertEqual(expected, actual)
 
   def testCopyingBucketSubDirToDir(self):
     """Tests copying a bucket subdir to a directory."""
@@ -1267,26 +1339,14 @@
     self.assertEqual(expected, actual)
 
     actual = set(
         str(u) for u in self._test_wildcard_iterator(suri(
             src_bucket_uri, '**')).IterAll(expand_top_level_buckets=True))
     self.assertEqual(actual, set())
 
-  def testWildcardSrcSubDirMoveDisallowed(self):
-    """Tests moving a bucket subdir specified by wildcard is disallowed."""
-    src_bucket_uri = self.CreateBucket(test_objects=['dir/foo1'])
-    dst_bucket_uri = self.CreateBucket(test_objects=['dir/foo2'])
-    try:
-      self.RunCommand(
-          'mv', [suri(src_bucket_uri, 'dir*'),
-                 suri(dst_bucket_uri, 'dir')])
-      self.fail('Did not get expected CommandException')
-    except CommandException as e:
-      self.assertIn('mv command disallows naming', e.reason)
-
   def testMovingBucketSubDirToNonExistentBucketSubDir(self):
     """Tests moving a bucket subdir to a non-existent bucket subdir."""
     src_bucket = self.CreateBucket(test_objects=[
         'foo', 'src_subdir0/foo2', 'src_subdir0/nested/foo3',
         'src_subdir1/foo2', 'src_subdir1/nested/foo3'
     ])
     dst_bucket = self.CreateBucket()
```

### Comparing `gsutil-5.8/gslib/tests/test_notification.py` & `gsutil-5.9/gslib/tests/test_notification.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_notification_pubsub.py` & `gsutil-5.9/gslib/tests/test_notification_pubsub.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_pap.py` & `gsutil-5.9/gslib/tests/test_pap.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_parallel_cp.py` & `gsutil-5.9/gslib/tests/test_parallel_cp.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_parallelism_framework.py` & `gsutil-5.9/gslib/tests/test_parallelism_framework.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_perfdiag.py` & `gsutil-5.9/gslib/tests/test_perfdiag.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_plurality_checkable_iterator.py` & `gsutil-5.9/gslib/tests/test_plurality_checkable_iterator.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_psc.py` & `gsutil-5.9/gslib/tests/test_psc.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_rb.py` & `gsutil-5.9/gslib/tests/test_rb.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_requester_pays.py` & `gsutil-5.9/gslib/tests/test_requester_pays.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_resumable_streaming.py` & `gsutil-5.9/gslib/tests/test_resumable_streaming.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_retention.py` & `gsutil-5.9/gslib/tests/test_retention.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_retention_util.py` & `gsutil-5.9/gslib/tests/test_retention_util.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_rewrite.py` & `gsutil-5.9/gslib/tests/test_rewrite.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_rm.py` & `gsutil-5.9/gslib/tests/test_rm.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_rpo.py` & `gsutil-5.9/gslib/tests/test_rpo.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_rsync.py` & `gsutil-5.9/gslib/tests/test_rsync.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_rsync_funcs.py` & `gsutil-5.9/gslib/tests/test_rsync_funcs.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_seek_ahead_thread.py` & `gsutil-5.9/gslib/tests/test_seek_ahead_thread.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_setmeta.py` & `gsutil-5.9/gslib/tests/test_setmeta.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_shim_util.py` & `gsutil-5.9/gslib/tests/test_shim_util.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_signurl.py` & `gsutil-5.9/gslib/tests/test_signurl.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_stat.py` & `gsutil-5.9/gslib/tests/test_stat.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_stet_cp.py` & `gsutil-5.9/gslib/tests/test_stet_cp.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_stet_util.py` & `gsutil-5.9/gslib/tests/test_stet_util.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_storage_url.py` & `gsutil-5.9/gslib/tests/test_storage_url.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_tabcomplete.py` & `gsutil-5.9/gslib/tests/test_tabcomplete.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_temporary_file_util.py` & `gsutil-5.9/gslib/tests/test_temporary_file_util.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_trace.py` & `gsutil-5.9/gslib/tests/test_trace.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_tracker_file.py` & `gsutil-5.9/gslib/tests/test_tracker_file.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_ubla.py` & `gsutil-5.9/gslib/tests/test_ubla.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_ui.py` & `gsutil-5.9/gslib/tests/test_ui.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_update.py` & `gsutil-5.9/gslib/tests/test_update.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_user_agent_helper.py` & `gsutil-5.9/gslib/tests/test_user_agent_helper.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_util.py` & `gsutil-5.9/gslib/tests/test_util.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_versioning.py` & `gsutil-5.9/gslib/tests/test_versioning.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_web.py` & `gsutil-5.9/gslib/tests/test_web.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_wildcard_iterator.py` & `gsutil-5.9/gslib/tests/test_wildcard_iterator.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/test_wrapped_credentials.py` & `gsutil-5.9/gslib/tests/test_wrapped_credentials.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/testcase/__init__.py` & `gsutil-5.9/gslib/tests/testcase/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/testcase/base.py` & `gsutil-5.9/gslib/tests/testcase/base.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/testcase/integration_testcase.py` & `gsutil-5.9/gslib/tests/testcase/integration_testcase.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/testcase/unit_testcase.py` & `gsutil-5.9/gslib/tests/testcase/unit_testcase.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tests/util.py` & `gsutil-5.9/gslib/tests/util.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/third_party/iamcredentials_apitools/iamcredentials_v1_client.py` & `gsutil-5.9/gslib/third_party/iamcredentials_apitools/iamcredentials_v1_client.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/third_party/iamcredentials_apitools/iamcredentials_v1_messages.py` & `gsutil-5.9/gslib/third_party/iamcredentials_apitools/iamcredentials_v1_messages.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/third_party/kms_apitools/cloudkms_v1_client.py` & `gsutil-5.9/gslib/third_party/kms_apitools/cloudkms_v1_client.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/third_party/kms_apitools/cloudkms_v1_messages.py` & `gsutil-5.9/gslib/third_party/kms_apitools/cloudkms_v1_messages.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/third_party/kms_apitools/resources.py` & `gsutil-5.9/gslib/third_party/kms_apitools/resources.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/third_party/pubsub_apitools/pubsub_v1_client.py` & `gsutil-5.9/gslib/third_party/pubsub_apitools/pubsub_v1_client.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/third_party/pubsub_apitools/pubsub_v1_messages.py` & `gsutil-5.9/gslib/third_party/pubsub_apitools/pubsub_v1_messages.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/third_party/storage_apitools/credentials_lib.py` & `gsutil-5.9/gslib/third_party/storage_apitools/credentials_lib.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/third_party/storage_apitools/storage_v1_client.py` & `gsutil-5.9/gslib/third_party/storage_apitools/storage_v1_client.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/third_party/storage_apitools/storage_v1_messages.py` & `gsutil-5.9/gslib/third_party/storage_apitools/storage_v1_messages.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/thread_message.py` & `gsutil-5.9/gslib/thread_message.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tracker_file.py` & `gsutil-5.9/gslib/tracker_file.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/tz_utc.py` & `gsutil-5.9/gslib/tz_utc.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/ui_controller.py` & `gsutil-5.9/gslib/ui_controller.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/utils/acl_helper.py` & `gsutil-5.9/gslib/utils/acl_helper.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/utils/arg_helper.py` & `gsutil-5.9/gslib/utils/arg_helper.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/utils/boto_util.py` & `gsutil-5.9/gslib/utils/boto_util.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/utils/cat_helper.py` & `gsutil-5.9/gslib/utils/cat_helper.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/utils/cloud_api_helper.py` & `gsutil-5.9/gslib/utils/cloud_api_helper.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/utils/constants.py` & `gsutil-5.9/gslib/utils/constants.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/utils/copy_helper.py` & `gsutil-5.9/gslib/utils/copy_helper.py`

 * *Files 0% similar despite different names*

```diff
@@ -83,14 +83,15 @@
 from gslib.parallel_tracker_file import ReadParallelUploadTrackerFile
 from gslib.parallel_tracker_file import ValidateParallelCompositeTrackerData
 from gslib.parallel_tracker_file import WriteComponentToParallelUploadTrackerFile
 from gslib.parallel_tracker_file import WriteParallelUploadTrackerFile
 from gslib.progress_callback import FileProgressCallbackHandler
 from gslib.progress_callback import ProgressCallbackWithTimeout
 from gslib.resumable_streaming_upload import ResumableStreamingJsonUploadWrapper
+from gslib import storage_url
 from gslib.storage_url import ContainsWildcard
 from gslib.storage_url import GenerationFromUrlAndString
 from gslib.storage_url import IsCloudSubdirPlaceholder
 from gslib.storage_url import StorageUrlFromString
 from gslib.third_party.storage_apitools import storage_v1_messages as apitools_messages
 from gslib.thread_message import FileMessage
 from gslib.thread_message import RetryableErrorMessage
@@ -332,19 +333,19 @@
 
     # Fill in content type if one was provided.
     dst_object_metadata = apitools_messages.Object(
         name=args.dst_url.object_name,
         bucket=args.dst_url.bucket_name,
         contentType=args.content_type)
 
+    orig_prefer_api = gsutil_api.prefer_api
     try:
       if global_copy_helper_opts.canned_acl:
         # No canned ACL support in JSON, force XML API to be used for
         # upload/copy operations.
-        orig_prefer_api = gsutil_api.prefer_api
         gsutil_api.prefer_api = ApiSelector.XML
       ret = _UploadFileToObject(args.src_url,
                                 fp,
                                 args.file_length,
                                 args.dst_url,
                                 dst_object_metadata,
                                 preconditions,
@@ -553,18 +554,59 @@
   if dst_url.IsFileUrl():
     return not dst_url.IsDirectory()
   else:  # dst_url.IsCloudUrl()
     return (not have_multiple_srcs and not have_existing_dest_subdir and
             dst_url.IsObject())
 
 
+def _IsUrlValidParentDir(url):
+  """Returns True if not FileUrl ending in  relative path symbols.
+
+  A URL is invalid if it is a FileUrl and the parent directory of the file is a
+  relative path symbol. Unix will not allow a file itself to be named with a
+  relative path symbol, but one can be the parent. Notably, "../obj" can lead
+  to unexpected behavior at the copy destination. We examine the pre-recursion
+  "url", which might point to "..", to see if the parent is valid.
+
+  If the user does a recursive copy from a URL, it may not end up
+  the final parent of the copied object. For example, see: "dir/nested_dir/obj".
+
+  If you ran "cp -r dir gs://bucket" from the parent of "dir", then the "url"
+  arg would be "dir", but "nested_dir" would be the parent of "obj".
+  This actually doesn't matter since recursion won't add relative path symbols
+  to the path. However, we still return if "url" is valid because
+  there are cases where we need to copy every parent directory up to
+  "dir" to prevent file name conflicts.
+
+  Args:
+    url: StorageUrl before recursion.
+
+  Returns:
+    Boolean indicating if the "url" is valid as a parent directory.
+  """
+  if not url.IsFileUrl():
+    return True
+
+  url_string_minus_trailing_delimiter = url.versionless_url_string.rstrip(
+      url.delim)
+  _, _, after_last_delimiter = (url_string_minus_trailing_delimiter.rpartition(
+      url.delim))
+
+  return after_last_delimiter not in storage_url.RELATIVE_PATH_SYMBOLS and (
+      after_last_delimiter not in [
+          url.scheme + '://' + symbol
+          for symbol in storage_url.RELATIVE_PATH_SYMBOLS
+      ])
+
+
 def ConstructDstUrl(src_url,
                     exp_src_url,
                     src_url_names_container,
                     have_multiple_srcs,
+                    has_multiple_top_level_srcs,
                     exp_dst_url,
                     have_existing_dest_subdir,
                     recursion_requested,
                     preserve_posix=False):
   """Constructs the destination URL for a given exp_src_url/exp_dst_url pair.
 
   Uses context-dependent naming rules that mimic Linux cp and mv behavior.
@@ -574,14 +616,16 @@
     exp_src_url: Single StorageUrl from wildcard expansion of src_url.
     src_url_names_container: True if src_url names a container (including the
         case of a wildcard-named bucket subdir (like gs://bucket/abc,
         where gs://bucket/abc/* matched some objects).
     have_multiple_srcs: True if this is a multi-source request. This can be
         true if src_url wildcard-expanded to multiple URLs or if there were
         multiple source URLs in the request.
+    has_multiple_top_level_srcs: Same as have_multiple_srcs but measured
+        before recursion.
     exp_dst_url: the expanded StorageUrl requested for the cp destination.
         Final written path is constructed from this plus a context-dependent
         variant of src_url.
     have_existing_dest_subdir: bool indicator whether dest is an existing
       subdirectory.
     recursion_requested: True if a recursive operation has been requested.
     preserve_posix: True if preservation of posix attributes has been requested.
@@ -631,94 +675,86 @@
   # as gs://bucket.
   if ((have_multiple_srcs or src_url_names_container or
        (exp_dst_url.IsFileUrl() and exp_dst_url.IsDirectory())) and
       not exp_dst_url.url_string.endswith(exp_dst_url.delim)):
     exp_dst_url = StorageUrlFromString(
         '%s%s' % (exp_dst_url.url_string, exp_dst_url.delim))
 
+  src_url_is_valid_parent = _IsUrlValidParentDir(src_url)
+  if not src_url_is_valid_parent and has_multiple_top_level_srcs:
+    # To avoid top-level name conflicts, we need to copy the parent dir.
+    # However, that cannot be done because the parent dir has an invalid name.
+    raise InvalidUrlError(
+        'Presence of multiple top-level sources and invalid expanded URL'
+        ' make file name conflicts possible for URL: {}'.format(src_url))
+
   # Making naming behavior match how things work with local Linux cp and mv
   # operations depends on many factors, including whether the destination is a
-  # container, the plurality of the source(s), and whether the mv command is
-  # being used:
-  # 1. For the "mv" command that specifies a non-existent destination subdir,
-  #    renaming should occur at the level of the src subdir, vs appending that
-  #    subdir beneath the dst subdir like is done for copying. For example:
-  #      gsutil rm -r gs://bucket
-  #      gsutil cp -r dir1 gs://bucket
-  #      gsutil cp -r dir2 gs://bucket/subdir1
-  #      gsutil mv gs://bucket/subdir1 gs://bucket/subdir2
-  #    would (if using cp naming behavior) end up with paths like:
-  #      gs://bucket/subdir2/subdir1/dir2/.svn/all-wcprops
-  #    whereas mv naming behavior should result in:
-  #      gs://bucket/subdir2/dir2/.svn/all-wcprops
-  # 2. Copying from directories, buckets, or bucket subdirs should result in
-  #    objects/files mirroring the source directory hierarchy. For example:
-  #      gsutil cp dir1/dir2 gs://bucket
+  # container, and the plurality of the source(s).
+  # 1. Recursively copying from directories, buckets, or bucket subdirs should
+  #    result in objects/files mirroring the source hierarchy. For example:
+  #      gsutil cp -r dir1/dir2 gs://bucket
   #    should create the object gs://bucket/dir2/file2, assuming dir1/dir2
   #    contains file2).
+  #
   #    To be consistent with Linux cp behavior, there's one more wrinkle when
   #    working with subdirs: The resulting object names depend on whether the
   #    destination subdirectory exists. For example, if gs://bucket/subdir
   #    exists, the command:
   #      gsutil cp -r dir1/dir2 gs://bucket/subdir
   #    should create objects named like gs://bucket/subdir/dir2/a/b/c. In
   #    contrast, if gs://bucket/subdir does not exist, this same command
   #    should create objects named like gs://bucket/subdir/a/b/c.
-  # 3. Copying individual files or objects to dirs, buckets or bucket subdirs
+  #
+  #    If there are multiple top-level source items, preserve source parent
+  #    dirs. This is similar to when the destination dir already exists and
+  #    avoids conflicts such as "dir1/f.txt" and "dir2/f.txt" both getting
+  #    copied to "gs://bucket/f.txt". Linux normally errors on these conflicts,
+  #    but we cannot do that because we need to give users the ability to create
+  #    dirs as they copy to the cloud.
+  #
+  #    Note: "mv" is similar to running "cp -r" followed by source deletion.
+  #
+  # 2. Copying individual files or objects to dirs, buckets or bucket subdirs
   #    should result in objects/files named by the final source file name
   #    component. Example:
   #      gsutil cp dir1/*.txt gs://bucket
   #    should create the objects gs://bucket/f1.txt and gs://bucket/f2.txt,
   #    assuming dir1 contains f1.txt and f2.txt.
 
-  recursive_move_to_new_subdir = False
-  if (global_copy_helper_opts.perform_mv and recursion_requested and
-      src_url_names_container and not have_existing_dest_subdir):
-    # Case 1. Handle naming rules for bucket subdir mv. Here we want to
-    # line up the src_url against its expansion, to find the base to build
-    # the new name. For example, running the command:
-    #   gsutil mv gs://bucket/abcd gs://bucket/xyz
-    # when processing exp_src_url=gs://bucket/abcd/123
-    # exp_src_url_tail should become /123
-    # Note: mv.py code disallows wildcard specification of source URL.
-    recursive_move_to_new_subdir = True
-    exp_src_url_tail = (exp_src_url.url_string[len(src_url.url_string):])
-    dst_key_name = '%s/%s' % (exp_dst_url.object_name.rstrip('/'),
-                              exp_src_url_tail.strip('/'))
-
-  elif src_url_names_container and (exp_dst_url.IsCloudUrl() or
-                                    exp_dst_url.IsDirectory()):
-    # Case 2.  Container copy to a destination other than a file.
+  # Ignore the "multiple top-level sources" rule if using double wildcard **
+  # because that treats all files as top-level, in which case the user doesn't
+  # want to preserve directories.
+  preserve_src_top_level_dirs = ('**' not in src_url.versionless_url_string and
+                                 src_url_is_valid_parent and
+                                 (has_multiple_top_level_srcs or
+                                  have_existing_dest_subdir))
+  if preserve_src_top_level_dirs or (src_url_names_container and
+                                     (exp_dst_url.IsCloudUrl() or
+                                      exp_dst_url.IsDirectory())):
+    # Case 1.  Container copy to a destination other than a file.
     # Build dst_key_name from subpath of exp_src_url past
     # where src_url ends. For example, for src_url=gs://bucket/ and
     # exp_src_url=gs://bucket/src_subdir/obj, dst_key_name should be
     # src_subdir/obj.
     src_url_path_sans_final_dir = GetPathBeforeFinalDir(src_url, exp_src_url)
-
     dst_key_name = exp_src_url.versionless_url_string[
         len(src_url_path_sans_final_dir):].lstrip(src_url.delim)
-    # Handle case where dst_url is a non-existent subdir.
-    if not have_existing_dest_subdir:
+
+    if not preserve_src_top_level_dirs:
+      # Only copy file name, not parent dir.
       dst_key_name = dst_key_name.partition(src_url.delim)[-1]
-    # Handle special case where src_url was a directory named with '.' or
-    # './', so that running a command like:
-    #   gsutil cp -r . gs://dest
-    # will produce obj names of the form gs://dest/abc instead of
-    # gs://dest/./abc.
-    if dst_key_name.startswith('.%s' % os.sep):
-      dst_key_name = dst_key_name[2:]
 
   else:
-    # Case 3.
+    # Case 2.
     dst_key_name = exp_src_url.object_name.rpartition(src_url.delim)[-1]
 
-  if (not recursive_move_to_new_subdir and
-      (exp_dst_url.IsFileUrl() or _ShouldTreatDstUrlAsBucketSubDir(
-          have_multiple_srcs, exp_dst_url, have_existing_dest_subdir,
-          src_url_names_container, recursion_requested))):
+  if (exp_dst_url.IsFileUrl() or _ShouldTreatDstUrlAsBucketSubDir(
+      have_multiple_srcs, exp_dst_url, have_existing_dest_subdir,
+      src_url_names_container, recursion_requested)):
     if exp_dst_url.object_name and exp_dst_url.object_name.endswith(
         exp_dst_url.delim):
       dst_key_name = '%s%s%s' % (exp_dst_url.object_name.rstrip(
           exp_dst_url.delim), exp_dst_url.delim, dst_key_name)
     else:
       delim = exp_dst_url.delim if exp_dst_url.object_name else ''
       dst_key_name = '%s%s%s' % (exp_dst_url.object_name or
```

### Comparing `gsutil-5.8/gslib/utils/encryption_helper.py` & `gsutil-5.9/gslib/utils/encryption_helper.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/utils/execution_util.py` & `gsutil-5.9/gslib/utils/execution_util.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/utils/hashing_helper.py` & `gsutil-5.9/gslib/utils/hashing_helper.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/utils/iam_helper.py` & `gsutil-5.9/gslib/utils/iam_helper.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/utils/ls_helper.py` & `gsutil-5.9/gslib/utils/ls_helper.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/utils/metadata_util.py` & `gsutil-5.9/gslib/utils/metadata_util.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/utils/parallelism_framework_util.py` & `gsutil-5.9/gslib/utils/parallelism_framework_util.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/utils/posix_util.py` & `gsutil-5.9/gslib/utils/posix_util.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/utils/retention_util.py` & `gsutil-5.9/gslib/utils/retention_util.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/utils/retry_util.py` & `gsutil-5.9/gslib/utils/retry_util.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/utils/rsync_util.py` & `gsutil-5.9/gslib/utils/rsync_util.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/utils/shim_util.py` & `gsutil-5.9/gslib/utils/shim_util.py`

 * *Files 1% similar despite different names*

```diff
@@ -105,25 +105,25 @@
     # TOTO(b/214245419) Remove this once STET is support and add equivalent
     # mapping above.
     ['stet_binary_path', 'stet_config_path'])
 
 
 def get_flag_from_header(header_key_raw, header_value, unset=False):
   """Returns the gcloud storage flag for the given gsutil header.
-  
+
   Args:
     header_key_raw: The header key.
     header_value: The header value
     unset: If True, the equivalent clear/remove flag is returned instead of the
       setter flag. This only applies to setmeta.
 
   Returns:
     A string representing the equivalent gcloud storage flag and value, if
       translation is possible, else returns None.
-    
+
   Examples:
     >> get_flag_from_header('Cache-Control', 'val')
     --cache-control=val
 
     >> get_flag_from_header('x-goog-meta-foo', 'val')
     --add-custom-metadata=foo=val
 
@@ -166,15 +166,15 @@
   return None
 
 
 class GcloudStorageFlag(object):
 
   def __init__(self, gcloud_flag, supports_output_translation=False):
     """Initializes GcloudStorageFlag.
-    
+
     Args:
       gcloud_flag (str): The name of the gcloud flag.
       support_output_translation (bool): If True, this flag in gcloud storage
         supports printing gsutil formatted output.
     """
     self.gcloud_flag = gcloud_flag
     self.supports_output_translation = supports_output_translation
@@ -184,18 +184,18 @@
   """Mapping to translate gsutil command to its gcloud storage equivalent."""
 
   def __init__(self,
                gcloud_command,
                flag_map,
                supports_output_translation=False):
     """Intalizes GcloudStorageMap.
-    
+
     Args:
       gcloud_command (dict|str): The corresponding name of the command to be
-        called in gcloud. If this command supports sub-commands, then this 
+        called in gcloud. If this command supports sub-commands, then this
         field must be a dict of sub-command-name:GcloudStorageMap pairs.
       flag_map (dict): A dict of str to GcloudStorageFlag. Mapping of gsutil
         flags to their equivalent gcloud storage flag names.
       supports_output_translation (bool): Indicates if the corresponding
         gcloud storage command supports the printing gsutil formatted output.
     """
     self.gcloud_command = gcloud_command
@@ -242,15 +242,15 @@
     port = ':' + s3_port if s3_port else ''
     return 'https://{}{}'.format(s3_host, port)
   return None
 
 
 class GcloudStorageCommandMixin(object):
   """Provides gcloud storage translation functionality.
-  
+
   The command.Command class must inherit this class in order to support
   converting the gsutil command to it's gcloud storage equivalent.
   """
   # Mapping for translating gsutil command to gcloud storage.
   gcloud_storage_map = None
 
   def __init__(self):
@@ -350,15 +350,15 @@
             header_key in PRECONDITIONS_HEADERS):
         flags.append(flag)
       # We ignore the headers for all other cases, so does gsutil.
     return flags
 
   def _translate_boto_config(self):
     """Translates boto config options to gcloud storage properties.
-    
+
     Returns:
       A tuple where first element is a list of flags and the second element is
       a dict representing the env variables that can be set to set the
       gcloud storage properties.
     """
     flags = []
     env_vars = {}
@@ -400,15 +400,15 @@
     return flags, env_vars
 
   def get_gcloud_storage_args(self):
     """Translates the gsutil command flags to gcloud storage flags.
 
     It uses the command_spec.gcloud_storage_map field that provides the
     translation mapping for all the flags.
-    
+
     Returns:
       A list of all the options and arguments that can be used with the
         equivalent gcloud storage command.
     Raises:
       GcloudStorageTranslationError: If a flag or command cannot be translated.
       ValueError: If there is any issue with the mapping provided by
         GcloudStorageMap.
@@ -430,15 +430,15 @@
   def translate_to_gcloud_storage_if_requested(self):
     """Translates the gsutil command to gcloud storage equivalent.
 
     The translated commands get stored at
     self._translated_gcloud_storage_command.
     This command also translate the boto config, which gets stored as a dict
     at self._translated_env_variables
-    
+
     Returns:
       True if the command was successfully translated, else False.
     """
     if self.command_name == 'version' or self.command_name == 'test':
       # Running any command in debug mode will lead to calling gsutil version
       # command. We don't want to translate the version command as this
       # should always reflect the version that gsutil is using.
```

### Comparing `gsutil-5.8/gslib/utils/signurl_helper.py` & `gsutil-5.9/gslib/utils/signurl_helper.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/utils/stet_util.py` & `gsutil-5.9/gslib/utils/stet_util.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/utils/system_util.py` & `gsutil-5.9/gslib/utils/system_util.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/utils/temporary_file_util.py` & `gsutil-5.9/gslib/utils/temporary_file_util.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/utils/text_util.py` & `gsutil-5.9/gslib/utils/text_util.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/utils/translation_helper.py` & `gsutil-5.9/gslib/utils/translation_helper.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/utils/unit_util.py` & `gsutil-5.9/gslib/utils/unit_util.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/utils/update_util.py` & `gsutil-5.9/gslib/utils/update_util.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/utils/user_agent_helper.py` & `gsutil-5.9/gslib/utils/user_agent_helper.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/utils/version_check.py` & `gsutil-5.9/gslib/utils/version_check.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/utils/wrapped_credentials.py` & `gsutil-5.9/gslib/utils/wrapped_credentials.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/.travis.yml` & `gsutil-5.9/gslib/vendored/boto/.travis.yml`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/CONTRIBUTING` & `gsutil-5.9/gslib/vendored/boto/CONTRIBUTING`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/LICENSE` & `gsutil-5.9/gslib/vendored/boto/LICENSE`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/README.rst` & `gsutil-5.9/gslib/vendored/boto/README.rst`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/auth.py` & `gsutil-5.9/gslib/vendored/boto/boto/auth.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/auth_handler.py` & `gsutil-5.9/gslib/vendored/boto/boto/auth_handler.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/awslambda/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/awslambda/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/awslambda/exceptions.py` & `gsutil-5.9/gslib/vendored/boto/boto/awslambda/exceptions.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/awslambda/layer1.py` & `gsutil-5.9/gslib/vendored/boto/boto/awslambda/layer1.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/beanstalk/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/beanstalk/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/beanstalk/exception.py` & `gsutil-5.9/gslib/vendored/boto/boto/beanstalk/exception.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/beanstalk/layer1.py` & `gsutil-5.9/gslib/vendored/boto/boto/beanstalk/layer1.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/beanstalk/response.py` & `gsutil-5.9/gslib/vendored/boto/boto/beanstalk/response.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/beanstalk/wrapper.py` & `gsutil-5.9/gslib/vendored/boto/boto/beanstalk/wrapper.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/cacerts/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/cacerts/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/cacerts/cacerts.txt` & `gsutil-5.9/gslib/vendored/boto/boto/cacerts/cacerts.txt`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/cloudformation/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/cloudformation/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/cloudformation/connection.py` & `gsutil-5.9/gslib/vendored/boto/boto/cloudformation/connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/cloudformation/stack.py` & `gsutil-5.9/gslib/vendored/boto/boto/cloudformation/stack.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/cloudformation/template.py` & `gsutil-5.9/gslib/vendored/boto/boto/cloudformation/template.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/cloudfront/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/cloudfront/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/cloudfront/distribution.py` & `gsutil-5.9/gslib/vendored/boto/boto/cloudfront/distribution.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/cloudfront/exception.py` & `gsutil-5.9/gslib/vendored/boto/boto/cloudfront/exception.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/cloudfront/identity.py` & `gsutil-5.9/gslib/vendored/boto/boto/cloudfront/identity.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/cloudfront/invalidation.py` & `gsutil-5.9/gslib/vendored/boto/boto/cloudfront/invalidation.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/cloudfront/logging.py` & `gsutil-5.9/gslib/vendored/boto/boto/cloudfront/logging.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/cloudfront/object.py` & `gsutil-5.9/gslib/vendored/boto/boto/cloudfront/object.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/cloudfront/origin.py` & `gsutil-5.9/gslib/vendored/boto/boto/cloudfront/origin.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/cloudfront/signers.py` & `gsutil-5.9/gslib/vendored/boto/boto/cloudfront/signers.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/cloudhsm/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/cloudhsm/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/cloudhsm/exceptions.py` & `gsutil-5.9/gslib/vendored/boto/boto/cloudhsm/exceptions.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/cloudhsm/layer1.py` & `gsutil-5.9/gslib/vendored/boto/boto/cloudhsm/layer1.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/cloudsearch/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/cloudsearch/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/cloudsearch/document.py` & `gsutil-5.9/gslib/vendored/boto/boto/cloudsearch/document.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/cloudsearch/domain.py` & `gsutil-5.9/gslib/vendored/boto/boto/cloudsearch/domain.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/cloudsearch/layer1.py` & `gsutil-5.9/gslib/vendored/boto/boto/cloudsearch/layer1.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/cloudsearch/layer2.py` & `gsutil-5.9/gslib/vendored/boto/boto/cloudsearch/layer2.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/cloudsearch/optionstatus.py` & `gsutil-5.9/gslib/vendored/boto/boto/cloudsearch/optionstatus.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/cloudsearch/search.py` & `gsutil-5.9/gslib/vendored/boto/boto/cloudsearch/search.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/cloudsearch/sourceattribute.py` & `gsutil-5.9/gslib/vendored/boto/boto/cloudsearch/sourceattribute.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/cloudsearch2/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/cloudsearch2/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/cloudsearch2/document.py` & `gsutil-5.9/gslib/vendored/boto/boto/cloudsearch2/document.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/cloudsearch2/domain.py` & `gsutil-5.9/gslib/vendored/boto/boto/cloudsearch2/domain.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/cloudsearch2/exceptions.py` & `gsutil-5.9/gslib/vendored/boto/boto/cloudsearch2/exceptions.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/cloudsearch2/layer1.py` & `gsutil-5.9/gslib/vendored/boto/boto/cloudsearch2/layer1.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/cloudsearch2/layer2.py` & `gsutil-5.9/gslib/vendored/boto/boto/cloudsearch2/layer2.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/cloudsearch2/optionstatus.py` & `gsutil-5.9/gslib/vendored/boto/boto/cloudsearch2/optionstatus.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/cloudsearch2/search.py` & `gsutil-5.9/gslib/vendored/boto/boto/cloudsearch2/search.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/cloudsearchdomain/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/cloudsearchdomain/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/cloudsearchdomain/exceptions.py` & `gsutil-5.9/gslib/vendored/boto/boto/cloudsearchdomain/exceptions.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/cloudsearchdomain/layer1.py` & `gsutil-5.9/gslib/vendored/boto/boto/cloudsearchdomain/layer1.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/cloudtrail/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/cloudtrail/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/cloudtrail/exceptions.py` & `gsutil-5.9/gslib/vendored/boto/boto/cloudtrail/exceptions.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/cloudtrail/layer1.py` & `gsutil-5.9/gslib/vendored/boto/boto/cloudtrail/layer1.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/codedeploy/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/codedeploy/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/codedeploy/exceptions.py` & `gsutil-5.9/gslib/vendored/boto/boto/codedeploy/exceptions.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/codedeploy/layer1.py` & `gsutil-5.9/gslib/vendored/boto/boto/codedeploy/layer1.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/cognito/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/cognito/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/cognito/identity/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/cognito/identity/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/cognito/identity/exceptions.py` & `gsutil-5.9/gslib/vendored/boto/boto/cognito/identity/exceptions.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/cognito/identity/layer1.py` & `gsutil-5.9/gslib/vendored/boto/boto/cognito/identity/layer1.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/cognito/sync/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/cognito/sync/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/cognito/sync/exceptions.py` & `gsutil-5.9/gslib/vendored/boto/boto/cognito/sync/exceptions.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/cognito/sync/layer1.py` & `gsutil-5.9/gslib/vendored/boto/boto/cognito/sync/layer1.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/compat.py` & `gsutil-5.9/gslib/vendored/boto/boto/compat.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/configservice/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/configservice/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/configservice/exceptions.py` & `gsutil-5.9/gslib/vendored/boto/boto/configservice/exceptions.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/configservice/layer1.py` & `gsutil-5.9/gslib/vendored/boto/boto/configservice/layer1.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/connection.py` & `gsutil-5.9/gslib/vendored/boto/boto/connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/contrib/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/contrib/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/contrib/ymlmessage.py` & `gsutil-5.9/gslib/vendored/boto/boto/contrib/ymlmessage.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/datapipeline/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/datapipeline/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/datapipeline/exceptions.py` & `gsutil-5.9/gslib/vendored/boto/boto/datapipeline/exceptions.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/datapipeline/layer1.py` & `gsutil-5.9/gslib/vendored/boto/boto/datapipeline/layer1.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/directconnect/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/directconnect/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/directconnect/exceptions.py` & `gsutil-5.9/gslib/vendored/boto/boto/directconnect/exceptions.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/directconnect/layer1.py` & `gsutil-5.9/gslib/vendored/boto/boto/directconnect/layer1.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/dynamodb/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/dynamodb/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/dynamodb/batch.py` & `gsutil-5.9/gslib/vendored/boto/boto/dynamodb/batch.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/dynamodb/condition.py` & `gsutil-5.9/gslib/vendored/boto/boto/dynamodb/condition.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/dynamodb/exceptions.py` & `gsutil-5.9/gslib/vendored/boto/boto/dynamodb/exceptions.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/dynamodb/item.py` & `gsutil-5.9/gslib/vendored/boto/boto/dynamodb/item.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/dynamodb/layer1.py` & `gsutil-5.9/gslib/vendored/boto/boto/dynamodb/layer1.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/dynamodb/layer2.py` & `gsutil-5.9/gslib/vendored/boto/boto/dynamodb/layer2.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/dynamodb/schema.py` & `gsutil-5.9/gslib/vendored/boto/boto/dynamodb/schema.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/dynamodb/table.py` & `gsutil-5.9/gslib/vendored/boto/boto/dynamodb/table.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/dynamodb/types.py` & `gsutil-5.9/gslib/vendored/boto/boto/dynamodb/types.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/dynamodb2/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/dynamodb2/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/dynamodb2/exceptions.py` & `gsutil-5.9/gslib/vendored/boto/boto/dynamodb2/exceptions.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/dynamodb2/fields.py` & `gsutil-5.9/gslib/vendored/boto/boto/dynamodb2/fields.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/dynamodb2/items.py` & `gsutil-5.9/gslib/vendored/boto/boto/dynamodb2/items.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/dynamodb2/layer1.py` & `gsutil-5.9/gslib/vendored/boto/boto/dynamodb2/layer1.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/dynamodb2/results.py` & `gsutil-5.9/gslib/vendored/boto/boto/dynamodb2/results.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/dynamodb2/table.py` & `gsutil-5.9/gslib/vendored/boto/boto/dynamodb2/table.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/dynamodb2/types.py` & `gsutil-5.9/gslib/vendored/boto/boto/dynamodb2/types.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/address.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/address.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/attributes.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/attributes.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/autoscale/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/autoscale/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/autoscale/activity.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/autoscale/activity.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/autoscale/group.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/autoscale/group.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/autoscale/instance.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/autoscale/instance.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/autoscale/launchconfig.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/autoscale/launchconfig.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/autoscale/limits.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/autoscale/limits.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/autoscale/policy.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/autoscale/policy.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/autoscale/request.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/autoscale/request.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/autoscale/scheduled.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/autoscale/scheduled.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/autoscale/tag.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/autoscale/tag.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/blockdevicemapping.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/blockdevicemapping.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/bundleinstance.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/bundleinstance.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/buyreservation.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/buyreservation.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/cloudwatch/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/cloudwatch/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/cloudwatch/alarm.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/cloudwatch/alarm.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/cloudwatch/datapoint.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/cloudwatch/datapoint.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/cloudwatch/dimension.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/cloudwatch/dimension.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/cloudwatch/listelement.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/cloudwatch/listelement.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/cloudwatch/metric.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/cloudwatch/metric.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/connection.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/ec2object.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/ec2object.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/elb/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/elb/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/elb/attributes.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/elb/attributes.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/elb/healthcheck.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/elb/healthcheck.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/elb/instancestate.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/elb/instancestate.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/elb/listelement.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/elb/listelement.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/elb/listener.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/elb/listener.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/elb/loadbalancer.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/elb/loadbalancer.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/elb/policies.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/elb/policies.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/elb/securitygroup.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/elb/securitygroup.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/group.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/group.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/image.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/image.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/instance.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/instance.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/instanceinfo.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/instanceinfo.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/instancestatus.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/instancestatus.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/instancetype.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/instancetype.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/keypair.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/keypair.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/launchspecification.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/launchspecification.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/networkinterface.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/networkinterface.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/placementgroup.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/placementgroup.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/regioninfo.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/regioninfo.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/reservedinstance.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/reservedinstance.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/securitygroup.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/securitygroup.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/snapshot.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/snapshot.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/spotdatafeedsubscription.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/spotdatafeedsubscription.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/spotinstancerequest.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/spotinstancerequest.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/spotpricehistory.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/spotpricehistory.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/tag.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/tag.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/volume.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/volume.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/volumestatus.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/volumestatus.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2/zone.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2/zone.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2containerservice/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2containerservice/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2containerservice/exceptions.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2containerservice/exceptions.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ec2containerservice/layer1.py` & `gsutil-5.9/gslib/vendored/boto/boto/ec2containerservice/layer1.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ecs/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/ecs/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ecs/item.py` & `gsutil-5.9/gslib/vendored/boto/boto/ecs/item.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/elasticache/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/elasticache/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/elasticache/layer1.py` & `gsutil-5.9/gslib/vendored/boto/boto/elasticache/layer1.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/elastictranscoder/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/elastictranscoder/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/elastictranscoder/exceptions.py` & `gsutil-5.9/gslib/vendored/boto/boto/elastictranscoder/exceptions.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/elastictranscoder/layer1.py` & `gsutil-5.9/gslib/vendored/boto/boto/elastictranscoder/layer1.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/emr/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/emr/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/emr/bootstrap_action.py` & `gsutil-5.9/gslib/vendored/boto/boto/emr/bootstrap_action.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/emr/connection.py` & `gsutil-5.9/gslib/vendored/boto/boto/emr/connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/emr/emrobject.py` & `gsutil-5.9/gslib/vendored/boto/boto/emr/emrobject.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/emr/instance_group.py` & `gsutil-5.9/gslib/vendored/boto/boto/emr/instance_group.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/emr/step.py` & `gsutil-5.9/gslib/vendored/boto/boto/emr/step.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/endpoints.json` & `gsutil-5.9/gslib/vendored/boto/boto/endpoints.json`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/endpoints.py` & `gsutil-5.9/gslib/vendored/boto/boto/endpoints.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/exception.py` & `gsutil-5.9/gslib/vendored/boto/boto/exception.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/file/README` & `gsutil-5.9/gslib/vendored/boto/boto/file/README`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/file/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/file/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/file/bucket.py` & `gsutil-5.9/gslib/vendored/boto/boto/file/bucket.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/file/connection.py` & `gsutil-5.9/gslib/vendored/boto/boto/file/connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/file/key.py` & `gsutil-5.9/gslib/vendored/boto/boto/file/key.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/file/simpleresultset.py` & `gsutil-5.9/gslib/vendored/boto/boto/file/simpleresultset.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/fps/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/fps/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/fps/connection.py` & `gsutil-5.9/gslib/vendored/boto/boto/fps/connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/fps/exception.py` & `gsutil-5.9/gslib/vendored/boto/boto/fps/exception.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/fps/response.py` & `gsutil-5.9/gslib/vendored/boto/boto/fps/response.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/glacier/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/glacier/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/glacier/concurrent.py` & `gsutil-5.9/gslib/vendored/boto/boto/glacier/concurrent.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/glacier/exceptions.py` & `gsutil-5.9/gslib/vendored/boto/boto/glacier/exceptions.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/glacier/job.py` & `gsutil-5.9/gslib/vendored/boto/boto/glacier/job.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/glacier/layer1.py` & `gsutil-5.9/gslib/vendored/boto/boto/glacier/layer1.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/glacier/layer2.py` & `gsutil-5.9/gslib/vendored/boto/boto/glacier/layer2.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/glacier/response.py` & `gsutil-5.9/gslib/vendored/boto/boto/glacier/response.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/glacier/utils.py` & `gsutil-5.9/gslib/vendored/boto/boto/glacier/utils.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/glacier/vault.py` & `gsutil-5.9/gslib/vendored/boto/boto/glacier/vault.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/glacier/writer.py` & `gsutil-5.9/gslib/vendored/boto/boto/glacier/writer.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/gs/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/gs/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/gs/acl.py` & `gsutil-5.9/gslib/vendored/boto/boto/gs/acl.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/gs/bucket.py` & `gsutil-5.9/gslib/vendored/boto/boto/gs/bucket.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/gs/bucketlistresultset.py` & `gsutil-5.9/gslib/vendored/boto/boto/gs/bucketlistresultset.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/gs/connection.py` & `gsutil-5.9/gslib/vendored/boto/boto/gs/connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/gs/cors.py` & `gsutil-5.9/gslib/vendored/boto/boto/gs/cors.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/gs/encryptionconfig.py` & `gsutil-5.9/gslib/vendored/boto/boto/gs/encryptionconfig.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/gs/key.py` & `gsutil-5.9/gslib/vendored/boto/boto/gs/key.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/gs/lifecycle.py` & `gsutil-5.9/gslib/vendored/boto/boto/gs/lifecycle.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/gs/resumable_upload_handler.py` & `gsutil-5.9/gslib/vendored/boto/boto/gs/resumable_upload_handler.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/gs/user.py` & `gsutil-5.9/gslib/vendored/boto/boto/gs/user.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/handler.py` & `gsutil-5.9/gslib/vendored/boto/boto/handler.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/https_connection.py` & `gsutil-5.9/gslib/vendored/boto/boto/https_connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/iam/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/iam/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/iam/connection.py` & `gsutil-5.9/gslib/vendored/boto/boto/iam/connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/iam/summarymap.py` & `gsutil-5.9/gslib/vendored/boto/boto/iam/summarymap.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/jsonresponse.py` & `gsutil-5.9/gslib/vendored/boto/boto/jsonresponse.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/kinesis/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/kinesis/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/kinesis/exceptions.py` & `gsutil-5.9/gslib/vendored/boto/boto/kinesis/exceptions.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/kinesis/layer1.py` & `gsutil-5.9/gslib/vendored/boto/boto/kinesis/layer1.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/kms/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/kms/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/kms/exceptions.py` & `gsutil-5.9/gslib/vendored/boto/boto/kms/exceptions.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/kms/layer1.py` & `gsutil-5.9/gslib/vendored/boto/boto/kms/layer1.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/logs/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/logs/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/logs/exceptions.py` & `gsutil-5.9/gslib/vendored/boto/boto/logs/exceptions.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/logs/layer1.py` & `gsutil-5.9/gslib/vendored/boto/boto/logs/layer1.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/machinelearning/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/machinelearning/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/machinelearning/exceptions.py` & `gsutil-5.9/gslib/vendored/boto/boto/machinelearning/exceptions.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/machinelearning/layer1.py` & `gsutil-5.9/gslib/vendored/boto/boto/machinelearning/layer1.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/manage/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/manage/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/manage/cmdshell.py` & `gsutil-5.9/gslib/vendored/boto/boto/manage/cmdshell.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/manage/propget.py` & `gsutil-5.9/gslib/vendored/boto/boto/manage/propget.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/manage/server.py` & `gsutil-5.9/gslib/vendored/boto/boto/manage/server.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/manage/task.py` & `gsutil-5.9/gslib/vendored/boto/boto/manage/task.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/manage/test_manage.py` & `gsutil-5.9/gslib/vendored/boto/boto/manage/test_manage.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/manage/volume.py` & `gsutil-5.9/gslib/vendored/boto/boto/manage/volume.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/mashups/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/mashups/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/mashups/interactive.py` & `gsutil-5.9/gslib/vendored/boto/boto/mashups/interactive.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/mashups/iobject.py` & `gsutil-5.9/gslib/vendored/boto/boto/mashups/iobject.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/mashups/order.py` & `gsutil-5.9/gslib/vendored/boto/boto/mashups/order.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/mashups/server.py` & `gsutil-5.9/gslib/vendored/boto/boto/mashups/server.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/mturk/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/mturk/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/mturk/connection.py` & `gsutil-5.9/gslib/vendored/boto/boto/mturk/connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/mturk/layoutparam.py` & `gsutil-5.9/gslib/vendored/boto/boto/mturk/layoutparam.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/mturk/notification.py` & `gsutil-5.9/gslib/vendored/boto/boto/mturk/notification.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/mturk/price.py` & `gsutil-5.9/gslib/vendored/boto/boto/mturk/price.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/mturk/qualification.py` & `gsutil-5.9/gslib/vendored/boto/boto/mturk/qualification.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/mturk/question.py` & `gsutil-5.9/gslib/vendored/boto/boto/mturk/question.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/mws/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/mws/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/mws/connection.py` & `gsutil-5.9/gslib/vendored/boto/boto/mws/connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/mws/exception.py` & `gsutil-5.9/gslib/vendored/boto/boto/mws/exception.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/mws/response.py` & `gsutil-5.9/gslib/vendored/boto/boto/mws/response.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/opsworks/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/opsworks/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/opsworks/exceptions.py` & `gsutil-5.9/gslib/vendored/boto/boto/opsworks/exceptions.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/opsworks/layer1.py` & `gsutil-5.9/gslib/vendored/boto/boto/opsworks/layer1.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/plugin.py` & `gsutil-5.9/gslib/vendored/boto/boto/plugin.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/provider.py` & `gsutil-5.9/gslib/vendored/boto/boto/provider.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/pyami/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/pyami/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/pyami/bootstrap.py` & `gsutil-5.9/gslib/vendored/boto/boto/pyami/bootstrap.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/pyami/config.py` & `gsutil-5.9/gslib/vendored/boto/boto/pyami/config.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/pyami/copybot.cfg` & `gsutil-5.9/gslib/vendored/boto/boto/pyami/copybot.cfg`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/pyami/copybot.py` & `gsutil-5.9/gslib/vendored/boto/boto/pyami/copybot.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/pyami/helloworld.py` & `gsutil-5.9/gslib/vendored/boto/boto/pyami/helloworld.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/pyami/installers/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/pyami/installers/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/pyami/installers/ubuntu/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/pyami/installers/ubuntu/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/pyami/installers/ubuntu/apache.py` & `gsutil-5.9/gslib/vendored/boto/boto/pyami/installers/ubuntu/apache.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/pyami/installers/ubuntu/ebs.py` & `gsutil-5.9/gslib/vendored/boto/boto/pyami/installers/ubuntu/ebs.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/pyami/installers/ubuntu/installer.py` & `gsutil-5.9/gslib/vendored/boto/boto/pyami/installers/ubuntu/installer.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/pyami/installers/ubuntu/mysql.py` & `gsutil-5.9/gslib/vendored/boto/boto/pyami/installers/ubuntu/mysql.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/pyami/installers/ubuntu/trac.py` & `gsutil-5.9/gslib/vendored/boto/boto/pyami/installers/ubuntu/trac.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/pyami/launch_ami.py` & `gsutil-5.9/gslib/vendored/boto/boto/pyami/launch_ami.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/pyami/scriptbase.py` & `gsutil-5.9/gslib/vendored/boto/boto/pyami/scriptbase.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/pyami/startup.py` & `gsutil-5.9/gslib/vendored/boto/boto/pyami/startup.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/rds/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/rds/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/rds/dbinstance.py` & `gsutil-5.9/gslib/vendored/boto/boto/rds/dbinstance.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/rds/dbsecuritygroup.py` & `gsutil-5.9/gslib/vendored/boto/boto/rds/dbsecuritygroup.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/rds/dbsnapshot.py` & `gsutil-5.9/gslib/vendored/boto/boto/rds/dbsnapshot.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/rds/dbsubnetgroup.py` & `gsutil-5.9/gslib/vendored/boto/boto/rds/dbsubnetgroup.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/rds/event.py` & `gsutil-5.9/gslib/vendored/boto/boto/rds/event.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/rds/logfile.py` & `gsutil-5.9/gslib/vendored/boto/boto/rds/logfile.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/rds/optiongroup.py` & `gsutil-5.9/gslib/vendored/boto/boto/rds/optiongroup.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/rds/parametergroup.py` & `gsutil-5.9/gslib/vendored/boto/boto/rds/parametergroup.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/rds/regioninfo.py` & `gsutil-5.9/gslib/vendored/boto/boto/rds/regioninfo.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/rds/statusinfo.py` & `gsutil-5.9/gslib/vendored/boto/boto/rds/statusinfo.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/rds/vpcsecuritygroupmembership.py` & `gsutil-5.9/gslib/vendored/boto/boto/rds/vpcsecuritygroupmembership.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/rds2/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/rds2/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/rds2/exceptions.py` & `gsutil-5.9/gslib/vendored/boto/boto/rds2/exceptions.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/rds2/layer1.py` & `gsutil-5.9/gslib/vendored/boto/boto/rds2/layer1.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/redshift/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/redshift/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/redshift/exceptions.py` & `gsutil-5.9/gslib/vendored/boto/boto/redshift/exceptions.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/redshift/layer1.py` & `gsutil-5.9/gslib/vendored/boto/boto/redshift/layer1.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/regioninfo.py` & `gsutil-5.9/gslib/vendored/boto/boto/regioninfo.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/requestlog.py` & `gsutil-5.9/gslib/vendored/boto/boto/requestlog.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/resultset.py` & `gsutil-5.9/gslib/vendored/boto/boto/resultset.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/roboto/awsqueryrequest.py` & `gsutil-5.9/gslib/vendored/boto/boto/roboto/awsqueryrequest.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/roboto/awsqueryservice.py` & `gsutil-5.9/gslib/vendored/boto/boto/roboto/awsqueryservice.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/roboto/param.py` & `gsutil-5.9/gslib/vendored/boto/boto/roboto/param.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/route53/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/route53/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/route53/connection.py` & `gsutil-5.9/gslib/vendored/boto/boto/route53/connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/route53/domains/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/route53/domains/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/route53/domains/exceptions.py` & `gsutil-5.9/gslib/vendored/boto/boto/route53/domains/exceptions.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/route53/domains/layer1.py` & `gsutil-5.9/gslib/vendored/boto/boto/route53/domains/layer1.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/route53/exception.py` & `gsutil-5.9/gslib/vendored/boto/boto/route53/exception.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/route53/healthcheck.py` & `gsutil-5.9/gslib/vendored/boto/boto/route53/healthcheck.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/route53/hostedzone.py` & `gsutil-5.9/gslib/vendored/boto/boto/route53/hostedzone.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/route53/record.py` & `gsutil-5.9/gslib/vendored/boto/boto/route53/record.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/route53/status.py` & `gsutil-5.9/gslib/vendored/boto/boto/route53/status.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/route53/zone.py` & `gsutil-5.9/gslib/vendored/boto/boto/route53/zone.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/s3/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/s3/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/s3/acl.py` & `gsutil-5.9/gslib/vendored/boto/boto/s3/acl.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/s3/bucket.py` & `gsutil-5.9/gslib/vendored/boto/boto/s3/bucket.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/s3/bucketlistresultset.py` & `gsutil-5.9/gslib/vendored/boto/boto/s3/bucketlistresultset.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/s3/bucketlogging.py` & `gsutil-5.9/gslib/vendored/boto/boto/s3/bucketlogging.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/s3/connection.py` & `gsutil-5.9/gslib/vendored/boto/boto/s3/connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/s3/cors.py` & `gsutil-5.9/gslib/vendored/boto/boto/s3/cors.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/s3/deletemarker.py` & `gsutil-5.9/gslib/vendored/boto/boto/s3/deletemarker.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/s3/key.py` & `gsutil-5.9/gslib/vendored/boto/boto/s3/key.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/s3/keyfile.py` & `gsutil-5.9/gslib/vendored/boto/boto/s3/keyfile.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/s3/lifecycle.py` & `gsutil-5.9/gslib/vendored/boto/boto/s3/lifecycle.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/s3/multidelete.py` & `gsutil-5.9/gslib/vendored/boto/boto/s3/multidelete.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/s3/multipart.py` & `gsutil-5.9/gslib/vendored/boto/boto/s3/multipart.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/s3/prefix.py` & `gsutil-5.9/gslib/vendored/boto/boto/s3/prefix.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/s3/resumable_download_handler.py` & `gsutil-5.9/gslib/vendored/boto/boto/s3/resumable_download_handler.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/s3/tagging.py` & `gsutil-5.9/gslib/vendored/boto/boto/s3/tagging.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/s3/user.py` & `gsutil-5.9/gslib/vendored/boto/boto/s3/user.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/s3/website.py` & `gsutil-5.9/gslib/vendored/boto/boto/s3/website.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/sdb/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/sdb/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/sdb/connection.py` & `gsutil-5.9/gslib/vendored/boto/boto/sdb/connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/sdb/db/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/sdb/db/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/sdb/db/blob.py` & `gsutil-5.9/gslib/vendored/boto/boto/sdb/db/blob.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/sdb/db/key.py` & `gsutil-5.9/gslib/vendored/boto/boto/sdb/db/key.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/sdb/db/manager/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/sdb/db/manager/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/sdb/db/manager/sdbmanager.py` & `gsutil-5.9/gslib/vendored/boto/boto/sdb/db/manager/sdbmanager.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/sdb/db/manager/xmlmanager.py` & `gsutil-5.9/gslib/vendored/boto/boto/sdb/db/manager/xmlmanager.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/sdb/db/model.py` & `gsutil-5.9/gslib/vendored/boto/boto/sdb/db/model.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/sdb/db/property.py` & `gsutil-5.9/gslib/vendored/boto/boto/sdb/db/property.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/sdb/db/query.py` & `gsutil-5.9/gslib/vendored/boto/boto/sdb/db/query.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/sdb/db/sequence.py` & `gsutil-5.9/gslib/vendored/boto/boto/sdb/db/sequence.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/sdb/db/test_db.py` & `gsutil-5.9/gslib/vendored/boto/boto/sdb/db/test_db.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/sdb/domain.py` & `gsutil-5.9/gslib/vendored/boto/boto/sdb/domain.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/sdb/item.py` & `gsutil-5.9/gslib/vendored/boto/boto/sdb/item.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/sdb/queryresultset.py` & `gsutil-5.9/gslib/vendored/boto/boto/sdb/queryresultset.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/sdb/regioninfo.py` & `gsutil-5.9/gslib/vendored/boto/boto/sdb/regioninfo.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/services/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/services/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/services/bs.py` & `gsutil-5.9/gslib/vendored/boto/boto/services/bs.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/services/message.py` & `gsutil-5.9/gslib/vendored/boto/boto/services/message.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/services/result.py` & `gsutil-5.9/gslib/vendored/boto/boto/services/result.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/services/service.py` & `gsutil-5.9/gslib/vendored/boto/boto/services/service.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/services/servicedef.py` & `gsutil-5.9/gslib/vendored/boto/boto/services/servicedef.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/services/sonofmmm.cfg` & `gsutil-5.9/gslib/vendored/boto/boto/services/sonofmmm.cfg`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/services/sonofmmm.py` & `gsutil-5.9/gslib/vendored/boto/boto/services/sonofmmm.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/services/submit.py` & `gsutil-5.9/gslib/vendored/boto/boto/services/submit.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ses/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/ses/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ses/connection.py` & `gsutil-5.9/gslib/vendored/boto/boto/ses/connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/ses/exceptions.py` & `gsutil-5.9/gslib/vendored/boto/boto/ses/exceptions.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/sns/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/sns/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/sns/connection.py` & `gsutil-5.9/gslib/vendored/boto/boto/sns/connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/sqs/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/sqs/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/sqs/attributes.py` & `gsutil-5.9/gslib/vendored/boto/boto/sqs/attributes.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/sqs/batchresults.py` & `gsutil-5.9/gslib/vendored/boto/boto/sqs/batchresults.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/sqs/bigmessage.py` & `gsutil-5.9/gslib/vendored/boto/boto/sqs/bigmessage.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/sqs/connection.py` & `gsutil-5.9/gslib/vendored/boto/boto/sqs/connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/sqs/jsonmessage.py` & `gsutil-5.9/gslib/vendored/boto/boto/sqs/jsonmessage.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/sqs/message.py` & `gsutil-5.9/gslib/vendored/boto/boto/sqs/message.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/sqs/messageattributes.py` & `gsutil-5.9/gslib/vendored/boto/boto/sqs/messageattributes.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/sqs/queue.py` & `gsutil-5.9/gslib/vendored/boto/boto/sqs/queue.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/sqs/regioninfo.py` & `gsutil-5.9/gslib/vendored/boto/boto/sqs/regioninfo.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/storage_uri.py` & `gsutil-5.9/gslib/vendored/boto/boto/storage_uri.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/sts/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/sts/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/sts/connection.py` & `gsutil-5.9/gslib/vendored/boto/boto/sts/connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/sts/credentials.py` & `gsutil-5.9/gslib/vendored/boto/boto/sts/credentials.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/support/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/support/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/support/exceptions.py` & `gsutil-5.9/gslib/vendored/boto/boto/support/exceptions.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/support/layer1.py` & `gsutil-5.9/gslib/vendored/boto/boto/support/layer1.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/swf/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/swf/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/swf/exceptions.py` & `gsutil-5.9/gslib/vendored/boto/boto/swf/exceptions.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/swf/layer1.py` & `gsutil-5.9/gslib/vendored/boto/boto/swf/layer1.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/swf/layer1_decisions.py` & `gsutil-5.9/gslib/vendored/boto/boto/swf/layer1_decisions.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/swf/layer2.py` & `gsutil-5.9/gslib/vendored/boto/boto/swf/layer2.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/utils.py` & `gsutil-5.9/gslib/vendored/boto/boto/utils.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/vendored/regions/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/vendored/regions/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/vendored/regions/exceptions.py` & `gsutil-5.9/gslib/vendored/boto/boto/vendored/regions/exceptions.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/vendored/regions/regions.py` & `gsutil-5.9/gslib/vendored/boto/boto/vendored/regions/regions.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/vendored/six.py` & `gsutil-5.9/gslib/vendored/boto/boto/vendored/six.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/vpc/__init__.py` & `gsutil-5.9/gslib/vendored/boto/boto/vpc/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/vpc/customergateway.py` & `gsutil-5.9/gslib/vendored/boto/boto/vpc/customergateway.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/vpc/dhcpoptions.py` & `gsutil-5.9/gslib/vendored/boto/boto/vpc/dhcpoptions.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/vpc/internetgateway.py` & `gsutil-5.9/gslib/vendored/boto/boto/vpc/internetgateway.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/vpc/networkacl.py` & `gsutil-5.9/gslib/vendored/boto/boto/vpc/networkacl.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/vpc/routetable.py` & `gsutil-5.9/gslib/vendored/boto/boto/vpc/routetable.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/vpc/subnet.py` & `gsutil-5.9/gslib/vendored/boto/boto/vpc/subnet.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/vpc/vpc.py` & `gsutil-5.9/gslib/vendored/boto/boto/vpc/vpc.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/vpc/vpc_peering_connection.py` & `gsutil-5.9/gslib/vendored/boto/boto/vpc/vpc_peering_connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/vpc/vpnconnection.py` & `gsutil-5.9/gslib/vendored/boto/boto/vpc/vpnconnection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/boto/vpc/vpngateway.py` & `gsutil-5.9/gslib/vendored/boto/boto/vpc/vpngateway.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/pylintrc` & `gsutil-5.9/gslib/vendored/boto/pylintrc`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/setup.py` & `gsutil-5.9/gslib/vendored/boto/setup.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/__init__.py` & `gsutil-5.9/gslib/vendored/boto/tests/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/compat.py` & `gsutil-5.9/gslib/vendored/boto/tests/compat.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/db/test_lists.py` & `gsutil-5.9/gslib/vendored/boto/tests/db/test_lists.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/db/test_password.py` & `gsutil-5.9/gslib/vendored/boto/tests/db/test_password.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/db/test_query.py` & `gsutil-5.9/gslib/vendored/boto/tests/db/test_query.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/db/test_sequence.py` & `gsutil-5.9/gslib/vendored/boto/tests/db/test_sequence.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/devpay/test_s3.py` & `gsutil-5.9/gslib/vendored/boto/tests/devpay/test_s3.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/fps/test.py` & `gsutil-5.9/gslib/vendored/boto/tests/fps/test.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/fps/test_verify_signature.py` & `gsutil-5.9/gslib/vendored/boto/tests/fps/test_verify_signature.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/__init__.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/awslambda/__init__.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/awslambda/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/awslambda/test_awslambda.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/awslambda/test_awslambda.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/beanstalk/test_wrapper.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/beanstalk/test_wrapper.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/cloudformation/__init__.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/cloudformation/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/cloudformation/test_cert_verification.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/cloudformation/test_cert_verification.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/cloudformation/test_connection.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/cloudformation/test_connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/cloudhsm/__init__.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/cloudhsm/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/cloudhsm/test_cloudhsm.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/cloudhsm/test_cloudhsm.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/cloudsearch/__init__.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/cloudsearch/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/cloudsearch/test_cert_verification.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/cloudsearch/test_cert_verification.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/cloudsearch/test_layers.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/cloudsearch/test_layers.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/cloudsearch2/__init__.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/cloudsearch2/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/cloudsearch2/test_cert_verification.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/cloudsearch2/test_cert_verification.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/cloudsearch2/test_layers.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/cloudsearch2/test_layers.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/cloudtrail/test_cert_verification.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/cloudtrail/test_cert_verification.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/cloudtrail/test_cloudtrail.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/cloudtrail/test_cloudtrail.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/codedeploy/__init__.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/codedeploy/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/codedeploy/test_codedeploy.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/codedeploy/test_codedeploy.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/cognito/__init__.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/cognito/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/cognito/identity/__init__.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/cognito/identity/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/cognito/identity/test_cognito_identity.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/cognito/identity/test_cognito_identity.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/cognito/sync/__init__.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/cognito/sync/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/cognito/sync/test_cognito_sync.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/cognito/sync/test_cognito_sync.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/configservice/__init__.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/configservice/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/configservice/test_configservice.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/configservice/test_configservice.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/datapipeline/test_cert_verification.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/datapipeline/test_cert_verification.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/datapipeline/test_layer1.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/datapipeline/test_layer1.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/directconnect/test_directconnect.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/directconnect/test_directconnect.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/dynamodb/__init__.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/dynamodb/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/dynamodb/test_cert_verification.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/dynamodb/test_cert_verification.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/dynamodb/test_layer1.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/dynamodb/test_layer1.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/dynamodb/test_layer2.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/dynamodb/test_layer2.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/dynamodb/test_table.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/dynamodb/test_table.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/dynamodb2/forum_test_data.json` & `gsutil-5.9/gslib/vendored/boto/tests/integration/dynamodb2/forum_test_data.json`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/dynamodb2/test_cert_verification.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/dynamodb2/test_cert_verification.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/dynamodb2/test_highlevel.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/dynamodb2/test_highlevel.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/dynamodb2/test_layer1.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/dynamodb2/test_layer1.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/ec2/__init__.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/ec2/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/ec2/autoscale/__init__.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/ec2/autoscale/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/ec2/autoscale/test_cert_verification.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/ec2/autoscale/test_cert_verification.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/ec2/autoscale/test_connection.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/ec2/autoscale/test_connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/ec2/cloudwatch/__init__.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/ec2/cloudwatch/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/ec2/cloudwatch/test_cert_verification.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/ec2/cloudwatch/test_cert_verification.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/ec2/cloudwatch/test_connection.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/ec2/cloudwatch/test_connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/ec2/elb/__init__.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/ec2/elb/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/ec2/elb/test_cert_verification.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/ec2/elb/test_cert_verification.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/ec2/elb/test_connection.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/ec2/elb/test_connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/ec2/test_cert_verification.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/ec2/test_cert_verification.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/ec2/test_connection.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/ec2/test_connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/ec2/vpc/test_connection.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/ec2/vpc/test_connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/ec2containerservice/__init__.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/ec2containerservice/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/ec2containerservice/test_ec2containerservice.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/ec2containerservice/test_ec2containerservice.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/elasticache/test_layer1.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/elasticache/test_layer1.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/elastictranscoder/test_cert_verification.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/elastictranscoder/test_cert_verification.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/elastictranscoder/test_layer1.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/elastictranscoder/test_layer1.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/emr/__init__.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/emr/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/emr/test_cert_verification.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/emr/test_cert_verification.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/glacier/__init__.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/glacier/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/glacier/test_cert_verification.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/glacier/test_cert_verification.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/glacier/test_layer1.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/glacier/test_layer1.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/glacier/test_layer2.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/glacier/test_layer2.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/gs/cb_test_harness.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/gs/cb_test_harness.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/gs/test_basic.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/gs/test_basic.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/gs/test_generation_conditionals.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/gs/test_generation_conditionals.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/gs/test_resumable_downloads.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/gs/test_resumable_downloads.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/gs/test_resumable_uploads.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/gs/test_resumable_uploads.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/gs/test_storage_uri.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/gs/test_storage_uri.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/gs/test_versioning.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/gs/test_versioning.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/gs/testcase.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/gs/testcase.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/gs/util.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/gs/util.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/iam/__init__.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/iam/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/iam/test_cert_verification.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/iam/test_cert_verification.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/iam/test_connection.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/iam/test_connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/iam/test_password_policy.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/iam/test_password_policy.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/iam/test_policy.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/iam/test_policy.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/kinesis/test_cert_verification.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/kinesis/test_cert_verification.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/kinesis/test_kinesis.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/kinesis/test_kinesis.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/kms/test_kms.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/kms/test_kms.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/logs/test_cert_verification.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/logs/test_cert_verification.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/logs/test_layer1.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/logs/test_layer1.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/mws/test.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/mws/test.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/opsworks/test_layer1.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/opsworks/test_layer1.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/rds/__init__.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/rds/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/rds/test_cert_verification.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/rds/test_cert_verification.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/rds/test_db_subnet_group.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/rds/test_db_subnet_group.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/rds/test_promote_modify.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/rds/test_promote_modify.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/rds2/__init__.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/rds2/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/rds2/test_cert_verification.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/rds2/test_cert_verification.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/rds2/test_connection.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/rds2/test_connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/redshift/test_cert_verification.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/redshift/test_cert_verification.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/redshift/test_layer1.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/redshift/test_layer1.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/route53/__init__.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/route53/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/route53/domains/__init__.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/route53/domains/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/route53/domains/test_route53domains.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/route53/domains/test_route53domains.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/route53/test_alias_resourcerecordsets.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/route53/test_alias_resourcerecordsets.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/route53/test_cert_verification.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/route53/test_cert_verification.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/route53/test_health_check.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/route53/test_health_check.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/route53/test_resourcerecordsets.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/route53/test_resourcerecordsets.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/route53/test_zone.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/route53/test_zone.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/s3/__init__.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/s3/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/s3/mock_storage_service.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/s3/mock_storage_service.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/s3/other_cacerts.txt` & `gsutil-5.9/gslib/vendored/boto/tests/integration/s3/other_cacerts.txt`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/s3/test_bucket.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/s3/test_bucket.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/s3/test_cert_verification.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/s3/test_cert_verification.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/s3/test_connect_to_region.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/s3/test_connect_to_region.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/s3/test_connection.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/s3/test_connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/s3/test_cors.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/s3/test_cors.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/s3/test_encryption.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/s3/test_encryption.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/s3/test_https_cert_validation.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/s3/test_https_cert_validation.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/s3/test_key.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/s3/test_key.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/s3/test_mfa.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/s3/test_mfa.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/s3/test_multidelete.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/s3/test_multidelete.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/s3/test_multipart.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/s3/test_multipart.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/s3/test_pool.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/s3/test_pool.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/s3/test_versioning.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/s3/test_versioning.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/sdb/__init__.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/sdb/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/sdb/test_cert_verification.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/sdb/test_cert_verification.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/sdb/test_connection.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/sdb/test_connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/ses/test_cert_verification.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/ses/test_cert_verification.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/ses/test_connection.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/ses/test_connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/sns/__init__.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/sns/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/sns/test_cert_verification.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/sns/test_cert_verification.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/sns/test_connection.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/sns/test_connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/sns/test_sns_sqs_subscription.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/sns/test_sns_sqs_subscription.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/sqs/__init__.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/sqs/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/sqs/test_bigmessage.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/sqs/test_bigmessage.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/sqs/test_cert_verification.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/sqs/test_cert_verification.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/sqs/test_connection.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/sqs/test_connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/storage_uri/test_storage_uri.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/storage_uri/test_storage_uri.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/sts/__init__.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/sts/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/sts/test_cert_verification.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/sts/test_cert_verification.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/sts/test_session_token.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/sts/test_session_token.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/support/test_cert_verification.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/support/test_cert_verification.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/support/test_layer1.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/support/test_layer1.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/swf/test_cert_verification.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/swf/test_cert_verification.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/swf/test_layer1.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/swf/test_layer1.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/integration/swf/test_layer1_workflow_execution.py` & `gsutil-5.9/gslib/vendored/boto/tests/integration/swf/test_layer1_workflow_execution.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/mturk/_init_environment.py` & `gsutil-5.9/gslib/vendored/boto/tests/mturk/_init_environment.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/mturk/all_tests.py` & `gsutil-5.9/gslib/vendored/boto/tests/mturk/all_tests.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/mturk/cleanup_tests.py` & `gsutil-5.9/gslib/vendored/boto/tests/mturk/cleanup_tests.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/mturk/common.py` & `gsutil-5.9/gslib/vendored/boto/tests/mturk/common.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/mturk/create_free_text_question_regex.doctest` & `gsutil-5.9/gslib/vendored/boto/tests/mturk/create_free_text_question_regex.doctest`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/mturk/create_hit.doctest` & `gsutil-5.9/gslib/vendored/boto/tests/mturk/create_hit.doctest`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/mturk/create_hit_binary.doctest` & `gsutil-5.9/gslib/vendored/boto/tests/mturk/create_hit_binary.doctest`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/mturk/create_hit_external.py` & `gsutil-5.9/gslib/vendored/boto/tests/mturk/create_hit_external.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/mturk/create_hit_from_hit_type.doctest` & `gsutil-5.9/gslib/vendored/boto/tests/mturk/create_hit_from_hit_type.doctest`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/mturk/create_hit_with_qualifications.py` & `gsutil-5.9/gslib/vendored/boto/tests/mturk/create_hit_with_qualifications.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/mturk/hit_persistence.py` & `gsutil-5.9/gslib/vendored/boto/tests/mturk/hit_persistence.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/mturk/reviewable_hits.doctest` & `gsutil-5.9/gslib/vendored/boto/tests/mturk/reviewable_hits.doctest`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/mturk/selenium_support.py` & `gsutil-5.9/gslib/vendored/boto/tests/mturk/selenium_support.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/test.py` & `gsutil-5.9/gslib/vendored/boto/tests/test.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/__init__.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/auth/test_sigv4.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/auth/test_sigv4.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/auth/test_stsanon.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/auth/test_stsanon.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/awslambda/__init__.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/awslambda/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/awslambda/test_awslambda.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/awslambda/test_awslambda.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/beanstalk/test_exception.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/beanstalk/test_exception.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/beanstalk/test_layer1.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/beanstalk/test_layer1.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/cloudformation/test_connection.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/cloudformation/test_connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/cloudformation/test_stack.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/cloudformation/test_stack.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/cloudfront/test_connection.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/cloudfront/test_connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/cloudfront/test_distribution.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/cloudfront/test_distribution.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/cloudfront/test_invalidation.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/cloudfront/test_invalidation.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/cloudfront/test_invalidation_list.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/cloudfront/test_invalidation_list.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/cloudfront/test_signed_urls.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/cloudfront/test_signed_urls.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/cloudsearch/test_connection.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/cloudsearch/test_connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/cloudsearch/test_document.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/cloudsearch/test_document.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/cloudsearch/test_exceptions.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/cloudsearch/test_exceptions.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/cloudsearch/test_search.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/cloudsearch/test_search.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/cloudsearch2/__init__.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/cloudsearch2/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/cloudsearch2/test_connection.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/cloudsearch2/test_connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/cloudsearch2/test_document.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/cloudsearch2/test_document.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/cloudsearch2/test_exceptions.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/cloudsearch2/test_exceptions.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/cloudsearch2/test_search.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/cloudsearch2/test_search.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/cloudsearchdomain/test_cloudsearchdomain.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/cloudsearchdomain/test_cloudsearchdomain.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/cloudtrail/test_layer1.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/cloudtrail/test_layer1.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/data/new_endpoints.json` & `gsutil-5.9/gslib/vendored/boto/tests/unit/data/new_endpoints.json`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/data/old_endpoints.json` & `gsutil-5.9/gslib/vendored/boto/tests/unit/data/old_endpoints.json`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/directconnect/test_layer1.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/directconnect/test_layer1.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/dynamodb/test_batch.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/dynamodb/test_batch.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/dynamodb/test_layer2.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/dynamodb/test_layer2.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/dynamodb/test_types.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/dynamodb/test_types.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/dynamodb2/test_layer1.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/dynamodb2/test_layer1.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/dynamodb2/test_table.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/dynamodb2/test_table.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/ec2/autoscale/test_group.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/ec2/autoscale/test_group.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/ec2/cloudwatch/test_connection.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/ec2/cloudwatch/test_connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/ec2/elb/test_attribute.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/ec2/elb/test_attribute.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/ec2/elb/test_listener.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/ec2/elb/test_listener.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/ec2/elb/test_loadbalancer.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/ec2/elb/test_loadbalancer.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/ec2/test_address.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/ec2/test_address.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/ec2/test_blockdevicemapping.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/ec2/test_blockdevicemapping.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/ec2/test_connection.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/ec2/test_connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/ec2/test_ec2object.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/ec2/test_ec2object.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/ec2/test_instance.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/ec2/test_instance.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/ec2/test_instancestatus.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/ec2/test_instancestatus.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/ec2/test_instancetype.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/ec2/test_instancetype.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/ec2/test_networkinterface.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/ec2/test_networkinterface.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/ec2/test_reservedinstance.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/ec2/test_reservedinstance.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/ec2/test_securitygroup.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/ec2/test_securitygroup.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/ec2/test_snapshot.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/ec2/test_snapshot.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/ec2/test_spotinstance.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/ec2/test_spotinstance.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/ec2/test_volume.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/ec2/test_volume.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/ec2containerservice/test_connection.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/ec2containerservice/test_connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/ecs/test_connection.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/ecs/test_connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/elasticache/test_api_interface.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/elasticache/test_api_interface.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/emr/test_connection.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/emr/test_connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/emr/test_emr_responses.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/emr/test_emr_responses.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/emr/test_instance_group_args.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/emr/test_instance_group_args.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/glacier/test_concurrent.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/glacier/test_concurrent.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/glacier/test_job.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/glacier/test_job.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/glacier/test_layer1.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/glacier/test_layer1.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/glacier/test_layer2.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/glacier/test_layer2.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/glacier/test_response.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/glacier/test_response.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/glacier/test_utils.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/glacier/test_utils.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/glacier/test_vault.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/glacier/test_vault.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/glacier/test_writer.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/glacier/test_writer.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/iam/test_connection.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/iam/test_connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/iam/test_policy.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/iam/test_policy.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/kinesis/test_kinesis.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/kinesis/test_kinesis.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/kms/__init__.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/kms/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/kms/test_kms.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/kms/test_kms.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/logs/test_layer1.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/logs/test_layer1.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/machinelearning/__init__.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/machinelearning/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/machinelearning/test_machinelearning.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/machinelearning/test_machinelearning.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/manage/test_ssh.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/manage/test_ssh.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/mturk/test_connection.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/mturk/test_connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/mturk/test_locale_qualification_in.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/mturk/test_locale_qualification_in.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/mturk/test_locale_qualification_notin.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/mturk/test_locale_qualification_notin.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/mturk/test_qualification_doesnotexist.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/mturk/test_qualification_doesnotexist.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/mturk/test_qualification_exists.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/mturk/test_qualification_exists.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/mturk/test_qualification_qualtypewithscore_in.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/mturk/test_qualification_qualtypewithscore_in.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/mws/test_connection.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/mws/test_connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/mws/test_response.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/mws/test_response.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/provider/test_provider.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/provider/test_provider.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/pyami/test_config.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/pyami/test_config.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/rds/test_connection.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/rds/test_connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/rds/test_snapshot.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/rds/test_snapshot.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/rds2/test_connection.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/rds2/test_connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/route53/test_connection.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/route53/test_connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/route53/test_zone.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/route53/test_zone.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/s3/test_bucket.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/s3/test_bucket.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/s3/test_bucketlistresultset.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/s3/test_bucketlistresultset.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/s3/test_connection.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/s3/test_connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/s3/test_cors_configuration.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/s3/test_cors_configuration.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/s3/test_key.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/s3/test_key.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/s3/test_keyfile.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/s3/test_keyfile.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/s3/test_lifecycle.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/s3/test_lifecycle.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/s3/test_tagging.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/s3/test_tagging.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/s3/test_uri.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/s3/test_uri.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/s3/test_website.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/s3/test_website.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/ses/test_identity.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/ses/test_identity.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/sns/test_connection.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/sns/test_connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/sqs/test_connection.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/sqs/test_connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/sqs/test_message.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/sqs/test_message.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/sqs/test_queue.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/sqs/test_queue.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/sts/test_connection.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/sts/test_connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/sts/test_credentials.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/sts/test_credentials.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/swf/test_layer1_decisions.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/swf/test_layer1_decisions.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/swf/test_layer2_actors.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/swf/test_layer2_actors.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/swf/test_layer2_base.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/swf/test_layer2_base.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/swf/test_layer2_domain.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/swf/test_layer2_domain.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/swf/test_layer2_types.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/swf/test_layer2_types.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/test_connect_to_region.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/test_connect_to_region.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/test_connection.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/test_connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/test_endpoints.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/test_endpoints.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/test_exception.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/test_exception.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/test_regioninfo.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/test_regioninfo.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/utils/test_utils.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/utils/test_utils.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/vpc/test_customergateway.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/vpc/test_customergateway.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/vpc/test_dhcpoptions.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/vpc/test_dhcpoptions.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/vpc/test_internetgateway.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/vpc/test_internetgateway.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/vpc/test_networkacl.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/vpc/test_networkacl.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/vpc/test_routetable.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/vpc/test_routetable.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/vpc/test_subnet.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/vpc/test_subnet.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/vpc/test_vpc.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/vpc/test_vpc.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/vpc/test_vpc_peering_connection.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/vpc/test_vpc_peering_connection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/vpc/test_vpnconnection.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/vpc/test_vpnconnection.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tests/unit/vpc/test_vpngateway.py` & `gsutil-5.9/gslib/vendored/boto/tests/unit/vpc/test_vpngateway.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/boto/tox.ini` & `gsutil-5.9/gslib/vendored/boto/tox.ini`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/.travis.yml` & `gsutil-5.9/gslib/vendored/oauth2client/.travis.yml`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/CHANGELOG.md` & `gsutil-5.9/gslib/vendored/oauth2client/CHANGELOG.md`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/CODE_OF_CONDUCT.md` & `gsutil-5.9/gslib/vendored/oauth2client/CODE_OF_CONDUCT.md`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/CONTRIBUTING.md` & `gsutil-5.9/gslib/vendored/oauth2client/CONTRIBUTING.md`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/CONTRIBUTORS.md` & `gsutil-5.9/gslib/vendored/oauth2client/CONTRIBUTORS.md`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/LICENSE` & `gsutil-5.9/gslib/vendored/oauth2client/LICENSE`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/README.md` & `gsutil-5.9/gslib/vendored/oauth2client/README.md`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/docs/Makefile` & `gsutil-5.9/gslib/vendored/oauth2client/docs/Makefile`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/docs/_static/favicon.ico` & `gsutil-5.9/gslib/vendored/oauth2client/docs/_static/favicon.ico`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/docs/_static/google_logo.png` & `gsutil-5.9/gslib/vendored/oauth2client/docs/_static/google_logo.png`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/docs/conf.py` & `gsutil-5.9/gslib/vendored/oauth2client/docs/conf.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/docs/index.rst` & `gsutil-5.9/gslib/vendored/oauth2client/docs/index.rst`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/docs/source/oauth2client.contrib.django_util.rst` & `gsutil-5.9/gslib/vendored/oauth2client/docs/source/oauth2client.contrib.django_util.rst`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/docs/source/oauth2client.contrib.rst` & `gsutil-5.9/gslib/vendored/oauth2client/docs/source/oauth2client.contrib.rst`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/oauth2client/__init__.py` & `gsutil-5.9/gslib/vendored/oauth2client/oauth2client/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/oauth2client/_helpers.py` & `gsutil-5.9/gslib/vendored/oauth2client/oauth2client/_helpers.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/oauth2client/_openssl_crypt.py` & `gsutil-5.9/gslib/vendored/oauth2client/oauth2client/_openssl_crypt.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/oauth2client/_pkce.py` & `gsutil-5.9/gslib/vendored/oauth2client/oauth2client/_pkce.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/oauth2client/_pure_python_crypt.py` & `gsutil-5.9/gslib/vendored/oauth2client/oauth2client/_pure_python_crypt.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/oauth2client/_pycrypto_crypt.py` & `gsutil-5.9/gslib/vendored/oauth2client/oauth2client/_pycrypto_crypt.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/oauth2client/client.py` & `gsutil-5.9/gslib/vendored/oauth2client/oauth2client/client.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/oauth2client/clientsecrets.py` & `gsutil-5.9/gslib/vendored/oauth2client/oauth2client/clientsecrets.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/oauth2client/contrib/_appengine_ndb.py` & `gsutil-5.9/gslib/vendored/oauth2client/oauth2client/contrib/_appengine_ndb.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/oauth2client/contrib/_metadata.py` & `gsutil-5.9/gslib/vendored/oauth2client/oauth2client/contrib/_metadata.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/oauth2client/contrib/appengine.py` & `gsutil-5.9/gslib/vendored/oauth2client/oauth2client/contrib/appengine.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/oauth2client/contrib/devshell.py` & `gsutil-5.9/gslib/vendored/oauth2client/oauth2client/contrib/devshell.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/oauth2client/contrib/dictionary_storage.py` & `gsutil-5.9/gslib/vendored/oauth2client/oauth2client/contrib/dictionary_storage.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/oauth2client/contrib/django_util/__init__.py` & `gsutil-5.9/gslib/vendored/oauth2client/oauth2client/contrib/django_util/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/oauth2client/contrib/django_util/apps.py` & `gsutil-5.9/gslib/vendored/oauth2client/oauth2client/contrib/django_util/apps.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/oauth2client/contrib/django_util/decorators.py` & `gsutil-5.9/gslib/vendored/oauth2client/oauth2client/contrib/django_util/decorators.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/oauth2client/contrib/django_util/models.py` & `gsutil-5.9/gslib/vendored/oauth2client/oauth2client/contrib/django_util/models.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/oauth2client/contrib/django_util/signals.py` & `gsutil-5.9/gslib/vendored/oauth2client/oauth2client/contrib/django_util/signals.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/oauth2client/contrib/django_util/site.py` & `gsutil-5.9/gslib/vendored/oauth2client/oauth2client/contrib/django_util/site.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/oauth2client/contrib/django_util/storage.py` & `gsutil-5.9/gslib/vendored/oauth2client/oauth2client/contrib/django_util/storage.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/oauth2client/contrib/django_util/views.py` & `gsutil-5.9/gslib/vendored/oauth2client/oauth2client/contrib/django_util/views.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/oauth2client/contrib/flask_util.py` & `gsutil-5.9/gslib/vendored/oauth2client/oauth2client/contrib/flask_util.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/oauth2client/contrib/gce.py` & `gsutil-5.9/gslib/vendored/oauth2client/oauth2client/contrib/gce.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/oauth2client/contrib/keyring_storage.py` & `gsutil-5.9/gslib/vendored/oauth2client/oauth2client/contrib/keyring_storage.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/oauth2client/contrib/multiprocess_file_storage.py` & `gsutil-5.9/gslib/vendored/oauth2client/oauth2client/contrib/multiprocess_file_storage.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/oauth2client/contrib/sqlalchemy.py` & `gsutil-5.9/gslib/vendored/oauth2client/oauth2client/contrib/sqlalchemy.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/oauth2client/contrib/xsrfutil.py` & `gsutil-5.9/gslib/vendored/oauth2client/oauth2client/contrib/xsrfutil.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/oauth2client/crypt.py` & `gsutil-5.9/gslib/vendored/oauth2client/oauth2client/crypt.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/oauth2client/file.py` & `gsutil-5.9/gslib/vendored/oauth2client/oauth2client/file.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/oauth2client/service_account.py` & `gsutil-5.9/gslib/vendored/oauth2client/oauth2client/service_account.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/oauth2client/tools.py` & `gsutil-5.9/gslib/vendored/oauth2client/oauth2client/tools.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/oauth2client/transport.py` & `gsutil-5.9/gslib/vendored/oauth2client/oauth2client/transport.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/samples/call_compute_service.py` & `gsutil-5.9/gslib/vendored/oauth2client/samples/call_compute_service.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/samples/googleappengine/call_compute_service_from_gae.py` & `gsutil-5.9/gslib/vendored/oauth2client/samples/googleappengine/call_compute_service_from_gae.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/samples/oauth2_for_devices.py` & `gsutil-5.9/gslib/vendored/oauth2client/samples/oauth2_for_devices.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/scripts/build_docs.sh` & `gsutil-5.9/gslib/vendored/oauth2client/scripts/build_docs.sh`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/scripts/install.sh` & `gsutil-5.9/gslib/vendored/oauth2client/scripts/install.sh`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/scripts/run.sh` & `gsutil-5.9/gslib/vendored/oauth2client/scripts/run.sh`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/scripts/run_gce_system_tests.py` & `gsutil-5.9/gslib/vendored/oauth2client/scripts/run_gce_system_tests.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/scripts/run_system_tests.py` & `gsutil-5.9/gslib/vendored/oauth2client/scripts/run_system_tests.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/scripts/run_system_tests.sh` & `gsutil-5.9/gslib/vendored/oauth2client/scripts/run_system_tests.sh`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/setup.py` & `gsutil-5.9/gslib/vendored/oauth2client/setup.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/tests/conftest.py` & `gsutil-5.9/gslib/vendored/oauth2client/tests/conftest.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/tests/contrib/appengine/conftest.py` & `gsutil-5.9/gslib/vendored/oauth2client/tests/contrib/appengine/conftest.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/tests/contrib/appengine/test__appengine_ndb.py` & `gsutil-5.9/gslib/vendored/oauth2client/tests/contrib/appengine/test__appengine_ndb.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/tests/contrib/appengine/test_appengine.py` & `gsutil-5.9/gslib/vendored/oauth2client/tests/contrib/appengine/test_appengine.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/tests/contrib/django_util/__init__.py` & `gsutil-5.9/gslib/vendored/oauth2client/tests/contrib/django_util/__init__.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/tests/contrib/django_util/apps.py` & `gsutil-5.9/gslib/vendored/oauth2client/tests/contrib/django_util/apps.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/tests/contrib/django_util/models.py` & `gsutil-5.9/gslib/vendored/oauth2client/tests/contrib/django_util/models.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/tests/contrib/django_util/settings.py` & `gsutil-5.9/gslib/vendored/oauth2client/tests/contrib/django_util/settings.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/tests/contrib/django_util/test_decorators.py` & `gsutil-5.9/gslib/vendored/oauth2client/tests/contrib/django_util/test_decorators.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/tests/contrib/django_util/test_django_models.py` & `gsutil-5.9/gslib/vendored/oauth2client/tests/contrib/django_util/test_django_models.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/tests/contrib/django_util/test_django_storage.py` & `gsutil-5.9/gslib/vendored/oauth2client/tests/contrib/django_util/test_django_storage.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/tests/contrib/django_util/test_django_util.py` & `gsutil-5.9/gslib/vendored/oauth2client/tests/contrib/django_util/test_django_util.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/tests/contrib/django_util/test_views.py` & `gsutil-5.9/gslib/vendored/oauth2client/tests/contrib/django_util/test_views.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/tests/contrib/test_devshell.py` & `gsutil-5.9/gslib/vendored/oauth2client/tests/contrib/test_devshell.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/tests/contrib/test_dictionary_storage.py` & `gsutil-5.9/gslib/vendored/oauth2client/tests/contrib/test_dictionary_storage.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/tests/contrib/test_flask_util.py` & `gsutil-5.9/gslib/vendored/oauth2client/tests/contrib/test_flask_util.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/tests/contrib/test_gce.py` & `gsutil-5.9/gslib/vendored/oauth2client/tests/contrib/test_gce.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/tests/contrib/test_keyring_storage.py` & `gsutil-5.9/gslib/vendored/oauth2client/tests/contrib/test_keyring_storage.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/tests/contrib/test_metadata.py` & `gsutil-5.9/gslib/vendored/oauth2client/tests/contrib/test_metadata.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/tests/contrib/test_multiprocess_file_storage.py` & `gsutil-5.9/gslib/vendored/oauth2client/tests/contrib/test_multiprocess_file_storage.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/tests/contrib/test_sqlalchemy.py` & `gsutil-5.9/gslib/vendored/oauth2client/tests/contrib/test_sqlalchemy.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/tests/contrib/test_xsrfutil.py` & `gsutil-5.9/gslib/vendored/oauth2client/tests/contrib/test_xsrfutil.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/tests/data/certs.json` & `gsutil-5.9/gslib/vendored/oauth2client/tests/data/certs.json`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/tests/data/gcloud/application_default_credentials.json` & `gsutil-5.9/gslib/vendored/oauth2client/tests/data/gcloud/application_default_credentials.json`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/tests/data/gcloud/application_default_credentials_malformed_1.json` & `gsutil-5.9/gslib/vendored/oauth2client/tests/data/gcloud/application_default_credentials_malformed_1.json`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/tests/data/gcloud/application_default_credentials_malformed_2.json` & `gsutil-5.9/gslib/vendored/oauth2client/tests/data/gcloud/application_default_credentials_malformed_2.json`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/tests/data/gcloud/application_default_credentials_malformed_3.json` & `gsutil-5.9/gslib/vendored/oauth2client/tests/data/gcloud/application_default_credentials_malformed_3.json`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/tests/data/key.json.enc` & `gsutil-5.9/gslib/vendored/oauth2client/tests/data/key.json.enc`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/tests/data/key.p12.enc` & `gsutil-5.9/gslib/vendored/oauth2client/tests/data/key.p12.enc`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/tests/data/pem_from_pkcs12.pem` & `gsutil-5.9/gslib/vendored/oauth2client/tests/data/pem_from_pkcs12.pem`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/tests/data/pem_from_pkcs12_alternate.pem` & `gsutil-5.9/gslib/vendored/oauth2client/tests/data/pem_from_pkcs12_alternate.pem`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/tests/data/privatekey.p12` & `gsutil-5.9/gslib/vendored/oauth2client/tests/data/privatekey.p12`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/tests/data/privatekey.pem` & `gsutil-5.9/gslib/vendored/oauth2client/tests/data/privatekey.pem`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/tests/data/public_cert.pem` & `gsutil-5.9/gslib/vendored/oauth2client/tests/data/public_cert.pem`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/tests/http_mock.py` & `gsutil-5.9/gslib/vendored/oauth2client/tests/http_mock.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/tests/test__helpers.py` & `gsutil-5.9/gslib/vendored/oauth2client/tests/test__helpers.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/tests/test__pkce.py` & `gsutil-5.9/gslib/vendored/oauth2client/tests/test__pkce.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/tests/test__pure_python_crypt.py` & `gsutil-5.9/gslib/vendored/oauth2client/tests/test__pure_python_crypt.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/tests/test__pycrypto_crypt.py` & `gsutil-5.9/gslib/vendored/oauth2client/tests/test__pycrypto_crypt.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/tests/test_client.py` & `gsutil-5.9/gslib/vendored/oauth2client/tests/test_client.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/tests/test_clientsecrets.py` & `gsutil-5.9/gslib/vendored/oauth2client/tests/test_clientsecrets.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/tests/test_crypt.py` & `gsutil-5.9/gslib/vendored/oauth2client/tests/test_crypt.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/tests/test_file.py` & `gsutil-5.9/gslib/vendored/oauth2client/tests/test_file.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/tests/test_jwt.py` & `gsutil-5.9/gslib/vendored/oauth2client/tests/test_jwt.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/tests/test_service_account.py` & `gsutil-5.9/gslib/vendored/oauth2client/tests/test_service_account.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/tests/test_tools.py` & `gsutil-5.9/gslib/vendored/oauth2client/tests/test_tools.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/tests/test_transport.py` & `gsutil-5.9/gslib/vendored/oauth2client/tests/test_transport.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/vendored/oauth2client/tox.ini` & `gsutil-5.9/gslib/vendored/oauth2client/tox.ini`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gslib/wildcard_iterator.py` & `gsutil-5.9/gslib/wildcard_iterator.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gsutil` & `gsutil-5.9/gsutil`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gsutil.egg-info/PKG-INFO` & `gsutil-5.9/gsutil.egg-info/PKG-INFO`

 * *Files 4% similar despite different names*

```diff
@@ -1,16 +1,16 @@
 Metadata-Version: 2.1
 Name: gsutil
-Version: 5.8
+Version: 5.9
 Summary: A command line tool for interacting with cloud storage services.
 Home-page: https://cloud.google.com/storage/docs/gsutil
+Download-URL: https://cloud.google.com/storage/docs/gsutil_install
 Author: Google Inc.
 Author-email: buganizer-system+187143@google.com
 License: Apache 2.0
-Download-URL: https://cloud.google.com/storage/docs/gsutil_install
 Platform: any
 Classifier: Development Status :: 5 - Production/Stable
 Classifier: Environment :: Console
 Classifier: Intended Audience :: Developers
 Classifier: Intended Audience :: System Administrators
 Classifier: License :: OSI Approved :: Apache Software License
 Classifier: Natural Language :: English
```

### Comparing `gsutil-5.8/gsutil.egg-info/SOURCES.txt` & `gsutil-5.9/gsutil.egg-info/SOURCES.txt`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/gsutil.py` & `gsutil-5.9/gsutil.py`

 * *Files identical despite different names*

### Comparing `gsutil-5.8/setup.py` & `gsutil-5.9/setup.py`

 * *Files identical despite different names*

