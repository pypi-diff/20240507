# Comparing `tmp/c2cgeoportal_geoportal-2.6.0-py2.py3-none-any.whl.zip` & `tmp/c2cgeoportal_geoportal-2.7.1.83-py2.py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,175 +1,187 @@
-Zip file size: 2528523 bytes, number of entries: 173
--rw-r--r--  2.0 unx    26797 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/__init__.py
--rw-r--r--  2.0 unx     2085 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/resources.py
--rw-r--r--  2.0 unx     8906 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/lib/__init__.py
--rw-r--r--  2.0 unx     7580 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/lib/authentication.py
--rw-r--r--  2.0 unx     1778 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/lib/bashcolor.py
--rw-r--r--  2.0 unx     2587 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/lib/cacheversion.py
--rw-r--r--  2.0 unx    10005 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/lib/caching.py
--rw-r--r--  2.0 unx     3104 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/lib/check_collector.py
--rw-r--r--  2.0 unx    11198 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/lib/checker.py
--rw-r--r--  2.0 unx     8776 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/lib/dbreflection.py
--rw-r--r--  2.0 unx    12481 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/lib/filter_capabilities.py
--rw-r--r--  2.0 unx     2172 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/lib/fulltextsearch.py
--rw-r--r--  2.0 unx     5936 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/lib/functionality.py
--rw-r--r--  2.0 unx     2313 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/lib/headers.py
--rw-r--r--  2.0 unx     1815 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/lib/i18n.py
--rw-r--r--  2.0 unx     4004 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/lib/layers.py
--rw-r--r--  2.0 unx    32061 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/lib/lingua_extractor.py
--rw-r--r--  2.0 unx     2764 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/lib/loader.py
--rw-r--r--  2.0 unx     3936 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/lib/metrics.py
--rw-r--r--  2.0 unx    36575 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/lib/oauth2.py
--rw-r--r--  2.0 unx    11101 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/lib/wmstparsing.py
--rw-r--r--  2.0 unx     5427 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/lib/xsd.py
--rw-r--r--  2.0 unx     8536 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/__init__.py
--rw-r--r--  2.0 unx      279 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/+dot+dockerignore_tmpl
--rw-r--r--  2.0 unx      311 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/+dot+editorconfig
--rw-r--r--  2.0 unx      384 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/+dot+gitignore_tmpl
--rw-r--r--  2.0 unx     2829 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/Dockerfile_tmpl
--rw-r--r--  2.0 unx      137 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/Makefile
--rw-r--r--  2.0 unx      371 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/README.rst_tmpl
--rw-r--r--  2.0 unx     5993 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/build_tmpl
--rw-r--r--  2.0 unx     8336 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/docker-compose-lib.yaml
--rw-r--r--  2.0 unx     2165 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/docker-compose.override.sample.yaml
--rw-r--r--  2.0 unx     2425 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/docker-compose.yaml
--rw-r--r--  2.0 unx     2204 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/env.default_tmpl
--rw-r--r--  2.0 unx     1166 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/env.project_tmpl
--rw-r--r--  2.0 unx      417 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/project.yaml_tmpl
--rw-r--r--  2.0 unx       57 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/pyproject.toml
--rwxr-xr-x  2.0 unx      233 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/run_alembic.sh
--rw-r--r--  2.0 unx      208 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/setup.cfg_tmpl
--rw-r--r--  2.0 unx        5 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/spell-ignore-words.txt
--rw-r--r--  2.0 unx      147 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/yamllint.yaml
--rw-r--r--  2.0 unx     2505 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/+dot+github/workflows/main.yaml_tmpl
--rw-r--r--  2.0 unx     2021 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/+dot+github/workflows/rebuild.yaml_tmpl
--rw-r--r--  2.0 unx      424 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/ci/config.yaml_tmpl
--rw-r--r--  2.0 unx       34 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/ci/requirements.txt
--rwxr-xr-x  2.0 unx     2156 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/ci/trigger
--rw-r--r--  2.0 unx      121 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/geoportal/+dot+dockerignore_tmpl
--rw-r--r--  2.0 unx      265 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/geoportal/+dot+eslintrc_tmpl
--rw-r--r--  2.0 unx      239 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/geoportal/+dot+prospector.yaml
--rw-r--r--  2.0 unx     2109 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/geoportal/Dockerfile_tmpl
--rw-r--r--  2.0 unx      147 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/geoportal/Makefile_tmpl
--rw-r--r--  2.0 unx      985 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/geoportal/alembic.ini
--rw-r--r--  2.0 unx      445 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/geoportal/alembic.yaml_tmpl
--rw-r--r--  2.0 unx     2398 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/geoportal/development.ini_tmpl
--rw-r--r--  2.0 unx       27 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/geoportal/language_mapping
--rw-r--r--  2.0 unx       91 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/geoportal/lingua-client.cfg
--rw-r--r--  2.0 unx      107 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/geoportal/lingua-server.cfg
--rw-r--r--  2.0 unx     2467 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/geoportal/production.ini_tmpl
--rw-r--r--  2.0 unx       55 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/geoportal/requirements.txt
--rw-r--r--  2.0 unx      640 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/geoportal/setup.py_tmpl
--rw-r--r--  2.0 unx      172 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/geoportal/tsconfig.json_tmpl
--rw-r--r--  2.0 unx     8607 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/geoportal/vars.yaml_tmpl
--rw-r--r--  2.0 unx     1829 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/geoportal/webpack.api.js_tmpl
--rw-r--r--  2.0 unx     2441 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/geoportal/webpack.apps.js_tmpl
--rw-r--r--  2.0 unx      578 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/geoportal/webpack.commons.js
--rw-r--r--  2.0 unx      645 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/geoportal/webpack.config.js
--rw-r--r--  2.0 unx     1841 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/geoportal/+package+_geoportal/__init__.py_tmpl
--rw-r--r--  2.0 unx      243 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/geoportal/+package+_geoportal/models.py_tmpl
--rw-r--r--  2.0 unx      211 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/geoportal/+package+_geoportal/resources.py
--rw-r--r--  2.0 unx     1364 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/geoportal/+package+_geoportal/subscribers.py_tmpl
--rw-r--r--  2.0 unx      162 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/geoportal/+package+_geoportal/locale/en/LC_MESSAGES/+package+_geoportal-client.po
--rw-r--r--  2.0 unx       44 b- defN 21-Jul-06 11:08 c2cgeoportal_geoportal/scaffolds/create/geoportal/+package+_geoportal/static/robot.txt
--rw-r--r--  2.0 unx       88 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/geoportal/+package+_geoportal/static/robot.txt.tmpl
--rw-r--r--  2.0 unx        0 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/geoportal/+package+_geoportal/static/css/desktop.css
--rw-r--r--  2.0 unx        0 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/geoportal/+package+_geoportal/static/css/iframe_api.css
--rw-r--r--  2.0 unx        0 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/geoportal/+package+_geoportal/static/css/mobile.css
--rw-r--r--  2.0 unx    13799 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/geoportal/+package+_geoportal/static/images/banner_left.png
--rw-r--r--  2.0 unx     6018 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/geoportal/+package+_geoportal/static/images/banner_right.png
--rw-r--r--  2.0 unx      259 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/geoportal/+package+_geoportal/static/images/blank.png
--rw-r--r--  2.0 unx      758 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/geoportal/+package+_geoportal/static/images/markers/marker-blue.png
--rw-r--r--  2.0 unx      703 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/geoportal/+package+_geoportal/static/images/markers/marker-gold.png
--rw-r--r--  2.0 unx      753 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/geoportal/+package+_geoportal/static/images/markers/marker-green.png
--rw-r--r--  2.0 unx      601 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/geoportal/+package+_geoportal/static/images/markers/marker.png
--rw-r--r--  2.0 unx      260 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/geoportal/+package+_geoportal/static-ngeo/api/index.js_tmpl
--rw-r--r--  2.0 unx      582 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/geoportal/+package+_geoportal/static-ngeo/js/+package+module.js_tmpl
--rw-r--r--  2.0 unx        0 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/geoportal/+package+_geoportal/views/__init__.py
--rw-r--r--  2.0 unx     1179 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/geoportal/tools/extract-messages.js
--rw-r--r--  2.0 unx     6805 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/mapserver/demo.map.tmpl_tmpl
--rw-r--r--  2.0 unx      351 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/mapserver/fonts.conf
--rw-r--r--  2.0 unx     2666 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/mapserver/mapserver.map.tmpl_tmpl
--rw-r--r--  2.0 unx      737 b- defN 21-Jul-06 11:08 c2cgeoportal_geoportal/scaffolds/create/mapserver/tinyows.xml
--rw-r--r--  2.0 unx      816 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/mapserver/tinyows.xml.tmpl
--rw-r--r--  2.0 unx     2891 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/mapserver/data/Readme.txt
--rw-r--r--  2.0 unx  1588593 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/mapserver/data/TM_EUROPE_BORDERS-0.3.sql
--rw-r--r--  2.0 unx   275572 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/mapserver/fonts/Arial.ttf
--rw-r--r--  2.0 unx   286620 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/mapserver/fonts/Arialbd.ttf
--rw-r--r--  2.0 unx   224692 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/mapserver/fonts/Arialbi.ttf
--rw-r--r--  2.0 unx   206132 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/mapserver/fonts/Ariali.ttf
--rw-r--r--  2.0 unx   415132 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/mapserver/fonts/NotoSans-Bold.ttf
--rw-r--r--  2.0 unx   290436 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/mapserver/fonts/NotoSans-BoldItalic.ttf
--rw-r--r--  2.0 unx   279268 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/mapserver/fonts/NotoSans-Italic.ttf
--rw-r--r--  2.0 unx   414820 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/mapserver/fonts/NotoSans-Regular.ttf
--rw-r--r--  2.0 unx   139640 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/mapserver/fonts/Verdana.ttf
--rw-r--r--  2.0 unx   136032 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/mapserver/fonts/Verdanab.ttf
--rw-r--r--  2.0 unx   154264 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/mapserver/fonts/Verdanai.ttf
--rw-r--r--  2.0 unx   153324 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/mapserver/fonts/Verdanaz.ttf
--rw-r--r--  2.0 unx     9966 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/print/print-apps/+package+/A3_Landscape.jrxml
--rw-r--r--  2.0 unx     8671 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/print/print-apps/+package+/A3_Portrait.jrxml
--rw-r--r--  2.0 unx     9526 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/print/print-apps/+package+/A4_Landscape.jrxml
--rw-r--r--  2.0 unx     6844 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/print/print-apps/+package+/A4_Portrait.jrxml
--rw-r--r--  2.0 unx     4086 b- defN 21-Jul-06 11:08 c2cgeoportal_geoportal/scaffolds/create/print/print-apps/+package+/config.yaml
--rw-r--r--  2.0 unx     4745 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/print/print-apps/+package+/config.yaml.tmpl
--rw-r--r--  2.0 unx     5310 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/print/print-apps/+package+/legend.jrxml
--rw-r--r--  2.0 unx    13799 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/print/print-apps/+package+/logo.png
--rw-r--r--  2.0 unx     2925 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/print/print-apps/+package+/north.svg
--rw-r--r--  2.0 unx     1309 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/print/print-apps/+package+/results.jrxml
--rw-r--r--  2.0 unx      503 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/qgisserver/geomapfish.yaml.tmpl_tmpl
--rw-r--r--  2.0 unx      270 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/qgisserver/pg_service.conf.tmpl_tmpl
--rw-r--r--  2.0 unx     6027 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/create/tilegeneration/config.yaml.tmpl_tmpl
--rw-r--r--  2.0 unx     6258 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/update/+dot+upgrade.yaml_tmpl
--rw-r--r--  2.0 unx    15879 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/update/CONST_CHANGELOG.txt_tmpl
--rw-r--r--  2.0 unx     4368 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/update/geoportal/CONST_Makefile_tmpl
--rw-r--r--  2.0 unx    19953 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/update/geoportal/CONST_config-schema.yaml
--rw-r--r--  2.0 unx    33156 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scaffolds/update/geoportal/CONST_vars.yaml_tmpl
--rw-r--r--  2.0 unx     3161 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scripts/__init__.py
--rw-r--r--  2.0 unx    33346 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scripts/c2cupgrade.py
--rw-r--r--  2.0 unx     3076 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scripts/create_demo_theme.py
--rw-r--r--  2.0 unx     5535 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scripts/manage_users.py
--rw-r--r--  2.0 unx     9778 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scripts/theme2fts.py
--rw-r--r--  2.0 unx     2998 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/scripts/urllogin.py
--rw-r--r--  2.0 unx      703 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/templates/dynamic.js
--rw-r--r--  2.0 unx     3056 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/templates/login.html
--rw-r--r--  2.0 unx     1910 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/templates/notlogin.html
--rw-r--r--  2.0 unx      363 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/templates/testi18n.html
--rw-r--r--  2.0 unx     1960 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/views/__init__.py
--rw-r--r--  2.0 unx     2364 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/views/dev.py
--rw-r--r--  2.0 unx     6988 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/views/dynamic.py
--rw-r--r--  2.0 unx     3198 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/views/entry.py
--rw-r--r--  2.0 unx     8032 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/views/fulltextsearch.py
--rw-r--r--  2.0 unx     2712 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/views/geometry_processing.py
--rw-r--r--  2.0 unx     2171 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/views/i18n.py
--rw-r--r--  2.0 unx    26882 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/views/layers.py
--rw-r--r--  2.0 unx    18292 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/views/login.py
--rw-r--r--  2.0 unx     7802 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/views/mapserverproxy.py
--rw-r--r--  2.0 unx     3384 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/views/memory.py
--rw-r--r--  2.0 unx     4145 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/views/ogcproxy.py
--rw-r--r--  2.0 unx     9224 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/views/pdfreport.py
--rw-r--r--  2.0 unx     5301 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/views/printproxy.py
--rw-r--r--  2.0 unx     5082 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/views/profile.py
--rw-r--r--  2.0 unx     9560 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/views/proxy.py
--rw-r--r--  2.0 unx     6998 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/views/raster.py
--rw-r--r--  2.0 unx     3061 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/views/resourceproxy.py
--rw-r--r--  2.0 unx     6057 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/views/shortener.py
--rw-r--r--  2.0 unx    44766 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/views/theme.py
--rw-r--r--  2.0 unx     7473 b- defN 21-Jul-06 10:47 c2cgeoportal_geoportal/views/tinyowsproxy.py
--rw-r--r--  2.0 unx     3633 b- defN 21-Jul-06 10:47 tests/__init__.py
--rw-r--r--  2.0 unx     2966 b- defN 21-Jul-06 10:47 tests/test_cachebuster.py
--rw-r--r--  2.0 unx    12449 b- defN 21-Jul-06 10:47 tests/test_caching.py
--rw-r--r--  2.0 unx     3663 b- defN 21-Jul-06 10:47 tests/test_checker.py
--rw-r--r--  2.0 unx     2161 b- defN 21-Jul-06 10:47 tests/test_decimaljson.py
--rw-r--r--  2.0 unx     2549 b- defN 21-Jul-06 10:47 tests/test_headerstween.py
--rw-r--r--  2.0 unx     1008 b- defN 21-Jul-06 10:47 tests/test_i18n.py
--rw-r--r--  2.0 unx     7404 b- defN 21-Jul-06 10:47 tests/test_init.py
--rw-r--r--  2.0 unx     3096 b- defN 21-Jul-06 10:47 tests/test_locale_negociator.py
--rw-r--r--  2.0 unx     3069 b- defN 21-Jul-06 10:47 tests/test_mapserverproxy_route_predicate.py
--rw-r--r--  2.0 unx    12099 b- defN 21-Jul-06 10:47 tests/test_raster.py
--rw-r--r--  2.0 unx     9160 b- defN 21-Jul-06 10:47 tests/test_wmstparsing.py
--rw-r--r--  2.0 unx     6010 b- defN 21-Jul-06 10:47 tests/xmlstr.py
--rw-r--r--  2.0 unx     1794 b- defN 21-Jul-06 11:29 c2cgeoportal_geoportal-2.6.0.dist-info/METADATA
--rw-r--r--  2.0 unx      110 b- defN 21-Jul-06 11:29 c2cgeoportal_geoportal-2.6.0.dist-info/WHEEL
--rw-r--r--  2.0 unx     1191 b- defN 21-Jul-06 11:29 c2cgeoportal_geoportal-2.6.0.dist-info/entry_points.txt
--rw-r--r--  2.0 unx       29 b- defN 21-Jul-06 11:29 c2cgeoportal_geoportal-2.6.0.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx    19915 b- defN 21-Jul-06 11:29 c2cgeoportal_geoportal-2.6.0.dist-info/RECORD
-173 files, 5374047 bytes uncompressed, 2495087 bytes compressed:  53.6%
+Zip file size: 2571051 bytes, number of entries: 185
+-rw-r--r--  2.0 unx    32401 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/__init__.py
+-rw-r--r--  2.0 unx        0 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/py.typed
+-rw-r--r--  2.0 unx     2182 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/resources.py
+-rw-r--r--  2.0 unx    10290 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/lib/__init__.py
+-rw-r--r--  2.0 unx     8997 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/lib/authentication.py
+-rw-r--r--  2.0 unx     1889 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/lib/bashcolor.py
+-rw-r--r--  2.0 unx     2948 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/lib/cacheversion.py
+-rw-r--r--  2.0 unx     6688 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/lib/caching.py
+-rw-r--r--  2.0 unx     3414 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/lib/check_collector.py
+-rw-r--r--  2.0 unx    12323 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/lib/checker.py
+-rw-r--r--  2.0 unx     6458 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/lib/common_headers.py
+-rw-r--r--  2.0 unx     9629 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/lib/dbreflection.py
+-rw-r--r--  2.0 unx    14172 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/lib/filter_capabilities.py
+-rw-r--r--  2.0 unx     2271 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/lib/fulltextsearch.py
+-rw-r--r--  2.0 unx     6293 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/lib/functionality.py
+-rw-r--r--  2.0 unx     2622 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/lib/headers.py
+-rw-r--r--  2.0 unx     1876 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/lib/i18n.py
+-rw-r--r--  2.0 unx     4655 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/lib/layers.py
+-rw-r--r--  2.0 unx    36888 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/lib/lingua_extractor.py
+-rw-r--r--  2.0 unx     2546 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/lib/loader.py
+-rw-r--r--  2.0 unx     4524 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/lib/metrics.py
+-rw-r--r--  2.0 unx    37216 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/lib/oauth2.py
+-rw-r--r--  2.0 unx    12423 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/lib/wmstparsing.py
+-rw-r--r--  2.0 unx     6043 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/lib/xsd.py
+-rw-r--r--  2.0 unx      524 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/advance_create/cookiecutter.json
+-rw-r--r--  2.0 unx      592 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/advance_create/ci/config.yaml
+-rw-r--r--  2.0 unx      147 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/.dockerignore
+-rw-r--r--  2.0 unx      241 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/.eslintrc.yaml
+-rw-r--r--  2.0 unx      325 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/.prospector.yaml
+-rw-r--r--  2.0 unx     2567 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/Dockerfile
+-rw-r--r--  2.0 unx      147 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/Makefile
+-rw-r--r--  2.0 unx      985 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/alembic.ini
+-rw-r--r--  2.0 unx      458 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/alembic.yaml
+-rw-r--r--  2.0 unx     3068 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/development.ini
+-rw-r--r--  2.0 unx     4129 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/gunicorn.conf.py
+-rw-r--r--  2.0 unx       27 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/language_mapping
+-rw-r--r--  2.0 unx      117 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/lingua-client.cfg
+-rw-r--r--  2.0 unx      107 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/lingua-server.cfg
+-rw-r--r--  2.0 unx     1137 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/production.ini
+-rw-r--r--  2.0 unx       57 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/requirements.txt
+-rw-r--r--  2.0 unx      694 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/setup.py
+-rw-r--r--  2.0 unx      186 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/tsconfig.json
+-rw-r--r--  2.0 unx     1769 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/webpack.api.js
+-rw-r--r--  2.0 unx     2438 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/webpack.apps.js
+-rw-r--r--  2.0 unx      553 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/webpack.commons.js
+-rw-r--r--  2.0 unx      643 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/webpack.config.js
+-rw-r--r--  2.0 unx     1201 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/tools/extract-messages.js
+-rw-r--r--  2.0 unx     1587 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/{{cookiecutter.package}}_geoportal/__init__.py
+-rw-r--r--  2.0 unx      426 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/{{cookiecutter.package}}_geoportal/authentication.py
+-rw-r--r--  2.0 unx      387 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/{{cookiecutter.package}}_geoportal/dev.py
+-rw-r--r--  2.0 unx      284 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/{{cookiecutter.package}}_geoportal/models.py
+-rw-r--r--  2.0 unx      158 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/{{cookiecutter.package}}_geoportal/multi_organization.py
+-rw-r--r--  2.0 unx      270 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/{{cookiecutter.package}}_geoportal/resources.py
+-rw-r--r--  2.0 unx     1352 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/{{cookiecutter.package}}_geoportal/subscribers.py
+-rw-r--r--  2.0 unx      260 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/{{cookiecutter.package}}_geoportal/static-ngeo/api/index.js
+-rw-r--r--  2.0 unx      614 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/{{cookiecutter.package}}_geoportal/static-ngeo/js/{{cookiecutter.package}}module.js
+-rw-r--r--  2.0 unx        0 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/{{cookiecutter.package}}_geoportal/views/__init__.py
+-rw-r--r--  2.0 unx      524 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/advance_update/cookiecutter.json
+-rw-r--r--  2.0 unx     4287 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/advance_update/{{cookiecutter.project}}/geoportal/CONST_Makefile
+-rw-r--r--  2.0 unx      524 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/cookiecutter.json
+-rw-r--r--  2.0 unx      351 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/.dockerignore
+-rw-r--r--  2.0 unx      297 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/.editorconfig
+-rw-r--r--  2.0 unx      449 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/.gitignore
+-rw-r--r--  2.0 unx        9 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/.prettierignore
+-rw-r--r--  2.0 unx       43 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/.prettierrc.yaml
+-rw-r--r--  2.0 unx     3360 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/Dockerfile
+-rw-r--r--  2.0 unx      715 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/Makefile
+-rw-r--r--  2.0 unx      423 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/README.rst
+-rwxr-xr-x  2.0 unx     6167 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/build
+-rw-r--r--  2.0 unx    12310 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/docker-compose-lib.yaml
+-rw-r--r--  2.0 unx     2526 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/docker-compose.override.sample.yaml
+-rw-r--r--  2.0 unx     2429 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/docker-compose.yaml
+-rw-r--r--  2.0 unx     2573 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/env.default
+-rw-r--r--  2.0 unx     1537 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/env.project
+-rw-r--r--  2.0 unx      495 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/project.yaml
+-rw-r--r--  2.0 unx       57 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/pyproject.toml
+-rwxr-xr-x  2.0 unx      233 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/run_alembic.sh
+-rw-r--r--  2.0 unx      221 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/setup.cfg
+-rw-r--r--  2.0 unx       13 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/spell-ignore-words.txt
+-rw-r--r--  2.0 unx     1257 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/.github/workflows/main.yaml
+-rw-r--r--  2.0 unx     1287 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/.github/workflows/rebuild.yaml
+-rw-r--r--  2.0 unx     2216 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/.github/workflows/update_l10n.yaml
+-rw-r--r--  2.0 unx      532 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/ci/config.yaml
+-rw-r--r--  2.0 unx       18 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/ci/requirements.txt
+-rw-r--r--  2.0 unx    10666 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/geoportal/vars.yaml
+-rw-r--r--  2.0 unx      162 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/geoportal/{{cookiecutter.package}}_geoportal/locale/en/LC_MESSAGES/{{cookiecutter.package}}_geoportal-client.po
+-rw-r--r--  2.0 unx       88 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/geoportal/{{cookiecutter.package}}_geoportal/static/robot.txt.tmpl
+-rw-r--r--  2.0 unx        0 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/geoportal/{{cookiecutter.package}}_geoportal/static/css/desktop.css
+-rw-r--r--  2.0 unx        0 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/geoportal/{{cookiecutter.package}}_geoportal/static/css/iframe_api.css
+-rw-r--r--  2.0 unx        0 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/geoportal/{{cookiecutter.package}}_geoportal/static/css/mobile.css
+-rw-r--r--  2.0 unx    13799 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/geoportal/{{cookiecutter.package}}_geoportal/static/images/banner_left.png
+-rw-r--r--  2.0 unx     6018 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/geoportal/{{cookiecutter.package}}_geoportal/static/images/banner_right.png
+-rw-r--r--  2.0 unx      259 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/geoportal/{{cookiecutter.package}}_geoportal/static/images/blank.png
+-rw-r--r--  2.0 unx      758 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/geoportal/{{cookiecutter.package}}_geoportal/static/images/markers/marker-blue.png
+-rw-r--r--  2.0 unx      703 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/geoportal/{{cookiecutter.package}}_geoportal/static/images/markers/marker-gold.png
+-rw-r--r--  2.0 unx      753 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/geoportal/{{cookiecutter.package}}_geoportal/static/images/markers/marker-green.png
+-rw-r--r--  2.0 unx      601 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/geoportal/{{cookiecutter.package}}_geoportal/static/images/markers/marker.png
+-rw-r--r--  2.0 unx     7269 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/mapserver/demo.map.tmpl
+-rw-r--r--  2.0 unx      351 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/mapserver/fonts.conf
+-rw-r--r--  2.0 unx     2716 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/mapserver/mapserver.map.tmpl
+-rw-r--r--  2.0 unx      816 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/mapserver/tinyows.xml.tmpl
+-rw-r--r--  2.0 unx     2892 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/mapserver/data/Readme.txt
+-rw-r--r--  2.0 unx  1588593 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/mapserver/data/TM_EUROPE_BORDERS-0.3.sql
+-rw-r--r--  2.0 unx   275572 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/mapserver/fonts/Arial.ttf
+-rw-r--r--  2.0 unx   286620 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/mapserver/fonts/Arialbd.ttf
+-rw-r--r--  2.0 unx   224692 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/mapserver/fonts/Arialbi.ttf
+-rw-r--r--  2.0 unx   206132 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/mapserver/fonts/Ariali.ttf
+-rw-r--r--  2.0 unx   415132 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/mapserver/fonts/NotoSans-Bold.ttf
+-rw-r--r--  2.0 unx   290436 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/mapserver/fonts/NotoSans-BoldItalic.ttf
+-rw-r--r--  2.0 unx   279268 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/mapserver/fonts/NotoSans-Italic.ttf
+-rw-r--r--  2.0 unx   414820 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/mapserver/fonts/NotoSans-Regular.ttf
+-rw-r--r--  2.0 unx   139640 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/mapserver/fonts/Verdana.ttf
+-rw-r--r--  2.0 unx   136032 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/mapserver/fonts/Verdanab.ttf
+-rw-r--r--  2.0 unx   154264 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/mapserver/fonts/Verdanai.ttf
+-rw-r--r--  2.0 unx   153324 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/mapserver/fonts/Verdanaz.ttf
+-rw-r--r--  2.0 unx    10002 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/print/print-apps/{{cookiecutter.package}}/A3_Landscape.jrxml
+-rw-r--r--  2.0 unx     8707 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/print/print-apps/{{cookiecutter.package}}/A3_Portrait.jrxml
+-rw-r--r--  2.0 unx     9562 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/print/print-apps/{{cookiecutter.package}}/A4_Landscape.jrxml
+-rw-r--r--  2.0 unx     6880 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/print/print-apps/{{cookiecutter.package}}/A4_Portrait.jrxml
+-rw-r--r--  2.0 unx     4774 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/print/print-apps/{{cookiecutter.package}}/config.yaml.tmpl
+-rw-r--r--  2.0 unx     5310 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/print/print-apps/{{cookiecutter.package}}/legend.jrxml
+-rw-r--r--  2.0 unx       98 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/print/print-apps/{{cookiecutter.package}}/localisation.properties
+-rw-r--r--  2.0 unx      102 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/print/print-apps/{{cookiecutter.package}}/localisation_fr.properties
+-rw-r--r--  2.0 unx    13799 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/print/print-apps/{{cookiecutter.package}}/logo.png
+-rw-r--r--  2.0 unx     2925 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/print/print-apps/{{cookiecutter.package}}/north.svg
+-rw-r--r--  2.0 unx     1309 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/print/print-apps/{{cookiecutter.package}}/results.jrxml
+-rw-r--r--  2.0 unx      296 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/qgisserver/pg_service.conf.tmpl
+-rwxr-xr-x  2.0 unx     4243 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/scripts/db-backup
+-rwxr-xr-x  2.0 unx     4433 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/scripts/db-restore
+-rw-r--r--  2.0 unx     6181 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/tilegeneration/config.yaml.tmpl
+-rw-r--r--  2.0 unx      539 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/update/cookiecutter.json
+-rw-r--r--  2.0 unx     6781 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/update/{{cookiecutter.project}}/.upgrade.yaml
+-rw-r--r--  2.0 unx    36854 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/update/{{cookiecutter.project}}/CONST_CHANGELOG.txt
+-rw-r--r--  2.0 unx    21112 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/update/{{cookiecutter.project}}/geoportal/CONST_config-schema.yaml
+-rw-r--r--  2.0 unx    45687 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scaffolds/update/{{cookiecutter.project}}/geoportal/CONST_vars.yaml
+-rw-r--r--  2.0 unx     2863 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scripts/__init__.py
+-rw-r--r--  2.0 unx    36312 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scripts/c2cupgrade.py
+-rw-r--r--  2.0 unx     3081 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scripts/create_demo_theme.py
+-rw-r--r--  2.0 unx     5468 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scripts/manage_users.py
+-rw-r--r--  2.0 unx    11528 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scripts/pcreate.py
+-rw-r--r--  2.0 unx    11450 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scripts/theme2fts.py
+-rw-r--r--  2.0 unx     3299 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/scripts/urllogin.py
+-rw-r--r--  2.0 unx     2475 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/templates/login.html
+-rw-r--r--  2.0 unx     1528 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/templates/notlogin.html
+-rw-r--r--  2.0 unx      369 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/templates/testi18n.html
+-rw-r--r--  2.0 unx     2694 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/views/__init__.py
+-rw-r--r--  2.0 unx     2533 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/views/dev.py
+-rw-r--r--  2.0 unx     8589 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/views/dynamic.py
+-rw-r--r--  2.0 unx     5995 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/views/entry.py
+-rw-r--r--  2.0 unx     8330 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/views/fulltextsearch.py
+-rw-r--r--  2.0 unx     2952 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/views/geometry_processing.py
+-rw-r--r--  2.0 unx     5292 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/views/i18n.py
+-rw-r--r--  2.0 unx    28850 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/views/layers.py
+-rw-r--r--  2.0 unx    19104 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/views/login.py
+-rw-r--r--  2.0 unx     8203 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/views/mapserverproxy.py
+-rw-r--r--  2.0 unx     3627 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/views/memory.py
+-rw-r--r--  2.0 unx     5065 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/views/ogcproxy.py
+-rw-r--r--  2.0 unx     9576 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/views/pdfreport.py
+-rw-r--r--  2.0 unx     5897 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/views/printproxy.py
+-rw-r--r--  2.0 unx     5394 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/views/profile.py
+-rw-r--r--  2.0 unx    10453 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/views/proxy.py
+-rw-r--r--  2.0 unx     7570 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/views/raster.py
+-rw-r--r--  2.0 unx     3181 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/views/resourceproxy.py
+-rw-r--r--  2.0 unx     6206 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/views/shortener.py
+-rw-r--r--  2.0 unx    51588 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/views/theme.py
+-rw-r--r--  2.0 unx     8171 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/views/tinyowsproxy.py
+-rw-r--r--  2.0 unx     3455 b- defN 24-May-07 15:28 c2cgeoportal_geoportal/views/vector_tiles.py
+-rw-r--r--  2.0 unx     3752 b- defN 24-May-07 15:28 tests/__init__.py
+-rw-r--r--  2.0 unx     2941 b- defN 24-May-07 15:28 tests/test_cachebuster.py
+-rw-r--r--  2.0 unx    12493 b- defN 24-May-07 15:28 tests/test_caching.py
+-rw-r--r--  2.0 unx     3638 b- defN 24-May-07 15:28 tests/test_checker.py
+-rw-r--r--  2.0 unx     2223 b- defN 24-May-07 15:28 tests/test_decimaljson.py
+-rw-r--r--  2.0 unx     2524 b- defN 24-May-07 15:28 tests/test_headerstween.py
+-rw-r--r--  2.0 unx     1003 b- defN 24-May-07 15:28 tests/test_i18n.py
+-rw-r--r--  2.0 unx     7357 b- defN 24-May-07 15:28 tests/test_init.py
+-rw-r--r--  2.0 unx     3071 b- defN 24-May-07 15:28 tests/test_locale_negociator.py
+-rw-r--r--  2.0 unx     3044 b- defN 24-May-07 15:28 tests/test_mapserverproxy_route_predicate.py
+-rw-r--r--  2.0 unx    12074 b- defN 24-May-07 15:28 tests/test_raster.py
+-rw-r--r--  2.0 unx     9135 b- defN 24-May-07 15:28 tests/test_wmstparsing.py
+-rw-r--r--  2.0 unx     6010 b- defN 24-May-07 15:28 tests/xmlstr.py
+-rw-r--r--  2.0 unx     2003 b- defN 24-May-07 16:11 c2cgeoportal_geoportal-2.7.1.83.dist-info/METADATA
+-rw-r--r--  2.0 unx      110 b- defN 24-May-07 16:11 c2cgeoportal_geoportal-2.7.1.83.dist-info/WHEEL
+-rw-r--r--  2.0 unx     1414 b- defN 24-May-07 16:11 c2cgeoportal_geoportal-2.7.1.83.dist-info/entry_points.txt
+-rw-r--r--  2.0 unx       29 b- defN 24-May-07 16:11 c2cgeoportal_geoportal-2.7.1.83.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx    24602 b- defN 24-May-07 16:11 c2cgeoportal_geoportal-2.7.1.83.dist-info/RECORD
+185 files, 5491542 bytes uncompressed, 2528687 bytes compressed:  54.0%
```

## zipnote {}

```diff
@@ -1,10 +1,13 @@
 Filename: c2cgeoportal_geoportal/__init__.py
 Comment: 
 
+Filename: c2cgeoportal_geoportal/py.typed
+Comment: 
+
 Filename: c2cgeoportal_geoportal/resources.py
 Comment: 
 
 Filename: c2cgeoportal_geoportal/lib/__init__.py
 Comment: 
 
 Filename: c2cgeoportal_geoportal/lib/authentication.py
@@ -21,14 +24,17 @@
 
 Filename: c2cgeoportal_geoportal/lib/check_collector.py
 Comment: 
 
 Filename: c2cgeoportal_geoportal/lib/checker.py
 Comment: 
 
+Filename: c2cgeoportal_geoportal/lib/common_headers.py
+Comment: 
+
 Filename: c2cgeoportal_geoportal/lib/dbreflection.py
 Comment: 
 
 Filename: c2cgeoportal_geoportal/lib/filter_capabilities.py
 Comment: 
 
 Filename: c2cgeoportal_geoportal/lib/fulltextsearch.py
@@ -60,339 +66,366 @@
 
 Filename: c2cgeoportal_geoportal/lib/wmstparsing.py
 Comment: 
 
 Filename: c2cgeoportal_geoportal/lib/xsd.py
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/__init__.py
+Filename: c2cgeoportal_geoportal/scaffolds/advance_create/cookiecutter.json
+Comment: 
+
+Filename: c2cgeoportal_geoportal/scaffolds/advance_create/ci/config.yaml
+Comment: 
+
+Filename: c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/.dockerignore
+Comment: 
+
+Filename: c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/.eslintrc.yaml
+Comment: 
+
+Filename: c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/.prospector.yaml
+Comment: 
+
+Filename: c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/Dockerfile
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/+dot+dockerignore_tmpl
+Filename: c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/Makefile
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/+dot+editorconfig
+Filename: c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/alembic.ini
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/+dot+gitignore_tmpl
+Filename: c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/alembic.yaml
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/Dockerfile_tmpl
+Filename: c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/development.ini
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/Makefile
+Filename: c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/gunicorn.conf.py
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/README.rst_tmpl
+Filename: c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/language_mapping
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/build_tmpl
+Filename: c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/lingua-client.cfg
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/docker-compose-lib.yaml
+Filename: c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/lingua-server.cfg
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/docker-compose.override.sample.yaml
+Filename: c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/production.ini
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/docker-compose.yaml
+Filename: c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/requirements.txt
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/env.default_tmpl
+Filename: c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/setup.py
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/env.project_tmpl
+Filename: c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/tsconfig.json
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/project.yaml_tmpl
+Filename: c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/webpack.api.js
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/pyproject.toml
+Filename: c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/webpack.apps.js
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/run_alembic.sh
+Filename: c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/webpack.commons.js
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/setup.cfg_tmpl
+Filename: c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/webpack.config.js
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/spell-ignore-words.txt
+Filename: c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/tools/extract-messages.js
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/yamllint.yaml
+Filename: c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/{{cookiecutter.package}}_geoportal/__init__.py
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/+dot+github/workflows/main.yaml_tmpl
+Filename: c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/{{cookiecutter.package}}_geoportal/authentication.py
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/+dot+github/workflows/rebuild.yaml_tmpl
+Filename: c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/{{cookiecutter.package}}_geoportal/dev.py
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/ci/config.yaml_tmpl
+Filename: c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/{{cookiecutter.package}}_geoportal/models.py
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/ci/requirements.txt
+Filename: c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/{{cookiecutter.package}}_geoportal/multi_organization.py
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/ci/trigger
+Filename: c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/{{cookiecutter.package}}_geoportal/resources.py
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/geoportal/+dot+dockerignore_tmpl
+Filename: c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/{{cookiecutter.package}}_geoportal/subscribers.py
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/geoportal/+dot+eslintrc_tmpl
+Filename: c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/{{cookiecutter.package}}_geoportal/static-ngeo/api/index.js
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/geoportal/+dot+prospector.yaml
+Filename: c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/{{cookiecutter.package}}_geoportal/static-ngeo/js/{{cookiecutter.package}}module.js
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/geoportal/Dockerfile_tmpl
+Filename: c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/{{cookiecutter.package}}_geoportal/views/__init__.py
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/geoportal/Makefile_tmpl
+Filename: c2cgeoportal_geoportal/scaffolds/advance_update/cookiecutter.json
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/geoportal/alembic.ini
+Filename: c2cgeoportal_geoportal/scaffolds/advance_update/{{cookiecutter.project}}/geoportal/CONST_Makefile
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/geoportal/alembic.yaml_tmpl
+Filename: c2cgeoportal_geoportal/scaffolds/create/cookiecutter.json
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/geoportal/development.ini_tmpl
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/.dockerignore
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/geoportal/language_mapping
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/.editorconfig
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/geoportal/lingua-client.cfg
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/.gitignore
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/geoportal/lingua-server.cfg
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/.prettierignore
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/geoportal/production.ini_tmpl
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/.prettierrc.yaml
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/geoportal/requirements.txt
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/Dockerfile
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/geoportal/setup.py_tmpl
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/Makefile
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/geoportal/tsconfig.json_tmpl
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/README.rst
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/geoportal/vars.yaml_tmpl
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/build
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/geoportal/webpack.api.js_tmpl
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/docker-compose-lib.yaml
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/geoportal/webpack.apps.js_tmpl
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/docker-compose.override.sample.yaml
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/geoportal/webpack.commons.js
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/docker-compose.yaml
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/geoportal/webpack.config.js
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/env.default
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/geoportal/+package+_geoportal/__init__.py_tmpl
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/env.project
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/geoportal/+package+_geoportal/models.py_tmpl
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/project.yaml
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/geoportal/+package+_geoportal/resources.py
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/pyproject.toml
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/geoportal/+package+_geoportal/subscribers.py_tmpl
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/run_alembic.sh
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/geoportal/+package+_geoportal/locale/en/LC_MESSAGES/+package+_geoportal-client.po
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/setup.cfg
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/geoportal/+package+_geoportal/static/robot.txt
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/spell-ignore-words.txt
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/geoportal/+package+_geoportal/static/robot.txt.tmpl
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/.github/workflows/main.yaml
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/geoportal/+package+_geoportal/static/css/desktop.css
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/.github/workflows/rebuild.yaml
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/geoportal/+package+_geoportal/static/css/iframe_api.css
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/.github/workflows/update_l10n.yaml
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/geoportal/+package+_geoportal/static/css/mobile.css
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/ci/config.yaml
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/geoportal/+package+_geoportal/static/images/banner_left.png
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/ci/requirements.txt
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/geoportal/+package+_geoportal/static/images/banner_right.png
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/geoportal/vars.yaml
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/geoportal/+package+_geoportal/static/images/blank.png
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/geoportal/{{cookiecutter.package}}_geoportal/locale/en/LC_MESSAGES/{{cookiecutter.package}}_geoportal-client.po
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/geoportal/+package+_geoportal/static/images/markers/marker-blue.png
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/geoportal/{{cookiecutter.package}}_geoportal/static/robot.txt.tmpl
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/geoportal/+package+_geoportal/static/images/markers/marker-gold.png
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/geoportal/{{cookiecutter.package}}_geoportal/static/css/desktop.css
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/geoportal/+package+_geoportal/static/images/markers/marker-green.png
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/geoportal/{{cookiecutter.package}}_geoportal/static/css/iframe_api.css
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/geoportal/+package+_geoportal/static/images/markers/marker.png
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/geoportal/{{cookiecutter.package}}_geoportal/static/css/mobile.css
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/geoportal/+package+_geoportal/static-ngeo/api/index.js_tmpl
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/geoportal/{{cookiecutter.package}}_geoportal/static/images/banner_left.png
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/geoportal/+package+_geoportal/static-ngeo/js/+package+module.js_tmpl
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/geoportal/{{cookiecutter.package}}_geoportal/static/images/banner_right.png
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/geoportal/+package+_geoportal/views/__init__.py
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/geoportal/{{cookiecutter.package}}_geoportal/static/images/blank.png
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/geoportal/tools/extract-messages.js
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/geoportal/{{cookiecutter.package}}_geoportal/static/images/markers/marker-blue.png
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/mapserver/demo.map.tmpl_tmpl
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/geoportal/{{cookiecutter.package}}_geoportal/static/images/markers/marker-gold.png
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/mapserver/fonts.conf
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/geoportal/{{cookiecutter.package}}_geoportal/static/images/markers/marker-green.png
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/mapserver/mapserver.map.tmpl_tmpl
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/geoportal/{{cookiecutter.package}}_geoportal/static/images/markers/marker.png
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/mapserver/tinyows.xml
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/mapserver/demo.map.tmpl
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/mapserver/tinyows.xml.tmpl
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/mapserver/fonts.conf
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/mapserver/data/Readme.txt
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/mapserver/mapserver.map.tmpl
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/mapserver/data/TM_EUROPE_BORDERS-0.3.sql
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/mapserver/tinyows.xml.tmpl
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/mapserver/fonts/Arial.ttf
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/mapserver/data/Readme.txt
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/mapserver/fonts/Arialbd.ttf
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/mapserver/data/TM_EUROPE_BORDERS-0.3.sql
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/mapserver/fonts/Arialbi.ttf
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/mapserver/fonts/Arial.ttf
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/mapserver/fonts/Ariali.ttf
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/mapserver/fonts/Arialbd.ttf
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/mapserver/fonts/NotoSans-Bold.ttf
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/mapserver/fonts/Arialbi.ttf
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/mapserver/fonts/NotoSans-BoldItalic.ttf
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/mapserver/fonts/Ariali.ttf
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/mapserver/fonts/NotoSans-Italic.ttf
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/mapserver/fonts/NotoSans-Bold.ttf
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/mapserver/fonts/NotoSans-Regular.ttf
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/mapserver/fonts/NotoSans-BoldItalic.ttf
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/mapserver/fonts/Verdana.ttf
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/mapserver/fonts/NotoSans-Italic.ttf
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/mapserver/fonts/Verdanab.ttf
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/mapserver/fonts/NotoSans-Regular.ttf
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/mapserver/fonts/Verdanai.ttf
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/mapserver/fonts/Verdana.ttf
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/mapserver/fonts/Verdanaz.ttf
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/mapserver/fonts/Verdanab.ttf
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/print/print-apps/+package+/A3_Landscape.jrxml
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/mapserver/fonts/Verdanai.ttf
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/print/print-apps/+package+/A3_Portrait.jrxml
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/mapserver/fonts/Verdanaz.ttf
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/print/print-apps/+package+/A4_Landscape.jrxml
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/print/print-apps/{{cookiecutter.package}}/A3_Landscape.jrxml
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/print/print-apps/+package+/A4_Portrait.jrxml
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/print/print-apps/{{cookiecutter.package}}/A3_Portrait.jrxml
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/print/print-apps/+package+/config.yaml
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/print/print-apps/{{cookiecutter.package}}/A4_Landscape.jrxml
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/print/print-apps/+package+/config.yaml.tmpl
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/print/print-apps/{{cookiecutter.package}}/A4_Portrait.jrxml
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/print/print-apps/+package+/legend.jrxml
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/print/print-apps/{{cookiecutter.package}}/config.yaml.tmpl
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/print/print-apps/+package+/logo.png
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/print/print-apps/{{cookiecutter.package}}/legend.jrxml
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/print/print-apps/+package+/north.svg
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/print/print-apps/{{cookiecutter.package}}/localisation.properties
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/print/print-apps/+package+/results.jrxml
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/print/print-apps/{{cookiecutter.package}}/localisation_fr.properties
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/qgisserver/geomapfish.yaml.tmpl_tmpl
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/print/print-apps/{{cookiecutter.package}}/logo.png
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/qgisserver/pg_service.conf.tmpl_tmpl
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/print/print-apps/{{cookiecutter.package}}/north.svg
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/create/tilegeneration/config.yaml.tmpl_tmpl
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/print/print-apps/{{cookiecutter.package}}/results.jrxml
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/update/+dot+upgrade.yaml_tmpl
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/qgisserver/pg_service.conf.tmpl
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/update/CONST_CHANGELOG.txt_tmpl
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/scripts/db-backup
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/update/geoportal/CONST_Makefile_tmpl
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/scripts/db-restore
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/update/geoportal/CONST_config-schema.yaml
+Filename: c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/tilegeneration/config.yaml.tmpl
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scaffolds/update/geoportal/CONST_vars.yaml_tmpl
+Filename: c2cgeoportal_geoportal/scaffolds/update/cookiecutter.json
+Comment: 
+
+Filename: c2cgeoportal_geoportal/scaffolds/update/{{cookiecutter.project}}/.upgrade.yaml
+Comment: 
+
+Filename: c2cgeoportal_geoportal/scaffolds/update/{{cookiecutter.project}}/CONST_CHANGELOG.txt
+Comment: 
+
+Filename: c2cgeoportal_geoportal/scaffolds/update/{{cookiecutter.project}}/geoportal/CONST_config-schema.yaml
+Comment: 
+
+Filename: c2cgeoportal_geoportal/scaffolds/update/{{cookiecutter.project}}/geoportal/CONST_vars.yaml
 Comment: 
 
 Filename: c2cgeoportal_geoportal/scripts/__init__.py
 Comment: 
 
 Filename: c2cgeoportal_geoportal/scripts/c2cupgrade.py
 Comment: 
 
 Filename: c2cgeoportal_geoportal/scripts/create_demo_theme.py
 Comment: 
 
 Filename: c2cgeoportal_geoportal/scripts/manage_users.py
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scripts/theme2fts.py
+Filename: c2cgeoportal_geoportal/scripts/pcreate.py
 Comment: 
 
-Filename: c2cgeoportal_geoportal/scripts/urllogin.py
+Filename: c2cgeoportal_geoportal/scripts/theme2fts.py
 Comment: 
 
-Filename: c2cgeoportal_geoportal/templates/dynamic.js
+Filename: c2cgeoportal_geoportal/scripts/urllogin.py
 Comment: 
 
 Filename: c2cgeoportal_geoportal/templates/login.html
 Comment: 
 
 Filename: c2cgeoportal_geoportal/templates/notlogin.html
 Comment: 
@@ -459,14 +492,17 @@
 
 Filename: c2cgeoportal_geoportal/views/theme.py
 Comment: 
 
 Filename: c2cgeoportal_geoportal/views/tinyowsproxy.py
 Comment: 
 
+Filename: c2cgeoportal_geoportal/views/vector_tiles.py
+Comment: 
+
 Filename: tests/__init__.py
 Comment: 
 
 Filename: tests/test_cachebuster.py
 Comment: 
 
 Filename: tests/test_caching.py
@@ -498,23 +534,23 @@
 
 Filename: tests/test_wmstparsing.py
 Comment: 
 
 Filename: tests/xmlstr.py
 Comment: 
 
-Filename: c2cgeoportal_geoportal-2.6.0.dist-info/METADATA
+Filename: c2cgeoportal_geoportal-2.7.1.83.dist-info/METADATA
 Comment: 
 
-Filename: c2cgeoportal_geoportal-2.6.0.dist-info/WHEEL
+Filename: c2cgeoportal_geoportal-2.7.1.83.dist-info/WHEEL
 Comment: 
 
-Filename: c2cgeoportal_geoportal-2.6.0.dist-info/entry_points.txt
+Filename: c2cgeoportal_geoportal-2.7.1.83.dist-info/entry_points.txt
 Comment: 
 
-Filename: c2cgeoportal_geoportal-2.6.0.dist-info/top_level.txt
+Filename: c2cgeoportal_geoportal-2.7.1.83.dist-info/top_level.txt
 Comment: 
 
-Filename: c2cgeoportal_geoportal-2.6.0.dist-info/RECORD
+Filename: c2cgeoportal_geoportal-2.7.1.83.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## c2cgeoportal_geoportal/__init__.py

```diff
@@ -1,9 +1,7 @@
-# -*- coding: utf-8 -*-
-
 # Copyright (c) 2011-2021, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
@@ -26,23 +24,30 @@
 # The views and conclusions contained in the software and documentation are those
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
 import importlib
 import logging
 import os
+from functools import partial
+from typing import TYPE_CHECKING, Any, Callable, Dict, List, Optional, cast
 from urllib.parse import urlsplit
 
 import c2cgeoform
 import c2cwsgiutils
 import c2cwsgiutils.db
 import c2cwsgiutils.index
+import pyramid.config
+import pyramid.renderers
+import pyramid.request
+import pyramid.response
 import pyramid.security
 import zope.event.classhandler
 from c2cgeoform import Form, translator
+from c2cwsgiutils.broadcast import decorator
 from c2cwsgiutils.health_check import HealthCheck
 from c2cwsgiutils.metrics import MemoryMapProvider, add_provider
 from dogpile.cache import register_backend
 from papyrus.renderers import GeoJSON
 from pyramid.config import Configurator
 from pyramid.httpexceptions import HTTPException
 from pyramid.path import AssetResolver
@@ -50,154 +55,242 @@
 from sqlalchemy.orm import Session, joinedload
 
 import c2cgeoportal_commons.models
 import c2cgeoportal_geoportal.views
 from c2cgeoportal_commons.models import InvalidateCacheEvent
 from c2cgeoportal_geoportal.lib import C2CPregenerator, caching, check_collector, checker
 from c2cgeoportal_geoportal.lib.cacheversion import version_cache_buster
-from c2cgeoportal_geoportal.lib.caching import NO_CACHE, set_common_headers
+from c2cgeoportal_geoportal.lib.common_headers import Cache, set_common_headers
 from c2cgeoportal_geoportal.lib.i18n import available_locale_names
 from c2cgeoportal_geoportal.lib.metrics import (
     MemoryCacheSizeProvider,
     RasterDataSizeProvider,
     TotalPythonObjectMemoryProvider,
 )
 from c2cgeoportal_geoportal.lib.xsd import XSD
-from c2cgeoportal_geoportal.views.entry import Entry
+from c2cgeoportal_geoportal.views.entry import Entry, canvas_view
+
+if TYPE_CHECKING:
+    from c2cgeoportal_commons.models import static  # pylint: disable=ungrouped-imports,useless-suppression
+
 
 LOG = logging.getLogger(__name__)
 
 # Header predicate to accept only JSON content
 JSON_CONTENT_TYPE = "Content-Type:application/json"
 GEOJSON_CONTENT_TYPE = r"Content-Type:application/geo\+json"
 
 
 class AssetRendererFactory:
-    def __init__(self, info):
+    """Get a renderer for the assets."""
+
+    def __init__(self, info: Any):
         del info  # unused
         self.resolver = AssetResolver("c2cgeoportal_geoportal")
 
-    def __call__(self, value, system):
+    def __call__(self, value: Any, system: Dict[str, str]) -> bytes:
+        del value
         asset = self.resolver.resolve(system["renderer_name"])
-        return asset.stream().read()
+        return cast(bytes, asset.stream().read())
 
 
 INTERFACE_TYPE_NGEO = "ngeo"
+INTERFACE_TYPE_CANVAS = "canvas"
 
 
-def add_interface(
-    config, interface_name="desktop", interface_type=INTERFACE_TYPE_NGEO, default=False, **kwargs
-):  # pragma: no cover
-    del interface_type  # unused
-    route = "/" if default else "/{}".format(interface_name)
-    add_interface_ngeo(
+def add_interface_config(config: pyramid.config.Configurator, interface_config: Dict[str, Any]) -> None:
+    """Add the interface (desktop, mobile, ...) views and routes with only the config."""
+    add_interface(
         config,
-        route_name=interface_name,
-        route=route,
-        renderer="/etc/static-ngeo/{}.html".format(interface_name),
-        **kwargs,
+        interface_config["name"],
+        interface_config.get("type", INTERFACE_TYPE_NGEO),
+        interface_config,
+        default=interface_config.get("default", False),
     )
 
 
-def add_interface_ngeo(config, route_name, route, renderer=None, permission=None):  # pragma: no cover
+def add_interface(
+    config: pyramid.config.Configurator,
+    interface_name: str = "desktop",
+    interface_type: str = INTERFACE_TYPE_NGEO,
+    interface_config: Optional[Dict[str, Any]] = None,
+    default: bool = False,
+    **kwargs: Any,
+) -> None:
+    """Add the interface (desktop, mobile, ...) views and routes."""
+    route = "/" if default else f"/{interface_name}"
+    if interface_type == INTERFACE_TYPE_NGEO:
+        add_interface_ngeo(
+            config,
+            route_name=interface_name,
+            route=route,
+            renderer=f"/etc/static-ngeo/{interface_name}.html",
+            **kwargs,
+        )
+    elif interface_type == INTERFACE_TYPE_CANVAS:
+        assert interface_config is not None
+        add_interface_canvas(
+            config,
+            route_name=interface_name,
+            route=route,
+            interface_config=interface_config,
+            **kwargs,
+        )
+    else:
+        LOG.error(
+            "Unknown interface type '%s', should be '%s' or '%s'.",
+            interface_type,
+            INTERFACE_TYPE_NGEO,
+            INTERFACE_TYPE_CANVAS,
+        )
+
+
+def add_interface_ngeo(
+    config: pyramid.config.Configurator,
+    route_name: str,
+    route: str,
+    renderer: Optional[str] = None,
+    permission: Optional[str] = None,
+) -> None:
+    """Add the ngeo interfaces views and routes."""
 
     config.add_route(route_name, route, request_method="GET")
-    config.add_view(
-        Entry, attr="get_ngeo_index_vars", route_name=route_name, renderer=renderer, permission=permission
-    )
     # Permalink theme: recover the theme for generating custom viewer.js url
     config.add_route(
-        "{}theme".format(route_name),
-        "{}{}theme/{{themes}}".format(route, "" if route[-1] == "/" else "/"),
+        f"{route_name}theme",
+        f"{route}{'' if route[-1] == '/' else '/'}theme/{{themes}}",
         request_method="GET",
     )
     config.add_view(
+        Entry, attr="get_ngeo_index_vars", route_name=route_name, renderer=renderer, permission=permission
+    )
+    config.add_view(
         Entry,
         attr="get_ngeo_index_vars",
-        route_name="{}theme".format(route_name),
+        route_name=f"{route_name}theme",
         renderer=renderer,
         permission=permission,
     )
 
 
-def add_admin_interface(config):
+def add_interface_canvas(
+    config: pyramid.config.Configurator,
+    route_name: str,
+    route: str,
+    interface_config: Dict[str, Any],
+    permission: Optional[str] = None,
+) -> None:
+    """Add the ngeo interfaces views and routes."""
+
+    renderer = f"/etc/geomapfish/interfaces/{route_name}.html.mako"
+    config.add_route(route_name, route, request_method="GET")
+    # Permalink theme: recover the theme for generating custom viewer.js URL
+    config.add_route(
+        f"{route_name}theme",
+        f"{route}{'' if route[-1] == '/' else '/'}theme/{{themes}}",
+        request_method="GET",
+    )
+    view = partial(canvas_view, interface_config=interface_config)
+    view.__module__ = canvas_view.__module__
+    config.add_view(
+        view,
+        route_name=route_name,
+        renderer=renderer,
+        permission=permission,
+    )
+    config.add_view(
+        view,
+        route_name=f"{route_name}theme",
+        renderer=renderer,
+        permission=permission,
+    )
+
+
+def add_admin_interface(config: pyramid.config.Configurator) -> None:
+    """Add the administration interface views and routes."""
     if config.get_settings().get("enable_admin_interface", False):
         config.add_request_method(
             lambda request: c2cgeoportal_commons.models.DBSession(),
             "dbsession",
             reify=True,
         )
         config.add_view(c2cgeoportal_geoportal.views.add_ending_slash, route_name="admin_add_ending_slash")
         config.add_route("admin_add_ending_slash", "/admin", request_method="GET")
         config.include("c2cgeoportal_admin")
 
 
-def add_getitfixed(config):
+def add_getitfixed(config: pyramid.config.Configurator) -> None:
+    """Add the get it fixed views and routes."""
     if config.get_settings()["getitfixed"].get("enabled", False):
         for route_name, pattern in (
             ("getitfixed_add_ending_slash", "/getitfixed"),
             ("getitfixed_admin_add_ending_slash", "/getitfixed_admin"),
         ):
             config.add_view(c2cgeoportal_geoportal.views.add_ending_slash, route_name=route_name)
             config.add_route(route_name, pattern, request_method="GET")
         config.include("getitfixed")
         # Register admin and getitfixed search paths together
         Form.set_zpt_renderer(c2cgeoform.default_search_paths, translator=translator)
 
 
-def locale_negotiator(request):
-    lang = request.params.get("lang")
+def locale_negotiator(request: pyramid.request.Request) -> str:
+    """Get the current language."""
+    lang: str = request.params.get("lang")
     if lang is None:
         lang = request.cookies.get("_LOCALE_")
     else:
         request.response.set_cookie("_LOCALE_", lang)
     if lang is None:
         # If best_match returns None then use the default_locale_name configuration variable
         return request.accept_language.best_match(
             request.registry.settings.get("available_locale_names"),
             default_match=request.registry.settings.get("default_locale_name"),
         )
     return lang
 
 
-def _match_url_start(reference, value):
-    """
-    Checks that the val URL starts like the ref URL.
-    """
+def _match_url_start(reference: str, value: List[str]) -> bool:
+    """Check that the val URL starts like the ref URL."""
     reference_parts = reference.rstrip("/").split("/")
-    # fmt: off
-    value_parts = value[0:len(reference_parts)]
-    # fmt: on
+    value_parts = value[0 : len(reference_parts)]
     return reference_parts == value_parts
 
 
-def is_valid_referer(request, settings=None):
+def is_valid_referrer(request: pyramid.request.Request, settings: Optional[Dict[str, Any]] = None) -> bool:
+    """Check if the referrer is valid."""
     if request.referer is not None:
-        referer = urlsplit(request.referer)._replace(query="", fragment="").geturl().rstrip("/").split("/")
+        referrer = urlsplit(request.referer)._replace(query="", fragment="").geturl().rstrip("/").split("/")
         if settings is None:
             settings = request.registry.settings
         list_ = settings.get("authorized_referers", [])
-        return any(_match_url_start(e, referer) for e in list_)
+        return any(_match_url_start(e, referrer) for e in list_)
     return True
 
 
-def create_get_user_from_request(settings):
-    def get_user_from_request(request, username=None):
-        """Return the User object for the request.
+def create_get_user_from_request(
+    settings: Dict[str, Any]
+) -> Callable[[pyramid.request.Request, Optional[str]], Optional["static.User"]]:
+    """Get the get_user_from_request function."""
+
+    def get_user_from_request(
+        request: pyramid.request.Request, username: Optional[str] = None
+    ) -> Optional["static.User"]:
+        """
+        Return the User object for the request.
 
         Return ``None`` if:
         * user is anonymous
         * it does not exist in the database
         * the referer is invalid
         """
         from c2cgeoportal_commons.models import DBSession  # pylint: disable=import-outside-toplevel
         from c2cgeoportal_commons.models.static import User  # pylint: disable=import-outside-toplevel
 
         if not hasattr(request, "is_valid_referer"):
-            request.is_valid_referer = is_valid_referer(request, settings)
+            request.is_valid_referer = is_valid_referrer(request, settings)
         if not request.is_valid_referer:
             LOG.debug("Invalid referer for %s: %s", request.path_qs, repr(request.referer))
             return None
 
         if not hasattr(request, "user_"):
             request.user_ = None
             if username is None:
@@ -205,21 +298,24 @@
             if username is not None:
                 # We know we will need the role object of the
                 # user so we use joined loading
                 request.user_ = (
                     DBSession.query(User).filter_by(username=username).options(joinedload("roles")).first()
                 )
 
-        return request.user_
+        return cast(User, request.user_)
 
     return get_user_from_request
 
 
-def set_user_validator(config, user_validator):
-    """Call this function to register a user validator function.
+def set_user_validator(
+    config: pyramid.config.Configurator, user_validator: Callable[[pyramid.request.Request, str, str], str]
+) -> None:
+    """
+    Call this function to register a user validator function.
 
     The validator function is passed three arguments: ``request``,
     ``username``, and ``password``. The function should return the
     user name if the credentials are valid, and ``None`` otherwise.
 
     The validator should not do the actual authentication operation
     by calling ``remember``, this is handled by the ``login`` view.
@@ -227,122 +323,124 @@
 
     def register() -> None:
         config.registry.validate_user = user_validator
 
     config.action("user_validator", register)
 
 
-def default_user_validator(request, username, password):
+def default_user_validator(request: pyramid.request.Request, username: str, password: str) -> Optional[str]:
     """
-    Validate the username/password. This is c2cgeoportal's
-    default user validator.
-    Return None if we are anonymous, the string to remember otherwise.
+    Validate the username/password.
+
+    This is c2cgeoportal's default user validator. Return None if we are anonymous, the string to remember
+    otherwise.
     """
     del request  # unused
     from c2cgeoportal_commons.models import DBSession  # pylint: disable=import-outside-toplevel
     from c2cgeoportal_commons.models.static import User  # pylint: disable=import-outside-toplevel
 
     user = DBSession.query(User).filter_by(username=username).first()
     if user is None:
-        LOG.info('Unknow user "%s" tried to log in', username)
+        LOG.info('Unknown user "%s" tried to log in', username)
         return None
     if user.deactivated:
         LOG.info('Deactivated user "%s" tried to log in', username)
         return None
     if user.expired():
         LOG.info("Expired user %s tried to log in", username)
         return None
     if not user.validate_password(password):
         LOG.info('User "%s" tried to log in with bad credentials', username)
         return None
     return username
 
 
 class MapserverproxyRoutePredicate:
-    """Serve as a custom route predicate function for mapserverproxy.
-    If the hide_capabilities setting is set and is true then we want to
-    return 404s on GetCapabilities requests."""
+    """
+    Serve as a custom route predicate function for mapserverproxy.
 
-    def __init__(self, val, config):
-        pass
+    If the hide_capabilities setting is set and is true then we want to return 404s on GetCapabilities
+    requests.
+    """
 
-    def __call__(self, context, request):
+    def __init__(self, val: Any, config: pyramid.config.Configurator) -> None:
+        del val, config
+
+    def __call__(self, context: Any, request: pyramid.request.Request) -> bool:
+        del context
         hide_capabilities = request.registry.settings.get("hide_capabilities")
         if not hide_capabilities:
             return True
-        params = dict((k.lower(), v.lower()) for k, v in request.params.items())
+        params = {k.lower(): v.lower() for k, v in request.params.items()}
         return "request" not in params or params["request"] not in ("getcapabilities", "capabilities")
 
     @staticmethod
-    def text():
+    def text() -> str:
         return "mapserverproxy"
 
     phash = text
 
 
-def add_cors_route(config, pattern, service):
-    """
-    Add the OPTIONS route and view need for services supporting CORS.
-    """
+def add_cors_route(config: pyramid.config.Configurator, pattern: str, service: str) -> None:
+    """Add the OPTIONS route and view need for services supporting CORS."""
 
-    def view(request):  # pragma: no cover
-        return set_common_headers(request, service, NO_CACHE)
+    def view(request: pyramid.request.Request) -> pyramid.response.Response:
+        return set_common_headers(request, service, Cache.PRIVATE_NO)
 
     name = pattern + "_options"
     config.add_route(name, pattern, request_method="OPTIONS")
     config.add_view(view, route_name=name)
 
 
-def error_handler(http_exception, request):  # pragma: no cover
-    """
-    View callable for handling all the exceptions that are not already handled.
-    """
+def error_handler(
+    http_exception: HTTPException, request: pyramid.request.Request
+) -> pyramid.response.Response:
+    """View callable for handling all the exceptions that are not already handled."""
     LOG.warning("%s returned status code %s", request.url, http_exception.status_code)
-    return caching.set_common_headers(request, "error", caching.NO_CACHE, http_exception)
+    return set_common_headers(request, "error", Cache.PRIVATE_NO, http_exception)
 
 
-def call_hook(settings, name, *args, **kwargs):
+def call_hook(settings: pyramid.config.Configurator, name: str, *args: Any, **kwargs: Any) -> None:
+    """Call the hook defined in the settings."""
     hooks = settings.get("hooks", {})
     hook = hooks.get(name)
     if hook is None:
         return
     parts = hook.split(".")
     module = importlib.import_module(".".join(parts[0:-1]))
     function_ = getattr(module, parts[-1])
     function_(*args, **kwargs)
 
 
-def includeme(config: pyramid.config.Configurator):
-    """
-    This function returns a Pyramid WSGI application.
-    """
-
+def includeme(config: pyramid.config.Configurator) -> None:
+    """Get the Pyramid WSGI application."""
     settings = config.get_settings()
 
     if "available_locale_names" not in settings:
         settings["available_locale_names"] = available_locale_names()
 
     call_hook(settings, "after_settings", settings)
 
     get_user_from_request = create_get_user_from_request(settings)
     config.add_request_method(get_user_from_request, name="user", property=True)
     config.add_request_method(get_user_from_request, name="get_user")
     # Be able for an organization to override the method to use alternate:
-    # - Organization roles name for the standard roles 'anonymous', 'registred' and 'intranet'.
+    # - Organization roles name for the standard roles 'anonymous', 'registered' and 'intranet'.
     config.add_request_method(lambda request, role_type: role_type, name="get_organization_role")
     # - Organization print URL
     config.add_request_method(
         lambda request: request.registry.settings["print_url"], name="get_organization_print_url"
     )
     # - Organization interface name (in the config and in the admin interface)
     config.add_request_method(lambda request, interface: interface, name="get_organization_interface")
 
     # Configure 'locale' dir as the translation dir for c2cgeoportal app
     config.add_translation_dirs("c2cgeoportal_geoportal:locale/")
 
+    config.include("pyramid_mako")
     config.include("c2cwsgiutils.pyramid.includeme")
     health_check = HealthCheck(config)
     config.registry["health_check"] = health_check
 
     metrics_config = config.registry.settings["metrics"]
     if metrics_config["memory_maps_rss"]:
         add_provider(MemoryMapProvider("rss"))
@@ -352,39 +450,39 @@
         add_provider(MemoryCacheSizeProvider(metrics_config.get("memory_cache_all", False)))
     if metrics_config["raster_data"]:
         add_provider(RasterDataSizeProvider())
     if metrics_config["total_python_object_memory"]:
         add_provider(TotalPythonObjectMemoryProvider())
 
     # Initialise DBSessions
-    init_dbsessions(settings, config, health_check)
+    init_db_sessions(settings, config, health_check)
 
     checker.init(config, health_check)
     check_collector.init(config, health_check)
 
     # dogpile.cache configuration
     if "cache" in settings:
         register_backend("c2cgeoportal.hybrid", "c2cgeoportal_geoportal.lib.caching", "HybridRedisBackend")
         register_backend(
             "c2cgeoportal.hybridsentinel", "c2cgeoportal_geoportal.lib.caching", "HybridRedisSentinelBackend"
         )
         for name, cache_config in settings["cache"].items():
             caching.init_region(cache_config, name)
 
-            @zope.event.classhandler.handler(InvalidateCacheEvent)
-            def handle(event: InvalidateCacheEvent):  # pylint: disable=unused-variable
+            @zope.event.classhandler.handler(InvalidateCacheEvent)  # type: ignore
+            def handle(event: InvalidateCacheEvent) -> None:
                 del event
                 caching.invalidate_region()
                 if caching.MEMORY_CACHE_DICT:
                     caching.get_region("std").delete_multi(list(caching.MEMORY_CACHE_DICT.keys()))
                 caching.MEMORY_CACHE_DICT.clear()
 
     # Register a tween to get back the cache buster path.
     if "cache_path" not in config.get_settings():
-        config.get_settings()["cache_path"] = ["static"]
+        config.get_settings()["cache_path"] = ["static", "static-geomapfish"]
     config.add_tween("c2cgeoportal_geoportal.lib.cacheversion.CachebusterTween")
     config.add_tween("c2cgeoportal_geoportal.lib.headers.HeadersTween")
 
     # Bind the mako renderer to other file extensions
     add_mako_renderer(config, ".html")
     add_mako_renderer(config, ".js")
 
@@ -416,14 +514,30 @@
     config.add_route(
         "mapserverproxy_post",
         "/mapserv_proxy",
         mapserverproxy=True,
         pregenerator=C2CPregenerator(role=True),
         request_method="POST",
     )
+    # The tow next views are used to serve the application on the URL /mapserv_proxy/<ogc server name>
+    # instead of /mapserv_proxy?ogcserver=<ogc server name>, required for QGIS server landing page
+    config.add_route(
+        "mapserverproxy_get_path",
+        "/mapserv_proxy/{ogcserver}/*path",
+        mapserverproxy=True,
+        pregenerator=C2CPregenerator(role=True),
+        request_method="GET",
+    )
+    config.add_route(
+        "mapserverproxy_post_path",
+        "/mapserv_proxy/{ogcserver}/*path",
+        mapserverproxy=True,
+        pregenerator=C2CPregenerator(role=True),
+        request_method="POST",
+    )
     add_cors_route(config, "/mapserv_proxy", "mapserver")
 
     # Add route to the tinyows proxy
     config.add_route("tinyowsproxy", "/tinyows_proxy", pregenerator=C2CPregenerator(role=True))
 
     # Add routes to the entry view class
     config.add_route("base", "/", static=True)
@@ -440,22 +554,23 @@
     config.add_route("loginuser", "/loginuser", request_method="GET")
     config.add_route("testi18n", "/testi18n.html", request_method="GET")
 
     config.add_renderer(".map", AssetRendererFactory)
     config.add_renderer(".css", AssetRendererFactory)
     config.add_renderer(".ico", AssetRendererFactory)
     config.add_route("localejson", "/locale.json", request_method="GET")
+    config.add_route("localepot", "/locale.pot", request_method="GET")
 
-    def add_static_route(name: str, attr: str, path: str, renderer: str):
+    def add_static_route(name: str, attr: str, path: str, renderer: str) -> None:
         config.add_route(name, path, request_method="GET")
         config.add_view(Entry, attr=attr, route_name=name, renderer=renderer)
 
     add_static_route("favicon", "favicon", "/favicon.ico", "/etc/geomapfish/static/images/favicon.ico")
     add_static_route("robot.txt", "robot_txt", "/robot.txt", "/etc/geomapfish/static/robot.txt")
-    add_static_route("apijs", "apijs", "/api.js", "/etc/static-ngeo/api.js")
+    config.add_route("apijs", "/api.js", request_method="GET")
     add_static_route("apijsmap", "apijsmap", "/api.js.map", "/etc/static-ngeo/api.js.map")
     add_static_route("apicss", "apicss", "/api.css", "/etc/static-ngeo/api.css")
     add_static_route("apihelp", "apihelp", "/apihelp/index.html", "/etc/geomapfish/static/apihelp/index.html")
     c2cgeoportal_geoportal.views.add_redirect(config, "apihelp_redirect", "/apihelp.html", "apihelp")
 
     config.add_route("themes", "/themes", request_method="GET", pregenerator=C2CPregenerator(role=True))
 
@@ -487,14 +602,21 @@
     # Access to raster data
     add_cors_route(config, "/raster", "raster")
     config.add_route("raster", "/raster", request_method="GET")
 
     add_cors_route(config, "/profile.json", "profile")
     config.add_route("profile.json", "/profile.json", request_method="POST")
 
+    # Access to vector tiles
+    add_cors_route(config, "/vector_tiles", "vector_tiles")
+    config.add_route("vector_tiles", "/vector_tiles/{layer_name}/{z}/{x}/{y}.pbf", request_method="GET")
+    # There is no view corresponding to that route, it is to be used from
+    # mako templates to get the root of the "vector_tiles" web service
+    config.add_route("vector_tiles_root", "/vector_tiles", request_method="HEAD")
+
     # Shortener
     add_cors_route(config, "/short/create", "shortener")
     config.add_route("shortener_create", "/short/create", request_method="POST")
     config.add_route("shortener_get", "/s/{ref}", request_method="GET")
 
     # Geometry processing
     config.add_route("difference", "/difference", request_method="POST")
@@ -567,14 +689,29 @@
     # Add the project static view without cache buster
     config.add_static_view(
         name="static-ngeo",
         path="/etc/static-ngeo",
         cache_max_age=int(config.get_settings()["default_max_age"]),
     )
 
+    # Add the c2cgeoportal static view with cache buster
+    config.add_static_view(
+        name="static-geomapfish",
+        path="c2cgeoportal_geoportal:static",
+        cache_max_age=int(config.get_settings()["default_max_age"]),
+    )
+    config.add_cache_buster("c2cgeoportal_geoportal:static", version_cache_buster)
+
+    # Add the project static view without cache buster
+    config.add_static_view(
+        name="static-ngeo-dist",
+        path="/opt/c2cgeoportal/geoportal/node_modules/ngeo/dist",
+        cache_max_age=int(config.get_settings()["default_max_age"]),
+    )
+
     # Handles the other HTTP errors raised by the views. Without that,
     # the client receives a status=200 without content.
     config.add_view(error_handler, context=HTTPException)
 
     c2cwsgiutils.index.additional_title = (
         '<div class="row"><div class="col-lg-3"><h2>GeoMapFish</h2></div><div class="col-lg">'
     )
@@ -599,15 +736,18 @@
             c2cwsgiutils.index.additional_noauth.append(
                 '<a href="../{interface}">{interface}</a><br>'.format(interface=interface["name"])
             )
     c2cwsgiutils.index.additional_noauth.append('<a href="../apihelp/index.html">API help</a><br>')
     c2cwsgiutils.index.additional_noauth.append("</div></div><hr>")
 
 
-def init_dbsessions(settings: dict, config: Configurator, health_check: HealthCheck = None) -> None:
+def init_db_sessions(
+    settings: Dict[str, Any], config: Configurator, health_check: Optional[HealthCheck] = None
+) -> None:
+    """Initialize the database sessions."""
     db_chooser = settings.get("db_chooser", {})
     master_paths = [i.replace("//", "/") for i in db_chooser.get("master", [])]
     slave_paths = [i.replace("//", "/") for i in db_chooser.get("slave", [])]
 
     slave_prefix = "sqlalchemy_slave" if "sqlalchemy_slave.url" in settings else None
 
     c2cgeoportal_commons.models.DBSession, rw_bind, _ = c2cwsgiutils.db.setup_session(
@@ -640,13 +780,13 @@
                     health_check.add_alembic_check(
                         session,
                         alembic_ini_path=alembic_ini,
                         name="static",
                         version_schema=settings["schema_static"],
                         level=1,
                     )
-            else:  # pragma: no cover
+            else:
 
                 def check(session_: Session) -> None:
                     session_.execute("SELECT 1")
 
                 health_check.add_db_session_check(session, query_cb=check, level=2)
```

## c2cgeoportal_geoportal/resources.py

```diff
@@ -1,10 +1,8 @@
-# -*- coding: utf-8 -*-
-
-# Copyright (c) 2011-2020, Camptocamp SA
+# Copyright (c) 2011-2021, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -23,22 +21,30 @@
 # (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 # SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 
 # The views and conclusions contained in the software and documentation are those
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
+from typing import List
+
+import pyramid.request
+
 
 class Root:
-    def __init__(self, request):
-        self.request = request  # pragma: no cover
+    """The pyramid root object."""
 
+    def __init__(self, request: pyramid.request.Request):
+        self.request = request
 
-def defaultgroupsfinder(username, request):
+
+def defaultgroupsfinder(username: str, request: pyramid.request.Request) -> List[str]:
     """
-    The c2cgeoportal default group finder. To be used as the callback of the ``AuthTktAuthenticationPolicy``
-    or any callback-based authentication policy.
+    Get the c2cgeoportal default group finder.
+
+    To be used as the callback of the ``AuthTktAuthenticationPolicy`` or any callback-based authentication
+    policy.
     """
     del username  # unused
     if not hasattr(request, "user") or request.user is None:
-        return []  # pragma: no cover
+        return []
     return [role.name for role in request.user.roles]
```

## c2cgeoportal_geoportal/lib/__init__.py

```diff
@@ -1,9 +1,7 @@
-# -*- coding: utf-8 -*-
-
 # Copyright (c) 2011-2021, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
@@ -28,147 +26,165 @@
 # either expressed or implied, of the FreeBSD Project.
 
 
 import datetime
 import ipaddress
 import json
 import logging
+import re
 from string import Formatter
-from typing import Any, Dict, List, Set, Union
+from typing import Any, Dict, Iterable, List, Optional, Set, Tuple, Union, cast
 
 import dateutil
+import pyramid.request
+import pyramid.response
 from pyramid.interfaces import IRoutePregenerator
 from zope.interface import implementer
 
 from c2cgeoportal_commons.lib.url import get_url2
 from c2cgeoportal_geoportal.lib.cacheversion import get_cache_version
 from c2cgeoportal_geoportal.lib.caching import get_region
 
 LOG = logging.getLogger(__name__)
 CACHE_REGION = get_region("std")
 CACHE_REGION_OBJ = get_region("obj")
 
 
-def get_types_map(types_array):
+def get_types_map(types_array: List[Dict[str, Any]]) -> Dict[str, Dict[str, Any]]:
+    """Get the type name of a metadata or a functionality."""
     return {type_["name"]: type_ for type_ in types_array}
 
 
 def get_typed(
-    name, value, types, request, errors, layer_name=None
+    name: str,
+    value: str,
+    types: Dict[str, Any],
+    request: pyramid.request.Request,
+    errors: Set[str],
+    layer_name: Optional[str] = None,
 ) -> Union[str, int, float, bool, None, List[Any], Dict[str, Any]]:
-    prefix = "Layer '{}': ".format(layer_name) if layer_name is not None else ""
+    """Get the typed (parsed) value of a metadata or a functionality."""
+    prefix = f"Layer '{layer_name}': " if layer_name is not None else ""
     type_ = {"type": "not init"}
     try:
         if name not in types:
-            errors.add("{}Type '{}' not defined.".format(prefix, name))
+            errors.add(f"{prefix}Type '{name}' not defined.")
             return None
         type_ = types[name]
         if type_.get("type", "string") == "string":
             return value
         if type_["type"] == "list":
             return [v.strip() for v in value.split(",")]
         if type_["type"] == "boolean":
             value = value.lower()
             if value in ["yes", "y", "on", "1", "true"]:
                 return True
             if value in ["no", "n", "off", "0", "false"]:
                 return False
             errors.add(
-                "{}The boolean attribute '{}'='{}' is not in "
-                "[yes, y, on, 1, true, no, n, off, 0, false].".format(prefix, name, value.lower())
+                f"{prefix}The boolean attribute '{name}'='{value.lower()}' is not in "
+                "[yes, y, on, 1, true, no, n, off, 0, false]."
             )
         elif type_["type"] == "integer":
             return int(value)
         elif type_["type"] == "float":
             return float(value)
         elif type_["type"] == "date":
             date = dateutil.parser.parse(value, default=datetime.datetime(1, 1, 1, 0, 0, 0))  # type: ignore
             if date.time() != datetime.time(0, 0, 0):
-                errors.add(
-                    "{}The date attribute '{}'='{}' should not have any time".format(prefix, name, value)
-                )
+                errors.add(f"{prefix}The date attribute '{name}'='{value}' should not have any time")
             else:
                 return datetime.date.strftime(date.date(), "%Y-%m-%d")
         elif type_["type"] == "time":
             date = dateutil.parser.parse(value, default=datetime.datetime(1, 1, 1, 0, 0, 0))  # type: ignore
             if date.date() != datetime.date(1, 1, 1):
-                errors.add(
-                    "{}The time attribute '{}'='{}' should not have any date".format(prefix, name, value)
-                )
+                errors.add(f"{prefix}The time attribute '{name}'='{value}' should not have any date")
             else:
                 return datetime.time.strftime(date.time(), "%H:%M:%S")
         elif type_["type"] == "datetime":
             date = dateutil.parser.parse(value, default=datetime.datetime(1, 1, 1, 0, 0, 0))  # type: ignore
             return datetime.datetime.strftime(date, "%Y-%m-%dT%H:%M:%S")
         elif type_["type"] == "url":
-            return get_url2("{}The attribute '{}'".format(prefix, name), value, request, errors)
+            url = get_url2(f"{prefix}The attribute '{name}'", value, request, errors)
+            return url.url() if url else ""
         elif type_["type"] == "json":
             try:
-                return json.loads(value)
+                return cast(Dict[str, Any], json.loads(value))
             except Exception as e:
-                errors.append(
-                    "{}The attribute '{}'='{}' has an error: {}".format(prefix, name, value, str(e))
+                errors.add(f"{prefix}The attribute '{name}'='{value}' has an error: {str(e)}")
+        elif type_["type"] == "regex":
+            pattern = type_["regex"]
+            if re.match(pattern, value) is None:
+                errors.add(
+                    f"{prefix}The regex attribute '{name}'='{value}' "
+                    f"does not match expected pattern '{pattern}'."
                 )
+            else:
+                return value
         else:
-            errors.add("{}Unknown type '{}'.".format(prefix, type_["type"]))
+            errors.add(f"{prefix}Unknown type '{type_['type']}'.")
     except Exception as e:
         errors.add(
-            "{}Unable to parse the attribute '{}'='{}' with the type '{}', error:\n{}".format(
-                prefix, name, value, type_.get("type", "string"), str(e)
-            )
+            f"{prefix}Unable to parse the attribute '{name}'='{value}' with the type "
+            f"'{type_.get('type', 'string')}', error:\n{e!s}"
         )
     return None
 
 
-def get_setting(settings, path, default=None):
+def get_setting(settings: Any, path: Iterable[str], default: Any = None) -> Any:
+    """Get the settings."""
     value = settings
     for p in path:
         if value and p in value:
             value = value[p]
         else:
             return default
     return value if value else default
 
 
-@CACHE_REGION_OBJ.cache_on_arguments()
-def get_ogc_server_wms_url_ids(request):
+@CACHE_REGION_OBJ.cache_on_arguments()  # type: ignore
+def get_ogc_server_wms_url_ids(request: pyramid.request.Request) -> Dict[str, List[int]]:
+    """Get the OGCServer ids mapped on the WMS URL."""
     from c2cgeoportal_commons.models import DBSession  # pylint: disable=import-outside-toplevel
     from c2cgeoportal_commons.models.main import OGCServer  # pylint: disable=import-outside-toplevel
 
     errors: Set[str] = set()
     servers: Dict[str, List[int]] = {}
     for ogc_server in DBSession.query(OGCServer).all():
         url = get_url2(ogc_server.name, ogc_server.url, request, errors)
         if url is not None:
-            servers.setdefault(url, []).append(ogc_server.id)
+            servers.setdefault(url.url(), []).append(ogc_server.id)
     return servers
 
 
-@CACHE_REGION_OBJ.cache_on_arguments()
-def get_ogc_server_wfs_url_ids(request):
+@CACHE_REGION_OBJ.cache_on_arguments()  # type: ignore
+def get_ogc_server_wfs_url_ids(request: pyramid.request.Request) -> Dict[str, List[int]]:
+    """Get the OGCServer ids mapped on the WFS URL."""
     from c2cgeoportal_commons.models import DBSession  # pylint: disable=import-outside-toplevel
     from c2cgeoportal_commons.models.main import OGCServer  # pylint: disable=import-outside-toplevel
 
     errors: Set[str] = set()
     servers: Dict[str, List[int]] = {}
     for ogc_server in DBSession.query(OGCServer).all():
         url = get_url2(ogc_server.name, ogc_server.url_wfs or ogc_server.url, request, errors)
         if url is not None:
-            servers.setdefault(url, []).append(ogc_server.id)
+            servers.setdefault(url.url(), []).append(ogc_server.id)
     return servers
 
 
 @implementer(IRoutePregenerator)
-class C2CPregenerator:  # pragma: no cover
-    def __init__(self, version=True, role=False):
+class C2CPregenerator:
+    """The custom pyramid pregenerator that manage the cache version."""
+
+    def __init__(self, version: bool = True, role: bool = False):
         self.version = version
         self.role = role
 
-    def __call__(self, request, elements, kw):
-        query = kw.get("_query", {})
+    def __call__(self, request: pyramid.request.Request, elements: Any, kw: Any) -> Tuple[Any, Any]:
+        query = {**kw.get("_query", {})}
 
         if self.version:
             query["cache_version"] = get_cache_version()
 
         if self.role and request.user:
             # The templates change if the user is logged in or not. Usually it is
             # the role that is making a difference, but the username is put in
@@ -178,48 +194,54 @@
         kw["_query"] = query
         return elements, kw
 
 
 _formatter = Formatter()
 
 
-@CACHE_REGION_OBJ.cache_on_arguments()
-def _get_intranet_networks(request):
+@CACHE_REGION_OBJ.cache_on_arguments()  # type: ignore
+def _get_intranet_networks(
+    request: pyramid.request.Request,
+) -> List[Union[ipaddress.IPv4Network, ipaddress.IPv6Network]]:
     return [
         ipaddress.ip_network(network, strict=False)
         for network in request.registry.settings.get("intranet", {}).get("networks", [])
     ]
 
 
-@CACHE_REGION.cache_on_arguments()
-def get_role_id(name):
+@CACHE_REGION.cache_on_arguments()  # type: ignore
+def get_role_id(name: str) -> int:
+    """Get the role ID."""
     from c2cgeoportal_commons.models import DBSession, main  # pylint: disable=import-outside-toplevel
 
-    return DBSession.query(main.Role.id).filter(main.Role.name == name).one()[0]
+    return cast(int, DBSession.query(main.Role.id).filter(main.Role.name == name).one()[0])
 
 
-def get_roles_id(request):
+def get_roles_id(request: pyramid.request.Request) -> List[int]:
+    """Get the user roles ID."""
     result = [get_role_id(request.get_organization_role("anonymous"))]
     if is_intranet(request):
         result.append(get_role_id(request.get_organization_role("intranet")))
     if request.user is not None:
         result.append(get_role_id(request.get_organization_role("registered")))
         result.extend([r.id for r in request.user.roles])
     return result
 
 
-def get_roles_name(request):
+def get_roles_name(request: pyramid.request.Request) -> pyramid.response.Response:
+    """Get the user roles name."""
     result = [request.get_organization_role("anonymous")]
     if is_intranet(request):
         result.append(request.get_organization_role("intranet"))
     if request.user is not None:
         result.append(request.get_organization_role("registered"))
         result.extend([r.name for r in request.user.roles])
     return result
 
 
-def is_intranet(request):
+def is_intranet(request: pyramid.request.Request) -> bool:
+    """Get if it's an intranet user."""
     address = ipaddress.ip_address(request.client_addr)
     for network in _get_intranet_networks(request):
         if address in network:
             return True
     return False
```

## c2cgeoportal_geoportal/lib/authentication.py

```diff
@@ -1,9 +1,7 @@
-# -*- coding: utf-8 -*-
-
 # Copyright (c) 2014-2021, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
@@ -27,16 +25,19 @@
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
 
 import binascii
 import json
 import logging
+import os
 import time
+from typing import Any, Callable, Dict, List, Optional, cast
 
+import pyramid.request
 from Crypto.Cipher import AES  # nosec
 from pyramid.authentication import (
     AuthTktAuthenticationPolicy,
     BasicAuthAuthenticationPolicy,
     CallbackAuthenticationPolicy,
 )
 from pyramid.interfaces import IAuthenticationPolicy
@@ -47,21 +48,25 @@
 from c2cgeoportal_geoportal.lib import oauth2
 from c2cgeoportal_geoportal.resources import defaultgroupsfinder
 
 LOG = logging.getLogger(__name__)
 
 
 @implementer(IAuthenticationPolicy)
-class UrlAuthenticationPolicy(CallbackAuthenticationPolicy):
-    def __init__(self, aes_key, callback=None, debug=False):
+class UrlAuthenticationPolicy(CallbackAuthenticationPolicy):  # type: ignore
+    """An authentication policy based on information given in the URL."""
+
+    def __init__(
+        self, aes_key: str, callback: Optional[Callable[[str, Any], List[str]]] = None, debug: bool = False
+    ):
         self.aeskey = aes_key
         self.callback = callback
         self.debug = debug
 
-    def unauthenticated_userid(self, request):
+    def unauthenticated_userid(self, request: pyramid.request.Request) -> Optional[str]:
         if not request.method == "GET" or "auth" not in request.params:
             return None
         auth_enc = request.params.get("auth")
         if auth_enc is None:
             return None
         try:
             if self.aeskey is None:  # pragma: nocover
@@ -76,41 +81,45 @@
 
             if "t" in auth and "u" in auth and "p" in auth:
                 timestamp = int(auth["t"])
 
                 if now < timestamp and request.registry.validate_user(request, auth["u"], auth["p"]):
                     headers = remember(request, auth["u"])
                     request.response.headerlist.extend(headers)
-                    return auth["u"]
+                    return cast(str, auth["u"])
 
         except Exception as e:
             LOG.error("URL login error: %s.", e, exc_info=True)
 
         return None
 
-    def remember(self, request, userid, **kw):  # pylint: disable=no-self-use
-        """A no-op."""
+    def remember(  # pylint: disable=no-self-use
+        self, request: pyramid.request.Request, userid: str, **kw: Any
+    ) -> List[Dict[str, str]]:
+        """Do no-op."""
         del request, userid, kw
         return []
 
-    def forget(self, request):  # pylint: disable= no-self-use
-        """A no-op."""
+    def forget(self, request: pyramid.request.Request) -> List[Dict[str, str]]:  # pylint: disable=no-self-use
+        """Do no-op."""
         del request
         return []
 
 
 @implementer(IAuthenticationPolicy)
-class OAuth2AuthenticationPolicy(CallbackAuthenticationPolicy):
+class OAuth2AuthenticationPolicy(CallbackAuthenticationPolicy):  # type: ignore
+    """The oauth2 authentication policy."""
+
     @staticmethod
-    def unauthenticated_userid(request):
+    def unauthenticated_userid(request: pyramid.request.Request) -> Optional[str]:
         route_url = ""
         try:
-            route_url = request.current_route_url(_query=request.GET)
+            route_url = request.current_route_url(_query={**request.GET})
         except ValueError:
-            route_url = request.route_url("base", _query=request.GET)
+            route_url = request.route_url("base", _query={**request.GET})
 
         LOG.debug(
             "Call OAuth verify_request with:\nurl: %s\nmethod: %s\nbody:\n%s",
             route_url,
             request.method,
             request.body,
         )
@@ -121,29 +130,43 @@
             request.headers,
             [],
         )
         LOG.debug("OAuth verify_request: %s", valid)
         if valid:
             request.user_ = oauth2_request.user
 
-            return request.user_.username
+            return cast(str, request.user_.username)
         return None
 
-    def remember(self, request, userid, **kw):  # pylint: disable=no-self-use
-        """A no-op."""
+    def remember(  # pylint: disable=no-self-use
+        self, request: pyramid.request.Request, userid: str, **kw: Any
+    ) -> List[Dict[str, str]]:
+        """Do no-op."""
         del request, userid, kw
         return []
 
-    def forget(self, request):  # pylint: disable= no-self-use
-        """A no-op."""
+    def forget(self, request: pyramid.request.Request) -> List[Dict[str, str]]:  # pylint: disable=no-self-use
+        """Do no-op."""
         del request
         return []
 
 
-def create_authentication(settings):
+@implementer(IAuthenticationPolicy)
+class DevAuthenticationPolicy(CallbackAuthenticationPolicy):  # type: ignore
+    """An authentication policy for the dev base on an environment variable."""
+
+    @staticmethod
+    def unauthenticated_userid(request: pyramid.request.Request) -> Optional[str]:
+        """Get the user name from the environment variable."""
+        del request
+        return os.environ["DEV_LOGINNAME"]
+
+
+def create_authentication(settings: Dict[str, Any]) -> MultiAuthenticationPolicy:
+    """Create all the authentication policies."""
     timeout = settings.get("authtkt_timeout")
     timeout = None if timeout is None or timeout.lower() == "none" else int(timeout)
     reissue_time = settings.get("authtkt_reissue_time")
     reissue_time = None if reissue_time is None or reissue_time.lower() == "none" else int(reissue_time)
     max_age = settings.get("authtkt_max_age")
     max_age = None if max_age is None or max_age.lower() == "none" else int(max_age)
     http_only = settings.get("authtkt_http_only", "True")
@@ -184,21 +207,26 @@
     )
 
     policies.append(OAuth2AuthenticationPolicy())
 
     if basicauth:
         if settings["authentication"].get("two_factor", False):
             LOG.warning(
-                "Basic auth and tow factor auth should not be anhable toogether, "
+                "Basic auth and tow factor auth should not be enable toogether, "
                 "you should use OAuth2 instead of Basic auth"
             )
 
         basic_authentication_policy = BasicAuthAuthenticationPolicy(c2cgeoportal_check)
         policies.append(basic_authentication_policy)
 
+    # Consider empty string as not configured
+    if "DEV_LOGINNAME" in os.environ and os.environ["DEV_LOGINNAME"]:
+        policies.append(DevAuthenticationPolicy())
+
     return MultiAuthenticationPolicy(policies)
 
 
-def c2cgeoportal_check(username, password, request):  # pragma: no cover
+def c2cgeoportal_check(username: str, password: str, request: pyramid.request.Request) -> Optional[List[str]]:
+    """Check the user authentication."""
     if request.registry.validate_user(request, username, password):
         return defaultgroupsfinder(username, request)
     return None
```

## c2cgeoportal_geoportal/lib/bashcolor.py

```diff
@@ -1,10 +1,8 @@
-# -*- coding: utf-8 -*-
-
-# Copyright (c) 2013-2020, Camptocamp SA
+# Copyright (c) 2013-2021, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -23,20 +21,26 @@
 # (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 # SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 
 # The views and conclusions contained in the software and documentation are those
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
+from enum import Enum
+
+
+class Color(Enum):
+    """The available colors."""
 
-BLACK = 0
-RED = 1
-GREEN = 2
-YELLOW = 3
-BLUE = 4
-MAGENTA = 5
-CYAN = 6
-WHITE = 7
+    BLACK = 0
+    RED = 1
+    GREEN = 2
+    YELLOW = 3
+    BLUE = 4
+    MAGENTA = 5
+    CYAN = 6
+    WHITE = 7
 
 
-def colorize(text, color):  # pragma: no cover
-    return "\x1b[01;3{0:d}m{1!s}\x1b[0m".format(color, text)
+def colorize(text: str, color: Color) -> str:
+    """Colorize a text for the bash."""
+    return f"\x1b[01;3{color.value}m{text}\x1b[0m"
```

## c2cgeoportal_geoportal/lib/cacheversion.py

```diff
@@ -1,9 +1,7 @@
-# -*- coding: utf-8 -*-
-
 # Copyright (c) 2011-2021, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
@@ -25,42 +23,52 @@
 
 # The views and conclusions contained in the software and documentation are those
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
 
 import uuid
+from typing import Any, Callable, Dict, Tuple
 from urllib.parse import urljoin
 
 import pyramid.registry
+import pyramid.request
+import pyramid.response
 
 from c2cgeoportal_geoportal.lib.caching import get_region
 
 CACHE_REGION = get_region("std")
 
 
-@CACHE_REGION.cache_on_arguments()
-def get_cache_version():
-    """Return a cache version that is regenerate after each cache invalidation"""
+@CACHE_REGION.cache_on_arguments()  # type: ignore
+def get_cache_version() -> str:
+    """Return a cache version that is regenerate after each cache invalidation."""
     return uuid.uuid4().hex
 
 
-def version_cache_buster(request, subpath, kw):  # pragma: no cover
+def version_cache_buster(
+    request: pyramid.request.Request, subpath: str, kw: Dict[str, Any]
+) -> Tuple[str, Dict[str, Any]]:
+    """Join the cash buster version with the sub path."""
     del request  # unused
     return urljoin(get_cache_version() + "/", subpath), kw
 
 
 class CachebusterTween:
     """Get back the cachebuster URL."""
 
-    def __init__(self, handler, registry: pyramid.registry.Registry):
+    def __init__(
+        self,
+        handler: Callable[[pyramid.request.Request], pyramid.response.Response],
+        registry: pyramid.registry.Registry,
+    ):
         self.handler = handler
         self.cache_path = registry.settings["cache_path"]
 
-    def __call__(self, request):
+    def __call__(self, request: pyramid.request.Request) -> pyramid.response.Response:
         path = request.path_info.split("/")
         if len(path) > 1 and path[1] in self.cache_path:
             # remove the cache buster
             path.pop(2)
             request.path_info = "/".join(path)
 
         return self.handler(request)
```

## c2cgeoportal_geoportal/lib/caching.py

```diff
@@ -1,10 +1,8 @@
-# -*- coding: utf-8 -*-
-
-# Copyright (c) 2012-2020, Camptocamp SA
+# Copyright (c) 2012-2021, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -26,274 +24,146 @@
 # The views and conclusions contained in the software and documentation are those
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
 
 import inspect
 import logging
-from typing import Any, Dict, List
+from typing import TYPE_CHECKING, Any, Callable, Dict, List, Optional
 
-from dogpile.cache.api import NO_VALUE
+import sqlalchemy.ext.declarative
+from dogpile.cache.api import NO_VALUE, CacheBackend
+from dogpile.cache.backends.memory import MemoryBackend
 from dogpile.cache.backends.redis import RedisBackend, RedisSentinelBackend
-from dogpile.cache.region import make_region
+from dogpile.cache.region import CacheRegion, make_region
 from dogpile.cache.util import sha1_mangle_key
 from pyramid.request import Request
 from sqlalchemy.orm.util import identity_key
 
 from c2cgeoportal_commons.models import Base
 
+if TYPE_CHECKING:
+    from dogpile.cache.api import SerializedReturnType
+else:
+    SerializedReturnType = Any
+
 LOG = logging.getLogger(__name__)
 _REGION: Dict[str, Any] = {}
 MEMORY_CACHE_DICT: Dict[str, Any] = {}
 
 
-def map_dbobject(item):
-
+def map_dbobject(
+    item: sqlalchemy.ext.declarative.ConcreteBase,
+) -> sqlalchemy.ext.declarative.ConcreteBase:
+    """Get an cache identity key for the cache."""
     return identity_key(item) if isinstance(item, Base) else item
 
 
-def keygen_function(namespace, function):
+def keygen_function(namespace: Any, function: Callable[..., Any]) -> Callable[..., str]:
     """
-    Return a function that generates a string
-    key, based on a given function as well as
-    arguments to the returned function itself.
+    Return a function that generates a string key.
+
+    Based on a given function as well as arguments to the returned function itself.
 
-    This is used by :meth:`.CacheRegion.cache_on_arguments`
-    to generate a cache key from a decorated function.
+    This is used by :meth:`.CacheRegion.cache_on_arguments` to generate a cache key from a decorated function.
     """
 
     if namespace is None:
         namespace = (function.__module__, function.__name__)
-    else:  # pragma: no cover
+    else:
         namespace = (function.__module__, function.__name__, namespace)
 
     args = inspect.getfullargspec(function)
     ignore_first_argument = args[0] and args[0][0] in ("self", "cls")
 
-    def generate_key(*args, **kw):
-        if kw:  # pragma: no cover
+    def generate_key(*args: Any, **kw: Any) -> str:
+        if kw:
             raise ValueError("key creation function does not accept keyword arguments.")
         parts: List[str] = []
         parts.extend(namespace)
         if ignore_first_argument:
             args = args[1:]
         new_args: List[str] = [arg for arg in args if not isinstance(arg, Request)]
         parts.extend(map(str, map(map_dbobject, new_args)))
         return "|".join(parts)
 
     return generate_key
 
 
-def init_region(conf, region):
-    """
-    Initialize the caching module.
-    """
+def init_region(conf: Dict[str, Any], region: str) -> CacheRegion:
+    """Initialize the caching module."""
     cache_region = get_region(region)
     _configure_region(conf, cache_region)
     return cache_region
 
 
-def _configure_region(conf, cache_region):
-    global MEMORY_CACHE_DICT
-    kwargs = {"replace_existing_backend": True}
+def _configure_region(conf: Dict[str, Any], cache_region: CacheRegion) -> None:
+    kwargs: Dict[str, Any] = {"replace_existing_backend": True}
     backend = conf["backend"]
     kwargs.update({k: conf[k] for k in conf if k != "backend"})
-    kwargs.setdefault("arguments", {})  # type: ignore
-    kwargs["arguments"]["cache_dict"] = MEMORY_CACHE_DICT  # type: ignore
+    kwargs.setdefault("arguments", {})
+    kwargs["arguments"]["cache_dict"] = MEMORY_CACHE_DICT
     cache_region.configure(backend, **kwargs)
 
 
-def get_region(region):
-    """
-    Return a cache region.
-    """
-    global _REGION
+def get_region(region: str) -> CacheRegion:
+    """Return a cache region."""
     if region not in _REGION:
         _REGION[region] = make_region(function_key_generator=keygen_function)
     return _REGION[region]
 
 
-def invalidate_region(region=None):
+def invalidate_region(region: Optional[str] = None) -> None:
+    """Invalidate a cache region."""
     if region is None:
         for cache_region in _REGION.values():
             cache_region.invalidate()
     else:
         get_region(region).invalidate()
 
 
-class HybridRedisBackend(RedisBackend):
-    """
-    A memory and redis backend
-    """
+class HybridRedisBackend(CacheBackend):  # type: ignore
+    """A Dogpile cache backend with a memory cache backend in front of a Redis backend for performance."""
 
-    def __init__(self, arguments):
-        self._cache = arguments.pop("cache_dict", {})
+    def __init__(self, arguments: Dict[str, Any]):  # pylint: disable=super-init-not-called
         self._use_memory_cache = not arguments.pop("disable_memory_cache", False)
+        self._memory = MemoryBackend({"cache_dict": arguments.pop("cache_dict", {})})
+        self._redis = RedisBackend(arguments)
 
-        super().__init__(arguments)
-
-    def get(self, key):
-        value = self._cache.get(key, NO_VALUE)
+    def get(self, key: str) -> SerializedReturnType:
+        value = self._memory.get(key)
         if value == NO_VALUE:
-            value = super().get(sha1_mangle_key(key.encode()))
-        if value != NO_VALUE and self._use_memory_cache:
-            self._cache[key] = value
+            val = self._redis.get_serialized(sha1_mangle_key(key.encode()))
+            if val in (None, NO_VALUE):
+                return NO_VALUE
+            value = self._redis.deserializer(val)
+            if value != NO_VALUE and self._use_memory_cache:
+                self._memory.set(key, value)
         return value
 
-    def get_multi(self, keys):
+    def get_multi(self, keys: List[str]) -> List[SerializedReturnType]:
         return [self.get(key) for key in keys]
 
-    def set(self, key, value):
+    def set(self, key: str, value: SerializedReturnType) -> None:
         if self._use_memory_cache:
-            self._cache[key] = value
-        super().set(sha1_mangle_key(key.encode()), value)
+            self._memory.set(key, value)
+        self._redis.set_serialized(sha1_mangle_key(key.encode()), self._redis.serializer(value))
 
-    def set_multi(self, mapping):
+    def set_multi(self, mapping: Dict[str, SerializedReturnType]) -> None:
         for key, value in mapping.items():
             self.set(key, value)
 
-    def delete(self, key):
-        self._cache.pop(key, None)
-        super().delete(key)
+    def delete(self, key: str) -> None:
+        self._memory.delete(key)
+        self._redis.delete(key)
 
+    def delete_multi(self, keys: List[str]) -> None:
+        self._memory.delete_multi(keys)
+        self._redis.delete_multi(keys)
 
-class HybridRedisSentinelBackend(RedisSentinelBackend):
-    """
-    A memory and redis sentinel backend
-    """
 
-    def __init__(self, arguments):
-        self._cache = arguments.pop("cache_dict", {})
-        self._use_memory_cache = not arguments.pop("disable_memory_cache", False)
+class HybridRedisSentinelBackend(HybridRedisBackend):
+    """Same as HybridRedisBackend but using the Redis Sentinel."""
 
+    def __init__(self, arguments: Dict[str, Any]):
         super().__init__(arguments)
-
-    def get(self, key):
-        value = self._cache.get(key, NO_VALUE)
-        if value == NO_VALUE:
-            value = super().get(sha1_mangle_key(key.encode()))
-        if value != NO_VALUE and self._use_memory_cache:
-            self._cache[key] = value
-        return value
-
-    def get_multi(self, keys):
-        return [self.get(key) for key in keys]
-
-    def set(self, key, value):
-        if self._use_memory_cache:
-            self._cache[key] = value
-        super().set(sha1_mangle_key(key.encode()), value)
-
-    def set_multi(self, mapping):
-        for key, value in mapping.items():
-            self.set(key, value)
-
-    def delete(self, key):
-        self._cache.pop(key, None)
-        super().delete(key)
-
-
-NO_CACHE = 0
-PUBLIC_CACHE = 1
-PRIVATE_CACHE = 2
-
-CORS_METHODS = "HEAD, GET, POST, PUT, DELETE"
-
-
-def _set_cors_headers(request, response, service_name, service_headers_settings, credentials):
-    """
-    Handle CORS requests, as specified in https://www.w3.org/TR/cors/
-    """
-    response.vary = (response.vary or ()) + ("Origin",)
-
-    if "Origin" not in request.headers:
-        return  # Not a CORS request if this header is missing
-    origin = request.headers["Origin"]
-
-    if request.method == "OPTIONS" and "Access-Control-Request-Method" not in request.headers:
-        LOG.warning("CORS preflight query missing the Access-Control-Request-Method header")
-        return
-
-    allowed_origins = service_headers_settings.get("access_control_allow_origin", [])
-    if origin not in allowed_origins:
-        if "*" in allowed_origins:
-            origin = "*"
-            credentials = False  # Force no credentials
-        else:
-            LOG.warning("CORS query not allowed for origin=%s, service=%s", origin, service_name)
-            return
-
-    response.headers.update(
-        {"Access-Control-Allow-Origin": origin, "Access-Control-Allow-Methods": CORS_METHODS}
-    )
-
-    max_age = service_headers_settings.get("access_control_max_age", 3600)
-    response.headers["Access-Control-Max-Age"] = str(max_age)
-
-    if credentials:
-        response.headers["Access-Control-Allow-Credentials"] = "true"
-
-    if request.method != "OPTIONS":
-        return
-
-    response.cache_control.max_age = max_age
-
-    if not service_headers_settings or "access_control_allow_origin" not in service_headers_settings:
-        LOG.warning("CORS query not configured for service=%s", service_name)
-        return
-
-    requested_headers = request.headers.get("Access-Control-Request-Headers", False)
-    if requested_headers:
-        # For the moment, we allow all requested headers
-        response.headers["Access-Control-Allow-Headers"] = requested_headers
-
-    # If we start using headers in responses, we'll have to add
-    # Access-Control-Expose-Headers
-
-
-def _set_common_headers(request, response, service_headers_settings, cache, content_type):
-    """
-    Set the common headers
-    """
-
-    response.headers.update(service_headers_settings.get("headers", {}))
-
-    if cache == NO_CACHE:
-        response.cache_control.no_cache = True
-        response.cache_control.max_age = 0
-    elif cache == PUBLIC_CACHE:
-        response.cache_control.public = True
-    elif cache == PRIVATE_CACHE:
-        if request.user is not None:
-            response.cache_control.private = True
-        else:
-            response.cache_control.public = True
-    else:  # pragma: no cover
-        raise Exception("Invalid cache type")
-
-    if cache != NO_CACHE:
-        max_age = service_headers_settings.get("cache_control_max_age", 3600)
-
-        response.cache_control.max_age = max_age
-        if max_age == 0:
-            response.cache_control.no_cache = True
-
-    if content_type is not None:
-        response.content_type = content_type
-
-    return response
-
-
-def set_common_headers(request, service_name, cache, response=None, credentials=True, content_type=None):
-    """
-    Set the common headers
-    """
-    if response is None:
-        response = request.response
-
-    headers_settings = request.registry.settings.get("headers", {})
-    service_headers_settings = headers_settings.get(service_name, {})
-
-    _set_cors_headers(request, response, service_name, service_headers_settings, credentials)
-    if request.method == "OPTIONS":
-        return response
-    return _set_common_headers(request, response, service_headers_settings, cache, content_type)
+        self._redis = RedisSentinelBackend(arguments)
```

## c2cgeoportal_geoportal/lib/check_collector.py

```diff
@@ -1,10 +1,8 @@
-# -*- coding: utf-8 -*-
-
-# Copyright (c) 2011-2020, Camptocamp SA
+# Copyright (c) 2011-2021, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -23,51 +21,60 @@
 # (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 # SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 
 # The views and conclusions contained in the software and documentation are those
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 import logging
-from typing import Any
+from typing import Any, Dict, Optional, cast
 
+import c2cwsgiutils.health_check
+import pyramid.config
+import pyramid.request
 import requests
 
 from c2cgeoportal_geoportal.lib.checker import build_url
 
 LOG = logging.getLogger(__name__)
 
 
-def init(config, health_check):
+def init(config: pyramid.config.Configurator, health_check: c2cwsgiutils.health_check.HealthCheck) -> None:
+    """
+    Initialize the check collector.
+
+    Add him in the c2cwsgichecks.
+    """
     global_settings = config.get_settings()
     if "check_collector" not in global_settings:
         return
     settings = global_settings["check_collector"]
     c2c_base = global_settings.get("c2c.base_path", "")
 
     max_level = settings["max_level"]
 
     for host in settings["hosts"]:
 
         class Check:
-            def __init__(self, host):
+            def __init__(self, host: Dict[str, Any]):
                 self.host = host
 
-            def __call__(self, request) -> Any:  # pylint: disable=inconsistent-return-statements
+            def __call__(self, request: pyramid.request.Request) -> Optional[Dict[str, Any]]:
                 params = request.params
                 display = self.host["display"]
                 if "host" not in params or display == params["host"]:
                     url_headers = build_url(
                         "check_collector",
-                        "%s/%s/health_check" % (self.host["url"].rstrip("/"), c2c_base.strip("/")),
+                        f"{self.host['url'].rstrip('/')}/{c2c_base.strip('/')}/health_check",
                         request,
                     )
                     r = requests.get(
                         params={"max_level": str(self.host.get("max_level", max_level))},
                         timeout=120,
-                        **url_headers,
+                        **url_headers,  # type: ignore
                     )
                     r.raise_for_status()
-                    return r.json()
+                    return cast(Dict[str, Any], r.json())
+                return None
 
         health_check.add_custom_check(
             name="check_collector_" + host["display"], check_cb=Check(host), level=settings["level"]
         )
```

## c2cgeoportal_geoportal/lib/checker.py

```diff
@@ -1,9 +1,7 @@
-# -*- coding: utf-8 -*-
-
 # Copyright (c) 2011-2021, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
@@ -28,262 +26,262 @@
 # either expressed or implied, of the FreeBSD Project.
 
 import json
 import logging
 import os
 import subprocess
 from time import sleep
-from typing import Dict
+from typing import Any, Dict, List, Mapping, Optional, Union, cast
 from urllib.parse import urljoin
 
 import c2cwsgiutils.health_check
+import pyramid.config
+import pyramid.request
 import requests
 
 LOG = logging.getLogger(__name__)
 
 
-def build_url(name, path, request, headers=None):
-    """Build an URL and headers for the checkers"""
+def build_url(
+    name: str, path: str, request: pyramid.request.Request, headers: Optional[Dict[str, str]] = None
+) -> Dict[str, Union[str, Dict[str, str]]]:
+    """Build an URL and headers for the checkers."""
     base_internal_url = request.registry.settings["checker"]["base_internal_url"]
     url = urljoin(base_internal_url, path)
 
     forward_host = request.registry.settings["checker"].get("forward_host", False)
     headers = _build_headers(request, headers)
     if forward_host:
         headers["Host"] = request.host
 
     LOG.debug("%s, URL: %s", name, url)
     return {"url": url, "headers": headers}
 
 
-def _build_headers(request, headers=None):
+def _build_headers(
+    request: pyramid.request.Request, headers: Optional[Dict[str, str]] = None
+) -> Dict[str, str]:
     if headers is None:
         headers = {}
     headers["Cache-Control"] = "no-cache"
     settings = request.registry.settings.get("checker", {})
     for header in settings.get("forward_headers", []):
         value = request.headers.get(header)
         if value is not None:
             headers[header] = value
     return headers
 
 
-def _routes(settings, health_check):
+def _routes(settings: Dict[str, Any], health_check: c2cwsgiutils.health_check.HealthCheck) -> None:
     routes_settings = settings["routes"]
     for route in routes_settings["routes"]:
         if route.get("checker_name", route["name"]) not in routes_settings["disable"]:
             name = "checker_routes_" + route.get("checker_name", route["name"])
 
             class GetRequest:
-                """
-                Get the request information about the current route name
-                """
+                """Get the request information about the current route name."""
 
-                def __init__(self, route_name, type_):
+                def __init__(self, route_name: str, type_: str) -> None:
                     self.route_name = route_name
                     self.type = type_
 
-                def __call__(self, request):
+                def __call__(self, request: pyramid.request.Request) -> Union[str, Dict[str, str]]:
                     return build_url("route", request.route_path(self.route_name), request)[self.type]
 
             health_check.add_url_check(
-                url=GetRequest(route["name"], "url"),
+                url=GetRequest(route["name"], "url"),  # type: ignore
                 name=name,
                 params=route.get("params", None),
-                headers=GetRequest(route["name"], "headers"),
+                headers=GetRequest(route["name"], "headers"),  # type: ignore
                 level=route["level"],
                 timeout=30,
             )
 
 
-def _pdf3(settings, health_check):
+def _pdf3(settings: Dict[str, Any], health_check: c2cwsgiutils.health_check.HealthCheck) -> None:
     print_settings = settings["print"]
     if "spec" not in print_settings:
         return
 
-    def check(request):
+    def check(request: pyramid.request.Request) -> None:
         path = request.route_path("printproxy_report_create", format="pdf")
         url_headers = build_url("Check the printproxy request (create)", path, request)
 
         session = requests.session()
-        resp = session.post(json=print_settings["spec"], timeout=30, **url_headers)
+        resp = session.post(json=print_settings["spec"], timeout=30, **url_headers)  # type: ignore
         resp.raise_for_status()
 
         job = resp.json()
 
         path = request.route_path("printproxy_status", ref=job["ref"])
         url_headers = build_url("Check the printproxy pdf status", path, request)
         done = False
         while not done:
             sleep(1)
-            resp = session.get(timeout=30, **url_headers)
+            resp = session.get(timeout=30, **url_headers)  # type: ignore
             resp.raise_for_status()
 
             status = resp.json()
             if "error" in status:
-                raise Exception("Failed to do the printing: {0!s}".format(status["error"]))
+                raise Exception(f"Failed to do the printing: {status['error']}")
             done = status["done"]
 
         path = request.route_path("printproxy_report_get", ref=job["ref"])
         url_headers = build_url("Check the printproxy pdf retrieve", path, request)
-        resp = session.get(timeout=30, **url_headers)
+        resp = session.get(timeout=30, **url_headers)  # type: ignore
         resp.raise_for_status()
 
     health_check.add_custom_check(name="checker_print", check_cb=check, level=print_settings["level"])
 
 
-def _fts(settings, health_check):
+def _fts(settings: Dict[str, Any], health_check: c2cwsgiutils.health_check.HealthCheck) -> None:
     fts_settings = settings["fulltextsearch"]
     if fts_settings.get("disable", False):
         return
 
-    def get_both(request):
+    def get_both(request: pyramid.request.Request) -> Dict[str, Union[str, Dict[str, str]]]:
         return build_url("Check the fulltextsearch", request.route_path("fulltextsearch"), request)
 
-    def check(_request, response):
+    def check(_request: pyramid.request.Request, response: pyramid.response.Response) -> None:
         assert response.json()["features"], "No result"
 
     health_check.add_url_check(
         name="checker_fulltextsearch",
-        url=lambda r: get_both(r)["url"],
-        headers=lambda r: get_both(r)["headers"],
+        url=lambda r: get_both(r)["url"],  # type: ignore
+        headers=lambda r: get_both(r)["headers"],  # type: ignore
         params={"query": fts_settings["search"], "limit": "1"},
         check_cb=check,
         level=fts_settings["level"],
     )
 
 
-def _themes_errors(settings, health_check):
+def _themes_errors(settings: Dict[str, Any], health_check: c2cwsgiutils.health_check.HealthCheck) -> None:
     from c2cgeoportal_commons.models import DBSession  # pylint: disable=import-outside-toplevel
     from c2cgeoportal_commons.models.main import Interface  # pylint: disable=import-outside-toplevel
 
     themes_settings = settings["themes"]
     default_params = themes_settings.get("params", {})
     interfaces_settings = themes_settings["interfaces"]
 
-    def check(request):
+    def check(request: pyramid.request.Request) -> None:
         path = request.route_path("themes")
         session = requests.session()
         for (interface,) in DBSession.query(Interface.name).all():
             params: Dict[str, str] = {}
             params.update(default_params)
             params.update(interfaces_settings.get(interface, {}).get("params", {}))
             params["interface"] = interface
 
             interface_url_headers = build_url("checker_themes " + interface, path, request)
 
-            response = session.get(params=params, timeout=120, **interface_url_headers)
+            response = session.get(params=params, timeout=120, **interface_url_headers)  # type: ignore
             response.raise_for_status()
 
             result = response.json()
             if result["errors"]:
                 raise c2cwsgiutils.health_check.JsonCheckException(
-                    "Interface '{}' has error in Theme.".format(interface), result["errors"]
+                    f"Interface '{interface}' has error in Theme.", result["errors"]
                 )
 
     health_check.add_custom_check(name="checker_themes", check_cb=check, level=themes_settings["level"])
 
 
-def _lang_files(global_settings, settings, health_check):
+def _lang_files(
+    global_settings: Dict[str, Any],
+    settings: Dict[str, Any],
+    health_check: c2cwsgiutils.health_check.HealthCheck,
+) -> None:
     lang_settings = settings["lang"]
     available_locale_names = global_settings["available_locale_names"]
 
     default_name = global_settings["default_locale_name"]
-    assert (
-        default_name in available_locale_names
-    ), "default_locale_name '{}' not in available_locale_names: {}".format(
-        default_name, ", ".join(available_locale_names)
+    assert default_name in available_locale_names, (
+        f"default_locale_name '{default_name}' not in available_locale_names: "
+        f"{', '.join(available_locale_names)}"
     )
 
     for type_ in lang_settings.get("files", []):
         for lang in available_locale_names:
             if type_ == "ngeo":
-                url = "/etc/geomapfish/static/{lang}.json"
+                url = f"/etc/geomapfish/static/{lang}.json"
             else:
-                raise Exception(
-                    "Your language type value '%s' is not valid, " "available values [ngeo]" % type_
-                )
+                raise Exception(f"Your language type value '{type_}' is not valid, available values [ngeo]")
 
-            name = "checker_lang_{}_{}".format(type_, lang)
+            name = f"checker_lang_{type_}_{lang}"
 
             class GetRequest:
-                """
-                Get the request information about the current route name
-                """
+                """Get the request information about the current route name."""
 
-                def __init__(self, name, url, lang, type_):
+                def __init__(self, name: str, url: str, lang: str, type_: str) -> None:
                     self.name = name
                     self.url = url
                     self.lang = lang
                     self.type = type_
 
-                def __call__(self, request):
+                def __call__(self, request: pyramid.request.Request) -> Union[str, Mapping[str, str]]:
                     return build_url(
                         self.name,
                         request.static_path(
                             self.url.format(package=global_settings["package"], lang=self.lang)
                         ),
                         request,
                     )[self.type]
 
             health_check.add_url_check(
                 name=name,
-                url=GetRequest(name, url, lang, "url"),
-                headers=GetRequest(name, url, lang, "headers"),
+                url=GetRequest(name, url, lang, "url"),  # type: ignore
+                headers=GetRequest(name, url, lang, "headers"),  # type: ignore
                 level=lang_settings["level"],
             )
 
 
-def _phantomjs(settings, health_check):
+def _phantomjs(settings: Dict[str, Any], health_check: c2cwsgiutils.health_check.HealthCheck) -> None:
     phantomjs_settings = settings["phantomjs"]
     for route in phantomjs_settings["routes"]:
         if route.get("checker_name", route["name"]) in phantomjs_settings["disable"]:
             continue
 
         class _Check:
-            def __init__(self, route):
+            def __init__(self, route: Dict[str, Any]) -> None:
                 self.route = route
 
-            def __call__(self, request):
+            def __call__(self, request: pyramid.request.Request) -> None:
                 path = request.route_path(self.route["name"], _query=self.route.get("params", {}))
-                url = build_url("Check", path, request)["url"]
+                url: str = cast(str, build_url("Check", path, request)["url"])
 
-                cmd = ["node", "/usr/bin/check-example.js", url]
+                cmd: List[str] = ["node", "/usr/bin/check-example.js", url]
                 env = dict(os.environ)
                 for name, value in self.route.get("environment", {}).items():
                     if isinstance(value, (list, dict)):
                         value = json.dumps(value)
                     elif not isinstance(value, str):
                         value = str(value)
                     env[name] = value
 
                 try:
                     subprocess.check_output(cmd, env=env, timeout=70)
                 except subprocess.CalledProcessError as exception:
                     raise Exception(
-                        "{} exit with code: {}\n{}".format(
-                            " ".join(exception.cmd), exception.returncode, exception.output.decode("utf-8")
-                        )
-                    )
+                        f"{' '.join(exception.cmd)} exit with code: {exception.returncode}\n"
+                        f"{exception.output.decode('utf-8')[:10000]}"
+                    ) from exception
                 except subprocess.TimeoutExpired as exception:
                     raise Exception(
-                        """Timeout:
-command: {}
+                        f"""Timeout:
+command: {' '.join(exception.cmd)}
 output:
-{}""".format(
-                            " ".join(exception.cmd), exception.output.decode("utf-8")
-                        )
-                    )
+{exception.output.decode('utf-8')}"""
+                    ) from exception
 
         name = "checker_phantomjs_" + route.get("checker_name", route["name"])
         health_check.add_custom_check(name=name, check_cb=_Check(route), level=route["level"])
 
 
-def init(config, health_check):
-    """Init the ckeckers"""
+def init(config: pyramid.config.Configurator, health_check: c2cwsgiutils.health_check.HealthCheck) -> None:
+    """Initialize the checkers."""
     global_settings = config.get_settings()
     if "checker" not in global_settings:
         return
     settings = global_settings["checker"]
     _routes(settings, health_check)
     _pdf3(settings, health_check)
     _fts(settings, health_check)
```

## c2cgeoportal_geoportal/lib/dbreflection.py

```diff
@@ -1,9 +1,7 @@
-# -*- coding: utf-8 -*-
-
 # Copyright (c) 2011-2021, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
@@ -22,23 +20,26 @@
 # ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 # (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 # SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 
 # The views and conclusions contained in the software and documentation are those
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
+
+import random
 import threading
 import warnings
-from typing import Dict, Tuple  # noqa, pylint: disable=unused-import
+from typing import Dict, Iterable, List, Optional, Tuple, Union
 
+import sqlalchemy.ext.declarative
 from papyrus.geo_interface import GeoInterface
 from sqlalchemy import Column, Integer, MetaData, Table
 from sqlalchemy.exc import SAWarning
-from sqlalchemy.ext.declarative.api import DeclarativeMeta  # noqa, pylint: disable=unused-import
 from sqlalchemy.orm import relationship
+from sqlalchemy.orm.session import Session
 from sqlalchemy.orm.util import class_mapper
 
 from c2cgeoportal_geoportal.lib.caching import get_region
 
 CACHE_REGION_OBJ = get_region("obj")
 SQL_GEOMETRY_COLUMNS = """
     SELECT srid, type
@@ -49,66 +50,76 @@
       f_geometry_column = :geometry_column
     """
 
 
 class _AssociationProxy:
     # A specific "association proxy" implementation
 
-    def __init__(self, target, value_attr, nullable=True, order_by=None):
+    def __init__(self, target: str, value_attr: str, nullable: bool = True, order_by: Optional[str] = None):
         self.target = target
         self.value_attr = value_attr
         self.nullable = nullable
         self.order_by = order_by
 
-    def __get__(self, obj, type_=None):
+    def __get__(
+        self,
+        obj: sqlalchemy.ext.declarative.ConcreteBase,
+        type_: sqlalchemy.ext.declarative.DeclarativeMeta = None,
+    ) -> Optional[Union["_AssociationProxy", str]]:
         if obj is None:
             # For "hybrid" descriptors that work both at the instance
             # and class levels we could return an SQL expression here.
             # The code of hybrid_property in SQLAlchemy illustrates
             # how to do that.
             return self
         target = getattr(obj, self.target)
         return getattr(target, self.value_attr) if target else None
 
-    def __set__(self, obj, val):
+    def __set__(self, obj: str, val: str) -> None:
         from c2cgeoportal_commons.models import DBSession  # pylint: disable=import-outside-toplevel
 
         o = getattr(obj, self.target)
         # if the obj as no child object or if the child object
         # does not correspond to the new value then we need to
         # read a new child object from the database
         if not o or getattr(o, self.value_attr) != val:
             relationship_property = class_mapper(obj.__class__).get_property(self.target)
             child_cls = relationship_property.argument
             o = DBSession.query(child_cls).filter(getattr(child_cls, self.value_attr) == val).first()
             setattr(obj, self.target, o)
 
 
-def _get_schema(tablename):
+def _get_schema(tablename: str) -> Tuple[str, str]:
     if "." in tablename:
         schema, tablename = tablename.split(".", 1)
     else:
         schema = "public"
 
     return tablename, schema
 
 
 _get_table_lock = threading.RLock()
 
 
-def get_table(tablename, schema=None, session=None, primary_key=None):
+def get_table(
+    tablename: str,
+    schema: Optional[str] = None,
+    session: Optional[Session] = None,
+    primary_key: Optional[str] = None,
+) -> Table:
+    """Build an SQLAlchemy table."""
     if schema is None:
         tablename, schema = _get_schema(tablename)
 
     if session is not None:
         engine = session.bind.engine
         metadata = MetaData(bind=engine)
     else:
+        from c2cgeoportal_commons.models import Base  # pylint: disable=import-outside-toplevel
         from c2cgeoportal_commons.models import DBSession  # pylint: disable=import-outside-toplevel
-        from c2cgeoportal_commons.models.main import Base  # pylint: disable=import-outside-toplevel
 
         engine = DBSession.bind.engine
         metadata = Base.metadata
 
     # create table and reflect it
     with warnings.catch_warnings():
         warnings.filterwarnings("ignore", "Did not recognize type 'geometry' of column", SAWarning)
@@ -117,29 +128,29 @@
             # Ensure we have a primary key to be able to edit views
             args.append(Column(primary_key, Integer, primary_key=True))
         with _get_table_lock:
             table = Table(*args, schema=schema, autoload=True, autoload_with=engine)
     return table
 
 
-@CACHE_REGION_OBJ.cache_on_arguments()
+@CACHE_REGION_OBJ.cache_on_arguments()  # type: ignore
 def get_class(
-    tablename,
-    exclude_properties=None,
-    primary_key=None,
-    attributes_order=None,
-    enumerations_config=None,
-    readonly_attributes=None,
-):
+    tablename: str,
+    exclude_properties: Optional[List[str]] = None,
+    primary_key: Optional[str] = None,
+    attributes_order: Optional[List[str]] = None,
+    enumerations_config: Optional[Dict[str, str]] = None,
+    readonly_attributes: Optional[List[str]] = None,
+) -> sqlalchemy.ext.declarative.DeclarativeMeta:
     """
-    Get the SQLAlchemy mapped class for "tablename". If no class exists
-    for "tablename" one is created, and added to the cache. "tablename"
-    must reference a valid string. If there is no table identified by
-    tablename in the database a NoSuchTableError SQLAlchemy exception
-    is raised.
+    Get the SQLAlchemy mapped class for "tablename".
+
+    If no class exists for "tablename" one is created, and added to the cache. "tablename" must reference a
+    valid string. If there is no table identified by tablename in the database a NoSuchTableError SQLAlchemy
+    exception is raised.
     """
 
     tablename, schema = _get_schema(tablename)
 
     table = get_table(tablename, schema, None, primary_key=primary_key)
 
     # create the mapped class
@@ -151,64 +162,68 @@
         readonly_attributes=readonly_attributes,
     )
 
     return cls
 
 
 def _create_class(
-    table,
-    exclude_properties=None,
-    attributes_order=None,
-    enumerations_config=None,
-    readonly_attributes=None,
-    pk_name=None,
-):
-    from c2cgeoportal_commons.models.main import Base  # pylint: disable=import-outside-toplevel
+    table: Table,
+    exclude_properties: Optional[Iterable[str]] = None,
+    attributes_order: Optional[List[str]] = None,
+    enumerations_config: Optional[Dict[str, str]] = None,
+    readonly_attributes: Optional[List[str]] = None,
+    pk_name: Optional[str] = None,
+) -> sqlalchemy.ext.declarative.DeclarativeMeta:
+    from c2cgeoportal_commons.models import Base  # pylint: disable=import-outside-toplevel
 
     exclude_properties = exclude_properties or ()
     attributes = dict(
         __table__=table,
         __mapper_args__={"exclude_properties": exclude_properties},
         __attributes_order__=attributes_order,
         __enumerations_config__=enumerations_config,
     )
     if pk_name is not None:
         attributes[pk_name] = Column(Integer, primary_key=True)
-    cls = type(table.name.capitalize(), (GeoInterface, Base), attributes)
+    # The randint is to fix the SAWarning: This declarative base already contains a class with the same
+    # class name and module nam
+    cls = type(
+        f"{table.name.capitalize()}_{random.randint(0, 9999999)}", (GeoInterface, Base), attributes  # nosec
+    )
 
     for col in table.columns:
         if col.name in (readonly_attributes or []):
             col.info["readonly"] = True
         if col.foreign_keys and col.name not in exclude_properties:
             _add_association_proxy(cls, col)
 
     return cls
 
 
-def _add_association_proxy(cls, col):
-    if len(col.foreign_keys) != 1:  # pragma: no cover
+def _add_association_proxy(
+    cls: sqlalchemy.ext.declarative.DeclarativeMeta, col: sqlalchemy.sql.schema.Column
+) -> None:
+    if len(col.foreign_keys) != 1:
         raise NotImplementedError
 
     fk = next(iter(col.foreign_keys))
     child_tablename, child_pk = fk.target_fullname.rsplit(".", 1)
     child_cls = get_class(child_tablename)
 
     try:
-        # fmt: off
-        proxy = col.name[0:col.name.rindex("_id")]
-        # fmt: on
-    except ValueError:  # pragma: no cover
+        proxy = col.name[0 : col.name.rindex("_id")]
+    except ValueError:
         proxy = col.name + "_"
 
     # The following is a workaround for a bug in the geojson lib. The
     # geojson lib indeed treats properties named "type" specifically
     # (this is a GeoJSON keyword), and produces a UnicodeEncodeError
     # if the property includes non-ascii characters.
     if proxy == "type":
-        proxy = "type_"  # pragma: no cover
+        proxy = "type_"
 
     rel = proxy + "_"
     primaryjoin = getattr(cls, col.name) == getattr(child_cls, child_pk)
     relationship_ = relationship(child_cls, primaryjoin=primaryjoin, lazy="immediate")
     setattr(cls, rel, relationship_)
 
     nullable = True
```

## c2cgeoportal_geoportal/lib/filter_capabilities.py

```diff
@@ -1,10 +1,8 @@
-# -*- coding: utf-8 -*-
-
-# Copyright (c) 2014-2020, Camptocamp SA
+# Copyright (c) 2014-2023, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -26,293 +24,327 @@
 # The views and conclusions contained in the software and documentation are those
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
 
 import copy
 import logging
-import xml.sax.handler
+import xml.sax.handler  # nosec
 from io import StringIO
-from typing import Callable, Dict, List
-from urllib.parse import urlsplit
-from xml.sax.saxutils import XMLFilterBase, XMLGenerator
+from typing import Any, Callable, Dict, List, Optional, Set, Union
+from xml.sax.saxutils import XMLFilterBase, XMLGenerator  # nosec
 
 import defusedxml.expatreader
+import pyramid.request
 import requests
+from owslib.map.wms111 import ContentMetadata as ContentMetadata111
+from owslib.map.wms130 import ContentMetadata as ContentMetadata130
 from owslib.wms import WebMapService
 from pyramid.httpexceptions import HTTPBadGateway
 
-from c2cgeoportal_commons.lib.url import add_url_params
+from c2cgeoportal_commons.lib.url import Url
 from c2cgeoportal_geoportal.lib import caching, get_ogc_server_wfs_url_ids, get_ogc_server_wms_url_ids
 from c2cgeoportal_geoportal.lib.layers import get_private_layers, get_protected_layers, get_writable_layers
 
 CACHE_REGION = caching.get_region("std")
 LOG = logging.getLogger(__name__)
+ContentMetadata = Union[ContentMetadata111, ContentMetadata130]
 
 
-@CACHE_REGION.cache_on_arguments()
-def wms_structure(wms_url, host, request):
-    url = urlsplit(wms_url)
-    wms_url = add_url_params(wms_url, {"SERVICE": "WMS", "VERSION": "1.1.1", "REQUEST": "GetCapabilities"})
+@CACHE_REGION.cache_on_arguments()  # type: ignore
+def wms_structure(wms_url: Url, host: str, request: pyramid.request.Request) -> Dict[str, List[str]]:
+    """Get a simple serializable structure of the WMS capabilities."""
+    url = wms_url.clone().add_query({"SERVICE": "WMS", "VERSION": "1.1.1", "REQUEST": "GetCapabilities"})
 
     # Forward request to target (without Host Header)
-    headers = dict()
-    if url.hostname == "localhost" and host is not None:  # pragma: no cover
+    headers = {}
+    if url.hostname == "localhost" and host is not None:
         headers["Host"] = host
     try:
-        response = requests.get(wms_url, headers=headers, **request.registry.settings.get("http_options", {}))
-    except Exception:  # pragma: no cover
-        raise HTTPBadGateway("Unable to GetCapabilities from wms_url {0!s}".format(wms_url))
+        response = requests.get(
+            url.url(), headers=headers, **request.registry.settings.get("http_options", {})
+        )
+    except Exception:
+        LOG.exception("Unable to GetCapabilities from wms_url '%s'", wms_url)
+        raise HTTPBadGateway(  # pylint: disable=raise-missing-from
+            "Unable to GetCapabilities, see logs for details"
+        )
 
-    if not response.ok:  # pragma: no cover
+    if not response.ok:
         raise HTTPBadGateway(
-            "GetCapabilities from wms_url {0!s} return the error: {1:d} {2!s}".format(
-                wms_url, response.status_code, response.reason
-            )
+            f"GetCapabilities from wms_url {url.url()} return the error: "
+            f"{response.status_code:d} {response.reason}"
         )
 
     try:
         wms = WebMapService(None, xml=response.content)
         result: Dict[str, List[str]] = {}
 
-        def _fill(name, parent):
+        def _fill(name: str, parent: ContentMetadata) -> None:
             if parent is None:
                 return
             if parent.name not in result:
                 result[parent.name] = []
             result[parent.name].append(name)
             _fill(name, parent.parent)
 
         for layer in list(wms.contents.values()):
             _fill(layer.name, layer.parent)
         return result
 
-    except AttributeError:  # pragma: no cover
+    except AttributeError:
         error = "WARNING! an error occurred while trying to read the mapfile and recover the themes."
-        error = "{0!s}\nurl: {1!s}\nxml:\n{2!s}".format(error, wms_url, response.text)
+        error = f"{error}\nurl: {wms_url}\nxml:\n{response.text}"
         LOG.exception(error)
-        raise HTTPBadGateway(error)
+        raise HTTPBadGateway(error)  # pylint: disable=raise-missing-from
 
-    except SyntaxError:  # pragma: no cover
+    except SyntaxError:
         error = "WARNING! an error occurred while trying to read the mapfile and recover the themes."
-        error = "{0!s}\nurl: {1!s}\nxml:\n{2!s}".format(error, wms_url, response.text)
+        error = f"{error}\nurl: {wms_url}\nxml:\n{response.text}"
         LOG.exception(error)
-        raise HTTPBadGateway(error)
+        raise HTTPBadGateway(error)  # pylint: disable=raise-missing-from
 
 
-def filter_capabilities(content, wms, url, headers, request):
+def filter_capabilities(
+    content: str, wms: bool, url: Url, headers: Dict[str, str], request: pyramid.request.Request
+) -> str:
+    """Filter the WMS/WFS capabilities."""
 
     wms_structure_ = wms_structure(url, headers.get("Host"), request)
 
     ogc_server_ids = (
         get_ogc_server_wms_url_ids(request) if wms else get_ogc_server_wfs_url_ids(request)
-    ).get(url)
+    ).get(url.url())
     gmf_private_layers = copy.copy(get_private_layers(ogc_server_ids))
     for id_ in list(get_protected_layers(request, ogc_server_ids).keys()):
         if id_ in gmf_private_layers:
             del gmf_private_layers[id_]
 
     private_layers = set()
-    for gmflayer in list(gmf_private_layers.values()):
-        for ogclayer in gmflayer.layer.split(","):
-            private_layers.add(ogclayer)
-            if ogclayer in wms_structure_:
-                private_layers.update(wms_structure_[ogclayer])
+    for gmf_layer in list(gmf_private_layers.values()):
+        for ogc_layer in gmf_layer.layer.split(","):
+            private_layers.add(ogc_layer)
+            if ogc_layer in wms_structure_:
+                private_layers.update(wms_structure_[ogc_layer])
+
+    LOG.debug(
+        "Filter capabilities of OGC server %s\nprivate_layers: %s",
+        ", ".join([str(e) for e in ogc_server_ids]),
+        ", ".join(private_layers),
+    )
 
     parser = defusedxml.expatreader.create_parser(forbid_external=False)
     # skip inclusion of DTDs
     parser.setFeature(xml.sax.handler.feature_external_ges, False)
     parser.setFeature(xml.sax.handler.feature_external_pes, False)
 
     result = StringIO()
     downstream_handler = XMLGenerator(result, "utf-8")
     filter_handler = _CapabilitiesFilter(
         parser, downstream_handler, "Layer" if wms else "FeatureType", layers_blacklist=private_layers
     )
-    filter_handler.parse(StringIO(content))
+    filter_handler.parse(StringIO(content))  # type: ignore
     return result.getvalue()
 
 
-def filter_wfst_capabilities(content, wfs_url, request):
-    writable_layers: List[str] = []
-    ogc_server_ids = get_ogc_server_wfs_url_ids(request).get(wfs_url)
-    for gmflayer in list(get_writable_layers(request, ogc_server_ids).values()):
-        writable_layers += gmflayer.layer.split(",")
+def filter_wfst_capabilities(content: str, wfs_url: Url, request: pyramid.request.Request) -> str:
+    """Filter the WTS capabilities."""
+
+    writable_layers: Set[str] = set()
+    ogc_server_ids = get_ogc_server_wfs_url_ids(request).get(wfs_url.url())
+
+    for gmf_layer in list(get_writable_layers(request, ogc_server_ids).values()):
+        writable_layers |= set(gmf_layer.layer.split(","))
+
+    LOG.debug(
+        "Filter WFS-T capabilities of OGC server %s\nlayers: %s",
+        ", ".join([str(e) for e in ogc_server_ids]),
+        ", ".join(writable_layers),
+    )
 
     parser = defusedxml.expatreader.create_parser(forbid_external=False)
     # skip inclusion of DTDs
     parser.setFeature(xml.sax.handler.feature_external_ges, False)
     parser.setFeature(xml.sax.handler.feature_external_pes, False)
 
     result = StringIO()
     downstream_handler = XMLGenerator(result, "utf-8")
     filter_handler = _CapabilitiesFilter(
         parser, downstream_handler, "FeatureType", layers_whitelist=writable_layers
     )
-    filter_handler.parse(StringIO(content))
+    filter_handler.parse(StringIO(content))  # type: ignore
     return result.getvalue()
 
 
 class _Layer:
-    def __init__(self, self_hidden=False):
-        self.accumul: List[Callable] = []
+    def __init__(self, self_hidden: bool = False):
+        self.accumulator: List[Callable[[], None]] = []
         self.hidden = True
         self.self_hidden = self_hidden
         self.has_children = False
         self.children_nb = 0
 
 
 class _CapabilitiesFilter(XMLFilterBase):
     """
     SAX filter to show only the allowed layers in a GetCapabilities request.
-    The filter removes elements of type `tag_name` where the `name`
-    attribute is part of the set `layers_blacklist` (when `layers_blacklist`
-    is given) or is not part of the set `layers_whitelist` (when
+
+    The filter removes elements of type `tag_name` where the `name` attribute is part of the set
+    `layers_blacklist` (when `layers_blacklist` is given) or is not part of the set `layers_whitelist` (when
     `layers_whitelist` is given).
     """
 
-    def __init__(self, upstream, downstream, tag_name, layers_blacklist=None, layers_whitelist=None):
+    def __init__(
+        self,
+        upstream: XMLFilterBase,
+        downstream: XMLGenerator,
+        tag_name: str,
+        layers_blacklist: Optional[Set[str]] = None,
+        layers_whitelist: Optional[Set[str]] = None,
+    ):
         XMLFilterBase.__init__(self, upstream)
         self._downstream = downstream
         self._accumulator: List[str] = []
 
         assert (
             layers_blacklist is not None or layers_whitelist is not None
         ), "either layers_blacklist OR layers_whitelist must be set"
         assert not (
             layers_blacklist is not None and layers_whitelist is not None
         ), "only either layers_blacklist OR layers_whitelist can be set"
 
         if layers_blacklist is not None:
-            layers_blacklist = [layer.lower() for layer in layers_blacklist]
+            layers_blacklist = {layer.lower() for layer in layers_blacklist}
         if layers_whitelist is not None:
-            layers_whitelist = [layer.lower() for layer in layers_whitelist]
+            layers_whitelist = {layer.lower() for layer in layers_whitelist}
         self.layers_blacklist = layers_blacklist
         self.layers_whitelist = layers_whitelist
 
         self.layers_path: List[_Layer] = []
         self.in_name = False
         self.tag_name = tag_name
         self.level = 0
 
     def _complete_text_node(self) -> None:
         if self._accumulator:
-            self._downstream.characters("".join(self._accumulator))
+            self._downstream.characters("".join(self._accumulator))  # type: ignore
             self._accumulator = []
 
-    def _do(self, action):
+    def _do(self, action: Callable[[], Any]) -> None:
         if self.layers_path:
-            self.layers_path[-1].accumul.append(action)
+            self.layers_path[-1].accumulator.append(action)
         else:
             self._complete_text_node()
             action()
 
-    def _add_child(self, layer):
+    def _add_child(self, layer: _Layer) -> None:
         if not layer.hidden and not (layer.has_children and layer.children_nb == 0):
-            for action in layer.accumul:
+            for action in layer.accumulator:
                 self._complete_text_node()
                 action()
-            layer.accumul = []
+            layer.accumulator = []
 
-    def setDocumentLocator(self, locator):  # noqa
-        self._downstream.setDocumentLocator(locator)
+    def setDocumentLocator(self, locator: str) -> None:  # noqa: ignore=N802
+        self._downstream.setDocumentLocator(locator)  # type: ignore
 
-    def startDocument(self):  # noqa
-        self._downstream.startDocument()
+    def startDocument(self) -> None:  # noqa: ignore=N802
+        self._downstream.startDocument()  # type: ignore
 
-    def endDocument(self):  # noqa
-        self._downstream.endDocument()
+    def endDocument(self) -> None:  # noqa: ignore=N802
+        self._downstream.endDocument()  # type: ignore
 
-    def startPrefixMapping(self, prefix, uri):  # pragma: no cover  # noqa
-        self._downstream.startPrefixMapping(prefix, uri)
+    def startPrefixMapping(self, prefix: str, uri: str) -> None:  # noqa: ignore=N802
+        self._downstream.startPrefixMapping(prefix, uri)  # type: ignore
 
-    def endPrefixMapping(self, prefix):  # pragma: no cover  # noqa
-        self._downstream.endPrefixMapping(prefix)
+    def endPrefixMapping(self, prefix: str) -> None:  # noqa: ignore=N802
+        self._downstream.endPrefixMapping(prefix)  # type: ignore
 
-    def startElement(self, name, attrs):  # noqa
+    def startElement(self, name: str, attrs: xml.sax.xmlreader.AttributesImpl) -> None:  # noqa: ignore=N802
         if name == self.tag_name:
             self.level += 1
             if self.layers_path:
                 parent_layer = self.layers_path[-1]
                 parent_layer.has_children = True
                 parent_layer.children_nb += 1
                 layer = _Layer(parent_layer.self_hidden) if len(self.layers_path) > 1 else _Layer()
                 self.layers_path.append(layer)
 
-                parent_layer.accumul.append(lambda: self._add_child(layer))
+                parent_layer.accumulator.append(lambda: self._add_child(layer))
             else:
                 layer = _Layer()
                 self.layers_path.append(layer)
         elif name == "Name" and self.layers_path:
             self.in_name = True
 
-        self._do(lambda: self._downstream.startElement(name, attrs))
+        self._do(lambda: self._downstream.startElement(name, attrs))  # type: ignore
 
-    def endElement(self, name):  # noqa
-        self._do(lambda: self._downstream.endElement(name))
+    def endElement(self, name: str) -> None:  # noqa: ignore=N802
+        self._do(lambda: self._downstream.endElement(name))  # type: ignore
 
         if name == self.tag_name:
             self.level -= 1
             if self.level == 0 and not self.layers_path[0].hidden:
-                for action in self.layers_path[0].accumul:
+                for action in self.layers_path[0].accumulator:
                     self._complete_text_node()
                     action()
             self.layers_path.pop()
         elif name == "Name":
             self.in_name = False
 
-    def startElementNS(self, name, qname, attrs):  # pragma: no cover  # noqa
-        self._do(lambda: self._downstream.startElementNS(name, qname, attrs))
+    def startElementNS(self, name: str, qname: str, attrs: Dict[str, str]) -> None:  # noqa: ignore=N802
+        self._do(lambda: self._downstream.startElementNS(name, qname, attrs))  # type: ignore
 
-    def endElementNS(self, name, qname):  # pragma: no cover  # noqa
-        self._do(lambda: self._downstream.endElementNS(name, qname))
+    def endElementNS(self, name: str, qname: str) -> None:  # noqa: ignore=N802
+        self._do(lambda: self._downstream.endElementNS(name, qname))  # type: ignore
 
-    def _keep_layer(self, layer_name):
+    def _keep_layer(self, layer_name: str) -> bool:
         return (self.layers_blacklist is not None and layer_name not in self.layers_blacklist) or (
             self.layers_whitelist is not None and layer_name in self.layers_whitelist
         )
 
-    def characters(self, content):
+    def characters(self, content: str) -> None:
         if self.in_name and self.layers_path and not self.layers_path[-1].self_hidden is True:
             layer_name = normalize_typename(content)
             if self._keep_layer(layer_name):
                 for layer in self.layers_path:
                     layer.hidden = False
             else:
                 # remove layer
                 self.layers_path[-1].self_hidden = True
                 if len(self.layers_path) > 1:
                     self.layers_path[-2].children_nb -= 1
 
         self._do(lambda: self._accumulator.append(content))
 
-    def ignorableWhitespace(self, chars):  # pragma: no cover  # noqa
+    def ignorableWhitespace(self, chars: str) -> None:  # noqa: ignore=N802
         self._do(lambda: self._accumulator.append(chars))
 
-    def processingInstruction(self, target, data):  # pragma: no cover  # noqa
-        self._do(lambda: self._downstream.processingInstruction(target, data))
+    def processingInstruction(self, target: str, data: str) -> None:  # noqa: ignore=N802
+        self._do(lambda: self._downstream.processingInstruction(target, data))  # type: ignore
 
-    def skippedEntity(self, name):  # pragma: no cover  # noqa
-        self._downstream.skippedEntity(name)
+    def skippedEntity(self, name: str) -> None:  # noqa: ignore=N802
+        self._downstream.skippedEntity(name)  # type: ignore
 
 
-def normalize_tag(tag):
+def normalize_tag(tag: str) -> str:
     """
-    Drops the namespace from a tag and converts to lower case.
+    Drop the namespace from a tag and converts to lower case.
+
     e.g. '{https://....}TypeName' -> 'TypeName'
     """
     normalized = tag
     if len(tag) >= 3:
         if tag[0] == "{":
             normalized = tag[1:].split("}")[1]
     return normalized.lower()
 
 
-def normalize_typename(typename):
+def normalize_typename(typename: str) -> str:
     """
-    Drops the namespace from a type name and converts to lower case.
+    Drop the namespace from a type name and converts to lower case.
+
     e.g. 'tows:parks' -> 'parks'
     """
     normalized = typename
     if ":" in typename:
         normalized = typename.split(":")[1]
     return normalized.lower()
```

## c2cgeoportal_geoportal/lib/fulltextsearch.py

```diff
@@ -1,10 +1,8 @@
-# -*- coding: utf-8 -*-
-
-# Copyright (c) 2020, Camptocamp SA
+# Copyright (c) 2020-2021, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -24,26 +22,29 @@
 # SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 
 # The views and conclusions contained in the software and documentation are those
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
 import re
+from typing import Any, Dict
 
 
 class Normalize:
-    def __init__(self, config):
+    """Normalize a text for the Full text search."""
+
+    def __init__(self, config: Dict[str, Any]) -> None:
         split = config.get("split_regex")
         self.split_re = re.compile(split) if split is not None else None
 
         self.word_replace = []
         for search_regex, text in config.get("replace", {}).items():
             self.word_replace.append((re.compile(search_regex), text))
 
-    def __call__(self, text):
+    def __call__(self, text: str) -> str:
         if self.split_re is not None:
             text = " ".join(self.split_re.split(text))
 
         for search, replace in self.word_replace:
             text = search.sub(replace, text)
 
         return text
```

## c2cgeoportal_geoportal/lib/functionality.py

```diff
@@ -1,9 +1,7 @@
-# -*- coding: utf-8 -*-
-
 # Copyright (c) 2011-2021, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
@@ -27,52 +25,57 @@
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
 
 import logging.config
 from typing import Any, Dict, List, Set, Union, cast
 
+import pyramid.request
 from sqlalchemy.orm import joinedload
 
 from c2cgeoportal_commons.models import main, static
 from c2cgeoportal_geoportal.lib import get_typed, get_types_map, is_intranet
 from c2cgeoportal_geoportal.lib.caching import get_region
 
 LOG = logging.getLogger(__name__)
 CACHE_REGION_OBJ = get_region("obj")
 CACHE_REGION = get_region("std")
 
 
-@CACHE_REGION_OBJ.cache_on_arguments()
+@CACHE_REGION_OBJ.cache_on_arguments()  # type: ignore
 def _get_role(name: str) -> Dict[str, Any]:
     from c2cgeoportal_commons.models import DBSession  # pylint: disable=import-outside-toplevel
 
     role = (
-        DBSession.query(static.Role)
-        .filter(static.Role.name == name)
+        DBSession.query(main.Role)
+        .filter(main.Role.name == name)
         .options(joinedload(main.Role.functionalities))
         .one_or_none()
     )
     struct = _role_to_struct(role)
     return {"settings_functionalities": struct, "roles_functionalities": {name: struct}}
 
 
-def _user_to_struct(user):
+def _user_to_struct(user: static.User) -> Dict[str, Any]:
     return {
         "settings_functionalities": _role_to_struct(user.settings_role),
         "roles_functionalities": {role.name: _role_to_struct(role) for role in user.roles},
     }
 
 
-def _role_to_struct(role):
+def _role_to_struct(role: main.Role) -> List[Dict[str, Any]]:
     return [{"name": f.name, "value": f.value} for f in role.functionalities] if role else []
 
 
 def _get_db_functionality(
-    name, user: Dict[str, Any], types, request, errors
+    name: str,
+    user: Dict[str, Any],
+    types: Dict[str, Dict[str, Any]],
+    request: pyramid.request.Request,
+    errors: Set[str],
 ) -> List[Union[str, int, float, bool, List[Any], Dict[str, Any]]]:
     if types.get(name, {}).get("single", False):
         values = [
             get_typed(name, functionality["value"], types, request, errors)
             for functionality in user["settings_functionalities"]
             if functionality["name"] == name
         ]
@@ -87,24 +90,25 @@
         get_typed(name, functionality_value, types, request, errors)
         for functionality_value in functionalities
     ]
 
     return [r for r in values if r is not None]
 
 
-@CACHE_REGION_OBJ.cache_on_arguments()
-def _get_functionalities_type(request):
+@CACHE_REGION_OBJ.cache_on_arguments()  # type: ignore
+def _get_functionalities_type(request: pyramid.request.Request) -> Dict[str, Dict[str, Any]]:
     return get_types_map(
         request.registry.settings.get("admin_interface", {}).get("available_functionalities", [])
     )
 
 
 def get_functionality(
-    name, request, is_intranet_
+    name: str, request: pyramid.request.Request, is_intranet_: bool
 ) -> List[Union[str, int, float, bool, List[Any], Dict[str, Any]]]:
+    """Get all the functionality for the current user."""
     result: List[Union[str, int, float, bool, List[Any], Dict[str, Any]]] = []
     errors: Set[str] = set()
 
     if request.user is not None:
         result = _get_db_functionality(
             name, _user_to_struct(request.user), _get_functionalities_type(request), request, errors
         )
@@ -131,31 +135,30 @@
             name,
             _get_role(request.get_organization_role("anonymous")),
             _get_functionalities_type(request),
             request,
             errors,
         )
 
-    if errors != set():  # pragma: no cover
+    if errors != set():
         LOG.error("\n".join(errors))
     return result
 
 
-def get_mapserver_substitution_params(request):
+def get_mapserver_substitution_params(request: pyramid.request.Request) -> Dict[str, str]:
+    """Get the parameters used by the mapserver substitution."""
     params: Dict[str, str] = {}
     mss = get_functionality("mapserver_substitution", request, is_intranet(request))
     if mss:
         for s_ in mss:
             s = cast(str, s_)
             index = s.find("=")
             if index > 0:
                 attribute = "s_" + s[:index]
-                # fmt: off
-                value = s[index + 1:]
-                # fmt: on
+                value = s[index + 1 :]
                 if attribute in params:
                     params[attribute] += "," + value
                 else:
                     params[attribute] = value
             else:
-                LOG.warning("Mapserver Substitution '%s' does not " "respect pattern: <attribute>=<value>", s)
+                LOG.warning("Mapserver Substitution '%s' does not respect pattern: <attribute>=<value>", s)
     return params
```

## c2cgeoportal_geoportal/lib/headers.py

```diff
@@ -1,10 +1,8 @@
-# -*- coding: utf-8 -*-
-
-# Copyright (c) 2013-2020, Camptocamp SA
+# Copyright (c) 2013-2021, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -25,24 +23,35 @@
 
 # The views and conclusions contained in the software and documentation are those
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
 
 import re
+from typing import Callable
+
+import pyramid.registry
+import pyramid.request
+import pyramid.response
 
 
 class HeadersTween:
-    def __init__(self, handler, registry):
+    """Add the header on all the application."""
+
+    def __init__(
+        self,
+        handler: Callable[[pyramid.request.Request], pyramid.response.Response],
+        registry: pyramid.registry.Registry,
+    ) -> None:
         self.handler = handler
         self.settings = [
             (re.compile(e["pattern"]), e["headers"]) for e in registry.settings["global_headers"]
         ]
 
-    def __call__(self, request):
+    def __call__(self, request: pyramid.request.Request) -> pyramid.response.Response:
         response = self.handler(request)
 
         for pattern, headers in self.settings:
             if pattern.match(request.path_info):
                 for header, value in headers.items():
                     if value is None:
                         if header in response.headers:
```

## c2cgeoportal_geoportal/lib/i18n.py

```diff
@@ -1,10 +1,8 @@
-# -*- coding: utf-8 -*-
-
-# Copyright (c) 2020, Camptocamp SA
+# Copyright (c) 2020-2021, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -25,15 +23,17 @@
 
 # The views and conclusions contained in the software and documentation are those
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
 
 import os
+from typing import List
 
 LOCALE_PATH = "/etc/geomapfish/locale/"
 
 
-def available_locale_names(path=LOCALE_PATH):
+def available_locale_names(path: str = LOCALE_PATH) -> List[str]:
+    """Get the available locales."""
     if not os.path.exists(path):
         return []
     return [d for d in os.listdir(path) if os.path.isdir(os.path.join(path, d))]
```

## c2cgeoportal_geoportal/lib/layers.py

```diff
@@ -1,10 +1,8 @@
-# -*- coding: utf-8 -*-
-
-# Copyright (c) 2018-2020, Camptocamp SA
+# Copyright (c) 2018-2021, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -24,74 +22,95 @@
 # SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 
 # The views and conclusions contained in the software and documentation are those
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
 
+from typing import Any, Dict, Iterable, Optional
+
 from pyramid.request import Request
+from sqlalchemy.ext.declarative import DeclarativeMeta
+from sqlalchemy.orm.query import Query
 
 from c2cgeoportal_geoportal.lib import caching, get_roles_id
 
 CACHE_REGION = caching.get_region("std")
 
 
-def _get_layers_query(request: Request, what):
+def _get_layers_query(request: Request, what: DeclarativeMeta) -> Query:
     from c2cgeoportal_commons.models import DBSession, main  # pylint: disable=import-outside-toplevel
 
     q = DBSession.query(what)
-    q = q.join(main.Layer.restrictionareas)  # pylint: disable=no-member
+    q = q.join(main.Layer.restrictionareas)
     q = q.join(main.RestrictionArea.roles)
     q = q.filter(main.Role.id.in_(get_roles_id(request)))
 
     return q
 
 
-def get_protected_layers_query(request: Request, ogc_server_ids, what=None):
+def get_protected_layers_query(
+    request: Request,
+    ogc_server_ids: Optional[Iterable[int]],
+    what: DeclarativeMeta = None,
+) -> Query:
+    """
+    Get the protected layers query.
+
+    Private layers but accessible to the user.
+    """
     from c2cgeoportal_commons.models import main  # pylint: disable=import-outside-toplevel
 
     q = _get_layers_query(request, what)
     q = q.filter(main.Layer.public.is_(False))
     if ogc_server_ids is not None:
         q = q.join(main.LayerWMS.ogc_server)
         q = q.filter(main.OGCServer.id.in_(ogc_server_ids))
     return q
 
 
-def get_writable_layers_query(request: Request, ogc_server_ids):
+def get_writable_layers_query(request: Request, ogc_server_ids: Iterable[int]) -> Query:
+    """Get the writable layers query."""
     from c2cgeoportal_commons.models import main  # pylint: disable=import-outside-toplevel
 
     q = _get_layers_query(request, main.LayerWMS)
     return (
         q.filter(main.RestrictionArea.readwrite.is_(True))
         .join(main.LayerWMS.ogc_server)
         .filter(main.OGCServer.id.in_(ogc_server_ids))
     )
 
 
-def get_protected_layers(request: Request, ogc_server_ids):
+def get_protected_layers(request: Request, ogc_server_ids: Iterable[int]) -> Dict[int, DeclarativeMeta]:
+    """
+    Get the protected layers.
+
+    Private layers but accessible to the user.
+    """
     from c2cgeoportal_commons.models import DBSession, main  # pylint: disable=import-outside-toplevel
 
     q = get_protected_layers_query(request, ogc_server_ids, what=main.LayerWMS)
     results = q.all()
     DBSession.expunge_all()
     return {r.id: r for r in results}
 
 
-def get_writable_layers(request: Request, ogc_server_ids):
+def get_writable_layers(request: Request, ogc_server_ids: Iterable[int]) -> Dict[int, DeclarativeMeta]:
+    """Get the writable layers."""
     from c2cgeoportal_commons.models import DBSession  # pylint: disable=import-outside-toplevel
 
     q = get_writable_layers_query(request, ogc_server_ids)
     results = q.all()
     DBSession.expunge_all()
     return {r.id: r for r in results}
 
 
-@CACHE_REGION.cache_on_arguments()
-def get_private_layers(ogc_server_ids):
+@CACHE_REGION.cache_on_arguments()  # type: ignore
+def get_private_layers(ogc_server_ids: Iterable[int]) -> Dict[int, Any]:
+    """Get the private layers."""
     from c2cgeoportal_commons.models import DBSession, main  # pylint: disable=import-outside-toplevel
 
     q = (
         DBSession.query(main.LayerWMS)
         .filter(main.LayerWMS.public.is_(False))
         .join(main.LayerWMS.ogc_server)
         .filter(main.OGCServer.id.in_(ogc_server_ids))
```

## c2cgeoportal_geoportal/lib/lingua_extractor.py

```diff
@@ -1,10 +1,8 @@
-# -*- coding: utf-8 -*-
-
-# Copyright (c) 2011-2021, Camptocamp SA
+# Copyright (c) 2011-2023, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -29,393 +27,482 @@
 
 
 import json
 import os
 import re
 import subprocess
 import traceback
-from typing import Dict, List, Optional, Set, cast
-from urllib.parse import urlsplit
+from typing import TYPE_CHECKING, Any, Callable, Dict, List, Optional, Set, Tuple, Type, cast
 from xml.dom import Node
 from xml.parsers.expat import ExpatError
 
+import pyramid.threadlocal
 import requests
-import sqlalchemy
 import yaml
-from bottle import MakoTemplate, template  # pylint: disable=wrong-import-order,useless-suppression
+from bottle import MakoTemplate, template
 from c2c.template.config import config
 from defusedxml.minidom import parseString
 from geoalchemy2.types import Geometry
 from lingua.extractors import Extractor, Message
 from mako.lookup import TemplateLookup
 from mako.template import Template
 from owslib.wms import WebMapService
 from sqlalchemy.exc import NoSuchTableError, OperationalError, ProgrammingError
 from sqlalchemy.orm.exc import NoResultFound
 from sqlalchemy.orm.properties import ColumnProperty
+from sqlalchemy.orm.session import Session
 from sqlalchemy.orm.util import class_mapper
 
-import c2cgeoportal_commons.models
 import c2cgeoportal_geoportal
-from c2cgeoportal_commons.lib.url import add_url_params, get_url2
-from c2cgeoportal_geoportal.lib.bashcolor import RED, colorize
+from c2cgeoportal_commons.lib.url import Url, get_url2
+from c2cgeoportal_geoportal.lib.bashcolor import Color, colorize
 from c2cgeoportal_geoportal.lib.caching import init_region
 from c2cgeoportal_geoportal.views.layers import Layers, get_layer_class
 
+if TYPE_CHECKING:
+    from c2cgeoportal_commons.models import main  # pylint: disable=ungrouped-imports,useless-suppression
+
+
+def _get_config(key: str, default: Optional[str] = None) -> Optional[str]:
+    """
+    Return the config value for passed key.
+
+    Passed throw environment variable for the command line,
+    or throw the query string on HTTP request.
+    """
+    request = pyramid.threadlocal.get_current_request()
+    if request is not None:
+        return cast(Optional[str], request.params.get(key.lower(), default))
+
+    return os.environ.get(key, default)
+
+
+def _get_config_str(key: str, default: str) -> str:
+    result = _get_config(key, default)
+    assert result is not None
+    return result
 
-class _Registry:  # pragma: no cover
+
+class _Registry:
     settings = None
 
-    def __init__(self, settings):
+    def __init__(self, settings: Optional[Dict[str, Any]]) -> None:
         self.settings = settings
 
 
-class _Request:  # pragma: no cover
+class _Request:
     params: Dict[str, str] = {}
     matchdict: Dict[str, str] = {}
     GET: Dict[str, str] = {}
 
-    def __init__(self, settings=None):
+    def __init__(self, settings: Optional[Dict[str, Any]] = None) -> None:
         self.registry: _Registry = _Registry(settings)
 
     @staticmethod
-    def static_url(*args, **kwargs):
+    def static_url(*args: Any, **kwargs: Any) -> str:
         del args
         del kwargs
         return ""
 
     @staticmethod
-    def static_path(*args, **kwargs):
+    def static_path(*args: Any, **kwargs: Any) -> str:
         del args
         del kwargs
         return ""
 
     @staticmethod
-    def route_url(*args, **kwargs):
+    def route_url(*args: Any, **kwargs: Any) -> str:
         del args
         del kwargs
         return ""
 
     @staticmethod
-    def current_route_url(*args, **kwargs):
+    def current_route_url(*args: Any, **kwargs: Any) -> str:
         del args
         del kwargs
         return ""
 
 
-class GeomapfishAngularExtractor(Extractor):  # pragma: no cover
-    """
-    GeoMapFish angular extractor
-    """
+class GeomapfishAngularExtractor(Extractor):  # type: ignore
+    """GeoMapFish angular extractor."""
 
     extensions = [".js", ".html"]
 
     def __init__(self) -> None:
         super().__init__()
         if os.path.exists("/etc/geomapfish/config.yaml"):
             config.init("/etc/geomapfish/config.yaml")
             self.config = config.get_config()
         else:
             self.config = None
         self.tpl = None
 
-    def __call__(self, filename, options, fileobj=None, lineno=0):
+    @staticmethod
+    def get_message_cleaner(filename: str) -> Callable[[str], str]:
+        """Return a function for cleaning messages according to input file format."""
+        ext = os.path.splitext(filename)[1]
+
+        if ext in [".html", ".ejs"]:
+            # Remove \n in HTML multi-line strings
+            pattern = re.compile("\n *")
+            return lambda s: re.sub(pattern, " ", s)
+
+        return lambda s: s
+
+    def __call__(
+        self,
+        filename: str,
+        options: Dict[str, Any],
+        fileobj: Optional[Dict[str, Any]] = None,
+        lineno: int = 0,
+    ) -> List[Message]:
         del fileobj, lineno
 
+        print(f"Running {self.__class__.__name__} on {filename}")
+
+        cleaner = self.get_message_cleaner(filename)
+
         init_region({"backend": "dogpile.cache.memory"}, "std")
         init_region({"backend": "dogpile.cache.memory"}, "obj")
 
         int_filename = filename
-        if re.match("^" + re.escape("./{}/templates".format(self.config["package"])), filename):
+        if re.match("^" + re.escape(f"./{self.config['package']}/templates"), filename):
             try:
                 empty_template = Template("")  # nosec
 
-                class Lookup(TemplateLookup):
+                class Lookup(TemplateLookup):  # type: ignore
                     @staticmethod
-                    def get_template(uri):
+                    def get_template(uri: str) -> Template:
                         del uri  # unused
                         return empty_template
 
-                class MyTemplate(MakoTemplate):
+                class MyTemplate(MakoTemplate):  # type: ignore
                     tpl = None
 
-                    def prepare(self, **kwargs):
+                    def prepare(self, **kwargs: Any) -> None:
                         options.update({"input_encoding": self.encoding})
                         lookup = Lookup(**kwargs)
                         if self.source:
                             self.tpl = Template(self.source, lookup=lookup, **kwargs)  # nosec
                         else:
                             self.tpl = Template(  # nosec
                                 uri=self.name, filename=self.filename, lookup=lookup, **kwargs
                             )
 
                 try:
+                    request = pyramid.threadlocal.get_current_request()
+                    request = _Request() if request is None else request
                     processed = template(
                         filename,
                         {
-                            "request": _Request(self.config),
+                            "request": request,
                             "lang": "fr",
                             "debug": False,
                             "extra_params": {},
                             "permalink_themes": "",
                             "fulltextsearch_groups": [],
                             "wfs_types": [],
                             "_": lambda x: x,
                         },
                         template_adapter=MyTemplate,
                     )
                     int_filename = os.path.join(os.path.dirname(filename), "_" + os.path.basename(filename))
                     with open(int_filename, "wb") as file_open:
                         file_open.write(processed.encode("utf-8"))
                 except Exception:
-                    print(
-                        colorize("ERROR! Occurred during the '{}' template generation".format(filename), RED)
-                    )
-                    print(colorize(traceback.format_exc(), RED))
-                    if os.environ.get("IGNORE_I18N_ERRORS", "FALSE") == "TRUE":
+                    print(colorize(f"ERROR! Occurred during the '{filename}' template generation", Color.RED))
+                    print(colorize(traceback.format_exc(), Color.RED))
+                    if _get_config_str("IGNORE_I18N_ERRORS", "FALSE") == "TRUE":
                         # Continue with the original one
                         int_filename = filename
                     else:
                         raise
             except Exception:
                 print(traceback.format_exc())
 
-        message_str = subprocess.check_output(
-            ["node", "geoportal/tools/extract-messages.js", int_filename]
-        ).decode("utf-8")
+        # Path in geomapfish-tools
+        script_path = "geoportal/tools/extract-messages.js"
+        if not os.path.isfile(script_path):
+            # Path in geomapfish runner
+            script_path = "/app/tools/extract-messages.js"
+        message_str = subprocess.check_output(["node", script_path, int_filename]).decode("utf-8")
         if int_filename != filename:
             os.unlink(int_filename)
         try:
             messages = []
             for contexts, message in json.loads(message_str):
+                assert message is not None
+                message = cleaner(message)
                 for context in contexts.split(", "):
-                    assert message is not None
                     messages.append(Message(None, message, None, [], "", "", context.split(":")))
             return messages
         except Exception:
-            print(colorize("An error occurred", RED))
-            print(colorize(message_str, RED))
+            print(colorize("An error occurred", Color.RED))
+            print(colorize(message_str, Color.RED))
             print("------")
             raise
 
 
-class GeomapfishConfigExtractor(Extractor):  # pragma: no cover
+def init_db(settings: Dict[str, Any]) -> None:
     """
-    GeoMapFish config extractor (raster layers, and print templates)
+    Initialize the SQLAlchemy Session.
+
+    First test the connection, on wen environment it should be OK, with the command line we should get
+    an exception ind initialise the connection.
     """
 
+    try:
+        from c2cgeoportal_commons.models import DBSession  # pylint: disable=import-outside-toplevel
+        from c2cgeoportal_commons.models.main import Theme  # pylint: disable=import-outside-toplevel
+
+        session = DBSession()
+        session.query(Theme).count()
+    except:  # pylint: disable=bare-except
+
+        # Init db sessions
+
+        class R:
+            settings: Dict[str, Any] = {}
+
+        class C:
+            registry = R()
+
+            def get_settings(self) -> Dict[str, Any]:
+                return self.registry.settings
+
+            def add_tween(self, *args: Any, **kwargs: Any) -> None:
+                pass
+
+        config_ = C()
+        config_.registry.settings = settings
+
+        c2cgeoportal_geoportal.init_db_sessions(settings, config_)
+
+
+class GeomapfishConfigExtractor(Extractor):  # type: ignore
+    """GeoMapFish config extractor (raster layers, and print templates)."""
+
     extensions = [".yaml", ".tmpl"]
 
-    def __call__(self, filename, options, fileobj=None, lineno=0):
-        del fileobj, lineno
+    def __call__(
+        self,
+        filename: str,
+        options: Dict[str, Any],
+        fileobj: Optional[Dict[str, Any]] = None,
+        lineno: int = 0,
+    ) -> List[Message]:
+        del options, fileobj, lineno
+
+        print(f"Running {self.__class__.__name__} on {filename}")
+
         init_region({"backend": "dogpile.cache.memory"}, "std")
         init_region({"backend": "dogpile.cache.memory"}, "obj")
 
-        with open(filename) as config_file:
+        with open(filename, encoding="utf8") as config_file:
             gmf_config = yaml.load(config_file, Loader=yaml.BaseLoader)  # nosec
             # For application config (config.yaml)
             if "vars" in gmf_config:
                 return self._collect_app_config(filename)
             # For the print config
             if "templates" in gmf_config:
                 return self._collect_print_config(gmf_config, filename)
             raise Exception("Not a known config file")
 
-    def _collect_app_config(self, filename):
+    def _collect_app_config(self, filename: str) -> List[Message]:
         config.init(filename)
         settings = config.get_config()
         assert not [
             raster_layer for raster_layer in list(settings.get("raster", {}).keys()) if raster_layer is None
         ]
         # Collect raster layers names
         raster = [
-            Message(None, raster_layer, None, [], "", "", (filename, "raster/{}".format(raster_layer)))
+            Message(None, raster_layer, None, [], "", "", (filename, f"raster/{raster_layer}"))
             for raster_layer in list(settings.get("raster", {}).keys())
         ]
 
-        # Init db sessions
-
-        class R:
-            settings = None
-
-        class C:
-            registry = R()
-
-            def get_settings(self):
-                return self.registry.settings
-
-            def add_tween(self, *args, **kwargs):
-                pass
-
-        config_ = C()
-        config_.registry.settings = settings
-
-        c2cgeoportal_geoportal.init_dbsessions(settings, config_)
+        init_db(settings)
 
         # Collect layers enum values (for filters)
 
-        from c2cgeoportal_commons.models import DBSessions  # pylint: disable=import-outside-toplevel
+        from c2cgeoportal_commons.models import (  # pylint: disable=import-outside-toplevel
+            DBSession,
+            DBSessions,
+        )
         from c2cgeoportal_commons.models.main import Metadata  # pylint: disable=import-outside-toplevel
 
         enums = []
         enum_layers = settings.get("layers", {}).get("enum", {})
         for layername in list(enum_layers.keys()):
             layerinfos = enum_layers.get(layername, {})
             attributes = layerinfos.get("attributes", {})
             for fieldname in list(attributes.keys()):
-                values = self._enumerate_attributes_values(DBSessions, Layers, layerinfos, fieldname)
+                values = self._enumerate_attributes_values(DBSessions, layerinfos, fieldname)
                 for (value,) in values:
                     if isinstance(value, str) and value != "":
                         msgid = value
-                        location = "/layers/{}/values/{}/{}".format(
-                            layername,
-                            fieldname,
-                            value.encode("ascii", errors="replace").decode("ascii"),
+                        location = (
+                            f"/layers/{layername}/values/{fieldname}/"
+                            f"{value.encode('ascii', errors='replace').decode('ascii')}"
                         )
                         assert msgid is not None
                         enums.append(Message(None, msgid, None, [], "", "", (filename, location)))
 
         metadata_list = []
         defs = config["admin_interface"]["available_metadata"]  # pylint: disable=unsubscriptable-object
         names = [e["name"] for e in defs if e.get("translate", False)]
 
         if names:
-            engine = sqlalchemy.create_engine(config["sqlalchemy.url"])
-            Session = sqlalchemy.orm.session.sessionmaker()  # noqa
-            Session.configure(bind=engine)
-            session = Session()
+            session = DBSession()
 
-            query = session.query(Metadata).filter(Metadata.name.in_(names))  # pylint: disable=no-member
+            query = session.query(Metadata).filter(Metadata.name.in_(names))
             for metadata in query.all():
-                location = "metadata/{}/{}".format(metadata.name, metadata.id)
+                location = f"metadata/{metadata.name}/{metadata.id}"
                 assert metadata.value is not None
                 metadata_list.append(Message(None, metadata.value, None, [], "", "", (filename, location)))
 
         interfaces_messages = []
         for interface, interface_config in config["interfaces_config"].items():
             for ds_index, datasource in enumerate(
                 interface_config.get("constants", {}).get("gmfSearchOptions", {}).get("datasources", [])
             ):
                 for a_index, action in enumerate(datasource.get("groupActions", [])):
                     location = (
-                        "interfaces_config/{}/constants/gmfSearchOptions/datasources[{}]/"
-                        "groupActions[{}]/title".format(interface, ds_index, a_index)
+                        f"interfaces_config/{interface}/constants/gmfSearchOptions/datasources[{ds_index}]/"
+                        f"groupActions[{a_index}]/title"
                     )
                     assert action["title"] is not None
                     interfaces_messages.append(
                         Message(None, action["title"], None, [], "", "", (filename, location))
                     )
 
             for merge_tab in (
                 interface_config.get("constants", {})
                 .get("gmfDisplayQueryGridOptions", {})
                 .get("mergeTabs", {})
                 .keys()
             ):
-                location = "interfaces_config/{}/constants/gmfDisplayQueryGridOptions/mergeTabs/{}/".format(
-                    interface, merge_tab
+                location = (
+                    f"interfaces_config/{interface}/constants/gmfDisplayQueryGridOptions/"
+                    f"mergeTabs/{merge_tab}/"
                 )
                 assert merge_tab is not None
                 interfaces_messages.append(Message(None, merge_tab, None, [], "", "", (filename, location)))
 
         return raster + enums + metadata_list + interfaces_messages
 
     @staticmethod
-    def _enumerate_attributes_values(dbsessions, layers, layerinfos, fieldname):
+    def _enumerate_attributes_values(
+        dbsessions: Dict[str, Session], layerinfos: Dict[str, Any], fieldname: str
+    ) -> Set[Tuple[str, ...]]:
         dbname = layerinfos.get("dbsession", "dbsession")
-        translate = layerinfos.get("attributes").get(fieldname, {}).get("translate", True)
+        translate = cast(Dict[str, Any], layerinfos["attributes"]).get(fieldname, {}).get("translate", True)
         if not translate:
-            return []
+            return set()
         try:
             dbsession = dbsessions.get(dbname)
-            return layers.query_enumerate_attribute_values(dbsession, layerinfos, fieldname)
+            return Layers.query_enumerate_attribute_values(dbsession, layerinfos, fieldname)
         except Exception as e:
-            table = layerinfos.get("attributes").get(fieldname, {}).get("table")
+            table = cast(Dict[str, Any], layerinfos["attributes"]).get(fieldname, {}).get("table")
             print(
                 colorize(
                     "ERROR! Unable to collect enumerate attributes for "
-                    "db: {}, table: {}, column: {} ({})".format(dbname, table, fieldname, e),
-                    RED,
+                    f"db: {dbname}, table: {table}, column: {fieldname} ({e!s})",
+                    Color.RED,
                 )
             )
-            if os.environ.get("IGNORE_I18N_ERRORS", "FALSE") == "TRUE":
-                return []
+            if _get_config_str("IGNORE_I18N_ERRORS", "FALSE") == "TRUE":
+                return set()
             raise
 
     @staticmethod
-    def _collect_print_config(print_config, filename):
+    def _collect_print_config(print_config: Dict[str, Any], filename: str) -> List[Message]:
         result = []
-        for template_ in list(print_config.get("templates").keys()):
+        for template_ in list(cast(Dict[str, Any], print_config.get("templates")).keys()):
             assert template_ is not None
-            result.append(
-                Message(None, template_, None, [], "", "", (filename, "template/{}".format(template_)))
-            )
+            result.append(Message(None, template_, None, [], "", "", (filename, f"template/{template_}")))
             assert not [
                 attribute
                 for attribute in list(print_config["templates"][template_]["attributes"].keys())
                 if attribute is None
             ]
             result += [
                 Message(
                     None,
                     attribute,
                     None,
                     [],
                     "",
                     "",
-                    (filename, "template/{}/{}".format(template_, attribute)),
+                    (filename, f"template/{template_}/{attribute}"),
                 )
                 for attribute in list(print_config["templates"][template_]["attributes"].keys())
             ]
         return result
 
 
-class GeomapfishThemeExtractor(Extractor):  # pragma: no cover
-    """
-    GeoMapFish theme extractor
-    """
+class GeomapfishThemeExtractor(Extractor):  # type: ignore
+    """GeoMapFish theme extractor."""
 
     # Run on the development.ini file
     extensions = [".ini"]
-    featuretype_cache: Dict[str, Optional[Dict]] = {}
-    wmscap_cache: Dict[str, WebMapService] = {}
+    featuretype_cache: Dict[str, Optional[Dict[str, Any]]] = {}
+    wms_capabilities_cache: Dict[str, WebMapService] = {}
 
     def __init__(self) -> None:
         super().__init__()
         if os.path.exists("/etc/geomapfish/config.yaml"):
             config.init("/etc/geomapfish/config.yaml")
             self.config = config.get_config()
         else:
             self.config = None
         self.env = None
 
-    def __call__(self, filename, options, fileobj=None, lineno=0):
+    def __call__(
+        self, filename: str, options: Dict[str, Any], fileobj: Optional[str] = None, lineno: int = 0
+    ) -> List[Message]:
         del fileobj, lineno
+
+        print(f"Running {self.__class__.__name__} on {filename}")
+
         messages: List[Message] = []
 
         try:
-            engine = sqlalchemy.engine_from_config(self.config, "sqlalchemy_slave.")
-            factory = sqlalchemy.orm.sessionmaker(bind=engine)
-            db_session = sqlalchemy.orm.scoped_session(factory)
-            c2cgeoportal_commons.models.DBSession = db_session
-            c2cgeoportal_commons.models.Base.metadata.bind = engine
+            init_db(self.config)
+            from c2cgeoportal_commons.models import DBSession  # pylint: disable=import-outside-toplevel
+
+            db_session = DBSession()
 
             try:
                 from c2cgeoportal_commons.models.main import (  # pylint: disable=import-outside-toplevel
                     FullTextSearch,
                     LayerGroup,
                     LayerWMS,
                     LayerWMTS,
                     Theme,
                 )
 
-                self._import(Theme, messages)
-                self._import(LayerGroup, messages)
-                self._import(LayerWMS, messages, self._import_layer_wms)
-                self._import(LayerWMTS, messages, self._import_layer_wmts)
+                self._import(Theme, messages, name_regex=_get_config_str("THEME_REGEX", ".*"))
+                self._import(
+                    LayerGroup,
+                    messages,
+                    name_regex=_get_config_str("GROUP_REGEX", ".*"),
+                    has_interfaces=False,
+                )
+                self._import(
+                    LayerWMS,
+                    messages,
+                    self._import_layer_wms,
+                    name_regex=_get_config_str("WMSLAYER_REGEX", ".*"),
+                )
+                self._import(
+                    LayerWMTS,
+                    messages,
+                    self._import_layer_wmts,
+                    name_regex=_get_config_str("WMTSLAYER_REGEX", ".*"),
+                )
 
                 for (layer_name,) in db_session.query(FullTextSearch.layer_name).distinct().all():
                     if layer_name is not None and layer_name != "":
                         assert layer_name is not None
                         messages.append(
                             Message(
                                 None,
@@ -444,68 +531,83 @@
                                 )
                             )
             except ProgrammingError as e:
                 print(
                     colorize(
                         "ERROR! The database is probably not up to date "
                         "(should be ignored when happen during the upgrade)",
-                        RED,
+                        Color.RED,
                     )
                 )
-                print(colorize(e, RED))
-                if os.environ.get("IGNORE_I18N_ERRORS", "FALSE") != "TRUE":
+                print(colorize(e, Color.RED))
+                if _get_config_str("IGNORE_I18N_ERRORS", "FALSE") != "TRUE":
                     raise
         except NoSuchTableError as e:
             print(
                 colorize(
                     "ERROR! The schema didn't seem to exists "
                     "(should be ignored when happen during the deploy)",
-                    RED,
+                    Color.RED,
                 )
             )
-            print(colorize(e, RED))
-            if os.environ.get("IGNORE_I18N_ERRORS", "FALSE") != "TRUE":
+            print(colorize(e, Color.RED))
+            if _get_config_str("IGNORE_I18N_ERRORS", "FALSE") != "TRUE":
                 raise
         except OperationalError as e:
             print(
                 colorize(
                     "ERROR! The database didn't seem to exists "
                     "(should be ignored when happen during the deploy)",
-                    RED,
+                    Color.RED,
                 )
             )
-            print(colorize(e, RED))
-            if os.environ.get("IGNORE_I18N_ERRORS", "FALSE") != "TRUE":
+            print(colorize(e, Color.RED))
+            if _get_config_str("IGNORE_I18N_ERRORS", "FALSE") != "TRUE":
                 raise
 
         return messages
 
     @staticmethod
-    def _import(object_type, messages, callback=None):
+    def _import(
+        object_type: Type[Any],
+        messages: List[str],
+        callback: Optional[Callable[["main.Layer", List[str]], None]] = None,
+        has_interfaces: bool = True,
+        name_regex: str = ".*",
+    ) -> None:
         from c2cgeoportal_commons.models import DBSession  # pylint: disable=import-outside-toplevel
+        from c2cgeoportal_commons.models.main import Interface  # pylint: disable=import-outside-toplevel
+
+        filter_re = re.compile(name_regex)
 
-        items = DBSession.query(object_type)
-        for item in items:
+        query = DBSession.query(object_type)
+
+        interfaces = _get_config("INTERFACES")
+        if has_interfaces and interfaces is not None:
+            query.join(object_type.interface).filter(Interface.name in interfaces.split("."))
+
+        for item in query.all():
             assert item.name is not None
-            messages.append(
-                Message(
-                    None,
-                    item.name,
-                    None,
-                    [],
-                    "",
-                    "",
-                    (item.item_type, item.name.encode("ascii", errors="replace")),
+            if filter_re.match(item.name):
+                messages.append(
+                    Message(
+                        None,
+                        item.name,
+                        None,
+                        [],
+                        "",
+                        "",
+                        (item.item_type, item.name.encode("ascii", errors="replace")),
+                    )
                 )
-            )
 
             if callback is not None:
                 callback(item, messages)
 
-    def _import_layer_wms(self, layer, messages):
+    def _import_layer_wms(self, layer: "main.Layer", messages: List[str]) -> None:
         server = layer.ogc_server
         url = server.url_wfs or server.url
         if url is None:
             return
         if layer.ogc_server.wfs_support:
             for wms_layer in layer.layer.split(","):
                 self._import_layer_attributes(url, wms_layer, layer.item_type, layer.name, messages)
@@ -536,22 +638,23 @@
                                     "",
                                     (".".join(["edit", layer.item_type, str(layer.id)]), layer.name),
                                 )
                             )
             except NoSuchTableError:
                 print(
                     colorize(
-                        "ERROR! No such table '{}' for layer '{}'.".format(layer.geo_table, layer.name), RED
+                        f"ERROR! No such table '{layer.geo_table}' for layer '{layer.name}'.",
+                        Color.RED,
                     )
                 )
-                print(colorize(traceback.format_exc(), RED))
-                if os.environ.get("IGNORE_I18N_ERRORS", "FALSE") != "TRUE":
+                print(colorize(traceback.format_exc(), Color.RED))
+                if _get_config_str("IGNORE_I18N_ERRORS", "FALSE") != "TRUE":
                     raise
 
-    def _import_layer_wmts(self, layer, messages):
+    def _import_layer_wmts(self, layer: "main.Layer", messages: List[str]) -> None:
         from c2cgeoportal_commons.models import DBSession  # pylint: disable=import-outside-toplevel
         from c2cgeoportal_commons.models.main import OGCServer  # pylint: disable=import-outside-toplevel
 
         layers = [d.value for d in layer.metadatas if d.name == "queryLayers"]
         if not layers:
             layers = [d.value for d in layer.metadatas if d.name == "wmsLayer"]
         server = [d.value for d in layer.metadatas if d.name == "ogcServer"]
@@ -567,24 +670,25 @@
                             layer.item_type,
                             layer.name,
                             messages,
                         )
                 except NoResultFound:
                     print(
                         colorize(
-                            "ERROR! the OGC server '{}' from the WMTS layer '{}' does not exist.".format(
-                                server[0], layer.name
-                            ),
-                            RED,
+                            f"ERROR! the OGC server '{server[0]}' from the "
+                            f"WMTS layer '{layer.name}' does not exist.",
+                            Color.RED,
                         )
                     )
-                    if os.environ.get("IGNORE_I18N_ERRORS", "FALSE") != "TRUE":
+                    if _get_config_str("IGNORE_I18N_ERRORS", "FALSE") != "TRUE":
                         raise
 
-    def _import_layer_attributes(self, url, layer, item_type, name, messages):
+    def _import_layer_attributes(
+        self, url: str, layer: "main.Layer", item_type: str, name: str, messages: List[str]
+    ) -> None:
         attributes, layers = self._layer_attributes(url, layer)
         for sub_layer in layers:
             assert sub_layer is not None
             messages.append(
                 Message(
                     None,
                     sub_layer,
@@ -605,190 +709,210 @@
                     [],
                     "",
                     "",
                     (".".join([item_type, name]), layer.encode("ascii", "replace")),
                 )
             )
 
-    def _build_url(self, url):
-        url_split = urlsplit(url)
-        hostname = url_split.hostname
+    def _build_url(self, url: Url) -> Tuple[Url, Dict[str, str], Dict[str, Any]]:
+        hostname = url.hostname
         host_map = self.config.get("lingua_extractor", {}).get("host_map", {})
         if hostname in host_map:
             map_ = host_map[hostname]
             if "netloc" in map_:
-                url_split = url_split._replace(netloc=map_["netloc"])
+                url.netloc = map_["netloc"]
             if "scheme" in map_:
-                url_split = url_split._replace(scheme=map_["scheme"])
+                url.scheme = map_["scheme"]
             kwargs = {"verify": map_["verify"]} if "verify" in map_ else {}
-            return url_split.geturl(), map_.get("headers", {}), kwargs
+            return url, map_.get("headers", {}), kwargs
         return url, {}, {}
 
-    def _layer_attributes(self, url, layer):
+    def _layer_attributes(self, url: str, layer: str) -> Tuple[List[str], List[str]]:
         errors: Set[str] = set()
 
-        request = _Request()
-        request.registry.settings = self.config
+        request = pyramid.threadlocal.get_current_request()
+        if request is None:
+            request = _Request()
+            request.registry.settings = self.config
+
         # Static schema will not be supported
-        url = get_url2("Layer", url, request, errors)
+        url_obj_ = get_url2("Layer", url, request, errors)
         if errors:
             print("\n".join(errors))
             return [], []
-        url, headers, kwargs = self._build_url(url)
+        if not url_obj_:
+            print(f"No URL for: {url}")
+            return [], []
+        url_obj: Url = url_obj_
+        url_obj, headers, kwargs = self._build_url(url_obj)
 
-        if url not in self.wmscap_cache:
-            print("Get WMS GetCapabilities for URL: {}".format(url))
-            self.wmscap_cache[url] = None
-
-            wms_getcap_url = add_url_params(
-                url,
-                {
-                    "SERVICE": "WMS",
-                    "VERSION": "1.1.1",
-                    "REQUEST": "GetCapabilities",
-                    "ROLE_IDS": "0",
-                    "USER_ID": "0",
-                },
+        if url not in self.wms_capabilities_cache:
+            print(f"Get WMS GetCapabilities for URL: {url_obj}")
+            self.wms_capabilities_cache[url] = None
+
+            wms_getcap_url = (
+                url_obj.clone()
+                .add_query(
+                    {
+                        "SERVICE": "WMS",
+                        "VERSION": "1.1.1",
+                        "REQUEST": "GetCapabilities",
+                        "ROLE_IDS": "0",
+                        "USER_ID": "0",
+                    }
+                )
+                .url()
             )
             try:
-                print(
-                    "Get WMS GetCapabilities for URL {},\nwith headers: {}".format(
-                        wms_getcap_url,
-                        " ".join(
-                            [
-                                "{}={}".format(h, v if h not in ("Authorization", "Cookies") else "***")
-                                for h, v in headers.items()
-                            ]
-                        ),
-                    )
+                rendered_headers = " ".join(
+                    [
+                        f"{h}={v if h not in ('Authorization', 'Cookies') else '***'}"
+                        for h, v in headers.items()
+                    ]
                 )
+                print(f"Get WMS GetCapabilities for URL {wms_getcap_url},\nwith headers: {rendered_headers}")
                 response = requests.get(wms_getcap_url, headers=headers, **kwargs)
 
-                try:
-                    self.wmscap_cache[url] = WebMapService(None, xml=response.content)
-                except Exception as e:
+                if response.ok:
+                    try:
+                        self.wms_capabilities_cache[url] = WebMapService(None, xml=response.content)
+                    except Exception as e:
+                        print(
+                            colorize(
+                                "ERROR! an error occurred while trying to parse "
+                                "the GetCapabilities document.",
+                                Color.RED,
+                            )
+                        )
+                        print(colorize(str(e), Color.RED))
+                        print(f"URL: {wms_getcap_url}\nxml:\n{response.text}")
+                        if _get_config_str("IGNORE_I18N_ERRORS", "FALSE") != "TRUE":
+                            raise
+                else:
                     print(
                         colorize(
-                            "ERROR! an error occurred while trying to " "parse the GetCapabilities document.",
-                            RED,
+                            f"ERROR! Unable to GetCapabilities from URL: {wms_getcap_url},\n"
+                            f"with headers: {rendered_headers}",
+                            Color.RED,
                         )
                     )
-                    print(colorize(str(e), RED))
-                    print("URL: {}\nxml:\n{}".format(wms_getcap_url, response.text))
-                    if os.environ.get("IGNORE_I18N_ERRORS", "FALSE") != "TRUE":
-                        raise
-            except Exception as e:  # pragma: no cover
-                print(colorize(str(e), RED))
+                    print(f"Response: {response.status_code} {response.reason}\n{response.text}")
+                    if _get_config_str("IGNORE_I18N_ERRORS", "FALSE") != "TRUE":
+                        raise Exception(response.reason)
+            except Exception as e:
+                print(colorize(str(e), Color.RED))
+                rendered_headers = " ".join(
+                    [
+                        f"{h}={v if h not in ('Authorization', 'Cookies') else '***'}"
+                        for h, v in headers.items()
+                    ]
+                )
                 print(
                     colorize(
-                        "ERROR! Unable to GetCapabilities from URL: {},\nwith headers: {}".format(
-                            wms_getcap_url,
-                            " ".join(
-                                [
-                                    "{}={}".format(h, v if h not in ("Authorization", "Cookies") else "***")
-                                    for h, v in headers.items()
-                                ]
-                            ),
-                        ),
-                        RED,
+                        f"ERROR! Unable to GetCapabilities from URL: {wms_getcap_url},\n"
+                        f"with headers: {rendered_headers}",
+                        Color.RED,
                     )
                 )
-                if os.environ.get("IGNORE_I18N_ERRORS", "FALSE") != "TRUE":
+                if _get_config_str("IGNORE_I18N_ERRORS", "FALSE") != "TRUE":
                     raise
 
-        wmscap = self.wmscap_cache[url]
+        wms_capabilities = self.wms_capabilities_cache[url]
 
         if url not in self.featuretype_cache:
-            print("Get WFS DescribeFeatureType for URL: {}".format(url))
+            print(f"Get WFS DescribeFeatureType for URL: {url_obj}")
             self.featuretype_cache[url] = None
 
-            wfs_descrfeat_url = add_url_params(
-                url,
-                {
-                    "SERVICE": "WFS",
-                    "VERSION": "1.1.0",
-                    "REQUEST": "DescribeFeatureType",
-                    "ROLE_IDS": "0",
-                    "USER_ID": "0",
-                },
+            wfs_describe_feature_url = (
+                url_obj.clone()
+                .add_query(
+                    {
+                        "SERVICE": "WFS",
+                        "VERSION": "1.1.0",
+                        "REQUEST": "DescribeFeatureType",
+                        "ROLE_IDS": "0",
+                        "USER_ID": "0",
+                    }
+                )
+                .url()
             )
             try:
-                response = requests.get(wfs_descrfeat_url, headers=headers, **kwargs)
-            except Exception as e:  # pragma: no cover
-                print(colorize(str(e), RED))
+                response = requests.get(wfs_describe_feature_url, headers=headers, **kwargs)
+            except Exception as e:
+                print(colorize(str(e), Color.RED))
                 print(
                     colorize(
-                        "ERROR! Unable to DescribeFeatureType from URL: {}".format(wfs_descrfeat_url), RED
+                        f"ERROR! Unable to DescribeFeatureType from URL: {wfs_describe_feature_url}",
+                        Color.RED,
                     )
                 )
-                if os.environ.get("IGNORE_I18N_ERRORS", "FALSE") == "TRUE":
+                if _get_config_str("IGNORE_I18N_ERRORS", "FALSE") == "TRUE":
                     return [], []
                 raise
 
-            if not response.ok:  # pragma: no cover
+            if not response.ok:
                 print(
                     colorize(
-                        "ERROR! DescribeFeatureType from URL {} return the error: {:d} {}".format(
-                            wfs_descrfeat_url, response.status_code, response.reason
-                        ),
-                        RED,
+                        f"ERROR! DescribeFeatureType from URL {wfs_describe_feature_url} return the error: "
+                        f"{response.status_code:d} {response.reason}",
+                        Color.RED,
                     )
                 )
-                if os.environ.get("IGNORE_I18N_ERRORS", "FALSE") == "TRUE":
+                if _get_config_str("IGNORE_I18N_ERRORS", "FALSE") == "TRUE":
                     return [], []
                 raise Exception("Aborted")
 
             try:
                 describe = parseString(response.text)
                 featurestype: Optional[Dict[str, Node]] = {}
                 self.featuretype_cache[url] = featurestype
                 for type_element in describe.getElementsByTagNameNS(
                     "http://www.w3.org/2001/XMLSchema", "complexType"
                 ):
                     cast(Dict[str, Node], featurestype)[type_element.getAttribute("name")] = type_element
             except ExpatError as e:
                 print(
                     colorize(
-                        "ERROR! an error occurred while trying to " "parse the DescribeFeatureType document.",
-                        RED,
+                        "ERROR! an error occurred while trying to parse the DescribeFeatureType document.",
+                        Color.RED,
                     )
                 )
-                print(colorize(str(e), RED))
-                print("URL: {}\nxml:\n{}".format(wfs_descrfeat_url, response.text))
-                if os.environ.get("IGNORE_I18N_ERRORS", "FALSE") == "TRUE":
+                print(colorize(str(e), Color.RED))
+                print(f"URL: {wfs_describe_feature_url}\nxml:\n{response.text}")
+                if _get_config_str("IGNORE_I18N_ERRORS", "FALSE") == "TRUE":
                     return [], []
                 raise
             except AttributeError:
                 print(
                     colorize(
                         "ERROR! an error occurred while trying to "
                         "read the Mapfile and recover the themes.",
-                        RED,
+                        Color.RED,
                     )
                 )
-                print("URL: {}\nxml:\n{}".format(wfs_descrfeat_url, response.text))
-                if os.environ.get("IGNORE_I18N_ERRORS", "FALSE") == "TRUE":
+                print(f"URL: {wfs_describe_feature_url}\nxml:\n{response.text}")
+                if _get_config_str("IGNORE_I18N_ERRORS", "FALSE") == "TRUE":
                     return [], []
                 raise
         else:
             featurestype = self.featuretype_cache[url]
 
         if featurestype is None:
             return [], []
 
-        layers = [layer]
-        if wmscap is not None and layer in list(wmscap.contents):
-            layer_obj = wmscap[layer]
+        layers: List[str] = [layer]
+        if wms_capabilities is not None and layer in list(wms_capabilities.contents):
+            layer_obj = wms_capabilities[layer]
             if layer_obj.layers:
                 layers = [layer.name for layer in layer_obj.layers]
 
-        attributes = []
+        attributes: List[str] = []
         for sub_layer in layers:
             # Should probably be adapted for other king of servers
-            type_element = featurestype.get("{}Type".format(sub_layer))
+            type_element = featurestype.get(f"{sub_layer}Type")
             if type_element is not None:
                 for element in type_element.getElementsByTagNameNS(
                     "http://www.w3.org/2001/XMLSchema", "element"
                 ):
                     if not element.getAttribute("type").startswith("gml:"):
                         attributes.append(element.getAttribute("name"))
```

## c2cgeoportal_geoportal/lib/loader.py

```diff
@@ -1,9 +1,7 @@
-# -*- coding: utf-8 -*-
-
 # Copyright (c) 2019-2021, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
@@ -25,36 +23,33 @@
 
 # The views and conclusions contained in the software and documentation are those
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
 
 import logging
-from typing import Dict
+from typing import Any, Dict, Optional, cast
 
-import c2cwsgiutils.pyramid_logging
 from c2c.template.config import config as configuration
-from plaster_pastedeploy import Loader as BaseLoader
+from c2cwsgiutils.loader import Loader as BaseLoader
 
 from c2cgeoportal_geoportal.lib.i18n import available_locale_names
 
 LOG = logging.getLogger(__name__)
 
 
 class Loader(BaseLoader):
-    def _get_defaults(self, defaults: Dict[str, str] = None) -> Dict[str, str]:
-        env: Dict[str, str] = c2cwsgiutils.pyramid_logging.get_defaults()
-        d: Dict[str, str] = {key: env[key].replace("%", "%%") for key in env}
-        if defaults:
-            d.update(defaults)
-        return super()._get_defaults(d)
+    """The Pyramid configuration loader."""
 
-    def get_wsgi_app_settings(self, name: str = None, defaults: Dict[str, str] = None) -> Dict:
-        settings = super().get_wsgi_app_settings(name, defaults)
+    def get_wsgi_app_settings(
+        self, name: Optional[str] = None, defaults: Optional[Dict[str, str]] = None
+    ) -> Dict[str, Any]:
+        settings = cast(Dict[str, Any], super().get_wsgi_app_settings(name, defaults))
         configuration.init(settings.get("app.cfg"))
         settings.update(configuration.get_config())
         if "available_locale_names" not in settings:
             settings["available_locale_names"] = available_locale_names()
         return settings
 
     def __repr__(self) -> str:
-        return 'c2cgeoportal_geoportal.lib.loader.Loader(uri="{0}")'.format(self.uri)
+        """Get the object representation."""
+        return f'c2cgeoportal_geoportal.lib.loader.Loader(uri="{self.uri}")'
```

## c2cgeoportal_geoportal/lib/metrics.py

```diff
@@ -1,9 +1,7 @@
-# -*- coding: utf-8 -*-
-
 # Copyright (c) 2018-2021, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
@@ -25,77 +23,90 @@
 
 # The views and conclusions contained in the software and documentation are those
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
 import gc
 import sys
+from typing import Any, Dict, List, Tuple
 
 from c2cwsgiutils import broadcast
 from c2cwsgiutils.debug import get_size
 from c2cwsgiutils.metrics import Provider
 
 from c2cgeoportal_geoportal.lib.caching import MEMORY_CACHE_DICT
 from c2cgeoportal_geoportal.views.raster import Raster
 
 
 class MemoryCacheSizeProvider(Provider):
-    def __init__(self, all_=False):
+    """Get the memory used by the cache."""
+
+    def __init__(self, all_: bool = False):
         super().__init__("pod_process_memory_cache_kb", "Used memory cache")
         self.all = all_
 
-    def get_data(self):
+    def get_data(self) -> List[Tuple[Dict[str, Any], float]]:
+        elements = _get_memory_cache(all_=self.all)
+        assert elements is not None
         result = []
-        for elem in _get_memory_cache(all_=self.all):  # type: ignore
+        for elem in elements:
             if elem is not None:
                 for value in elem["values"]:
                     value[0]["pid"] = str(elem["pid"])
                     value[0]["hostname"] = elem["hostname"]
                     result.append(value)
         return result
 
 
 @broadcast.decorator(expect_answers=True, timeout=15)
-def _get_memory_cache(all_):
+def _get_memory_cache(all_: bool) -> Dict[str, List[Tuple[Dict[str, Any], float]]]:
     values = (
         [({"key": key}, get_size(value) / 1024) for key, value in list(MEMORY_CACHE_DICT.items())]
         if all_
         else []
     )
     values.append(({"key": "total"}, get_size(MEMORY_CACHE_DICT) / 1024))
     return {"values": values}
 
 
 class RasterDataSizeProvider(Provider):
-    def __init__(self):
+    """Get the memory used by Raster data cache."""
+
+    def __init__(self) -> None:
         super().__init__("pod_process_raster_data_kb", "Memory used by raster")
 
-    def get_data(self):
+    def get_data(self) -> List[Tuple[Dict[str, Any], float]]:
+        elements = _get_raster_data()
+        assert elements is not None
         result = []
-        for elem in _get_raster_data():  # type: ignore
+        for elem in elements:
             for value in elem["values"]:
                 value[0]["pid"] = str(elem["pid"])
-                value[0]["hostname"] = elem["hostname"]
+                value[0]["hostname"] = str(elem["hostname"])
                 result.append(value)
         return result
 
 
 @broadcast.decorator(expect_answers=True, timeout=15)
-def _get_raster_data():
+def _get_raster_data() -> Dict[str, List[Tuple[Dict[str, str], float]]]:
     return {"values": [({"key": key}, get_size(value) / 1024) for key, value in list(Raster.data.items())]}
 
 
 class TotalPythonObjectMemoryProvider(Provider):
-    def __init__(self):
+    """Get the memory used by Python objects."""
+
+    def __init__(self) -> None:
         super().__init__("total_python_object_memory_kb", "Memory used by raster")
 
-    def get_data(self):
+    def get_data(self) -> List[Tuple[Dict[str, str], float]]:
+        object_size = _get_python_object_size()
+        assert object_size is not None
         return [
-            ({"pid": str(val["pid"]), "hostname": val["hostname"]}, val["value"])
-            for val in _get_python_object_size()  # type: ignore
+            ({"pid": str(val["pid"]), "hostname": str(val["hostname"])}, val["value"])
+            for val in object_size
             if val is not None
         ]
 
 
 @broadcast.decorator(expect_answers=True, timeout=15)
-def _get_python_object_size():
-    return {"value": sum([sys.getsizeof(o) / 1024 for o in gc.get_objects()])}
+def _get_python_object_size() -> Dict[str, float]:
+    return {"value": sum(sys.getsizeof(o) / 1024 for o in gc.get_objects())}
```

## c2cgeoportal_geoportal/lib/oauth2.py

```diff
@@ -1,10 +1,8 @@
-# -*- coding: utf-8 -*-
-
-# Copyright (c) 2021, Camptocamp SA
+# Copyright (c) 2021-2024, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -27,26 +25,30 @@
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
 import logging
 from datetime import datetime, timedelta
 from typing import Any, Dict, List, Union
 
+import basicauth
 import oauthlib.common
 import oauthlib.oauth2
 import pyramid.threadlocal
 
+import c2cgeoportal_commons  # pylint: disable=unused-import
 from c2cgeoportal_geoportal.lib.caching import get_region
 
 LOG = logging.getLogger(__name__)
 OBJECT_CACHE_REGION = get_region("obj")
 
 
-class RequestValidator(oauthlib.oauth2.RequestValidator):
-    def __init__(self, authorization_expires_in):
+class RequestValidator(oauthlib.oauth2.RequestValidator):  # type: ignore
+    """The oauth2 request validator implementation."""
+
+    def __init__(self, authorization_expires_in: int) -> None:
         # in minutes
         self.authorization_expires_in = authorization_expires_in
 
     def authenticate_client(  # pylint: disable=no-self-use,useless-suppression
         self,
         request: oauthlib.common.Request,
         *args: Any,
@@ -59,40 +61,33 @@
         be `HTTP Basic Authentication Scheme`_ which utilizes the Authorization
         header.
 
         Headers may be accesses through request.headers and parameters found in
         both body and query can be obtained by direct attribute access, i.e.
         request.client_id for client_id in the URL query.
 
-        :param request: oauthlib.common.Request
-        :rtype: True or False
+        Arguments:
+
+            request: oauthlib.common.Request
+
+        Returns: True or False
 
         Method is used by:
             - Authorization Code Grant
             - Resource Owner Password Credentials Grant (may be disabled)
             - Client Credentials Grant
             - Refresh Token Grant
 
-        .. _`HTTP Basic Authentication Scheme`: http://tools.ietf.org/html/rfc1945#section-11.1
+        .. _`HTTP Basic Authentication Scheme`: https://tools.ietf.org/html/rfc1945#section-11.1
         """
         del args, kwargs
 
-        LOG.debug("authenticate_client")
+        LOG.debug("authenticate_client => unimplemented")
 
-        from c2cgeoportal_commons.models import DBSession, static  # pylint: disable=import-outside-toplevel
-
-        params = dict(request.decoded_body)
-
-        request.client = (
-            DBSession.query(static.OAuth2Client)
-            .filter(static.OAuth2Client.client_id == params["client_id"])
-            .one_or_none()
-        )
-
-        return request.client is not None
+        raise NotImplementedError("Not implemented, the method `authenticate_client_id` should be used.")
 
     def authenticate_client_id(  # pylint: disable=no-self-use,useless-suppression
         self,
         client_id: str,
         request: oauthlib.common.Request,
         *args: Any,
         **kwargs: Any,
@@ -103,35 +98,43 @@
         A non-confidential client is one that is not required to authenticate
         through other means, such as using HTTP Basic.
 
         Note, while not strictly necessary it can often be very convenient
         to set request.client to the client object associated with the
         given client_id.
 
-        :param request: oauthlib.common.Request
-        :rtype: True or False
-
         Method is used by:
             - Authorization Code Grant
         """
         del args, kwargs
 
         LOG.debug("authenticate_client_id %s", client_id)
 
         from c2cgeoportal_commons.models import DBSession, static  # pylint: disable=import-outside-toplevel
 
         params = dict(request.decoded_body)
 
+        if "client_secret" in params:
+            client_secret = params["client_secret"]
+        elif "Authorization" in request.headers:
+            username, password = basicauth.decode(request.headers["Authorization"])
+            assert client_id == username
+            client_secret = password
+        else:
+            # Unable to get the client secret
+            return False
+
         request.client = (
             DBSession.query(static.OAuth2Client)
             .filter(static.OAuth2Client.client_id == client_id)
-            .filter(static.OAuth2Client.secret == params["client_secret"])
+            .filter(static.OAuth2Client.secret == client_secret)
             .one_or_none()
         )
 
+        LOG.debug("authenticate_client_id => %s", request.client is not None)
         return request.client is not None
 
     def client_authentication_required(  # pylint: disable=no-self-use,useless-suppression
         self,
         request: oauthlib.common.Request,
         *args: Any,
         **kwargs: Any,
@@ -146,57 +149,65 @@
             - Authorization Code Grant, when Client type is Confidential or when Client was issued
               client credentials or whenever Client provided client authentication,
               see `Section 4.1.3`_.
             - Refresh Token Grant, when Client type is Confidential or when Client was issued
               client credentials or whenever Client provided client authentication, see
               `Section 6`_
 
-        :param request: oauthlib.common.Request
-        :rtype: True or False
+        Arguments:
+
+            request: oauthlib.common.Request
+
+        Returns: True or False
 
         Method is used by:
             - Authorization Code Grant
             - Resource Owner Password Credentials Grant
             - Refresh Token Grant
 
-        .. _`Section 4.3.2`: http://tools.ietf.org/html/rfc6749#section-4.3.2
-        .. _`Section 4.1.3`: http://tools.ietf.org/html/rfc6749#section-4.1.3
-        .. _`Section 6`: http://tools.ietf.org/html/rfc6749#section-6
+        .. _`Section 4.3.2`: https://tools.ietf.org/html/rfc6749#section-4.3.2
+        .. _`Section 4.1.3`: https://tools.ietf.org/html/rfc6749#section-4.1.3
+        .. _`Section 6`: https://tools.ietf.org/html/rfc6749#section-6
         """
         del request, args, kwargs
 
-        LOG.debug("client_authentication_required")
+        LOG.debug("client_authentication_required => False")
 
-        return True
+        return False
 
     def confirm_redirect_uri(  # pylint: disable=no-self-use,useless-suppression
         self,
         client_id: str,
         code: str,
         redirect_uri: str,
         client: "c2cgeoportal_commons.models.static.OAuth2Client",  # noqa: F821
         *args: Any,
         **kwargs: Any,
     ) -> bool:
         """
-        Ensure that the authorization process represented by this authorization
-        code began with this 'redirect_uri'.
+        Ensure that the authorization process is correct.
+
+        Ensure that the authorization process represented by this authorization code began with this
+        ``redirect_uri``.
 
         If the client specifies a redirect_uri when obtaining code then that
         redirect URI must be bound to the code and verified equal in this
         method, according to RFC 6749 section 4.1.3.  Do not compare against
         the client's allowed redirect URIs, but against the URI used when the
         code was saved.
 
-        :param client_id: Unicode client identifier
-        :param code: Unicode authorization_code.
-        :param redirect_uri: Unicode absolute URI
-        :param client: Client object set by you, see authenticate_client.
-        :param request: The HTTP Request (oauthlib.common.Request)
-        :rtype: True or False
+        Arguments:
+
+            client_id: Unicode client identifier
+            code: Unicode authorization_code.
+            redirect_uri: Unicode absolute URI
+            client: Client object set by you, see authenticate_client.
+            request: The HTTP Request
+
+        Returns: True or False
 
         Method is used by:
             - Authorization Code Grant (during token request)
         """
         del args, kwargs
 
         LOG.debug("confirm_redirect_uri %s %s", client_id, redirect_uri)
@@ -208,28 +219,34 @@
             .join(static.OAuth2AuthorizationCode.client)
             .filter(static.OAuth2AuthorizationCode.code == code)
             .filter(static.OAuth2Client.client_id == client_id)
             .filter(static.OAuth2AuthorizationCode.redirect_uri == redirect_uri)
             .filter(static.OAuth2AuthorizationCode.expire_at > datetime.now())
             .one_or_none()
         )
+        LOG.debug("confirm_redirect_uri => %s", authorization_code is not None)
         return authorization_code is not None
 
     def get_code_challenge_method(  # pylint: disable=no-self-use,useless-suppression
         self, code: str, request: oauthlib.common.Request
     ) -> None:
-        """Is called during the "token" request processing, when a
-        ``code_verifier`` and a ``code_challenge`` has been provided.
-        See ``.get_code_challenge``.
-        Must return ``plain`` or ``S256``. You can return a custom value if you have
-        implemented your own ``AuthorizationCodeGrant`` class.
-        :param code: Authorization code.
-        :param request: OAuthlib request.
-        :type request: oauthlib.common.Request
-        :rtype: code_challenge_method string
+        """
+        Is called during the "token" request processing.
+
+        When a ``code_verifier`` and a ``code_challenge`` has
+        been provided. See ``.get_code_challenge``. Must return ``plain`` or ``S256``. You can return a custom
+        value if you have implemented your own ``AuthorizationCodeGrant`` class.
+
+        Arguments:
+
+            code: Authorization code.
+            request: OAuthlib request.
+
+        Returns: code_challenge_method string
+
         Method is used by:
             - Authorization Code Grant - when PKCE is active
         """
         del code, request
 
         LOG.debug("get_code_challenge_method")
 
@@ -241,17 +258,20 @@
         request: oauthlib.common.Request,
         *args: Any,
         **kwargs: Any,
     ) -> str:
         """
         Get the default redirect URI for the client.
 
-        :param client_id: Unicode client identifier
-        :param request: The HTTP Request (oauthlib.common.Request)
-        :rtype: The default redirect URI for the client
+        Arguments:
+
+            client_id: Unicode client identifier
+            request: The HTTP Request
+
+        Returns: The default redirect URI for the client
 
         Method is used by:
             - Authorization Code Grant
             - Implicit Grant
         """
         del request, args, kwargs
 
@@ -265,17 +285,20 @@
         request: oauthlib.common.Request,
         *args: Any,
         **kwargs: Any,
     ) -> List[str]:
         """
         Get the default scopes for the client.
 
-        :param client_id: Unicode client identifier
-        :param request: The HTTP Request (oauthlib.common.Request)
-        :rtype: List of default scopes
+        Arguments:
+
+            client_id: Unicode client identifier
+            request: The HTTP Request
+
+        Returns: List of default scopes
 
         Method is used by all core grant types:
             - Authorization Code Grant
             - Implicit Grant
             - Resource Owner Password Credentials Grant
             - Client Credentials grant
         """
@@ -291,17 +314,20 @@
         request: oauthlib.common.Request,
         *args: Any,
         **kwargs: Any,
     ) -> List[str]:
         """
         Get the list of scopes associated with the refresh token.
 
-        :param refresh_token: Unicode refresh token
-        :param request: The HTTP Request (oauthlib.common.Request)
-        :rtype: List of scopes.
+        Arguments:
+
+            refresh_token: Unicode refresh token
+            request: The HTTP Request
+
+        Returns: List of scopes.
 
         Method is used by:
             - Refresh token grant
         """
         del refresh_token, request, args, kwargs
 
         LOG.debug("get_original_scopes")
@@ -312,19 +338,21 @@
         self,
         token: str,
         token_type_hint: str,
         request: oauthlib.common.Request,
         *args: Any,
         **kwargs: Any,
     ) -> None:
-        """Introspect an access or refresh token.
-        Called once the introspect request is validated. This method should
-        verify the *token* and either return a dictionary with the list of
-        claims associated, or `None` in case the token is unknown.
-        Below the list of registered claims you should be interested in:
+        """
+        Introspect an access or refresh token.
+
+        Called once the introspect request is validated. This method
+        should verify the *token* and either return a dictionary with the list of claims associated, or `None`
+        in case the token is unknown. Below the list of registered claims you should be interested in:
+
         - scope : space-separated list of scopes
         - client_id : client identifier
         - username : human-readable identifier for the resource owner
         - token_type : type of the token
         - exp : integer timestamp indicating when this token will expire
         - iat : integer timestamp indicating when this token was issued
         - nbf : integer timestamp indicating when it can be "not-before" used
@@ -333,20 +361,24 @@
         - iss : string representing issuer of this token
         - jti : string identifier for the token
         Note that most of them are coming directly from JWT RFC. More details
         can be found in `Introspect Claims`_ or `_JWT Claims`_.
         The implementation can use *token_type_hint* to improve lookup
         efficiency, but must fallback to other types to be compliant with RFC.
         The dict of claims is added to request.token after this method.
-        :param token: The token string.
-        :param token_type_hint: access_token or refresh_token.
-        :param request: OAuthlib request.
-        :type request: oauthlib.common.Request
+
+        Arguments:
+
+            token: The token string.
+            token_type_hint: access_token or refresh_token.
+            request: OAuthlib request.
+
         Method is used by:
             - Introspect Endpoint (all grants are compatible)
+
         .. _`Introspect Claims`: https://tools.ietf.org/html/rfc7662#section-2.2
         .. _`JWT Claims`: https://tools.ietf.org/html/rfc7519#section-4
         """
         del token, request, args, kwargs
 
         LOG.debug("introspect_token %s", token_type_hint)
 
@@ -359,17 +391,19 @@
         request: oauthlib.common.Request,
         *args: Any,
         **kwargs: Any,
     ) -> None:
         """
         Invalidate an authorization code after use.
 
-        :param client_id: Unicode client identifier
-        :param code: The authorization code grant (request.code).
-        :param request: The HTTP Request (oauthlib.common.Request)
+        Arguments:
+
+            client_id: Unicode client identifier
+            code: The authorization code grant (request.code).
+            request: The HTTP Request
 
         Method is used by:
             - Authorization Code Grant
         """
         del args, kwargs
 
         LOG.debug("invalidate_authorization_code %s", client_id)
@@ -400,18 +434,19 @@
         needs to be within the scope of the original token. This is
         ensured by checking that all requested scopes strings are on
         the list returned by the get_original_scopes. If this check
         fails, is_within_original_scope is called. The method can be
         used in situations where returning all valid scopes from the
         get_original_scopes is not practical.
 
-        :param request_scopes: A list of scopes that were requested by client
-        :param refresh_token: Unicode refresh_token
-        :param request: The HTTP Request (oauthlib.common.Request)
-        :rtype: True or False
+        Arguments:
+
+            request_scopes: A list of scopes that were requested by client
+            refresh_token: Unicode refresh_token
+            request: The HTTP Request
 
         Method is used by:
             - Refresh token grant
         """
         del request, args, kwargs
 
         LOG.debug("is_within_original_scope %s %s", request_scopes, refresh_token)
@@ -425,17 +460,19 @@
         request: oauthlib.common.Request,
         *args: Any,
         **kwargs: Any,
     ) -> None:
         """
         Revoke an access or refresh token.
 
-        :param token: The token string.
-        :param token_type_hint: access_token or refresh_token.
-        :param request: The HTTP Request (oauthlib.common.Request)
+        Arguments:
+
+            token: The token string.
+            token_type_hint: access_token or refresh_token.
+            request: The HTTP Request
 
         Method is used by:
             - Revocation Endpoint
         """
         del token, request, args, kwargs
 
         LOG.debug("revoke_token %s", token_type_hint)
@@ -448,16 +485,17 @@
         """
         Determine whether to rotate the refresh token. Default, yes.
 
         When access tokens are refreshed the old refresh token can be kept
         or replaced with a new one (rotated). Return True to rotate and
         and False for keeping original.
 
-        :param request: oauthlib.common.Request
-        :rtype: True or False
+        Arguments:
+
+            request: oauthlib.common.Request
 
         Method is used by:
             - Refresh Token Grant
         """
         del request
 
         LOG.debug("rotate_refresh_token")
@@ -487,17 +525,19 @@
 
             {'code': 'sdf345jsdf0934f'}
 
         It may also have a 'state' key containing a nonce for the client, if it
         chose to send one.  That value should be saved and used in
         'validate_code'.
 
-        :param client_id: Unicode client identifier
-        :param code: A dict of the authorization code grant and, optionally, state.
-        :param request: The HTTP Request (oauthlib.common.Request)
+        Arguments:
+
+            client_id: Unicode client identifier
+            code: A dict of the authorization code grant and, optionally, state.
+            request: The HTTP Request
 
         Method is used by:
             - Authorization Code Grant
         """
         del args, kwargs
 
         LOG.debug("save_authorization_code %s", client_id)
@@ -555,18 +595,21 @@
                 'refresh_token': '23sdf876234',  # if issued
                 'state': 'given_by_client',  # if supplied by client
             }
 
         Note that while "scope" is a string-separated list of authorized scopes,
         the original list is still available in request.scopes
 
-        :param client_id: Unicode client identifier
-        :param token: A Bearer token dict
-        :param request: The HTTP Request (oauthlib.common.Request)
-        :rtype: The default redirect URI for the client
+        Arguments:
+
+            client_id: Unicode client identifier
+            token: A Bearer token dict
+            request: The HTTP Request
+
+        Returns: The default redirect URI for the client
 
         Method is used by all core grant types issuing Bearer tokens:
             - Authorization Code Grant
             - Implicit Grant
             - Resource Owner Password Credentials Grant (might not associate a client)
             - Client Credentials grant
         """
@@ -603,17 +646,19 @@
         token: str,
         scopes: List[str],
         request: oauthlib.common.Request,
     ) -> bool:
         """
         Ensure the Bearer token is valid and authorized access to scopes.
 
-        :param token: A string of random characters.
-        :param scopes: A list of scopes associated with the protected resource.
-        :param request: The HTTP Request (oauthlib.common.Request)
+        Arguments:
+
+            token: A string of random characters.
+            scopes: A list of scopes associated with the protected resource.
+            request: The HTTP Request
 
         A key to OAuth 2 security and restricting impact of leaked tokens is
         the short expiration time of tokens, *always ensure the token has not
         expired!*.
 
         Two different approaches to scope validation:
 
@@ -637,18 +682,19 @@
         Note, the request.user attribute can be set to the resource owner
         associated with this token. Similarly the request.client and
         request.scopes attribute can be set to associated client object
         and authorized scopes. If you then use a decorator such as the
         one provided for django these attributes will be made available
         in all protected views as keyword arguments.
 
-        :param token: Unicode Bearer token
-        :param scopes: List of scopes (defined by you)
-        :param request: The HTTP Request (oauthlib.common.Request)
-        :rtype: True or False
+        Arguments:
+
+            token: Unicode Bearer token
+            scopes: List of scopes (defined by you)
+            request: The HTTP Request
 
         Method is indirectly used by all core Bearer token issuing grant types:
             - Authorization Code Grant
             - Implicit Grant
             - Resource Owner Password Credentials Grant
             - Client Credentials Grant
         """
@@ -662,14 +708,15 @@
             .filter(static.OAuth2BearerToken.access_token == token)
             .filter(static.OAuth2BearerToken.expire_at > datetime.now())
         ).one_or_none()
 
         if bearer_token is not None:
             request.user = bearer_token.user
 
+        LOG.debug("validate_bearer_token => %s", bearer_token is not None)
         return bearer_token is not None
 
     def validate_client_id(  # pylint: disable=no-self-use,useless-suppression
         self,
         client_id: str,
         request: oauthlib.common.Request,
         *args: Any,
@@ -678,16 +725,18 @@
         """
         Ensure client_id belong to a valid and active client.
 
         Note, while not strictly necessary it can often be very convenient
         to set request.client to the client object associated with the
         given client_id.
 
-        :param request: oauthlib.common.Request
-        :rtype: True or False
+        Arguments:
+
+            client_id: Unicode client identifier
+            request: oauthlib.common.Request
 
         Method is used by:
             - Authorization Code Grant
             - Implicit Grant
         """
         del args, kwargs
 
@@ -710,32 +759,32 @@
         code: str,
         client: "c2cgeoportal_commons.models.static.OAuth2Client",  # noqa: F821
         request: oauthlib.common.Request,
         *args: Any,
         **kwargs: Any,
     ) -> bool:
         """
-        Verify that the authorization_code is valid and assigned to the given
-        client.
+        Verify that the authorization_code is valid and assigned to the given client.
 
         Before returning true, set the following based on the information stored
         with the code in 'save_authorization_code':
 
             - request.user
             - request.state (if given)
             - request.scopes
         OBS! The request.user attribute should be set to the resource owner
         associated with this authorization code. Similarly request.scopes
         must also be set.
 
-        :param client_id: Unicode client identifier
-        :param code: Unicode authorization code
-        :param client: Client object set by you, see authenticate_client.
-        :param request: The HTTP Request (oauthlib.common.Request)
-        :rtype: True or False
+        Arguments:
+
+            client_id: Unicode client identifier
+            code: Unicode authorization code
+            client: Client object set by you, see authenticate_client.
+            request: The HTTP Request
 
         Method is used by:
             - Authorization Code Grant
         """
         del args, kwargs
 
         LOG.debug("validate_code %s", client_id)
@@ -748,43 +797,50 @@
             .filter(static.OAuth2AuthorizationCode.code == code)
             .filter(static.OAuth2Client.client_id == client_id)
             .filter(static.OAuth2AuthorizationCode.expire_at > datetime.now())
             .one_or_none()
         )
         if authorization_code is not None:
             request.user = authorization_code.user
+        LOG.debug("validate_code => %s", authorization_code is not None)
         return authorization_code is not None
 
     def validate_grant_type(  # pylint: disable=no-self-use,useless-suppression
         self,
         client_id: str,
         grant_type: str,
-        client,
+        client: "c2cgeoportal_commons.models.static.OAuth2Client",
         request: oauthlib.common.Request,
         *args: Any,
         **kwargs: Any,
     ) -> bool:
         """
         Ensure client is authorized to use the grant_type requested.
 
-        :param client_id: Unicode client identifier
-        :param grant_type: Unicode grant type, i.e. authorization_code, password.
-        :param client: Client object set by you, see authenticate_client.
-        :param request: The HTTP Request (oauthlib.common.Request)
-        :rtype: True or False
+        Arguments:
+
+            client_id: Unicode client identifier
+            grant_type: Unicode grant type, i.e. authorization_code, password.
+            client: Client object set by you, see authenticate_client.
+            request: The HTTP Request
 
         Method is used by:
             - Authorization Code Grant
             - Resource Owner Password Credentials Grant
             - Client Credentials Grant
             - Refresh Token Grant
         """
-        del request, args, kwargs
+        del client, request, args, kwargs
 
-        LOG.debug("validate_grant_type %s %s", client_id, grant_type)
+        LOG.debug(
+            "validate_grant_type %s %s => %s",
+            client_id,
+            grant_type,
+            grant_type in ("authorization_code", "refresh_token"),
+        )
 
         return grant_type in ("authorization_code", "refresh_token")
 
     def validate_redirect_uri(  # pylint: disable=no-self-use,useless-suppression
         self,
         client_id: str,
         redirect_uri: str,
@@ -794,18 +850,19 @@
     ) -> bool:
         """
         Ensure client is authorized to redirect to the redirect_uri requested.
 
         All clients should register the absolute URIs of all URIs they intend
         to redirect to. The registration is outside of the scope of oauthlib.
 
-        :param client_id: Unicode client identifier
-        :param redirect_uri: Unicode absolute URI
-        :param request: The HTTP Request (oauthlib.common.Request)
-        :rtype: True or False
+        Arguments:
+
+            client_id: Unicode client identifier
+            redirect_uri: Unicode absolute URI
+            request: The HTTP Request
 
         Method is used by:
             - Authorization Code Grant
             - Implicit Grant
         """
         del request, args, kwargs
 
@@ -832,18 +889,19 @@
     ) -> bool:
         """
         Ensure the Bearer token is valid and authorized access to scopes.
 
         OBS! The request.user attribute should be set to the resource owner
         associated with this refresh token.
 
-        :param refresh_token: Unicode refresh token
-        :param client: Client object set by you, see authenticate_client.
-        :param request: The HTTP Request (oauthlib.common.Request)
-        :rtype: True or False
+        Arguments:
+
+            refresh_token: Unicode refresh token
+            client: Client object set by you, see authenticate_client.
+            request: The HTTP Request
 
         Method is used by:
             - Authorization Code Grant (indirectly by issuing refresh tokens)
             - Resource Owner Password Credentials Grant (also indirectly)
             - Refresh Token Grant
         """
         del args, kwargs
@@ -852,116 +910,127 @@
 
         from c2cgeoportal_commons.models import DBSession, static  # pylint: disable=import-outside-toplevel
 
         bearer_token = (
             DBSession.query(static.OAuth2BearerToken)
             .filter(static.OAuth2BearerToken.refresh_token == refresh_token)
             .filter(static.OAuth2BearerToken.client_id == request.client.id)
-            .filter(static.OAuth2BearerToken.expire_at > datetime.now())
             .one_or_none()
         )
 
         if bearer_token is not None:
             request.user = bearer_token.user
 
         return bearer_token is not None
 
     def validate_response_type(  # pylint: disable=no-self-use,useless-suppression
         self,
         client_id: str,
         response_type: str,
-        client,
+        client: "c2cgeoportal_commons.models.static.OAuth2Client",
         request: oauthlib.common.Request,
         *args: Any,
         **kwargs: Any,
     ) -> bool:
         """
         Ensure client is authorized to use the response_type requested.
 
-        :param client_id: Unicode client identifier
-        :param response_type: Unicode response type, i.e. code, token.
-        :param client: Client object set by you, see authenticate_client.
-        :param request: The HTTP Request (oauthlib.common.Request)
-        :rtype: True or False
+        Arguments:
+
+            client_id: Unicode client identifier
+            response_type: Unicode response type, i.e. code, token.
+            client: Client object set by you, see authenticate_client.
+            request: The HTTP Request
 
         Method is used by:
             - Authorization Code Grant
             - Implicit Grant
         """
-        del request, args, kwargs
+        del client, request, args, kwargs
 
         LOG.debug("validate_response_type %s %s", client_id, response_type)
 
         return response_type == "code"
 
     def validate_scopes(  # pylint: disable=no-self-use,useless-suppression
         self,
         client_id: str,
         scopes: List[str],
-        client,
+        client: "c2cgeoportal_commons.models.static.OAuth2Client",
         request: oauthlib.common.Request,
         *args: Any,
         **kwargs: Any,
     ) -> bool:
         """
         Ensure the client is authorized access to requested scopes.
 
-        :param client_id: Unicode client identifier
-        :param scopes: List of scopes (defined by you)
-        :param client: Client object set by you, see authenticate_client.
-        :param request: The HTTP Request (oauthlib.common.Request)
-        :rtype: True or False
+        Arguments:
+
+            client_id: Unicode client identifier
+            scopes: List of scopes (defined by you)
+            client: Client object set by you, see authenticate_client.
+            request: The HTTP Request
 
         Method is used by all core grant types:
             - Authorization Code Grant
             - Implicit Grant
             - Resource Owner Password Credentials Grant
             - Client Credentials Grant
         """
-        del request, args, kwargs
+        del client, request, args, kwargs
 
         LOG.debug("validate_scopes %s %s", client_id, scopes)
 
         return True
 
     def validate_user(  # pylint: disable=no-self-use,useless-suppression
         self,
-        username,
-        password,
+        username: str,
+        password: str,
         client: "c2cgeoportal_commons.models.static.OAuth2Client",  # noqa: F821
         request: oauthlib.common.Request,
         *args: Any,
         **kwargs: Any,
     ) -> bool:
         """
         Ensure the username and password is valid.
 
         OBS! The validation should also set the user attribute of the request
         to a valid resource owner, i.e. request.user = username or similar. If
         not set you will be unable to associate a token with a user in the
         persistence method used (commonly, save_bearer_token).
 
-        :param username: Unicode username
-        :param password: Unicode password
-        :param client: Client object set by you, see authenticate_client.
-        :param request: The HTTP Request (oauthlib.common.Request)
-        :rtype: True or False
+        Arguments:
+
+            username: Unicode username
+            password: Unicode password
+            client: Client object set by you, see authenticate_client.
+            request: The HTTP Request
 
         Method is used by:
             - Resource Owner Password Credentials Grant
         """
         del password, client, request, args, kwargs
 
         LOG.debug("validate_user %s", username)
 
         raise NotImplementedError("Not implemented.")
 
 
-@OBJECT_CACHE_REGION.cache_on_arguments()
-def get_oauth_client(settings):
+def get_oauth_client(settings: Dict[str, Any]) -> oauthlib.oauth2.WebApplicationServer:
+    """Get the oauth2 client, with a cache."""
     authentication_settings = settings.get("authentication", {})
+    return _get_oauth_client_cache(
+        authentication_settings.get("oauth2_authorization_expire_minutes", 10),
+        authentication_settings.get("oauth2_token_expire_minutes", 60),
+    )
+
+
+@OBJECT_CACHE_REGION.cache_on_arguments()  # type: ignore
+def _get_oauth_client_cache(
+    authorization_expire_minutes: int, token_expire_minutes: int
+) -> oauthlib.oauth2.WebApplicationServer:
+    """Get the oauth2 client, with a cache."""
     return oauthlib.oauth2.WebApplicationServer(
-        RequestValidator(
-            authorization_expires_in=authentication_settings.get("oauth2_authorization_expire_minutes", 10)
-        ),
-        token_expires_in=authentication_settings.get("oauth2_token_expire_minutes", 60) * 60,
+        RequestValidator(authorization_expires_in=authorization_expire_minutes),
+        token_expires_in=token_expire_minutes * 60,
     )
```

## c2cgeoportal_geoportal/lib/wmstparsing.py

```diff
@@ -1,10 +1,8 @@
-# -*- coding: utf-8 -*-
-
-# Copyright (c) 2013-2020, Camptocamp SA
+# Copyright (c) 2013-2024, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -25,129 +23,140 @@
 
 # The views and conclusions contained in the software and documentation are those
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
 
 import datetime
-from typing import Optional, cast
+from typing import Any, Dict, List, Optional, Set, Tuple, Union
 
 import isodate
 
+TimeExtent = Union["TimeExtentValue", "TimeExtentInterval"]
+
 
-def min_none(a, b):
+def min_none(a: Optional[datetime.datetime], b: Optional[datetime.datetime]) -> Optional[datetime.datetime]:
+    """Return the min value, support non in input."""
     if a is None:
         return b
     if b is None:
         return a
     return min(a, b)
 
 
-def max_none(a, b):
+def max_none(a: Optional[datetime.datetime], b: Optional[datetime.datetime]) -> Optional[datetime.datetime]:
+    """Return the max value, support non in input."""
     if a is None:
         return b
     if b is None:
         return a
     return max(a, b)
 
 
 class TimeInformation:
     """
+    Collect the WMS time information.
+
     Arguments:
 
-    * ``extent`` A time extent instance (``TimeExtentValue`` or
-                 ``TimeExtentInterval``)
-    * ``mode`` The layer mode ("single", "range" or "disabled")
-    * ``widget`` The layer mode ("slider" (default) or "datepicker")
+        extent: A time extent instance (``TimeExtentValue`` or ``TimeExtentInterval``)
+        mode: The layer mode ("single", "range" or "disabled")
+        widget: The layer mode ("slider" (default) or "datepicker")
     """
 
-    def __init__(self):
-        self.extent: Optional[TimeExtentValue] = None
-        self.mode = None
-        self.widget = None
-        self.layer = None
+    def __init__(self) -> None:
+        self.extent: Optional[TimeExtent] = None
+        self.mode: Optional[str] = None
+        self.widget: Optional[str] = None
+        self.layer: Optional[Dict[str, Any]] = None
 
-    def merge(self, layer, extent, mode, widget):
+    def merge(self, layer: Dict[str, Any], extent: TimeExtent, mode: str, widget: str) -> None:
         layer_apply = self.layer == layer or (not self.has_time() and extent is not None)
 
         self.merge_extent(extent)
         self.merge_mode(mode)
         self.merge_widget(widget)
 
         if layer_apply:
             layer["time"] = self.to_dict()
             self.layer = layer
         elif self.layer is not None:
             del self.layer["time"]
             self.layer = None
 
-    def merge_extent(self, extent):
+    def merge_extent(self, extent: TimeExtent) -> None:
         if self.extent is not None:
             self.extent.merge(extent)
         else:
             self.extent = extent
 
-    def merge_mode(self, mode):
+    def merge_mode(self, mode: str) -> None:
         if mode != "disabled":
             if self.mode is not None:
                 if self.mode != mode:
-                    raise ValueError("Could not mix time mode '{0!s}' and '{1!s}'".format(mode, self.mode))
+                    raise ValueError(f"Could not mix time mode '{mode!s}' and '{self.mode!s}'")
             else:
                 self.mode = mode
 
-    def merge_widget(self, widget):
+    def merge_widget(self, widget: Optional[str]) -> None:
         widget = "slider" if not widget else widget
+        assert widget is not None
 
         if self.widget is not None:
             if self.widget != widget:
-                raise ValueError("Could not mix time widget '{0!s}' and '{1!s}'".format(widget, self.widget))
+                raise ValueError(f"Could not mix time widget '{widget!s}' and '{self.widget!s}'")
         else:
             self.widget = widget
 
-    def has_time(self):
+    def has_time(self) -> bool:
         return self.extent is not None
 
-    def to_dict(self):
+    def to_dict(self) -> Optional[Dict[str, Any]]:
         if self.has_time():
-            time = cast(TimeExtentValue, self.extent).to_dict()
+            assert self.extent is not None
+            time = self.extent.to_dict()
             time["mode"] = self.mode
             time["widget"] = self.widget
             return time
         return None
 
 
 class TimeExtentValue:
-    """
-    Represents time as a list of values.
-    """
+    """Represents time as a list of values."""
 
-    def __init__(self, values, resolution, min_def_value, max_def_value):
+    def __init__(
+        self,
+        values: Set[datetime.datetime],
+        resolution: str,
+        min_def_value: Optional[datetime.datetime],
+        max_def_value: Optional[datetime.datetime],
+    ):
         """
+        Initialise.
+
         Arguments:
 
-        * ``values`` A set() of datetime
-        * ``resolution`` The resolution from the mapfile time definition
-        * ``min_def_value`` the minimum default value as a datetime
-        * ``max_def_value`` the maximum default value as a datetime
+            values: A set() of datetime
+            resolution: The resolution from the mapfile time definition
+            min_def_value: the minimum default value as a datetime
+            max_def_value: the maximum default value as a datetime
         """
         self.values = values
         self.resolution = resolution
         self.min_def_value = min_def_value
         self.max_def_value = max_def_value
 
-    def merge(self, extent):
+    def merge(self, extent: TimeExtent) -> None:
         if not isinstance(extent, TimeExtentValue):
-            raise ValueError(
-                "Could not mix time defined as a list of " "values with other type of definition"
-            )
+            raise ValueError("Could not mix time defined as a list of values with other type of definition")
         self.values.update(extent.values)
         self.min_def_value = min_none(self.min_def_value, extent.min_def_value)
         self.max_def_value = max_none(self.max_def_value, extent.max_def_value)
 
-    def to_dict(self):
+    def to_dict(self) -> Dict[str, Any]:
         values = sorted(self.values)
         min_def_value = _format_date(self.min_def_value) if self.min_def_value else None
         max_def_value = _format_date(self.max_def_value) if self.max_def_value else None
 
         return {
             "minValue": _format_date(values[0]),
             "maxValue": _format_date(values[-1]),
@@ -155,174 +164,190 @@
             "resolution": self.resolution,
             "minDefValue": min_def_value,
             "maxDefValue": max_def_value,
         }
 
 
 class TimeExtentInterval:
-    """
-    Represents time with the help of a start, an end and an interval.
-    """
+    """Represents time with the help of a start, an end and an interval."""
 
-    def __init__(self, start, end, interval, resolution, min_def_value, max_def_value):
+    def __init__(
+        self,
+        start: datetime.datetime,
+        end: datetime.datetime,
+        interval: Tuple[int, int, int, int],
+        resolution: str,
+        min_def_value: Optional[datetime.datetime],
+        max_def_value: Optional[datetime.datetime],
+    ):
         """
+        Initialize.
+
         Arguments:
 
-        * ``start`` The start value as a datetime
-        * ``end`` The end value as a datetime
-        * ``interval`` The interval as a tuple (years, months, days, seconds)
-        * ``resolution`` The resolution from the mapfile time definition
-        * ``min_def_value`` the minimum default value as a datetime
-        * ``max_def_value`` the maximum default value as a datetime
+            start: The start value as a datetime
+            end: The end value as a datetime
+            interval: The interval as a tuple (years, months, days, seconds)
+            resolution: The resolution from the mapfile time definition
+            min_def_value: the minimum default value as a datetime
+            max_def_value: the maximum default value as a datetime
         """
         self.start = start
         self.end = end
         self.interval = interval
         self.resolution = resolution
         self.min_def_value = min_def_value
         self.max_def_value = max_def_value
 
-    def merge(self, extent):
+    def merge(self, extent: TimeExtent) -> None:
         if not isinstance(extent, TimeExtentInterval):
-            raise ValueError(
-                "Could not merge time defined as with an " " interval with other type of definition"
-            )
+            raise ValueError("Could not merge time defined as with an interval with other type of definition")
         if self.interval != extent.interval:
-            raise ValueError("Could not merge times defined with a " "different interval")
-        self.start = min_none(self.start, extent.start)
-        self.end = max_none(self.end, extent.end)
+            raise ValueError("Could not merge times defined with a different interval")
+        start = min_none(self.start, extent.start)
+        assert start is not None
+        self.start = start
+        end = max_none(self.end, extent.end)
+        assert end is not None
+        self.end = end
         self.min_def_value = (
             self.min_def_value
             if extent.min_def_value is None
-            else extent.min_def_value
-            if self.min_def_value is None
-            else min_none(self.min_def_value, extent.min_def_value)
+            else (
+                extent.min_def_value
+                if self.min_def_value is None
+                else min_none(self.min_def_value, extent.min_def_value)
+            )
         )
         self.max_def_value = (
             self.max_def_value
             if extent.max_def_value is None
-            else extent.max_def_value
-            if self.max_def_value is None
-            else max_none(self.max_def_value, extent.max_def_value)
+            else (
+                extent.max_def_value
+                if self.max_def_value is None
+                else max_none(self.max_def_value, extent.max_def_value)
+            )
         )
 
-    def to_dict(self):
+    def to_dict(self) -> Dict[str, Any]:
         min_def_value = _format_date(self.min_def_value) if self.min_def_value is not None else None
         max_def_value = _format_date(self.max_def_value) if self.max_def_value is not None else None
 
         return {
             "minValue": _format_date(self.start),
             "maxValue": _format_date(self.end),
             "interval": self.interval,
             "resolution": self.resolution,
             "minDefValue": min_def_value,
             "maxDefValue": max_def_value,
         }
 
 
-def parse_extent(extent, default_values):
+def parse_extent(extent: List[str], default_values: str) -> TimeExtent:
     """
-    Parse a time extend from OWSLib to a ` TimeExtentValue`` or a
-    ``TimeExtentInterval``
+    Parse a time extend from OWSLib to a ` TimeExtentValue`` or a ``TimeExtentInterval``.
 
     Two formats are supported:
     * ['start/end/interval']
     * ['date1', 'date2', ..., 'date N']
 
     default_values must be a slash separated String from OWSLib's a
     defaulttimeposition
     """
     if extent:
         min_def_value, max_def_value = _parse_default_values(default_values)
         if extent[0].count("/") > 0:
             # case "start/end/interval"
             if len(extent) > 1 or extent[0].count("/") != 2:
-                raise ValueError("Unsupported time definition '{0!s}'".format(extent))
+                raise ValueError(f"Unsupported time definition '{extent!s}'")
             s, e, i = extent[0].split("/")
             start = _parse_date(s)
             end = _parse_date(e)
             interval = _parse_duration(i)
 
             return TimeExtentInterval(start[1], end[1], interval, start[0], min_def_value, max_def_value)
         # case "value1, value2, ..., valueN"
         dates = [_parse_date(d) for d in extent]
         resolution = dates[0][0]
-        values = set(d[1] for d in dates)
+        values = {d[1] for d in dates}
 
         return TimeExtentValue(values, resolution, min_def_value, max_def_value)
-    raise ValueError("Invalid time extent format '{}'".format(extent))
+    raise ValueError(f"Invalid time extent format '{extent}'")
 
 
-def _parse_default_values(default_values):
+def _parse_default_values(default_values: str) -> Tuple[datetime.datetime, Optional[datetime.datetime]]:
     """
-    Parse the 'default' value from OWSLib's defaulttimeposition
-    and return a maximum of two dates. default value must be a
-    slash separated String.
-    return None on the seconde value if it does not exist.
+    Parse the 'default' value from OWSLib's defaulttimeposition and return a maximum of two dates.
+
+    default value must be a slash separated String. return None on the seconde value if it does not exist.
     """
-    if default_values is None:  # pragma: no cover
+    if default_values is None:
         return None, None
 
     def_value = default_values.split("/")
 
     _, min_def_value = _parse_date(def_value[0])
     max_def_value = None
 
     if len(def_value) > 1:
         _, max_def_value = _parse_date(def_value[1])
 
     return min_def_value, max_def_value
 
 
-def _parse_date(date):
+def _parse_date(date: str) -> Tuple[str, datetime.datetime]:
     """
-    Parses a string into a tuple containing:
+    Parse a date string.
+
+    Return a tuple containing:
 
     * the resolution: "year", "month", "day" or "second"
     * the date as a datetime
 
-    The returned datetime always has a timezone (default to UTC)
+    The returned datetime always has a timezone (default is UTC)
     """
     resolutions = {"year": "%Y", "month": "%Y-%m", "day": "%Y-%m-%d"}
 
     for resolution, pattern in list(resolutions.items()):
         try:
             dt = datetime.datetime.strptime(date, pattern)
             return resolution, dt.replace(tzinfo=isodate.UTC)
-        except Exception:
+        except Exception:  # nosec
             pass
 
     try:
         dt = isodate.parse_datetime(date)
         if dt.tzinfo is None:
             dt = dt.replace(tzinfo=isodate.UTC)
         return "second", dt
-    except Exception:
-        raise ValueError("Invalid date format '{0!s}'".format(date))
+    except Exception as e:
+        raise ValueError(f"Invalid date format '{date}'") from e
 
 
-def _format_date(date):
-    assert isinstance(date, datetime.datetime)
+def _format_date(date: datetime.datetime) -> str:
     str_ = isodate.datetime_isoformat(date)
+    assert isinstance(str_, str)
     if date.tzinfo is None:
         str_ += "Z"
     return str_
 
 
-def _parse_duration(duration):
+def _parse_duration(duration: str) -> Tuple[int, int, int, int]:
     """
-    Parses an ISO 8601 duration (i.e. "P2DT5S") and returns a tuple containing:
+    Parse an ISO 8601 duration (i.e. "P2DT5S").
+
+    Return a tuple containing:
 
     * years
     * months
     * days
     * seconds
     """
-    duration = isodate.parse_duration(duration)
+    parsed_duration = isodate.parse_duration(duration)
 
     # casting years and months to int as isodate might return a float
     return (
-        int(duration.years) if hasattr(duration, "years") else 0,
-        int(duration.months) if hasattr(duration, "months") else 0,
-        duration.days,
-        duration.seconds,
+        int(parsed_duration.years) if hasattr(parsed_duration, "years") else 0,
+        int(parsed_duration.months) if hasattr(parsed_duration, "months") else 0,
+        parsed_duration.days,
+        parsed_duration.seconds,
     )
```

## c2cgeoportal_geoportal/lib/xsd.py

```diff
@@ -1,9 +1,7 @@
-# -*- coding: utf-8 -*-
-
 # Copyright (c) 2018-2021, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
@@ -25,25 +23,33 @@
 
 # The views and conclusions contained in the software and documentation are those
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
 
 from io import BytesIO
+from typing import Any, Callable, Dict, Optional, Type, Union, cast
 
+import sqlalchemy.sql.schema
 from papyrus.xsd import XSDGenerator as PapyrusXSDGenerator
 from papyrus.xsd import tag
+from sqlalchemy.ext.declarative import DeclarativeMeta
 from sqlalchemy.orm.properties import ColumnProperty
 from sqlalchemy.orm.util import class_mapper
 
 
-class XSDGenerator(PapyrusXSDGenerator):
-    def add_class_properties_xsd(self, tb, cls):
-        """Add the XSD for the class properties to the ``TreeBuilder``. And
-        call the user ``sequence_callback``."""
+class XSDGenerator(PapyrusXSDGenerator):  # type: ignore
+    """Extends the PapyrusXSDGenerator."""
+
+    def add_class_properties_xsd(self, tb: str, cls: DeclarativeMeta) -> None:
+        """
+        Add the XSD for the class properties to the ``TreeBuilder``.
+
+        And call the user ``sequence_callback``.
+        """
         mapper = class_mapper(cls)
         properties = []
         if cls.__attributes_order__:
             for attribute_name in cls.__attributes_order__:
                 attr = mapper.attrs.get(attribute_name)
                 if attr:
                     properties.append(attr)
@@ -58,23 +64,23 @@
         for p in properties:
             if isinstance(p, ColumnProperty):
                 self.add_column_property_xsd(tb, p)
 
         if self.sequence_callback:
             self.sequence_callback(tb, cls)
 
-    def add_column_property_xsd(self, tb, column_property):
+    def add_column_property_xsd(self, tb: str, column_property: ColumnProperty) -> None:
         column = column_property.columns[0]
         if column.foreign_keys:
             self.add_association_proxy_xsd(tb, column_property)
             return
 
         super().add_column_property_xsd(tb, column_property)
 
-    def add_association_proxy_xsd(self, tb, column_property):
+    def add_association_proxy_xsd(self, tb: str, column_property: ColumnProperty) -> None:
         from c2cgeoportal_commons.models import DBSession  # pylint: disable=import-outside-toplevel
 
         column = column_property.columns[0]
         proxy = column.info["association_proxy"]
         attribute = column_property.class_attribute
         cls = attribute.parent.entity
         association_proxy = getattr(cls, proxy)
@@ -92,41 +98,45 @@
             with tag(tb2, "xsd:simpleType") as tb3:
                 with tag(tb3, "xsd:restriction", {"base": "xsd:string"}) as tb4:
                     for (value,) in query:
                         with tag(tb4, "xsd:enumeration", {"value": value}):
                             pass
             self.element_callback(tb4, column)
 
-    def element_callback(self, tb, column):
+    def element_callback(self, tb: str, column: sqlalchemy.sql.schema.Column) -> None:
         if column.info.get("readonly"):
             with tag(tb, "xsd:annotation"):
                 with tag(tb, "xsd:appinfo"):
                     with tag(tb, "readonly", {"value": "true"}):
                         pass
 
 
 class XSD:
+    """The XSD file generator on a pyramid view."""
+
     def __init__(
         self,
-        include_primary_keys=False,
-        include_foreign_keys=False,
-        sequence_callback=None,
-        element_callback=None,
+        include_primary_keys: bool = False,
+        include_foreign_keys: bool = False,
+        sequence_callback: Optional[str] = None,
+        element_callback: Optional[str] = None,
     ):
         self.generator = XSDGenerator(
             include_primary_keys=include_primary_keys,
             include_foreign_keys=include_foreign_keys,
             sequence_callback=sequence_callback,
             element_callback=element_callback,
         )
 
-    def __call__(self, table):
-        def _render(cls, system):
+    def __call__(
+        self, table: str
+    ) -> Callable[[Union[Type[str], Type[bytes]], Dict[str, Any]], Optional[bytes]]:
+        def _render(cls: Union[Type[str], Type[bytes]], system: Dict[str, Any]) -> Optional[bytes]:
             request = system.get("request")
             if request is not None:
                 response = request.response
                 response.content_type = "application/xml"
                 io = self.generator.get_class_xsd(BytesIO(), cls)
-                return io.getvalue()
+                return cast(bytes, io.getvalue())
             return None
 
         return _render
```

## c2cgeoportal_geoportal/scripts/__init__.py

```diff
@@ -1,10 +1,8 @@
-# -*- coding: utf-8 -*-
-
-# Copyright (c) 2011-2020, Camptocamp SA
+# Copyright (c) 2011-2021, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -25,54 +23,40 @@
 
 # The views and conclusions contained in the software and documentation are those
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
 
 import os
-from urllib.parse import urlsplit, urlunsplit
+from argparse import ArgumentParser, Namespace
+from typing import Any, Dict
 
+import c2cwsgiutils.setup_process
+import pyramid.config
 import transaction
 import zope.sqlalchemy
-from pyramid.scripts.common import get_config_loader
 from sqlalchemy import engine_from_config
 from sqlalchemy.orm import Session, configure_mappers, sessionmaker
 
 
-def fill_arguments(parser):
-    default_app_config = (
-        "geoportal/production.ini" if os.path.isfile("geoportal/production.ini") else "production.ini"
-    )
-
-    parser.add_argument(
-        "--app-config",
-        "-i",
-        default=default_app_config,
-        help="The application .ini config file (optional, default is '{}')".format(default_app_config),
-    )
-    parser.add_argument(
-        "--app-name", "-n", default="app", help="The application name (optional, default is 'app')"
-    )
-
-
-def get_config_uri(options):
-    uri = urlsplit(options.app_config)
-    return urlunsplit(
-        (uri.scheme or "c2cgeoportal", uri.netloc, uri.path, uri.query, options.app_name or uri.fragment)
+def fill_arguments(parser: ArgumentParser) -> None:
+    """Fill the command line argument description."""
+    default_config_uri = (
+        "c2c://development.ini" if os.path.isfile("development.ini") else "c2c://geoportal/development.ini"
     )
+    c2cwsgiutils.setup_process.fill_arguments(parser, default_config_uri=default_config_uri)
 
 
-def get_appsettings(options, defaults=None):
-    config_uri = get_config_uri(options)
-    loader = get_config_loader(config_uri)
-    loader.setup_logging()
-    return loader.get_wsgi_app_settings(defaults=defaults)
+def get_appsettings(options: Namespace) -> pyramid.config.Configurator:
+    """Get the application settings."""
+    return c2cwsgiutils.setup_process.bootstrap_application_from_options(options)["registry"].settings
 
 
-def get_session(settings: dict, transaction_manager: transaction.TransactionManager) -> Session:
+def get_session(settings: Dict[str, Any], transaction_manager: transaction.TransactionManager) -> Session:
+    """Get the database session in script context."""
     configure_mappers()
     engine = engine_from_config(settings)
     session_factory = sessionmaker()
     session_factory.configure(bind=engine)
     dbsession = session_factory()
     zope.sqlalchemy.register(dbsession, transaction_manager=transaction_manager)
     return dbsession
```

## c2cgeoportal_geoportal/scripts/c2cupgrade.py

```diff
@@ -1,9 +1,7 @@
-# -*- coding: utf-8 -*-
-
 # Copyright (c) 2014-2021, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
@@ -32,202 +30,254 @@
 import atexit
 import filecmp
 import os
 import re
 import shutil
 import subprocess
 import sys
-from argparse import ArgumentParser
+from argparse import ArgumentParser, Namespace
+from json.decoder import JSONDecodeError
 from subprocess import call, check_call, check_output
-from typing import Any, Dict, cast
+from typing import Any, Callable, Dict, List, Optional, Tuple, Union, cast
 
 import pkg_resources
 import requests
 import yaml
 
-from c2cgeoportal_geoportal.lib.bashcolor import GREEN, RED, YELLOW, colorize
+from c2cgeoportal_geoportal.lib.bashcolor import Color, colorize
 
 REQUIRED_TEMPLATE_KEYS = ["package", "srid", "extent"]
 TEMPLATE_EXAMPLE = {"package": "${package}", "srid": "${srid}", "extent": "489246, 78873, 837119, 296543"}
 DIFF_NOTICE = (
     "You should apply the changes shown in the diff file on `CONST_create_template/<file>` "
     "on your project's `<file>`.\n"
     "Some advice to be more efficient: if the changes on a file concern a file that you never customize, "
     "you can simply copy the new file from `CONST_create_template` "
     "(`cp CONST_create_template/<file> <file>`)."
     "You can furthermore add this file to the `unmanaged_files` section of the `project.yaml` file, "
     "to avoid its contents appearing in the diff file for the next upgrade."
 )
 
 
-def main():
-    """
-    tool used to do the application upgrade
-    """
+def fix_style() -> None:
+    """Fix the style of all the project files using isort, Black and Prettier."""
+
+    file_to_clean = []
+    for filename, content in (
+        (".prettierignore", "*.min.js\n"),
+        ("pyproject.toml", "[tool.black]\nline-length = 110\ntarget-version = ['py38']\n"),
+        (".prettierrc.yaml", "bracketSpacing: false\nquoteProps: preserve\n"),
+        (
+            ".editorconfig",
+            """root = true
+[*]
+max_line_length = 110
+""",
+        ),
+    ):
+        if not os.path.exists(filename):
+            file_to_clean.append(filename)
+            if os.path.exists(os.path.join("CONST_create_template", filename)):
+                shutil.copyfile(os.path.join("CONST_create_template", filename), filename)
+            else:
+                with open(filename, "w", encoding="utf8") as file_:
+                    file_.write(content)
+
+    if os.path.exists("ci/config.yaml"):
+        os.rename("ci/config.yaml", "ci/config.yaml_")
+    subprocess.run(["c2cciutils-checks", "--fix", "--check=isort"])  # pylint: disable=subprocess-run-check
+    subprocess.run(["c2cciutils-checks", "--fix", "--check=black"])  # pylint: disable=subprocess-run-check
+    subprocess.run(["c2cciutils-checks", "--fix", "--check=prettier"])  # pylint: disable=subprocess-run-check
+    if os.path.exists("ci/config.yaml_"):
+        os.rename("ci/config.yaml_", "ci/config.yaml")
+
+    for filename in file_to_clean:
+        os.remove(filename)
+
 
+def main() -> None:
+    """Tool used to do the application upgrade."""
     parser = _fill_arguments()
     options = parser.parse_args()
 
     c2cupgradetool = C2cUpgradeTool(options)
     c2cupgradetool.upgrade()
 
 
-def _fill_arguments():
+def _fill_arguments() -> ArgumentParser:
     parser = ArgumentParser()
     parser.add_argument(
         "--git-remote", metavar="GITREMOTE", help="Specify the remote branch", default="origin"
     )
     parser.add_argument("--step", type=int, help=argparse.SUPPRESS, default=0)
 
     return parser
 
 
 class InteruptedException(Exception):
-    pass
+    """The interrupted exception."""
 
 
 current_step_number = 0
 
 
 class Step:
-    def __init__(self, step_number, file_marker=True):
+    """Decorator used for en upgrade step."""
+
+    def __init__(self, step_number: int, file_marker: bool = True):
         global current_step_number
         current_step_number = step_number
         self.step_number = step_number
         self.file_marker = file_marker
 
-    def __call__(self, current_step):
-        def decorate(c2cupgradetool, *args, **kwargs):
+    def __call__(
+        self, current_step: Callable[["C2cUpgradeTool", int], None]
+    ) -> Callable[["C2cUpgradeTool"], None]:
+        def decorate(c2cupgradetool: "C2cUpgradeTool") -> None:
             try:
-                if os.path.isfile(".UPGRADE{}".format(self.step_number - 1)):
-                    os.unlink(".UPGRADE{}".format(self.step_number - 1))
+                if os.path.isfile(f".UPGRADE{self.step_number - 1}"):
+                    os.unlink(f".UPGRADE{self.step_number - 1}")
                 if self.file_marker:
-                    with open(".UPGRADE{}".format(self.step_number), "w"):
+                    with open(f".UPGRADE{self.step_number}", "w", encoding="utf8"):
                         pass
-                print("Start step {}.".format(self.step_number))
+                print(f"Start step {self.step_number}.")
                 sys.stdout.flush()
-                current_step(c2cupgradetool, self.step_number, *args, **kwargs)
+                current_step(c2cupgradetool, self.step_number)
             except subprocess.CalledProcessError as exception:
+                command = " ".join([f"'{exception}'" for exception in exception.cmd])
                 c2cupgradetool.print_step(
                     self.step_number,
                     error=True,
-                    message="The command `{}` returns the error code {}.".format(
-                        " ".join(["'{}'".format(exception) for exception in exception.cmd]),
-                        exception.returncode,
-                    ),
+                    message=f"The command `{command}` returns the error code {exception.returncode}.",
                     prompt="Fix the error and run the step again:",
                 )
                 sys.exit(1)
             except InteruptedException as exception:
                 c2cupgradetool.print_step(
                     self.step_number,
                     error=True,
-                    message="There was an error: {}.".format(exception),
+                    message=f"There was an error: {exception}.",
                     prompt="Fix the error and run the step again:",
                 )
                 sys.exit(1)
             except Exception as exception:
-                cautch_exception = exception
+                catch_exception = exception
 
-                global current_step_number
                 if self.step_number == current_step_number:
 
-                    def message():
+                    def message() -> None:
                         c2cupgradetool.print_step(
                             self.step_number,
                             error=True,
-                            message="The step had the error '{}'.".format(cautch_exception),
+                            message=f"The step had the error '{catch_exception}'.",
                             prompt="Fix the error and run the step again:",
                         )
 
                     atexit.register(message)
                 raise
 
         return decorate
 
 
 class C2cUpgradeTool:
+    """The tool used to upgrade the application."""
 
-    color_bar = colorize("================================================================", GREEN)
+    color_bar = colorize("================================================================", Color.GREEN)
 
-    def __init__(self, options):
+    def __init__(self, options: Namespace):
         self.options = options
-        self.project: Dict[str, Any] = self.get_project()
+        self.project = self.get_project()
 
     @staticmethod
-    def get_project():
+    def get_project() -> Dict[str, Any]:
         if not os.path.isfile("project.yaml"):
-            print(colorize("Unable to find the required 'project.yaml' file.", RED))
+            print(colorize("Unable to find the required 'project.yaml' file.", Color.RED))
             sys.exit(1)
 
-        with open("project.yaml", "r") as project_file:
-            return yaml.safe_load(project_file)
+        with open("project.yaml", encoding="utf8") as project_file:
+            return cast(Dict[str, Any], yaml.safe_load(project_file))
 
     @staticmethod
-    def get_upgrade(section):
+    def get_upgrade(section: str) -> Union[List[Any], Dict[str, Any]]:
         if not os.path.isfile(".upgrade.yaml"):
-            print(colorize("Unable to find the required '.upgrade.yaml' file.", RED))
+            print(colorize("Unable to find the required '.upgrade.yaml' file.", Color.RED))
             sys.exit(1)
 
-        with open(".upgrade.yaml", "r") as project_file:
-            return yaml.safe_load(project_file)[section]
+        with open(".upgrade.yaml", encoding="utf8") as project_file:
+            return cast(Union[List[Any], Dict[str, Any]], yaml.safe_load(project_file)[section])
 
-    def print_step(self, step, error=False, message=None, prompt="To continue, type:"):
-        with open(".UPGRADE_INSTRUCTIONS", "w") as instructions:
+    def print_step(
+        self,
+        step: int,
+        error: bool = False,
+        message: Optional[str] = None,
+        prompt: str = "To continue, type:",
+    ) -> None:
+        with open(".UPGRADE_INSTRUCTIONS", "w", encoding="utf8") as instructions:
             print("")
             print(self.color_bar)
             if message is not None:
-                print(colorize(message, RED if error else YELLOW))
-                instructions.write("{}\n".format(message))
+                print(colorize(message, Color.RED if error else Color.YELLOW))
+                instructions.write(f"{message}\n")
             if step >= 0:
-                print(colorize(prompt, GREEN))
-                instructions.write("{}\n".format(prompt))
+                print(colorize(prompt, Color.GREEN))
+                instructions.write(f"{prompt}\n")
                 cmd = ["./upgrade", os.environ["VERSION"]]
                 if step != 0:
-                    cmd.append("{}".format(step))
-                print(colorize(" ".join(cmd), GREEN))
-                instructions.write("{}\n".format(" ".join(cmd)))
-
-    def run_step(self, step):
-        getattr(self, "step{}".format(step))()
-
-    def test_checkers(self):
-        run_curl = "Run `curl --insecure {} '{}'` for more information.".format(
-            " ".join(["--header {}={}".format(*i) for i in self.project.get("checker_headers", {}).items()]),
-            self.project["checker_url"],
+                    cmd.append(f"{step}")
+                print(colorize(" ".join(cmd), Color.GREEN))
+                instructions.write(f"{' '.join(cmd)}\n")
+
+    def run_step(self, step: int) -> None:
+        getattr(self, f"step{step}")()
+
+    def test_checkers(self) -> Tuple[bool, Optional[str]]:
+        headers = " ".join(
+            [f"--header {i[0]}={i[1]}" for i in self.project.get("checker_headers", {}).items()]
         )
+        run_curl = f"Run `curl --insecure {headers} '{self.project['checker_url']}'` for more information."
         try:
-            requests.packages.urllib3.disable_warnings()
+            requests.packages.urllib3.disable_warnings()  # type: ignore
             resp = requests.get(
-                self.project["checker_url"], headers=self.project.get("checker_headers"), verify=False
+                self.project["checker_url"],
+                headers=self.project.get("checker_headers"),
+                verify=False,  # nosec
             )
         except requests.exceptions.ConnectionError as exception:
-            return False, "\n".join(["Connection error: {}".format(exception), run_curl])
+            return False, "\n".join([f"Connection error: {exception}", run_curl])
         except ConnectionRefusedError as exception:
-            return False, "\n".join(["Connection refused: {}".format(exception), run_curl])
+            return False, "\n".join([f"Connection refused: {exception}", run_curl])
         if resp.status_code < 200 or resp.status_code >= 300:
 
-            print(colorize("=============", RED))
-            print(colorize("Checker error", RED))
-            for name, value in resp.json()["failures"].items():
-                print(colorize("Test '{}' failed with result:".format(name), YELLOW))
-                del value["level"]
-                del value["timing"]
-
-                print(yaml.dump(value) if value != {} else "No result")
+            print(colorize("=============", Color.RED))
+            print(colorize("Checker error", Color.RED))
+            try:
+                for name, value in resp.json()["failures"].items():
+                    print(colorize(f"Test '{name}' failed with result:", Color.YELLOW))
+                    del value["level"]
+                    del value["timing"]
+
+                    print(yaml.dump(value) if value != {} else "No result")
+            except JSONDecodeError:
+                print(
+                    colorize(
+                        f"Response is not a JSON '{resp.text}', {resp.reason} {resp.status_code}",
+                        Color.RED,
+                    )
+                )
 
             return False, "\n".join(["Checker error:", run_curl])
 
         return True, None
 
-    def upgrade(self):
+    def upgrade(self) -> None:
         self.run_step(self.options.step)
 
     @Step(0, file_marker=False)
-    def step0(self, step):
+    def step0(self, step: int) -> None:
         project_template_keys = list(cast(Dict[str, Any], self.project.get("template_vars")).keys())
         messages = []
         for required in REQUIRED_TEMPLATE_KEYS:
             if required not in project_template_keys:
                 messages.append(
                     "The element '{required}' is missing in the `template_vars` of "
                     "the file 'project.yaml', you should have for example: {required}: {template}.".format(
@@ -251,98 +301,61 @@
         else:
             check_call(["git", "status"])
             self.print_step(
                 step + 1,
                 message="Here is the output of 'git status'. Please make sure to commit all your "
                 "changes before going further. All uncommitted changes will be lost.\n"
                 "Note that for debugging purpose it is possible to pass directly to step 2 "
-                "e.-g.: ./upgrade --debug=../c2cgeoportal {version} 2".format(version=os.environ["VERSION"]),
+                f"e.-g.: ./upgrade --debug=../c2cgeoportal {os.environ['VERSION']} 2",
             )
 
     @Step(1)
-    def step1(self, step):
+    def step1(self, step: int) -> None:
         shutil.copyfile("project.yaml", "/tmp/project.yaml")
         try:
             check_call(["git", "reset", "--hard"])
             check_call(["git", "clean", "--force", "-d"])
         finally:
             shutil.copyfile("/tmp/project.yaml", "project.yaml")
 
         self.run_step(step + 1)
 
     @Step(2)
-    def step2(self, step):
-        with open(".eslintrc", "w") as eslintrc_file:
-            eslintrc_file.write(
-                """extends:
-  - openlayers
-globals:
-  '{}': false
-env:
-  jquery: true
-parserOptions:
-  ecmaVersion: 2017
-rules:
-  no-console: 0
-  comma-dangle: 0
-  import/no-unresolved: 0
-  valid-jsdoc: 0
-  sort-imports-es6-autofix/sort-imports-es6: 0
-  prettier/prettier: 1
-""".format(
-                    self.project["project_package"]
-                )
-            )
-
-        app_js_files = []
-        for base in ("CONST_create_template/", ""):
-            try:
-                app_js_files.extend(
-                    check_output(
-                        [
-                            "find",
-                            base + self.project["project_package"] + "_geoportal/static-ngeo/js",
-                            "-type",
-                            "f",
-                            "-name",
-                            "*.js",
-                        ]
-                    )
-                    .decode()
-                    .split()
-                )
-            except Exception:
-                pass
-
-        if app_js_files:
-            call(["eslint", "--fix"] + app_js_files)
-
-        os.remove(".eslintrc")
-        check_call(["git", "add"] + app_js_files)
-        call(["git", "commit", "--message=Run code style"])
+    def step2(self, step: int) -> None:
+        fix_style()
+        subprocess.run(["git", "add", "-A"])  # pylint: disable=subprocess-run-check
+        subprocess.run(["git", "commit", "--message=Run code style"])  # pylint: disable=subprocess-run-check
 
         self.run_step(step + 1)
 
     @Step(3)
-    def step3(self, step):
+    def step3(self, step: int) -> None:
         project_path = os.path.join("/tmp", self.project["project_folder"])
         os.mkdir(project_path)
         shutil.copyfile("/src/project.yaml", os.path.join(project_path, "project.yaml"))
         check_call(
             [
                 "pcreate",
-                "--ignore-conflicting-name",
                 "--overwrite",
-                "--scaffold=c2cgeoportal_update",
+                "--scaffold=update",
                 project_path,
             ]
         )
+        if self.get_project().get("advance", False):
+            check_call(
+                [
+                    "pcreate",
+                    "--overwrite",
+                    "--scaffold=advance_update",
+                    project_path,
+                ]
+            )
 
         shutil.copyfile(os.path.join(project_path, ".upgrade.yaml"), ".upgrade.yaml")
-        for upgrade_file in self.get_upgrade("upgrade_files"):
+        for upgrade_file in cast(List[Dict[str, Any]], self.get_upgrade("upgrade_files")):
             action = upgrade_file["action"]
             if action == "remove":
                 self.files_to_remove(upgrade_file, prefix="CONST_create_template", force=True)
             if action == "move":
                 self.files_to_move(upgrade_file, prefix="CONST_create_template", force=True)
 
         shutil.rmtree(project_path)
@@ -350,54 +363,96 @@
 
         check_call(["git", "add", "--all", "--force", "CONST_create_template/"])
         call(["git", "commit", "--message=Perform the move into the CONST_create_template folder"])
 
         self.run_step(step + 1)
 
     @Step(4)
-    def step4(self, step):
+    def step4(self, step: int) -> None:
         if os.path.exists("CONST_create_template"):
             check_call(["git", "rm", "-r", "--force", "CONST_create_template/"])
 
         project_path = os.path.join("/tmp", self.project["project_folder"])
         check_call(["ln", "-s", "/src", project_path])
         check_call(
             [
                 "pcreate",
-                "--ignore-conflicting-name",
                 "--overwrite",
-                "--scaffold=c2cgeoportal_update",
+                "--scaffold=update",
                 project_path,
             ]
         )
+        if self.get_project().get("advance", False):
+            check_call(
+                [
+                    "pcreate",
+                    "--overwrite",
+                    "--scaffold=advance_update",
+                    project_path,
+                ]
+            )
         os.remove(project_path)
 
         check_call(["git", "add", "--all", "CONST_create_template/"])
+
+        def changed_files() -> List[str]:
+            try:
+                status = [
+                    [s for s in status.strip().split(" ", maxsplit=1) if s]
+                    for status in check_git_status_output().strip().split("\n")
+                    if status
+                ]
+                return [
+                    file.strip().split(" ")[-1]
+                    for state, file in status
+                    if state == "M" and not file.strip().startswith("CONST_")
+                ]
+            except:  # pylint: disable=bare-except
+                self.print_step(
+                    step,
+                    error=True,
+                    message=f"Error while getting changed files:\n{check_git_status_output()}",
+                    prompt="Fix the error and run the step again:",
+                )
+                sys.exit(1)
+
+        changed_before_style = changed_files()
+
+        fix_style()
+
+        # Revert code style changes in the project otherwise we get an  error: does not match index
+        # on git apply.
+        changed_after_style = changed_files()
+        to_checkout = [file for file in changed_after_style if file not in changed_before_style]
+        if to_checkout:
+            subprocess.run(["git", "checkout"] + to_checkout, check=True)
+
+        check_call(["git", "add", "--all", "CONST_create_template/"])
         check_call(["git", "clean", "-Xf", "CONST_create_template/"])
         self.run_step(step + 1)
 
     @Step(5)
-    def step5(self, step):
+    def step5(self, step: int) -> None:
         if "managed_files" not in self.project:
+            unmanaged_files = "\n".join(["- " + e for e in self.project.get("unmanaged_files", [])])
             self.print_step(
                 step,
-                message="In the new version, we will also manage almost all the create "
-                "template files.\n"
-                "By default, files conforming to the following regex pattern will not be replaced:\n{}"
-                "Therefore, you should fill the 'managed_files' in you 'project.yaml' file with at least "
-                "`[]`.".format("\n".join(["- " + e for e in self.project.get("unmanaged_files", [])])),
+                message="In the new version, we will also manage almost all the create template files.\n"
+                "By default, files conforming to the following regex pattern will not be replaced:\n"
+                f"{unmanaged_files} Therefore, you should fill the 'managed_files' in you 'project.yaml' "
+                "file with at least `[]`.",
                 prompt="Fill it and run the step again:",
             )
         else:
             self.run_step(step + 1)
 
     @Step(6)
-    def step6(self, step):
+    def step6(self, step: int) -> None:
         task_to_do = False
-        for upgrade_file in self.get_upgrade("upgrade_files"):
+        for upgrade_file in cast(List[Dict[str, Any]], self.get_upgrade("upgrade_files")):
             action = upgrade_file["action"]
             if action == "remove":
                 task_to_do |= self.files_to_remove(upgrade_file)
             elif action == "move":
                 task_to_do |= self.files_to_move(upgrade_file)
 
         if task_to_do:
@@ -411,15 +466,15 @@
                 - pattern: <pattern>
                   no_touch: True
                 """,
             )
         else:
             self.run_step(step + 1)
 
-    def files_to_remove(self, element, prefix="", force=False):
+    def files_to_remove(self, element: Dict[str, Any], prefix: str = "", force: bool = False) -> bool:
         task_to_do = False
         for path in element["paths"]:
             file_ = os.path.join(prefix, path.format(package=self.project["project_package"]))
             if os.path.exists(file_):
                 managed = False
                 if not force:
                     for files in self.project["managed_files"]:
@@ -429,47 +484,46 @@
                         else:
                             pattern = files["pattern"]
                             no_touch = files.get("no_touch", False)
                         if re.match(pattern + "$", file_):
                             if no_touch:
                                 managed = True
                             else:
-                                # fmt: off
-                                print(colorize(
-                                    "The file '{}' has been removed but he is in the `managed_files` as '{}'."
-                                    .format(file_, pattern),
-                                    RED
-                                ))
-                                # fmt: on
+                                print(
+                                    colorize(
+                                        f"The file '{file_}' has been removed but he is in the "
+                                        f"`managed_files` as '{pattern}'.",
+                                        Color.RED,
+                                    )
+                                )
                                 task_to_do = True
                     for pattern in self.project.get("unmanaged_files", []):
                         if re.match(pattern + "$", file_):
-                            # fmt: off
-                            print(colorize(
-                                "The file '{}' has been removed but he is in the `unmanaged_files` as '{}'."
-                                .format(file_, pattern),
-                                YELLOW
-                            ))
-                            # fmt: on
+                            print(
+                                colorize(
+                                    f"The file '{file_}' has been removed but he is in the "
+                                    f"`unmanaged_files` as '{pattern}'.",
+                                    Color.YELLOW,
+                                )
+                            )
                             task_to_do = True
                 if not managed:
-                    print("The file '{}' is removed.".format(file_))
+                    print(f"The file '{file_}' is removed.")
                     if "version" in element and "from" in element:
                         print(
-                            "Was used in version {}, to be removed from version {}.".format(
-                                element["from"], element["version"]
-                            )
+                            f"Was used in version {element['from']}, to be removed from version "
+                            f"{element['version']}."
                         )
                     if os.path.isdir(file_):
                         shutil.rmtree(file_)
                     else:
                         os.remove(file_)
         return task_to_do
 
-    def files_to_move(self, element, prefix="", force=False):
+    def files_to_move(self, element: Dict[str, Any], prefix: str = "", force: bool = False) -> bool:
         task_to_do = False
         src = os.path.join(prefix, element["from"].format(package=self.project["project_package"]))
         dst = os.path.join(prefix, element["to"].format(package=self.project["project_package"]))
         if os.path.exists(src):
             managed = False
             type_ = "directory" if os.path.isdir(src) else "file"
             if not force:
@@ -482,143 +536,132 @@
                         no_touch = files.get("no_touch", False)
                     if re.match(pattern + "$", src):
                         if no_touch:
                             managed = True
                         else:
                             print(
                                 colorize(
-                                    "The {} '{}' is present in the `managed_files` as '{}', "
-                                    "but it has been moved to '{}'.".format(type_, src, pattern, dst),
-                                    RED,
+                                    f"The {type_} '{src}' is present in the `managed_files` as '{pattern}', "
+                                    f"but it has been moved to '{dst}'.",
+                                    Color.RED,
                                 )
                             )
                             task_to_do = True
                     if re.match(pattern + "$", dst):
                         print(
                             colorize(
-                                "The {} '{}' is present in the `managed_files` as '{}', "
-                                "but a file have been moved on it from '{}'.".format(
-                                    type_, dst, pattern, src
-                                ),
-                                RED,
+                                f"The {type_} '{dst}' is present in the `managed_files` as '{pattern}', "
+                                f"but a file have been moved on it from '{src}'.",
+                                Color.RED,
                             )
                         )
                         task_to_do = True
                 for pattern in self.project["unmanaged_files"]:
                     if re.match(pattern + "$", src):
                         print(
                             colorize(
-                                "The {} '{}' is present in the `unmanaged_files` as '{}', "
-                                "but it has been moved to '{}'.".format(type_, src, pattern, dst),
-                                YELLOW,
+                                f"The {type_} '{src}' is present in the `unmanaged_files` as '{pattern}', "
+                                f"but it has been moved to '{dst}'.",
+                                Color.YELLOW,
                             )
                         )
                         task_to_do = True
                     if re.match(pattern + "$", dst):
                         print(
                             colorize(
-                                "The {} '{}' is present in the `unmanaged_files` as '{}', "
-                                "but a file have been moved on it from '{}'.".format(
-                                    type_, dst, pattern, src
-                                ),
-                                YELLOW,
+                                f"The {type_} '{dst}' is present in the `unmanaged_files` as '{pattern}', "
+                                f"but a file have been moved on it from '{src}'.",
+                                Color.YELLOW,
                             )
                         )
                         task_to_do = True
             if not managed and os.path.exists(dst) and not element.get("override", False):
-                print(colorize("The destination '{}' already exists, ignoring.".format(dst), YELLOW))
+                print(colorize(f"The destination '{dst}' already exists, ignoring.", Color.YELLOW))
             elif not managed:
-                print("Move the {} '{}' to '{}'.".format(type_, src, dst))
+                print(f"Move the {type_} '{src}' to '{dst}'.")
                 if "version" in element:
-                    print("Needed from version {}.".format(element["version"]))
+                    print(f"Needed from version {element['version']}.")
                 if os.path.dirname(dst) != "":
                     os.makedirs(os.path.dirname(dst), exist_ok=True)
                 try:
                     check_call(["git", "mv", src, dst])
                 except Exception as exception:
-                    print("[Warning] Git move error: {}.".format(exception))
+                    print(f"[Warning] Git move error: {exception}.")
                     os.rename(src, dst)
         return task_to_do
 
     @Step(7)
-    def step7(self, step):
+    def step7(self, step: int) -> None:
         self.files_to_get(step)
         self.run_step(step + 1)
 
-    def is_managed(self, file_, files_to_get=False):
-        default_project_file = self.get_upgrade("default_project_file")
+    def is_managed(self, file_: str, files_to_get: bool = False) -> bool:
+        # Dictionary with:
+        # include: list of include regular expression
+        # exclude: list of exclude regular expression
+        default_project_file = cast(Dict[str, List[str]], self.get_upgrade("default_project_file"))
 
         # Managed means managed by the application owner, not the c2cupgrade
         managed = False
         if (
             not files_to_get
             or os.path.exists(file_)
             or not check_git_status_output(["CONST_create_template/" + file_]).startswith("A  ")
         ):
             for pattern in default_project_file["include"]:
                 if re.match(pattern + "$", file_):
-                    print("File '{}' included by migration config pattern '{}'.".format(file_, pattern))
+                    print(f"File '{file_}' included by migration config pattern '{pattern}'.")
                     managed = True
                     break
             if managed:
                 for pattern in default_project_file["exclude"]:
                     if re.match(pattern + "$", file_):
-                        print("File '{}' excluded by migration config pattern '{}'.".format(file_, pattern))
+                        print(f"File '{file_}' excluded by migration config pattern '{pattern}'.")
                         print("managed", file_, pattern)
                         managed = False
                         break
         else:
-            print("New file '{}'.".format(file_))
+            print(f"New file '{file_}'.")
 
         if not managed and not os.path.exists(file_):
             for pattern in self.get_upgrade("extra"):
                 if re.match(pattern + "$", file_):
-                    print("File '{}' is an extra by migration config pattern '{}'.".format(file_, pattern))
+                    print(f"File '{file_}' is an extra by migration config pattern '{pattern}'.")
                     managed = True
 
         if not managed:
             for files in self.project["managed_files"]:
                 if isinstance(files, str):
                     pattern = files
                 else:
                     pattern = files["pattern"]
                 if re.match(pattern + "$", file_):
-                    print(
-                        "File '{}' included by project config pattern `managed_files` '{}'.".format(
-                            file_, pattern
-                        )
-                    )
+                    print(f"File '{file_}' included by project config pattern `managed_files` '{pattern}'.")
                     print("managed", file_, pattern)
                     managed = True
                     break
         if managed:
             for pattern in self.project.get("unmanaged_files", []):
                 if re.match(pattern + "$", file_):
-                    print(
-                        "File '{}' excluded by project config pattern `unmanaged_files` '{}'.".format(
-                            file_, pattern
-                        )
-                    )
+                    print(f"File '{file_}' excluded by project config pattern `unmanaged_files` '{pattern}'.")
                     managed = False
                     break
 
         return managed
 
-    def files_to_get(self, step, pre=False):
+    def files_to_get(self, step: int, pre: bool = False) -> bool:
         error = False
         for root, _, files in os.walk("CONST_create_template"):
-            # fmt: off
-            root = root[len("CONST_create_template/"):]
-            # fmt: on
+            root = root[len("CONST_create_template/") :]
             for file_ in files:
                 destination = os.path.join(root, file_)
                 managed = self.is_managed(destination, True)
                 source = os.path.join("CONST_create_template", destination)
                 if not managed and (not os.path.exists(destination) or not filecmp.cmp(source, destination)):
-                    print(colorize("Get the file '{}' from the create template.".format(destination), GREEN))
+                    print(colorize(f"Get the file '{destination}' from the create template.", Color.GREEN))
                     if not pre:
                         if os.path.dirname(destination) != "":
                             os.makedirs(os.path.dirname(destination), exist_ok=True)
                         try:
                             shutil.copyfile(source, destination)
                             shutil.copymode(source, destination)
                         except PermissionError as exception:
@@ -629,25 +672,25 @@
                                     "All your project files should be owned by your user, "
                                     "current error:\n" + str(exception)
                                 ),
                                 prompt="Fix it and run the upgrade again:",
                             )
                             sys.exit(1)
                 elif managed:
-                    print("The file '{}' is managed by the project.".format(destination))
+                    print(f"The file '{destination}' is managed by the project.")
                 elif os.path.exists(destination) and filecmp.cmp(source, destination):
-                    print("The file '{}' does not change.".format(destination))
+                    print(f"The file '{destination}' does not change.")
                 else:
-                    print("Unknown stat for the file '{}'.".format(destination))
+                    print(f"Unknown stat for the file '{destination}'.")
                     sys.exit(2)
         return error
 
     @Step(8)
-    def step8(self, step):
-        with open("changelog.diff", "w") as diff_file:
+    def step8(self, step: int) -> None:
+        with open("changelog.diff", "w", encoding="utf8") as diff_file:
             check_call(["git", "diff", "--", "CONST_CHANGELOG.txt"], stdout=diff_file)
 
         from210 = False
         try:
             check_call(["grep", "--", "-Version 2.1.0", "changelog.diff"])
             from210 = True
         except subprocess.CalledProcessError:
@@ -660,38 +703,36 @@
         else:
             self.print_step(
                 step + 1,
                 message="Apply the manual migration steps based on what is in the CONST_CHANGELOG.txt "
                 "file (listed in the `changelog.diff` file).",
             )
 
-    def get_modified(self, status_path):
-        status = check_git_status_output([status_path])
-        status = [s for s in status.split("\n") if len(s) > 3]
+    def get_modified(self, status_path: str) -> List[str]:
+        status = check_git_status_output([status_path]).split("\n")
+        status = [s for s in status if len(s) > 3]
         status = [s[3:] for s in status if s[:3].strip() == "M"]
         for pattern in self.get_upgrade("no_diff"):
-            matcher = re.compile("CONST_create_template/{}$".format(pattern))
+            matcher = re.compile(f"CONST_create_template/{pattern}$")
             status = [s for s in status if not matcher.match(s)]
-        # fmt: off
-        status = [s for s in status if os.path.exists(s[len("CONST_create_template/"):])]
-        status = [s for s in status if not filecmp.cmp(s, s[len("CONST_create_template/"):])]
-        # fmt: on
+        status = [s for s in status if os.path.exists(s[len("CONST_create_template/") :])]
+        status = [s for s in status if not filecmp.cmp(s, s[len("CONST_create_template/") :])]
         return status
 
     @Step(9)
-    def step9(self, step):
+    def step9(self, step: int) -> None:
         if os.path.isfile("changelog.diff"):
             os.unlink("changelog.diff")
 
         status = self.get_modified(
-            "CONST_create_template/geoportal/{}_geoportal/static-ngeo".format(self.project["project_package"])
+            f"CONST_create_template/geoportal/{self.project['project_package']}_geoportal/static-ngeo"
         )
         status += ["CONST_create_template/geoportal/vars.yaml"]
 
-        with open("ngeo.diff", "w") as diff_file:
+        with open("ngeo.diff", "w", encoding="utf8") as diff_file:
             if status:
                 check_call(
                     ["git", "diff", "--relative=CONST_create_template", "--staged", "--"] + status,
                     stdout=diff_file,
                 )
 
         if os.path.getsize("ngeo.diff") == 0:
@@ -701,32 +742,30 @@
                 step + 1,
                 message="Manually apply the ngeo application changes as shown in the `ngeo.diff` file.\n"
                 + DIFF_NOTICE
                 + "\nNote that you can also apply them using: git apply --3way ngeo.diff",
             )
 
     @Step(10)
-    def step10(self, step):
+    def step10(self, step: int) -> None:
         if os.path.isfile("ngeo.diff"):
             os.unlink("ngeo.diff")
 
         status = self.get_modified("CONST_create_template")
         status = [
             s
             for s in status
             if not s.startswith(
-                "CONST_create_template/geoportal/{}_geoportal/static-ngeo/".format(
-                    self.project["project_package"]
-                )
+                f"CONST_create_template/geoportal/{self.project['project_package']}_geoportal/static-ngeo/"
             )
         ]
         status = [s for s in status if s != "CONST_create_template/geoportal/vars.yaml"]
 
         if status:
-            with open("create.diff", "w") as diff_file:
+            with open("create.diff", "w", encoding="utf8") as diff_file:
                 if status:
                     check_call(
                         ["git", "diff", "--relative=CONST_create_template", "--staged", "--"] + status,
                         stdout=diff_file,
                     )
 
             if os.path.getsize("create.diff") == 0:
@@ -739,86 +778,86 @@
                     + DIFF_NOTICE
                     + "\nNote that you can also apply them using: git apply --3way create.diff",
                 )
         else:
             self.run_step(step + 1)
 
     @Step(11)
-    def step11(self, step):
+    def step11(self, step: int) -> None:
         if os.path.isfile("create.diff"):
             os.unlink("create.diff")
 
         message = [
             "The upgrade is nearly done, now you should:",
             "- Build your application with `./upgrade --finalize [build arguments]`",
-            "- Test your application on '{}'.".format(self.project.get("application_url", "... missing ...")),
+            f"- Test your application on '{self.project.get('application_url', '... missing ...')}'.",
         ]
 
         if os.path.isfile(".upgrade.yaml"):
             os.unlink(".upgrade.yaml")
-        with open(".UPGRADE_SUCCESS", "w"):
+        with open(".UPGRADE_SUCCESS", "w", encoding="utf8"):
             pass
         self.print_step(step + 1, message="\n".join(message))
 
     @Step(12, file_marker=False)
-    def step12(self, step):
+    def step12(self, step: int) -> None:
         if os.path.isfile(".UPGRADE_SUCCESS"):
             os.unlink(".UPGRADE_SUCCESS")
         good, message = self.test_checkers()
         if good:
             self.run_step(step + 1)
         else:
             self.print_step(
                 step,
                 error=True,
                 message=message,
                 prompt="Correct the checker, then run the step again "
-                "(If you want to fix it later you can pass to the next step):",
+                "(If you want to fix it later you can pass to the next step:int):",
             )
             sys.exit(1)
 
     @Step(13, file_marker=False)
-    def step13(self, step):
+    def step13(self, step: int) -> None:
         # Required to remove from the Git stage the ignored file when we lunch the step again
         check_call(["git", "reset", "--mixed"])
 
         check_call(["git", "add", "--all"])
         check_call(["git", "status"])
 
         self.print_step(
             step + 1,
             message="We will commit all the above files!\n"
             "If there are some files which should not be committed, then you should "
-            "add them into the `.gitignore` file and launch upgrade {} again.".format(step),
+            f"add them into the `.gitignore` file and launch upgrade {step} again.",
             prompt="Then to commit your changes type:",
         )
 
     @Step(14, file_marker=False)
-    def step14(self, _):
+    def step14(self, _: int) -> None:
         if os.path.isfile(".UPGRADE_INSTRUCTIONS"):
             os.unlink(".UPGRADE_INSTRUCTIONS")
         check_call(
             [
                 "git",
                 "commit",
-                "--message=Upgrade to GeoMapFish {}".format(
-                    pkg_resources.get_distribution("c2cgeoportal_commons").version
-                ),
+                "--message=Upgrade to GeoMapFish "
+                f"{pkg_resources.get_distribution('c2cgeoportal_commons').version}",
             ]
         )
 
         print("")
         print(self.color_bar)
         print("")
-        print(colorize("Congratulations, your upgrade was successful.", GREEN))
+        print(colorize("Congratulations, your upgrade was successful.", Color.GREEN))
         print("")
         branch = check_output(["git", "rev-parse", "--abbrev-ref", "HEAD"]).decode("utf-8").strip()
         print("Now all your files are committed; you should do a git push:")
-        print("git push {0!s} {1!s}.".format(self.options.git_remote, branch))
+        print(f"git push {self.options.git_remote} {branch}.")
 
 
-def check_git_status_output(args=None):
+def check_git_status_output(args: Optional[List[str]] = None) -> str:
+    """Check if there is something that's not committed."""
     return check_output(["git", "status", "--short"] + (args if args is not None else [])).decode("utf-8")
 
 
 if __name__ == "__main__":
     main()
```

## c2cgeoportal_geoportal/scripts/create_demo_theme.py

```diff
@@ -1,10 +1,8 @@
-# -*- coding: utf-8 -*-
-
-# Copyright (c) 2011-2020, Camptocamp SA
+# Copyright (c) 2011-2021, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -23,28 +21,27 @@
 # (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 # SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 
 # The views and conclusions contained in the software and documentation are those
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
-# pylint: disable=no-member
-
 
 import argparse
 import logging
 
 import transaction
 
 from c2cgeoportal_geoportal.scripts import fill_arguments, get_appsettings, get_session
 
 LOG = logging.getLogger(__name__)
 
 
-def main():
+def main() -> None:
+    """Create and populate the database tables."""
     parser = argparse.ArgumentParser(description="Create and populate the database tables.")
     fill_arguments(parser)
     options = parser.parse_args()
     settings = get_appsettings(options)
 
     with transaction.manager:
         session = get_session(settings, transaction.manager)
```

## c2cgeoportal_geoportal/scripts/manage_users.py

```diff
@@ -1,10 +1,8 @@
-# -*- coding: utf-8 -*-
-
-# Copyright (c) 2011-2020, Camptocamp SA
+# Copyright (c) 2011-2023, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -23,120 +21,117 @@
 # (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 # SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 
 # The views and conclusions contained in the software and documentation are those
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
-# pylint: disable=no-member
-
 
 import argparse
 import sys
+from typing import cast
 
 import transaction
 
 from c2cgeoportal_geoportal.scripts import fill_arguments, get_appsettings, get_session
 
 
-def main():
-    """
-    Emergency user create and password reset script
-    example, reset toto password to foobar:
-    docker-compose exec geoportal manage-users --password=foobar toto
-    example, create user foo with password bar and role admin:
-    docker-compose exec geoportal manage-users --create --rolename=role_admin --password=bar foo
+def get_argparser() -> argparse.ArgumentParser:
+    """Get the argument parser for this script."""
 
-    to get the options list, do:
-    docker-compose exec geoportal manage-users --help
-    """
-
-    usage = """Usage: %prog [options] USERNAME
-
-Reset a user password.
+    usage = """Reset a user password.
 The username is used as password if the password is not provided with the corresponding option.
 User can be created if it does not exist yet."""
 
     parser = argparse.ArgumentParser(description=usage)
     fill_arguments(parser)
     parser.add_argument("--password", "-p", help="Set password (if not set, username is used as password")
     parser.add_argument(
         "--create", "-c", action="store_true", default=False, help="Create user if it does not already exist"
     )
     parser.add_argument(
         "--rolename", "-r", default="role_admin", help="The role name which must exist in the database"
     )
     parser.add_argument("--email", "-e", default=None, help="The user email")
     parser.add_argument("user", help="The user")
+    return parser
+
+
+def main() -> None:
+    """
+    Emergency user create and password reset script example.
+
+    Reset toto password to foobar: docker-compose
+    exec geoportal manage-users --password=foobar toto example, create user foo with password bar and role
+    admin: docker-compose exec geoportal manage-users --create --rolename=role_admin --password=bar foo.
+
+    to get the options list, do: docker-compose exec geoportal manage-users --help
+    """
+
+    parser = get_argparser()
     options = parser.parse_args()
     username = options.user
     settings = get_appsettings(options)
 
     with transaction.manager:
-        sess = get_session(settings, transaction.manager)
+        session = get_session(settings, transaction.manager)
 
         # Must be done only once we have loaded the project config
         from c2cgeoportal_commons.models.main import Role  # pylint: disable=import-outside-toplevel
         from c2cgeoportal_commons.models.static import User  # pylint: disable=import-outside-toplevel
 
         print("\n")
 
         # Check that user exists
-        query = sess.query(User).filter_by(username=username)
+        query = session.query(User).filter_by(username=username)
 
         result = query.count()
         if result == 0:
             if not options.create:
                 # If doesn't exist and no -c option, throw error
-                print("User {} does not exist in database".format(username))
+                print(f"User {username} does not exist in database")
                 sys.exit(1)
             else:
                 if options.password is None:
                     parser.error("The password is mandatory on user creation")
                 if options.email is None:
                     parser.error("The email is mandatory on user creation")
 
                 # Get roles
-                query_role = sess.query(Role).filter(Role.name == options.rolename)
+                query_role = session.query(Role).filter(Role.name == options.rolename)
 
                 if query_role.count() == 0:
                     # Role not found in db?
-                    print("Role matching {} does not exist in database".format(options.rolename))
+                    print(f"Role matching {options.rolename} does not exist in database")
                     sys.exit(1)
 
                 role = query_role.first()
 
                 user = User(
                     username=username,
-                    password=options.password,
-                    email=options.email,
+                    password=cast(str, options.password),
+                    email=cast(str, options.email),
                     settings_role=role,
                     roles=[role],
                 )
-                sess.add(user)
+                session.add(user)
 
-                print(
-                    (
-                        "User {} created with password {} and role {}".format(
-                            username, options.password, options.rolename
-                        )
-                    )
-                )
+                print(f"User {username} created with password {options.password} and role {options.rolename}")
 
         else:
             # If user exists (assuming username are unique)
             user = query.first()
 
             if options.password is not None:
-                print("Password set to: {}".format(options.password))
-                user.password = "{}".format(options.password)
+                print(f"Password set to: {options.password}")
+                user.password = f"{options.password}"
 
             if options.email is not None:
                 user.email = options.email
 
-            sess.add(user)
+            session.add(user)
 
-            print("Password reset for user {}".format(username))
+            print(f"Password reset for user {username}")
 
 
 if __name__ == "__main__":
     main()
```

## c2cgeoportal_geoportal/scripts/theme2fts.py

```diff
@@ -1,10 +1,8 @@
-# -*- coding: utf-8 -*-
-
-# Copyright (c) 2014-2020, Camptocamp SA
+# Copyright (c) 2014-2021, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -27,37 +25,43 @@
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
 
 import gettext
 import os
 import sys
-from argparse import ArgumentParser
-from typing import Any, Dict, List, Set
+from argparse import ArgumentParser, Namespace
+from typing import TYPE_CHECKING, Any, Dict, List, Optional, Set
 
+import pyramid.config
 import transaction
 from sqlalchemy import func
+from sqlalchemy.orm.session import Session
 
-from c2cgeoportal_geoportal.lib.bashcolor import RED, colorize
+from c2cgeoportal_geoportal.lib.bashcolor import Color, colorize
 from c2cgeoportal_geoportal.lib.fulltextsearch import Normalize
 from c2cgeoportal_geoportal.lib.i18n import LOCALE_PATH
 from c2cgeoportal_geoportal.scripts import fill_arguments, get_appsettings, get_session
 
+if TYPE_CHECKING:
+    import c2cgeoportal_commons.models.main
+
 
-def main():
+def get_argparser() -> ArgumentParser:
+    """Get the argument parser for this script."""
     parser = ArgumentParser(
         prog=sys.argv[0],
         add_help=True,
         description="Tool to fill the tsearch table (full-text search) from the theme information.",
     )
 
     parser.add_argument(
         "--locale-folder",
         default=LOCALE_PATH,
-        help="The folder where the locale files are stored (default to {})".format(LOCALE_PATH),
+        help=f"The folder where the locale files are stored (default is {LOCALE_PATH})",
     )
     parser.add_argument("--interfaces", action="append", help="the interfaces to export")
     parser.add_argument(
         "--exclude-interfaces",
         action="append",
         default=["api"],
         help="the interfaces to exclude (can't be used with --interfaces)",
@@ -81,64 +85,76 @@
         "--no-folders", action="store_false", dest="folders", help="do not import the folders (tree folders)"
     )
     parser.add_argument(
         "--no-layers", action="store_false", dest="layers", help="do not import the layers (tree leaf)"
     )
     parser.add_argument("--package", help="the application package")
     fill_arguments(parser)
-    options = parser.parse_args()
+    return parser
+
+
+def main() -> None:
+    """Run the command."""
+
+    options = get_argparser().parse_args()
     settings = get_appsettings(options)
 
     with transaction.manager:
         session = get_session(settings, transaction.manager)
 
         Import(session, settings, options)
 
 
 class Import:
-    def __init__(self, session, settings, options):
+    """
+    To import all the themes, layer groups and layers names into the full-text search table.
+
+    Done by interface and by language.
+    """
+
+    def __init__(self, session: Session, settings: pyramid.config.Configurator, options: Namespace):
         self.options = options
         self.imported: Set[Any] = set()
         package = settings["package"]
 
         self.fts_languages = settings["fulltextsearch"]["languages"]
         self.languages = settings["available_locale_names"]
         self.fts_normalizer = Normalize(settings["fulltextsearch"])
 
         fts_missing_langs = [lang for lang in self.languages if lang not in self.fts_languages]
         if fts_missing_langs:
-            msg = "Keys {} are missing in fulltextsearch languages configuration.".format(fts_missing_langs)
+            msg = f"Keys {fts_missing_langs} are missing in fulltextsearch languages configuration."
             if os.environ.get("IGNORE_I18N_ERRORS", "FALSE") == "TRUE":
-                print(colorize(msg, RED))
+                print(colorize(msg, Color.RED))
                 self.languages = [lang for lang in self.languages if lang in self.fts_languages]
             else:
                 raise KeyError(KeyError(msg))
 
         # must be done only once we have loaded the project config
         from c2cgeoportal_commons.models.main import (  # pylint: disable=import-outside-toplevel
             FullTextSearch,
             Interface,
             Role,
             Theme,
         )
 
         self.session = session
-        self.session.execute(FullTextSearch.__table__.delete().where(FullTextSearch.from_theme))  # noqa
+        self.session.execute(FullTextSearch.__table__.delete().where(FullTextSearch.from_theme))
 
         self._: Dict[str, gettext.NullTranslations] = {}
         for lang in self.languages:
             try:
                 self._[lang] = gettext.translation(
-                    "{}_geoportal-client".format(package),
+                    f"{package}_geoportal-client",
                     options.locale_folder.format(package=package),
                     [lang],
                 )
             except OSError as e:
                 self._[lang] = gettext.NullTranslations()
-                print("Warning: {} (language: {})".format(e, lang))
+                print(f"Warning: {e} (language: {lang})")
 
         query = self.session.query(Interface)
         if options.interfaces is not None:
             query = query.filter(Interface.name.in_(options.interfaces))
         else:
             query = query.filter(Interface.name.notin_(options.exclude_interfaces))
         self.interfaces = query.all()
@@ -152,15 +168,21 @@
         for theme in self.session.query(Theme).filter_by(public=True).all():
             self._add_theme(theme)
 
         for role in self.session.query(Role).all():
             for theme in self.session.query(Theme).all():
                 self._add_theme(theme, role)
 
-    def _add_fts(self, item, interface, action, role):
+    def _add_fts(
+        self,
+        item: "c2cgeoportal_commons.models.main.TreeItem",
+        interface: "c2cgeoportal_commons.models.main.Interface",
+        action: str,
+        role: Optional["c2cgeoportal_commons.models.main.Role"],
+    ) -> None:
         from c2cgeoportal_commons.models.main import FullTextSearch  # pylint: disable=import-outside-toplevel
 
         key = (
             item.name if self.options.name else item.id,
             interface.id,
             role.id if role is not None else None,
         )
@@ -173,42 +195,62 @@
                 fts.interface = interface
                 fts.lang = lang
                 fts.public = role is None
                 fts.ts = func.to_tsvector(
                     self.fts_languages[lang],
                     " ".join(
                         [self.fts_normalizer(self._[lang].gettext(item.name))]
-                        + [v.strip() for m in item.get_metadatas("searchAlias") for v in m.value.split(",")]
+                        + [v.strip() for m in item.get_metadata("searchAlias") for v in m.value.split(",")]
                     ),
                 )
                 fts.actions = [{"action": action, "data": item.name}]
                 fts.from_theme = True
                 self.session.add(fts)
 
-    def _add_theme(self, theme, role=None):
+    def _add_theme(
+        self,
+        theme: "c2cgeoportal_commons.models.main.Theme",
+        role: Optional["c2cgeoportal_commons.models.main.Role"] = None,
+    ) -> None:
         fill = False
         for interface in self.interfaces:
             if interface in theme.interfaces:
                 for child in theme.children:
                     fill = self._add_block(child, interface, role) or fill
 
                 if fill and self.options.themes:
                     if role is None:
                         self.public_theme[interface.id].append(theme.id)
 
                     if role is None or theme.id not in self.public_theme[interface.id]:
                         self._add_fts(theme, interface, "add_theme", role)
 
-    def _add_block(self, group, interface, role):
+    def _add_block(
+        self,
+        group: "c2cgeoportal_commons.models.main.LayerGroup",
+        interface: "c2cgeoportal_commons.models.main.Interface",
+        role: Optional["c2cgeoportal_commons.models.main.Role"],
+    ) -> bool:
         return self._add_group(group, interface, self.options.blocks, role)
 
-    def _add_folder(self, group, interface, role):
+    def _add_folder(
+        self,
+        group: "c2cgeoportal_commons.models.main.LayerGroup",
+        interface: "c2cgeoportal_commons.models.main.Interface",
+        role: Optional["c2cgeoportal_commons.models.main.Role"],
+    ) -> bool:
         return self._add_group(group, interface, self.options.folders, role)
 
-    def _add_group(self, group, interface, export, role):
+    def _add_group(
+        self,
+        group: "c2cgeoportal_commons.models.main.LayerGroup",
+        interface: "c2cgeoportal_commons.models.main.Interface",
+        export: bool,
+        role: Optional["c2cgeoportal_commons.models.main.Role"],
+    ) -> bool:
         from c2cgeoportal_commons.models.main import LayerGroup  # pylint: disable=import-outside-toplevel
 
         fill = False
         for child in group.children:
             if isinstance(child, LayerGroup):
                 fill = self._add_folder(child, interface, role) or fill
             else:
@@ -220,21 +262,28 @@
 
             if role is None or group.id not in self.public_group[interface.id]:
                 self._add_fts(group, interface, "add_group", role)
 
         return fill
 
     @staticmethod
-    def _layer_visible(layer, role):
+    def _layer_visible(
+        layer: "c2cgeoportal_commons.models.main.Layer", role: "c2cgeoportal_commons.models.main.Role"
+    ) -> bool:
         for restrictionarea in layer.restrictionareas:
             if role in restrictionarea.roles:
                 return True
         return False
 
-    def _add_layer(self, layer, interface, role):
+    def _add_layer(
+        self,
+        layer: "c2cgeoportal_commons.models.main.Layer",
+        interface: "c2cgeoportal_commons.models.main.Interface",
+        role: Optional["c2cgeoportal_commons.models.main.Role"],
+    ) -> bool:
         if role is None:
             fill = layer.public and interface in layer.interfaces
         else:
             fill = interface in layer.interfaces and not layer.public and self._layer_visible(layer, role)
 
         if fill and self.options.layers:
             self._add_fts(layer, interface, "add_layer", role)
```

## c2cgeoportal_geoportal/scripts/urllogin.py

```diff
@@ -1,9 +1,7 @@
-# -*- coding: utf-8 -*-
-
 # Copyright (c) 2012-2021, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
@@ -28,46 +26,56 @@
 # either expressed or implied, of the FreeBSD Project.
 
 import argparse
 import binascii
 import json
 import sys
 import time
+from typing import cast
 
 from Crypto.Cipher import AES  # nosec
+from Crypto.Cipher.ChaCha20_Poly1305 import ChaCha20Poly1305Cipher  # nosec
 
 from c2cgeoportal_geoportal.scripts import fill_arguments, get_appsettings
 
 
-def create_token(aeskey, user, password, valid):
+def create_token(aeskey: str, user: str, password: str, valid: bool) -> str:
+    """Create the authenticated URL token."""
     auth = {"u": user, "p": password, "t": int(time.time()) + valid * 3600 * 24}
 
     if aeskey is None:
         print("urllogin is not configured")
         sys.exit(1)
-    cipher = AES.new(aeskey.encode("ascii"), AES.MODE_EAX)
+    cipher = cast(ChaCha20Poly1305Cipher, AES.new(aeskey.encode("ascii"), AES.MODE_EAX))
     data = json.dumps(auth)
     mod_len = len(data) % 16
     if mod_len != 0:
         data += "".join([" " for i in range(16 - mod_len)])
-    ciphertext, tag = cipher.encrypt_and_digest(data.encode("utf-8"))  # type: ignore
-    return binascii.hexlify(cipher.nonce + tag + ciphertext).decode("ascii")  # type: ignore
+    ciphertext, tag = cipher.encrypt_and_digest(data.encode("utf-8"))
+    return binascii.hexlify(cipher.nonce + tag + ciphertext).decode("ascii")
+
 
+def get_argparser() -> argparse.ArgumentParser:
+    """Get the argument parser for this script."""
 
-def main():
     parser = argparse.ArgumentParser(description="Generate an auth token")
     fill_arguments(parser)
     parser.add_argument("user", help="The username")
     parser.add_argument("password", help="The password")
     parser.add_argument("valid", type=int, default=1, nargs="?", help="Is valid for, in days")
+    return parser
+
+
+def main() -> None:
+    """Run the command."""
 
-    args = parser.parse_args()
+    args = get_argparser().parse_args()
     settings = get_appsettings(args)
     urllogin = settings.get("urllogin", {})
     aeskey = urllogin.get("aes_key")
     auth_enc = create_token(aeskey, args.user, args.password, args.valid)
 
-    print(("Use: auth={}".format(auth_enc)))
+    print(f"Use: auth={auth_enc}")
 
 
 if __name__ == "__main__":
     main()
```

## c2cgeoportal_geoportal/templates/login.html

```diff
@@ -1,86 +1,90 @@
-<!DOCTYPE HTML>
+<!DOCTYPE html>
 <html lang="${lang}">
-    <head>
-        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
-        <meta name="Content-Language" content="${lang}" />
-        <title>${_('Login to Geoportal Application')}</title>
-        <style>
-            body {
-                background: #444444;
-                font-family: Helvetica, Arial, sans-serif;
-            }
-            * {
-                padding: 0;
-                margin: 0;
-            }
-            div#content {
-                background: #F5F5EF;
-                padding: 20px 30px;
-                width: 330px;
-                margin: 100px auto auto auto;
-                -webkit-border-radius: 10px;
-                border-radius: 10px;
-            }
-            td.field {
-                padding-top: 20px;
-            }
-            td.field p {
-                font-weight: bold;
-                color: #444444;
-                font-size: 80%;
-                margin-bottom: 3px;
-            }
-            td.field input {
-                -webkit-border-radius: 2px;
-                border-radius: 2px;
-                border: solid 1px #444444;
-                padding: 3px 6px;
-                font-size: 110%;
-                width: 250px;
-            }
-            td.buttons {
-                padding-top: 25px;
-                padding-bottom: 20px;
-                text-align: right;
-            }
-            td.buttons input {
-                padding: 1px 6px;
-                font-weight: bold;
-                color: #444444;
-            }
-        </style>
-    </head>
-    <body>
-        <div id="content">
-            <form method="POST" id="loginForm" action="${request.route_url('login', _query=login_params)}">
-                <table style="margin-left: auto; margin-right: auto;">
-                    <tbody>
-                        <tr>
-                            <td class="field"><p>
-                                <label for="email">${_('Username')}</label></p>
-                                <input id="login" name="login" type="text">
-                            </td>
-                        </tr>
-                        <tr>
-                            <td class="field"><p>
-                                <label for="password">${_('Password')}</label></p>
-                                <input id="password" name="password" type="password">
-                            </td>
-                        </tr>
-% if two_fa:
-                        <tr>
-                            <td class="field">
-                                <p><label for="otp">${_('Authentication code')}</label></p>
-                                <input id="otp" name="otp" type="text" autocomplete="off">
-                            </td>
-                        </tr>
-% endif
-                        <tr>
-                            <td class="buttons"><input tabindex="4" value="${_('Login')}" type="submit"></td>
-                        </tr>
-                    </tbody>
-                </table>
-            </form>
-        </div>
-    </body>
+  <head>
+    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
+    <meta name="Content-Language" content="${lang}" />
+    <title>${_('Login to Geoportal Application')}</title>
+    <style>
+      body {
+        background: #444444;
+        font-family: Helvetica, Arial, sans-serif;
+      }
+      * {
+        padding: 0;
+        margin: 0;
+      }
+      div#content {
+        background: #f5f5ef;
+        padding: 20px 30px;
+        width: 330px;
+        margin: 100px auto auto auto;
+        -webkit-border-radius: 10px;
+        border-radius: 10px;
+      }
+      td.field {
+        padding-top: 20px;
+      }
+      td.field p {
+        font-weight: bold;
+        color: #444444;
+        font-size: 80%;
+        margin-bottom: 3px;
+      }
+      td.field input {
+        -webkit-border-radius: 2px;
+        border-radius: 2px;
+        border: solid 1px #444444;
+        padding: 3px 6px;
+        font-size: 110%;
+        width: 250px;
+      }
+      td.buttons {
+        padding-top: 25px;
+        padding-bottom: 20px;
+        text-align: right;
+      }
+      td.buttons input {
+        padding: 1px 6px;
+        font-weight: bold;
+        color: #444444;
+      }
+    </style>
+  </head>
+  <body>
+    <div id="content">
+      <form method="POST" id="loginForm" action="${request.route_url('login', _query=login_params)}">
+        <table style="margin-left: auto; margin-right: auto">
+          <tbody>
+            <tr>
+              <td class="field">
+                <p>
+                  <label for="email">${_('Username')}</label>
+                </p>
+                <input id="login" name="login" type="text" />
+              </td>
+            </tr>
+            <tr>
+              <td class="field">
+                <p>
+                  <label for="password">${_('Password')}</label>
+                </p>
+                <input id="password" name="password" type="password" />
+              </td>
+            </tr>
+            % if two_fa:
+            <tr>
+              <td class="field">
+                <p><label for="otp">${_('Authentication code')}</label></p>
+                <input id="otp" name="otp" type="text" autocomplete="off" />
+              </td>
+            </tr>
+            % endif
+            <tr>
+              <td class="buttons"><input tabindex="4" value="${_('Login')}" type="submit" /></td>
+            </tr>
+          </tbody>
+        </table>
+      </form>
+    </div>
+  </body>
 </html>
```

## c2cgeoportal_geoportal/templates/notlogin.html

```diff
@@ -1,62 +1,62 @@
 <!DOCTYPE html>
 <html lang="${lang}">
-    <head>
-        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
-        <meta name="Content-Language" content="${lang}" />
-        <title>${_('Login to Geoportal Application')}</title>
-        <style>
-            body {
-                background: #444444;
-                font-family: Helvetica, Arial, sans-serif;
-            }
-            * {
-                padding: 0;
-                margin: 0;
-            }
-            div#content {
-                background: #f5f5ef;
-                padding: 20px 30px;
-                width: 330px;
-                margin: 100px auto auto auto;
-                -webkit-border-radius: 10px;
-                border-radius: 10px;
-            }
-            td.field {
-                padding-top: 20px;
-            }
-            td.field p {
-                font-weight: bold;
-                color: #444444;
-                font-size: 80%;
-                margin-bottom: 3px;
-            }
-            td.field input {
-                -webkit-border-radius: 2px;
-                border-radius: 2px;
-                border: solid 1px #444444;
-                padding: 3px 6px;
-                font-size: 110%;
-                width: 250px;
-            }
-            td.buttons {
-                padding-top: 25px;
-                padding-bottom: 20px;
-                text-align: right;
-            }
-            td.buttons input {
-                padding: 1px 6px;
-                font-weight: bold;
-                color: #444444;
-            }
-        </style>
-    </head>
-    <body>
-        <div id="content">
-            <p>
-                ${_('The user is not correctly initialized you should login in the main application and try '
-                'again.')}
-            </p>
-            <p><a href="${request.route_url('base')}">${_('Main application')}</a></p>
-        </div>
-    </body>
+  <head>
+    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
+    <meta name="Content-Language" content="${lang}" />
+    <title>${_('Login to Geoportal Application')}</title>
+    <style>
+      body {
+        background: #444444;
+        font-family: Helvetica, Arial, sans-serif;
+      }
+      * {
+        padding: 0;
+        margin: 0;
+      }
+      div#content {
+        background: #f5f5ef;
+        padding: 20px 30px;
+        width: 330px;
+        margin: 100px auto auto auto;
+        -webkit-border-radius: 10px;
+        border-radius: 10px;
+      }
+      td.field {
+        padding-top: 20px;
+      }
+      td.field p {
+        font-weight: bold;
+        color: #444444;
+        font-size: 80%;
+        margin-bottom: 3px;
+      }
+      td.field input {
+        -webkit-border-radius: 2px;
+        border-radius: 2px;
+        border: solid 1px #444444;
+        padding: 3px 6px;
+        font-size: 110%;
+        width: 250px;
+      }
+      td.buttons {
+        padding-top: 25px;
+        padding-bottom: 20px;
+        text-align: right;
+      }
+      td.buttons input {
+        padding: 1px 6px;
+        font-weight: bold;
+        color: #444444;
+      }
+    </style>
+  </head>
+  <body>
+    <div id="content">
+      <p>
+        ${_('The user is not correctly initialized you should login in the main application and try '
+        'again.')}
+      </p>
+      <p><a href="${request.route_url('base')}">${_('Main application')}</a></p>
+    </div>
+  </body>
 </html>
```

## c2cgeoportal_geoportal/templates/testi18n.html

```diff
@@ -1,23 +1,24 @@
 00000000: 3c3f 786d 6c20 7665 7273 696f 6e3d 2231  <?xml version="1
 00000010: 2e30 2220 656e 636f 6469 6e67 3d22 5554  .0" encoding="UT
 00000020: 462d 3822 3f3e 0a3c 2144 4f43 5459 5045  F-8"?>.<!DOCTYPE
-00000030: 2068 746d 6c0a 2020 5055 424c 4943 2022   html.  PUBLIC "
-00000040: 2d2f 2f57 3343 2f2f 4454 4420 5848 544d  -//W3C//DTD XHTM
-00000050: 4c20 312e 3020 5472 616e 7369 7469 6f6e  L 1.0 Transition
-00000060: 616c 2f2f 454e 220a 2020 2268 7474 703a  al//EN".  "http:
-00000070: 2f2f 7777 772e 7733 2e6f 7267 2f54 522f  //www.w3.org/TR/
-00000080: 7868 746d 6c31 2f44 5444 2f78 6874 6d6c  xhtml1/DTD/xhtml
-00000090: 312d 7472 616e 7369 7469 6f6e 616c 2e64  1-transitional.d
-000000a0: 7464 223e 0a3c 6874 6d6c 2078 6d6c 6e73  td">.<html xmlns
-000000b0: 3d22 6874 7470 3a2f 2f77 7777 2e77 332e  ="http://www.w3.
-000000c0: 6f72 672f 3139 3939 2f78 6874 6d6c 223e  org/1999/xhtml">
-000000d0: 0a3c 6865 6164 3e0a 2020 2020 3c6d 6574  .<head>.    <met
-000000e0: 6120 6368 6172 7365 743d 2255 5446 2d38  a charset="UTF-8
-000000f0: 223e 0a20 2020 203c 7469 746c 653e 247b  ">.    <title>${
-00000100: 7469 746c 657d 3c2f 7469 746c 653e 0a3c  title}</title>.<
-00000110: 2f68 6561 643e 0a3c 626f 6479 3e0a 2020  /head>.<body>.  
-00000120: 2020 3c68 313e 247b 7469 746c 657d 3c2f    <h1>${title}</
-00000130: 6831 3e0a 2020 2020 3c70 3e24 7b5f 2827  h1>.    <p>${_('
-00000140: 6d79 2074 7261 6e73 6c61 7469 6f6e 2074  my translation t
-00000150: 6573 7427 297d 3c2f 703e 0a3c 2f62 6f64  est')}</p>.</bod
-00000160: 793e 0a3c 2f68 746d 6c3e 0a              y>.</html>.
+00000030: 2068 746d 6c20 5055 424c 4943 2022 2d2f   html PUBLIC "-/
+00000040: 2f57 3343 2f2f 4454 4420 5848 544d 4c20  /W3C//DTD XHTML 
+00000050: 312e 3020 5472 616e 7369 7469 6f6e 616c  1.0 Transitional
+00000060: 2f2f 454e 2220 2268 7474 703a 2f2f 7777  //EN" "http://ww
+00000070: 772e 7733 2e6f 7267 2f54 522f 7868 746d  w.w3.org/TR/xhtm
+00000080: 6c31 2f44 5444 2f78 6874 6d6c 312d 7472  l1/DTD/xhtml1-tr
+00000090: 616e 7369 7469 6f6e 616c 2e64 7464 223e  ansitional.dtd">
+000000a0: 0a3c 6874 6d6c 2078 6d6c 6e73 3d22 6874  .<html xmlns="ht
+000000b0: 7470 3a2f 2f77 7777 2e77 332e 6f72 672f  tp://www.w3.org/
+000000c0: 3139 3939 2f78 6874 6d6c 223e 0a20 203c  1999/xhtml">.  <
+000000d0: 6865 6164 3e0a 2020 2020 3c6d 6574 6120  head>.    <meta 
+000000e0: 6368 6172 7365 743d 2255 5446 2d38 2220  charset="UTF-8" 
+000000f0: 2f3e 0a20 2020 203c 7469 746c 653e 247b  />.    <title>${
+00000100: 7469 746c 657d 3c2f 7469 746c 653e 0a20  title}</title>. 
+00000110: 203c 2f68 6561 643e 0a20 203c 626f 6479   </head>.  <body
+00000120: 3e0a 2020 2020 3c68 313e 247b 7469 746c  >.    <h1>${titl
+00000130: 657d 3c2f 6831 3e0a 2020 2020 3c70 3e24  e}</h1>.    <p>$
+00000140: 7b5f 2827 6d79 2074 7261 6e73 6c61 7469  {_('my translati
+00000150: 6f6e 2074 6573 7427 297d 3c2f 703e 0a20  on test')}</p>. 
+00000160: 203c 2f62 6f64 793e 0a3c 2f68 746d 6c3e   </body>.</html>
+00000170: 0a                                       .
```

## c2cgeoportal_geoportal/views/__init__.py

```diff
@@ -1,10 +1,10 @@
 # -*- coding: utf-8 -*-
 
-# Copyright (c) 2011-2020, Camptocamp SA
+# Copyright (c) 2011-2021, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -23,21 +23,40 @@
 # (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 # SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 
 # The views and conclusions contained in the software and documentation are those
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
+from typing import Dict, List
 
+import pyramid.config
+import pyramid.request
 from pyramid.httpexceptions import HTTPFound
 
 
-def add_ending_slash(request):
+def add_ending_slash(request: pyramid.request.Request) -> HTTPFound:
+    """Add an ending slash view."""
     return HTTPFound(location=request.path + "/")
 
 
-def add_redirect(config, name, from_, to):
-    def redirect_view(request):
+def add_redirect(config: pyramid.config.Configurator, name: str, from_: str, to: str) -> None:
+    """Add a redirect view."""
+
+    def redirect_view(request: pyramid.request.Request) -> HTTPFound:
         return HTTPFound(location=request.route_url(to))
 
     config.add_route(name, from_, request_method="GET")
     config.add_view(redirect_view, route_name=name)
+
+
+def restrict_headers(headers: Dict[str, str], whitelist: List[str], blacklist: List[str]) -> Dict[str, str]:
+    """
+    Filter headers with a whitelist then a blacklist.
+
+    Some default pyramid headers will be added back by pyramid.
+    """
+    if len(whitelist) > 0:
+        headers = {key: value for key, value in headers.items() if key in whitelist}
+
+    headers = {key: value for key, value in headers.items() if key not in blacklist}
+    return headers
```

## c2cgeoportal_geoportal/views/dev.py

```diff
@@ -1,10 +1,8 @@
-# -*- coding: utf-8 -*-
-
-# Copyright (c) 2011-2020, Camptocamp SA
+# Copyright (c) 2011-2021, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -27,29 +25,33 @@
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
 
 import logging
 import re
 
+import pyramid.request
+import pyramid.response
 from pyramid.httpexceptions import HTTPFound
 from pyramid.view import view_config
 
+from c2cgeoportal_commons.lib.url import Url
 from c2cgeoportal_geoportal.views.proxy import Proxy
 
 logger = logging.getLogger(__name__)
 
 
 class Dev(Proxy):
+    """All the development views."""
 
     THEME_RE = re.compile(r"/theme/.*$")
 
-    def __init__(self, request):
+    def __init__(self, request: pyramid.request.Request):
         super().__init__(request)
         self.dev_url = self.request.registry.settings["devserver_url"]
 
-    @view_config(route_name="dev")
-    def dev(self):
+    @view_config(route_name="dev")  # type: ignore
+    def dev(self) -> pyramid.response.Response:
         path = self.THEME_RE.sub("", self.request.path_info)
         if self.request.path.endswith("/dynamic.js"):
             return HTTPFound(location=self.request.route_url("dynamic", _query=self.request.params))
-        return self._proxy_response("dev", "{}/{}".format(self.dev_url.rstrip("/"), path.lstrip("/")))
+        return self._proxy_response("dev", Url(f"{self.dev_url.rstrip('/')}/{path.lstrip('/')}"))
```

## c2cgeoportal_geoportal/views/dynamic.py

```diff
@@ -1,9 +1,7 @@
-# -*- coding: utf-8 -*-
-
 # Copyright (c) 2018-2021, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
@@ -26,51 +24,74 @@
 # The views and conclusions contained in the software and documentation are those
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
 
 import re
 import urllib.parse
-from typing import Dict, List, Union
+from typing import Any, Dict, List, Union, cast
 
+import pyramid.request
 from pyramid.httpexceptions import HTTPNotFound
 from pyramid.view import view_config
 from sqlalchemy import func
 
 from c2cgeoportal_commons import models
 from c2cgeoportal_commons.models import main
 from c2cgeoportal_geoportal.lib.cacheversion import get_cache_version
-from c2cgeoportal_geoportal.lib.caching import NO_CACHE, get_region, set_common_headers
+from c2cgeoportal_geoportal.lib.caching import get_region
+from c2cgeoportal_geoportal.lib.common_headers import Cache, set_common_headers
 
 CACHE_REGION = get_region("std")
 
 
 class DynamicView:
-    def __init__(self, request):
+    """The dynamic vies that provide the configuration of the client application."""
+
+    def __init__(self, request: pyramid.request.Request):
         self.request = request
         self.settings = request.registry.settings
         self.interfaces_config = self.settings["interfaces_config"]
 
-    def get(self, value, interface):
-        return self.interfaces_config.get(interface, {}).get(value, {})
+    def get(self, value: Dict[str, Any], interface: str) -> Dict[str, Any]:
+        return cast(Dict[str, Any], self.interfaces_config.get(interface, {}).get(value, {}))
 
-    @CACHE_REGION.cache_on_arguments()
-    def _fulltextsearch_groups(self):  # pylint: disable=no-self-use
+    @CACHE_REGION.cache_on_arguments()  # type: ignore
+    def _fulltextsearch_groups(self) -> List[str]:  # pylint: disable=no-self-use
         return [
             group[0]
             for group in models.DBSession.query(func.distinct(main.FullTextSearch.layer_name))
             .filter(main.FullTextSearch.layer_name.isnot(None))
             .all()
         ]
 
-    def _interface(self, interface_config, interface_name, dynamic):
+    def _interface(
+        self,
+        interface_config: Dict[str, Any],
+        interface_name: str,
+        original_interface_name: str,
+        dynamic: Dict[str, Any],
+    ) -> Dict[str, Any]:
+        """
+        Get the interface configuration.
+
+        Arguments:
+
+            interface_config: Current interface configuration
+            interface_name: Interface name (we use in the configuration)
+            original_interface_name: Original interface name (directly for the query string)
+            dynamic: The values that's dynamically generated
+        """
 
         if "extends" in interface_config:
             constants = self._interface(
-                self.interfaces_config[interface_config["extends"]], interface_name, dynamic
+                self.interfaces_config[interface_config["extends"]],
+                interface_name,
+                original_interface_name,
+                dynamic,
             )
         else:
             constants = {}
 
         constants.update(interface_config.get("constants", {}))
         constants.update(
             {
@@ -83,48 +104,63 @@
             {
                 name: self.request.static_url(static_["name"]) + static_.get("append", "")
                 for name, static_ in interface_config.get("static", {}).items()
             }
         )
 
         for constant, config in interface_config.get("routes", {}).items():
-            route_name = interface_name if config.get("currentInterface", False) else config["name"]
+            route_name = original_interface_name if config.get("currentInterface", False) else config["name"]
             params: Dict[str, str] = {}
             params.update(config.get("params", {}))
             for name, dyn in config.get("dynamic_params", {}).items():
                 params[name] = dynamic[dyn]
             constants[constant] = self.request.route_url(
                 route_name, *config.get("elements", []), _query=params, **config.get("kw", {})
             )
 
         return constants
 
-    @view_config(route_name="dynamic", renderer="json")
-    def dynamic(self):
-        interface_name = self.request.get_organization_interface(self.request.params.get("interface"))
+    @view_config(route_name="dynamic", renderer="json")  # type: ignore
+    def dynamic(self) -> Dict[str, Any]:
+        original_interface_name = self.request.params.get("interface")
+        interface_name = self.request.get_organization_interface(original_interface_name)
 
         if interface_name not in self.interfaces_config:
             raise HTTPNotFound("Interface {} doesn't exists in the 'interfaces_config'.")
 
         interface_config = self.interfaces_config[interface_name]
+        lang_urls_suffix = interface_config.get("lang_urls_suffix", "")
+
+        i18next_configuration = self.settings.get("i18next", {})
+        i18next_configuration.setdefault("backend", {})
+        if "loadPath" not in i18next_configuration["backend"]:
+            path: List[str] = [
+                self.request.route_url("base").rstrip("/"),
+                "static-{{ns}}",
+                get_cache_version(),
+                "locales",
+                "{{lng}}.json",
+            ]
+            i18next_configuration["backend"]["loadPath"] = "/".join(path)
 
         dynamic = {
             "interface": interface_name,
             "cache_version": get_cache_version(),
             "two_factor": self.request.registry.settings.get("authentication", {}).get("two_factor", False),
             "lang_urls": {
                 lang: self.request.static_url(
-                    "/etc/geomapfish/static/{lang}.json".format(lang=lang),
+                    f"/etc/geomapfish/static/{lang}{lang_urls_suffix}.json",
                 )
                 for lang in self.request.registry.settings["available_locale_names"]
             },
+            "i18next_configuration": i18next_configuration,
             "fulltextsearch_groups": self._fulltextsearch_groups(),
         }
 
-        constants = self._interface(interface_config, interface_name, dynamic)
+        constants = self._interface(interface_config, interface_name, original_interface_name, dynamic)
 
         do_redirect = False
         url = None
         if "redirect_interface" in interface_config:
             no_redirect_query: Dict[str, Union[str, List[str]]] = {"no_redirect": "t"}
             if "query" in self.request.params:
                 query = urllib.parse.parse_qs(self.request.params["query"][1:], keep_blank_values=True)
@@ -155,9 +191,9 @@
                 constants["redirectUrl"] = ""
             else:
                 if interface_config.get("do_redirect", False):
                     do_redirect = True
                 else:
                     constants["redirectUrl"] = no_redirect_url
 
-        set_common_headers(self.request, "dynamic", NO_CACHE)
+        set_common_headers(self.request, "dynamic", Cache.PUBLIC_NO)
         return {"constants": constants, "doRedirect": do_redirect, "redirectUrl": url}
```

## c2cgeoportal_geoportal/views/entry.py

```diff
@@ -1,10 +1,8 @@
-# -*- coding: utf-8 -*-
-
-# Copyright (c) 2011-2020, Camptocamp SA
+# Copyright (c) 2011-2023, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -24,56 +22,127 @@
 # SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 
 # The views and conclusions contained in the software and documentation are those
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
 
+import glob
 import logging
-import xml.dom.minidom  # noqa # pylint: disable=unused-import
-from typing import Dict, Set, Tuple  # noqa # pylint: disable=unused-import
+import os
+from typing import Any, Dict, List, Optional
 
+import pyramid.request
 from pyramid.i18n import TranslationStringFactory
 from pyramid.view import view_config
 
-from c2cgeoportal_geoportal.lib.caching import NO_CACHE, PUBLIC_CACHE, set_common_headers
+from c2cgeoportal_geoportal.lib.caching import get_region
+from c2cgeoportal_geoportal.lib.common_headers import Cache, set_common_headers
 
 _ = TranslationStringFactory("c2cgeoportal")
 LOG = logging.getLogger(__name__)
+CACHE_REGION = get_region("std")
 
 
 class Entry:
-    def __init__(self, request):
+    """All the entry points views."""
+
+    def __init__(self, request: pyramid.request.Request):
         self.request = request
 
-    @view_config(route_name="testi18n", renderer="testi18n.html")
-    def testi18n(self):  # pragma: no cover
+    @view_config(route_name="testi18n", renderer="testi18n.html")  # type: ignore
+    def testi18n(self) -> Dict[str, Any]:
         _ = self.request.translate
         return {"title": _("title i18n")}
 
-    def get_ngeo_index_vars(self):
-        set_common_headers(self.request, "index", NO_CACHE, content_type="text/html")
-        return {}
-
-    def apijs(self):
-        set_common_headers(self.request, "api", PUBLIC_CACHE, content_type="application/javascript")
-        return {}
-
-    def favicon(self):
-        set_common_headers(self.request, "index", NO_CACHE, content_type="image/vnd.microsoft.icon")
-        return {}
-
-    def robot_txt(self):
-        set_common_headers(self.request, "index", NO_CACHE, content_type="text/plain")
-        return {}
-
-    def apijsmap(self):
-        set_common_headers(self.request, "api", NO_CACHE, content_type="application/octet-stream")
-        return {}
-
-    def apicss(self):
-        set_common_headers(self.request, "api", PUBLIC_CACHE, content_type="text/css")
-        return {}
-
-    def apihelp(self):
-        set_common_headers(self.request, "apihelp", NO_CACHE)
-        return {}
+    def get_ngeo_index_vars(self) -> Dict[str, Any]:
+        set_common_headers(self.request, "index", Cache.PUBLIC_NO, content_type="text/html")
+        # Force urllogin to be converted to cookie when requesting the main HTML page
+        self.request.user  # noqa
+        return {}
+
+    @staticmethod
+    @CACHE_REGION.cache_on_arguments()  # type: ignore
+    def get_apijs(api_name: Optional[str]) -> str:
+        with open("/etc/static-ngeo/api.js", encoding="utf-8") as api_file:
+            api = api_file.read().split("\n")
+        sourcemap = api.pop(-1)
+        if api_name:
+            api += [
+                f"if (window.{api_name} === undefined && window.geomapfishapp) {{",
+                f"  window.{api_name} = window.geomapfishapp;",
+                "}",
+            ]
+        api.append(sourcemap)
+
+        return "\n".join(api)
+
+    @view_config(route_name="apijs")  # type: ignore
+    def apijs(self) -> pyramid.response.Response:
+        self.request.response.text = self.get_apijs(self.request.registry.settings["api"].get("name"))
+        set_common_headers(self.request, "api", Cache.PUBLIC, content_type="application/javascript")
+        return self.request.response
+
+    def favicon(self) -> Dict[str, Any]:
+        set_common_headers(self.request, "index", Cache.PUBLIC, content_type="image/vnd.microsoft.icon")
+        return {}
+
+    def robot_txt(self) -> Dict[str, Any]:
+        set_common_headers(self.request, "index", Cache.PUBLIC, content_type="text/plain")
+        return {}
+
+    def apijsmap(self) -> Dict[str, Any]:
+        set_common_headers(self.request, "api", Cache.PUBLIC, content_type="application/octet-stream")
+        return {}
+
+    def apicss(self) -> Dict[str, Any]:
+        set_common_headers(self.request, "api", Cache.PUBLIC, content_type="text/css")
+        return {}
+
+    def apihelp(self) -> Dict[str, Any]:
+        set_common_headers(self.request, "apihelp", Cache.PUBLIC)
+        return {}
+
+
+def _get_ngeo_resources(pattern: str) -> List[str]:
+    """Return the list of ngeo dist files matching the pattern."""
+    results = glob.glob(f"/opt/c2cgeoportal/geoportal/node_modules/ngeo/dist/{pattern}")
+    if not results:
+        LOG.error(
+            "No file found for pattern %s, in: [%s]",
+            pattern,
+            ", ".join(os.listdir("/opt/c2cgeoportal/geoportal/node_modules/ngeo/dist/")),
+        )
+    return results
+
+
+def canvas_view(request: pyramid.request.Request, interface_config: Dict[str, Any]) -> Dict[str, Any]:
+    """Get view used as entry point of a canvas interface."""
+
+    js_files = _get_ngeo_resources(f"{interface_config.get('layout', interface_config['name'])}*.js")
+    css_files = _get_ngeo_resources(f"{interface_config.get('layout', interface_config['name'])}*.css")
+    css = "\n    ".join(
+        [
+            f'<link href="{request.static_url(css)}" rel="stylesheet" crossorigin="anonymous">'
+            for css in css_files
+        ]
+    )
+
+    set_common_headers(request, "index", Cache.PUBLIC_NO, content_type="text/html")
+
+    spinner = ""
+    spinner_filenames = _get_ngeo_resources("spinner*.svg")
+    if spinner_filenames:
+        with open(spinner_filenames[0], encoding="utf-8") as spinner_file:
+            spinner = spinner_file.read()
+
+    return {
+        "request": request,
+        "header": f"""
+<meta name="dynamicUrl" content="{request.route_url("dynamic")}">
+<meta name="interface" content="{interface_config['name']}">
+{css}""",
+        "footer": "\n    ".join(
+            [f'<script src="{request.static_url(js)}" crossorigin="anonymous"></script>' for js in js_files]
+        ),
+        "spinner": spinner,
+    }
```

## c2cgeoportal_geoportal/views/fulltextsearch.py

```diff
@@ -1,9 +1,7 @@
-# -*- coding: utf-8 -*-
-
 # Copyright (c) 2011-2021, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
@@ -25,73 +23,76 @@
 
 # The views and conclusions contained in the software and documentation are those
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
 
 import re
+from typing import cast
 
+import pyramid.request
 from geoalchemy2.shape import to_shape
 from geojson import Feature, FeatureCollection
 from pyramid.httpexceptions import HTTPBadRequest, HTTPInternalServerError
 from pyramid.view import view_config
 from sqlalchemy import and_, desc, func, or_
 
 from c2cgeoportal_commons.models import DBSession
 from c2cgeoportal_commons.models.main import FullTextSearch, Interface
 from c2cgeoportal_geoportal import locale_negotiator
-from c2cgeoportal_geoportal.lib.caching import NO_CACHE, get_region, set_common_headers
+from c2cgeoportal_geoportal.lib.caching import get_region
+from c2cgeoportal_geoportal.lib.common_headers import Cache, set_common_headers
 from c2cgeoportal_geoportal.lib.fulltextsearch import Normalize
 
 CACHE_REGION = get_region("std")
 IGNORED_CHARS_RE = re.compile(r"[()&|!:<>\t]")
 IGNORED_STARTUP_CHARS_RE = re.compile(r"^[']*")
 
 
 class FullTextSearchView:
-    def __init__(self, request):
+    """All the full-text search view."""
+
+    def __init__(self, request: pyramid.request.Request):
         self.request = request
-        set_common_headers(request, "fulltextsearch", NO_CACHE)
+        set_common_headers(request, "fulltextsearch", Cache.PUBLIC_NO)
         self.settings = request.registry.settings.get("fulltextsearch", {})
         self.languages = self.settings.get("languages", {})
-        self.fts_normiliser = Normalize(self.settings)
+        self.fts_normalizer = Normalize(self.settings)
 
     @staticmethod
-    @CACHE_REGION.cache_on_arguments()
-    def _get_interface_id(interface):
-        return DBSession.query(Interface).filter_by(name=interface).one().id
+    @CACHE_REGION.cache_on_arguments()  # type: ignore
+    def _get_interface_id(interface: str) -> int:
+        return cast(int, DBSession.query(Interface).filter_by(name=interface).one().id)
 
-    @view_config(route_name="fulltextsearch", renderer="geojson")
-    def fulltextsearch(self):
+    @view_config(route_name="fulltextsearch", renderer="geojson")  # type: ignore
+    def fulltextsearch(self) -> FeatureCollection:
         lang = locale_negotiator(self.request)
 
         try:
             language = self.languages[lang]
         except KeyError:
-            return HTTPInternalServerError(detail="{0!s} not defined in languages".format(lang))
+            return HTTPInternalServerError(detail=f"{lang!s} not defined in languages")
 
         if "query" not in self.request.params:
             return HTTPBadRequest(detail="no query")
-        terms = self.fts_normiliser(self.request.params.get("query"))
+        terms = self.fts_normalizer(self.request.params.get("query"))
 
         maxlimit = self.settings.get("maxlimit", 200)
 
         try:
             limit = int(self.request.params.get("limit", self.settings.get("defaultlimit", 30)))
         except ValueError:
             return HTTPBadRequest(detail="limit value is incorrect")
-        if limit > maxlimit:
-            limit = maxlimit
+        limit = min(limit, maxlimit)
 
         try:
             partitionlimit = int(self.request.params.get("partitionlimit", 0))
         except ValueError:
             return HTTPBadRequest(detail="partitionlimit value is incorrect")
-        if partitionlimit > maxlimit:
-            partitionlimit = maxlimit
+        partitionlimit = min(partitionlimit, maxlimit)
 
         terms_array = [
             IGNORED_STARTUP_CHARS_RE.sub("", elem) for elem in IGNORED_CHARS_RE.sub(" ", terms).split(" ")
         ]
         terms_ts = "&".join(w + ":*" for w in terms_array if w != "")
         _filter = FullTextSearch.ts.op("@@")(func.to_tsquery(language, terms_ts))
 
@@ -140,29 +141,34 @@
             # Here we want to partition the search results based on
             # layer_name and limit each partition.
             row_number = (
                 func.row_number()
                 .over(partition_by=FullTextSearch.layer_name, order_by=(desc(rank), FullTextSearch.label))
                 .label("row_number")
             )
-            subq = DBSession.query(FullTextSearch).add_columns(row_number).filter(_filter).subquery()
+            sub_query = DBSession.query(FullTextSearch).add_columns(row_number).filter(_filter).subquery()
             query = DBSession.query(
-                subq.c.id, subq.c.label, subq.c.params, subq.c.layer_name, subq.c.the_geom, subq.c.actions
+                sub_query.c.id,
+                sub_query.c.label,
+                sub_query.c.params,
+                sub_query.c.layer_name,
+                sub_query.c.the_geom,
+                sub_query.c.actions,
             )
-            query = query.filter(subq.c.row_number <= partitionlimit)
+            query = query.filter(sub_query.c.row_number <= partitionlimit)
         else:
             query = DBSession.query(FullTextSearch).filter(_filter)
             query = query.order_by(desc(rank))
             query = query.order_by(FullTextSearch.label)
 
         query = query.limit(limit)
-        objs = query.all()
+        objects = query.all()
 
         features = []
-        for o in objs:
+        for o in objects:
             properties = {"label": o.label}
             if o.layer_name is not None:
                 properties["layer_name"] = o.layer_name
             if o.params is not None:
                 properties["params"] = o.params
             if o.actions is not None:
                 properties["actions"] = o.actions
```

## c2cgeoportal_geoportal/views/geometry_processing.py

```diff
@@ -1,10 +1,8 @@
-# -*- coding: utf-8 -*-
-
-# Copyright (c) 2011-2020, Camptocamp SA
+# Copyright (c) 2011-2021, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -24,36 +22,46 @@
 # SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 
 # The views and conclusions contained in the software and documentation are those
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
 
+from typing import Optional
+
+import pyramid.request
 from geoalchemy2.shape import from_shape, to_shape
 from geojson import loads
 from pyramid.httpexceptions import HTTPBadRequest
 from pyramid.view import view_config
 from shapely.geometry import asShape
+from shapely.geometry.base import BaseGeometry
 from sqlalchemy import func
 
 from c2cgeoportal_commons.models import DBSession
 
 
 class GeometryProcessing:
-    def __init__(self, request):
+    """
+    View used to provide processing on a geometry.
+
+    Currently only difference between geometries.
+    """
+
+    def __init__(self, request: pyramid.request.Request):
         self.request = request
 
-    @view_config(route_name="difference", renderer="geojson")
-    def difference(self):
+    @view_config(route_name="difference", renderer="geojson")  # type: ignore
+    def difference(self) -> Optional[BaseGeometry]:
         body = loads(self.request.body)
         if (
             "geometries" not in body
             or not isinstance(body["geometries"], list)
             or len(body["geometries"]) != 2
-        ):  # pragma: no cover
+        ):
             raise HTTPBadRequest(
                 """Wrong body, it should be like that:
             {
                 "geometries": [geomA, geomB]
             }
             """
             )
```

## c2cgeoportal_geoportal/views/i18n.py

```diff
@@ -1,10 +1,8 @@
-# -*- coding: utf-8 -*-
-
-# Copyright (c) 2019-2020, Camptocamp SA
+# Copyright (c) 2019-2022, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -24,24 +22,108 @@
 # SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 
 # The views and conclusions contained in the software and documentation are those
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
 
-from pyramid.httpexceptions import HTTPFound
+import glob
+import logging
+
+import pyramid.request
+import pyramid.response
+from lingua.extract import (  # strip_linenumbers,
+    ExtractorOptions,
+    POEntry,
+    create_catalog,
+    find_file,
+    list_files,
+    no_duplicates,
+    read_config,
+)
+from lingua.extractors import get_extractor, register_extractors
+from lingua.extractors.babel import register_babel_plugins
+from pyramid.httpexceptions import HTTPFound, HTTPInternalServerError
 from pyramid.view import view_config
 
 from c2cgeoportal_geoportal.lib.cacheversion import get_cache_version
-from c2cgeoportal_geoportal.lib.caching import NO_CACHE, set_common_headers
+from c2cgeoportal_geoportal.lib.common_headers import Cache, set_common_headers
 
+LOG = logging.getLogger(__name__)
+_INITIALIZED = False
 
-@view_config(route_name="localejson")
-def locale(request):
+
+@view_config(route_name="localejson")  # type: ignore
+def locale(request: pyramid.request.Request) -> pyramid.response.Response:
+    """Get the locale json file for the API."""
     response = HTTPFound(
         request.static_url(
-            "/etc/geomapfish/static/{lang}.json".format(lang=request.locale_name),
+            f"/etc/geomapfish/static/{request.locale_name}.json",
             _query={"cache": get_cache_version()},
         )
     )
-    set_common_headers(request, "api", NO_CACHE, response=response)
+    set_common_headers(request, "api", Cache.PUBLIC_NO, response=response)
     return response
+
+
+@view_config(route_name="localepot")  # type: ignore
+def localepot(request: pyramid.request.Request) -> pyramid.response.Response:
+    """Get the pot from an HTTP request."""
+
+    # Build the list of files to be processed
+    sources = []
+    sources += glob.glob(f"/app/{request.registry.package_name}/static-ngeo/js/apps/*.html.ejs")
+    sources += glob.glob(f"/app/{request.registry.package_name}/static-ngeo/js/**/*.js", recursive=True)
+    sources += glob.glob(f"/app/{request.registry.package_name}/static-ngeo/js/**/*.html", recursive=True)
+    sources += glob.glob("/usr/local/tomcat/webapps/ROOT/**/config.yaml", recursive=True)
+    sources += ["/etc/geomapfish/config.yaml", "/app/development.ini"]
+
+    # The following code is a modified version of the main function of this file:
+    # https://github.com/wichert/lingua/blob/master/src/lingua/extract.py
+
+    global _INITIALIZED
+    if not _INITIALIZED:
+        register_extractors()
+        register_babel_plugins()
+        _INITIALIZED = True
+
+        with open("/app/lingua-client.cfg", encoding="utf-8") as config_file:
+            read_config(config_file)
+        _INITIALIZED = True
+
+    catalog = create_catalog(
+        width=110,
+        copyright_holder="",
+        package_name="GeoMapFish-project",
+        package_version="1.0",
+        msgid_bugs_address=None,
+    )
+
+    for filename in no_duplicates(list_files(None, sources)):
+        real_filename = find_file(filename)
+        if real_filename is None:
+            LOG.error("Can not find file %s", filename)
+            raise HTTPInternalServerError(f"Can not find file {filename}")
+        extractor = get_extractor(real_filename)
+        if extractor is None:
+            LOG.error("No extractor available for file %s", filename)
+            raise HTTPInternalServerError(f"No extractor available for file {filename}")
+
+        extractor_options = ExtractorOptions(
+            comment_tag=True,
+            domain=None,
+            keywords=None,
+        )
+        for message in extractor(real_filename, extractor_options):
+            entry = catalog.find(message.msgid, msgctxt=message.msgctxt)
+            if entry is None:
+                entry = POEntry(msgctxt=message.msgctxt, msgid=message.msgid)
+                catalog.append(entry)
+            entry.update(message)
+
+    # for entry in catalog:
+    #     strip_linenumbers(entry)
+
+    # Build the response
+    request.response.text = catalog.__unicode__()
+    set_common_headers(request, "api", Cache.PUBLIC, content_type="text/x-gettext-translation")
+    return request.response
```

## c2cgeoportal_geoportal/views/layers.py

```diff
@@ -1,10 +1,8 @@
-# -*- coding: utf-8 -*-
-
-# Copyright (c) 2012-2021, Camptocamp SA
+# Copyright (c) 2012-2022, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -27,17 +25,20 @@
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
 import json
 import logging
 import os
 from datetime import datetime
-from typing import Dict, List, Union
+from typing import TYPE_CHECKING, Any, Dict, Generator, List, Optional, Set, Tuple, TypedDict, cast
 
-import geojson
+import geojson.geometry
+import pyramid.request
+import pyramid.response
+import sqlalchemy.ext.declarative
 from geoalchemy2 import Geometry
 from geoalchemy2 import func as ga_func
 from geoalchemy2.shape import from_shape, to_shape
 from geojson.feature import Feature, FeatureCollection
 from papyrus.protocol import Protocol, create_filter
 from papyrus.xsd import XSDGenerator
 from pyramid.httpexceptions import (
@@ -47,111 +48,115 @@
     HTTPInternalServerError,
     HTTPNotFound,
 )
 from pyramid.view import view_config
 from shapely.geometry import asShape
 from shapely.geos import TopologicalError
 from shapely.ops import cascaded_union
-from sqlalchemy import Enum, Numeric, String, Text, Unicode, UnicodeText, distinct, exc, func
+from sqlalchemy import Enum, Numeric, String, Text, Unicode, UnicodeText, exc, func
 from sqlalchemy.orm.exc import MultipleResultsFound, NoResultFound
 from sqlalchemy.orm.properties import ColumnProperty
 from sqlalchemy.orm.util import class_mapper
 from sqlalchemy.sql import and_, or_
 
 from c2cgeoportal_commons import models
 from c2cgeoportal_geoportal.lib import get_roles_id
-from c2cgeoportal_geoportal.lib.caching import (
-    NO_CACHE,
-    PRIVATE_CACHE,
-    PUBLIC_CACHE,
-    get_region,
-    set_common_headers,
-)
+from c2cgeoportal_geoportal.lib.caching import get_region
+from c2cgeoportal_geoportal.lib.common_headers import Cache, set_common_headers
 from c2cgeoportal_geoportal.lib.dbreflection import _AssociationProxy, get_class, get_table
 
+if TYPE_CHECKING:
+    from c2cgeoportal_commons.models import main  # pylint: disable=ungrouped-imports.useless-suppression
 LOG = logging.getLogger(__name__)
 CACHE_REGION = get_region("std")
 
 
 class Layers:
-    def __init__(self, request):
+    """
+    All the layers view (editing).
+
+    Mapfish protocol implementation
+    """
+
+    def __init__(self, request: pyramid.request.Request):
         self.request = request
         self.settings = request.registry.settings.get("layers", {})
         self.layers_enum_config = self.settings.get("enum")
 
     @staticmethod
-    def _get_geom_col_info(layer):
-        """Return information about the layer's geometry column, namely
-        a ``(name, srid)`` tuple, where ``name`` is the name of the
-        geometry column, and ``srid`` its srid.
+    def _get_geom_col_info(layer: "main.Layer") -> Tuple[str, int]:
+        """
+        Return information about the layer's geometry column.
+
+        Namely a ``(name, srid)`` tuple, where ``name`` is the name of the geometry column,
+        and ``srid`` its srid.
 
-        This function assumes that the names of geometry attributes
-        in the mapped class are the same as those of geometry columns.
+        This function assumes that the names of geometry attributes in the mapped class are the same as those
+        of geometry columns.
         """
         mapped_class = get_layer_class(layer)
         for p in class_mapper(mapped_class).iterate_properties:
             if not isinstance(p, ColumnProperty):
-                continue  # pragma: no cover
+                continue
             col = p.columns[0]
             if isinstance(col.type, Geometry):
                 return col.name, col.type.srid
-        raise HTTPInternalServerError(
-            'Failed getting geometry column info for table "{0!s}".'.format(layer.geo_table)
-        )  # pragma: no cover
+        raise HTTPInternalServerError(f'Failed getting geometry column info for table "{layer.geo_table!s}".')
 
     @staticmethod
-    def _get_layer(layer_id):
+    def _get_layer(layer_id: int) -> "main.Layer":
         """Return a ``Layer`` object for ``layer_id``."""
         from c2cgeoportal_commons.models.main import Layer  # pylint: disable=import-outside-toplevel
 
         layer_id = int(layer_id)
         try:
             query = models.DBSession.query(Layer, Layer.geo_table)
             query = query.filter(Layer.id == layer_id)
             layer, geo_table = query.one()
         except NoResultFound:
-            raise HTTPNotFound("Layer {0:d} not found".format(layer_id))
-        except MultipleResultsFound:  # pragma: no cover
-            raise HTTPInternalServerError("Too many layers found with id {0:d}".format(layer_id))
-        if not geo_table:  # pragma: no cover
-            raise HTTPNotFound("Layer {0:d} has no geo table".format(layer_id))
-        return layer
-
-    def _get_layers_for_request(self):
-        """A generator function that yields ``Layer`` objects based
-        on the layer ids found in the ``layer_id`` matchdict."""
+            raise HTTPNotFound(f"Layer {layer_id:d} not found") from None
+        except MultipleResultsFound:
+            raise HTTPInternalServerError(f"Too many layers found with id {layer_id:d}") from None
+        if not geo_table:
+            raise HTTPNotFound(f"Layer {layer_id:d} has no geo table")
+        return cast("main.Layer", layer)
+
+    def _get_layers_for_request(self) -> Generator["main.Layer", None, None]:
+        """
+        Get a generator function that yields ``Layer`` objects.
+
+        Based on the layer ids found in the ``layer_id`` matchdict.
+        """
         try:
             layer_ids = (
                 int(layer_id) for layer_id in self.request.matchdict["layer_id"].split(",") if layer_id
             )
             for layer_id in layer_ids:
                 yield self._get_layer(layer_id)
         except ValueError:
-            raise HTTPBadRequest(
-                "A Layer id in '{0!s}' is not an integer".format(self.request.matchdict["layer_id"])
-            )  # pragma: no cover
-
-    def _get_layer_for_request(self):
-        """Return a ``Layer`` object for the first layer id found
-        in the ``layer_id`` matchdict."""
+            raise HTTPBadRequest(  # pylint: disable=raise-missing-from
+                f"A Layer id in '{self.request.matchdict['layer_id']}' is not an integer"
+            )
+
+    def _get_layer_for_request(self) -> "main.Layer":
+        """Return a ``Layer`` object for the first layer id found in the ``layer_id`` matchdict."""
         return next(self._get_layers_for_request())
 
-    def _get_protocol_for_layer(self, layer, **kwargs):
-        """Returns a papyrus ``Protocol`` for the ``Layer`` object."""
+    def _get_protocol_for_layer(self, layer: "main.Layer", **kwargs: Any) -> Protocol:
+        """Return a papyrus ``Protocol`` for the ``Layer`` object."""
         cls = get_layer_class(layer)
         geom_attr = self._get_geom_col_info(layer)[0]
         return Protocol(models.DBSession, cls, geom_attr, **kwargs)
 
-    def _get_protocol_for_request(self, **kwargs):
-        """Returns a papyrus ``Protocol`` for the first layer
-        id found in the ``layer_id`` matchdict."""
+    def _get_protocol_for_request(self, **kwargs: Any) -> Protocol:
+        """Return a papyrus ``Protocol`` for the first layer id found in the ``layer_id`` matchdict."""
         layer = self._get_layer_for_request()
         return self._get_protocol_for_layer(layer, **kwargs)
 
-    def _proto_read(self, layer):
+    def _proto_read(self, layer: "main.Layer") -> FeatureCollection:
         """Read features for the layer based on the self.request."""
         from c2cgeoportal_commons.models.main import (  # pylint: disable=import-outside-toplevel
             Layer,
             RestrictionArea,
             Role,
         )
 
@@ -171,58 +176,61 @@
         collect_ra = []
         use_srid = -1
         for ra, srid in ras.all():
             if ra is None:
                 return proto.read(self.request)
             use_srid = srid
             collect_ra.append(to_shape(ra))
-        if not collect_ra:  # pragma: no cover
+        if not collect_ra:
             raise HTTPForbidden()
 
         filter1_ = create_filter(self.request, cls, geom_attr)
         ra = cascaded_union(collect_ra)
         filter2_ = ga_func.ST_Contains(from_shape(ra, use_srid), getattr(cls, geom_attr))
         filter_ = filter2_ if filter1_ is None else and_(filter1_, filter2_)
 
-        return proto.read(self.request, filter=filter_)
+        feature = proto.read(self.request, filter=filter_)
+        if isinstance(feature, HTTPException):
+            raise feature  # pylint: disable=raising-non-exception
+        return feature
 
-    @view_config(route_name="layers_read_many", renderer="geojson")
-    def read_many(self):
-        set_common_headers(self.request, "layers", NO_CACHE)
+    @view_config(route_name="layers_read_many", renderer="geojson")  # type: ignore
+    def read_many(self) -> FeatureCollection:
+        set_common_headers(self.request, "layers", Cache.PRIVATE_NO)
 
         features = []
         for layer in self._get_layers_for_request():
             for f in self._proto_read(layer).features:
                 f.properties["__layer_id__"] = layer.id
                 features.append(f)
 
         return FeatureCollection(features)
 
-    @view_config(route_name="layers_read_one", renderer="geojson")
-    def read_one(self):
+    @view_config(route_name="layers_read_one", renderer="geojson")  # type: ignore
+    def read_one(self) -> Feature:
         from c2cgeoportal_commons.models.main import (  # pylint: disable=import-outside-toplevel
             Layer,
             RestrictionArea,
             Role,
         )
 
-        set_common_headers(self.request, "layers", NO_CACHE)
+        set_common_headers(self.request, "layers", Cache.PRIVATE_NO)
 
         layer = self._get_layer_for_request()
         protocol = self._get_protocol_for_layer(layer)
         feature_id = self.request.matchdict.get("feature_id")
         feature = protocol.read(self.request, id=feature_id)
         if not isinstance(feature, Feature):
             return feature
         if layer.public:
             return feature
         if self.request.user is None:
             raise HTTPForbidden()
         geom = feature.geometry
-        if not geom or isinstance(geom, geojson.geometry.Default):  # pragma: no cover
+        if not geom or isinstance(geom, geojson.geometry.Default):
             return feature
         shape = asShape(geom)
         srid = self._get_geom_col_info(layer)[1]
         spatial_elt = from_shape(shape, srid=srid)
         allowed = models.DBSession.query(func.count(RestrictionArea.id))
         allowed = allowed.join(RestrictionArea.roles)
         allowed = allowed.join(RestrictionArea.layers)
@@ -232,39 +240,42 @@
             or_(RestrictionArea.area.is_(None), RestrictionArea.area.ST_Contains(spatial_elt))
         )
         if allowed.scalar() == 0:
             raise HTTPForbidden()
 
         return feature
 
-    @view_config(route_name="layers_count", renderer="string")
-    def count(self):
-        set_common_headers(self.request, "layers", NO_CACHE)
+    @view_config(route_name="layers_count", renderer="string")  # type: ignore
+    def count(self) -> int:
+        set_common_headers(self.request, "layers", Cache.PRIVATE_NO)
 
         protocol = self._get_protocol_for_request()
-        return protocol.count(self.request)
+        count = protocol.count(self.request)
+        if isinstance(count, HTTPException):
+            raise count
+        return cast(int, count)
 
-    @view_config(route_name="layers_create", renderer="geojson")
-    def create(self):
+    @view_config(route_name="layers_create", renderer="geojson")  # type: ignore
+    def create(self) -> Optional[FeatureCollection]:
         from c2cgeoportal_commons.models.main import (  # pylint: disable=import-outside-toplevel
             Layer,
             RestrictionArea,
             Role,
         )
 
-        set_common_headers(self.request, "layers", NO_CACHE)
+        set_common_headers(self.request, "layers", Cache.PRIVATE_NO)
 
         if self.request.user is None:
             raise HTTPForbidden()
 
         self.request.response.cache_control.no_cache = True
 
         layer = self._get_layer_for_request()
 
-        def check_geometry(_, feature, obj):
+        def check_geometry(_: Any, feature: Feature, obj: Any) -> None:
             del obj  # unused
             geom = feature.geometry
             if geom and not isinstance(geom, geojson.geometry.Default):
                 shape = asShape(geom)
                 srid = self._get_geom_col_info(layer)[1]
                 spatial_elt = from_shape(shape, srid=srid)
                 allowed = models.DBSession.query(func.count(RestrictionArea.id))
@@ -296,33 +307,33 @@
             self.request.response.status_int = 400
             return {"error_type": "validation_error", "message": str(e)}
         except exc.IntegrityError as e:
             LOG.error(str(e))
             self.request.response.status_int = 400
             return {"error_type": "integrity_error", "message": str(e.orig.diag.message_primary)}
 
-    @view_config(route_name="layers_update", renderer="geojson")
-    def update(self):
+    @view_config(route_name="layers_update", renderer="geojson")  # type: ignore
+    def update(self) -> Feature:
         from c2cgeoportal_commons.models.main import (  # pylint: disable=import-outside-toplevel
             Layer,
             RestrictionArea,
             Role,
         )
 
-        set_common_headers(self.request, "layers", NO_CACHE)
+        set_common_headers(self.request, "layers", Cache.PRIVATE_NO)
 
         if self.request.user is None:
             raise HTTPForbidden()
 
         self.request.response.cache_control.no_cache = True
 
         feature_id = self.request.matchdict.get("feature_id")
         layer = self._get_layer_for_request()
 
-        def check_geometry(_, feature, obj):
+        def check_geometry(_: Any, feature: Feature, obj: Any) -> None:
             # we need both the "original" and "new" geometry to be
             # within the restriction area
             geom_attr, srid = self._get_geom_col_info(layer)
             geom_attr = getattr(obj, geom_attr)
             geom = feature.geometry
             allowed = models.DBSession.query(func.count(RestrictionArea.id))
             allowed = allowed.join(RestrictionArea.roles)
@@ -346,74 +357,76 @@
             # Check is geometry is valid
             if self._get_validation_setting(layer):
                 self._validate_geometry(spatial_elt)
 
         protocol = self._get_protocol_for_layer(layer, before_update=check_geometry)
         try:
             feature = protocol.update(self.request, feature_id)
+            if isinstance(feature, HTTPException):
+                raise feature
             self._log_last_update(layer, feature)
-            return feature
+            return cast(Feature, feature)
         except TopologicalError as e:
             self.request.response.status_int = 400
             return {"error_type": "validation_error", "message": str(e)}
         except exc.IntegrityError as e:
             LOG.error(str(e))
             self.request.response.status_int = 400
             return {"error_type": "integrity_error", "message": str(e.orig.diag.message_primary)}
 
     @staticmethod
-    def _validate_geometry(geom):
+    def _validate_geometry(geom: Geometry) -> None:
         if geom is not None:
             simple = models.DBSession.query(func.ST_IsSimple(func.ST_GeomFromEWKB(geom))).scalar()
             if not simple:
                 raise TopologicalError("Not simple")
             valid = models.DBSession.query(func.ST_IsValid(func.ST_GeomFromEWKB(geom))).scalar()
             if not valid:
                 reason = models.DBSession.query(func.ST_IsValidReason(func.ST_GeomFromEWKB(geom))).scalar()
                 raise TopologicalError(reason)
 
-    def _log_last_update(self, layer, feature):
+    def _log_last_update(self, layer: "main.Layer", feature: Feature) -> None:
         last_update_date = self.get_metadata(layer, "lastUpdateDateColumn")
         if last_update_date is not None:
             setattr(feature, last_update_date, datetime.now())
 
         last_update_user = self.get_metadata(layer, "lastUpdateUserColumn")
         if last_update_user is not None:
             setattr(feature, last_update_user, self.request.user.id)
 
     @staticmethod
-    def get_metadata(layer, key, default=None):
-        metadatas = layer.get_metadatas(key)
-        if len(metadatas) == 1:
-            metadata = metadatas[0]
-            return metadata.value
+    def get_metadata(layer: "main.Layer", key: str, default: Optional[str] = None) -> Optional[str]:
+        metadata = layer.get_metadata(key)
+        if len(metadata) == 1:
+            metadata = metadata[0]
+            return cast(str, metadata.value)
         return default
 
-    def _get_validation_setting(self, layer):
+    def _get_validation_setting(self, layer: "main.Layer") -> bool:
         # The validation UIMetadata is stored as a string, not a boolean
         should_validate = self.get_metadata(layer, "geometryValidation", None)
         if should_validate:
             return should_validate.lower() != "false"
-        return self.settings.get("geometry_validation", False)
+        return cast(bool, self.settings.get("geometry_validation", False))
 
-    @view_config(route_name="layers_delete")
-    def delete(self):
+    @view_config(route_name="layers_delete")  # type: ignore
+    def delete(self) -> pyramid.response.Response:
         from c2cgeoportal_commons.models.main import (  # pylint: disable=import-outside-toplevel
             Layer,
             RestrictionArea,
             Role,
         )
 
         if self.request.user is None:
             raise HTTPForbidden()
 
         feature_id = self.request.matchdict.get("feature_id")
         layer = self._get_layer_for_request()
 
-        def security_cb(_, obj):
+        def security_cb(_: Any, obj: Any) -> None:
             geom_attr = getattr(obj, self._get_geom_col_info(layer)[0])
             allowed = models.DBSession.query(func.count(RestrictionArea.id))
             allowed = allowed.join(RestrictionArea.roles)
             allowed = allowed.join(RestrictionArea.layers)
             allowed = allowed.filter(RestrictionArea.readwrite.is_(True))
             allowed = allowed.filter(Role.id.in_(get_roles_id(self.request)))
             allowed = allowed.filter(Layer.id == layer.id)
@@ -421,93 +434,100 @@
                 or_(RestrictionArea.area.is_(None), RestrictionArea.area.ST_Contains(geom_attr))
             )
             if allowed.scalar() == 0:
                 raise HTTPForbidden()
 
         protocol = self._get_protocol_for_layer(layer, before_delete=security_cb)
         response = protocol.delete(self.request, feature_id)
-        set_common_headers(self.request, "layers", NO_CACHE, response=response)
+        if isinstance(response, HTTPException):
+            raise response  # pylint: disable=raising-non-exception
+        set_common_headers(self.request, "layers", Cache.PRIVATE_NO, response=response)
         return response
 
-    @view_config(route_name="layers_metadata", renderer="xsd")
-    def metadata(self):
-        set_common_headers(self.request, "layers", PRIVATE_CACHE)
+    @view_config(route_name="layers_metadata", renderer="xsd")  # type: ignore
+    def metadata(self) -> pyramid.response.Response:
+        set_common_headers(self.request, "layers", Cache.PRIVATE)
 
         layer = self._get_layer_for_request()
         if not layer.public and self.request.user is None:
             raise HTTPForbidden()
 
         return get_layer_class(layer, with_last_update_columns=True)
 
-    @view_config(route_name="layers_enumerate_attribute_values", renderer="json")
-    def enumerate_attribute_values(self):
-        set_common_headers(self.request, "layers", PUBLIC_CACHE)
+    @view_config(route_name="layers_enumerate_attribute_values", renderer="json")  # type: ignore
+    def enumerate_attribute_values(self) -> Dict[str, Any]:
+        set_common_headers(self.request, "layers", Cache.PUBLIC)
 
-        if self.layers_enum_config is None:  # pragma: no cover
+        if self.layers_enum_config is None:
             raise HTTPInternalServerError("Missing configuration")
         layername = self.request.matchdict["layer_name"]
         fieldname = self.request.matchdict["field_name"]
         # TODO check if layer is public or not
 
-        return self._enumerate_attribute_values(layername, fieldname)
+        return cast(Dict[str, Any], self._enumerate_attribute_values(layername, fieldname))
 
-    @CACHE_REGION.cache_on_arguments()
-    def _enumerate_attribute_values(self, layername, fieldname):
-        if layername not in self.layers_enum_config:  # pragma: no cover
-            raise HTTPBadRequest("Unknown layer: {0!s}".format(layername))
+    @CACHE_REGION.cache_on_arguments()  # type: ignore
+    def _enumerate_attribute_values(self, layername: str, fieldname: str) -> Dict[str, Any]:
+        if layername not in self.layers_enum_config:
+            raise HTTPBadRequest(f"Unknown layer: {layername!s}")
 
         layerinfos = self.layers_enum_config[layername]
-        if fieldname not in layerinfos["attributes"]:  # pragma: no cover
-            raise HTTPBadRequest("Unknown attribute: {0!s}".format(fieldname))
+        if fieldname not in layerinfos["attributes"]:
+            raise HTTPBadRequest(f"Unknown attribute: {fieldname!s}")
         dbsession_name = layerinfos.get("dbsession", "dbsession")
         dbsession = models.DBSessions.get(dbsession_name)
-        if dbsession is None:  # pragma: no cover
+        if dbsession is None:
             raise HTTPInternalServerError(
-                "No dbsession found for layer '{0!s}' ({1!s})".format(layername, dbsession_name)
+                f"No dbsession found for layer '{layername!s}' ({dbsession_name!s})"
             )
-        values = self.query_enumerate_attribute_values(dbsession, layerinfos, fieldname)
+        values = sorted(self.query_enumerate_attribute_values(dbsession, layerinfos, fieldname))
         enum = {"items": [{"value": value[0]} for value in values]}
         return enum
 
     @staticmethod
-    def query_enumerate_attribute_values(dbsession, layerinfos, fieldname):
+    def query_enumerate_attribute_values(
+        dbsession: sqlalchemy.orm.Session, layerinfos: Dict[str, Any], fieldname: str
+    ) -> Set[Tuple[str, ...]]:
         attrinfos = layerinfos["attributes"][fieldname]
         table = attrinfos["table"]
         layertable = get_table(table, session=dbsession)
         column = attrinfos.get("column_name", fieldname)
         attribute = getattr(layertable.columns, column)
         # For instance if `separator` is a "," we consider that the column contains a
         # comma separate list of values e.g.: "value1,value2".
         if "separator" in attrinfos:
             separator = attrinfos["separator"]
             attribute = func.unnest(func.string_to_array(func.string_agg(attribute, separator), separator))
-        return dbsession.query(distinct(attribute)).order_by(attribute).all()
+        return set(cast(List[Tuple[str, ...]], dbsession.query(attribute).order_by(attribute).all()))
 
 
-def get_layer_class(layer, with_last_update_columns=False):
+def get_layer_class(
+    layer: "main.Layer", with_last_update_columns: bool = False
+) -> sqlalchemy.ext.declarative.ConcreteBase:
     """
-    Get the SQLAlchemy class to edit a GeoMapFish layer
+    Get the SQLAlchemy class to edit a GeoMapFish layer.
+
+    Arguments:
 
-    :param layer:
-    :param with_last_update_columns: False to just have a class to access to the table and be able to
+        layer: The GeoMapFish layer
+        with_last_update_columns: False to just have a class to access to the table and be able to
            modify the last_update_columns, True to have a correct class to build the UI
            (without the hidden column).
-    :return: SQLAlchemy class
+
+    Returns: SQLAlchemy class
     """
     # Exclude the columns used to record the last features update
     exclude = [] if layer.exclude_properties is None else layer.exclude_properties.split(",")
     if with_last_update_columns:
         last_update_date = Layers.get_metadata(layer, "lastUpdateDateColumn")
         if last_update_date is not None:
             exclude.append(last_update_date)
         last_update_user = Layers.get_metadata(layer, "lastUpdateUserColumn")
         if last_update_user is not None:
             exclude.append(last_update_user)
-    else:
-        exclude = []
 
     m = Layers.get_metadata(layer, "editingAttributesOrder")
     attributes_order = m.split(",") if m else None
     m = Layers.get_metadata(layer, "readonlyAttributes")
     readonly_attributes = m.split(",") if m else None
     m = Layers.get_metadata(layer, "editingEnumerations")
     enumerations_config = json.loads(m) if m else None
@@ -539,29 +559,44 @@
                 layer.id,
                 ", ".join(column_properties),
             )
 
     return cls
 
 
-def get_layer_metadatas(layer):
+class ColumnProperties(TypedDict, total=False):
+    """Collected metadata information related to an editing attribute."""
+
+    name: str
+    type: str
+    nillable: bool
+    srid: int
+    enumeration: List[str]
+    restriction: str
+    maxLength: int  # noqa
+    fractionDigits: int  # noqa
+    totalDigits: int  # noqa
+
+
+def get_layer_metadata(layer: "main.Layer") -> List[ColumnProperties]:
+    """Get the metadata related to a layer."""
     cls = get_layer_class(layer, with_last_update_columns=True)
-    edit_columns = []
+    edit_columns: List[ColumnProperties] = []
 
     for column_property in class_mapper(cls).iterate_properties:
         if isinstance(column_property, ColumnProperty):
 
             if len(column_property.columns) != 1:
-                raise NotImplementedError  # pragma: no cover
+                raise NotImplementedError
 
             column = column_property.columns[0]
 
             # Exclude columns that are primary keys
             if not column.primary_key:
-                properties = _convert_column_type(column.type)
+                properties: ColumnProperties = _convert_column_type(column.type)
                 properties["name"] = column.key
 
                 if column.nullable:
                     properties["nillable"] = True
                 edit_columns.append(properties)
         else:
             for k, p in cls.__dict__.items():
@@ -582,15 +617,15 @@
                 for value in query:
                     properties["enumeration"].append(value[0])
 
                 edit_columns.append(properties)
     return edit_columns
 
 
-def _convert_column_type(column_type):
+def _convert_column_type(column_type: object) -> ColumnProperties:
     # SIMPLE_XSD_TYPES
     for cls, xsd_type in XSDGenerator.SIMPLE_XSD_TYPES.items():
         if isinstance(column_type, cls):
             return {"type": xsd_type}
 
     # Geometry type
     if isinstance(column_type, Geometry):
@@ -599,42 +634,41 @@
             xsd_type = XSDGenerator.SIMPLE_GEOMETRY_XSD_TYPES[geometry_type]
             return {"type": xsd_type, "srid": int(column_type.srid)}
         if geometry_type == "GEOMETRY":
             xsd_type = "gml:GeometryPropertyType"
             return {"type": xsd_type, "srid": int(column_type.srid)}
 
         raise NotImplementedError(
-            "The geometry type '{}' is not supported, supported types: {}".format(
-                geometry_type, ",".join(XSDGenerator.SIMPLE_GEOMETRY_XSD_TYPES)
-            )
-        )  # pragma: no cover
+            f"The geometry type '{geometry_type}' is not supported, supported types: "
+            f"{','.join(XSDGenerator.SIMPLE_GEOMETRY_XSD_TYPES)}"
+        )
 
     # Enumeration type
     if isinstance(column_type, Enum):
-        restriction: Dict[str, Union[str, List[str]]] = {}
+        restriction: ColumnProperties = {}
         restriction["restriction"] = "enumeration"
         restriction["type"] = "xsd:string"
         restriction["enumeration"] = column_type.enums
         return restriction
 
     # String type
     if isinstance(column_type, (String, Text, Unicode, UnicodeText)):
         if column_type.length is None:
             return {"type": "xsd:string"}
         return {"type": "xsd:string", "maxLength": int(column_type.length)}
 
     # Numeric Type
     if isinstance(column_type, Numeric):
-        xsd_type = {"type": "xsd:decimal"}
+        xsd_type2: ColumnProperties = {"type": "xsd:decimal"}
         if column_type.scale is None and column_type.precision is None:
-            return xsd_type
+            return xsd_type2
 
         if column_type.scale is not None:
-            xsd_type["fractionDigits"] = int(column_type.scale)
+            xsd_type2["fractionDigits"] = int(column_type.scale)
         if column_type.precision is not None:
-            xsd_type["totalDigits"] = int(column_type.precision)
-        return xsd_type
+            xsd_type2["totalDigits"] = int(column_type.precision)
+        return xsd_type2
 
     raise NotImplementedError(
-        "The type '{}' is not supported, supported types: "
-        "Geometry, Enum, String, Text, Unicode, UnicodeText, Numeric".format(type(column_type).__name__)
-    )  # pragma: no cover
+        f"The type '{type(column_type).__name__}' is not supported, supported types: "
+        "Geometry, Enum, String, Text, Unicode, UnicodeText, Numeric"
+    )
```

## c2cgeoportal_geoportal/views/login.py

```diff
@@ -1,10 +1,8 @@
-# -*- coding: utf-8 -*-
-
-# Copyright (c) 2011-2021, Camptocamp SA
+# Copyright (c) 2011-2022, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -26,118 +24,129 @@
 # The views and conclusions contained in the software and documentation are those
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
 
 import json
 import logging
+import secrets
 import sys
-import xml.dom.minidom  # noqa # pylint: disable=unused-import
-from random import Random
-from typing import Dict, Set, Tuple  # noqa # pylint: disable=unused-import
+import urllib.parse
+from typing import Any, Dict, List, Optional, Tuple, Union
 
 import pyotp
+import pyramid.request
+import pyramid.response
 from pyramid.httpexceptions import (
     HTTPBadRequest,
     HTTPForbidden,
     HTTPFound,
     HTTPUnauthorized,
     exception_response,
 )
 from pyramid.response import Response
 from pyramid.security import forget, remember
-from pyramid.view import view_config
+from pyramid.view import forbidden_view_config, view_config
 from sqlalchemy.orm.exc import NoResultFound
 
 from c2cgeoportal_commons import models
 from c2cgeoportal_commons.lib.email_ import send_email_config
 from c2cgeoportal_commons.models import static
-from c2cgeoportal_geoportal import is_valid_referer
+from c2cgeoportal_geoportal import is_valid_referrer
 from c2cgeoportal_geoportal.lib import get_setting, is_intranet, oauth2
-from c2cgeoportal_geoportal.lib.caching import NO_CACHE, PUBLIC_CACHE, get_region, set_common_headers
+from c2cgeoportal_geoportal.lib.caching import get_region
+from c2cgeoportal_geoportal.lib.common_headers import Cache, set_common_headers
 from c2cgeoportal_geoportal.lib.functionality import get_functionality
 
 LOG = logging.getLogger(__name__)
 CACHE_REGION = get_region("std")
 
 
 class Login:
-    def __init__(self, request):
+    """
+    All the login, logout, oauth2, user information views.
+
+    Also manage the 2fa.
+    """
+
+    def __init__(self, request: pyramid.request.Request):
         self.request = request
         self.settings = request.registry.settings
         self.lang = request.locale_name
 
         authentication_settings = self.settings.get("authentication", {})
 
         self.two_factor_auth = authentication_settings.get("two_factor", False)
         self.two_factor_issuer_name = authentication_settings.get("two_factor_issuer_name")
 
-    def _functionality(self):
+    def _functionality(self) -> Dict[str, List[Union[str, int, float, bool, List[Any], Dict[str, Any]]]]:
         functionality = {}
         for func_ in get_setting(self.settings, ("functionalities", "available_in_templates"), []):
             functionality[func_] = get_functionality(func_, self.request, is_intranet(self.request))
         return functionality
 
     def _referer_log(self) -> None:
         if not hasattr(self.request, "is_valid_referer"):
-            self.request.is_valid_referer = is_valid_referer(self.request)
+            self.request.is_valid_referer = is_valid_referrer(self.request)
         if not self.request.is_valid_referer:
             LOG.info("Invalid referer for %s: %s", self.request.path_qs, repr(self.request.referer))
 
-    @view_config(context=HTTPForbidden, renderer="login.html")
-    def loginform403(self):
-        if self.request.authenticated_userid:
-            return HTTPUnauthorized()  # pragma: no cover
+    @forbidden_view_config(renderer="login.html")  # type: ignore
+    def loginform403(self) -> Union[Dict[str, Any], pyramid.response.Response]:
+        if self.request.authenticated_userid is not None:
+            return HTTPForbidden()
 
-        set_common_headers(self.request, "login", NO_CACHE)
+        set_common_headers(self.request, "login", Cache.PRIVATE_NO)
 
         return {
             "lang": self.lang,
-            "login_params": {"came_from": self.request.path},
+            "login_params": {
+                "came_from": (f"{self.request.path}?{urllib.parse.urlencode(self.request.GET)}")
+            },
             "two_fa": self.two_factor_auth,
         }
 
-    @view_config(route_name="loginform", renderer="login.html")
-    def loginform(self):
-        set_common_headers(self.request, "login", PUBLIC_CACHE)
+    @view_config(route_name="loginform", renderer="login.html")  # type: ignore
+    def loginform(self) -> Dict[str, Any]:
+        set_common_headers(self.request, "login", Cache.PUBLIC)
 
         return {
             "lang": self.lang,
             "login_params": {"came_from": self.request.params.get("came_from") or "/"},
             "two_fa": self.two_factor_auth,
         }
 
     @staticmethod
-    def _validate_2fa_totp(user, otp: str) -> bool:
+    def _validate_2fa_totp(user: static.User, otp: str) -> bool:
         if pyotp.TOTP(user.tech_data.get("2fa_totp_secret", "")).verify(otp):
             return True
         return False
 
-    @view_config(route_name="login")
-    def login(self):
+    @view_config(route_name="login")  # type: ignore
+    def login(self) -> pyramid.response.Response:
         self._referer_log()
 
         login = self.request.POST.get("login")
         password = self.request.POST.get("password")
-        if login is None or password is None:  # pragma nocover
+        if login is None or password is None:
             raise HTTPBadRequest("'login' and 'password' should be available in request params.")
         username = self.request.registry.validate_user(self.request, login, password)
         if username is not None:
             user = models.DBSession.query(static.User).filter(static.User.username == username).one()
             if self.two_factor_auth:
                 if "2fa_totp_secret" not in user.tech_data:
                     user.is_password_changed = False
                 if not user.is_password_changed:
                     user.tech_data["2fa_totp_secret"] = pyotp.random_base32()
                     if self.request.GET.get("type") == "oauth2":
                         raise HTTPFound(location=self.request.route_url("notlogin"))
                     return set_common_headers(
                         self.request,
                         "login",
-                        NO_CACHE,
+                        Cache.PRIVATE_NO,
                         response=Response(
                             json.dumps(
                                 {
                                     "username": user.username,
                                     "is_password_changed": False,
                                     "two_factor_enable": self.two_factor_auth,
                                     "two_factor_totp_secret": user.tech_data["2fa_totp_secret"],
@@ -160,15 +169,15 @@
 
             if not user.is_password_changed:
                 if self.request.GET.get("type") == "oauth2":
                     raise HTTPFound(location=self.request.route_url("notlogin"))
                 return set_common_headers(
                     self.request,
                     "login",
-                    NO_CACHE,
+                    Cache.PRIVATE_NO,
                     response=Response(
                         json.dumps(
                             {
                                 "username": user.username,
                                 "is_password_changed": False,
                                 "two_factor_enable": self.two_factor_auth,
                             }
@@ -185,15 +194,15 @@
             came_from = self.request.params.get("came_from")
             if came_from:
                 return HTTPFound(location=came_from, headers=headers)
             headers.append(("Content-Type", "text/json"))
             return set_common_headers(
                 self.request,
                 "login",
-                NO_CACHE,
+                Cache.PRIVATE_NO,
                 response=Response(json.dumps(self._user(self.request.get_user(username))), headers=headers),
             )
         user = models.DBSession.query(static.User).filter(static.User.username == login).one_or_none()
         if user and not user.deactivated:
             if "consecutive_failed" not in user.tech_data:
                 user.tech_data["consecutive_failed"] = "0"
             user.tech_data["consecutive_failed"] = str(int(user.tech_data["consecutive_failed"]) + 1)
@@ -203,15 +212,15 @@
                 user.deactivated = True
                 user.tech_data["consecutive_failed"] = "0"
 
         if hasattr(self.request, "tm"):
             self.request.tm.commit()
         raise HTTPUnauthorized("See server logs for details")
 
-    def _oauth2_login(self, user):
+    def _oauth2_login(self, user: static.User) -> pyramid.response.Response:
         self.request.user_ = user
         LOG.debug(
             "Call OAuth create_authorization_response with:\nurl: %s\nmethod: %s\nbody:\n%s",
             self.request.current_route_url(_query=self.request.GET),
             self.request.method,
             self.request.body,
         )
@@ -232,32 +241,34 @@
         if status != 200:
             if body:
                 raise exception_response(status, details=body)
             raise exception_response(status)
         return set_common_headers(
             self.request,
             "login",
-            NO_CACHE,
+            Cache.PRIVATE_NO,
             response=Response(body, headers=headers.items()),
         )
 
-    @view_config(route_name="logout")
-    def logout(self):
+    @view_config(route_name="logout")  # type: ignore
+    def logout(self) -> pyramid.response.Response:
         headers = forget(self.request)
 
         if not self.request.user:
             LOG.info("Logout on non login user.")
             raise HTTPUnauthorized("See server logs for details")
 
         LOG.info("User '%s' (%s) logging out.", self.request.user.username, self.request.user.id)
 
         headers.append(("Content-Type", "text/json"))
-        return set_common_headers(self.request, "login", NO_CACHE, response=Response("true", headers=headers))
+        return set_common_headers(
+            self.request, "login", Cache.PRIVATE_NO, response=Response("true", headers=headers)
+        )
 
-    def _user(self, user=None):
+    def _user(self, user: Optional[static.User] = None) -> Dict[str, Any]:
         result = {
             "functionalities": self._functionality(),
             "is_intranet": is_intranet(self.request),
             "two_factor_enable": self.two_factor_auth,
         }
         user = self.request.user if user is None else user
         if user is not None:
@@ -266,130 +277,132 @@
                     "username": user.username,
                     "email": user.email,
                     "roles": [{"name": r.name, "id": r.id} for r in user.roles],
                 }
             )
         return result
 
-    @view_config(route_name="loginuser", renderer="json")
-    def loginuser(self):
+    @view_config(route_name="loginuser", renderer="json")  # type: ignore
+    def loginuser(self) -> Dict[str, Any]:
         LOG.info("Client IP address: %s", self.request.client_addr)
-        set_common_headers(self.request, "login", NO_CACHE)
+        set_common_headers(self.request, "login", Cache.PRIVATE_NO)
         return self._user()
 
-    @view_config(route_name="change_password", renderer="json")
-    def change_password(self):
-        set_common_headers(self.request, "login", NO_CACHE)
+    @view_config(route_name="change_password", renderer="json")  # type: ignore
+    def change_password(self) -> pyramid.response.Response:
+        set_common_headers(self.request, "login", Cache.PRIVATE_NO)
 
         login = self.request.POST.get("login")
         old_password = self.request.POST.get("oldPassword")
         new_password = self.request.POST.get("newPassword")
         new_password_confirm = self.request.POST.get("confirmNewPassword")
+        otp = self.request.POST.get("otp")
         if new_password is None or new_password_confirm is None or old_password is None:
             raise HTTPBadRequest(
                 "'oldPassword', 'newPassword' and 'confirmNewPassword' should be available in "
                 "request params."
             )
+        if self.two_factor_auth and otp is None:
+            raise HTTPBadRequest("The second factor is missing.")
+        if login is None and self.request.user is None:
+            raise HTTPBadRequest("You should be logged in or 'login' should be available in request params.")
+        if new_password != new_password_confirm:
+            raise HTTPBadRequest("The new password and the new password confirmation do not match")
 
         if login is not None:
-            try:
-                user = self.request.get_user(login)
-                if user is None:
-                    LOG.info("The login '%s' does not exist.", login)
-                    raise HTTPUnauthorized("See server logs for details")
-            except NoResultFound:  # pragma: no cover
+            user = models.DBSession.query(static.User).filter_by(username=login).one_or_none()
+            if user is None:
                 LOG.info("The login '%s' does not exist.", login)
                 raise HTTPUnauthorized("See server logs for details")
 
             if self.two_factor_auth:
-                otp = self.request.POST.get("otp")
-                if otp is None:
-                    raise HTTPBadRequest("The second factor is missing.")
                 if not self._validate_2fa_totp(user, otp):
                     LOG.info("The second factor is wrong for user '%s'.", login)
                     raise HTTPUnauthorized("See server logs for details")
-
         else:
-            if self.request.user is not None:
-                user = self.request.user
-            else:
-                raise HTTPBadRequest(
-                    "You should be logged in or 'login' should be available in request params."
-                )
+            user = self.request.user
 
-        username = self.request.registry.validate_user(self.request, user.username, old_password)
-        if username is None:
-            LOG.info("The old password is wrong for user '%s'.", username)
+        if self.request.registry.validate_user(self.request, user.username, old_password) is None:
+            LOG.info("The old password is wrong for user '%s'.", user.username)
             raise HTTPUnauthorized("See server logs for details")
 
-        if new_password != new_password_confirm:
-            raise HTTPBadRequest("The new password and the new password confirmation do not match")
-
         user.password = new_password
         user.is_password_changed = True
         models.DBSession.flush()
-        LOG.info("Password changed for user '%s'", username)
+        LOG.info("Password changed for user '%s'", user.username)
 
-        headers = remember(self.request, username)
+        headers = remember(self.request, user.username)
         headers.append(("Content-Type", "text/json"))
         return set_common_headers(
-            self.request, "login", NO_CACHE, response=Response(json.dumps(self._user(user)), headers=headers)
+            self.request,
+            "login",
+            Cache.PRIVATE_NO,
+            response=Response(json.dumps(self._user(user)), headers=headers),
         )
 
     @staticmethod
-    def generate_password():
-        allchars = "123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"
-        rand = Random()
+    def generate_password() -> str:
+        all_chars = "123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"
 
-        password = ""
+        password = ""  # nosec
         for _ in range(8):
-            password += rand.choice(allchars)
+            password += secrets.choice(all_chars)
 
         return password
 
-    def _loginresetpassword(self):
+    def _loginresetpassword(
+        self,
+    ) -> Tuple[Optional[static.User], Optional[str], Optional[str], Optional[str]]:
         username = self.request.POST.get("login")
         if username is None:
             raise HTTPBadRequest("'login' should be available in request params.")
-        username = self.request.POST["login"]
         try:
             user = models.DBSession.query(static.User).filter(static.User.username == username).one()
-        except NoResultFound:  # pragma: no cover
-            return None, None, None, "The login '{}' does not exist.".format(username)
+        except NoResultFound:
+            return None, None, None, f"The login '{username}' does not exist."
 
-        if user.email is None or user.email == "":  # pragma: no cover
-            return None, None, None, "The user '{}' has no registered email address.".format(user.username)
+        if user.email is None or user.email == "":
+            return None, None, None, f"The user '{user.username}' has no registered email address."
 
         password = self.generate_password()
         user.set_temp_password(password)
 
         return user, username, password, None
 
-    @view_config(route_name="loginresetpassword", renderer="json")
-    def loginresetpassword(self):  # pragma: no cover
-        set_common_headers(self.request, "login", NO_CACHE)
+    @view_config(route_name="loginresetpassword", renderer="json")  # type: ignore
+    def loginresetpassword(self) -> Dict[str, Any]:
+        set_common_headers(self.request, "login", Cache.PRIVATE_NO)
 
         user, username, password, error = self._loginresetpassword()
         if error is not None:
             LOG.info(error)
-            raise HTTPUnauthorized("See server logs for details")
+            return {"success": True}
+
+        if user is None:
+            LOG.info("The user is not found without any error.")
+            return {"success": True}
+
         if user.deactivated:
             LOG.info("The user '%s' is deactivated", username)
-            raise HTTPUnauthorized("See server logs for details")
+            return {"success": True}
 
         send_email_config(
-            self.request.registry.settings, "reset_password", user.email, user=username, password=password
+            self.request.registry.settings,
+            "reset_password",
+            user.email,
+            user=username,
+            password=password,
+            application_url=self.request.route_url("base"),
+            current_url=self.request.current_route_url(),
         )
 
         return {"success": True}
 
-    @view_config(route_name="oauth2token")
-    def oauth2token(self):
-        set_common_headers(self.request, "login", PUBLIC_CACHE)
-
+    @view_config(route_name="oauth2token")  # type: ignore
+    def oauth2token(self) -> pyramid.response.Response:
         LOG.debug(
             "Call OAuth create_token_response with:\nurl: %s\nmethod: %s\nbody:\n%s",
             self.request.current_route_url(_query=self.request.GET),
             self.request.method,
             self.request.body,
         )
         headers, body, status = oauth2.get_oauth_client(self.request.registry.settings).create_token_response(
@@ -408,31 +421,31 @@
         if status != 200:
             if body:
                 raise exception_response(status, detail=body)
             raise exception_response(status)
         return set_common_headers(
             self.request,
             "login",
-            NO_CACHE,
+            Cache.PRIVATE_NO,
             response=Response(body, headers=headers.items()),
         )
 
-    @view_config(route_name="oauth2loginform", renderer="login.html")
-    def oauth2loginform(self):
-        set_common_headers(self.request, "login", PUBLIC_CACHE)
+    @view_config(route_name="oauth2loginform", renderer="login.html")  # type: ignore
+    def oauth2loginform(self) -> Dict[str, Any]:
+        set_common_headers(self.request, "login", Cache.PUBLIC)
 
         if self.request.user:
             self._oauth2_login(self.request.user)
 
         login_param = {"type": "oauth2"}
         login_param.update(self.request.params)
         return {
             "lang": self.lang,
             "login_params": login_param,
             "two_fa": self.two_factor_auth,
         }
 
-    @view_config(route_name="notlogin", renderer="notlogin.html")
-    def notlogin(self):
-        set_common_headers(self.request, "login", PUBLIC_CACHE)
+    @view_config(route_name="notlogin", renderer="notlogin.html")  # type: ignore
+    def notlogin(self) -> Dict[str, Any]:
+        set_common_headers(self.request, "login", Cache.PUBLIC)
 
         return {"lang": self.lang}
```

## c2cgeoportal_geoportal/views/mapserverproxy.py

```diff
@@ -1,9 +1,7 @@
-# -*- coding: utf-8 -*-
-
 # Copyright (c) 2011-2021, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
@@ -25,42 +23,47 @@
 
 # The views and conclusions contained in the software and documentation are those
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
 
 import logging
-from typing import Any, Dict  # noqa, pylint: disable=unused-import
+from typing import Any, Dict, Set
 
-from pyramid.httpexceptions import HTTPUnauthorized
+from pyramid.httpexceptions import HTTPFound, HTTPInternalServerError, HTTPUnauthorized
 from pyramid.request import Request
 from pyramid.response import Response
 from pyramid.view import view_config
 
+from c2cgeoportal_commons.lib.url import Url
 from c2cgeoportal_commons.models import main
 from c2cgeoportal_geoportal.lib import get_roles_id, get_roles_name
-from c2cgeoportal_geoportal.lib.caching import NO_CACHE, PRIVATE_CACHE, PUBLIC_CACHE, get_region
+from c2cgeoportal_geoportal.lib.caching import get_region
+from c2cgeoportal_geoportal.lib.common_headers import Cache
 from c2cgeoportal_geoportal.lib.filter_capabilities import filter_capabilities
 from c2cgeoportal_geoportal.lib.functionality import get_mapserver_substitution_params
 from c2cgeoportal_geoportal.views.ogcproxy import OGCProxy
 
 CACHE_REGION = get_region("std")
 LOG = logging.getLogger(__name__)
 
 
 class MapservProxy(OGCProxy):
+    """Proxy for OGC (WMS/WFS) servers."""
 
     params: Dict[str, str] = {}
 
     def __init__(self, request: Request) -> None:
         OGCProxy.__init__(self, request)
         self.user = self.request.user
 
-    @view_config(route_name="mapserverproxy")
-    @view_config(route_name="mapserverproxy_post")
+    @view_config(route_name="mapserverproxy")  # type: ignore
+    @view_config(route_name="mapserverproxy_post")  # type: ignore
+    @view_config(route_name="mapserverproxy_get_path")  # type: ignore
+    @view_config(route_name="mapserverproxy_post_path")  # type: ignore
     def proxy(self) -> Response:
         if self.user is None and "authentication_required" in self.request.params:
             LOG.debug("proxy() detected authentication_required")
             if self.request.registry.settings.get("basicauth", "False").lower() == "true":
                 raise HTTPUnauthorized(
                     headers={"WWW-Authenticate": 'Basic realm="Access to restricted layers"'}
                 )
@@ -71,15 +74,15 @@
         # GetFeatureInfo requests. For GetLegendGraphic requests we do not send layer_name, but MapServer
         # should not use the DATA string for GetLegendGraphic.
 
         if self.ogc_server.auth == main.OGCSERVER_AUTH_STANDARD:
             self.params["role_ids"] = ",".join([str(e) for e in get_roles_id(self.request)])
 
             # In some application we want to display the features owned by a user than we need his id.
-            self.params["user_id"] = self.user.id if self.user is not None else "-1"  # pragma: no cover
+            self.params["user_id"] = self.user.id if self.user is not None else "-1"
 
         # Do not allows direct variable substitution
         for k in list(self.params.keys()):
             if len(k) > 1 and k[:2].capitalize() == "S_":
                 LOG.warning("Direct substitution not allowed (%s=%s).", k, self.params[k])
                 del self.params[k]
 
@@ -93,53 +96,59 @@
         # Get method
         method = self.request.method
 
         # we want the browser to cache GetLegendGraphic and
         # DescribeFeatureType requests
         use_cache = False
 
+        errors: Set[str] = set()
         if method == "GET":
             # For GET requests, params are added only if the self.request
             # parameter is actually provided.
             if "request" not in self.lower_params:
-                self.params = {}  # pragma: no cover
+                self.params = {}
             else:
                 if self.ogc_server.type != main.OGCSERVER_TYPE_QGISSERVER or "user_id" not in self.params:
 
                     use_cache = self.lower_params["request"] in ("getlegendgraphic",)
 
                     # no user_id and role_id or cached queries
                     if use_cache and "user_id" in self.params:
                         del self.params["user_id"]
                     if use_cache and "role_ids" in self.params:
                         del self.params["role_ids"]
 
             if "service" in self.lower_params and self.lower_params["service"] == "wfs":
-                _url = self._get_wfs_url()
+                _url = self._get_wfs_url(errors)
             else:
-                _url = self._get_wms_url()
+                _url = self._get_wms_url(errors)
         else:
             # POST means WFS
-            _url = self._get_wfs_url()
+            _url = self._get_wfs_url(errors)
 
-        cache_control = PRIVATE_CACHE
-        if method == "GET" and "service" in self.lower_params and self.lower_params["service"] == "wms":
-            if self.lower_params.get("request") in ("getmap", "getfeatureinfo"):
-                cache_control = NO_CACHE
-            elif self.lower_params.get("request") == "getlegendgraphic":
-                cache_control = PUBLIC_CACHE
-        elif method == "GET" and "service" in self.lower_params and self.lower_params["service"] == "wfs":
-            if self.lower_params.get("request") == "getfeature":
-                cache_control = NO_CACHE
-        elif method != "GET":
-            cache_control = NO_CACHE
+        if _url is None:
+            LOG.error("Error getting the URL:\n%s", "\n".join(errors))
+            raise HTTPInternalServerError()
+
+        cache_control = (
+            Cache.PRIVATE
+            if method == "GET"
+            and self.lower_params.get("request")
+            in (
+                "getcapabilities",
+                "getlegendgraphic",
+                "describefeaturetype",
+                "describelayer",
+            )
+            else Cache.PRIVATE_NO
+        )
 
-        headers = self._get_headers()
+        headers = self.get_headers()
         # Add headers for Geoserver
-        if self.ogc_server.auth == main.OGCSERVER_AUTH_GEOSERVER:
+        if self.ogc_server.auth == main.OGCSERVER_AUTH_GEOSERVER and self.user is not None:
             headers["sec-username"] = self.user.username
             headers["sec-roles"] = ";".join(get_roles_name(self.request))
 
         response = self._proxy_callback(
             cache_control,
             url=_url,
             params=self.params,
@@ -153,15 +162,23 @@
             and not response.content_type.startswith("image/")
             and response.status_code < 400
         ):
             response.status_code = 400
 
         return response
 
-    def _proxy_callback(self, cache_control: int, url: str, params: dict, **kwargs: Any) -> Response:
+    def _proxy_callback(
+        self, cache_control: Cache, url: Url, params: Dict[str, str], **kwargs: Any
+    ) -> Response:
+        if self.request.matched_route.name.endswith("_path"):
+            if self.request.matchdict["path"] == ("favicon.ico",):
+                return HTTPFound("/favicon.ico")
+            url = url.clone()
+            url.path = self.request.path
+
         response = self._proxy(url=url, params=params, **kwargs)
 
         content = response.content
         if self.lower_params.get("request") == "getcapabilities":
             content = filter_capabilities(
                 response.text,
                 self.lower_params.get("service") == "wms",
```

## c2cgeoportal_geoportal/views/memory.py

```diff
@@ -1,9 +1,7 @@
-# -*- coding: utf-8 -*-
-
 # Copyright (c) 2018-2021, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
@@ -26,58 +24,60 @@
 # The views and conclusions contained in the software and documentation are those
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
 
 import logging
 import time
-from typing import Any, Dict
+from typing import Any, Dict, cast
 
+import pyramid.request
 from c2cwsgiutils import broadcast
 from c2cwsgiutils.auth import auth_view
 from c2cwsgiutils.debug import get_size
 from pyramid.view import view_config
 
 from c2cgeoportal_geoportal.lib.caching import MEMORY_CACHE_DICT
 from c2cgeoportal_geoportal.views import raster
 
 LOG = logging.getLogger(__name__)
 
 
-@view_config(route_name="memory", renderer="fast_json")
-def memory(request):
+@view_config(route_name="memory", renderer="fast_json")  # type: ignore
+def memory(request: pyramid.request.Request) -> Dict[str, Any]:
+    """Offer an authenticated view throw c2cwsgiutils to provide some memory information."""
     auth_view(request)
-    return _memory()
+    return cast(Dict[str, Any], _memory())
 
 
-def _nice_type_name(obj, dogpile_cache=False):
+def _nice_type_name(obj: Any, dogpile_cache: bool = False) -> str:
     # See: https://dogpilecache.sqlalchemy.org/en/latest/api.html#dogpile.cache.api.CachedValue
     if dogpile_cache:
         obj, _ = obj
     type_ = type(obj)
-    return "{}.{}".format(type_.__module__, type_.__name__)
+    return f"{type_.__module__}.{type_.__name__}"
 
 
-def _process_dict(dict_, dogpile_cache=False):
+def _process_dict(dict_: Dict[str, Any], dogpile_cache: bool = False) -> Dict[str, Any]:
     # Timeout after one minute, must be set to a bit less that the timeout of the broadcast
     timeout = time.monotonic() + 20
 
     return {
         "elements": sorted(
-            [
+            (
                 {
                     "key": key,
                     "type": _nice_type_name(value, dogpile_cache),
                     "repr": repr(value),
                     "id": id(value),
                     "size_kb": get_size(value) / 1024 if time.monotonic() < timeout else -1,
                 }
                 for key, value in dict_.items()
-            ],
-            key=lambda i: -i["size_kb"],
+            ),
+            key=lambda i: cast(float, -i["size_kb"]),
         ),
         "id": id(dict_),
         "size_kb": get_size(dict_) / 1024 if time.monotonic() < timeout else -1,
         "timeout": time.monotonic() > timeout,
     }
```

## c2cgeoportal_geoportal/views/ogcproxy.py

```diff
@@ -1,10 +1,8 @@
-# -*- coding: utf-8 -*-
-
-# Copyright (c) 2011-2020, Camptocamp SA
+# Copyright (c) 2011-2022, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -24,74 +22,94 @@
 # SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 
 # The views and conclusions contained in the software and documentation are those
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
 import logging
-from typing import Set
+from typing import Dict, Optional, Set, cast
 
+import pyramid.request
 from pyramid.httpexceptions import HTTPBadRequest
 from sqlalchemy.orm.exc import NoResultFound
 
-from c2cgeoportal_commons.lib.url import get_url2
-from c2cgeoportal_commons.models import DBSession
-from c2cgeoportal_commons.models.main import OGCServer
+from c2cgeoportal_commons.lib.url import Url, get_url2
+from c2cgeoportal_commons.models import DBSession, main
 from c2cgeoportal_geoportal.lib.caching import get_region
 from c2cgeoportal_geoportal.views.proxy import Proxy
 
 CACHE_REGION = get_region("std")
 LOG = logging.getLogger(__name__)
 
 
 class OGCProxy(Proxy):
-    def __init__(self, request, has_default_ogc_server=False):
+    """
+    Proxy implementation that manly manage the ogcserver parameter.
+
+    Then load the corresponding OGCServer.
+    """
+
+    def __init__(self, request: pyramid.request.Request, has_default_ogc_server: bool = False):
         Proxy.__init__(self, request)
 
         # params hold the parameters we"re going to send to backend
         self.params = dict(self.request.params)
 
         # reset possible value of role_id and user_id
-        if "role_id" in self.params:  # pragma: no cover
+        if "role_id" in self.params:
             del self.params["role_id"]
-        if "user_id" in self.params:  # pragma: no cover
+        if "user_id" in self.params:
             del self.params["user_id"]
 
         self.lower_params = self._get_lower_params(self.params)
-        if not has_default_ogc_server and "ogcserver" not in self.params:
+
+        # We need original case for OGCSERVER parameter value
+        self.lower_key_params = {k.lower(): v for k, v in self.params.items()}
+
+        if "ogcserver" in request.matchdict:
+            self.ogc_server = self._get_ogcserver_byname(request.matchdict["ogcserver"])
+        elif "ogcserver" in self.lower_key_params:
+            self.ogc_server = self._get_ogcserver_byname(self.lower_key_params["ogcserver"])
+        elif not has_default_ogc_server:
             raise HTTPBadRequest("The querystring argument 'ogcserver' is required")
-        if "ogcserver" in self.params:
-            self.ogc_server = self._get_ogcserver_byname(self.params["ogcserver"])
 
-    @CACHE_REGION.cache_on_arguments()
-    def _get_ogcserver_byname(self, name):  # pylint: disable=no-self-use
+    @CACHE_REGION.cache_on_arguments()  # type: ignore
+    def _get_ogcserver_byname(self, name: str) -> main.OGCServer:  # pylint: disable=no-self-use
         try:
-            result = DBSession.query(OGCServer).filter(OGCServer.name == name).one()
+            result = DBSession.query(main.OGCServer).filter(main.OGCServer.name == name).one()
             DBSession.expunge(result)
-            return result
-        except NoResultFound:  # pragma nocover
-            raise HTTPBadRequest(
-                "OGSServer '{}' does not exists (existing: {}).".format(
-                    name, ",".join([t[0] for t in DBSession.query(OGCServer.name).all()])
-                )
+            return cast(main.OGCServer, result)
+        except NoResultFound:
+            raise HTTPBadRequest(  # pylint: disable=raise-missing-from
+                f"The OGC Server '{name}' does not exist (existing: "
+                f"{','.join([t[0] for t in DBSession.query(main.OGCServer.name).all()])})."
             )
 
-    def _get_wms_url(self):
+    def _get_wms_url(self, errors: Set[str]) -> Optional[Url]:
         ogc_server = self.ogc_server
-        errors: Set[str] = set()
-        url = get_url2("The OGC server '{}'".format(ogc_server.name), ogc_server.url, self.request, errors)
-        if errors:  # pragma: no cover
+        url = get_url2(f"The OGC server '{ogc_server.name}'", ogc_server.url, self.request, errors)
+        if errors:
             LOG.error("\n".join(errors))
         return url
 
-    def _get_wfs_url(self):
+    def _get_wfs_url(self, errors: Set[str]) -> Optional[Url]:
         ogc_server = self.ogc_server
-        errors: Set[str] = set()
         url = get_url2(
-            "The OGC server (WFS) '{}'".format(ogc_server.name),
+            f"The OGC server (WFS) '{ogc_server.name}'",
             ogc_server.url_wfs or ogc_server.url,
             self.request,
             errors,
         )
-        if errors:  # pragma: no cover
+        if errors:
             LOG.error("\n".join(errors))
         return url
+
+    def get_headers(self) -> Dict[str, str]:
+        headers: Dict[str, str] = super().get_headers()
+        if self.ogc_server.type == main.OGCSERVER_TYPE_QGISSERVER:
+            if self.request.matched_route.name.endswith("_path"):
+                headers["X-Qgis-Service-Url"] = self.request.current_route_url(path=[], _query={})
+            else:
+                headers["X-Qgis-Service-Url"] = self.request.current_route_url(
+                    _query={"ogcserver": self.ogc_server.name}
+                )
+        return headers
```

## c2cgeoportal_geoportal/views/pdfreport.py

```diff
@@ -1,9 +1,7 @@
-# -*- coding: utf-8 -*-
-
 # Copyright (c) 2011-2021, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
@@ -25,52 +23,57 @@
 
 # The views and conclusions contained in the software and documentation are those
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
 import logging
 from json import dumps, loads
+from typing import Any, Dict, List, Union
 
+import pyramid.request
+import pyramid.response
 from pyramid.httpexceptions import HTTPBadRequest, HTTPForbidden
 from pyramid.view import view_config
 
 from c2cgeoportal_commons import models
-from c2cgeoportal_commons.lib.url import add_url_params
+from c2cgeoportal_commons.lib.url import Url
 from c2cgeoportal_commons.models import main
-from c2cgeoportal_geoportal.lib.caching import NO_CACHE
+from c2cgeoportal_geoportal.lib.common_headers import Cache
 from c2cgeoportal_geoportal.lib.layers import get_private_layers, get_protected_layers
 from c2cgeoportal_geoportal.views.ogcproxy import OGCProxy
 
 LOG = logging.getLogger(__name__)
 
 
-class PdfReport(OGCProxy):  # pragma: no cover
+class PdfReport(OGCProxy):
+    """All the views concerned the PDF report."""
 
     layername = None
 
-    def __init__(self, request):
+    def __init__(self, request: pyramid.request.Request):
         OGCProxy.__init__(self, request)
         self.config = self.request.registry.settings.get("pdfreport", {})
 
-    def _do_print(self, spec):
+    def _do_print(self, spec: Dict[str, Any]) -> pyramid.response.Response:
         """Create and get report PDF."""
-
         headers = dict(self.request.headers)
         headers["Content-Type"] = "application/json"
         response = self._proxy(
-            "{0!s}/buildreport.{1!s}".format(self.config["print_url"], spec["outputFormat"]),
+            Url(f"{self.config['print_url']}/buildreport.{spec['outputFormat']}"),
             method="POST",
             body=dumps(spec).encode("utf-8"),
             headers=headers,
         )
 
-        return self._build_response(response, response.content, NO_CACHE, "pdfreport")
+        return self._build_response(response, response.content, Cache.PRIVATE_NO, "pdfreport")
 
     @staticmethod
-    def _build_map(mapserv_url, vector_request_url, srs, map_config):
+    def _build_map(
+        mapserv_url: str, vector_request_url: str, srs: str, map_config: Dict[str, Any]
+    ) -> Dict[str, Any]:
         backgroundlayers = map_config["backgroundlayers"]
         imageformat = map_config["imageformat"]
         return {
             "projection": srs,
             "dpi": 254,
             "rotation": 0,
             "bbox": [0, 0, 1000000, 1000000],
@@ -94,16 +97,16 @@
                     "serverType": "mapserver",
                     "layers": backgroundlayers,
                     "imageFormat": imageformat,
                 },
             ],
         }
 
-    @view_config(route_name="pdfreport", renderer="json")
-    def get_report(self):
+    @view_config(route_name="pdfreport", renderer="json")  # type: ignore
+    def get_report(self) -> pyramid.response.Response:
         self.layername = self.request.matchdict["layername"]
         layer_config = self.config["layers"].get(self.layername)
 
         multiple = layer_config.get("multiple", False)
         ids = self.request.matchdict["ids"]
         if multiple:
             ids = ids.split(",")
@@ -134,26 +137,27 @@
                 raise HTTPForbidden
 
         srs = layer_config["srs"]
 
         mapserv_url = self.request.route_url(
             "mapserverproxy", _query={"ogcserver": layer_config["ogc_server"]}
         )
-        vector_request_url = add_url_params(
-            mapserv_url,
+        url = Url(mapserv_url)
+        url.add_query(
             {
                 "service": "WFS",
                 "version": "1.1.0",
                 "outputformat": "gml3",
                 "request": "GetFeature",
                 "typeName": self.layername,
                 "featureid": ",".join(features_ids),
                 "srsName": srs,
-            },
+            }
         )
+        vector_request_url = url.url()
 
         spec = layer_config["spec"]
         if spec is None:
             spec = {
                 "layout": self.layername,
                 "outputFormat": "pdf",
                 "attributes": {"ids": [{"id": id_} for id_ in ids]} if multiple else {"id": id},
@@ -217,23 +221,23 @@
                         "mapserv_url": mapserv_url,
                         "vector_request_url": vector_request_url,
                     }
                 )
 
         return self._do_print(spec)
 
-    def walker(self, spec, name, value):
+    def walker(self, spec: Union[Dict[str, Any], List[Dict[str, Any]]], name: str, value: Any) -> None:
         if isinstance(spec, dict):
             for k, v in spec.items():
                 if isinstance(v, str):
                     if v == name:
                         spec[k] = value
                 else:
                     self.walker(v, name, value)
 
         if isinstance(spec, list):
-            for k, v in enumerate(spec):
-                if isinstance(v, str):
-                    if v == name:
-                        spec[k] = value
+            for k2, v2 in enumerate(spec):
+                if isinstance(v2, str):
+                    if v2 == name:
+                        spec[k2] = value
                 else:
-                    self.walker(v, name, value)
+                    self.walker(v2, name, value)
```

## c2cgeoportal_geoportal/views/printproxy.py

```diff
@@ -1,9 +1,7 @@
-# -*- coding: utf-8 -*-
-
 # Copyright (c) 2011-2021, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
@@ -27,110 +25,118 @@
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
 
 import json
 import logging
 import urllib.parse
+from typing import Dict, List, Tuple
 
+import pyramid.request
+import pyramid.response
+import requests
 from pyramid.httpexceptions import HTTPBadGateway, HTTPFound
 from pyramid.view import view_config
 
+from c2cgeoportal_commons.lib.url import Url
 from c2cgeoportal_geoportal.lib import is_intranet
-from c2cgeoportal_geoportal.lib.caching import PRIVATE_CACHE, get_region
+from c2cgeoportal_geoportal.lib.caching import get_region
+from c2cgeoportal_geoportal.lib.common_headers import Cache
 from c2cgeoportal_geoportal.lib.functionality import get_functionality
 from c2cgeoportal_geoportal.views.proxy import Proxy
 
 LOG = logging.getLogger(__name__)
 CACHE_REGION = get_region("std")
 
 
-class PrintProxy(Proxy):  # pragma: no cover
-    def __init__(self, request):
+class PrintProxy(Proxy):
+    """All the view concerned the print."""
+
+    def __init__(self, request: pyramid.request.Request):
         Proxy.__init__(self, request)
 
-    @view_config(route_name="printproxy_capabilities")
-    def capabilities(self):
+    @view_config(route_name="printproxy_capabilities")  # type: ignore
+    def capabilities(self) -> pyramid.response.Response:
         """Get print capabilities."""
-
         templates = get_functionality("print_template", self.request, is_intranet(self.request))
 
         # get query string
         params = dict(self.request.params)
         query_string = urllib.parse.urlencode(params)
 
-        resp, content = self._capabilities(templates, query_string, self.request.method)
-
-        return self._build_response(resp, content, PRIVATE_CACHE, "print")
+        resp, content = self._capabilities(
+            templates, query_string, self.request.method, self.request.referrer
+        )
 
-    @CACHE_REGION.cache_on_arguments()
-    def _capabilities(self, templates, query_string, method):
+        response = self._build_response(resp, content, Cache.PRIVATE, "print")
+        # Mapfish print will check the referer header to return the capabilities.
+        response.vary += ("Referer",)
+        return response
+
+    @CACHE_REGION.cache_on_arguments()  # type: ignore
+    def _capabilities(
+        self, templates: List[str], query_string: Dict[str, str], method: str, referrer: str
+    ) -> Tuple[requests.Response, str]:
         del query_string  # Just for caching
         del method  # Just for caching
+        del referrer  # Just for caching
         # get URL
         _url = self.request.get_organization_print_url() + "/capabilities.json"
 
-        response = self._proxy(_url)
+        response = self._proxy(Url(_url))
+        response.raise_for_status()
 
         if self.request.method == "GET":
-            if response.ok:
-                try:
-                    capabilities = response.json()
-                except json.decoder.JSONDecodeError as e:
-                    # log and raise
-                    LOG.error("Unable to parse capabilities.")
-                    LOG.exception(e)
-                    LOG.error(response.text)
-                    raise HTTPBadGateway(response.text)
-
-                capabilities["layouts"] = list(
-                    layout for layout in capabilities["layouts"] if layout["name"] in templates
-                )
-
-                pretty = self.request.params.get("pretty", "false") == "true"
-                content = json.dumps(
-                    capabilities, separators=None if pretty else (",", ":"), indent=4 if pretty else None
-                )
+            try:
+                capabilities = response.json()
+            except json.decoder.JSONDecodeError:
+                LOG.exception("Unable to parse capabilities: %s", response.text)
+                raise HTTPBadGateway(response.text)  # pylint: disable=raise-missing-from
+
+            capabilities["layouts"] = list(
+                layout for layout in capabilities["layouts"] if layout["name"] in templates
+            )
+
+            pretty = self.request.params.get("pretty", "false") == "true"
+            content = json.dumps(
+                capabilities, separators=None if pretty else (",", ":"), indent=4 if pretty else None
+            )
         else:
             content = ""
 
         return response, content
 
-    @view_config(route_name="printproxy_report_create")
-    def report_create(self):
+    @view_config(route_name="printproxy_report_create")  # type: ignore
+    def report_create(self) -> pyramid.response.Response:
         """Create PDF."""
         return self._proxy_response(
             "print",
-            "{0!s}/report.{1!s}".format(
-                self.request.get_organization_print_url(), self.request.matchdict.get("format")
+            Url(
+                f"{ self.request.get_organization_print_url()}/report.{self.request.matchdict.get('format')}"
             ),
         )
 
-    @view_config(route_name="printproxy_status")
-    def status(self):
+    @view_config(route_name="printproxy_status")  # type: ignore
+    def status(self) -> pyramid.response.Response:
         """PDF status."""
         return self._proxy_response(
             "print",
-            "{0!s}/status/{1!s}.json".format(
-                self.request.get_organization_print_url(), self.request.matchdict.get("ref")
+            Url(
+                f"{self.request.get_organization_print_url()}/status/{self.request.matchdict.get('ref')}.json"
             ),
         )
 
-    @view_config(route_name="printproxy_cancel")
-    def cancel(self):
+    @view_config(route_name="printproxy_cancel")  # type: ignore
+    def cancel(self) -> pyramid.response.Response:
         """PDF cancel."""
         return self._proxy_response(
             "print",
-            "{0!s}/cancel/{1!s}".format(
-                self.request.get_organization_print_url(), self.request.matchdict.get("ref")
-            ),
+            Url(f"{self.request.get_organization_print_url()}/cancel/{self.request.matchdict.get('ref')}"),
         )
 
-    @view_config(route_name="printproxy_report_get")
-    def report_get(self):
+    @view_config(route_name="printproxy_report_get")  # type: ignore
+    def report_get(self) -> pyramid.response.Response:
         """Get the PDF."""
-        url = "{0!s}/report/{1!s}".format(
-            self.request.get_organization_print_url(), self.request.matchdict.get("ref")
-        )
+        url = Url(f"{self.request.get_organization_print_url()}/report/{self.request.matchdict.get('ref')}")
         if self.request.registry.settings.get("print_get_redirect", False):
-            raise HTTPFound(location=url)
+            raise HTTPFound(location=url.url())
         return self._proxy_response("print", url)
```

## c2cgeoportal_geoportal/views/profile.py

```diff
@@ -1,10 +1,8 @@
-# -*- coding: utf-8 -*-
-
-# Copyright (c) 2012-2020, Camptocamp SA
+# Copyright (c) 2012-2021, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -26,55 +24,60 @@
 # The views and conclusions contained in the software and documentation are those
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
 
 import math
 from decimal import Decimal
+from typing import Any, Dict, List, Tuple
 
 import geojson
+import pyramid.request
 from pyramid.httpexceptions import HTTPNotFound
 from pyramid.i18n import TranslationStringFactory
 from pyramid.view import view_config
 
-from c2cgeoportal_geoportal.lib.caching import NO_CACHE, set_common_headers
+from c2cgeoportal_geoportal.lib.common_headers import Cache, set_common_headers
 from c2cgeoportal_geoportal.views.raster import Raster
 
 _ = TranslationStringFactory("c2cgeoportal")
 
 
 class Profile(Raster):
-    def __init__(self, request):
+    """All the view concerned the profile."""
+
+    def __init__(self, request: pyramid.request.Request):
         Raster.__init__(self, request)
 
-    @view_config(route_name="profile.json", renderer="fast_json")
-    def json(self):
-        """answers to /profile.json"""
+    @view_config(route_name="profile.json", renderer="fast_json")  # type: ignore
+    def json(self) -> Dict[str, Any]:
+        """Answer to /profile.json."""
         _, points = self._compute_points()
-        set_common_headers(self.request, "profile", NO_CACHE)
+        set_common_headers(self.request, "profile", Cache.PUBLIC_NO)
         return {"profile": points}
 
-    def _compute_points(self):
-        """Compute the alt=fct(dist) array"""
+    def _compute_points(self) -> Tuple[List[str], List[Dict[str, Any]]]:
+        """Compute the alt=fct(dist) array."""
         geom = geojson.loads(self.request.params["geom"], object_hook=geojson.GeoJSON.to_instance)
 
+        layers: List[str]
         if "layers" in self.request.params:
             rasters = {}
             layers = self.request.params["layers"].split(",")
             for layer in layers:
                 if layer in self.rasters:
                     rasters[layer] = self.rasters[layer]
                 else:
-                    raise HTTPNotFound("Layer {0!s} not found".format(layer))
+                    raise HTTPNotFound(f"Layer {layer!s} not found")
         else:
             rasters = self.rasters
             layers = list(rasters.keys())
             layers.sort()
 
-        points = []
+        points: List[Dict[str, Any]] = []
 
         dist = 0
         prev_coord = None
         coords = self._create_points(geom.coordinates, int(self.request.params["nbPoints"]))
         for coord in coords:
             if prev_coord is not None:
                 dist += self._dist(prev_coord, coord)
@@ -88,39 +91,37 @@
             rounded_dist = Decimal(str(dist)).quantize(Decimal("0.1"))
             points.append({"dist": rounded_dist, "values": values, "x": coord[0], "y": coord[1]})
             prev_coord = coord
 
         return layers, points
 
     @staticmethod
-    def _dist(coord1, coord2):
-        """Compute the distance between 2 points"""
+    def _dist(coord1: Tuple[float, float], coord2: Tuple[float, float]) -> float:
+        """Compute the distance between 2 points."""
         return math.sqrt(math.pow(coord1[0] - coord2[0], 2.0) + math.pow(coord1[1] - coord2[1], 2.0))
 
-    def _create_points(self, coords, nb_points):
-        """Add some points in order to reach roughly the asked number of points"""
+    def _create_points(self, coords: List[Tuple[float, float]], nb_points: int) -> List[Tuple[float, float]]:
+        """Add some points in order to reach roughly the asked number of points."""
         total_length = 0
         prev_coord = None
         for coord in coords:
             if prev_coord is not None:
                 total_length += self._dist(prev_coord, coord)
             prev_coord = coord
 
         if total_length == 0.0:
             return coords
 
-        result = []
+        result: List[Tuple[float, float]] = []
         prev_coord = None
         for coord in coords:
             if prev_coord is not None:
                 cur_length = self._dist(prev_coord, coord)
-                cur_nb_points = int(nb_points * cur_length / total_length + 0.5)
-                if cur_nb_points < 1:
-                    cur_nb_points = 1
+                cur_nb_points = max(int(nb_points * cur_length / total_length + 0.5), 1)
                 dx = (coord[0] - prev_coord[0]) / float(cur_nb_points)
                 dy = (coord[1] - prev_coord[1]) / float(cur_nb_points)
                 for i in range(1, cur_nb_points + 1):
-                    result.append([prev_coord[0] + dx * i, prev_coord[1] + dy * i])
+                    result.append((prev_coord[0] + dx * i, prev_coord[1] + dy * i))
             else:
-                result.append([coord[0], coord[1]])
+                result.append((coord[0], coord[1]))
             prev_coord = coord
         return result
```

## c2cgeoportal_geoportal/views/proxy.py

```diff
@@ -1,10 +1,10 @@
 # -*- coding: utf-8 -*-
 
-# Copyright (c) 2011-2021, Camptocamp SA
+# Copyright (c) 2011-2022, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -26,183 +26,200 @@
 # The views and conclusions contained in the software and documentation are those
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
 
 import logging
 import sys
-import urllib.parse
-from typing import Dict, List, Union
+from typing import Any, Dict, List, Optional, Union
 
+import pyramid.request
+import pyramid.response
 import requests
 from pyramid.httpexceptions import HTTPBadGateway, exception_response
-from pyramid.response import Response
 
-from c2cgeoportal_geoportal.lib.caching import (
-    NO_CACHE,
-    PRIVATE_CACHE,
-    PUBLIC_CACHE,
-    get_region,
-    set_common_headers,
-)
+from c2cgeoportal_commons.lib.url import Url
+from c2cgeoportal_geoportal.lib.caching import get_region
+from c2cgeoportal_geoportal.lib.common_headers import Cache, set_common_headers
+from c2cgeoportal_geoportal.views import restrict_headers
 
 LOG = logging.getLogger(__name__)
 CACHE_REGION = get_region("std")
 
 
 class Proxy:
-    def __init__(self, request):
+    """Some methodes used by all the proxy."""
+
+    def __init__(self, request: pyramid.request.Request):
         self.request = request
-        self.host_forward_host = request.registry.settings["host_forward_host"]
+        self.host_forward_host = request.registry.settings.get("host_forward_host", [])
+        self.headers_whitelist = request.registry.settings.get("headers_whitelist", [])
+        self.headers_blacklist = request.registry.settings.get("headers_blacklist", [])
         self.http_options = self.request.registry.settings.get("http_options", {})
 
-    def _proxy(self, url, params=None, method=None, cache=False, body=None, headers=None):
-        # get query string
+    def _proxy(
+        self,
+        url: Url,
+        params: Optional[Dict[str, str]] = None,
+        method: Optional[str] = None,
+        cache: bool = False,
+        body: Optional[bytes] = None,
+        headers: Optional[Dict[str, str]] = None,
+    ) -> requests.models.Response:
+        # Get query string
         params = dict(self.request.params) if params is None else params
-        parsed_url = urllib.parse.urlparse(url)
-        url_params = urllib.parse.parse_qs(parsed_url.query)
-        all_params: Dict[str, Union[str]] = {}
-        all_params.update(params)
-        all_params.update({k: ",".join(v) for k, v in url_params.items()})
-        query_string = urllib.parse.urlencode(all_params)
-
-        if parsed_url.port is None:
-            url = "{}://{}{}?{}".format(parsed_url.scheme, parsed_url.hostname, parsed_url.path, query_string)
-        else:  # pragma: no cover
-            url = "{}://{}:{:d}{}?{}".format(
-                parsed_url.scheme, parsed_url.hostname, parsed_url.port, parsed_url.path, query_string
-            )
+        url = url.clone().add_query(params, True)
 
         LOG.debug("Send query to URL:\n%s.", url)
 
         if method is None:
             method = self.request.method
 
-        if headers is None:  # pragma: no cover
-            headers = dict(self.request.headers)
+        headers = dict(self.request.headers if headers is None else headers)
 
-        # Forward request to target (without Host Header)
-        if parsed_url.hostname not in self.host_forward_host and "Host" in headers:  # pragma: no cover
+        # Forward request to target (without Host Header).
+        # The original Host will be added back by pyramid.
+        if url.hostname not in self.host_forward_host and "Host" in headers:
             headers.pop("Host")
 
         # Forward the request tracking ID to the other service. This will allow to follow the logs belonging
         # to a single request coming from the user
         headers.setdefault("X-Request-ID", self.request.c2c_request_id)
-        # If we releay want to respect the specification, we should chain with the content of the previous
+        # If we really want to respect the specification, we should chain with the content of the previous
         # proxy, see also:
         # https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Forwarded
         forwarded = {"for": self.request.client_addr, "proto": self.request.scheme}
         if "Host" in self.request.headers:
             forwarded["host"] = self.request.headers["Host"]
         forwarded_str = ";".join(["=".join(e) for e in forwarded.items()])
         if "Forwarded" in headers:
             headers["Forwarded"] = ",".join([headers["Forwarded"], forwarded_str])
         else:
             headers["Forwarded"] = forwarded_str
+        # Set alternative "X-Forwarded" headers
+        for forwarded_elements in reversed(headers["Forwarded"].split(",")):
+            for element in forwarded_elements.split(";"):
+                key, value = element.split("=")
+                header_key = f"X-Forwarded-{key.capitalize()}"
+                header_value = headers.get(header_key)
+                headers[header_key] = value if header_value is None else ", ".join([header_value, value])
 
         if not cache:
             headers["Cache-Control"] = "no-cache"
 
-        if method in ("POST", "PUT") and body is None:  # pragma: no cover
+        if method in ("POST", "PUT") and body is None:
             body = self.request.body
 
+        headers = restrict_headers(headers, self.headers_whitelist, self.headers_blacklist)
+
         try:
             if method in ("POST", "PUT"):
-                response = requests.request(method, url, data=body, headers=headers, **self.http_options)
+                response = requests.request(
+                    method, url.url(), data=body, headers=headers, **self.http_options
+                )
             else:
-                response = requests.request(method, url, headers=headers, **self.http_options)
-        except Exception:  # pragma: no cover
+                response = requests.request(method, url.url(), headers=headers, **self.http_options)
+        except Exception:
             errors = ["Error '%s' while getting the URL:", "%s", "Method: %s", "--- With headers ---", "%s"]
             args1 = [
                 sys.exc_info()[0],
                 url,
                 method,
                 "\n".join(
                     [
-                        "{}: {}".format(h, v if h not in ("Authorization", "Cookies") else "***")
+                        f"{h}: {v if h not in ('Authorization', 'Cookies') else '***'}"
                         for h, v in list(headers.items())
                     ]
                 ),
             ]
-            if method in ("POST", "PUT"):
+            if method in ("POST", "PUT") and body is not None:
                 errors += ["--- Query with body ---", "%s"]
                 args1.append(body.decode("utf-8"))
-            LOG.error("\n".join(errors), *args1, exc_info=True)
+            LOG.exception("\n".join(errors), *args1)
 
-            raise HTTPBadGateway("Error on backend, See logs for detail")
+            raise HTTPBadGateway(  # pylint: disable=raise-missing-from
+                "Error on backend, See logs for detail"
+            )
 
-        if not response.ok:  # pragma: no cover
+        if not response.ok:
             errors = [
                 "Error '%s' in response of URL:",
                 "%s",
                 "Status: %d",
                 "Method: %s",
                 "--- With headers ---",
                 "%s",
             ]
             args2: List[Union[str, int]] = [
                 response.reason,
-                url,
+                url.url(),
                 response.status_code,
                 method,
                 "\n".join(
                     [
-                        "{}: {}".format(h, v if h not in ("Authorization", "Cookies") else "***")
+                        f"{h}: {v if h not in ('Authorization', 'Cookies') else '***'}"
                         for h, v in list(headers.items())
                     ]
                 ),
             ]
-            if method in ("POST", "PUT"):
+            if method in ("POST", "PUT") and body is not None:
                 errors += ["--- Query with body ---", "%s"]
                 args2.append(body.decode("utf-8"))
             errors += ["--- Return content ---", "%s"]
             args2.append(response.text)
             LOG.error("\n".join(errors), *args2)
 
             raise exception_response(response.status_code)
         if not response.headers.get("Content-Type", "").startswith("image/"):
             LOG.debug("Get result for URL: %s:\n%s.", url, body)
 
         return response
 
-    @CACHE_REGION.cache_on_arguments()
-    def _proxy_cache(self, method, *args, **kwargs):  # pragma: no cover
+    @CACHE_REGION.cache_on_arguments()  # type: ignore
+    def _proxy_cache(self, method: str, *args: Any, **kwargs: Any) -> pyramid.response.Response:
         # Method is only for the cache
         del method
         kwargs["cache"] = True
         return self._proxy(*args, **kwargs)
 
     def _proxy_response(
-        self, service_name, url, headers_update=None, public=False, **kwargs
-    ):  # pragma: no cover
+        self,
+        service_name: str,
+        url: Url,
+        headers_update: Optional[Dict[str, str]] = None,
+        public: bool = False,
+        **kwargs: Any,
+    ) -> pyramid.response.Response:
         if headers_update is None:
             headers_update = {}
         cache = kwargs.get("cache", False)
         if cache is True:
             response = self._proxy_cache(url, self.request.method, **kwargs)
         else:
             response = self._proxy(url, **kwargs)
 
-        cache_control = (PUBLIC_CACHE if public else PRIVATE_CACHE) if cache else NO_CACHE
+        cache_control = (
+            (Cache.PUBLIC if public else Cache.PRIVATE)
+            if cache
+            else (Cache.PUBLIC_NO if public else Cache.PRIVATE_NO)
+        )
         return self._build_response(
             response, response.content, cache_control, service_name, headers_update=headers_update
         )
 
     def _build_response(
         self,
-        response,
-        content,
-        cache_control,
-        service_name,
-        headers=None,
-        headers_update=None,
-        content_type=None,
-    ):
-        if isinstance(content, str):
-            content = content.encode("utf-8")
+        response: pyramid.response.Response,
+        content: bytes,
+        cache_control: Cache,
+        service_name: str,
+        headers: Optional[Dict[str, str]] = None,
+        headers_update: Optional[Dict[str, str]] = None,
+        content_type: Optional[str] = None,
+    ) -> pyramid.response.Response:
         if headers_update is None:
             headers_update = {}
         headers = response.headers if headers is None else headers
 
         # Hop-by-hop Headers are not supported by WSGI
         # See:
         # https://www.python.org/dev/peps/pep-3333/#other-http-features
@@ -212,32 +229,32 @@
             "Keep-Alive",
             "Proxy-Authenticate",
             "Proxy-Authorization",
             "te",
             "Trailers",
             "Transfer-Encoding",
             "Upgrade",
-        ]:  # pragma: no cover
+        ]:
             if header in headers:
                 del headers[header]
         # Other problematic headers
-        for header in ["Content-Length", "Content-Location", "Content-Encoding"]:  # pragma: no cover
+        for header in ["Content-Length", "Content-Location", "Content-Encoding"]:
             if header in headers:
                 del headers[header]
 
         headers.update(headers_update)
 
-        response = Response(content, status=response.status_code, headers=headers)
+        response = pyramid.response.Response(content, status=response.status_code, headers=headers)
 
         return set_common_headers(
             self.request, service_name, cache_control, response=response, content_type=content_type
         )
 
     @staticmethod
-    def _get_lower_params(params):
+    def _get_lower_params(params: Dict[str, str]) -> Dict[str, str]:
         return dict((k.lower(), str(v).lower()) for k, v in params.items())
 
-    def _get_headers(self):
-        headers = self.request.headers
-        if "Cookie" in headers:  # pragma: no cover
+    def get_headers(self) -> Dict[str, str]:
+        headers: Dict[str, str] = self.request.headers
+        if "Cookie" in headers:
             headers.pop("Cookie")
         return headers
```

## c2cgeoportal_geoportal/views/raster.py

```diff
@@ -1,9 +1,7 @@
-# -*- coding: utf-8 -*-
-
 # Copyright (c) 2012-2021, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
@@ -29,80 +27,87 @@
 
 
 import decimal
 import logging
 import math
 import os
 import traceback
-from typing import Any, Dict, Optional  # noqa, pylint: disable=unused-import
+from typing import TYPE_CHECKING, Any, Dict, Optional, Tuple
 
 import numpy
+import pyramid.request
 import zope.event.classhandler
 from pyramid.httpexceptions import HTTPBadRequest, HTTPNotFound
 from pyramid.view import view_config
+from rasterio.io import DatasetReader
 
 from c2cgeoportal_commons.models import InvalidateCacheEvent
-from c2cgeoportal_geoportal.lib.caching import NO_CACHE, set_common_headers
+from c2cgeoportal_geoportal.lib.common_headers import Cache, set_common_headers
+
+if TYPE_CHECKING:
+    import fiona.collection
 
 LOG = logging.getLogger(__name__)
 
 
 class Raster:
-    data: Dict[str, Any] = {}
+    """All the view concerned the raster (point, not the profile profile)."""
+
+    data: Dict[str, "fiona.collection.Collection"] = {}
 
-    def __init__(self, request):
+    def __init__(self, request: pyramid.request.Request):
         self.request = request
         self.rasters = self.request.registry.settings["raster"]
 
-        @zope.event.classhandler.handler(InvalidateCacheEvent)
-        def handle(event: InvalidateCacheEvent):  # pylint: disable=unused-variable
+        @zope.event.classhandler.handler(InvalidateCacheEvent)  # type: ignore
+        def handle(event: InvalidateCacheEvent) -> None:
             del event
             for _, v in Raster.data.items():
                 v.close()
             Raster.data = {}
 
     def _get_required_finite_float_param(self, name: str) -> float:
         if name not in self.request.params:
-            raise HTTPBadRequest("'{}' should be in the query string parameters".format(name))
+            raise HTTPBadRequest(f"'{name}' should be in the query string parameters")
         try:
             result = float(self.request.params[name])
         except ValueError:
-            raise HTTPBadRequest(
-                "'{}' ({}) parameters should be a number".format(name, self.request.params[name])
+            raise HTTPBadRequest(  # pylint: disable=raise-missing-from
+                f"'{name}' ({self.request.params[name]}) parameters should be a number"
             )
         if not math.isfinite(result):
             raise HTTPBadRequest(
-                "'{}' ({}) parameters should be a finite number".format(name, self.request.params[name])
+                f"'{name}' ({self.request.params[name]}) parameters should be a finite number"
             )
         return result
 
-    @view_config(route_name="raster", renderer="fast_json")
-    def raster(self):
+    @view_config(route_name="raster", renderer="fast_json")  # type: ignore
+    def raster(self) -> Dict[str, Any]:
         lon = self._get_required_finite_float_param("lon")
         lat = self._get_required_finite_float_param("lat")
 
         if "layers" in self.request.params:
             rasters = {}
             layers = self.request.params["layers"].split(",")
             for layer in layers:
                 if layer in self.rasters:
                     rasters[layer] = self.rasters[layer]
                 else:
-                    raise HTTPNotFound("Layer {} not found".format(layer))
+                    raise HTTPNotFound(f"Layer {layer} not found")
         else:
             rasters = self.rasters
 
         result = {}
         for ref in list(rasters.keys()):
             result[ref] = self._get_raster_value(rasters[ref], ref, lon, lat)
 
-        set_common_headers(self.request, "raster", NO_CACHE)
+        set_common_headers(self.request, "raster", Cache.PUBLIC_NO)
         return result
 
-    def _get_data(self, layer, name):
+    def _get_data(self, layer: Dict[str, Any], name: str) -> "fiona.collection.Collection":
         if name not in self.data:
             path = layer["file"]
             if layer.get("type", "shp_index") == "shp_index":
                 # Avoid loading if not needed
                 from fiona.collection import Collection  # pylint: disable=import-outside-toplevel
 
                 self.data[name] = Collection(path)
@@ -110,15 +115,17 @@
                 # Avoid loading if not needed
                 import rasterio  # pylint: disable=import-outside-toplevel
 
                 self.data[name] = rasterio.open(path)
 
         return self.data[name]
 
-    def _get_raster_value(self, layer, name, lon, lat):
+    def _get_raster_value(
+        self, layer: Dict[str, Any], name: str, lon: float, lat: float
+    ) -> Optional[decimal.Decimal]:
         data = self._get_data(layer, name)
         type_ = layer.get("type", "shp_index")
         if type_ == "shp_index":
             tiles = list(data.filter(mask={"type": "Point", "coordinates": [lon, lat]}))
 
             if not tiles:
                 return None
@@ -131,29 +138,33 @@
             with rasterio.open(path) as dataset:
                 result = self._get_value(layer, name, dataset, lon, lat)
         elif type_ == "gdal":
             result = self._get_value(layer, name, data, lon, lat)
         else:
             raise ValueError("Unsupported type " + type_)
 
-        if "round" in layer:
-            result = self._round(result, layer["round"])
+        result_d = None
+        if "round" in layer and result is not None:
+            result_d = self._round(result, layer["round"])
         elif result is not None:
-            result = decimal.Decimal(str(result))
+            result_d = decimal.Decimal(str(result))
 
-        return result
+        return result_d
 
     @staticmethod
-    def _get_value(layer, name, dataset, lon, lat):
+    def _get_value(
+        layer: Dict[str, Any], name: str, dataset: DatasetReader, lon: float, lat: float
+    ) -> Optional[numpy.float32]:
         index = dataset.index(lon, lat)
 
         shape = dataset.shape
+        result: Optional[numpy.float32]
         if 0 <= index[0] < shape[0] and 0 <= index[1] < shape[1]:
 
-            def get_index(index_):
+            def get_index(index_: int) -> Tuple[int, int]:
                 return index_, index_ + 1
 
             result = dataset.read(1, window=(get_index(index[0]), get_index(index[1])))[0][0]
             result = None if result == layer.get("nodata", dataset.nodata) else result
         else:
             LOG.debug(
                 "Out of index for layer: %s (%s), " "lon/lat: %dx%d, index: %dx%d, shape: %dx%d.",
```

## c2cgeoportal_geoportal/views/resourceproxy.py

```diff
@@ -1,10 +1,8 @@
-# -*- coding: utf-8 -*-
-
-# Copyright (c) 2011-2020, Camptocamp SA
+# Copyright (c) 2011-2021, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -27,45 +25,49 @@
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
 
 import ast
 import logging
 
+import pyramid.request
+import pyramid.response
 from pyramid.httpexceptions import HTTPBadRequest
 from pyramid.view import view_config
 
-from c2cgeoportal_geoportal.lib.caching import NO_CACHE
+from c2cgeoportal_geoportal.lib.common_headers import Cache
 from c2cgeoportal_geoportal.views.proxy import Proxy
 
 LOG = logging.getLogger(__name__)
 
 
 class ResourceProxy(Proxy):
-    def __init__(self, request):  # pragma: no cover
+    """All the views concerned the resources (it's a kind of proxy)."""
+
+    def __init__(self, request: pyramid.request.Request):
         Proxy.__init__(self, request)
         self.request = request
         self.settings = request.registry.settings.get("resourceproxy", {})
 
-    @view_config(route_name="resourceproxy")
-    def proxy(self):  # pragma: no cover
+    @view_config(route_name="resourceproxy")  # type: ignore
+    def proxy(self) -> pyramid.response.Response:
         target = self.request.params.get("target", "")
         targets = self.settings.get("targets", [])
-        if target in targets:  # pragma: no cover
+        if target in targets:
             url = targets[target]
             values = ast.literal_eval(self.request.params.get("values"))
             url = url % values
 
             response = self._proxy(url=url)
 
-            cache_control = NO_CACHE
+            cache_control = Cache.PRIVATE_NO
             content_type = response.headers["Content-Type"]
 
             response = self._build_response(
-                response, response.text, cache_control, "externalresource", content_type=content_type
+                response, response.content, cache_control, "externalresource", content_type=content_type
             )
             for header in response.headers.keys():
                 if header not in self.settings["allowed_headers"]:
                     response.headers.pop(header)
             return response
-        LOG.warning("Target url not found: %s", target)
+        LOG.warning("Target URL not found: %s", target)
         return HTTPBadRequest("URL not allowed")
```

## c2cgeoportal_geoportal/views/shortener.py

```diff
@@ -1,10 +1,8 @@
-# -*- coding: utf-8 -*-
-
-# Copyright (c) 2013-2021, Camptocamp SA
+# Copyright (c) 2013-2022, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -28,98 +26,101 @@
 # either expressed or implied, of the FreeBSD Project.
 
 
 import logging
 import random
 import string
 from datetime import datetime
+from typing import Dict
 from urllib.parse import urlparse
 
+import pyramid.request
 from pyramid.httpexceptions import HTTPBadRequest, HTTPFound, HTTPInternalServerError, HTTPNotFound
 from pyramid.view import view_config
 
 from c2cgeoportal_commons.lib.email_ import send_email_config
 from c2cgeoportal_commons.models import DBSession
 from c2cgeoportal_commons.models.static import Shorturl
-from c2cgeoportal_geoportal.lib.caching import NO_CACHE, set_common_headers
+from c2cgeoportal_geoportal.lib.common_headers import Cache, set_common_headers
 
 logger = logging.getLogger(__name__)
 
 
 class Shortener:
-    def __init__(self, request):
+    """All the views conserne the shortener."""
+
+    def __init__(self, request: pyramid.request.Request):
         self.request = request
         self.settings = request.registry.settings.get("shortener", {})
         self.short_bases = [self.request.route_url("shortener_get", ref="")]
         if "base_url" in self.settings:
             self.short_bases.append(self.settings["base_url"])
 
-    @view_config(route_name="shortener_get")
-    def get(self):
+    @view_config(route_name="shortener_get")  # type: ignore
+    def get(self) -> HTTPFound:
         ref = self.request.matchdict["ref"]
         short_urls = DBSession.query(Shorturl).filter(Shorturl.ref == ref).all()
 
         if len(short_urls) != 1:
-            raise HTTPNotFound("Ref '{0!s}' not found".format(ref))
+            raise HTTPNotFound(f"Ref '{ref!s}' not found")
 
         short_urls[0].nb_hits += 1
         short_urls[0].last_hit = datetime.now()
 
-        set_common_headers(self.request, "shortener", NO_CACHE)
+        set_common_headers(self.request, "shortener", Cache.PUBLIC_NO)
         return HTTPFound(location=short_urls[0].url)
 
-    @view_config(route_name="shortener_create", renderer="json")
-    def create(self):
+    @view_config(route_name="shortener_create", renderer="json")  # type: ignore
+    def create(self) -> Dict[str, str]:
 
         if "url" not in self.request.params:
             raise HTTPBadRequest("The parameter url is required")
 
         url = self.request.params["url"]
 
         # see: https://httpd.apache.org/docs/2.2/mod/core.html#limitrequestline
-        if len(url) > 8190:  # pragma: no cover
-            raise HTTPBadRequest("The parameter url is too long ({} > {})".format(len(url), 8190))
+        if len(url) > 8190:
+            raise HTTPBadRequest(f"The parameter url is too long ({len(url)} > {8190})")
 
         # Check that it is an internal URL...
         uri_parts = urlparse(url)
         if "allowed_hosts" in self.settings:
-            if uri_parts.netloc not in self.settings["allowed_hosts"]:  # pragma: no cover
+            if uri_parts.netloc not in self.settings["allowed_hosts"]:
                 raise HTTPBadRequest(
-                    "The requested host '{}' is not part of allowed hosts: {}".format(
-                        uri_parts.netloc, ", ".join(self.settings["allowed_hosts"])
-                    )
+                    f"The requested host '{uri_parts.netloc}' is not part of allowed hosts: "
+                    f"{', '.join(self.settings['allowed_hosts'])}"
                 )
         else:
             hostname = uri_parts.hostname
             if hostname != self.request.server_name:
                 raise HTTPBadRequest(
-                    "The requested host '{0!s}' should be '{1!s}'".format(hostname, self.request.server_name)
+                    f"The requested host '{hostname!s}' should be '{self.request.server_name!s}'"
                 )
 
         shortened = False
 
         for base in self.short_bases:
             base_parts = urlparse(base)
             if uri_parts.path.startswith(base_parts.path):
                 shortened = True
                 ref = uri_parts.path.split("/")[-1]
 
         tries = 0
         while not shortened:
             ref = "".join(
-                random.choice(string.ascii_letters + string.digits)
+                random.choice(string.ascii_letters + string.digits)  # nosec
                 for i in range(self.settings.get("length", 4))
             )
             test_url = DBSession.query(Shorturl).filter(Shorturl.ref == ref).all()
             if not test_url:
                 break
-            tries += 1  # pragma: no cover
-            if tries > 20:  # pragma: no cover
+            tries += 1
+            if tries > 20:
                 message = "No free ref found, considered to increase the length"
-                logging.error(message)
+                logger.error(message)
                 raise HTTPInternalServerError(message)
 
         user_email = self.request.user.email if self.request.user is not None else None
         email = self.request.params.get("email")
         if not shortened:
             short_url = Shorturl()
             short_url.url = url
@@ -131,19 +132,21 @@
             DBSession.add(short_url)
 
         if "base_url" in self.settings:
             s_url = self.settings["base_url"] + ref
         else:
             s_url = self.request.route_url("shortener_get", ref=ref)
 
-        if email is not None:  # pragma: no cover
+        if email is not None:
             send_email_config(
                 self.request.registry.settings,
                 "shortener",
                 email,
                 full_url=url,
                 short_url=s_url,
                 message=self.request.params.get("message", ""),
+                application_url=self.request.route_url("base"),
+                current_url=self.request.current_route_url(),
             )
 
-        set_common_headers(self.request, "shortener", NO_CACHE)
+        set_common_headers(self.request, "shortener", Cache.PRIVATE_NO)
         return {"short_url": s_url}
```

## c2cgeoportal_geoportal/views/theme.py

```diff
@@ -1,10 +1,8 @@
-# -*- coding: utf-8 -*-
-
-# Copyright (c) 2011-2021, Camptocamp SA
+# Copyright (c) 2011-2022, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -23,91 +21,100 @@
 # (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 # SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 
 # The views and conclusions contained in the software and documentation are those
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
-# pylint: disable=no-member
-
 
 import asyncio
 import gc
 import logging
+import os
 import re
 import sys
 import time
-import urllib.parse
 from collections import Counter
 from math import sqrt
-from typing import Any, Dict, List, Set, Union, cast
+from typing import Any, Dict, List, Optional, Set, Tuple, Union, cast
 
+import dogpile.cache.api
+import pyramid.request
 import requests
+import sqlalchemy
+import sqlalchemy.orm.query
 from c2cwsgiutils.auth import auth_view
 from defusedxml import lxml
+from lxml import etree  # nosec
 from owslib.wms import WebMapService
 from pyramid.view import view_config
 from sqlalchemy.orm import subqueryload
 from sqlalchemy.orm.exc import NoResultFound
 
 from c2cgeoportal_commons import models
-from c2cgeoportal_commons.lib.url import add_url_params, get_url2
+from c2cgeoportal_commons.lib.url import Url, get_url2
 from c2cgeoportal_commons.models import main
 from c2cgeoportal_geoportal.lib import get_roles_id, get_typed, get_types_map, is_intranet
-from c2cgeoportal_geoportal.lib.caching import PRIVATE_CACHE, get_region, set_common_headers
+from c2cgeoportal_geoportal.lib.caching import get_region
+from c2cgeoportal_geoportal.lib.common_headers import Cache, set_common_headers
 from c2cgeoportal_geoportal.lib.functionality import get_mapserver_substitution_params
 from c2cgeoportal_geoportal.lib.layers import (
     get_private_layers,
     get_protected_layers,
     get_protected_layers_query,
 )
 from c2cgeoportal_geoportal.lib.wmstparsing import TimeInformation, parse_extent
-from c2cgeoportal_geoportal.views.layers import get_layer_metadatas
+from c2cgeoportal_geoportal.views import restrict_headers
+from c2cgeoportal_geoportal.views.layers import get_layer_metadata
 
 LOG = logging.getLogger(__name__)
 CACHE_REGION = get_region("std")
+TIMEOUT = int(os.environ.get("C2CGEOPORTAL_THEME_TIMEOUT", "300"))
+
+Metadata = Union[str, int, float, bool, List[Any], Dict[str, Any]]
 
 
-def get_http_cached(http_options, url, headers):
-    @CACHE_REGION.cache_on_arguments()
-    def do_get_http_cached(url):
-        response = requests.get(url, headers=headers, timeout=300, **http_options)
+def get_http_cached(http_options: Dict[str, Any], url: str, headers: Dict[str, str]) -> Tuple[bytes, str]:
+    """Get the content of the URL with a cash (dogpile)."""
+
+    @CACHE_REGION.cache_on_arguments()  # type: ignore
+    def do_get_http_cached(url: str) -> Tuple[bytes, str]:
+        response = requests.get(url, headers=headers, timeout=TIMEOUT, **http_options)
+        response.raise_for_status()
         LOG.info("Get url '%s' in %.1fs.", url, response.elapsed.total_seconds())
-        return response
+        return response.content, response.headers.get("Content-Type", "")
 
-    return do_get_http_cached(url)
+    return do_get_http_cached(url)  # type: ignore
 
 
 class DimensionInformation:
+    """Used to collect the dimensions information."""
 
     URL_PART_RE = re.compile(r"[a-zA-Z0-9_\-\+~\.]*$")
 
     def __init__(self) -> None:
         self._dimensions: Dict[str, str] = {}
 
-    def merge(self, layer, layer_node, mixed):
+    def merge(self, layer: main.Layer, layer_node: Dict[str, Any], mixed: bool) -> Set[str]:
         errors = set()
 
         dimensions: Dict[str, str] = {}
         dimensions_filters = {}
         for dimension in layer.dimensions:
             if (
                 not isinstance(layer, main.LayerWMS)
                 and dimension.value is not None
                 and not self.URL_PART_RE.match(dimension.value)
             ):
                 errors.add(
-                    "The layer '{}' has an unsupported dimension value '{}' ('{}').".format(
-                        layer.name, dimension.value, dimension.name
-                    )
+                    f"The layer '{layer.name}' has an unsupported dimension value "
+                    f"'{dimension.value}' ('{dimension.name}')."
                 )
             elif dimension.name in dimensions:  # pragma: nocover
-                errors.add(
-                    "The layer '{}' has a duplicated dimension name '{}'.".format(layer.name, dimension.name)
-                )
+                errors.add(f"The layer '{layer.name}' has a duplicated dimension name '{dimension.name}'.")
             else:
                 if dimension.field:
                     dimensions_filters[dimension.name] = {"field": dimension.field, "value": dimension.value}
                 else:
                     dimensions[dimension.name] = dimension.value
 
         if dimensions_filters:
@@ -116,87 +123,95 @@
             layer_node["dimensions"] = dimensions
         else:
             for name, value in list(dimensions.items()):
                 if name not in self._dimensions or self._dimensions[name] is None:
                     self._dimensions[name] = value
                 elif self._dimensions[name] != value and value is not None:
                     errors.add(
-                        "The layer '{}' has a wrong dimension value '{}' for '{}', "
-                        "expected '{}' or empty.".format(layer.name, value, name, self._dimensions[name])
+                        f"The layer '{layer.name}' has a wrong dimension value '{value}' for '{name}', "
+                        f"expected '{self._dimensions[name]}' or empty."
                     )
         return errors
 
-    def get_dimensions(self):
+    def get_dimensions(self) -> Dict[str, str]:
         return self._dimensions
 
 
 class Theme:
-    def __init__(self, request):
+    """All the views concerning the themes."""
+
+    def __init__(self, request: pyramid.request.Request):
         self.request = request
         self.settings = request.registry.settings
-        self.http_options = self.request.registry.settings.get("http_options", {})
+        self.http_options = self.settings.get("http_options", {})
+        self.headers_whitelist = self.settings.get("headers_whitelist", [])
+        self.headers_blacklist = self.settings.get("headers_blacklist", [])
         self.metadata_type = get_types_map(
             self.settings.get("admin_interface", {}).get("available_metadata", [])
         )
 
         self._ogcservers_cache = None
         self._treeitems_cache = None
         self._layerswms_cache = None
         self._layerswmts_cache = None
         self._layergroup_cache = None
         self._themes_cache = None
 
-    def _get_metadata(self, item, metadata, errors):
-        metadatas = item.get_metadatas(metadata)
+    def _get_metadata(
+        self, item: main.TreeItem, metadata: str, errors: Set[str]
+    ) -> Union[None, str, int, float, bool, List[Any], Dict[str, Any]]:
+        metadatas = item.get_metadata(metadata)
         return (
             None
             if not metadatas
             else get_typed(
                 metadata, metadatas[0].value, self.metadata_type, self.request, errors, layer_name=item.name
             )
         )
 
-    def _get_metadatas(self, item, errors):
-        metadatas = {}
+    def _get_metadata_list(self, item: main.TreeItem, errors: Set[str]) -> Dict[str, Metadata]:
+        metadatas: Dict[str, Metadata] = {}
+        metadata: main.Metadata
         for metadata in item.metadatas:
             value = get_typed(metadata.name, metadata.value, self.metadata_type, self.request, errors)
             if value is not None:
                 metadatas[metadata.name] = value
 
         return metadatas
 
-    async def _wms_getcap(self, ogc_server, preload=False):
-        url, content, errors = await self._wms_getcap_cached(ogc_server)
-
-        if errors or preload:
-            return None, errors
-
-        @CACHE_REGION.cache_on_arguments()
-        def build_web_map_service(ogc_server_id):
+    async def _wms_getcap(
+        self, ogc_server: main.OGCServer, preload: bool = False
+    ) -> Tuple[Optional[Dict[str, Dict[str, Any]]], Set[str]]:
+        @CACHE_REGION.cache_on_arguments()  # type: ignore
+        def build_web_map_service(ogc_server_id: int) -> Tuple[Optional[Dict[str, Dict[str, Any]]], Set[str]]:
             del ogc_server_id  # Just for cache
 
-            version = urllib.parse.parse_qs(urllib.parse.urlsplit(url).query)["VERSION"][0]
+            if url is None:
+                raise RuntimeError("Url is None")
+
+            version = url.query.get("VERSION", "1.1.1")
             layers = {}
             try:
                 wms = WebMapService(None, xml=content, version=version)
-            except Exception as e:  # pragma: no cover
+            except Exception as e:
                 error = (
-                    "WARNING! an error '{}' occurred while trying to read the mapfile and recover the themes."
-                    "\nURL: {}\n{}".format(e, url, content)
+                    f"WARNING! an error '{e!s}' occurred while trying to read the mapfile and "
+                    "recover the themes."
+                    f"\nURL: {url}\n{content.decode() if content else None}"
                 )
                 LOG.error(error, exc_info=True)
                 return None, {error}
             wms_layers_name = list(wms.contents)
             for layer_name in wms_layers_name:
                 wms_layer = wms[layer_name]
                 resolution = self._get_layer_resolution_hint(wms_layer)
                 info = {
                     "name": wms_layer.name,
-                    "minResolutionHint": float("{:0.2f}".format(resolution[0])),
-                    "maxResolutionHint": float("{:0.2f}".format(resolution[1])),
+                    "minResolutionHint": float(f"{resolution[0]:0.2f}"),
+                    "maxResolutionHint": float(f"{resolution[1]:0.2f}"),
                 }
                 if hasattr(wms_layer, "queryable"):
                     info["queryable"] = wms_layer.queryable == 1
 
                 layers[layer_name] = {
                     "info": info,
                     "timepositions": wms_layer.timepositions,
@@ -205,91 +220,99 @@
                 }
 
             del wms
             LOG.debug("Run garbage collection: %s", ", ".join([str(gc.collect(n)) for n in range(3)]))
 
             return {"layers": layers}, set()
 
-        return build_web_map_service(ogc_server.id)
+        result = build_web_map_service.get(ogc_server.id)
+        if result != dogpile.cache.api.NO_VALUE:
+            return result  # type: ignore
+
+        try:
+            url, content, errors = await self._wms_getcap_cached(ogc_server)
+        except requests.exceptions.RequestException as exception:
+            error = (
+                f"Unable to get the WMS Capabilities for OGC server '{ogc_server.name}', "
+                f"return the error: {exception.response.status_code} {exception.response.reason}"
+            )
+            LOG.exception(error)
+            return None, {error}
+        if errors or preload:
+            return None, errors
+
+        return build_web_map_service(ogc_server.id)  # type: ignore
 
-    async def _wms_getcap_cached(self, ogc_server):
+    async def _wms_getcap_cached(
+        self, ogc_server: main.OGCServer
+    ) -> Tuple[Optional[Url], Optional[bytes], Set[str]]:
         errors: Set[str] = set()
-        url = get_url2("The OGC server '{}'".format(ogc_server.name), ogc_server.url, self.request, errors)
-        if errors or url is None:  # pragma: no cover
+        url = get_url2(f"The OGC server '{ogc_server.name}'", ogc_server.url, self.request, errors)
+        if errors or url is None:
             return url, None, errors
 
         # Add functionality params
         if (
             ogc_server.auth == main.OGCSERVER_AUTH_STANDARD
             and ogc_server.type == main.OGCSERVER_TYPE_MAPSERVER
         ):
-            url = add_url_params(url, get_mapserver_substitution_params(self.request))
+            url.add_query(get_mapserver_substitution_params(self.request))
 
-        url = add_url_params(
-            url,
+        url.add_query(
             {
                 "SERVICE": "WMS",
                 "VERSION": "1.1.1",
                 "REQUEST": "GetCapabilities",
-                "ROLE_ID": "0",
+                "ROLE_IDS": "0",
                 "USER_ID": "0",
             },
         )
 
         LOG.debug("Get WMS GetCapabilities for URL: %s", url)
 
         # Forward request to target (without Host Header)
         headers = dict(self.request.headers)
 
         # Add headers for Geoserver
         if ogc_server.auth == main.OGCSERVER_AUTH_GEOSERVER:
             headers["sec-username"] = "root"
             headers["sec-roles"] = "root"
 
-        if urllib.parse.urlsplit(url).hostname != "localhost" and "Host" in headers:  # pragma: no cover
+        if url.hostname != "localhost" and "Host" in headers:
             headers.pop("Host")
 
+        headers = restrict_headers(headers, self.headers_whitelist, self.headers_blacklist)
+
         try:
-            response = await asyncio.get_event_loop().run_in_executor(
+            content, content_type = await asyncio.get_event_loop().run_in_executor(
                 None, get_http_cached, self.http_options, url, headers
             )
-        except Exception:  # pragma: no cover
-            error = "Unable to GetCapabilities from URL {}".format(url)
+        except Exception:
+            error = f"Unable to GetCapabilities from URL {url}"
             errors.add(error)
             LOG.error(error, exc_info=True)
             return url, None, errors
 
-        if not response.ok:  # pragma: no cover
-            error = "GetCapabilities from URL {} return the error: {:d} {}".format(
-                url, response.status_code, response.reason
-            )
-            errors.add(error)
-            LOG.error(error)
-            return url, None, errors
-
         # With wms 1.3 it returns text/xml also in case of error :-(
-        if response.headers.get("Content-Type", "").split(";")[0].strip() not in [
+        if content_type.split(";")[0].strip() not in [
             "application/vnd.ogc.wms_xml",
             "text/xml",
         ]:
-            error = "GetCapabilities from URL {} returns a wrong Content-Type: {}\n{}".format(
-                url, response.headers.get("Content-Type", ""), response.text
+            error = (
+                f"GetCapabilities from URL '{url}' returns a wrong Content-Type: {content_type}\n"
+                f"{content.decode()}"
             )
             errors.add(error)
             LOG.error(error)
             return url, None, errors
 
-        return url, response.content, errors
-
-    def _create_layer_query(self, interface):
-        """
-        Create an SQLAlchemy query for Layer and for the role
-        identified to by ``role_id``.
-        """
+        return url, content, errors
 
+    def _create_layer_query(self, interface: str) -> sqlalchemy.orm.query.Query:
+        """Create an SQLAlchemy query for Layer and for the role identified to by ``role_id``."""
         query = models.DBSession.query(main.Layer.name).filter(main.Layer.public.is_(True))
 
         if interface is not None:
             query = query.join(main.Layer.interfaces)
             query = query.filter(main.Interface.name == interface)
 
         query2 = get_protected_layers_query(self.request, None, what=main.LayerWMS.name)
@@ -301,23 +324,23 @@
         if interface is not None:
             query3 = query3.join(main.Layer.interfaces)
             query3 = query3.filter(main.Interface.name == interface)
         query = query.union(query3)
 
         return query
 
-    def _get_layer_metadata_urls(self, layer):
+    def _get_layer_metadata_urls(self, layer: main.Layer) -> List[str]:
         metadata_urls: List[str] = []
         if layer.metadataUrls:
             metadata_urls = layer.metadataUrls
         for child_layer in layer.layers:
             metadata_urls.extend(self._get_layer_metadata_urls(child_layer))
         return metadata_urls
 
-    def _get_layer_resolution_hint_raw(self, layer):
+    def _get_layer_resolution_hint_raw(self, layer: main.Layer) -> Tuple[Optional[float], Optional[float]]:
         resolution_hint_min = None
         resolution_hint_max = None
         if layer.scaleHint:
             # scaleHint is based upon a pixel diagonal length whereas we use
             # resolutions based upon a pixel edge length. There is a sqrt(2)
             # ratio between edge and diagonal of a square.
             resolution_hint_min = float(layer.scaleHint["min"]) / sqrt(2)
@@ -341,66 +364,75 @@
                 else (
                     resolution_hint_max if resolution[1] is None else max(resolution_hint_max, resolution[1])
                 )
             )
 
         return (resolution_hint_min, resolution_hint_max)
 
-    def _get_layer_resolution_hint(self, layer):
+    def _get_layer_resolution_hint(self, layer: main.Layer) -> Tuple[float, float]:
         resolution_hint_min, resolution_hint_max = self._get_layer_resolution_hint_raw(layer)
         return (
             0.0 if resolution_hint_min is None else resolution_hint_min,
             999999999 if resolution_hint_max is None else resolution_hint_max,
         )
 
-    def _layer(self, layer, time_=None, dim=None, mixed=True):
+    async def _layer(
+        self,
+        layer: main.Layer,
+        time_: Optional[TimeInformation] = None,
+        dim: Optional[DimensionInformation] = None,
+        mixed: bool = True,
+    ) -> Tuple[Optional[Dict[str, Any]], Set[str]]:
         errors: Set[str] = set()
-        layer_info = {"id": layer.id, "name": layer.name, "metadata": self._get_metadatas(layer, errors)}
-        if re.search("[/?#]", layer.name):  # pragma: no cover
-            errors.add("The layer has an unsupported name '{}'.".format(layer.name))
-        if isinstance(layer, main.LayerWMS) and re.search("[/?#]", layer.layer):  # pragma: no cover
-            errors.add("The layer has an unsupported layers '{}'.".format(layer.layer))
+        layer_info = {"id": layer.id, "name": layer.name, "metadata": self._get_metadata_list(layer, errors)}
+        if re.search("[/?#]", layer.name):
+            errors.add(f"The layer has an unsupported name '{layer.name}'.")
+        if isinstance(layer, main.LayerWMS) and re.search("[/?#]", layer.layer):
+            errors.add(f"The layer has an unsupported layers '{layer.layer}'.")
         if layer.geo_table:
             errors |= self._fill_editable(layer_info, layer)
         if mixed:
             assert time_ is None
             time_ = TimeInformation()
         assert time_ is not None
+        assert dim is not None
 
         errors |= dim.merge(layer, layer_info, mixed)
 
         if isinstance(layer, main.LayerWMS):
-            wms, wms_errors = self._wms_layers(layer.ogc_server)
+            wms, wms_errors = await self._wms_layers(layer.ogc_server)
             errors |= wms_errors
             if wms is None:
                 return None if errors else layer_info, errors
             if layer.layer is None or layer.layer == "":
-                errors.add("The layer '{}' do not have any layers".format(layer.name))
+                errors.add(f"The layer '{layer.name}' do not have any layers")
                 return None, errors
             layer_info["type"] = "WMS"
             layer_info["layers"] = layer.layer
-            self._fill_wms(layer_info, layer, errors, mixed=mixed)
+            await self._fill_wms(layer_info, layer, errors, mixed=mixed)
             errors |= self._merge_time(time_, layer_info, layer, wms)
 
         elif isinstance(layer, main.LayerWMTS):
             layer_info["type"] = "WMTS"
             self._fill_wmts(layer_info, layer, errors)
 
         elif isinstance(layer, main.LayerVectorTiles):
             layer_info["type"] = "VectorTiles"
-            self._vectortiles_layers(layer_info, layer)
+            self._vectortiles_layers(layer_info, layer, errors)
 
         return None if errors else layer_info, errors
 
     @staticmethod
-    def _merge_time(time_, layer_theme, layer, wms):
+    def _merge_time(
+        time_: TimeInformation, layer_theme: Dict[str, Any], layer: main.Layer, wms: Dict[str, Dict[str, Any]]
+    ) -> Set[str]:
         errors = set()
         wmslayer = layer.layer
 
-        def merge_time(wms_layer_obj):
+        def merge_time(wms_layer_obj: Dict[str, Any]) -> None:
             extent = parse_extent(wms_layer_obj["timepositions"], wms_layer_obj["defaulttimeposition"])
             time_.merge(layer_theme, extent, layer.time_mode, layer.time_widget)
 
         try:
             if wmslayer in wms["layers"]:
                 wms_layer_obj = wms["layers"][wmslayer]
 
@@ -416,72 +448,76 @@
                             child_layer = wms["layers"][child_layer_name]
                             if child_layer["timepositions"]:
                                 merge_time(child_layer)  # The time mode comes from the wms layer group
                                 has_time = True
 
                     if not has_time:
                         errors.add(
-                            "Error: time layer '{}' has no time information in capabilities".format(
-                                layer.name
-                            )
+                            f"Error: time layer '{layer.name}' has no time information in capabilities"
                         )
 
         except ValueError:  # pragma no cover
-            errors.add("Error while handling time for layer '{}': {}".format(layer.name, sys.exc_info()[1]))
+            errors.add(f"Error while handling time for layer '{layer.name}': {sys.exc_info()[1]}")
 
         return errors
 
-    def _fill_editable(self, layer_theme, layer):
+    def _fill_editable(self, layer_theme: Dict[str, Any], layer: main.Layer) -> Set[str]:
         errors = set()
         try:
             if self.request.user:
                 count = (
                     models.DBSession.query(main.RestrictionArea)
                     .join(main.RestrictionArea.roles)
                     .filter(main.Role.id.in_(get_roles_id(self.request)))
                     .filter(main.RestrictionArea.layers.any(main.Layer.id == layer.id))
                     .filter(main.RestrictionArea.readwrite.is_(True))
                     .count()
                 )
                 if count > 0:
-                    layer_theme["edit_columns"] = get_layer_metadatas(layer)
+                    layer_theme["edit_columns"] = get_layer_metadata(layer)
                     layer_theme["editable"] = True
         except Exception as exception:
             LOG.exception(str(exception))
             errors.add(str(exception))
         return errors
 
-    def _fill_child_layer(self, layer_theme, layer_name, wms):
+    def _fill_child_layer(
+        self,
+        layer_theme: Dict[str, Any],
+        layer_name: str,
+        wms: Dict[str, Dict[str, Any]],
+    ) -> None:
         wms_layer_obj = wms["layers"][layer_name]
         if not wms_layer_obj["children"]:
             layer_theme["childLayers"].append(wms["layers"][layer_name]["info"])
         else:
             for child_layer in wms_layer_obj["children"]:
                 self._fill_child_layer(layer_theme, child_layer, wms)
 
-    def _fill_wms(self, layer_theme, layer, errors, mixed):
-        wms, wms_errors = self._wms_layers(layer.ogc_server)
+    async def _fill_wms(
+        self, layer_theme: Dict[str, Any], layer: main.Layer, errors: Set[str], mixed: bool
+    ) -> None:
+        wms, wms_errors = await self._wms_layers(layer.ogc_server)
         errors |= wms_errors
         if wms is None:
             return
 
         layer_theme["imageType"] = layer.ogc_server.image_type
-        if layer.style:  # pragma: no cover
+        if layer.style:
             layer_theme["style"] = layer.style
 
         # now look at what is in the WMS capabilities doc
         layer_theme["childLayers"] = []
         for layer_name in layer.layer.split(","):
             if layer_name in wms["layers"]:
                 self._fill_child_layer(layer_theme, layer_name, wms)
             else:
                 errors.add(
-                    "The layer '{}' ({}) is not defined in WMS capabilities from '{}'".format(
-                        layer_name, layer.name, layer.ogc_server.name
-                    )
+                    f"The layer '{layer_name}' ({layer.name}) is not defined in WMS capabilities "
+                    f"from '{layer.ogc_server.name}'"
                 )
 
         if "minResolutionHint" not in layer_theme:
             resolution_min = self._get_metadata(layer, "minResolution", errors)
 
             if resolution_min is not None:
                 layer_theme["minResolutionHint"] = resolution_min
@@ -502,55 +538,38 @@
                 ]
                 if max_resolutions_hint:
                     layer_theme["maxResolutionHint"] = max(max_resolutions_hint)
 
         if mixed:
             layer_theme["ogcServer"] = layer.ogc_server.name
 
-    @staticmethod
-    def _fill_legend_rule_query_string(layer_theme, layer, url):
-        if layer.legend_rule and url:
-            layer_theme["icon"] = add_url_params(
-                url,
-                {
-                    "SERVICE": "WMS",
-                    "VERSION": "1.1.1",
-                    "REQUEST": "GetLegendGraphic",
-                    "LAYER": layer.name,
-                    "FORMAT": "image/png",
-                    "TRANSPARENT": "TRUE",
-                    "RULE": layer.legend_rule,
-                },
-            )
-
-    def _fill_wmts(self, layer_theme, layer, errors):
-        layer_theme["url"] = get_url2(
-            "The WMTS layer '{}'".format(layer.name), layer.url, self.request, errors=errors
-        )
+    def _fill_wmts(self, layer_theme: Dict[str, Any], layer: main.Layer, errors: Set[str]) -> None:
+        url = get_url2(f"The WMTS layer '{layer.name}'", layer.url, self.request, errors=errors)
+        layer_theme["url"] = url.url() if url is not None else None
 
         if layer.style:
             layer_theme["style"] = layer.style
         if layer.matrix_set:
             layer_theme["matrixSet"] = layer.matrix_set
 
         layer_theme["layer"] = layer.layer
         layer_theme["imageType"] = layer.image_type
 
-    @staticmethod
-    def _vectortiles_layers(layer_theme, layer):
-        layer_theme["style"] = layer.style
+    def _vectortiles_layers(self, layer_theme: Dict[str, Any], layer: main.Layer, errors: Set[str]) -> None:
+        style = get_url2(f"The VectorTiles layer '{layer.name}'", layer.style, self.request, errors=errors)
+        layer_theme["style"] = style.url() if style is not None else None
         if layer.xyz:
             layer_theme["xyz"] = layer.xyz
 
     @staticmethod
-    def _layer_included(tree_item):
+    def _layer_included(tree_item: main.TreeItem) -> bool:
         return isinstance(tree_item, main.Layer)
 
-    def _get_ogc_servers(self, group, depth):
-        """Recurse on all children to get unique identifier for each child."""
+    def _get_ogc_servers(self, group: main.LayerGroup, depth: int) -> Set[Union[str, bool]]:
+        """Get unique identifier for each child by recursing on all the children."""
 
         ogc_servers: Set[Union[str, bool]] = set()
 
         # escape loop
         if depth > 30:
             LOG.error("Error: too many recursions with group '%s'", group.name)
             return ogc_servers
@@ -565,60 +584,60 @@
 
         if isinstance(group, main.LayerWMTS):
             ogc_servers.add(False)
 
         return ogc_servers
 
     @staticmethod
-    def is_mixed(ogc_servers):
+    def is_mixed(ogc_servers: List[Union[str, bool]]) -> bool:
         return len(ogc_servers) != 1 or ogc_servers[0] is False
 
-    def _group(
+    async def _group(
         self,
-        path,
-        group,
-        layers,
-        depth=1,
-        min_levels=1,
-        mixed=True,
-        time_=None,
-        dim=None,
-        wms_layers=None,
-        layers_name=None,
-        **kwargs,
-    ):
+        path: str,
+        group: main.LayerGroup,
+        layers: List[str],
+        depth: int = 1,
+        min_levels: int = 1,
+        mixed: bool = True,
+        time_: Optional[TimeInformation] = None,
+        dim: Optional[DimensionInformation] = None,
+        wms_layers: Optional[List[str]] = None,
+        layers_name: Optional[List[str]] = None,
+        **kwargs: Any,
+    ) -> Tuple[Optional[Dict[str, Any]], Set[str]]:
         if wms_layers is None:
             wms_layers = []
         if layers_name is None:
             layers_name = []
         children = []
         errors = set()
 
-        if re.search("[/?#]", group.name):  # pragma: no cover
-            errors.add("The group has an unsupported name '{}'.".format(group.name))
+        if re.search("[/?#]", group.name):
+            errors.add(f"The group has an unsupported name '{group.name}'.")
 
         # escape loop
         if depth > 30:
-            errors.add("Too many recursions with group '{}'".format(group.name))
+            errors.add(f"Too many recursions with group '{group.name}'")
             return None, errors
 
         ogc_servers = None
         org_depth = depth
         if depth == 1:
             ogc_servers = list(self._get_ogc_servers(group, 1))
             # check if mixed content
             mixed = self.is_mixed(ogc_servers)
             if not mixed:
                 time_ = TimeInformation()
             dim = DimensionInformation()
 
         for tree_item in group.children:
             if isinstance(tree_item, main.LayerGroup):
-                group_theme, gp_errors = self._group(
-                    "{}/{}".format(path, tree_item.name),
+                group_theme, gp_errors = await self._group(
+                    f"{path}/{tree_item.name}",
                     tree_item,
                     layers,
                     depth=depth + 1,
                     min_levels=min_levels,
                     mixed=mixed,
                     time_=time_,
                     dim=dim,
@@ -631,62 +650,65 @@
                     children.append(group_theme)
             elif self._layer_included(tree_item):
                 if tree_item.name in layers:
                     layers_name.append(tree_item.name)
                     if isinstance(tree_item, main.LayerWMS):
                         wms_layers.extend(tree_item.layer.split(","))
 
-                    layer_theme, l_errors = self._layer(tree_item, mixed=mixed, time_=time_, dim=dim)
+                    layer_theme, l_errors = await self._layer(tree_item, mixed=mixed, time_=time_, dim=dim)
                     errors |= l_errors
                     if layer_theme is not None:
                         if depth < min_levels:
                             errors.add(
-                                "The Layer '{}' is under indented ({:d}/{:d}).".format(
-                                    path + "/" + tree_item.name, depth, min_levels
-                                )
+                                f"The Layer '{path + '/' + tree_item.name}' is under indented "
+                                f"({depth:d}/{min_levels:d})."
                             )
                         else:
                             children.append(layer_theme)
 
         if children:
             group_theme = {
                 "id": group.id,
                 "name": group.name,
                 "children": children,
-                "metadata": self._get_metadatas(group, errors),
+                "metadata": self._get_metadata_list(group, errors),
                 "mixed": False,
             }
             if not mixed:
                 name: str
                 for name, nb in Counter(layers_name).items():
                     if nb > 1:
                         errors.add(
-                            "The GeoMapFish layer name '{}', cannot be two times "
-                            "in the same block (first level group).".format(name)
+                            f"The GeoMapFish layer name '{name}', cannot be two times "
+                            "in the same block (first level group)."
                         )
 
             group_theme["mixed"] = mixed
             if org_depth == 1:
                 if not mixed:
-                    group_theme["ogcServer"] = cast(List, ogc_servers)[0]
+                    assert time_ is not None
+                    assert dim is not None
+                    group_theme["ogcServer"] = cast(List[Any], ogc_servers)[0]
                     if time_.has_time() and time_.layer is None:
                         group_theme["time"] = time_.to_dict()
 
                     group_theme["dimensions"] = dim.get_dimensions()
 
             return group_theme, errors
         return None, errors
 
-    def _layers(self, interface):
+    def _layers(self, interface: str) -> List[str]:
         query = self._create_layer_query(interface=interface)
         return [name for (name,) in query.all()]
 
-    def _wms_layers(self, ogc_server):
+    async def _wms_layers(
+        self, ogc_server: main.OGCServer
+    ) -> Tuple[Optional[Dict[str, Dict[str, Any]]], Set[str]]:
         # retrieve layers metadata via GetCapabilities
-        wms, wms_errors = asyncio.run(self._wms_getcap(ogc_server))
+        wms, wms_errors = await self._wms_getcap(ogc_server)
         if wms_errors:
             return None, wms_errors
 
         return wms, set()
 
     def _load_tree_items(self) -> None:
         # Populate sqlalchemy session.identity_map to reduce the number of database requests.
@@ -713,19 +735,18 @@
                 subqueryload(main.Theme.functionalities),
                 subqueryload(main.Theme.metadatas),
                 subqueryload(main.Theme.children_relation),
             )
             .all()
         )
 
-    def _themes(self, interface="desktop", filter_themes=True, min_levels=1):
-        """
-        This function returns theme information for the role identified
-        by ``role_id``.
-        """
+    async def _themes(
+        self, interface: str = "desktop", filter_themes: bool = True, min_levels: int = 1
+    ) -> Tuple[List[Dict[str, Any]], Set[str]]:
+        """Return theme information for the role identified by ``role_id``."""
         self._load_tree_items()
         errors = set()
         layers = self._layers(interface)
 
         themes = models.DBSession.query(main.Theme)
         themes = themes.filter(main.Theme.public.is_(True))
         auth_themes = models.DBSession.query(main.Theme)
@@ -740,285 +761,361 @@
         if filter_themes and interface is not None:
             themes = themes.join(main.Theme.interfaces)
             themes = themes.filter(main.Interface.name == interface)
 
         export_themes = []
         for theme in themes.all():
             if re.search("[/?#]", theme.name):
-                errors.add("The theme has an unsupported name '{}'.".format(theme.name))
+                errors.add(f"The theme has an unsupported name '{theme.name}'.")
                 continue
 
-            children, children_errors = self._get_children(theme, layers, min_levels)
+            children, children_errors = await self._get_children(theme, layers, min_levels)
             errors |= children_errors
 
             # Test if the theme is visible for the current user
             if children:
-                icon = (
-                    get_url2("The Theme '{}'".format(theme.name), theme.icon, self.request, errors)
+                url = (
+                    get_url2(f"The Theme '{theme.name}'", theme.icon, self.request, errors)
                     if theme.icon is not None and theme.icon
+                    else None
+                )
+                icon = (
+                    url.url()
+                    if url is not None
                     else self.request.static_url("/etc/geomapfish/static/images/blank.png")
                 )
 
                 theme_theme = {
                     "id": theme.id,
                     "name": theme.name,
                     "icon": icon,
                     "children": children,
                     "functionalities": self._get_functionalities(theme),
-                    "metadata": self._get_metadatas(theme, errors),
+                    "metadata": self._get_metadata_list(theme, errors),
                 }
                 export_themes.append(theme_theme)
 
         return export_themes, errors
 
     @staticmethod
-    def _get_functionalities(theme):
+    def _get_functionalities(theme: main.Theme) -> Dict[str, List[str]]:
         result: Dict[str, List[str]] = {}
         for functionality in theme.functionalities:
             if functionality.name in result:
                 result[functionality.name].append(functionality.value)
             else:
                 result[functionality.name] = [functionality.value]
         return result
 
-    @view_config(route_name="invalidate", renderer="json")
-    def invalidate_cache(self):  # pragma: no cover
+    @view_config(route_name="invalidate", renderer="json")  # type: ignore
+    def invalidate_cache(self) -> Dict[str, bool]:
         auth_view(self.request)
-        main.cache_invalidate_cb()
+        models.cache_invalidate_cb()
         return {"success": True}
 
-    def _get_children(self, theme, layers, min_levels):
+    async def _get_children(
+        self, theme: main.Theme, layers: List[str], min_levels: int
+    ) -> Tuple[List[Dict[str, Any]], Set[str]]:
         children = []
         errors: Set[str] = set()
         for item in theme.children:
             if isinstance(item, main.LayerGroup):
-                group_theme, gp_errors = self._group(
-                    "{}/{}".format(theme.name, item.name), item, layers, min_levels=min_levels
+                group_theme, gp_errors = await self._group(
+                    f"{theme.name}/{item.name}", item, layers, min_levels=min_levels
                 )
                 errors |= gp_errors
                 if group_theme is not None:
                     children.append(group_theme)
             elif self._layer_included(item):
                 if min_levels > 0:
                     errors.add(
-                        "The Layer '{}' cannot be directly in the theme '{}' (0/{:d}).".format(
-                            item.name, theme.name, min_levels
-                        )
+                        f"The Layer '{item.name}' cannot be directly in the theme '{theme.name}' "
+                        f"(0/{min_levels:d})."
                     )
                 elif item.name in layers:
-                    layer_theme, l_errors = self._layer(item, dim=DimensionInformation())
+                    layer_theme, l_errors = await self._layer(item, dim=DimensionInformation())
                     errors |= l_errors
                     if layer_theme is not None:
                         children.append(layer_theme)
         return children, errors
 
-    @CACHE_REGION.cache_on_arguments()
-    def _get_layers_enum(self):
+    @CACHE_REGION.cache_on_arguments()  # type: ignore
+    def _get_layers_enum(self) -> Dict[str, Dict[str, str]]:
         layers_enum = {}
         if "enum" in self.settings.get("layers", {}):
             for layer_name, layer in list(self.settings["layers"]["enum"].items()):
                 layer_enum: Dict[str, str] = {}
                 layers_enum[layer_name] = layer_enum
                 for attribute in list(layer["attributes"].keys()):
                     layer_enum[attribute] = self.request.route_url(
                         "layers_enumerate_attribute_values",
                         layer_name=layer_name,
                         field_name=attribute,
                         path="",
                     )
         return layers_enum
 
-    def _get_role_ids(self):
+    def _get_role_ids(self) -> Optional[Set[int]]:
         return None if self.request.user is None else {role.id for role in self.request.user.roles}
 
-    async def _wms_get_features_type(self, wfs_url, preload=False):
+    async def _wfs_get_features_type(
+        self, wfs_url: Url, ogc_server_name: str, preload: bool = False
+    ) -> Tuple[Optional[etree.Element], Set[str]]:
         errors = set()
 
-        params = {
-            "SERVICE": "WFS",
-            "VERSION": "1.0.0",
-            "REQUEST": "DescribeFeatureType",
-            "ROLE_ID": "0",
-            "USER_ID": "0",
-        }
-        wfs_url = add_url_params(wfs_url, params)
+        wfs_url.add_query(
+            {
+                "SERVICE": "WFS",
+                "VERSION": "1.0.0",
+                "REQUEST": "DescribeFeatureType",
+                "ROLE_IDS": "0",
+                "USER_ID": "0",
+            }
+        )
 
-        LOG.debug("WFS DescribeFeatureType for base URL: %s", wfs_url)
+        LOG.debug("WFS DescribeFeatureType for the URL: %s", wfs_url)
 
         # forward request to target (without Host Header)
         headers = dict(self.request.headers)
-        if urllib.parse.urlsplit(wfs_url).hostname != "localhost" and "Host" in headers:
-            headers.pop("Host")  # pragma nocover
+        if wfs_url.hostname != "localhost" and "Host" in headers:
+            headers.pop("Host")
+
+        headers = restrict_headers(headers, self.headers_whitelist, self.headers_blacklist)
 
         try:
-            response = await asyncio.get_event_loop().run_in_executor(
+            content, _ = await asyncio.get_event_loop().run_in_executor(
                 None, get_http_cached, self.http_options, wfs_url, headers
             )
-        except Exception:  # pragma: no cover
-            errors.add("Unable to get DescribeFeatureType from URL {}".format(wfs_url))
-            return None, errors
-
-        if not response.ok:  # pragma: no cover
-            errors.add(
-                "DescribeFeatureType from URL {} return the error: {:d} {}".format(
-                    wfs_url, response.status_code, response.reason
+        except requests.exceptions.RequestException as exception:
+            error = (
+                f"Unable to get WFS DescribeFeatureType from the URL '{wfs_url.url()}' for "
+                f"OGC server {ogc_server_name}, "
+                + (
+                    f"return the error: {exception.response.status_code} {exception.response.reason}"
+                    if exception.response is not None
+                    else f"{exception}"
                 )
             )
+            errors.add(error)
+            LOG.exception(error)
+            return None, errors
+        except Exception:
+            error = (
+                f"Unable to get WFS DescribeFeatureType from the URL {wfs_url} for "
+                f"OGC server {ogc_server_name}"
+            )
+            errors.add(error)
+            LOG.exception(error)
             return None, errors
 
         if preload:
             return None, errors
 
         try:
-            return lxml.XML(response.text.encode("utf-8")), errors
-        except Exception as e:  # pragma: no cover
+            return lxml.XML(content), errors
+        except Exception as e:
             errors.add(
-                "Error '{}' on reading DescribeFeatureType from URL {}:\n{}".format(
-                    str(e), wfs_url, response.text
-                )
+                f"Error '{e!s}' on reading DescribeFeatureType from URL {wfs_url}:\n{content.decode()}"
             )
             return None, errors
 
-    def get_url_internal_wfs(self, ogc_server, errors):
+    def get_url_internal_wfs(
+        self, ogc_server: main.OGCServer, errors: Set[str]
+    ) -> Tuple[Optional[Url], Optional[Url], Optional[Url]]:
         # required to do every time to validate the url.
         if ogc_server.auth != main.OGCSERVER_AUTH_NOAUTH:
-            url = self.request.route_url("mapserverproxy", _query={"ogcserver": ogc_server.name})
-            url_wfs = url
+            url: Optional[Url] = Url(
+                self.request.route_url("mapserverproxy", _query={"ogcserver": ogc_server.name})
+            )
+            url_wfs: Optional[Url] = url
             url_internal_wfs = get_url2(
-                "The OGC server (WFS) '{}'".format(ogc_server.name),
+                f"The OGC server (WFS) '{ogc_server.name}'",
                 ogc_server.url_wfs or ogc_server.url,
                 self.request,
                 errors=errors,
             )
         else:
-            url = get_url2(
-                "The OGC server '{}'".format(ogc_server.name), ogc_server.url, self.request, errors=errors
-            )
+            url = get_url2(f"The OGC server '{ogc_server.name}'", ogc_server.url, self.request, errors=errors)
             url_wfs = (
                 get_url2(
-                    "The OGC server (WFS) '{}'".format(ogc_server.name),
+                    f"The OGC server (WFS) '{ogc_server.name}'",
                     ogc_server.url_wfs,
                     self.request,
                     errors=errors,
                 )
                 if ogc_server.url_wfs is not None
                 else url
             )
             url_internal_wfs = url_wfs
         return url_internal_wfs, url, url_wfs
 
-    async def preload(self, errors):
+    async def preload(self, errors: Set[str]) -> None:
         tasks = set()
         for ogc_server in models.DBSession.query(main.OGCServer).all():
-            url_internal_wfs, _, _ = self.get_url_internal_wfs(ogc_server, errors)
-            tasks.add(self._wms_get_features_type(url_internal_wfs, True))
-            tasks.add(self._wms_getcap(ogc_server, True))
+            # Don't load unused OGC servers, required for Landigpage, because the related OGC server
+            # will be on error in those functions.
+            nb_layers = (
+                models.DBSession.query(sqlalchemy.func.count(main.LayerWMS.id))
+                .filter(main.LayerWMS.ogc_server_id == ogc_server.id)
+                .one()
+            )
+            LOG.debug("%i layers for OGC server '%s'", nb_layers[0], ogc_server.name)
+            if nb_layers[0] > 0:
+                LOG.debug("Preload OGC server '%s'", ogc_server.name)
+                url_internal_wfs, _, _ = self.get_url_internal_wfs(ogc_server, errors)
+                if url_internal_wfs is not None:
+                    if ogc_server.wfs_support:
+                        tasks.add(self._wfs_get_features_type(url_internal_wfs, ogc_server.name, True))
+                    tasks.add(self._wms_getcap(ogc_server, True))
 
         await asyncio.gather(*tasks)
 
-    @CACHE_REGION.cache_on_arguments()
-    def _get_features_attributes(self, url_internal_wfs):
-        all_errors: Set[str] = set()
-        feature_type, errors = asyncio.run(self._wms_get_features_type(url_internal_wfs))
-        LOG.debug("Run garbage collection: %s", ", ".join([str(gc.collect(n)) for n in range(3)]))
-        if errors:
-            all_errors |= errors
-            return None, None, all_errors
-        namespace = feature_type.attrib.get("targetNamespace")
-        types = {}
-        elements = {}
-        for child in feature_type.getchildren():
-            if child.tag == "{http://www.w3.org/2001/XMLSchema}element":
-                name = child.attrib["name"]
-                type_namespace, type_ = child.attrib["type"].split(":")
-                if type_namespace not in child.nsmap:
-                    LOG.info(
-                        "The namespace '%s' of the type '%s' is not found in the available namespaces: %s",
-                        type_namespace,
+    async def _get_features_attributes(
+        self, url_internal_wfs: Url, ogc_server_name: str
+    ) -> Tuple[Optional[Dict[str, Dict[Any, Dict[str, Any]]]], Optional[str], Set[str]]:
+        @CACHE_REGION.cache_on_arguments()  # type: ignore
+        def _get_features_attributes_cache(
+            url_internal_wfs: Url, ogc_server_name: str
+        ) -> Tuple[Optional[Dict[str, Dict[Any, Dict[str, Any]]]], Optional[str], Set[str]]:
+            del url_internal_wfs  # Just for cache
+            all_errors: Set[str] = set()
+            LOG.debug("Run garbage collection: %s", ", ".join([str(gc.collect(n)) for n in range(3)]))
+            if errors:
+                all_errors |= errors
+                return None, None, all_errors
+            assert feature_type
+            namespace: str = feature_type.attrib.get("targetNamespace")
+            types: Dict[Any, Dict[str, Any]] = {}
+            elements = {}
+            for child in feature_type.getchildren():
+                if child.tag == "{http://www.w3.org/2001/XMLSchema}element":
+                    name = child.attrib["name"]
+                    type_namespace, type_ = child.attrib["type"].split(":")
+                    if type_namespace not in child.nsmap:
+                        LOG.info(
+                            "The namespace '%s' of the type '%s' is not found in the "
+                            "available namespaces: %s (OGC server: %s)",
+                            type_namespace,
+                            name,
+                            ", ".join([str(k) for k in child.nsmap.keys()]),
+                            ogc_server_name,
+                        )
+                    elif child.nsmap[type_namespace] != namespace:
+                        LOG.info(
+                            "The namespace '%s' of the type '%s' should be '%s' (OGC server: %s).",
+                            child.nsmap[type_namespace],
+                            name,
+                            namespace,
+                            ogc_server_name,
+                        )
+                    elements[name] = type_
+
+                if child.tag == "{http://www.w3.org/2001/XMLSchema}complexType":
+                    sequence = child.find(".//{http://www.w3.org/2001/XMLSchema}sequence")
+                    attrib = {}
+                    for children in sequence.getchildren():
+                        type_namespace = None
+                        type_ = children.attrib["type"]
+                        if len(type_.split(":")) == 2:
+                            type_namespace, type_ = type_.split(":")
+                        name = children.attrib["name"]
+                        attrib[name] = {"type": type_}
+                        if type_namespace in children.nsmap:
+                            type_namespace = children.nsmap[type_namespace]
+                            attrib[name]["namespace"] = type_namespace
+                        else:
+                            LOG.info(
+                                "The namespace '%s' of the type '%s' is not found in the "
+                                "available namespaces: %s (OGC server: %s)",
+                                type_namespace,
+                                name,
+                                ", ".join([str(k) for k in child.nsmap.keys()]),
+                                ogc_server_name,
+                            )
+                        for key, value in children.attrib.items():
+                            if key not in ("name", "type", "namespace"):
+                                attrib[name][key] = value
+                    types[child.attrib["name"]] = attrib
+            attributes: Dict[str, Dict[Any, Dict[str, Any]]] = {}
+            for name, type_ in elements.items():
+                if type_ in types:
+                    attributes[name] = types[type_]
+                elif (type_ == "Character") and (name + "Type") in types:
+                    LOG.debug(
+                        "Due MapServer strange result the type 'ms:Character' is fallbacked to type '%sType'"
+                        " for feature '%s', This is a strange comportement of MapServer when we use the "
+                        'METADATA "gml_types" "auto"',
                         name,
-                        ", ".join(child.nsmap.keys()),
-                    )
-                if child.nsmap[type_namespace] != namespace:
-                    LOG.info(
-                        "The namespace '%s' of the thye '%s' should be '%s'.",
-                        child.nsmap[type_namespace],
                         name,
-                        namespace,
                     )
-                elements[name] = type_
+                    attributes[name] = types[name + "Type"]
+                else:
+                    LOG.warning(
+                        "The provided type '%s' does not exist, available types are %s.",
+                        type_,
+                        ", ".join(types.keys()),
+                    )
 
-            if child.tag == "{http://www.w3.org/2001/XMLSchema}complexType":
-                sequence = child.find(".//{http://www.w3.org/2001/XMLSchema}sequence")
-                attrib = {}
-                for children in sequence.getchildren():
-                    type_namespace = None
-                    type_ = children.attrib["type"]
-                    if len(type_.split(":")) == 2:
-                        type_namespace, type_ = type_.split(":")
-                    type_namespace = children.nsmap[type_namespace]
-                    name = children.attrib["name"]
-                    attrib[name] = {"namespace": type_namespace, "type": type_}
-                    for key, value in children.attrib.items():
-                        if key not in ("name", "type", "namespace"):
-                            attrib[name][key] = value
-                types[child.attrib["name"]] = attrib
-        attributes = {}
-        for name, type_ in elements.items():
-            if type_ in types:
-                attributes[name] = types[type_]
-            elif (type_ == "Character") and (name + "Type") in types:
-                LOG.debug(
-                    "Due mapserver strange result the type 'ms:Character' is fallbacked to type '%sType'"
-                    " for feature '%s', This is a strange comportement of mapserver when we use the "
-                    'METADATA "gml_types" "auto"',
-                    name,
-                    name,
-                )
-                attributes[name] = types[name + "Type"]
-            else:
-                LOG.warning(
-                    "The provided type '%s' does not exist, available types are %s.",
-                    type_,
-                    ", ".join(types.keys()),
-                )
+            return attributes, namespace, all_errors
+
+        result = _get_features_attributes_cache.get(url_internal_wfs, ogc_server_name)
+        if result != dogpile.cache.api.NO_VALUE:
+            return result  # type: ignore
 
-        return attributes, namespace, all_errors
+        feature_type, errors = await self._wfs_get_features_type(url_internal_wfs, ogc_server_name)
+        return _get_features_attributes_cache(url_internal_wfs, ogc_server_name)  # type: ignore
 
-    @view_config(route_name="themes", renderer="json")
-    def themes(self):
+    @view_config(route_name="themes", renderer="json")  # type: ignore
+    def themes(self) -> Dict[str, Union[Dict[str, Dict[str, Any]], List[str]]]:
         interface = self.request.params.get("interface", "desktop")
         sets = self.request.params.get("set", "all")
         min_levels = int(self.request.params.get("min_levels", 1))
         group = self.request.params.get("group")
         background_layers_group = self.request.params.get("background")
 
-        set_common_headers(self.request, "themes", PRIVATE_CACHE)
+        set_common_headers(self.request, "themes", Cache.PRIVATE)
 
-        def get_theme():
+        async def get_theme() -> Dict[str, Union[Dict[str, Any], List[str]]]:
             export_themes = sets in ("all", "themes")
             export_group = group is not None and sets in ("all", "group")
             export_background = background_layers_group is not None and sets in ("all", "background")
 
-            result: Dict[str, Union[Dict[str, Dict[str, Any]], List[str]]] = {}
+            result: Dict[str, Union[Dict[str, Any], List[Any]]] = {}
             all_errors: Set[str] = set()
             LOG.debug("Start preload")
             start_time = time.time()
-            asyncio.run(self.preload(all_errors))
+            await self.preload(all_errors)
             LOG.debug("End preload")
             # Don't log if it looks to be already preloaded.
             if (time.time() - start_time) > 1:
                 LOG.info("Do preload in %.3fs.", time.time() - start_time)
             result["ogcServers"] = {}
             for ogc_server in models.DBSession.query(main.OGCServer).all():
+                nb_layers = (
+                    models.DBSession.query(sqlalchemy.func.count(main.LayerWMS.id))
+                    .filter(main.LayerWMS.ogc_server_id == ogc_server.id)
+                    .one()
+                )
+                if nb_layers[0] == 0:
+                    # QGIS Server langing page requires an OGC server that can't be used here.
+                    continue
+
                 url_internal_wfs, url, url_wfs = self.get_url_internal_wfs(ogc_server, all_errors)
 
                 attributes = None
                 namespace = None
-                if ogc_server.wfs_support:
-                    attributes, namespace, errors = self._get_features_attributes(url_internal_wfs)
+                if ogc_server.wfs_support and not url_internal_wfs:
+                    all_errors.add(
+                        f"The OGC server '{ogc_server.name}' is configured to support WFS "
+                        "but no internal WFS URL is found."
+                    )
+                if ogc_server.wfs_support and url_internal_wfs:
+                    attributes, namespace, errors = await self._get_features_attributes(
+                        url_internal_wfs, ogc_server.name
+                    )
                     # Create a local copy (don't modify the cache)
                     if attributes is not None:
                         attributes = dict(attributes)
                     all_errors |= errors
 
                     all_private_layers = get_private_layers([ogc_server.id]).values()
                     protected_layers_name = [
@@ -1032,74 +1129,83 @@
 
                     if attributes is not None:
                         for name in private_layers_name:
                             if name in attributes:
                                 del attributes[name]
 
                 result["ogcServers"][ogc_server.name] = {
-                    "url": url,
-                    "urlWfs": url_wfs,
+                    "url": url.url() if url else None,
+                    "urlWfs": url_wfs.url() if url_wfs else None,
                     "type": ogc_server.type,
                     "credential": ogc_server.auth != main.OGCSERVER_AUTH_NOAUTH,
                     "imageType": ogc_server.image_type,
                     "wfsSupport": ogc_server.wfs_support,
                     "isSingleTile": ogc_server.is_single_tile,
                     "namespace": namespace,
                     "attributes": attributes,
                 }
             if export_themes:
-                themes, errors = self._themes(interface, True, min_levels)
+                themes, errors = await self._themes(interface, True, min_levels)
 
                 result["themes"] = themes
                 all_errors |= errors
 
             if export_group:
-                exported_group, errors = self._get_group(group, interface)
+                exported_group, errors = await self._get_group(group, interface)
                 if exported_group is not None:
                     result["group"] = exported_group
                 all_errors |= errors
 
             if export_background:
-                exported_group, errors = self._get_group(background_layers_group, interface)
+                exported_group, errors = await self._get_group(background_layers_group, interface)
                 result["background_layers"] = exported_group["children"] if exported_group is not None else []
                 all_errors |= errors
 
             result["errors"] = list(all_errors)
             if all_errors:
                 LOG.info("Theme errors:\n%s", "\n".join(all_errors))
             return result
 
-        @CACHE_REGION.cache_on_arguments()
-        def get_theme_anonymous(intranet, interface, sets, min_levels, group, background_layers_group, host):
+        @CACHE_REGION.cache_on_arguments()  # type: ignore
+        def get_theme_anonymous(
+            intranet: bool,
+            interface: str,
+            sets: str,
+            min_levels: str,
+            group: str,
+            background_layers_group: str,
+            host: str,
+        ) -> Dict[str, Union[Dict[str, Dict[str, Any]], List[str]]]:
             # Only for cache key
             del intranet, interface, sets, min_levels, group, background_layers_group, host
-            return get_theme()
+            return asyncio.run(get_theme())
 
         if self.request.user is None:
-            return get_theme_anonymous(
-                is_intranet(self.request),
-                interface,
-                sets,
-                min_levels,
-                group,
-                background_layers_group,
-                self.request.headers.get("Host"),
+            return cast(
+                Dict[str, Union[Dict[str, Dict[str, Any]], List[str]]],
+                get_theme_anonymous(
+                    is_intranet(self.request),
+                    interface,
+                    sets,
+                    min_levels,
+                    group,
+                    background_layers_group,
+                    self.request.headers.get("Host"),
+                ),
             )
-        return get_theme()
+        return asyncio.run(get_theme())
 
-    def _get_group(self, group, interface):
+    async def _get_group(
+        self, group: main.LayerGroup, interface: main.Interface
+    ) -> Tuple[Optional[Dict[str, Any]], Set[str]]:
         layers = self._layers(interface)
         try:
             group_db = models.DBSession.query(main.LayerGroup).filter(main.LayerGroup.name == group).one()
-            return self._group(group_db.name, group_db, layers, depth=2, dim=DimensionInformation())
-        except NoResultFound:  # pragma: no cover
+            return await self._group(group_db.name, group_db, layers, depth=2, dim=DimensionInformation())
+        except NoResultFound:
             return (
                 None,
-                set(
-                    [
-                        "Unable to find the Group named: {}, Available Groups: {}".format(
-                            group,
-                            ", ".join([i[0] for i in models.DBSession.query(main.LayerGroup.name).all()]),
-                        )
-                    ]
-                ),
+                {
+                    f"Unable to find the Group named: {group}, Available Groups: "
+                    f"{', '.join([i[0] for i in models.DBSession.query(main.LayerGroup.name).all()])}"
+                },
             )
```

## c2cgeoportal_geoportal/views/tinyowsproxy.py

```diff
@@ -1,9 +1,7 @@
-# -*- coding: utf-8 -*-
-
 # Copyright (c) 2015-2021, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
@@ -25,35 +23,40 @@
 
 # The views and conclusions contained in the software and documentation are those
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
 
 import logging
+from typing import Any, Dict, Optional, Set, Tuple
 
+import pyramid.request
 from defusedxml import ElementTree
-from pyramid.httpexceptions import HTTPBadRequest, HTTPForbidden, HTTPUnauthorized
+from pyramid.httpexceptions import HTTPBadRequest, HTTPForbidden, HTTPInternalServerError, HTTPUnauthorized
 from pyramid.view import view_config
 
 from c2cgeoportal_commons import models
+from c2cgeoportal_commons.lib.url import Url
 from c2cgeoportal_commons.models import main
-from c2cgeoportal_geoportal.lib.caching import NO_CACHE, PRIVATE_CACHE
+from c2cgeoportal_geoportal.lib.common_headers import Cache
 from c2cgeoportal_geoportal.lib.filter_capabilities import (
     filter_wfst_capabilities,
     normalize_tag,
     normalize_typename,
 )
 from c2cgeoportal_geoportal.lib.layers import get_writable_layers
 from c2cgeoportal_geoportal.views.ogcproxy import OGCProxy
 
 LOG = logging.getLogger(__name__)
 
 
 class TinyOWSProxy(OGCProxy):
-    def __init__(self, request):
+    """Proxy for the tiny OWN server."""
+
+    def __init__(self, request: pyramid.request.Request):
         OGCProxy.__init__(self, request, has_default_ogc_server=True)
         self.settings = request.registry.settings.get("tinyowsproxy", {})
 
         assert "tinyows_url" in self.settings, "tinyowsproxy.tinyows_url must be set"
         self.ogc_server = (
             models.DBSession.query(main.OGCServer)
             .filter(main.OGCServer.name == self.settings["ogc_server"])
@@ -61,39 +64,38 @@
         )
 
         self.user = self.request.user
 
         # params hold the parameters we are going to send to TinyOWS
         self.lower_params = self._get_lower_params(dict(self.request.params))
 
-    def _get_wfs_url(self):
-        return self.settings.get("tinyows_url")
+    def _get_wfs_url(self, errors: Set[str]) -> Optional[Url]:
+        return Url(self.settings.get("tinyows_url"))
 
-    @view_config(route_name="tinyowsproxy")
-    def proxy(self):
+    @view_config(route_name="tinyowsproxy")  # type: ignore
+    def proxy(self) -> pyramid.response.Response:
         if self.user is None:
             raise HTTPUnauthorized(
                 "Authentication required", headers=[("WWW-Authenticate", 'Basic realm="TinyOWS"')]
             )
 
         operation = self.lower_params.get("request")
         typenames = (
-            set([normalize_typename(self.lower_params.get("typename"))])
-            if "typename" in self.lower_params
-            else set()
+            {normalize_typename(self.lower_params["typename"])} if "typename" in self.lower_params else set()
         )
 
         method = self.request.method
         if method == "POST":
             try:
                 (operation, typenames_post) = self._parse_body(self.request.body)
-            except Exception as exception:
-                LOG.error("Error while parsing POST request body")
-                LOG.exception(exception)
-                raise HTTPBadRequest("Error parsing the request (see logs for more details)")
+            except Exception:
+                LOG.exception("Error while parsing POST request body")
+                raise HTTPBadRequest(  # pylint: disable=raise-missing-from
+                    "Error parsing the request (see logs for more details)"
+                )
 
             typenames = typenames.union(typenames_post)
 
         if operation is None or operation == "":
             operation = "getcapabilities"
 
         if operation == "describefeaturetype":
@@ -105,77 +107,82 @@
                 )
 
         if not self._is_allowed(typenames):
             raise HTTPForbidden("No access rights for at least one of the given type-names")
 
         # we want clients to cache GetCapabilities and DescribeFeatureType req.
         use_cache = method == "GET" and operation in ("getcapabilities", "describefeaturetype")
-        cache_control = PRIVATE_CACHE if use_cache else NO_CACHE
+        cache_control = Cache.PRIVATE if use_cache else Cache.PRIVATE_NO
+
+        errors: Set[str] = set()
+        url = Url(self.settings.get("tinyows_url"))
+        if url is None:
+            LOG.error("Error getting the URL:\n%s", "\n".join(errors))
+            raise HTTPInternalServerError()
 
         response = self._proxy_callback(
             operation,
             cache_control,
-            url=self._get_wfs_url(),
-            params={k: v for k, v in self.request.params.items() if "_" not in k},
+            url=url,
+            params=dict(self.request.params),
             cache=use_cache,
             headers=self._get_headers(),
             body=self.request.body,
         )
         return response
 
-    def _is_allowed(self, typenames):
-        """
-        Checks if the current user has the rights to access the given
-        type-names.
-        """
-
+    def _is_allowed(self, typenames: Set[str]) -> bool:
+        """Check if the current user has the rights to access the given type-names."""
         writable_layers = set()
         for gmflayer in list(get_writable_layers(self.request, [self.ogc_server.id]).values()):
             for ogclayer in gmflayer.layer.split(","):
                 writable_layers.add(ogclayer.lower())
         return typenames.issubset(writable_layers)
 
-    def _get_headers(self):
-        headers = OGCProxy._get_headers(self)
+    def _get_headers(self) -> Dict[str, str]:
+        headers = OGCProxy.get_headers(self)
         if "tinyows_host" in self.settings:
             headers["Host"] = self.settings.get("tinyows_host")
         return headers
 
-    def _proxy_callback(self, operation, cache_control, *args, **kwargs):
+    def _proxy_callback(
+        self, operation: str, cache_control: Cache, *args: Any, **kwargs: Any
+    ) -> pyramid.response.Response:
         response = self._proxy(*args, **kwargs)
         content = response.content.decode()
 
+        errors: Set[str] = set()
+        url = super()._get_wfs_url(errors)
+        if url is None:
+            LOG.error("Error getting the URL:\n%s", "\n".join(errors))
+            raise HTTPInternalServerError()
+
         if operation == "getcapabilities":
-            content = filter_wfst_capabilities(
-                content, super(TinyOWSProxy, self)._get_wfs_url(), self.request
-            )
+            content = filter_wfst_capabilities(content, url, self.request)
 
         content = self._filter_urls(
             content, self.settings.get("online_resource"), self.settings.get("proxy_online_resource")
         )
 
-        return self._build_response(response, content, cache_control, "tinyows")
+        return self._build_response(response, content.encode(), cache_control, "tinyows")
 
     @staticmethod
-    def _filter_urls(content, online_resource, proxy_online_resource):
+    def _filter_urls(content: str, online_resource: str, proxy_online_resource: str) -> str:
         if online_resource is not None and proxy_online_resource is not None:
             return content.replace(online_resource, proxy_online_resource)
         return content
 
     @staticmethod
-    def _parse_body(body):
-        """
-        Read the WFS-T request body and extract the referenced type-names
-        and request method.
-        """
+    def _parse_body(body: str) -> Tuple[str, Set[str]]:
+        """Read the WFS-T request body and extract the referenced type-names and request method."""
         xml = ElementTree.fromstring(body)
         wfs_request = normalize_tag(xml.tag)
 
         # get the type names
-        typenames = set()
+        typenames: Set[str] = set()
         for child in xml:
             tag = normalize_tag(child.tag)
             if tag == "typename":
                 typenames.add(child.text)
             elif tag in ("query", "lock", "update", "delete"):
                 typenames.add(child.get("typeName"))
             elif tag == "insert":
```

## tests/__init__.py

```diff
@@ -1,9 +1,7 @@
-# -*- coding: utf-8 -*-
-
 # Copyright (c) 2011-2019, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
@@ -24,25 +22,31 @@
 # SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 
 # The views and conclusions contained in the software and documentation are those
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
 
-"""Pyramid application test package
+"""
+Pyramid application test package.
 """
 
 import logging
 import os
 import urllib.parse
+import warnings
 
+import sqlalchemy.exc
 from pyramid.testing import DummyRequest as PyramidDummyRequest
 
 from c2cgeoportal_geoportal.lib import caching
 
+with warnings.catch_warnings():
+    warnings.simplefilter("ignore", category=sqlalchemy.exc.SAWarning)
+
 
 class DummyRequest(PyramidDummyRequest):
     def __init__(self, *args, **kwargs):
         super().__init__(*args, **kwargs)
         self.client_addr = "1.1.1.1"
         self.referer = None
         if self.registry.settings is None:
```

## tests/test_cachebuster.py

```diff
@@ -1,9 +1,7 @@
-# -*- coding: utf-8 -*-
-
 # Copyright (c) 2011-2019, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
```

## tests/test_caching.py

```diff
@@ -1,9 +1,7 @@
-# -*- coding: utf-8 -*-
-
 # Copyright (c) 2015-2019, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
@@ -31,21 +29,16 @@
 
 
 from unittest import TestCase
 
 from tests import DummyRequest
 
 from c2cgeoportal_geoportal.lib.cacheversion import get_cache_version
-from c2cgeoportal_geoportal.lib.caching import (
-    CORS_METHODS,
-    NO_CACHE,
-    init_region,
-    invalidate_region,
-    set_common_headers,
-)
+from c2cgeoportal_geoportal.lib.caching import init_region, invalidate_region
+from c2cgeoportal_geoportal.lib.common_headers import CORS_METHODS, Cache, set_common_headers
 
 
 class TestSetCorsHeaders(TestCase):
     ORIGIN1 = "http://www.example.com"
     ORIGIN2 = "http://www.friend.com"
     MAX_AGE = "1234"
     SETTINGS = {"access_control_allow_origin": [ORIGIN1, ORIGIN2], "access_control_max_age": MAX_AGE}
@@ -53,50 +46,50 @@
     @staticmethod
     def _do(method, headers, credentials=False, settings=SETTINGS):
         request = DummyRequest({}, method=method, headers=headers)
         if settings is not None:
             request.registry.settings = {"headers": {"foo": settings}}
         else:
             request.registry.settings = {"headers": {}}
-        set_common_headers(request, "foo", NO_CACHE, credentials=credentials)
+        set_common_headers(request, "foo", Cache.PRIVATE_NO, credentials=credentials)
 
         return dict(request.response.headers)
 
     def test_simple(self):
         """
-        Tests specified in http://www.w3.org/TR/cors/#resource-requests
+        Tests specified in http://www.w3.org/TR/cors/#resource-requests.
         """
         # 1. If the Origin header is not present terminate this set of steps.
         #    The request is outside the scope of this specification.
         assert self._do("POST", {}) == {
-            "Cache-Control": "max-age=0, no-cache",
+            "Cache-Control": "max-age=10, public",
             "Content-Length": "0",
             "Content-Type": "text/html; charset=UTF-8",
-            "Vary": "Origin",
+            "Vary": "Origin, Cookie",
         }
 
         # 2. If the value of the Origin header is not a case-sensitive match for
         #    any of the values in list of origins, do not set any additional
         #    headers and terminate this set of steps.
         assert self._do("POST", {"Origin": "http://foe.com"}) == {
-            "Cache-Control": "max-age=0, no-cache",
+            "Cache-Control": "max-age=10, public",
             "Content-Length": "0",
             "Content-Type": "text/html; charset=UTF-8",
-            "Vary": "Origin",
+            "Vary": "Origin, Cookie",
         }
 
         # 3. If the resource supports credentials add a single
         #    Access-Control-Allow-Origin header, with the value of the Origin
         #    header as value, and add a single Access-Control-Allow-Credentials
         #    header with the case-sensitive string "true" as value.
         assert self._do("POST", {"Origin": self.ORIGIN2}, credentials=True) == {
-            "Cache-Control": "max-age=0, no-cache",
+            "Cache-Control": "max-age=10, public",
             "Content-Length": "0",
             "Content-Type": "text/html; charset=UTF-8",
-            "Vary": "Origin",
+            "Vary": "Origin, Cookie",
             "Access-Control-Max-Age": self.MAX_AGE,
             "Access-Control-Allow-Origin": self.ORIGIN2,
             "Access-Control-Allow-Methods": CORS_METHODS,
             "Access-Control-Allow-Credentials": "true",
         }
 
         # 3. Otherwise, add a single Access-Control-Allow-Origin header, with
@@ -106,16 +99,15 @@
         # 4. If the list of exposed headers is not empty add one or more
         #    Access-Control-Expose-Headers headers, with as values the header
         #    field names given in the list of exposed headers.
         # Not implemented
 
     def test_preflight(self):
         """
-        Tests specified in
-        http://www.w3.org/TR/cors/#resource-preflight-requests
+        Tests specified in http://www.w3.org/TR/cors/#resource-preflight-requests.
         """
         # 1. If the Origin header is not present terminate this set of steps.
         #    The request is outside the scope of this specification.
         assert self._do("OPTIONS", {"Access-Control-Request-Method": "GET"}) == {
             "Content-Length": "0",
             "Content-Type": "text/html; charset=UTF-8",
             "Vary": "Origin",
@@ -206,46 +198,46 @@
             "Access-Control-Allow-Headers": "X-Foo, X-Bar",
             "Cache-Control": "max-age=" + self.MAX_AGE,
         }
 
     def test_not_configured(self):
         # If the service is not configured, then no CORS head.
         assert self._do("GET", {"Origin": self.ORIGIN1}, settings=None) == {
-            "Cache-Control": "max-age=0, no-cache",
+            "Cache-Control": "max-age=10, public",
             "Content-Length": "0",
             "Content-Type": "text/html; charset=UTF-8",
-            "Vary": "Origin",
+            "Vary": "Origin, Cookie",
         }
 
     def test_match_all(self):
         settings = {
             "access_control_allow_origin": [self.ORIGIN1, "*"],
             "access_control_max_age": self.MAX_AGE,
         }
 
         # An origin included in the access_control_allow_origin list is OK with
         # credentials
         assert self._do("POST", {"Origin": self.ORIGIN1}, credentials=True, settings=settings) == {
-            "Cache-Control": "max-age=0, no-cache",
+            "Cache-Control": "max-age=10, public",
             "Content-Length": "0",
             "Content-Type": "text/html; charset=UTF-8",
-            "Vary": "Origin",
+            "Vary": "Origin, Cookie",
             "Access-Control-Max-Age": self.MAX_AGE,
             "Access-Control-Allow-Origin": self.ORIGIN1,
             "Access-Control-Allow-Methods": CORS_METHODS,
             "Access-Control-Allow-Credentials": "true",
         }
 
         # 3. Otherwise, add a single Access-Control-Allow-Origin header, with
         #    either the value of the Origin header or the string "*" as value.
         assert self._do("POST", {"Origin": "http://www.guest.com"}, settings=settings) == {
-            "Cache-Control": "max-age=0, no-cache",
+            "Cache-Control": "max-age=10, public",
             "Content-Length": "0",
             "Content-Type": "text/html; charset=UTF-8",
-            "Vary": "Origin",
+            "Vary": "Origin, Cookie",
             "Access-Control-Max-Age": self.MAX_AGE,
             "Access-Control-Allow-Origin": "*",
             "Access-Control-Allow-Methods": CORS_METHODS,
         }
 
         # 7. If the resource supports credentials add a single
         #    Access-Control-Allow-Origin header, with the value of the Origin
```

## tests/test_checker.py

```diff
@@ -1,9 +1,7 @@
-# -*- coding: utf-8 -*-
-
 # Copyright (c) 2013-2019, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
```

## tests/test_decimaljson.py

```diff
@@ -1,9 +1,7 @@
-# -*- coding: utf-8 -*-
-
 # Copyright (c) 2011-2019, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
@@ -30,18 +28,20 @@
 # pylint: disable=missing-docstring,attribute-defined-outside-init,protected-access
 
 
 import decimal
 import json
 from unittest import TestCase
 
-from c2cwsgiutils.pretty_json import fast_dumps
+from c2cwsgiutils.pretty_json import _FastDumps as FastDumps
 
 
 class TestDecimalJSON(TestCase):
     def test_decimal(self):
         value = {"str": "an str", "int": 1, "dec": decimal.Decimal("1.2")}
+        fast_dumps = FastDumps(False, False)
         result = fast_dumps(value)
         self.assertEqual(json.loads(result), {"int": 1, "dec": 1.2, "str": "an str"})
 
     def test_decimal_json(self):
-        self.assertEqual(fast_dumps({"a": decimal.Decimal("3.3")}), '{\n  "a": 3.3\n}')
+        fast_dumps = FastDumps(False, False)
+        assert fast_dumps({"a": decimal.Decimal("3.3")}) == '{"a":3.3}'
```

## tests/test_headerstween.py

```diff
@@ -1,9 +1,7 @@
-# -*- coding: utf-8 -*-
-
 # Copyright (c) 2018-2019, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
```

## tests/test_i18n.py

```diff
@@ -20,12 +20,12 @@
     )
     @patch(
         "c2cgeoportal_geoportal.lib.i18n.os.path.isdir",
         side_effect=[locale[1] for locale in example_locale_content],
     )
     def test_available_locale_names(self, isdir_mock, listdir_mock, exists_mock):
         locales = available_locale_names()
-        self.assertEqual(set(locales), set(["de", "en", "fr"]))
+        self.assertEqual(set(locales), {"de", "en", "fr"})
 
     def test_available_locale_names_no_dir(self):
         locales = available_locale_names()
         self.assertEqual(locales, [])
```

## tests/test_init.py

```diff
@@ -1,9 +1,7 @@
-# -*- coding: utf-8 -*-
-
 # Copyright (c) 2012-2019, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
@@ -38,15 +36,15 @@
 from tests import DummyRequest
 
 import c2cgeoportal_geoportal
 from c2cgeoportal_geoportal import (
     call_hook,
     create_get_user_from_request,
     default_user_validator,
-    is_valid_referer,
+    is_valid_referrer,
     set_user_validator,
 )
 
 
 class TestIncludeme(TestCase):
 
     config = None
@@ -91,24 +89,23 @@
 
     def test_user_validator_overwrite(self):
         self.config.include(c2cgeoportal_geoportal.includeme)
 
         def custom_validator(username, password):
             del username  # Unused
             del password  # Unused
-            return False  # pragma: no cover
+            return False
 
         self.config.set_user_validator(custom_validator)
         self.assertEqual(self.config.registry.validate_user, custom_validator)
 
 
 class TestReferer(TestCase):
     """
-    Check that accessing something with a bad HTTP referer is equivalent to a
-    not authenticated query.
+    Check that accessing something with a bad HTTP referer is equivalent to a not authenticated query.
     """
 
     BASE1 = "http://example.com/app"
     BASE2 = "http://friend.com/app2"
     SETTINGS = {"authorized_referers": [BASE1, BASE2]}
     USER = "toto"
 
@@ -124,15 +121,15 @@
         get_user = create_get_user_from_request(self.SETTINGS)
         return get_user(MockRequest(to=to, ref=ref, method=method))
 
     def test_match_url(self):
         def match(reference, value, expected):
             r = DummyRequest()
             r.referer = value
-            self.assertEqual(is_valid_referer(r, {"authorized_referers": [reference]}), expected)
+            self.assertEqual(is_valid_referrer(r, {"authorized_referers": [reference]}), expected)
 
         match("http://example.com/app/", "http://example.com/app?k=v", True)
         match("http://example.com/app/", "http://example.com/app?k=v#link", True)
         match("http://example.com/app/", "http://example.com/app#link", True)
         match("http://example.com/app/", "http://example.com/app", True)
         match("http://example.com/app", "http://example.com/app/", True)
         match("http://example.com/app", "http://example.com/app/x/y", True)
```

## tests/test_locale_negociator.py

```diff
@@ -1,9 +1,7 @@
-# -*- coding: utf-8 -*-
-
 # Copyright (c) 2013-2019, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
```

## tests/test_mapserverproxy_route_predicate.py

```diff
@@ -1,9 +1,7 @@
-# -*- coding: utf-8 -*-
-
 # Copyright (c) 2013-2019, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
```

## tests/test_raster.py

```diff
@@ -1,9 +1,7 @@
-# -*- coding: utf-8 -*-
-
 # Copyright (c) 2013-2021, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
```

## tests/test_wmstparsing.py

```diff
@@ -1,9 +1,7 @@
-# -*- coding: utf-8 -*-
-
 # Copyright (c) 2013-2019, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
```

## Comparing `c2cgeoportal_geoportal/scaffolds/create/Dockerfile_tmpl` & `c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/Dockerfile`

 * *Files 13% similar despite different names*

```diff
@@ -1,67 +1,76 @@
-FROM camptocamp/geomapfish-tools:{{geomapfish_version}} as builder
+ARG {{cookiecutter.geomapfish_version_tag}}
+ARG {{cookiecutter.geomapfish_major_version_tag}}
+
+FROM camptocamp/geomapfish-tools:{{cookiecutter.geomapfish_version_tag_env}} as builder
 
 ENV VARS_FILE=vars.yaml
 ENV CONFIG_VARS sqlalchemy.url sqlalchemy.pool_recycle sqlalchemy.pool_size sqlalchemy.max_overflow \
     sqlalchemy.executemany_mode sqlalchemy_slave.url sqlalchemy_slave.pool_recycle sqlalchemy_slave.pool_size \
     sqlalchemy_slave.max_overflow sqlalchemy_slave.executemany_mode schema schema_static enable_admin_interface \
     default_locale_name servers layers cache admin_interface getitfixed functionalities \
     raster shortener hide_capabilities tinyowsproxy resourceproxy print_url print_get_redirect \
     checker check_collector default_max_age package srid \
     reset_password fulltextsearch global_headers headers authorized_referers hooks stats db_chooser \
-    dbsessions urllogin host_forward_host smtp c2c.base_path welcome_email \
-    lingua_extractor interfaces_config interfaces devserver_url api authentication intranet metrics pdfreport
+    dbsessions urllogin host_forward_host headers_whitelist headers_blacklist \
+    smtp c2c.base_path welcome_email \
+    lingua_extractor interfaces_config interfaces devserver_url api authentication intranet metrics pdfreport \
+    vector_tiles i18next
 
 COPY . /tmp/config/
 
 ARG SIMPLE
 ENV SIMPLE=$SIMPLE
 
-RUN build-l10n "{{package}}"
+RUN build-l10n "{{cookiecutter.package}}"
+
+ARG PGSCHEMA
+ENV PGSCHEMA=$PGSCHEMA
 
 RUN \
     cd /tmp/config/geoportal/ && \
     c2c-template --vars ${VARS_FILE} \
-        --get-config {{package}}_geoportal/config.yaml \
+        --get-config {{cookiecutter.package}}_geoportal/config.yaml \
         ${CONFIG_VARS} && \
-    pykwalify --data-file {{package}}_geoportal/config.yaml \
+    pykwalify --data-file {{cookiecutter.package}}_geoportal/config.yaml \
         --schema-file CONST_config-schema.yaml && \
-    rm CONST_* vars.yaml
+    rm CONST_* vars.yaml && \
+    qgisserver-plugin-config {{cookiecutter.package}}_geoportal/config.yaml ../qgisserver/geomapfish.yaml.tmpl
 
 ###############################################################################
 
-FROM camptocamp/geomapfish-config:{{geomapfish_main_version}}
+FROM camptocamp/geomapfish-config:{{cookiecutter.geomapfish_major_version_tag_env}} AS gmf_config
 
 ARG PGSCHEMA
 ENV PGSCHEMA=$PGSCHEMA
 
 COPY --from=builder /tmp/config/ /tmp/config/
 
 RUN \
     if [ -e /tmp/config/mapserver ]; then mv /tmp/config/mapserver /etc/; fi && \
     if [ -e /tmp/config/tilegeneration ]; then mv /tmp/config/tilegeneration /etc/; fi && \
     if [ -e /tmp/config/qgisserver ]; then mv /tmp/config/qgisserver /etc/qgisserver; fi && \
+    if [ -e /tmp/config/haproxy ]; then mv /tmp/config/haproxy/* /etc/haproxy/; fi && \
     mkdir --parent /usr/local/tomcat/webapps/ROOT/ && \
     if [ -e /tmp/config/print ]; then mv /tmp/config/print/print-apps /usr/local/tomcat/webapps/ROOT/; fi && \
-    mv /tmp/config/geoportal/{{package}}_geoportal/ /etc/geomapfish/ && \
+    mv /tmp/config/geoportal/{{cookiecutter.package}}_geoportal/ /etc/geomapfish/ && \
+    mv /tmp/config/geoportal/* /etc/geomapfish/ || true && \
     chmod g+w -R \
         /etc/geomapfish \
         /etc/mapserver \
         /etc/qgisserver \
         /etc/tilegeneration \
         /usr/local/tomcat/webapps/ROOT/print-apps \
-        /etc/gunicorn \
         /etc/haproxy_dev \
         /etc/haproxy && \
     adduser www-data root && \
     sed 's#bind :80#bind *:443 ssl crt /etc/haproxy_dev/localhost.pem#g' /etc/haproxy/haproxy.cfg.tmpl \
         > /etc/haproxy_dev/haproxy.cfg.tmpl && \
     echo '    http-request set-header X-Forwarded-Proto https' >> /etc/haproxy_dev/haproxy.cfg.tmpl
 
 VOLUME /etc/geomapfish \
     /etc/mapserver \
     /etc/qgisserver \
     /etc/tilegeneration \
     /usr/local/tomcat/webapps/ROOT/print-apps \
-    /etc/gunicorn \
     /etc/haproxy_dev \
     /etc/haproxy
```

## Comparing `c2cgeoportal_geoportal/scaffolds/create/docker-compose.override.sample.yaml` & `c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/docker-compose.override.sample.yaml`

 * *Files 19% similar despite different names*

```diff
@@ -1,54 +1,66 @@
 ---
 # This file can be renamed as `docker-compose.override.yaml` and uncomment the desired lines for
 # development. The file `docker-compose.override.yaml` is ignored by Git by default.
 
-# yamllint disable rule:line-length
-
-version: '2.0'
+version: '2.3'
 
 services:
   geoportal:
     user: root
-    volumes:
-      # For Python project development.
-      - ./geoportal/${PACKAGE}_geoportal:/app/${PACKAGE}_geoportal
-      # For Python c2cgeportal development.
-      # - ./../c2cgeoportal/commons/c2cgeoportal_commons:/opt/c2cgeoportal/commons/c2cgeoportal_commons
-      # - ./../c2cgeoportal/geoportal/c2cgeoportal_geoportal:/opt/c2cgeoportal/geoportal/c2cgeoportal_geoportal
-      # - ./../c2cgeoportal/admin/c2cgeoportal_admin:/opt/c2cgeoportal/admin/c2cgeoportal_admin
+    # volumes:
+    # For Python project development.
+    # - ./geoportal/${PACKAGE}_geoportal:/app/${PACKAGE}_geoportal
+    # For Python c2cgeportal development.
+    # - ./../c2cgeoportal/commons/c2cgeoportal_commons:/opt/c2cgeoportal/commons/c2cgeoportal_commons
+    # - ./../c2cgeoportal/geoportal/c2cgeoportal_geoportal:/opt/c2cgeoportal/geoportal/c2cgeoportal_geoportal
+    # - ./../c2cgeoportal/admin/c2cgeoportal_admin:/opt/c2cgeoportal/admin/c2cgeoportal_admin
+    command:
+      - /usr/local/bin/pserve
+      - --reload
+      - c2c:///app/development.ini
     environment:
-      - GUNICORN_CMD_ARGS=--reload
-      - C2CWSGIUTILS_CONFIG=/app/development.ini
+      - DEVELOPMENT=1
+      - C2C_SQL_PROFILER_ENABLED=1
+      - C2C_DEBUG_VIEW_ENABLED=1
       # - PRINT_URL=http://print:8080/print/
+      - PYTHONWARNINGS=default::DeprecationWarning
+      - SQLALCHEMY_WARN_20=true
     ports:
-      - 5678:5678  # For remote debugging using Visual Studio Code
+      - 5678:5678 # For remote debugging using Visual Studio Code
 
   # Also uncomment the PRINT_URL in geoportal
   # print:
   #   extends:
   #     file: docker-compose-lib.yaml
   #     service: print
   #   volumes_from:
   #     - config:ro
+  #   environment:
+  #     - LOG_LEVEL=DEBUG
 
-  qgisserver:
-    # volumes:
-    #   - './../c2cgeoportal/docker/qgisserver/geomapfish_qgisserver/:/var/www/plugins/geomapfish_qgisserver/'
-    #   - './../c2cgeoportal/commons/c2cgeoportal_commons:/opt/c2cgeoportal/commons/c2cgeoportal_commons/'
-    environment:
-      - QGIS_SERVER_LOG_LEVEL=0
+  # qgisserver:
+  #   # volumes:
+  #   #   - './../c2cgeoportal/docker/qgisserver/geomapfish_qgisserver/:/var/www/plugins/geomapfish_qgisserver/'
+  #   #   - './../c2cgeoportal/commons/c2cgeoportal_commons:/opt/c2cgeoportal/commons/c2cgeoportal_commons/'
+  #   environment:
+  #     - QGIS_SERVER_LOG_LEVEL=0
+  #     - QGIS_CATCH_SEGV=1 # The result stack traces will be available in /var/log/qgis.log
 
-  # For Javascript project development.
-  # The debug application will be available at ``https://<host>/<entry_point>/dev/<interface>.html``.
-  webpack_dev_server:
-    # Uncomment these lines when you want to debug respectively the project js, ngeo js and/or the gmf contrib js.
-    # Adapt the path for ngeo / gmf contrib to point where you have checkouted the code.
-    # volumes:
-    #   - ./geoportal/${PACKAGE}_geoportal/static-ngeo:/app/${PACKAGE}_geoportal/static-ngeo
-    #   - ./../ngeo/src:/usr/lib/node_modules/ngeo/src
-    #   - ./../ngeo/contribs:/usr/lib/node_modules/ngeo/contribs
+  tools:
     volumes_from:
       - config:rw
-    extends:
-      file: docker-compose-lib.yaml
-      service: webpack_dev_server
+  #
+  # For Javascript project development.
+  # The debug application will be available at ``https://<host>/<entry_point>/dev/<interface>.html``.
+  # webpack_dev_server:
+  #   # Uncomment these lines when you want to debug respectively the project js, ngeo js and/or the gmf contrib js.
+  #   # Adapt the path for ngeo / gmf contrib to point where you have checkouted the code.
+  #   # volumes:
+  #   #   - ./geoportal/${PACKAGE}_geoportal/static-ngeo:/app/${PACKAGE}_geoportal/static-ngeo
+  #   #   - ./../ngeo/src:/usr/lib/node_modules/ngeo/src
+  #   #   - ./../ngeo/contribs:/usr/lib/node_modules/ngeo/contribs
+  #   volumes_from:
+  #     - config:rw
+  #   extends:
+  #     file: docker-compose-lib.yaml
+  #     service: webpack_dev_server
```

## Comparing `c2cgeoportal_geoportal/scaffolds/create/docker-compose.yaml` & `c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/docker-compose.yaml`

 * *Files 12% similar despite different names*

```diff
@@ -1,11 +1,14 @@
 ---
 # The project Docker compose file for development.
 
-version: '2.0'
+version: '2.3'
+
+volumes:
+  postgresql_data:
 
 services:
   config:
     extends:
       file: docker-compose-lib.yaml
       service: config
 
@@ -28,35 +31,32 @@
   ## qgisserver:
   ##   extends:
   ##     file: docker-compose-lib.yaml
   ##     service: qgisserver
   ##   volumes_from:
   ##     - config:ro
   ##   environment:
-  ##     # Single QGIS project files
-  ##     - QGIS_PROJECT_FILE=/etc/qgisserver/project.qgz
-  ##     - GEOMAPFISH_OGCSERVER=<OGC server name>
-  ##     # Multiple QGIS project files
-  ##     - QGIS_PROJECT_FILE=
-  ##     - GEOMAPFISH_ACCESSCONTROL_CONFIG=/etc/qgisserver/accesscontrol_config.yaml
+  ##     - QGIS_SERVER_LANDING_PAGE_PROJECTS_DIRECTORIES=/etc/qgisserver/
+  ##     # Or
+  ##     - QGIS_SERVER_LANDING_PAGE_PROJECTS_PG_CONNECTIONS=...
 
   tinyows:
     extends:
       file: docker-compose-lib.yaml
       service: tinyows
     volumes_from:
       - config:ro
 
   # Standalone version
   redis:
     extends:
       file: docker-compose-lib.yaml
       service: redis
 
-  # To test OpenShift version
+  # To test Kubernetes version
   # redis_master:
   #   extends:
   #     file: docker-compose-lib.yaml
   #     service: redis_master
   #
   # redis_slave:
   #   extends:
@@ -105,14 +105,19 @@
       file: docker-compose-lib.yaml
       service: front
     volumes_from:
       - config:ro
 
   # Rich image for project development with e.-g. vim, tree, awscli, psql, ...
   tools:
-    volumes_from:
-      - config:rw
-    volumes:
-      - .:/src
     extends:
       file: docker-compose-lib.yaml
       service: tools
+    volumes_from:
+      - config:ro
+
+  # db:
+  #   extends:
+  #     file: docker-compose-lib.yaml
+  #     service: db
+  #   volumes:
+  #     - postgresql_data:/var/lib/postgresql/data
```

## Comparing `c2cgeoportal_geoportal/scaffolds/create/env.default_tmpl` & `c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/env.default`

 * *Files 24% similar despite different names*

```diff
@@ -1,67 +1,82 @@
 # Default values for c2cgeoportal
-GEOMAPFISH_VERSION={{geomapfish_version}}
-GEOMAPFISH_MAIN_VERSION={{geomapfish_main_version}}
-COMPOSE_PROJECT_NAME={{package}}
-PACKAGE={{package}}
+GEOMAPFISH_VERSION={{cookiecutter.geomapfish_version}}
+GEOMAPFISH_MAIN_VERSION={{cookiecutter.geomapfish_main_version}}
+GEOMAPFISH_MAIN_MINOR_VERSION={{cookiecutter.geomapfish_main_minor_version}}
+COMPOSE_PROJECT_NAME={{cookiecutter.package}}
+PACKAGE={{cookiecutter.package}}
+SRID={{cookiecutter.srid}}
 DOCKER_PORT=8484
-DOCKER_BASE=camptocamp/{{package}}
+DOCKER_BASE=camptocamp/{{cookiecutter.package}}
 DOCKER_TAG=latest
 VISIBLE_WEB_HOST=localhost:8484
 VISIBLE_WEB_PROTOCOL=https
 VISIBLE_ENTRY_POINT=/
 DEVELOPMENT=False
 AUTHTKT_TIMEOUT=86400
 AUTHTKT_REISSUE_TIME=9000
 AUTHTKT_MAXAGE=86400
-AUTHTKT_SECRET={{authtkt_secret}}
-AUTHTKT_COOKIENAME=auth_tkt_{{package}}
+AUTHTKT_SECRET={{cookiecutter.authtkt_secret}}
+AUTHTKT_COOKIENAME=auth_tkt_{{cookiecutter.package}}
 AUTHTKT_HTTP_ONLY=True
 AUTHTKT_SECURE=True
 AUTHTKT_SAMESITE=Lax
 BASICAUTH=False
 MUTUALIZED_PRINT_URL=mutualized-print.apps.openshift-ch-1.camptocamp.com
 # For internal print
-# DISABLE_LOCAL_PRINT will be set to # on mutualised print to comment local configuration
-# DISABLE_MUTUALIZED_PRINT is set to # on local print to comment mutualized configuration
+# DISABLE_LOCAL will be set to # on mutualize services to comment local configuration
+# DISABLE_MUTUALIZE is set to # locally to comment mutualize services
+DISABLE_MUTUALIZE=#
+DISABLE_LOCAL=
+# For backward compatibility
 DISABLE_MUTUALIZED_PRINT=#
 DISABLE_LOCAL_PRINT=
+
 GEOPORTAL_INTERNAL_URL=http://geoportal:8080
 GEOPORTAL_INTERNAL_HOST=geoportal
 GEOPORTAL_INTERNAL_PORT=8080
 TILECLOUDCHAIN_INTERNAL_URL=http://tilecloudchain:8080
 TILECLOUDCHAIN_INTERNAL_HOST=tilecloudchain
 TILECLOUDCHAIN_INTERNAL_PORT=8080
 # For internal print
 MAPSERVER_URL=http://mapserver:8080/
 TINYOWS_URL=http://tinyows:8080/
-QGISSERVER_URL=http://qgisserver:8080/
-QGIS_VERSION=3.16
-GUNICORN_PARAMS=--bind=:8080 --worker-class=gthread --threads=10 --workers=1 --timeout=60 --max-requests=1000 --max-requests-jitter=100 --config=/etc/gunicorn/config.py --worker-tmp-dir=/dev/shm  --limit-request-line=8190
+QGISSERVER_URL=http://qgisserver:8080/mapserv_proxy
+QGIS_VERSION=3.28-gdal3.7
+POSTGRES_TAG=13-postgis-3
 
 DEVSERVER_HOST=webpack_dev_server:8080
 REDIS_SERVICENAME=mymaster
 REDIS_DB=0
-REDIS_TIMEOUT=3
-C2C_REDIS_TIMEOUT=3
+REDIS_TIMEOUT=10
+C2C_REDIS_TIMEOUT=10
 C2C_REDIS_SERVICENAME=mymaster
 C2C_REDIS_DB=0
 PGOPTIONS=-c statement_timeout=30000
 SQLALCHEMY_POOL_RECYCLE=30
 SQLALCHEMY_POOL_SIZE=5
 SQLALCHEMY_MAX_OVERFLOW=25
+SQLALCHEMY_SLAVE_POOL_RECYCLE=30
+SQLALCHEMY_SLAVE_POOL_SIZE=5
+SQLALCHEMY_SLAVE_MAX_OVERFLOW=25
 CATALINA_OPTS=-Xmx1024m
 C2C_BROADCAST_PREFIX=broadcast_geoportal_
 LOG_LEVEL=INFO
 C2CGEOPORTAL_LOG_LEVEL=INFO
 SQL_LOG_LEVEL=WARN
 GUNICORN_LOG_LEVEL=WARN
 OTHER_LOG_LEVEL=WARN
 DOGPILECACHE_LOG_LEVEL=WARN
 C2CWSGI_LOG_LEVEL=WARN
 TILECLOUD_LOG_LEVEL=INFO
 TILECLOUD_CHAIN_LOG_LEVEL=INFO
+C2CWSGIUTILS_LOG_LEVEL=INFO
 LOG_TYPE=console
 CPL_VSIL_CURL_USE_CACHE=TRUE
 CPL_VSIL_CURL_CACHE_SIZE=128000000
 CPL_VSIL_CURL_USE_HEAD=FALSE
 GDAL_DISABLE_READDIR_ON_OPEN=TRUE
+QGIS_AUTH_DB_DIR_PATH=/etc/qgisserver/
+QGIS_SERVER_IGNORE_BAD_LAYERS=true
+QGIS_SERVER_DISABLE_GETPRINT=true
+PGSERVICEFILE=/etc/qgisserver/pg_service.conf
+FRONT_LOG_DIRECTORY=/dev/log
```

## Comparing `c2cgeoportal_geoportal/scaffolds/create/geoportal/Dockerfile_tmpl` & `c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/Dockerfile`

 * *Files 14% similar despite different names*

```diff
@@ -1,27 +1,35 @@
-FROM camptocamp/geomapfish-tools:{{geomapfish_version}} as builder
+ARG {{cookiecutter.geomapfish_version_tag}}
+ARG {{cookiecutter.geomapfish_major_version_tag}}
+
+FROM camptocamp/geomapfish-tools:{{cookiecutter.geomapfish_version_tag_env}} as builder
 LABEL maintainer Camptocamp "info@camptocamp.com"
 
+COPY requirements.txt /tmp/requirements.txt
+RUN \
+  python3 -m pip install --disable-pip-version-check --no-cache-dir --requirement=/tmp/requirements.txt && \
+  rm --recursive --force /tmp/* /var/tmp/* /root/.cache/*
+
 WORKDIR /app
 COPY webpack.*.js Makefile CONST_Makefile /app/
-COPY {{package}}_geoportal/static-ngeo /app/{{package}}_geoportal/static-ngeo
+COPY {{cookiecutter.package}}_geoportal/static-ngeo /app/{{cookiecutter.package}}_geoportal/static-ngeo
 RUN make apps
 
 COPY . /app
 
 RUN make checks
 RUN make build
 RUN mv webpack.apps.js webpack.apps.js.tmpl
 
 ENTRYPOINT [ "/usr/bin/eval-templates" ]
 CMD [ "webpack-dev-server", "--mode=development", "--debug", "--watch", "--no-inline" ]
 
 ###############################################################################
 
-FROM camptocamp/geomapfish:{{geomapfish_main_version}} as runner
+FROM camptocamp/geomapfish:{{cookiecutter.geomapfish_major_version_tag_env}} as runner
 
 COPY requirements.txt /tmp/requirements.txt
 RUN \
   python3 -m pip install --disable-pip-version-check --no-cache-dir --requirement=/tmp/requirements.txt && \
   rm --recursive --force /tmp/* /var/tmp/* /root/.cache/*
 
 WORKDIR /app
@@ -31,36 +39,37 @@
 COPY --from=builder /usr/lib/node_modules/ngeo/dist/* /etc/static-ngeo/
 COPY --from=builder /etc/static-ngeo/* /etc/static-ngeo/
 COPY --from=builder /app/alembic.ini /app/alembic.yaml ./
 RUN chmod go+w /etc/static-ngeo/
 
 RUN python3 -m pip install --disable-pip-version-check --no-cache-dir --editable=/app/ && \
     python3 -m compileall -q /usr/local/lib/python3.* \
-        -x '/(ptvsd|pipenv|.*pydev.*|networkx)/' && \
-    python3 -m compileall -q /app/{{package}}_geoportal -x /app/{{package}}_geoportal/static.*
+        -x '/(debugpy|pipenv|.*pydev.*|networkx)/' && \
+    python3 -m compileall -q /app/{{cookiecutter.package}}_geoportal -x /app/{{cookiecutter.package}}_geoportal/static.*
 
 ARG GIT_HASH
 RUN c2cwsgiutils-genversion ${GIT_HASH}
 
 ARG PGSCHEMA
 ENV PGSCHEMA=${PGSCHEMA}
 
 ENTRYPOINT [ "/usr/bin/eval-templates" ]
-CMD ["c2cwsgiutils-run"]
+CMD ["gunicorn", "--paste=/app/production.ini"]
 
 ENV VISIBLE_ENTRY_POINT=/ \
     AUTHTKT_TIMEOUT=86400 \
     AUTHTKT_REISSUE_TIME=9000 \
     AUTHTKT_MAXAGE=86400 \
     AUTHTKT_COOKIENAME=auth_tkt \
     AUTHTKT_HTTP_ONLY=True \
     AUTHTKT_SECURE=True \
     AUTHTKT_SAMESITE=Lax \
     BASICAUTH=False \
     LOG_LEVEL=INFO \
     C2CGEOPORTAL_LOG_LEVEL=INFO \
     C2CWSGIUTILS_LOG_LEVEL=INFO \
     GUNICORN_LOG_LEVEL=INFO \
-    SQL_LOG_LEVEL=WARN \
+    SQL_LOG_LEVEL=WARNING \
     DOGPILECACHE_LOG_LEVEL=INFO \
-    OTHER_LOG_LEVEL=WARN \
-    DEVELOPMENT=False
+    OTHER_LOG_LEVEL=WARNING \
+    DEVELOPMENT=0 \
+    LOG_TYPE=console
```

## Comparing `c2cgeoportal_geoportal/scaffolds/create/geoportal/alembic.ini` & `c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/alembic.ini`

 * *Files identical despite different names*

## Comparing `c2cgeoportal_geoportal/scaffolds/create/geoportal/development.ini_tmpl` & `c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/development.ini`

 * *Files 26% similar despite different names*

```diff
@@ -1,47 +1,66 @@
+###
+# app configuration
+# https://docs.pylonsproject.org/projects/pyramid/en/1.6-branch/narr/environment.html
+# this file consider that you use paste.
+###
+
 [app:app]
-use = egg:{{package}}_geoportal
+use = egg:{{cookiecutter.package}}_geoportal
 filter-with = proxy-prefix
-pyramid.reload_templates = true
-pyramid.debug_authorization = false
-pyramid.debug_notfound = true
-pyramid.debug_routematch = false
-pyramid.debug_templates = true
-pyramid.includes =
-    pyramid_debugtoolbar
-debugtoolbar.hosts = 0.0.0.0/0
-mako.directories = {{package}}_geoportal:templates
+
+pyramid.reload_templates = %(DEVELOPMENT)s
+pyramid.debug_authorization = %(DEVELOPMENT)s
+pyramid.debug_notfound = %(DEVELOPMENT)s
+pyramid.debug_routematch = %(DEVELOPMENT)s
+pyramid.debug_templates = %(DEVELOPMENT)s
+
+pyramid.includes = pyramid_debugtoolbar
+# Be careful when manipulate this,
+# if a hacker has access to the debug toolbar,
+# it's a severe security issue
+# With the provided values, the debug toolbar is only available from the Docker network
+debugtoolbar.hosts = 172.17.0.0/16
+    172.18.0.0/16
+    172.19.0.0/16
+mako.directories = {{cookiecutter.package}}_geoportal:templates
     c2cgeoportal_geoportal:templates
+
 authtkt_secret = %(AUTHTKT_SECRET)s
 authtkt_cookie_name = %(AUTHTKT_COOKIENAME)s
 authtkt_timeout = %(AUTHTKT_TIMEOUT)s
 authtkt_max_age = %(AUTHTKT_MAXAGE)s
 authtkt_reissue_time = %(AUTHTKT_REISSUE_TIME)s
 authtkt_http_only = %(AUTHTKT_HTTP_ONLY)s
 authtkt_secure = %(AUTHTKT_SECURE)s
 authtkt_samesite = %(AUTHTKT_SAMESITE)s
 basicauth = %(BASICAUTH)s
 
 app.cfg = /etc/geomapfish/config.yaml
 
+tm.annotate_user = false
+
+[server:main]
+use = egg:waitress#main
+listen = *:8080
+
 [filter:proxy-prefix]
 use = egg:PasteDeploy#prefix
 prefix = %(VISIBLE_ENTRY_POINT)s
 
 [pipeline:main]
-pipeline =
-    app
+pipeline = egg:c2cwsgiutils#client_info egg:c2cwsgiutils#profiler egg:c2cwsgiutils#sentry app
 
 ###
 # logging configuration
 # https://docs.pylonsproject.org/projects/pyramid/en/1.5-branch/narr/logging.html
 ###
 
 [loggers]
-keys = root, sqlalchemy, gunicorn, c2cgeoportal_commons, c2cgeoportal_geoportal, c2cgeoportal_admin, {{package}}_geoportal, c2cwsgiutils, dogpilecache
+keys = root, sqlalchemy, gunicorn, c2cgeoportal_commons, c2cgeoportal_geoportal, c2cgeoportal_admin, {{cookiecutter.package}}_geoportal, c2cwsgiutils, dogpilecache
 
 [handlers]
 keys = console
 
 [formatters]
 keys = generic
 
@@ -60,18 +79,18 @@
 qualname = c2cgeoportal_geoportal
 
 [logger_c2cgeoportal_admin]
 level = %(C2CGEOPORTAL_LOG_LEVEL)s
 handlers =
 qualname = c2cgeoportal_admin
 
-[logger_{{package}}_geoportal]
+[logger_{{cookiecutter.package}}_geoportal]
 level = %(LOG_LEVEL)s
 handlers =
-qualname = {{package}}_geoportal
+qualname = {{cookiecutter.package}}_geoportal
 
 [logger_c2cwsgiutils]
 level = %(C2CWSGIUTILS_LOG_LEVEL)s
 handlers =
 qualname = c2cwsgiutils
 
 [logger_gunicorn]
```

## Comparing `c2cgeoportal_geoportal/scaffolds/create/geoportal/vars.yaml_tmpl` & `c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/geoportal/vars.yaml`

 * *Files 20% similar despite different names*

```diff
@@ -1,14 +1,12 @@
 ---
-
 extends: CONST_vars.yaml
 
 vars:
-
-  srid: {{srid}}
+  srid: &srid {{cookiecutter.srid}}
 
   alternate_projections: &alternate_projections
     - EPSG:4326
     - EPSG:{srid}
     - EPSG:21781
 
   resolutions: &resolutions [250, 100, 50, 20, 10, 5, 2, 1, 0.5, 0.25, 0.1, 0.05]
@@ -43,14 +41,20 @@
           geolocalisation: True
         gmfElevationOptions:
           layers: [aster, srtm]
         gmfSearchOptions:
           coordinatesProjections: *alternate_projections
         gmfPermalinkOptions:
           projectionCodes: *alternate_projections
+        gmfVectorTilesOptions:
+          projection: EPSG:{srid}
+          tileGrid:
+            extent: *extent
+            origin: [2420000, 1350000]
+            resolutions: *resolutions
       routes:
         fulltextsearchUrl:
           params:
             limit: 30
             partitionlimit: 5
 
     desktop:
@@ -79,15 +83,15 @@
           projections:
             - code: EPSG:2056
               label: CH1903+ / MN95
               filter: ngeoNumberCoordinates::{x}, {y} m
             - code: EPSG:21781
               label: CH1903 / MN03
               filter: ngeoNumberCoordinates::{x}, {y} m
-            - code: EPSG:4326'
+            - code: EPSG:4326
               label: WGS84
               filter: ngeoDMSCoordinates:2:{y}, {x}
         ngeoProfileOptions:
           linesConfiguration:
             aster:
               color: '#0000A0'
             srtm:
@@ -136,15 +140,15 @@
             limit: 30
             partitionlimit: 5
 
   admin_interface:
     # Default values for the admin interface's maps.
     map:
       baseLayers:
-        - type_: "OSM"
+        - type_: OSM
       view:
         projection: 'EPSG:3857'
         center: [829170, 5933942]
         zoom: 7
       fitSource: False
       fitMaxZoom: 14
       focusOnly: False
@@ -153,25 +157,45 @@
     # Functionalities that are made available to Mako templates.
     available_in_templates:
       - default_basemap
 
   layers:
     geometry_validation: True
 
+  api:
+    {}
+    # The OGC server used by the API.
+    # ogc_server: Main PNG
+    # The name of the API in JavaScript
+    # name: <package>
+
+  # The "vector tiles web service" configuration. See the "vector tiles"
+  # chapter in the integrator documentation.
+  vector_tiles:
+    srid: *srid
+    extent: *extent
+    resolutions: *resolutions
+
   fulltextsearch:
     languages:
       fr: french
       en: english
       de: german
       it: italian
 
   shortener:
     # Used to send a confirmation email
     email_from: info@example.com
-    email_subject: "Geoportal URL"
+    email_subject: Geoportal URL
+    # Email template, can contain:
+    # - {full_url}
+    # - {short_url}
+    # - {message}
+    # - {application_url}
+    # - {current_url}
     email_body: |
       Hello,
 
       Somebody sent you the following link:
       {short_url}
 
       With the message:
@@ -188,31 +212,41 @@
     password: <password>
     starttls: False
 
   reset_password:
     # Used to send a reset password email
     email_from: info@camptocamp.com
     email_subject: New password generated for GeoMapFish
+    # Email template, can contain:
+    # - {user}
+    # - {password}
+    # - {application_url}
+    # - {current_url}
     email_body: |
       Hello {user},
 
       You have asked for a new password,
       the newly generated password is: {password}
 
       Sincerely yours
       The GeoMapFish team
 
   welcome_email:
     # Used to send a welcome email for new user
     email_from: info@camptocamp.com
     email_subject: Welcome to GeoMapFish
+    # Email template, can contain:
+    # - {user}
+    # - {password}
+    # - {application_url}
+    # - {current_url}
     email_body: |
       Hello {user},
 
-      You have a new account on GeoMapFish: https://geomapfish-demo-2-6.camptocamp.com
+      You have a new account on GeoMapFish: {application_url}
       Your user name is: {user}
       Your password is: {password}
 
       Sincerely yours
       The GeoMapFish team
 
   # Checker configuration
@@ -249,22 +283,47 @@
     std:
       # Standalone version
       backend: c2cgeoportal.hybrid
       arguments:
         host: '{REDIS_HOST}'
         port: '{REDIS_PORT}'
         db: '{REDIS_DB}'
-      # Openshift version
+      # Kubernetes version
       # arguments:
       #   sentinels:
       #     - - '{REDIS_HOST}'
       #       - '{REDIS_PORT}'
       #   connection_kwargs:
       #     db: '{REDIS_DB}'
 
+  # This parameter set the list of hosts allowed to use the iframe api.
+  # 'self' will block all external usage, you must add additional hosts separated by space.
+  # see https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/frame-ancestors
+  content_security_policy_iframe_api_frame_ancestors: "'self'"
+
+  # Control the HTTP headers
+  headers:
+    dynamic: &header {}
+    index: *header
+    api: *header
+    apihelp: *header
+    profile: *header
+    raster: *header
+    vector_tiles: *header
+    error: *header
+    themes: &auth_header {}
+    config: *auth_header
+    print: *auth_header
+    fulltextsearch: *auth_header
+    mapserver: *auth_header
+    tinyows: *auth_header
+    layers: *auth_header
+    shortener: *auth_header
+    login: {}
+
 update_paths:
   - admin_interface.available_functionalities
   - admin_interface.available_metadata
   - admin_interface.functionalities
   - admin_interface.available_in_templates
   - api
   - authorized_referers
@@ -280,51 +339,58 @@
   - checker.themes
   - content_security_policy.main
   - content_security_policy.admin
   - content_security_policy.apihelp
   - fulltextsearch
   - functionalities.available_in_templates
   - global_headers
-  - headers.index
-  - headers.api
-  - headers.profile
-  - headers.raster
-  - headers.error
-  - headers.themes
-  - headers.config
-  - headers.print
-  - headers.fulltextsearch
-  - headers.mapserver
-  - headers.tinyows
-  - headers.layers
-  - headers.shortener
-  - headers.login
+  - headers.dynamic.headers
+  - headers.index.headers
+  - headers.api.headers
+  - headers.apihelp.headers
+  - headers.profile.headers
+  - headers.raster.headers
+  - headers.vector_tiles.headers
+  - headers.error.headers
+  - headers.themes.headers
+  - headers.config.headers
+  - headers.print.headers
+  - headers.fulltextsearch.headers
+  - headers.mapserver.headers
+  - headers.tinyows.headers
+  - headers.layers.headers
+  - headers.shortener.headers
+  - headers.login.headers
   - interfaces_config.default.constants.ngeoWfsPermalinkOptions
+  - interfaces_config.default.constants.gmfOptions.view
   - interfaces_config.default.constants.gmfSearchOptions
   - interfaces_config.default.constants.gmfPermalinkOptions
+  - interfaces_config.default.constants.gmfVectorTilesOptions
   - interfaces_config.default.dynamic_constants
   - interfaces_config.default.static
   - interfaces_config.default.routes.fulltextsearchUrl
   - interfaces_config.desktop.constants
   - interfaces_config.desktop.routes
   - interfaces_config.mobile.constants.gmfMobileMeasurePointOptions
   - interfaces_config.iframe_api.constants
   - interfaces_config.api.constants
   - interfaces_config.api.routes.searchUrl
   - interfaces_theme
   - resourceproxy
   - servers
   - shortener.allowed_hosts
+  - smtp
   - sqlalchemy
   - sqlalchemy_slave
   - tinyowsproxy
+  - authentication
 
 no_interpreted:
   - reset_password.email_body
   - shortener.email_body
   - welcome_email.email_body
 
-# Standalone version
-# runtime_postprocess:
-#   - expression: "int({})"
-#     vars:
-#       - cache.std.arguments.port
+# Only for Standalone version (should be commented for Kubernetes version)
+runtime_postprocess:
+  - expression: int({})
+    vars:
+      - cache.std.arguments.port
```

## Comparing `c2cgeoportal_geoportal/scaffolds/create/geoportal/webpack.api.js_tmpl` & `c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/webpack.api.js`

 * *Files 7% similar despite different names*

```diff
@@ -3,113 +3,109 @@
 00000020: 6e73 7420 5465 7273 6572 506c 7567 696e  nst TerserPlugin
 00000030: 203d 2072 6571 7569 7265 2827 7465 7273   = require('ters
 00000040: 6572 2d77 6562 7061 636b 2d70 6c75 6769  er-webpack-plugi
 00000050: 6e27 293b 0a0a 636f 6e73 7420 6465 7374  n');..const dest
 00000060: 4469 7220 3d20 272f 6574 632f 7374 6174  Dir = '/etc/stat
 00000070: 6963 2d6e 6765 6f2f 273b 0a0a 636f 6e73  ic-ngeo/';..cons
 00000080: 7420 6261 6265 6c50 7265 7365 7473 203d  t babelPresets =
-00000090: 205b 5b72 6571 7569 7265 2e72 6573 6f6c   [[require.resol
-000000a0: 7665 2827 4062 6162 656c 2f70 7265 7365  ve('@babel/prese
-000000b0: 742d 656e 7627 292c 207b 0a20 2074 6172  t-env'), {.  tar
-000000c0: 6765 7473 3a20 7b0a 2020 2020 6272 6f77  gets: {.    brow
-000000d0: 7365 7273 3a20 5b27 3e20 302e 3525 2069  sers: ['> 0.5% i
-000000e0: 6e20 4348 272c 2027 3e20 302e 3525 2069  n CH', '> 0.5% i
-000000f0: 6e20 4652 272c 2027 4669 7265 666f 7820  n FR', 'Firefox 
-00000100: 4553 5227 2c20 2769 6520 3131 275d 2c0a  ESR', 'ie 11'],.
-00000110: 2020 7d2c 0a20 206d 6f64 756c 6573 3a20    },.  modules: 
-00000120: 6661 6c73 652c 0a20 206c 6f6f 7365 3a20  false,.  loose: 
-00000130: 7472 7565 0a7d 5d5d 3b0a 0a6d 6f64 756c  true.}]];..modul
-00000140: 652e 6578 706f 7274 7320 3d20 2865 6e76  e.exports = (env
-00000150: 2c20 6172 6776 2920 3d3e 207b 0a20 2063  , argv) => {.  c
-00000160: 6f6e 7374 206c 6962 7261 7279 203d 2061  onst library = a
-00000170: 7267 762e 6c69 6272 6172 7920 3f20 6172  rgv.library ? ar
-00000180: 6776 2e6c 6962 7261 7279 203a 2027 7b7b  gv.library : '{{
-00000190: 7061 636b 6167 657d 7d27 3b0a 2020 7265  package}}';.  re
-000001a0: 7475 726e 207b 0a20 2020 2065 6e74 7279  turn {.    entry
-000001b0: 3a20 7061 7468 2e72 6573 6f6c 7665 285f  : path.resolve(_
-000001c0: 5f64 6972 6e61 6d65 2c20 277b 7b70 6163  _dirname, '{{pac
-000001d0: 6b61 6765 7d7d 5f67 656f 706f 7274 616c  kage}}_geoportal
-000001e0: 2f73 7461 7469 632d 6e67 656f 2f61 7069  /static-ngeo/api
-000001f0: 2f69 6e64 6578 2e6a 7327 292c 0a20 2020  /index.js'),.   
-00000200: 2064 6576 746f 6f6c 3a20 2773 6f75 7263   devtool: 'sourc
-00000210: 652d 6d61 7027 2c0a 2020 2020 6d6f 6465  e-map',.    mode
-00000220: 3a20 2770 726f 6475 6374 696f 6e27 2c0a  : 'production',.
-00000230: 2020 2020 6d6f 6475 6c65 3a20 7b0a 2020      module: {.  
-00000240: 2020 2020 7275 6c65 733a 205b 7b0a 2020      rules: [{.  
-00000250: 2020 2020 2020 7465 7374 3a20 2f5c 2e6a        test: /\.j
-00000260: 7324 2f2c 0a20 2020 2020 2020 2075 7365  s$/,.        use
-00000270: 3a20 7b0a 2020 2020 2020 2020 2020 6c6f  : {.          lo
-00000280: 6164 6572 3a20 2762 6162 656c 2d6c 6f61  ader: 'babel-loa
-00000290: 6465 7227 2c0a 2020 2020 2020 2020 2020  der',.          
-000002a0: 6f70 7469 6f6e 733a 207b 0a20 2020 2020  options: {.     
-000002b0: 2020 2020 2020 2070 7265 7365 7473 3a20         presets: 
-000002c0: 6261 6265 6c50 7265 7365 7473 2c0a 2020  babelPresets,.  
-000002d0: 2020 2020 2020 2020 2020 6261 6265 6c72            babelr
-000002e0: 633a 2066 616c 7365 2c0a 2020 2020 2020  c: false,.      
-000002f0: 2020 2020 2020 636f 6d6d 656e 7473 3a20        comments: 
-00000300: 6661 6c73 652c 0a20 2020 2020 2020 2020  false,.         
-00000310: 2020 2070 6c75 6769 6e73 3a20 5b0a 2020     plugins: [.  
-00000320: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-00000330: 6972 652e 7265 736f 6c76 6528 2740 6261  ire.resolve('@ba
-00000340: 6265 6c2f 706c 7567 696e 2d73 796e 7461  bel/plugin-synta
-00000350: 782d 6f62 6a65 6374 2d72 6573 742d 7370  x-object-rest-sp
-00000360: 7265 6164 2729 2c0a 2020 2020 2020 2020  read'),.        
-00000370: 2020 2020 2020 7265 7175 6972 652e 7265        require.re
-00000380: 736f 6c76 6528 2740 6261 6265 6c2f 706c  solve('@babel/pl
-00000390: 7567 696e 2d74 7261 6e73 666f 726d 2d73  ugin-transform-s
-000003a0: 7072 6561 6427 292c 0a20 2020 2020 2020  pread'),.       
-000003b0: 2020 2020 2020 2072 6571 7569 7265 2e72         require.r
-000003c0: 6573 6f6c 7665 2827 6261 6265 6c2d 706c  esolve('babel-pl
-000003d0: 7567 696e 2d61 6e67 756c 6172 6a73 2d61  ugin-angularjs-a
-000003e0: 6e6e 6f74 6174 6527 292c 0a20 2020 2020  nnotate'),.     
-000003f0: 2020 2020 2020 205d 0a20 2020 2020 2020         ].       
-00000400: 2020 207d 0a20 2020 2020 2020 207d 0a20     }.        }. 
-00000410: 2020 2020 207d 5d0a 2020 2020 7d2c 0a20       }].    },. 
-00000420: 2020 206f 7574 7075 743a 207b 0a20 2020     output: {.   
-00000430: 2020 2066 696c 656e 616d 653a 2027 6170     filename: 'ap
-00000440: 692e 6a73 272c 0a20 2020 2020 2070 6174  i.js',.      pat
-00000450: 683a 2064 6573 7444 6972 2c0a 2020 2020  h: destDir,.    
-00000460: 2020 6c69 6272 6172 7954 6172 6765 743a    libraryTarget:
-00000470: 2027 756d 6427 2c0a 2020 2020 2020 676c   'umd',.      gl
-00000480: 6f62 616c 4f62 6a65 6374 3a20 2774 6869  obalObject: 'thi
-00000490: 7327 2c0a 2020 2020 2020 6c69 6272 6172  s',.      librar
-000004a0: 7945 7870 6f72 743a 2027 6465 6661 756c  yExport: 'defaul
-000004b0: 7427 2c0a 2020 2020 2020 6c69 6272 6172  t',.      librar
-000004c0: 793a 206c 6962 7261 7279 0a20 2020 207d  y: library.    }
-000004d0: 2c0a 2020 2020 6f70 7469 6d69 7a61 7469  ,.    optimizati
-000004e0: 6f6e 3a20 7b0a 2020 2020 2020 6d69 6e69  on: {.      mini
-000004f0: 6d69 7a65 723a 205b 0a20 2020 2020 2020  mizer: [.       
-00000500: 206e 6577 2054 6572 7365 7250 6c75 6769   new TerserPlugi
-00000510: 6e28 7b0a 2020 2020 2020 2020 2020 7061  n({.          pa
-00000520: 7261 6c6c 656c 3a20 7472 7565 2c0a 2020  rallel: true,.  
-00000530: 2020 2020 2020 2020 736f 7572 6365 4d61          sourceMa
-00000540: 703a 2074 7275 652c 0a20 2020 2020 2020  p: true,.       
-00000550: 2020 2074 6572 7365 724f 7074 696f 6e73     terserOptions
-00000560: 3a20 7b0a 2020 2020 2020 2020 2020 2020  : {.            
-00000570: 636f 6d70 7265 7373 3a20 6661 6c73 650a  compress: false.
-00000580: 2020 2020 2020 2020 2020 7d0a 2020 2020            }.    
-00000590: 2020 2020 7d29 0a20 2020 2020 205d 0a20      }).      ]. 
-000005a0: 2020 207d 2c0a 2020 2020 7265 736f 6c76     },.    resolv
-000005b0: 653a 207b 0a20 2020 2020 206d 6f64 756c  e: {.      modul
-000005c0: 6573 3a20 5b0a 2020 2020 2020 2020 272f  es: [.        '/
-000005d0: 7573 722f 6c69 622f 6e6f 6465 5f6d 6f64  usr/lib/node_mod
-000005e0: 756c 6573 272c 0a20 2020 2020 2020 2027  ules',.        '
-000005f0: 2f75 7372 2f6c 6962 2f6e 6f64 655f 6d6f  /usr/lib/node_mo
-00000600: 6475 6c65 732f 6f6c 2f6e 6f64 655f 6d6f  dules/ol/node_mo
-00000610: 6475 6c65 7327 2c0a 2020 2020 2020 2020  dules',.        
-00000620: 272f 7573 722f 6c69 622f 6e6f 6465 5f6d  '/usr/lib/node_m
-00000630: 6f64 756c 6573 2f70 726f 6a34 2f6e 6f64  odules/proj4/nod
-00000640: 655f 6d6f 6475 6c65 7327 2c0a 2020 2020  e_modules',.    
-00000650: 2020 5d2c 0a20 2020 2020 2061 6c69 6173    ],.      alias
-00000660: 3a20 7b0a 2020 2020 2020 2020 6170 693a  : {.        api:
-00000670: 2027 2f75 7372 2f6c 6962 2f6e 6f64 655f   '/usr/lib/node_
-00000680: 6d6f 6475 6c65 732f 6e67 656f 2f61 7069  modules/ngeo/api
-00000690: 2f73 7263 272c 0a20 2020 2020 2020 2027  /src',.        '
-000006a0: 4067 656f 626c 6f63 6b73 2f70 726f 6a27  @geoblocks/proj'
-000006b0: 3a20 2740 6765 6f62 6c6f 636b 732f 7072  : '@geoblocks/pr
-000006c0: 6f6a 2f73 7263 272c 0a20 2020 2020 207d  oj/src',.      }
-000006d0: 0a20 2020 207d 2c0a 2020 2020 7265 736f  .    },.    reso
-000006e0: 6c76 654c 6f61 6465 723a 207b 0a20 2020  lveLoader: {.   
-000006f0: 2020 206d 6f64 756c 6573 3a20 5b27 2f75     modules: ['/u
-00000700: 7372 2f6c 6962 2f6e 6f64 655f 6d6f 6475  sr/lib/node_modu
-00000710: 6c65 7327 5d2c 0a20 2020 207d 0a20 207d  les'],.    }.  }
-00000720: 3b0a 7d3b 0a                             ;.};.
+00000090: 205b 0a20 205b 0a20 2020 2072 6571 7569   [.  [.    requi
+000000a0: 7265 2e72 6573 6f6c 7665 2827 4062 6162  re.resolve('@bab
+000000b0: 656c 2f70 7265 7365 742d 656e 7627 292c  el/preset-env'),
+000000c0: 0a20 2020 207b 0a20 2020 2020 2074 6172  .    {.      tar
+000000d0: 6765 7473 3a20 7b0a 2020 2020 2020 2020  gets: {.        
+000000e0: 6272 6f77 7365 7273 3a20 5b27 3e20 302e  browsers: ['> 0.
+000000f0: 3725 2069 6e20 4348 272c 2027 3e20 302e  7% in CH', '> 0.
+00000100: 3725 2069 6e20 4652 272c 2027 4669 7265  7% in FR', 'Fire
+00000110: 666f 7820 4553 5227 5d2c 0a20 2020 2020  fox ESR'],.     
+00000120: 207d 2c0a 2020 2020 2020 6d6f 6475 6c65   },.      module
+00000130: 733a 2066 616c 7365 2c0a 2020 2020 2020  s: false,.      
+00000140: 6c6f 6f73 653a 2074 7275 652c 0a20 2020  loose: true,.   
+00000150: 207d 2c0a 2020 5d2c 0a5d 3b0a 0a6d 6f64   },.  ],.];..mod
+00000160: 756c 652e 6578 706f 7274 7320 3d20 2865  ule.exports = (e
+00000170: 6e76 2c20 6172 6776 2920 3d3e 207b 0a20  nv, argv) => {. 
+00000180: 2063 6f6e 7374 206c 6962 7261 7279 203d   const library =
+00000190: 2061 7267 762e 6c69 6272 6172 7920 3f20   argv.library ? 
+000001a0: 6172 6776 2e6c 6962 7261 7279 203a 2027  argv.library : '
+000001b0: 7b7b 636f 6f6b 6965 6375 7474 6572 2e70  {{cookiecutter.p
+000001c0: 6163 6b61 6765 7d7d 273b 0a20 2072 6574  ackage}}';.  ret
+000001d0: 7572 6e20 7b0a 2020 2020 656e 7472 793a  urn {.    entry:
+000001e0: 2070 6174 682e 7265 736f 6c76 6528 5f5f   path.resolve(__
+000001f0: 6469 726e 616d 652c 2027 7b7b 636f 6f6b  dirname, '{{cook
+00000200: 6965 6375 7474 6572 2e70 6163 6b61 6765  iecutter.package
+00000210: 7d7d 5f67 656f 706f 7274 616c 2f73 7461  }}_geoportal/sta
+00000220: 7469 632d 6e67 656f 2f61 7069 2f69 6e64  tic-ngeo/api/ind
+00000230: 6578 2e6a 7327 292c 0a20 2020 2064 6576  ex.js'),.    dev
+00000240: 746f 6f6c 3a20 2773 6f75 7263 652d 6d61  tool: 'source-ma
+00000250: 7027 2c0a 2020 2020 6d6f 6465 3a20 2770  p',.    mode: 'p
+00000260: 726f 6475 6374 696f 6e27 2c0a 2020 2020  roduction',.    
+00000270: 6d6f 6475 6c65 3a20 7b0a 2020 2020 2020  module: {.      
+00000280: 7275 6c65 733a 205b 0a20 2020 2020 2020  rules: [.       
+00000290: 207b 0a20 2020 2020 2020 2020 2074 6573   {.          tes
+000002a0: 743a 202f 5c2e 6a73 242f 2c0a 2020 2020  t: /\.js$/,.    
+000002b0: 2020 2020 2020 7573 653a 207b 0a20 2020        use: {.   
+000002c0: 2020 2020 2020 2020 206c 6f61 6465 723a           loader:
+000002d0: 2027 6261 6265 6c2d 6c6f 6164 6572 272c   'babel-loader',
+000002e0: 0a20 2020 2020 2020 2020 2020 206f 7074  .            opt
+000002f0: 696f 6e73 3a20 7b0a 2020 2020 2020 2020  ions: {.        
+00000300: 2020 2020 2020 7072 6573 6574 733a 2062        presets: b
+00000310: 6162 656c 5072 6573 6574 732c 0a20 2020  abelPresets,.   
+00000320: 2020 2020 2020 2020 2020 2062 6162 656c             babel
+00000330: 7263 3a20 6661 6c73 652c 0a20 2020 2020  rc: false,.     
+00000340: 2020 2020 2020 2020 2063 6f6d 6d65 6e74           comment
+00000350: 733a 2066 616c 7365 2c0a 2020 2020 2020  s: false,.      
+00000360: 2020 2020 2020 2020 706c 7567 696e 733a          plugins:
+00000370: 205b 7265 7175 6972 652e 7265 736f 6c76   [require.resolv
+00000380: 6528 2762 6162 656c 2d70 6c75 6769 6e2d  e('babel-plugin-
+00000390: 616e 6775 6c61 726a 732d 616e 6e6f 7461  angularjs-annota
+000003a0: 7465 2729 5d2c 0a20 2020 2020 2020 2020  te')],.         
+000003b0: 2020 207d 2c0a 2020 2020 2020 2020 2020     },.          
+000003c0: 7d2c 0a20 2020 2020 2020 207d 2c0a 2020  },.        },.  
+000003d0: 2020 2020 5d2c 0a20 2020 207d 2c0a 2020      ],.    },.  
+000003e0: 2020 6f75 7470 7574 3a20 7b0a 2020 2020    output: {.    
+000003f0: 2020 6669 6c65 6e61 6d65 3a20 2761 7069    filename: 'api
+00000400: 2e6a 7327 2c0a 2020 2020 2020 7061 7468  .js',.      path
+00000410: 3a20 6465 7374 4469 722c 0a20 2020 2020  : destDir,.     
+00000420: 206c 6962 7261 7279 5461 7267 6574 3a20   libraryTarget: 
+00000430: 2775 6d64 272c 0a20 2020 2020 2067 6c6f  'umd',.      glo
+00000440: 6261 6c4f 626a 6563 743a 2027 7468 6973  balObject: 'this
+00000450: 272c 0a20 2020 2020 206c 6962 7261 7279  ',.      library
+00000460: 4578 706f 7274 3a20 2764 6566 6175 6c74  Export: 'default
+00000470: 272c 0a20 2020 2020 206c 6962 7261 7279  ',.      library
+00000480: 3a20 6c69 6272 6172 792c 0a20 2020 207d  : library,.    }
+00000490: 2c0a 2020 2020 6f70 7469 6d69 7a61 7469  ,.    optimizati
+000004a0: 6f6e 3a20 7b0a 2020 2020 2020 6d69 6e69  on: {.      mini
+000004b0: 6d69 7a65 723a 205b 0a20 2020 2020 2020  mizer: [.       
+000004c0: 206e 6577 2054 6572 7365 7250 6c75 6769   new TerserPlugi
+000004d0: 6e28 7b0a 2020 2020 2020 2020 2020 7061  n({.          pa
+000004e0: 7261 6c6c 656c 3a20 7472 7565 2c0a 2020  rallel: true,.  
+000004f0: 2020 2020 2020 2020 736f 7572 6365 4d61          sourceMa
+00000500: 703a 2074 7275 652c 0a20 2020 2020 2020  p: true,.       
+00000510: 2020 2074 6572 7365 724f 7074 696f 6e73     terserOptions
+00000520: 3a20 7b0a 2020 2020 2020 2020 2020 2020  : {.            
+00000530: 636f 6d70 7265 7373 3a20 6661 6c73 652c  compress: false,
+00000540: 0a20 2020 2020 2020 2020 207d 2c0a 2020  .          },.  
+00000550: 2020 2020 2020 7d29 2c0a 2020 2020 2020        }),.      
+00000560: 5d2c 0a20 2020 207d 2c0a 2020 2020 7265  ],.    },.    re
+00000570: 736f 6c76 653a 207b 0a20 2020 2020 206d  solve: {.      m
+00000580: 6f64 756c 6573 3a20 5b0a 2020 2020 2020  odules: [.      
+00000590: 2020 272f 7573 722f 6c69 622f 6e6f 6465    '/usr/lib/node
+000005a0: 5f6d 6f64 756c 6573 272c 0a20 2020 2020  _modules',.     
+000005b0: 2020 2027 2f75 7372 2f6c 6962 2f6e 6f64     '/usr/lib/nod
+000005c0: 655f 6d6f 6475 6c65 732f 6f6c 2f6e 6f64  e_modules/ol/nod
+000005d0: 655f 6d6f 6475 6c65 7327 2c0a 2020 2020  e_modules',.    
+000005e0: 2020 2020 272f 7573 722f 6c69 622f 6e6f      '/usr/lib/no
+000005f0: 6465 5f6d 6f64 756c 6573 2f70 726f 6a34  de_modules/proj4
+00000600: 2f6e 6f64 655f 6d6f 6475 6c65 7327 2c0a  /node_modules',.
+00000610: 2020 2020 2020 5d2c 0a20 2020 2020 2061        ],.      a
+00000620: 6c69 6173 3a20 7b0a 2020 2020 2020 2020  lias: {.        
+00000630: 6170 693a 2027 2f75 7372 2f6c 6962 2f6e  api: '/usr/lib/n
+00000640: 6f64 655f 6d6f 6475 6c65 732f 6e67 656f  ode_modules/ngeo
+00000650: 2f61 7069 2f73 7263 272c 0a20 2020 2020  /api/src',.     
+00000660: 2020 206e 6765 6f3a 2027 2f75 7372 2f6c     ngeo: '/usr/l
+00000670: 6962 2f6e 6f64 655f 6d6f 6475 6c65 732f  ib/node_modules/
+00000680: 6e67 656f 2f73 7263 272c 0a20 2020 2020  ngeo/src',.     
+00000690: 207d 2c0a 2020 2020 7d2c 0a20 2020 2072   },.    },.    r
+000006a0: 6573 6f6c 7665 4c6f 6164 6572 3a20 7b0a  esolveLoader: {.
+000006b0: 2020 2020 2020 6d6f 6475 6c65 733a 205b        modules: [
+000006c0: 272f 7573 722f 6c69 622f 6e6f 6465 5f6d  '/usr/lib/node_m
+000006d0: 6f64 756c 6573 275d 2c0a 2020 2020 7d2c  odules'],.    },
+000006e0: 0a20 207d 3b0a 7d3b 0a                   .  };.};.
```

## Comparing `c2cgeoportal_geoportal/scaffolds/create/geoportal/webpack.apps.js_tmpl` & `c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/webpack.apps.js`

 * *Files 12% similar despite different names*

```diff
@@ -15,139 +15,139 @@
 000000e0: 6368 696e 6520 6f75 7473 6964 6520 646f  chine outside do
 000000f0: 636b 6572 0a63 6f6e 7374 206e 6f64 6545  cker.const nodeE
 00000100: 6e76 203d 2070 726f 6365 7373 2e65 6e76  nv = process.env
 00000110: 5b27 4e4f 4445 5f45 4e56 275d 207c 7c20  ['NODE_ENV'] || 
 00000120: 2764 6576 656c 6f70 6d65 6e74 273b 0a63  'development';.c
 00000130: 6f6e 7374 2064 6576 203d 206e 6f64 6545  onst dev = nodeE
 00000140: 6e76 203d 3d20 2764 6576 656c 6f70 6d65  nv == 'developme
-00000150: 6e74 270a 0a66 6f72 2028 636f 6e73 7420  nt'..for (const 
-00000160: 6669 6c65 6e61 6d65 206f 6620 6c73 2870  filename of ls(p
-00000170: 6174 682e 7265 736f 6c76 6528 5f5f 6469  ath.resolve(__di
-00000180: 726e 616d 652c 2027 7b7b 7061 636b 6167  rname, '{{packag
-00000190: 657d 7d5f 6765 6f70 6f72 7461 6c2f 7374  e}}_geoportal/st
-000001a0: 6174 6963 2d6e 6765 6f2f 6a73 2f61 7070  atic-ngeo/js/app
-000001b0: 732f 2a2e 6874 6d6c 2e65 6a73 2729 2929  s/*.html.ejs')))
-000001c0: 207b 0a20 2063 6f6e 7374 206e 616d 6520   {.  const name 
-000001d0: 3d20 6669 6c65 6e61 6d65 2e66 696c 652e  = filename.file.
-000001e0: 7375 6273 7472 2830 2c20 6669 6c65 6e61  substr(0, filena
-000001f0: 6d65 2e66 696c 652e 6c65 6e67 7468 202d  me.file.length -
-00000200: 2027 2e68 746d 6c2e 656a 7327 2e6c 656e   '.html.ejs'.len
-00000210: 6774 6829 3b0a 2020 656e 7472 795b 6e61  gth);.  entry[na
-00000220: 6d65 5d20 3d20 277b 7b70 6163 6b61 6765  me] = '{{package
-00000230: 7d7d 2f61 7070 732f 436f 6e74 726f 6c6c  }}/apps/Controll
-00000240: 6572 2720 2b20 6e61 6d65 202b 2027 2e6a  er' + name + '.j
-00000250: 7327 3b0a 2020 706c 7567 696e 732e 7075  s';.  plugins.pu
-00000260: 7368 280a 2020 2020 6e65 7720 4874 6d6c  sh(.    new Html
-00000270: 5765 6270 6163 6b50 6c75 6769 6e28 7b0a  WebpackPlugin({.
-00000280: 2020 2020 2020 7465 6d70 6c61 7465 3a20        template: 
-00000290: 6669 6c65 6e61 6d65 2e66 756c 6c2c 0a20  filename.full,. 
-000002a0: 2020 2020 2069 6e6a 6563 743a 2066 616c       inject: fal
-000002b0: 7365 2c0a 2020 2020 2020 6368 756e 6b73  se,.      chunks
-000002c0: 536f 7274 4d6f 6465 3a20 276d 616e 7561  SortMode: 'manua
-000002d0: 6c27 2c0a 2020 2020 2020 6669 6c65 6e61  l',.      filena
-000002e0: 6d65 3a20 6e61 6d65 202b 2027 2e68 746d  me: name + '.htm
-000002f0: 6c27 2c0a 2020 2020 2020 6368 756e 6b73  l',.      chunks
-00000300: 3a20 5b6e 616d 655d 2c0a 2020 2020 2020  : [name],.      
-00000310: 7661 7273 3a20 7b0a 2020 2020 2020 2020  vars: {.        
-00000320: 656e 7472 795f 706f 696e 743a 2027 247b  entry_point: '${
-00000330: 5649 5349 424c 455f 454e 5452 595f 504f  VISIBLE_ENTRY_PO
-00000340: 494e 547d 272c 0a20 2020 2020 2020 2076  INT}',.        v
-00000350: 6572 7369 6f6e 3a20 277b 7b67 656f 6d61  ersion: '{{geoma
-00000360: 7066 6973 685f 7665 7273 696f 6e7d 7d27  pfish_version}}'
-00000370: 2c0a 2020 2020 2020 2020 6361 6368 655f  ,.        cache_
-00000380: 7665 7273 696f 6e3a 2027 247b 4341 4348  version: '${CACH
-00000390: 455f 5645 5253 494f 4e7d 272c 0a20 2020  E_VERSION}',.   
-000003a0: 2020 2020 7d2c 0a20 2020 207d 290a 2020      },.    }).  
-000003b0: 293b 0a7d 0a0a 636f 6e73 7420 6261 6265  );.}..const babe
-000003c0: 6c50 7265 7365 7473 203d 205b 5b72 6571  lPresets = [[req
-000003d0: 7569 7265 2e72 6573 6f6c 7665 2827 4062  uire.resolve('@b
-000003e0: 6162 656c 2f70 7265 7365 742d 656e 7627  abel/preset-env'
-000003f0: 292c 207b 0a20 2074 6172 6765 7473 3a20  ), {.  targets: 
-00000400: 7b0a 2020 2020 6272 6f77 7365 7273 3a20  {.    browsers: 
-00000410: 5b27 3e20 302e 3525 2069 6e20 4348 272c  ['> 0.5% in CH',
-00000420: 2027 3e20 302e 3525 2069 6e20 4652 272c   '> 0.5% in FR',
-00000430: 2027 4669 7265 666f 7820 4553 5227 2c20   'Firefox ESR', 
-00000440: 2769 6520 3131 275d 2c0a 2020 7d2c 0a20  'ie 11'],.  },. 
-00000450: 206d 6f64 756c 6573 3a20 6661 6c73 652c   modules: false,
-00000460: 0a20 206c 6f6f 7365 3a20 7472 7565 2c0a  .  loose: true,.
-00000470: 7d5d 5d0a 0a2f 2f20 5472 616e 7366 6f72  }]]..// Transfor
-00000480: 6d20 636f 6465 2074 6f20 4553 3230 3135  m code to ES2015
-00000490: 2061 6e64 2061 6e6e 6f74 6174 6520 696e   and annotate in
-000004a0: 6a65 6374 6162 6c65 2066 756e 6374 696f  jectable functio
-000004b0: 6e73 2077 6974 6820 616e 2024 696e 6a65  ns with an $inje
-000004c0: 6374 2061 7272 6179 2e0a 636f 6e73 7420  ct array..const 
-000004d0: 7072 6f6a 6563 7452 756c 6520 3d20 7b0a  projectRule = {.
-000004e0: 2020 7465 7374 3a20 2f7b 7b70 6163 6b61    test: /{{packa
-000004f0: 6765 7d7d 5f67 656f 706f 7274 616c 5c2f  ge}}_geoportal\/
-00000500: 7374 6174 6963 2d6e 6765 6f5c 2f6a 735c  static-ngeo\/js\
-00000510: 2f2e 2a5c 2e6a 7324 2f2c 0a20 2075 7365  /.*\.js$/,.  use
-00000520: 3a20 7b0a 2020 2020 6c6f 6164 6572 3a20  : {.    loader: 
-00000530: 2762 6162 656c 2d6c 6f61 6465 7227 2c0a  'babel-loader',.
-00000540: 2020 2020 6f70 7469 6f6e 733a 207b 0a20      options: {. 
-00000550: 2020 2020 2070 7265 7365 7473 3a20 6261       presets: ba
-00000560: 6265 6c50 7265 7365 7473 2c0a 2020 2020  belPresets,.    
-00000570: 2020 6261 6265 6c72 633a 2066 616c 7365    babelrc: false
-00000580: 2c0a 2020 2020 2020 636f 6d6d 656e 7473  ,.      comments
-00000590: 3a20 6661 6c73 652c 0a20 2020 2020 2070  : false,.      p
-000005a0: 6c75 6769 6e73 3a20 5b0a 2020 2020 2020  lugins: [.      
-000005b0: 2020 7265 7175 6972 652e 7265 736f 6c76    require.resolv
-000005c0: 6528 2740 6261 6265 6c2f 706c 7567 696e  e('@babel/plugin
-000005d0: 2d73 796e 7461 782d 6f62 6a65 6374 2d72  -syntax-object-r
-000005e0: 6573 742d 7370 7265 6164 2729 2c0a 2020  est-spread'),.  
-000005f0: 2020 2020 2020 7265 7175 6972 652e 7265        require.re
-00000600: 736f 6c76 6528 2740 6261 6265 6c2f 706c  solve('@babel/pl
-00000610: 7567 696e 2d74 7261 6e73 666f 726d 2d73  ugin-transform-s
-00000620: 7072 6561 6427 292c 0a20 2020 2020 2020  pread'),.       
-00000630: 2072 6571 7569 7265 2e72 6573 6f6c 7665   require.resolve
-00000640: 2827 6261 6265 6c2d 706c 7567 696e 2d61  ('babel-plugin-a
-00000650: 6e67 756c 6172 6a73 2d61 6e6e 6f74 6174  ngularjs-annotat
-00000660: 6527 292c 0a20 2020 2020 205d 2c0a 2020  e'),.      ],.  
-00000670: 2020 7d0a 2020 7d2c 0a7d 3b0a 0a63 6f6e    }.  },.};..con
-00000680: 7374 2072 756c 6573 203d 205b 0a20 2070  st rules = [.  p
-00000690: 726f 6a65 6374 5275 6c65 2c0a 5d3b 0a0a  rojectRule,.];..
-000006a0: 636f 6e73 7420 6e6f 4465 7653 6572 7665  const noDevServe
-000006b0: 7220 3d20 7072 6f63 6573 732e 656e 765b  r = process.env[
-000006c0: 274e 4f5f 4445 565f 5345 5256 4552 275d  'NO_DEV_SERVER']
-000006d0: 203d 3d20 2754 5255 4527 3b0a 636f 6e73   == 'TRUE';.cons
-000006e0: 7420 6465 7653 6572 7665 7220 3d20 6465  t devServer = de
-000006f0: 7620 2626 2021 6e6f 4465 7653 6572 7665  v && !noDevServe
-00000700: 723b 0a0a 636f 6e73 6f6c 652e 6c6f 6728  r;..console.log(
-00000710: 2255 7365 2064 6576 206d 6f64 653a 2022  "Use dev mode: "
-00000720: 202b 2064 6576 290a 636f 6e73 6f6c 652e   + dev).console.
-00000730: 6c6f 6728 2255 7365 2064 6576 2073 6572  log("Use dev ser
-00000740: 7665 7220 6d6f 6465 3a20 2220 2b20 6465  ver mode: " + de
-00000750: 7653 6572 7665 7229 0a0a 6d6f 6475 6c65  vServer)..module
-00000760: 2e65 7870 6f72 7473 203d 207b 0a20 206f  .exports = {.  o
-00000770: 7574 7075 743a 207b 0a20 2020 2070 6174  utput: {.    pat
-00000780: 683a 2027 2f65 7463 2f73 7461 7469 632d  h: '/etc/static-
-00000790: 6e67 656f 2f27 2c0a 2020 2020 7075 626c  ngeo/',.    publ
-000007a0: 6963 5061 7468 3a20 6465 7653 6572 7665  icPath: devServe
-000007b0: 7220 3f20 2724 7b56 4953 4942 4c45 5f45  r ? '${VISIBLE_E
-000007c0: 4e54 5259 5f50 4f49 4e54 7d64 6576 2f27  NTRY_POINT}dev/'
-000007d0: 203a 2027 2e5f 5f45 4e54 5259 5f50 4f49   : '.__ENTRY_POI
-000007e0: 4e54 5f5f 7374 6174 6963 2d6e 6765 6f2f  NT__static-ngeo/
-000007f0: 270a 2020 7d2c 0a20 2064 6576 5365 7276  '.  },.  devServ
-00000800: 6572 3a20 7b0a 2020 2020 7075 626c 6963  er: {.    public
-00000810: 5061 7468 3a20 2724 7b56 4953 4942 4c45  Path: '${VISIBLE
-00000820: 5f57 4542 5f50 524f 544f 434f 4c7d 3a2f  _WEB_PROTOCOL}:/
-00000830: 2f24 7b56 4953 4942 4c45 5f57 4542 5f48  /${VISIBLE_WEB_H
-00000840: 4f53 547d 247b 5649 5349 424c 455f 454e  OST}${VISIBLE_EN
-00000850: 5452 595f 504f 494e 547d 6465 762f 272c  TRY_POINT}dev/',
-00000860: 0a20 2020 2070 6f72 743a 2038 3038 302c  .    port: 8080,
-00000870: 0a20 2020 2068 6f73 743a 2027 7765 6270  .    host: 'webp
-00000880: 6163 6b5f 6465 765f 7365 7276 6572 272c  ack_dev_server',
-00000890: 0a20 2020 2068 6f74 3a20 7472 7565 2c0a  .    hot: true,.
-000008a0: 2020 7d2c 0a20 2065 6e74 7279 3a20 656e    },.  entry: en
-000008b0: 7472 792c 0a20 206d 6f64 756c 653a 207b  try,.  module: {
-000008c0: 0a20 2020 2072 756c 6573 0a20 207d 2c0a  .    rules.  },.
-000008d0: 2020 706c 7567 696e 733a 2070 6c75 6769    plugins: plugi
-000008e0: 6e73 2c0a 2020 7265 736f 6c76 653a 207b  ns,.  resolve: {
-000008f0: 0a20 2020 206d 6f64 756c 6573 3a20 5b27  .    modules: ['
-00000900: 2f75 7372 2f6c 6962 2f6e 6f64 655f 6d6f  /usr/lib/node_mo
-00000910: 6475 6c65 7327 5d2c 0a20 2020 2061 6c69  dules'],.    ali
-00000920: 6173 3a20 7b0a 2020 2020 2020 7b7b 7061  as: {.      {{pa
-00000930: 636b 6167 657d 7d3a 2070 6174 682e 7265  ckage}}: path.re
-00000940: 736f 6c76 6528 5f5f 6469 726e 616d 652c  solve(__dirname,
-00000950: 2027 7b7b 7061 636b 6167 657d 7d5f 6765   '{{package}}_ge
-00000960: 6f70 6f72 7461 6c2f 7374 6174 6963 2d6e  oportal/static-n
-00000970: 6765 6f2f 6a73 2729 2c0a 2020 2020 7d2c  geo/js'),.    },
-00000980: 0a20 207d 2c0a 7d3b 0a                   .  },.};.
+00000150: 6e74 273b 0a0a 666f 7220 2863 6f6e 7374  nt';..for (const
+00000160: 2066 696c 656e 616d 6520 6f66 206c 7328   filename of ls(
+00000170: 0a20 2070 6174 682e 7265 736f 6c76 6528  .  path.resolve(
+00000180: 5f5f 6469 726e 616d 652c 2027 7b7b 636f  __dirname, '{{co
+00000190: 6f6b 6965 6375 7474 6572 2e70 6163 6b61  okiecutter.packa
+000001a0: 6765 7d7d 5f67 656f 706f 7274 616c 2f73  ge}}_geoportal/s
+000001b0: 7461 7469 632d 6e67 656f 2f6a 732f 6170  tatic-ngeo/js/ap
+000001c0: 7073 2f2a 2e68 746d 6c2e 656a 7327 290a  ps/*.html.ejs').
+000001d0: 2929 207b 0a20 2063 6f6e 7374 206e 616d  )) {.  const nam
+000001e0: 6520 3d20 6669 6c65 6e61 6d65 2e66 696c  e = filename.fil
+000001f0: 652e 7375 6273 7472 2830 2c20 6669 6c65  e.substr(0, file
+00000200: 6e61 6d65 2e66 696c 652e 6c65 6e67 7468  name.file.length
+00000210: 202d 2027 2e68 746d 6c2e 656a 7327 2e6c   - '.html.ejs'.l
+00000220: 656e 6774 6829 3b0a 2020 656e 7472 795b  ength);.  entry[
+00000230: 6e61 6d65 5d20 3d20 277b 7b63 6f6f 6b69  name] = '{{cooki
+00000240: 6563 7574 7465 722e 7061 636b 6167 657d  ecutter.package}
+00000250: 7d2f 6170 7073 2f43 6f6e 7472 6f6c 6c65  }/apps/Controlle
+00000260: 7227 202b 206e 616d 6520 2b20 272e 6a73  r' + name + '.js
+00000270: 273b 0a20 2070 6c75 6769 6e73 2e70 7573  ';.  plugins.pus
+00000280: 6828 0a20 2020 206e 6577 2048 746d 6c57  h(.    new HtmlW
+00000290: 6562 7061 636b 506c 7567 696e 287b 0a20  ebpackPlugin({. 
+000002a0: 2020 2020 2074 656d 706c 6174 653a 2066       template: f
+000002b0: 696c 656e 616d 652e 6675 6c6c 2c0a 2020  ilename.full,.  
+000002c0: 2020 2020 696e 6a65 6374 3a20 6661 6c73      inject: fals
+000002d0: 652c 0a20 2020 2020 2063 6875 6e6b 7353  e,.      chunksS
+000002e0: 6f72 744d 6f64 653a 2027 6d61 6e75 616c  ortMode: 'manual
+000002f0: 272c 0a20 2020 2020 2066 696c 656e 616d  ',.      filenam
+00000300: 653a 206e 616d 6520 2b20 272e 6874 6d6c  e: name + '.html
+00000310: 272c 0a20 2020 2020 2063 6875 6e6b 733a  ',.      chunks:
+00000320: 205b 6e61 6d65 5d2c 0a20 2020 2020 2076   [name],.      v
+00000330: 6172 733a 207b 0a20 2020 2020 2020 2065  ars: {.        e
+00000340: 6e74 7279 5f70 6f69 6e74 3a20 2724 7b56  ntry_point: '${V
+00000350: 4953 4942 4c45 5f45 4e54 5259 5f50 4f49  ISIBLE_ENTRY_POI
+00000360: 4e54 7d27 2c0a 2020 2020 2020 2020 7665  NT}',.        ve
+00000370: 7273 696f 6e3a 2027 7b7b 636f 6f6b 6965  rsion: '{{cookie
+00000380: 6375 7474 6572 2e67 656f 6d61 7066 6973  cutter.geomapfis
+00000390: 685f 7665 7273 696f 6e7d 7d27 2c0a 2020  h_version}}',.  
+000003a0: 2020 2020 2020 6361 6368 655f 7665 7273        cache_vers
+000003b0: 696f 6e3a 2027 247b 4341 4348 455f 5645  ion: '${CACHE_VE
+000003c0: 5253 494f 4e7d 272c 0a20 2020 2020 207d  RSION}',.      }
+000003d0: 2c0a 2020 2020 7d29 0a20 2029 3b0a 7d0a  ,.    }).  );.}.
+000003e0: 0a63 6f6e 7374 2062 6162 656c 5072 6573  .const babelPres
+000003f0: 6574 7320 3d20 5b0a 2020 5b0a 2020 2020  ets = [.  [.    
+00000400: 7265 7175 6972 652e 7265 736f 6c76 6528  require.resolve(
+00000410: 2740 6261 6265 6c2f 7072 6573 6574 2d65  '@babel/preset-e
+00000420: 6e76 2729 2c0a 2020 2020 7b0a 2020 2020  nv'),.    {.    
+00000430: 2020 7461 7267 6574 733a 207b 0a20 2020    targets: {.   
+00000440: 2020 2020 2062 726f 7773 6572 733a 205b       browsers: [
+00000450: 273e 2030 2e37 2520 696e 2043 4827 2c20  '> 0.7% in CH', 
+00000460: 273e 2030 2e37 2520 696e 2046 5227 2c20  '> 0.7% in FR', 
+00000470: 2746 6972 6566 6f78 2045 5352 275d 2c0a  'Firefox ESR'],.
+00000480: 2020 2020 2020 7d2c 0a20 2020 2020 206d        },.      m
+00000490: 6f64 756c 6573 3a20 6661 6c73 652c 0a20  odules: false,. 
+000004a0: 2020 2020 206c 6f6f 7365 3a20 7472 7565       loose: true
+000004b0: 2c0a 2020 2020 7d2c 0a20 205d 2c0a 5d3b  ,.    },.  ],.];
+000004c0: 0a0a 2f2f 2054 7261 6e73 666f 726d 2063  ..// Transform c
+000004d0: 6f64 6520 746f 2045 5332 3031 3520 616e  ode to ES2015 an
+000004e0: 6420 616e 6e6f 7461 7465 2069 6e6a 6563  d annotate injec
+000004f0: 7461 626c 6520 6675 6e63 7469 6f6e 7320  table functions 
+00000500: 7769 7468 2061 6e20 2469 6e6a 6563 7420  with an $inject 
+00000510: 6172 7261 792e 0a63 6f6e 7374 2070 726f  array..const pro
+00000520: 6a65 6374 5275 6c65 203d 207b 0a20 2074  jectRule = {.  t
+00000530: 6573 743a 202f 7b7b 636f 6f6b 6965 6375  est: /{{cookiecu
+00000540: 7474 6572 2e70 6163 6b61 6765 7d7d 5f67  tter.package}}_g
+00000550: 656f 706f 7274 616c 5c2f 7374 6174 6963  eoportal\/static
+00000560: 2d6e 6765 6f5c 2f6a 735c 2f2e 2a5c 2e6a  -ngeo\/js\/.*\.j
+00000570: 7324 2f2c 0a20 2075 7365 3a20 7b0a 2020  s$/,.  use: {.  
+00000580: 2020 6c6f 6164 6572 3a20 2762 6162 656c    loader: 'babel
+00000590: 2d6c 6f61 6465 7227 2c0a 2020 2020 6f70  -loader',.    op
+000005a0: 7469 6f6e 733a 207b 0a20 2020 2020 2070  tions: {.      p
+000005b0: 7265 7365 7473 3a20 6261 6265 6c50 7265  resets: babelPre
+000005c0: 7365 7473 2c0a 2020 2020 2020 6261 6265  sets,.      babe
+000005d0: 6c72 633a 2066 616c 7365 2c0a 2020 2020  lrc: false,.    
+000005e0: 2020 636f 6d6d 656e 7473 3a20 6661 6c73    comments: fals
+000005f0: 652c 0a20 2020 2020 2070 6c75 6769 6e73  e,.      plugins
+00000600: 3a20 5b72 6571 7569 7265 2e72 6573 6f6c  : [require.resol
+00000610: 7665 2827 6261 6265 6c2d 706c 7567 696e  ve('babel-plugin
+00000620: 2d61 6e67 756c 6172 6a73 2d61 6e6e 6f74  -angularjs-annot
+00000630: 6174 6527 295d 2c0a 2020 2020 7d2c 0a20  ate')],.    },. 
+00000640: 207d 2c0a 7d3b 0a63 6f6e 7374 2072 756c   },.};.const rul
+00000650: 6573 203d 205b 7072 6f6a 6563 7452 756c  es = [projectRul
+00000660: 655d 3b0a 0a63 6f6e 7374 206e 6f44 6576  e];..const noDev
+00000670: 5365 7276 6572 203d 2070 726f 6365 7373  Server = process
+00000680: 2e65 6e76 5b27 4e4f 5f44 4556 5f53 4552  .env['NO_DEV_SER
+00000690: 5645 5227 5d20 3d3d 2027 5452 5545 273b  VER'] == 'TRUE';
+000006a0: 0a63 6f6e 7374 2064 6576 5365 7276 6572  .const devServer
+000006b0: 203d 2064 6576 2026 2620 216e 6f44 6576   = dev && !noDev
+000006c0: 5365 7276 6572 3b0a 0a63 6f6e 736f 6c65  Server;..console
+000006d0: 2e6c 6f67 2827 5573 6520 6465 7620 6d6f  .log('Use dev mo
+000006e0: 6465 3a20 2720 2b20 6465 7629 3b0a 636f  de: ' + dev);.co
+000006f0: 6e73 6f6c 652e 6c6f 6728 2755 7365 2064  nsole.log('Use d
+00000700: 6576 2073 6572 7665 7220 6d6f 6465 3a20  ev server mode: 
+00000710: 2720 2b20 6465 7653 6572 7665 7229 3b0a  ' + devServer);.
+00000720: 0a6d 6f64 756c 652e 6578 706f 7274 7320  .module.exports 
+00000730: 3d20 7b0a 2020 6f75 7470 7574 3a20 7b0a  = {.  output: {.
+00000740: 2020 2020 7061 7468 3a20 272f 6574 632f      path: '/etc/
+00000750: 7374 6174 6963 2d6e 6765 6f2f 272c 0a20  static-ngeo/',. 
+00000760: 2020 2070 7562 6c69 6350 6174 683a 2064     publicPath: d
+00000770: 6576 5365 7276 6572 203f 2027 247b 5649  evServer ? '${VI
+00000780: 5349 424c 455f 454e 5452 595f 504f 494e  SIBLE_ENTRY_POIN
+00000790: 547d 6465 762f 2720 3a20 272e 5f5f 454e  T}dev/' : '.__EN
+000007a0: 5452 595f 504f 494e 545f 5f73 7461 7469  TRY_POINT__stati
+000007b0: 632d 6e67 656f 2f27 2c0a 2020 7d2c 0a20  c-ngeo/',.  },. 
+000007c0: 2064 6576 5365 7276 6572 3a20 7b0a 2020   devServer: {.  
+000007d0: 2020 7075 626c 6963 5061 7468 3a20 2724    publicPath: '$
+000007e0: 7b56 4953 4942 4c45 5f57 4542 5f50 524f  {VISIBLE_WEB_PRO
+000007f0: 544f 434f 4c7d 3a2f 2f24 7b56 4953 4942  TOCOL}://${VISIB
+00000800: 4c45 5f57 4542 5f48 4f53 547d 247b 5649  LE_WEB_HOST}${VI
+00000810: 5349 424c 455f 454e 5452 595f 504f 494e  SIBLE_ENTRY_POIN
+00000820: 547d 6465 762f 272c 0a20 2020 2070 6f72  T}dev/',.    por
+00000830: 743a 2038 3038 302c 0a20 2020 2068 6f73  t: 8080,.    hos
+00000840: 743a 2027 7765 6270 6163 6b5f 6465 765f  t: 'webpack_dev_
+00000850: 7365 7276 6572 272c 0a20 2020 2068 6f74  server',.    hot
+00000860: 3a20 7472 7565 2c0a 2020 7d2c 0a20 2065  : true,.  },.  e
+00000870: 6e74 7279 3a20 656e 7472 792c 0a20 206d  ntry: entry,.  m
+00000880: 6f64 756c 653a 207b 0a20 2020 2072 756c  odule: {.    rul
+00000890: 6573 2c0a 2020 7d2c 0a20 2070 6c75 6769  es,.  },.  plugi
+000008a0: 6e73 3a20 706c 7567 696e 732c 0a20 2072  ns: plugins,.  r
+000008b0: 6573 6f6c 7665 3a20 7b0a 2020 2020 6d6f  esolve: {.    mo
+000008c0: 6475 6c65 733a 205b 272f 7573 722f 6c69  dules: ['/usr/li
+000008d0: 622f 6e6f 6465 5f6d 6f64 756c 6573 275d  b/node_modules']
+000008e0: 2c0a 2020 2020 616c 6961 733a 207b 0a20  ,.    alias: {. 
+000008f0: 2020 2020 2027 7b7b 636f 6f6b 6965 6375       '{{cookiecu
+00000900: 7474 6572 2e70 6163 6b61 6765 7d7d 273a  tter.package}}':
+00000910: 2070 6174 682e 7265 736f 6c76 6528 0a20   path.resolve(. 
+00000920: 2020 2020 2020 205f 5f64 6972 6e61 6d65         __dirname
+00000930: 2c0a 2020 2020 2020 2020 277b 7b63 6f6f  ,.        '{{coo
+00000940: 6b69 6563 7574 7465 722e 7061 636b 6167  kiecutter.packag
+00000950: 657d 7d5f 6765 6f70 6f72 7461 6c2f 7374  e}}_geoportal/st
+00000960: 6174 6963 2d6e 6765 6f2f 6a73 270a 2020  atic-ngeo/js'.  
+00000970: 2020 2020 292c 0a20 2020 207d 2c0a 2020      ),.    },.  
+00000980: 7d2c 0a7d 3b0a                           },.};.
```

## Comparing `c2cgeoportal_geoportal/scaffolds/create/geoportal/webpack.commons.js` & `c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/webpack.commons.js`

 * *Files 18% similar despite different names*

### js-beautify {}

```diff
@@ -1,21 +1,21 @@
 const commons = require('ngeo/buildtools/webpack.commons.js');
 const SassPlugin = require('ngeo/buildtools/webpack.plugin.js');
 
 const config = commons({
     DllReferencePluginOptions: {
         context: '/usr/lib/',
-    }
+    },
 });
 
 for (const plugin of config.plugins) {
     if (plugin instanceof SassPlugin) {
         plugin.options.preReplacements = [
-            [new RegExp('\\${VISIBLE_ENTRY_POINT}', 'g'), 'visible-entry-point'],
+            [new RegExp('\\${VISIBLE_ENTRY_POINT}', 'g'), 'visible-entry-point']
         ];
         plugin.options.postReplacements = [
-            [new RegExp('visible-entry-point', 'g'), '${VISIBLE_ENTRY_POINT}'],
+            [new RegExp('visible-entry-point', 'g'), '${VISIBLE_ENTRY_POINT}']
         ];
     }
 }
 
 module.exports = () => config;
```

## Comparing `c2cgeoportal_geoportal/scaffolds/create/geoportal/webpack.config.js` & `c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/webpack.config.js`

 * *Format-specific differences are supported for JavaScript files but no file-specific differences were detected; falling back to a binary diff. file(1) reports: JavaScript source, ASCII text*

 * *Files 15% similar despite different names*

```diff
@@ -1,41 +1,41 @@
-00000000: 636f 6e73 7420 7b20 6d65 7267 6520 7d20  const { merge } 
-00000010: 3d20 7265 7175 6972 6528 2777 6562 7061  = require('webpa
-00000020: 636b 2d6d 6572 6765 2729 3b0a 636f 6e73  ck-merge');.cons
-00000030: 7420 6170 7073 203d 2072 6571 7569 7265  t apps = require
-00000040: 2827 2e2f 7765 6270 6163 6b2e 6170 7073  ('./webpack.apps
-00000050: 2e6a 7327 293b 0a63 6f6e 7374 2063 6f6d  .js');.const com
-00000060: 6d6f 6e73 203d 2072 6571 7569 7265 2827  mons = require('
-00000070: 2e2f 7765 6270 6163 6b2e 636f 6d6d 6f6e  ./webpack.common
-00000080: 732e 6a73 2729 3b0a 0a6c 6574 2063 6f6e  s.js');..let con
-00000090: 6669 6720 3d20 636f 6d6d 6f6e 7328 293b  fig = commons();
-000000a0: 0a0a 636f 6e73 7420 6e6f 6465 456e 7620  ..const nodeEnv 
-000000b0: 3d20 7072 6f63 6573 732e 656e 765b 274e  = process.env['N
-000000c0: 4f44 455f 454e 5627 5d20 7c7c 2027 6465  ODE_ENV'] || 'de
-000000d0: 7665 6c6f 706d 656e 7427 3b0a 7377 6974  velopment';.swit
-000000e0: 6368 2028 6e6f 6465 456e 7629 207b 0a20  ch (nodeEnv) {. 
-000000f0: 2063 6173 6520 2764 6576 656c 6f70 6d65   case 'developme
-00000100: 6e74 273a 0a20 2020 2063 6f6e 6669 6720  nt':.    config 
-00000110: 3d20 6d65 7267 6528 636f 6e66 6967 2c20  = merge(config, 
-00000120: 7265 7175 6972 6528 276e 6765 6f2f 6275  require('ngeo/bu
-00000130: 696c 6474 6f6f 6c73 2f77 6562 7061 636b  ildtools/webpack
-00000140: 2e64 6576 2729 2829 293b 0a20 2020 2062  .dev')());.    b
-00000150: 7265 616b 3b0a 2020 6361 7365 2027 7072  reak;.  case 'pr
-00000160: 6f64 7563 7469 6f6e 273a 0a20 2020 2063  oduction':.    c
-00000170: 6f6e 6669 6720 3d20 6d65 7267 6528 636f  onfig = merge(co
-00000180: 6e66 6967 2c20 7265 7175 6972 6528 276e  nfig, require('n
-00000190: 6765 6f2f 6275 696c 6474 6f6f 6c73 2f77  geo/buildtools/w
-000001a0: 6562 7061 636b 2e70 726f 6427 2928 2929  ebpack.prod')())
-000001b0: 3b0a 2020 2020 6272 6561 6b3b 0a20 2064  ;.    break;.  d
-000001c0: 6566 6175 6c74 3a0a 2020 2020 636f 6e73  efault:.    cons
-000001d0: 6f6c 652e 6c6f 6728 6054 6865 2027 4e4f  ole.log(`The 'NO
-000001e0: 4445 5f45 4e56 2720 656e 7669 726f 6e6d  DE_ENV' environm
-000001f0: 656e 7420 7661 7269 6162 6c65 2069 7320  ent variable is 
-00000200: 7365 7420 746f 2061 6e20 696e 7661 6c69  set to an invali
-00000210: 6420 7661 6c75 653a 2024 7b70 726f 6365  d value: ${proce
-00000220: 7373 2e65 6e76 2e4e 4f44 455f 454e 567d  ss.env.NODE_ENV}
-00000230: 2e60 293b 0a20 2020 2070 726f 6365 7373  .`);.    process
-00000240: 2e65 7869 7428 3229 3b0a 7d0a 0a63 6f6e  .exit(2);.}..con
-00000250: 6669 6720 3d20 6d65 7267 6528 636f 6e66  fig = merge(conf
-00000260: 6967 2c20 6170 7073 293b 0a0a 6d6f 6475  ig, apps);..modu
-00000270: 6c65 2e65 7870 6f72 7473 203d 2063 6f6e  le.exports = con
-00000280: 6669 673b 0a                             fig;.
+00000000: 636f 6e73 7420 7b6d 6572 6765 7d20 3d20  const {merge} = 
+00000010: 7265 7175 6972 6528 2777 6562 7061 636b  require('webpack
+00000020: 2d6d 6572 6765 2729 3b0a 636f 6e73 7420  -merge');.const 
+00000030: 6170 7073 203d 2072 6571 7569 7265 2827  apps = require('
+00000040: 2e2f 7765 6270 6163 6b2e 6170 7073 2e6a  ./webpack.apps.j
+00000050: 7327 293b 0a63 6f6e 7374 2063 6f6d 6d6f  s');.const commo
+00000060: 6e73 203d 2072 6571 7569 7265 2827 2e2f  ns = require('./
+00000070: 7765 6270 6163 6b2e 636f 6d6d 6f6e 732e  webpack.commons.
+00000080: 6a73 2729 3b0a 0a6c 6574 2063 6f6e 6669  js');..let confi
+00000090: 6720 3d20 636f 6d6d 6f6e 7328 293b 0a0a  g = commons();..
+000000a0: 636f 6e73 7420 6e6f 6465 456e 7620 3d20  const nodeEnv = 
+000000b0: 7072 6f63 6573 732e 656e 765b 274e 4f44  process.env['NOD
+000000c0: 455f 454e 5627 5d20 7c7c 2027 6465 7665  E_ENV'] || 'deve
+000000d0: 6c6f 706d 656e 7427 3b0a 7377 6974 6368  lopment';.switch
+000000e0: 2028 6e6f 6465 456e 7629 207b 0a20 2063   (nodeEnv) {.  c
+000000f0: 6173 6520 2764 6576 656c 6f70 6d65 6e74  ase 'development
+00000100: 273a 0a20 2020 2063 6f6e 6669 6720 3d20  ':.    config = 
+00000110: 6d65 7267 6528 636f 6e66 6967 2c20 7265  merge(config, re
+00000120: 7175 6972 6528 276e 6765 6f2f 6275 696c  quire('ngeo/buil
+00000130: 6474 6f6f 6c73 2f77 6562 7061 636b 2e64  dtools/webpack.d
+00000140: 6576 2729 2829 293b 0a20 2020 2062 7265  ev')());.    bre
+00000150: 616b 3b0a 2020 6361 7365 2027 7072 6f64  ak;.  case 'prod
+00000160: 7563 7469 6f6e 273a 0a20 2020 2063 6f6e  uction':.    con
+00000170: 6669 6720 3d20 6d65 7267 6528 636f 6e66  fig = merge(conf
+00000180: 6967 2c20 7265 7175 6972 6528 276e 6765  ig, require('nge
+00000190: 6f2f 6275 696c 6474 6f6f 6c73 2f77 6562  o/buildtools/web
+000001a0: 7061 636b 2e70 726f 6427 2928 2929 3b0a  pack.prod')());.
+000001b0: 2020 2020 6272 6561 6b3b 0a20 2064 6566      break;.  def
+000001c0: 6175 6c74 3a0a 2020 2020 636f 6e73 6f6c  ault:.    consol
+000001d0: 652e 6c6f 6728 6054 6865 2027 4e4f 4445  e.log(`The 'NODE
+000001e0: 5f45 4e56 2720 656e 7669 726f 6e6d 656e  _ENV' environmen
+000001f0: 7420 7661 7269 6162 6c65 2069 7320 7365  t variable is se
+00000200: 7420 746f 2061 6e20 696e 7661 6c69 6420  t to an invalid 
+00000210: 7661 6c75 653a 2024 7b70 726f 6365 7373  value: ${process
+00000220: 2e65 6e76 2e4e 4f44 455f 454e 567d 2e60  .env.NODE_ENV}.`
+00000230: 293b 0a20 2020 2070 726f 6365 7373 2e65  );.    process.e
+00000240: 7869 7428 3229 3b0a 7d0a 0a63 6f6e 6669  xit(2);.}..confi
+00000250: 6720 3d20 6d65 7267 6528 636f 6e66 6967  g = merge(config
+00000260: 2c20 6170 7073 293b 0a0a 6d6f 6475 6c65  , apps);..module
+00000270: 2e65 7870 6f72 7473 203d 2063 6f6e 6669  .exports = confi
+00000280: 673b 0a                                  g;.
```

## Comparing `c2cgeoportal_geoportal/scaffolds/create/geoportal/+package+_geoportal/subscribers.py_tmpl` & `c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/{{cookiecutter.package}}_geoportal/subscribers.py`

 * *Files 6% similar despite different names*

```diff
@@ -1,14 +1,12 @@
-# -*- coding: utf-8 -*-
-
 from pyramid.events import BeforeRender, NewRequest, subscriber
 from pyramid.i18n import TranslationStringFactory, get_localizer
 
 # use two translator to translate each strings in Make
-tsf_server = TranslationStringFactory("{{package}}-server")
+tsf_server = TranslationStringFactory("{{cookiecutter.package}}-server")
 tsf_geoportal = TranslationStringFactory("c2cgeoportal")
 tsf_admin = TranslationStringFactory("c2cgeoportal_admin")
 tsf_c2cgeoform = TranslationStringFactory("c2cgeoform")
 tsf_getitfixed = TranslationStringFactory("getitfixed")
 
 
 @subscriber(NewRequest)
```

## Comparing `c2cgeoportal_geoportal/scaffolds/create/geoportal/+package+_geoportal/static/images/banner_left.png` & `c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/geoportal/{{cookiecutter.package}}_geoportal/static/images/banner_left.png`

 * *Files identical despite different names*

## Comparing `c2cgeoportal_geoportal/scaffolds/create/geoportal/+package+_geoportal/static/images/banner_right.png` & `c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/geoportal/{{cookiecutter.package}}_geoportal/static/images/banner_right.png`

 * *Files identical despite different names*

## Comparing `c2cgeoportal_geoportal/scaffolds/create/geoportal/+package+_geoportal/static/images/markers/marker-blue.png` & `c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/geoportal/{{cookiecutter.package}}_geoportal/static/images/markers/marker-blue.png`

 * *Files identical despite different names*

## Comparing `c2cgeoportal_geoportal/scaffolds/create/geoportal/+package+_geoportal/static/images/markers/marker-gold.png` & `c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/geoportal/{{cookiecutter.package}}_geoportal/static/images/markers/marker-gold.png`

 * *Files identical despite different names*

## Comparing `c2cgeoportal_geoportal/scaffolds/create/geoportal/+package+_geoportal/static/images/markers/marker-green.png` & `c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/geoportal/{{cookiecutter.package}}_geoportal/static/images/markers/marker-green.png`

 * *Files identical despite different names*

## Comparing `c2cgeoportal_geoportal/scaffolds/create/geoportal/+package+_geoportal/static/images/markers/marker.png` & `c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/geoportal/{{cookiecutter.package}}_geoportal/static/images/markers/marker.png`

 * *Files identical despite different names*

## Comparing `c2cgeoportal_geoportal/scaffolds/create/geoportal/tools/extract-messages.js` & `c2cgeoportal_geoportal/scaffolds/advance_create/{{cookiecutter.project}}/geoportal/tools/extract-messages.js`

 * *Files 8% similar despite different names*

### js-beautify {}

```diff
@@ -3,27 +3,29 @@
 const Extractor = require('angular-gettext-tools').Extractor;
 
 function main(inputs) {
     const extractor = new Extractor();
 
     const promises = [];
     inputs.forEach((input) => {
-        promises.push(new Promise((resolve) => {
-            fs.readFile(input, 'utf-8', (error, content) => {
-                resolve(error ? undefined : {
-                    input,
-                    content
+        promises.push(
+            new Promise((resolve) => {
+                fs.readFile(input, 'utf-8', (error, content) => {
+                    resolve(error ? undefined : {
+                        input,
+                        content
+                    });
                 });
-            });
-        }));
+            })
+        );
     });
 
     const messages = [];
     Promise.all(promises).then((contents) => {
-        contents = contents.filter(content => content !== undefined);
+        contents = contents.filter((content) => content !== undefined);
         contents.forEach(({
             input,
             content
         }) => extractor.parse(input, content));
         for (const msgstr in extractor.strings) {
             if (extractor.strings.hasOwnProperty(msgstr)) {
                 const msg = extractor.strings[msgstr];
```

## Comparing `c2cgeoportal_geoportal/scaffolds/create/mapserver/demo.map.tmpl_tmpl` & `c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/mapserver/demo.map.tmpl`

 * *Files 9% similar despite different names*

```diff
@@ -1,262 +1,224 @@
 # This file is used to render the examples layers, it can be deleted.
-
 # Layer without any restriction
 LAYER
-  NAME "borders"
-  TYPE POLYGON
-  STATUS ON
-  TOLERANCE 10
-  TOLERANCEUNITS pixels
-  TEMPLATE fooOnlyForWMSGetFeatureInfo # For GetFeatureInfo
-  EXTENT -31 27 45 71 # Useful for better performance but not mandatory
-  CONNECTIONTYPE postgis
-  PROCESSING "CLOSE_CONNECTION=DEFER" # For performance
-  CONNECTION "host=${PGHOST_SLAVE} port=${PGPORT_SLAVE} sslmode=${PGSSLMODE} user=${PGUSER} password=${PGPASSWORD} dbname=${PGDATABASE}"
-  DATA "geom FROM (SELECT geo.* FROM data.europe_borders as geo) as foo USING unique gid USING srid=4326"
-
-  PROJECTION
-    "init=epsg:4326"
-  END
-
-  METADATA
-    "wms_title" "Borders of Europe" # For WMS
-    "wms_srs" "EPSG:{{srid}}" # For WMS
-
-    "wfs_enable_request" "*" # Enable WFS for this layer
-    "gml_include_items" "all" # For GetFeatureInfo and WFS GetFeature (QueryBuilder)
-    "ows_geom_type" "multipolygon" # For returning geometries in GetFeatureInfo
-    "ows_geometries" "geom" # For returning geometries in GetFeatureInfo
-
-    "wms_metadataurl_href" "https://www.example.com/bar" # For metadata URL
-    "wms_metadataurl_format" "text/html" # For metadata URL
-    "wms_metadataurl_type" "TC211" # For metadata URL
-  END
-
-  CLASS
     NAME "borders"
-    STYLE
-      OUTLINECOLOR 0 0 0
+    TYPE POLYGON
+    STATUS ON
+    TOLERANCE 10
+    TOLERANCEUNITS PIXELS
+    TEMPLATE "fooOnlyForWMSGetFeatureInfo" # For GetFeatureInfo
+    EXTENT -31 27 45 71 # Useful for better performance but not mandatory
+    CONNECTIONTYPE POSTGIS
+    PROCESSING "CLOSE_CONNECTION=DEFER"
+    CONNECTION "host=${PGHOST_SLAVE} port=${PGPORT_SLAVE} sslmode=${PGSSLMODE} user=${PGUSER} password=${PGPASSWORD} dbname=${PGDATABASE}"
+    DATA "geom FROM (SELECT geo.* FROM data.europe_borders as geo) as foo USING unique gid USING srid=4326"
+    PROJECTION
+        "init=epsg:4326"
+    END
+    METADATA
+        "wms_title" "Borders of Europe" # For WMS
+        "wms_srs" "EPSG:{{cookiecutter.srid}}" # For WMS
+        "wfs_enable_request" "*" # Enable WFS for this layer
+        "gml_include_items" "all" # For GetFeatureInfo and WFS GetFeature (QueryBuilder)
+        "ows_geom_type" "multipolygon" # For returning geometries in GetFeatureInfo
+        "ows_geometries" "geom" # For returning geometries in GetFeatureInfo
+        "wms_metadataurl_href" "https://www.example.com/bar" # For metadata URL
+        "wms_metadataurl_format" "text/html" # For metadata URL
+        "wms_metadataurl_type" "TC211" # For metadata URL
+    END
+    CLASS
+        NAME "borders"
+        STYLE
+            OUTLINECOLOR 0 0 0
+        END
     END
-  END
 END
-
 # Layer with restriction area
 LAYER
-  NAME "density"
-  TYPE POLYGON
-  STATUS ON
-  TOLERANCE 10
-  TOLERANCEUNITS pixels
-  TEMPLATE fooOnlyForWMSGetFeatureInfo # For GetFeatureInfo
-  EXTENT  -31 27 45 71
-  CONNECTIONTYPE postgis
-  PROCESSING "CLOSE_CONNECTION=DEFER" # For performance
-  CONNECTION "host=${PGHOST_SLAVE} port=${PGPORT_SLAVE} sslmode=${PGSSLMODE} user=${PGUSER} password=${PGPASSWORD} dbname=${PGDATABASE}"
-  DATA "geom FROM (SELECT geo.*, (pop2005/(area*10)) AS density FROM data.europe_borders AS geo WHERE ARRAY[%role_ids%]::integer[] && ARRAY(${MAPSERVER_DATA_NOAREA_SUBSELECT} 'density')) as foo USING unique gid USING srid=4326"
-
-  PROJECTION
-    "init=epsg:4326"
-  END
-
-  VALIDATION
-    # For secured layers
-    "default_role_ids" ""
-    # Or
-    # "default_role_ids" "<id of the anonymous role>"
-    "role_ids" "^-?[0-9,]*$"
-  END
-
-  METADATA
-    "wms_title" "Density of population" # For WMS
-    "wms_srs" "EPSG:{{srid}}" # For WMS
-
-    "wfs_enable_request" "*" # Enable WFS for this layer
-    "gml_include_items" "all" # For GetFeatureInfo and WFS GetFeature (QueryBuilder)
-    "ows_geom_type" "multipolygon" # For returning geometries in GetFeatureInfo
-    "ows_geometries" "geom" # For returning geometries in GetFeatureInfo
-
-    "wms_metadataurl_href" "https://www.example.com/bar" # For metadata URL
-    "wms_metadataurl_format" "text/html" # For metadata URL
-    "wms_metadataurl_type" "TC211" # For metadata URL
-  END
-
-  LABELITEM "name"
-
-  CLASS
-    NAME "[ 6 - 50 ["
-    EXPRESSION ([density] < 49.73)
-    STYLE
-      OUTLINECOLOR 0 0 0
-      COLOR 254 229 217
-    END
-    LABEL
-      COLOR  0 0 0
-      FONT "noto_bold"
-      TYPE truetype
-      SIZE 8
-      OUTLINEWIDTH 2
-      POSITION AUTO
-      PARTIALS FALSE
-      OUTLINECOLOR 253 247 244
-      MINFEATURESIZE 8
-      MINDISTANCE 1000
-      BUFFER 10
-    END
-    LEADER
-      GRIDSTEP 400 # number of pixels between positions that are tested
-      MAXDISTANCE 300 # distance in pixels that leader text can be drawn
-      STYLE # normal line styles are supported
-      COLOR 255 255 255
-      WIDTH 3
-      END
-      STYLE # normal line styles are supported
-      COLOR 0 0 0
-      WIDTH 1
-      END
-    END
-  END
-  CLASS
-    NAME "[ 50 - 92 ["
-    EXPRESSION ([density] >= 49.73 AND [density] < 91.94)
-    STYLE
-      OUTLINECOLOR 0 0 0
-      COLOR 252 174 145
-    END
-    LABEL
-      COLOR  0 0 0
-      FONT "noto_bold"
-      TYPE truetype
-      SIZE 8
-      OUTLINEWIDTH 2
-      POSITION AUTO
-      PARTIALS FALSE
-      OUTLINECOLOR 252 223 213
-      MINFEATURESIZE 8
-      MINDISTANCE 1000
-      BUFFER 10
-    END
-    LEADER
-      GRIDSTEP 400 # number of pixels between positions that are tested
-      MAXDISTANCE 300 # distance in pixels that leader text can be drawn
-      STYLE # normal line styles are supported
-      COLOR 255 255 255
-      WIDTH 3
-      END
-      STYLE # normal line styles are supported
-      COLOR 0 0 0
-      WIDTH 1
-      END
-    END
-  END
-  CLASS
-    NAME "[ 92 - 115 ["
-    EXPRESSION ([density] >= 91.94 AND [density] < 115.08)
-    STYLE
-      OUTLINECOLOR 0 0 0
-      COLOR 251 106 74
-    END
-    LABEL
-      COLOR  0 0 0
-      FONT "noto_bold"
-      TYPE truetype
-      SIZE 8
-      OUTLINEWIDTH 2
-      POSITION AUTO
-      PARTIALS FALSE
-      OUTLINECOLOR 251 220 213
-      MINFEATURESIZE 8
-      MINDISTANCE 1000
-      BUFFER 10
-    END
-    LEADER
-      GRIDSTEP 40 # number of pixels between positions that are tested
-      MAXDISTANCE 300 # distance in pixels that leader text can be drawn
-      STYLE # normal line styles are supported
-      COLOR 255 255 255
-      WIDTH 3
-      END
-      STYLE # normal line styles are supported
-      COLOR 0 0 0
-      WIDTH 1
-      END
-    END
-  END
-  CLASS
-    NAME "[ 115 - 210 ["
-    EXPRESSION ([density] >= 115.08 AND [density] < 210.11)
-    STYLE
-      OUTLINECOLOR 0 0 0
-      COLOR 222 45 38
-    END
-    LABEL
-      COLOR  0 0 0
-      FONT "noto_bold"
-      TYPE truetype
-      SIZE 8
-      OUTLINEWIDTH 2
-      POSITION AUTO
-      PARTIALS FALSE
-      OUTLINECOLOR 237 189 187
-      MINFEATURESIZE 8
-      MINDISTANCE 1000
-      BUFFER 10
-    END
-    LEADER
-      GRIDSTEP 40 # number of pixels between positions that are tested
-      MAXDISTANCE 300 # distance in pixels that leader text can be drawn
-      STYLE # normal line styles are supported
-      COLOR 255 255 255
-      WIDTH 3
-      END
-      STYLE # normal line styles are supported
-      COLOR 0 0 0
-      WIDTH 1
-      END
-    END
-  END
-  CLASS
-    NAME "[ 210 - 18 475 ]"
-    EXPRESSION ([density] >= 210 AND [density] <= 18475)
-    STYLE
-      OUTLINECOLOR 0 0 0
-      COLOR 165 15 21
-    END
-    LABEL
-      COLOR  0 0 0
-      FONT "noto_bold"
-      TYPE truetype
-      SIZE 8
-      OUTLINEWIDTH 2
-      POSITION AUTO
-      PARTIALS FALSE
-      OUTLINECOLOR 208 184 185
-      MINFEATURESIZE 8
-      MINDISTANCE 1000
-      BUFFER 10
-    END
-    LEADER
-      GRIDSTEP 40 # number of pixels between positions that are tested
-      MAXDISTANCE 300 # distance in pixels that leader text can be drawn
-      STYLE # normal line styles are supported
-      COLOR 255 255 255
-      WIDTH 3
-      END
-      STYLE # normal line styles are supported
-      COLOR 0 0 0
-      WIDTH 1
-      END
+    NAME "density"
+    TYPE POLYGON
+    STATUS ON
+    TOLERANCE 10
+    TOLERANCEUNITS PIXELS
+    TEMPLATE "fooOnlyForWMSGetFeatureInfo" # For GetFeatureInfo
+    EXTENT -31 27 45 71
+    CONNECTIONTYPE POSTGIS
+    PROCESSING "CLOSE_CONNECTION=DEFER"
+    CONNECTION "host=${PGHOST_SLAVE} port=${PGPORT_SLAVE} sslmode=${PGSSLMODE} user=${PGUSER} password=${PGPASSWORD} dbname=${PGDATABASE}"
+    DATA "geom FROM (SELECT geo.*, (pop2005/(area*10)) AS density FROM data.europe_borders AS geo WHERE ARRAY[%role_ids%]::integer[] && ARRAY(${MAPSERVER_DATA_NOAREA_SUBSELECT} 'density')) as foo USING unique gid USING srid=4326"
+    PROJECTION
+        "init=epsg:4326"
+    END
+    VALIDATION
+        "default_role_ids" ""
+        "role_ids" "^-?[0-9,]*$"
+    END
+    METADATA
+        "wms_title" "Density of population" # For WMS
+        "wms_srs" "EPSG:{{cookiecutter.srid}}" # For WMS
+        "wfs_enable_request" "*" # Enable WFS for this layer
+        "gml_include_items" "all" # For GetFeatureInfo and WFS GetFeature (QueryBuilder)
+        "ows_geom_type" "multipolygon" # For returning geometries in GetFeatureInfo
+        "ows_geometries" "geom" # For returning geometries in GetFeatureInfo
+        "wms_metadataurl_href" "https://www.example.com/bar" # For metadata URL
+        "wms_metadataurl_format" "text/html" # For metadata URL
+        "wms_metadataurl_type" "TC211" # For metadata URL
+    END
+    LABELITEM "name"
+    CLASS
+        NAME "[ 6 - 50 ["
+        EXPRESSION ( [density] < 49.73 )
+        STYLE
+            OUTLINECOLOR 0 0 0
+            COLOR 254 229 217
+        END
+        LABEL
+            COLOR 0 0 0
+            FONT "noto_bold"
+            TYPE TRUETYPE
+            SIZE 8
+            OUTLINEWIDTH 2
+            POSITION AUTO
+            PARTIALS FALSE
+            OUTLINECOLOR 253 247 244
+            MINFEATURESIZE 8
+            MINDISTANCE 1000
+            BUFFER 10
+        END
+        LEADER
+            GRIDSTEP 400 # number of pixels between positions that are tested
+            MAXDISTANCE 300 # distance in pixels that leader text can be drawn
+            STYLE
+                COLOR 255 255 255 # normal line styles are supported
+                WIDTH 3
+            END
+        END
+    END
+    CLASS
+        NAME "[ 50 - 92 ["
+        EXPRESSION ( ( [density] >= 49.73 ) AND ( [density] < 91.94 ) )
+        STYLE
+            OUTLINECOLOR 0 0 0
+            COLOR 252 174 145
+        END
+        LABEL
+            COLOR 0 0 0
+            FONT "noto_bold"
+            TYPE TRUETYPE
+            SIZE 8
+            OUTLINEWIDTH 2
+            POSITION AUTO
+            PARTIALS FALSE
+            OUTLINECOLOR 252 223 213
+            MINFEATURESIZE 8
+            MINDISTANCE 1000
+            BUFFER 10
+        END
+        LEADER
+            GRIDSTEP 400 # number of pixels between positions that are tested
+            MAXDISTANCE 300 # distance in pixels that leader text can be drawn
+            STYLE
+                COLOR 255 255 255 # normal line styles are supported
+                WIDTH 3
+            END
+        END
+    END
+    CLASS
+        NAME "[ 92 - 115 ["
+        EXPRESSION ( ( [density] >= 91.94 ) AND ( [density] < 115.08 ) )
+        STYLE
+            OUTLINECOLOR 0 0 0
+            COLOR 251 106 74
+        END
+        LABEL
+            COLOR 0 0 0
+            FONT "noto_bold"
+            TYPE TRUETYPE
+            SIZE 8
+            OUTLINEWIDTH 2
+            POSITION AUTO
+            PARTIALS FALSE
+            OUTLINECOLOR 251 220 213
+            MINFEATURESIZE 8
+            MINDISTANCE 1000
+            BUFFER 10
+        END
+        LEADER
+            GRIDSTEP 40 # number of pixels between positions that are tested
+            MAXDISTANCE 300 # distance in pixels that leader text can be drawn
+            STYLE
+                COLOR 255 255 255 # normal line styles are supported
+                WIDTH 3
+            END
+        END
+    END
+    CLASS
+        NAME "[ 115 - 210 ["
+        EXPRESSION ( ( [density] >= 115.08 ) AND ( [density] < 210.11 ) )
+        STYLE
+            OUTLINECOLOR 0 0 0
+            COLOR 222 45 38
+        END
+        LABEL
+            COLOR 0 0 0
+            FONT "noto_bold"
+            TYPE TRUETYPE
+            SIZE 8
+            OUTLINEWIDTH 2
+            POSITION AUTO
+            PARTIALS FALSE
+            OUTLINECOLOR 237 189 187
+            MINFEATURESIZE 8
+            MINDISTANCE 1000
+            BUFFER 10
+        END
+        LEADER
+            GRIDSTEP 40 # number of pixels between positions that are tested
+            MAXDISTANCE 300 # distance in pixels that leader text can be drawn
+            STYLE
+                COLOR 255 255 255 # normal line styles are supported
+                WIDTH 3
+            END
+        END
+    END
+    CLASS
+        NAME "[ 210 - 18 475 ]"
+        EXPRESSION ( ( [density] >= 210 ) AND ( [density] <= 18475 ) )
+        STYLE
+            OUTLINECOLOR 0 0 0
+            COLOR 165 15 21
+        END
+        LABEL
+            COLOR 0 0 0
+            FONT "noto_bold"
+            TYPE TRUETYPE
+            SIZE 8
+            OUTLINEWIDTH 2
+            POSITION AUTO
+            PARTIALS FALSE
+            OUTLINECOLOR 208 184 185
+            MINFEATURESIZE 8
+            MINDISTANCE 1000
+            BUFFER 10
+        END
+        LEADER
+            GRIDSTEP 40 # number of pixels between positions that are tested
+            MAXDISTANCE 300 # distance in pixels that leader text can be drawn
+            STYLE
+                COLOR 255 255 255 # normal line styles are supported
+                WIDTH 3
+            END
+        END
     END
-  END
 END
-
 # Raster layer (with a tile index)
 LAYER
-  NAME 'topo'
-  GROUP 'plan'
-  TYPE RASTER
-  STATUS ON
-  PROCESSING "RESAMPLE=AVERAGE"
-  TILEINDEX "raster/topo"
-  TILEITEM "LOCATION"
-  MINSCALEDENOM 25000
+    NAME "topo"
+    GROUP "plan"
+    TYPE RASTER
+    STATUS ON
+    PROCESSING "RESAMPLE=AVERAGE"
+    TILEINDEX "raster/topo"
+    TILEITEM "LOCATION"
+    MINSCALEDENOM 25000
 END
```

## Comparing `c2cgeoportal_geoportal/scaffolds/create/mapserver/mapserver.map.tmpl_tmpl` & `c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/mapserver/mapserver.map.tmpl`

 * *Files 7% similar despite different names*

```diff
@@ -8,89 +8,81 @@
 #
 # WMS GetMap:
 # /mapserv?service=wms&version=1.1.1&request=getmap&bbox=-180,-90,180,90&layers=countries&width=600&height=400&srs=EPSG:4326&format=image/png
 #
 # WMS GetFeatureInfo:
 # /mapserv?service=wms&version=1.1.1&request=getfeatureinfo&bbox=-180,-90,180,90&layers=countries&query_layers=countries&width=600&height=400&srs=EPSG:4326&format=image/png&x=180&y=90&info_format=application/vnd.ogc.gml
 #
-
 MAP
-    NAME "{{package}}"
+    NAME "{{cookiecutter.package}}"
 
     # For Windows users: uncomment this line and adapt it to your
     # own mapserver's nad folder (use regular slash "/")
     # CONFIG "PROJ_LIB" "C:/path/to/ms4w/proj/nad"
 
-    EXTENT {{extent_mapserver}} ## should be defined for better performance
+    EXTENT {{cookiecutter.extent_mapserver}} ## should be defined for better performance
     UNITS METERS
 
     # RESOLUTION and DEFRESOLUTION default to 96. If you
     # change RESOLUTION to some other value, also change
     # DEFRESOLUTION. See
     # https://mapserver.org/development/rfc/ms-rfc-55.html
     RESOLUTION 96 ## Also set in Openlayers especially for legends
     DEFRESOLUTION 96
 
     # MAXSIZE should not be less than 5000 for MF print on A3
     MAXSIZE 5000
-
     IMAGECOLOR 255 255 255
     STATUS ON
 
     FONTSET "fonts.conf"
     #SYMBOLSET "symbole.sym"
 
     CONFIG "CPL_VSIL_CURL_USE_CACHE" "TRUE"
     CONFIG "CPL_VSIL_CURL_CACHE_SIZE" "128000000"
     CONFIG "CPL_VSIL_CURL_USE_HEAD" "FALSE"
     CONFIG "GDAL_DISABLE_READDIR_ON_OPEN" "TRUE"
 
     OUTPUTFORMAT
-        NAME jpeg
+        NAME "jpeg"
         DRIVER "AGG/JPEG"
         MIMETYPE "image/jpeg"
         IMAGEMODE RGB
         EXTENSION "jpeg"
         FORMATOPTION "QUALITY=75,PROGRESSIVE=TRUE"
     END
-
     OUTPUTFORMAT
-        NAME png
-        DRIVER AGG/PNG
+        NAME "png"
+        DRIVER "AGG/PNG"
         MIMETYPE "image/png"
         IMAGEMODE RGBA
         EXTENSION "png"
         FORMATOPTION "INTERLACE=OFF"
         FORMATOPTION "QUANTIZE_DITHER=OFF"
         FORMATOPTION "QUANTIZE_FORCE=ON"
         FORMATOPTION "QUANTIZE_COLORS=256"
     END
-
     PROJECTION
-        "init=epsg:{{srid}}"
+        "init=epsg:{{cookiecutter.srid}}"
     END
-
     WEB
         METADATA
             "wms_title" "changeme"
             "wms_abstract" "changeme"
             "ows_onlineresource" "${VISIBLE_WEB_PROTOCOL}://${VISIBLE_WEB_HOST}${VISIBLE_ENTRY_POINT}mapserv_proxy?ogcserver=source%20for%20image%2Fpng"
-            "wms_srs" "EPSG:{{srid}}"
+            "wms_srs" "EPSG:{{cookiecutter.srid}}"
             "wms_encoding" "UTF-8"
             "wms_enable_request" "*"
             "wfs_enable_request" "!*"
             "wfs_encoding" "UTF-8"
         END
     END
-
     LEGEND
         LABEL
             ENCODING "UTF-8"
             TYPE TRUETYPE
             FONT "Arial"
             SIZE 9
         END
     END
-
     INCLUDE "demo.map"
-
 END
```

## Comparing `c2cgeoportal_geoportal/scaffolds/create/mapserver/tinyows.xml.tmpl` & `c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/mapserver/tinyows.xml.tmpl`

 * *Files identical despite different names*

## Comparing `/tmp/diffoscope_gl130fw0_/tmpskwkit1c_ZipContainer/Readme.txt` & `/tmp/diffoscope_gl130fw0_/tmpojy2b5nh_ZipContainer/Readme.txt`

 * *Files 0% similar despite different names*

### encoding

```diff
@@ -1 +1 @@
-iso-8859-1
+utf-8
```

## Comparing `c2cgeoportal_geoportal/scaffolds/create/mapserver/data/TM_EUROPE_BORDERS-0.3.sql` & `c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/mapserver/data/TM_EUROPE_BORDERS-0.3.sql`

 * *Files identical despite different names*

## Comparing `c2cgeoportal_geoportal/scaffolds/create/mapserver/fonts/Arial.ttf` & `c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/mapserver/fonts/Arial.ttf`

 * *Files identical despite different names*

## Comparing `c2cgeoportal_geoportal/scaffolds/create/mapserver/fonts/Arialbd.ttf` & `c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/mapserver/fonts/Arialbd.ttf`

 * *Files identical despite different names*

## Comparing `c2cgeoportal_geoportal/scaffolds/create/mapserver/fonts/Arialbi.ttf` & `c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/mapserver/fonts/Arialbi.ttf`

 * *Files identical despite different names*

## Comparing `c2cgeoportal_geoportal/scaffolds/create/mapserver/fonts/Ariali.ttf` & `c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/mapserver/fonts/Ariali.ttf`

 * *Files identical despite different names*

## Comparing `c2cgeoportal_geoportal/scaffolds/create/mapserver/fonts/NotoSans-Bold.ttf` & `c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/mapserver/fonts/NotoSans-Bold.ttf`

 * *Files identical despite different names*

## Comparing `c2cgeoportal_geoportal/scaffolds/create/mapserver/fonts/NotoSans-BoldItalic.ttf` & `c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/mapserver/fonts/NotoSans-BoldItalic.ttf`

 * *Files identical despite different names*

## Comparing `c2cgeoportal_geoportal/scaffolds/create/mapserver/fonts/NotoSans-Italic.ttf` & `c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/mapserver/fonts/NotoSans-Italic.ttf`

 * *Files identical despite different names*

## Comparing `c2cgeoportal_geoportal/scaffolds/create/mapserver/fonts/NotoSans-Regular.ttf` & `c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/mapserver/fonts/NotoSans-Regular.ttf`

 * *Files identical despite different names*

## Comparing `c2cgeoportal_geoportal/scaffolds/create/mapserver/fonts/Verdana.ttf` & `c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/mapserver/fonts/Verdana.ttf`

 * *Files identical despite different names*

## Comparing `c2cgeoportal_geoportal/scaffolds/create/mapserver/fonts/Verdanab.ttf` & `c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/mapserver/fonts/Verdanab.ttf`

 * *Files identical despite different names*

## Comparing `c2cgeoportal_geoportal/scaffolds/create/mapserver/fonts/Verdanai.ttf` & `c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/mapserver/fonts/Verdanai.ttf`

 * *Files identical despite different names*

## Comparing `c2cgeoportal_geoportal/scaffolds/create/mapserver/fonts/Verdanaz.ttf` & `c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/mapserver/fonts/Verdanaz.ttf`

 * *Files identical despite different names*

## Comparing `c2cgeoportal_geoportal/scaffolds/create/print/print-apps/+package+/A3_Landscape.jrxml` & `c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/print/print-apps/{{cookiecutter.package}}/A3_Landscape.jrxml`

 * *Files 1% similar despite different names*

### Comparing `c2cgeoportal_geoportal/scaffolds/create/print/print-apps/+package+/A3_Landscape.jrxml` & `c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/print/print-apps/{{cookiecutter.package}}/A3_Landscape.jrxml`

```diff
@@ -34,15 +34,15 @@
           <property name="local_mesure_unitheight" value="pixel"/>
           <property name="com.jaspersoft.studio.unit.height" value="px"/>
         </reportElement>
         <textElement textAlignment="Right">
           <font size="8"/>
         </textElement>
         <textFieldExpression><![CDATA[
-					"Le " + java.time.ZonedDateTime.now().format(
+					$R{date_pre} + " " + java.time.ZonedDateTime.now().format(
 						java.time.format.DateTimeFormatter.
 						ofPattern("EEEE dd MMMM yyyy HH:mm").
 						withLocale($P{REPORT_LOCALE}).
 						withZone(java.time.ZoneId.of($P{timezone}))
 					)
 				]]></textFieldExpression>
       </textField>
@@ -149,21 +149,21 @@
           <printWhenExpression><![CDATA[$P{debug}]]></printWhenExpression>
         </reportElement>
         <textElement textAlignment="Right">
           <font size="6"/>
         </textElement>
         <text><![CDATA[Detail band 3]]></text>
       </staticText>
-      <staticText>
+      <textField>
         <reportElement x="0" y="1" width="460" height="20" forecolor="#424242" uuid="385742e7-a286-4456-b687-395a1a540023"/>
         <textElement>
           <font size="16" isBold="true"/>
         </textElement>
-        <text><![CDATA[LGENDE]]></text>
-      </staticText>
+        <textFieldExpression><![CDATA[$R{legend}]]></textFieldExpression>
+      </textField>
       <subreport>
         <reportElement stretchType="RelativeToTallestObject" x="0" y="26" width="1150" height="56" uuid="6a01e0f0-7ebb-40f6-97eb-2979e6fff149"/>
         <dataSourceExpression><![CDATA[$P{legendDataSource}]]></dataSourceExpression>
         <subreportExpression><![CDATA[$P{legendSubReport}]]></subreportExpression>
       </subreport>
     </band>
   </detail>
@@ -179,22 +179,22 @@
           <printWhenExpression><![CDATA[$P{debug}]]></printWhenExpression>
         </reportElement>
         <textElement textAlignment="Right">
           <font size="6"/>
         </textElement>
         <text><![CDATA[Pied de page, sur chaque page]]></text>
       </staticText>
-      <staticText>
+      <textField>
         <reportElement x="0" y="1" width="300" height="14" uuid="54e7e518-a3ee-41f1-b000-9550cad968e1"/>
-        <text><![CDATA[Dvelopp par Camptocamp SA, info@camptocamp.com]]></text>
-      </staticText>
+        <textFieldExpression><![CDATA[$R{info}]]></textFieldExpression>
+      </textField>
       <textField>
         <reportElement x="1087" y="21" width="38" height="30" uuid="7db93d89-f1a1-4135-8143-661152955717"/>
         <textElement textAlignment="Right" verticalAlignment="Bottom"/>
-        <textFieldExpression><![CDATA["Page " + $V{PAGE_NUMBER}]]></textFieldExpression>
+        <textFieldExpression><![CDATA[$R{page} + " " + $V{PAGE_NUMBER}]]></textFieldExpression>
       </textField>
       <textField evaluationTime="Report">
         <reportElement x="1125" y="21" width="22" height="30" uuid="c3450c45-a812-40a4-9a5e-c62dd7cef852"/>
         <textElement verticalAlignment="Bottom"/>
         <textFieldExpression><![CDATA[" / " + $V{PAGE_NUMBER}]]></textFieldExpression>
       </textField>
     </band>
```

## Comparing `c2cgeoportal_geoportal/scaffolds/create/print/print-apps/+package+/A3_Portrait.jrxml` & `c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/print/print-apps/{{cookiecutter.package}}/A3_Portrait.jrxml`

 * *Files 4% similar despite different names*

### Comparing `c2cgeoportal_geoportal/scaffolds/create/print/print-apps/+package+/A3_Portrait.jrxml` & `c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/print/print-apps/{{cookiecutter.package}}/A3_Portrait.jrxml`

```diff
@@ -36,15 +36,15 @@
       </textField>
       <textField>
         <reportElement x="545" y="0" width="255" height="20" uuid="5b782d9b-59cf-441b-ae26-1693d11a534f"/>
         <textElement textAlignment="Right">
           <font size="8"/>
         </textElement>
         <textFieldExpression><![CDATA[
-					"Le " + java.time.ZonedDateTime.now().format(
+					$R{date_pre} + " " + java.time.ZonedDateTime.now().format(
 						java.time.format.DateTimeFormatter.
 						ofPattern("EEEE dd MMMM yyyy HH:mm").
 						withLocale($P{REPORT_LOCALE}).
 						withZone(java.time.ZoneId.of($P{timezone}))
 					)
 				]]></textFieldExpression>
       </textField>
@@ -123,21 +123,21 @@
           <printWhenExpression><![CDATA[$P{debug}]]></printWhenExpression>
         </reportElement>
         <textElement textAlignment="Right">
           <font size="6"/>
         </textElement>
         <text><![CDATA[Detail band 3]]></text>
       </staticText>
-      <staticText>
+      <textField>
         <reportElement x="0" y="2" width="460" height="20" forecolor="#424242" uuid="29fb8881-15f4-4235-8d78-003175bd408f"/>
         <textElement>
           <font size="16" isBold="true"/>
         </textElement>
-        <text><![CDATA[LGENDE]]></text>
-      </staticText>
+        <textFieldExpression><![CDATA[$R{legend}]]></textFieldExpression>
+      </textField>
       <subreport>
         <reportElement stretchType="RelativeToTallestObject" x="0" y="26" width="800" height="56" uuid="4c32d050-9b4f-448e-97f0-072a4606c164">
           <property name="local_mesure_unitwidth" value="pixel"/>
           <property name="com.jaspersoft.studio.unit.width" value="px"/>
         </reportElement>
         <dataSourceExpression><![CDATA[$P{legendDataSource}]]></dataSourceExpression>
         <subreportExpression><![CDATA[$P{legendSubReport}]]></subreportExpression>
@@ -157,22 +157,22 @@
           <printWhenExpression><![CDATA[$P{debug}]]></printWhenExpression>
         </reportElement>
         <textElement textAlignment="Right">
           <font size="6"/>
         </textElement>
         <text><![CDATA[Pied de page, sur chaque page]]></text>
       </staticText>
-      <staticText>
+      <textField>
         <reportElement x="0" y="1" width="300" height="14" uuid="323e51d1-9bf3-4a1b-961f-69c339a07d28"/>
-        <text><![CDATA[Dvelopp par Camptocamp SA, info@camptocamp.com]]></text>
-      </staticText>
+        <textFieldExpression><![CDATA[$R{info}]]></textFieldExpression>
+      </textField>
       <textField>
         <reportElement x="738" y="21" width="38" height="30" uuid="e0567a18-8d1d-4e04-9658-0eb2fb648f2f"/>
         <textElement textAlignment="Right" verticalAlignment="Bottom"/>
-        <textFieldExpression><![CDATA["Page " + $V{PAGE_NUMBER}]]></textFieldExpression>
+        <textFieldExpression><![CDATA[$R{page} + " " + $V{PAGE_NUMBER}]]></textFieldExpression>
       </textField>
       <textField evaluationTime="Report">
         <reportElement x="776" y="21" width="22" height="30" uuid="4574386a-cbc9-4529-896b-c402fb4236c1"/>
         <textElement verticalAlignment="Bottom"/>
         <textFieldExpression><![CDATA[" / " + $V{PAGE_NUMBER}]]></textFieldExpression>
       </textField>
     </band>
```

## Comparing `c2cgeoportal_geoportal/scaffolds/create/print/print-apps/+package+/A4_Landscape.jrxml` & `c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/print/print-apps/{{cookiecutter.package}}/A4_Landscape.jrxml`

 * *Files 2% similar despite different names*

### Comparing `c2cgeoportal_geoportal/scaffolds/create/print/print-apps/+package+/A4_Landscape.jrxml` & `c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/print/print-apps/{{cookiecutter.package}}/A4_Landscape.jrxml`

```diff
@@ -34,15 +34,15 @@
           <property name="local_mesure_unitheight" value="pixel"/>
           <property name="com.jaspersoft.studio.unit.height" value="px"/>
         </reportElement>
         <textElement textAlignment="Right">
           <font size="8"/>
         </textElement>
         <textFieldExpression><![CDATA[
-					"Le " + java.time.ZonedDateTime.now().format(
+					$R{date_pre} + " " + java.time.ZonedDateTime.now().format(
 						java.time.format.DateTimeFormatter.
 						ofPattern("EEEE dd MMMM yyyy HH:mm").
 						withLocale($P{REPORT_LOCALE}).
 						withZone(java.time.ZoneId.of($P{timezone}))
 					)
 				]]></textFieldExpression>
       </textField>
@@ -137,21 +137,21 @@
           <printWhenExpression><![CDATA[$P{debug}]]></printWhenExpression>
         </reportElement>
         <textElement textAlignment="Right">
           <font size="6"/>
         </textElement>
         <text><![CDATA[Detail band 3]]></text>
       </staticText>
-      <staticText>
+      <textField>
         <reportElement x="0" y="1" width="460" height="20" forecolor="#424242" uuid="385742e7-a286-4456-b687-395a1a540023"/>
         <textElement>
           <font size="16" isBold="true"/>
         </textElement>
-        <text><![CDATA[LGENDE]]></text>
-      </staticText>
+        <textFieldExpression><![CDATA[$R{legend}]]></textFieldExpression>
+      </textField>
       <subreport>
         <reportElement stretchType="RelativeToTallestObject" x="0" y="26" width="580" height="56" uuid="6a01e0f0-7ebb-40f6-97eb-2979e6fff149"/>
         <dataSourceExpression><![CDATA[$P{legendDataSource}]]></dataSourceExpression>
         <subreportExpression><![CDATA[$P{legendSubReport}]]></subreportExpression>
       </subreport>
     </band>
   </detail>
@@ -175,21 +175,21 @@
           <font size="6"/>
         </textElement>
         <text><![CDATA[Pied de page, sur chaque page]]></text>
       </staticText>
       <textField>
         <reportElement x="741" y="21" width="38" height="30" uuid="b2c857a3-3a9d-42ec-8d90-7d315106ff48"/>
         <textElement textAlignment="Right" verticalAlignment="Bottom"/>
-        <textFieldExpression><![CDATA["Page " + $V{PAGE_NUMBER}]]></textFieldExpression>
+        <textFieldExpression><![CDATA[$R{page} + " " + $V{PAGE_NUMBER}]]></textFieldExpression>
       </textField>
       <textField evaluationTime="Report">
         <reportElement x="779" y="21" width="22" height="30" uuid="8202adcc-191c-4c6c-9bf4-aba39ca0c12a"/>
         <textElement verticalAlignment="Bottom"/>
         <textFieldExpression><![CDATA[" / " + $V{PAGE_NUMBER}]]></textFieldExpression>
       </textField>
-      <staticText>
+      <textField>
         <reportElement x="0" y="1" width="300" height="14" uuid="dc102ea9-973f-4717-a872-0d24d4de1e17"/>
-        <text><![CDATA[Dvelopp par Camptocamp SA, info@camptocamp.com]]></text>
-      </staticText>
+        <textFieldExpression><![CDATA[$R{info}]]></textFieldExpression>
+      </textField>
     </band>
   </pageFooter>
 </jasperReport>
```

## Comparing `c2cgeoportal_geoportal/scaffolds/create/print/print-apps/+package+/A4_Portrait.jrxml` & `c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/print/print-apps/{{cookiecutter.package}}/A4_Portrait.jrxml`

 * *Files 3% similar despite different names*

### Comparing `c2cgeoportal_geoportal/scaffolds/create/print/print-apps/+package+/A4_Portrait.jrxml` & `c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/print/print-apps/{{cookiecutter.package}}/A4_Portrait.jrxml`

```diff
@@ -35,15 +35,15 @@
       </textField>
       <textField>
         <reportElement x="300" y="0" width="255" height="20"/>
         <textElement textAlignment="Right">
           <font size="8"/>
         </textElement>
         <textFieldExpression><![CDATA[
-					"Le " + java.time.ZonedDateTime.now().format(
+					$R{date_pre} + " " + java.time.ZonedDateTime.now().format(
 						java.time.format.DateTimeFormatter.
 						ofPattern("EEEE dd MMMM yyyy HH:mm").
 						withLocale($P{REPORT_LOCALE}).
 						withZone(java.time.ZoneId.of($P{timezone}))
 					)
 				]]></textFieldExpression>
       </textField>
@@ -114,21 +114,21 @@
           <printWhenExpression><![CDATA[$P{debug}]]></printWhenExpression>
         </reportElement>
         <textElement textAlignment="Right">
           <font size="6"/>
         </textElement>
         <text><![CDATA[Detail band 3]]></text>
       </staticText>
-      <staticText>
+      <textField>
         <reportElement x="0" y="2" width="460" height="20" forecolor="#424242"/>
         <textElement>
           <font size="16" isBold="true"/>
         </textElement>
-        <text><![CDATA[LGENDE]]></text>
-      </staticText>
+        <textFieldExpression><![CDATA[$R{legend}]]></textFieldExpression>
+      </textField>
       <subreport>
         <reportElement stretchType="RelativeToTallestObject" x="0" y="26" width="255" height="56"/>
         <dataSourceExpression><![CDATA[$P{legendDataSource}]]></dataSourceExpression>
         <subreportExpression><![CDATA[$P{legendSubReport}]]></subreportExpression>
       </subreport>
     </band>
   </detail>
@@ -142,22 +142,22 @@
           <printWhenExpression><![CDATA[$P{debug}]]></printWhenExpression>
         </reportElement>
         <textElement textAlignment="Right">
           <font size="6"/>
         </textElement>
         <text><![CDATA[Pied de page, sur chaque page]]></text>
       </staticText>
-      <staticText>
+      <textField>
         <reportElement x="0" y="1" width="300" height="14"/>
-        <text><![CDATA[Dvelopp par Camptocamp SA, info@camptocamp.com]]></text>
-      </staticText>
+        <textFieldExpression><![CDATA[$R{info}]]></textFieldExpression>
+      </textField>
       <textField>
         <reportElement x="496" y="21" width="38" height="30"/>
         <textElement textAlignment="Right" verticalAlignment="Bottom"/>
-        <textFieldExpression><![CDATA["Page " + $V{PAGE_NUMBER}]]></textFieldExpression>
+        <textFieldExpression><![CDATA[$R{page} + " " + $V{PAGE_NUMBER}]]></textFieldExpression>
       </textField>
       <textField evaluationTime="Report">
         <reportElement x="534" y="21" width="22" height="30"/>
         <textElement verticalAlignment="Bottom"/>
         <textFieldExpression><![CDATA[" / " + $V{PAGE_NUMBER}]]></textFieldExpression>
       </textField>
     </band>
```

## Comparing `c2cgeoportal_geoportal/scaffolds/create/print/print-apps/+package+/config.yaml` & `c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/print/print-apps/{{cookiecutter.package}}/config.yaml.tmpl`

 * *Files 22% similar despite different names*

```diff
@@ -1,17 +1,18 @@
 ---
 
 throwErrorOnExtraParameters: true
 defaultToSvg: true
+resourceBundle: localisation
 
 allowedReferers: &allowedHosts
-  - !hostnameMatch
-    host: 
-  - !hostnameMatch
-    host: 
+  ${DISABLE_MUTUALIZED_PRINT}- !hostnameMatch
+  ${DISABLE_MUTUALIZED_PRINT}  host: ${MUTUALIZED_PRINT_URL}
+  ${DISABLE_LOCAL_PRINT}- !hostnameMatch
+  ${DISABLE_LOCAL_PRINT}  host: ${VISIBLE_WEB_HOST}
   - !localMatch {}
 
 templates:
   1 A4 portrait: !template
     reportTemplate: A4_Portrait.jrxml
     attributes:
       title:
@@ -54,31 +55,31 @@
           table: !table {}
 
     processors: &processors
       - !reportBuilder  # compile all reports in current directory
         directory: '.'
       - !configureHttpRequests &configureHttpRequests
         httpProcessors:
-          ## For internal print
-          - !mapUri
-            mapping:
-              https?://tiles(.*): "tiles$1"
-          - !mapUri
-            mapping:
-              https?://(.*): "$1"
-          - !forwardHeaders
-            matchers:
-              - !hostnameMatch
-                host: 
-                port: 
-          ## End for internal print
           - !forwardHeaders
             matchers: *allowedHosts
             headers:
               - Cookie
+          ## For internal print
+          ${DISABLE_LOCAL_PRINT}- !mapUri
+          ${DISABLE_LOCAL_PRINT}  mapping:
+          ${DISABLE_LOCAL_PRINT}    https?://${VISIBLE_WEB_HOST_RE_ESCAPED}${VISIBLE_ENTRY_POINT_RE_ESCAPED}tiles(.*): "${TILECLOUDCHAIN_INTERNAL_URL}${VISIBLE_ENTRY_POINT}tiles$1"
+          ${DISABLE_LOCAL_PRINT}- !mapUri
+          ${DISABLE_LOCAL_PRINT}  mapping:
+          ${DISABLE_LOCAL_PRINT}    https?://${VISIBLE_WEB_HOST_RE_ESCAPED}${VISIBLE_ENTRY_POINT_RE_ESCAPED}(.*): "${GEOPORTAL_INTERNAL_URL}${VISIBLE_ENTRY_POINT}$1"
+          ${DISABLE_LOCAL_PRINT}- !forwardHeaders
+          ${DISABLE_LOCAL_PRINT}  matchers:
+          ${DISABLE_LOCAL_PRINT}    - !hostnameMatch
+          ${DISABLE_LOCAL_PRINT}      host: ${GEOPORTAL_INTERNAL_HOST}
+          ${DISABLE_LOCAL_PRINT}      port: ${GEOPORTAL_INTERNAL_PORT}
+          ## End for internal print
           - !forwardHeaders
             headers:
               - Referer
               - X-Request-ID
               - Forwarded
           - !restrictUris
             matchers:
```

## Comparing `c2cgeoportal_geoportal/scaffolds/create/print/print-apps/+package+/legend.jrxml` & `c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/print/print-apps/{{cookiecutter.package}}/legend.jrxml`

 * *Files identical despite different names*

## Comparing `c2cgeoportal_geoportal/scaffolds/create/print/print-apps/+package+/logo.png` & `c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/print/print-apps/{{cookiecutter.package}}/logo.png`

 * *Files identical despite different names*

## Comparing `c2cgeoportal_geoportal/scaffolds/create/print/print-apps/+package+/north.svg` & `c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/print/print-apps/{{cookiecutter.package}}/north.svg`

 * *Files identical despite different names*

## Comparing `c2cgeoportal_geoportal/scaffolds/create/print/print-apps/+package+/results.jrxml` & `c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/print/print-apps/{{cookiecutter.package}}/results.jrxml`

 * *Files identical despite different names*

## Comparing `c2cgeoportal_geoportal/scaffolds/create/tilegeneration/config.yaml.tmpl_tmpl` & `c2cgeoportal_geoportal/scaffolds/create/{{cookiecutter.project}}/tilegeneration/config.yaml.tmpl`

 * *Files 17% similar despite different names*

```diff
@@ -1,185 +1,195 @@
+# yaml-language-server: $schema=https://raw.githubusercontent.com/camptocamp/tilecloud-chain/master/tilecloud_chain/schema.json
+
 grids:
-    # grid name, I just recommends to add the min resolution because it's common to not generate all the layers at the same resolution.
-    swissgrid_05:
-        # resolutions [required]
-        # Resolutions from eCH-0056 - WMTS-07
-        # https://www.ech.ch/dokument/473ea824-bbcd-43fa-ad0a-c7c84edfa1b8
-        resolutions: [4000, 2000, 1000, 500, 250, 100, 50, 20, 10, 5, 2.5, 1, 0.5, 0.25, 0.1, 0.05]
-        # bbox [required]
-        bbox: [2420000, 1030000, 2900000, 1350000]
-        # srs [required]
-        srs: EPSG:{{srid}}
+  # grid name, I just recommends to add the min resolution because it's common to not generate all the layers at the same resolution.
+  swissgrid_05:
+    # resolutions [required]
+    # Resolutions from eCH-0056 - WMTS-07
+    # https://www.ech.ch/dokument/473ea824-bbcd-43fa-ad0a-c7c84edfa1b8
+    resolutions: [4000, 2000, 1000, 500, 250, 100, 50, 20, 10, 5, 2.5, 1, 0.5, 0.25, 0.1, 0.05]
+    # bbox [required]
+    bbox: [2420000, 1030000, 2900000, 1350000]
+    # srs [required]
+    srs: EPSG:{{cookiecutter.srid}}
 
 caches:
-    local:
-        type: filesystem
-        folder: /var/sig/tiles
-        # for GetCapabilities
-        http_url: ${VISIBLE_WEB_PROTOCOL}://${VISIBLE_WEB_HOST}${VISIBLE_ENTRY_POINT}
-    s3:
-        type: s3
-        bucket: ${TILEGENERATION_S3_BUCKET}
-        folder: ''
-        # for GetCapabilities
-        http_url: ${VISIBLE_WEB_PROTOCOL}://${VISIBLE_WEB_HOST}${VISIBLE_ENTRY_POINT}
-        cache_control: 'public, max-age=14400'
-        host: ${AWS_S3_ENDPOINT}
+${DISABLE_LOCAL}  local:
+${DISABLE_LOCAL}    type: filesystem
+${DISABLE_LOCAL}    folder: /var/sig/tiles
+${DISABLE_LOCAL}    # for GetCapabilities
+${DISABLE_LOCAL}    http_url: ${VISIBLE_WEB_PROTOCOL}://${VISIBLE_WEB_HOST}${VISIBLE_ENTRY_POINT}
+${DISABLE_LOCAL}  s3:
+${DISABLE_LOCAL}    type: s3
+${DISABLE_LOCAL}    bucket: ${TILEGENERATION_S3_BUCKET}
+${DISABLE_LOCAL}    folder: ''
+${DISABLE_LOCAL}    # for GetCapabilities
+${DISABLE_LOCAL}    http_url: ${VISIBLE_WEB_PROTOCOL}://${VISIBLE_WEB_HOST}${VISIBLE_ENTRY_POINT}
+${DISABLE_LOCAL}    cache_control: 'public, max-age=14400'
+${DISABLE_LOCAL}    host: ${AWS_S3_ENDPOINT}
+  azure:
+    type: azure
+    container: ${TILEGENERATION_AZURE_CONTAINER}
+    folder: ''
+    # for GetCapabilities
+    http_url: ${VISIBLE_WEB_PROTOCOL}://${VISIBLE_WEB_HOST}${VISIBLE_ENTRY_POINT}
+    cache_control: 'public, max-age=14400'
 
 # this defines some defaults values for all the layers
 defaults:
-    layer: &layer
-        type: wms
-        grid: swissgrid_05
-        # The minimum resolution to seed, useful to use with mapcache, optional.
-        # min_resolution_seed: 1
-        # the URL of the WMS server to used
-        url: ${MAPSERVER_URL}
-        # Set the headers to get the right virtual host, and don't get any cached result
-        headers:
-            Host: '${VISIBLE_WEB_HOST}'
-            Cache-Control: no-cache, no-store
-            Pragma: no-cache
-        # file name extension
-        extension: png
-        # legend file name extension
-        legend_extension: png
-        # the bbox there we want to generate tiles
-        #bbox: [493000, 114000, 586000, 204000]
-
-        # mime type used for the WMS request and the WMTS capabilities generation
-        mime_type: image/png
-        # mime type used for the WMS request and the WMTS legend image generation
-        legend_mime: image/png
-        wmts_style: default
-        # the WMTS dimensions definition [default to []]
-        #dimensions:
-        #    -   name: DATE
-        #        # the default value for the WMTS capabilities
-        #        default: '2012'
-        #        # the generated values
-        #        generate: ['2012']
-        #        # all the available values in the WMTS capabilities
-        #        values: ['2012']
-        # the meta tiles definition [default to off]
-        meta: on
-        # the meta tiles size [default to 8]
-        meta_size: 5
-        # the meta tiles buffer [default to 128]
-        meta_buffer: 128
-        # connection an sql to get geometries (in column named geom) where we want to generate tiles
-        # Warn: too complex result can slow down the application
-#    connection: host=localhost port=5432 user=www-data password=www-data dbname=<db>
-#    geoms:
-#        -   sql: <column> AS geom FROM <table>
-        # size and hash used to detect empty tiles and metatiles [optional, default to None]
-        empty_metatile_detection:
-            size: 740
-            hash: 3237839c217b51b8a9644d596982f342f8041546
-        empty_tile_detection:
-            size: 921
-            hash: 1e3da153be87a493c4c71198366485f290cad43c
+  layer: &layer
+    type: wms
+    grid: swissgrid_05
+    # The minimum resolution to seed, useful to use with mapcache, optional.
+    # min_resolution_seed: 1
+    # the URL of the WMS server to used
+    url: ${MAPSERVER_URL}
+    # Set the headers to get the right virtual host, and don't get any cached result
+    headers:
+      Host: '${VISIBLE_WEB_HOST}'
+      Cache-Control: no-cache, no-store
+      Pragma: no-cache
+    # file name extension
+    extension: png
+    # legend file name extension
+    legend_extension: png
+    # the bbox there we want to generate tiles
+    #bbox: [493000, 114000, 586000, 204000]
+
+    # mime type used for the WMS request and the WMTS capabilities generation
+    mime_type: image/png
+    # mime type used for the WMS request and the WMTS legend image generation
+    legend_mime: image/png
+    wmts_style: default
+    # the WMTS dimensions definition [default is []]
+    #dimensions:
+    #    -   name: DATE
+    #        # the default value for the WMTS capabilities
+    #        default: '2012'
+    #        # the generated values
+    #        generate: ['2012']
+    #        # all the available values in the WMTS capabilities
+    #        values: ['2012']
+    # the meta tiles definition [default is false]
+    meta: true
+    # the meta tiles size [default is 8]
+    meta_size: 5
+    # the meta tiles buffer [default is 128]
+    meta_buffer: 128
+    # connection an sql to get geometries (in column named geom) where we want to generate tiles
+    # Warn: too complex result can slow down the application
+    #    connection: host=localhost port=5432 user=www-data password=www-data dbname=<db>
+    #    geoms:
+    #        -   sql: <column> AS geom FROM <table>
+    # size and hash used to detect empty tiles and metatiles [optional, default is None]
+    empty_metatile_detection:
+      size: 740
+      hash: 3237839c217b51b8a9644d596982f342f8041546
+    empty_tile_detection:
+      size: 921
+      hash: 1e3da153be87a493c4c71198366485f290cad43c
 
 layers:
-    plan:
-        <<: *layer
-        layers: plan
-    ortho:
-        <<: *layer
-        layers: ortho
-        extension: jpeg
-        mime_type: image/jpeg
-        # no buffer needed on rater sources
-        meta_buffer: 0
-        empty_metatile_detection:
-            size: 66163
-            hash: a9d16a1794586ef92129a2fb41a739451ed09914
-        empty_tile_detection:
-            size: 1651
-            hash: 2892fea0a474228f5d66a534b0b5231d923696da
+  plan:
+    <<: *layer
+    layers: plan
+  ortho:
+    <<: *layer
+    layers: ortho
+    extension: jpeg
+    mime_type: image/jpeg
+    # no buffer needed on rater sources
+    meta_buffer: 0
+    empty_metatile_detection:
+      size: 66163
+      hash: a9d16a1794586ef92129a2fb41a739451ed09914
+    empty_tile_detection:
+      size: 1651
+      hash: 2892fea0a474228f5d66a534b0b5231d923696da
 
 generation:
-    default_cache: s3
+  default_cache: s3
 
-redis:
-    socket_timeout: ${REDIS_TIMEOUT}
-    # For standalone version
-    url: 'redis://${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB}'
-    # For OpenShift version
-    # sentinels:
-    #   - - ${REDIS_HOST}
-    #     - ${REDIS_PORT}
-    # service_name: ${REDIS_SERVICENAME}
-    # db: ${REDIS_DB}
-
-# Not used if the previous redis section is not commented out
-sqs:
-    # The region where the SQS queue is
-    region: eu-west-1
-    # The SQS queue name, it should already exists
-    queue: '${TILEGENERATION_SQS_QUEUE}'
+${DISABLE_LOCAL}redis:
+${DISABLE_LOCAL}  socket_timeout: ${REDIS_TIMEOUT}
+${DISABLE_LOCAL}  # For standalone version
+${DISABLE_LOCAL}  url: 'redis://${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB}'
+${DISABLE_LOCAL}  # For Kubernetes version
+${DISABLE_LOCAL}  # sentinels:
+${DISABLE_LOCAL}  #   - - ${REDIS_HOST}
+${DISABLE_LOCAL}  #     - ${REDIS_PORT}
+${DISABLE_LOCAL}  # service_name: ${REDIS_SERVICENAME}
+${DISABLE_LOCAL}  # db: ${REDIS_DB}
 
 server:
-    wmts_path: tiles
-    static_path: tiles/static
-    admin_path: tiles/admin
-    expires: 8  # 8 hours
-    mapcache_internal: True
-    predefined_commands:
-    -   name: Generation all layers
-        command: generate_tiles --role=master
-    -   name: Generation layer plan
-        command: generate_tiles --role=master --layer=plan
-    -   name: Generation layer ortho
-        command: generate_tiles --role=master --layer=ortho
-    -   name: Generation OpenLayers example
-        command: generate_controller --openlayers
-    -   name: Generate the legend images
-        command: generate_controller --generate-legend-images
+${DISABLE_LOCAL}  wmts_path: tiles
+${DISABLE_LOCAL}  static_path: tiles/static
+${DISABLE_LOCAL}  admin_path: tiles/admin
+  expires: 8 # 8 hours
+  predefined_commands:
+    - name: Generation all layers
+      command: generate_tiles
+    - name: Generation layer plan
+      command: generate_tiles --layer=plan
+    - name: Generation layer ortho
+      command: generate_tiles --layer=ortho
+    - name: Generate the legend images
+      command: generate_controller --generate-legend-images
 
 process:
-    optipng_test:
-    -   cmd: optipng -o7 -simulate %(in)s
-    optipng:
-    -   cmd: optipng %(args)s -zc9 -zm8 -zs3 -f5 %(in)s
-        arg:
-            default: '-q'
-            quiet: '-q'
-    jpegoptim:
-    -   cmd: jpegoptim %(args)s --strip-all --all-normal -m 90 %(in)s
-        arg:
-            default: '-q'
-            quiet: '-q'
+  optipng_test:
+    - cmd: optipng -o7 -simulate %(in)s
+  optipng:
+    - cmd: optipng %(args)s -zc9 -zm8 -zs3 -f5 %(in)s
+      arg:
+        default: '-q'
+        quiet: '-q'
+  jpegoptim:
+    - cmd: jpegoptim %(args)s --strip-all --all-normal -m 90 %(in)s
+      arg:
+        default: '-q'
+        quiet: '-q'
 
 openlayers:
-    # srs, center_x, center_y [required]
-    srs: EPSG:{{srid}}
-    center_x: 2600000
-    center_y: 1200000
+  srs: EPSG:{{cookiecutter.srid}}
+  center_x: 2600000
+  center_y: 1200000
+  # The proj4js definition, get it from https://epsg.io/
+  # For EPSG:2056
+  proj4js_def: |
+    +proj=somerc
+    +lat_0=46.95240555555556
+    +lon_0=7.439583333333333
+    +k_0=1
+    +x_0=2600000
+    +y_0=1200000
+    +ellps=bessel
+    +towgs84=674.374,15.056,405.346,0,0,0,0
+    +units=m +no_defs
 
 metadata:
-    title: Some title
-    abstract: Some abstract
-    servicetype: OGC WMTS
-    keywords:
+  title: Some title
+  abstract: Some abstract
+  servicetype: OGC WMTS
+  keywords:
     - some
     - keywords
-    fees: None
-    access_constraints: None
+  fees: None
+  access_constraints: None
 
 provider:
-    name: The provider name
-    url: The provider URL
-    contact:
-        name: The contact name
-        position: The position name
-        info:
-            phone:
-                voice: +41 11 222 33 44
-                fax: +41 11 222 33 44
-            address:
-                delivery: Address delivery
-                city: Berne
-                area: BE
-                postal_code: 3000
-                country: Switzerland
-                email: info@example.com
+  name: The provider name
+  url: The provider URL
+  contact:
+    name: The contact name
+    position: The position name
+    info:
+      phone:
+        voice: +41 11 222 33 44
+        fax: +41 11 222 33 44
+      address:
+        delivery: Address delivery
+        city: Berne
+        area: BE
+        postal_code: 3000
+        country: Switzerland
+        email: info@example.com
```

### html2text {}

```diff
@@ -1,31 +1,40 @@
-grids: # grid name, I just recommends to add the min resolution because it's
-common to not generate all the layers at the same resolution. swissgrid_05: #
-resolutions [required] # Resolutions from eCH-0056 - WMTS-07 # https://
-www.ech.ch/dokument/473ea824-bbcd-43fa-ad0a-c7c84edfa1b8 resolutions: [4000,
-2000, 1000, 500, 250, 100, 50, 20, 10, 5, 2.5, 1, 0.5, 0.25, 0.1, 0.05] # bbox
-[required] bbox: [2420000, 1030000, 2900000, 1350000] # srs [required] srs:
-EPSG:{{srid}} caches: local: type: filesystem folder: /var/sig/tiles # for
-GetCapabilities http_url: ${VISIBLE_WEB_PROTOCOL}://${VISIBLE_WEB_HOST}$
-{VISIBLE_ENTRY_POINT} s3: type: s3 bucket: ${TILEGENERATION_S3_BUCKET} folder:
-'' # for GetCapabilities http_url: ${VISIBLE_WEB_PROTOCOL}://$
-{VISIBLE_WEB_HOST}${VISIBLE_ENTRY_POINT} cache_control: 'public, max-age=14400'
-host: ${AWS_S3_ENDPOINT} # this defines some defaults values for all the layers
-defaults: layer: &layer type: wms grid: swissgrid_05 # The minimum resolution
-to seed, useful to use with mapcache, optional. # min_resolution_seed: 1 # the
-URL of the WMS server to used url: ${MAPSERVER_URL} # Set the headers to get
-the right virtual host, and don't get any cached result headers: Host: '$
-{VISIBLE_WEB_HOST}' Cache-Control: no-cache, no-store Pragma: no-cache # file
-name extension extension: png # legend file name extension legend_extension:
-png # the bbox there we want to generate tiles #bbox: [493000, 114000, 586000,
-204000] # mime type used for the WMS request and the WMTS capabilities
-generation mime_type: image/png # mime type used for the WMS request and the
-WMTS legend image generation legend_mime: image/png wmts_style: default # the
-WMTS dimensions definition [default to []] #dimensions: # - name: DATE # # the
-default value for the WMTS capabilities # default: '2012' # # the generated
-values # generate: ['2012'] # # all the available values in the WMTS
-capabilities # values: ['2012'] # the meta tiles definition [default to off]
-meta: on # the meta tiles size [default to 8] meta_size: 5 # the meta tiles
-buffer [default to 128] meta_buffer: 128 # connection an sql to get geometries
-(in column named geom) where we want to generate tiles # Warn: too complex
-result can slow down the application # connection: host=localhost port=5432
-user=www-data password=www-data dbname= # geoms: # - sql: AS geom FROM
+# yaml-language-server: $schema=https://raw.githubusercontent.com/camptocamp/
+tilecloud-chain/master/tilecloud_chain/schema.json grids: # grid name, I just
+recommends to add the min resolution because it's common to not generate all
+the layers at the same resolution. swissgrid_05: # resolutions [required] #
+Resolutions from eCH-0056 - WMTS-07 # https://www.ech.ch/dokument/473ea824-
+bbcd-43fa-ad0a-c7c84edfa1b8 resolutions: [4000, 2000, 1000, 500, 250, 100, 50,
+20, 10, 5, 2.5, 1, 0.5, 0.25, 0.1, 0.05] # bbox [required] bbox: [2420000,
+1030000, 2900000, 1350000] # srs [required] srs: EPSG:{{cookiecutter.srid}}
+caches: ${DISABLE_LOCAL} local: ${DISABLE_LOCAL} type: filesystem $
+{DISABLE_LOCAL} folder: /var/sig/tiles ${DISABLE_LOCAL} # for GetCapabilities $
+{DISABLE_LOCAL} http_url: ${VISIBLE_WEB_PROTOCOL}://${VISIBLE_WEB_HOST}$
+{VISIBLE_ENTRY_POINT} ${DISABLE_LOCAL} s3: ${DISABLE_LOCAL} type: s3 $
+{DISABLE_LOCAL} bucket: ${TILEGENERATION_S3_BUCKET} ${DISABLE_LOCAL} folder: ''
+${DISABLE_LOCAL} # for GetCapabilities ${DISABLE_LOCAL} http_url: $
+{VISIBLE_WEB_PROTOCOL}://${VISIBLE_WEB_HOST}${VISIBLE_ENTRY_POINT} $
+{DISABLE_LOCAL} cache_control: 'public, max-age=14400' ${DISABLE_LOCAL} host: $
+{AWS_S3_ENDPOINT} azure: type: azure container: $
+{TILEGENERATION_AZURE_CONTAINER} folder: '' # for GetCapabilities http_url: $
+{VISIBLE_WEB_PROTOCOL}://${VISIBLE_WEB_HOST}${VISIBLE_ENTRY_POINT}
+cache_control: 'public, max-age=14400' # this defines some defaults values for
+all the layers defaults: layer: &layer type: wms grid: swissgrid_05 # The
+minimum resolution to seed, useful to use with mapcache, optional. #
+min_resolution_seed: 1 # the URL of the WMS server to used url: $
+{MAPSERVER_URL} # Set the headers to get the right virtual host, and don't get
+any cached result headers: Host: '${VISIBLE_WEB_HOST}' Cache-Control: no-cache,
+no-store Pragma: no-cache # file name extension extension: png # legend file
+name extension legend_extension: png # the bbox there we want to generate tiles
+#bbox: [493000, 114000, 586000, 204000] # mime type used for the WMS request
+and the WMTS capabilities generation mime_type: image/png # mime type used for
+the WMS request and the WMTS legend image generation legend_mime: image/png
+wmts_style: default # the WMTS dimensions definition [default is []]
+#dimensions: # - name: DATE # # the default value for the WMTS capabilities #
+default: '2012' # # the generated values # generate: ['2012'] # # all the
+available values in the WMTS capabilities # values: ['2012'] # the meta tiles
+definition [default is false] meta: true # the meta tiles size [default is 8]
+meta_size: 5 # the meta tiles buffer [default is 128] meta_buffer: 128 #
+connection an sql to get geometries (in column named geom) where we want to
+generate tiles # Warn: too complex result can slow down the application #
+connection: host=localhost port=5432 user=www-data password=www-data dbname= #
+geoms: # - sql: AS geom FROM
```

## Comparing `c2cgeoportal_geoportal/scaffolds/update/geoportal/CONST_Makefile_tmpl` & `c2cgeoportal_geoportal/scaffolds/advance_update/{{cookiecutter.project}}/geoportal/CONST_Makefile`

 * *Files 6% similar despite different names*

```diff
@@ -1,8 +1,8 @@
-export PACKAGE = {{package}}
+export PACKAGE = {{cookiecutter.package}}
 
 TEMPLATE_EXCLUDE += $(PACKAGE)_geoportal/static/lib
 FIND_OPTS = $(foreach ELEM, $(TEMPLATE_EXCLUDE),-path ./$(ELEM) -prune -o) -type f
 
 ifneq ($(NGEO_INTERFACES), "")
 DEFAULT_WEB_RULE += $(NGEO_OUTPUT_FILES)
 endif
@@ -72,15 +72,15 @@
 # Server localisation
 
 PO_FILES = $(addprefix $(PACKAGE)_geoportal/locale/, $(addsuffix /LC_MESSAGES/$(PACKAGE)_geoportal-server.po, $(LANGUAGES)))
 
 .INTERMEDIATE: $(PACKAGE)_geoportal/locale/$(PACKAGE)_geoportal-server.pot
 $(PACKAGE)_geoportal/locale/$(PACKAGE)_geoportal-server.pot: lingua-server.cfg $(SRC_FILES)
 	mkdir --parent $(dir $@)
-	[ -z "$(SRC_FILES)" ] || pot-create --config $< --keyword _ --output $@ $(SRC_FILES)
+	[ -z "$(SRC_FILES)" ] || pot-create --width=110 --config=$< --keyword=_ --output=$@ $(SRC_FILES)
 
 .PRECIOUS: $(PACKAGE)_geoportal/locale/%/LC_MESSAGES/$(PACKAGE)_geoportal-server.po
 $(PACKAGE)_geoportal/locale/%/LC_MESSAGES/$(PACKAGE)_geoportal-server.po: \
 		$(PACKAGE)_geoportal/locale/$(PACKAGE)_geoportal-server.pot
 	mkdir --parent $(dir $@)
 	[ ! -f $< ] || [ -f $@ ] || msginit --no-translator --input=$< --output-file=$@ -l $*
 	touch --no-create $@
@@ -89,15 +89,15 @@
 	chown $(USER_ID):$(GROUP_ID) $@
 
 .PHONY: update-server-po
 update-server-po: $(PO_FILES)
 
 .PHONY: update-client-po
 update-client-po:
-	cd .. && update-po $(USER_ID) $(GROUP_ID) $(LANGUAGES)
+	cd .. && SUFFIX= update-po $(USER_ID) $(GROUP_ID) $(LANGUAGES)
 
 .PHONY: update-po
 update-po: update-server-po update-client-po
 
 # ngeo
 
 .PHONY: build-ngeo
@@ -118,18 +118,14 @@
 
 apps: webpack.apps.js
 	rm --force $(addprefix $(APP_OUTPUT_DIR)/, $(addsuffix .*, $(NGEO_INTERFACES)))
 	webpack $(WEBPACK_ARGS)
 	for interface in $(NGEO_INTERFACES); \
 	do \
 		mv $(APP_OUTPUT_DIR)/$${interface}.html $(APP_OUTPUT_DIR)/$${interface}.html.tmpl; \
-		ls -1 $(APP_OUTPUT_DIR)/$${interface}.*.css|while read file; \
-		do \
-			mv $${file} $${file}.tmpl; \
-		done; \
 	done
 
 # API
 
 .PHONY: build-api
 build-api: $(NGEO_API_OUTPUT_FILES)
```

## Comparing `c2cgeoportal_geoportal/scaffolds/update/geoportal/CONST_config-schema.yaml` & `c2cgeoportal_geoportal/scaffolds/update/{{cookiecutter.project}}/geoportal/CONST_config-schema.yaml`

 * *Files 2% similar despite different names*

```diff
@@ -112,14 +112,17 @@
                 type: str
               default:
                 type: bool
                 default: False
               type:
                 type: str
                 default: ngeo
+              layout:
+                type: str
+                default: ngeo
       interfaces_config:
         required: True
         type: map
         mapping:
           regex;.+:
             type: map
             mapping:
@@ -171,14 +174,16 @@
                     type: map
                     mapping:
                       name:
                         type: str
                         required: True
                       append:
                         type: str
+              lang_urls_suffix:
+                type: str
               redirect_interface:
                 type: str
               do_redirect:
                 type: bool
       authentication:
         type: map
         required: false
@@ -238,14 +243,17 @@
                   - type: str
               access_control_max_age:
                 required: True
                 type: scalar
               cache_control_max_age:
                 required: True
                 type: scalar
+              cache_control_max_age_nocache:
+                required: True
+                type: scalar
               headers:
                 type: map
                 mapping:
                   regex;.+:
                     type: str
           index: *header
           dynamic: *header
@@ -256,14 +264,15 @@
           fulltextsearch: *header
           mapserver: *header
           tinyows: *header
           layers: *header
           print: *header
           profile: *header
           raster: *header
+          vector_tiles: *header
           shortener: *header
           error: *header
 
       urllogin:
         type: map
         required: True
         mapping:
@@ -350,14 +359,20 @@
                     type: str
                   regex:
                     type: str
                   error_message:
                     type: str
                   translate:
                     type: bool
+                  description:
+                    type: str
+                  relevant_for:
+                    type: seq
+                    sequence:
+                      - type: str
           available_functionalities:
             type: seq
             required: True
             sequence:
               - type: map
                 mapping:
                   name:
@@ -367,14 +382,20 @@
                     type: str
                   regex:
                     type: str
                   error_message:
                     type: str
                   single:
                     type: bool
+                  description:
+                    type: str
+                  relevant_for:
+                    type: seq
+                    sequence:
+                      - type: str
           exclude_pages:
             type: seq
             sequence:
               - type: str
           include_pages:
             type: seq
             sequence:
@@ -464,14 +485,16 @@
       api:
         type: map
         required: True
         mapping:
           ogc_server:
             type: str
             required: True
+          name:
+            type: str
       fulltextsearch:
         type: map
         required: True
         mapping:
           defaultlimit:
             type: int
             required: True
@@ -519,25 +542,33 @@
       servers:
         <<: *free_dict
         required: True
       host_forward_host:
         type: seq
         sequence:
           - type: str
+      headers_whitelist:
+        type: seq
+        sequence:
+          - type: str
+      headers_blacklist:
+        type: seq
+        sequence:
+          - type: str
       raster:
         <<: *free_dict
         required: True
       shortener:
         type: map
         required: True
         mapping:
           <<: *send_email
           base_url:
             type: str
-            required: True
+            required: False
           allowed_hosts:
             type: seq
             sequence:
               - type: str
           length:
             type: scalar
       hide_capabilities:
@@ -554,15 +585,15 @@
               regex;(.+):
                 type: str
           allowed_headers:
             type: seq
             required: True
             sequence:
               - type: str
-                unique: yes
+                unique: True
       print_url:
         type: str
         required: True
       pdfreport:
         type: map
         mapping:
           print_url:
@@ -783,7 +814,21 @@
             type: scalar
           raster_data:
             required: True
             type: scalar
           total_python_object_memory:
             required: True
             type: scalar
+      vector_tiles:
+        type: map
+        mapping:
+          srid:
+            type: int
+          extent:
+            type: seq
+            sequence:
+              - type: scalar
+          resolutions:
+            type: seq
+            sequence:
+              - type: scalar
+      i18next: *free_dict
```

## Comparing `c2cgeoportal_geoportal/scaffolds/update/geoportal/CONST_vars.yaml_tmpl` & `c2cgeoportal_geoportal/scaffolds/update/{{cookiecutter.project}}/geoportal/CONST_vars.yaml`

 * *Files 23% similar despite different names*

```diff
@@ -1,2073 +1,2856 @@
 00000000: 2d2d 2d0a 7661 7273 3a0a 2020 2320 5468  ---.vars:.  # Th
 00000010: 6520 7061 636b 6167 6520 6e61 6d65 0a20  e package name. 
-00000020: 2070 6163 6b61 6765 3a20 277b 7b70 6163   package: '{{pac
-00000030: 6b61 6765 7d7d 270a 2020 6d61 696e 5f6f  kage}}'.  main_o
-00000040: 6763 5f73 6572 7665 723a 2073 6f75 7263  gc_server: sourc
-00000050: 6520 666f 7220 696d 6167 652f 706e 670a  e for image/png.
-00000060: 0a20 2073 7269 643a 2045 5053 473a 2d31  .  srid: EPSG:-1
-00000070: 0a0a 2020 2320 5371 6c61 6c63 6865 6d79  ..  # Sqlalchemy
-00000080: 2073 6368 656d 610a 2020 7363 6865 6d61   schema.  schema
-00000090: 3a20 277b 5047 5343 4845 4d41 7d27 0a20  : '{PGSCHEMA}'. 
-000000a0: 2023 2053 716c 616c 6368 656d 7920 7374   # Sqlalchemy st
-000000b0: 6174 6963 2073 6368 656d 610a 2020 7363  atic schema.  sc
-000000c0: 6865 6d61 5f73 7461 7469 633a 2027 7b50  hema_static: '{P
-000000d0: 4753 4348 454d 415f 5354 4154 4943 7d27  GSCHEMA_STATIC}'
-000000e0: 0a0a 2020 6462 7365 7373 696f 6e73 3a20  ..  dbsessions: 
-000000f0: 7b7d 0a0a 2020 656e 6162 6c65 5f61 646d  {}..  enable_adm
-00000100: 696e 5f69 6e74 6572 6661 6365 3a20 5472  in_interface: Tr
-00000110: 7565 0a0a 2020 2320 4461 7461 6261 7365  ue..  # Database
-00000120: 2069 6e66 6f72 6d61 7469 6f6e 0a20 2073   information.  s
-00000130: 716c 616c 6368 656d 793a 0a20 2020 2075  qlalchemy:.    u
-00000140: 726c 3a20 706f 7374 6772 6573 716c 3a2f  rl: postgresql:/
-00000150: 2f7b 5047 5553 4552 7d3a 7b50 4750 4153  /{PGUSER}:{PGPAS
-00000160: 5357 4f52 447d 407b 5047 484f 5354 7d3a  SWORD}@{PGHOST}:
-00000170: 7b50 4750 4f52 547d 2f7b 5047 4441 5441  {PGPORT}/{PGDATA
-00000180: 4241 5345 7d3f 7373 6c6d 6f64 653d 7b50  BASE}?sslmode={P
-00000190: 4753 534c 4d4f 4445 7d0a 2020 2020 706f  GSSLMODE}.    po
-000001a0: 6f6c 5f72 6563 7963 6c65 3a20 277b 5351  ol_recycle: '{SQ
-000001b0: 4c41 4c43 4845 4d59 5f50 4f4f 4c5f 5245  LALCHEMY_POOL_RE
-000001c0: 4359 434c 457d 270a 2020 2020 706f 6f6c  CYCLE}'.    pool
-000001d0: 5f73 697a 653a 2027 7b53 514c 414c 4348  _size: '{SQLALCH
-000001e0: 454d 595f 504f 4f4c 5f53 495a 457d 270a  EMY_POOL_SIZE}'.
-000001f0: 2020 2020 6d61 785f 6f76 6572 666c 6f77      max_overflow
-00000200: 3a20 277b 5351 4c41 4c43 4845 4d59 5f4d  : '{SQLALCHEMY_M
-00000210: 4158 5f4f 5645 5246 4c4f 577d 270a 2020  AX_OVERFLOW}'.  
-00000220: 2020 6578 6563 7574 656d 616e 795f 6d6f    executemany_mo
-00000230: 6465 3a20 6261 7463 680a 2020 7371 6c61  de: batch.  sqla
-00000240: 6c63 6865 6d79 5f73 6c61 7665 3a0a 2020  lchemy_slave:.  
-00000250: 2020 7572 6c3a 2070 6f73 7467 7265 7371    url: postgresq
-00000260: 6c3a 2f2f 7b50 4755 5345 527d 3a7b 5047  l://{PGUSER}:{PG
-00000270: 5041 5353 574f 5244 7d40 7b50 4748 4f53  PASSWORD}@{PGHOS
-00000280: 545f 534c 4156 457d 3a7b 5047 504f 5254  T_SLAVE}:{PGPORT
-00000290: 5f53 4c41 5645 7d2f 7b50 4744 4154 4142  _SLAVE}/{PGDATAB
-000002a0: 4153 457d 3f73 736c 6d6f 6465 3d7b 5047  ASE}?sslmode={PG
-000002b0: 5353 4c4d 4f44 457d 0a20 2020 2070 6f6f  SSLMODE}.    poo
-000002c0: 6c5f 7265 6379 636c 653a 2027 7b53 514c  l_recycle: '{SQL
-000002d0: 414c 4348 454d 595f 534c 4156 455f 504f  ALCHEMY_SLAVE_PO
-000002e0: 4f4c 5f52 4543 5943 4c45 7d27 0a20 2020  OL_RECYCLE}'.   
-000002f0: 2070 6f6f 6c5f 7369 7a65 3a20 277b 5351   pool_size: '{SQ
-00000300: 4c41 4c43 4845 4d59 5f53 4c41 5645 5f50  LALCHEMY_SLAVE_P
-00000310: 4f4f 4c5f 5349 5a45 7d27 0a20 2020 206d  OOL_SIZE}'.    m
-00000320: 6178 5f6f 7665 7266 6c6f 773a 2027 7b53  ax_overflow: '{S
-00000330: 514c 414c 4348 454d 595f 534c 4156 455f  QLALCHEMY_SLAVE_
-00000340: 4d41 585f 4f56 4552 464c 4f57 7d27 0a20  MAX_OVERFLOW}'. 
-00000350: 2020 2065 7865 6375 7465 6d61 6e79 5f6d     executemany_m
-00000360: 6f64 653a 2062 6174 6368 0a0a 2020 2320  ode: batch..  # 
-00000370: 5365 7373 696f 6e20 6261 636b 656e 640a  Session backend.
-00000380: 2020 7365 7373 696f 6e3a 0a20 2020 2074    session:.    t
-00000390: 7970 653a 2027 6578 743a 7265 6469 7327  ype: 'ext:redis'
-000003a0: 0a20 2020 2075 726c 3a20 2772 6564 6973  .    url: 'redis
-000003b0: 3a2f 2f7b 5245 4449 535f 484f 5354 7d3a  ://{REDIS_HOST}:
-000003c0: 7b52 4544 4953 5f50 4f52 547d 2f7b 5245  {REDIS_PORT}/{RE
-000003d0: 4449 535f 4442 7d27 0a0a 2020 2320 3130  DIS_DB}'..  # 10
-000003e0: 2064 6179 7320 6f66 2064 6566 6175 6c74   days of default
-000003f0: 2063 6163 6865 0a20 2064 6566 6175 6c74   cache.  default
-00000400: 5f6d 6178 5f61 6765 3a20 3836 3430 3030  _max_age: 864000
-00000410: 0a0a 2020 6175 7468 656e 7469 6361 7469  ..  authenticati
-00000420: 6f6e 3a0a 2020 2020 7477 6f5f 6661 6374  on:.    two_fact
-00000430: 6f72 3a20 6661 6c73 650a 2020 2020 7477  or: false.    tw
-00000440: 6f5f 6661 6374 6f72 5f69 7373 7565 725f  o_factor_issuer_
-00000450: 6e61 6d65 3a20 277b 7b70 726f 6a65 6374  name: '{{project
-00000460: 7d7d 270a 2020 2020 6f61 7574 6832 5f74  }}'.    oauth2_t
-00000470: 6f6b 656e 5f65 7870 6972 655f 6d69 6e75  oken_expire_minu
-00000480: 7465 733a 2036 300a 2020 2020 6f61 7574  tes: 60.    oaut
-00000490: 6832 5f61 7574 686f 7269 7a61 7469 6f6e  h2_authorization
-000004a0: 5f65 7870 6972 655f 6d69 6e75 7465 733a  _expire_minutes:
-000004b0: 2031 300a 2020 2020 6d61 785f 636f 6e73   10.    max_cons
-000004c0: 6563 7574 6976 655f 6661 696c 7572 6573  ecutive_failures
-000004d0: 3a20 3130 0a0a 2020 696e 7472 616e 6574  : 10..  intranet
-000004e0: 3a0a 2020 2020 6e65 7477 6f72 6b73 3a20  :.    networks: 
-000004f0: 5b5d 0a0a 2020 696e 7465 7266 6163 6573  []..  interfaces
-00000500: 5f63 6f6e 6669 673a 0a20 2020 2064 6566  _config:.    def
-00000510: 6175 6c74 3a0a 2020 2020 2020 636f 6e73  ault:.      cons
-00000520: 7461 6e74 733a 0a20 2020 2020 2020 2067  tants:.        g
-00000530: 6d66 5072 6f6a 6563 7469 6f6e 734f 7074  mfProjectionsOpt
-00000540: 696f 6e73 3a20 2670 726f 6a65 6374 696f  ions: &projectio
-00000550: 6e73 0a20 2020 2020 2020 2020 2027 4550  ns.          'EP
-00000560: 5347 3a32 3137 3831 273a 0a20 2020 2020  SG:21781':.     
-00000570: 2020 2020 2020 2064 6566 696e 6974 696f         definitio
-00000580: 6e3a 0a20 2020 2020 2020 2020 2020 2020  n:.             
-00000590: 202d 202b 7072 6f6a 3d73 6f6d 6572 630a   - +proj=somerc.
-000005a0: 2020 2020 2020 2020 2020 2020 2020 2d20                - 
-000005b0: 2b6c 6174 5f30 3d34 362e 3935 3234 3035  +lat_0=46.952405
-000005c0: 3535 3535 3535 3536 0a20 2020 2020 2020  55555556.       
-000005d0: 2020 2020 2020 202d 202b 6c6f 6e5f 303d         - +lon_0=
-000005e0: 372e 3433 3935 3833 3333 3333 3333 3333  7.43958333333333
-000005f0: 330a 2020 2020 2020 2020 2020 2020 2020  3.              
-00000600: 2d20 2b6b 5f30 3d31 0a20 2020 2020 2020  - +k_0=1.       
-00000610: 2020 2020 2020 202d 202b 785f 303d 3630         - +x_0=60
-00000620: 3030 3030 0a20 2020 2020 2020 2020 2020  0000.           
-00000630: 2020 202d 202b 795f 303d 3230 3030 3030     - +y_0=200000
-00000640: 0a20 2020 2020 2020 2020 2020 2020 202d  .              -
-00000650: 202b 656c 6c70 733d 6265 7373 656c 0a20   +ellps=bessel. 
-00000660: 2020 2020 2020 2020 2020 2020 202d 202b               - +
-00000670: 746f 7767 7338 343d 3637 342e 3337 342c  towgs84=674.374,
-00000680: 3135 2e30 3536 2c34 3035 2e33 3436 2c30  15.056,405.346,0
-00000690: 2c30 2c30 2c30 0a20 2020 2020 2020 2020  ,0,0,0.         
-000006a0: 2020 2020 202d 202b 756e 6974 733d 6d0a       - +units=m.
-000006b0: 2020 2020 2020 2020 2020 2020 2020 2d20                - 
-000006c0: 2b6e 6f5f 6465 6673 0a20 2020 2020 2020  +no_defs.       
-000006d0: 2020 2020 2065 7874 656e 743a 205b 3432       extent: [42
-000006e0: 3030 3030 2c20 3330 3030 302c 2039 3030  0000, 30000, 900
-000006f0: 3030 302c 2033 3530 3030 305d 0a20 2020  000, 350000].   
-00000700: 2020 2020 2020 2027 4550 5347 3a32 3035         'EPSG:205
-00000710: 3627 3a0a 2020 2020 2020 2020 2020 2020  6':.            
-00000720: 6465 6669 6e69 7469 6f6e 3a0a 2020 2020  definition:.    
-00000730: 2020 2020 2020 2020 2020 2d20 2b70 726f            - +pro
-00000740: 6a3d 736f 6d65 7263 0a20 2020 2020 2020  j=somerc.       
-00000750: 2020 2020 2020 202d 202b 6c61 745f 303d         - +lat_0=
-00000760: 3436 2e39 3532 3430 3535 3535 3535 3535  46.9524055555555
-00000770: 360a 2020 2020 2020 2020 2020 2020 2020  6.              
-00000780: 2d20 2b6c 6f6e 5f30 3d37 2e34 3339 3538  - +lon_0=7.43958
-00000790: 3333 3333 3333 3333 3333 0a20 2020 2020  3333333333.     
-000007a0: 2020 2020 2020 2020 202d 202b 6b5f 303d           - +k_0=
-000007b0: 310a 2020 2020 2020 2020 2020 2020 2020  1.              
-000007c0: 2d20 2b78 5f30 3d32 3630 3030 3030 0a20  - +x_0=2600000. 
-000007d0: 2020 2020 2020 2020 2020 2020 202d 202b               - +
-000007e0: 795f 303d 3132 3030 3030 300a 2020 2020  y_0=1200000.    
-000007f0: 2020 2020 2020 2020 2020 2d20 2b65 6c6c            - +ell
-00000800: 7073 3d62 6573 7365 6c0a 2020 2020 2020  ps=bessel.      
-00000810: 2020 2020 2020 2020 2d20 2b74 6f77 6773          - +towgs
-00000820: 3834 3d36 3734 2e33 3734 2c31 352e 3035  84=674.374,15.05
-00000830: 362c 3430 352e 3334 362c 302c 302c 302c  6,405.346,0,0,0,
-00000840: 300a 2020 2020 2020 2020 2020 2020 2020  0.              
-00000850: 2d20 2b75 6e69 7473 3d6d 0a20 2020 2020  - +units=m.     
-00000860: 2020 2020 2020 2020 202d 202b 6e6f 5f64           - +no_d
-00000870: 6566 730a 2020 2020 2020 2020 2020 2020  efs.            
-00000880: 6578 7465 6e74 3a20 5b32 3432 3030 3030  extent: [2420000
-00000890: 2c20 3130 3330 3030 302c 2032 3930 3030  , 1030000, 29000
-000008a0: 3030 2c20 3133 3530 3030 305d 0a20 2020  00, 1350000].   
-000008b0: 2020 2020 2073 656e 7472 794f 7074 696f       sentryOptio
-000008c0: 6e73 3a0a 2020 2020 2020 2020 2020 6473  ns:.          ds
-000008d0: 6e3a 2027 7b53 454e 5452 595f 5552 4c7d  n: '{SENTRY_URL}
-000008e0: 270a 2020 2020 2020 2020 2020 7265 6c65  '.          rele
-000008f0: 6173 653a 2027 7b53 454e 5452 595f 434c  ase: '{SENTRY_CL
-00000900: 4945 4e54 5f52 454c 4541 5345 7d27 0a20  IENT_RELEASE}'. 
-00000910: 2020 2020 2020 2020 2065 6e76 6972 6f6e           environ
-00000920: 6d65 6e74 3a20 277b 5345 4e54 5259 5f43  ment: '{SENTRY_C
-00000930: 4c49 454e 545f 454e 5649 524f 4e4d 454e  LIENT_ENVIRONMEN
-00000940: 547d 270a 2020 2020 2020 2020 2020 6174  T}'.          at
-00000950: 7461 6368 5374 6163 6b74 7261 6365 3a20  tachStacktrace: 
-00000960: 5472 7565 0a20 2020 2020 2020 2020 2074  True.          t
-00000970: 6167 733a 0a20 2020 2020 2020 2020 2020  ags:.           
-00000980: 2073 6572 7669 6365 3a20 6a73 0a20 2020   service: js.   
-00000990: 2020 2020 2067 6d66 4175 7468 656e 7469       gmfAuthenti
-000009a0: 6361 7469 6f6e 436f 6e66 6967 3a20 7b7d  cationConfig: {}
-000009b0: 0a20 2020 2020 2020 206e 6765 6f57 6673  .        ngeoWfs
-000009c0: 5065 726d 616c 696e 6b4f 7074 696f 6e73  PermalinkOptions
-000009d0: 3a0a 2020 2020 2020 2020 2020 7766 7354  :.          wfsT
-000009e0: 7970 6573 3a20 5b5d 0a20 2020 2020 2020  ypes: [].       
-000009f0: 2020 2064 6566 6175 6c74 4665 6174 7572     defaultFeatur
-00000a00: 654e 533a 2068 7474 703a 2f2f 6d61 7073  eNS: http://maps
-00000a10: 6572 7665 722e 6769 732e 756d 6e2e 6564  erver.gis.umn.ed
-00000a20: 752f 6d61 7073 6572 7665 720a 2020 2020  u/mapserver.    
-00000a30: 2020 2020 2020 6465 6661 756c 7446 6561        defaultFea
-00000a40: 7475 7265 5072 6566 6978 3a20 6665 6174  turePrefix: feat
-00000a50: 7572 650a 2020 2020 2020 2020 2020 6372  ure.          cr
-00000a60: 6f73 7368 6169 7253 7479 6c65 3a0a 2020  osshairStyle:.  
-00000a70: 2020 2020 2020 2020 2020 2d20 7265 6775            - regu
-00000a80: 6c61 7253 6861 7065 3a0a 2020 2020 2020  larShape:.      
-00000a90: 2020 2020 2020 2020 2020 7374 726f 6b65            stroke
-00000aa0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00000ab0: 2020 2020 636f 6c6f 723a 2077 6869 7465      color: white
-00000ac0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00000ad0: 2020 2077 6964 7468 3a20 350a 2020 2020     width: 5.    
-00000ae0: 2020 2020 2020 2020 2020 2020 706f 696e              poin
-00000af0: 7473 3a20 340a 2020 2020 2020 2020 2020  ts: 4.          
-00000b00: 2020 2020 2020 7261 6469 7573 3a20 3130        radius: 10
-00000b10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00000b20: 2072 6164 6975 7332 3a20 300a 2020 2020   radius2: 0.    
-00000b30: 2020 2020 2020 2020 2020 2020 616e 676c              angl
-00000b40: 653a 2030 0a20 2020 2020 2020 2020 2020  e: 0.           
-00000b50: 202d 2072 6567 756c 6172 5368 6170 653a   - regularShape:
-00000b60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00000b70: 2073 7472 6f6b 653a 0a20 2020 2020 2020   stroke:.       
-00000b80: 2020 2020 2020 2020 2020 2063 6f6c 6f72             color
-00000b90: 3a20 7265 640a 2020 2020 2020 2020 2020  : red.          
-00000ba0: 2020 2020 2020 2020 7769 6474 683a 2032          width: 2
-00000bb0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00000bc0: 2070 6f69 6e74 733a 2034 0a20 2020 2020   points: 4.     
-00000bd0: 2020 2020 2020 2020 2020 2072 6164 6975             radiu
-00000be0: 733a 2031 300a 2020 2020 2020 2020 2020  s: 10.          
-00000bf0: 2020 2020 2020 7261 6469 7573 323a 2030        radius2: 0
-00000c00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00000c10: 2061 6e67 6c65 3a20 300a 2020 2020 2020   angle: 0.      
-00000c20: 2020 6e67 656f 5363 616c 6553 656c 6563    ngeoScaleSelec
-00000c30: 746f 724f 7074 696f 6e73 3a0a 2020 2020  torOptions:.    
-00000c40: 2020 2020 2020 7661 6c75 6573 3a20 5b31        values: [1
-00000c50: 3030 3030 3030 2c20 3530 3030 3030 2c20  000000, 500000, 
-00000c60: 3230 3030 3030 2c20 3130 3030 3030 2c20  200000, 100000, 
-00000c70: 3530 3030 302c 2032 3030 3030 2c20 3130  50000, 20000, 10
-00000c80: 3030 302c 2035 3030 302c 2032 3030 302c  000, 5000, 2000,
-00000c90: 2031 3030 302c 2035 3030 2c20 3230 305d   1000, 500, 200]
-00000ca0: 0a20 2020 2020 2020 2020 2064 726f 7075  .          dropu
-00000cb0: 703a 2054 7275 650a 2020 2020 2020 2020  p: True.        
-00000cc0: 6e67 656f 5374 7269 6e67 546f 4874 6d6c  ngeoStringToHtml
-00000cd0: 5265 706c 6163 656d 656e 7473 3a0a 2020  Replacements:.  
-00000ce0: 2020 2020 2020 2020 2320 4879 7065 726c          # Hyperl
-00000cf0: 696e 6b0a 2020 2020 2020 2020 2020 2d20  ink.          - 
-00000d00: 6578 7072 6573 7369 6f6e 3a20 5e28 6874  expression: ^(ht
-00000d10: 7470 733f 3a5c 2f5c 2f2e 2b29 240a 2020  tps?:\/\/.+)$.  
-00000d20: 2020 2020 2020 2020 2020 7461 6773 3a20            tags: 
-00000d30: 676d 0a20 2020 2020 2020 2020 2020 2074  gm.            t
-00000d40: 656d 706c 6174 653a 203c 6120 7461 7267  emplate: <a targ
-00000d50: 6574 3d22 5f62 6c61 6e6b 2220 6872 6566  et="_blank" href
-00000d60: 3d22 2431 223e 2431 3c2f 613e 0a20 2020  ="$1">$1</a>.   
-00000d70: 2020 2020 2020 2023 204d 6169 6c74 6f0a         # Mailto.
-00000d80: 2020 2020 2020 2020 2020 2d20 6578 7072            - expr
-00000d90: 6573 7369 6f6e 3a20 5e5b 412d 5a30 2d39  ession: ^[A-Z0-9
-00000da0: 2e5f 252b 2d5d 2b40 5b41 2d5a 302d 392e  ._%+-]+@[A-Z0-9.
-00000db0: 2d5d 2b5c 5c5c 5c2e 5b41 2d5a 5d7b 322c  -]+\\\\.[A-Z]{2,
-00000dc0: 7d24 0a20 2020 2020 2020 2020 2020 2074  }$.            t
-00000dd0: 6167 733a 2067 696d 0a20 2020 2020 2020  ags: gim.       
-00000de0: 2020 2020 2074 656d 706c 6174 653a 203c       template: <
-00000df0: 6120 6872 6566 3d22 6d61 696c 746f 3a24  a href="mailto:$
-00000e00: 3122 3e24 313c 2f61 3e0a 2020 2020 2020  1">$1</a>.      
-00000e10: 2020 6e67 656f 5469 6c65 7350 7265 6c6f    ngeoTilesPrelo
-00000e20: 6164 696e 674c 696d 6974 3a0a 2020 2020  adingLimit:.    
-00000e30: 2020 2020 6e67 656f 5573 6564 4b65 7952      ngeoUsedKeyR
-00000e40: 6567 6578 703a 0a20 2020 2020 2020 2020  egexp:.         
-00000e50: 202d 202e 2a0a 2020 2020 2020 2020 6e67   - .*.        ng
-00000e60: 656f 5175 6572 794f 7074 696f 6e73 3a0a  eoQueryOptions:.
-00000e70: 2020 2020 2020 2020 2020 6c69 6d69 743a            limit:
-00000e80: 2032 300a 2020 2020 2020 2020 6e67 656f   20.        ngeo
-00000e90: 4d65 6173 7572 6550 7265 6369 7369 6f6e  MeasurePrecision
-00000ea0: 3a20 330a 2020 2020 2020 2020 6e67 656f  : 3.        ngeo
-00000eb0: 4d65 6173 7572 6544 6563 696d 616c 733a  MeasureDecimals:
-00000ec0: 2030 0a20 2020 2020 2020 206e 6765 6f4d   0.        ngeoM
-00000ed0: 6561 7375 7265 5370 6865 7269 6361 6c3a  easureSpherical:
-00000ee0: 2046 616c 7365 0a20 2020 2020 2020 2067   False.        g
-00000ef0: 6d66 536e 6170 7069 6e67 436f 6e66 6967  mfSnappingConfig
-00000f00: 3a20 7b7d 0a20 2020 2020 2020 206e 6765  : {}.        nge
-00000f10: 6f53 6e61 7070 696e 6754 6f6c 6572 616e  oSnappingToleran
-00000f20: 6365 3a20 3230 0a20 2020 2020 2020 2067  ce: 20.        g
-00000f30: 6d66 4f62 6a65 6374 4564 6974 696e 6754  mfObjectEditingT
-00000f40: 6f6f 6c73 4f70 7469 6f6e 733a 207b 7d0a  oolsOptions: {}.
-00000f50: 2020 2020 2020 2020 676d 6654 7265 654d          gmfTreeM
-00000f60: 616e 6167 6572 4d6f 6465 466c 7573 683a  anagerModeFlush:
-00000f70: 2054 7275 650a 2020 2020 2020 2020 676d   True.        gm
-00000f80: 6654 6865 6d65 734f 7074 696f 6e73 3a20  fThemesOptions: 
-00000f90: 7b7d 0a20 2020 2020 2020 206e 6765 6f50  {}.        ngeoP
-00000fa0: 6f69 6e74 6669 6c74 6572 3a0a 2020 2020  ointfilter:.    
-00000fb0: 2020 2020 676d 6641 7574 6865 6e74 6963      gmfAuthentic
-00000fc0: 6174 696f 6e4e 6f52 656c 6f61 6452 6f6c  ationNoReloadRol
-00000fd0: 653a 0a20 2020 2020 2020 206e 6765 6f4e  e:.        ngeoN
-00000fe0: 6f6d 696e 6174 696d 5365 6172 6368 4465  ominatimSearchDe
-00000ff0: 6661 756c 7450 6172 616d 733a 207b 7d0a  faultParams: {}.
-00001000: 2020 2020 2020 2020 6e67 656f 4e6f 6d69          ngeoNomi
-00001010: 6e61 7469 6d55 726c 3a20 6874 7470 733a  natimUrl: https:
-00001020: 2f2f 6e6f 6d69 6e61 7469 6d2e 6f70 656e  //nominatim.open
-00001030: 7374 7265 6574 6d61 702e 6f72 672f 0a20  streetmap.org/. 
-00001040: 2020 2020 2020 206e 6765 6f43 7376 456e         ngeoCsvEn
-00001050: 636f 6469 6e67 3a20 7574 662d 380a 2020  coding: utf-8.  
-00001060: 2020 2020 2020 6e67 656f 4373 7645 7874        ngeoCsvExt
-00001070: 656e 7369 6f6e 3a20 2e63 7376 0a20 2020  ension: .csv.   
-00001080: 2020 2020 206e 6765 6f43 7376 496e 636c       ngeoCsvIncl
-00001090: 7564 6548 6561 6465 723a 2054 7275 650a  udeHeader: True.
-000010a0: 2020 2020 2020 2020 6e67 656f 4373 7651          ngeoCsvQ
-000010b0: 756f 7465 3a20 2722 270a 2020 2020 2020  uote: '"'.      
-000010c0: 2020 6e67 656f 4373 7653 6570 6172 6174    ngeoCsvSeparat
-000010d0: 6f72 3a20 272c 270a 2020 2020 2020 2020  or: ','.        
-000010e0: 676d 6643 7376 4669 6c65 6e61 6d65 3a20  gmfCsvFilename: 
-000010f0: 7175 6572 792d 7265 7375 6c74 732e 6373  query-results.cs
-00001100: 760a 2020 2020 2020 2020 676d 6644 6973  v.        gmfDis
-00001110: 706c 6179 5175 6572 7957 696e 646f 774f  playQueryWindowO
-00001120: 7074 696f 6e73 3a0a 2020 2020 2020 2020  ptions:.        
-00001130: 2020 6665 6174 7572 6553 7479 6c65 3a20    featureStyle: 
-00001140: 2666 6561 7475 7265 5374 796c 650a 2020  &featureStyle.  
-00001150: 2020 2020 2020 2020 2020 6669 6c6c 3a0a            fill:.
-00001160: 2020 2020 2020 2020 2020 2020 2020 636f                co
-00001170: 6c6f 723a 205b 3235 352c 2031 3730 2c20  lor: [255, 170, 
-00001180: 302c 2030 2e36 5d0a 2020 2020 2020 2020  0, 0.6].        
-00001190: 2020 2020 7374 726f 6b65 3a0a 2020 2020      stroke:.    
-000011a0: 2020 2020 2020 2020 2020 636f 6c6f 723a            color:
-000011b0: 205b 3235 352c 2031 3730 2c20 302c 2031   [255, 170, 0, 1
-000011c0: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
-000011d0: 7769 6474 683a 2032 0a20 2020 2020 2020  width: 2.       
-000011e0: 2020 2020 207a 496e 6465 783a 2031 300a       zIndex: 10.
-000011f0: 2020 2020 2020 2020 2020 2020 6369 7263              circ
-00001200: 6c65 3a0a 2020 2020 2020 2020 2020 2020  le:.            
-00001210: 2020 6669 6c6c 3a0a 2020 2020 2020 2020    fill:.        
-00001220: 2020 2020 2020 2020 636f 6c6f 723a 205b          color: [
-00001230: 3235 352c 2031 3730 2c20 302c 2030 2e36  255, 170, 0, 0.6
-00001240: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
-00001250: 7374 726f 6b65 3a0a 2020 2020 2020 2020  stroke:.        
-00001260: 2020 2020 2020 2020 636f 6c6f 723a 205b          color: [
-00001270: 3235 352c 2031 3730 2c20 302c 2031 5d0a  255, 170, 0, 1].
-00001280: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001290: 7769 6474 683a 2032 0a20 2020 2020 2020  width: 2.       
-000012a0: 2020 2020 2020 2072 6164 6975 733a 2035         radius: 5
-000012b0: 0a20 2020 2020 2020 2020 2073 656c 6563  .          selec
-000012c0: 7465 6446 6561 7475 7265 5374 796c 653a  tedFeatureStyle:
-000012d0: 2026 7365 6c65 6374 6564 4665 6174 7572   &selectedFeatur
-000012e0: 6553 7479 6c65 0a20 2020 2020 2020 2020  eStyle.         
-000012f0: 2020 2066 696c 6c3a 0a20 2020 2020 2020     fill:.       
-00001300: 2020 2020 2020 2063 6f6c 6f72 3a20 5b32         color: [2
-00001310: 3535 2c20 302c 2030 2c20 302e 365d 0a20  55, 0, 0, 0.6]. 
-00001320: 2020 2020 2020 2020 2020 2073 7472 6f6b             strok
-00001330: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00001340: 2063 6f6c 6f72 3a20 5b32 3535 2c20 302c   color: [255, 0,
-00001350: 2030 2c20 315d 0a20 2020 2020 2020 2020   0, 1].         
-00001360: 2020 2020 2077 6964 7468 3a20 320a 2020       width: 2.  
-00001370: 2020 2020 2020 2020 2020 7a49 6e64 6578            zIndex
-00001380: 3a20 3130 0a20 2020 2020 2020 2020 2020  : 10.           
-00001390: 2063 6972 636c 653a 0a20 2020 2020 2020   circle:.       
-000013a0: 2020 2020 2020 2066 696c 6c3a 0a20 2020         fill:.   
-000013b0: 2020 2020 2020 2020 2020 2020 2063 6f6c               col
-000013c0: 6f72 3a20 5b32 3535 2c20 302c 2030 2c20  or: [255, 0, 0, 
-000013d0: 302e 365d 0a20 2020 2020 2020 2020 2020  0.6].           
-000013e0: 2020 2073 7472 6f6b 653a 0a20 2020 2020     stroke:.     
-000013f0: 2020 2020 2020 2020 2020 2063 6f6c 6f72             color
-00001400: 3a20 5b32 3535 2c20 302c 2030 2c20 315d  : [255, 0, 0, 1]
-00001410: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00001420: 2077 6964 7468 3a20 320a 2020 2020 2020   width: 2.      
-00001430: 2020 2020 2020 2020 7261 6469 7573 3a20          radius: 
-00001440: 350a 2020 2020 2020 2020 676d 664c 6179  5.        gmfLay
-00001450: 6572 5472 6565 4f70 7469 6f6e 733a 0a20  erTreeOptions:. 
-00001460: 2020 2020 2020 2020 206f 7065 6e4c 696e           openLin
-00001470: 6b73 496e 4e65 7757 696e 646f 773a 2046  ksInNewWindow: F
-00001480: 616c 7365 0a20 2020 2020 2020 2020 2069  alse.          i
-00001490: 7345 7870 616e 6465 643a 2046 616c 7365  sExpanded: False
-000014a0: 0a20 2020 2020 2020 2067 6d66 4469 7363  .        gmfDisc
-000014b0: 6c61 696d 6572 4f70 7469 6f6e 733a 207b  laimerOptions: {
-000014c0: 7d0a 2020 2020 2020 2020 676d 6642 6163  }.        gmfBac
-000014d0: 6b67 726f 756e 644c 6179 6572 5365 6c65  kgroundLayerSele
-000014e0: 6374 6f72 4f70 7469 6f6e 733a 207b 7d0a  ctorOptions: {}.
-000014f0: 2020 2020 2020 2020 6465 6661 756c 7454          defaultT
-00001500: 6865 6d65 3a20 4465 6d6f 0a20 2020 2020  heme: Demo.     
-00001510: 2020 2064 6566 6175 6c74 4c61 6e67 3a20     defaultLang: 
-00001520: 656e 0a20 2020 2020 2020 2067 6d66 4f70  en.        gmfOp
-00001530: 7469 6f6e 733a 0a20 2020 2020 2020 2020  tions:.         
-00001540: 206d 6170 3a20 7b7d 0a20 2020 2020 2020   map: {}.       
-00001550: 2020 2076 6965 773a 0a20 2020 2020 2020     view:.       
-00001560: 2020 2020 2073 7269 643a 2027 7b73 7269       srid: '{sri
-00001570: 647d 270a 2020 2020 2020 2020 2020 2020  d}'.            
-00001580: 6365 6e74 6572 3a20 5b32 3630 3030 3030  center: [2600000
-00001590: 2c20 3132 3030 3030 305d 0a20 2020 2020  , 1200000].     
-000015a0: 2020 2020 2020 207a 6f6f 6d3a 2033 0a20         zoom: 3. 
-000015b0: 2020 2020 2020 2020 2020 2072 6573 6f6c             resol
-000015c0: 7574 696f 6e73 3a20 5b32 3530 2c20 3130  utions: [250, 10
-000015d0: 302c 2035 302c 2032 302c 2031 302c 2035  0, 50, 20, 10, 5
-000015e0: 2c20 322c 2031 2c20 302e 352c 2030 2e32  , 2, 1, 0.5, 0.2
-000015f0: 352c 2030 2e31 2c20 302e 3035 5d0a 2020  5, 0.1, 0.05].  
-00001600: 2020 2020 2020 2020 2020 6578 7465 6e74            extent
-00001610: 3a20 5b32 3432 3030 3030 2c20 3130 3330  : [2420000, 1030
-00001620: 3030 302c 2032 3930 3030 3030 2c20 3133  000, 2900000, 13
-00001630: 3530 3030 305d 0a20 2020 2020 2020 2067  50000].        g
-00001640: 6d66 5365 6172 6368 4f70 7469 6f6e 733a  mfSearchOptions:
-00001650: 0a20 2020 2020 2020 2020 2073 7479 6c65  .          style
-00001660: 733a 0a20 2020 2020 2020 2020 2020 2064  s:.            d
-00001670: 6566 6175 6c74 3a0a 2020 2020 2020 2020  efault:.        
-00001680: 2020 2020 2020 6669 6c6c 3a0a 2020 2020        fill:.    
-00001690: 2020 2020 2020 2020 2020 2020 636f 6c6f              colo
-000016a0: 723a 205b 3635 2c20 3133 342c 2032 3430  r: [65, 134, 240
-000016b0: 2c20 302e 355d 0a20 2020 2020 2020 2020  , 0.5].         
-000016c0: 2020 2020 2073 7472 6f6b 653a 0a20 2020       stroke:.   
-000016d0: 2020 2020 2020 2020 2020 2020 2063 6f6c               col
-000016e0: 6f72 3a20 5b36 352c 2031 3334 2c20 3234  or: [65, 134, 24
-000016f0: 302c 2031 5d0a 2020 2020 2020 2020 2020  0, 1].          
-00001700: 2020 2020 2020 7769 6474 683a 2032 0a20        width: 2. 
-00001710: 2020 2020 2020 2020 2020 2020 2063 6972               cir
-00001720: 636c 653a 0a20 2020 2020 2020 2020 2020  cle:.           
-00001730: 2020 2020 2066 696c 6c3a 0a20 2020 2020       fill:.     
-00001740: 2020 2020 2020 2020 2020 2020 2063 6f6c               col
-00001750: 6f72 3a20 5b36 352c 2031 3334 2c20 3234  or: [65, 134, 24
-00001760: 302c 2030 2e35 5d0a 2020 2020 2020 2020  0, 0.5].        
-00001770: 2020 2020 2020 2020 7374 726f 6b65 3a0a          stroke:.
-00001780: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001790: 2020 636f 6c6f 723a 205b 3635 2c20 3133    color: [65, 13
-000017a0: 342c 2032 3430 2c20 315d 0a20 2020 2020  4, 240, 1].     
-000017b0: 2020 2020 2020 2020 2020 2020 2077 6964               wid
-000017c0: 7468 3a20 320a 2020 2020 2020 2020 2020  th: 2.          
-000017d0: 2020 2020 2020 7261 6469 7573 3a20 350a        radius: 5.
-000017e0: 2020 2020 2020 2020 2020 2020 676d 6643              gmfC
-000017f0: 6f6f 7264 696e 6174 6573 4c61 7965 724e  oordinatesLayerN
-00001800: 616d 653a 0a20 2020 2020 2020 2020 2020  ame:.           
-00001810: 2020 2072 6567 756c 6172 5368 6170 653a     regularShape:
-00001820: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00001830: 2073 7472 6f6b 653a 0a20 2020 2020 2020   stroke:.       
-00001840: 2020 2020 2020 2020 2020 2063 6f6c 6f72             color
-00001850: 3a20 5b30 2c20 302c 2030 2c20 302e 375d  : [0, 0, 0, 0.7]
-00001860: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00001870: 2020 2077 6964 7468 3a20 320a 2020 2020     width: 2.    
-00001880: 2020 2020 2020 2020 2020 2020 706f 696e              poin
-00001890: 7473 3a20 340a 2020 2020 2020 2020 2020  ts: 4.          
-000018a0: 2020 2020 2020 7261 6469 7573 3a20 380a        radius: 8.
-000018b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000018c0: 7261 6469 7573 323a 2030 0a20 2020 2020  radius2: 0.     
-000018d0: 2020 2020 2020 2020 2020 2061 6e67 6c65             angle
-000018e0: 3a20 300a 2020 2020 2020 2020 2020 6461  : 0.          da
-000018f0: 7461 736f 7572 6365 733a 0a20 2020 2020  tasources:.     
-00001900: 2020 2020 2020 202d 206c 6162 656c 4b65         - labelKe
-00001910: 793a 206c 6162 656c 0a20 2020 2020 2020  y: label.       
-00001920: 2020 2020 2020 2067 726f 7570 4163 7469         groupActi
-00001930: 6f6e 733a 0a20 2020 2020 2020 2020 2020  ons:.           
-00001940: 2020 2020 202d 2061 6374 696f 6e3a 2061       - action: a
-00001950: 6464 5f74 6865 6d65 0a20 2020 2020 2020  dd_theme.       
-00001960: 2020 2020 2020 2020 2020 2074 6974 6c65             title
-00001970: 3a20 4164 6420 6120 7468 656d 650a 2020  : Add a theme.  
-00001980: 2020 2020 2020 2020 2020 2020 2020 2d20                - 
-00001990: 6163 7469 6f6e 3a20 6164 645f 6772 6f75  action: add_grou
-000019a0: 700a 2020 2020 2020 2020 2020 2020 2020  p.              
-000019b0: 2020 2020 7469 746c 653a 2041 6464 2061      title: Add a
-000019c0: 2073 7562 2074 6865 6d65 0a20 2020 2020   sub theme.     
-000019d0: 2020 2020 2020 2020 2020 202d 2061 6374             - act
-000019e0: 696f 6e3a 2061 6464 5f6c 6179 6572 0a20  ion: add_layer. 
-000019f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001a00: 2074 6974 6c65 3a20 4164 6420 6120 6c61   title: Add a la
-00001a10: 7965 720a 2020 2020 2020 2020 2020 2020  yer.            
-00001a20: 2020 7072 6f6a 6563 7469 6f6e 3a20 4550    projection: EP
-00001a30: 5347 3a7b 7372 6964 7d0a 2020 2020 2020  SG:{srid}.      
-00001a40: 2020 676d 6650 6572 6d61 6c69 6e6b 4f70    gmfPermalinkOp
-00001a50: 7469 6f6e 733a 0a20 2020 2020 2020 2020  tions:.         
-00001a60: 2063 726f 7373 6861 6972 5374 796c 653a   crosshairStyle:
-00001a70: 0a20 2020 2020 2020 2020 2063 726f 7373  .          cross
-00001a80: 6861 6972 456e 6162 6c65 6442 7944 6566  hairEnabledByDef
-00001a90: 6175 6c74 3a20 4661 6c73 650a 2020 2020  ault: False.    
-00001aa0: 2020 2020 2020 7573 654c 6f63 616c 5374        useLocalSt
-00001ab0: 6f72 6167 653a 2046 616c 7365 0a20 2020  orage: False.   
-00001ac0: 2020 2020 2020 2070 6f69 6e74 5265 6365         pointRece
-00001ad0: 6e74 6572 5a6f 6f6d 3a0a 2020 2020 2020  nterZoom:.      
-00001ae0: 2020 676d 6645 6c65 7661 7469 6f6e 4f70    gmfElevationOp
-00001af0: 7469 6f6e 733a 0a20 2020 2020 2020 2020  tions:.         
-00001b00: 206c 6179 6572 733a 205b 5d0a 2020 2020   layers: [].    
-00001b10: 2020 2020 2020 6c61 7965 7273 436f 6e66        layersConf
-00001b20: 6967 3a20 7b7d 0a20 2020 2020 2020 206e  ig: {}.        n
-00001b30: 6765 6f47 656f 6c6f 6361 7469 6f6e 4f70  geoGeolocationOp
-00001b40: 7469 6f6e 733a 0a20 2020 2020 2020 2020  tions:.         
-00001b50: 2070 6f73 6974 696f 6e46 6561 7475 7265   positionFeature
-00001b60: 5374 796c 653a 0a20 2020 2020 2020 2020  Style:.         
-00001b70: 2020 2063 6972 636c 653a 0a20 2020 2020     circle:.     
-00001b80: 2020 2020 2020 2020 2072 6164 6975 733a           radius:
-00001b90: 2036 0a20 2020 2020 2020 2020 2020 2020   6.             
-00001ba0: 2066 696c 6c3a 0a20 2020 2020 2020 2020   fill:.         
-00001bb0: 2020 2020 2020 2063 6f6c 6f72 3a20 7267         color: rg
-00001bc0: 6261 2832 3330 2c20 3130 302c 2031 3030  ba(230, 100, 100
-00001bd0: 2c20 3129 0a20 2020 2020 2020 2020 2020  , 1).           
-00001be0: 2020 2073 7472 6f6b 653a 0a20 2020 2020     stroke:.     
-00001bf0: 2020 2020 2020 2020 2020 2063 6f6c 6f72             color
-00001c00: 3a20 7267 6261 2832 3330 2c20 3430 2c20  : rgba(230, 40, 
-00001c10: 3430 2c20 3129 0a20 2020 2020 2020 2020  40, 1).         
-00001c20: 2020 2020 2020 2077 6964 7468 3a20 320a         width: 2.
-00001c30: 2020 2020 2020 2020 2020 6163 6375 7261            accura
-00001c40: 6379 4665 6174 7572 6553 7479 6c65 3a0a  cyFeatureStyle:.
-00001c50: 2020 2020 2020 2020 2020 2020 6669 6c6c              fill
-00001c60: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00001c70: 636f 6c6f 723a 2072 6762 6128 3130 302c  color: rgba(100,
-00001c80: 2031 3030 2c20 3233 302c 2030 2e33 290a   100, 230, 0.3).
-00001c90: 2020 2020 2020 2020 2020 2020 7374 726f              stro
-00001ca0: 6b65 3a0a 2020 2020 2020 2020 2020 2020  ke:.            
-00001cb0: 2020 636f 6c6f 723a 2072 6762 6128 3430    color: rgba(40
-00001cc0: 2c20 3430 2c20 3233 302c 2031 290a 2020  , 40, 230, 1).  
-00001cd0: 2020 2020 2020 2020 2020 2020 7769 6474              widt
-00001ce0: 683a 2032 0a20 2020 2020 2020 2020 207a  h: 2.          z
-00001cf0: 6f6f 6d3a 0a20 2020 2020 2020 2020 2061  oom:.          a
-00001d00: 7574 6f52 6f74 6174 653a 2046 616c 7365  utoRotate: False
-00001d10: 0a20 2020 2020 2064 796e 616d 6963 5f63  .      dynamic_c
-00001d20: 6f6e 7374 616e 7473 3a0a 2020 2020 2020  onstants:.      
-00001d30: 2020 696e 7465 7266 6163 653a 2069 6e74    interface: int
-00001d40: 6572 6661 6365 0a20 2020 2020 2020 2063  erface.        c
-00001d50: 6163 6865 5665 7273 696f 6e3a 2063 6163  acheVersion: cac
-00001d60: 6865 5f76 6572 7369 6f6e 0a20 2020 2020  he_version.     
-00001d70: 2020 206c 616e 6755 726c 733a 206c 616e     langUrls: lan
-00001d80: 675f 7572 6c73 0a20 2020 2020 2020 2067  g_urls.        g
-00001d90: 6d66 5477 6f46 6163 746f 7241 7574 683a  mfTwoFactorAuth:
-00001da0: 2074 776f 5f66 6163 746f 720a 2020 2020   two_factor.    
-00001db0: 2020 2020 676d 6653 6561 7263 6847 726f      gmfSearchGro
-00001dc0: 7570 733a 2066 756c 6c74 6578 7473 6561  ups: fulltextsea
-00001dd0: 7263 685f 6772 6f75 7073 0a20 2020 2020  rch_groups.     
-00001de0: 2073 7461 7469 633a 0a20 2020 2020 2020   static:.       
-00001df0: 2061 6e67 756c 6172 4c6f 6361 6c65 5363   angularLocaleSc
-00001e00: 7269 7074 3a0a 2020 2020 2020 2020 2020  ript:.          
-00001e10: 6e61 6d65 3a20 272f 6574 632f 7374 6174  name: '/etc/stat
-00001e20: 6963 2d6e 6765 6f2f 270a 2020 2020 2020  ic-ngeo/'.      
-00001e30: 2020 2020 6170 7065 6e64 3a20 616e 6775      append: angu
-00001e40: 6c61 722d 6c6f 6361 6c65 5f5c 7b5c 7b6c  lar-locale_\{\{l
-00001e50: 6f63 616c 655c 7d5c 7d2e 6a73 0a20 2020  ocale\}\}.js.   
-00001e60: 2020 2072 6f75 7465 733a 0a20 2020 2020     routes:.     
-00001e70: 2020 2063 7572 7265 6e74 496e 7465 7266     currentInterf
-00001e80: 6163 6555 726c 3a0a 2020 2020 2020 2020  aceUrl:.        
-00001e90: 2020 6375 7272 656e 7449 6e74 6572 6661    currentInterfa
-00001ea0: 6365 3a20 5472 7565 0a20 2020 2020 2020  ce: True.       
-00001eb0: 2061 7574 6865 6e74 6963 6174 696f 6e42   authenticationB
-00001ec0: 6173 6555 726c 3a0a 2020 2020 2020 2020  aseUrl:.        
-00001ed0: 2020 6e61 6d65 3a20 6261 7365 0a20 2020    name: base.   
-00001ee0: 2020 2020 2067 6d66 4c61 7965 7273 5572       gmfLayersUr
-00001ef0: 6c3a 0a20 2020 2020 2020 2020 206e 616d  l:.          nam
-00001f00: 653a 206c 6179 6572 735f 726f 6f74 0a20  e: layers_root. 
-00001f10: 2020 2020 2020 2067 6d66 5261 7374 6572         gmfRaster
-00001f20: 5572 6c3a 0a20 2020 2020 2020 2020 206e  Url:.          n
-00001f30: 616d 653a 2072 6173 7465 720a 2020 2020  ame: raster.    
-00001f40: 2020 2020 676d 6653 686f 7274 656e 6572      gmfShortener
-00001f50: 4372 6561 7465 5572 6c3a 0a20 2020 2020  CreateUrl:.     
-00001f60: 2020 2020 206e 616d 653a 2073 686f 7274       name: short
-00001f70: 656e 6572 5f63 7265 6174 650a 2020 2020  ener_create.    
-00001f80: 2020 2020 6e67 656f 5065 726d 616c 696e      ngeoPermalin
-00001f90: 6b4f 6763 7365 7276 6572 5572 6c3a 0a20  kOgcserverUrl:. 
-00001fa0: 2020 2020 2020 2020 206e 616d 653a 206d           name: m
-00001fb0: 6170 7365 7276 6572 7072 6f78 790a 2020  apserverproxy.  
-00001fc0: 2020 2020 2020 2020 7061 7261 6d73 3a0a          params:.
-00001fd0: 2020 2020 2020 2020 2020 2020 6f67 6373              ogcs
-00001fe0: 6572 7665 723a 2027 7b6d 6169 6e5f 6f67  erver: '{main_og
-00001ff0: 635f 7365 7276 6572 7d27 0a20 2020 2020  c_server}'.     
-00002000: 2020 2066 756c 6c74 6578 7473 6561 7263     fulltextsearc
-00002010: 6855 726c 3a0a 2020 2020 2020 2020 2020  hUrl:.          
-00002020: 6e61 6d65 3a20 6675 6c6c 7465 7874 7365  name: fulltextse
-00002030: 6172 6368 0a20 2020 2020 2020 2020 2070  arch.          p
-00002040: 6172 616d 733a 0a20 2020 2020 2020 2020  arams:.         
-00002050: 2020 206c 696d 6974 3a20 3330 0a20 2020     limit: 30.   
-00002060: 2020 2020 2020 2020 2070 6172 7469 7469           partiti
-00002070: 6f6e 6c69 6d69 743a 2035 0a20 2020 2020  onlimit: 5.     
-00002080: 2020 2020 2064 796e 616d 6963 5f70 6172       dynamic_par
-00002090: 616d 733a 0a20 2020 2020 2020 2020 2020  ams:.           
-000020a0: 2069 6e74 6572 6661 6365 3a20 696e 7465   interface: inte
-000020b0: 7266 6163 650a 2020 2020 2020 2020 676d  rface.        gm
-000020c0: 6654 7265 6555 726c 3a0a 2020 2020 2020  fTreeUrl:.      
-000020d0: 2020 2020 6e61 6d65 3a20 7468 656d 6573      name: themes
-000020e0: 0a20 2020 2020 2020 2020 2070 6172 616d  .          param
-000020f0: 733a 0a20 2020 2020 2020 2020 2020 2062  s:.            b
-00002100: 6163 6b67 726f 756e 643a 2062 6163 6b67  ackground: backg
-00002110: 726f 756e 640a 2020 2020 2020 2020 2020  round.          
-00002120: 6479 6e61 6d69 635f 7061 7261 6d73 3a0a  dynamic_params:.
-00002130: 2020 2020 2020 2020 2020 2020 696e 7465              inte
-00002140: 7266 6163 653a 2069 6e74 6572 6661 6365  rface: interface
-00002150: 0a20 2020 2064 6573 6b74 6f70 3a0a 2020  .    desktop:.  
-00002160: 2020 2020 6578 7465 6e64 733a 2064 6566      extends: def
-00002170: 6175 6c74 0a20 2020 2020 2072 6564 6972  ault.      redir
-00002180: 6563 745f 696e 7465 7266 6163 653a 206d  ect_interface: m
-00002190: 6f62 696c 650a 2020 2020 2020 646f 5f72  obile.      do_r
-000021a0: 6564 6972 6563 743a 2054 7275 650a 2020  edirect: True.  
-000021b0: 2020 2020 636f 6e73 7461 6e74 733a 0a20      constants:. 
-000021c0: 2020 2020 2020 206e 6765 6f50 726f 6669         ngeoProfi
-000021d0: 6c65 4f70 7469 6f6e 733a 207b 7d0a 2020  leOptions: {}.  
-000021e0: 2020 2020 2020 6e67 656f 5374 7265 6574        ngeoStreet
-000021f0: 7669 6577 4f70 7469 6f6e 733a 0a20 2020  viewOptions:.   
-00002200: 2020 2020 2020 2076 6965 7765 723a 2027         viewer: '
-00002210: 6d61 7069 6c6c 6172 7927 0a20 2020 2020  mapillary'.     
-00002220: 2020 2067 6d66 5072 696e 744f 7074 696f     gmfPrintOptio
-00002230: 6e73 3a0a 2020 2020 2020 2020 2020 6c65  ns:.          le
-00002240: 6765 6e64 3a0a 2020 2020 2020 2020 2020  gend:.          
-00002250: 2020 2320 5365 653a 0a20 2020 2020 2020    # See:.       
-00002260: 2020 2020 2023 2068 7474 7073 3a2f 2f77       # https://w
-00002270: 7777 2e6d 6170 7365 7276 6572 2e6f 7267  ww.mapserver.org
-00002280: 2f64 6576 656c 6f70 6d65 6e74 2f72 6663  /development/rfc
-00002290: 2f6d 732d 7266 632d 3130 312e 6874 6d6c  /ms-rfc-101.html
-000022a0: 0a20 2020 2020 2020 2020 2020 2023 2068  .            # h
-000022b0: 7474 7073 3a2f 2f64 6f63 732e 7167 6973  ttps://docs.qgis
-000022c0: 2e6f 7267 2f74 6573 7469 6e67 2f65 6e2f  .org/testing/en/
-000022d0: 646f 6373 2f75 7365 725f 6d61 6e75 616c  docs/user_manual
-000022e0: 2f77 6f72 6b69 6e67 5f77 6974 685f 6f67  /working_with_og
-000022f0: 632f 7365 7276 6572 2f73 6572 7669 6365  c/server/service
-00002300: 732e 6874 6d6c 2367 6574 6c65 6765 6e64  s.html#getlegend
-00002310: 6772 6170 6869 6373 0a20 2020 2020 2020  graphics.       
-00002320: 2020 2020 2075 7365 4262 6f78 3a20 7472       useBbox: tr
-00002330: 7565 0a20 2020 2020 2020 2020 2020 206c  ue.            l
-00002340: 6162 656c 3a0a 2020 2020 2020 2020 2020  abel:.          
-00002350: 2020 2020 7167 6973 3a20 6661 6c73 650a      qgis: false.
-00002360: 2020 2020 2020 2020 2020 2020 7061 7261              para
-00002370: 6d73 3a0a 2020 2020 2020 2020 2020 2020  ms:.            
-00002380: 2020 2320 5365 653a 0a20 2020 2020 2020    # See:.       
-00002390: 2020 2020 2020 2023 2068 7474 7073 3a2f         # https:/
-000023a0: 2f64 6f63 732e 7167 6973 2e6f 7267 2f74  /docs.qgis.org/t
-000023b0: 6573 7469 6e67 2f65 6e2f 646f 6373 2f75  esting/en/docs/u
-000023c0: 7365 725f 6d61 6e75 616c 2f77 6f72 6b69  ser_manual/worki
-000023d0: 6e67 5f77 6974 685f 6f67 632f 7365 7276  ng_with_ogc/serv
-000023e0: 6572 2f73 6572 7669 6365 732e 6874 6d6c  er/services.html
-000023f0: 2367 6574 6c65 6765 6e64 6772 6170 6869  #getlegendgraphi
-00002400: 6373 0a20 2020 2020 2020 2020 2020 2020  cs.             
-00002410: 2071 6769 733a 0a20 2020 2020 2020 2020   qgis:.         
-00002420: 2020 2020 2020 204c 4159 4552 464f 4e54         LAYERFONT
-00002430: 4641 4d49 4c59 3a20 4465 6a61 5675 2053  FAMILY: DejaVu S
-00002440: 616e 730a 2020 2020 2020 2020 2020 2020  ans.            
-00002450: 2020 2020 4954 454d 464f 4e54 4641 4d49      ITEMFONTFAMI
-00002460: 4c59 3a20 4465 6a61 5675 2053 616e 730a  LY: DejaVu Sans.
-00002470: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002480: 4c41 5945 5246 4f4e 5453 495a 453a 2027  LAYERFONTSIZE: '
-00002490: 3130 270a 2020 2020 2020 2020 2020 2020  10'.            
-000024a0: 2020 2020 4954 454d 464f 4e54 5349 5a45      ITEMFONTSIZE
-000024b0: 3a20 2738 270a 2020 2020 2020 2020 2020  : '8'.          
-000024c0: 6869 6464 656e 4174 7472 6962 7574 6573  hiddenAttributes
-000024d0: 3a0a 2020 2020 2020 2020 2020 2020 2d20  :.            - 
-000024e0: 7469 6d65 7a6f 6e65 0a20 2020 2020 2020  timezone.       
-000024f0: 2067 6d66 4469 7370 6c61 7951 7565 7279   gmfDisplayQuery
-00002500: 4772 6964 4f70 7469 6f6e 733a 0a20 2020  GridOptions:.   
-00002510: 2020 2020 2020 2066 6561 7475 7265 5374         featureSt
-00002520: 796c 653a 202a 6665 6174 7572 6553 7479  yle: *featureSty
-00002530: 6c65 0a20 2020 2020 2020 2020 2073 656c  le.          sel
-00002540: 6563 7465 6446 6561 7475 7265 5374 796c  ectedFeatureStyl
-00002550: 653a 202a 7365 6c65 6374 6564 4665 6174  e: *selectedFeat
-00002560: 7572 6553 7479 6c65 0a20 2020 2020 2020  ureStyle.       
-00002570: 2067 6d66 4564 6974 4665 6174 7572 654f   gmfEditFeatureO
-00002580: 7074 696f 6e73 3a0a 2020 2020 2020 2020  ptions:.        
-00002590: 2020 746f 6c65 7261 6e63 653a 2031 300a    tolerance: 10.
-000025a0: 2020 2020 2020 2020 2020 636c 6f73 6541            closeA
-000025b0: 6674 6572 5361 7665 3a20 6661 6c73 650a  fterSave: false.
-000025c0: 2020 2020 2020 2020 2020 6869 6768 6c69            highli
-000025d0: 6768 7453 7479 6c65 3a0a 2020 2020 2020  ghtStyle:.      
-000025e0: 2020 2020 2020 6369 7263 6c65 3a0a 2020        circle:.  
-000025f0: 2020 2020 2020 2020 2020 2020 7261 6469              radi
-00002600: 7573 3a20 370a 2020 2020 2020 2020 2020  us: 7.          
-00002610: 2020 2020 6669 6c6c 3a0a 2020 2020 2020      fill:.      
-00002620: 2020 2020 2020 2020 2020 636f 6c6f 723a            color:
-00002630: 205b 3235 352c 2031 3339 2c20 3133 392c   [255, 139, 139,
-00002640: 2030 2e36 5d0a 2020 2020 2020 2020 2020   0.6].          
-00002650: 2020 2020 7374 726f 6b65 3a0a 2020 2020      stroke:.    
-00002660: 2020 2020 2020 2020 2020 2020 636f 6c6f              colo
-00002670: 723a 205b 3235 352c 2030 2c20 302c 2031  r: [255, 0, 0, 1
-00002680: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
-00002690: 2020 7769 6474 683a 2033 0a20 2020 2020    width: 3.     
-000026a0: 2020 2020 2020 2066 696c 6c3a 0a20 2020         fill:.   
-000026b0: 2020 2020 2020 2020 2020 2063 6f6c 6f72             color
-000026c0: 3a20 5b32 3535 2c20 3133 392c 2031 3339  : [255, 139, 139
-000026d0: 2c20 302e 365d 0a20 2020 2020 2020 2020  , 0.6].         
-000026e0: 2020 2073 7472 6f6b 653a 0a20 2020 2020     stroke:.     
-000026f0: 2020 2020 2020 2020 2063 6f6c 6f72 3a20           color: 
-00002700: 5b32 3535 2c20 302c 2030 2c20 315d 0a20  [255, 0, 0, 1]. 
-00002710: 2020 2020 2020 2020 2020 2020 2077 6964               wid
-00002720: 7468 3a20 330a 2020 2020 2020 2020 676d  th: 3.        gm
-00002730: 6650 726f 6669 6c65 4f70 7469 6f6e 733a  fProfileOptions:
-00002740: 0a20 2020 2020 2020 2020 206c 696e 6573  .          lines
-00002750: 436f 6e66 6967 7572 6174 696f 6e3a 207b  Configuration: {
-00002760: 7d0a 2020 2020 2020 2020 2020 686f 7665  }.          hove
-00002770: 7250 6f69 6e74 5374 796c 653a 0a20 2020  rPointStyle:.   
-00002780: 2020 2020 2020 2020 2063 6972 636c 653a           circle:
-00002790: 0a20 2020 2020 2020 2020 2020 2020 2066  .              f
-000027a0: 696c 6c3a 0a20 2020 2020 2020 2020 2020  ill:.           
-000027b0: 2020 2020 2063 6f6c 6f72 3a20 2723 6666       color: '#ff
-000027c0: 6666 6666 270a 2020 2020 2020 2020 2020  ffff'.          
-000027d0: 2020 2020 2020 7261 6469 7573 3a20 330a        radius: 3.
-000027e0: 2020 2020 2020 2020 676d 6653 6861 7265          gmfShare
-000027f0: 4f70 7469 6f6e 733a 0a20 2020 2020 2020  Options:.       
-00002800: 2020 2065 6e61 626c 6545 6d61 696c 3a20     enableEmail: 
-00002810: 5472 7565 0a20 2020 2020 2072 6f75 7465  True.      route
-00002820: 733a 0a20 2020 2020 2020 2067 6d66 5072  s:.        gmfPr
-00002830: 6f66 696c 654a 736f 6e55 726c 3a0a 2020  ofileJsonUrl:.  
-00002840: 2020 2020 2020 2020 6e61 6d65 3a20 7072          name: pr
-00002850: 6f66 696c 652e 6a73 6f6e 0a20 2020 2020  ofile.json.     
-00002860: 2020 2067 6d66 5072 696e 7455 726c 3a0a     gmfPrintUrl:.
-00002870: 2020 2020 2020 2020 2020 6e61 6d65 3a20            name: 
-00002880: 7072 696e 7470 726f 7879 0a20 2020 206d  printproxy.    m
-00002890: 6f62 696c 653a 0a20 2020 2020 2065 7874  obile:.      ext
-000028a0: 656e 6473 3a20 6465 6661 756c 740a 2020  ends: default.  
-000028b0: 2020 2020 7265 6469 7265 6374 5f69 6e74      redirect_int
-000028c0: 6572 6661 6365 3a20 6465 736b 746f 700a  erface: desktop.
-000028d0: 2020 2020 2020 636f 6e73 7461 6e74 733a        constants:
-000028e0: 0a20 2020 2020 2020 2067 6d66 4d6f 6269  .        gmfMobi
-000028f0: 6c65 4d65 6173 7572 6541 7265 614f 7074  leMeasureAreaOpt
-00002900: 696f 6e73 3a0a 2020 2020 2020 2020 2020  ions:.          
-00002910: 7072 6563 6973 696f 6e3a 2032 0a20 2020  precision: 2.   
-00002920: 2020 2020 2020 2073 6b65 7463 6853 7479         sketchSty
-00002930: 6c65 3a20 266d 6f62 696c 654d 6561 7375  le: &mobileMeasu
-00002940: 7265 5374 796c 650a 2020 2020 2020 2020  reStyle.        
-00002950: 2020 2020 6669 6c6c 3a0a 2020 2020 2020      fill:.      
-00002960: 2020 2020 2020 2020 636f 6c6f 723a 2072          color: r
-00002970: 6762 6128 3235 352c 2031 3238 2c20 3132  gba(255, 128, 12
-00002980: 382c 2030 2e32 290a 2020 2020 2020 2020  8, 0.2).        
-00002990: 2020 2020 7374 726f 6b65 3a0a 2020 2020      stroke:.    
-000029a0: 2020 2020 2020 2020 2020 636f 6c6f 723a            color:
-000029b0: 2072 6762 6128 3235 352c 2030 2c20 302c   rgba(255, 0, 0,
-000029c0: 2030 2e35 290a 2020 2020 2020 2020 2020   0.5).          
-000029d0: 2020 2020 6c69 6e65 4461 7368 3a20 5b31      lineDash: [1
-000029e0: 302c 2031 305d 0a20 2020 2020 2020 2020  0, 10].         
-000029f0: 2020 2020 2077 6964 7468 3a20 320a 2020       width: 2.  
-00002a00: 2020 2020 2020 2020 2020 7265 6775 6c61            regula
-00002a10: 7253 6861 7065 3a0a 2020 2020 2020 2020  rShape:.        
-00002a20: 2020 2020 2020 7374 726f 6b65 3a0a 2020        stroke:.  
-00002a30: 2020 2020 2020 2020 2020 2020 2020 636f                co
-00002a40: 6c6f 723a 2072 6762 6128 302c 2030 2c20  lor: rgba(0, 0, 
-00002a50: 302c 2030 2e37 290a 2020 2020 2020 2020  0, 0.7).        
-00002a60: 2020 2020 2020 2020 7769 6474 683a 2032          width: 2
-00002a70: 0a20 2020 2020 2020 2020 2020 2020 2070  .              p
-00002a80: 6f69 6e74 733a 2034 0a20 2020 2020 2020  oints: 4.       
-00002a90: 2020 2020 2020 2072 6164 6975 733a 2038         radius: 8
-00002aa0: 0a20 2020 2020 2020 2020 2020 2020 2072  .              r
-00002ab0: 6164 6975 7332 3a20 300a 2020 2020 2020  adius2: 0.      
-00002ac0: 2020 2020 2020 2020 616e 676c 653a 2030          angle: 0
-00002ad0: 0a20 2020 2020 2020 2067 6d66 4d6f 6269  .        gmfMobi
-00002ae0: 6c65 4d65 6173 7572 654c 656e 6774 684f  leMeasureLengthO
-00002af0: 7074 696f 6e73 3a0a 2020 2020 2020 2020  ptions:.        
-00002b00: 2020 7072 6563 6973 696f 6e3a 2032 0a20    precision: 2. 
-00002b10: 2020 2020 2020 2020 2073 6b65 7463 6853           sketchS
-00002b20: 7479 6c65 3a20 2a6d 6f62 696c 654d 6561  tyle: *mobileMea
-00002b30: 7375 7265 5374 796c 650a 2020 2020 2020  sureStyle.      
-00002b40: 2020 676d 664d 6f62 696c 654d 6561 7375    gmfMobileMeasu
-00002b50: 7265 506f 696e 744f 7074 696f 6e73 3a0a  rePointOptions:.
-00002b60: 2020 2020 2020 2020 2020 6465 6369 6d61            decima
-00002b70: 6c73 3a20 300a 2020 2020 2020 2020 2020  ls: 0.          
-00002b80: 7261 7374 6572 4c61 7965 7273 3a20 5b5d  rasterLayers: []
-00002b90: 0a20 2020 2020 2020 2020 2066 6f72 6d61  .          forma
-00002ba0: 743a 2027 7b78 7d2c 207b 797d 270a 2020  t: '{x}, {y}'.  
-00002bb0: 2020 2020 2020 2020 736b 6574 6368 5374          sketchSt
-00002bc0: 796c 653a 0a20 2020 2020 2020 2020 2020  yle:.           
-00002bd0: 2066 696c 6c3a 0a20 2020 2020 2020 2020   fill:.         
-00002be0: 2020 2020 2063 6f6c 6f72 3a20 7267 6261       color: rgba
-00002bf0: 2832 3535 2c20 3235 352c 2032 3535 2c20  (255, 255, 255, 
-00002c00: 302e 3229 0a20 2020 2020 2020 2020 2020  0.2).           
-00002c10: 2073 7472 6f6b 653a 0a20 2020 2020 2020   stroke:.       
-00002c20: 2020 2020 2020 2063 6f6c 6f72 3a20 7267         color: rg
-00002c30: 6261 2830 2c20 302c 2030 2c20 302e 3529  ba(0, 0, 0, 0.5)
-00002c40: 0a20 2020 2020 2020 2020 2020 2020 206c  .              l
-00002c50: 696e 6544 6173 683a 205b 3130 2c20 3130  ineDash: [10, 10
-00002c60: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
-00002c70: 7769 6474 683a 2032 0a20 2020 2020 2020  width: 2.       
-00002c80: 2020 2020 2072 6567 756c 6172 5368 6170       regularShap
-00002c90: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00002ca0: 2073 7472 6f6b 653a 0a20 2020 2020 2020   stroke:.       
-00002cb0: 2020 2020 2020 2020 2063 6f6c 6f72 3a20           color: 
-00002cc0: 7267 6261 2830 2c20 302c 2030 2c20 302e  rgba(0, 0, 0, 0.
-00002cd0: 3729 0a20 2020 2020 2020 2020 2020 2020  7).             
-00002ce0: 2020 2077 6964 7468 3a20 320a 2020 2020     width: 2.    
-00002cf0: 2020 2020 2020 2020 2020 706f 696e 7473            points
-00002d00: 3a20 340a 2020 2020 2020 2020 2020 2020  : 4.            
-00002d10: 2020 7261 6469 7573 3a20 380a 2020 2020    radius: 8.    
-00002d20: 2020 2020 2020 2020 2020 7261 6469 7573            radius
-00002d30: 323a 2030 0a20 2020 2020 2020 2020 2020  2: 0.           
-00002d40: 2020 2061 6e67 6c65 3a20 300a 2020 2020     angle: 0.    
-00002d50: 6966 7261 6d65 5f61 7069 3a0a 2020 2020  iframe_api:.    
-00002d60: 2020 6578 7465 6e64 733a 2064 6566 6175    extends: defau
-00002d70: 6c74 0a20 2020 2020 2063 6f6e 7374 616e  lt.      constan
-00002d80: 7473 3a0a 2020 2020 2020 2020 676d 6653  ts:.        gmfS
-00002d90: 6561 7263 6847 726f 7570 733a 205b 5d0a  earchGroups: [].
-00002da0: 2020 2020 6170 693a 0a20 2020 2020 2063      api:.      c
-00002db0: 6f6e 7374 616e 7473 3a0a 2020 2020 2020  onstants:.      
-00002dc0: 2020 7072 6f6a 6563 7469 6f6e 733a 202a    projections: *
-00002dd0: 7072 6f6a 6563 7469 6f6e 730a 2020 2020  projections.    
-00002de0: 2020 2020 2320 5468 6520 7072 6f6a 6563      # The projec
-00002df0: 7469 6f6e 206f 6620 7468 6520 6d61 700a  tion of the map.
-00002e00: 2020 2020 2020 2020 7072 6f6a 6563 7469          projecti
-00002e10: 6f6e 3a20 4550 5347 3a7b 7372 6964 7d0a  on: EPSG:{srid}.
-00002e20: 2020 2020 2020 726f 7574 6573 3a0a 2020        routes:.  
-00002e30: 2020 2020 2020 7468 656d 6573 5572 6c3a        themesUrl:
-00002e40: 0a20 2020 2020 2020 2020 206e 616d 653a  .          name:
-00002e50: 2074 6865 6d65 730a 2020 2020 2020 2020   themes.        
-00002e60: 2020 7061 7261 6d73 3a0a 2020 2020 2020    params:.      
-00002e70: 2020 2020 2020 6261 636b 6772 6f75 6e64        background
-00002e80: 3a20 6261 636b 6772 6f75 6e64 0a20 2020  : background.   
-00002e90: 2020 2020 2020 2064 796e 616d 6963 5f70         dynamic_p
-00002ea0: 6172 616d 733a 0a20 2020 2020 2020 2020  arams:.         
-00002eb0: 2020 2069 6e74 6572 6661 6365 3a20 696e     interface: in
-00002ec0: 7465 7266 6163 650a 2020 2020 2020 2020  terface.        
-00002ed0: 6c6f 6361 6c65 5572 6c3a 0a20 2020 2020  localeUrl:.     
-00002ee0: 2020 2020 206e 616d 653a 206c 6f63 616c       name: local
-00002ef0: 656a 736f 6e0a 2020 2020 2020 2020 7365  ejson.        se
-00002f00: 6172 6368 5572 6c3a 0a20 2020 2020 2020  archUrl:.       
-00002f10: 2020 206e 616d 653a 2066 756c 6c74 6578     name: fulltex
-00002f20: 7473 6561 7263 680a 2020 2020 2020 2020  tsearch.        
-00002f30: 2020 7061 7261 6d73 3a0a 2020 2020 2020    params:.      
-00002f40: 2020 2020 2020 6c69 6d69 743a 2033 300a        limit: 30.
-00002f50: 2020 2020 2020 2020 2020 2020 7061 7274              part
-00002f60: 6974 696f 6e6c 696d 6974 3a20 350a 2020  itionlimit: 5.  
-00002f70: 2020 2020 2020 2020 6479 6e61 6d69 635f          dynamic_
-00002f80: 7061 7261 6d73 3a0a 2020 2020 2020 2020  params:.        
-00002f90: 2020 2020 696e 7465 7266 6163 653a 2069      interface: i
-00002fa0: 6e74 6572 6661 6365 0a0a 2020 6361 6368  nterface..  cach
-00002fb0: 653a 0a20 2020 2073 7464 3a0a 2020 2020  e:.    std:.    
-00002fc0: 2020 6261 636b 656e 643a 2063 3263 6765    backend: c2cge
-00002fd0: 6f70 6f72 7461 6c2e 6879 6272 6964 7365  oportal.hybridse
-00002fe0: 6e74 696e 656c 0a20 2020 2020 2061 7267  ntinel.      arg
-00002ff0: 756d 656e 7473 3a0a 2020 2020 2020 2020  uments:.        
-00003000: 6c6f 636b 5f74 696d 656f 7574 3a20 277b  lock_timeout: '{
-00003010: 5245 4449 535f 4c4f 434b 5f54 494d 454f  REDIS_LOCK_TIMEO
-00003020: 5554 7d27 2023 2073 6563 6f6e 6473 0a20  UT}' # seconds. 
-00003030: 2020 2020 2020 2072 6564 6973 5f65 7870         redis_exp
-00003040: 6972 6174 696f 6e5f 7469 6d65 3a20 277b  iration_time: '{
-00003050: 5245 4449 535f 4558 5049 5241 5449 4f4e  REDIS_EXPIRATION
-00003060: 5f54 494d 457d 2720 2320 7365 636f 6e64  _TIME}' # second
-00003070: 730a 2020 2020 2020 2020 6469 7374 7269  s.        distri
-00003080: 6275 7465 645f 6c6f 636b 3a20 5472 7565  buted_lock: True
-00003090: 0a20 2020 2020 2020 2073 6572 7669 6365  .        service
-000030a0: 5f6e 616d 653a 2027 7b52 4544 4953 5f53  _name: '{REDIS_S
-000030b0: 4552 5649 4345 4e41 4d45 7d27 0a20 2020  ERVICENAME}'.   
-000030c0: 2020 2020 2073 6f63 6b65 745f 7469 6d65       socket_time
-000030d0: 6f75 743a 2027 7b52 4544 4953 5f54 494d  out: '{REDIS_TIM
-000030e0: 454f 5554 7d27 2023 2073 6563 6f6e 6473  EOUT}' # seconds
-000030f0: 0a20 2020 2020 2020 2064 623a 2030 0a20  .        db: 0. 
-00003100: 2020 206f 626a 3a0a 2020 2020 2020 6261     obj:.      ba
-00003110: 636b 656e 643a 2064 6f67 7069 6c65 2e63  ckend: dogpile.c
-00003120: 6163 6865 2e6d 656d 6f72 790a 0a20 2061  ache.memory..  a
-00003130: 646d 696e 5f69 6e74 6572 6661 6365 3a0a  dmin_interface:.
-00003140: 2020 2020 6c61 7965 725f 7472 6565 5f6d      layer_tree_m
-00003150: 6178 5f6e 6f64 6573 3a20 3130 3030 0a0a  ax_nodes: 1000..
-00003160: 2020 2020 2320 5468 6520 6c69 7374 206f      # The list o
-00003170: 6620 6176 6169 6c61 626c 6520 7661 7269  f available vari
-00003180: 6162 6c65 206e 616d 6573 2066 6f72 2074  able names for t
-00003190: 6865 2060 4d65 7461 6461 7461 7360 2066  he `Metadatas` f
-000031a0: 6f72 6d2e 0a20 2020 2061 7661 696c 6162  orm..    availab
-000031b0: 6c65 5f6d 6574 6164 6174 613a 0a20 2020  le_metadata:.   
-000031c0: 2020 2023 2054 7265 6549 7465 6d0a 2020     # TreeItem.  
-000031d0: 2020 2020 2d20 6e61 6d65 3a20 7365 6172      - name: sear
-000031e0: 6368 416c 6961 730a 2020 2020 2020 2020  chAlias.        
-000031f0: 7479 7065 3a20 6c69 7374 0a20 2020 2020  type: list.     
-00003200: 2023 204c 6179 6572 7320 6772 6f75 700a   # Layers group.
-00003210: 2020 2020 2020 2d20 6e61 6d65 3a20 6578        - name: ex
-00003220: 636c 7573 6976 6547 726f 7570 0a20 2020  clusiveGroup.   
-00003230: 2020 2020 2074 7970 653a 2062 6f6f 6c65       type: boole
-00003240: 616e 0a20 2020 2020 202d 206e 616d 653a  an.      - name:
-00003250: 2069 7345 7870 616e 6465 640a 2020 2020   isExpanded.    
-00003260: 2020 2020 7479 7065 3a20 626f 6f6c 6561      type: boolea
-00003270: 6e0a 2020 2020 2020 2d20 6e61 6d65 3a20  n.      - name: 
-00003280: 7072 696e 744e 6174 6976 6541 6e67 6c65  printNativeAngle
-00003290: 0a20 2020 2020 2020 2074 7970 653a 2062  .        type: b
-000032a0: 6f6f 6c65 616e 0a20 2020 2020 2023 204c  oolean.      # L
-000032b0: 6179 6572 0a20 2020 2020 202d 206e 616d  ayer.      - nam
-000032c0: 653a 2063 6f70 7961 626c 650a 2020 2020  e: copyable.    
-000032d0: 2020 2020 7479 7065 3a20 626f 6f6c 6561      type: boolea
-000032e0: 6e0a 2020 2020 2020 2d20 6e61 6d65 3a20  n.      - name: 
-000032f0: 6c65 6765 6e64 0a20 2020 2020 2020 2074  legend.        t
-00003300: 7970 653a 2062 6f6f 6c65 616e 0a20 2020  ype: boolean.   
-00003310: 2020 202d 206e 616d 653a 2069 734c 6567     - name: isLeg
-00003320: 656e 6445 7870 616e 6465 640a 2020 2020  endExpanded.    
-00003330: 2020 2020 7479 7065 3a20 626f 6f6c 6561      type: boolea
-00003340: 6e0a 2020 2020 2020 2d20 6e61 6d65 3a20  n.      - name: 
-00003350: 6c65 6765 6e64 5275 6c65 0a20 2020 2020  legendRule.     
-00003360: 202d 206e 616d 653a 206c 6567 656e 6449   - name: legendI
-00003370: 6d61 6765 0a20 2020 2020 2020 2074 7970  mage.        typ
-00003380: 653a 2075 726c 0a20 2020 2020 202d 206e  e: url.      - n
-00003390: 616d 653a 2068 6944 5049 4c65 6765 6e64  ame: hiDPILegend
-000033a0: 496d 6167 6573 0a20 2020 2020 2020 2074  Images.        t
-000033b0: 7970 653a 206a 736f 6e0a 2020 2020 2020  ype: json.      
-000033c0: 2d20 6e61 6d65 3a20 6963 6f6e 5572 6c0a  - name: iconUrl.
-000033d0: 2020 2020 2020 2020 7479 7065 3a20 7572          type: ur
-000033e0: 6c0a 2020 2020 2020 2d20 6e61 6d65 3a20  l.      - name: 
-000033f0: 6d65 7461 6461 7461 5572 6c0a 2020 2020  metadataUrl.    
-00003400: 2020 2020 7479 7065 3a20 7572 6c0a 2020      type: url.  
-00003410: 2020 2020 2d20 6e61 6d65 3a20 6469 7363      - name: disc
-00003420: 6c61 696d 6572 0a20 2020 2020 2020 2074  laimer.        t
-00003430: 7261 6e73 6c61 7465 3a20 5472 7565 0a20  ranslate: True. 
-00003440: 2020 2020 202d 206e 616d 653a 2069 7343       - name: isC
-00003450: 6865 636b 6564 0a20 2020 2020 2020 2074  hecked.        t
-00003460: 7970 653a 2062 6f6f 6c65 616e 0a20 2020  ype: boolean.   
-00003470: 2020 202d 206e 616d 653a 2069 6465 6e74     - name: ident
-00003480: 6966 6965 7241 7474 7269 6275 7465 4669  ifierAttributeFi
-00003490: 656c 640a 2020 2020 2020 2d20 6e61 6d65  eld.      - name
-000034a0: 3a20 6d61 7852 6573 6f6c 7574 696f 6e0a  : maxResolution.
-000034b0: 2020 2020 2020 2020 7479 7065 3a20 666c          type: fl
-000034c0: 6f61 740a 2020 2020 2020 2d20 6e61 6d65  oat.      - name
-000034d0: 3a20 6d69 6e52 6573 6f6c 7574 696f 6e0a  : minResolution.
-000034e0: 2020 2020 2020 2020 7479 7065 3a20 666c          type: fl
-000034f0: 6f61 740a 2020 2020 2020 2d20 6e61 6d65  oat.      - name
-00003500: 3a20 6f70 6163 6974 790a 2020 2020 2020  : opacity.      
-00003510: 2020 7479 7065 3a20 666c 6f61 740a 2020    type: float.  
-00003520: 2020 2020 2d20 6e61 6d65 3a20 7468 756d      - name: thum
-00003530: 626e 6169 6c0a 2020 2020 2020 2020 7479  bnail.        ty
-00003540: 7065 3a20 7572 6c0a 2020 2020 2020 2d20  pe: url.      - 
-00003550: 6e61 6d65 3a20 7469 6d65 4174 7472 6962  name: timeAttrib
-00003560: 7574 650a 2020 2020 2020 2d20 6e61 6d65  ute.      - name
-00003570: 3a20 6765 6f74 6162 6c65 5072 696d 6172  : geotablePrimar
-00003580: 794b 6579 0a20 2020 2020 202d 206e 616d  yKey.      - nam
-00003590: 653a 206c 6173 7455 7064 6174 6544 6174  e: lastUpdateDat
-000035a0: 6543 6f6c 756d 6e0a 2020 2020 2020 2d20  eColumn.      - 
-000035b0: 6e61 6d65 3a20 6c61 7374 5570 6461 7465  name: lastUpdate
-000035c0: 5573 6572 436f 6c75 6d6e 0a20 2020 2020  UserColumn.     
-000035d0: 202d 206e 616d 653a 2073 6e61 7070 696e   - name: snappin
-000035e0: 6743 6f6e 6669 670a 2020 2020 2020 2020  gConfig.        
-000035f0: 7479 7065 3a20 6a73 6f6e 0a20 2020 2020  type: json.     
-00003600: 202d 206e 616d 653a 2067 656f 6d65 7472   - name: geometr
-00003610: 7956 616c 6964 6174 696f 6e0a 2020 2020  yValidation.    
-00003620: 2020 2020 7479 7065 3a20 626f 6f6c 6561      type: boolea
-00003630: 6e0a 2020 2020 2020 2d20 6e61 6d65 3a20  n.      - name: 
-00003640: 6375 7374 6f6d 4f70 656e 4c61 7965 7273  customOpenLayers
-00003650: 4f70 7469 6f6e 730a 2020 2020 2020 2020  Options.        
-00003660: 7479 7065 3a20 6a73 6f6e 0a20 2020 2020  type: json.     
-00003670: 202d 206e 616d 653a 2065 6469 7469 6e67   - name: editing
-00003680: 4174 7472 6962 7574 6573 4f72 6465 720a  AttributesOrder.
-00003690: 2020 2020 2020 2020 7479 7065 3a20 6c69          type: li
-000036a0: 7374 0a20 2020 2020 202d 206e 616d 653a  st.      - name:
-000036b0: 2065 6469 7469 6e67 456e 756d 6572 6174   editingEnumerat
-000036c0: 696f 6e73 0a20 2020 2020 2020 2074 7970  ions.        typ
-000036d0: 653a 206a 736f 6e0a 2020 2020 2020 2d20  e: json.      - 
-000036e0: 6e61 6d65 3a20 7265 6164 6f6e 6c79 4174  name: readonlyAt
-000036f0: 7472 6962 7574 6573 0a20 2020 2020 2020  tributes.       
-00003700: 2074 7970 653a 206c 6973 740a 2020 2020   type: list.    
-00003710: 2020 2d20 6e61 6d65 3a20 7175 6572 7949    - name: queryI
-00003720: 636f 6e50 6f73 6974 696f 6e0a 2020 2020  conPosition.    
-00003730: 2020 2020 7479 7065 3a20 6c69 7374 0a20      type: list. 
-00003740: 2020 2020 2023 2057 4d53 0a20 2020 2020       # WMS.     
-00003750: 202d 206e 616d 653a 2064 6972 6563 7465   - name: directe
-00003760: 6446 696c 7465 7241 7474 7269 6275 7465  dFilterAttribute
-00003770: 730a 2020 2020 2020 2020 7479 7065 3a20  s.        type: 
-00003780: 6c69 7374 0a20 2020 2020 202d 206e 616d  list.      - nam
-00003790: 653a 2065 6e75 6d65 7261 7465 6441 7474  e: enumeratedAtt
-000037a0: 7269 6275 7465 730a 2020 2020 2020 2020  ributes.        
-000037b0: 7479 7065 3a20 6c69 7374 0a20 2020 2020  type: list.     
-000037c0: 2023 2057 4d54 5320 6c61 7965 7273 0a20   # WMTS layers. 
-000037d0: 2020 2020 202d 206e 616d 653a 206f 6763       - name: ogc
-000037e0: 5365 7276 6572 0a20 2020 2020 202d 206e  Server.      - n
-000037f0: 616d 653a 2077 6d73 4c61 7965 7273 0a20  ame: wmsLayers. 
-00003800: 2020 2020 202d 206e 616d 653a 2071 7565       - name: que
-00003810: 7279 4c61 7965 7273 0a20 2020 2020 202d  ryLayers.      -
-00003820: 206e 616d 653a 2070 7269 6e74 4c61 7965   name: printLaye
-00003830: 7273 0a20 2020 2020 202d 206e 616d 653a  rs.      - name:
-00003840: 206d 6178 5175 6572 7952 6573 6f6c 7574   maxQueryResolut
-00003850: 696f 6e0a 2020 2020 2020 2020 7479 7065  ion.        type
-00003860: 3a20 666c 6f61 740a 2020 2020 2020 2d20  : float.      - 
-00003870: 6e61 6d65 3a20 6d69 6e51 7565 7279 5265  name: minQueryRe
-00003880: 736f 6c75 7469 6f6e 0a20 2020 2020 2020  solution.       
-00003890: 2074 7970 653a 2066 6c6f 6174 0a0a 2020   type: float..  
-000038a0: 2020 2320 5468 6520 6c69 7374 206f 6620    # The list of 
-000038b0: 6675 6e63 7469 6f6e 616c 6974 6965 7320  functionalities 
-000038c0: 7468 6174 2063 616e 2062 6520 636f 6e66  that can be conf
-000038d0: 6967 7572 6564 0a20 2020 2023 2074 6872  igured.    # thr
-000038e0: 6f75 6768 2074 6865 2061 646d 696e 2069  ough the admin i
-000038f0: 6e74 6572 6661 6365 2e0a 2020 2020 6176  nterface..    av
-00003900: 6169 6c61 626c 655f 6675 6e63 7469 6f6e  ailable_function
-00003910: 616c 6974 6965 733a 0a20 2020 2020 202d  alities:.      -
-00003920: 206e 616d 653a 2064 6566 6175 6c74 5f62   name: default_b
-00003930: 6173 656d 6170 0a20 2020 2020 2020 2073  asemap.        s
-00003940: 696e 676c 653a 2074 7275 650a 2020 2020  ingle: true.    
-00003950: 2020 2d20 6e61 6d65 3a20 6465 6661 756c    - name: defaul
-00003960: 745f 7468 656d 650a 2020 2020 2020 2020  t_theme.        
-00003970: 7369 6e67 6c65 3a20 7472 7565 0a20 2020  single: true.   
-00003980: 2020 202d 206e 616d 653a 2070 7269 6e74     - name: print
-00003990: 5f74 656d 706c 6174 650a 2020 2020 2020  _template.      
-000039a0: 2d20 6e61 6d65 3a20 6d61 7073 6572 7665  - name: mapserve
-000039b0: 725f 7375 6273 7469 7475 7469 6f6e 0a20  r_substitution. 
-000039c0: 2020 2020 202d 206e 616d 653a 2066 696c       - name: fil
-000039d0: 7465 7261 626c 655f 6c61 7965 7273 0a20  terable_layers. 
-000039e0: 2020 2020 202d 206e 616d 653a 2070 7265       - name: pre
-000039f0: 7365 745f 6c61 7965 725f 6669 6c74 6572  set_layer_filter
-00003a00: 0a20 2020 2020 2020 2073 696e 676c 653a  .        single:
-00003a10: 2074 7275 650a 2020 2020 2020 2d20 6e61   true.      - na
-00003a20: 6d65 3a20 6f70 656e 5f70 616e 656c 0a20  me: open_panel. 
-00003a30: 2020 2020 2020 2073 696e 676c 653a 2074         single: t
-00003a40: 7275 650a 0a20 2067 6574 6974 6669 7865  rue..  getitfixe
-00003a50: 643a 0a20 2020 2065 6e61 626c 6564 3a20  d:.    enabled: 
-00003a60: 6661 6c73 650a 0a20 2066 756e 6374 696f  false..  functio
-00003a70: 6e61 6c69 7469 6573 3a0a 2020 2020 2320  nalities:.    # 
-00003a80: 4675 6e63 7469 6f6e 616c 6974 6965 7320  Functionalities 
-00003a90: 7468 6174 2061 7265 206d 6164 6520 6176  that are made av
-00003aa0: 6169 6c61 626c 6520 746f 204d 616b 6f20  ailable to Mako 
-00003ab0: 7465 6d70 6c61 7465 7320 616e 6420 6c6f  templates and lo
-00003ac0: 6769 6e75 7365 722e 0a20 2020 2061 7661  ginuser..    ava
-00003ad0: 696c 6162 6c65 5f69 6e5f 7465 6d70 6c61  ilable_in_templa
-00003ae0: 7465 733a 0a20 2020 2020 202d 2064 6566  tes:.      - def
-00003af0: 6175 6c74 5f62 6173 656d 6170 0a20 2020  ault_basemap.   
-00003b00: 2020 202d 2064 6566 6175 6c74 5f74 6865     - default_the
-00003b10: 6d65 0a20 2020 2020 202d 2066 696c 7465  me.      - filte
-00003b20: 7261 626c 655f 6c61 7965 7273 0a20 2020  rable_layers.   
-00003b30: 2020 202d 2070 7269 6e74 5f74 656d 706c     - print_templ
-00003b40: 6174 650a 2020 2020 2020 2d20 7072 6573  ate.      - pres
-00003b50: 6574 5f6c 6179 6572 5f66 696c 7465 720a  et_layer_filter.
-00003b60: 2020 2020 2020 2d20 6f70 656e 5f70 616e        - open_pan
-00003b70: 656c 0a0a 2020 7572 6c6c 6f67 696e 3a20  el..  urllogin: 
-00003b80: 7b7d 0a0a 2020 6874 7470 5f6f 7074 696f  {}..  http_optio
-00003b90: 6e73 3a0a 2020 2020 7469 6d65 6f75 743a  ns:.    timeout:
-00003ba0: 2033 3030 0a0a 2020 7469 6e79 6f77 7370   300..  tinyowsp
-00003bb0: 726f 7879 3a0a 2020 2020 2320 5552 4c20  roxy:.    # URL 
-00003bc0: 746f 2069 6e74 6572 6e61 6c20 5469 6e79  to internal Tiny
-00003bd0: 4f57 5320 696e 7374 616e 6365 0a20 2020  OWS instance.   
-00003be0: 2074 696e 796f 7773 5f75 726c 3a20 277b   tinyows_url: '{
-00003bf0: 5449 4e59 4f57 535f 5552 4c7d 270a 2020  TINYOWS_URL}'.  
-00003c00: 2020 6f67 635f 7365 7276 6572 3a20 277b    ogc_server: '{
-00003c10: 6d61 696e 5f6f 6763 5f73 6572 7665 727d  main_ogc_server}
-00003c20: 270a 0a20 2020 2023 2049 6620 7468 6520  '..    # If the 
-00003c30: 606f 6e6c 696e 655f 7265 736f 7572 6365  `online_resource
-00003c40: 6020 7572 6c20 696e 2074 6865 2054 696e  ` url in the Tin
-00003c50: 794f 5753 2063 6f6e 6669 6775 7261 7469  yOWS configurati
-00003c60: 6f6e 2069 7320 6e6f 7420 7365 740a 2020  on is not set.  
-00003c70: 2020 2320 746f 2074 6865 2054 696e 794f    # to the TinyO
-00003c80: 5753 2070 726f 7879 2075 726c 2028 652e  WS proxy url (e.
-00003c90: 672e 2077 6865 6e20 7468 6520 7365 7276  g. when the serv
-00003ca0: 6963 6520 6973 2061 6c73 6f20 7573 6564  ice is also used
-00003cb0: 2077 6974 686f 7574 0a20 2020 2023 2074   without.    # t
-00003cc0: 6865 2070 726f 7879 292c 2074 6865 2070  he proxy), the p
-00003cd0: 726f 7879 2063 616e 2072 6570 6c61 6365  roxy can replace
-00003ce0: 2074 6865 206f 7269 6769 6e61 6c20 606f   the original `o
-00003cf0: 6e6c 696e 655f 7265 736f 7572 6365 600a  nline_resource`.
-00003d00: 2020 2020 2320 7572 6c20 7769 7468 2074      # url with t
-00003d10: 6865 2070 726f 7879 2075 726c 2e0a 2020  he proxy url..  
-00003d20: 2020 2320 7072 6f78 795f 6f6e 6c69 6e65    # proxy_online
-00003d30: 5f72 6573 6f75 7263 653a 207b 5649 5349  _resource: {VISI
-00003d40: 424c 455f 5745 425f 5052 4f54 4f43 4f4c  BLE_WEB_PROTOCOL
-00003d50: 7d3a 2f2f 7b56 4953 4942 4c45 5f57 4542  }://{VISIBLE_WEB
-00003d60: 5f48 4f53 547d 7b56 4953 4942 4c45 5f45  _HOST}{VISIBLE_E
-00003d70: 4e54 5259 5f50 4f49 4e54 7d74 696e 796f  NTRY_POINT}tinyo
-00003d80: 7773 5f70 726f 7879 0a20 2020 2023 206f  ws_proxy.    # o
-00003d90: 6e6c 696e 655f 7265 736f 7572 6365 3a20  nline_resource: 
-00003da0: 6874 7470 3a2f 2f6c 6f63 616c 686f 7374  http://localhost
-00003db0: 7b56 4953 4942 4c45 5f45 4e54 5259 5f50  {VISIBLE_ENTRY_P
-00003dc0: 4f49 4e54 7d74 696e 796f 7773 0a20 2020  OINT}tinyows.   
-00003dd0: 2023 0a20 2020 2023 2057 6865 6e20 7275   #.    # When ru
-00003de0: 6e6e 696e 6720 6120 6332 6367 656f 706f  nning a c2cgeopo
-00003df0: 7274 616c 2061 7070 6c2e 2069 6e20 6465  rtal appl. in de
-00003e00: 6275 6720 6d6f 6465 2028 7769 7468 2060  bug mode (with `
-00003e10: 6d61 6b65 2073 6572 7665 6029 0a20 2020  make serve`).   
-00003e20: 2023 2074 6865 2068 6f73 7420 6861 7320   # the host has 
-00003e30: 746f 2062 6520 7365 7420 6578 706c 6963  to be set explic
-00003e40: 6974 6c79 2069 6e20 6120 7668 6f73 7420  itly in a vhost 
-00003e50: 656e 7669 726f 6e6d 656e 742e 0a20 2020  environment..   
-00003e60: 2023 2074 696e 796f 7773 5f68 6f73 743a   # tinyows_host:
-00003e70: 207b 5649 5349 424c 455f 5745 425f 484f   {VISIBLE_WEB_HO
-00003e80: 5354 7d0a 0a20 2061 7069 3a0a 2020 2020  ST}..  api:.    
-00003e90: 6f67 635f 7365 7276 6572 3a20 277b 6d61  ogc_server: '{ma
-00003ea0: 696e 5f6f 6763 5f73 6572 7665 727d 270a  in_ogc_server}'.
-00003eb0: 0a20 2072 6573 6f75 7263 6570 726f 7879  .  resourceproxy
-00003ec0: 3a0a 2020 2020 2320 4c69 7374 206f 6620  :.    # List of 
-00003ed0: 7572 6c73 2066 726f 6d20 7768 6963 6820  urls from which 
-00003ee0: 6974 2069 7320 7361 6665 2074 6f20 6c6f  it is safe to lo
-00003ef0: 6164 2063 6f6e 7465 6e74 0a20 2020 2074  ad content.    t
-00003f00: 6172 6765 7473 3a20 7b7d 0a20 2020 2023  argets: {}.    #
-00003f10: 2020 2065 7865 6d70 6c65 7461 7267 6574     exempletarget
-00003f20: 6e61 6d65 3a20 6874 7470 733a 2f2f 7777  name: https://ww
-00003f30: 772e 6361 6d70 746f 6361 6d70 2e63 6f6d  w.camptocamp.com
-00003f40: 2f3f 7061 7261 6d31 3d25 7326 7061 7261  /?param1=%s&para
-00003f50: 6d32 3d25 730a 0a20 2020 2023 204c 6973  m2=%s..    # Lis
-00003f60: 7420 6f66 2061 6c6c 6f77 6564 2068 6561  t of allowed hea
-00003f70: 6465 7273 0a20 2020 2061 6c6c 6f77 6564  ders.    allowed
-00003f80: 5f68 6561 6465 7273 3a0a 2020 2020 2020  _headers:.      
-00003f90: 2d20 4361 6368 652d 436f 6e74 726f 6c0a  - Cache-Control.
-00003fa0: 2020 2020 2020 2d20 436f 6e74 656e 742d        - Content-
-00003fb0: 456e 636f 6469 6e67 0a20 2020 2020 202d  Encoding.      -
-00003fc0: 2043 6f6e 7465 6e74 2d4c 616e 6775 6167   Content-Languag
-00003fd0: 650a 2020 2020 2020 2d20 436f 6e74 656e  e.      - Conten
-00003fe0: 742d 5479 7065 0a20 2020 2020 202d 2044  t-Type.      - D
-00003ff0: 6174 650a 2020 2020 2020 2d20 4554 6167  ate.      - ETag
-00004000: 0a20 2020 2020 202d 2056 6172 790a 0a20  .      - Vary.. 
-00004010: 2066 756c 6c74 6578 7473 6561 7263 683a   fulltextsearch:
-00004020: 0a20 2020 2064 6566 6175 6c74 6c69 6d69  .    defaultlimi
-00004030: 743a 2033 300a 2020 2020 6d61 786c 696d  t: 30.    maxlim
-00004040: 6974 3a20 3230 300a 2020 2020 6c61 6e67  it: 200.    lang
-00004050: 7561 6765 733a 0a20 2020 2020 2066 723a  uages:.      fr:
-00004060: 2066 7265 6e63 680a 2020 2020 2020 656e   french.      en
-00004070: 3a20 656e 676c 6973 680a 2020 2020 2020  : english.      
-00004080: 6465 3a20 6765 726d 616e 0a0a 2020 7365  de: german..  se
-00004090: 7276 6572 733a 0a20 2020 2069 6e74 6572  rvers:.    inter
-000040a0: 6e61 6c3a 2068 7474 703a 2f2f 6c6f 6361  nal: http://loca
-000040b0: 6c68 6f73 742f 0a20 2020 206c 6f63 616c  lhost/.    local
-000040c0: 3a20 277b 5649 5349 424c 455f 5745 425f  : '{VISIBLE_WEB_
-000040d0: 5052 4f54 4f43 4f4c 7d3a 2f2f 7b56 4953  PROTOCOL}://{VIS
-000040e0: 4942 4c45 5f57 4542 5f48 4f53 547d 7b56  IBLE_WEB_HOST}{V
-000040f0: 4953 4942 4c45 5f45 4e54 5259 5f50 4f49  ISIBLE_ENTRY_POI
-00004100: 4e54 7d27 0a20 2020 206d 6170 7365 7276  NT}'.    mapserv
-00004110: 6572 3a20 277b 4d41 5053 4552 5645 525f  er: '{MAPSERVER_
-00004120: 5552 4c7d 270a 2020 2020 7167 6973 7365  URL}'.    qgisse
-00004130: 7276 6572 3a20 277b 5147 4953 5345 5256  rver: '{QGISSERV
-00004140: 4552 5f55 524c 7d27 0a0a 2020 686f 7374  ER_URL}'..  host
-00004150: 5f66 6f72 7761 7264 5f68 6f73 743a 205b  _forward_host: [
-00004160: 5d0a 0a20 2023 2054 6865 2022 7261 7374  ]..  # The "rast
-00004170: 6572 2077 6562 2073 6572 7669 6365 7322  er web services"
-00004180: 2063 6f6e 6669 6775 7261 7469 6f6e 2e20   configuration. 
-00004190: 5365 6520 7468 6520 2272 6173 7465 7222  See the "raster"
-000041a0: 0a20 2023 2063 6861 7074 6572 2069 6e20  .  # chapter in 
-000041b0: 7468 6520 696e 7465 6772 6174 6f72 2064  the integrator d
-000041c0: 6f63 756d 656e 7461 7469 6f6e 2e0a 2020  ocumentation..  
-000041d0: 7261 7374 6572 3a20 7b7d 0a0a 2020 2320  raster: {}..  # 
-000041e0: 5573 6564 2062 7920 656e 756d 6572 6174  Used by enumerat
-000041f0: 696f 6e20 696e 2074 6865 2071 7565 7279  ion in the query
-00004200: 2062 7569 6c64 6572 0a20 206c 6179 6572   builder.  layer
-00004210: 733a 0a20 2020 2067 656f 6d65 7472 795f  s:.    geometry_
-00004220: 7661 6c69 6461 7469 6f6e 3a20 5472 7565  validation: True
-00004230: 0a0a 2020 2320 5573 6564 2062 7920 7265  ..  # Used by re
-00004240: 7365 745f 7061 7373 776f 7264 2061 6e64  set_password and
-00004250: 2073 686f 7274 656e 6572 2074 6f20 7365   shortener to se
-00004260: 6e64 2065 6d61 696c 730a 2020 736d 7470  nd emails.  smtp
-00004270: 3a20 7b7d 0a0a 2020 2320 5573 6564 2074  : {}..  # Used t
-00004280: 6f20 7365 6e64 2061 6e20 656d 6169 6c20  o send an email 
-00004290: 6f6e 2070 6173 7377 6f72 6420 7265 7365  on password rese
-000042a0: 740a 2020 7265 7365 745f 7061 7373 776f  t.  reset_passwo
-000042b0: 7264 3a20 7b7d 0a0a 2020 2320 5468 6520  rd: {}..  # The 
-000042c0: 7368 6f72 7465 6e65 7220 6261 7365 2063  shortener base c
-000042d0: 6f6e 6669 6775 7261 7469 6f6e 0a20 2073  onfiguration.  s
-000042e0: 686f 7274 656e 6572 3a0a 2020 2020 2320  hortener:.    # 
-000042f0: 5468 6520 6261 7365 206f 6620 6372 6561  The base of crea
-00004300: 7465 6420 5552 4c0a 2020 2020 6261 7365  ted URL.    base
-00004310: 5f75 726c 3a20 277b 5649 5349 424c 455f  _url: '{VISIBLE_
-00004320: 5745 425f 5052 4f54 4f43 4f4c 7d3a 2f2f  WEB_PROTOCOL}://
-00004330: 7b56 4953 4942 4c45 5f57 4542 5f48 4f53  {VISIBLE_WEB_HOS
-00004340: 547d 7b56 4953 4942 4c45 5f45 4e54 5259  T}{VISIBLE_ENTRY
-00004350: 5f50 4f49 4e54 7d73 2f27 0a20 2020 2061  _POINT}s/'.    a
-00004360: 6c6c 6f77 6564 5f68 6f73 7473 3a0a 2020  llowed_hosts:.  
-00004370: 2020 2020 2d20 277b 5649 5349 424c 455f      - '{VISIBLE_
-00004380: 5745 425f 484f 5354 7d27 0a20 2020 206c  WEB_HOST}'.    l
-00004390: 656e 6774 683a 2034 0a0a 2020 2320 4465  ength: 4..  # De
-000043a0: 6669 6e65 2077 6865 7468 6572 2074 6865  fine whether the
-000043b0: 204d 6170 5365 7276 6572 2070 726f 7879   MapServer proxy
-000043c0: 2073 686f 756c 6420 6869 6465 2074 6865   should hide the
-000043d0: 204f 4743 2063 6170 6162 696c 6974 6965   OGC capabilitie
-000043e0: 732e 0a20 2068 6964 655f 6361 7061 6269  s..  hide_capabi
-000043f0: 6c69 7469 6573 3a20 6661 6c73 650a 0a20  lities: false.. 
-00004400: 2023 2046 6f72 2070 7269 6e74 2070 726f   # For print pro
-00004410: 7879 0a20 2070 7269 6e74 5f75 726c 3a20  xy.  print_url: 
-00004420: 277b 5052 494e 545f 5552 4c7d 270a 2020  '{PRINT_URL}'.  
-00004430: 7072 696e 745f 6765 745f 7265 6469 7265  print_get_redire
-00004440: 6374 3a20 6661 6c73 6520 2320 6966 2074  ct: false # if t
-00004450: 7275 652c 2072 6564 6972 6563 7473 2028  rue, redirects (
-00004460: 3330 3229 2064 6972 6563 746c 7920 746f  302) directly to
-00004470: 2074 6865 2070 7269 6e74 2074 6f20 6665   the print to fe
-00004480: 7463 6820 7468 6520 7265 706f 7274 0a0a  tch the report..
-00004490: 2020 6465 7673 6572 7665 725f 7572 6c3a    devserver_url:
-000044a0: 2068 7474 703a 2f2f 7b44 4556 5345 5256   http://{DEVSERV
-000044b0: 4552 5f48 4f53 547d 7b56 4953 4942 4c45  ER_HOST}{VISIBLE
-000044c0: 5f45 4e54 5259 5f50 4f49 4e54 7d0a 0a20  _ENTRY_POINT}.. 
-000044d0: 2070 6466 7265 706f 7274 3a0a 2020 2020   pdfreport:.    
-000044e0: 7072 696e 745f 7572 6c3a 2027 7b50 5249  print_url: '{PRI
-000044f0: 4e54 5f55 524c 7d27 0a0a 2020 6c69 6e67  NT_URL}'..  ling
-00004500: 7561 5f65 7874 7261 6374 6f72 3a20 7b7d  ua_extractor: {}
-00004510: 0a0a 2020 636f 6e74 656e 745f 7365 6375  ..  content_secu
-00004520: 7269 7479 5f70 6f6c 6963 795f 6d61 696e  rity_policy_main
-00004530: 5f64 6566 6175 6c74 5f73 7263 5f65 7874  _default_src_ext
-00004540: 7261 3a20 2727 0a20 2063 6f6e 7465 6e74  ra: ''.  content
-00004550: 5f73 6563 7572 6974 795f 706f 6c69 6379  _security_policy
-00004560: 5f6d 6169 6e5f 7363 7269 7074 5f73 7263  _main_script_src
-00004570: 5f65 7874 7261 3a20 270a 2020 2020 6874  _extra: '.    ht
-00004580: 7470 733a 2f2f 6d61 7073 2e67 6f6f 676c  tps://maps.googl
-00004590: 652e 636f 6d2f 0a20 2020 2068 7474 7073  e.com/.    https
-000045a0: 3a2f 2f6d 6170 732e 676f 6f67 6c65 6170  ://maps.googleap
-000045b0: 6973 2e63 6f6d 2f0a 2020 2020 6874 7470  is.com/.    http
-000045c0: 733a 2f2f 7777 772e 676f 6f67 6c65 2d61  s://www.google-a
-000045d0: 6e61 6c79 7469 6373 2e63 6f6d 2f27 0a20  nalytics.com/'. 
-000045e0: 2063 6f6e 7465 6e74 5f73 6563 7572 6974   content_securit
-000045f0: 795f 706f 6c69 6379 5f6d 6169 6e5f 7374  y_policy_main_st
-00004600: 796c 655f 7372 635f 6578 7472 613a 2027  yle_src_extra: '
-00004610: 0a20 2020 2068 7474 7073 3a2f 2f66 6f6e  .    https://fon
-00004620: 7473 2e67 6f6f 676c 6561 7069 732e 636f  ts.googleapis.co
-00004630: 6d2f 270a 2020 636f 6e74 656e 745f 7365  m/'.  content_se
-00004640: 6375 7269 7479 5f70 6f6c 6963 795f 6d61  curity_policy_ma
-00004650: 696e 5f69 6d67 5f73 7263 5f65 7874 7261  in_img_src_extra
-00004660: 3a20 2727 0a20 2063 6f6e 7465 6e74 5f73  : ''.  content_s
-00004670: 6563 7572 6974 795f 706f 6c69 6379 5f6d  ecurity_policy_m
-00004680: 6169 6e5f 636f 6e6e 6563 745f 7372 635f  ain_connect_src_
-00004690: 6578 7472 613a 2027 270a 2020 636f 6e74  extra: ''.  cont
-000046a0: 656e 745f 7365 6375 7269 7479 5f70 6f6c  ent_security_pol
-000046b0: 6963 795f 6d61 696e 5f64 6566 6175 6c74  icy_main_default
-000046c0: 5f73 7263 3a20 220a 2020 2020 2773 656c  _src: ".    'sel
-000046d0: 6627 0a20 2020 2068 7474 7073 3a2f 2f2a  f'.    https://*
-000046e0: 0a20 2020 207b 636f 6e74 656e 745f 7365  .    {content_se
-000046f0: 6375 7269 7479 5f70 6f6c 6963 795f 6d61  curity_policy_ma
-00004700: 696e 5f64 6566 6175 6c74 5f73 7263 5f65  in_default_src_e
-00004710: 7874 7261 7d22 0a20 2063 6f6e 7465 6e74  xtra}".  content
-00004720: 5f73 6563 7572 6974 795f 706f 6c69 6379  _security_policy
-00004730: 5f6d 6169 6e5f 7363 7269 7074 5f73 7263  _main_script_src
-00004740: 3a20 220a 2020 2020 2773 656c 6627 0a20  : ".    'self'. 
-00004750: 2020 2027 756e 7361 6665 2d69 6e6c 696e     'unsafe-inlin
-00004760: 6527 0a20 2020 2027 756e 7361 6665 2d65  e'.    'unsafe-e
-00004770: 7661 6c27 0a20 2020 2068 7474 7073 3a2f  val'.    https:/
-00004780: 2f63 646e 2e70 6f6c 7966 696c 6c2e 696f  /cdn.polyfill.io
-00004790: 2f0a 2020 2020 7b63 6f6e 7465 6e74 5f73  /.    {content_s
-000047a0: 6563 7572 6974 795f 706f 6c69 6379 5f6d  ecurity_policy_m
-000047b0: 6169 6e5f 7363 7269 7074 5f73 7263 5f65  ain_script_src_e
-000047c0: 7874 7261 7d22 0a20 2063 6f6e 7465 6e74  xtra}".  content
-000047d0: 5f73 6563 7572 6974 795f 706f 6c69 6379  _security_policy
-000047e0: 5f6d 6169 6e5f 7374 796c 655f 7372 633a  _main_style_src:
-000047f0: 2022 0a20 2020 2027 7365 6c66 270a 2020   ".    'self'.  
-00004800: 2020 2775 6e73 6166 652d 696e 6c69 6e65    'unsafe-inline
-00004810: 270a 2020 2020 7b63 6f6e 7465 6e74 5f73  '.    {content_s
-00004820: 6563 7572 6974 795f 706f 6c69 6379 5f6d  ecurity_policy_m
-00004830: 6169 6e5f 7374 796c 655f 7372 635f 6578  ain_style_src_ex
-00004840: 7472 617d 220a 2020 636f 6e74 656e 745f  tra}".  content_
-00004850: 7365 6375 7269 7479 5f70 6f6c 6963 795f  security_policy_
-00004860: 6d61 696e 5f69 6d67 5f73 7263 3a20 270a  main_img_src: '.
-00004870: 2020 2020 2a0a 2020 2020 6461 7461 3a0a      *.    data:.
-00004880: 2020 2020 626c 6f62 3a0a 2020 2020 7b63      blob:.    {c
-00004890: 6f6e 7465 6e74 5f73 6563 7572 6974 795f  ontent_security_
-000048a0: 706f 6c69 6379 5f6d 6169 6e5f 696d 675f  policy_main_img_
-000048b0: 7372 635f 6578 7472 617d 270a 2020 636f  src_extra}'.  co
-000048c0: 6e74 656e 745f 7365 6375 7269 7479 5f70  ntent_security_p
-000048d0: 6f6c 6963 795f 6d61 696e 5f63 6f6e 6e65  olicy_main_conne
-000048e0: 6374 5f73 7263 3a20 270a 2020 2020 2a0a  ct_src: '.    *.
-000048f0: 2020 2020 7b63 6f6e 7465 6e74 5f73 6563      {content_sec
-00004900: 7572 6974 795f 706f 6c69 6379 5f6d 6169  urity_policy_mai
-00004910: 6e5f 636f 6e6e 6563 745f 7372 635f 6578  n_connect_src_ex
-00004920: 7472 617d 270a 0a20 2063 6f6e 7465 6e74  tra}'..  content
-00004930: 5f73 6563 7572 6974 795f 706f 6c69 6379  _security_policy
-00004940: 5f61 646d 696e 5f64 6566 6175 6c74 5f73  _admin_default_s
-00004950: 7263 5f65 7874 7261 3a20 2727 0a20 2063  rc_extra: ''.  c
-00004960: 6f6e 7465 6e74 5f73 6563 7572 6974 795f  ontent_security_
-00004970: 706f 6c69 6379 5f61 646d 696e 5f73 6372  policy_admin_scr
-00004980: 6970 745f 7372 635f 6578 7472 613a 2027  ipt_src_extra: '
-00004990: 270a 2020 636f 6e74 656e 745f 7365 6375  '.  content_secu
-000049a0: 7269 7479 5f70 6f6c 6963 795f 6164 6d69  rity_policy_admi
-000049b0: 6e5f 7374 796c 655f 7372 635f 6578 7472  n_style_src_extr
-000049c0: 613a 2027 270a 2020 636f 6e74 656e 745f  a: ''.  content_
-000049d0: 7365 6375 7269 7479 5f70 6f6c 6963 795f  security_policy_
-000049e0: 6164 6d69 6e5f 696d 675f 7372 635f 6578  admin_img_src_ex
-000049f0: 7472 613a 2027 270a 2020 636f 6e74 656e  tra: ''.  conten
-00004a00: 745f 7365 6375 7269 7479 5f70 6f6c 6963  t_security_polic
-00004a10: 795f 6164 6d69 6e5f 776f 726b 6572 5f73  y_admin_worker_s
-00004a20: 7263 5f65 7874 7261 3a20 2727 0a20 2063  rc_extra: ''.  c
-00004a30: 6f6e 7465 6e74 5f73 6563 7572 6974 795f  ontent_security_
-00004a40: 706f 6c69 6379 5f61 646d 696e 5f64 6566  policy_admin_def
-00004a50: 6175 6c74 5f73 7263 3a20 220a 2020 2020  ault_src: ".    
-00004a60: 2773 656c 6627 0a20 2020 207b 636f 6e74  'self'.    {cont
-00004a70: 656e 745f 7365 6375 7269 7479 5f70 6f6c  ent_security_pol
-00004a80: 6963 795f 6164 6d69 6e5f 6465 6661 756c  icy_admin_defaul
-00004a90: 745f 7372 635f 6578 7472 617d 220a 2020  t_src_extra}".  
-00004aa0: 636f 6e74 656e 745f 7365 6375 7269 7479  content_security
-00004ab0: 5f70 6f6c 6963 795f 6164 6d69 6e5f 7363  _policy_admin_sc
-00004ac0: 7269 7074 5f73 7263 3a20 220a 2020 2020  ript_src: ".    
-00004ad0: 2773 656c 6627 0a20 2020 2027 756e 7361  'self'.    'unsa
-00004ae0: 6665 2d69 6e6c 696e 6527 0a20 2020 207b  fe-inline'.    {
-00004af0: 636f 6e74 656e 745f 7365 6375 7269 7479  content_security
-00004b00: 5f70 6f6c 6963 795f 6164 6d69 6e5f 7363  _policy_admin_sc
-00004b10: 7269 7074 5f73 7263 5f65 7874 7261 7d22  ript_src_extra}"
-00004b20: 0a20 2063 6f6e 7465 6e74 5f73 6563 7572  .  content_secur
-00004b30: 6974 795f 706f 6c69 6379 5f61 646d 696e  ity_policy_admin
-00004b40: 5f73 7479 6c65 5f73 7263 3a20 220a 2020  _style_src: ".  
-00004b50: 2020 2773 656c 6627 0a20 2020 2027 756e    'self'.    'un
-00004b60: 7361 6665 2d69 6e6c 696e 6527 0a20 2020  safe-inline'.   
-00004b70: 2068 7474 7073 3a2f 2f73 7461 636b 7061   https://stackpa
-00004b80: 7468 2e62 6f6f 7473 7472 6170 6364 6e2e  th.bootstrapcdn.
-00004b90: 636f 6d2f 0a20 2020 207b 636f 6e74 656e  com/.    {conten
-00004ba0: 745f 7365 6375 7269 7479 5f70 6f6c 6963  t_security_polic
-00004bb0: 795f 6164 6d69 6e5f 7374 796c 655f 7372  y_admin_style_sr
-00004bc0: 635f 6578 7472 617d 220a 2020 636f 6e74  c_extra}".  cont
-00004bd0: 656e 745f 7365 6375 7269 7479 5f70 6f6c  ent_security_pol
-00004be0: 6963 795f 6164 6d69 6e5f 696d 675f 7372  icy_admin_img_sr
-00004bf0: 633a 2027 0a20 2020 202a 0a20 2020 2064  c: '.    *.    d
-00004c00: 6174 613a 0a20 2020 207b 636f 6e74 656e  ata:.    {conten
-00004c10: 745f 7365 6375 7269 7479 5f70 6f6c 6963  t_security_polic
-00004c20: 795f 6164 6d69 6e5f 696d 675f 7372 635f  y_admin_img_src_
-00004c30: 6578 7472 617d 270a 2020 636f 6e74 656e  extra}'.  conten
-00004c40: 745f 7365 6375 7269 7479 5f70 6f6c 6963  t_security_polic
-00004c50: 795f 6164 6d69 6e5f 776f 726b 6572 5f73  y_admin_worker_s
-00004c60: 7263 3a20 220a 2020 2020 2773 656c 6627  rc: ".    'self'
-00004c70: 0a20 2020 2062 6c6f 623a 0a20 2020 207b  .    blob:.    {
-00004c80: 636f 6e74 656e 745f 7365 6375 7269 7479  content_security
-00004c90: 5f70 6f6c 6963 795f 6164 6d69 6e5f 776f  _policy_admin_wo
-00004ca0: 726b 6572 5f73 7263 5f65 7874 7261 7d22  rker_src_extra}"
-00004cb0: 0a0a 2020 636f 6e74 656e 745f 7365 6375  ..  content_secu
-00004cc0: 7269 7479 5f70 6f6c 6963 795f 6170 6968  rity_policy_apih
-00004cd0: 656c 705f 6465 6661 756c 745f 7372 635f  elp_default_src_
-00004ce0: 6578 7472 613a 2027 270a 2020 636f 6e74  extra: ''.  cont
-00004cf0: 656e 745f 7365 6375 7269 7479 5f70 6f6c  ent_security_pol
-00004d00: 6963 795f 6170 6968 656c 705f 7363 7269  icy_apihelp_scri
-00004d10: 7074 5f73 7263 5f65 7874 7261 3a20 2727  pt_src_extra: ''
-00004d20: 0a20 2063 6f6e 7465 6e74 5f73 6563 7572  .  content_secur
-00004d30: 6974 795f 706f 6c69 6379 5f61 7069 6865  ity_policy_apihe
-00004d40: 6c70 5f73 7479 6c65 5f73 7263 5f65 7874  lp_style_src_ext
-00004d50: 7261 3a20 2727 0a20 2063 6f6e 7465 6e74  ra: ''.  content
-00004d60: 5f73 6563 7572 6974 795f 706f 6c69 6379  _security_policy
-00004d70: 5f61 7069 6865 6c70 5f69 6d67 5f73 7263  _apihelp_img_src
-00004d80: 5f65 7874 7261 3a20 2727 0a20 2063 6f6e  _extra: ''.  con
-00004d90: 7465 6e74 5f73 6563 7572 6974 795f 706f  tent_security_po
-00004da0: 6c69 6379 5f61 7069 6865 6c70 5f63 6f6e  licy_apihelp_con
-00004db0: 6e65 6374 5f73 7263 5f65 7874 7261 3a20  nect_src_extra: 
-00004dc0: 2727 0a20 2063 6f6e 7465 6e74 5f73 6563  ''.  content_sec
-00004dd0: 7572 6974 795f 706f 6c69 6379 5f61 7069  urity_policy_api
-00004de0: 6865 6c70 5f64 6566 6175 6c74 5f73 7263  help_default_src
-00004df0: 3a20 220a 2020 2020 2773 656c 6627 0a20  : ".    'self'. 
-00004e00: 2020 2068 7474 7073 3a2f 2f2a 0a20 2020     https://*.   
-00004e10: 207b 636f 6e74 656e 745f 7365 6375 7269   {content_securi
-00004e20: 7479 5f70 6f6c 6963 795f 6170 6968 656c  ty_policy_apihel
-00004e30: 705f 6465 6661 756c 745f 7372 635f 6578  p_default_src_ex
-00004e40: 7472 617d 220a 2020 636f 6e74 656e 745f  tra}".  content_
-00004e50: 7365 6375 7269 7479 5f70 6f6c 6963 795f  security_policy_
-00004e60: 6170 6968 656c 705f 7363 7269 7074 5f73  apihelp_script_s
-00004e70: 7263 3a20 220a 2020 2020 2773 656c 6627  rc: ".    'self'
-00004e80: 0a20 2020 2027 756e 7361 6665 2d69 6e6c  .    'unsafe-inl
-00004e90: 696e 6527 0a20 2020 2027 756e 7361 6665  ine'.    'unsafe
-00004ea0: 2d65 7661 6c27 0a20 2020 2068 7474 7073  -eval'.    https
-00004eb0: 3a2f 2f63 646e 2e70 6f6c 7966 696c 6c2e  ://cdn.polyfill.
-00004ec0: 696f 2f0a 2020 2020 7b63 6f6e 7465 6e74  io/.    {content
-00004ed0: 5f73 6563 7572 6974 795f 706f 6c69 6379  _security_policy
-00004ee0: 5f61 7069 6865 6c70 5f73 6372 6970 745f  _apihelp_script_
-00004ef0: 7372 635f 6578 7472 617d 220a 2020 636f  src_extra}".  co
-00004f00: 6e74 656e 745f 7365 6375 7269 7479 5f70  ntent_security_p
-00004f10: 6f6c 6963 795f 6170 6968 656c 705f 7374  olicy_apihelp_st
-00004f20: 796c 655f 7372 633a 2022 0a20 2020 2027  yle_src: ".    '
-00004f30: 7365 6c66 270a 2020 2020 2775 6e73 6166  self'.    'unsaf
-00004f40: 652d 696e 6c69 6e65 270a 2020 2020 6874  e-inline'.    ht
-00004f50: 7470 733a 2f2f 7374 6163 6b70 6174 682e  tps://stackpath.
-00004f60: 626f 6f74 7374 7261 7063 646e 2e63 6f6d  bootstrapcdn.com
-00004f70: 2f0a 2020 2020 7b63 6f6e 7465 6e74 5f73  /.    {content_s
-00004f80: 6563 7572 6974 795f 706f 6c69 6379 5f61  ecurity_policy_a
-00004f90: 7069 6865 6c70 5f73 7479 6c65 5f73 7263  pihelp_style_src
-00004fa0: 5f65 7874 7261 7d22 0a20 2063 6f6e 7465  _extra}".  conte
-00004fb0: 6e74 5f73 6563 7572 6974 795f 706f 6c69  nt_security_poli
-00004fc0: 6379 5f61 7069 6865 6c70 5f69 6d67 5f73  cy_apihelp_img_s
-00004fd0: 7263 3a20 270a 2020 2020 2a0a 2020 2020  rc: '.    *.    
-00004fe0: 6461 7461 3a0a 2020 2020 7b63 6f6e 7465  data:.    {conte
-00004ff0: 6e74 5f73 6563 7572 6974 795f 706f 6c69  nt_security_poli
-00005000: 6379 5f61 7069 6865 6c70 5f69 6d67 5f73  cy_apihelp_img_s
-00005010: 7263 5f65 7874 7261 7d27 0a20 2063 6f6e  rc_extra}'.  con
-00005020: 7465 6e74 5f73 6563 7572 6974 795f 706f  tent_security_po
-00005030: 6c69 6379 5f61 7069 6865 6c70 5f63 6f6e  licy_apihelp_con
-00005040: 6e65 6374 5f73 7263 3a20 270a 2020 2020  nect_src: '.    
-00005050: 2a0a 2020 2020 7b63 6f6e 7465 6e74 5f73  *.    {content_s
-00005060: 6563 7572 6974 795f 706f 6c69 6379 5f61  ecurity_policy_a
-00005070: 7069 6865 6c70 5f63 6f6e 6e65 6374 5f73  pihelp_connect_s
-00005080: 7263 5f65 7874 7261 7d27 0a0a 2020 636f  rc_extra}'..  co
-00005090: 6e74 656e 745f 7365 6375 7269 7479 5f70  ntent_security_p
-000050a0: 6f6c 6963 795f 6332 635f 6465 6661 756c  olicy_c2c_defaul
-000050b0: 745f 7372 635f 6578 7472 613a 2027 270a  t_src_extra: ''.
-000050c0: 2020 636f 6e74 656e 745f 7365 6375 7269    content_securi
-000050d0: 7479 5f70 6f6c 6963 795f 6332 635f 7363  ty_policy_c2c_sc
-000050e0: 7269 7074 5f73 7263 5f65 7874 7261 3a20  ript_src_extra: 
-000050f0: 2727 0a20 2063 6f6e 7465 6e74 5f73 6563  ''.  content_sec
-00005100: 7572 6974 795f 706f 6c69 6379 5f63 3263  urity_policy_c2c
-00005110: 5f73 7479 6c65 5f73 7263 5f65 7874 7261  _style_src_extra
-00005120: 3a20 2727 0a20 2063 6f6e 7465 6e74 5f73  : ''.  content_s
-00005130: 6563 7572 6974 795f 706f 6c69 6379 5f63  ecurity_policy_c
-00005140: 3263 5f64 6566 6175 6c74 5f73 7263 3a20  2c_default_src: 
-00005150: 220a 2020 2020 2773 656c 6627 0a20 2020  ".    'self'.   
-00005160: 207b 636f 6e74 656e 745f 7365 6375 7269   {content_securi
-00005170: 7479 5f70 6f6c 6963 795f 6332 635f 6465  ty_policy_c2c_de
-00005180: 6661 756c 745f 7372 635f 6578 7472 617d  fault_src_extra}
-00005190: 220a 2020 636f 6e74 656e 745f 7365 6375  ".  content_secu
-000051a0: 7269 7479 5f70 6f6c 6963 795f 6332 635f  rity_policy_c2c_
-000051b0: 7363 7269 7074 5f73 7263 3a20 220a 2020  script_src: ".  
-000051c0: 2020 2773 656c 6627 0a20 2020 207b 636f    'self'.    {co
-000051d0: 6e74 656e 745f 7365 6375 7269 7479 5f70  ntent_security_p
-000051e0: 6f6c 6963 795f 6332 635f 7363 7269 7074  olicy_c2c_script
-000051f0: 5f73 7263 5f65 7874 7261 7d22 0a20 2063  _src_extra}".  c
-00005200: 6f6e 7465 6e74 5f73 6563 7572 6974 795f  ontent_security_
-00005210: 706f 6c69 6379 5f63 3263 5f73 7479 6c65  policy_c2c_style
-00005220: 5f73 7263 3a20 220a 2020 2020 2773 656c  _src: ".    'sel
-00005230: 6627 0a20 2020 2027 756e 7361 6665 2d69  f'.    'unsafe-i
-00005240: 6e6c 696e 6527 0a20 2020 2068 7474 7073  nline'.    https
-00005250: 3a2f 2f73 7461 636b 7061 7468 2e62 6f6f  ://stackpath.boo
-00005260: 7473 7472 6170 6364 6e2e 636f 6d2f 0a20  tstrapcdn.com/. 
-00005270: 2020 207b 636f 6e74 656e 745f 7365 6375     {content_secu
-00005280: 7269 7479 5f70 6f6c 6963 795f 6332 635f  rity_policy_c2c_
-00005290: 7374 796c 655f 7372 635f 6578 7472 617d  style_src_extra}
-000052a0: 220a 0a20 2067 6c6f 6261 6c5f 6865 6164  "..  global_head
-000052b0: 6572 733a 0a20 2020 202d 2070 6174 7465  ers:.    - patte
-000052c0: 726e 3a20 275e 2f61 646d 696e 2f2e 2a27  rn: '^/admin/.*'
-000052d0: 0a20 2020 2020 2068 6561 6465 7273 3a20  .      headers: 
-000052e0: 2663 3263 6765 6f66 6f72 6d5f 6865 6164  &c2cgeoform_head
-000052f0: 6572 730a 2020 2020 2020 2020 582d 4672  ers.        X-Fr
-00005300: 616d 652d 4f70 7469 6f6e 733a 2053 414d  ame-Options: SAM
-00005310: 454f 5249 4749 4e0a 2020 2020 2020 2020  EORIGIN.        
-00005320: 582d 5873 732d 5072 6f74 6563 7469 6f6e  X-Xss-Protection
-00005330: 3a20 313b 206d 6f64 653d 626c 6f63 6b0a  : 1; mode=block.
-00005340: 2020 2020 2020 2020 582d 436f 6e74 656e          X-Conten
-00005350: 742d 5479 7065 2d4f 7074 696f 6e73 3a20  t-Type-Options: 
-00005360: 6e6f 736e 6966 660a 2020 2020 2020 2020  nosniff.        
-00005370: 5265 6665 7272 6572 2d50 6f6c 6963 793a  Referrer-Policy:
-00005380: 2073 616d 652d 6f72 6967 696e 0a20 2020   same-origin.   
-00005390: 2020 2020 2053 7472 6963 742d 5472 616e       Strict-Tran
-000053a0: 7370 6f72 742d 5365 6375 7269 7479 3a20  sport-Security: 
-000053b0: 6d61 782d 6167 653d 3331 3533 3630 3030  max-age=31536000
-000053c0: 3b20 696e 636c 7564 6553 7562 446f 6d61  ; includeSubDoma
-000053d0: 696e 730a 2020 2020 2020 2020 436f 6e74  ins.        Cont
-000053e0: 656e 742d 5365 6375 7269 7479 2d50 6f6c  ent-Security-Pol
-000053f0: 6963 793a 2027 6465 6661 756c 742d 7372  icy: 'default-sr
-00005400: 6320 7b63 6f6e 7465 6e74 5f73 6563 7572  c {content_secur
-00005410: 6974 795f 706f 6c69 6379 5f61 646d 696e  ity_policy_admin
-00005420: 5f64 6566 6175 6c74 5f73 7263 7d3b 0a20  _default_src};. 
-00005430: 2020 2020 2020 2020 2073 6372 6970 742d           script-
-00005440: 7372 6320 7b63 6f6e 7465 6e74 5f73 6563  src {content_sec
-00005450: 7572 6974 795f 706f 6c69 6379 5f61 646d  urity_policy_adm
-00005460: 696e 5f73 6372 6970 745f 7372 637d 3b0a  in_script_src};.
-00005470: 2020 2020 2020 2020 2020 7374 796c 652d            style-
-00005480: 7372 6320 7b63 6f6e 7465 6e74 5f73 6563  src {content_sec
-00005490: 7572 6974 795f 706f 6c69 6379 5f61 646d  urity_policy_adm
-000054a0: 696e 5f73 7479 6c65 5f73 7263 7d3b 0a20  in_style_src};. 
-000054b0: 2020 2020 2020 2020 2069 6d67 2d73 7263           img-src
-000054c0: 207b 636f 6e74 656e 745f 7365 6375 7269   {content_securi
-000054d0: 7479 5f70 6f6c 6963 795f 6164 6d69 6e5f  ty_policy_admin_
-000054e0: 696d 675f 7372 637d 3b0a 2020 2020 2020  img_src};.      
-000054f0: 2020 2020 776f 726b 6572 2d73 7263 207b      worker-src {
-00005500: 636f 6e74 656e 745f 7365 6375 7269 7479  content_security
-00005510: 5f70 6f6c 6963 795f 6164 6d69 6e5f 776f  _policy_admin_wo
-00005520: 726b 6572 5f73 7263 7d27 0a20 2020 202d  rker_src}'.    -
-00005530: 2070 6174 7465 726e 3a20 275e 2f67 6574   pattern: '^/get
-00005540: 6974 6669 7865 642e 2a27 0a20 2020 2020  itfixed.*'.     
-00005550: 2068 6561 6465 7273 3a20 2a63 3263 6765   headers: *c2cge
-00005560: 6f66 6f72 6d5f 6865 6164 6572 730a 2020  oform_headers.  
-00005570: 2020 2d20 7061 7474 6572 6e3a 2027 5e2f    - pattern: '^/
-00005580: 7374 6174 6963 2f2e 2a27 0a20 2020 2020  static/.*'.     
-00005590: 2068 6561 6465 7273 3a0a 2020 2020 2020   headers:.      
-000055a0: 2020 4163 6365 7373 2d43 6f6e 7472 6f6c    Access-Control
-000055b0: 2d41 6c6c 6f77 2d4f 7269 6769 6e3a 2027  -Allow-Origin: '
-000055c0: 2a27 0a20 2020 2020 2020 2041 6363 6573  *'.        Acces
-000055d0: 732d 436f 6e74 726f 6c2d 416c 6c6f 772d  s-Control-Allow-
-000055e0: 4865 6164 6572 733a 2058 2d52 6571 7565  Headers: X-Reque
-000055f0: 7374 6564 2d57 6974 682c 2043 6f6e 7465  sted-With, Conte
-00005600: 6e74 2d54 7970 650a 2020 2020 2d20 7061  nt-Type.    - pa
-00005610: 7474 6572 6e3a 2027 5e2f 7374 6174 6963  ttern: '^/static
-00005620: 2d6e 6765 6f2f 2e2a 270a 2020 2020 2020  -ngeo/.*'.      
-00005630: 6865 6164 6572 733a 0a20 2020 2020 2020  headers:.       
-00005640: 2041 6363 6573 732d 436f 6e74 726f 6c2d   Access-Control-
-00005650: 416c 6c6f 772d 4f72 6967 696e 3a20 272a  Allow-Origin: '*
-00005660: 270a 2020 2020 2020 2020 4163 6365 7373  '.        Access
-00005670: 2d43 6f6e 7472 6f6c 2d41 6c6c 6f77 2d48  -Control-Allow-H
-00005680: 6561 6465 7273 3a20 582d 5265 7175 6573  eaders: X-Reques
-00005690: 7465 642d 5769 7468 2c20 436f 6e74 656e  ted-With, Conten
-000056a0: 742d 5479 7065 0a20 2020 202d 2070 6174  t-Type.    - pat
-000056b0: 7465 726e 3a20 275e 2f63 3263 2427 0a20  tern: '^/c2c$'. 
-000056c0: 2020 2020 2068 6561 6465 7273 3a0a 2020       headers:.  
-000056d0: 2020 2020 2020 436f 6e74 656e 742d 5365        Content-Se
-000056e0: 6375 7269 7479 2d50 6f6c 6963 793a 2027  curity-Policy: '
-000056f0: 6465 6661 756c 742d 7372 6320 7b63 6f6e  default-src {con
-00005700: 7465 6e74 5f73 6563 7572 6974 795f 706f  tent_security_po
-00005710: 6c69 6379 5f63 3263 5f64 6566 6175 6c74  licy_c2c_default
-00005720: 5f73 7263 7d3b 0a20 2020 2020 2020 2020  _src};.         
-00005730: 2073 6372 6970 742d 7372 6320 7b63 6f6e   script-src {con
-00005740: 7465 6e74 5f73 6563 7572 6974 795f 706f  tent_security_po
-00005750: 6c69 6379 5f63 3263 5f73 6372 6970 745f  licy_c2c_script_
-00005760: 7372 637d 3b0a 2020 2020 2020 2020 2020  src};.          
-00005770: 7374 796c 652d 7372 6320 7b63 6f6e 7465  style-src {conte
-00005780: 6e74 5f73 6563 7572 6974 795f 706f 6c69  nt_security_poli
-00005790: 6379 5f63 3263 5f73 7479 6c65 5f73 7263  cy_c2c_style_src
-000057a0: 7d3b 270a 2020 2020 2d20 7061 7474 6572  };'.    - patter
-000057b0: 6e3a 2027 5e2f 6332 632f 2e2a 270a 2020  n: '^/c2c/.*'.  
-000057c0: 2020 2020 6865 6164 6572 733a 0a20 2020      headers:.   
-000057d0: 2020 2020 2043 6f6e 7465 6e74 2d53 6563       Content-Sec
-000057e0: 7572 6974 792d 506f 6c69 6379 3a20 2764  urity-Policy: 'd
-000057f0: 6566 6175 6c74 2d73 7263 207b 636f 6e74  efault-src {cont
-00005800: 656e 745f 7365 6375 7269 7479 5f70 6f6c  ent_security_pol
-00005810: 6963 795f 6332 635f 6465 6661 756c 745f  icy_c2c_default_
-00005820: 7372 637d 3b0a 2020 2020 2020 2020 2020  src};.          
-00005830: 7363 7269 7074 2d73 7263 207b 636f 6e74  script-src {cont
-00005840: 656e 745f 7365 6375 7269 7479 5f70 6f6c  ent_security_pol
-00005850: 6963 795f 6332 635f 7363 7269 7074 5f73  icy_c2c_script_s
-00005860: 7263 7d3b 0a20 2020 2020 2020 2020 2073  rc};.          s
-00005870: 7479 6c65 2d73 7263 207b 636f 6e74 656e  tyle-src {conten
-00005880: 745f 7365 6375 7269 7479 5f70 6f6c 6963  t_security_polic
-00005890: 795f 6332 635f 7374 796c 655f 7372 637d  y_c2c_style_src}
-000058a0: 3b27 0a0a 2020 2320 436f 6e74 726f 6c20  ;'..  # Control 
-000058b0: 7468 6520 4854 5450 2068 6561 6465 7273  the HTTP headers
-000058c0: 0a20 2068 6561 6465 7273 3a0a 2020 2020  .  headers:.    
-000058d0: 6479 6e61 6d69 633a 2026 6865 6164 6572  dynamic: &header
-000058e0: 0a20 2020 2020 2063 6163 6865 5f63 6f6e  .      cache_con
-000058f0: 7472 6f6c 5f6d 6178 5f61 6765 3a20 3630  trol_max_age: 60
-00005900: 3020 2320 3130 206d 696e 7574 6573 0a20  0 # 10 minutes. 
-00005910: 2020 2020 2061 6363 6573 735f 636f 6e74       access_cont
-00005920: 726f 6c5f 6d61 785f 6167 653a 2036 3030  rol_max_age: 600
-00005930: 2023 2031 3020 6d69 6e75 7465 730a 2020   # 10 minutes.  
-00005940: 2020 2020 6163 6365 7373 5f63 6f6e 7472      access_contr
-00005950: 6f6c 5f61 6c6c 6f77 5f6f 7269 6769 6e3a  ol_allow_origin:
-00005960: 0a20 2020 2020 2020 202d 2027 2a27 0a20  .        - '*'. 
-00005970: 2020 2069 6e64 6578 3a0a 2020 2020 2020     index:.      
-00005980: 3c3c 3a20 2a68 6561 6465 720a 2020 2020  <<: *header.    
-00005990: 2020 6865 6164 6572 733a 2026 7365 635f    headers: &sec_
-000059a0: 6865 6164 6572 730a 2020 2020 2020 2020  headers.        
-000059b0: 582d 4672 616d 652d 4f70 7469 6f6e 733a  X-Frame-Options:
-000059c0: 2053 414d 454f 5249 4749 4e0a 2020 2020   SAMEORIGIN.    
-000059d0: 2020 2020 582d 5873 732d 5072 6f74 6563      X-Xss-Protec
-000059e0: 7469 6f6e 3a20 313b 206d 6f64 653d 626c  tion: 1; mode=bl
-000059f0: 6f63 6b0a 2020 2020 2020 2020 582d 436f  ock.        X-Co
-00005a00: 6e74 656e 742d 5479 7065 2d4f 7074 696f  ntent-Type-Optio
-00005a10: 6e73 3a20 6e6f 736e 6966 660a 2020 2020  ns: nosniff.    
-00005a20: 2020 2020 5265 6665 7272 6572 2d50 6f6c      Referrer-Pol
-00005a30: 6963 793a 206f 7269 6769 6e0a 2020 2020  icy: origin.    
-00005a40: 2020 2020 5374 7269 6374 2d54 7261 6e73      Strict-Trans
-00005a50: 706f 7274 2d53 6563 7572 6974 793a 206d  port-Security: m
-00005a60: 6178 2d61 6765 3d33 3135 3336 3030 303b  ax-age=31536000;
-00005a70: 2069 6e63 6c75 6465 5375 6244 6f6d 6169   includeSubDomai
-00005a80: 6e73 0a20 2020 2020 2020 2043 6f6e 7465  ns.        Conte
-00005a90: 6e74 2d53 6563 7572 6974 792d 506f 6c69  nt-Security-Poli
-00005aa0: 6379 3a20 2764 6566 6175 6c74 2d73 7263  cy: 'default-src
-00005ab0: 207b 636f 6e74 656e 745f 7365 6375 7269   {content_securi
-00005ac0: 7479 5f70 6f6c 6963 795f 6d61 696e 5f64  ty_policy_main_d
-00005ad0: 6566 6175 6c74 5f73 7263 7d3b 0a20 2020  efault_src};.   
-00005ae0: 2020 2020 2020 2073 6372 6970 742d 7372         script-sr
-00005af0: 6320 7b63 6f6e 7465 6e74 5f73 6563 7572  c {content_secur
-00005b00: 6974 795f 706f 6c69 6379 5f6d 6169 6e5f  ity_policy_main_
-00005b10: 7363 7269 7074 5f73 7263 7d3b 0a20 2020  script_src};.   
-00005b20: 2020 2020 2020 2073 7479 6c65 2d73 7263         style-src
-00005b30: 207b 636f 6e74 656e 745f 7365 6375 7269   {content_securi
-00005b40: 7479 5f70 6f6c 6963 795f 6d61 696e 5f73  ty_policy_main_s
-00005b50: 7479 6c65 5f73 7263 7d3b 0a20 2020 2020  tyle_src};.     
-00005b60: 2020 2020 2069 6d67 2d73 7263 207b 636f       img-src {co
-00005b70: 6e74 656e 745f 7365 6375 7269 7479 5f70  ntent_security_p
-00005b80: 6f6c 6963 795f 6d61 696e 5f69 6d67 5f73  olicy_main_img_s
-00005b90: 7263 7d3b 0a20 2020 2020 2020 2020 2063  rc};.          c
-00005ba0: 6f6e 6e65 6374 2d73 7263 207b 636f 6e74  onnect-src {cont
-00005bb0: 656e 745f 7365 6375 7269 7479 5f70 6f6c  ent_security_pol
-00005bc0: 6963 795f 6d61 696e 5f63 6f6e 6e65 6374  icy_main_connect
-00005bd0: 5f73 7263 7d27 0a20 2020 2061 7069 3a20  _src}'.    api: 
-00005be0: 2a68 6561 6465 720a 2020 2020 6170 6968  *header.    apih
-00005bf0: 656c 703a 0a20 2020 2020 203c 3c3a 202a  elp:.      <<: *
-00005c00: 6865 6164 6572 0a20 2020 2020 2068 6561  header.      hea
-00005c10: 6465 7273 3a0a 2020 2020 2020 2020 3c3c  ders:.        <<
-00005c20: 3a20 2a73 6563 5f68 6561 6465 7273 0a20  : *sec_headers. 
-00005c30: 2020 2020 2020 2043 6f6e 7465 6e74 2d53         Content-S
-00005c40: 6563 7572 6974 792d 506f 6c69 6379 3a20  ecurity-Policy: 
-00005c50: 2764 6566 6175 6c74 2d73 7263 207b 636f  'default-src {co
-00005c60: 6e74 656e 745f 7365 6375 7269 7479 5f70  ntent_security_p
-00005c70: 6f6c 6963 795f 6170 6968 656c 705f 6465  olicy_apihelp_de
-00005c80: 6661 756c 745f 7372 637d 3b0a 2020 2020  fault_src};.    
-00005c90: 2020 2020 2020 7363 7269 7074 2d73 7263        script-src
-00005ca0: 207b 636f 6e74 656e 745f 7365 6375 7269   {content_securi
-00005cb0: 7479 5f70 6f6c 6963 795f 6170 6968 656c  ty_policy_apihel
-00005cc0: 705f 7363 7269 7074 5f73 7263 7d3b 0a20  p_script_src};. 
-00005cd0: 2020 2020 2020 2020 2073 7479 6c65 2d73           style-s
-00005ce0: 7263 207b 636f 6e74 656e 745f 7365 6375  rc {content_secu
-00005cf0: 7269 7479 5f70 6f6c 6963 795f 6170 6968  rity_policy_apih
-00005d00: 656c 705f 7374 796c 655f 7372 637d 3b0a  elp_style_src};.
-00005d10: 2020 2020 2020 2020 2020 696d 672d 7372            img-sr
-00005d20: 6320 7b63 6f6e 7465 6e74 5f73 6563 7572  c {content_secur
-00005d30: 6974 795f 706f 6c69 6379 5f61 7069 6865  ity_policy_apihe
-00005d40: 6c70 5f69 6d67 5f73 7263 7d3b 0a20 2020  lp_img_src};.   
-00005d50: 2020 2020 2020 2063 6f6e 6e65 6374 2d73         connect-s
-00005d60: 7263 207b 636f 6e74 656e 745f 7365 6375  rc {content_secu
-00005d70: 7269 7479 5f70 6f6c 6963 795f 6170 6968  rity_policy_apih
-00005d80: 656c 705f 636f 6e6e 6563 745f 7372 637d  elp_connect_src}
-00005d90: 270a 2020 2020 7072 6f66 696c 653a 202a  '.    profile: *
-00005da0: 6865 6164 6572 0a20 2020 2072 6173 7465  header.    raste
-00005db0: 723a 202a 6865 6164 6572 0a20 2020 2065  r: *header.    e
-00005dc0: 7272 6f72 3a20 2a68 6561 6465 720a 2020  rror: *header.  
-00005dd0: 2020 7468 656d 6573 3a20 2661 7574 685f    themes: &auth_
-00005de0: 6865 6164 6572 0a20 2020 2020 2063 6163  header.      cac
-00005df0: 6865 5f63 6f6e 7472 6f6c 5f6d 6178 5f61  he_control_max_a
-00005e00: 6765 3a20 3630 3020 2320 3130 206d 696e  ge: 600 # 10 min
-00005e10: 7574 6573 0a20 2020 2020 2061 6363 6573  utes.      acces
-00005e20: 735f 636f 6e74 726f 6c5f 6d61 785f 6167  s_control_max_ag
-00005e30: 653a 2036 3030 2023 2031 3020 6d69 6e75  e: 600 # 10 minu
-00005e40: 7465 730a 2020 2020 2020 6163 6365 7373  tes.      access
-00005e50: 5f63 6f6e 7472 6f6c 5f61 6c6c 6f77 5f6f  _control_allow_o
-00005e60: 7269 6769 6e3a 0a20 2020 2020 2020 202d  rigin:.        -
-00005e70: 2027 7b56 4953 4942 4c45 5f57 4542 5f50   '{VISIBLE_WEB_P
-00005e80: 524f 544f 434f 4c7d 3a2f 2f7b 5649 5349  ROTOCOL}://{VISI
-00005e90: 424c 455f 5745 425f 484f 5354 7d27 0a20  BLE_WEB_HOST}'. 
-00005ea0: 2020 2020 2020 202d 2027 2a27 0a20 2020         - '*'.   
-00005eb0: 2020 2068 6561 6465 7273 3a0a 2020 2020     headers:.    
-00005ec0: 2020 2020 5374 7269 6374 2d54 7261 6e73      Strict-Trans
-00005ed0: 706f 7274 2d53 6563 7572 6974 793a 206d  port-Security: m
-00005ee0: 6178 2d61 6765 3d33 3135 3336 3030 303b  ax-age=31536000;
-00005ef0: 2069 6e63 6c75 6465 5375 6244 6f6d 6169   includeSubDomai
-00005f00: 6e73 0a20 2020 2063 6f6e 6669 673a 202a  ns.    config: *
-00005f10: 6175 7468 5f68 6561 6465 720a 2020 2020  auth_header.    
-00005f20: 7072 696e 743a 202a 6175 7468 5f68 6561  print: *auth_hea
-00005f30: 6465 720a 2020 2020 6675 6c6c 7465 7874  der.    fulltext
-00005f40: 7365 6172 6368 3a20 2a61 7574 685f 6865  search: *auth_he
-00005f50: 6164 6572 0a20 2020 206d 6170 7365 7276  ader.    mapserv
-00005f60: 6572 3a20 2a61 7574 685f 6865 6164 6572  er: *auth_header
-00005f70: 0a20 2020 2074 696e 796f 7773 3a20 2a61  .    tinyows: *a
-00005f80: 7574 685f 6865 6164 6572 0a20 2020 206c  uth_header.    l
-00005f90: 6179 6572 733a 202a 6175 7468 5f68 6561  ayers: *auth_hea
-00005fa0: 6465 720a 2020 2020 7368 6f72 7465 6e65  der.    shortene
-00005fb0: 723a 202a 6175 7468 5f68 6561 6465 720a  r: *auth_header.
-00005fc0: 2020 2020 6c6f 6769 6e3a 0a20 2020 2020      login:.     
-00005fd0: 203c 3c3a 202a 6175 7468 5f68 6561 6465   <<: *auth_heade
-00005fe0: 720a 2020 2020 2020 6163 6365 7373 5f63  r.      access_c
-00005ff0: 6f6e 7472 6f6c 5f61 6c6c 6f77 5f6f 7269  ontrol_allow_ori
-00006000: 6769 6e3a 0a20 2020 2020 2020 202d 2027  gin:.        - '
-00006010: 7b56 4953 4942 4c45 5f57 4542 5f50 524f  {VISIBLE_WEB_PRO
-00006020: 544f 434f 4c7d 3a2f 2f7b 5649 5349 424c  TOCOL}://{VISIBL
-00006030: 455f 5745 425f 484f 5354 7d27 0a0a 2020  E_WEB_HOST}'..  
-00006040: 2320 4368 6563 6b65 7220 636f 6e66 6967  # Checker config
-00006050: 7572 6174 696f 6e0a 2020 6368 6563 6b65  uration.  checke
-00006060: 725f 6f67 635f 7365 7276 6572 3a20 736f  r_ogc_server: so
-00006070: 7572 6365 2066 6f72 2069 6d61 6765 2f70  urce for image/p
-00006080: 6e67 0a20 2063 6865 636b 6572 3a0a 2020  ng.  checker:.  
-00006090: 2020 666f 7277 6172 645f 686f 7374 3a20    forward_host: 
-000060a0: 4661 6c73 650a 2020 2020 6261 7365 5f69  False.    base_i
-000060b0: 6e74 6572 6e61 6c5f 7572 6c3a 2068 7474  nternal_url: htt
-000060c0: 703a 2f2f 6c6f 6361 6c68 6f73 743a 3830  p://localhost:80
-000060d0: 3830 0a20 2020 2066 756c 6c74 6578 7473  80.    fulltexts
-000060e0: 6561 7263 683a 0a20 2020 2020 2064 6973  earch:.      dis
-000060f0: 6162 6c65 3a20 4661 6c73 650a 2020 2020  able: False.    
-00006100: 2020 6c65 7665 6c3a 2033 0a20 2020 2020    level: 3.     
-00006110: 2073 6561 7263 683a 2074 6578 7420 746f   search: text to
-00006120: 2073 6561 7263 680a 2020 2020 6c61 6e67   search.    lang
-00006130: 3a0a 2020 2020 2020 6c65 7665 6c3a 2033  :.      level: 3
-00006140: 0a20 2020 2020 2066 696c 6573 3a20 5b6e  .      files: [n
-00006150: 6765 6f5d 0a20 2020 2070 6861 6e74 6f6d  geo].    phantom
-00006160: 6a73 3a0a 2020 2020 2020 6469 7361 626c  js:.      disabl
-00006170: 653a 205b 5d0a 2020 2020 2020 726f 7574  e: [].      rout
-00006180: 6573 3a0a 2020 2020 2020 2020 2d20 6e61  es:.        - na
-00006190: 6d65 3a20 6465 736b 746f 700a 2020 2020  me: desktop.    
-000061a0: 2020 2020 2020 7061 7261 6d73 3a0a 2020        params:.  
-000061b0: 2020 2020 2020 2020 2020 6e6f 5f72 6564            no_red
-000061c0: 6972 6563 743a 2027 7472 7565 270a 2020  irect: 'true'.  
-000061d0: 2020 2020 2020 2020 656e 7669 726f 6e6d          environm
-000061e0: 656e 743a 2026 7068 616e 746f 6d6a 732d  ent: &phantomjs-
-000061f0: 656e 760a 2020 2020 2020 2020 2020 2020  env.            
-00006200: 4854 5450 5f4d 4150 3a0a 2020 2020 2020  HTTP_MAP:.      
-00006210: 2020 2020 2020 2020 6874 7470 733a 2f2f          https://
-00006220: 6c6f 6361 6c68 6f73 743a 3834 3834 2f74  localhost:8484/t
-00006230: 696c 6573 2f3a 2068 7474 703a 2f2f 6c6f  iles/: http://lo
-00006240: 6361 6c68 6f73 743a 3830 3830 2f74 696c  calhost:8080/til
-00006250: 6573 2f0a 2020 2020 2020 2020 2020 6c65  es/.          le
-00006260: 7665 6c3a 2036 0a20 2020 2020 2020 202d  vel: 6.        -
-00006270: 206e 616d 653a 206d 6f62 696c 650a 2020   name: mobile.  
-00006280: 2020 2020 2020 2020 7061 7261 6d73 3a0a          params:.
-00006290: 2020 2020 2020 2020 2020 2020 6e6f 5f72              no_r
-000062a0: 6564 6972 6563 743a 2027 7472 7565 270a  edirect: 'true'.
-000062b0: 2020 2020 2020 2020 2020 656e 7669 726f            enviro
-000062c0: 6e6d 656e 743a 202a 7068 616e 746f 6d6a  nment: *phantomj
-000062d0: 732d 656e 760a 2020 2020 2020 2020 2020  s-env.          
-000062e0: 6c65 7665 6c3a 2036 0a20 2020 2020 2020  level: 6.       
-000062f0: 202d 206e 616d 653a 2069 6672 616d 655f   - name: iframe_
-00006300: 6170 690a 2020 2020 2020 2020 2020 7061  api.          pa
-00006310: 7261 6d73 3a0a 2020 2020 2020 2020 2020  rams:.          
-00006320: 2020 6e6f 5f72 6564 6972 6563 743a 2027    no_redirect: '
-00006330: 7472 7565 270a 2020 2020 2020 2020 2020  true'.          
-00006340: 656e 7669 726f 6e6d 656e 743a 202a 7068  environment: *ph
-00006350: 616e 746f 6d6a 732d 656e 760a 2020 2020  antomjs-env.    
-00006360: 2020 2020 2020 6c65 7665 6c3a 2036 0a20        level: 6. 
-00006370: 2020 2020 2020 202d 206e 616d 653a 2061         - name: a
-00006380: 7069 6865 6c70 0a20 2020 2020 2020 2020  pihelp.         
-00006390: 2065 6e76 6972 6f6e 6d65 6e74 3a20 2a70   environment: *p
-000063a0: 6861 6e74 6f6d 6a73 2d65 6e76 0a20 2020  hantomjs-env.   
-000063b0: 2020 2020 2020 206c 6576 656c 3a20 360a         level: 6.
-000063c0: 2020 2020 726f 7574 6573 3a0a 2020 2020      routes:.    
-000063d0: 2020 6469 7361 626c 653a 205b 5d0a 2020    disable: [].  
-000063e0: 2020 2020 726f 7574 6573 3a0a 2020 2020      routes:.    
-000063f0: 2020 2020 2d20 6e61 6d65 3a20 6170 696a      - name: apij
-00006400: 730a 2020 2020 2020 2020 2020 6c65 7665  s.          leve
-00006410: 6c3a 2033 0a20 2020 2020 2020 2020 2070  l: 3.          p
-00006420: 6172 616d 733a 0a20 2020 2020 2020 2020  arams:.         
-00006430: 2020 2076 6572 7369 6f6e 3a20 2732 270a     version: '2'.
-00006440: 2020 2020 2020 2020 2d20 6e61 6d65 3a20          - name: 
-00006450: 7072 696e 7470 726f 7879 5f63 6170 6162  printproxy_capab
-00006460: 696c 6974 6965 730a 2020 2020 2020 2020  ilities.        
-00006470: 2020 6c65 7665 6c3a 2033 0a20 2020 2020    level: 3.     
-00006480: 2020 202d 206e 616d 653a 206d 6170 7365     - name: mapse
-00006490: 7276 6572 7072 6f78 790a 2020 2020 2020  rverproxy.      
-000064a0: 2020 2020 6368 6563 6b65 725f 6e61 6d65      checker_name
-000064b0: 3a20 6d61 7073 6572 7665 7270 726f 7879  : mapserverproxy
-000064c0: 5f77 6d73 0a20 2020 2020 2020 2020 2070  _wms.          p
-000064d0: 6172 616d 733a 0a20 2020 2020 2020 2020  arams:.         
-000064e0: 2020 2053 4552 5649 4345 3a20 574d 530a     SERVICE: WMS.
-000064f0: 2020 2020 2020 2020 2020 2020 5645 5253              VERS
-00006500: 494f 4e3a 2031 2e31 2e31 0a20 2020 2020  ION: 1.1.1.     
-00006510: 2020 2020 2020 2052 4551 5545 5354 3a20         REQUEST: 
-00006520: 4765 7443 6170 6162 696c 6974 6965 730a  GetCapabilities.
-00006530: 2020 2020 2020 2020 2020 2020 6f67 6373              ogcs
-00006540: 6572 7665 723a 2027 7b63 6865 636b 6572  erver: '{checker
-00006550: 5f6f 6763 5f73 6572 7665 727d 270a 2020  _ogc_server}'.  
-00006560: 2020 2020 2020 2020 6c65 7665 6c3a 2033          level: 3
-00006570: 0a20 2020 2020 2020 202d 206e 616d 653a  .        - name:
-00006580: 206d 6170 7365 7276 6572 7072 6f78 790a   mapserverproxy.
-00006590: 2020 2020 2020 2020 2020 6368 6563 6b65            checke
-000065a0: 725f 6e61 6d65 3a20 6d61 7073 6572 7665  r_name: mapserve
-000065b0: 7270 726f 7879 5f77 6673 0a20 2020 2020  rproxy_wfs.     
-000065c0: 2020 2020 2070 6172 616d 733a 0a20 2020       params:.   
-000065d0: 2020 2020 2020 2020 2053 4552 5649 4345           SERVICE
-000065e0: 3a20 5746 530a 2020 2020 2020 2020 2020  : WFS.          
-000065f0: 2020 5645 5253 494f 4e3a 2031 2e31 2e30    VERSION: 1.1.0
-00006600: 0a20 2020 2020 2020 2020 2020 2052 4551  .            REQ
-00006610: 5545 5354 3a20 4765 7443 6170 6162 696c  UEST: GetCapabil
-00006620: 6974 6965 730a 2020 2020 2020 2020 2020  ities.          
-00006630: 2020 6f67 6373 6572 7665 723a 2027 7b63    ogcserver: '{c
-00006640: 6865 636b 6572 5f6f 6763 5f73 6572 7665  hecker_ogc_serve
-00006650: 727d 270a 2020 2020 2020 2020 2020 6c65  r}'.          le
-00006660: 7665 6c3a 2033 0a20 2020 2074 6865 6d65  vel: 3.    theme
-00006670: 733a 0a20 2020 2020 2070 6172 616d 733a  s:.      params:
-00006680: 0a20 2020 2020 2020 2076 6572 7369 6f6e  .        version
-00006690: 3a20 2732 270a 2020 2020 2020 6c65 7665  : '2'.      leve
-000066a0: 6c3a 2034 0a20 2020 2020 2069 6e74 6572  l: 4.      inter
-000066b0: 6661 6365 733a 207b 7d0a 2020 2020 7072  faces: {}.    pr
-000066c0: 696e 743a 0a20 2020 2020 206c 6576 656c  int:.      level
-000066d0: 3a20 350a 0a20 2023 2043 6865 636b 2063  : 5..  # Check c
-000066e0: 6f6c 6c65 6374 6f72 2063 6f6e 6669 6775  ollector configu
-000066f0: 7261 7469 6f6e 0a20 2063 6865 636b 5f63  ration.  check_c
-00006700: 6f6c 6c65 6374 6f72 3a0a 2020 2020 686f  ollector:.    ho
-00006710: 7374 733a 0a20 2020 2020 202d 2064 6973  sts:.      - dis
-00006720: 706c 6179 3a20 4d61 696e 0a20 2020 2020  play: Main.     
-00006730: 2020 2075 726c 3a20 2768 7474 703a 2f2f     url: 'http://
-00006740: 6c6f 6361 6c68 6f73 743a 3830 3830 7b56  localhost:8080{V
-00006750: 4953 4942 4c45 5f45 4e54 5259 5f50 4f49  ISIBLE_ENTRY_POI
-00006760: 4e54 7d27 0a20 2020 206d 6178 5f6c 6576  NT}'.    max_lev
-00006770: 656c 3a20 330a 2020 2020 6c65 7665 6c3a  el: 3.    level:
-00006780: 2031 300a 0a20 2023 2057 6861 7420 7765   10..  # What we
-00006790: 6220 7061 6765 2069 7320 6175 7468 6f72  b page is author
-000067a0: 697a 6564 2074 6f20 7573 6520 7468 6520  ized to use the 
-000067b0: 4150 490a 2020 6175 7468 6f72 697a 6564  API.  authorized
-000067c0: 5f72 6566 6572 6572 733a 0a20 2020 202d  _referers:.    -
-000067d0: 2027 7b56 4953 4942 4c45 5f57 4542 5f50   '{VISIBLE_WEB_P
-000067e0: 524f 544f 434f 4c7d 3a2f 2f7b 5649 5349  ROTOCOL}://{VISI
-000067f0: 424c 455f 5745 425f 484f 5354 7d2f 270a  BLE_WEB_HOST}/'.
-00006800: 0a20 206d 6574 7269 6373 3a0a 2020 2020  .  metrics:.    
-00006810: 6d65 6d6f 7279 5f6d 6170 735f 7273 733a  memory_maps_rss:
-00006820: 2046 616c 7365 0a20 2020 206d 656d 6f72   False.    memor
-00006830: 795f 6d61 7073 5f73 697a 653a 2046 616c  y_maps_size: Fal
-00006840: 7365 0a20 2020 206d 656d 6f72 795f 6361  se.    memory_ca
-00006850: 6368 653a 2054 7275 650a 2020 2020 6d65  che: True.    me
-00006860: 6d6f 7279 5f63 6163 6865 5f61 6c6c 3a20  mory_cache_all: 
-00006870: 4661 6c73 650a 2020 2020 7261 7374 6572  False.    raster
-00006880: 5f64 6174 613a 2046 616c 7365 0a20 2020  _data: False.   
-00006890: 2074 6f74 616c 5f70 7974 686f 6e5f 6f62   total_python_ob
-000068a0: 6a65 6374 5f6d 656d 6f72 793a 2054 7275  ject_memory: Tru
-000068b0: 650a 0a20 2023 2048 6f6f 6b73 2074 6861  e..  # Hooks tha
-000068c0: 7420 6361 6e20 6265 2063 616c 6c65 6420  t can be called 
-000068d0: 6174 2064 6966 6665 7265 6e74 206d 6f6d  at different mom
-000068e0: 656e 7473 2069 6e20 7468 6520 6c69 6665  ents in the life
-000068f0: 206f 6620 7468 650a 2020 2320 6170 706c   of the.  # appl
-00006900: 6963 6174 696f 6e2e 2054 6865 2076 616c  ication. The val
-00006910: 7565 2069 7320 7468 6520 6675 6c6c 2070  ue is the full p
-00006920: 7974 686f 6e20 6e61 6d65 0a20 2023 2028  ython name.  # (
-00006930: 6675 6c6c 2e6d 6f64 756c 652e 7061 7468  full.module.path
-00006940: 2e66 756e 6374 696f 6e5f 6e61 6d65 2920  .function_name) 
-00006950: 6f66 2074 6865 2066 756e 6374 696f 6e20  of the function 
-00006960: 746f 2063 616c 6c0a 2020 686f 6f6b 733a  to call.  hooks:
-00006970: 207b 7d0a 2020 2320 2020 6166 7465 725f   {}.  #   after_
-00006980: 7365 7474 696e 6773 3a20 7b7b 7061 636b  settings: {{pack
-00006990: 6167 657d 7d2e 6166 7465 725f 7365 7474  age}}.after_sett
-000069a0: 696e 6773 5f68 6f6f 6b0a 2020 2320 4361  ings_hook.  # Ca
-000069b0: 6c6c 6564 206a 7573 7420 6166 7465 7220  lled just after 
-000069c0: 7468 6520 7365 7474 696e 6773 2068 6176  the settings hav
-000069d0: 6520 6265 656e 206c 6f61 6465 642e 2041  e been loaded. A
-000069e0: 6c6c 6f77 7320 746f 206d 6f64 6966 790a  llows to modify.
-000069f0: 2020 2320 7468 6520 7365 7474 696e 6773    # the settings
-00006a00: 2061 7420 7275 6e74 696d 6520 2874 6865   at runtime (the
-00006a10: 7920 6172 6520 636f 6e73 7472 7563 7465  y are constructe
-00006a20: 6420 6174 2062 7569 6c64 2074 696d 6529  d at build time)
-00006a30: 2e0a 2020 2320 5468 6520 6675 6e63 7469  ..  # The functi
-00006a40: 6f6e 2072 6563 6569 7665 7320 6f6e 6520  on receives one 
-00006a50: 7061 7261 6d65 7465 723a 2074 6865 2073  parameter: the s
-00006a60: 6574 7469 6e67 7320 6f62 6a65 6374 2e0a  ettings object..
-00006a70: 0a20 2023 2053 7461 7469 7374 6963 7320  .  # Statistics 
-00006a80: 6172 6520 6469 7361 626c 6564 2062 7920  are disabled by 
-00006a90: 6465 6661 756c 740a 2020 7374 6174 733a  default.  stats:
-00006aa0: 207b 7d0a 0a20 2023 2054 6865 2063 3263   {}..  # The c2c
-00006ab0: 7773 6769 7574 696c 7320 6261 7365 2070  wsgiutils base p
-00006ac0: 6174 680a 2020 6332 633a 0a20 2020 2062  ath.  c2c:.    b
-00006ad0: 6173 655f 7061 7468 3a20 277b 5649 5349  ase_path: '{VISI
-00006ae0: 424c 455f 454e 5452 595f 504f 494e 547d  BLE_ENTRY_POINT}
-00006af0: 6332 6327 0a0a 2020 6462 5f63 686f 6f73  c2c'..  db_choos
-00006b00: 6572 3a0a 2020 2020 2320 4c69 7374 206f  er:.    # List o
-00006b10: 6620 7b6d 6574 686f 6420 7061 7468 7d20  f {method path} 
-00006b20: 7265 6765 7865 7320 746f 2066 6f72 6365  regexes to force
-00006b30: 2074 6865 2075 7361 6765 206f 6620 7468   the usage of th
-00006b40: 6520 6d61 7374 6572 2c20 6576 656e 2066  e master, even f
-00006b50: 6f72 2047 4554 2061 6e64 204f 5054 494f  or GET and OPTIO
-00006b60: 4e53 0a20 2020 2023 2054 6869 7320 7375  NS.    # This su
-00006b70: 7065 7273 6564 6573 2074 6865 2073 6c61  persedes the sla
-00006b80: 7665 206c 6973 742e 0a20 2020 206d 6173  ve list..    mas
-00006b90: 7465 723a 0a20 2020 2020 202d 2047 4554  ter:.      - GET
-00006ba0: 207b 5649 5349 424c 455f 454e 5452 595f   {VISIBLE_ENTRY_
-00006bb0: 504f 494e 547d 732f 2e2a 2023 2054 6865  POINT}s/.* # The
-00006bc0: 2073 686f 7274 656e 6572 2075 7064 6174   shortener updat
-00006bd0: 6573 2074 6865 206c 6173 745f 6869 7420  es the last_hit 
-00006be0: 636f 6c75 6d6e 206f 6e20 4745 540a 2020  column on GET.  
-00006bf0: 2020 2020 2d20 4745 5420 7b56 4953 4942      - GET {VISIB
-00006c00: 4c45 5f45 4e54 5259 5f50 4f49 4e54 7d6f  LE_ENTRY_POINT}o
-00006c10: 6175 7468 2f6c 6f67 696e 2023 2054 6865  auth/login # The
-00006c20: 206f 6175 7468 3220 6c6f 6769 6e20 7768   oauth2 login wh
-00006c30: 656e 2077 6520 6172 6520 616c 7265 6164  en we are alread
-00006c40: 7920 6c6f 6767 6564 0a20 2020 2023 204c  y logged.    # L
-00006c50: 6973 7420 6f66 207b 6d65 7468 6f64 2070  ist of {method p
-00006c60: 6174 687d 2072 6567 6578 6573 2074 6f20  ath} regexes to 
-00006c70: 666f 7263 6520 7468 6520 7573 6167 6520  force the usage 
-00006c80: 6f66 2074 6865 2073 6c61 7665 0a20 2020  of the slave.   
-00006c90: 2073 6c61 7665 3a0a 2020 2020 2020 2d20   slave:.      - 
-00006ca0: 5c77 2b20 7b56 4953 4942 4c45 5f45 4e54  \w+ {VISIBLE_ENT
-00006cb0: 5259 5f50 4f49 4e54 7d70 7269 6e74 7072  RY_POINT}printpr
-00006cc0: 6f78 792f 2e2a 2023 2054 6865 2070 7269  oxy/.* # The pri
-00006cd0: 6e74 2070 726f 7879 2069 7320 6e65 7665  nt proxy is neve
-00006ce0: 7220 7772 6974 696e 6720 746f 2074 6865  r writing to the
-00006cf0: 2044 420a 0a72 756e 7469 6d65 5f65 6e76   DB..runtime_env
-00006d00: 6972 6f6e 6d65 6e74 3a0a 2020 2d20 6e61  ironment:.  - na
-00006d10: 6d65 3a20 5649 5349 424c 455f 5745 425f  me: VISIBLE_WEB_
-00006d20: 484f 5354 0a20 2020 2064 6566 6175 6c74  HOST.    default
-00006d30: 3a20 6c6f 6361 6c68 6f73 740a 2020 2d20  : localhost.  - 
-00006d40: 6e61 6d65 3a20 5649 5349 424c 455f 5745  name: VISIBLE_WE
-00006d50: 425f 5052 4f54 4f43 4f4c 0a20 2020 2064  B_PROTOCOL.    d
-00006d60: 6566 6175 6c74 3a20 6874 7470 730a 2020  efault: https.  
-00006d70: 2d20 6e61 6d65 3a20 5649 5349 424c 455f  - name: VISIBLE_
-00006d80: 454e 5452 595f 504f 494e 540a 2020 2020  ENTRY_POINT.    
-00006d90: 6465 6661 756c 743a 202f 0a20 202d 2050  default: /.  - P
-00006da0: 4748 4f53 540a 2020 2d20 5047 484f 5354  GHOST.  - PGHOST
-00006db0: 5f53 4c41 5645 0a20 202d 206e 616d 653a  _SLAVE.  - name:
-00006dc0: 2050 4750 4f52 540a 2020 2020 6465 6661   PGPORT.    defa
-00006dd0: 756c 743a 2027 3534 3332 270a 2020 2d20  ult: '5432'.  - 
-00006de0: 6e61 6d65 3a20 5047 504f 5254 5f53 4c41  name: PGPORT_SLA
-00006df0: 5645 0a20 2020 2064 6566 6175 6c74 3a20  VE.    default: 
-00006e00: 2735 3433 3227 0a20 202d 2050 4755 5345  '5432'.  - PGUSE
-00006e10: 520a 2020 2d20 5047 5041 5353 574f 5244  R.  - PGPASSWORD
-00006e20: 0a20 202d 206e 616d 653a 2050 4744 4154  .  - name: PGDAT
-00006e30: 4142 4153 450a 2020 2020 6465 6661 756c  ABASE.    defaul
-00006e40: 743a 2067 656f 6d61 7066 6973 680a 2020  t: geomapfish.  
-00006e50: 2d20 6e61 6d65 3a20 5047 5353 4c4d 4f44  - name: PGSSLMOD
-00006e60: 450a 2020 2020 6465 6661 756c 743a 2070  E.    default: p
-00006e70: 7265 6665 720a 2020 2d20 6e61 6d65 3a20  refer.  - name: 
-00006e80: 5047 5343 4845 4d41 0a20 2020 2064 6566  PGSCHEMA.    def
-00006e90: 6175 6c74 3a20 6d61 696e 0a20 202d 206e  ault: main.  - n
-00006ea0: 616d 653a 2050 4753 4348 454d 415f 5354  ame: PGSCHEMA_ST
-00006eb0: 4154 4943 0a20 2020 2064 6566 6175 6c74  ATIC.    default
-00006ec0: 3a20 6d61 696e 5f73 7461 7469 630a 2020  : main_static.  
-00006ed0: 2d20 6e61 6d65 3a20 5351 4c41 4c43 4845  - name: SQLALCHE
-00006ee0: 4d59 5f50 4f4f 4c5f 5245 4359 434c 450a  MY_POOL_RECYCLE.
-00006ef0: 2020 2020 6465 6661 756c 743a 2027 3330      default: '30
-00006f00: 270a 2020 2d20 6e61 6d65 3a20 5351 4c41  '.  - name: SQLA
-00006f10: 4c43 4845 4d59 5f50 4f4f 4c5f 5349 5a45  LCHEMY_POOL_SIZE
-00006f20: 0a20 2020 2064 6566 6175 6c74 3a20 2735  .    default: '5
-00006f30: 270a 2020 2d20 6e61 6d65 3a20 5351 4c41  '.  - name: SQLA
-00006f40: 4c43 4845 4d59 5f4d 4158 5f4f 5645 5246  LCHEMY_MAX_OVERF
-00006f50: 4c4f 570a 2020 2020 6465 6661 756c 743a  LOW.    default:
-00006f60: 2027 3235 270a 2020 2d20 6e61 6d65 3a20   '25'.  - name: 
-00006f70: 5351 4c41 4c43 4845 4d59 5f53 4c41 5645  SQLALCHEMY_SLAVE
-00006f80: 5f50 4f4f 4c5f 5245 4359 434c 450a 2020  _POOL_RECYCLE.  
-00006f90: 2020 6465 6661 756c 743a 2027 3330 270a    default: '30'.
-00006fa0: 2020 2d20 6e61 6d65 3a20 5351 4c41 4c43    - name: SQLALC
-00006fb0: 4845 4d59 5f53 4c41 5645 5f50 4f4f 4c5f  HEMY_SLAVE_POOL_
-00006fc0: 5349 5a45 0a20 2020 2064 6566 6175 6c74  SIZE.    default
-00006fd0: 3a20 2735 270a 2020 2d20 6e61 6d65 3a20  : '5'.  - name: 
-00006fe0: 5351 4c41 4c43 4845 4d59 5f53 4c41 5645  SQLALCHEMY_SLAVE
-00006ff0: 5f4d 4158 5f4f 5645 5246 4c4f 570a 2020  _MAX_OVERFLOW.  
-00007000: 2020 6465 6661 756c 743a 2027 3235 270a    default: '25'.
-00007010: 2020 2d20 6e61 6d65 3a20 5449 4e59 4f57    - name: TINYOW
-00007020: 535f 5552 4c0a 2020 2020 6465 6661 756c  S_URL.    defaul
-00007030: 743a 2068 7474 703a 2f2f 7469 6e79 6f77  t: http://tinyow
-00007040: 733a 3830 3830 2f0a 2020 2d20 6e61 6d65  s:8080/.  - name
-00007050: 3a20 4d41 5053 4552 5645 525f 5552 4c0a  : MAPSERVER_URL.
-00007060: 2020 2020 6465 6661 756c 743a 2068 7474      default: htt
-00007070: 703a 2f2f 6d61 7073 6572 7665 723a 3830  p://mapserver:80
-00007080: 3830 2f0a 2020 2d20 6e61 6d65 3a20 5147  80/.  - name: QG
-00007090: 4953 5345 5256 4552 5f55 524c 0a20 2020  ISSERVER_URL.   
-000070a0: 2064 6566 6175 6c74 3a20 6874 7470 3a2f   default: http:/
-000070b0: 2f71 6769 7373 6572 7665 723a 3830 3830  /qgisserver:8080
-000070c0: 2f0a 2020 2d20 6e61 6d65 3a20 5052 494e  /.  - name: PRIN
-000070d0: 545f 5552 4c0a 2020 2020 6465 6661 756c  T_URL.    defaul
-000070e0: 743a 2068 7474 703a 2f2f 7072 696e 743a  t: http://print:
-000070f0: 3830 3830 2f70 7269 6e74 2f0a 2020 2d20  8080/print/.  - 
-00007100: 6e61 6d65 3a20 4445 5653 4552 5645 525f  name: DEVSERVER_
-00007110: 484f 5354 0a20 2020 2064 6566 6175 6c74  HOST.    default
-00007120: 3a20 7765 6270 6163 6b2d 6465 762d 7365  : webpack-dev-se
-00007130: 7276 6572 3a38 3038 300a 2020 2d20 6e61  rver:8080.  - na
-00007140: 6d65 3a20 5245 4449 535f 484f 5354 0a20  me: REDIS_HOST. 
-00007150: 2020 2064 6566 6175 6c74 3a20 7265 6469     default: redi
-00007160: 730a 2020 2d20 6e61 6d65 3a20 5245 4449  s.  - name: REDI
-00007170: 535f 504f 5254 0a20 2020 2064 6566 6175  S_PORT.    defau
-00007180: 6c74 3a20 2736 3337 3227 0a20 202d 206e  lt: '6372'.  - n
-00007190: 616d 653a 2052 4544 4953 5f44 420a 2020  ame: REDIS_DB.  
-000071a0: 2020 6465 6661 756c 743a 2027 3027 0a20    default: '0'. 
-000071b0: 202d 206e 616d 653a 2052 4544 4953 5f53   - name: REDIS_S
-000071c0: 4552 5649 4345 4e41 4d45 0a20 2020 2064  ERVICENAME.    d
-000071d0: 6566 6175 6c74 3a20 276d 796d 6173 7465  efault: 'mymaste
-000071e0: 7227 0a20 202d 206e 616d 653a 2052 4544  r'.  - name: RED
-000071f0: 4953 5f54 494d 454f 5554 0a20 2020 2064  IS_TIMEOUT.    d
-00007200: 6566 6175 6c74 3a20 2733 3027 0a20 202d  efault: '30'.  -
-00007210: 206e 616d 653a 2052 4544 4953 5f4c 4f43   name: REDIS_LOC
-00007220: 4b5f 5449 4d45 4f55 540a 2020 2020 6465  K_TIMEOUT.    de
-00007230: 6661 756c 743a 2027 3132 3027 2023 2054  fault: '120' # T
-00007240: 776f 206d 696e 7574 6573 0a20 202d 206e  wo minutes.  - n
-00007250: 616d 653a 2052 4544 4953 5f45 5850 4952  ame: REDIS_EXPIR
-00007260: 4154 494f 4e5f 5449 4d45 0a20 2020 2064  ATION_TIME.    d
-00007270: 6566 6175 6c74 3a20 2738 3634 3030 2720  efault: '86400' 
-00007280: 2320 4f6e 6520 6461 790a 2020 2d20 6e61  # One day.  - na
-00007290: 6d65 3a20 5449 4c45 4745 4e45 5241 5449  me: TILEGENERATI
-000072a0: 4f4e 5f53 5153 5f51 5545 5545 0a20 2020  ON_SQS_QUEUE.   
-000072b0: 2064 6566 6175 6c74 3a20 7175 6575 655f   default: queue_
-000072c0: 6e61 6d65 0a20 202d 206e 616d 653a 2054  name.  - name: T
-000072d0: 494c 4547 454e 4552 4154 494f 4e5f 5333  ILEGENERATION_S3
-000072e0: 5f42 5543 4b45 540a 2020 2020 6465 6661  _BUCKET.    defa
-000072f0: 756c 743a 2062 7563 6b65 745f 6e61 6d65  ult: bucket_name
-00007300: 0a20 202d 206e 616d 653a 2053 454e 5452  .  - name: SENTR
-00007310: 595f 5552 4c0a 2020 2020 6465 6661 756c  Y_URL.    defaul
-00007320: 743a 2027 270a 2020 2d20 6e61 6d65 3a20  t: ''.  - name: 
-00007330: 5345 4e54 5259 5f43 4c49 454e 545f 5245  SENTRY_CLIENT_RE
-00007340: 4c45 4153 450a 2020 2020 6465 6661 756c  LEASE.    defaul
-00007350: 743a 2027 270a 2020 2d20 6e61 6d65 3a20  t: ''.  - name: 
-00007360: 5345 4e54 5259 5f43 4c49 454e 545f 454e  SENTRY_CLIENT_EN
-00007370: 5649 524f 4e4d 454e 540a 2020 2020 6465  VIRONMENT.    de
-00007380: 6661 756c 743a 2027 270a 0a72 756e 7469  fault: ''..runti
-00007390: 6d65 5f70 6f73 7470 726f 6365 7373 3a0a  me_postprocess:.
-000073a0: 2020 2d20 6578 7072 6573 7369 6f6e 3a20    - expression: 
-000073b0: 696e 7428 7b7d 290a 2020 2020 7661 7273  int({}).    vars
-000073c0: 3a0a 2020 2020 2020 2d20 6361 6368 652e  :.      - cache.
-000073d0: 7374 642e 6172 6775 6d65 6e74 732e 6c6f  std.arguments.lo
-000073e0: 636b 5f74 696d 656f 7574 0a20 2020 2020  ck_timeout.     
-000073f0: 202d 2063 6163 6865 2e73 7464 2e61 7267   - cache.std.arg
-00007400: 756d 656e 7473 2e72 6564 6973 5f65 7870  uments.redis_exp
-00007410: 6972 6174 696f 6e5f 7469 6d65 0a20 2020  iration_time.   
-00007420: 2020 202d 2063 6163 6865 2e73 7464 2e61     - cache.std.a
-00007430: 7267 756d 656e 7473 2e73 6f63 6b65 745f  rguments.socket_
-00007440: 7469 6d65 6f75 740a 2020 2020 2020 2d20  timeout.      - 
-00007450: 6361 6368 652e 7374 642e 6172 6775 6d65  cache.std.argume
-00007460: 6e74 732e 6462 0a20 2020 2020 202d 2073  nts.db.      - s
-00007470: 716c 616c 6368 656d 795c 2e70 6f6f 6c5f  qlalchemy\.pool_
-00007480: 7265 6379 636c 650a 2020 2020 2020 2d20  recycle.      - 
-00007490: 7371 6c61 6c63 6865 6d79 5c2e 706f 6f6c  sqlalchemy\.pool
-000074a0: 5f73 697a 650a 2020 2020 2020 2d20 7371  _size.      - sq
-000074b0: 6c61 6c63 6865 6d79 5c2e 6d61 785f 6f76  lalchemy\.max_ov
-000074c0: 6572 666c 6f77 0a20 2020 2020 202d 2073  erflow.      - s
-000074d0: 716c 616c 6368 656d 795f 736c 6176 655c  qlalchemy_slave\
-000074e0: 2e70 6f6f 6c5f 7265 6379 636c 650a 2020  .pool_recycle.  
-000074f0: 2020 2020 2d20 7371 6c61 6c63 6865 6d79      - sqlalchemy
-00007500: 5f73 6c61 7665 5c2e 706f 6f6c 5f73 697a  _slave\.pool_siz
-00007510: 650a 2020 2020 2020 2d20 7371 6c61 6c63  e.      - sqlalc
-00007520: 6865 6d79 5f73 6c61 7665 5c2e 6d61 785f  hemy_slave\.max_
-00007530: 6f76 6572 666c 6f77 0a20 2020 2020 202d  overflow.      -
-00007540: 2061 7574 6865 6e74 6963 6174 696f 6e2e   authentication.
-00007550: 6d61 785f 636f 6e73 6563 7574 6976 655f  max_consecutive_
-00007560: 6661 696c 7572 6573 0a20 2020 2020 202d  failures.      -
-00007570: 2061 7574 6865 6e74 6963 6174 696f 6e2e   authentication.
-00007580: 6f61 7574 6832 5f61 7574 686f 7269 7a61  oauth2_authoriza
-00007590: 7469 6f6e 5f65 7870 6972 655f 6d69 6e75  tion_expire_minu
-000075a0: 7465 730a 2020 2020 2020 2d20 6175 7468  tes.      - auth
-000075b0: 656e 7469 6361 7469 6f6e 2e6f 6175 7468  entication.oauth
-000075c0: 325f 746f 6b65 6e5f 6578 7069 7265 5f6d  2_token_expire_m
-000075d0: 696e 7574 6573 0a20 2020 2020 202d 2068  inutes.      - h
-000075e0: 6561 6465 7273 2e6c 6f67 696e 2e61 6363  eaders.login.acc
-000075f0: 6573 735f 636f 6e74 726f 6c5f 6d61 785f  ess_control_max_
-00007600: 6167 650a 2020 2020 2020 2d20 6865 6164  age.      - head
-00007610: 6572 732e 6c6f 6769 6e2e 6361 6368 655f  ers.login.cache_
-00007620: 636f 6e74 726f 6c5f 6d61 785f 6167 650a  control_max_age.
-00007630: 2020 2020 2020 2d20 6865 6164 6572 732e        - headers.
-00007640: 696e 6465 782e 6163 6365 7373 5f63 6f6e  index.access_con
-00007650: 7472 6f6c 5f6d 6178 5f61 6765 0a20 2020  trol_max_age.   
-00007660: 2020 202d 2068 6561 6465 7273 2e69 6e64     - headers.ind
-00007670: 6578 2e63 6163 6865 5f63 6f6e 7472 6f6c  ex.cache_control
-00007680: 5f6d 6178 5f61 6765 0a20 2020 2020 202d  _max_age.      -
-00007690: 2068 6561 6465 7273 2e64 796e 616d 6963   headers.dynamic
-000076a0: 2e61 6363 6573 735f 636f 6e74 726f 6c5f  .access_control_
-000076b0: 6d61 785f 6167 650a 2020 2020 2020 2d20  max_age.      - 
-000076c0: 6865 6164 6572 732e 6479 6e61 6d69 632e  headers.dynamic.
-000076d0: 6361 6368 655f 636f 6e74 726f 6c5f 6d61  cache_control_ma
-000076e0: 785f 6167 650a 2020 2020 2020 2d20 6865  x_age.      - he
-000076f0: 6164 6572 732e 636f 6e66 6967 2e61 6363  aders.config.acc
-00007700: 6573 735f 636f 6e74 726f 6c5f 6d61 785f  ess_control_max_
-00007710: 6167 650a 2020 2020 2020 2d20 6865 6164  age.      - head
-00007720: 6572 732e 636f 6e66 6967 2e63 6163 6865  ers.config.cache
-00007730: 5f63 6f6e 7472 6f6c 5f6d 6178 5f61 6765  _control_max_age
-00007740: 0a20 2020 2020 202d 2068 6561 6465 7273  .      - headers
-00007750: 2e61 7069 2e61 6363 6573 735f 636f 6e74  .api.access_cont
-00007760: 726f 6c5f 6d61 785f 6167 650a 2020 2020  rol_max_age.    
-00007770: 2020 2d20 6865 6164 6572 732e 6170 692e    - headers.api.
-00007780: 6361 6368 655f 636f 6e74 726f 6c5f 6d61  cache_control_ma
-00007790: 785f 6167 650a 2020 2020 2020 2d20 6865  x_age.      - he
-000077a0: 6164 6572 732e 6170 6968 656c 702e 6163  aders.apihelp.ac
-000077b0: 6365 7373 5f63 6f6e 7472 6f6c 5f6d 6178  cess_control_max
-000077c0: 5f61 6765 0a20 2020 2020 202d 2068 6561  _age.      - hea
-000077d0: 6465 7273 2e61 7069 6865 6c70 2e63 6163  ders.apihelp.cac
-000077e0: 6865 5f63 6f6e 7472 6f6c 5f6d 6178 5f61  he_control_max_a
-000077f0: 6765 0a20 2020 2020 202d 2068 6561 6465  ge.      - heade
-00007800: 7273 2e74 6865 6d65 732e 6163 6365 7373  rs.themes.access
-00007810: 5f63 6f6e 7472 6f6c 5f6d 6178 5f61 6765  _control_max_age
-00007820: 0a20 2020 2020 202d 2068 6561 6465 7273  .      - headers
-00007830: 2e74 6865 6d65 732e 6361 6368 655f 636f  .themes.cache_co
-00007840: 6e74 726f 6c5f 6d61 785f 6167 650a 2020  ntrol_max_age.  
-00007850: 2020 2020 2d20 6865 6164 6572 732e 6675      - headers.fu
-00007860: 6c6c 7465 7874 7365 6172 6368 2e61 6363  lltextsearch.acc
-00007870: 6573 735f 636f 6e74 726f 6c5f 6d61 785f  ess_control_max_
-00007880: 6167 650a 2020 2020 2020 2d20 6865 6164  age.      - head
-00007890: 6572 732e 6675 6c6c 7465 7874 7365 6172  ers.fulltextsear
-000078a0: 6368 2e63 6163 6865 5f63 6f6e 7472 6f6c  ch.cache_control
-000078b0: 5f6d 6178 5f61 6765 0a20 2020 2020 202d  _max_age.      -
-000078c0: 2068 6561 6465 7273 2e6d 6170 7365 7276   headers.mapserv
-000078d0: 6572 2e61 6363 6573 735f 636f 6e74 726f  er.access_contro
-000078e0: 6c5f 6d61 785f 6167 650a 2020 2020 2020  l_max_age.      
-000078f0: 2d20 6865 6164 6572 732e 6d61 7073 6572  - headers.mapser
-00007900: 7665 722e 6361 6368 655f 636f 6e74 726f  ver.cache_contro
-00007910: 6c5f 6d61 785f 6167 650a 2020 2020 2020  l_max_age.      
-00007920: 2d20 6865 6164 6572 732e 7469 6e79 6f77  - headers.tinyow
-00007930: 732e 6163 6365 7373 5f63 6f6e 7472 6f6c  s.access_control
-00007940: 5f6d 6178 5f61 6765 0a20 2020 2020 202d  _max_age.      -
-00007950: 2068 6561 6465 7273 2e74 696e 796f 7773   headers.tinyows
-00007960: 2e63 6163 6865 5f63 6f6e 7472 6f6c 5f6d  .cache_control_m
-00007970: 6178 5f61 6765 0a20 2020 2020 202d 2068  ax_age.      - h
-00007980: 6561 6465 7273 2e6c 6179 6572 732e 6163  eaders.layers.ac
-00007990: 6365 7373 5f63 6f6e 7472 6f6c 5f6d 6178  cess_control_max
-000079a0: 5f61 6765 0a20 2020 2020 202d 2068 6561  _age.      - hea
-000079b0: 6465 7273 2e6c 6179 6572 732e 6361 6368  ders.layers.cach
-000079c0: 655f 636f 6e74 726f 6c5f 6d61 785f 6167  e_control_max_ag
-000079d0: 650a 2020 2020 2020 2d20 6865 6164 6572  e.      - header
-000079e0: 732e 7072 696e 742e 6163 6365 7373 5f63  s.print.access_c
-000079f0: 6f6e 7472 6f6c 5f6d 6178 5f61 6765 0a20  ontrol_max_age. 
-00007a00: 2020 2020 202d 2068 6561 6465 7273 2e70       - headers.p
-00007a10: 7269 6e74 2e63 6163 6865 5f63 6f6e 7472  rint.cache_contr
-00007a20: 6f6c 5f6d 6178 5f61 6765 0a20 2020 2020  ol_max_age.     
-00007a30: 202d 2068 6561 6465 7273 2e70 726f 6669   - headers.profi
-00007a40: 6c65 2e61 6363 6573 735f 636f 6e74 726f  le.access_contro
-00007a50: 6c5f 6d61 785f 6167 650a 2020 2020 2020  l_max_age.      
-00007a60: 2d20 6865 6164 6572 732e 7072 6f66 696c  - headers.profil
-00007a70: 652e 6361 6368 655f 636f 6e74 726f 6c5f  e.cache_control_
-00007a80: 6d61 785f 6167 650a 2020 2020 2020 2d20  max_age.      - 
-00007a90: 6865 6164 6572 732e 7261 7374 6572 2e61  headers.raster.a
-00007aa0: 6363 6573 735f 636f 6e74 726f 6c5f 6d61  ccess_control_ma
-00007ab0: 785f 6167 650a 2020 2020 2020 2d20 6865  x_age.      - he
-00007ac0: 6164 6572 732e 7261 7374 6572 2e63 6163  aders.raster.cac
-00007ad0: 6865 5f63 6f6e 7472 6f6c 5f6d 6178 5f61  he_control_max_a
-00007ae0: 6765 0a20 2020 2020 202d 2068 6561 6465  ge.      - heade
-00007af0: 7273 2e73 686f 7274 656e 6572 2e61 6363  rs.shortener.acc
-00007b00: 6573 735f 636f 6e74 726f 6c5f 6d61 785f  ess_control_max_
-00007b10: 6167 650a 2020 2020 2020 2d20 6865 6164  age.      - head
-00007b20: 6572 732e 7368 6f72 7465 6e65 722e 6361  ers.shortener.ca
-00007b30: 6368 655f 636f 6e74 726f 6c5f 6d61 785f  che_control_max_
-00007b40: 6167 650a 2020 2020 2020 2d20 6865 6164  age.      - head
-00007b50: 6572 732e 6572 726f 722e 6163 6365 7373  ers.error.access
-00007b60: 5f63 6f6e 7472 6f6c 5f6d 6178 5f61 6765  _control_max_age
-00007b70: 0a20 2020 2020 202d 2068 6561 6465 7273  .      - headers
-00007b80: 2e65 7272 6f72 2e63 6163 6865 5f63 6f6e  .error.cache_con
-00007b90: 7472 6f6c 5f6d 6178 5f61 6765 0a20 2020  trol_max_age.   
-00007ba0: 2020 202d 2073 686f 7274 656e 6572 2e6c     - shortener.l
-00007bb0: 656e 6774 680a 2020 2020 2020 2d20 6368  ength.      - ch
-00007bc0: 6563 6b65 722e 6675 6c6c 7465 7874 7365  ecker.fulltextse
-00007bd0: 6172 6368 2e6c 6576 656c 0a20 2020 2020  arch.level.     
-00007be0: 202d 2063 6865 636b 6572 2e6c 616e 672e   - checker.lang.
-00007bf0: 6c65 7665 6c0a 2020 2020 2020 2d20 6368  level.      - ch
-00007c00: 6563 6b65 722e 7072 696e 742e 6c65 7665  ecker.print.leve
-00007c10: 6c0a 2020 2020 2020 2d20 6368 6563 6b65  l.      - checke
-00007c20: 722e 7468 656d 6573 2e6c 6576 656c 0a20  r.themes.level. 
-00007c30: 2020 2020 202d 2063 6865 636b 5f63 6f6c       - check_col
-00007c40: 6c65 6374 6f72 2e6d 6178 5f6c 6576 656c  lector.max_level
-00007c50: 0a20 2020 2020 202d 2063 6865 636b 5f63  .      - check_c
-00007c60: 6f6c 6c65 6374 6f72 2e6c 6576 656c 0a0a  ollector.level..
-00007c70: 2020 2d20 6578 7072 6573 7369 6f6e 3a20    - expression: 
-00007c80: 7374 7228 7b7d 292e 6c6f 7765 7228 2920  str({}).lower() 
-00007c90: 696e 2028 2274 7275 6522 2c20 2279 6573  in ("true", "yes
-00007ca0: 222c 2022 3122 290a 2020 2020 7661 7273  ", "1").    vars
-00007cb0: 3a0a 2020 2020 2020 2d20 6175 7468 656e  :.      - authen
-00007cc0: 7469 6361 7469 6f6e 2e74 776f 5f66 6163  tication.two_fac
-00007cd0: 746f 720a 2020 2020 2020 2d20 6765 7469  tor.      - geti
-00007ce0: 7466 6978 6564 2e65 6e61 626c 6564 0a20  tfixed.enabled. 
-00007cf0: 2020 2020 202d 206c 6179 6572 732e 6765       - layers.ge
-00007d00: 6f6d 6574 7279 5f76 616c 6964 6174 696f  ometry_validatio
-00007d10: 6e0a 2020 2020 2020 2d20 736d 7470 2e73  n.      - smtp.s
-00007d20: 736c 0a20 2020 2020 202d 2073 6d74 702e  sl.      - smtp.
-00007d30: 7374 6172 7474 6c73 0a20 2020 2020 202d  starttls.      -
-00007d40: 2068 6964 655f 6361 7061 6269 6c69 7469   hide_capabiliti
-00007d50: 6573 0a20 2020 2020 202d 2063 6865 636b  es.      - check
-00007d60: 6572 2e66 6f72 7761 7264 5f68 6f73 740a  er.forward_host.
-00007d70: 2020 2020 2020 2d20 6368 6563 6b65 722e        - checker.
-00007d80: 6675 6c6c 7465 7874 7365 6172 6368 2e64  fulltextsearch.d
-00007d90: 6973 6162 6c65 0a20 2020 2020 202d 206d  isable.      - m
-00007da0: 6574 7269 6373 2e6d 656d 6f72 795f 6d61  etrics.memory_ma
-00007db0: 7073 5f72 7373 0a20 2020 2020 202d 206d  ps_rss.      - m
-00007dc0: 6574 7269 6373 2e6d 656d 6f72 795f 6d61  etrics.memory_ma
-00007dd0: 7073 5f73 697a 650a 2020 2020 2020 2d20  ps_size.      - 
-00007de0: 6d65 7472 6963 732e 6d65 6d6f 7279 5f63  metrics.memory_c
-00007df0: 6163 6865 0a20 2020 2020 202d 206d 6574  ache.      - met
-00007e00: 7269 6373 2e6d 656d 6f72 795f 6361 6368  rics.memory_cach
-00007e10: 655f 616c 6c0a 2020 2020 2020 2d20 6d65  e_all.      - me
-00007e20: 7472 6963 732e 7261 7374 6572 5f64 6174  trics.raster_dat
-00007e30: 610a 2020 2020 2020 2d20 6d65 7472 6963  a.      - metric
-00007e40: 732e 746f 7461 6c5f 7079 7468 6f6e 5f6f  s.total_python_o
-00007e50: 626a 6563 745f 6d65 6d6f 7279 0a0a 6e6f  bject_memory..no
-00007e60: 5f69 6e74 6572 7072 6574 6564 3a0a 2020  _interpreted:.  
-00007e70: 2d20 696e 7465 7266 6163 6573 5f63 6f6e  - interfaces_con
-00007e80: 6669 672e 6465 6661 756c 742e 7374 6174  fig.default.stat
-00007e90: 6963 2e61 6e67 756c 6172 4c6f 6361 6c65  ic.angularLocale
-00007ea0: 5363 7269 7074 2e61 7070 656e 640a 2020  Script.append.  
-00007eb0: 2d20 696e 7465 7266 6163 6573 5f63 6f6e  - interfaces_con
-00007ec0: 6669 672e 6465 6661 756c 742e 636f 6e73  fig.default.cons
-00007ed0: 7461 6e74 732e 676d 664d 6f75 7365 506f  tants.gmfMousePo
-00007ee0: 7369 7469 6f6e 4f70 7469 6f6e 732e 7072  sitionOptions.pr
-00007ef0: 6f6a 6563 7469 6f6e 735b 5d2e 6669 6c74  ojections[].filt
-00007f00: 6572 0a20 202d 2069 6e74 6572 6661 6365  er.  - interface
-00007f10: 735f 636f 6e66 6967 2e64 6566 6175 6c74  s_config.default
-00007f20: 2e63 6f6e 7374 616e 7473 2e67 6d66 4d6f  .constants.gmfMo
-00007f30: 6269 6c65 4d65 6173 7572 6550 6f69 6e74  bileMeasurePoint
-00007f40: 4f70 7469 6f6e 732e 666f 726d 6174 0a20  Options.format. 
-00007f50: 202d 2069 6e74 6572 6661 6365 735f 636f   - interfaces_co
-00007f60: 6e66 6967 2e64 6566 6175 6c74 2e63 6f6e  nfig.default.con
-00007f70: 7374 616e 7473 2e6e 6765 6f53 7472 696e  stants.ngeoStrin
-00007f80: 6754 6f48 746d 6c52 6570 6c61 6365 6d65  gToHtmlReplaceme
-00007f90: 6e74 735b 5d2e 6578 7072 6573 7369 6f6e  nts[].expression
-00007fa0: 0a20 202d 2069 6e74 6572 6661 6365 735f  .  - interfaces_
-00007fb0: 636f 6e66 6967 2e6d 6f62 696c 652e 636f  config.mobile.co
-00007fc0: 6e73 7461 6e74 732e 676d 664d 6f75 7365  nstants.gmfMouse
-00007fd0: 506f 7369 7469 6f6e 4f70 7469 6f6e 732e  PositionOptions.
-00007fe0: 7072 6f6a 6563 7469 6f6e 735b 5d2e 6669  projections[].fi
-00007ff0: 6c74 6572 0a20 202d 2069 6e74 6572 6661  lter.  - interfa
-00008000: 6365 735f 636f 6e66 6967 2e6d 6f62 696c  ces_config.mobil
-00008010: 652e 636f 6e73 7461 6e74 732e 676d 664d  e.constants.gmfM
-00008020: 6f62 696c 654d 6561 7375 7265 506f 696e  obileMeasurePoin
-00008030: 744f 7074 696f 6e73 2e66 6f72 6d61 740a  tOptions.format.
-00008040: 2020 2d20 696e 7465 7266 6163 6573 5f63    - interfaces_c
-00008050: 6f6e 6669 672e 6d6f 6269 6c65 2e63 6f6e  onfig.mobile.con
-00008060: 7374 616e 7473 2e6e 6765 6f53 7472 696e  stants.ngeoStrin
-00008070: 6754 6f48 746d 6c52 6570 6c61 6365 6d65  gToHtmlReplaceme
-00008080: 6e74 735b 5d2e 6578 7072 6573 7369 6f6e  nts[].expression
-00008090: 0a20 202d 2069 6e74 6572 6661 6365 735f  .  - interfaces_
-000080a0: 636f 6e66 6967 2e64 6573 6b74 6f70 2e63  config.desktop.c
-000080b0: 6f6e 7374 616e 7473 2e67 6d66 4d6f 7573  onstants.gmfMous
-000080c0: 6550 6f73 6974 696f 6e4f 7074 696f 6e73  ePositionOptions
-000080d0: 2e70 726f 6a65 6374 696f 6e73 5b5d 2e66  .projections[].f
-000080e0: 696c 7465 720a 2020 2d20 696e 7465 7266  ilter.  - interf
-000080f0: 6163 6573 5f63 6f6e 6669 672e 6465 736b  aces_config.desk
-00008100: 746f 702e 636f 6e73 7461 6e74 732e 676d  top.constants.gm
-00008110: 664d 6f62 696c 654d 6561 7375 7265 506f  fMobileMeasurePo
-00008120: 696e 744f 7074 696f 6e73 2e66 6f72 6d61  intOptions.forma
-00008130: 740a 2020 2d20 696e 7465 7266 6163 6573  t.  - interfaces
-00008140: 5f63 6f6e 6669 672e 6465 736b 746f 702e  _config.desktop.
-00008150: 636f 6e73 7461 6e74 732e 6e67 656f 5374  constants.ngeoSt
-00008160: 7269 6e67 546f 4874 6d6c 5265 706c 6163  ringToHtmlReplac
-00008170: 656d 656e 7473 5b5d 2e65 7870 7265 7373  ements[].express
-00008180: 696f 6e0a                                ion.
+00000020: 2070 6163 6b61 6765 3a20 277b 7b63 6f6f   package: '{{coo
+00000030: 6b69 6563 7574 7465 722e 7061 636b 6167  kiecutter.packag
+00000040: 657d 7d27 0a20 206d 6169 6e5f 6f67 635f  e}}'.  main_ogc_
+00000050: 7365 7276 6572 3a20 736f 7572 6365 2066  server: source f
+00000060: 6f72 2069 6d61 6765 2f70 6e67 0a0a 2020  or image/png..  
+00000070: 7372 6964 3a20 4550 5347 3a2d 310a 0a20  srid: EPSG:-1.. 
+00000080: 2023 2053 716c 616c 6368 656d 7920 7363   # Sqlalchemy sc
+00000090: 6865 6d61 0a20 2073 6368 656d 613a 2027  hema.  schema: '
+000000a0: 7b50 4753 4348 454d 417d 270a 2020 2320  {PGSCHEMA}'.  # 
+000000b0: 5371 6c61 6c63 6865 6d79 2073 7461 7469  Sqlalchemy stati
+000000c0: 6320 7363 6865 6d61 0a20 2073 6368 656d  c schema.  schem
+000000d0: 615f 7374 6174 6963 3a20 277b 5047 5343  a_static: '{PGSC
+000000e0: 4845 4d41 5f53 5441 5449 437d 270a 0a20  HEMA_STATIC}'.. 
+000000f0: 2064 6273 6573 7369 6f6e 733a 207b 7d0a   dbsessions: {}.
+00000100: 0a20 2065 6e61 626c 655f 6164 6d69 6e5f  .  enable_admin_
+00000110: 696e 7465 7266 6163 653a 2054 7275 650a  interface: True.
+00000120: 0a20 2023 2044 6174 6162 6173 6520 696e  .  # Database in
+00000130: 666f 726d 6174 696f 6e0a 2020 7371 6c61  formation.  sqla
+00000140: 6c63 6865 6d79 3a0a 2020 2020 7572 6c3a  lchemy:.    url:
+00000150: 2070 6f73 7467 7265 7371 6c3a 2f2f 7b50   postgresql://{P
+00000160: 4755 5345 527d 3a7b 5047 5041 5353 574f  GUSER}:{PGPASSWO
+00000170: 5244 7d40 7b50 4748 4f53 547d 3a7b 5047  RD}@{PGHOST}:{PG
+00000180: 504f 5254 7d2f 7b50 4744 4154 4142 4153  PORT}/{PGDATABAS
+00000190: 457d 3f73 736c 6d6f 6465 3d7b 5047 5353  E}?sslmode={PGSS
+000001a0: 4c4d 4f44 457d 0a20 2020 2070 6f6f 6c5f  LMODE}.    pool_
+000001b0: 7265 6379 636c 653a 2027 7b53 514c 414c  recycle: '{SQLAL
+000001c0: 4348 454d 595f 504f 4f4c 5f52 4543 5943  CHEMY_POOL_RECYC
+000001d0: 4c45 7d27 0a20 2020 2070 6f6f 6c5f 7369  LE}'.    pool_si
+000001e0: 7a65 3a20 277b 5351 4c41 4c43 4845 4d59  ze: '{SQLALCHEMY
+000001f0: 5f50 4f4f 4c5f 5349 5a45 7d27 0a20 2020  _POOL_SIZE}'.   
+00000200: 206d 6178 5f6f 7665 7266 6c6f 773a 2027   max_overflow: '
+00000210: 7b53 514c 414c 4348 454d 595f 4d41 585f  {SQLALCHEMY_MAX_
+00000220: 4f56 4552 464c 4f57 7d27 0a20 2020 2065  OVERFLOW}'.    e
+00000230: 7865 6375 7465 6d61 6e79 5f6d 6f64 653a  xecutemany_mode:
+00000240: 2062 6174 6368 0a20 2073 716c 616c 6368   batch.  sqlalch
+00000250: 656d 795f 736c 6176 653a 0a20 2020 2075  emy_slave:.    u
+00000260: 726c 3a20 706f 7374 6772 6573 716c 3a2f  rl: postgresql:/
+00000270: 2f7b 5047 5553 4552 7d3a 7b50 4750 4153  /{PGUSER}:{PGPAS
+00000280: 5357 4f52 447d 407b 5047 484f 5354 5f53  SWORD}@{PGHOST_S
+00000290: 4c41 5645 7d3a 7b50 4750 4f52 545f 534c  LAVE}:{PGPORT_SL
+000002a0: 4156 457d 2f7b 5047 4441 5441 4241 5345  AVE}/{PGDATABASE
+000002b0: 7d3f 7373 6c6d 6f64 653d 7b50 4753 534c  }?sslmode={PGSSL
+000002c0: 4d4f 4445 7d0a 2020 2020 706f 6f6c 5f72  MODE}.    pool_r
+000002d0: 6563 7963 6c65 3a20 277b 5351 4c41 4c43  ecycle: '{SQLALC
+000002e0: 4845 4d59 5f53 4c41 5645 5f50 4f4f 4c5f  HEMY_SLAVE_POOL_
+000002f0: 5245 4359 434c 457d 270a 2020 2020 706f  RECYCLE}'.    po
+00000300: 6f6c 5f73 697a 653a 2027 7b53 514c 414c  ol_size: '{SQLAL
+00000310: 4348 454d 595f 534c 4156 455f 504f 4f4c  CHEMY_SLAVE_POOL
+00000320: 5f53 495a 457d 270a 2020 2020 6d61 785f  _SIZE}'.    max_
+00000330: 6f76 6572 666c 6f77 3a20 277b 5351 4c41  overflow: '{SQLA
+00000340: 4c43 4845 4d59 5f53 4c41 5645 5f4d 4158  LCHEMY_SLAVE_MAX
+00000350: 5f4f 5645 5246 4c4f 577d 270a 2020 2020  _OVERFLOW}'.    
+00000360: 6578 6563 7574 656d 616e 795f 6d6f 6465  executemany_mode
+00000370: 3a20 6261 7463 680a 0a20 2023 2053 6573  : batch..  # Ses
+00000380: 7369 6f6e 2062 6163 6b65 6e64 0a20 2073  sion backend.  s
+00000390: 6573 7369 6f6e 3a0a 2020 2020 7479 7065  ession:.    type
+000003a0: 3a20 2765 7874 3a72 6564 6973 270a 2020  : 'ext:redis'.  
+000003b0: 2020 7572 6c3a 2027 7265 6469 733a 2f2f    url: 'redis://
+000003c0: 7b52 4544 4953 5f48 4f53 547d 3a7b 5245  {REDIS_HOST}:{RE
+000003d0: 4449 535f 504f 5254 7d2f 7b52 4544 4953  DIS_PORT}/{REDIS
+000003e0: 5f44 427d 270a 0a20 2023 2031 3020 6461  _DB}'..  # 10 da
+000003f0: 7973 206f 6620 6465 6661 756c 7420 6361  ys of default ca
+00000400: 6368 650a 2020 6465 6661 756c 745f 6d61  che.  default_ma
+00000410: 785f 6167 653a 2038 3634 3030 300a 0a20  x_age: 864000.. 
+00000420: 2061 7574 6865 6e74 6963 6174 696f 6e3a   authentication:
+00000430: 0a20 2020 2074 776f 5f66 6163 746f 723a  .    two_factor:
+00000440: 2066 616c 7365 0a20 2020 2074 776f 5f66   false.    two_f
+00000450: 6163 746f 725f 6973 7375 6572 5f6e 616d  actor_issuer_nam
+00000460: 653a 2027 7b7b 636f 6f6b 6965 6375 7474  e: '{{cookiecutt
+00000470: 6572 2e70 726f 6a65 6374 7d7d 270a 2020  er.project}}'.  
+00000480: 2020 6f61 7574 6832 5f74 6f6b 656e 5f65    oauth2_token_e
+00000490: 7870 6972 655f 6d69 6e75 7465 733a 2036  xpire_minutes: 6
+000004a0: 300a 2020 2020 6f61 7574 6832 5f61 7574  0.    oauth2_aut
+000004b0: 686f 7269 7a61 7469 6f6e 5f65 7870 6972  horization_expir
+000004c0: 655f 6d69 6e75 7465 733a 2031 300a 2020  e_minutes: 10.  
+000004d0: 2020 6d61 785f 636f 6e73 6563 7574 6976    max_consecutiv
+000004e0: 655f 6661 696c 7572 6573 3a20 3130 0a0a  e_failures: 10..
+000004f0: 2020 696e 7472 616e 6574 3a0a 2020 2020    intranet:.    
+00000500: 6e65 7477 6f72 6b73 3a20 5b5d 0a0a 2020  networks: []..  
+00000510: 6931 386e 6578 743a 0a20 2020 206e 733a  i18next:.    ns:
+00000520: 0a20 2020 2020 202d 2067 656f 6d61 7066  .      - geomapf
+00000530: 6973 680a 2020 2020 6465 6661 756c 744e  ish.    defaultN
+00000540: 533a 2067 656f 6d61 7066 6973 680a 2020  S: geomapfish.  
+00000550: 2020 6465 6275 673a 2066 616c 7365 0a20    debug: false. 
+00000560: 2020 2064 6574 6563 7469 6f6e 3a0a 2020     detection:.  
+00000570: 2020 2020 6f72 6465 723a 0a20 2020 2020      order:.     
+00000580: 2020 202d 2071 7565 7279 7374 7269 6e67     - querystring
+00000590: 0a20 2020 2020 2020 202d 2063 6f6f 6b69  .        - cooki
+000005a0: 650a 2020 2020 2020 2020 2d20 6c6f 6361  e.        - loca
+000005b0: 6c53 746f 7261 6765 0a20 2020 2020 2020  lStorage.       
+000005c0: 202d 2073 6573 7369 6f6e 5374 6f72 6167   - sessionStorag
+000005d0: 650a 2020 2020 2020 2020 2d20 6e61 7669  e.        - navi
+000005e0: 6761 746f 720a 2020 2020 2020 2020 2d20  gator.        - 
+000005f0: 6874 6d6c 5461 670a 2020 2020 2020 6c6f  htmlTag.      lo
+00000600: 6f6b 7570 5175 6572 7973 7472 696e 673a  okupQuerystring:
+00000610: 206c 616e 670a 2020 2020 2020 6c6f 6f6b   lang.      look
+00000620: 7570 436f 6f6b 6965 3a20 6931 386e 6578  upCookie: i18nex
+00000630: 740a 2020 2020 2020 6c6f 6f6b 7570 4c6f  t.      lookupLo
+00000640: 6361 6c53 746f 7261 6765 3a20 6931 386e  calStorage: i18n
+00000650: 6578 744c 6e67 0a20 2020 2020 206c 6f6f  extLng.      loo
+00000660: 6b75 7053 6573 7369 6f6e 5374 6f72 6167  kupSessionStorag
+00000670: 653a 2069 3138 6e65 7874 4c6e 670a 2020  e: i18nextLng.  
+00000680: 2020 2020 6361 6368 6573 3a0a 2020 2020      caches:.    
+00000690: 2020 2020 2d20 6c6f 6361 6c53 746f 7261      - localStora
+000006a0: 6765 0a20 2020 2020 2065 7863 6c75 6465  ge.      exclude
+000006b0: 4361 6368 6546 6f72 3a0a 2020 2020 2020  CacheFor:.      
+000006c0: 2020 2d20 6369 6d6f 6465 0a20 2020 2066    - cimode.    f
+000006d0: 616c 6c62 6163 6b4c 6e67 3a20 6661 6c73  allbackLng: fals
+000006e0: 650a 2020 2020 696e 7465 7270 6f6c 6174  e.    interpolat
+000006f0: 696f 6e3a 0a20 2020 2020 2065 7363 6170  ion:.      escap
+00000700: 6556 616c 7565 3a20 6661 6c73 650a 2020  eValue: false.  
+00000710: 2020 6261 636b 656e 643a 207b 7d0a 0a20    backend: {}.. 
+00000720: 2069 6e74 6572 6661 6365 735f 636f 6e66   interfaces_conf
+00000730: 6967 3a0a 2020 2020 6465 6661 756c 743a  ig:.    default:
+00000740: 0a20 2020 2020 2063 6f6e 7374 616e 7473  .      constants
+00000750: 3a0a 2020 2020 2020 2020 676d 6650 726f  :.        gmfPro
+00000760: 6a65 6374 696f 6e73 4f70 7469 6f6e 733a  jectionsOptions:
+00000770: 2026 7072 6f6a 6563 7469 6f6e 730a 2020   &projections.  
+00000780: 2020 2020 2020 2020 2745 5053 473a 3231          'EPSG:21
+00000790: 3738 3127 3a0a 2020 2020 2020 2020 2020  781':.          
+000007a0: 2020 6465 6669 6e69 7469 6f6e 3a0a 2020    definition:.  
+000007b0: 2020 2020 2020 2020 2020 2020 2d20 2b70              - +p
+000007c0: 726f 6a3d 736f 6d65 7263 0a20 2020 2020  roj=somerc.     
+000007d0: 2020 2020 2020 2020 202d 202b 6c61 745f           - +lat_
+000007e0: 303d 3436 2e39 3532 3430 3535 3535 3535  0=46.95240555555
+000007f0: 3535 360a 2020 2020 2020 2020 2020 2020  556.            
+00000800: 2020 2d20 2b6c 6f6e 5f30 3d37 2e34 3339    - +lon_0=7.439
+00000810: 3538 3333 3333 3333 3333 3333 0a20 2020  583333333333.   
+00000820: 2020 2020 2020 2020 2020 202d 202b 6b5f             - +k_
+00000830: 303d 310a 2020 2020 2020 2020 2020 2020  0=1.            
+00000840: 2020 2d20 2b78 5f30 3d36 3030 3030 300a    - +x_0=600000.
+00000850: 2020 2020 2020 2020 2020 2020 2020 2d20                - 
+00000860: 2b79 5f30 3d32 3030 3030 300a 2020 2020  +y_0=200000.    
+00000870: 2020 2020 2020 2020 2020 2d20 2b65 6c6c            - +ell
+00000880: 7073 3d62 6573 7365 6c0a 2020 2020 2020  ps=bessel.      
+00000890: 2020 2020 2020 2020 2d20 2b74 6f77 6773          - +towgs
+000008a0: 3834 3d36 3734 2e33 3734 2c31 352e 3035  84=674.374,15.05
+000008b0: 362c 3430 352e 3334 362c 302c 302c 302c  6,405.346,0,0,0,
+000008c0: 300a 2020 2020 2020 2020 2020 2020 2020  0.              
+000008d0: 2d20 2b75 6e69 7473 3d6d 0a20 2020 2020  - +units=m.     
+000008e0: 2020 2020 2020 2020 202d 202b 6e6f 5f64           - +no_d
+000008f0: 6566 730a 2020 2020 2020 2020 2020 2020  efs.            
+00000900: 6578 7465 6e74 3a20 5b34 3230 3030 302c  extent: [420000,
+00000910: 2033 3030 3030 2c20 3930 3030 3030 2c20   30000, 900000, 
+00000920: 3335 3030 3030 5d0a 2020 2020 2020 2020  350000].        
+00000930: 2020 2745 5053 473a 3230 3536 273a 0a20    'EPSG:2056':. 
+00000940: 2020 2020 2020 2020 2020 2064 6566 696e             defin
+00000950: 6974 696f 6e3a 0a20 2020 2020 2020 2020  ition:.         
+00000960: 2020 2020 202d 202b 7072 6f6a 3d73 6f6d       - +proj=som
+00000970: 6572 630a 2020 2020 2020 2020 2020 2020  erc.            
+00000980: 2020 2d20 2b6c 6174 5f30 3d34 362e 3935    - +lat_0=46.95
+00000990: 3234 3035 3535 3535 3535 3536 0a20 2020  240555555556.   
+000009a0: 2020 2020 2020 2020 2020 202d 202b 6c6f             - +lo
+000009b0: 6e5f 303d 372e 3433 3935 3833 3333 3333  n_0=7.4395833333
+000009c0: 3333 3333 330a 2020 2020 2020 2020 2020  33333.          
+000009d0: 2020 2020 2d20 2b6b 5f30 3d31 0a20 2020      - +k_0=1.   
+000009e0: 2020 2020 2020 2020 2020 202d 202b 785f             - +x_
+000009f0: 303d 3236 3030 3030 300a 2020 2020 2020  0=2600000.      
+00000a00: 2020 2020 2020 2020 2d20 2b79 5f30 3d31          - +y_0=1
+00000a10: 3230 3030 3030 0a20 2020 2020 2020 2020  200000.         
+00000a20: 2020 2020 202d 202b 656c 6c70 733d 6265       - +ellps=be
+00000a30: 7373 656c 0a20 2020 2020 2020 2020 2020  ssel.           
+00000a40: 2020 202d 202b 746f 7767 7338 343d 3637     - +towgs84=67
+00000a50: 342e 3337 342c 3135 2e30 3536 2c34 3035  4.374,15.056,405
+00000a60: 2e33 3436 2c30 2c30 2c30 2c30 0a20 2020  .346,0,0,0,0.   
+00000a70: 2020 2020 2020 2020 2020 202d 202b 756e             - +un
+00000a80: 6974 733d 6d0a 2020 2020 2020 2020 2020  its=m.          
+00000a90: 2020 2020 2d20 2b6e 6f5f 6465 6673 0a20      - +no_defs. 
+00000aa0: 2020 2020 2020 2020 2020 2065 7874 656e             exten
+00000ab0: 743a 205b 3234 3230 3030 302c 2031 3033  t: [2420000, 103
+00000ac0: 3030 3030 2c20 3239 3030 3030 302c 2031  0000, 2900000, 1
+00000ad0: 3335 3030 3030 5d0a 2020 2020 2020 2020  350000].        
+00000ae0: 7365 6e74 7279 4f70 7469 6f6e 733a 0a20  sentryOptions:. 
+00000af0: 2020 2020 2020 2020 2064 736e 3a20 277b           dsn: '{
+00000b00: 5345 4e54 5259 5f55 524c 7d27 0a20 2020  SENTRY_URL}'.   
+00000b10: 2020 2020 2020 2072 656c 6561 7365 3a20         release: 
+00000b20: 277b 5345 4e54 5259 5f43 4c49 454e 545f  '{SENTRY_CLIENT_
+00000b30: 5245 4c45 4153 457d 270a 2020 2020 2020  RELEASE}'.      
+00000b40: 2020 2020 656e 7669 726f 6e6d 656e 743a      environment:
+00000b50: 2027 7b53 454e 5452 595f 434c 4945 4e54   '{SENTRY_CLIENT
+00000b60: 5f45 4e56 4952 4f4e 4d45 4e54 7d27 0a20  _ENVIRONMENT}'. 
+00000b70: 2020 2020 2020 2020 2061 7474 6163 6853           attachS
+00000b80: 7461 636b 7472 6163 653a 2054 7275 650a  tacktrace: True.
+00000b90: 2020 2020 2020 2020 2020 7461 6773 3a0a            tags:.
+00000ba0: 2020 2020 2020 2020 2020 2020 7365 7276              serv
+00000bb0: 6963 653a 206a 730a 2020 2020 2020 2020  ice: js.        
+00000bc0: 676d 6641 7574 6865 6e74 6963 6174 696f  gmfAuthenticatio
+00000bd0: 6e43 6f6e 6669 673a 0a20 2020 2020 2020  nConfig:.       
+00000be0: 2020 2061 6c6c 6f77 5061 7373 776f 7264     allowPassword
+00000bf0: 4368 616e 6765 3a20 7472 7565 0a20 2020  Change: true.   
+00000c00: 2020 2020 2020 2061 6c6c 6f77 5061 7373         allowPass
+00000c10: 776f 7264 5265 7365 743a 2074 7275 650a  wordReset: true.
+00000c20: 2020 2020 2020 2020 6e67 656f 5766 7350          ngeoWfsP
+00000c30: 6572 6d61 6c69 6e6b 4f70 7469 6f6e 733a  ermalinkOptions:
+00000c40: 0a20 2020 2020 2020 2020 2077 6673 5479  .          wfsTy
+00000c50: 7065 733a 205b 5d0a 2020 2020 2020 2020  pes: [].        
+00000c60: 2020 6465 6661 756c 7446 6561 7475 7265    defaultFeature
+00000c70: 4e53 3a20 6874 7470 3a2f 2f6d 6170 7365  NS: http://mapse
+00000c80: 7276 6572 2e67 6973 2e75 6d6e 2e65 6475  rver.gis.umn.edu
+00000c90: 2f6d 6170 7365 7276 6572 0a20 2020 2020  /mapserver.     
+00000ca0: 2020 2020 2064 6566 6175 6c74 4665 6174       defaultFeat
+00000cb0: 7572 6550 7265 6669 783a 2066 6561 7475  urePrefix: featu
+00000cc0: 7265 0a20 2020 2020 2020 2020 2063 726f  re.          cro
+00000cd0: 7373 6861 6972 5374 796c 653a 0a20 2020  sshairStyle:.   
+00000ce0: 2020 2020 2020 2020 202d 2072 6567 756c           - regul
+00000cf0: 6172 5368 6170 653a 0a20 2020 2020 2020  arShape:.       
+00000d00: 2020 2020 2020 2020 2073 7472 6f6b 653a           stroke:
+00000d10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00000d20: 2020 2063 6f6c 6f72 3a20 7768 6974 650a     color: white.
+00000d30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000d40: 2020 7769 6474 683a 2035 0a20 2020 2020    width: 5.     
+00000d50: 2020 2020 2020 2020 2020 2070 6f69 6e74             point
+00000d60: 733a 2034 0a20 2020 2020 2020 2020 2020  s: 4.           
+00000d70: 2020 2020 2072 6164 6975 733a 2031 300a       radius: 10.
+00000d80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000d90: 7261 6469 7573 323a 2030 0a20 2020 2020  radius2: 0.     
+00000da0: 2020 2020 2020 2020 2020 2061 6e67 6c65             angle
+00000db0: 3a20 300a 2020 2020 2020 2020 2020 2020  : 0.            
+00000dc0: 2d20 7265 6775 6c61 7253 6861 7065 3a0a  - regularShape:.
+00000dd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000de0: 7374 726f 6b65 3a0a 2020 2020 2020 2020  stroke:.        
+00000df0: 2020 2020 2020 2020 2020 636f 6c6f 723a            color:
+00000e00: 2072 6564 0a20 2020 2020 2020 2020 2020   red.           
+00000e10: 2020 2020 2020 2077 6964 7468 3a20 320a         width: 2.
+00000e20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000e30: 706f 696e 7473 3a20 340a 2020 2020 2020  points: 4.      
+00000e40: 2020 2020 2020 2020 2020 7261 6469 7573            radius
+00000e50: 3a20 3130 0a20 2020 2020 2020 2020 2020  : 10.           
+00000e60: 2020 2020 2072 6164 6975 7332 3a20 300a       radius2: 0.
+00000e70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000e80: 616e 676c 653a 2030 0a20 2020 2020 2020  angle: 0.       
+00000e90: 206e 6765 6f53 6361 6c65 5365 6c65 6374   ngeoScaleSelect
+00000ea0: 6f72 4f70 7469 6f6e 733a 0a20 2020 2020  orOptions:.     
+00000eb0: 2020 2020 2076 616c 7565 733a 205b 3130       values: [10
+00000ec0: 3030 3030 302c 2035 3030 3030 302c 2032  00000, 500000, 2
+00000ed0: 3030 3030 302c 2031 3030 3030 302c 2035  00000, 100000, 5
+00000ee0: 3030 3030 2c20 3230 3030 302c 2031 3030  0000, 20000, 100
+00000ef0: 3030 2c20 3530 3030 2c20 3230 3030 2c20  00, 5000, 2000, 
+00000f00: 3130 3030 2c20 3530 302c 2032 3030 5d0a  1000, 500, 200].
+00000f10: 2020 2020 2020 2020 2020 6472 6f70 7570            dropup
+00000f20: 3a20 5472 7565 0a20 2020 2020 2020 206e  : True.        n
+00000f30: 6765 6f53 7472 696e 6754 6f48 746d 6c52  geoStringToHtmlR
+00000f40: 6570 6c61 6365 6d65 6e74 733a 0a20 2020  eplacements:.   
+00000f50: 2020 2020 2020 2023 2048 7970 6572 6c69         # Hyperli
+00000f60: 6e6b 0a20 2020 2020 2020 2020 202d 2065  nk.          - e
+00000f70: 7870 7265 7373 696f 6e3a 205e 2868 7474  xpression: ^(htt
+00000f80: 7073 3f3a 5c2f 5c2f 2e2b 2924 0a20 2020  ps?:\/\/.+)$.   
+00000f90: 2020 2020 2020 2020 2074 6167 733a 2067           tags: g
+00000fa0: 6d0a 2020 2020 2020 2020 2020 2020 7465  m.            te
+00000fb0: 6d70 6c61 7465 3a20 3c61 2074 6172 6765  mplate: <a targe
+00000fc0: 743d 225f 626c 616e 6b22 2068 7265 663d  t="_blank" href=
+00000fd0: 2224 3122 3e24 313c 2f61 3e0a 2020 2020  "$1">$1</a>.    
+00000fe0: 2020 2020 2020 2320 4d61 696c 746f 0a20        # Mailto. 
+00000ff0: 2020 2020 2020 2020 202d 2065 7870 7265           - expre
+00001000: 7373 696f 6e3a 205e 5b41 2d5a 302d 392e  ssion: ^[A-Z0-9.
+00001010: 5f25 2b2d 5d2b 405b 412d 5a30 2d39 2e2d  _%+-]+@[A-Z0-9.-
+00001020: 5d2b 5c5c 5c5c 2e5b 412d 5a5d 7b32 2c7d  ]+\\\\.[A-Z]{2,}
+00001030: 240a 2020 2020 2020 2020 2020 2020 7461  $.            ta
+00001040: 6773 3a20 6769 6d0a 2020 2020 2020 2020  gs: gim.        
+00001050: 2020 2020 7465 6d70 6c61 7465 3a20 3c61      template: <a
+00001060: 2068 7265 663d 226d 6169 6c74 6f3a 2431   href="mailto:$1
+00001070: 223e 2431 3c2f 613e 0a20 2020 2020 2020  ">$1</a>.       
+00001080: 206e 6765 6f54 696c 6573 5072 656c 6f61   ngeoTilesPreloa
+00001090: 6469 6e67 4c69 6d69 743a 0a20 2020 2020  dingLimit:.     
+000010a0: 2020 206e 6765 6f55 7365 644b 6579 5265     ngeoUsedKeyRe
+000010b0: 6765 7870 3a0a 2020 2020 2020 2020 2020  gexp:.          
+000010c0: 2d20 2e2a 0a20 2020 2020 2020 206e 6765  - .*.        nge
+000010d0: 6f51 7565 7279 4f70 7469 6f6e 733a 0a20  oQueryOptions:. 
+000010e0: 2020 2020 2020 2020 206c 696d 6974 3a20           limit: 
+000010f0: 3230 0a20 2020 2020 2020 206e 6765 6f4d  20.        ngeoM
+00001100: 6561 7375 7265 5072 6563 6973 696f 6e3a  easurePrecision:
+00001110: 2033 0a20 2020 2020 2020 206e 6765 6f4d   3.        ngeoM
+00001120: 6561 7375 7265 4465 6369 6d61 6c73 3a20  easureDecimals: 
+00001130: 300a 2020 2020 2020 2020 6e67 656f 4d65  0.        ngeoMe
+00001140: 6173 7572 6553 7068 6572 6963 616c 3a20  asureSpherical: 
+00001150: 4661 6c73 650a 2020 2020 2020 2020 676d  False.        gm
+00001160: 6653 6e61 7070 696e 6743 6f6e 6669 673a  fSnappingConfig:
+00001170: 207b 7d0a 2020 2020 2020 2020 676d 6653   {}.        gmfS
+00001180: 6e61 7070 696e 674f 7074 696f 6e73 3a0a  nappingOptions:.
+00001190: 2020 2020 2020 2020 2020 6d61 7846 6561            maxFea
+000011a0: 7475 7265 733a 2035 300a 2020 2020 2020  tures: 50.      
+000011b0: 2020 6e67 656f 536e 6170 7069 6e67 546f    ngeoSnappingTo
+000011c0: 6c65 7261 6e63 653a 2032 300a 2020 2020  lerance: 20.    
+000011d0: 2020 2020 676d 664f 626a 6563 7445 6469      gmfObjectEdi
+000011e0: 7469 6e67 546f 6f6c 734f 7074 696f 6e73  tingToolsOptions
+000011f0: 3a20 7b7d 0a20 2020 2020 2020 2067 6d66  : {}.        gmf
+00001200: 5472 6565 4d61 6e61 6765 724d 6f64 6546  TreeManagerModeF
+00001210: 6c75 7368 3a20 5472 7565 0a20 2020 2020  lush: True.     
+00001220: 2020 2067 6d66 5468 656d 6573 4f70 7469     gmfThemesOpti
+00001230: 6f6e 733a 207b 7d0a 2020 2020 2020 2020  ons: {}.        
+00001240: 6e67 656f 506f 696e 7466 696c 7465 723a  ngeoPointfilter:
+00001250: 0a20 2020 2020 2020 2067 6d66 4175 7468  .        gmfAuth
+00001260: 656e 7469 6361 7469 6f6e 4e6f 5265 6c6f  enticationNoRelo
+00001270: 6164 526f 6c65 3a0a 2020 2020 2020 2020  adRole:.        
+00001280: 6e67 656f 4e6f 6d69 6e61 7469 6d53 6561  ngeoNominatimSea
+00001290: 7263 6844 6566 6175 6c74 5061 7261 6d73  rchDefaultParams
+000012a0: 3a20 7b7d 0a20 2020 2020 2020 206e 6765  : {}.        nge
+000012b0: 6f4e 6f6d 696e 6174 696d 5572 6c3a 2068  oNominatimUrl: h
+000012c0: 7474 7073 3a2f 2f6e 6f6d 696e 6174 696d  ttps://nominatim
+000012d0: 2e6f 7065 6e73 7472 6565 746d 6170 2e6f  .openstreetmap.o
+000012e0: 7267 2f0a 2020 2020 2020 2020 6e67 656f  rg/.        ngeo
+000012f0: 4373 7645 6e63 6f64 696e 673a 2075 7466  CsvEncoding: utf
+00001300: 2d38 0a20 2020 2020 2020 206e 6765 6f43  -8.        ngeoC
+00001310: 7376 4578 7465 6e73 696f 6e3a 202e 6373  svExtension: .cs
+00001320: 760a 2020 2020 2020 2020 6e67 656f 4373  v.        ngeoCs
+00001330: 7649 6e63 6c75 6465 4865 6164 6572 3a20  vIncludeHeader: 
+00001340: 5472 7565 0a20 2020 2020 2020 206e 6765  True.        nge
+00001350: 6f43 7376 5175 6f74 653a 2027 2227 0a20  oCsvQuote: '"'. 
+00001360: 2020 2020 2020 206e 6765 6f43 7376 5365         ngeoCsvSe
+00001370: 7061 7261 746f 723a 2027 2c27 0a20 2020  parator: ','.   
+00001380: 2020 2020 2067 6d66 4373 7646 696c 656e       gmfCsvFilen
+00001390: 616d 653a 2071 7565 7279 2d72 6573 756c  ame: query-resul
+000013a0: 7473 2e63 7376 0a20 2020 2020 2020 2067  ts.csv.        g
+000013b0: 6d66 4469 7370 6c61 7951 7565 7279 5769  mfDisplayQueryWi
+000013c0: 6e64 6f77 4f70 7469 6f6e 733a 0a20 2020  ndowOptions:.   
+000013d0: 2020 2020 2020 2066 6561 7475 7265 7353         featuresS
+000013e0: 7479 6c65 3a20 2666 6561 7475 7265 5374  tyle: &featureSt
+000013f0: 796c 650a 2020 2020 2020 2020 2020 2020  yle.            
+00001400: 6669 6c6c 3a0a 2020 2020 2020 2020 2020  fill:.          
+00001410: 2020 2020 636f 6c6f 723a 205b 3235 352c      color: [255,
+00001420: 2031 3730 2c20 302c 2030 2e36 5d0a 2020   170, 0, 0.6].  
+00001430: 2020 2020 2020 2020 2020 7374 726f 6b65            stroke
+00001440: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00001450: 636f 6c6f 723a 205b 3235 352c 2031 3730  color: [255, 170
+00001460: 2c20 302c 2031 5d0a 2020 2020 2020 2020  , 0, 1].        
+00001470: 2020 2020 2020 7769 6474 683a 2032 0a20        width: 2. 
+00001480: 2020 2020 2020 2020 2020 207a 496e 6465             zInde
+00001490: 783a 2031 300a 2020 2020 2020 2020 2020  x: 10.          
+000014a0: 2020 6369 7263 6c65 3a0a 2020 2020 2020    circle:.      
+000014b0: 2020 2020 2020 2020 6669 6c6c 3a0a 2020          fill:.  
+000014c0: 2020 2020 2020 2020 2020 2020 2020 636f                co
+000014d0: 6c6f 723a 205b 3235 352c 2031 3730 2c20  lor: [255, 170, 
+000014e0: 302c 2030 2e36 5d0a 2020 2020 2020 2020  0, 0.6].        
+000014f0: 2020 2020 2020 7374 726f 6b65 3a0a 2020        stroke:.  
+00001500: 2020 2020 2020 2020 2020 2020 2020 636f                co
+00001510: 6c6f 723a 205b 3235 352c 2031 3730 2c20  lor: [255, 170, 
+00001520: 302c 2031 5d0a 2020 2020 2020 2020 2020  0, 1].          
+00001530: 2020 2020 2020 7769 6474 683a 2032 0a20        width: 2. 
+00001540: 2020 2020 2020 2020 2020 2020 2072 6164               rad
+00001550: 6975 733a 2035 0a20 2020 2020 2020 2020  ius: 5.         
+00001560: 2073 656c 6563 7465 6446 6561 7475 7265   selectedFeature
+00001570: 5374 796c 653a 2026 7365 6c65 6374 6564  Style: &selected
+00001580: 4665 6174 7572 6553 7479 6c65 0a20 2020  FeatureStyle.   
+00001590: 2020 2020 2020 2020 2066 696c 6c3a 0a20           fill:. 
+000015a0: 2020 2020 2020 2020 2020 2020 2063 6f6c               col
+000015b0: 6f72 3a20 5b32 3535 2c20 302c 2030 2c20  or: [255, 0, 0, 
+000015c0: 302e 365d 0a20 2020 2020 2020 2020 2020  0.6].           
+000015d0: 2073 7472 6f6b 653a 0a20 2020 2020 2020   stroke:.       
+000015e0: 2020 2020 2020 2063 6f6c 6f72 3a20 5b32         color: [2
+000015f0: 3535 2c20 302c 2030 2c20 315d 0a20 2020  55, 0, 0, 1].   
+00001600: 2020 2020 2020 2020 2020 2077 6964 7468             width
+00001610: 3a20 320a 2020 2020 2020 2020 2020 2020  : 2.            
+00001620: 7a49 6e64 6578 3a20 3130 0a20 2020 2020  zIndex: 10.     
+00001630: 2020 2020 2020 2063 6972 636c 653a 0a20         circle:. 
+00001640: 2020 2020 2020 2020 2020 2020 2066 696c               fil
+00001650: 6c3a 0a20 2020 2020 2020 2020 2020 2020  l:.             
+00001660: 2020 2063 6f6c 6f72 3a20 5b32 3535 2c20     color: [255, 
+00001670: 302c 2030 2c20 302e 365d 0a20 2020 2020  0, 0, 0.6].     
+00001680: 2020 2020 2020 2020 2073 7472 6f6b 653a           stroke:
+00001690: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000016a0: 2063 6f6c 6f72 3a20 5b32 3535 2c20 302c   color: [255, 0,
+000016b0: 2030 2c20 315d 0a20 2020 2020 2020 2020   0, 1].         
+000016c0: 2020 2020 2020 2077 6964 7468 3a20 320a         width: 2.
+000016d0: 2020 2020 2020 2020 2020 2020 2020 7261                ra
+000016e0: 6469 7573 3a20 350a 2020 2020 2020 2020  dius: 5.        
+000016f0: 676d 664c 6179 6572 5472 6565 4f70 7469  gmfLayerTreeOpti
+00001700: 6f6e 733a 0a20 2020 2020 2020 2020 206f  ons:.          o
+00001710: 7065 6e4c 696e 6b73 496e 4e65 7757 696e  penLinksInNewWin
+00001720: 646f 773a 2046 616c 7365 0a20 2020 2020  dow: False.     
+00001730: 2020 2020 2069 7345 7870 616e 6465 643a       isExpanded:
+00001740: 2046 616c 7365 0a20 2020 2020 2020 2020   False.         
+00001750: 206c 6179 6572 4963 6f6e 3a0a 2020 2020   layerIcon:.    
+00001760: 2020 2020 2020 2020 7769 6474 683a 2032          width: 2
+00001770: 300a 2020 2020 2020 2020 2020 2020 6865  0.            he
+00001780: 6967 6874 3a20 3230 0a20 2020 2020 2020  ight: 20.       
+00001790: 2067 6d66 4469 7363 6c61 696d 6572 4f70   gmfDisclaimerOp
+000017a0: 7469 6f6e 733a 207b 7d0a 2020 2020 2020  tions: {}.      
+000017b0: 2020 676d 6642 6163 6b67 726f 756e 644c    gmfBackgroundL
+000017c0: 6179 6572 5365 6c65 6374 6f72 4f70 7469  ayerSelectorOpti
+000017d0: 6f6e 733a 207b 7d0a 2020 2020 2020 2020  ons: {}.        
+000017e0: 6465 6661 756c 7454 6865 6d65 3a20 4465  defaultTheme: De
+000017f0: 6d6f 0a20 2020 2020 2020 2064 6566 6175  mo.        defau
+00001800: 6c74 4c61 6e67 3a20 656e 0a20 2020 2020  ltLang: en.     
+00001810: 2020 2067 6d66 4f70 7469 6f6e 733a 0a20     gmfOptions:. 
+00001820: 2020 2020 2020 2020 206d 6170 3a20 7b7d           map: {}
+00001830: 0a20 2020 2020 2020 2020 2076 6965 773a  .          view:
+00001840: 0a20 2020 2020 2020 2020 2020 2073 7269  .            sri
+00001850: 643a 2027 7b73 7269 647d 270a 2020 2020  d: '{srid}'.    
+00001860: 2020 2020 2020 2020 6365 6e74 6572 3a20          center: 
+00001870: 5b32 3630 3030 3030 2c20 3132 3030 3030  [2600000, 120000
+00001880: 305d 0a20 2020 2020 2020 2020 2020 207a  0].            z
+00001890: 6f6f 6d3a 2033 0a20 2020 2020 2020 2020  oom: 3.         
+000018a0: 2020 2072 6573 6f6c 7574 696f 6e73 3a20     resolutions: 
+000018b0: 5b32 3530 2c20 3130 302c 2035 302c 2032  [250, 100, 50, 2
+000018c0: 302c 2031 302c 2035 2c20 322c 2031 2c20  0, 10, 5, 2, 1, 
+000018d0: 302e 352c 2030 2e32 352c 2030 2e31 2c20  0.5, 0.25, 0.1, 
+000018e0: 302e 3035 5d0a 2020 2020 2020 2020 2020  0.05].          
+000018f0: 2020 6578 7465 6e74 3a20 5b32 3432 3030    extent: [24200
+00001900: 3030 2c20 3130 3330 3030 302c 2032 3930  00, 1030000, 290
+00001910: 3030 3030 2c20 3133 3530 3030 305d 0a20  0000, 1350000]. 
+00001920: 2020 2020 2020 2020 2020 2063 6f6e 7374             const
+00001930: 7261 696e 526f 7461 7469 6f6e 3a20 6661  rainRotation: fa
+00001940: 6c73 650a 2020 2020 2020 2020 676d 6653  lse.        gmfS
+00001950: 6561 7263 684f 7074 696f 6e73 3a0a 2020  earchOptions:.  
+00001960: 2020 2020 2020 2020 7374 796c 6573 3a0a          styles:.
+00001970: 2020 2020 2020 2020 2020 2020 6465 6661              defa
+00001980: 756c 743a 0a20 2020 2020 2020 2020 2020  ult:.           
+00001990: 2020 2066 696c 6c3a 0a20 2020 2020 2020     fill:.       
+000019a0: 2020 2020 2020 2020 2063 6f6c 6f72 3a20           color: 
+000019b0: 5b36 352c 2031 3334 2c20 3234 302c 2030  [65, 134, 240, 0
+000019c0: 2e35 5d0a 2020 2020 2020 2020 2020 2020  .5].            
+000019d0: 2020 7374 726f 6b65 3a0a 2020 2020 2020    stroke:.      
+000019e0: 2020 2020 2020 2020 2020 636f 6c6f 723a            color:
+000019f0: 205b 3635 2c20 3133 342c 2032 3430 2c20   [65, 134, 240, 
+00001a00: 315d 0a20 2020 2020 2020 2020 2020 2020  1].             
+00001a10: 2020 2077 6964 7468 3a20 320a 2020 2020     width: 2.    
+00001a20: 2020 2020 2020 2020 2020 6369 7263 6c65            circle
+00001a30: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00001a40: 2020 6669 6c6c 3a0a 2020 2020 2020 2020    fill:.        
+00001a50: 2020 2020 2020 2020 2020 636f 6c6f 723a            color:
+00001a60: 205b 3635 2c20 3133 342c 2032 3430 2c20   [65, 134, 240, 
+00001a70: 302e 355d 0a20 2020 2020 2020 2020 2020  0.5].           
+00001a80: 2020 2020 2073 7472 6f6b 653a 0a20 2020       stroke:.   
+00001a90: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+00001aa0: 6f6c 6f72 3a20 5b36 352c 2031 3334 2c20  olor: [65, 134, 
+00001ab0: 3234 302c 2031 5d0a 2020 2020 2020 2020  240, 1].        
+00001ac0: 2020 2020 2020 2020 2020 7769 6474 683a            width:
+00001ad0: 2032 0a20 2020 2020 2020 2020 2020 2020   2.             
+00001ae0: 2020 2072 6164 6975 733a 2035 0a20 2020     radius: 5.   
+00001af0: 2020 2020 2020 2020 2067 6d66 436f 6f72           gmfCoor
+00001b00: 6469 6e61 7465 734c 6179 6572 4e61 6d65  dinatesLayerName
+00001b10: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00001b20: 7265 6775 6c61 7253 6861 7065 3a0a 2020  regularShape:.  
+00001b30: 2020 2020 2020 2020 2020 2020 2020 7374                st
+00001b40: 726f 6b65 3a0a 2020 2020 2020 2020 2020  roke:.          
+00001b50: 2020 2020 2020 2020 636f 6c6f 723a 205b          color: [
+00001b60: 302c 2030 2c20 302c 2030 2e37 5d0a 2020  0, 0, 0, 0.7].  
+00001b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001b80: 7769 6474 683a 2032 0a20 2020 2020 2020  width: 2.       
+00001b90: 2020 2020 2020 2020 2070 6f69 6e74 733a           points:
+00001ba0: 2034 0a20 2020 2020 2020 2020 2020 2020   4.             
+00001bb0: 2020 2072 6164 6975 733a 2038 0a20 2020     radius: 8.   
+00001bc0: 2020 2020 2020 2020 2020 2020 2072 6164               rad
+00001bd0: 6975 7332 3a20 300a 2020 2020 2020 2020  ius2: 0.        
+00001be0: 2020 2020 2020 2020 616e 676c 653a 2030          angle: 0
+00001bf0: 0a20 2020 2020 2020 2020 2064 6174 6173  .          datas
+00001c00: 6f75 7263 6573 3a0a 2020 2020 2020 2020  ources:.        
+00001c10: 2020 2020 2d20 6c61 6265 6c4b 6579 3a20      - labelKey: 
+00001c20: 6c61 6265 6c0a 2020 2020 2020 2020 2020  label.          
+00001c30: 2020 2020 6772 6f75 7041 6374 696f 6e73      groupActions
+00001c40: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00001c50: 2020 2d20 6163 7469 6f6e 3a20 6164 645f    - action: add_
+00001c60: 7468 656d 650a 2020 2020 2020 2020 2020  theme.          
+00001c70: 2020 2020 2020 2020 7469 746c 653a 2041          title: A
+00001c80: 6464 2061 2074 6865 6d65 0a20 2020 2020  dd a theme.     
+00001c90: 2020 2020 2020 2020 2020 202d 2061 6374             - act
+00001ca0: 696f 6e3a 2061 6464 5f67 726f 7570 0a20  ion: add_group. 
+00001cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001cc0: 2074 6974 6c65 3a20 4164 6420 6120 7375   title: Add a su
+00001cd0: 6220 7468 656d 650a 2020 2020 2020 2020  b theme.        
+00001ce0: 2020 2020 2020 2020 2d20 6163 7469 6f6e          - action
+00001cf0: 3a20 6164 645f 6c61 7965 720a 2020 2020  : add_layer.    
+00001d00: 2020 2020 2020 2020 2020 2020 2020 7469                ti
+00001d10: 746c 653a 2041 6464 2061 206c 6179 6572  tle: Add a layer
+00001d20: 0a20 2020 2020 2020 2020 2020 2020 2070  .              p
+00001d30: 726f 6a65 6374 696f 6e3a 2045 5053 473a  rojection: EPSG:
+00001d40: 7b73 7269 647d 0a20 2020 2020 2020 2067  {srid}.        g
+00001d50: 6d66 5065 726d 616c 696e 6b4f 7074 696f  mfPermalinkOptio
+00001d60: 6e73 3a0a 2020 2020 2020 2020 2020 6372  ns:.          cr
+00001d70: 6f73 7368 6169 7253 7479 6c65 3a0a 2020  osshairStyle:.  
+00001d80: 2020 2020 2020 2020 2020 2d20 7265 6775            - regu
+00001d90: 6c61 7253 6861 7065 3a0a 2020 2020 2020  larShape:.      
+00001da0: 2020 2020 2020 2020 2020 7374 726f 6b65            stroke
+00001db0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00001dc0: 2020 2020 636f 6c6f 723a 2077 6869 7465      color: white
+00001dd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00001de0: 2020 2077 6964 7468 3a20 350a 2020 2020     width: 5.    
+00001df0: 2020 2020 2020 2020 2020 2020 706f 696e              poin
+00001e00: 7473 3a20 340a 2020 2020 2020 2020 2020  ts: 4.          
+00001e10: 2020 2020 2020 7261 6469 7573 3a20 3130        radius: 10
+00001e20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00001e30: 2072 6164 6975 7332 3a20 300a 2020 2020   radius2: 0.    
+00001e40: 2020 2020 2020 2020 2020 2020 616e 676c              angl
+00001e50: 653a 2030 0a20 2020 2020 2020 2020 2020  e: 0.           
+00001e60: 202d 2072 6567 756c 6172 5368 6170 653a   - regularShape:
+00001e70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00001e80: 2073 7472 6f6b 653a 0a20 2020 2020 2020   stroke:.       
+00001e90: 2020 2020 2020 2020 2020 2063 6f6c 6f72             color
+00001ea0: 3a20 7265 640a 2020 2020 2020 2020 2020  : red.          
+00001eb0: 2020 2020 2020 2020 7769 6474 683a 2032          width: 2
+00001ec0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00001ed0: 2070 6f69 6e74 733a 2034 0a20 2020 2020   points: 4.     
+00001ee0: 2020 2020 2020 2020 2020 2072 6164 6975             radiu
+00001ef0: 733a 2031 300a 2020 2020 2020 2020 2020  s: 10.          
+00001f00: 2020 2020 2020 7261 6469 7573 323a 2030        radius2: 0
+00001f10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00001f20: 2061 6e67 6c65 3a20 300a 2020 2020 2020   angle: 0.      
+00001f30: 2020 2020 6372 6f73 7368 6169 7245 6e61      crosshairEna
+00001f40: 626c 6564 4279 4465 6661 756c 743a 2046  bledByDefault: F
+00001f50: 616c 7365 0a20 2020 2020 2020 2020 2075  alse.          u
+00001f60: 7365 4c6f 6361 6c53 746f 7261 6765 3a20  seLocalStorage: 
+00001f70: 4661 6c73 650a 2020 2020 2020 2020 2020  False.          
+00001f80: 706f 696e 7452 6563 656e 7465 725a 6f6f  pointRecenterZoo
+00001f90: 6d3a 0a20 2020 2020 2020 2067 6d66 456c  m:.        gmfEl
+00001fa0: 6576 6174 696f 6e4f 7074 696f 6e73 3a0a  evationOptions:.
+00001fb0: 2020 2020 2020 2020 2020 6c61 7965 7273            layers
+00001fc0: 3a20 5b5d 0a20 2020 2020 2020 2020 206c  : [].          l
+00001fd0: 6179 6572 7343 6f6e 6669 673a 207b 7d0a  ayersConfig: {}.
+00001fe0: 2020 2020 2020 2020 676d 6656 6563 746f          gmfVecto
+00001ff0: 7254 696c 6573 4f70 7469 6f6e 733a 0a20  rTilesOptions:. 
+00002000: 2020 2020 2020 2020 2070 726f 6a65 6374           project
+00002010: 696f 6e3a 2045 5053 473a 7b73 7269 647d  ion: EPSG:{srid}
+00002020: 0a20 2020 2020 2020 2020 2074 696c 6547  .          tileG
+00002030: 7269 643a 207b 7d0a 2020 2020 2020 2020  rid: {}.        
+00002040: 6e67 656f 4765 6f6c 6f63 6174 696f 6e4f  ngeoGeolocationO
+00002050: 7074 696f 6e73 3a0a 2020 2020 2020 2020  ptions:.        
+00002060: 2020 706f 7369 7469 6f6e 4665 6174 7572    positionFeatur
+00002070: 6553 7479 6c65 3a0a 2020 2020 2020 2020  eStyle:.        
+00002080: 2020 2020 6369 7263 6c65 3a0a 2020 2020      circle:.    
+00002090: 2020 2020 2020 2020 2020 7261 6469 7573            radius
+000020a0: 3a20 360a 2020 2020 2020 2020 2020 2020  : 6.            
+000020b0: 2020 6669 6c6c 3a0a 2020 2020 2020 2020    fill:.        
+000020c0: 2020 2020 2020 2020 636f 6c6f 723a 2072          color: r
+000020d0: 6762 6128 3233 302c 2031 3030 2c20 3130  gba(230, 100, 10
+000020e0: 302c 2031 290a 2020 2020 2020 2020 2020  0, 1).          
+000020f0: 2020 2020 7374 726f 6b65 3a0a 2020 2020      stroke:.    
+00002100: 2020 2020 2020 2020 2020 2020 636f 6c6f              colo
+00002110: 723a 2072 6762 6128 3233 302c 2034 302c  r: rgba(230, 40,
+00002120: 2034 302c 2031 290a 2020 2020 2020 2020   40, 1).        
+00002130: 2020 2020 2020 2020 7769 6474 683a 2032          width: 2
+00002140: 0a20 2020 2020 2020 2020 2061 6363 7572  .          accur
+00002150: 6163 7946 6561 7475 7265 5374 796c 653a  acyFeatureStyle:
+00002160: 0a20 2020 2020 2020 2020 2020 2066 696c  .            fil
+00002170: 6c3a 0a20 2020 2020 2020 2020 2020 2020  l:.             
+00002180: 2063 6f6c 6f72 3a20 7267 6261 2831 3030   color: rgba(100
+00002190: 2c20 3130 302c 2032 3330 2c20 302e 3329  , 100, 230, 0.3)
+000021a0: 0a20 2020 2020 2020 2020 2020 2073 7472  .            str
+000021b0: 6f6b 653a 0a20 2020 2020 2020 2020 2020  oke:.           
+000021c0: 2020 2063 6f6c 6f72 3a20 7267 6261 2834     color: rgba(4
+000021d0: 302c 2034 302c 2032 3330 2c20 3129 0a20  0, 40, 230, 1). 
+000021e0: 2020 2020 2020 2020 2020 2020 2077 6964               wid
+000021f0: 7468 3a20 320a 2020 2020 2020 2020 2020  th: 2.          
+00002200: 7a6f 6f6d 3a0a 2020 2020 2020 2020 2020  zoom:.          
+00002210: 6175 746f 526f 7461 7465 3a20 4661 6c73  autoRotate: Fals
+00002220: 650a 2020 2020 2020 6479 6e61 6d69 635f  e.      dynamic_
+00002230: 636f 6e73 7461 6e74 733a 0a20 2020 2020  constants:.     
+00002240: 2020 2069 6e74 6572 6661 6365 3a20 696e     interface: in
+00002250: 7465 7266 6163 650a 2020 2020 2020 2020  terface.        
+00002260: 6361 6368 6556 6572 7369 6f6e 3a20 6361  cacheVersion: ca
+00002270: 6368 655f 7665 7273 696f 6e0a 2020 2020  che_version.    
+00002280: 2020 2020 6c61 6e67 5572 6c73 3a20 6c61      langUrls: la
+00002290: 6e67 5f75 726c 730a 2020 2020 2020 2020  ng_urls.        
+000022a0: 676d 6649 3138 6e65 7874 436f 6e66 6967  gmfI18nextConfig
+000022b0: 7572 6174 696f 6e3a 2069 3138 6e65 7874  uration: i18next
+000022c0: 5f63 6f6e 6669 6775 7261 7469 6f6e 0a20  _configuration. 
+000022d0: 2020 2020 2020 2067 6d66 5477 6f46 6163         gmfTwoFac
+000022e0: 746f 7241 7574 683a 2074 776f 5f66 6163  torAuth: two_fac
+000022f0: 746f 720a 2020 2020 2020 2020 676d 6653  tor.        gmfS
+00002300: 6561 7263 6847 726f 7570 733a 2066 756c  earchGroups: ful
+00002310: 6c74 6578 7473 6561 7263 685f 6772 6f75  ltextsearch_grou
+00002320: 7073 0a20 2020 2020 2073 7461 7469 633a  ps.      static:
+00002330: 0a20 2020 2020 2020 2061 6e67 756c 6172  .        angular
+00002340: 4c6f 6361 6c65 5363 7269 7074 3a0a 2020  LocaleScript:.  
+00002350: 2020 2020 2020 2020 6e61 6d65 3a20 272f          name: '/
+00002360: 6574 632f 7374 6174 6963 2d6e 6765 6f2f  etc/static-ngeo/
+00002370: 270a 2020 2020 2020 2020 2020 6170 7065  '.          appe
+00002380: 6e64 3a20 616e 6775 6c61 722d 6c6f 6361  nd: angular-loca
+00002390: 6c65 5f7b 7b27 7b7b 277d 7d6c 6f63 616c  le_{{'{{'}}local
+000023a0: 657b 7b27 7d7d 277d 7d2e 6a73 0a20 2020  e{{'}}'}}.js.   
+000023b0: 2020 2072 6f75 7465 733a 0a20 2020 2020     routes:.     
+000023c0: 2020 2063 7572 7265 6e74 496e 7465 7266     currentInterf
+000023d0: 6163 6555 726c 3a0a 2020 2020 2020 2020  aceUrl:.        
+000023e0: 2020 6375 7272 656e 7449 6e74 6572 6661    currentInterfa
+000023f0: 6365 3a20 5472 7565 0a20 2020 2020 2020  ce: True.       
+00002400: 2061 7574 6865 6e74 6963 6174 696f 6e42   authenticationB
+00002410: 6173 6555 726c 3a0a 2020 2020 2020 2020  aseUrl:.        
+00002420: 2020 6e61 6d65 3a20 6261 7365 0a20 2020    name: base.   
+00002430: 2020 2020 2067 6d66 4c61 7965 7273 5572       gmfLayersUr
+00002440: 6c3a 0a20 2020 2020 2020 2020 206e 616d  l:.          nam
+00002450: 653a 206c 6179 6572 735f 726f 6f74 0a20  e: layers_root. 
+00002460: 2020 2020 2020 2067 6d66 5261 7374 6572         gmfRaster
+00002470: 5572 6c3a 0a20 2020 2020 2020 2020 206e  Url:.          n
+00002480: 616d 653a 2072 6173 7465 720a 2020 2020  ame: raster.    
+00002490: 2020 2020 676d 6653 686f 7274 656e 6572      gmfShortener
+000024a0: 4372 6561 7465 5572 6c3a 0a20 2020 2020  CreateUrl:.     
+000024b0: 2020 2020 206e 616d 653a 2073 686f 7274       name: short
+000024c0: 656e 6572 5f63 7265 6174 650a 2020 2020  ener_create.    
+000024d0: 2020 2020 6e67 656f 5065 726d 616c 696e      ngeoPermalin
+000024e0: 6b4f 6763 7365 7276 6572 5572 6c3a 0a20  kOgcserverUrl:. 
+000024f0: 2020 2020 2020 2020 206e 616d 653a 206d           name: m
+00002500: 6170 7365 7276 6572 7072 6f78 790a 2020  apserverproxy.  
+00002510: 2020 2020 2020 2020 7061 7261 6d73 3a0a          params:.
+00002520: 2020 2020 2020 2020 2020 2020 6f67 6373              ogcs
+00002530: 6572 7665 723a 2027 7b6d 6169 6e5f 6f67  erver: '{main_og
+00002540: 635f 7365 7276 6572 7d27 0a20 2020 2020  c_server}'.     
+00002550: 2020 2066 756c 6c74 6578 7473 6561 7263     fulltextsearc
+00002560: 6855 726c 3a0a 2020 2020 2020 2020 2020  hUrl:.          
+00002570: 6e61 6d65 3a20 6675 6c6c 7465 7874 7365  name: fulltextse
+00002580: 6172 6368 0a20 2020 2020 2020 2020 2070  arch.          p
+00002590: 6172 616d 733a 0a20 2020 2020 2020 2020  arams:.         
+000025a0: 2020 206c 696d 6974 3a20 3330 0a20 2020     limit: 30.   
+000025b0: 2020 2020 2020 2020 2070 6172 7469 7469           partiti
+000025c0: 6f6e 6c69 6d69 743a 2035 0a20 2020 2020  onlimit: 5.     
+000025d0: 2020 2020 2064 796e 616d 6963 5f70 6172       dynamic_par
+000025e0: 616d 733a 0a20 2020 2020 2020 2020 2020  ams:.           
+000025f0: 2069 6e74 6572 6661 6365 3a20 696e 7465   interface: inte
+00002600: 7266 6163 650a 2020 2020 2020 2020 676d  rface.        gm
+00002610: 6654 7265 6555 726c 3a0a 2020 2020 2020  fTreeUrl:.      
+00002620: 2020 2020 6e61 6d65 3a20 7468 656d 6573      name: themes
+00002630: 0a20 2020 2020 2020 2020 2070 6172 616d  .          param
+00002640: 733a 0a20 2020 2020 2020 2020 2020 2062  s:.            b
+00002650: 6163 6b67 726f 756e 643a 2062 6163 6b67  ackground: backg
+00002660: 726f 756e 640a 2020 2020 2020 2020 2020  round.          
+00002670: 6479 6e61 6d69 635f 7061 7261 6d73 3a0a  dynamic_params:.
+00002680: 2020 2020 2020 2020 2020 2020 696e 7465              inte
+00002690: 7266 6163 653a 2069 6e74 6572 6661 6365  rface: interface
+000026a0: 0a20 2020 2020 2020 2067 6d66 5665 6374  .        gmfVect
+000026b0: 6f72 5469 6c65 7355 726c 3a0a 2020 2020  orTilesUrl:.    
+000026c0: 2020 2020 2020 6e61 6d65 3a20 7665 6374        name: vect
+000026d0: 6f72 5f74 696c 6573 5f72 6f6f 740a 2020  or_tiles_root.  
+000026e0: 2020 6465 736b 746f 703a 0a20 2020 2020    desktop:.     
+000026f0: 2065 7874 656e 6473 3a20 6465 6661 756c   extends: defaul
+00002700: 740a 2020 2020 2020 7265 6469 7265 6374  t.      redirect
+00002710: 5f69 6e74 6572 6661 6365 3a20 6d6f 6269  _interface: mobi
+00002720: 6c65 0a20 2020 2020 2064 6f5f 7265 6469  le.      do_redi
+00002730: 7265 6374 3a20 5472 7565 0a20 2020 2020  rect: True.     
+00002740: 2063 6f6e 7374 616e 7473 3a0a 2020 2020   constants:.    
+00002750: 2020 2020 6e67 656f 5072 6f66 696c 654f      ngeoProfileO
+00002760: 7074 696f 6e73 3a20 7b7d 0a20 2020 2020  ptions: {}.     
+00002770: 2020 206e 6765 6f53 7472 6565 7476 6965     ngeoStreetvie
+00002780: 774f 7074 696f 6e73 3a0a 2020 2020 2020  wOptions:.      
+00002790: 2020 2020 7669 6577 6572 3a20 276d 6170      viewer: 'map
+000027a0: 696c 6c61 7279 270a 2020 2020 2020 2020  illary'.        
+000027b0: 676d 6650 7269 6e74 4f70 7469 6f6e 733a  gmfPrintOptions:
+000027c0: 0a20 2020 2020 2020 2020 206c 6567 656e  .          legen
+000027d0: 643a 0a20 2020 2020 2020 2020 2020 2023  d:.            #
+000027e0: 2053 6565 3a0a 2020 2020 2020 2020 2020   See:.          
+000027f0: 2020 2320 6874 7470 733a 2f2f 7777 772e    # https://www.
+00002800: 6d61 7073 6572 7665 722e 6f72 672f 6465  mapserver.org/de
+00002810: 7665 6c6f 706d 656e 742f 7266 632f 6d73  velopment/rfc/ms
+00002820: 2d72 6663 2d31 3031 2e68 746d 6c0a 2020  -rfc-101.html.  
+00002830: 2020 2020 2020 2020 2020 2320 6874 7470            # http
+00002840: 733a 2f2f 646f 6373 2e71 6769 732e 6f72  s://docs.qgis.or
+00002850: 672f 7465 7374 696e 672f 656e 2f64 6f63  g/testing/en/doc
+00002860: 732f 7573 6572 5f6d 616e 7561 6c2f 776f  s/user_manual/wo
+00002870: 726b 696e 675f 7769 7468 5f6f 6763 2f73  rking_with_ogc/s
+00002880: 6572 7665 722f 7365 7276 6963 6573 2e68  erver/services.h
+00002890: 746d 6c23 6765 746c 6567 656e 6467 7261  tml#getlegendgra
+000028a0: 7068 6963 730a 2020 2020 2020 2020 2020  phics.          
+000028b0: 2020 7573 6542 626f 783a 2074 7275 650a    useBbox: true.
+000028c0: 2020 2020 2020 2020 2020 2020 6c61 6265              labe
+000028d0: 6c3a 0a20 2020 2020 2020 2020 2020 2020  l:.             
+000028e0: 2071 6769 733a 2066 616c 7365 0a20 2020   qgis: false.   
+000028f0: 2020 2020 2020 2020 2070 6172 616d 733a           params:
+00002900: 0a20 2020 2020 2020 2020 2020 2020 2023  .              #
+00002910: 2053 6565 3a0a 2020 2020 2020 2020 2020   See:.          
+00002920: 2020 2020 2320 6874 7470 733a 2f2f 646f      # https://do
+00002930: 6373 2e71 6769 732e 6f72 672f 7465 7374  cs.qgis.org/test
+00002940: 696e 672f 656e 2f64 6f63 732f 7573 6572  ing/en/docs/user
+00002950: 5f6d 616e 7561 6c2f 776f 726b 696e 675f  _manual/working_
+00002960: 7769 7468 5f6f 6763 2f73 6572 7665 722f  with_ogc/server/
+00002970: 7365 7276 6963 6573 2e68 746d 6c23 6765  services.html#ge
+00002980: 746c 6567 656e 6467 7261 7068 6963 730a  tlegendgraphics.
+00002990: 2020 2020 2020 2020 2020 2020 2020 7167                qg
+000029a0: 6973 3a0a 2020 2020 2020 2020 2020 2020  is:.            
+000029b0: 2020 2020 4c41 5945 5246 4f4e 5446 414d      LAYERFONTFAM
+000029c0: 494c 593a 2044 656a 6156 7520 5361 6e73  ILY: DejaVu Sans
+000029d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000029e0: 2049 5445 4d46 4f4e 5446 414d 494c 593a   ITEMFONTFAMILY:
+000029f0: 2044 656a 6156 7520 5361 6e73 0a20 2020   DejaVu Sans.   
+00002a00: 2020 2020 2020 2020 2020 2020 204c 4159               LAY
+00002a10: 4552 464f 4e54 5349 5a45 3a20 2731 3027  ERFONTSIZE: '10'
+00002a20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00002a30: 2049 5445 4d46 4f4e 5453 495a 453a 2027   ITEMFONTSIZE: '
+00002a40: 3827 0a20 2020 2020 2020 2020 2068 6964  8'.          hid
+00002a50: 6465 6e41 7474 7269 6275 7465 733a 0a20  denAttributes:. 
+00002a60: 2020 2020 2020 2020 2020 202d 2074 696d             - tim
+00002a70: 657a 6f6e 650a 2020 2020 2020 2020 676d  ezone.        gm
+00002a80: 6644 6973 706c 6179 5175 6572 7947 7269  fDisplayQueryGri
+00002a90: 644f 7074 696f 6e73 3a0a 2020 2020 2020  dOptions:.      
+00002aa0: 2020 2020 6665 6174 7572 6573 5374 796c      featuresStyl
+00002ab0: 653a 202a 6665 6174 7572 6553 7479 6c65  e: *featureStyle
+00002ac0: 0a20 2020 2020 2020 2020 2073 656c 6563  .          selec
+00002ad0: 7465 6446 6561 7475 7265 5374 796c 653a  tedFeatureStyle:
+00002ae0: 202a 7365 6c65 6374 6564 4665 6174 7572   *selectedFeatur
+00002af0: 6553 7479 6c65 0a20 2020 2020 2020 2067  eStyle.        g
+00002b00: 6d66 4564 6974 4665 6174 7572 654f 7074  mfEditFeatureOpt
+00002b10: 696f 6e73 3a0a 2020 2020 2020 2020 2020  ions:.          
+00002b20: 746f 6c65 7261 6e63 653a 2031 300a 2020  tolerance: 10.  
+00002b30: 2020 2020 2020 2020 636c 6f73 6541 6674          closeAft
+00002b40: 6572 5361 7665 3a20 6661 6c73 650a 2020  erSave: false.  
+00002b50: 2020 2020 2020 2020 6869 6768 6c69 6768          highligh
+00002b60: 7453 7479 6c65 3a0a 2020 2020 2020 2020  tStyle:.        
+00002b70: 2020 2020 6369 7263 6c65 3a0a 2020 2020      circle:.    
+00002b80: 2020 2020 2020 2020 2020 7261 6469 7573            radius
+00002b90: 3a20 370a 2020 2020 2020 2020 2020 2020  : 7.            
+00002ba0: 2020 6669 6c6c 3a0a 2020 2020 2020 2020    fill:.        
+00002bb0: 2020 2020 2020 2020 636f 6c6f 723a 205b          color: [
+00002bc0: 3235 352c 2031 3339 2c20 3133 392c 2030  255, 139, 139, 0
+00002bd0: 2e36 5d0a 2020 2020 2020 2020 2020 2020  .6].            
+00002be0: 2020 7374 726f 6b65 3a0a 2020 2020 2020    stroke:.      
+00002bf0: 2020 2020 2020 2020 2020 636f 6c6f 723a            color:
+00002c00: 205b 3235 352c 2030 2c20 302c 2031 5d0a   [255, 0, 0, 1].
+00002c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002c20: 7769 6474 683a 2033 0a20 2020 2020 2020  width: 3.       
+00002c30: 2020 2020 2066 696c 6c3a 0a20 2020 2020       fill:.     
+00002c40: 2020 2020 2020 2020 2063 6f6c 6f72 3a20           color: 
+00002c50: 5b32 3535 2c20 3133 392c 2031 3339 2c20  [255, 139, 139, 
+00002c60: 302e 365d 0a20 2020 2020 2020 2020 2020  0.6].           
+00002c70: 2073 7472 6f6b 653a 0a20 2020 2020 2020   stroke:.       
+00002c80: 2020 2020 2020 2063 6f6c 6f72 3a20 5b32         color: [2
+00002c90: 3535 2c20 302c 2030 2c20 315d 0a20 2020  55, 0, 0, 1].   
+00002ca0: 2020 2020 2020 2020 2020 2077 6964 7468             width
+00002cb0: 3a20 330a 2020 2020 2020 2020 676d 6650  : 3.        gmfP
+00002cc0: 726f 6669 6c65 4f70 7469 6f6e 733a 0a20  rofileOptions:. 
+00002cd0: 2020 2020 2020 2020 206c 696e 6573 436f           linesCo
+00002ce0: 6e66 6967 7572 6174 696f 6e3a 207b 7d0a  nfiguration: {}.
+00002cf0: 2020 2020 2020 2020 2020 686f 7665 7250            hoverP
+00002d00: 6f69 6e74 5374 796c 653a 0a20 2020 2020  ointStyle:.     
+00002d10: 2020 2020 2020 2063 6972 636c 653a 0a20         circle:. 
+00002d20: 2020 2020 2020 2020 2020 2020 2066 696c               fil
+00002d30: 6c3a 0a20 2020 2020 2020 2020 2020 2020  l:.             
+00002d40: 2020 2063 6f6c 6f72 3a20 2723 6666 6666     color: '#ffff
+00002d50: 6666 270a 2020 2020 2020 2020 2020 2020  ff'.            
+00002d60: 2020 2020 7261 6469 7573 3a20 330a 2020      radius: 3.  
+00002d70: 2020 2020 2020 676d 6653 6861 7265 4f70        gmfShareOp
+00002d80: 7469 6f6e 733a 0a20 2020 2020 2020 2020  tions:.         
+00002d90: 2065 6e61 626c 6545 6d61 696c 3a20 5472   enableEmail: Tr
+00002da0: 7565 0a20 2020 2020 2072 6f75 7465 733a  ue.      routes:
+00002db0: 0a20 2020 2020 2020 2067 6d66 5072 6f66  .        gmfProf
+00002dc0: 696c 654a 736f 6e55 726c 3a0a 2020 2020  ileJsonUrl:.    
+00002dd0: 2020 2020 2020 6e61 6d65 3a20 7072 6f66        name: prof
+00002de0: 696c 652e 6a73 6f6e 0a20 2020 2020 2020  ile.json.       
+00002df0: 2067 6d66 5072 696e 7455 726c 3a0a 2020   gmfPrintUrl:.  
+00002e00: 2020 2020 2020 2020 6e61 6d65 3a20 7072          name: pr
+00002e10: 696e 7470 726f 7879 0a20 2020 206d 6f62  intproxy.    mob
+00002e20: 696c 653a 0a20 2020 2020 2065 7874 656e  ile:.      exten
+00002e30: 6473 3a20 6465 6661 756c 740a 2020 2020  ds: default.    
+00002e40: 2020 7265 6469 7265 6374 5f69 6e74 6572    redirect_inter
+00002e50: 6661 6365 3a20 6465 736b 746f 700a 2020  face: desktop.  
+00002e60: 2020 2020 636f 6e73 7461 6e74 733a 0a20      constants:. 
+00002e70: 2020 2020 2020 2067 6d66 4d6f 6269 6c65         gmfMobile
+00002e80: 4d65 6173 7572 6541 7265 614f 7074 696f  MeasureAreaOptio
+00002e90: 6e73 3a0a 2020 2020 2020 2020 2020 7072  ns:.          pr
+00002ea0: 6563 6973 696f 6e3a 2032 0a20 2020 2020  ecision: 2.     
+00002eb0: 2020 2020 2073 6b65 7463 6853 7479 6c65       sketchStyle
+00002ec0: 3a20 266d 6f62 696c 654d 6561 7375 7265  : &mobileMeasure
+00002ed0: 5374 796c 650a 2020 2020 2020 2020 2020  Style.          
+00002ee0: 2020 6669 6c6c 3a0a 2020 2020 2020 2020    fill:.        
+00002ef0: 2020 2020 2020 636f 6c6f 723a 2072 6762        color: rgb
+00002f00: 6128 3235 352c 2031 3238 2c20 3132 382c  a(255, 128, 128,
+00002f10: 2030 2e32 290a 2020 2020 2020 2020 2020   0.2).          
+00002f20: 2020 7374 726f 6b65 3a0a 2020 2020 2020    stroke:.      
+00002f30: 2020 2020 2020 2020 636f 6c6f 723a 2072          color: r
+00002f40: 6762 6128 3235 352c 2030 2c20 302c 2030  gba(255, 0, 0, 0
+00002f50: 2e35 290a 2020 2020 2020 2020 2020 2020  .5).            
+00002f60: 2020 6c69 6e65 4461 7368 3a20 5b31 302c    lineDash: [10,
+00002f70: 2031 305d 0a20 2020 2020 2020 2020 2020   10].           
+00002f80: 2020 2077 6964 7468 3a20 320a 2020 2020     width: 2.    
+00002f90: 2020 2020 2020 2020 7265 6775 6c61 7253          regularS
+00002fa0: 6861 7065 3a0a 2020 2020 2020 2020 2020  hape:.          
+00002fb0: 2020 2020 7374 726f 6b65 3a0a 2020 2020      stroke:.    
+00002fc0: 2020 2020 2020 2020 2020 2020 636f 6c6f              colo
+00002fd0: 723a 2072 6762 6128 302c 2030 2c20 302c  r: rgba(0, 0, 0,
+00002fe0: 2030 2e37 290a 2020 2020 2020 2020 2020   0.7).          
+00002ff0: 2020 2020 2020 7769 6474 683a 2032 0a20        width: 2. 
+00003000: 2020 2020 2020 2020 2020 2020 2070 6f69               poi
+00003010: 6e74 733a 2034 0a20 2020 2020 2020 2020  nts: 4.         
+00003020: 2020 2020 2072 6164 6975 733a 2038 0a20       radius: 8. 
+00003030: 2020 2020 2020 2020 2020 2020 2072 6164               rad
+00003040: 6975 7332 3a20 300a 2020 2020 2020 2020  ius2: 0.        
+00003050: 2020 2020 2020 616e 676c 653a 2030 0a20        angle: 0. 
+00003060: 2020 2020 2020 2067 6d66 4d6f 6269 6c65         gmfMobile
+00003070: 4d65 6173 7572 654c 656e 6774 684f 7074  MeasureLengthOpt
+00003080: 696f 6e73 3a0a 2020 2020 2020 2020 2020  ions:.          
+00003090: 7072 6563 6973 696f 6e3a 2032 0a20 2020  precision: 2.   
+000030a0: 2020 2020 2020 2073 6b65 7463 6853 7479         sketchSty
+000030b0: 6c65 3a20 2a6d 6f62 696c 654d 6561 7375  le: *mobileMeasu
+000030c0: 7265 5374 796c 650a 2020 2020 2020 2020  reStyle.        
+000030d0: 676d 664d 6f62 696c 654d 6561 7375 7265  gmfMobileMeasure
+000030e0: 506f 696e 744f 7074 696f 6e73 3a0a 2020  PointOptions:.  
+000030f0: 2020 2020 2020 2020 6465 6369 6d61 6c73          decimals
+00003100: 3a20 300a 2020 2020 2020 2020 2020 7261  : 0.          ra
+00003110: 7374 6572 4c61 7965 7273 3a20 5b5d 0a20  sterLayers: []. 
+00003120: 2020 2020 2020 2020 2066 6f72 6d61 743a           format:
+00003130: 2027 7b78 7d2c 207b 797d 270a 2020 2020   '{x}, {y}'.    
+00003140: 2020 2020 2020 736b 6574 6368 5374 796c        sketchStyl
+00003150: 653a 0a20 2020 2020 2020 2020 2020 2066  e:.            f
+00003160: 696c 6c3a 0a20 2020 2020 2020 2020 2020  ill:.           
+00003170: 2020 2063 6f6c 6f72 3a20 7267 6261 2832     color: rgba(2
+00003180: 3535 2c20 3235 352c 2032 3535 2c20 302e  55, 255, 255, 0.
+00003190: 3229 0a20 2020 2020 2020 2020 2020 2073  2).            s
+000031a0: 7472 6f6b 653a 0a20 2020 2020 2020 2020  troke:.         
+000031b0: 2020 2020 2063 6f6c 6f72 3a20 7267 6261       color: rgba
+000031c0: 2830 2c20 302c 2030 2c20 302e 3529 0a20  (0, 0, 0, 0.5). 
+000031d0: 2020 2020 2020 2020 2020 2020 206c 696e               lin
+000031e0: 6544 6173 683a 205b 3130 2c20 3130 5d0a  eDash: [10, 10].
+000031f0: 2020 2020 2020 2020 2020 2020 2020 7769                wi
+00003200: 6474 683a 2032 0a20 2020 2020 2020 2020  dth: 2.         
+00003210: 2020 2072 6567 756c 6172 5368 6170 653a     regularShape:
+00003220: 0a20 2020 2020 2020 2020 2020 2020 2073  .              s
+00003230: 7472 6f6b 653a 0a20 2020 2020 2020 2020  troke:.         
+00003240: 2020 2020 2020 2063 6f6c 6f72 3a20 7267         color: rg
+00003250: 6261 2830 2c20 302c 2030 2c20 302e 3729  ba(0, 0, 0, 0.7)
+00003260: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00003270: 2077 6964 7468 3a20 320a 2020 2020 2020   width: 2.      
+00003280: 2020 2020 2020 2020 706f 696e 7473 3a20          points: 
+00003290: 340a 2020 2020 2020 2020 2020 2020 2020  4.              
+000032a0: 7261 6469 7573 3a20 380a 2020 2020 2020  radius: 8.      
+000032b0: 2020 2020 2020 2020 7261 6469 7573 323a          radius2:
+000032c0: 2030 0a20 2020 2020 2020 2020 2020 2020   0.             
+000032d0: 2061 6e67 6c65 3a20 300a 2020 2020 6966   angle: 0.    if
+000032e0: 7261 6d65 5f61 7069 3a0a 2020 2020 2020  rame_api:.      
+000032f0: 6578 7465 6e64 733a 2064 6566 6175 6c74  extends: default
+00003300: 0a20 2020 2020 2063 6f6e 7374 616e 7473  .      constants
+00003310: 3a0a 2020 2020 2020 2020 676d 6653 6561  :.        gmfSea
+00003320: 7263 6847 726f 7570 733a 205b 5d0a 2020  rchGroups: [].  
+00003330: 2020 6170 693a 0a20 2020 2020 2063 6f6e    api:.      con
+00003340: 7374 616e 7473 3a0a 2020 2020 2020 2020  stants:.        
+00003350: 7072 6f6a 6563 7469 6f6e 733a 202a 7072  projections: *pr
+00003360: 6f6a 6563 7469 6f6e 730a 2020 2020 2020  ojections.      
+00003370: 2020 2320 5468 6520 7072 6f6a 6563 7469    # The projecti
+00003380: 6f6e 206f 6620 7468 6520 6d61 700a 2020  on of the map.  
+00003390: 2020 2020 2020 7072 6f6a 6563 7469 6f6e        projection
+000033a0: 3a20 4550 5347 3a7b 7372 6964 7d0a 2020  : EPSG:{srid}.  
+000033b0: 2020 2020 726f 7574 6573 3a0a 2020 2020      routes:.    
+000033c0: 2020 2020 7468 656d 6573 5572 6c3a 0a20      themesUrl:. 
+000033d0: 2020 2020 2020 2020 206e 616d 653a 2074           name: t
+000033e0: 6865 6d65 730a 2020 2020 2020 2020 2020  hemes.          
+000033f0: 7061 7261 6d73 3a0a 2020 2020 2020 2020  params:.        
+00003400: 2020 2020 6261 636b 6772 6f75 6e64 3a20      background: 
+00003410: 6261 636b 6772 6f75 6e64 0a20 2020 2020  background.     
+00003420: 2020 2020 2064 796e 616d 6963 5f70 6172       dynamic_par
+00003430: 616d 733a 0a20 2020 2020 2020 2020 2020  ams:.           
+00003440: 2069 6e74 6572 6661 6365 3a20 696e 7465   interface: inte
+00003450: 7266 6163 650a 2020 2020 2020 2020 6c6f  rface.        lo
+00003460: 6361 6c65 5572 6c3a 0a20 2020 2020 2020  caleUrl:.       
+00003470: 2020 206e 616d 653a 206c 6f63 616c 656a     name: localej
+00003480: 736f 6e0a 2020 2020 2020 2020 7365 6172  son.        sear
+00003490: 6368 5572 6c3a 0a20 2020 2020 2020 2020  chUrl:.         
+000034a0: 206e 616d 653a 2066 756c 6c74 6578 7473   name: fulltexts
+000034b0: 6561 7263 680a 2020 2020 2020 2020 2020  earch.          
+000034c0: 7061 7261 6d73 3a0a 2020 2020 2020 2020  params:.        
+000034d0: 2020 2020 6c69 6d69 743a 2033 300a 2020      limit: 30.  
+000034e0: 2020 2020 2020 2020 2020 7061 7274 6974            partit
+000034f0: 696f 6e6c 696d 6974 3a20 350a 2020 2020  ionlimit: 5.    
+00003500: 2020 2020 2020 6479 6e61 6d69 635f 7061        dynamic_pa
+00003510: 7261 6d73 3a0a 2020 2020 2020 2020 2020  rams:.          
+00003520: 2020 696e 7465 7266 6163 653a 2069 6e74    interface: int
+00003530: 6572 6661 6365 0a0a 2020 6361 6368 653a  erface..  cache:
+00003540: 0a20 2020 2073 7464 3a0a 2020 2020 2020  .    std:.      
+00003550: 6261 636b 656e 643a 2063 3263 6765 6f70  backend: c2cgeop
+00003560: 6f72 7461 6c2e 6879 6272 6964 7365 6e74  ortal.hybridsent
+00003570: 696e 656c 0a20 2020 2020 2061 7267 756d  inel.      argum
+00003580: 656e 7473 3a0a 2020 2020 2020 2020 6c6f  ents:.        lo
+00003590: 636b 5f74 696d 656f 7574 3a20 277b 5245  ck_timeout: '{RE
+000035a0: 4449 535f 4c4f 434b 5f54 494d 454f 5554  DIS_LOCK_TIMEOUT
+000035b0: 7d27 2023 2073 6563 6f6e 6473 0a20 2020  }' # seconds.   
+000035c0: 2020 2020 2072 6564 6973 5f65 7870 6972       redis_expir
+000035d0: 6174 696f 6e5f 7469 6d65 3a20 277b 5245  ation_time: '{RE
+000035e0: 4449 535f 4558 5049 5241 5449 4f4e 5f54  DIS_EXPIRATION_T
+000035f0: 494d 457d 2720 2320 7365 636f 6e64 730a  IME}' # seconds.
+00003600: 2020 2020 2020 2020 6469 7374 7269 6275          distribu
+00003610: 7465 645f 6c6f 636b 3a20 5472 7565 0a20  ted_lock: True. 
+00003620: 2020 2020 2020 2073 6572 7669 6365 5f6e         service_n
+00003630: 616d 653a 2027 7b52 4544 4953 5f53 4552  ame: '{REDIS_SER
+00003640: 5649 4345 4e41 4d45 7d27 0a20 2020 2020  VICENAME}'.     
+00003650: 2020 2073 6f63 6b65 745f 7469 6d65 6f75     socket_timeou
+00003660: 743a 2027 7b52 4544 4953 5f54 494d 454f  t: '{REDIS_TIMEO
+00003670: 5554 7d27 2023 2073 6563 6f6e 6473 0a20  UT}' # seconds. 
+00003680: 2020 2020 2020 2064 623a 2030 0a20 2020         db: 0.   
+00003690: 206f 626a 3a0a 2020 2020 2020 6261 636b   obj:.      back
+000036a0: 656e 643a 2064 6f67 7069 6c65 2e63 6163  end: dogpile.cac
+000036b0: 6865 2e6d 656d 6f72 790a 0a20 2061 646d  he.memory..  adm
+000036c0: 696e 5f69 6e74 6572 6661 6365 3a0a 2020  in_interface:.  
+000036d0: 2020 6c61 7965 725f 7472 6565 5f6d 6178    layer_tree_max
+000036e0: 5f6e 6f64 6573 3a20 3130 3030 0a0a 2020  _nodes: 1000..  
+000036f0: 2020 2320 5468 6520 6c69 7374 206f 6620    # The list of 
+00003700: 6176 6169 6c61 626c 6520 7661 7269 6162  available variab
+00003710: 6c65 206e 616d 6573 2066 6f72 2074 6865  le names for the
+00003720: 2060 4d65 7461 6461 7461 7360 2066 6f72   `Metadatas` for
+00003730: 6d2e 0a20 2020 2061 7661 696c 6162 6c65  m..    available
+00003740: 5f6d 6574 6164 6174 613a 0a20 2020 2020  _metadata:.     
+00003750: 2023 2054 7265 6549 7465 6d0a 2020 2020   # TreeItem.    
+00003760: 2020 2d20 6e61 6d65 3a20 7365 6172 6368    - name: search
+00003770: 416c 6961 730a 2020 2020 2020 2020 7479  Alias.        ty
+00003780: 7065 3a20 6c69 7374 0a20 2020 2020 2020  pe: list.       
+00003790: 2064 6573 6372 6970 7469 6f6e 3a20 3e0a   description: >.
+000037a0: 2020 2020 2020 2020 2020 436f 6d6d 6120            Comma 
+000037b0: 7365 7061 7261 7465 6420 6c69 7374 206f  separated list o
+000037c0: 6620 7365 6172 6368 2061 6c69 6173 6573  f search aliases
+000037d0: 2028 6b65 7977 6f72 6473 2920 746f 2062   (keywords) to b
+000037e0: 6520 6164 6465 6420 746f 2074 6865 2074  e added to the t
+000037f0: 7365 6172 6368 2e74 7320 6669 656c 6420  search.ts field 
+00003800: 666f 720a 2020 2020 2020 2020 2020 7468  for.          th
+00003810: 6520 636f 6e73 6964 6572 6564 2074 7265  e considered tre
+00003820: 6520 6974 656d 2028 7468 656d 652c 206c  e item (theme, l
+00003830: 6179 6572 2067 726f 7570 206f 7220 6c61  ayer group or la
+00003840: 7965 7229 2c20 7468 6174 2069 7320 746f  yer), that is to
+00003850: 2073 6179 2074 6861 7420 636f 6e73 6964   say that consid
+00003860: 6572 6564 0a20 2020 2020 2020 2020 2074  ered.          t
+00003870: 7265 6520 6974 656d 2077 696c 6c20 6d61  ree item will ma
+00003880: 7463 6820 7768 656e 2073 6561 7263 6869  tch when searchi
+00003890: 6e67 2066 6f72 2074 6865 2073 6561 7263  ng for the searc
+000038a0: 6820 616c 6961 7365 732e 0a20 2020 2020  h aliases..     
+000038b0: 2020 2072 656c 6576 616e 745f 666f 723a     relevant_for:
+000038c0: 0a20 2020 2020 2020 2020 202d 2074 7265  .          - tre
+000038d0: 6569 7465 6d0a 2020 2020 2020 2320 4c61  eitem.      # La
+000038e0: 7965 7273 2067 726f 7570 0a20 2020 2020  yers group.     
+000038f0: 202d 206e 616d 653a 2065 7863 6c75 7369   - name: exclusi
+00003900: 7665 4772 6f75 700a 2020 2020 2020 2020  veGroup.        
+00003910: 7479 7065 3a20 626f 6f6c 6561 6e0a 2020  type: boolean.  
+00003920: 2020 2020 2020 6465 7363 7269 7074 696f        descriptio
+00003930: 6e3a 203e 0a20 2020 2020 2020 2020 2057  n: >.          W
+00003940: 6865 7468 6572 2074 6865 2067 726f 7570  hether the group
+00003950: 2063 6f6e 7461 696e 7320 6368 696c 6472   contains childr
+00003960: 656e 2074 6861 7420 6861 7665 2074 6f20  en that have to 
+00003970: 6265 206d 7574 7561 6c6c 7920 6578 636c  be mutually excl
+00003980: 7573 6976 652c 206d 6561 6e69 6e67 2074  usive, meaning t
+00003990: 6861 7420 6f6e 6c79 0a20 2020 2020 2020  hat only.       
+000039a0: 2020 206f 6e65 2063 6869 6c64 206d 6179     one child may
+000039b0: 2062 6520 4f4e 2061 7420 616e 7920 7469   be ON at any ti
+000039c0: 6d65 2e0a 2020 2020 2020 2020 7265 6c65  me..        rele
+000039d0: 7661 6e74 5f66 6f72 3a0a 2020 2020 2020  vant_for:.      
+000039e0: 2020 2020 2d20 6c61 7965 7267 726f 7570      - layergroup
+000039f0: 0a20 2020 2020 202d 206e 616d 653a 2069  .      - name: i
+00003a00: 7345 7870 616e 6465 640a 2020 2020 2020  sExpanded.      
+00003a10: 2020 7479 7065 3a20 626f 6f6c 6561 6e0a    type: boolean.
+00003a20: 2020 2020 2020 2020 6465 7363 7269 7074          descript
+00003a30: 696f 6e3a 203e 0a20 2020 2020 2020 2020  ion: >.         
+00003a40: 2057 6865 7468 6572 2074 6865 206c 6179   Whether the lay
+00003a50: 6572 2067 726f 7570 2069 7320 6578 7061  er group is expa
+00003a60: 6e64 6564 2062 7920 6465 6661 756c 742e  nded by default.
+00003a70: 0a20 2020 2020 2020 2072 656c 6576 616e  .        relevan
+00003a80: 745f 666f 723a 0a20 2020 2020 2020 2020  t_for:.         
+00003a90: 202d 206c 6179 6572 6772 6f75 700a 2020   - layergroup.  
+00003aa0: 2020 2020 2d20 6e61 6d65 3a20 7072 696e      - name: prin
+00003ab0: 744e 6174 6976 6541 6e67 6c65 0a20 2020  tNativeAngle.   
+00003ac0: 2020 2020 2074 7970 653a 2062 6f6f 6c65       type: boole
+00003ad0: 616e 0a20 2020 2020 2020 2064 6573 6372  an.        descr
+00003ae0: 6970 7469 6f6e 3a20 3e0a 2020 2020 2020  iption: >.      
+00003af0: 2020 2020 5768 6574 6865 7220 7468 6520      Whether the 
+00003b00: 7072 696e 7420 7368 6f75 6c64 2072 6f74  print should rot
+00003b10: 6174 6520 7468 6520 7379 6d62 6f6c 732e  ate the symbols.
+00003b20: 0a20 2020 2020 2020 2072 656c 6576 616e  .        relevan
+00003b30: 745f 666f 723a 0a20 2020 2020 2020 2020  t_for:.         
+00003b40: 202d 206c 6179 6572 6772 6f75 700a 2020   - layergroup.  
+00003b50: 2020 2020 2320 4c61 7965 720a 2020 2020      # Layer.    
+00003b60: 2020 2d20 6e61 6d65 3a20 636f 7079 6162    - name: copyab
+00003b70: 6c65 0a20 2020 2020 2020 2074 7970 653a  le.        type:
+00003b80: 2062 6f6f 6c65 616e 0a20 2020 2020 2020   boolean.       
+00003b90: 2064 6573 6372 6970 7469 6f6e 3a20 3e0a   description: >.
+00003ba0: 2020 2020 2020 2020 2020 5768 6574 6865            Whethe
+00003bb0: 7220 7468 6520 6765 6f6d 6574 7279 2066  r the geometry f
+00003bc0: 726f 6d20 7468 6973 2064 6174 6120 736f  rom this data so
+00003bd0: 7572 6365 2063 616e 2062 6520 636f 7069  urce can be copi
+00003be0: 6564 2074 6f20 6f74 6865 7220 6461 7461  ed to other data
+00003bf0: 2073 6f75 7263 6573 206f 7220 6e6f 742e   sources or not.
+00003c00: 0a20 2020 2020 2020 2072 656c 6576 616e  .        relevan
+00003c10: 745f 666f 723a 0a20 2020 2020 2020 2020  t_for:.         
+00003c20: 202d 206c 6179 6572 5f77 6d73 0a20 2020   - layer_wms.   
+00003c30: 2020 202d 206e 616d 653a 206c 6567 656e     - name: legen
+00003c40: 640a 2020 2020 2020 2020 7479 7065 3a20  d.        type: 
+00003c50: 626f 6f6c 6561 6e0a 2020 2020 2020 2020  boolean.        
+00003c60: 6465 7363 7269 7074 696f 6e3a 203e 0a20  description: >. 
+00003c70: 2020 2020 2020 2020 2044 6973 706c 6179           Display
+00003c80: 2074 6865 206c 6567 656e 6420 6f66 2074   the legend of t
+00003c90: 6869 7320 6c61 7965 722e 0a20 2020 2020  his layer..     
+00003ca0: 2020 2072 656c 6576 616e 745f 666f 723a     relevant_for:
+00003cb0: 0a20 2020 2020 2020 2020 202d 206c 6179  .          - lay
+00003cc0: 6572 5f77 6d73 0a20 2020 2020 2020 2020  er_wms.         
+00003cd0: 202d 206c 6179 6572 5f77 6d74 730a 2020   - layer_wmts.  
+00003ce0: 2020 2020 2d20 6e61 6d65 3a20 6973 4c65      - name: isLe
+00003cf0: 6765 6e64 4578 7061 6e64 6564 0a20 2020  gendExpanded.   
+00003d00: 2020 2020 2074 7970 653a 2062 6f6f 6c65       type: boole
+00003d10: 616e 0a20 2020 2020 2020 2064 6573 6372  an.        descr
+00003d20: 6970 7469 6f6e 3a20 3e0a 2020 2020 2020  iption: >.      
+00003d30: 2020 2020 5768 6574 6865 7220 7468 6520      Whether the 
+00003d40: 6c65 6765 6e64 2069 7320 6578 7061 6e64  legend is expand
+00003d50: 6564 2062 7920 6465 6661 756c 742e 0a20  ed by default.. 
+00003d60: 2020 2020 2020 2072 656c 6576 616e 745f         relevant_
+00003d70: 666f 723a 0a20 2020 2020 2020 2020 202d  for:.          -
+00003d80: 206c 6179 6572 5f77 6d73 0a20 2020 2020   layer_wms.     
+00003d90: 2020 2020 202d 206c 6179 6572 5f77 6d74       - layer_wmt
+00003da0: 730a 2020 2020 2020 2d20 6e61 6d65 3a20  s.      - name: 
+00003db0: 6c65 6765 6e64 5275 6c65 0a20 2020 2020  legendRule.     
+00003dc0: 2020 2064 6573 6372 6970 7469 6f6e 3a20     description: 
+00003dd0: 3e0a 2020 2020 2020 2020 2020 5468 6520  >.          The 
+00003de0: 574d 5320 2252 554c 4522 2070 6172 616d  WMS "RULE" param
+00003df0: 6574 6572 2075 7365 6420 746f 2064 6973  eter used to dis
+00003e00: 706c 6179 2074 6865 2069 636f 6e20 696e  play the icon in
+00003e10: 2074 6865 206c 6179 6572 2074 7265 652e   the layer tree.
+00003e20: 2022 5368 6f72 7420 7665 7273 696f 6e22   "Short version"
+00003e30: 206f 660a 2020 2020 2020 2020 2020 7468   of.          th
+00003e40: 6520 2269 636f 6e55 524c 2220 6d65 7461  e "iconURL" meta
+00003e50: 6461 7461 2e0a 2020 2020 2020 2020 7265  data..        re
+00003e60: 6c65 7661 6e74 5f66 6f72 3a0a 2020 2020  levant_for:.    
+00003e70: 2020 2020 2020 2d20 6c61 7965 725f 776d        - layer_wm
+00003e80: 730a 2020 2020 2020 2d20 6e61 6d65 3a20  s.      - name: 
+00003e90: 6c65 6765 6e64 496d 6167 650a 2020 2020  legendImage.    
+00003ea0: 2020 2020 7479 7065 3a20 7572 6c0a 2020      type: url.  
+00003eb0: 2020 2020 2020 6465 7363 7269 7074 696f        descriptio
+00003ec0: 6e3a 203e 0a20 2020 2020 2020 2020 2054  n: >.          T
+00003ed0: 6865 2055 524c 2074 6f20 7468 6520 696d  he URL to the im
+00003ee0: 6167 6520 7573 6564 2061 7320 6120 6c65  age used as a le
+00003ef0: 6765 6e64 2069 6e20 7468 6520 6c61 7965  gend in the laye
+00003f00: 7220 7472 6565 2e0a 2020 2020 2020 2020  r tree..        
+00003f10: 7265 6c65 7661 6e74 5f66 6f72 3a0a 2020  relevant_for:.  
+00003f20: 2020 2020 2020 2020 2d20 6c61 7965 725f          - layer_
+00003f30: 776d 730a 2020 2020 2020 2020 2020 2d20  wms.          - 
+00003f40: 6c61 7965 725f 776d 7473 0a20 2020 2020  layer_wmts.     
+00003f50: 202d 206e 616d 653a 2068 6944 5049 4c65   - name: hiDPILe
+00003f60: 6765 6e64 496d 6167 6573 0a20 2020 2020  gendImages.     
+00003f70: 2020 2074 7970 653a 206a 736f 6e0a 2020     type: json.  
+00003f80: 2020 2020 2020 6465 7363 7269 7074 696f        descriptio
+00003f90: 6e3a 203e 0a20 2020 2020 2020 2020 2054  n: >.          T
+00003fa0: 6865 2055 524c 7320 746f 2074 6865 2068  he URLs to the h
+00003fb0: 6920 4450 4920 696d 6167 6573 2075 7365  i DPI images use
+00003fc0: 6420 746f 2070 7269 6e74 2074 6865 206c  d to print the l
+00003fd0: 6567 656e 6420 6f66 2074 6869 7320 6c61  egend of this la
+00003fe0: 7965 722e 0a20 2020 2020 2020 2020 2049  yer..          I
+00003ff0: 7420 7769 6c6c 2063 6f6e 7461 696e 2061  t will contain a
+00004000: 204a 534f 4e20 6d61 7070 696e 6720 6f62   JSON mapping ob
+00004010: 6a65 6374 2077 6974 6820 7468 6520 4450  ject with the DP
+00004020: 4920 6173 206b 6579 2061 6e64 2074 6865  I as key and the
+00004030: 2055 524c 2061 7320 7661 6c75 652e 0a20   URL as value.. 
+00004040: 2020 2020 2020 2020 204e 6f74 6520 7468           Note th
+00004050: 6174 2074 6865 2055 524c 2063 616e 2774  at the URL can't
+00004060: 2075 7365 2074 6865 2063 6f6e 6669 6720   use the config 
+00004070: 7363 6865 6d65 2e0a 2020 2020 2020 2020  scheme..        
+00004080: 7265 6c65 7661 6e74 5f66 6f72 3a0a 2020  relevant_for:.  
+00004090: 2020 2020 2020 2020 2d20 6c61 7965 725f          - layer_
+000040a0: 776d 730a 2020 2020 2020 2020 2020 2d20  wms.          - 
+000040b0: 6c61 7965 725f 776d 7473 0a20 2020 2020  layer_wmts.     
+000040c0: 202d 206e 616d 653a 2069 636f 6e55 726c   - name: iconUrl
+000040d0: 0a20 2020 2020 2020 2074 7970 653a 2075  .        type: u
+000040e0: 726c 0a20 2020 2020 2020 2064 6573 6372  rl.        descr
+000040f0: 6970 7469 6f6e 3a20 3e0a 2020 2020 2020  iption: >.      
+00004100: 2020 2020 5468 6520 5552 4c20 6f66 2074      The URL of t
+00004110: 6865 2069 636f 6e20 746f 2064 6973 706c  he icon to displ
+00004120: 6179 2069 6e20 7468 6520 6c61 7965 7220  ay in the layer 
+00004130: 7472 6565 2e0a 2020 2020 2020 2020 7265  tree..        re
+00004140: 6c65 7661 6e74 5f66 6f72 3a0a 2020 2020  levant_for:.    
+00004150: 2020 2020 2020 2d20 6c61 7965 725f 776d        - layer_wm
+00004160: 730a 2020 2020 2020 2020 2020 2d20 6c61  s.          - la
+00004170: 7965 725f 776d 7473 0a20 2020 2020 202d  yer_wmts.      -
+00004180: 206e 616d 653a 206d 6574 6164 6174 6155   name: metadataU
+00004190: 726c 0a20 2020 2020 2020 2074 7970 653a  rl.        type:
+000041a0: 2075 726c 0a20 2020 2020 2020 2064 6573   url.        des
+000041b0: 6372 6970 7469 6f6e 3a20 3e0a 2020 2020  cription: >.    
+000041c0: 2020 2020 2020 5468 6520 5552 4c20 746f        The URL to
+000041d0: 2074 6865 2069 6e66 6f72 6d61 7469 6f6e   the information
+000041e0: 206f 6e20 7468 6973 206c 6179 6572 2e0a   on this layer..
+000041f0: 2020 2020 2020 2020 7265 6c65 7661 6e74          relevant
+00004200: 5f66 6f72 3a0a 2020 2020 2020 2020 2020  _for:.          
+00004210: 2d20 6c61 7965 725f 776d 730a 2020 2020  - layer_wms.    
+00004220: 2020 2020 2020 2d20 6c61 7965 725f 776d        - layer_wm
+00004230: 7473 0a20 2020 2020 2020 2020 202d 206c  ts.          - l
+00004240: 6179 6572 6772 6f75 700a 2020 2020 2020  ayergroup.      
+00004250: 2d20 6e61 6d65 3a20 6469 7363 6c61 696d  - name: disclaim
+00004260: 6572 0a20 2020 2020 2020 2074 7261 6e73  er.        trans
+00004270: 6c61 7465 3a20 5472 7565 0a20 2020 2020  late: True.     
+00004280: 2020 2064 6573 6372 6970 7469 6f6e 3a20     description: 
+00004290: 3e0a 2020 2020 2020 2020 2020 5468 6520  >.          The 
+000042a0: 6469 7363 6c61 696d 6572 2074 6578 7420  disclaimer text 
+000042b0: 666f 7220 7468 6973 2065 6c65 6d65 6e74  for this element
+000042c0: 2e0a 2020 2020 2020 2020 7265 6c65 7661  ..        releva
+000042d0: 6e74 5f66 6f72 3a0a 2020 2020 2020 2020  nt_for:.        
+000042e0: 2020 2d20 7472 6565 6974 656d 0a20 2020    - treeitem.   
+000042f0: 2020 202d 206e 616d 653a 2069 7343 6865     - name: isChe
+00004300: 636b 6564 0a20 2020 2020 2020 2074 7970  cked.        typ
+00004310: 653a 2062 6f6f 6c65 616e 0a20 2020 2020  e: boolean.     
+00004320: 2020 2064 6573 6372 6970 7469 6f6e 3a20     description: 
+00004330: 3e0a 2020 2020 2020 2020 2020 4973 2074  >.          Is t
+00004340: 6865 206c 6179 6572 2063 6865 636b 6564  he layer checked
+00004350: 2062 7920 6465 6661 756c 742e 0a20 2020   by default..   
+00004360: 2020 2020 2072 656c 6576 616e 745f 666f       relevant_fo
+00004370: 723a 0a20 2020 2020 2020 2020 202d 206c  r:.          - l
+00004380: 6179 6572 5f77 6d73 0a20 2020 2020 2020  ayer_wms.       
+00004390: 2020 202d 206c 6179 6572 5f77 6d74 730a     - layer_wmts.
+000043a0: 2020 2020 2020 2d20 6e61 6d65 3a20 6964        - name: id
+000043b0: 656e 7469 6669 6572 4174 7472 6962 7574  entifierAttribut
+000043c0: 6546 6965 6c64 0a20 2020 2020 2020 2064  eField.        d
+000043d0: 6573 6372 6970 7469 6f6e 3a20 3e0a 2020  escription: >.  
+000043e0: 2020 2020 2020 2020 5468 6520 6669 656c          The fiel
+000043f0: 6420 7573 6564 2069 6e20 7468 6520 2264  d used in the "d
+00004400: 6973 706c 6179 2071 7565 7279 2077 696e  isplay query win
+00004410: 646f 7722 2061 7320 6665 6174 7572 6520  dow" as feature 
+00004420: 7469 746c 652e 0a20 2020 2020 2020 2072  title..        r
+00004430: 656c 6576 616e 745f 666f 723a 0a20 2020  elevant_for:.   
+00004440: 2020 2020 2020 202d 206c 6179 6572 5f77         - layer_w
+00004450: 6d73 0a20 2020 2020 202d 206e 616d 653a  ms.      - name:
+00004460: 206d 6178 5265 736f 6c75 7469 6f6e 0a20   maxResolution. 
+00004470: 2020 2020 2020 2074 7970 653a 2066 6c6f         type: flo
+00004480: 6174 0a20 2020 2020 2020 2064 6573 6372  at.        descr
+00004490: 6970 7469 6f6e 3a20 3e0a 2020 2020 2020  iption: >.      
+000044a0: 2020 2020 5468 6520 6d61 7820 7265 736f      The max reso
+000044b0: 6c75 7469 6f6e 2077 6865 7265 2074 6865  lution where the
+000044c0: 206c 6179 6572 2069 7320 7669 7369 626c   layer is visibl
+000044d0: 652e 204f 6e20 574d 5453 206c 6179 6572  e. On WMTS layer
+000044e0: 7320 6974 2077 696c 6c0a 2020 2020 2020  s it will.      
+000044f0: 2020 2020 6861 7665 2061 6e20 6566 6665      have an effe
+00004500: 6374 206f 6e20 7468 6520 6e6f 6465 2069  ct on the node i
+00004510: 6e20 7468 6520 6c61 7965 7274 7265 6520  n the layertree 
+00004520: 6275 7420 6e6f 7420 6f6e 2074 6865 206c  but not on the l
+00004530: 6179 6572 7472 6565 2064 6972 6563 746c  ayertree directl
+00004540: 792e 0a20 2020 2020 2020 2072 656c 6576  y..        relev
+00004550: 616e 745f 666f 723a 0a20 2020 2020 2020  ant_for:.       
+00004560: 2020 202d 206c 6179 6572 5f77 6d73 0a20     - layer_wms. 
+00004570: 2020 2020 2020 2020 202d 206c 6179 6572           - layer
+00004580: 5f77 6d74 730a 2020 2020 2020 2d20 6e61  _wmts.      - na
+00004590: 6d65 3a20 6d69 6e52 6573 6f6c 7574 696f  me: minResolutio
+000045a0: 6e0a 2020 2020 2020 2020 7479 7065 3a20  n.        type: 
+000045b0: 666c 6f61 740a 2020 2020 2020 2020 6465  float.        de
+000045c0: 7363 7269 7074 696f 6e3a 203e 0a20 2020  scription: >.   
+000045d0: 2020 2020 2020 2054 6865 206d 696e 2072         The min r
+000045e0: 6573 6f6c 7574 696f 6e20 7768 6572 6520  esolution where 
+000045f0: 7468 6520 6c61 7965 7220 6973 2076 6973  the layer is vis
+00004600: 6962 6c65 2e20 4f6e 2057 4d54 5320 6c61  ible. On WMTS la
+00004610: 7965 7273 2069 7420 7769 6c6c 0a20 2020  yers it will.   
+00004620: 2020 2020 2020 2068 6176 6520 616e 2065         have an e
+00004630: 6666 6563 7420 6f6e 2074 6865 206e 6f64  ffect on the nod
+00004640: 6520 696e 2074 6865 206c 6179 6572 7472  e in the layertr
+00004650: 6565 2062 7574 206e 6f74 206f 6e20 7468  ee but not on th
+00004660: 6520 6c61 7965 7220 6469 7265 6374 6c79  e layer directly
+00004670: 2e0a 2020 2020 2020 2020 7265 6c65 7661  ..        releva
+00004680: 6e74 5f66 6f72 3a0a 2020 2020 2020 2020  nt_for:.        
+00004690: 2020 2d20 6c61 7965 725f 776d 730a 2020    - layer_wms.  
+000046a0: 2020 2020 2020 2020 2d20 6c61 7965 725f          - layer_
+000046b0: 776d 7473 0a20 2020 2020 202d 206e 616d  wmts.      - nam
+000046c0: 653a 206f 7061 6369 7479 0a20 2020 2020  e: opacity.     
+000046d0: 2020 2074 7970 653a 2066 6c6f 6174 0a20     type: float. 
+000046e0: 2020 2020 2020 2064 6573 6372 6970 7469         descripti
+000046f0: 6f6e 3a20 3e0a 2020 2020 2020 2020 2020  on: >.          
+00004700: 4c61 7965 7220 6f70 6163 6974 792e 2031  Layer opacity. 1
+00004710: 2e30 206d 6561 6e73 2066 756c 6c79 2076  .0 means fully v
+00004720: 6973 6962 6c65 2c20 3020 6d65 616e 7320  isible, 0 means 
+00004730: 696e 7669 7369 626c 652e 0a20 2020 2020  invisible..     
+00004740: 2020 2072 656c 6576 616e 745f 666f 723a     relevant_for:
+00004750: 0a20 2020 2020 2020 2020 202d 206c 6179  .          - lay
+00004760: 6572 5f77 6d73 0a20 2020 2020 2020 2020  er_wms.         
+00004770: 202d 206c 6179 6572 5f77 6d74 730a 2020   - layer_wmts.  
+00004780: 2020 2020 2d20 6e61 6d65 3a20 7468 756d      - name: thum
+00004790: 626e 6169 6c0a 2020 2020 2020 2020 7479  bnail.        ty
+000047a0: 7065 3a20 7572 6c0a 2020 2020 2020 2020  pe: url.        
+000047b0: 6465 7363 7269 7074 696f 6e3a 203e 0a20  description: >. 
+000047c0: 2020 2020 2020 2020 2054 6865 2069 636f           The ico
+000047d0: 6e20 7669 7369 626c 6520 696e 2074 6865  n visible in the
+000047e0: 2062 6163 6b67 726f 756e 6420 7365 6c65   background sele
+000047f0: 6374 6f72 2e0a 2020 2020 2020 2020 7265  ctor..        re
+00004800: 6c65 7661 6e74 5f66 6f72 3a0a 2020 2020  levant_for:.    
+00004810: 2020 2020 2020 2d20 6c61 7965 725f 776d        - layer_wm
+00004820: 730a 2020 2020 2020 2020 2020 2d20 6c61  s.          - la
+00004830: 7965 725f 776d 7473 0a20 2020 2020 202d  yer_wmts.      -
+00004840: 206e 616d 653a 2074 696d 6541 7474 7269   name: timeAttri
+00004850: 6275 7465 0a20 2020 2020 2020 2064 6573  bute.        des
+00004860: 6372 6970 7469 6f6e 3a20 3e0a 2020 2020  cription: >.    
+00004870: 2020 2020 2020 5468 6520 6e61 6d65 206f        The name o
+00004880: 6620 7468 6520 7469 6d65 2061 7474 7269  f the time attri
+00004890: 6275 7465 2e20 466f 7220 574d 5328 2d54  bute. For WMS(-T
+000048a0: 2920 6c61 7965 7273 2e0a 2020 2020 2020  ) layers..      
+000048b0: 2020 7265 6c65 7661 6e74 5f66 6f72 3a0a    relevant_for:.
+000048c0: 2020 2020 2020 2020 2020 2d20 6c61 7965            - laye
+000048d0: 725f 776d 730a 2020 2020 2020 2d20 6e61  r_wms.      - na
+000048e0: 6d65 3a20 6765 6f74 6162 6c65 5072 696d  me: geotablePrim
+000048f0: 6172 794b 6579 0a20 2020 2020 2020 2064  aryKey.        d
+00004900: 6573 6372 6970 7469 6f6e 3a20 3e0a 2020  escription: >.  
+00004910: 2020 2020 2020 2020 5468 6520 6e61 6d65          The name
+00004920: 206f 6620 7468 6520 7072 696d 6172 7920   of the primary 
+00004930: 6b65 7920 6669 656c 6420 666f 7220 6564  key field for ed
+00004940: 6974 696f 6e2e 0a20 2020 2020 2020 2072  ition..        r
+00004950: 656c 6576 616e 745f 666f 723a 0a20 2020  elevant_for:.   
+00004960: 2020 2020 2020 202d 206c 6179 6572 5f77         - layer_w
+00004970: 6d73 0a20 2020 2020 202d 206e 616d 653a  ms.      - name:
+00004980: 206c 6173 7455 7064 6174 6544 6174 6543   lastUpdateDateC
+00004990: 6f6c 756d 6e0a 2020 2020 2020 2020 6465  olumn.        de
+000049a0: 7363 7269 7074 696f 6e3a 203e 0a20 2020  scription: >.   
+000049b0: 2020 2020 2020 2044 6566 696e 6520 6120         Define a 
+000049c0: 636f 6c75 6d6e 2077 6869 6368 2077 696c  column which wil
+000049d0: 6c20 6265 2061 7574 6f6d 6174 6963 616c  l be automatical
+000049e0: 6c79 2066 696c 6c65 6420 7769 7468 2074  ly filled with t
+000049f0: 6865 2064 6174 6520 6f66 2074 6865 206c  he date of the l
+00004a00: 6173 7420 6564 6974 2e0a 2020 2020 2020  ast edit..      
+00004a10: 2020 7265 6c65 7661 6e74 5f66 6f72 3a0a    relevant_for:.
+00004a20: 2020 2020 2020 2020 2020 2d20 6c61 7965            - laye
+00004a30: 725f 776d 730a 2020 2020 2020 2d20 6e61  r_wms.      - na
+00004a40: 6d65 3a20 6c61 7374 5570 6461 7465 5573  me: lastUpdateUs
+00004a50: 6572 436f 6c75 6d6e 0a20 2020 2020 2020  erColumn.       
+00004a60: 2064 6573 6372 6970 7469 6f6e 3a20 3e0a   description: >.
+00004a70: 2020 2020 2020 2020 2020 4465 6669 6e65            Define
+00004a80: 2061 2063 6f6c 756d 6e20 7768 6963 6820   a column which 
+00004a90: 7769 6c6c 2062 6520 6175 746f 6d61 7469  will be automati
+00004aa0: 6361 6c6c 7920 6669 6c6c 6564 2077 6974  cally filled wit
+00004ab0: 6820 7468 6520 7573 6572 206f 6620 7468  h the user of th
+00004ac0: 6520 6c61 7374 2065 6469 742e 0a20 2020  e last edit..   
+00004ad0: 2020 2020 2072 656c 6576 616e 745f 666f       relevant_fo
+00004ae0: 723a 0a20 2020 2020 2020 2020 202d 206c  r:.          - l
+00004af0: 6179 6572 5f77 6d73 0a20 2020 2020 202d  ayer_wms.      -
+00004b00: 206e 616d 653a 2073 6e61 7070 696e 6743   name: snappingC
+00004b10: 6f6e 6669 670a 2020 2020 2020 2020 7479  onfig.        ty
+00004b20: 7065 3a20 6a73 6f6e 0a20 2020 2020 2020  pe: json.       
+00004b30: 2064 6573 6372 6970 7469 6f6e 3a20 3e0a   description: >.
+00004b40: 2020 2020 2020 2020 2020 5468 6520 736e            The sn
+00004b50: 6170 7069 6e67 2063 6f6e 6669 6775 7261  apping configura
+00004b60: 7469 6f6e 2066 6f72 2074 6865 206c 6179  tion for the lay
+00004b70: 6572 2e20 4966 2073 6574 2c20 6576 656e  er. If set, even
+00004b80: 2069 6620 656d 7074 792c 2074 6865 206c   if empty, the l
+00004b90: 6179 6572 2069 7320 636f 6e73 6964 6572  ayer is consider
+00004ba0: 6564 2074 6f20 6265 0a20 2020 2020 2020  ed to be.       
+00004bb0: 2020 2022 736e 6170 7061 626c 6522 2061     "snappable" a
+00004bc0: 6e64 2073 6e61 7070 696e 6720 6973 2061  nd snapping is a
+00004bd0: 6374 6976 6174 6564 2062 7920 6465 6661  ctivated by defa
+00004be0: 756c 742e 2054 6f20 6469 7361 626c 6520  ult. To disable 
+00004bf0: 736e 6170 7069 6e67 2062 7920 6465 6661  snapping by defa
+00004c00: 756c 742c 2073 6574 2022 6163 7469 7661  ult, set "activa
+00004c10: 7465 6422 0a20 2020 2020 2020 2020 2074  ted".          t
+00004c20: 6f20 6661 6c73 652e 2045 7861 6d70 6c65  o false. Example
+00004c30: 2076 616c 7565 3a20 7b22 746f 6c65 7261   value: {"tolera
+00004c40: 6e63 6522 3a20 3530 2c20 2265 6467 6522  nce": 50, "edge"
+00004c50: 3a20 6661 6c73 657d 2e0a 2020 2020 2020  : false}..      
+00004c60: 2020 7265 6c65 7661 6e74 5f66 6f72 3a0a    relevant_for:.
+00004c70: 2020 2020 2020 2020 2020 2d20 6c61 7965            - laye
+00004c80: 725f 776d 730a 2020 2020 2020 2d20 6e61  r_wms.      - na
+00004c90: 6d65 3a20 6765 6f6d 6574 7279 5661 6c69  me: geometryVali
+00004ca0: 6461 7469 6f6e 0a20 2020 2020 2020 2074  dation.        t
+00004cb0: 7970 653a 2062 6f6f 6c65 616e 0a20 2020  ype: boolean.   
+00004cc0: 2020 2020 2064 6573 6372 6970 7469 6f6e       description
+00004cd0: 3a20 3e0a 2020 2020 2020 2020 2020 466f  : >.          Fo
+00004ce0: 7263 6520 7661 6c69 6461 7469 6f6e 206f  rce validation o
+00004cf0: 6620 7468 6520 6765 6f6d 6574 7269 6573  f the geometries
+00004d00: 2061 6363 6f72 6469 6e67 2074 6f20 7468   according to th
+00004d10: 6520 6c61 7965 7220 7479 7065 2028 706f  e layer type (po
+00004d20: 696e 742c 206c 696e 652c 2070 6f6c 7967  int, line, polyg
+00004d30: 6f6e 292c 0a20 2020 2020 2020 2020 2066  on),.          f
+00004d40: 6f72 2065 7861 6d70 6c65 2c20 746f 2070  or example, to p
+00004d50: 7265 7665 6e74 2063 7265 6174 696f 6e20  revent creation 
+00004d60: 6f66 2061 2032 2d70 6f69 6e74 2070 6f6c  of a 2-point pol
+00004d70: 7967 6f6e 2e0a 2020 2020 2020 2020 7265  ygon..        re
+00004d80: 6c65 7661 6e74 5f66 6f72 3a0a 2020 2020  levant_for:.    
+00004d90: 2020 2020 2020 2d20 6c61 7965 725f 776d        - layer_wm
+00004da0: 730a 2020 2020 2020 2d20 6e61 6d65 3a20  s.      - name: 
+00004db0: 6375 7374 6f6d 4f70 656e 4c61 7965 7273  customOpenLayers
+00004dc0: 4f70 7469 6f6e 730a 2020 2020 2020 2020  Options.        
+00004dd0: 7479 7065 3a20 6a73 6f6e 0a20 2020 2020  type: json.     
+00004de0: 2020 2064 6573 6372 6970 7469 6f6e 3a20     description: 
+00004df0: 3e0a 2020 2020 2020 2020 2020 5468 6520  >.          The 
+00004e00: 6375 7374 6f6d 204f 7065 6e4c 6179 6572  custom OpenLayer
+00004e10: 7320 574d 5320 6c61 7965 7220 6f70 7469  s WMS layer opti
+00004e20: 6f6e 732e 0a20 2020 2020 2020 2072 656c  ons..        rel
+00004e30: 6576 616e 745f 666f 723a 0a20 2020 2020  evant_for:.     
+00004e40: 2020 2020 202d 206c 6179 6572 5f77 6d73       - layer_wms
+00004e50: 0a20 2020 2020 2020 2020 202d 206c 6179  .          - lay
+00004e60: 6572 5f77 6d74 730a 2020 2020 2020 2d20  er_wmts.      - 
+00004e70: 6e61 6d65 3a20 6564 6974 696e 6741 7474  name: editingAtt
+00004e80: 7269 6275 7465 734f 7264 6572 0a20 2020  ributesOrder.   
+00004e90: 2020 2020 2074 7970 653a 206c 6973 740a       type: list.
+00004ea0: 2020 2020 2020 2020 6465 7363 7269 7074          descript
+00004eb0: 696f 6e3a 203e 0a20 2020 2020 2020 2020  ion: >.         
+00004ec0: 2053 7065 6369 6679 2074 6865 206f 7264   Specify the ord
+00004ed0: 6572 206f 6620 7468 6520 6564 6974 6162  er of the editab
+00004ee0: 6c65 2061 7474 7269 6275 7465 7320 696e  le attributes in
+00004ef0: 2074 6865 2065 6469 7420 696e 7465 7266   the edit interf
+00004f00: 6163 652e 0a20 2020 2020 2020 2072 656c  ace..        rel
+00004f10: 6576 616e 745f 666f 723a 0a20 2020 2020  evant_for:.     
+00004f20: 2020 2020 202d 206c 6179 6572 5f77 6d73       - layer_wms
+00004f30: 0a20 2020 2020 202d 206e 616d 653a 2065  .      - name: e
+00004f40: 6469 7469 6e67 456e 756d 6572 6174 696f  ditingEnumeratio
+00004f50: 6e73 0a20 2020 2020 2020 2074 7970 653a  ns.        type:
+00004f60: 206a 736f 6e0a 2020 2020 2020 2020 6465   json.        de
+00004f70: 7363 7269 7074 696f 6e3a 203e 0a20 2020  scription: >.   
+00004f80: 2020 2020 2020 2053 7065 6369 6679 2074         Specify t
+00004f90: 6865 2076 616c 7565 2063 6f6c 756d 6e20  he value column 
+00004fa0: 616e 6420 7468 6520 6f72 6465 7220 636f  and the order co
+00004fb0: 6c75 6d6e 206f 6e20 7468 6520 7265 6c61  lumn on the rela
+00004fc0: 7469 6f6e 7368 6970 2773 2074 6172 6765  tionship's targe
+00004fd0: 7420 7461 626c 6520 6f66 2074 6865 0a20  t table of the. 
+00004fe0: 2020 2020 2020 2020 2065 6e75 6d65 7261           enumera
+00004ff0: 7469 6f6e 2e0a 2020 2020 2020 2020 7265  tion..        re
+00005000: 6c65 7661 6e74 5f66 6f72 3a0a 2020 2020  levant_for:.    
+00005010: 2020 2020 2020 2d20 6c61 7965 725f 776d        - layer_wm
+00005020: 730a 2020 2020 2020 2d20 6e61 6d65 3a20  s.      - name: 
+00005030: 7265 6164 6f6e 6c79 4174 7472 6962 7574  readonlyAttribut
+00005040: 6573 0a20 2020 2020 2020 2074 7970 653a  es.        type:
+00005050: 206c 6973 740a 2020 2020 2020 2020 6465   list.        de
+00005060: 7363 7269 7074 696f 6e3a 203e 0a20 2020  scription: >.   
+00005070: 2020 2020 2020 2053 6574 2061 7474 7269         Set attri
+00005080: 6275 7465 7320 6173 2072 6561 6420 6f6e  butes as read on
+00005090: 6c79 2069 6e20 7468 6520 4564 6974 696e  ly in the Editin
+000050a0: 6720 666f 726d 2e0a 2020 2020 2020 2020  g form..        
+000050b0: 7265 6c65 7661 6e74 5f66 6f72 3a0a 2020  relevant_for:.  
+000050c0: 2020 2020 2020 2020 2d20 6c61 7965 725f          - layer_
+000050d0: 776d 730a 2020 2020 2020 2d20 6e61 6d65  wms.      - name
+000050e0: 3a20 7175 6572 7949 636f 6e50 6f73 6974  : queryIconPosit
+000050f0: 696f 6e0a 2020 2020 2020 2020 7479 7065  ion.        type
+00005100: 3a20 6c69 7374 0a20 2020 2020 2020 2064  : list.        d
+00005110: 6573 6372 6970 7469 6f6e 3a20 3e0a 2020  escription: >.  
+00005120: 2020 2020 2020 2020 5661 6c75 6573 2074          Values t
+00005130: 6f20 6465 6669 6e65 2074 6865 2073 6861  o define the sha
+00005140: 7065 2028 6262 6f78 2920 746f 2075 7365  pe (bbox) to use
+00005150: 2074 6f20 7175 6572 7920 7468 6520 6c61   to query the la
+00005160: 7965 722e 2054 6865 2076 616c 7565 7320  yer. The values 
+00005170: 6172 6520 7573 6564 206c 696b 6520 610a  are used like a.
+00005180: 2020 2020 2020 2020 2020 7061 6464 696e            paddin
+00005190: 6720 696e 2063 7373 2077 6974 6820 312c  g in css with 1,
+000051a0: 2032 2c20 3320 6f72 2034 2063 6f6d 6d61   2, 3 or 4 comma
+000051b0: 2073 6570 6172 6174 6564 2076 616c 7565   separated value
+000051c0: 733a 2061 6c6c 202f 2074 6f70 2d62 6f74  s: all / top-bot
+000051d0: 746f 6d2c 206c 6566 742d 7269 6768 7420  tom, left-right 
+000051e0: 2f0a 2020 2020 2020 2020 2020 746f 702c  /.          top,
+000051f0: 2072 6967 6874 2d6c 6566 742c 2062 6f74   right-left, bot
+00005200: 746f 6d20 2f20 746f 702c 2072 6967 6874  tom / top, right
+00005210: 2c20 626f 7474 6f6d 2c20 6c65 6674 2e0a  , bottom, left..
+00005220: 2020 2020 2020 2020 7265 6c65 7661 6e74          relevant
+00005230: 5f66 6f72 3a0a 2020 2020 2020 2020 2020  _for:.          
+00005240: 2d20 6c61 7965 725f 776d 730a 2020 2020  - layer_wms.    
+00005250: 2020 2020 2020 2d20 6c61 7965 725f 776d        - layer_wm
+00005260: 7473 0a20 2020 2020 202d 206e 616d 653a  ts.      - name:
+00005270: 2065 6469 7469 6e67 5365 6c65 6374 696f   editingSelectio
+00005280: 6e41 7474 7269 6275 7465 0a20 2020 2020  nAttribute.     
+00005290: 2020 2064 6573 6372 6970 7469 6f6e 3a20     description: 
+000052a0: 3e0a 2020 2020 2020 2020 2020 5468 6520  >.          The 
+000052b0: 6669 656c 6420 7573 6564 2069 6e20 7468  field used in th
+000052c0: 6520 7365 6c65 6374 6f72 2074 6f6f 6c74  e selector toolt
+000052d0: 6970 2074 6f20 6e61 6d65 2074 6865 206c  ip to name the l
+000052e0: 6179 6572 2077 6865 6e20 6d75 6c74 6970  ayer when multip
+000052f0: 6c65 206f 6e65 7320 6172 6520 7365 6c65  le ones are sele
+00005300: 6374 6564 206f 6e20 7468 6520 6d61 702e  cted on the map.
+00005310: 0a20 2020 2020 2020 2072 656c 6576 616e  .        relevan
+00005320: 745f 666f 723a 0a20 2020 2020 2020 2020  t_for:.         
+00005330: 202d 206c 6179 6572 5f77 6d73 0a20 2020   - layer_wms.   
+00005340: 2020 2023 2057 4d53 0a20 2020 2020 202d     # WMS.      -
+00005350: 206e 616d 653a 2064 6972 6563 7465 6446   name: directedF
+00005360: 696c 7465 7241 7474 7269 6275 7465 730a  ilterAttributes.
+00005370: 2020 2020 2020 2020 7479 7065 3a20 6c69          type: li
+00005380: 7374 0a20 2020 2020 2020 2064 6573 6372  st.        descr
+00005390: 6970 7469 6f6e 3a20 3e0a 2020 2020 2020  iption: >.      
+000053a0: 2020 2020 4c69 7374 206f 6620 6174 7472      List of attr
+000053b0: 6962 7574 6520 6e61 6d65 7320 7768 6963  ibute names whic
+000053c0: 6820 7368 6f75 6c64 2068 6176 6520 7275  h should have ru
+000053d0: 6c65 7320 616c 7265 6164 7920 7265 6164  les already read
+000053e0: 7920 7768 656e 2075 7369 6e67 2074 6865  y when using the
+000053f0: 2066 696c 7465 720a 2020 2020 2020 2020   filter.        
+00005400: 2020 746f 6f6c 732e 0a20 2020 2020 2020    tools..       
+00005410: 2072 656c 6576 616e 745f 666f 723a 0a20   relevant_for:. 
+00005420: 2020 2020 2020 2020 202d 206c 6179 6572           - layer
+00005430: 5f77 6d73 0a20 2020 2020 202d 206e 616d  _wms.      - nam
+00005440: 653a 2065 6e75 6d65 7261 7465 6441 7474  e: enumeratedAtt
+00005450: 7269 6275 7465 730a 2020 2020 2020 2020  ributes.        
+00005460: 7479 7065 3a20 6c69 7374 0a20 2020 2020  type: list.     
+00005470: 2020 2064 6573 6372 6970 7469 6f6e 3a20     description: 
+00005480: 3e0a 2020 2020 2020 2020 2020 4c69 7374  >.          List
+00005490: 206f 6620 6174 7472 6962 7574 6520 6e61   of attribute na
+000054a0: 6d65 7320 7768 6963 6820 6861 7665 2065  mes which have e
+000054b0: 6e75 6d65 7261 7465 6420 6174 7472 6962  numerated attrib
+000054c0: 7574 6520 7661 6c75 6573 2028 666f 7220  ute values (for 
+000054d0: 6669 6c74 6572 7320 7075 7270 6f73 6529  filters purpose)
+000054e0: 2e0a 2020 2020 2020 2020 7265 6c65 7661  ..        releva
+000054f0: 6e74 5f66 6f72 3a0a 2020 2020 2020 2020  nt_for:.        
+00005500: 2020 2d20 6c61 7965 725f 776d 730a 2020    - layer_wms.  
+00005510: 2020 2020 2320 574d 5453 206c 6179 6572      # WMTS layer
+00005520: 730a 2020 2020 2020 2d20 6e61 6d65 3a20  s.      - name: 
+00005530: 6f67 6353 6572 7665 720a 2020 2020 2020  ogcServer.      
+00005540: 2020 6465 7363 7269 7074 696f 6e3a 203e    description: >
+00005550: 0a20 2020 2020 2020 2020 2054 6865 2063  .          The c
+00005560: 6f72 7265 7370 6f6e 6469 6e67 204f 4743  orresponding OGC
+00005570: 2073 6572 7665 7220 666f 7220 6120 574d   server for a WM
+00005580: 5453 206c 6179 6572 2e0a 2020 2020 2020  TS layer..      
+00005590: 2020 7265 6c65 7661 6e74 5f66 6f72 3a0a    relevant_for:.
+000055a0: 2020 2020 2020 2020 2020 2d20 6c61 7965            - laye
+000055b0: 725f 776d 7473 0a20 2020 2020 202d 206e  r_wmts.      - n
+000055c0: 616d 653a 2077 6d73 4c61 7965 7273 0a20  ame: wmsLayers. 
+000055d0: 2020 2020 2020 2064 6573 6372 6970 7469         descripti
+000055e0: 6f6e 3a20 3e0a 2020 2020 2020 2020 2020  on: >.          
+000055f0: 436f 7272 6573 706f 6e64 696e 6720 574d  Corresponding WM
+00005600: 532f 5746 5320 6c61 7965 7273 2028 636f  S/WFS layers (co
+00005610: 6d6d 6120 7365 7061 7261 7465 6429 2074  mma separated) t
+00005620: 6861 7420 7769 6c6c 2062 6520 7573 6564  hat will be used
+00005630: 2069 6e73 7465 6164 206f 6620 7468 6520   instead of the 
+00005640: 574d 5453 206c 6179 6572 0a20 2020 2020  WMTS layer.     
+00005650: 2020 2020 2074 6f20 646f 2074 6865 2071       to do the q
+00005660: 7565 7279 2061 6e64 2066 6f72 2074 6865  uery and for the
+00005670: 2070 7269 6e74 2e0a 2020 2020 2020 2020   print..        
+00005680: 2020 416e 204f 4743 5365 7276 6572 206d    An OGCServer m
+00005690: 6574 6164 6174 6120 6d75 7374 2062 6520  etadata must be 
+000056a0: 7365 7420 7769 7468 2074 6865 206e 616d  set with the nam
+000056b0: 6520 6f66 2074 6865 204f 4743 2073 6572  e of the OGC ser
+000056c0: 7665 722e 0a20 2020 2020 2020 2020 2053  ver..          S
+000056d0: 6565 2061 6c73 6f20 7072 696e 744c 6179  ee also printLay
+000056e0: 6572 7320 616e 6420 7175 6572 794c 6179  ers and queryLay
+000056f0: 6572 7320 6d65 7461 6461 7461 2066 6f72  ers metadata for
+00005700: 206d 6f72 6520 6772 616e 756c 6172 6974   more granularit
+00005710: 792e 0a20 2020 2020 2020 2072 656c 6576  y..        relev
+00005720: 616e 745f 666f 723a 0a20 2020 2020 2020  ant_for:.       
+00005730: 2020 202d 206c 6179 6572 5f77 6d74 730a     - layer_wmts.
+00005740: 2020 2020 2020 2d20 6e61 6d65 3a20 7175        - name: qu
+00005750: 6572 794c 6179 6572 730a 2020 2020 2020  eryLayers.      
+00005760: 2020 6465 7363 7269 7074 696f 6e3a 203e    description: >
+00005770: 0a20 2020 2020 2020 2020 2043 6f72 7265  .          Corre
+00005780: 7370 6f6e 6469 6e67 2057 4653 206c 6179  sponding WFS lay
+00005790: 6572 7320 2863 6f6d 6d61 2073 6570 6172  ers (comma separ
+000057a0: 6174 6564 2920 7468 6174 2077 696c 6c20  ated) that will 
+000057b0: 6265 2075 7365 6420 696e 7374 6561 6420  be used instead 
+000057c0: 6f66 2074 6865 2057 4d54 5320 6c61 7965  of the WMTS laye
+000057d0: 720a 2020 2020 2020 2020 2020 746f 2064  r.          to d
+000057e0: 6f20 7468 6520 7175 6572 792e 0a20 2020  o the query..   
+000057f0: 2020 2020 2020 2041 6e20 4f47 4353 6572         An OGCSer
+00005800: 7665 7220 6d65 7461 6461 7461 206d 7573  ver metadata mus
+00005810: 7420 6265 2073 6574 2077 6974 6820 7468  t be set with th
+00005820: 6520 6e61 6d65 206f 6620 7468 6520 4f47  e name of the OG
+00005830: 4320 7365 7276 6572 2e0a 2020 2020 2020  C server..      
+00005840: 2020 7265 6c65 7661 6e74 5f66 6f72 3a0a    relevant_for:.
+00005850: 2020 2020 2020 2020 2020 2d20 6c61 7965            - laye
+00005860: 725f 776d 7473 0a20 2020 2020 202d 206e  r_wmts.      - n
+00005870: 616d 653a 2070 7269 6e74 4c61 7965 7273  ame: printLayers
+00005880: 0a20 2020 2020 2020 2064 6573 6372 6970  .        descrip
+00005890: 7469 6f6e 3a20 3e0a 2020 2020 2020 2020  tion: >.        
+000058a0: 2020 436f 7272 6573 706f 6e64 696e 6720    Corresponding 
+000058b0: 574d 5320 6c61 7965 7273 2028 636f 6d6d  WMS layers (comm
+000058c0: 6120 7365 7061 7261 7465 6429 2074 6861  a separated) tha
+000058d0: 7420 7769 6c6c 2062 6520 7573 6564 2069  t will be used i
+000058e0: 6e73 7465 6164 206f 6620 7468 6520 574d  nstead of the WM
+000058f0: 5453 206c 6179 6572 0a20 2020 2020 2020  TS layer.       
+00005900: 2020 2066 6f72 2074 6865 2070 7269 6e74     for the print
+00005910: 2e0a 2020 2020 2020 2020 2020 5573 6564  ..          Used
+00005920: 2074 6f20 696e 6372 6561 7365 2074 6865   to increase the
+00005930: 2071 7561 6c69 7479 206f 6620 7468 6520   quality of the 
+00005940: 7072 696e 7465 6420 6c61 7965 722c 2062  printed layer, b
+00005950: 7920 7573 696e 6720 6e61 7469 7665 2072  y using native r
+00005960: 6f74 6174 696f 6e20 616e 640a 2020 2020  otation and.    
+00005970: 2020 2020 2020 6765 6e65 7261 7469 6e67        generating
+00005980: 2061 6e20 696d 6167 6520 696e 2068 692d   an image in hi-
+00005990: 4450 492e 0a20 2020 2020 2020 2020 2041  DPI..          A
+000059a0: 6e20 4f47 4353 6572 7665 7220 6d65 7461  n OGCServer meta
+000059b0: 6461 7461 206d 7573 7420 6265 2073 6574  data must be set
+000059c0: 2077 6974 6820 7468 6520 6e61 6d65 206f   with the name o
+000059d0: 6620 7468 6520 4f47 4320 7365 7276 6572  f the OGC server
+000059e0: 2e0a 2020 2020 2020 2020 7265 6c65 7661  ..        releva
+000059f0: 6e74 5f66 6f72 3a0a 2020 2020 2020 2020  nt_for:.        
+00005a00: 2020 2d20 6c61 7965 725f 776d 7473 0a20    - layer_wmts. 
+00005a10: 2020 2020 202d 206e 616d 653a 206d 6178       - name: max
+00005a20: 5175 6572 7952 6573 6f6c 7574 696f 6e0a  QueryResolution.
+00005a30: 2020 2020 2020 2020 7479 7065 3a20 666c          type: fl
+00005a40: 6f61 740a 2020 2020 2020 2020 6465 7363  oat.        desc
+00005a50: 7269 7074 696f 6e3a 203e 0a20 2020 2020  ription: >.     
+00005a60: 2020 2020 2054 6865 206d 6178 2072 6573       The max res
+00005a70: 6f6c 7574 696f 6e20 7768 6572 6520 7468  olution where th
+00005a80: 6520 6c61 7965 7220 6973 2071 7565 7279  e layer is query
+00005a90: 6162 6c65 2e0a 2020 2020 2020 2020 7265  able..        re
+00005aa0: 6c65 7661 6e74 5f66 6f72 3a0a 2020 2020  levant_for:.    
+00005ab0: 2020 2020 2020 2d20 6c61 7965 725f 776d        - layer_wm
+00005ac0: 7473 0a20 2020 2020 202d 206e 616d 653a  ts.      - name:
+00005ad0: 206d 696e 5175 6572 7952 6573 6f6c 7574   minQueryResolut
+00005ae0: 696f 6e0a 2020 2020 2020 2020 7479 7065  ion.        type
+00005af0: 3a20 666c 6f61 740a 2020 2020 2020 2020  : float.        
+00005b00: 6465 7363 7269 7074 696f 6e3a 203e 0a20  description: >. 
+00005b10: 2020 2020 2020 2020 2054 6865 206d 696e           The min
+00005b20: 2072 6573 6f6c 7574 696f 6e20 7768 6572   resolution wher
+00005b30: 6520 7468 6520 6c61 7965 7220 6973 2071  e the layer is q
+00005b40: 7565 7279 6162 6c65 2e0a 2020 2020 2020  ueryable..      
+00005b50: 2020 7265 6c65 7661 6e74 5f66 6f72 3a0a    relevant_for:.
+00005b60: 2020 2020 2020 2020 2020 2d20 6c61 7965            - laye
+00005b70: 725f 776d 7473 0a20 2020 2020 202d 206e  r_wmts.      - n
+00005b80: 616d 653a 2074 696d 656f 7574 0a20 2020  ame: timeout.   
+00005b90: 2020 2020 2074 7970 653a 2066 6c6f 6174       type: float
+00005ba0: 0a20 2020 2020 2020 2064 6573 6372 6970  .        descrip
+00005bb0: 7469 6f6e 3a20 5468 6520 6665 7463 6820  tion: The fetch 
+00005bc0: 6361 7061 6269 6c69 7469 6573 2074 696d  capabilities tim
+00005bd0: 656f 7574 2069 6e20 7365 636f 6e64 732e  eout in seconds.
+00005be0: 2055 7365 2060 3330 3060 2062 7920 6465   Use `300` by de
+00005bf0: 6661 756c 742e 0a20 2020 2020 2020 2072  fault..        r
+00005c00: 656c 6576 616e 745f 666f 723a 0a20 2020  elevant_for:.   
+00005c10: 2020 2020 2020 202d 206c 6179 6572 5f77         - layer_w
+00005c20: 6d74 730a 0a20 2020 2023 2054 6865 206c  mts..    # The l
+00005c30: 6973 7420 6f66 2066 756e 6374 696f 6e61  ist of functiona
+00005c40: 6c69 7469 6573 2074 6861 7420 6361 6e20  lities that can 
+00005c50: 6265 2063 6f6e 6669 6775 7265 640a 2020  be configured.  
+00005c60: 2020 2320 7468 726f 7567 6820 7468 6520    # through the 
+00005c70: 6164 6d69 6e20 696e 7465 7266 6163 652e  admin interface.
+00005c80: 0a20 2020 2061 7661 696c 6162 6c65 5f66  .    available_f
+00005c90: 756e 6374 696f 6e61 6c69 7469 6573 3a0a  unctionalities:.
+00005ca0: 2020 2020 2020 2d20 6e61 6d65 3a20 6465        - name: de
+00005cb0: 6661 756c 745f 6261 7365 6d61 700a 2020  fault_basemap.  
+00005cc0: 2020 2020 2020 7369 6e67 6c65 3a20 7472        single: tr
+00005cd0: 7565 0a20 2020 2020 2020 2064 6573 6372  ue.        descr
+00005ce0: 6970 7469 6f6e 3a20 3e0a 2020 2020 2020  iption: >.      
+00005cf0: 2020 2020 5468 6520 6261 636b 6772 6f75      The backgrou
+00005d00: 6e64 206c 6179 6572 2074 6f20 6c6f 6164  nd layer to load
+00005d10: 2077 6865 6e20 7468 6520 7573 6572 2073   when the user s
+00005d20: 656c 6563 7420 7468 6973 2074 6865 6d65  elect this theme
+00005d30: 2e0a 2020 2020 2020 2020 7265 6c65 7661  ..        releva
+00005d40: 6e74 5f66 6f72 3a0a 2020 2020 2020 2020  nt_for:.        
+00005d50: 2020 2d20 7468 656d 650a 2020 2020 2020    - theme.      
+00005d60: 2d20 6e61 6d65 3a20 6465 6661 756c 745f  - name: default_
+00005d70: 7468 656d 650a 2020 2020 2020 2020 7369  theme.        si
+00005d80: 6e67 6c65 3a20 7472 7565 0a20 2020 2020  ngle: true.     
+00005d90: 2020 2064 6573 6372 6970 7469 6f6e 3a20     description: 
+00005da0: 3e0a 2020 2020 2020 2020 2020 5468 6520  >.          The 
+00005db0: 7468 656d 6520 746f 206c 6f61 6420 7768  theme to load wh
+00005dc0: 656e 2074 6865 2075 7365 7220 6c6f 6720  en the user log 
+00005dd0: 696e 2e0a 2020 2020 2020 2020 7265 6c65  in..        rele
+00005de0: 7661 6e74 5f66 6f72 3a0a 2020 2020 2020  vant_for:.      
+00005df0: 2020 2020 2d20 726f 6c65 0a20 2020 2020      - role.     
+00005e00: 202d 206e 616d 653a 2070 7269 6e74 5f74   - name: print_t
+00005e10: 656d 706c 6174 650a 2020 2020 2020 2020  emplate.        
+00005e20: 6465 7363 7269 7074 696f 6e3a 203e 0a20  description: >. 
+00005e30: 2020 2020 2020 2020 2047 7261 6e74 2061           Grant a
+00005e40: 6363 6573 7320 746f 2063 6f6e 7369 6465  ccess to conside
+00005e50: 7265 6420 7072 696e 7420 7465 6d70 6c61  red print templa
+00005e60: 7465 2e0a 2020 2020 2020 2020 7265 6c65  te..        rele
+00005e70: 7661 6e74 5f66 6f72 3a0a 2020 2020 2020  vant_for:.      
+00005e80: 2020 2020 2d20 726f 6c65 0a20 2020 2020      - role.     
+00005e90: 202d 206e 616d 653a 206d 6170 7365 7276   - name: mapserv
+00005ea0: 6572 5f73 7562 7374 6974 7574 696f 6e0a  er_substitution.
+00005eb0: 2020 2020 2020 2020 7265 6c65 7661 6e74          relevant
+00005ec0: 5f66 6f72 3a0a 2020 2020 2020 2020 2020  _for:.          
+00005ed0: 2d20 726f 6c65 0a20 2020 2020 2020 2064  - role.        d
+00005ee0: 6573 6372 6970 7469 6f6e 3a20 3e0a 2020  escription: >.  
+00005ef0: 2020 2020 2020 2020 4d61 7053 6572 7665          MapServe
+00005f00: 7220 7375 6273 7469 7475 7469 6f6e 206f  r substitution o
+00005f10: 6620 6120 7661 7269 6162 6c65 2069 6e20  f a variable in 
+00005f20: 7468 6520 6d61 7066 696c 652e 0a20 2020  the mapfile..   
+00005f30: 2020 2020 2020 2053 6565 2074 6865 2064         See the d
+00005f40: 6f63 756d 656e 7461 7469 6f6e 2068 6572  ocumentation her
+00005f50: 653a 0a20 2020 2020 2020 2020 2068 7474  e:.          htt
+00005f60: 7073 3a2f 2f63 616d 7074 6f63 616d 702e  ps://camptocamp.
+00005f70: 6769 7468 7562 2e69 6f2f 6332 6367 656f  github.io/c2cgeo
+00005f80: 706f 7274 616c 2f7b 7b63 6f6f 6b69 6563  portal/{{cookiec
+00005f90: 7574 7465 722e 6765 6f6d 6170 6669 7368  utter.geomapfish
+00005fa0: 5f6d 6169 6e5f 7665 7273 696f 6e7d 7d2f  _main_version}}/
+00005fb0: 6164 6d69 6e69 7374 7261 746f 722f 6d61  administrator/ma
+00005fc0: 7066 696c 652e 6874 6d6c 3f68 6967 686c  pfile.html?highl
+00005fd0: 6967 6874 3d6d 6170 7365 7276 6572 5f73  ight=mapserver_s
+00005fe0: 7562 7374 6974 7574 696f 6e23 7661 7269  ubstitution#vari
+00005ff0: 6162 6c65 2d73 7562 7374 6974 7574 696f  able-substitutio
+00006000: 6e0a 2020 2020 2020 2d20 6e61 6d65 3a20  n.      - name: 
+00006010: 6669 6c74 6572 6162 6c65 5f6c 6179 6572  filterable_layer
+00006020: 730a 2020 2020 2020 2020 6465 7363 7269  s.        descri
+00006030: 7074 696f 6e3a 203e 0a20 2020 2020 2020  ption: >.       
+00006040: 2020 2047 7261 6e74 2061 6363 6573 7320     Grant access 
+00006050: 666f 7220 6669 6c74 6572 696e 6720 636f  for filtering co
+00006060: 6e73 6964 6572 6564 206c 6179 6572 2e0a  nsidered layer..
+00006070: 2020 2020 2020 2020 7265 6c65 7661 6e74          relevant
+00006080: 5f66 6f72 3a0a 2020 2020 2020 2020 2020  _for:.          
+00006090: 2d20 726f 6c65 0a20 2020 2020 202d 206e  - role.      - n
+000060a0: 616d 653a 2070 7265 7365 745f 6c61 7965  ame: preset_laye
+000060b0: 725f 6669 6c74 6572 0a20 2020 2020 2020  r_filter.       
+000060c0: 2073 696e 676c 653a 2074 7275 650a 2020   single: true.  
+000060d0: 2020 2020 2020 6465 7363 7269 7074 696f        descriptio
+000060e0: 6e3a 203e 0a20 2020 2020 2020 2020 204e  n: >.          N
+000060f0: 616d 6520 6f66 2074 6865 206c 6179 6572  ame of the layer
+00006100: 2028 6461 7461 2073 6f75 7263 6529 2074   (data source) t
+00006110: 6f20 7365 6c65 6374 2069 6e20 7468 6520  o select in the 
+00006120: 6669 6c74 6572 2074 6f6f 6c20 7570 6f6e  filter tool upon
+00006130: 206c 6f61 6469 6e67 2061 6e20 6170 706c   loading an appl
+00006140: 6963 6174 696f 6e2e 0a20 2020 2020 2020  ication..       
+00006150: 2072 656c 6576 616e 745f 666f 723a 0a20   relevant_for:. 
+00006160: 2020 2020 2020 2020 202d 2072 6f6c 650a           - role.
+00006170: 2020 2020 2020 2d20 6e61 6d65 3a20 6f70        - name: op
+00006180: 656e 5f70 616e 656c 0a20 2020 2020 2020  en_panel.       
+00006190: 2073 696e 676c 653a 2074 7275 650a 2020   single: true.  
+000061a0: 2020 2020 2020 6465 7363 7269 7074 696f        descriptio
+000061b0: 6e3a 203e 0a20 2020 2020 2020 2020 204e  n: >.          N
+000061c0: 616d 6520 6f66 2061 2070 616e 656c 2074  ame of a panel t
+000061d0: 6f20 6f70 656e 2075 706f 6e20 6c6f 6164  o open upon load
+000061e0: 696e 6720 616e 2061 7070 6c69 6361 7469  ing an applicati
+000061f0: 6f6e 2e0a 2020 2020 2020 2020 7265 6c65  on..        rele
+00006200: 7661 6e74 5f66 6f72 3a0a 2020 2020 2020  vant_for:.      
+00006210: 2020 2020 2d20 726f 6c65 0a0a 2020 6765      - role..  ge
+00006220: 7469 7466 6978 6564 3a0a 2020 2020 656e  titfixed:.    en
+00006230: 6162 6c65 643a 2066 616c 7365 0a0a 2020  abled: false..  
+00006240: 6675 6e63 7469 6f6e 616c 6974 6965 733a  functionalities:
+00006250: 0a20 2020 2023 2046 756e 6374 696f 6e61  .    # Functiona
+00006260: 6c69 7469 6573 2074 6861 7420 6172 6520  lities that are 
+00006270: 6d61 6465 2061 7661 696c 6162 6c65 2074  made available t
+00006280: 6f20 4d61 6b6f 2074 656d 706c 6174 6573  o Mako templates
+00006290: 2061 6e64 206c 6f67 696e 7573 6572 2e0a   and loginuser..
+000062a0: 2020 2020 6176 6169 6c61 626c 655f 696e      available_in
+000062b0: 5f74 656d 706c 6174 6573 3a0a 2020 2020  _templates:.    
+000062c0: 2020 2d20 6465 6661 756c 745f 6261 7365    - default_base
+000062d0: 6d61 700a 2020 2020 2020 2d20 6465 6661  map.      - defa
+000062e0: 756c 745f 7468 656d 650a 2020 2020 2020  ult_theme.      
+000062f0: 2d20 6669 6c74 6572 6162 6c65 5f6c 6179  - filterable_lay
+00006300: 6572 730a 2020 2020 2020 2d20 7072 696e  ers.      - prin
+00006310: 745f 7465 6d70 6c61 7465 0a20 2020 2020  t_template.     
+00006320: 202d 2070 7265 7365 745f 6c61 7965 725f   - preset_layer_
+00006330: 6669 6c74 6572 0a20 2020 2020 202d 206f  filter.      - o
+00006340: 7065 6e5f 7061 6e65 6c0a 0a20 2075 726c  pen_panel..  url
+00006350: 6c6f 6769 6e3a 207b 7d0a 0a20 2068 7474  login: {}..  htt
+00006360: 705f 6f70 7469 6f6e 733a 0a20 2020 2074  p_options:.    t
+00006370: 696d 656f 7574 3a20 3330 300a 0a20 2074  imeout: 300..  t
+00006380: 696e 796f 7773 7072 6f78 793a 0a20 2020  inyowsproxy:.   
+00006390: 2023 2055 524c 2074 6f20 696e 7465 726e   # URL to intern
+000063a0: 616c 2054 696e 794f 5753 2069 6e73 7461  al TinyOWS insta
+000063b0: 6e63 650a 2020 2020 7469 6e79 6f77 735f  nce.    tinyows_
+000063c0: 7572 6c3a 2027 7b54 494e 594f 5753 5f55  url: '{TINYOWS_U
+000063d0: 524c 7d27 0a20 2020 206f 6763 5f73 6572  RL}'.    ogc_ser
+000063e0: 7665 723a 2027 7b6d 6169 6e5f 6f67 635f  ver: '{main_ogc_
+000063f0: 7365 7276 6572 7d27 0a0a 2020 2020 2320  server}'..    # 
+00006400: 4966 2074 6865 2060 6f6e 6c69 6e65 5f72  If the `online_r
+00006410: 6573 6f75 7263 6560 2075 726c 2069 6e20  esource` url in 
+00006420: 7468 6520 5469 6e79 4f57 5320 636f 6e66  the TinyOWS conf
+00006430: 6967 7572 6174 696f 6e20 6973 206e 6f74  iguration is not
+00006440: 2073 6574 0a20 2020 2023 2074 6f20 7468   set.    # to th
+00006450: 6520 5469 6e79 4f57 5320 7072 6f78 7920  e TinyOWS proxy 
+00006460: 7572 6c20 2865 2e67 2e20 7768 656e 2074  url (e.g. when t
+00006470: 6865 2073 6572 7669 6365 2069 7320 616c  he service is al
+00006480: 736f 2075 7365 6420 7769 7468 6f75 740a  so used without.
+00006490: 2020 2020 2320 7468 6520 7072 6f78 7929      # the proxy)
+000064a0: 2c20 7468 6520 7072 6f78 7920 6361 6e20  , the proxy can 
+000064b0: 7265 706c 6163 6520 7468 6520 6f72 6967  replace the orig
+000064c0: 696e 616c 2060 6f6e 6c69 6e65 5f72 6573  inal `online_res
+000064d0: 6f75 7263 6560 0a20 2020 2023 2075 726c  ource`.    # url
+000064e0: 2077 6974 6820 7468 6520 7072 6f78 7920   with the proxy 
+000064f0: 7572 6c2e 0a20 2020 2023 2070 726f 7879  url..    # proxy
+00006500: 5f6f 6e6c 696e 655f 7265 736f 7572 6365  _online_resource
+00006510: 3a20 7b56 4953 4942 4c45 5f57 4542 5f50  : {VISIBLE_WEB_P
+00006520: 524f 544f 434f 4c7d 3a2f 2f7b 5649 5349  ROTOCOL}://{VISI
+00006530: 424c 455f 5745 425f 484f 5354 7d7b 5649  BLE_WEB_HOST}{VI
+00006540: 5349 424c 455f 454e 5452 595f 504f 494e  SIBLE_ENTRY_POIN
+00006550: 547d 7469 6e79 6f77 735f 7072 6f78 790a  T}tinyows_proxy.
+00006560: 2020 2020 2320 6f6e 6c69 6e65 5f72 6573      # online_res
+00006570: 6f75 7263 653a 2068 7474 703a 2f2f 6c6f  ource: http://lo
+00006580: 6361 6c68 6f73 747b 5649 5349 424c 455f  calhost{VISIBLE_
+00006590: 454e 5452 595f 504f 494e 547d 7469 6e79  ENTRY_POINT}tiny
+000065a0: 6f77 730a 2020 2020 230a 2020 2020 2320  ows.    #.    # 
+000065b0: 5768 656e 2072 756e 6e69 6e67 2061 2063  When running a c
+000065c0: 3263 6765 6f70 6f72 7461 6c20 6170 706c  2cgeoportal appl
+000065d0: 2e20 696e 2064 6562 7567 206d 6f64 6520  . in debug mode 
+000065e0: 2877 6974 6820 606d 616b 6520 7365 7276  (with `make serv
+000065f0: 6560 290a 2020 2020 2320 7468 6520 686f  e`).    # the ho
+00006600: 7374 2068 6173 2074 6f20 6265 2073 6574  st has to be set
+00006610: 2065 7870 6c69 6369 746c 7920 696e 2061   explicitly in a
+00006620: 2076 686f 7374 2065 6e76 6972 6f6e 6d65   vhost environme
+00006630: 6e74 2e0a 2020 2020 2320 7469 6e79 6f77  nt..    # tinyow
+00006640: 735f 686f 7374 3a20 7b56 4953 4942 4c45  s_host: {VISIBLE
+00006650: 5f57 4542 5f48 4f53 547d 0a0a 2020 6170  _WEB_HOST}..  ap
+00006660: 693a 0a20 2020 206f 6763 5f73 6572 7665  i:.    ogc_serve
+00006670: 723a 2027 7b6d 6169 6e5f 6f67 635f 7365  r: '{main_ogc_se
+00006680: 7276 6572 7d27 0a0a 2020 7265 736f 7572  rver}'..  resour
+00006690: 6365 7072 6f78 793a 0a20 2020 2023 204c  ceproxy:.    # L
+000066a0: 6973 7420 6f66 2075 726c 7320 6672 6f6d  ist of urls from
+000066b0: 2077 6869 6368 2069 7420 6973 2073 6166   which it is saf
+000066c0: 6520 746f 206c 6f61 6420 636f 6e74 656e  e to load conten
+000066d0: 740a 2020 2020 7461 7267 6574 733a 207b  t.    targets: {
+000066e0: 7d0a 2020 2020 2320 2020 6578 656d 706c  }.    #   exempl
+000066f0: 6574 6172 6765 746e 616d 653a 2068 7474  etargetname: htt
+00006700: 7073 3a2f 2f77 7777 2e63 616d 7074 6f63  ps://www.camptoc
+00006710: 616d 702e 636f 6d2f 3f70 6172 616d 313d  amp.com/?param1=
+00006720: 2573 2670 6172 616d 323d 2573 0a0a 2020  %s&param2=%s..  
+00006730: 2020 2320 4c69 7374 206f 6620 616c 6c6f    # List of allo
+00006740: 7765 6420 6865 6164 6572 730a 2020 2020  wed headers.    
+00006750: 616c 6c6f 7765 645f 6865 6164 6572 733a  allowed_headers:
+00006760: 0a20 2020 2020 202d 2043 6163 6865 2d43  .      - Cache-C
+00006770: 6f6e 7472 6f6c 0a20 2020 2020 202d 2043  ontrol.      - C
+00006780: 6f6e 7465 6e74 2d45 6e63 6f64 696e 670a  ontent-Encoding.
+00006790: 2020 2020 2020 2d20 436f 6e74 656e 742d        - Content-
+000067a0: 4c61 6e67 7561 6765 0a20 2020 2020 202d  Language.      -
+000067b0: 2043 6f6e 7465 6e74 2d54 7970 650a 2020   Content-Type.  
+000067c0: 2020 2020 2d20 4461 7465 0a20 2020 2020      - Date.     
+000067d0: 202d 2045 5461 670a 2020 2020 2020 2d20   - ETag.      - 
+000067e0: 5661 7279 0a0a 2020 6675 6c6c 7465 7874  Vary..  fulltext
+000067f0: 7365 6172 6368 3a0a 2020 2020 6465 6661  search:.    defa
+00006800: 756c 746c 696d 6974 3a20 3330 0a20 2020  ultlimit: 30.   
+00006810: 206d 6178 6c69 6d69 743a 2032 3030 0a20   maxlimit: 200. 
+00006820: 2020 206c 616e 6775 6167 6573 3a0a 2020     languages:.  
+00006830: 2020 2020 6672 3a20 6672 656e 6368 0a20      fr: french. 
+00006840: 2020 2020 2065 6e3a 2065 6e67 6c69 7368       en: english
+00006850: 0a20 2020 2020 2064 653a 2067 6572 6d61  .      de: germa
+00006860: 6e0a 0a20 2073 6572 7665 7273 3a0a 2020  n..  servers:.  
+00006870: 2020 696e 7465 726e 616c 3a20 6874 7470    internal: http
+00006880: 3a2f 2f6c 6f63 616c 686f 7374 2f0a 2020  ://localhost/.  
+00006890: 2020 6c6f 6361 6c3a 2027 7b56 4953 4942    local: '{VISIB
+000068a0: 4c45 5f57 4542 5f50 524f 544f 434f 4c7d  LE_WEB_PROTOCOL}
+000068b0: 3a2f 2f7b 5649 5349 424c 455f 5745 425f  ://{VISIBLE_WEB_
+000068c0: 484f 5354 7d7b 5649 5349 424c 455f 454e  HOST}{VISIBLE_EN
+000068d0: 5452 595f 504f 494e 547d 270a 2020 2020  TRY_POINT}'.    
+000068e0: 6d61 7073 6572 7665 723a 2027 7b4d 4150  mapserver: '{MAP
+000068f0: 5345 5256 4552 5f55 524c 7d27 0a20 2020  SERVER_URL}'.   
+00006900: 2071 6769 7373 6572 7665 723a 2027 7b51   qgisserver: '{Q
+00006910: 4749 5353 4552 5645 525f 5552 4c7d 270a  GISSERVER_URL}'.
+00006920: 0a20 2068 6f73 745f 666f 7277 6172 645f  .  host_forward_
+00006930: 686f 7374 3a20 5b5d 0a20 2068 6561 6465  host: [].  heade
+00006940: 7273 5f77 6869 7465 6c69 7374 3a20 5b5d  rs_whitelist: []
+00006950: 0a20 2068 6561 6465 7273 5f62 6c61 636b  .  headers_black
+00006960: 6c69 7374 3a20 5b5d 0a0a 2020 2320 5468  list: []..  # Th
+00006970: 6520 2272 6173 7465 7220 7765 6220 7365  e "raster web se
+00006980: 7276 6963 6573 2220 636f 6e66 6967 7572  rvices" configur
+00006990: 6174 696f 6e2e 2053 6565 2074 6865 2022  ation. See the "
+000069a0: 7261 7374 6572 220a 2020 2320 6368 6170  raster".  # chap
+000069b0: 7465 7220 696e 2074 6865 2069 6e74 6567  ter in the integ
+000069c0: 7261 746f 7220 646f 6375 6d65 6e74 6174  rator documentat
+000069d0: 696f 6e2e 0a20 2072 6173 7465 723a 207b  ion..  raster: {
+000069e0: 7d0a 0a20 2023 2074 6865 2022 7665 6374  }..  # the "vect
+000069f0: 6f72 2074 696c 6573 2073 6572 7669 6365  or tiles service
+00006a00: 2220 636f 6e66 6967 7572 6174 696f 6e2e  " configuration.
+00006a10: 2053 6565 2074 6865 2022 7665 6374 6f72   See the "vector
+00006a20: 2074 696c 6573 220a 2020 2320 6368 6170   tiles".  # chap
+00006a30: 7465 7220 696e 2074 6865 2069 6e74 6567  ter in the integ
+00006a40: 7261 746f 7220 646f 6375 6d65 6e74 6174  rator documentat
+00006a50: 696f 6e2e 0a20 2076 6563 746f 725f 7469  ion..  vector_ti
+00006a60: 6c65 733a 207b 7d0a 0a20 2023 2055 7365  les: {}..  # Use
+00006a70: 6420 6279 2065 6e75 6d65 7261 7469 6f6e  d by enumeration
+00006a80: 2069 6e20 7468 6520 7175 6572 7920 6275   in the query bu
+00006a90: 696c 6465 720a 2020 6c61 7965 7273 3a0a  ilder.  layers:.
+00006aa0: 2020 2020 6765 6f6d 6574 7279 5f76 616c      geometry_val
+00006ab0: 6964 6174 696f 6e3a 2054 7275 650a 0a20  idation: True.. 
+00006ac0: 2023 2055 7365 6420 6279 2072 6573 6574   # Used by reset
+00006ad0: 5f70 6173 7377 6f72 6420 616e 6420 7368  _password and sh
+00006ae0: 6f72 7465 6e65 7220 746f 2073 656e 6420  ortener to send 
+00006af0: 656d 6169 6c73 0a20 2073 6d74 703a 0a20  emails.  smtp:. 
+00006b00: 2020 2073 736c 3a20 6661 6c73 650a 2020     ssl: false.  
+00006b10: 2020 7374 6172 7474 6c73 3a20 6661 6c73    starttls: fals
+00006b20: 650a 0a20 2023 2055 7365 6420 746f 2073  e..  # Used to s
+00006b30: 656e 6420 616e 2065 6d61 696c 206f 6e20  end an email on 
+00006b40: 7061 7373 776f 7264 2072 6573 6574 0a20  password reset. 
+00006b50: 2072 6573 6574 5f70 6173 7377 6f72 643a   reset_password:
+00006b60: 207b 7d0a 0a20 2023 2054 6865 2073 686f   {}..  # The sho
+00006b70: 7274 656e 6572 2062 6173 6520 636f 6e66  rtener base conf
+00006b80: 6967 7572 6174 696f 6e0a 2020 7368 6f72  iguration.  shor
+00006b90: 7465 6e65 723a 0a20 2020 2023 2054 6865  tener:.    # The
+00006ba0: 2062 6173 6520 6f66 2063 7265 6174 6564   base of created
+00006bb0: 2055 524c 0a20 2020 2062 6173 655f 7572   URL.    base_ur
+00006bc0: 6c3a 2027 7b56 4953 4942 4c45 5f57 4542  l: '{VISIBLE_WEB
+00006bd0: 5f50 524f 544f 434f 4c7d 3a2f 2f7b 5649  _PROTOCOL}://{VI
+00006be0: 5349 424c 455f 5745 425f 484f 5354 7d7b  SIBLE_WEB_HOST}{
+00006bf0: 5649 5349 424c 455f 454e 5452 595f 504f  VISIBLE_ENTRY_PO
+00006c00: 494e 547d 732f 270a 2020 2020 616c 6c6f  INT}s/'.    allo
+00006c10: 7765 645f 686f 7374 733a 0a20 2020 2020  wed_hosts:.     
+00006c20: 202d 2027 7b56 4953 4942 4c45 5f57 4542   - '{VISIBLE_WEB
+00006c30: 5f48 4f53 547d 270a 2020 2020 6c65 6e67  _HOST}'.    leng
+00006c40: 7468 3a20 340a 0a20 2023 2044 6566 696e  th: 4..  # Defin
+00006c50: 6520 7768 6574 6865 7220 7468 6520 4d61  e whether the Ma
+00006c60: 7053 6572 7665 7220 7072 6f78 7920 7368  pServer proxy sh
+00006c70: 6f75 6c64 2068 6964 6520 7468 6520 4f47  ould hide the OG
+00006c80: 4320 6361 7061 6269 6c69 7469 6573 2e0a  C capabilities..
+00006c90: 2020 6869 6465 5f63 6170 6162 696c 6974    hide_capabilit
+00006ca0: 6965 733a 2066 616c 7365 0a0a 2020 2320  ies: false..  # 
+00006cb0: 466f 7220 7072 696e 7420 7072 6f78 790a  For print proxy.
+00006cc0: 2020 7072 696e 745f 7572 6c3a 2027 7b50    print_url: '{P
+00006cd0: 5249 4e54 5f55 524c 7d27 0a20 2070 7269  RINT_URL}'.  pri
+00006ce0: 6e74 5f67 6574 5f72 6564 6972 6563 743a  nt_get_redirect:
+00006cf0: 2066 616c 7365 2023 2069 6620 7472 7565   false # if true
+00006d00: 2c20 7265 6469 7265 6374 7320 2833 3032  , redirects (302
+00006d10: 2920 6469 7265 6374 6c79 2074 6f20 7468  ) directly to th
+00006d20: 6520 7072 696e 7420 746f 2066 6574 6368  e print to fetch
+00006d30: 2074 6865 2072 6570 6f72 740a 0a20 2064   the report..  d
+00006d40: 6576 7365 7276 6572 5f75 726c 3a20 6874  evserver_url: ht
+00006d50: 7470 3a2f 2f7b 4445 5653 4552 5645 525f  tp://{DEVSERVER_
+00006d60: 484f 5354 7d7b 5649 5349 424c 455f 454e  HOST}{VISIBLE_EN
+00006d70: 5452 595f 504f 494e 547d 0a0a 2020 7064  TRY_POINT}..  pd
+00006d80: 6672 6570 6f72 743a 0a20 2020 2070 7269  freport:.    pri
+00006d90: 6e74 5f75 726c 3a20 277b 5052 494e 545f  nt_url: '{PRINT_
+00006da0: 5552 4c7d 270a 0a20 206c 696e 6775 615f  URL}'..  lingua_
+00006db0: 6578 7472 6163 746f 723a 207b 7d0a 0a20  extractor: {}.. 
+00006dc0: 2063 6f6e 7465 6e74 5f73 6563 7572 6974   content_securit
+00006dd0: 795f 706f 6c69 6379 5f6d 6169 6e5f 6465  y_policy_main_de
+00006de0: 6661 756c 745f 7372 635f 6578 7472 613a  fault_src_extra:
+00006df0: 2027 270a 2020 636f 6e74 656e 745f 7365   ''.  content_se
+00006e00: 6375 7269 7479 5f70 6f6c 6963 795f 6d61  curity_policy_ma
+00006e10: 696e 5f73 6372 6970 745f 7372 635f 6578  in_script_src_ex
+00006e20: 7472 613a 2027 0a20 2020 2068 7474 7073  tra: '.    https
+00006e30: 3a2f 2f6d 6170 732e 676f 6f67 6c65 2e63  ://maps.google.c
+00006e40: 6f6d 2f0a 2020 2020 6874 7470 733a 2f2f  om/.    https://
+00006e50: 6d61 7073 2e67 6f6f 676c 6561 7069 732e  maps.googleapis.
+00006e60: 636f 6d2f 0a20 2020 2068 7474 7073 3a2f  com/.    https:/
+00006e70: 2f77 7777 2e67 6f6f 676c 652d 616e 616c  /www.google-anal
+00006e80: 7974 6963 732e 636f 6d2f 0a20 2020 2068  ytics.com/.    h
+00006e90: 7474 7073 3a2f 2f2a 2e67 6f6f 676c 6574  ttps://*.googlet
+00006ea0: 6167 6d61 6e61 6765 722e 636f 6d2f 270a  agmanager.com/'.
+00006eb0: 2020 636f 6e74 656e 745f 7365 6375 7269    content_securi
+00006ec0: 7479 5f70 6f6c 6963 795f 6d61 696e 5f73  ty_policy_main_s
+00006ed0: 7479 6c65 5f73 7263 5f65 7874 7261 3a20  tyle_src_extra: 
+00006ee0: 270a 2020 2020 6874 7470 733a 2f2f 666f  '.    https://fo
+00006ef0: 6e74 732e 676f 6f67 6c65 6170 6973 2e63  nts.googleapis.c
+00006f00: 6f6d 2f27 0a20 2063 6f6e 7465 6e74 5f73  om/'.  content_s
+00006f10: 6563 7572 6974 795f 706f 6c69 6379 5f6d  ecurity_policy_m
+00006f20: 6169 6e5f 696d 675f 7372 635f 6578 7472  ain_img_src_extr
+00006f30: 613a 2027 0a20 2020 2068 7474 7073 3a2f  a: '.    https:/
+00006f40: 2f2a 2e67 6f6f 676c 652d 616e 616c 7974  /*.google-analyt
+00006f50: 6963 732e 636f 6d2f 0a20 2020 2068 7474  ics.com/.    htt
+00006f60: 7073 3a2f 2f2a 2e67 6f6f 676c 6574 6167  ps://*.googletag
+00006f70: 6d61 6e61 6765 722e 636f 6d2f 270a 2020  manager.com/'.  
+00006f80: 636f 6e74 656e 745f 7365 6375 7269 7479  content_security
+00006f90: 5f70 6f6c 6963 795f 6d61 696e 5f63 6f6e  _policy_main_con
+00006fa0: 6e65 6374 5f73 7263 5f65 7874 7261 3a20  nect_src_extra: 
+00006fb0: 270a 2020 2020 6874 7470 733a 2f2f 2a2e  '.    https://*.
+00006fc0: 676f 6f67 6c65 2d61 6e61 6c79 7469 6373  google-analytics
+00006fd0: 2e63 6f6d 2f0a 2020 2020 6874 7470 733a  .com/.    https:
+00006fe0: 2f2f 2a2e 616e 616c 7974 6963 732e 676f  //*.analytics.go
+00006ff0: 6f67 6c65 2e63 6f6d 2f0a 2020 2020 6874  ogle.com/.    ht
+00007000: 7470 733a 2f2f 2a2e 676f 6f67 6c65 7461  tps://*.googleta
+00007010: 676d 616e 6167 6572 2e63 6f6d 2f27 0a20  gmanager.com/'. 
+00007020: 2063 6f6e 7465 6e74 5f73 6563 7572 6974   content_securit
+00007030: 795f 706f 6c69 6379 5f6d 6169 6e5f 6465  y_policy_main_de
+00007040: 6661 756c 745f 7372 633a 2022 0a20 2020  fault_src: ".   
+00007050: 2027 7365 6c66 270a 2020 2020 6874 7470   'self'.    http
+00007060: 733a 2f2f 2a0a 2020 2020 7b63 6f6e 7465  s://*.    {conte
+00007070: 6e74 5f73 6563 7572 6974 795f 706f 6c69  nt_security_poli
+00007080: 6379 5f6d 6169 6e5f 6465 6661 756c 745f  cy_main_default_
+00007090: 7372 635f 6578 7472 617d 220a 2020 636f  src_extra}".  co
+000070a0: 6e74 656e 745f 7365 6375 7269 7479 5f70  ntent_security_p
+000070b0: 6f6c 6963 795f 6d61 696e 5f73 6372 6970  olicy_main_scrip
+000070c0: 745f 7372 633a 2022 0a20 2020 2027 7365  t_src: ".    'se
+000070d0: 6c66 270a 2020 2020 2775 6e73 6166 652d  lf'.    'unsafe-
+000070e0: 696e 6c69 6e65 270a 2020 2020 6874 7470  inline'.    http
+000070f0: 733a 2f2f 6364 6e2e 706f 6c79 6669 6c6c  s://cdn.polyfill
+00007100: 2e69 6f2f 0a20 2020 207b 636f 6e74 656e  .io/.    {conten
+00007110: 745f 7365 6375 7269 7479 5f70 6f6c 6963  t_security_polic
+00007120: 795f 6d61 696e 5f73 6372 6970 745f 7372  y_main_script_sr
+00007130: 635f 6578 7472 617d 220a 2020 636f 6e74  c_extra}".  cont
+00007140: 656e 745f 7365 6375 7269 7479 5f70 6f6c  ent_security_pol
+00007150: 6963 795f 6d61 696e 5f73 7479 6c65 5f73  icy_main_style_s
+00007160: 7263 3a20 220a 2020 2020 2773 656c 6627  rc: ".    'self'
+00007170: 0a20 2020 2027 756e 7361 6665 2d69 6e6c  .    'unsafe-inl
+00007180: 696e 6527 0a20 2020 207b 636f 6e74 656e  ine'.    {conten
+00007190: 745f 7365 6375 7269 7479 5f70 6f6c 6963  t_security_polic
+000071a0: 795f 6d61 696e 5f73 7479 6c65 5f73 7263  y_main_style_src
+000071b0: 5f65 7874 7261 7d22 0a20 2063 6f6e 7465  _extra}".  conte
+000071c0: 6e74 5f73 6563 7572 6974 795f 706f 6c69  nt_security_poli
+000071d0: 6379 5f6d 6169 6e5f 696d 675f 7372 633a  cy_main_img_src:
+000071e0: 2027 0a20 2020 202a 0a20 2020 2064 6174   '.    *.    dat
+000071f0: 613a 0a20 2020 207b 636f 6e74 656e 745f  a:.    {content_
+00007200: 7365 6375 7269 7479 5f70 6f6c 6963 795f  security_policy_
+00007210: 6d61 696e 5f69 6d67 5f73 7263 5f65 7874  main_img_src_ext
+00007220: 7261 7d27 0a20 2063 6f6e 7465 6e74 5f73  ra}'.  content_s
+00007230: 6563 7572 6974 795f 706f 6c69 6379 5f6d  ecurity_policy_m
+00007240: 6169 6e5f 636f 6e6e 6563 745f 7372 633a  ain_connect_src:
+00007250: 2027 0a20 2020 202a 0a20 2020 207b 636f   '.    *.    {co
+00007260: 6e74 656e 745f 7365 6375 7269 7479 5f70  ntent_security_p
+00007270: 6f6c 6963 795f 6d61 696e 5f63 6f6e 6e65  olicy_main_conne
+00007280: 6374 5f73 7263 5f65 7874 7261 7d27 0a0a  ct_src_extra}'..
+00007290: 2020 636f 6e74 656e 745f 7365 6375 7269    content_securi
+000072a0: 7479 5f70 6f6c 6963 795f 6164 6d69 6e5f  ty_policy_admin_
+000072b0: 6465 6661 756c 745f 7372 635f 6578 7472  default_src_extr
+000072c0: 613a 2027 270a 2020 636f 6e74 656e 745f  a: ''.  content_
+000072d0: 7365 6375 7269 7479 5f70 6f6c 6963 795f  security_policy_
+000072e0: 6164 6d69 6e5f 7363 7269 7074 5f73 7263  admin_script_src
+000072f0: 5f65 7874 7261 3a20 2727 0a20 2063 6f6e  _extra: ''.  con
+00007300: 7465 6e74 5f73 6563 7572 6974 795f 706f  tent_security_po
+00007310: 6c69 6379 5f61 646d 696e 5f73 7479 6c65  licy_admin_style
+00007320: 5f73 7263 5f65 7874 7261 3a20 2727 0a20  _src_extra: ''. 
+00007330: 2063 6f6e 7465 6e74 5f73 6563 7572 6974   content_securit
+00007340: 795f 706f 6c69 6379 5f61 646d 696e 5f69  y_policy_admin_i
+00007350: 6d67 5f73 7263 5f65 7874 7261 3a20 2727  mg_src_extra: ''
+00007360: 0a20 2063 6f6e 7465 6e74 5f73 6563 7572  .  content_secur
+00007370: 6974 795f 706f 6c69 6379 5f61 646d 696e  ity_policy_admin
+00007380: 5f77 6f72 6b65 725f 7372 635f 6578 7472  _worker_src_extr
+00007390: 613a 2027 270a 2020 636f 6e74 656e 745f  a: ''.  content_
+000073a0: 7365 6375 7269 7479 5f70 6f6c 6963 795f  security_policy_
+000073b0: 6164 6d69 6e5f 6465 6661 756c 745f 7372  admin_default_sr
+000073c0: 633a 2022 0a20 2020 2027 7365 6c66 270a  c: ".    'self'.
+000073d0: 2020 2020 7b63 6f6e 7465 6e74 5f73 6563      {content_sec
+000073e0: 7572 6974 795f 706f 6c69 6379 5f61 646d  urity_policy_adm
+000073f0: 696e 5f64 6566 6175 6c74 5f73 7263 5f65  in_default_src_e
+00007400: 7874 7261 7d22 0a20 2063 6f6e 7465 6e74  xtra}".  content
+00007410: 5f73 6563 7572 6974 795f 706f 6c69 6379  _security_policy
+00007420: 5f61 646d 696e 5f73 6372 6970 745f 7372  _admin_script_sr
+00007430: 633a 2022 0a20 2020 2027 7365 6c66 270a  c: ".    'self'.
+00007440: 2020 2020 2775 6e73 6166 652d 696e 6c69      'unsafe-inli
+00007450: 6e65 270a 2020 2020 7b63 6f6e 7465 6e74  ne'.    {content
+00007460: 5f73 6563 7572 6974 795f 706f 6c69 6379  _security_policy
+00007470: 5f61 646d 696e 5f73 6372 6970 745f 7372  _admin_script_sr
+00007480: 635f 6578 7472 617d 220a 2020 636f 6e74  c_extra}".  cont
+00007490: 656e 745f 7365 6375 7269 7479 5f70 6f6c  ent_security_pol
+000074a0: 6963 795f 6164 6d69 6e5f 7374 796c 655f  icy_admin_style_
+000074b0: 7372 633a 2022 0a20 2020 2027 7365 6c66  src: ".    'self
+000074c0: 270a 2020 2020 2775 6e73 6166 652d 696e  '.    'unsafe-in
+000074d0: 6c69 6e65 270a 2020 2020 6874 7470 733a  line'.    https:
+000074e0: 2f2f 7374 6163 6b70 6174 682e 626f 6f74  //stackpath.boot
+000074f0: 7374 7261 7063 646e 2e63 6f6d 2f0a 2020  strapcdn.com/.  
+00007500: 2020 7b63 6f6e 7465 6e74 5f73 6563 7572    {content_secur
+00007510: 6974 795f 706f 6c69 6379 5f61 646d 696e  ity_policy_admin
+00007520: 5f73 7479 6c65 5f73 7263 5f65 7874 7261  _style_src_extra
+00007530: 7d22 0a20 2063 6f6e 7465 6e74 5f73 6563  }".  content_sec
+00007540: 7572 6974 795f 706f 6c69 6379 5f61 646d  urity_policy_adm
+00007550: 696e 5f69 6d67 5f73 7263 3a20 270a 2020  in_img_src: '.  
+00007560: 2020 2a0a 2020 2020 6461 7461 3a0a 2020    *.    data:.  
+00007570: 2020 7b63 6f6e 7465 6e74 5f73 6563 7572    {content_secur
+00007580: 6974 795f 706f 6c69 6379 5f61 646d 696e  ity_policy_admin
+00007590: 5f69 6d67 5f73 7263 5f65 7874 7261 7d27  _img_src_extra}'
+000075a0: 0a20 2063 6f6e 7465 6e74 5f73 6563 7572  .  content_secur
+000075b0: 6974 795f 706f 6c69 6379 5f61 646d 696e  ity_policy_admin
+000075c0: 5f77 6f72 6b65 725f 7372 633a 2022 0a20  _worker_src: ". 
+000075d0: 2020 2027 7365 6c66 270a 2020 2020 626c     'self'.    bl
+000075e0: 6f62 3a0a 2020 2020 7b63 6f6e 7465 6e74  ob:.    {content
+000075f0: 5f73 6563 7572 6974 795f 706f 6c69 6379  _security_policy
+00007600: 5f61 646d 696e 5f77 6f72 6b65 725f 7372  _admin_worker_sr
+00007610: 635f 6578 7472 617d 220a 0a20 2063 6f6e  c_extra}"..  con
+00007620: 7465 6e74 5f73 6563 7572 6974 795f 706f  tent_security_po
+00007630: 6c69 6379 5f61 7069 6865 6c70 5f64 6566  licy_apihelp_def
+00007640: 6175 6c74 5f73 7263 5f65 7874 7261 3a20  ault_src_extra: 
+00007650: 2727 0a20 2063 6f6e 7465 6e74 5f73 6563  ''.  content_sec
+00007660: 7572 6974 795f 706f 6c69 6379 5f61 7069  urity_policy_api
+00007670: 6865 6c70 5f73 6372 6970 745f 7372 635f  help_script_src_
+00007680: 6578 7472 613a 2027 270a 2020 636f 6e74  extra: ''.  cont
+00007690: 656e 745f 7365 6375 7269 7479 5f70 6f6c  ent_security_pol
+000076a0: 6963 795f 6170 6968 656c 705f 7374 796c  icy_apihelp_styl
+000076b0: 655f 7372 635f 6578 7472 613a 2027 270a  e_src_extra: ''.
+000076c0: 2020 636f 6e74 656e 745f 7365 6375 7269    content_securi
+000076d0: 7479 5f70 6f6c 6963 795f 6170 6968 656c  ty_policy_apihel
+000076e0: 705f 696d 675f 7372 635f 6578 7472 613a  p_img_src_extra:
+000076f0: 2027 270a 2020 636f 6e74 656e 745f 7365   ''.  content_se
+00007700: 6375 7269 7479 5f70 6f6c 6963 795f 6170  curity_policy_ap
+00007710: 6968 656c 705f 636f 6e6e 6563 745f 7372  ihelp_connect_sr
+00007720: 635f 6578 7472 613a 2027 270a 2020 636f  c_extra: ''.  co
+00007730: 6e74 656e 745f 7365 6375 7269 7479 5f70  ntent_security_p
+00007740: 6f6c 6963 795f 6170 6968 656c 705f 6465  olicy_apihelp_de
+00007750: 6661 756c 745f 7372 633a 2022 0a20 2020  fault_src: ".   
+00007760: 2027 7365 6c66 270a 2020 2020 6874 7470   'self'.    http
+00007770: 733a 2f2f 2a0a 2020 2020 7b63 6f6e 7465  s://*.    {conte
+00007780: 6e74 5f73 6563 7572 6974 795f 706f 6c69  nt_security_poli
+00007790: 6379 5f61 7069 6865 6c70 5f64 6566 6175  cy_apihelp_defau
+000077a0: 6c74 5f73 7263 5f65 7874 7261 7d22 0a20  lt_src_extra}". 
+000077b0: 2063 6f6e 7465 6e74 5f73 6563 7572 6974   content_securit
+000077c0: 795f 706f 6c69 6379 5f61 7069 6865 6c70  y_policy_apihelp
+000077d0: 5f73 6372 6970 745f 7372 633a 2022 0a20  _script_src: ". 
+000077e0: 2020 2027 7365 6c66 270a 2020 2020 2775     'self'.    'u
+000077f0: 6e73 6166 652d 696e 6c69 6e65 270a 2020  nsafe-inline'.  
+00007800: 2020 2775 6e73 6166 652d 6576 616c 270a    'unsafe-eval'.
+00007810: 2020 2020 6874 7470 733a 2f2f 6364 6e2e      https://cdn.
+00007820: 706f 6c79 6669 6c6c 2e69 6f2f 0a20 2020  polyfill.io/.   
+00007830: 207b 636f 6e74 656e 745f 7365 6375 7269   {content_securi
+00007840: 7479 5f70 6f6c 6963 795f 6170 6968 656c  ty_policy_apihel
+00007850: 705f 7363 7269 7074 5f73 7263 5f65 7874  p_script_src_ext
+00007860: 7261 7d22 0a20 2063 6f6e 7465 6e74 5f73  ra}".  content_s
+00007870: 6563 7572 6974 795f 706f 6c69 6379 5f61  ecurity_policy_a
+00007880: 7069 6865 6c70 5f73 7479 6c65 5f73 7263  pihelp_style_src
+00007890: 3a20 220a 2020 2020 2773 656c 6627 0a20  : ".    'self'. 
+000078a0: 2020 2027 756e 7361 6665 2d69 6e6c 696e     'unsafe-inlin
+000078b0: 6527 0a20 2020 2068 7474 7073 3a2f 2f73  e'.    https://s
+000078c0: 7461 636b 7061 7468 2e62 6f6f 7473 7472  tackpath.bootstr
+000078d0: 6170 6364 6e2e 636f 6d2f 0a20 2020 207b  apcdn.com/.    {
+000078e0: 636f 6e74 656e 745f 7365 6375 7269 7479  content_security
+000078f0: 5f70 6f6c 6963 795f 6170 6968 656c 705f  _policy_apihelp_
+00007900: 7374 796c 655f 7372 635f 6578 7472 617d  style_src_extra}
+00007910: 220a 2020 636f 6e74 656e 745f 7365 6375  ".  content_secu
+00007920: 7269 7479 5f70 6f6c 6963 795f 6170 6968  rity_policy_apih
+00007930: 656c 705f 696d 675f 7372 633a 2027 0a20  elp_img_src: '. 
+00007940: 2020 202a 0a20 2020 2064 6174 613a 0a20     *.    data:. 
+00007950: 2020 207b 636f 6e74 656e 745f 7365 6375     {content_secu
+00007960: 7269 7479 5f70 6f6c 6963 795f 6170 6968  rity_policy_apih
+00007970: 656c 705f 696d 675f 7372 635f 6578 7472  elp_img_src_extr
+00007980: 617d 270a 2020 636f 6e74 656e 745f 7365  a}'.  content_se
+00007990: 6375 7269 7479 5f70 6f6c 6963 795f 6170  curity_policy_ap
+000079a0: 6968 656c 705f 636f 6e6e 6563 745f 7372  ihelp_connect_sr
+000079b0: 633a 2027 0a20 2020 202a 0a20 2020 207b  c: '.    *.    {
+000079c0: 636f 6e74 656e 745f 7365 6375 7269 7479  content_security
+000079d0: 5f70 6f6c 6963 795f 6170 6968 656c 705f  _policy_apihelp_
+000079e0: 636f 6e6e 6563 745f 7372 635f 6578 7472  connect_src_extr
+000079f0: 617d 270a 0a20 2063 6f6e 7465 6e74 5f73  a}'..  content_s
+00007a00: 6563 7572 6974 795f 706f 6c69 6379 5f63  ecurity_policy_c
+00007a10: 3263 5f64 6566 6175 6c74 5f73 7263 5f65  2c_default_src_e
+00007a20: 7874 7261 3a20 2727 0a20 2063 6f6e 7465  xtra: ''.  conte
+00007a30: 6e74 5f73 6563 7572 6974 795f 706f 6c69  nt_security_poli
+00007a40: 6379 5f63 3263 5f73 6372 6970 745f 7372  cy_c2c_script_sr
+00007a50: 635f 6578 7472 613a 2027 270a 2020 636f  c_extra: ''.  co
+00007a60: 6e74 656e 745f 7365 6375 7269 7479 5f70  ntent_security_p
+00007a70: 6f6c 6963 795f 6332 635f 7374 796c 655f  olicy_c2c_style_
+00007a80: 7372 635f 6578 7472 613a 2027 270a 2020  src_extra: ''.  
+00007a90: 636f 6e74 656e 745f 7365 6375 7269 7479  content_security
+00007aa0: 5f70 6f6c 6963 795f 6332 635f 6465 6661  _policy_c2c_defa
+00007ab0: 756c 745f 7372 633a 2022 0a20 2020 2027  ult_src: ".    '
+00007ac0: 7365 6c66 270a 2020 2020 7b63 6f6e 7465  self'.    {conte
+00007ad0: 6e74 5f73 6563 7572 6974 795f 706f 6c69  nt_security_poli
+00007ae0: 6379 5f63 3263 5f64 6566 6175 6c74 5f73  cy_c2c_default_s
+00007af0: 7263 5f65 7874 7261 7d22 0a20 2063 6f6e  rc_extra}".  con
+00007b00: 7465 6e74 5f73 6563 7572 6974 795f 706f  tent_security_po
+00007b10: 6c69 6379 5f63 3263 5f73 6372 6970 745f  licy_c2c_script_
+00007b20: 7372 633a 2022 0a20 2020 2027 7365 6c66  src: ".    'self
+00007b30: 270a 2020 2020 7b63 6f6e 7465 6e74 5f73  '.    {content_s
+00007b40: 6563 7572 6974 795f 706f 6c69 6379 5f63  ecurity_policy_c
+00007b50: 3263 5f73 6372 6970 745f 7372 635f 6578  2c_script_src_ex
+00007b60: 7472 617d 220a 2020 636f 6e74 656e 745f  tra}".  content_
+00007b70: 7365 6375 7269 7479 5f70 6f6c 6963 795f  security_policy_
+00007b80: 6332 635f 7374 796c 655f 7372 633a 2022  c2c_style_src: "
+00007b90: 0a20 2020 2027 7365 6c66 270a 2020 2020  .    'self'.    
+00007ba0: 2775 6e73 6166 652d 696e 6c69 6e65 270a  'unsafe-inline'.
+00007bb0: 2020 2020 6874 7470 733a 2f2f 7374 6163      https://stac
+00007bc0: 6b70 6174 682e 626f 6f74 7374 7261 7063  kpath.bootstrapc
+00007bd0: 646e 2e63 6f6d 2f0a 2020 2020 7b63 6f6e  dn.com/.    {con
+00007be0: 7465 6e74 5f73 6563 7572 6974 795f 706f  tent_security_po
+00007bf0: 6c69 6379 5f63 3263 5f73 7479 6c65 5f73  licy_c2c_style_s
+00007c00: 7263 5f65 7874 7261 7d22 0a0a 2020 636f  rc_extra}"..  co
+00007c10: 6e74 656e 745f 7365 6375 7269 7479 5f70  ntent_security_p
+00007c20: 6f6c 6963 795f 6966 7261 6d65 5f61 7069  olicy_iframe_api
+00007c30: 5f66 7261 6d65 5f61 6e63 6573 746f 7273  _frame_ancestors
+00007c40: 3a20 2227 7365 6c66 2722 0a0a 2020 676c  : "'self'"..  gl
+00007c50: 6f62 616c 5f68 6561 6465 7273 3a0a 2020  obal_headers:.  
+00007c60: 2020 2d20 7061 7474 6572 6e3a 2027 5e2f    - pattern: '^/
+00007c70: 6164 6d69 6e2f 2e2a 270a 2020 2020 2020  admin/.*'.      
+00007c80: 6865 6164 6572 733a 2026 6332 6367 656f  headers: &c2cgeo
+00007c90: 666f 726d 5f68 6561 6465 7273 0a20 2020  form_headers.   
+00007ca0: 2020 2020 2058 2d46 7261 6d65 2d4f 7074       X-Frame-Opt
+00007cb0: 696f 6e73 3a20 5341 4d45 4f52 4947 494e  ions: SAMEORIGIN
+00007cc0: 0a20 2020 2020 2020 2058 2d58 7373 2d50  .        X-Xss-P
+00007cd0: 726f 7465 6374 696f 6e3a 2031 3b20 6d6f  rotection: 1; mo
+00007ce0: 6465 3d62 6c6f 636b 0a20 2020 2020 2020  de=block.       
+00007cf0: 2058 2d43 6f6e 7465 6e74 2d54 7970 652d   X-Content-Type-
+00007d00: 4f70 7469 6f6e 733a 206e 6f73 6e69 6666  Options: nosniff
+00007d10: 0a20 2020 2020 2020 2052 6566 6572 7265  .        Referre
+00007d20: 722d 506f 6c69 6379 3a20 7361 6d65 2d6f  r-Policy: same-o
+00007d30: 7269 6769 6e0a 2020 2020 2020 2020 5374  rigin.        St
+00007d40: 7269 6374 2d54 7261 6e73 706f 7274 2d53  rict-Transport-S
+00007d50: 6563 7572 6974 793a 206d 6178 2d61 6765  ecurity: max-age
+00007d60: 3d33 3135 3336 3030 303b 2069 6e63 6c75  =31536000; inclu
+00007d70: 6465 5375 6244 6f6d 6169 6e73 0a20 2020  deSubDomains.   
+00007d80: 2020 2020 2043 6f6e 7465 6e74 2d53 6563       Content-Sec
+00007d90: 7572 6974 792d 506f 6c69 6379 3a20 2764  urity-Policy: 'd
+00007da0: 6566 6175 6c74 2d73 7263 207b 636f 6e74  efault-src {cont
+00007db0: 656e 745f 7365 6375 7269 7479 5f70 6f6c  ent_security_pol
+00007dc0: 6963 795f 6164 6d69 6e5f 6465 6661 756c  icy_admin_defaul
+00007dd0: 745f 7372 637d 3b0a 2020 2020 2020 2020  t_src};.        
+00007de0: 2020 7363 7269 7074 2d73 7263 207b 636f    script-src {co
+00007df0: 6e74 656e 745f 7365 6375 7269 7479 5f70  ntent_security_p
+00007e00: 6f6c 6963 795f 6164 6d69 6e5f 7363 7269  olicy_admin_scri
+00007e10: 7074 5f73 7263 7d3b 0a20 2020 2020 2020  pt_src};.       
+00007e20: 2020 2073 7479 6c65 2d73 7263 207b 636f     style-src {co
+00007e30: 6e74 656e 745f 7365 6375 7269 7479 5f70  ntent_security_p
+00007e40: 6f6c 6963 795f 6164 6d69 6e5f 7374 796c  olicy_admin_styl
+00007e50: 655f 7372 637d 3b0a 2020 2020 2020 2020  e_src};.        
+00007e60: 2020 696d 672d 7372 6320 7b63 6f6e 7465    img-src {conte
+00007e70: 6e74 5f73 6563 7572 6974 795f 706f 6c69  nt_security_poli
+00007e80: 6379 5f61 646d 696e 5f69 6d67 5f73 7263  cy_admin_img_src
+00007e90: 7d3b 0a20 2020 2020 2020 2020 2077 6f72  };.          wor
+00007ea0: 6b65 722d 7372 6320 7b63 6f6e 7465 6e74  ker-src {content
+00007eb0: 5f73 6563 7572 6974 795f 706f 6c69 6379  _security_policy
+00007ec0: 5f61 646d 696e 5f77 6f72 6b65 725f 7372  _admin_worker_sr
+00007ed0: 637d 270a 2020 2020 2d20 7061 7474 6572  c}'.    - patter
+00007ee0: 6e3a 2027 5e2f 6765 7469 7466 6978 6564  n: '^/getitfixed
+00007ef0: 2e2a 270a 2020 2020 2020 6865 6164 6572  .*'.      header
+00007f00: 733a 202a 6332 6367 656f 666f 726d 5f68  s: *c2cgeoform_h
+00007f10: 6561 6465 7273 0a20 2020 202d 2070 6174  eaders.    - pat
+00007f20: 7465 726e 3a20 275e 2f73 7461 7469 632f  tern: '^/static/
+00007f30: 2e2a 270a 2020 2020 2020 6865 6164 6572  .*'.      header
+00007f40: 733a 0a20 2020 2020 2020 2041 6363 6573  s:.        Acces
+00007f50: 732d 436f 6e74 726f 6c2d 416c 6c6f 772d  s-Control-Allow-
+00007f60: 4f72 6967 696e 3a20 272a 270a 2020 2020  Origin: '*'.    
+00007f70: 2020 2020 4163 6365 7373 2d43 6f6e 7472      Access-Contr
+00007f80: 6f6c 2d41 6c6c 6f77 2d48 6561 6465 7273  ol-Allow-Headers
+00007f90: 3a20 582d 5265 7175 6573 7465 642d 5769  : X-Requested-Wi
+00007fa0: 7468 2c20 436f 6e74 656e 742d 5479 7065  th, Content-Type
+00007fb0: 0a20 2020 202d 2070 6174 7465 726e 3a20  .    - pattern: 
+00007fc0: 275e 2f73 7461 7469 632d 6e67 656f 2f2e  '^/static-ngeo/.
+00007fd0: 2a27 0a20 2020 2020 2068 6561 6465 7273  *'.      headers
+00007fe0: 3a0a 2020 2020 2020 2020 4163 6365 7373  :.        Access
+00007ff0: 2d43 6f6e 7472 6f6c 2d41 6c6c 6f77 2d4f  -Control-Allow-O
+00008000: 7269 6769 6e3a 2027 2a27 0a20 2020 2020  rigin: '*'.     
+00008010: 2020 2041 6363 6573 732d 436f 6e74 726f     Access-Contro
+00008020: 6c2d 416c 6c6f 772d 4865 6164 6572 733a  l-Allow-Headers:
+00008030: 2058 2d52 6571 7565 7374 6564 2d57 6974   X-Requested-Wit
+00008040: 682c 2043 6f6e 7465 6e74 2d54 7970 650a  h, Content-Type.
+00008050: 2020 2020 2d20 7061 7474 6572 6e3a 2027      - pattern: '
+00008060: 5e2f 7374 6174 6963 2d67 656f 6d61 7066  ^/static-geomapf
+00008070: 6973 682f 2e2a 270a 2020 2020 2020 6865  ish/.*'.      he
+00008080: 6164 6572 733a 0a20 2020 2020 2020 2041  aders:.        A
+00008090: 6363 6573 732d 436f 6e74 726f 6c2d 416c  ccess-Control-Al
+000080a0: 6c6f 772d 4f72 6967 696e 3a20 272a 270a  low-Origin: '*'.
+000080b0: 2020 2020 2020 2020 4163 6365 7373 2d43          Access-C
+000080c0: 6f6e 7472 6f6c 2d41 6c6c 6f77 2d48 6561  ontrol-Allow-Hea
+000080d0: 6465 7273 3a20 582d 5265 7175 6573 7465  ders: X-Requeste
+000080e0: 642d 5769 7468 2c20 436f 6e74 656e 742d  d-With, Content-
+000080f0: 5479 7065 0a20 2020 202d 2070 6174 7465  Type.    - patte
+00008100: 726e 3a20 275e 2f63 3263 2427 0a20 2020  rn: '^/c2c$'.   
+00008110: 2020 2068 6561 6465 7273 3a0a 2020 2020     headers:.    
+00008120: 2020 2020 436f 6e74 656e 742d 5365 6375      Content-Secu
+00008130: 7269 7479 2d50 6f6c 6963 793a 2027 6465  rity-Policy: 'de
+00008140: 6661 756c 742d 7372 6320 7b63 6f6e 7465  fault-src {conte
+00008150: 6e74 5f73 6563 7572 6974 795f 706f 6c69  nt_security_poli
+00008160: 6379 5f63 3263 5f64 6566 6175 6c74 5f73  cy_c2c_default_s
+00008170: 7263 7d3b 0a20 2020 2020 2020 2020 2073  rc};.          s
+00008180: 6372 6970 742d 7372 6320 7b63 6f6e 7465  cript-src {conte
+00008190: 6e74 5f73 6563 7572 6974 795f 706f 6c69  nt_security_poli
+000081a0: 6379 5f63 3263 5f73 6372 6970 745f 7372  cy_c2c_script_sr
+000081b0: 637d 3b0a 2020 2020 2020 2020 2020 7374  c};.          st
+000081c0: 796c 652d 7372 6320 7b63 6f6e 7465 6e74  yle-src {content
+000081d0: 5f73 6563 7572 6974 795f 706f 6c69 6379  _security_policy
+000081e0: 5f63 3263 5f73 7479 6c65 5f73 7263 7d3b  _c2c_style_src};
+000081f0: 270a 2020 2020 2d20 7061 7474 6572 6e3a  '.    - pattern:
+00008200: 2027 5e2f 6332 632f 2e2a 270a 2020 2020   '^/c2c/.*'.    
+00008210: 2020 6865 6164 6572 733a 0a20 2020 2020    headers:.     
+00008220: 2020 2043 6f6e 7465 6e74 2d53 6563 7572     Content-Secur
+00008230: 6974 792d 506f 6c69 6379 3a20 2764 6566  ity-Policy: 'def
+00008240: 6175 6c74 2d73 7263 207b 636f 6e74 656e  ault-src {conten
+00008250: 745f 7365 6375 7269 7479 5f70 6f6c 6963  t_security_polic
+00008260: 795f 6332 635f 6465 6661 756c 745f 7372  y_c2c_default_sr
+00008270: 637d 3b0a 2020 2020 2020 2020 2020 7363  c};.          sc
+00008280: 7269 7074 2d73 7263 207b 636f 6e74 656e  ript-src {conten
+00008290: 745f 7365 6375 7269 7479 5f70 6f6c 6963  t_security_polic
+000082a0: 795f 6332 635f 7363 7269 7074 5f73 7263  y_c2c_script_src
+000082b0: 7d3b 0a20 2020 2020 2020 2020 2073 7479  };.          sty
+000082c0: 6c65 2d73 7263 207b 636f 6e74 656e 745f  le-src {content_
+000082d0: 7365 6375 7269 7479 5f70 6f6c 6963 795f  security_policy_
+000082e0: 6332 635f 7374 796c 655f 7372 637d 3b27  c2c_style_src};'
+000082f0: 0a20 2020 202d 2070 6174 7465 726e 3a20  .    - pattern: 
+00008300: 275e 2f69 6672 616d 655f 6170 6928 2f74  '^/iframe_api(/t
+00008310: 6865 6d65 2f2e 2a29 3f24 270a 2020 2020  heme/.*)?$'.    
+00008320: 2020 6865 6164 6572 733a 0a20 2020 2020    headers:.     
+00008330: 2020 2043 6f6e 7465 6e74 2d53 6563 7572     Content-Secur
+00008340: 6974 792d 506f 6c69 6379 3a20 2764 6566  ity-Policy: 'def
+00008350: 6175 6c74 2d73 7263 207b 636f 6e74 656e  ault-src {conten
+00008360: 745f 7365 6375 7269 7479 5f70 6f6c 6963  t_security_polic
+00008370: 795f 6d61 696e 5f64 6566 6175 6c74 5f73  y_main_default_s
+00008380: 7263 7d3b 0a20 2020 2020 2020 2020 2073  rc};.          s
+00008390: 6372 6970 742d 7372 6320 7b63 6f6e 7465  cript-src {conte
+000083a0: 6e74 5f73 6563 7572 6974 795f 706f 6c69  nt_security_poli
+000083b0: 6379 5f6d 6169 6e5f 7363 7269 7074 5f73  cy_main_script_s
+000083c0: 7263 7d3b 0a20 2020 2020 2020 2020 2073  rc};.          s
+000083d0: 7479 6c65 2d73 7263 207b 636f 6e74 656e  tyle-src {conten
+000083e0: 745f 7365 6375 7269 7479 5f70 6f6c 6963  t_security_polic
+000083f0: 795f 6d61 696e 5f73 7479 6c65 5f73 7263  y_main_style_src
+00008400: 7d3b 0a20 2020 2020 2020 2020 2069 6d67  };.          img
+00008410: 2d73 7263 207b 636f 6e74 656e 745f 7365  -src {content_se
+00008420: 6375 7269 7479 5f70 6f6c 6963 795f 6d61  curity_policy_ma
+00008430: 696e 5f69 6d67 5f73 7263 7d3b 0a20 2020  in_img_src};.   
+00008440: 2020 2020 2020 2063 6f6e 6e65 6374 2d73         connect-s
+00008450: 7263 207b 636f 6e74 656e 745f 7365 6375  rc {content_secu
+00008460: 7269 7479 5f70 6f6c 6963 795f 6d61 696e  rity_policy_main
+00008470: 5f63 6f6e 6e65 6374 5f73 7263 7d3b 0a20  _connect_src};. 
+00008480: 2020 2020 2020 2020 2066 7261 6d65 2d61           frame-a
+00008490: 6e63 6573 746f 7273 207b 636f 6e74 656e  ncestors {conten
+000084a0: 745f 7365 6375 7269 7479 5f70 6f6c 6963  t_security_polic
+000084b0: 795f 6966 7261 6d65 5f61 7069 5f66 7261  y_iframe_api_fra
+000084c0: 6d65 5f61 6e63 6573 746f 7273 7d3b 270a  me_ancestors};'.
+000084d0: 0a20 2023 2043 6f6e 7472 6f6c 2074 6865  .  # Control the
+000084e0: 2048 5454 5020 6865 6164 6572 730a 2020   HTTP headers.  
+000084f0: 6865 6164 6572 733a 0a20 2020 2064 796e  headers:.    dyn
+00008500: 616d 6963 3a20 2668 6561 6465 720a 2020  amic: &header.  
+00008510: 2020 2020 6361 6368 655f 636f 6e74 726f      cache_contro
+00008520: 6c5f 6d61 785f 6167 653a 2036 3030 2023  l_max_age: 600 #
+00008530: 2031 3020 6d69 6e75 7465 730a 2020 2020   10 minutes.    
+00008540: 2020 6361 6368 655f 636f 6e74 726f 6c5f    cache_control_
+00008550: 6d61 785f 6167 655f 6e6f 6361 6368 653a  max_age_nocache:
+00008560: 2031 3020 2320 3130 2073 6563 6f6e 6473   10 # 10 seconds
+00008570: 2c20 746f 2061 766f 6964 2074 6f6f 206d  , to avoid too m
+00008580: 616e 7920 6361 6c6c 0a20 2020 2020 2061  any call.      a
+00008590: 6363 6573 735f 636f 6e74 726f 6c5f 6d61  ccess_control_ma
+000085a0: 785f 6167 653a 2036 3030 2023 2031 3020  x_age: 600 # 10 
+000085b0: 6d69 6e75 7465 730a 2020 2020 2020 6163  minutes.      ac
+000085c0: 6365 7373 5f63 6f6e 7472 6f6c 5f61 6c6c  cess_control_all
+000085d0: 6f77 5f6f 7269 6769 6e3a 0a20 2020 2020  ow_origin:.     
+000085e0: 2020 202d 2027 2a27 0a20 2020 2069 6e64     - '*'.    ind
+000085f0: 6578 3a0a 2020 2020 2020 3c3c 3a20 2a68  ex:.      <<: *h
+00008600: 6561 6465 720a 2020 2020 2020 6865 6164  eader.      head
+00008610: 6572 733a 2026 7365 635f 6865 6164 6572  ers: &sec_header
+00008620: 730a 2020 2020 2020 2020 582d 4672 616d  s.        X-Fram
+00008630: 652d 4f70 7469 6f6e 733a 2053 414d 454f  e-Options: SAMEO
+00008640: 5249 4749 4e0a 2020 2020 2020 2020 582d  RIGIN.        X-
+00008650: 5873 732d 5072 6f74 6563 7469 6f6e 3a20  Xss-Protection: 
+00008660: 313b 206d 6f64 653d 626c 6f63 6b0a 2020  1; mode=block.  
+00008670: 2020 2020 2020 582d 436f 6e74 656e 742d        X-Content-
+00008680: 5479 7065 2d4f 7074 696f 6e73 3a20 6e6f  Type-Options: no
+00008690: 736e 6966 660a 2020 2020 2020 2020 5265  sniff.        Re
+000086a0: 6665 7272 6572 2d50 6f6c 6963 793a 206f  ferrer-Policy: o
+000086b0: 7269 6769 6e0a 2020 2020 2020 2020 5374  rigin.        St
+000086c0: 7269 6374 2d54 7261 6e73 706f 7274 2d53  rict-Transport-S
+000086d0: 6563 7572 6974 793a 206d 6178 2d61 6765  ecurity: max-age
+000086e0: 3d33 3135 3336 3030 303b 2069 6e63 6c75  =31536000; inclu
+000086f0: 6465 5375 6244 6f6d 6169 6e73 0a20 2020  deSubDomains.   
+00008700: 2020 2020 2043 6f6e 7465 6e74 2d53 6563       Content-Sec
+00008710: 7572 6974 792d 506f 6c69 6379 3a20 2764  urity-Policy: 'd
+00008720: 6566 6175 6c74 2d73 7263 207b 636f 6e74  efault-src {cont
+00008730: 656e 745f 7365 6375 7269 7479 5f70 6f6c  ent_security_pol
+00008740: 6963 795f 6d61 696e 5f64 6566 6175 6c74  icy_main_default
+00008750: 5f73 7263 7d3b 0a20 2020 2020 2020 2020  _src};.         
+00008760: 2073 6372 6970 742d 7372 6320 7b63 6f6e   script-src {con
+00008770: 7465 6e74 5f73 6563 7572 6974 795f 706f  tent_security_po
+00008780: 6c69 6379 5f6d 6169 6e5f 7363 7269 7074  licy_main_script
+00008790: 5f73 7263 7d3b 0a20 2020 2020 2020 2020  _src};.         
+000087a0: 2073 7479 6c65 2d73 7263 207b 636f 6e74   style-src {cont
+000087b0: 656e 745f 7365 6375 7269 7479 5f70 6f6c  ent_security_pol
+000087c0: 6963 795f 6d61 696e 5f73 7479 6c65 5f73  icy_main_style_s
+000087d0: 7263 7d3b 0a20 2020 2020 2020 2020 2069  rc};.          i
+000087e0: 6d67 2d73 7263 207b 636f 6e74 656e 745f  mg-src {content_
+000087f0: 7365 6375 7269 7479 5f70 6f6c 6963 795f  security_policy_
+00008800: 6d61 696e 5f69 6d67 5f73 7263 7d3b 0a20  main_img_src};. 
+00008810: 2020 2020 2020 2020 2063 6f6e 6e65 6374           connect
+00008820: 2d73 7263 207b 636f 6e74 656e 745f 7365  -src {content_se
+00008830: 6375 7269 7479 5f70 6f6c 6963 795f 6d61  curity_policy_ma
+00008840: 696e 5f63 6f6e 6e65 6374 5f73 7263 7d27  in_connect_src}'
+00008850: 0a20 2020 2061 7069 3a20 2a68 6561 6465  .    api: *heade
+00008860: 720a 2020 2020 6170 6968 656c 703a 0a20  r.    apihelp:. 
+00008870: 2020 2020 203c 3c3a 202a 6865 6164 6572       <<: *header
+00008880: 0a20 2020 2020 2068 6561 6465 7273 3a0a  .      headers:.
+00008890: 2020 2020 2020 2020 3c3c 3a20 2a73 6563          <<: *sec
+000088a0: 5f68 6561 6465 7273 0a20 2020 2020 2020  _headers.       
+000088b0: 2043 6f6e 7465 6e74 2d53 6563 7572 6974   Content-Securit
+000088c0: 792d 506f 6c69 6379 3a20 2764 6566 6175  y-Policy: 'defau
+000088d0: 6c74 2d73 7263 207b 636f 6e74 656e 745f  lt-src {content_
+000088e0: 7365 6375 7269 7479 5f70 6f6c 6963 795f  security_policy_
+000088f0: 6170 6968 656c 705f 6465 6661 756c 745f  apihelp_default_
+00008900: 7372 637d 3b0a 2020 2020 2020 2020 2020  src};.          
+00008910: 7363 7269 7074 2d73 7263 207b 636f 6e74  script-src {cont
+00008920: 656e 745f 7365 6375 7269 7479 5f70 6f6c  ent_security_pol
+00008930: 6963 795f 6170 6968 656c 705f 7363 7269  icy_apihelp_scri
+00008940: 7074 5f73 7263 7d3b 0a20 2020 2020 2020  pt_src};.       
+00008950: 2020 2073 7479 6c65 2d73 7263 207b 636f     style-src {co
+00008960: 6e74 656e 745f 7365 6375 7269 7479 5f70  ntent_security_p
+00008970: 6f6c 6963 795f 6170 6968 656c 705f 7374  olicy_apihelp_st
+00008980: 796c 655f 7372 637d 3b0a 2020 2020 2020  yle_src};.      
+00008990: 2020 2020 696d 672d 7372 6320 7b63 6f6e      img-src {con
+000089a0: 7465 6e74 5f73 6563 7572 6974 795f 706f  tent_security_po
+000089b0: 6c69 6379 5f61 7069 6865 6c70 5f69 6d67  licy_apihelp_img
+000089c0: 5f73 7263 7d3b 0a20 2020 2020 2020 2020  _src};.         
+000089d0: 2063 6f6e 6e65 6374 2d73 7263 207b 636f   connect-src {co
+000089e0: 6e74 656e 745f 7365 6375 7269 7479 5f70  ntent_security_p
+000089f0: 6f6c 6963 795f 6170 6968 656c 705f 636f  olicy_apihelp_co
+00008a00: 6e6e 6563 745f 7372 637d 270a 2020 2020  nnect_src}'.    
+00008a10: 7072 6f66 696c 653a 202a 6865 6164 6572  profile: *header
+00008a20: 0a20 2020 2072 6173 7465 723a 202a 6865  .    raster: *he
+00008a30: 6164 6572 0a20 2020 2076 6563 746f 725f  ader.    vector_
+00008a40: 7469 6c65 733a 202a 6865 6164 6572 0a20  tiles: *header. 
+00008a50: 2020 2065 7272 6f72 3a20 2a68 6561 6465     error: *heade
+00008a60: 720a 2020 2020 7468 656d 6573 3a20 2661  r.    themes: &a
+00008a70: 7574 685f 6865 6164 6572 0a20 2020 2020  uth_header.     
+00008a80: 2063 6163 6865 5f63 6f6e 7472 6f6c 5f6d   cache_control_m
+00008a90: 6178 5f61 6765 3a20 3630 3020 2320 3130  ax_age: 600 # 10
+00008aa0: 206d 696e 7574 6573 0a20 2020 2020 2063   minutes.      c
+00008ab0: 6163 6865 5f63 6f6e 7472 6f6c 5f6d 6178  ache_control_max
+00008ac0: 5f61 6765 5f6e 6f63 6163 6865 3a20 3130  _age_nocache: 10
+00008ad0: 2023 2031 3020 7365 636f 6e64 732c 2074   # 10 seconds, t
+00008ae0: 6f20 6176 6f69 6420 746f 6f20 6d61 6e79  o avoid too many
+00008af0: 2063 616c 6c0a 2020 2020 2020 6163 6365   call.      acce
+00008b00: 7373 5f63 6f6e 7472 6f6c 5f6d 6178 5f61  ss_control_max_a
+00008b10: 6765 3a20 3630 3020 2320 3130 206d 696e  ge: 600 # 10 min
+00008b20: 7574 6573 0a20 2020 2020 2061 6363 6573  utes.      acces
+00008b30: 735f 636f 6e74 726f 6c5f 616c 6c6f 775f  s_control_allow_
+00008b40: 6f72 6967 696e 3a0a 2020 2020 2020 2020  origin:.        
+00008b50: 2d20 277b 5649 5349 424c 455f 5745 425f  - '{VISIBLE_WEB_
+00008b60: 5052 4f54 4f43 4f4c 7d3a 2f2f 7b56 4953  PROTOCOL}://{VIS
+00008b70: 4942 4c45 5f57 4542 5f48 4f53 547d 270a  IBLE_WEB_HOST}'.
+00008b80: 2020 2020 2020 2020 2d20 272a 270a 2020          - '*'.  
+00008b90: 2020 2020 6865 6164 6572 733a 0a20 2020      headers:.   
+00008ba0: 2020 2020 2053 7472 6963 742d 5472 616e       Strict-Tran
+00008bb0: 7370 6f72 742d 5365 6375 7269 7479 3a20  sport-Security: 
+00008bc0: 6d61 782d 6167 653d 3331 3533 3630 3030  max-age=31536000
+00008bd0: 3b20 696e 636c 7564 6553 7562 446f 6d61  ; includeSubDoma
+00008be0: 696e 730a 2020 2020 636f 6e66 6967 3a20  ins.    config: 
+00008bf0: 2a61 7574 685f 6865 6164 6572 0a20 2020  *auth_header.   
+00008c00: 2070 7269 6e74 3a20 2a61 7574 685f 6865   print: *auth_he
+00008c10: 6164 6572 0a20 2020 2066 756c 6c74 6578  ader.    fulltex
+00008c20: 7473 6561 7263 683a 202a 6175 7468 5f68  tsearch: *auth_h
+00008c30: 6561 6465 720a 2020 2020 6d61 7073 6572  eader.    mapser
+00008c40: 7665 723a 202a 6175 7468 5f68 6561 6465  ver: *auth_heade
+00008c50: 720a 2020 2020 7469 6e79 6f77 733a 202a  r.    tinyows: *
+00008c60: 6175 7468 5f68 6561 6465 720a 2020 2020  auth_header.    
+00008c70: 6c61 7965 7273 3a0a 2020 2020 2020 3c3c  layers:.      <<
+00008c80: 3a20 2a61 7574 685f 6865 6164 6572 0a20  : *auth_header. 
+00008c90: 2020 2020 2063 6163 6865 5f63 6f6e 7472       cache_contr
+00008ca0: 6f6c 5f6d 6178 5f61 6765 5f6e 6f63 6163  ol_max_age_nocac
+00008cb0: 6865 3a20 3020 2320 746f 2072 6566 7265  he: 0 # to refre
+00008cc0: 7368 2069 7373 7565 2069 6e20 6564 6974  sh issue in edit
+00008cd0: 696e 670a 2020 2020 7368 6f72 7465 6e65  ing.    shortene
+00008ce0: 723a 202a 6175 7468 5f68 6561 6465 720a  r: *auth_header.
+00008cf0: 2020 2020 6c6f 6769 6e3a 0a20 2020 2020      login:.     
+00008d00: 203c 3c3a 202a 6175 7468 5f68 6561 6465   <<: *auth_heade
+00008d10: 720a 2020 2020 2020 6163 6365 7373 5f63  r.      access_c
+00008d20: 6f6e 7472 6f6c 5f61 6c6c 6f77 5f6f 7269  ontrol_allow_ori
+00008d30: 6769 6e3a 0a20 2020 2020 2020 202d 2027  gin:.        - '
+00008d40: 7b56 4953 4942 4c45 5f57 4542 5f50 524f  {VISIBLE_WEB_PRO
+00008d50: 544f 434f 4c7d 3a2f 2f7b 5649 5349 424c  TOCOL}://{VISIBL
+00008d60: 455f 5745 425f 484f 5354 7d27 0a0a 2020  E_WEB_HOST}'..  
+00008d70: 2320 4368 6563 6b65 7220 636f 6e66 6967  # Checker config
+00008d80: 7572 6174 696f 6e0a 2020 6368 6563 6b65  uration.  checke
+00008d90: 725f 6f67 635f 7365 7276 6572 3a20 736f  r_ogc_server: so
+00008da0: 7572 6365 2066 6f72 2069 6d61 6765 2f70  urce for image/p
+00008db0: 6e67 0a20 2063 6865 636b 6572 3a0a 2020  ng.  checker:.  
+00008dc0: 2020 666f 7277 6172 645f 686f 7374 3a20    forward_host: 
+00008dd0: 4661 6c73 650a 2020 2020 6261 7365 5f69  False.    base_i
+00008de0: 6e74 6572 6e61 6c5f 7572 6c3a 2068 7474  nternal_url: htt
+00008df0: 703a 2f2f 6c6f 6361 6c68 6f73 743a 3830  p://localhost:80
+00008e00: 3830 0a20 2020 2066 756c 6c74 6578 7473  80.    fulltexts
+00008e10: 6561 7263 683a 0a20 2020 2020 2064 6973  earch:.      dis
+00008e20: 6162 6c65 3a20 4661 6c73 650a 2020 2020  able: False.    
+00008e30: 2020 6c65 7665 6c3a 2033 0a20 2020 2020    level: 3.     
+00008e40: 2073 6561 7263 683a 2074 6578 7420 746f   search: text to
+00008e50: 2073 6561 7263 680a 2020 2020 6c61 6e67   search.    lang
+00008e60: 3a0a 2020 2020 2020 6c65 7665 6c3a 2033  :.      level: 3
+00008e70: 0a20 2020 2020 2066 696c 6573 3a20 5b6e  .      files: [n
+00008e80: 6765 6f5d 0a20 2020 2070 6861 6e74 6f6d  geo].    phantom
+00008e90: 6a73 3a0a 2020 2020 2020 6469 7361 626c  js:.      disabl
+00008ea0: 653a 205b 5d0a 2020 2020 2020 726f 7574  e: [].      rout
+00008eb0: 6573 3a0a 2020 2020 2020 2020 2d20 6e61  es:.        - na
+00008ec0: 6d65 3a20 6465 736b 746f 700a 2020 2020  me: desktop.    
+00008ed0: 2020 2020 2020 7061 7261 6d73 3a0a 2020        params:.  
+00008ee0: 2020 2020 2020 2020 2020 6e6f 5f72 6564            no_red
+00008ef0: 6972 6563 743a 2027 7472 7565 270a 2020  irect: 'true'.  
+00008f00: 2020 2020 2020 2020 656e 7669 726f 6e6d          environm
+00008f10: 656e 743a 2026 7068 616e 746f 6d6a 732d  ent: &phantomjs-
+00008f20: 656e 760a 2020 2020 2020 2020 2020 2020  env.            
+00008f30: 4854 5450 5f4d 4150 3a0a 2020 2020 2020  HTTP_MAP:.      
+00008f40: 2020 2020 2020 2020 6874 7470 733a 2f2f          https://
+00008f50: 6c6f 6361 6c68 6f73 743a 3834 3834 2f74  localhost:8484/t
+00008f60: 696c 6573 2f3a 2068 7474 703a 2f2f 6c6f  iles/: http://lo
+00008f70: 6361 6c68 6f73 743a 3830 3830 2f74 696c  calhost:8080/til
+00008f80: 6573 2f0a 2020 2020 2020 2020 2020 6c65  es/.          le
+00008f90: 7665 6c3a 2036 0a20 2020 2020 2020 202d  vel: 6.        -
+00008fa0: 206e 616d 653a 206d 6f62 696c 650a 2020   name: mobile.  
+00008fb0: 2020 2020 2020 2020 7061 7261 6d73 3a0a          params:.
+00008fc0: 2020 2020 2020 2020 2020 2020 6e6f 5f72              no_r
+00008fd0: 6564 6972 6563 743a 2027 7472 7565 270a  edirect: 'true'.
+00008fe0: 2020 2020 2020 2020 2020 656e 7669 726f            enviro
+00008ff0: 6e6d 656e 743a 202a 7068 616e 746f 6d6a  nment: *phantomj
+00009000: 732d 656e 760a 2020 2020 2020 2020 2020  s-env.          
+00009010: 6c65 7665 6c3a 2036 0a20 2020 2020 2020  level: 6.       
+00009020: 202d 206e 616d 653a 2069 6672 616d 655f   - name: iframe_
+00009030: 6170 690a 2020 2020 2020 2020 2020 7061  api.          pa
+00009040: 7261 6d73 3a0a 2020 2020 2020 2020 2020  rams:.          
+00009050: 2020 6e6f 5f72 6564 6972 6563 743a 2027    no_redirect: '
+00009060: 7472 7565 270a 2020 2020 2020 2020 2020  true'.          
+00009070: 656e 7669 726f 6e6d 656e 743a 202a 7068  environment: *ph
+00009080: 616e 746f 6d6a 732d 656e 760a 2020 2020  antomjs-env.    
+00009090: 2020 2020 2020 6c65 7665 6c3a 2036 0a20        level: 6. 
+000090a0: 2020 2020 2020 202d 206e 616d 653a 2061         - name: a
+000090b0: 7069 6865 6c70 0a20 2020 2020 2020 2020  pihelp.         
+000090c0: 2065 6e76 6972 6f6e 6d65 6e74 3a20 2a70   environment: *p
+000090d0: 6861 6e74 6f6d 6a73 2d65 6e76 0a20 2020  hantomjs-env.   
+000090e0: 2020 2020 2020 206c 6576 656c 3a20 360a         level: 6.
+000090f0: 2020 2020 726f 7574 6573 3a0a 2020 2020      routes:.    
+00009100: 2020 6469 7361 626c 653a 205b 5d0a 2020    disable: [].  
+00009110: 2020 2020 726f 7574 6573 3a0a 2020 2020      routes:.    
+00009120: 2020 2020 2d20 6e61 6d65 3a20 6170 696a      - name: apij
+00009130: 730a 2020 2020 2020 2020 2020 6c65 7665  s.          leve
+00009140: 6c3a 2033 0a20 2020 2020 2020 2020 2070  l: 3.          p
+00009150: 6172 616d 733a 0a20 2020 2020 2020 2020  arams:.         
+00009160: 2020 2076 6572 7369 6f6e 3a20 2732 270a     version: '2'.
+00009170: 2020 2020 2020 2020 2d20 6e61 6d65 3a20          - name: 
+00009180: 7072 696e 7470 726f 7879 5f63 6170 6162  printproxy_capab
+00009190: 696c 6974 6965 730a 2020 2020 2020 2020  ilities.        
+000091a0: 2020 6c65 7665 6c3a 2033 0a20 2020 2020    level: 3.     
+000091b0: 2020 202d 206e 616d 653a 206d 6170 7365     - name: mapse
+000091c0: 7276 6572 7072 6f78 790a 2020 2020 2020  rverproxy.      
+000091d0: 2020 2020 6368 6563 6b65 725f 6e61 6d65      checker_name
+000091e0: 3a20 6d61 7073 6572 7665 7270 726f 7879  : mapserverproxy
+000091f0: 5f77 6d73 0a20 2020 2020 2020 2020 2070  _wms.          p
+00009200: 6172 616d 733a 0a20 2020 2020 2020 2020  arams:.         
+00009210: 2020 2053 4552 5649 4345 3a20 574d 530a     SERVICE: WMS.
+00009220: 2020 2020 2020 2020 2020 2020 5645 5253              VERS
+00009230: 494f 4e3a 2031 2e31 2e31 0a20 2020 2020  ION: 1.1.1.     
+00009240: 2020 2020 2020 2052 4551 5545 5354 3a20         REQUEST: 
+00009250: 4765 7443 6170 6162 696c 6974 6965 730a  GetCapabilities.
+00009260: 2020 2020 2020 2020 2020 2020 6f67 6373              ogcs
+00009270: 6572 7665 723a 2027 7b63 6865 636b 6572  erver: '{checker
+00009280: 5f6f 6763 5f73 6572 7665 727d 270a 2020  _ogc_server}'.  
+00009290: 2020 2020 2020 2020 6c65 7665 6c3a 2033          level: 3
+000092a0: 0a20 2020 2020 2020 202d 206e 616d 653a  .        - name:
+000092b0: 206d 6170 7365 7276 6572 7072 6f78 790a   mapserverproxy.
+000092c0: 2020 2020 2020 2020 2020 6368 6563 6b65            checke
+000092d0: 725f 6e61 6d65 3a20 6d61 7073 6572 7665  r_name: mapserve
+000092e0: 7270 726f 7879 5f77 6673 0a20 2020 2020  rproxy_wfs.     
+000092f0: 2020 2020 2070 6172 616d 733a 0a20 2020       params:.   
+00009300: 2020 2020 2020 2020 2053 4552 5649 4345           SERVICE
+00009310: 3a20 5746 530a 2020 2020 2020 2020 2020  : WFS.          
+00009320: 2020 5645 5253 494f 4e3a 2031 2e31 2e30    VERSION: 1.1.0
+00009330: 0a20 2020 2020 2020 2020 2020 2052 4551  .            REQ
+00009340: 5545 5354 3a20 4765 7443 6170 6162 696c  UEST: GetCapabil
+00009350: 6974 6965 730a 2020 2020 2020 2020 2020  ities.          
+00009360: 2020 6f67 6373 6572 7665 723a 2027 7b63    ogcserver: '{c
+00009370: 6865 636b 6572 5f6f 6763 5f73 6572 7665  hecker_ogc_serve
+00009380: 727d 270a 2020 2020 2020 2020 2020 6c65  r}'.          le
+00009390: 7665 6c3a 2033 0a20 2020 2074 6865 6d65  vel: 3.    theme
+000093a0: 733a 0a20 2020 2020 2070 6172 616d 733a  s:.      params:
+000093b0: 0a20 2020 2020 2020 2076 6572 7369 6f6e  .        version
+000093c0: 3a20 2732 270a 2020 2020 2020 6c65 7665  : '2'.      leve
+000093d0: 6c3a 2034 0a20 2020 2020 2069 6e74 6572  l: 4.      inter
+000093e0: 6661 6365 733a 207b 7d0a 2020 2020 7072  faces: {}.    pr
+000093f0: 696e 743a 0a20 2020 2020 206c 6576 656c  int:.      level
+00009400: 3a20 350a 0a20 2023 2043 6865 636b 2063  : 5..  # Check c
+00009410: 6f6c 6c65 6374 6f72 2063 6f6e 6669 6775  ollector configu
+00009420: 7261 7469 6f6e 0a20 2063 6865 636b 5f63  ration.  check_c
+00009430: 6f6c 6c65 6374 6f72 3a0a 2020 2020 686f  ollector:.    ho
+00009440: 7374 733a 0a20 2020 2020 202d 2064 6973  sts:.      - dis
+00009450: 706c 6179 3a20 4d61 696e 0a20 2020 2020  play: Main.     
+00009460: 2020 2075 726c 3a20 2768 7474 703a 2f2f     url: 'http://
+00009470: 6c6f 6361 6c68 6f73 743a 3830 3830 7b56  localhost:8080{V
+00009480: 4953 4942 4c45 5f45 4e54 5259 5f50 4f49  ISIBLE_ENTRY_POI
+00009490: 4e54 7d27 0a20 2020 206d 6178 5f6c 6576  NT}'.    max_lev
+000094a0: 656c 3a20 330a 2020 2020 6c65 7665 6c3a  el: 3.    level:
+000094b0: 2031 300a 0a20 2023 2057 6861 7420 7765   10..  # What we
+000094c0: 6220 7061 6765 2069 7320 6175 7468 6f72  b page is author
+000094d0: 697a 6564 2074 6f20 7573 6520 7468 6520  ized to use the 
+000094e0: 4150 490a 2020 6175 7468 6f72 697a 6564  API.  authorized
+000094f0: 5f72 6566 6572 6572 733a 0a20 2020 202d  _referers:.    -
+00009500: 2027 7b56 4953 4942 4c45 5f57 4542 5f50   '{VISIBLE_WEB_P
+00009510: 524f 544f 434f 4c7d 3a2f 2f7b 5649 5349  ROTOCOL}://{VISI
+00009520: 424c 455f 5745 425f 484f 5354 7d2f 270a  BLE_WEB_HOST}/'.
+00009530: 0a20 206d 6574 7269 6373 3a0a 2020 2020  .  metrics:.    
+00009540: 6d65 6d6f 7279 5f6d 6170 735f 7273 733a  memory_maps_rss:
+00009550: 2046 616c 7365 0a20 2020 206d 656d 6f72   False.    memor
+00009560: 795f 6d61 7073 5f73 697a 653a 2046 616c  y_maps_size: Fal
+00009570: 7365 0a20 2020 206d 656d 6f72 795f 6361  se.    memory_ca
+00009580: 6368 653a 2054 7275 650a 2020 2020 6d65  che: True.    me
+00009590: 6d6f 7279 5f63 6163 6865 5f61 6c6c 3a20  mory_cache_all: 
+000095a0: 4661 6c73 650a 2020 2020 7261 7374 6572  False.    raster
+000095b0: 5f64 6174 613a 2046 616c 7365 0a20 2020  _data: False.   
+000095c0: 2074 6f74 616c 5f70 7974 686f 6e5f 6f62   total_python_ob
+000095d0: 6a65 6374 5f6d 656d 6f72 793a 2054 7275  ject_memory: Tru
+000095e0: 650a 0a20 2023 2048 6f6f 6b73 2074 6861  e..  # Hooks tha
+000095f0: 7420 6361 6e20 6265 2063 616c 6c65 6420  t can be called 
+00009600: 6174 2064 6966 6665 7265 6e74 206d 6f6d  at different mom
+00009610: 656e 7473 2069 6e20 7468 6520 6c69 6665  ents in the life
+00009620: 206f 6620 7468 650a 2020 2320 6170 706c   of the.  # appl
+00009630: 6963 6174 696f 6e2e 2054 6865 2076 616c  ication. The val
+00009640: 7565 2069 7320 7468 6520 6675 6c6c 2070  ue is the full p
+00009650: 7974 686f 6e20 6e61 6d65 0a20 2023 2028  ython name.  # (
+00009660: 6675 6c6c 2e6d 6f64 756c 652e 7061 7468  full.module.path
+00009670: 2e66 756e 6374 696f 6e5f 6e61 6d65 2920  .function_name) 
+00009680: 6f66 2074 6865 2066 756e 6374 696f 6e20  of the function 
+00009690: 746f 2063 616c 6c0a 2020 686f 6f6b 733a  to call.  hooks:
+000096a0: 207b 7d0a 2020 2320 2020 6166 7465 725f   {}.  #   after_
+000096b0: 7365 7474 696e 6773 3a20 7b7b 636f 6f6b  settings: {{cook
+000096c0: 6965 6375 7474 6572 2e70 6163 6b61 6765  iecutter.package
+000096d0: 7d7d 2e61 6674 6572 5f73 6574 7469 6e67  }}.after_setting
+000096e0: 735f 686f 6f6b 0a20 2023 2043 616c 6c65  s_hook.  # Calle
+000096f0: 6420 6a75 7374 2061 6674 6572 2074 6865  d just after the
+00009700: 2073 6574 7469 6e67 7320 6861 7665 2062   settings have b
+00009710: 6565 6e20 6c6f 6164 6564 2e20 416c 6c6f  een loaded. Allo
+00009720: 7773 2074 6f20 6d6f 6469 6679 0a20 2023  ws to modify.  #
+00009730: 2074 6865 2073 6574 7469 6e67 7320 6174   the settings at
+00009740: 2072 756e 7469 6d65 2028 7468 6579 2061   runtime (they a
+00009750: 7265 2063 6f6e 7374 7275 6374 6564 2061  re constructed a
+00009760: 7420 6275 696c 6420 7469 6d65 292e 0a20  t build time).. 
+00009770: 2023 2054 6865 2066 756e 6374 696f 6e20   # The function 
+00009780: 7265 6365 6976 6573 206f 6e65 2070 6172  receives one par
+00009790: 616d 6574 6572 3a20 7468 6520 7365 7474  ameter: the sett
+000097a0: 696e 6773 206f 626a 6563 742e 0a0a 2020  ings object...  
+000097b0: 2320 5374 6174 6973 7469 6373 2061 7265  # Statistics are
+000097c0: 2064 6973 6162 6c65 6420 6279 2064 6566   disabled by def
+000097d0: 6175 6c74 0a20 2073 7461 7473 3a20 7b7d  ault.  stats: {}
+000097e0: 0a0a 2020 2320 5468 6520 6332 6377 7367  ..  # The c2cwsg
+000097f0: 6975 7469 6c73 2062 6173 6520 7061 7468  iutils base path
+00009800: 0a20 2063 3263 3a0a 2020 2020 6261 7365  .  c2c:.    base
+00009810: 5f70 6174 683a 202f 6332 630a 0a20 2064  _path: /c2c..  d
+00009820: 625f 6368 6f6f 7365 723a 0a20 2020 2023  b_chooser:.    #
+00009830: 204c 6973 7420 6f66 207b 6d65 7468 6f64   List of {method
+00009840: 2070 6174 687d 2072 6567 6578 6573 2074   path} regexes t
+00009850: 6f20 666f 7263 6520 7468 6520 7573 6167  o force the usag
+00009860: 6520 6f66 2074 6865 206d 6173 7465 722c  e of the master,
+00009870: 2065 7665 6e20 666f 7220 4745 5420 616e   even for GET an
+00009880: 6420 4f50 5449 4f4e 530a 2020 2020 2320  d OPTIONS.    # 
+00009890: 5468 6973 2073 7570 6572 7365 6465 7320  This supersedes 
+000098a0: 7468 6520 736c 6176 6520 6c69 7374 2e0a  the slave list..
+000098b0: 2020 2020 6d61 7374 6572 3a0a 2020 2020      master:.    
+000098c0: 2020 2d20 4745 5420 7b56 4953 4942 4c45    - GET {VISIBLE
+000098d0: 5f45 4e54 5259 5f50 4f49 4e54 7d73 2f2e  _ENTRY_POINT}s/.
+000098e0: 2a20 2320 5468 6520 7368 6f72 7465 6e65  * # The shortene
+000098f0: 7220 7570 6461 7465 7320 7468 6520 6c61  r updates the la
+00009900: 7374 5f68 6974 2063 6f6c 756d 6e20 6f6e  st_hit column on
+00009910: 2047 4554 0a20 2020 2020 202d 2047 4554   GET.      - GET
+00009920: 207b 5649 5349 424c 455f 454e 5452 595f   {VISIBLE_ENTRY_
+00009930: 504f 494e 547d 6f61 7574 682f 6c6f 6769  POINT}oauth/logi
+00009940: 6e20 2320 5468 6520 6f61 7574 6832 206c  n # The oauth2 l
+00009950: 6f67 696e 2077 6865 6e20 7765 2061 7265  ogin when we are
+00009960: 2061 6c72 6561 6479 206c 6f67 6765 640a   already logged.
+00009970: 2020 2020 2320 4c69 7374 206f 6620 7b6d      # List of {m
+00009980: 6574 686f 6420 7061 7468 7d20 7265 6765  ethod path} rege
+00009990: 7865 7320 746f 2066 6f72 6365 2074 6865  xes to force the
+000099a0: 2075 7361 6765 206f 6620 7468 6520 736c   usage of the sl
+000099b0: 6176 650a 2020 2020 736c 6176 653a 0a20  ave.    slave:. 
+000099c0: 2020 2020 202d 205c 772b 207b 5649 5349       - \w+ {VISI
+000099d0: 424c 455f 454e 5452 595f 504f 494e 547d  BLE_ENTRY_POINT}
+000099e0: 7072 696e 7470 726f 7879 2f2e 2a20 2320  printproxy/.* # 
+000099f0: 5468 6520 7072 696e 7420 7072 6f78 7920  The print proxy 
+00009a00: 6973 206e 6576 6572 2077 7269 7469 6e67  is never writing
+00009a10: 2074 6f20 7468 6520 4442 0a0a 7275 6e74   to the DB..runt
+00009a20: 696d 655f 656e 7669 726f 6e6d 656e 743a  ime_environment:
+00009a30: 0a20 202d 206e 616d 653a 2056 4953 4942  .  - name: VISIB
+00009a40: 4c45 5f57 4542 5f48 4f53 540a 2020 2020  LE_WEB_HOST.    
+00009a50: 6465 6661 756c 743a 206c 6f63 616c 686f  default: localho
+00009a60: 7374 0a20 202d 206e 616d 653a 2056 4953  st.  - name: VIS
+00009a70: 4942 4c45 5f57 4542 5f50 524f 544f 434f  IBLE_WEB_PROTOCO
+00009a80: 4c0a 2020 2020 6465 6661 756c 743a 2068  L.    default: h
+00009a90: 7474 7073 0a20 202d 206e 616d 653a 2056  ttps.  - name: V
+00009aa0: 4953 4942 4c45 5f45 4e54 5259 5f50 4f49  ISIBLE_ENTRY_POI
+00009ab0: 4e54 0a20 2020 2064 6566 6175 6c74 3a20  NT.    default: 
+00009ac0: 2f0a 2020 2d20 5047 484f 5354 0a20 202d  /.  - PGHOST.  -
+00009ad0: 2050 4748 4f53 545f 534c 4156 450a 2020   PGHOST_SLAVE.  
+00009ae0: 2d20 6e61 6d65 3a20 5047 504f 5254 0a20  - name: PGPORT. 
+00009af0: 2020 2064 6566 6175 6c74 3a20 2735 3433     default: '543
+00009b00: 3227 0a20 202d 206e 616d 653a 2050 4750  2'.  - name: PGP
+00009b10: 4f52 545f 534c 4156 450a 2020 2020 6465  ORT_SLAVE.    de
+00009b20: 6661 756c 743a 2027 3534 3332 270a 2020  fault: '5432'.  
+00009b30: 2d20 5047 5553 4552 0a20 202d 2050 4750  - PGUSER.  - PGP
+00009b40: 4153 5357 4f52 440a 2020 2d20 6e61 6d65  ASSWORD.  - name
+00009b50: 3a20 5047 4441 5441 4241 5345 0a20 2020  : PGDATABASE.   
+00009b60: 2064 6566 6175 6c74 3a20 6765 6f6d 6170   default: geomap
+00009b70: 6669 7368 0a20 202d 206e 616d 653a 2050  fish.  - name: P
+00009b80: 4753 534c 4d4f 4445 0a20 2020 2064 6566  GSSLMODE.    def
+00009b90: 6175 6c74 3a20 7072 6566 6572 0a20 202d  ault: prefer.  -
+00009ba0: 206e 616d 653a 2050 4753 4348 454d 410a   name: PGSCHEMA.
+00009bb0: 2020 2020 6465 6661 756c 743a 206d 6169      default: mai
+00009bc0: 6e0a 2020 2d20 6e61 6d65 3a20 5047 5343  n.  - name: PGSC
+00009bd0: 4845 4d41 5f53 5441 5449 430a 2020 2020  HEMA_STATIC.    
+00009be0: 6465 6661 756c 743a 206d 6169 6e5f 7374  default: main_st
+00009bf0: 6174 6963 0a20 202d 206e 616d 653a 2053  atic.  - name: S
+00009c00: 514c 414c 4348 454d 595f 504f 4f4c 5f52  QLALCHEMY_POOL_R
+00009c10: 4543 5943 4c45 0a20 2020 2064 6566 6175  ECYCLE.    defau
+00009c20: 6c74 3a20 2733 3027 0a20 202d 206e 616d  lt: '30'.  - nam
+00009c30: 653a 2053 514c 414c 4348 454d 595f 504f  e: SQLALCHEMY_PO
+00009c40: 4f4c 5f53 495a 450a 2020 2020 6465 6661  OL_SIZE.    defa
+00009c50: 756c 743a 2027 3527 0a20 202d 206e 616d  ult: '5'.  - nam
+00009c60: 653a 2053 514c 414c 4348 454d 595f 4d41  e: SQLALCHEMY_MA
+00009c70: 585f 4f56 4552 464c 4f57 0a20 2020 2064  X_OVERFLOW.    d
+00009c80: 6566 6175 6c74 3a20 2732 3527 0a20 202d  efault: '25'.  -
+00009c90: 206e 616d 653a 2053 514c 414c 4348 454d   name: SQLALCHEM
+00009ca0: 595f 534c 4156 455f 504f 4f4c 5f52 4543  Y_SLAVE_POOL_REC
+00009cb0: 5943 4c45 0a20 2020 2064 6566 6175 6c74  YCLE.    default
+00009cc0: 3a20 2733 3027 0a20 202d 206e 616d 653a  : '30'.  - name:
+00009cd0: 2053 514c 414c 4348 454d 595f 534c 4156   SQLALCHEMY_SLAV
+00009ce0: 455f 504f 4f4c 5f53 495a 450a 2020 2020  E_POOL_SIZE.    
+00009cf0: 6465 6661 756c 743a 2027 3527 0a20 202d  default: '5'.  -
+00009d00: 206e 616d 653a 2053 514c 414c 4348 454d   name: SQLALCHEM
+00009d10: 595f 534c 4156 455f 4d41 585f 4f56 4552  Y_SLAVE_MAX_OVER
+00009d20: 464c 4f57 0a20 2020 2064 6566 6175 6c74  FLOW.    default
+00009d30: 3a20 2732 3527 0a20 202d 206e 616d 653a  : '25'.  - name:
+00009d40: 2054 494e 594f 5753 5f55 524c 0a20 2020   TINYOWS_URL.   
+00009d50: 2064 6566 6175 6c74 3a20 6874 7470 3a2f   default: http:/
+00009d60: 2f74 696e 796f 7773 3a38 3038 302f 0a20  /tinyows:8080/. 
+00009d70: 202d 206e 616d 653a 204d 4150 5345 5256   - name: MAPSERV
+00009d80: 4552 5f55 524c 0a20 2020 2064 6566 6175  ER_URL.    defau
+00009d90: 6c74 3a20 6874 7470 3a2f 2f6d 6170 7365  lt: http://mapse
+00009da0: 7276 6572 3a38 3038 302f 0a20 202d 206e  rver:8080/.  - n
+00009db0: 616d 653a 2051 4749 5353 4552 5645 525f  ame: QGISSERVER_
+00009dc0: 5552 4c0a 2020 2020 6465 6661 756c 743a  URL.    default:
+00009dd0: 2068 7474 703a 2f2f 7167 6973 7365 7276   http://qgisserv
+00009de0: 6572 3a38 3038 302f 0a20 202d 206e 616d  er:8080/.  - nam
+00009df0: 653a 2050 5249 4e54 5f55 524c 0a20 2020  e: PRINT_URL.   
+00009e00: 2064 6566 6175 6c74 3a20 6874 7470 3a2f   default: http:/
+00009e10: 2f70 7269 6e74 3a38 3038 302f 7072 696e  /print:8080/prin
+00009e20: 742f 0a20 202d 206e 616d 653a 2044 4556  t/.  - name: DEV
+00009e30: 5345 5256 4552 5f48 4f53 540a 2020 2020  SERVER_HOST.    
+00009e40: 6465 6661 756c 743a 2077 6562 7061 636b  default: webpack
+00009e50: 2d64 6576 2d73 6572 7665 723a 3830 3830  -dev-server:8080
+00009e60: 0a20 202d 206e 616d 653a 2052 4544 4953  .  - name: REDIS
+00009e70: 5f48 4f53 540a 2020 2020 6465 6661 756c  _HOST.    defaul
+00009e80: 743a 2072 6564 6973 0a20 202d 206e 616d  t: redis.  - nam
+00009e90: 653a 2052 4544 4953 5f50 4f52 540a 2020  e: REDIS_PORT.  
+00009ea0: 2020 6465 6661 756c 743a 2027 3633 3732    default: '6372
+00009eb0: 270a 2020 2d20 6e61 6d65 3a20 5245 4449  '.  - name: REDI
+00009ec0: 535f 4442 0a20 2020 2064 6566 6175 6c74  S_DB.    default
+00009ed0: 3a20 2730 270a 2020 2d20 6e61 6d65 3a20  : '0'.  - name: 
+00009ee0: 5245 4449 535f 5345 5256 4943 454e 414d  REDIS_SERVICENAM
+00009ef0: 450a 2020 2020 6465 6661 756c 743a 2027  E.    default: '
+00009f00: 6d79 6d61 7374 6572 270a 2020 2d20 6e61  mymaster'.  - na
+00009f10: 6d65 3a20 5245 4449 535f 5449 4d45 4f55  me: REDIS_TIMEOU
+00009f20: 540a 2020 2020 6465 6661 756c 743a 2027  T.    default: '
+00009f30: 3330 270a 2020 2d20 6e61 6d65 3a20 5245  30'.  - name: RE
+00009f40: 4449 535f 4c4f 434b 5f54 494d 454f 5554  DIS_LOCK_TIMEOUT
+00009f50: 0a20 2020 2064 6566 6175 6c74 3a20 2731  .    default: '1
+00009f60: 3230 2720 2320 5477 6f20 6d69 6e75 7465  20' # Two minute
+00009f70: 730a 2020 2d20 6e61 6d65 3a20 5245 4449  s.  - name: REDI
+00009f80: 535f 4558 5049 5241 5449 4f4e 5f54 494d  S_EXPIRATION_TIM
+00009f90: 450a 2020 2020 6465 6661 756c 743a 2027  E.    default: '
+00009fa0: 3836 3430 3027 2023 204f 6e65 2064 6179  86400' # One day
+00009fb0: 0a20 202d 206e 616d 653a 2054 494c 4547  .  - name: TILEG
+00009fc0: 454e 4552 4154 494f 4e5f 5351 535f 5155  ENERATION_SQS_QU
+00009fd0: 4555 450a 2020 2020 6465 6661 756c 743a  EUE.    default:
+00009fe0: 2071 7565 7565 5f6e 616d 650a 2020 2d20   queue_name.  - 
+00009ff0: 6e61 6d65 3a20 5449 4c45 4745 4e45 5241  name: TILEGENERA
+0000a000: 5449 4f4e 5f53 335f 4255 434b 4554 0a20  TION_S3_BUCKET. 
+0000a010: 2020 2064 6566 6175 6c74 3a20 6275 636b     default: buck
+0000a020: 6574 5f6e 616d 650a 2020 2d20 6e61 6d65  et_name.  - name
+0000a030: 3a20 5345 4e54 5259 5f55 524c 0a20 2020  : SENTRY_URL.   
+0000a040: 2064 6566 6175 6c74 3a20 2727 0a20 202d   default: ''.  -
+0000a050: 206e 616d 653a 2053 454e 5452 595f 434c   name: SENTRY_CL
+0000a060: 4945 4e54 5f52 454c 4541 5345 0a20 2020  IENT_RELEASE.   
+0000a070: 2064 6566 6175 6c74 3a20 2727 0a20 202d   default: ''.  -
+0000a080: 206e 616d 653a 2053 454e 5452 595f 434c   name: SENTRY_CL
+0000a090: 4945 4e54 5f45 4e56 4952 4f4e 4d45 4e54  IENT_ENVIRONMENT
+0000a0a0: 0a20 2020 2064 6566 6175 6c74 3a20 2727  .    default: ''
+0000a0b0: 0a0a 7275 6e74 696d 655f 706f 7374 7072  ..runtime_postpr
+0000a0c0: 6f63 6573 733a 0a20 202d 2065 7870 7265  ocess:.  - expre
+0000a0d0: 7373 696f 6e3a 2069 6e74 287b 7d29 0a20  ssion: int({}). 
+0000a0e0: 2020 2076 6172 733a 0a20 2020 2020 202d     vars:.      -
+0000a0f0: 2063 6163 6865 2e73 7464 2e61 7267 756d   cache.std.argum
+0000a100: 656e 7473 2e6c 6f63 6b5f 7469 6d65 6f75  ents.lock_timeou
+0000a110: 740a 2020 2020 2020 2d20 6361 6368 652e  t.      - cache.
+0000a120: 7374 642e 6172 6775 6d65 6e74 732e 7265  std.arguments.re
+0000a130: 6469 735f 6578 7069 7261 7469 6f6e 5f74  dis_expiration_t
+0000a140: 696d 650a 2020 2020 2020 2d20 6361 6368  ime.      - cach
+0000a150: 652e 7374 642e 6172 6775 6d65 6e74 732e  e.std.arguments.
+0000a160: 736f 636b 6574 5f74 696d 656f 7574 0a20  socket_timeout. 
+0000a170: 2020 2020 202d 2063 6163 6865 2e73 7464       - cache.std
+0000a180: 2e61 7267 756d 656e 7473 2e64 620a 2020  .arguments.db.  
+0000a190: 2020 2020 2d20 7371 6c61 6c63 6865 6d79      - sqlalchemy
+0000a1a0: 5c2e 706f 6f6c 5f72 6563 7963 6c65 0a20  \.pool_recycle. 
+0000a1b0: 2020 2020 202d 2073 716c 616c 6368 656d       - sqlalchem
+0000a1c0: 795c 2e70 6f6f 6c5f 7369 7a65 0a20 2020  y\.pool_size.   
+0000a1d0: 2020 202d 2073 716c 616c 6368 656d 795c     - sqlalchemy\
+0000a1e0: 2e6d 6178 5f6f 7665 7266 6c6f 770a 2020  .max_overflow.  
+0000a1f0: 2020 2020 2d20 7371 6c61 6c63 6865 6d79      - sqlalchemy
+0000a200: 5f73 6c61 7665 5c2e 706f 6f6c 5f72 6563  _slave\.pool_rec
+0000a210: 7963 6c65 0a20 2020 2020 202d 2073 716c  ycle.      - sql
+0000a220: 616c 6368 656d 795f 736c 6176 655c 2e70  alchemy_slave\.p
+0000a230: 6f6f 6c5f 7369 7a65 0a20 2020 2020 202d  ool_size.      -
+0000a240: 2073 716c 616c 6368 656d 795f 736c 6176   sqlalchemy_slav
+0000a250: 655c 2e6d 6178 5f6f 7665 7266 6c6f 770a  e\.max_overflow.
+0000a260: 2020 2020 2020 2d20 6175 7468 656e 7469        - authenti
+0000a270: 6361 7469 6f6e 2e6d 6178 5f63 6f6e 7365  cation.max_conse
+0000a280: 6375 7469 7665 5f66 6169 6c75 7265 730a  cutive_failures.
+0000a290: 2020 2020 2020 2d20 6175 7468 656e 7469        - authenti
+0000a2a0: 6361 7469 6f6e 2e6f 6175 7468 325f 6175  cation.oauth2_au
+0000a2b0: 7468 6f72 697a 6174 696f 6e5f 6578 7069  thorization_expi
+0000a2c0: 7265 5f6d 696e 7574 6573 0a20 2020 2020  re_minutes.     
+0000a2d0: 202d 2061 7574 6865 6e74 6963 6174 696f   - authenticatio
+0000a2e0: 6e2e 6f61 7574 6832 5f74 6f6b 656e 5f65  n.oauth2_token_e
+0000a2f0: 7870 6972 655f 6d69 6e75 7465 730a 2020  xpire_minutes.  
+0000a300: 2020 2020 2d20 6865 6164 6572 732e 6c6f      - headers.lo
+0000a310: 6769 6e2e 6163 6365 7373 5f63 6f6e 7472  gin.access_contr
+0000a320: 6f6c 5f6d 6178 5f61 6765 0a20 2020 2020  ol_max_age.     
+0000a330: 202d 2068 6561 6465 7273 2e6c 6f67 696e   - headers.login
+0000a340: 2e63 6163 6865 5f63 6f6e 7472 6f6c 5f6d  .cache_control_m
+0000a350: 6178 5f61 6765 0a20 2020 2020 202d 2068  ax_age.      - h
+0000a360: 6561 6465 7273 2e6c 6f67 696e 2e63 6163  eaders.login.cac
+0000a370: 6865 5f63 6f6e 7472 6f6c 5f6d 6178 5f61  he_control_max_a
+0000a380: 6765 5f6e 6f63 6163 6865 0a20 2020 2020  ge_nocache.     
+0000a390: 202d 2068 6561 6465 7273 2e69 6e64 6578   - headers.index
+0000a3a0: 2e61 6363 6573 735f 636f 6e74 726f 6c5f  .access_control_
+0000a3b0: 6d61 785f 6167 650a 2020 2020 2020 2d20  max_age.      - 
+0000a3c0: 6865 6164 6572 732e 696e 6465 782e 6361  headers.index.ca
+0000a3d0: 6368 655f 636f 6e74 726f 6c5f 6d61 785f  che_control_max_
+0000a3e0: 6167 650a 2020 2020 2020 2d20 6865 6164  age.      - head
+0000a3f0: 6572 732e 696e 6465 782e 6361 6368 655f  ers.index.cache_
+0000a400: 636f 6e74 726f 6c5f 6d61 785f 6167 655f  control_max_age_
+0000a410: 6e6f 6361 6368 650a 2020 2020 2020 2d20  nocache.      - 
+0000a420: 6865 6164 6572 732e 6479 6e61 6d69 632e  headers.dynamic.
+0000a430: 6163 6365 7373 5f63 6f6e 7472 6f6c 5f6d  access_control_m
+0000a440: 6178 5f61 6765 0a20 2020 2020 202d 2068  ax_age.      - h
+0000a450: 6561 6465 7273 2e64 796e 616d 6963 2e63  eaders.dynamic.c
+0000a460: 6163 6865 5f63 6f6e 7472 6f6c 5f6d 6178  ache_control_max
+0000a470: 5f61 6765 0a20 2020 2020 202d 2068 6561  _age.      - hea
+0000a480: 6465 7273 2e64 796e 616d 6963 2e63 6163  ders.dynamic.cac
+0000a490: 6865 5f63 6f6e 7472 6f6c 5f6d 6178 5f61  he_control_max_a
+0000a4a0: 6765 5f6e 6f63 6163 6865 0a20 2020 2020  ge_nocache.     
+0000a4b0: 202d 2068 6561 6465 7273 2e63 6f6e 6669   - headers.confi
+0000a4c0: 672e 6163 6365 7373 5f63 6f6e 7472 6f6c  g.access_control
+0000a4d0: 5f6d 6178 5f61 6765 0a20 2020 2020 202d  _max_age.      -
+0000a4e0: 2068 6561 6465 7273 2e63 6f6e 6669 672e   headers.config.
+0000a4f0: 6361 6368 655f 636f 6e74 726f 6c5f 6d61  cache_control_ma
+0000a500: 785f 6167 650a 2020 2020 2020 2d20 6865  x_age.      - he
+0000a510: 6164 6572 732e 636f 6e66 6967 2e63 6163  aders.config.cac
+0000a520: 6865 5f63 6f6e 7472 6f6c 5f6d 6178 5f61  he_control_max_a
+0000a530: 6765 5f6e 6f63 6163 6865 0a20 2020 2020  ge_nocache.     
+0000a540: 202d 2068 6561 6465 7273 2e61 7069 2e61   - headers.api.a
+0000a550: 6363 6573 735f 636f 6e74 726f 6c5f 6d61  ccess_control_ma
+0000a560: 785f 6167 650a 2020 2020 2020 2d20 6865  x_age.      - he
+0000a570: 6164 6572 732e 6170 692e 6361 6368 655f  aders.api.cache_
+0000a580: 636f 6e74 726f 6c5f 6d61 785f 6167 650a  control_max_age.
+0000a590: 2020 2020 2020 2d20 6865 6164 6572 732e        - headers.
+0000a5a0: 6170 692e 6361 6368 655f 636f 6e74 726f  api.cache_contro
+0000a5b0: 6c5f 6d61 785f 6167 655f 6e6f 6361 6368  l_max_age_nocach
+0000a5c0: 650a 2020 2020 2020 2d20 6865 6164 6572  e.      - header
+0000a5d0: 732e 6170 6968 656c 702e 6163 6365 7373  s.apihelp.access
+0000a5e0: 5f63 6f6e 7472 6f6c 5f6d 6178 5f61 6765  _control_max_age
+0000a5f0: 0a20 2020 2020 202d 2068 6561 6465 7273  .      - headers
+0000a600: 2e61 7069 6865 6c70 2e63 6163 6865 5f63  .apihelp.cache_c
+0000a610: 6f6e 7472 6f6c 5f6d 6178 5f61 6765 0a20  ontrol_max_age. 
+0000a620: 2020 2020 202d 2068 6561 6465 7273 2e61       - headers.a
+0000a630: 7069 6865 6c70 2e63 6163 6865 5f63 6f6e  pihelp.cache_con
+0000a640: 7472 6f6c 5f6d 6178 5f61 6765 5f6e 6f63  trol_max_age_noc
+0000a650: 6163 6865 0a20 2020 2020 202d 2068 6561  ache.      - hea
+0000a660: 6465 7273 2e74 6865 6d65 732e 6163 6365  ders.themes.acce
+0000a670: 7373 5f63 6f6e 7472 6f6c 5f6d 6178 5f61  ss_control_max_a
+0000a680: 6765 0a20 2020 2020 202d 2068 6561 6465  ge.      - heade
+0000a690: 7273 2e74 6865 6d65 732e 6361 6368 655f  rs.themes.cache_
+0000a6a0: 636f 6e74 726f 6c5f 6d61 785f 6167 650a  control_max_age.
+0000a6b0: 2020 2020 2020 2d20 6865 6164 6572 732e        - headers.
+0000a6c0: 7468 656d 6573 2e63 6163 6865 5f63 6f6e  themes.cache_con
+0000a6d0: 7472 6f6c 5f6d 6178 5f61 6765 5f6e 6f63  trol_max_age_noc
+0000a6e0: 6163 6865 0a20 2020 2020 202d 2068 6561  ache.      - hea
+0000a6f0: 6465 7273 2e66 756c 6c74 6578 7473 6561  ders.fulltextsea
+0000a700: 7263 682e 6163 6365 7373 5f63 6f6e 7472  rch.access_contr
+0000a710: 6f6c 5f6d 6178 5f61 6765 0a20 2020 2020  ol_max_age.     
+0000a720: 202d 2068 6561 6465 7273 2e66 756c 6c74   - headers.fullt
+0000a730: 6578 7473 6561 7263 682e 6361 6368 655f  extsearch.cache_
+0000a740: 636f 6e74 726f 6c5f 6d61 785f 6167 650a  control_max_age.
+0000a750: 2020 2020 2020 2d20 6865 6164 6572 732e        - headers.
+0000a760: 6675 6c6c 7465 7874 7365 6172 6368 2e63  fulltextsearch.c
+0000a770: 6163 6865 5f63 6f6e 7472 6f6c 5f6d 6178  ache_control_max
+0000a780: 5f61 6765 5f6e 6f63 6163 6865 0a20 2020  _age_nocache.   
+0000a790: 2020 202d 2068 6561 6465 7273 2e6d 6170     - headers.map
+0000a7a0: 7365 7276 6572 2e61 6363 6573 735f 636f  server.access_co
+0000a7b0: 6e74 726f 6c5f 6d61 785f 6167 650a 2020  ntrol_max_age.  
+0000a7c0: 2020 2020 2d20 6865 6164 6572 732e 6d61      - headers.ma
+0000a7d0: 7073 6572 7665 722e 6361 6368 655f 636f  pserver.cache_co
+0000a7e0: 6e74 726f 6c5f 6d61 785f 6167 650a 2020  ntrol_max_age.  
+0000a7f0: 2020 2020 2d20 6865 6164 6572 732e 6d61      - headers.ma
+0000a800: 7073 6572 7665 722e 6361 6368 655f 636f  pserver.cache_co
+0000a810: 6e74 726f 6c5f 6d61 785f 6167 655f 6e6f  ntrol_max_age_no
+0000a820: 6361 6368 650a 2020 2020 2020 2d20 6865  cache.      - he
+0000a830: 6164 6572 732e 7469 6e79 6f77 732e 6163  aders.tinyows.ac
+0000a840: 6365 7373 5f63 6f6e 7472 6f6c 5f6d 6178  cess_control_max
+0000a850: 5f61 6765 0a20 2020 2020 202d 2068 6561  _age.      - hea
+0000a860: 6465 7273 2e74 696e 796f 7773 2e63 6163  ders.tinyows.cac
+0000a870: 6865 5f63 6f6e 7472 6f6c 5f6d 6178 5f61  he_control_max_a
+0000a880: 6765 0a20 2020 2020 202d 2068 6561 6465  ge.      - heade
+0000a890: 7273 2e74 696e 796f 7773 2e63 6163 6865  rs.tinyows.cache
+0000a8a0: 5f63 6f6e 7472 6f6c 5f6d 6178 5f61 6765  _control_max_age
+0000a8b0: 5f6e 6f63 6163 6865 0a20 2020 2020 202d  _nocache.      -
+0000a8c0: 2068 6561 6465 7273 2e6c 6179 6572 732e   headers.layers.
+0000a8d0: 6163 6365 7373 5f63 6f6e 7472 6f6c 5f6d  access_control_m
+0000a8e0: 6178 5f61 6765 0a20 2020 2020 202d 2068  ax_age.      - h
+0000a8f0: 6561 6465 7273 2e6c 6179 6572 732e 6361  eaders.layers.ca
+0000a900: 6368 655f 636f 6e74 726f 6c5f 6d61 785f  che_control_max_
+0000a910: 6167 650a 2020 2020 2020 2d20 6865 6164  age.      - head
+0000a920: 6572 732e 6c61 7965 7273 2e63 6163 6865  ers.layers.cache
+0000a930: 5f63 6f6e 7472 6f6c 5f6d 6178 5f61 6765  _control_max_age
+0000a940: 5f6e 6f63 6163 6865 0a20 2020 2020 202d  _nocache.      -
+0000a950: 2068 6561 6465 7273 2e70 7269 6e74 2e61   headers.print.a
+0000a960: 6363 6573 735f 636f 6e74 726f 6c5f 6d61  ccess_control_ma
+0000a970: 785f 6167 650a 2020 2020 2020 2d20 6865  x_age.      - he
+0000a980: 6164 6572 732e 7072 696e 742e 6361 6368  aders.print.cach
+0000a990: 655f 636f 6e74 726f 6c5f 6d61 785f 6167  e_control_max_ag
+0000a9a0: 650a 2020 2020 2020 2d20 6865 6164 6572  e.      - header
+0000a9b0: 732e 7072 696e 742e 6361 6368 655f 636f  s.print.cache_co
+0000a9c0: 6e74 726f 6c5f 6d61 785f 6167 655f 6e6f  ntrol_max_age_no
+0000a9d0: 6361 6368 650a 2020 2020 2020 2d20 6865  cache.      - he
+0000a9e0: 6164 6572 732e 7072 6f66 696c 652e 6163  aders.profile.ac
+0000a9f0: 6365 7373 5f63 6f6e 7472 6f6c 5f6d 6178  cess_control_max
+0000aa00: 5f61 6765 0a20 2020 2020 202d 2068 6561  _age.      - hea
+0000aa10: 6465 7273 2e70 726f 6669 6c65 2e63 6163  ders.profile.cac
+0000aa20: 6865 5f63 6f6e 7472 6f6c 5f6d 6178 5f61  he_control_max_a
+0000aa30: 6765 0a20 2020 2020 202d 2068 6561 6465  ge.      - heade
+0000aa40: 7273 2e70 726f 6669 6c65 2e63 6163 6865  rs.profile.cache
+0000aa50: 5f63 6f6e 7472 6f6c 5f6d 6178 5f61 6765  _control_max_age
+0000aa60: 5f6e 6f63 6163 6865 0a20 2020 2020 202d  _nocache.      -
+0000aa70: 2068 6561 6465 7273 2e72 6173 7465 722e   headers.raster.
+0000aa80: 6163 6365 7373 5f63 6f6e 7472 6f6c 5f6d  access_control_m
+0000aa90: 6178 5f61 6765 0a20 2020 2020 202d 2068  ax_age.      - h
+0000aaa0: 6561 6465 7273 2e72 6173 7465 722e 6361  eaders.raster.ca
+0000aab0: 6368 655f 636f 6e74 726f 6c5f 6d61 785f  che_control_max_
+0000aac0: 6167 650a 2020 2020 2020 2d20 6865 6164  age.      - head
+0000aad0: 6572 732e 7261 7374 6572 2e63 6163 6865  ers.raster.cache
+0000aae0: 5f63 6f6e 7472 6f6c 5f6d 6178 5f61 6765  _control_max_age
+0000aaf0: 5f6e 6f63 6163 6865 0a20 2020 2020 202d  _nocache.      -
+0000ab00: 2068 6561 6465 7273 2e73 686f 7274 656e   headers.shorten
+0000ab10: 6572 2e61 6363 6573 735f 636f 6e74 726f  er.access_contro
+0000ab20: 6c5f 6d61 785f 6167 650a 2020 2020 2020  l_max_age.      
+0000ab30: 2d20 6865 6164 6572 732e 7368 6f72 7465  - headers.shorte
+0000ab40: 6e65 722e 6361 6368 655f 636f 6e74 726f  ner.cache_contro
+0000ab50: 6c5f 6d61 785f 6167 650a 2020 2020 2020  l_max_age.      
+0000ab60: 2d20 6865 6164 6572 732e 7368 6f72 7465  - headers.shorte
+0000ab70: 6e65 722e 6361 6368 655f 636f 6e74 726f  ner.cache_contro
+0000ab80: 6c5f 6d61 785f 6167 655f 6e6f 6361 6368  l_max_age_nocach
+0000ab90: 650a 2020 2020 2020 2d20 6865 6164 6572  e.      - header
+0000aba0: 732e 6572 726f 722e 6163 6365 7373 5f63  s.error.access_c
+0000abb0: 6f6e 7472 6f6c 5f6d 6178 5f61 6765 0a20  ontrol_max_age. 
+0000abc0: 2020 2020 202d 2068 6561 6465 7273 2e65       - headers.e
+0000abd0: 7272 6f72 2e63 6163 6865 5f63 6f6e 7472  rror.cache_contr
+0000abe0: 6f6c 5f6d 6178 5f61 6765 0a20 2020 2020  ol_max_age.     
+0000abf0: 202d 2068 6561 6465 7273 2e65 7272 6f72   - headers.error
+0000ac00: 2e63 6163 6865 5f63 6f6e 7472 6f6c 5f6d  .cache_control_m
+0000ac10: 6178 5f61 6765 5f6e 6f63 6163 6865 0a20  ax_age_nocache. 
+0000ac20: 2020 2020 202d 2073 686f 7274 656e 6572       - shortener
+0000ac30: 2e6c 656e 6774 680a 2020 2020 2020 2d20  .length.      - 
+0000ac40: 6368 6563 6b65 722e 6675 6c6c 7465 7874  checker.fulltext
+0000ac50: 7365 6172 6368 2e6c 6576 656c 0a20 2020  search.level.   
+0000ac60: 2020 202d 2063 6865 636b 6572 2e6c 616e     - checker.lan
+0000ac70: 672e 6c65 7665 6c0a 2020 2020 2020 2d20  g.level.      - 
+0000ac80: 6368 6563 6b65 722e 7072 696e 742e 6c65  checker.print.le
+0000ac90: 7665 6c0a 2020 2020 2020 2d20 6368 6563  vel.      - chec
+0000aca0: 6b65 722e 7468 656d 6573 2e6c 6576 656c  ker.themes.level
+0000acb0: 0a20 2020 2020 202d 2063 6865 636b 5f63  .      - check_c
+0000acc0: 6f6c 6c65 6374 6f72 2e6d 6178 5f6c 6576  ollector.max_lev
+0000acd0: 656c 0a20 2020 2020 202d 2063 6865 636b  el.      - check
+0000ace0: 5f63 6f6c 6c65 6374 6f72 2e6c 6576 656c  _collector.level
+0000acf0: 0a0a 2020 2d20 6578 7072 6573 7369 6f6e  ..  - expression
+0000ad00: 3a20 7374 7228 7b7d 292e 6c6f 7765 7228  : str({}).lower(
+0000ad10: 2920 696e 2028 2274 7275 6522 2c20 2279  ) in ("true", "y
+0000ad20: 6573 222c 2022 3122 290a 2020 2020 7661  es", "1").    va
+0000ad30: 7273 3a0a 2020 2020 2020 2d20 6175 7468  rs:.      - auth
+0000ad40: 656e 7469 6361 7469 6f6e 2e74 776f 5f66  entication.two_f
+0000ad50: 6163 746f 720a 2020 2020 2020 2d20 6765  actor.      - ge
+0000ad60: 7469 7466 6978 6564 2e65 6e61 626c 6564  titfixed.enabled
+0000ad70: 0a20 2020 2020 202d 206c 6179 6572 732e  .      - layers.
+0000ad80: 6765 6f6d 6574 7279 5f76 616c 6964 6174  geometry_validat
+0000ad90: 696f 6e0a 2020 2020 2020 2d20 736d 7470  ion.      - smtp
+0000ada0: 2e73 736c 0a20 2020 2020 202d 2073 6d74  .ssl.      - smt
+0000adb0: 702e 7374 6172 7474 6c73 0a20 2020 2020  p.starttls.     
+0000adc0: 202d 2068 6964 655f 6361 7061 6269 6c69   - hide_capabili
+0000add0: 7469 6573 0a20 2020 2020 202d 2063 6865  ties.      - che
+0000ade0: 636b 6572 2e66 6f72 7761 7264 5f68 6f73  cker.forward_hos
+0000adf0: 740a 2020 2020 2020 2d20 6368 6563 6b65  t.      - checke
+0000ae00: 722e 6675 6c6c 7465 7874 7365 6172 6368  r.fulltextsearch
+0000ae10: 2e64 6973 6162 6c65 0a20 2020 2020 202d  .disable.      -
+0000ae20: 206d 6574 7269 6373 2e6d 656d 6f72 795f   metrics.memory_
+0000ae30: 6d61 7073 5f72 7373 0a20 2020 2020 202d  maps_rss.      -
+0000ae40: 206d 6574 7269 6373 2e6d 656d 6f72 795f   metrics.memory_
+0000ae50: 6d61 7073 5f73 697a 650a 2020 2020 2020  maps_size.      
+0000ae60: 2d20 6d65 7472 6963 732e 6d65 6d6f 7279  - metrics.memory
+0000ae70: 5f63 6163 6865 0a20 2020 2020 202d 206d  _cache.      - m
+0000ae80: 6574 7269 6373 2e6d 656d 6f72 795f 6361  etrics.memory_ca
+0000ae90: 6368 655f 616c 6c0a 2020 2020 2020 2d20  che_all.      - 
+0000aea0: 6d65 7472 6963 732e 7261 7374 6572 5f64  metrics.raster_d
+0000aeb0: 6174 610a 2020 2020 2020 2d20 6d65 7472  ata.      - metr
+0000aec0: 6963 732e 746f 7461 6c5f 7079 7468 6f6e  ics.total_python
+0000aed0: 5f6f 626a 6563 745f 6d65 6d6f 7279 0a0a  _object_memory..
+0000aee0: 6e6f 5f69 6e74 6572 7072 6574 6564 3a0a  no_interpreted:.
+0000aef0: 2020 2d20 6164 6d69 6e5f 696e 7465 7266    - admin_interf
+0000af00: 6163 652e 6176 6169 6c61 626c 655f 6675  ace.available_fu
+0000af10: 6e63 7469 6f6e 616c 6974 6965 735b 5d2e  nctionalities[].
+0000af20: 6465 7363 7269 7074 696f 6e0a 2020 2d20  description.  - 
+0000af30: 6164 6d69 6e5f 696e 7465 7266 6163 652e  admin_interface.
+0000af40: 6176 6169 6c61 626c 655f 6d65 7461 6461  available_metada
+0000af50: 7461 5b5d 2e64 6573 6372 6970 7469 6f6e  ta[].description
+0000af60: 0a20 202d 2069 6e74 6572 6661 6365 735f  .  - interfaces_
+0000af70: 636f 6e66 6967 2e64 6566 6175 6c74 2e73  config.default.s
+0000af80: 7461 7469 632e 616e 6775 6c61 724c 6f63  tatic.angularLoc
+0000af90: 616c 6553 6372 6970 742e 6170 7065 6e64  aleScript.append
+0000afa0: 0a20 202d 2069 6e74 6572 6661 6365 735f  .  - interfaces_
+0000afb0: 636f 6e66 6967 2e64 6566 6175 6c74 2e63  config.default.c
+0000afc0: 6f6e 7374 616e 7473 2e67 6d66 4d6f 7573  onstants.gmfMous
+0000afd0: 6550 6f73 6974 696f 6e4f 7074 696f 6e73  ePositionOptions
+0000afe0: 2e70 726f 6a65 6374 696f 6e73 5b5d 2e66  .projections[].f
+0000aff0: 696c 7465 720a 2020 2d20 696e 7465 7266  ilter.  - interf
+0000b000: 6163 6573 5f63 6f6e 6669 672e 6465 6661  aces_config.defa
+0000b010: 756c 742e 636f 6e73 7461 6e74 732e 676d  ult.constants.gm
+0000b020: 664d 6f62 696c 654d 6561 7375 7265 506f  fMobileMeasurePo
+0000b030: 696e 744f 7074 696f 6e73 2e66 6f72 6d61  intOptions.forma
+0000b040: 740a 2020 2d20 696e 7465 7266 6163 6573  t.  - interfaces
+0000b050: 5f63 6f6e 6669 672e 6465 6661 756c 742e  _config.default.
+0000b060: 636f 6e73 7461 6e74 732e 6e67 656f 5374  constants.ngeoSt
+0000b070: 7269 6e67 546f 4874 6d6c 5265 706c 6163  ringToHtmlReplac
+0000b080: 656d 656e 7473 5b5d 2e65 7870 7265 7373  ements[].express
+0000b090: 696f 6e0a 2020 2d20 696e 7465 7266 6163  ion.  - interfac
+0000b0a0: 6573 5f63 6f6e 6669 672e 6d6f 6269 6c65  es_config.mobile
+0000b0b0: 2e63 6f6e 7374 616e 7473 2e67 6d66 4d6f  .constants.gmfMo
+0000b0c0: 7573 6550 6f73 6974 696f 6e4f 7074 696f  usePositionOptio
+0000b0d0: 6e73 2e70 726f 6a65 6374 696f 6e73 5b5d  ns.projections[]
+0000b0e0: 2e66 696c 7465 720a 2020 2d20 696e 7465  .filter.  - inte
+0000b0f0: 7266 6163 6573 5f63 6f6e 6669 672e 6d6f  rfaces_config.mo
+0000b100: 6269 6c65 2e63 6f6e 7374 616e 7473 2e67  bile.constants.g
+0000b110: 6d66 4d6f 6269 6c65 4d65 6173 7572 6550  mfMobileMeasureP
+0000b120: 6f69 6e74 4f70 7469 6f6e 732e 666f 726d  ointOptions.form
+0000b130: 6174 0a20 202d 2069 6e74 6572 6661 6365  at.  - interface
+0000b140: 735f 636f 6e66 6967 2e6d 6f62 696c 652e  s_config.mobile.
+0000b150: 636f 6e73 7461 6e74 732e 6e67 656f 5374  constants.ngeoSt
+0000b160: 7269 6e67 546f 4874 6d6c 5265 706c 6163  ringToHtmlReplac
+0000b170: 656d 656e 7473 5b5d 2e65 7870 7265 7373  ements[].express
+0000b180: 696f 6e0a 2020 2d20 696e 7465 7266 6163  ion.  - interfac
+0000b190: 6573 5f63 6f6e 6669 672e 6465 736b 746f  es_config.deskto
+0000b1a0: 702e 636f 6e73 7461 6e74 732e 676d 664d  p.constants.gmfM
+0000b1b0: 6f75 7365 506f 7369 7469 6f6e 4f70 7469  ousePositionOpti
+0000b1c0: 6f6e 732e 7072 6f6a 6563 7469 6f6e 735b  ons.projections[
+0000b1d0: 5d2e 6669 6c74 6572 0a20 202d 2069 6e74  ].filter.  - int
+0000b1e0: 6572 6661 6365 735f 636f 6e66 6967 2e64  erfaces_config.d
+0000b1f0: 6573 6b74 6f70 2e63 6f6e 7374 616e 7473  esktop.constants
+0000b200: 2e67 6d66 4d6f 6269 6c65 4d65 6173 7572  .gmfMobileMeasur
+0000b210: 6550 6f69 6e74 4f70 7469 6f6e 732e 666f  ePointOptions.fo
+0000b220: 726d 6174 0a20 202d 2069 6e74 6572 6661  rmat.  - interfa
+0000b230: 6365 735f 636f 6e66 6967 2e64 6573 6b74  ces_config.deskt
+0000b240: 6f70 2e63 6f6e 7374 616e 7473 2e6e 6765  op.constants.nge
+0000b250: 6f53 7472 696e 6754 6f48 746d 6c52 6570  oStringToHtmlRep
+0000b260: 6c61 6365 6d65 6e74 735b 5d2e 6578 7072  lacements[].expr
+0000b270: 6573 7369 6f6e 0a                        ession.
```

## Comparing `c2cgeoportal_geoportal-2.6.0.dist-info/METADATA` & `c2cgeoportal_geoportal-2.7.1.83.dist-info/METADATA`

 * *Files 18% similar despite different names*

```diff
@@ -1,57 +1,61 @@
 Metadata-Version: 2.1
 Name: c2cgeoportal-geoportal
-Version: 2.6.0
+Version: 2.7.1.83
 Summary: c2cgeoportal geoportal
 Home-page: https://github.com/camptocamp/c2cgeoportal/
 Author: Camptocamp
 Author-email: info@camptocamp.com
-License: UNKNOWN
 Keywords: web gis geoportail c2cgeoportal geocommune pyramid
-Platform: UNKNOWN
-Classifier: Programming Language :: Python
-Classifier: Programming Language :: Python :: 3
-Classifier: Programming Language :: Python :: 3.7
+Classifier: Development Status :: 6 - Mature
+Classifier: Environment :: Web Environment
 Classifier: Framework :: Pyramid
-Classifier: Topic :: Internet :: WWW/HTTP
-Classifier: Topic :: Internet :: WWW/HTTP :: WSGI :: Application
+Classifier: Intended Audience :: Other Audience
 Classifier: License :: OSI Approved :: BSD License
-Classifier: Development Status :: 6 - Mature
-Requires-Dist: Fiona
-Requires-Dist: GeoAlchemy2
-Requires-Dist: Mako
-Requires-Dist: OWSLib (>=0.6.0)
-Requires-Dist: PyYAML
-Requires-Dist: SQLAlchemy
-Requires-Dist: Shapely
+Classifier: Operating System :: OS Independent
+Classifier: Programming Language :: Python
+Classifier: Programming Language :: Python :: 3
+Classifier: Programming Language :: Python :: 3.8
+Classifier: Topic :: Scientific/Engineering :: GIS
+Classifier: Typing :: Typed
 Requires-Dist: alembic
 Requires-Dist: bottle
-Requires-Dist: c2c.template (>=2.0.7)
 Requires-Dist: c2cgeoportal-commons[upgrade]
 Requires-Dist: c2cwsgiutils
+Requires-Dist: c2c.template (>=2.0.7)
 Requires-Dist: defusedxml
 Requires-Dist: dogpile.cache (>=0.6)
+Requires-Dist: Fiona
+Requires-Dist: GeoAlchemy2
 Requires-Dist: geojson
 Requires-Dist: isodate
 Requires-Dist: lingua
+Requires-Dist: Mako
+Requires-Dist: OWSLib (>=0.6.0)
 Requires-Dist: papyrus
-Requires-Dist: psycopg2-binary
+Requires-Dist: psycopg2
 Requires-Dist: pycryptodome
 Requires-Dist: pyotp
 Requires-Dist: pyramid
 Requires-Dist: pyramid-debugtoolbar
 Requires-Dist: pyramid-mako
 Requires-Dist: pyramid-multiauth
 Requires-Dist: pyramid-tm
 Requires-Dist: python-dateutil
+Requires-Dist: PyYAML
 Requires-Dist: rasterio
-Requires-Dist: redis
 Requires-Dist: requests
+Requires-Dist: redis
+Requires-Dist: Shapely
+Requires-Dist: SQLAlchemy
 Requires-Dist: transaction
+Requires-Dist: jinja2 (>=2.11.3)
+Requires-Dist: pygments (>=2.7.4)
+Requires-Dist: setuptools (>=65.5.1)
+Requires-Dist: requests (>=2.31.0)
 
 c2cgeoportal is the server part of `GeoMapFish <http://geomapfish.org/>`_,
 the client part is `ngeo <https://github.com/camptocamp/ngeo/>`_.
 
 Read the `Documentation <https://camptocamp.github.io/c2cgeoportal/master/>`_.
 
 `Sources <https://github.com/camptocamp/c2cgeoportal/>`_
-
```

## Comparing `c2cgeoportal_geoportal-2.6.0.dist-info/entry_points.txt` & `c2cgeoportal_geoportal-2.7.1.83.dist-info/entry_points.txt`

 * *Files 8% similar despite different names*

```diff
@@ -1,11 +1,12 @@
 [console_scripts]
 c2cupgrade = c2cgeoportal_geoportal.scripts.c2cupgrade:main
 create-demo-theme = c2cgeoportal_geoportal.scripts.create_demo_theme:main
 manage-users = c2cgeoportal_geoportal.scripts.manage_users:main
+pcreate = c2cgeoportal_geoportal.scripts.pcreate:main
 theme2fts = c2cgeoportal_geoportal.scripts.theme2fts:main
 urllogin = c2cgeoportal_geoportal.scripts.urllogin:main
 
 [lingua.extractors]
 geomapfish-angular = c2cgeoportal_geoportal.lib.lingua_extractor:GeomapfishAngularExtractor
 geomapfish-config = c2cgeoportal_geoportal.lib.lingua_extractor:GeomapfishConfigExtractor
 geomapfish-theme = c2cgeoportal_geoportal.lib.lingua_extractor:GeomapfishThemeExtractor
@@ -17,10 +18,11 @@
 
 [plaster.wsgi_loader_factory]
 c2cgeoportal = c2cgeoportal_geoportal.lib.loader:Loader
 c2cgeoportal+egg = c2cgeoportal_geoportal.lib.loader:Loader
 c2cgeoportal+ini = c2cgeoportal_geoportal.lib.loader:Loader
 
 [pyramid.scaffold]
+c2cgeoportal_advance_create = c2cgeoportal_geoportal.scaffolds:TemplateAdvanceCreate
+c2cgeoportal_advance_update = c2cgeoportal_geoportal.scaffolds:TemplateAdvanceUpdate
 c2cgeoportal_create = c2cgeoportal_geoportal.scaffolds:TemplateCreate
 c2cgeoportal_update = c2cgeoportal_geoportal.scaffolds:TemplateUpdate
-
```

