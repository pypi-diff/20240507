# Comparing `tmp/c2cgeoportal_commons-2.7.1.83-py3-none-any.whl.zip` & `tmp/c2cgeoportal_commons-2.9-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,82 +1,85 @@
-Zip file size: 133842 bytes, number of entries: 80
--rw-r--r--  2.0 unx     2053 b- defN 24-May-07 15:28 c2cgeoportal_commons/__init__.py
--rw-r--r--  2.0 unx        0 b- defN 24-May-07 15:28 c2cgeoportal_commons/py.typed
--rwxr-xr-x  2.0 unx     4940 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/env.py
--rw-r--r--  2.0 unx     2881 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/main/028477929d13_add_technical_roles.py
--rw-r--r--  2.0 unx     2269 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/main/04f05bfbb05e_remove_the_old_is_expanded_column.py
--rw-r--r--  2.0 unx     9071 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/main/116b9b79fc4d_internal_and_external_layer_tables_.py
--rw-r--r--  2.0 unx     2013 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/main/1418cb05921b_merge_1_6_and_master_branches.py
--rw-r--r--  2.0 unx     2220 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/main/164ac0819a61_add_image_format_to_wmts_layer.py
--rw-r--r--  2.0 unx    11246 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/main/166ff2dcc48d_create_database.py
--rw-r--r--  2.0 unx     2251 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/main/16e43f8c0330_remove_old_metadata_column.py
--rw-r--r--  2.0 unx     2868 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/main/1d5d4abfebd1_add_restricted_theme.py
--rw-r--r--  2.0 unx     3397 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/main/1de20166b274_remove_v1_artifacts.py
--rw-r--r--  2.0 unx     3561 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/main/20137477bd02_update_icons_url.py
--rw-r--r--  2.0 unx     2794 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/main/21f11066f8ec_trigger_on_role_updates_user_in_static.py
--rw-r--r--  2.0 unx     2416 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/main/22e6dfb556de_add_description_tree_.py
--rw-r--r--  2.0 unx     2013 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/main/29f2a32859ec_merge_1_6_and_master_branches.py
--rw-r--r--  2.0 unx     2278 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/main/2b8ed8c1df94_set_layergroup_treeitem_is_as_a_primary_.py
--rw-r--r--  2.0 unx     2819 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/main/32527659d57b_move_exclude_properties_from_layerv1_to_.py
--rw-r--r--  2.0 unx     2025 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/main/32b21aa1d0ed_merge_e004f76e951a_and_e004f76e951a_.py
--rw-r--r--  2.0 unx     2798 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/main/338b57593823_remove_trigger_on_role_name_change.py
--rw-r--r--  2.0 unx    16243 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/main/415746eb9f6_changes_for_v2.py
--rw-r--r--  2.0 unx     2518 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/main/5109242131ce_add_column_time_widget.py
--rw-r--r--  2.0 unx     2261 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/main/52916d8fde8b_add_sql_fields_to_vector_tiles.py
--rw-r--r--  2.0 unx     3005 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/main/53ba1a68d5fe_add_theme_to_fulltextsearch.py
--rw-r--r--  2.0 unx     3638 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/main/54645a535ad6_add_ordering_in_relation.py
--rw-r--r--  2.0 unx     2336 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/main/56dc90838d90_fix_removing_layerv1.py
--rw-r--r--  2.0 unx     2497 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/main/596ba21e3833_separate_local_internal.py
--rw-r--r--  2.0 unx     2448 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/main/678f88c7ad5e_add_vector_tiles_layers_table.py
--rw-r--r--  2.0 unx     2535 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/main/6a412d9437b1_rename_serverogc_to_ogcserver.py
--rw-r--r--  2.0 unx     2528 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/main/6d87fdad275a_convert_metadata_to_the_right_case.py
--rw-r--r--  2.0 unx     2794 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/main/7530011a66a7_trigger_on_role_updates_user_in_static.py
--rw-r--r--  2.0 unx     5235 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/main/78fd093c8393_add_api_s_intrfaces.py
--rw-r--r--  2.0 unx     2453 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/main/7d271f4527cd_add_layer_column_in_layerv1_table.py
--rw-r--r--  2.0 unx     2260 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/main/809650bd04c3_add_dimension_field.py
--rw-r--r--  2.0 unx     3012 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/main/8117bb9bba16_use_dimension_on_all_the_layers.py
--rw-r--r--  2.0 unx     9368 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/main/87f8330ed64e_add_missing_delete_cascades.py
--rw-r--r--  2.0 unx     2734 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/main/9268a1dffac0_add_trigger_to_be_able_to_correctly_.py
--rw-r--r--  2.0 unx     2013 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/main/94db7e7e5b21_merge_2_2_and_master_branches.py
--rw-r--r--  2.0 unx     6818 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/main/951ff84bd8ec_be_able_to_delete_a_wms_layer_in_sql.py
--rw-r--r--  2.0 unx     2413 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/main/a00109812f89_add_field_layer_wms_valid.py
--rw-r--r--  2.0 unx     2011 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/main/a4f1aac9bda_merge_1_6_and_master_branches.py
--rw-r--r--  2.0 unx     2199 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/main/b60f2a505f42_remame_uimetadata_to_metadata.py
--rw-r--r--  2.0 unx     2434 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/main/c75124553bf3_remove_deprecated_columns.py
--rw-r--r--  2.0 unx     2535 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/main/d48a63b348f1_change_mapserver_url_for_docker.py
--rw-r--r--  2.0 unx     3434 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/main/d8ef99bc227e_be_able_to_delete_a_linked_functionality.py
--rw-r--r--  2.0 unx     2013 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/main/daf738d5bae4_merge_2_0_and_master_branches.py
--rw-r--r--  2.0 unx     2000 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/main/dba87f2647f9_merge_2_2_on_2_3.py
--rw-r--r--  2.0 unx     4408 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/main/e004f76e951a_add_missing_not_null.py
--rw-r--r--  2.0 unx     3142 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/main/e7e03dedade3_put_the_default_wms_server_in_the_.py
--rw-r--r--  2.0 unx     3338 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/main/e85afd327ab3_cascade_deletes_to_tsearch.py
--rw-r--r--  2.0 unx     2977 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/main/ec82a8906649_add_missing_on_delete_cascade_on_layer_.py
--rw-r--r--  2.0 unx     2355 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/main/ee25d267bf46_main_interface_desktop.py
--rw-r--r--  2.0 unx     2014 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/main/eeb345672454_merge_2_4_and_master_branches.py
--rw-r--r--  2.0 unx     2315 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/static/0c640a58a09a_add_opt_key_column.py
--rw-r--r--  2.0 unx     2763 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/static/107b81f5b9fe_add_missing_delete_cascades.py
--rw-r--r--  2.0 unx     2660 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/static/1857owc78a07_add_last_login_and_expiration_date.py
--rw-r--r--  2.0 unx     6242 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/static/1da396a88908_move_user_table_to_static_schema.py
--rw-r--r--  2.0 unx     2100 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/static/3f89a7d71a5e_alter_column_url_to_remove_limitation.py
--rw-r--r--  2.0 unx     2727 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/static/53d671b17b20_add_timezone_on_datetime_fields.py
--rw-r--r--  2.0 unx     2280 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/static/5472fbc19f39_add_temp_password_column.py
--rw-r--r--  2.0 unx     4090 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/static/7ef947f30f20_add_oauth2_tables.py
--rw-r--r--  2.0 unx     3633 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/static/ae5e88f35669_add_table_user_role.py
--rw-r--r--  2.0 unx     2119 b- defN 24-May-07 15:28 c2cgeoportal_commons/alembic/static/bd029dbfc11a_fill_tech_data_column.py
--rw-r--r--  2.0 unx        0 b- defN 24-May-07 15:28 c2cgeoportal_commons/lib/__init__.py
--rw-r--r--  2.0 unx     3485 b- defN 24-May-07 15:28 c2cgeoportal_commons/lib/email_.py
--rw-r--r--  2.0 unx     2036 b- defN 24-May-07 15:28 c2cgeoportal_commons/lib/literal.py
--rw-r--r--  2.0 unx     8304 b- defN 24-May-07 15:28 c2cgeoportal_commons/lib/url.py
--rw-r--r--  2.0 unx     1830 b- defN 24-May-07 15:28 c2cgeoportal_commons/lib/validators.py
--rw-r--r--  2.0 unx     2553 b- defN 24-May-07 15:28 c2cgeoportal_commons/models/__init__.py
--rw-r--r--  2.0 unx    58452 b- defN 24-May-07 15:28 c2cgeoportal_commons/models/main.py
--rw-r--r--  2.0 unx     2834 b- defN 24-May-07 15:28 c2cgeoportal_commons/models/sqlalchemy.py
--rw-r--r--  2.0 unx    15162 b- defN 24-May-07 15:28 c2cgeoportal_commons/models/static.py
--rw-r--r--  2.0 unx     3807 b- defN 24-May-07 15:28 c2cgeoportal_commons/testing/__init__.py
--rw-r--r--  2.0 unx     3155 b- defN 24-May-07 15:28 c2cgeoportal_commons/testing/initializedb.py
--rw-r--r--  2.0 unx        0 b- defN 24-May-07 15:28 tests/__init__.py
--rw-r--r--  2.0 unx     1449 b- defN 24-May-07 15:28 tests/conftest.py
--rw-r--r--  2.0 unx     1877 b- defN 24-May-07 16:10 c2cgeoportal_commons-2.7.1.83.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 24-May-07 16:10 c2cgeoportal_commons-2.7.1.83.dist-info/WHEEL
--rw-r--r--  2.0 unx       27 b- defN 24-May-07 16:10 c2cgeoportal_commons-2.7.1.83.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     9901 b- defN 24-May-07 16:10 c2cgeoportal_commons-2.7.1.83.dist-info/RECORD
-80 files, 325775 bytes uncompressed, 116932 bytes compressed:  64.1%
+Zip file size: 139196 bytes, number of entries: 83
+-rw-r--r--  2.0 unx     2053 b- defN 24-May-07 15:29 c2cgeoportal_commons/__init__.py
+-rw-r--r--  2.0 unx        0 b- defN 24-May-07 15:29 c2cgeoportal_commons/py.typed
+-rwxr-xr-x  2.0 unx     5144 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/env.py
+-rw-r--r--  2.0 unx     2848 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/main/028477929d13_add_technical_roles.py
+-rw-r--r--  2.0 unx     2269 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/main/04f05bfbb05e_remove_the_old_is_expanded_column.py
+-rw-r--r--  2.0 unx     8800 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/main/116b9b79fc4d_internal_and_external_layer_tables_.py
+-rw-r--r--  2.0 unx     1959 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/main/1418cb05921b_merge_1_6_and_master_branches.py
+-rw-r--r--  2.0 unx     2220 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/main/164ac0819a61_add_image_format_to_wmts_layer.py
+-rw-r--r--  2.0 unx    11264 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/main/166ff2dcc48d_create_database.py
+-rw-r--r--  2.0 unx     2251 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/main/16e43f8c0330_remove_old_metadata_column.py
+-rw-r--r--  2.0 unx     2852 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/main/1d5d4abfebd1_add_restricted_theme.py
+-rw-r--r--  2.0 unx     3397 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/main/1de20166b274_remove_v1_artifacts.py
+-rw-r--r--  2.0 unx     3561 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/main/20137477bd02_update_icons_url.py
+-rw-r--r--  2.0 unx     2812 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/main/21f11066f8ec_trigger_on_role_updates_user_in_static.py
+-rw-r--r--  2.0 unx     2416 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/main/22e6dfb556de_add_description_tree_.py
+-rw-r--r--  2.0 unx     1959 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/main/29f2a32859ec_merge_1_6_and_master_branches.py
+-rw-r--r--  2.0 unx     2278 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/main/2b8ed8c1df94_set_layergroup_treeitem_is_as_a_primary_.py
+-rw-r--r--  2.0 unx     2773 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/main/32527659d57b_move_exclude_properties_from_layerv1_to_.py
+-rw-r--r--  2.0 unx     1971 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/main/32b21aa1d0ed_merge_e004f76e951a_and_e004f76e951a_.py
+-rw-r--r--  2.0 unx     2796 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/main/338b57593823_remove_trigger_on_role_name_change.py
+-rw-r--r--  2.0 unx    15960 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/main/415746eb9f6_changes_for_v2.py
+-rw-r--r--  2.0 unx     2703 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/main/44c91d82d419_add_table_log.py
+-rw-r--r--  2.0 unx     2553 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/main/5109242131ce_add_column_time_widget.py
+-rw-r--r--  2.0 unx     2275 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/main/52916d8fde8b_add_sql_fields_to_vector_tiles.py
+-rw-r--r--  2.0 unx     3005 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/main/53ba1a68d5fe_add_theme_to_fulltextsearch.py
+-rw-r--r--  2.0 unx     3546 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/main/54645a535ad6_add_ordering_in_relation.py
+-rw-r--r--  2.0 unx     2336 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/main/56dc90838d90_fix_removing_layerv1.py
+-rw-r--r--  2.0 unx     2419 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/main/596ba21e3833_separate_local_internal.py
+-rw-r--r--  2.0 unx     2448 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/main/678f88c7ad5e_add_vector_tiles_layers_table.py
+-rw-r--r--  2.0 unx     2503 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/main/6a412d9437b1_rename_serverogc_to_ogcserver.py
+-rw-r--r--  2.0 unx     2528 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/main/6d87fdad275a_convert_metadata_to_the_right_case.py
+-rw-r--r--  2.0 unx     2812 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/main/7530011a66a7_trigger_on_role_updates_user_in_static.py
+-rw-r--r--  2.0 unx     4878 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/main/78fd093c8393_add_api_s_intrfaces.py
+-rw-r--r--  2.0 unx     2453 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/main/7d271f4527cd_add_layer_column_in_layerv1_table.py
+-rw-r--r--  2.0 unx     2260 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/main/809650bd04c3_add_dimension_field.py
+-rw-r--r--  2.0 unx     2980 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/main/8117bb9bba16_use_dimension_on_all_the_layers.py
+-rw-r--r--  2.0 unx     9368 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/main/87f8330ed64e_add_missing_delete_cascades.py
+-rw-r--r--  2.0 unx     2734 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/main/9268a1dffac0_add_trigger_to_be_able_to_correctly_.py
+-rw-r--r--  2.0 unx     1959 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/main/94db7e7e5b21_merge_2_2_and_master_branches.py
+-rw-r--r--  2.0 unx     6818 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/main/951ff84bd8ec_be_able_to_delete_a_wms_layer_in_sql.py
+-rw-r--r--  2.0 unx     2409 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/main/a00109812f89_add_field_layer_wms_valid.py
+-rw-r--r--  2.0 unx     1957 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/main/a4f1aac9bda_merge_1_6_and_master_branches.py
+-rw-r--r--  2.0 unx     2199 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/main/b60f2a505f42_remame_uimetadata_to_metadata.py
+-rw-r--r--  2.0 unx     2434 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/main/c75124553bf3_remove_deprecated_columns.py
+-rw-r--r--  2.0 unx     2457 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/main/d48a63b348f1_change_mapserver_url_for_docker.py
+-rw-r--r--  2.0 unx     3434 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/main/d8ef99bc227e_be_able_to_delete_a_linked_functionality.py
+-rw-r--r--  2.0 unx     1959 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/main/daf738d5bae4_merge_2_0_and_master_branches.py
+-rw-r--r--  2.0 unx     1946 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/main/dba87f2647f9_merge_2_2_on_2_3.py
+-rw-r--r--  2.0 unx     4180 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/main/e004f76e951a_add_missing_not_null.py
+-rw-r--r--  2.0 unx     3064 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/main/e7e03dedade3_put_the_default_wms_server_in_the_.py
+-rw-r--r--  2.0 unx     3338 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/main/e85afd327ab3_cascade_deletes_to_tsearch.py
+-rw-r--r--  2.0 unx     2977 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/main/ec82a8906649_add_missing_on_delete_cascade_on_layer_.py
+-rw-r--r--  2.0 unx     2263 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/main/ee25d267bf46_main_interface_desktop.py
+-rw-r--r--  2.0 unx     1960 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/main/eeb345672454_merge_2_4_and_master_branches.py
+-rw-r--r--  2.0 unx     2315 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/static/0c640a58a09a_add_opt_key_column.py
+-rw-r--r--  2.0 unx     2763 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/static/107b81f5b9fe_add_missing_delete_cascades.py
+-rw-r--r--  2.0 unx     2660 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/static/1857owc78a07_add_last_login_and_expiration_date.py
+-rw-r--r--  2.0 unx     6116 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/static/1da396a88908_move_user_table_to_static_schema.py
+-rw-r--r--  2.0 unx     2100 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/static/3f89a7d71a5e_alter_column_url_to_remove_limitation.py
+-rw-r--r--  2.0 unx     2745 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/static/44c91d82d419_add_table_log.py
+-rw-r--r--  2.0 unx     2727 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/static/53d671b17b20_add_timezone_on_datetime_fields.py
+-rw-r--r--  2.0 unx     2280 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/static/5472fbc19f39_add_temp_password_column.py
+-rw-r--r--  2.0 unx     3134 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/static/76d72fb3fcb9_add_oauth2_pkce.py
+-rw-r--r--  2.0 unx     4095 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/static/7ef947f30f20_add_oauth2_tables.py
+-rw-r--r--  2.0 unx     3423 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/static/ae5e88f35669_add_table_user_role.py
+-rw-r--r--  2.0 unx     2119 b- defN 24-May-07 15:29 c2cgeoportal_commons/alembic/static/bd029dbfc11a_fill_tech_data_column.py
+-rw-r--r--  2.0 unx        0 b- defN 24-May-07 15:29 c2cgeoportal_commons/lib/__init__.py
+-rw-r--r--  2.0 unx     3473 b- defN 24-May-07 15:29 c2cgeoportal_commons/lib/email_.py
+-rw-r--r--  2.0 unx     2036 b- defN 24-May-07 15:29 c2cgeoportal_commons/lib/literal.py
+-rw-r--r--  2.0 unx     8293 b- defN 24-May-07 15:29 c2cgeoportal_commons/lib/url.py
+-rw-r--r--  2.0 unx     1805 b- defN 24-May-07 15:29 c2cgeoportal_commons/lib/validators.py
+-rw-r--r--  2.0 unx     2765 b- defN 24-May-07 15:29 c2cgeoportal_commons/models/__init__.py
+-rw-r--r--  2.0 unx    63084 b- defN 24-May-07 15:29 c2cgeoportal_commons/models/main.py
+-rw-r--r--  2.0 unx     2813 b- defN 24-May-07 15:29 c2cgeoportal_commons/models/sqlalchemy.py
+-rw-r--r--  2.0 unx    17453 b- defN 24-May-07 15:29 c2cgeoportal_commons/models/static.py
+-rw-r--r--  2.0 unx     4081 b- defN 24-May-07 15:29 c2cgeoportal_commons/testing/__init__.py
+-rw-r--r--  2.0 unx     3224 b- defN 24-May-07 15:29 c2cgeoportal_commons/testing/initializedb.py
+-rw-r--r--  2.0 unx        0 b- defN 24-May-07 15:29 tests/__init__.py
+-rw-r--r--  2.0 unx     1450 b- defN 24-May-07 15:29 tests/conftest.py
+-rw-r--r--  2.0 unx     1836 b- defN 24-May-07 16:19 c2cgeoportal_commons-2.9.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 24-May-07 16:19 c2cgeoportal_commons-2.9.dist-info/WHEEL
+-rw-r--r--  2.0 unx       27 b- defN 24-May-07 16:19 c2cgeoportal_commons-2.9.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx    10247 b- defN 24-May-07 16:19 c2cgeoportal_commons-2.9.dist-info/RECORD
+83 files, 339894 bytes uncompressed, 121708 bytes compressed:  64.2%
```

## zipnote {}

```diff
@@ -57,14 +57,17 @@
 
 Filename: c2cgeoportal_commons/alembic/main/338b57593823_remove_trigger_on_role_name_change.py
 Comment: 
 
 Filename: c2cgeoportal_commons/alembic/main/415746eb9f6_changes_for_v2.py
 Comment: 
 
+Filename: c2cgeoportal_commons/alembic/main/44c91d82d419_add_table_log.py
+Comment: 
+
 Filename: c2cgeoportal_commons/alembic/main/5109242131ce_add_column_time_widget.py
 Comment: 
 
 Filename: c2cgeoportal_commons/alembic/main/52916d8fde8b_add_sql_fields_to_vector_tiles.py
 Comment: 
 
 Filename: c2cgeoportal_commons/alembic/main/53ba1a68d5fe_add_theme_to_fulltextsearch.py
@@ -168,20 +171,26 @@
 
 Filename: c2cgeoportal_commons/alembic/static/1da396a88908_move_user_table_to_static_schema.py
 Comment: 
 
 Filename: c2cgeoportal_commons/alembic/static/3f89a7d71a5e_alter_column_url_to_remove_limitation.py
 Comment: 
 
+Filename: c2cgeoportal_commons/alembic/static/44c91d82d419_add_table_log.py
+Comment: 
+
 Filename: c2cgeoportal_commons/alembic/static/53d671b17b20_add_timezone_on_datetime_fields.py
 Comment: 
 
 Filename: c2cgeoportal_commons/alembic/static/5472fbc19f39_add_temp_password_column.py
 Comment: 
 
+Filename: c2cgeoportal_commons/alembic/static/76d72fb3fcb9_add_oauth2_pkce.py
+Comment: 
+
 Filename: c2cgeoportal_commons/alembic/static/7ef947f30f20_add_oauth2_tables.py
 Comment: 
 
 Filename: c2cgeoportal_commons/alembic/static/ae5e88f35669_add_table_user_role.py
 Comment: 
 
 Filename: c2cgeoportal_commons/alembic/static/bd029dbfc11a_fill_tech_data_column.py
@@ -222,20 +231,20 @@
 
 Filename: tests/__init__.py
 Comment: 
 
 Filename: tests/conftest.py
 Comment: 
 
-Filename: c2cgeoportal_commons-2.7.1.83.dist-info/METADATA
+Filename: c2cgeoportal_commons-2.9.dist-info/METADATA
 Comment: 
 
-Filename: c2cgeoportal_commons-2.7.1.83.dist-info/WHEEL
+Filename: c2cgeoportal_commons-2.9.dist-info/WHEEL
 Comment: 
 
-Filename: c2cgeoportal_commons-2.7.1.83.dist-info/top_level.txt
+Filename: c2cgeoportal_commons-2.9.dist-info/top_level.txt
 Comment: 
 
-Filename: c2cgeoportal_commons-2.7.1.83.dist-info/RECORD
+Filename: c2cgeoportal_commons-2.9.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## c2cgeoportal_commons/alembic/env.py

```diff
@@ -1,8 +1,8 @@
-# Copyright (c) 2014-2019, Camptocamp SA
+# Copyright (c) 2014-2024, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -25,38 +25,42 @@
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
 
 # pylint: disable=no-member
 
 import logging.config
-from typing import Any, Dict, Union, cast
+from typing import Any, Union, cast
 
-import c2cwsgiutils.pyramid_logging
 import sqlalchemy
 from alembic import context
 from c2c.template.config import config
 from plaster.loaders import setup_logging
 from sqlalchemy import engine_from_config, pool
 
 LOG = logging.getLogger(__name__)
 
 
 # Interpret the config file for Python logging.
 # This line sets up loggers basically.
 setup_logging(context.config.config_file_name)
 
 
-def get_config() -> Dict[str, Union[str, bool]]:
+def get_config() -> dict[str, Union[str, bool]]:
     """Get the application configuration."""
-    config.init(context.config.get_main_option("app.cfg"))
-    settings: Dict[str, Union[str, bool]] = {}
-    settings.update(config.get_config())
+    app_cfg = context.config.get_main_option("app.cfg")
+    assert app_cfg is not None
+    config.init(app_cfg)
+    conf = config.get_config()
+    assert conf is not None
+    settings: dict[str, Union[str, bool]] = {}
+    settings.update(conf)
     alembic_name = context.config.get_main_option("type")
-    schema_config_name = "schema{}".format(f"_{alembic_name}" if alembic_name != "main" else "")
+    schema_postfix = f"_{alembic_name}" if alembic_name != "main" else ""
+    schema_config_name = f"schema{schema_postfix}"
     script_location = context.config.get_main_option("script_location")
     version_table = context.config.get_main_option("version_table")
     version_locations = context.config.get_main_option("version_locations")
     assert script_location
     assert version_table
     assert version_locations
     settings.update(
@@ -91,35 +95,34 @@
 
 def run_migrations_online() -> None:
     """
     Run migrations in 'online' mode.
 
     In this scenario we need to create an Engine and associate a connection with the context.
     """
-    conf: Dict[str, Any] = get_config()
+    conf: dict[str, Any] = get_config()
 
     # Autogenerate config
     alembic_name = context.config.get_main_option("type")
-    from c2cgeoportal_commons.models import Base, main, static
+    from c2cgeoportal_commons.models import Base, main, static  # pylint: disable=import-outside-toplevel
 
-    _schema = main._schema if alembic_name == "main" else static._schema
+    _schema = main._schema if alembic_name == "main" else static._schema  # pylint: disable=protected-access
 
     def include_object(
         obj: sqlalchemy.ext.declarative.ConcreteBase,
         name: str,
         type_: str,
         reflected: str,
         compare_to: str,
     ) -> bool:
         del name, reflected, compare_to
 
         if type_ == "table":
-            return cast(bool, obj.schema == _schema)
-        else:
-            return cast(bool, obj.table.schema == _schema)
+            return cast(bool, obj.schema == _schema)  # type: ignore[attr-defined]
+        return cast(bool, obj.table.schema == _schema)  # type: ignore[attr-defined]
 
     if _schema:
         conf.update(
             {"target_metadata": Base.metadata, "include_schemas": True, "include_object": include_object}
         )
 
     engine = engine_from_config(conf, prefix="sqlalchemy.", poolclass=pool.NullPool)
```

## c2cgeoportal_commons/alembic/main/028477929d13_add_technical_roles.py

```diff
@@ -1,8 +1,8 @@
-# Copyright (c) 2019-2021, Camptocamp SA
+# Copyright (c) 2019-2023, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -66,8 +66,8 @@
 
 
 def downgrade() -> None:
     """Downgrade."""
     schema = config["schema"]
 
     for name in ("anonymous", "registered", "intranet"):
-        op.execute('DELETE FROM {schema}."role" ' "WHERE name = '{name}'".format(name=name, schema=schema))
+        op.execute(f"DELETE FROM {schema}.\"role\" WHERE name = '{name}'")
```

## c2cgeoportal_commons/alembic/main/04f05bfbb05e_remove_the_old_is_expanded_column.py

```diff
@@ -1,8 +1,8 @@
-# Copyright (c) 2020-2021, Camptocamp SA
+# Copyright (c) 2020-2023, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
```

## c2cgeoportal_commons/alembic/main/116b9b79fc4d_internal_and_external_layer_tables_.py

```diff
@@ -1,8 +1,8 @@
-# Copyright (c) 2015-2019, Camptocamp SA
+# Copyright (c) 2015-2024, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -82,88 +82,84 @@
     # move data from layer_internal_wms and layer_external_wms to the new
     # layer_wms and server_ogc tables
 
     # ocg for internal
 
     # default 'image/jpeg', 'image/png'
     op.execute(
-        "INSERT INTO %(schema)s.server_ogc (name, description, type, image_type, "
+        f"INSERT INTO {schema}.server_ogc (name, description, type, image_type, "
         "  auth, wfs_support) "
         "SELECT 'source for ' || image_type AS name, "
         "  'default source for internal ' || image_type AS description, "
         "  'mapserver' AS type, "
         "  image_type, "
         "  'Standard auth' AS auth, "
         "  'true' AS wfs_support "
         "FROM ("
         "  SELECT UNNEST(ARRAY['image/jpeg', 'image/png']) AS image_type"
-        ") AS foo" % {"schema": schema}
+        ") AS foo"
     )
     # other custom image types
     op.execute(
-        "INSERT INTO %(schema)s.server_ogc (name, description, type, image_type, "
+        f"INSERT INTO {schema}.server_ogc (name, description, type, image_type, "
         "  auth, wfs_support) "
         "SELECT 'source for ' || image_type AS name, "
         "  'default source for internal ' || image_type AS description, "
         "  'mapserver' AS type, "
         "  image_type, "
         "  'Standard auth' AS auth, "
         "  'true' AS wfs_support "
         "FROM ("
-        "  SELECT DISTINCT(image_type) FROM %(schema)s.layer_internal_wms "
+        f"  SELECT DISTINCT(image_type) FROM {schema}.layer_internal_wms "
         "  WHERE image_type NOT IN ('image/jpeg', 'image/png')"
-        ") as foo" % {"schema": schema}
+        ") as foo"
     )
 
     # layers for internal
 
     # internal with not null image_type
     op.execute(
-        "INSERT INTO %(schema)s.layer_wms (id, server_ogc_id, layer, style, "
+        f"INSERT INTO {schema}.layer_wms (id, server_ogc_id, layer, style, "
         "  time_mode, time_widget) "
-        "SELECT lew.id, so.id, layer, style, time_mode, time_widget "
-        "FROM %(schema)s.layer_internal_wms AS lew, %(schema)s.server_ogc AS so "
-        "WHERE lew.image_type=so.image_type AND so.type IS NOT NULL" % {"schema": schema}
+        "SELECT layer.id, so.id, layer, style, time_mode, time_widget "
+        f"FROM {schema}.layer_internal_wms AS layer, {schema}.server_ogc AS so "
+        "WHERE layer.image_type=so.image_type AND so.type IS NOT NULL"
     )
     # internal with null image_type
     op.execute(
-        "INSERT INTO %(schema)s.layer_wms (id, server_ogc_id, layer, style, "
+        f"INSERT INTO {schema}.layer_wms (id, server_ogc_id, layer, style, "
         "  time_mode, time_widget) "
-        "SELECT lew.id, so.id, layer, style, time_mode, time_widget "
-        "FROM %(schema)s.layer_internal_wms AS lew, %(schema)s.server_ogc AS so "
-        "WHERE lew.image_type IS NULL AND so.image_type='image/png'" % {"schema": schema}
+        "SELECT layer.id, so.id, layer, style, time_mode, time_widget "
+        f"FROM {schema}.layer_internal_wms AS layer, {schema}.server_ogc AS so "
+        "WHERE layer.image_type IS NULL AND so.image_type='image/png'"
     )
 
     # ocg for externals
     op.execute(
-        "INSERT INTO %(schema)s.server_ogc (name, url, type, image_type, auth, is_single_tile) "
+        f"INSERT INTO {schema}.server_ogc (name, url, type, image_type, auth, is_single_tile) "
         "SELECT 'source for ' || url, url, 'mapserver' AS type, image_type, 'none', CASE "
         "WHEN is_single_tile IS TRUE THEN TRUE ELSE FALSE END as is_single_tile "
-        "FROM %(schema)s.layer_external_wms GROUP BY url, image_type, is_single_tile" % {"schema": schema}
+        f"FROM {schema}.layer_external_wms GROUP BY url, image_type, is_single_tile"
     )
 
     # layers for external
     op.execute(
-        "INSERT INTO %(schema)s.layer_wms (id, server_ogc_id, layer, style, "
+        f"INSERT INTO {schema}.layer_wms (id, server_ogc_id, layer, style, "
         "  time_mode, time_widget) "
-        "SELECT lew.id, so.id, layer, style, time_mode, time_widget "
-        "FROM %(schema)s.layer_external_wms as lew, %(schema)s.server_ogc as so "
-        "WHERE lew.url=so.url AND lew.is_single_tile=so.is_single_tile "
-        "AND lew.image_type=so.image_type" % {"schema": schema}
+        "SELECT layer.id, so.id, layer, style, time_mode, time_widget "
+        f"FROM {schema}.layer_external_wms as layer, {schema}.server_ogc as so "
+        "WHERE layer.url=so.url AND layer.is_single_tile=so.is_single_tile "
+        "AND layer.image_type=so.image_type"
     )
 
     op.drop_table("layer_external_wms", schema=schema)
     op.drop_table("layer_internal_wms", schema=schema)
 
     # update layer type in treeitems
-    op.execute(
-        "UPDATE %(schema)s.treeitem "
-        "SET type='l_wms' "
-        "WHERE type='l_int_wms' OR type='l_ext_wms'" % {"schema": schema}
-    )
+    op.execute(f"UPDATE {schema}.treeitem " "SET type='l_wms' " "WHERE type='l_int_wms' OR type='l_ext_wms'")
 
 
 def downgrade() -> None:
     """Downgrade."""
     schema = config["schema"]
 
     # Instructions
@@ -192,42 +188,42 @@
         Column("time_widget", Unicode(10), server_default="slider"),
         schema=schema,
     )
     # move data back
 
     # internal (type is not null)
     op.execute(
-        "INSERT INTO %(schema)s.layer_internal_wms (id, layer, image_type, style, "
+        f"INSERT INTO {schema}.layer_internal_wms (id, layer, image_type, style, "
         "  time_mode, time_widget) "
         "SELECT w.id, layer, image_type, style, time_mode, time_widget "
-        "FROM %(schema)s.layer_wms AS w, %(schema)s.server_ogc AS o "
-        "WHERE w.server_ogc_id=o.id AND o.type IS NOT NULL" % {"schema": schema}
+        f"FROM {schema}.layer_wms AS w, {schema}.server_ogc AS o "
+        "WHERE w.server_ogc_id=o.id AND o.type IS NOT NULL"
     )
 
     # external (type is null)
     op.execute(
-        "INSERT INTO %(schema)s.layer_external_wms (id, url, layer, image_type, style, "
+        f"INSERT INTO {schema}.layer_external_wms (id, url, layer, image_type, style, "
         "  is_single_tile, time_mode, time_widget) "
         "SELECT w.id, url, layer, image_type, style, is_single_tile, time_mode, time_widget "
-        "FROM %(schema)s.layer_wms AS w, %(schema)s.server_ogc AS o "
-        "WHERE w.server_ogc_id=o.id AND o.type IS NULL" % {"schema": schema}
+        f"FROM {schema}.layer_wms AS w, {schema}.server_ogc AS o "
+        "WHERE w.server_ogc_id=o.id AND o.type IS NULL"
     )
 
     # drop table AFTER moving data back
     op.drop_table("layer_wms", schema=schema)
     op.drop_table("server_ogc", schema=schema)
 
     # update layer type in treeitems
     # internal
     op.execute(
-        "UPDATE %(schema)s.treeitem "
+        f"UPDATE {schema}.treeitem "
         "SET type='l_int_wms' "
-        "FROM %(schema)s.layer_internal_wms as w "
-        "WHERE %(schema)s.treeitem.id=w.id" % {"schema": schema}
+        f"FROM {schema}.layer_internal_wms as w "
+        f"WHERE {schema}.treeitem.id=w.id"
     )
     # external
     op.execute(
-        "UPDATE %(schema)s.treeitem "
+        f"UPDATE {schema}.treeitem "
         "SET type='l_ext_wms' "
-        "FROM %(schema)s.layer_external_wms as w "
-        "WHERE %(schema)s.treeitem.id=w.id" % {"schema": schema}
+        f"FROM {schema}.layer_external_wms as w "
+        f"WHERE {schema}.treeitem.id=w.id"
     )
```

## c2cgeoportal_commons/alembic/main/1418cb05921b_merge_1_6_and_master_branches.py

```diff
@@ -1,10 +1,8 @@
-# -*- coding: utf-8 -*-
-
-# Copyright (c) 2015-2019, Camptocamp SA
+# Copyright (c) 2015-2023, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -23,16 +21,14 @@
 # (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 # SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 
 # The views and conclusions contained in the software and documentation are those
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
-# pylint: disable=no-member
-
 """
 Merge 1.6 and master branches.
 
 Revision ID: 1418cb05921b
 Revises: ('32527659d57b', '53ba1a68d5fe')
 Create Date: 2015-10-22 09:56:49.165417
 """
```

## c2cgeoportal_commons/alembic/main/164ac0819a61_add_image_format_to_wmts_layer.py

```diff
@@ -1,8 +1,8 @@
-# Copyright (c) 2015-2019, Camptocamp SA
+# Copyright (c) 2015-2024, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
```

## c2cgeoportal_commons/alembic/main/166ff2dcc48d_create_database.py

```diff
@@ -1,8 +1,8 @@
-# Copyright (c) 2014-2019, Camptocamp SA
+# Copyright (c) 2014-2024, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -43,15 +43,15 @@
 from sqlalchemy.types import Boolean, DateTime, Float, Integer, String, Unicode, UserDefinedType
 
 # revision identifiers, used by Alembic.
 revision = "166ff2dcc48d"
 down_revision = None
 
 
-class TsVector(UserDefinedType):  # type: ignore
+class TsVector(UserDefinedType):  # type: ignore # pylint: disable=abstract-method
     """A custom type for PostgreSQL's tsvector type."""
 
     def get_col_spec(self) -> str:
         return "TSVECTOR"
 
 
 def upgrade() -> None:
@@ -59,15 +59,15 @@
     schema = config["schema"]
     schema_static = config["schema_static"]
     parentschema = config.get("parentschema")
     srid = config.get("srid")
 
     engine = op.get_bind().engine
     with engine.connect() as connection:
-        if type(engine).__name__ != "MockConnection" and op.get_context().dialect.has_table(  # type: ignore
+        if type(engine).__name__ != "MockConnection" and op.get_context().dialect.has_table(
             connection, "functionality", schema=schema
         ):
             return
 
     op.create_table(
         "functionality",
         Column("id", Integer, primary_key=True),
```

## c2cgeoportal_commons/alembic/main/1d5d4abfebd1_add_restricted_theme.py

```diff
@@ -1,8 +1,8 @@
-# Copyright (c) 2014-2019, Camptocamp SA
+# Copyright (c) 2014-2023, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -47,15 +47,15 @@
 
 def upgrade() -> None:
     """Upgrade."""
     schema = config["schema"]
 
     engine = op.get_bind().engine
     with engine.connect() as connection:
-        if type(engine).__name__ != "MockConnection" and op.get_context().dialect.has_table(  # type: ignore
+        if type(engine).__name__ != "MockConnection" and op.get_context().dialect.has_table(
             connection, "restricted_role_theme", schema=schema
         ):
             return
 
     op.add_column("theme", Column("public", Boolean, server_default="t", nullable=False), schema=schema)
     op.create_table(
         "restricted_role_theme",
```

## c2cgeoportal_commons/alembic/main/1de20166b274_remove_v1_artifacts.py

```diff
@@ -1,8 +1,8 @@
-# Copyright (c) 2019-2021, Camptocamp SA
+# Copyright (c) 2019-2024, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
```

## c2cgeoportal_commons/alembic/main/20137477bd02_update_icons_url.py

```diff
@@ -1,8 +1,8 @@
-# Copyright (c) 2014-2019, Camptocamp SA
+# Copyright (c) 2014-2023, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
```

## c2cgeoportal_commons/alembic/main/21f11066f8ec_trigger_on_role_updates_user_in_static.py

```diff
@@ -1,8 +1,8 @@
-# Copyright (c) 2018-2019, Camptocamp SA
+# Copyright (c) 2018-2023, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -47,28 +47,26 @@
 
 def upgrade() -> None:
     """Upgrade."""
     schema = config["schema"]
     staticschema = config["schema_static"]
 
     op.execute(
-        """
-CREATE OR REPLACE FUNCTION {schema}.on_role_name_change()
-RETURNS trigger AS
-$$
-BEGIN
-IF NEW.name <> OLD.name THEN
-UPDATE {staticschema}."user" SET role_name = NEW.name WHERE role_name = OLD.name;
-END IF;
-RETURN NEW;
-END;
-$$
-LANGUAGE plpgsql""".format(
-            schema=schema, staticschema=staticschema
-        )
+        f"""
+        CREATE OR REPLACE FUNCTION {schema}.on_role_name_change()
+        RETURNS trigger AS
+        $$
+        BEGIN
+        IF NEW.name <> OLD.name THEN
+        UPDATE {staticschema}."user" SET role_name = NEW.name WHERE role_name = OLD.name;
+        END IF;
+        RETURN NEW;
+        END;
+        $$
+        LANGUAGE plpgsql"""
     )
 
 
 def downgrade() -> None:
     """Downgrade."""
     schema = config["schema"]
```

## c2cgeoportal_commons/alembic/main/22e6dfb556de_add_description_tree_.py

```diff
@@ -1,8 +1,8 @@
-# Copyright (c) 2015-2019, Camptocamp SA
+# Copyright (c) 2015-2023, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
```

## c2cgeoportal_commons/alembic/main/29f2a32859ec_merge_1_6_and_master_branches.py

```diff
@@ -1,10 +1,8 @@
-# -*- coding: utf-8 -*-
-
-# Copyright (c) 2015-2019, Camptocamp SA
+# Copyright (c) 2015-2023, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -23,16 +21,14 @@
 # (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 # SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 
 # The views and conclusions contained in the software and documentation are those
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
-# pylint: disable=no-member
-
 """
 Merge 1.6 and master branches.
 
 Revision ID: 29f2a32859ec
 Revises: ('22e6dfb556de', '116b9b79fc4d')
 Create Date: 2015-12-16 14:10:56.704614
 """
```

## c2cgeoportal_commons/alembic/main/2b8ed8c1df94_set_layergroup_treeitem_is_as_a_primary_.py

```diff
@@ -1,8 +1,8 @@
-# Copyright (c) 2015-2019, Camptocamp SA
+# Copyright (c) 2015-2023, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
```

## c2cgeoportal_commons/alembic/main/32527659d57b_move_exclude_properties_from_layerv1_to_.py

```diff
@@ -1,8 +1,8 @@
-# Copyright (c) 2015-2019, Camptocamp SA
+# Copyright (c) 2015-2023, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -47,25 +47,25 @@
 
 def upgrade() -> None:
     """Upgrade."""
     schema = config["schema"]
 
     op.add_column("layer", Column("exclude_properties", Unicode), schema=schema)
     op.execute(
-        "UPDATE %(schema)s.layer as l1 SET exclude_properties = l2.exclude_properties "
-        "FROM %(schema)s.layerv1 as l2 "
-        "WHERE l1.id = l2.id" % {"schema": schema}
+        f"UPDATE {schema}.layer as l1 SET exclude_properties = l2.exclude_properties "
+        f"FROM {schema}.layerv1 as l2 "
+        "WHERE l1.id = l2.id"
     )
     op.drop_column("layerv1", "exclude_properties", schema=schema)
 
 
 def downgrade() -> None:
     """Downgrade."""
     schema = config["schema"]
 
     op.add_column("layerv1", Column("exclude_properties", Unicode), schema=schema)
     op.execute(
-        "UPDATE %(schema)s.layerv1 as l1 SET exclude_properties = l2.exclude_properties "
-        "FROM %(schema)s.layer as l2 "
-        "WHERE l1.id = l2.id" % {"schema": schema}
+        f"UPDATE {schema}.layerv1 as l1 SET exclude_properties = l2.exclude_properties "
+        f"FROM {schema}.layer as l2 "
+        "WHERE l1.id = l2.id"
     )
     op.drop_column("layer", "exclude_properties", schema=schema)
```

## c2cgeoportal_commons/alembic/main/32b21aa1d0ed_merge_e004f76e951a_and_e004f76e951a_.py

```diff
@@ -1,10 +1,8 @@
-# -*- coding: utf-8 -*-
-
-# Copyright (c) 2016-2019, Camptocamp SA
+# Copyright (c) 2016-2023, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -23,16 +21,14 @@
 # (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 # SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 
 # The views and conclusions contained in the software and documentation are those
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
-# pylint: disable=no-member
-
 """
 Merge e004f76e951a and e004f76e951a heads.
 
 Revision ID: 32b21aa1d0ed
 Revises: ('7d271f4527cd', 'e004f76e951a')
 Create Date: 2016-10-20 15:09:59.215555
 """
```

## c2cgeoportal_commons/alembic/main/338b57593823_remove_trigger_on_role_name_change.py

```diff
@@ -1,8 +1,8 @@
-# Copyright (c) 2018-2019, Camptocamp SA
+# Copyright (c) 2018-2023, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -55,26 +55,24 @@
 
 def downgrade() -> None:
     """Downgrade."""
     schema = config["schema"]
     staticschema = config["schema_static"]
 
     op.execute(
-        """
-CREATE OR REPLACE FUNCTION {schema}.on_role_name_change()
-RETURNS trigger AS
-$$
-BEGIN
-IF NEW.name <> OLD.name THEN
-UPDATE {staticschema}."user" SET role_name = NEW.name WHERE role_name = OLD.name;
-END IF;
-RETURN NEW;
-END;
-$$
-LANGUAGE plpgsql""".format(
-            schema=schema, staticschema=staticschema
-        )
+        f"""
+        CREATE OR REPLACE FUNCTION {schema}.on_role_name_change()
+        RETURNS trigger AS
+        $$
+        BEGIN
+        IF NEW.name <> OLD.name THEN
+        UPDATE {staticschema}."user" SET role_name = NEW.name WHERE role_name = OLD.name;
+        END IF;
+        RETURN NEW;
+        END;
+        $$
+        LANGUAGE plpgsql"""
     )
     op.execute(
-        "CREATE TRIGGER on_role_name_change AFTER UPDATE ON {schema}.role FOR EACH ROW "
-        "EXECUTE PROCEDURE {schema}.on_role_name_change()".format(schema=schema)
+        f"CREATE TRIGGER on_role_name_change AFTER UPDATE ON {schema}.role FOR EACH ROW "
+        f"EXECUTE PROCEDURE {schema}.on_role_name_change()"
     )
```

## c2cgeoportal_commons/alembic/main/415746eb9f6_changes_for_v2.py

```diff
@@ -1,8 +1,8 @@
-# Copyright (c) 2014-2019, Camptocamp SA
+# Copyright (c) 2014-2024, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -47,15 +47,15 @@
 
 def upgrade() -> None:
     """Upgrade."""
     schema = config["schema"]
 
     engine = op.get_bind().engine
     with engine.connect() as connection:
-        if type(engine).__name__ != "MockConnection" and op.get_context().dialect.has_table(  # type: ignore
+        if type(engine).__name__ != "MockConnection" and op.get_context().dialect.has_table(
             connection, "interface", schema=schema
         ):
             return
 
     op.drop_table("user_functionality", schema=schema)
 
     op.create_table(
@@ -153,37 +153,37 @@
     op.drop_column("layer", "excludeProperties", schema=schema)
     op.drop_column("layer", "timeMode", schema=schema)
 
     interface = Table("interface", MetaData(), Column("name", Unicode), schema=schema)
     op.bulk_insert(interface, [{"name": "main"}, {"name": "mobile"}, {"name": "edit"}, {"name": "routing"}])
 
     op.execute(
-        "INSERT INTO %(schema)s.interface_layer (layer_id, interface_id) "
+        f"INSERT INTO {schema}.interface_layer (layer_id, interface_id) "
         "(SELECT l.id AS layer_id, i.id AS interface_id "
-        "FROM %(schema)s.layer AS l, %(schema)s.interface AS i "
-        "WHERE i.name in ('main', 'edit', 'routing') AND l.\"inDesktopViewer\")" % {"schema": schema}
+        f"FROM {schema}.layer AS l, {schema}.interface AS i "
+        "WHERE i.name in ('main', 'edit', 'routing') AND l.\"inDesktopViewer\")"
     )
     op.execute(
-        "INSERT INTO %(schema)s.interface_layer (layer_id, interface_id) "
+        f"INSERT INTO {schema}.interface_layer (layer_id, interface_id) "
         "(SELECT l.id AS layer_id, i.id AS interface_id "
-        "FROM %(schema)s.layer AS l, %(schema)s.interface AS i "
-        "WHERE i.name = 'mobile' AND l.\"inMobileViewer\")" % {"schema": schema}
+        f"FROM {schema}.layer AS l, {schema}.interface AS i "
+        "WHERE i.name = 'mobile' AND l.\"inMobileViewer\")"
     )
 
     op.execute(
-        "INSERT INTO %(schema)s.interface_theme (theme_id, interface_id) "
+        f"INSERT INTO {schema}.interface_theme (theme_id, interface_id) "
         "(SELECT l.id AS theme_id, i.id AS interface_id "
-        "FROM %(schema)s.theme AS l, %(schema)s.interface AS i "
-        "WHERE i.name in ('main', 'edit', 'routing') AND l.\"inDesktopViewer\")" % {"schema": schema}
+        f"FROM {schema}.theme AS l, {schema}.interface AS i "
+        "WHERE i.name in ('main', 'edit', 'routing') AND l.\"inDesktopViewer\")"
     )
     op.execute(
-        "INSERT INTO %(schema)s.interface_theme (theme_id, interface_id) "
+        f"INSERT INTO {schema}.interface_theme (theme_id, interface_id) "
         "(SELECT l.id AS theme_id, i.id AS interface_id "
-        "FROM %(schema)s.theme AS l, %(schema)s.interface AS i "
-        "WHERE i.name = 'mobile' AND l.\"inMobileViewer\")" % {"schema": schema}
+        f"FROM {schema}.theme AS l, {schema}.interface AS i "
+        "WHERE i.name = 'mobile' AND l.\"inMobileViewer\")"
     )
 
     op.drop_column("layer", "inMobileViewer", schema=schema)
     op.drop_column("layer", "inDesktopViewer", schema=schema)
 
     op.alter_column("layer", "geoTable", new_column_name="geo_table", schema=schema)
 
@@ -267,40 +267,40 @@
     op.add_column("theme", Column("inDesktopViewer", Boolean, default=True), schema=schema)
 
     op.alter_column("treeitem", "metadata_url", new_column_name="metadataURL", schema=schema)
     op.alter_column("layergroup", "is_expanded", new_column_name="isExpanded", schema=schema)
     op.alter_column("layergroup", "is_internal_wms", new_column_name="isInternalWMS", schema=schema)
     op.alter_column("layergroup", "is_base_layer", new_column_name="isBaseLayer", schema=schema)
 
-    op.execute("UPDATE ONLY %(schema)s.theme AS t " 'SET "inDesktopViewer" = FALSE' % {"schema": schema})
-    op.execute("UPDATE ONLY %(schema)s.layer AS t " 'SET "inDesktopViewer" = FALSE' % {"schema": schema})
+    op.execute(f"UPDATE ONLY {schema}.theme AS t " 'SET "inDesktopViewer" = FALSE')
+    op.execute(f"UPDATE ONLY {schema}.layer AS t " 'SET "inDesktopViewer" = FALSE')
 
     op.execute(
-        "UPDATE ONLY %(schema)s.theme AS t "
+        f"UPDATE ONLY {schema}.theme AS t "
         'SET "inMobileViewer" = TRUE '
-        "FROM %(schema)s.interface AS i, %(schema)s.interface_theme AS it "
-        "WHERE i.name = 'mobile' AND i.id = it.interface_id AND it.theme_id = t.id" % {"schema": schema}
+        f"FROM {schema}.interface AS i, {schema}.interface_theme AS it "
+        "WHERE i.name = 'mobile' AND i.id = it.interface_id AND it.theme_id = t.id"
     )
     op.execute(
-        "UPDATE ONLY %(schema)s.theme AS t "
+        f"UPDATE ONLY {schema}.theme AS t "
         'SET "inDesktopViewer" = TRUE '
-        "FROM %(schema)s.interface AS i, %(schema)s.interface_theme AS it "
-        "WHERE i.name = 'main' AND i.id = it.interface_id AND it.theme_id = t.id" % {"schema": schema}
+        f"FROM {schema}.interface AS i, {schema}.interface_theme AS it "
+        "WHERE i.name = 'main' AND i.id = it.interface_id AND it.theme_id = t.id"
     )
     op.execute(
-        "UPDATE ONLY %(schema)s.layer AS l "
+        f"UPDATE ONLY {schema}.layer AS l "
         'SET "inMobileViewer" = TRUE '
-        "FROM %(schema)s.interface AS i, %(schema)s.interface_layer AS il "
-        "WHERE i.name = 'mobile' AND i.id = il.interface_id AND il.layer_id = l.id" % {"schema": schema}
+        f"FROM {schema}.interface AS i, {schema}.interface_layer AS il "
+        "WHERE i.name = 'mobile' AND i.id = il.interface_id AND il.layer_id = l.id"
     )
     op.execute(
-        "UPDATE ONLY %(schema)s.layer AS l "
+        f"UPDATE ONLY {schema}.layer AS l "
         'SET "inDesktopViewer" = TRUE '
-        "FROM %(schema)s.interface AS i, %(schema)s.interface_layer AS il "
-        "WHERE i.name = 'main' AND i.id = il.interface_id AND il.layer_id = l.id" % {"schema": schema}
+        f"FROM {schema}.interface AS i, {schema}.interface_layer AS il "
+        "WHERE i.name = 'main' AND i.id = il.interface_id AND il.layer_id = l.id"
     )
 
     op.add_column("layer", Column("timeMode", Unicode(8)), schema=schema)
     op.add_column("layer", Column("excludeProperties", Unicode), schema=schema)
     op.add_column("layer", Column("identifierAttributeField", Unicode), schema=schema)
     op.add_column("layer", Column("disclaimer", Unicode), schema=schema)
     op.add_column("layer", Column("maxResolution", Float), schema=schema)
@@ -320,26 +320,26 @@
     op.add_column("layer", Column("imageType", Unicode(10)), schema=schema)
     op.add_column("layer", Column("url", Unicode), schema=schema)
     op.add_column("layer", Column("layerType", Unicode(12)), schema=schema)
     op.add_column("layer", Column("icon", Unicode), schema=schema)
     op.add_column("layer", Column("isChecked", Boolean, default=True), schema=schema)
 
     op.execute(
-        "UPDATE %(schema)s.layer AS l SET ("
+        f"UPDATE {schema}.layer AS l SET ("
         'id, "isChecked", icon, "layerType", url, "imageType", style, dimensions, "matrixSet", '
         '"wmsUrl", "wmsLayers", "queryLayers", kml, "isSingleTile", legend, "legendImage", '
         '"legendRule", "isLegendExpanded", "minResolution", "maxResolution", disclaimer, '
         '"identifierAttributeField", "excludeProperties", "timeMode"'
         ") = ("
         "o.id, o.is_checked, o.icon, o.layer_type, o.url, o.image_type, o.style, o.dimensions, "
         "o.matrix_set, o.wms_url, o.wms_layers, o.query_layers, o.kml, o.is_single_tile, "
         "o.legend, o.legend_image, o.legend_rule, o.is_legend_expanded, o.min_resolution, "
         "o.max_resolution, o.disclaimer, o.identifier_attribute_field, o.exclude_properties, "
         "o.time_mode "
-        ") FROM %(schema)s.layerv1 AS o WHERE o.id = l.id" % {"schema": schema}
+        f") FROM {schema}.layerv1 AS o WHERE o.id = l.id"
     )
 
     op.drop_table("layerv1", schema=schema)
     op.drop_table("interface_theme", schema=schema)
     op.drop_table("interface_layer", schema=schema)
     op.drop_table("interface", schema=schema)
```

## c2cgeoportal_commons/alembic/main/5109242131ce_add_column_time_widget.py

```diff
@@ -1,8 +1,8 @@
-# Copyright (c) 2015-2019, Camptocamp SA
+# Copyright (c) 2015-2024, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -31,14 +31,15 @@
 add column time_widget.
 
 Revision ID: 5109242131ce
 Revises: 164ac0819a61
 Create Date: 2015-04-27 17:31:41.760977
 """
 
+import sqlalchemy
 from alembic import op
 from c2c.template.config import config
 from sqlalchemy import Column
 from sqlalchemy.types import Unicode
 
 # revision identifiers, used by Alembic.
 revision = "5109242131ce"
@@ -48,15 +49,15 @@
 def upgrade() -> None:
     """Upgrade."""
     schema = config["schema"]
 
     # Instructions
     for table in ["layerv1", "layer_internal_wms", "layer_external_wms"]:
         op.add_column(table, Column("time_widget", Unicode(10), default="slider"), schema=schema)
-        op.execute(f"UPDATE {schema!s}.{table!s} SET time_widget = 'slider'")
+        op.execute(sqlalchemy.text(f"UPDATE {schema!s}.{table!s} SET time_widget = 'slider'"))
 
 
 def downgrade() -> None:
     """Downgrade."""
     schema = config["schema"]
 
     # Instructions
```

## c2cgeoportal_commons/alembic/main/52916d8fde8b_add_sql_fields_to_vector_tiles.py

```diff
@@ -1,8 +1,8 @@
-# Copyright (c) 2020-2021, Camptocamp SA
+# Copyright (c) 2020-2023, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -44,15 +44,15 @@
 depends_on = None
 
 
 def upgrade() -> None:
     """Upgrade."""
     schema = config["schema"]
     table = "layer_vectortiles"
-    op.add_column(table, Column("sql", Unicode, nullable=True), schema)
+    op.add_column(table, Column("sql", Unicode, nullable=True), schema=schema)
 
 
 def downgrade() -> None:
     """Downgrade."""
     schema = config["schema"]
     table = "layer_vectortiles"
-    op.drop_column(table, "sql", schema)
+    op.drop_column(table, "sql", schema=schema)
```

## c2cgeoportal_commons/alembic/main/53ba1a68d5fe_add_theme_to_fulltextsearch.py

```diff
@@ -1,8 +1,8 @@
-# Copyright (c) 2015-2019, Camptocamp SA
+# Copyright (c) 2015-2023, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
```

## c2cgeoportal_commons/alembic/main/54645a535ad6_add_ordering_in_relation.py

```diff
@@ -1,8 +1,8 @@
-# Copyright (c) 2014-2019, Camptocamp SA
+# Copyright (c) 2014-2023, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -49,36 +49,36 @@
     """Upgrade."""
     schema = config["schema"]
 
     op.drop_constraint("layergroup_treeitem_pkey", "layergroup_treeitem", schema=schema)
     op.add_column("layergroup_treeitem", Column("id", Integer, primary_key=True), schema=schema)
     op.add_column("layergroup_treeitem", Column("ordering", Integer), schema=schema)
     op.execute(
-        'UPDATE ONLY %(schema)s.layergroup_treeitem AS lt SET ordering = ti."order" '
-        "FROM %(schema)s.treeitem AS ti WHERE ti.id = lt.treeitem_id " % {"schema": schema}
+        f'UPDATE ONLY {schema}.layergroup_treeitem AS lt SET ordering = ti."order" '
+        f"FROM {schema}.treeitem AS ti WHERE ti.id = lt.treeitem_id "
     )
     op.add_column("theme", Column("ordering", Integer), schema=schema)
     op.execute(
-        'UPDATE ONLY %(schema)s.theme AS t SET ordering = ti."order" '
-        "FROM %(schema)s.treeitem AS ti WHERE ti.id = t.id " % {"schema": schema}
+        f'UPDATE ONLY {schema}.theme AS t SET ordering = ti."order" '
+        f"FROM {schema}.treeitem AS ti WHERE ti.id = t.id "
     )
     op.drop_column("treeitem", "order", schema=schema)
 
 
 def downgrade() -> None:
     """Downgrade."""
     schema = config["schema"]
     op.add_column("treeitem", Column("order", Integer), schema=schema)
     op.execute(
-        'UPDATE ONLY %(schema)s.treeitem AS ti SET "order" = lt.ordering '
-        "FROM %(schema)s.layergroup_treeitem AS lt WHERE ti.id = lt.treeitem_id " % {"schema": schema}
+        f'UPDATE ONLY {schema}.treeitem AS ti SET "order" = lt.ordering '
+        f"FROM {schema}.layergroup_treeitem AS lt WHERE ti.id = lt.treeitem_id "
     )
     op.execute(
-        'UPDATE ONLY %(schema)s.treeitem AS ti SET "order" = t.ordering '
-        "FROM %(schema)s.theme AS t WHERE ti.id = t.id " % {"schema": schema}
+        f'UPDATE ONLY {schema}.treeitem AS ti SET "order" = t.ordering '
+        f"FROM {schema}.theme AS t WHERE ti.id = t.id "
     )
     op.drop_column("theme", "ordering", schema=schema)
     op.drop_column("layergroup_treeitem", "ordering", schema=schema)
     op.drop_column("layergroup_treeitem", "id", schema=schema)
     op.create_primary_key(
         "layergroup_treeitem_pkey", "layergroup_treeitem", ["treegroup_id", "treeitem_id"], schema=schema
     )
```

## c2cgeoportal_commons/alembic/main/596ba21e3833_separate_local_internal.py

```diff
@@ -1,8 +1,8 @@
-# Copyright (c) 2016-2019, Camptocamp SA
+# Copyright (c) 2016-2023, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -46,30 +46,26 @@
 
 
 def upgrade() -> None:
     """Upgrade."""
     schema = config["schema"]
 
     op.execute(
-        """
+        f"""
         UPDATE "{schema}".ogc_server
         SET url = 'config://internal/mapserv'
         WHERE url = 'config://local/mapserv'
-    """.format(
-            schema=schema
-        )
+        """
     )
 
 
 def downgrade() -> None:
     """Downgrade."""
     schema = config["schema"]
 
     op.execute(
-        """
+        f"""
         UPDATE "{schema}".ogc_server
         SET url = 'config://local/mapserv'
         WHERE url = 'config://internal/mapserv'
-    """.format(
-            schema=schema
-        )
+        """
     )
```

## c2cgeoportal_commons/alembic/main/6a412d9437b1_rename_serverogc_to_ogcserver.py

```diff
@@ -1,8 +1,8 @@
-# Copyright (c) 2016-2019, Camptocamp SA
+# Copyright (c) 2016-2023, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -46,18 +46,18 @@
 
 
 def upgrade() -> None:
     """Upgrade."""
     schema = config["schema"]
 
     op.rename_table("server_ogc", "ogc_server", schema=schema)
-    with op.batch_alter_table("layer_wms", schema=schema) as table_op:  # type: ignore
+    with op.batch_alter_table("layer_wms", schema=schema) as table_op:
         table_op.alter_column("server_ogc_id", new_column_name="ogc_server_id")
 
 
 def downgrade() -> None:
     """Downgrade."""
     schema = config["schema"]
 
     op.rename_table("ogc_server", "server_ogc", schema=schema)
-    with op.batch_alter_table("layer_wms", schema=schema) as table_op:  # type: ignore
+    with op.batch_alter_table("layer_wms", schema=schema) as table_op:
         table_op.alter_column("ogc_server_id", new_column_name="server_ogc_id")
```

## c2cgeoportal_commons/alembic/main/7530011a66a7_trigger_on_role_updates_user_in_static.py

```diff
@@ -1,8 +1,8 @@
-# Copyright (c) 2018-2019, Camptocamp SA
+# Copyright (c) 2018-2023, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -47,28 +47,26 @@
 
 def upgrade() -> None:
     """Upgrade."""
     schema = config["schema"]
     staticschema = config["schema_static"]
 
     op.execute(
-        """
-CREATE OR REPLACE FUNCTION {schema}.on_role_name_change()
-RETURNS trigger AS
-$$
-BEGIN
-IF NEW.name <> OLD.name THEN
-UPDATE {staticschema}."user" SET role_name = NEW.name WHERE role_name = OLD.name;
-END IF;
-RETURN NEW;
-END;
-$$
-LANGUAGE plpgsql""".format(
-            schema=schema, staticschema=staticschema
-        )
+        f"""
+        CREATE OR REPLACE FUNCTION {schema}.on_role_name_change()
+        RETURNS trigger AS
+        $$
+        BEGIN
+        IF NEW.name <> OLD.name THEN
+        UPDATE {staticschema}."user" SET role_name = NEW.name WHERE role_name = OLD.name;
+        END IF;
+        RETURN NEW;
+        END;
+        $$
+        LANGUAGE plpgsql"""
     )
 
 
 def downgrade() -> None:
     """Downgrade."""
     schema = config["schema"]
```

## c2cgeoportal_commons/alembic/main/78fd093c8393_add_api_s_intrfaces.py

```diff
@@ -1,8 +1,8 @@
-# Copyright (c) 2019-2021, Camptocamp SA
+# Copyright (c) 2019-2024, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -24,21 +24,22 @@
 # The views and conclusions contained in the software and documentation are those
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
 # pylint: disable=no-member
 
 """
-Add API's intrfaces.
+Add API's interfaces.
 
 Revision ID: 78fd093c8393
 Revises: e85afd327ab3
 Create Date: 2019-08-29 07:56:15.547216
 """
 
+import sqlalchemy
 from alembic import op
 from c2c.template.config import config
 from sqlalchemy import Column, MetaData, Table
 from sqlalchemy.types import Unicode
 
 # revision identifiers, used by Alembic.
 revision = "78fd093c8393"
@@ -52,82 +53,62 @@
     schema = config["schema"]
 
     # Instructions
     interface = Table("interface", MetaData(), Column("name", Unicode), schema=schema)
     connection = op.get_bind()
     for interface_name in ("api", "iframe_api"):
         result = connection.execute(
-            "SELECT count(name) FROM {schema}.interface WHERE name='{name}'".format(
-                name=interface_name, schema=schema
-            )
+            sqlalchemy.text(f"SELECT count(name) FROM {schema}.interface WHERE name=:interface_name"),
+            {"interface_name": interface_name},
         )
-        if result.fetchone()[0] == 0:
+        if result.fetchone()[0] == 0:  # type: ignore[index]
             op.bulk_insert(interface, [{"name": interface_name}])
     for interface_name in ("edit", "routing"):
         result = connection.execute(
-            "SELECT count(name) FROM {schema}.interface WHERE name='{name}'".format(
-                name=interface_name, schema=schema
-            )
+            sqlalchemy.text(f"SELECT count(name) FROM {schema}.interface WHERE name=:interface_name"),
+            {"interface_name": interface_name},
         )
-        if result.fetchone()[0] != 0:
-            op.execute(
-                "DELETE FROM {schema}.interface_theme it "
-                "USING {schema}.interface i "
-                "WHERE it.interface_id = i.id AND i.name = '{name}'".format(
-                    name=interface_name, schema=schema
-                )
-            )
+        if result.fetchone()[0] != 0:  # type: ignore[index]
             op.execute(
-                "DELETE FROM {schema}.interface_layer il "
-                "USING {schema}.interface i "
-                "WHERE il.interface_id = i.id AND i.name = '{name}'".format(
-                    name=interface_name, schema=schema
-                )
+                f"DELETE FROM {schema}.interface_theme it "
+                f"USING {schema}.interface i "
+                f"WHERE it.interface_id = i.id AND i.name = '{interface_name}'"
             )
             op.execute(
-                "DELETE FROM {schema}.interface WHERE name='{name}'".format(
-                    name=interface_name, schema=schema
-                )
+                f"DELETE FROM {schema}.interface_layer il "
+                f"USING {schema}.interface i "
+                f"WHERE il.interface_id = i.id AND i.name = '{interface_name}'"
             )
+            op.execute(f"DELETE FROM {schema}.interface WHERE name='{interface_name}'")
 
 
 def downgrade() -> None:
     """Downgrade."""
     schema = config["schema"]
 
     # Instructions
     interface = Table("interface", MetaData(), Column("name", Unicode), schema=schema)
     connection = op.get_bind()
     for interface_name in ("edit", "routing"):
         result = connection.execute(
-            "SELECT count(name) FROM {schema}.interface WHERE name='{name}'".format(
-                name=interface_name, schema=schema
-            )
+            sqlalchemy.text(f"SELECT count(name) FROM {schema}.interface WHERE name=:interface_name"),
+            {"interface_name": interface_name},
         )
-        if result.fetchone()[0] == 0:
+        if result.fetchone()[0] == 0:  # type: ignore[index]
             op.bulk_insert(interface, [{"name": interface_name}])
     for interface_name in ("api", "iframe_api"):
         result = connection.execute(
-            "SELECT count(name) FROM {schema}.interface WHERE name='{name}'".format(
-                name=interface_name, schema=schema
-            )
+            sqlalchemy.text(f"SELECT count(name) FROM {schema}.interface WHERE name=:interface_name"),
+            {"interface_name": interface_name},
         )
-        if result.fetchone()[0] != 0:
-            op.execute(
-                "DELETE FROM {schema}.interface_theme it "
-                "USING {schema}.interface i "
-                "WHERE it.interface_id = i.id AND i.name = '{name}'".format(
-                    name=interface_name, schema=schema
-                )
-            )
+        if result.fetchone()[0] != 0:  # type: ignore[index]
             op.execute(
-                "DELETE FROM {schema}.interface_layer il "
-                "USING {schema}.interface i "
-                "WHERE il.interface_id = i.id AND i.name = '{name}'".format(
-                    name=interface_name, schema=schema
-                )
+                f"DELETE FROM {schema}.interface_theme it "
+                f"USING {schema}.interface i "
+                f"WHERE it.interface_id = i.id AND i.name = '{interface_name}'"
             )
             op.execute(
-                "DELETE FROM {schema}.interface WHERE name='{name}'".format(
-                    name=interface_name, schema=schema
-                )
+                f"DELETE FROM {schema}.interface_layer il "
+                f"USING {schema}.interface i "
+                f"WHERE il.interface_id = i.id AND i.name = '{interface_name}'"
             )
+            op.execute(f"DELETE FROM {schema}.interface WHERE name='{interface_name}'")
```

## c2cgeoportal_commons/alembic/main/7d271f4527cd_add_layer_column_in_layerv1_table.py

```diff
@@ -1,8 +1,8 @@
-# Copyright (c) 2016-2019, Camptocamp SA
+# Copyright (c) 2016-2023, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
```

## c2cgeoportal_commons/alembic/main/809650bd04c3_add_dimension_field.py

```diff
@@ -1,8 +1,8 @@
-# Copyright (c) 2018-2019, Camptocamp SA
+# Copyright (c) 2018-2023, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
```

## c2cgeoportal_commons/alembic/main/8117bb9bba16_use_dimension_on_all_the_layers.py

```diff
@@ -1,8 +1,8 @@
-# Copyright (c) 2016-2019, Camptocamp SA
+# Copyright (c) 2016-2023, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -46,30 +46,30 @@
 
 
 def upgrade() -> None:
     """Upgrade."""
     schema = config["schema"]
 
     op.rename_table("wmts_dimension", "dimension", schema=schema)
-    with op.batch_alter_table("dimension", schema=schema) as table_op:  # type: ignore
+    with op.batch_alter_table("dimension", schema=schema) as table_op:
         table_op.drop_constraint("wmts_dimension_layer_id_fkey", type_="foreignkey")
         table_op.create_foreign_key(
             "dimension_layer_id_fkey",
             local_cols=["layer_id"],
             referent_schema=schema,
             referent_table="layer",
             remote_cols=["id"],
         )
 
 
 def downgrade() -> None:
     """Downgrade."""
     schema = config["schema"]
 
-    with op.batch_alter_table("dimension", schema=schema) as table_op:  # type: ignore
+    with op.batch_alter_table("dimension", schema=schema) as table_op:
         table_op.drop_constraint("dimension_layer_id_fkey", type_="foreignkey")
         table_op.create_foreign_key(
             "wmts_dimension_layer_id_fkey",
             local_cols=["layer_id"],
             referent_schema=schema,
             referent_table="layer_wmts",
             remote_cols=["id"],
```

## c2cgeoportal_commons/alembic/main/9268a1dffac0_add_trigger_to_be_able_to_correctly_.py

```diff
@@ -1,8 +1,8 @@
-# Copyright (c) 2017-2019, Camptocamp SA
+# Copyright (c) 2017-2023, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
```

## c2cgeoportal_commons/alembic/main/94db7e7e5b21_merge_2_2_and_master_branches.py

```diff
@@ -1,10 +1,8 @@
-# -*- coding: utf-8 -*-
-
-# Copyright (c) 2017-2021, Camptocamp SA
+# Copyright (c) 2017-2023, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -23,16 +21,14 @@
 # (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 # SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 
 # The views and conclusions contained in the software and documentation are those
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
-# pylint: disable=no-member
-
 """
 Merge 2.2 and master branches.
 
 Revision ID: 94db7e7e5b21
 Revises: ('6d87fdad275a', 'd8ef99bc227e')
 Create Date: 2017-09-21 13:35:11.192320
 """
```

## c2cgeoportal_commons/alembic/main/951ff84bd8ec_be_able_to_delete_a_wms_layer_in_sql.py

```diff
@@ -1,8 +1,8 @@
-# Copyright (c) 2016-2019, Camptocamp SA
+# Copyright (c) 2016-2023, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
```

## c2cgeoportal_commons/alembic/main/a00109812f89_add_field_layer_wms_valid.py

```diff
@@ -1,8 +1,8 @@
-# Copyright (c) 2020-2021, Camptocamp SA
+# Copyright (c) 2020-2024, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -45,16 +45,16 @@
 branch_labels = None
 depends_on = None
 
 
 def upgrade() -> None:
     """Upgrade."""
     schema = config["schema"]
-    op.add_column("layer_wms", sa.Column("valid", sa.Boolean(), nullable=True), schema=schema)
-    op.add_column("layer_wms", sa.Column("invalid_reason", sa.Unicode(), nullable=True), schema=schema)
+    op.add_column("layer_wms", sa.Column("valid", sa.Boolean, nullable=True), schema=schema)
+    op.add_column("layer_wms", sa.Column("invalid_reason", sa.Unicode, nullable=True), schema=schema)
 
 
 def downgrade() -> None:
     """Downgrade."""
     schema = config["schema"]
     op.drop_column("layer_wms", "valid", schema=schema)
     op.drop_column("layer_wms", "invalid_reason", schema=schema)
```

## c2cgeoportal_commons/alembic/main/a4f1aac9bda_merge_1_6_and_master_branches.py

```diff
@@ -1,10 +1,8 @@
-# -*- coding: utf-8 -*-
-
-# Copyright (c) 2015-2019, Camptocamp SA
+# Copyright (c) 2015-2023, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -23,16 +21,14 @@
 # (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 # SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 
 # The views and conclusions contained in the software and documentation are those
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
-# pylint: disable=no-member
-
 """
 Merge 1.6 and master branches.
 
 Revision ID: a4f1aac9bda
 Revises: ('2b8ed8c1df94', '1418cb05921b')
 Create Date: 2015-11-06 13:36:43.368700
 """
```

## c2cgeoportal_commons/alembic/main/b60f2a505f42_remame_uimetadata_to_metadata.py

```diff
@@ -1,8 +1,8 @@
-# Copyright (c) 2016-2019, Camptocamp SA
+# Copyright (c) 2016-2023, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
```

## c2cgeoportal_commons/alembic/main/d48a63b348f1_change_mapserver_url_for_docker.py

```diff
@@ -1,8 +1,8 @@
-# Copyright (c) 2017-2021, Camptocamp SA
+# Copyright (c) 2017-2023, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -47,31 +47,27 @@
 
 def upgrade() -> None:
     """Upgrade."""
     schema = config["schema"]
 
     # Instructions
     op.execute(
-        """
+        f"""
         UPDATE "{schema}".ogc_server
         SET url = 'config://mapserver'
         WHERE url = 'config://internal/mapserv'
-    """.format(
-            schema=schema
-        )
+        """
     )
 
 
 def downgrade() -> None:
     """Downgrade."""
     schema = config["schema"]
 
     # Instructions
     op.execute(
-        """
+        f"""
         UPDATE "{schema}".ogc_server
         SET url = 'config://internal/mapserv'
         WHERE url = 'config://mapserver'
-    """.format(
-            schema=schema
-        )
+        """
     )
```

## c2cgeoportal_commons/alembic/main/d8ef99bc227e_be_able_to_delete_a_linked_functionality.py

```diff
@@ -1,8 +1,8 @@
-# Copyright (c) 2017-2019, Camptocamp SA
+# Copyright (c) 2017-2023, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
```

## c2cgeoportal_commons/alembic/main/daf738d5bae4_merge_2_0_and_master_branches.py

```diff
@@ -1,10 +1,8 @@
-# -*- coding: utf-8 -*-
-
-# Copyright (c) 2016-2019, Camptocamp SA
+# Copyright (c) 2016-2023, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -23,16 +21,14 @@
 # (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 # SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 
 # The views and conclusions contained in the software and documentation are those
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
-# pylint: disable=no-member
-
 """
 Merge 2.0 and master branches.
 
 Revision ID: daf738d5bae4
 Revises: ('6a412d9437b1', '951ff84bd8ec')
 Create Date: 2016-06-29 13:50:59.746514
 """
```

## c2cgeoportal_commons/alembic/main/dba87f2647f9_merge_2_2_on_2_3.py

```diff
@@ -1,10 +1,8 @@
-# -*- coding: utf-8 -*-
-
-# Copyright (c) 2018-2019, Camptocamp SA
+# Copyright (c) 2018-2023, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -23,16 +21,14 @@
 # (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 # SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 
 # The views and conclusions contained in the software and documentation are those
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
-# pylint: disable=no-member
-
 """
 Merge 2.2 on 2.3.
 
 Revision ID: dba87f2647f9
 Revises: ('7530011a66a7', '809650bd04c3')
 Create Date: 2018-10-04 09:32:07.634452
 """
```

## c2cgeoportal_commons/alembic/main/e004f76e951a_add_missing_not_null.py

```diff
@@ -1,8 +1,8 @@
-# Copyright (c) 2016-2019, Camptocamp SA
+# Copyright (c) 2016-2023, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -47,39 +47,23 @@
 
 def upgrade() -> None:
     """Upgrade."""
     schema = config["schema"]
 
     op.alter_column("layer_wmts", "url", nullable=False, schema=schema)
     op.alter_column("layer_wmts", "layer", nullable=False, schema=schema)
-    op.execute(
-        "UPDATE ONLY {schema}.layer_wmts SET image_type = 'image/png' where image_type IS NULL".format(
-            schema=schema
-        )
-    )
+    op.execute(f"UPDATE ONLY {schema}.layer_wmts SET image_type = 'image/png' where image_type IS NULL")
     op.alter_column("layer_wmts", "image_type", nullable=False, schema=schema)
     op.alter_column("layer_wms", "ogc_server_id", nullable=False, schema=schema)
     op.alter_column("layer_wms", "layer", nullable=False, schema=schema)
-    op.execute(
-        "UPDATE ONLY {schema}.layer_wms SET time_mode = 'disabled' where time_mode IS NULL".format(
-            schema=schema
-        )
-    )
+    op.execute(f"UPDATE ONLY {schema}.layer_wms SET time_mode = 'disabled' where time_mode IS NULL")
     op.alter_column("layer_wms", "time_mode", nullable=False, schema=schema)
-    op.execute(
-        "UPDATE ONLY {schema}.layer_wms SET time_widget = 'slider' where time_widget IS NULL".format(
-            schema=schema
-        )
-    )
+    op.execute(f"UPDATE ONLY {schema}.layer_wms SET time_widget = 'slider' where time_widget IS NULL")
     op.alter_column("layer_wms", "time_widget", nullable=False, schema=schema)
-    op.execute(
-        "UPDATE ONLY {schema}.ogc_server SET image_type = 'image/png' where image_type IS NULL".format(
-            schema=schema
-        )
-    )
+    op.execute(f"UPDATE ONLY {schema}.ogc_server SET image_type = 'image/png' where image_type IS NULL")
     op.alter_column("ogc_server", "image_type", nullable=False, schema=schema)
     op.execute(f"UPDATE ONLY {schema}.ogc_server SET type = 'mapserver' where type IS NULL")
     op.alter_column("ogc_server", "type", nullable=False, schema=schema)
     op.execute(f"UPDATE ONLY {schema}.ogc_server SET auth = 'Standard auth' where auth IS NULL")
     op.alter_column("ogc_server", "auth", nullable=False, schema=schema)
```

## c2cgeoportal_commons/alembic/main/e7e03dedade3_put_the_default_wms_server_in_the_.py

```diff
@@ -1,8 +1,8 @@
-# Copyright (c) 2016-2019, Camptocamp SA
+# Copyright (c) 2016-2023, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -46,21 +46,19 @@
 
 
 def upgrade() -> None:
     """Upgrade."""
     schema = config["schema"]
 
     op.execute(
-        """
+        f"""
         UPDATE "{schema}".ogc_server
         SET url = 'config://local/mapserv'
         WHERE url IS NULL
-    """.format(
-            schema=schema
-        )
+        """
     )
 
     op.alter_column("ogc_server", "url", nullable=False, schema=schema)
     op.create_unique_constraint("name_unique_ogc_server", "ogc_server", ["name"], schema=schema)
     op.alter_column("treeitem", "name", nullable=False, schema=schema)
     op.create_unique_constraint("type_name_unique_treeitem", "treeitem", ["type", "name"], schema=schema)
 
@@ -71,15 +69,13 @@
 
     op.alter_column("ogc_server", "url", nullable=True, schema=schema)
     op.drop_constraint("name_unique_ogc_server", "ogc_server", schema=schema)
     op.alter_column("treeitem", "name", nullable=True, schema=schema)
     op.drop_constraint("type_name_unique_treeitem", "treeitem", schema=schema)
 
     op.execute(
-        """
+        f"""
         UPDATE "{schema}".ogc_server
         SET url = NULL
         WHERE url = 'config://local/mapserv'
-    """.format(
-            schema=schema
-        )
+        """
     )
```

## c2cgeoportal_commons/alembic/main/ec82a8906649_add_missing_on_delete_cascade_on_layer_.py

```diff
@@ -1,8 +1,8 @@
-# Copyright (c) 2016-2019, Camptocamp SA
+# Copyright (c) 2016-2023, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
```

## c2cgeoportal_commons/alembic/main/ee25d267bf46_main_interface_desktop.py

```diff
@@ -1,8 +1,8 @@
-# Copyright (c) 2016-2019, Camptocamp SA
+# Copyright (c) 2016-2023, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -45,21 +45,15 @@
 depends_on = None
 
 
 def upgrade() -> None:
     """Upgrade."""
     schema = config["schema"]
 
-    op.execute(
-        "UPDATE ONLY {schema}.interface AS i "
-        "SET name = 'desktop' where name = 'main'".format(schema=schema)
-    )
+    op.execute(f"UPDATE ONLY {schema}.interface AS i SET name = 'desktop' where name = 'main'")
 
 
 def downgrade() -> None:
     """Downgrade."""
     schema = config["schema"]
 
-    op.execute(
-        "UPDATE ONLY {schema}.interface AS i "
-        "SET name = 'main' where name = 'desktop'".format(schema=schema)
-    )
+    op.execute(f"UPDATE ONLY {schema}.interface AS i SET name = 'main' where name = 'desktop'")
```

## c2cgeoportal_commons/alembic/main/eeb345672454_merge_2_4_and_master_branches.py

```diff
@@ -1,10 +1,8 @@
-# -*- coding: utf-8 -*-
-
-# Copyright (c) 2019-2021, Camptocamp SA
+# Copyright (c) 2019-2023, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -23,16 +21,14 @@
 # (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 # SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 
 # The views and conclusions contained in the software and documentation are those
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
-# pylint: disable=no-member
-
 """
 Merge 2.4 and master branches.
 
 Revision ID: eeb345672454
 Revises: ('78fd093c8393', '56dc90838d90')
 Create Date: 2019-09-03 09:11:57.786920
 """
```

## c2cgeoportal_commons/alembic/static/1857owc78a07_add_last_login_and_expiration_date.py

```diff
@@ -1,8 +1,8 @@
-# Copyright (c) 2018-2019, Camptocamp SA
+# Copyright (c) 2018-2023, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
```

## c2cgeoportal_commons/alembic/static/1da396a88908_move_user_table_to_static_schema.py

```diff
@@ -1,8 +1,8 @@
-# Copyright (c) 2015-2019, Camptocamp SA
+# Copyright (c) 2015-2023, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -51,15 +51,15 @@
     """Upgrade."""
     schema = config["schema"]
     staticschema = config["schema_static"]
     parentschema = config.get("parentschema")
 
     engine = op.get_bind().engine
     with engine.connect() as connection:
-        if type(engine).__name__ != "MockConnection" and op.get_context().dialect.has_table(  # type: ignore
+        if type(engine).__name__ != "MockConnection" and op.get_context().dialect.has_table(
             connection, "user", schema=staticschema
         ):
             return
 
     op.create_table(
         "user",
         Column("type", String(10), nullable=False),
@@ -74,17 +74,15 @@
     parent_column = ""
     parent_select = ""
     parent_join = ""
     if parentschema is not None and parentschema != "":
         op.add_column("user", Column("parent_role_name", String), schema=staticschema)
         parent_column = ", parent_role_name"
         parent_select = ", pr.name"
-        parent_join = "LEFT OUTER JOIN {parentschema!s}.role AS pr ON (pr.id = u.parent_role_id)".format(
-            parentschema=parentschema
-        )
+        parent_join = f"LEFT OUTER JOIN {parentschema!s}.role AS pr ON (pr.id = u.parent_role_id)"
 
     try:
         op.execute(
             "INSERT INTO %(staticschema)s.user "
             "(type, username, password, email, is_password_changed, role_name%(parent_column)s) ("
             "SELECT u.type, u.username, u.password, u.email, "
             "u.is_password_changed, r.name%(parent_select)s "
@@ -130,17 +128,15 @@
     parent_join = ""
     if parentschema is not None and parentschema != "":
         op.add_column(
             "user", Column("parent_role_id", Integer, ForeignKey(parentschema + ".role.id")), schema=schema
         )
         parent_column = ", parent_role_id"
         parent_select = ", pr.id"
-        parent_join = "LEFT OUTER JOIN {parentschema}.role AS pr ON (pr.name = u.parent_role_name)".format(
-            parentschema=parentschema
-        )
+        parent_join = f"LEFT OUTER JOIN {parentschema}.role AS pr ON (pr.name = u.parent_role_name)"
 
     op.execute(
         "INSERT INTO %(schema)s.user "
         "(type, username, password, email, is_password_changed, role_id%(parent_column)s) ("
         "SELECT u.type, u.username, u.password, u.email, "
         "u.is_password_changed, r.id%(parent_select)s "
         "FROM %(staticschema)s.user AS u "
```

## c2cgeoportal_commons/alembic/static/3f89a7d71a5e_alter_column_url_to_remove_limitation.py

```diff
@@ -1,8 +1,8 @@
-# Copyright (c) 2014-2019, Camptocamp SA
+# Copyright (c) 2014-2023, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
```

## c2cgeoportal_commons/alembic/static/53d671b17b20_add_timezone_on_datetime_fields.py

```diff
@@ -1,8 +1,8 @@
-# Copyright (c) 2018-2019, Camptocamp SA
+# Copyright (c) 2018-2023, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
```

## c2cgeoportal_commons/alembic/static/5472fbc19f39_add_temp_password_column.py

```diff
@@ -1,8 +1,8 @@
-# Copyright (c) 2015-2019, Camptocamp SA
+# Copyright (c) 2015-2023, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
```

## c2cgeoportal_commons/alembic/static/7ef947f30f20_add_oauth2_tables.py

```diff
@@ -1,8 +1,8 @@
-# Copyright (c) 2020, Camptocamp SA
+# Copyright (c) 2020-2024, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
```

## c2cgeoportal_commons/alembic/static/ae5e88f35669_add_table_user_role.py

```diff
@@ -1,8 +1,8 @@
-# Copyright (c) 2018-2019, Camptocamp SA
+# Copyright (c) 2018-2023, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -55,50 +55,44 @@
     op.create_table(
         "user_role",
         Column("user_id", Integer, ForeignKey(staticschema + ".user.id"), primary_key=True),
         Column("role_id", Integer, primary_key=True),
         schema=staticschema,
     )
     op.execute(
-        """
+        f"""
 INSERT INTO "{staticschema}"."user_role" ("user_id", "role_id")
 SELECT "user"."id", "role"."id"
 FROM "{staticschema}"."user"
-JOIN "{schema}"."role" ON "role"."name" = "user"."role_name";""".format(
-            schema=schema, staticschema=staticschema
-        )
+JOIN "{schema}"."role" ON "role"."name" = "user"."role_name";"""
     )
 
     op.add_column("user", Column("settings_role_id", Integer), schema=staticschema)
     op.execute(
-        """
+        f"""
 UPDATE "{staticschema}"."user"
 SET "settings_role_id" = "role"."id"
 FROM "{schema}"."role"
-WHERE "role"."name" = "user"."role_name";""".format(
-            schema=schema, staticschema=staticschema
-        )
+WHERE "role"."name" = "user"."role_name";"""
     )
 
     op.drop_column("user", "role_name", schema=staticschema)
 
 
 def downgrade() -> None:
     """Downgrade."""
     schema = config["schema"]
     staticschema = config["schema_static"]
 
     op.add_column("user", Column("role_name", Unicode), schema=staticschema)
 
     op.execute(
-        """
+        f"""
 UPDATE "{staticschema}"."user"
 SET "role_name" = "role"."name"
 FROM "{schema}"."role"
-WHERE "role"."id" = "user"."settings_role_id";""".format(
-            schema=schema, staticschema=staticschema
-        )
+WHERE "role"."id" = "user"."settings_role_id";"""
     )
 
     op.drop_column("user", "settings_role_id", schema=staticschema)
 
     op.drop_table("user_role", schema=staticschema)
```

## c2cgeoportal_commons/lib/email_.py

```diff
@@ -1,8 +1,8 @@
-# Copyright (c) 2013-2021, Camptocamp SA
+# Copyright (c) 2013-2023, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -28,31 +28,31 @@
 
 import logging
 import smtplib
 from email.mime.multipart import MIMEMultipart
 from email.mime.text import MIMEText
 from email.utils import formatdate
 from socket import gaierror
-from typing import Any, Dict, List, cast
+from typing import Any, cast
 
 try:
     from pyramid.httpexceptions import HTTPInternalServerError
 except ModuleNotFoundError:
 
     class HTTPInternalServerError(BaseException):  # type: ignore
         """Fallback class."""
 
 
 LOG = logging.getLogger(__name__)
 
 
-def send_email_config(settings: Dict[str, Any], email_config_name: str, email: str, **kwargs: Any) -> None:
+def send_email_config(settings: dict[str, Any], email_config_name: str, email: str, **kwargs: Any) -> None:
     """Send an email from the config information."""
     smtp_config = settings["smtp"]
-    email_config = cast(Dict[str, str], settings[email_config_name])
+    email_config = cast(dict[str, str], settings[email_config_name])
 
     try:
         send_email(
             email_config["email_from"],
             [email],
             email_config["email_body"].format(**kwargs),
             email_config["email_subject"],
@@ -60,15 +60,15 @@
         )
     except gaierror:
         LOG.exception("Unable to send the email.")
         raise HTTPInternalServerError("See server logs for details")  # pylint: disable=raise-missing-from
 
 
 def send_email(
-    from_addr: str, to_address: List[str], body: str, subject: str, smtp_config: Dict[str, str]
+    from_addr: str, to_address: list[str], body: str, subject: str, smtp_config: dict[str, str]
 ) -> None:
     """Send an email."""
     msg = MIMEMultipart()
     msg["From"] = from_addr
     msg["To"] = ", ".join(to_address)
     msg["Date"] = formatdate(localtime=True)
     msg["Subject"] = subject
```

## c2cgeoportal_commons/lib/literal.py

```diff
@@ -1,8 +1,8 @@
-# Copyright (c) 2021-2021, Camptocamp SA
+# Copyright (c) 2021-2023, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
```

## c2cgeoportal_commons/lib/url.py

```diff
@@ -1,8 +1,8 @@
-# Copyright (c) 2013-2021, Camptocamp SA
+# Copyright (c) 2013-2023, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -24,30 +24,30 @@
 # The views and conclusions contained in the software and documentation are those
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
 import logging
 import re
 import urllib.parse
-from typing import Dict, Optional, Set
+from typing import Optional
 
 from pyramid.request import Request
 
 LOG = logging.getLogger(__name__)
 
 
 class Url:
     """Object representation of an URI."""
 
     scheme = ""
     _netloc = ""
     _hostname: Optional[str] = None
     _port: Optional[int] = None
     path = ""
-    query: Dict[str, str] = {}
+    query: dict[str, str] = {}
     fragment = ""
 
     def __init__(self, url: Optional[str] = None):
         if url:
             url_split = urllib.parse.urlsplit(url)
             self.scheme = url_split.scheme
             self._netloc = url_split.netloc
@@ -119,23 +119,23 @@
         return self._port
 
     @port.setter
     def port(self, port: Optional[int]) -> None:
         self._port = port
         self.netloc = (self._hostname or "") if port is None else f"{self._hostname}:{port}"
 
-    def add_query(self, query: Dict[str, str], force: bool = False) -> "Url":
+    def add_query(self, query: dict[str, str], force: bool = False) -> "Url":
         if query:
             for key, value in query.items():
                 if force or key not in self.query:
                     self.query[key] = value
         return self
 
     @property
-    def query_lower(self) -> Dict[str, str]:
+    def query_lower(self) -> dict[str, str]:
         return {k.lower(): v for k, v in self.query.items()}
 
     def url(self) -> str:
         return urllib.parse.urlunsplit(
             (
                 self.scheme,
                 self._netloc,
@@ -149,15 +149,15 @@
         return self.url()
 
     def __repr__(self) -> str:
         return self.url()
 
 
 def get_url2(
-    name: str, url: str, request: Request, errors: Set[str], servers: Optional[Dict[str, str]] = None
+    name: str, url: str, request: Request, errors: set[str], servers: Optional[dict[str, str]] = None
 ) -> Optional[Url]:
     """
     Get the real URL from the URI of the administration interface.
 
     Manage the schema: static and config.
     """
     if servers is None:
```

## c2cgeoportal_commons/lib/validators.py

```diff
@@ -1,10 +1,8 @@
-# -*- coding: utf-8 -*-
-
-# Copyright (c) 2019-2020, Camptocamp SA
+# Copyright (c) 2019-2023, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
```

## c2cgeoportal_commons/models/__init__.py

```diff
@@ -1,8 +1,8 @@
-# Copyright (c) 2011-2021, Camptocamp SA
+# Copyright (c) 2011-2024, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -23,42 +23,52 @@
 
 # The views and conclusions contained in the software and documentation are those
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
 
 import logging
-from typing import Any, Dict, List
+from typing import Any, Optional, TypeVar
 
 import sqlalchemy.ext.declarative
 import sqlalchemy.orm
+import sqlalchemy.orm.scoping
 import zope.event
 
 try:
     from pyramid.i18n import TranslationStringFactory
 
     _ = TranslationStringFactory("c2cgeoportal_admin")
 except ModuleNotFoundError:
     pass
 
 
-# Should be filed on application initialisation
-DBSession: sqlalchemy.orm.Session = None
-Base: sqlalchemy.ext.declarative.ConcreteBase = sqlalchemy.ext.declarative.declarative_base()
-DBSessions: Dict[str, sqlalchemy.orm.Session] = {}
+# Should be filed on application initialization
+DBSession: Optional[sqlalchemy.orm.scoping.scoped_session[sqlalchemy.orm.Session]] = None
+
+_Meta = TypeVar("_Meta")
+_Type = TypeVar("_Type")
+
+
+class BaseType(sqlalchemy.ext.declarative.DeclarativeMeta, type):
+    pass
+
+
+Base: BaseType = sqlalchemy.orm.declarative_base()
+DBSessions: dict[str, sqlalchemy.orm.scoping.scoped_session[sqlalchemy.orm.Session]] = {}
 
 
 LOG = logging.getLogger(__name__)
 
 
 class InvalidateCacheEvent:
     """Event to be broadcast."""
 
 
-def cache_invalidate_cb(*args: List[Any]) -> None:
+def cache_invalidate_cb(*args: list[Any]) -> None:
     """Invalidate the cache on a broadcast event."""
     _cache_invalidate_cb()
 
 
 try:
     from c2cwsgiutils import broadcast
```

## c2cgeoportal_commons/models/main.py

```diff
@@ -1,8 +1,8 @@
-# Copyright (c) 2011-2021, Camptocamp SA
+# Copyright (c) 2011-2024, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -22,58 +22,65 @@
 # SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 
 # The views and conclusions contained in the software and documentation are those
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
 
+import enum
 import logging
 import os
 import re
-from typing import Any, Dict, List, Optional, Set, Tuple, Union, cast
+from datetime import datetime
+from typing import Any, Literal, Optional, Union, cast, get_args
 
 import pyramid.request
 import sqlalchemy.orm.base
 from c2c.template.config import config
 from geoalchemy2 import Geometry
 from geoalchemy2.shape import to_shape
 from papyrus.geo_interface import GeoInterface
 from sqlalchemy import Column, ForeignKey, Table, UniqueConstraint, event
-from sqlalchemy.orm import Session, backref, relationship
+from sqlalchemy.ext.declarative import AbstractConcreteBase
+from sqlalchemy.orm import Mapped, Session, backref, mapped_column, relationship
 from sqlalchemy.schema import Index
-from sqlalchemy.types import Boolean, Enum, Integer, String, Unicode
+from sqlalchemy.types import Boolean, DateTime, Enum, Integer, String, Unicode
 
-from c2cgeoportal_commons.lib.literal import Literal
+import c2cgeoportal_commons.lib.literal
 from c2cgeoportal_commons.lib.url import get_url2
 from c2cgeoportal_commons.models import Base, _, cache_invalidate_cb
 from c2cgeoportal_commons.models.sqlalchemy import JSONEncodedDict, TsVector
 
 try:
+    import colander
     from c2cgeoform import default_map_settings
     from c2cgeoform.ext.colander_ext import Geometry as ColanderGeometry
     from c2cgeoform.ext.deform_ext import MapWidget, RelationSelect2Widget
     from colander import drop
     from deform.widget import CheckboxWidget, HiddenWidget, SelectWidget, TextAreaWidget, TextInputWidget
+
+    colander_null = colander.null
 except ModuleNotFoundError:
     drop = None
     default_map_settings = {"srid": 3857, "view": {"projection": "EPSG:3857"}}
+    colander_null = None
 
     class GenericClass:
         """Fallback class implementation."""
 
         def __init__(self, *args: Any, **kwargs: Any):
             pass
 
     CheckboxWidget = GenericClass
     HiddenWidget = GenericClass
-    MapWidget = GenericClass
+    MapWidget = GenericClass  # type: ignore[misc,assignment]
     SelectWidget = GenericClass
     TextAreaWidget = GenericClass
-    ColanderGeometry = GenericClass
-    RelationSelect2Widget = GenericClass
+    ColanderGeometry = GenericClass  # type: ignore[misc,assignment]
+    RelationSelect2Widget = GenericClass  # type: ignore[misc,assignment]
     TextInputWidget = GenericClass
 
 
 if os.environ.get("DEVELOPMENT", "0") == "1":
 
     def state_str(state: Any) -> str:
         """Return a string describing an instance via its InstanceState."""
@@ -86,57 +93,65 @@
 
 LOG = logging.getLogger(__name__)
 
 _schema: str = config["schema"] or "main"
 _srid: int = cast(int, config["srid"]) or 3857
 
 # Set some default values for the admin interface
-_admin_config: Dict[str, Any] = config.get_config().get("admin_interface", {})
-_map_config: Dict[str, Any] = {**default_map_settings, **_admin_config.get("map", {})}
+conf = config.get_config()
+assert conf is not None
+_admin_config: dict[str, Any] = conf.get("admin_interface", {})
+_map_config: dict[str, Any] = {**default_map_settings, **_admin_config.get("map", {})}
 view_srid_match = re.match(r"EPSG:(\d+)", _map_config["view"]["projection"])
 if "map_srid" not in _admin_config and view_srid_match is not None:
     _admin_config["map_srid"] = view_srid_match.group(1)
 
 
 class FullTextSearch(GeoInterface, Base):  # type: ignore
     """The tsearch table representation."""
 
     __tablename__ = "tsearch"
     __table_args__ = (Index("tsearch_ts_idx", "ts", postgresql_using="gin"), {"schema": _schema})
 
-    id = Column(Integer, primary_key=True)
-    label = Column(Unicode)
-    layer_name = Column(Unicode)
-    role_id = Column(Integer, ForeignKey(_schema + ".role.id", ondelete="CASCADE"), nullable=True)
+    id: Mapped[int] = mapped_column(Integer, primary_key=True)
+    label: Mapped[str] = mapped_column(Unicode)
+    layer_name: Mapped[str] = mapped_column(Unicode)
+    role_id: Mapped[int] = mapped_column(
+        Integer, ForeignKey(_schema + ".role.id", ondelete="CASCADE"), nullable=True
+    )
     role = relationship("Role")
-    interface_id = Column(Integer, ForeignKey(_schema + ".interface.id", ondelete="CASCADE"), nullable=True)
+    interface_id: Mapped[int] = mapped_column(
+        Integer, ForeignKey(_schema + ".interface.id", ondelete="CASCADE"), nullable=True
+    )
     interface = relationship("Interface")
-    lang = Column(String(2), nullable=True)
-    public = Column(Boolean, server_default="true")
-    ts = Column(TsVector)
-    the_geom = Column(Geometry("GEOMETRY", srid=_srid))
-    params = Column(JSONEncodedDict, nullable=True)
-    actions = Column(JSONEncodedDict, nullable=True)
-    from_theme = Column(Boolean, server_default="false")
+    lang: Mapped[str] = mapped_column(String(2), nullable=True)
+    public: Mapped[bool] = mapped_column(Boolean, server_default="true")
+    ts = mapped_column(TsVector)
+    the_geom = mapped_column(Geometry("GEOMETRY", srid=_srid))
+    params = mapped_column(JSONEncodedDict, nullable=True)
+    actions = mapped_column(JSONEncodedDict, nullable=True)
+    from_theme: Mapped[bool] = mapped_column(Boolean, server_default="false")
 
     def __str__(self) -> str:
         return f"{self.label}[{self.id}]"
 
 
 class Functionality(Base):  # type: ignore
     """The functionality table representation."""
 
     __tablename__ = "functionality"
     __table_args__ = {"schema": _schema}
     __colanderalchemy_config__ = {"title": _("Functionality"), "plural": _("Functionalities")}
 
     __c2cgeoform_config__ = {"duplicate": True}
 
-    id = Column(Integer, primary_key=True, info={"colanderalchemy": {"widget": HiddenWidget()}})
-    name = Column(
+    id: Mapped[int] = mapped_column(
+        Integer, primary_key=True, info={"colanderalchemy": {"widget": HiddenWidget()}}
+    )
+    name: Mapped[str] = mapped_column(
         Unicode,
         nullable=False,
         info={
             "colanderalchemy": {
                 "title": _("Name"),
                 "description": _("Name of the functionality."),
                 "widget": SelectWidget(
@@ -148,24 +163,24 @@
                             key=lambda f: cast(str, f["name"]),
                         )
                     ],
                 ),
             }
         },
     )
-    description = Column(
+    description: Mapped[Optional[str]] = mapped_column(
         Unicode,
         info={
             "colanderalchemy": {
                 "title": _("Description"),
                 "description": _("An optional description."),
             }
         },
     )
-    value = Column(
+    value: Mapped[str] = mapped_column(
         Unicode,
         nullable=False,
         info={
             "colanderalchemy": {
                 "title": _("Value"),
                 "description": _("A value for the functionality."),
             }
@@ -218,36 +233,38 @@
     """The role table representation."""
 
     __tablename__ = "role"
     __table_args__ = {"schema": _schema}
     __colanderalchemy_config__ = {"title": _("Role"), "plural": _("Roles")}
     __c2cgeoform_config__ = {"duplicate": True}
 
-    id = Column(Integer, primary_key=True, info={"colanderalchemy": {"widget": HiddenWidget()}})
-    name = Column(
+    id: Mapped[int] = mapped_column(
+        Integer, primary_key=True, info={"colanderalchemy": {"widget": HiddenWidget()}}
+    )
+    name: Mapped[str] = mapped_column(
         Unicode,
         unique=True,
         nullable=False,
         info={
             "colanderalchemy": {
                 "title": _("Name"),
                 "description": _("A name for this role."),
             }
         },
     )
-    description = Column(
+    description: Mapped[Optional[str]] = mapped_column(
         Unicode,
         info={
             "colanderalchemy": {
                 "title": _("Description"),
                 "description": _("An optional description."),
             }
         },
     )
-    extent = Column(
+    extent = mapped_column(
         Geometry("POLYGON", srid=_srid),
         info={
             "colanderalchemy": {
                 "title": _("Extent"),
                 "description": _("Initial extent for this role."),
                 "typ": ColanderGeometry("POLYGON", srid=_srid, map_srid=_admin_config["map_srid"]),
                 "widget": MapWidget(map_options=_map_config),
@@ -269,92 +286,94 @@
         },
     )
 
     def __init__(
         self,
         name: str = "",
         description: str = "",
-        functionalities: Optional[List[Functionality]] = None,
-        extent: Geometry = None,
+        functionalities: Optional[list[Functionality]] = None,
+        extent: Optional[Geometry] = None,
     ) -> None:
         if functionalities is None:
             functionalities = []
         self.name = name
         self.functionalities = functionalities
         self.extent = extent
         self.description = description
 
     def __str__(self) -> str:
         return f"{self.name}[{self.id}]>"
 
     @property
-    def bounds(self) -> Optional[Tuple[float, float, float, float]]:  # TODO
+    def bounds(self) -> Optional[tuple[float, float, float, float]]:  # TODO
         if self.extent is None:
             return None
-        return cast(Tuple[float, float, float, float], to_shape(self.extent).bounds)
+        return cast(tuple[float, float, float, float], to_shape(self.extent).bounds)
 
 
 event.listen(Role.functionalities, "set", cache_invalidate_cb)
 event.listen(Role.functionalities, "append", cache_invalidate_cb)
 event.listen(Role.functionalities, "remove", cache_invalidate_cb)
 
 
 class TreeItem(Base):  # type: ignore
     """The treeitem table representation."""
 
     __tablename__ = "treeitem"
-    __table_args__: Union[Tuple[Any, ...], Dict[str, Any]] = (
+    __table_args__: Union[tuple[Any, ...], dict[str, Any]] = (
         UniqueConstraint("type", "name"),
         {"schema": _schema},
     )
-    item_type = Column("type", String(10), nullable=False, info={"colanderalchemy": {"exclude": True}})
+    item_type: Mapped[str] = mapped_column(
+        "type", String(10), nullable=False, info={"colanderalchemy": {"exclude": True}}
+    )
     __mapper_args__ = {"polymorphic_on": item_type}
 
-    id = Column(Integer, primary_key=True)
-    name = Column(
+    id: Mapped[int] = mapped_column(Integer, primary_key=True)
+    name: Mapped[str] = mapped_column(
         Unicode,
         nullable=False,
         info={
             "colanderalchemy": {
                 "title": _("Name"),
                 "description": _(
                     """
                     The name of the node, it is used through the i18n tools to display the name on the layers
                     tree.
                     """
                 ),
             }
         },
     )
-    description = Column(
+    description: Mapped[Optional[str]] = mapped_column(
         Unicode,
         info={
             "colanderalchemy": {
                 "title": _("Description"),
                 "description": _("An optional description."),
             }
         },
     )
 
     @property
     # Better: def parents(self) -> List[TreeGroup]:
-    def parents(self) -> List["TreeItem"]:
+    def parents(self) -> list["TreeItem"]:
         return [c.treegroup for c in self.parents_relation]
 
     def is_in_interface(self, name: str) -> bool:
         if not hasattr(self, "interfaces"):
             return False
 
         for interface in self.interfaces:
             if interface.name == name:
                 return True
 
         return False
 
-    def get_metadata(self, name: str) -> List["Metadata"]:
+    def get_metadata(self, name: str) -> list["Metadata"]:
         return [metadata for metadata in self.metadatas if metadata.name == name]
 
     def __init__(self, name: str = "") -> None:
         self.name = name
 
     def __str__(self) -> str:
         return f"{self.name}[{self.id}]>"
@@ -369,17 +388,19 @@
 class LayergroupTreeitem(Base):  # type: ignore
     """The layergroup_treeitem table representation."""
 
     __tablename__ = "layergroup_treeitem"
     __table_args__ = {"schema": _schema}
 
     # required by formalchemy
-    id = Column(Integer, primary_key=True, info={"colanderalchemy": {"widget": HiddenWidget()}})
-    description = Column(Unicode, info={"colanderalchemy": {"exclude": True}})
-    treegroup_id = Column(
+    id: Mapped[int] = mapped_column(
+        Integer, primary_key=True, info={"colanderalchemy": {"widget": HiddenWidget()}}
+    )
+    description: Mapped[Optional[str]] = mapped_column(Unicode, info={"colanderalchemy": {"exclude": True}})
+    treegroup_id: Mapped[int] = mapped_column(
         Integer,
         ForeignKey(_schema + ".treegroup.id"),
         nullable=False,
         info={"colanderalchemy": {"exclude": True}},
     )
     treegroup = relationship(
         "TreeGroup",
@@ -388,15 +409,15 @@
             order_by="LayergroupTreeitem.ordering",
             cascade="save-update,merge,delete,delete-orphan,expunge",
             info={"colanderalchemy": {"title": _("Children"), "exclude": True}},
         ),
         primaryjoin="LayergroupTreeitem.treegroup_id==TreeGroup.id",
         info={"colanderalchemy": {"exclude": True}, "c2cgeoform": {"duplicate": False}},
     )
-    treeitem_id = Column(
+    treeitem_id: Mapped[int] = mapped_column(
         Integer,
         ForeignKey(_schema + ".treeitem.id"),
         nullable=False,
         info={"colanderalchemy": {"widget": HiddenWidget()}},
     )
     treeitem = relationship(
         "TreeItem",
@@ -407,15 +428,15 @@
                 "colanderalchemy": {"title": _("Parents"), "exclude": True},
                 "c2cgeoform": {"duplicate": False},
             },
         ),
         primaryjoin="LayergroupTreeitem.treeitem_id==TreeItem.id",
         info={"colanderalchemy": {"exclude": True}, "c2cgeoform": {"duplicate": False}},
     )
-    ordering = Column(Integer, info={"colanderalchemy": {"widget": HiddenWidget()}})
+    ordering: Mapped[int] = mapped_column(Integer, info={"colanderalchemy": {"widget": HiddenWidget()}})
 
     def __init__(
         self, group: Optional["TreeGroup"] = None, item: Optional[TreeItem] = None, ordering: int = 0
     ) -> None:
         self.treegroup = group
         self.treeitem = item
         self.ordering = ordering
@@ -430,22 +451,22 @@
 
 
 class TreeGroup(TreeItem):
     """The treegroup table representation."""
 
     __tablename__ = "treegroup"
     __table_args__ = {"schema": _schema}
-    __mapper_args__ = {"polymorphic_identity": "treegroup"}  # needed for _identity_class
+    __mapper_args__ = {"polymorphic_identity": "treegroup"}  # type: ignore[dict-item] # needed for _identity_class
 
-    id = Column(Integer, ForeignKey(_schema + ".treeitem.id"), primary_key=True)
+    id: Mapped[int] = mapped_column(Integer, ForeignKey(_schema + ".treeitem.id"), primary_key=True)
 
-    def _get_children(self) -> List[TreeItem]:
+    def _get_children(self) -> list[TreeItem]:
         return [c.treeitem for c in self.children_relation]
 
-    def _set_children(self, children: List[TreeItem], order: bool = False) -> None:
+    def _set_children(self, children: list[TreeItem], order: bool = False) -> None:
         """
         Set the current TreeGroup children TreeItem instances.
 
         By managing related LayergroupTreeitem instances.
 
         If order is False:
             Append new children at end of current ones.
@@ -483,31 +504,31 @@
     """The layergroup table representation."""
 
     __tablename__ = "layergroup"
     __table_args__ = {"schema": _schema}
     __colanderalchemy_config__ = {
         "title": _("Layers group"),
         "plural": _("Layers groups"),
-        "description": Literal(
+        "description": c2cgeoportal_commons.lib.literal.Literal(
             _(
                 """
             <div class="help-block">
                 <h4>Background layers</h4>
                 <p>The background layers are configured in the database, with the layer group named
                 <b>background</b> (by default).</p>
                 <hr>
             </div>
                 """
             )
         ),
     }
-    __mapper_args__ = {"polymorphic_identity": "group"}
+    __mapper_args__ = {"polymorphic_identity": "group"}  # type: ignore[dict-item]
     __c2cgeoform_config__ = {"duplicate": True}
 
-    id = Column(
+    id: Mapped[int] = mapped_column(
         Integer,
         ForeignKey(_schema + ".treegroup.id"),
         primary_key=True,
         info={"colanderalchemy": {"missing": drop, "widget": HiddenWidget()}},
     )
 
     def __init__(self, name: str = "") -> None:
@@ -526,43 +547,44 @@
 
 class Theme(TreeGroup):
     """The theme table representation."""
 
     __tablename__ = "theme"
     __table_args__ = {"schema": _schema}
     __colanderalchemy_config__ = {"title": _("Theme"), "plural": _("Themes")}
-    __mapper_args__ = {"polymorphic_identity": "theme"}
+    __mapper_args__ = {"polymorphic_identity": "theme"}  # type: ignore[dict-item]
     __c2cgeoform_config__ = {"duplicate": True}
 
-    id = Column(
+    id: Mapped[int] = mapped_column(
         Integer,
         ForeignKey(_schema + ".treegroup.id"),
         primary_key=True,
         info={"colanderalchemy": {"missing": drop, "widget": HiddenWidget()}},
     )
-    ordering = Column(
+    ordering: Mapped[int] = mapped_column(
         Integer, nullable=False, info={"colanderalchemy": {"title": _("Order"), "widget": HiddenWidget()}}
     )
-    public = Column(
+    public: Mapped[bool] = mapped_column(
         Boolean,
         default=True,
         nullable=False,
         info={
             "colanderalchemy": {
                 "title": _("Public"),
                 "description": _("Makes the theme public."),
             }
         },
     )
-    icon = Column(
+    icon: Mapped[str] = mapped_column(
         Unicode,
         info={
             "colanderalchemy": {
                 "title": _("Icon"),
                 "description": _("The icon URL."),
+                "missing": "",
             }
         },
     )
 
     # functionality
     functionalities = relationship(
         "Functionality",
@@ -603,219 +625,202 @@
 
 
 class Layer(TreeItem):
     """The layer table representation."""
 
     __tablename__ = "layer"
     __table_args__ = {"schema": _schema}
-    __mapper_args__ = {"polymorphic_identity": "layer"}  # needed for _identity_class
+    __mapper_args__ = {"polymorphic_identity": "layer"}  # type: ignore[dict-item] # needed for _identity_class
 
-    id = Column(
+    id: Mapped[int] = mapped_column(
         Integer,
         ForeignKey(_schema + ".treeitem.id"),
         primary_key=True,
         info={"colanderalchemy": {"widget": HiddenWidget()}},
     )
-    public = Column(
+    public: Mapped[bool] = mapped_column(
         Boolean,
         default=True,
         info={
             "colanderalchemy": {
                 "title": _("Public"),
                 "description": _("Makes the layer public."),
             }
         },
     )
-    geo_table = Column(
+    geo_table: Mapped[Optional[str]] = mapped_column(
         Unicode,
         info={
             "colanderalchemy": {
                 "title": _("Geo table"),
                 "description": _("The related database table, used by the editing module."),
             }
         },
     )
-    exclude_properties = Column(
+    exclude_properties: Mapped[str] = mapped_column(
         Unicode,
         info={
             "colanderalchemy": {
                 "title": _("Exclude properties"),
                 "description": _(
                     """
                     The list of attributes (database columns) that should not appear in
                     the editing form so that they cannot be modified by the end user.
                     For enumerable attributes (foreign key), the column name should end with '_id'.
                     """
                 ),
+                "missing": "",
             }
         },
     )
 
     def __init__(self, name: str = "", public: bool = True) -> None:
         super().__init__(name=name)
         self.public = public
 
 
 class DimensionLayer(Layer):
     """The intermediate class for the leyser with dimension."""
 
-    __mapper_args__ = {"polymorphic_identity": "dimensionlayer"}  # needed for _identity_class
+    __mapper_args__ = {"polymorphic_identity": "dimensionlayer"}  # type: ignore[dict-item] # needed for _identity_class
+
+
+OGCServerType = Literal["mapserver", "qgisserver", "geoserver", "arcgis", "other"]
+OGCSERVER_TYPE_MAPSERVER: OGCServerType = "mapserver"
+OGCSERVER_TYPE_QGISSERVER: OGCServerType = "qgisserver"
+OGCSERVER_TYPE_GEOSERVER: OGCServerType = "geoserver"
+OGCSERVER_TYPE_ARCGIS: OGCServerType = "arcgis"
+OGCSERVER_TYPE_OTHER: OGCServerType = "other"
+
+
+OGCServerAuth = Literal["No auth", "Standard auth", "Geoserver auth", "Proxy"]
+OGCSERVER_AUTH_NOAUTH: OGCServerAuth = "No auth"
+OGCSERVER_AUTH_STANDARD: OGCServerAuth = "Standard auth"
+OGCSERVER_AUTH_GEOSERVER: OGCServerAuth = "Geoserver auth"
+OGCSERVER_AUTH_PROXY: OGCServerAuth = "Proxy"
 
 
-OGCSERVER_TYPE_MAPSERVER = "mapserver"
-OGCSERVER_TYPE_QGISSERVER = "qgisserver"
-OGCSERVER_TYPE_GEOSERVER = "geoserver"
-OGCSERVER_TYPE_ARCGIS = "arcgis"
-OGCSERVER_TYPE_OTHER = "other"
-
-OGCSERVER_AUTH_NOAUTH = "No auth"
-OGCSERVER_AUTH_STANDARD = "Standard auth"
-OGCSERVER_AUTH_GEOSERVER = "Geoserver auth"
-OGCSERVER_AUTH_PROXY = "Proxy"
+ImageType = Literal["image/jpeg", "image/png"]
+TimeMode = Literal["disabled", "value", "range"]
+TimeWidget = Literal["slider", "datepicker"]
 
 
 class OGCServer(Base):  # type: ignore
     """The ogc_server table representation."""
 
     __tablename__ = "ogc_server"
     __table_args__ = {"schema": _schema}
     __colanderalchemy_config__ = {
         "title": _("OGC Server"),
         "plural": _("OGC Servers"),
-        "description": Literal(
+        "description": c2cgeoportal_commons.lib.literal.Literal(
             _(
                 """
             <div class="help-block">
                 <p>This is the description of an OGC server (WMS/WFS).\n
                 For one server we try to create only one request when it is possible.</p>
                 <p>If you want to query the same server to get PNG and JPEG images,\n
                 you should define two <code>OGC servers</code>.</p>
                 <hr>
             </div>
                 """
             )
         ),
     }
     __c2cgeoform_config__ = {"duplicate": True}
-    id = Column(Integer, primary_key=True, info={"colanderalchemy": {"widget": HiddenWidget()}})
-    name = Column(
+    id: Mapped[int] = mapped_column(
+        Integer, primary_key=True, info={"colanderalchemy": {"widget": HiddenWidget()}}
+    )
+    name: Mapped[str] = mapped_column(
         Unicode,
         nullable=False,
         unique=True,
         info={
             "colanderalchemy": {
                 "title": _("Name"),
                 "description": _("The name of the OGC Server"),
             }
         },
     )
-    description = Column(
+    description: Mapped[Optional[str]] = mapped_column(
         Unicode,
         info={
             "colanderalchemy": {
                 "title": _("Description"),
                 "description": _("A description"),
             }
         },
     )
-    url = Column(
+    url: Mapped[str] = mapped_column(
         Unicode,
         nullable=False,
         info={
             "colanderalchemy": {
                 "title": _("Basic URL"),
                 "description": _("The server URL"),
             }
         },
     )
-    url_wfs = Column(
+    url_wfs: Mapped[Optional[str]] = mapped_column(
         Unicode,
         info={
             "colanderalchemy": {
                 "title": _("WFS URL"),
                 "description": _("The WFS server URL. If empty, the ``Basic URL`` is used."),
             }
         },
     )
-    type = Column(
-        Enum(
-            OGCSERVER_TYPE_MAPSERVER,
-            OGCSERVER_TYPE_QGISSERVER,
-            OGCSERVER_TYPE_GEOSERVER,
-            OGCSERVER_TYPE_ARCGIS,
-            OGCSERVER_TYPE_OTHER,
-            native_enum=False,
-        ),
+    type: Mapped[OGCServerType] = mapped_column(
+        Enum(*get_args(OGCServerType), native_enum=False),
         nullable=False,
         info={
             "colanderalchemy": {
                 "title": _("Server type"),
                 "description": _(
                     "The server type which is used to know which custom attribute will be used."
                 ),
-                "widget": SelectWidget(
-                    values=(
-                        (OGCSERVER_TYPE_MAPSERVER, OGCSERVER_TYPE_MAPSERVER),
-                        (OGCSERVER_TYPE_QGISSERVER, OGCSERVER_TYPE_QGISSERVER),
-                        (OGCSERVER_TYPE_GEOSERVER, OGCSERVER_TYPE_GEOSERVER),
-                        (OGCSERVER_TYPE_ARCGIS, OGCSERVER_TYPE_ARCGIS),
-                        (OGCSERVER_TYPE_OTHER, OGCSERVER_TYPE_OTHER),
-                    )
-                ),
+                "widget": SelectWidget(values=list((e, e) for e in get_args(OGCServerType))),
             }
         },
     )
-    image_type = Column(
-        Enum("image/jpeg", "image/png", native_enum=False),
+    image_type: Mapped[ImageType] = mapped_column(
+        Enum(*get_args(ImageType), native_enum=False),
         nullable=False,
         info={
             "colanderalchemy": {
                 "title": _("Image type"),
                 "description": _("The MIME type of the images (e.g.: ``image/png``)."),
-                "widget": SelectWidget(values=(("image/jpeg", "image/jpeg"), ("image/png", "image/png"))),
+                "widget": SelectWidget(values=list((e, e) for e in get_args(ImageType))),
                 "column": 2,
             }
         },
     )
-    auth = Column(
-        Enum(
-            OGCSERVER_AUTH_NOAUTH,
-            OGCSERVER_AUTH_STANDARD,
-            OGCSERVER_AUTH_GEOSERVER,
-            OGCSERVER_AUTH_PROXY,
-            native_enum=False,
-        ),
+    auth: Mapped[OGCServerAuth] = mapped_column(
+        Enum(*get_args(OGCServerAuth), native_enum=False),
         nullable=False,
         info={
             "colanderalchemy": {
                 "title": _("Authentication type"),
                 "description": "The kind of authentication to use.",
-                "widget": SelectWidget(
-                    values=(
-                        (OGCSERVER_AUTH_NOAUTH, OGCSERVER_AUTH_NOAUTH),
-                        (OGCSERVER_AUTH_STANDARD, OGCSERVER_AUTH_STANDARD),
-                        (OGCSERVER_AUTH_GEOSERVER, OGCSERVER_AUTH_GEOSERVER),
-                        (OGCSERVER_AUTH_PROXY, OGCSERVER_AUTH_PROXY),
-                    )
-                ),
+                "widget": SelectWidget(values=list((e, e) for e in get_args(OGCServerAuth))),
                 "column": 2,
             }
         },
     )
-    wfs_support = Column(
+    wfs_support: Mapped[bool] = mapped_column(
         Boolean,
         info={
             "colanderalchemy": {
                 "title": _("WFS support"),
                 "description": _("Whether WFS is supported by the server."),
                 "column": 2,
             }
         },
     )
-    is_single_tile = Column(
+    is_single_tile: Mapped[bool] = mapped_column(
         Boolean,
         info={
             "colanderalchemy": {
                 "title": _("Single tile"),
                 "description": _("Whether to use the single tile mode (For future use)."),
                 "column": 2,
             }
@@ -824,17 +829,17 @@
 
     def __init__(
         self,
         name: str = "",
         description: Optional[str] = None,
         url: str = "https://wms.example.com",
         url_wfs: Optional[str] = None,
-        type_: str = "mapserver",
-        image_type: str = "image/png",
-        auth: str = "Standard auth",
+        type_: OGCServerType = OGCSERVER_TYPE_MAPSERVER,
+        image_type: ImageType = "image/png",
+        auth: OGCServerAuth = OGCSERVER_AUTH_STANDARD,
         wfs_support: bool = True,
         is_single_tile: bool = False,
     ) -> None:
         self.name = name
         self.description = description
         self.url = url
         self.url_wfs = url_wfs
@@ -844,40 +849,35 @@
         self.wfs_support = wfs_support
         self.is_single_tile = is_single_tile
 
     def __str__(self) -> str:
         return self.name or ""
 
     def url_description(self, request: pyramid.request.Request) -> str:
-        errors: Set[str] = set()
+        errors: set[str] = set()
         url = get_url2(self.name, self.url, request, errors)
         return url.url() if url else "\n".join(errors)
 
     def url_wfs_description(self, request: pyramid.request.Request) -> Optional[str]:
         if not self.url_wfs:
             return self.url_description(request)
-        errors: Set[str] = set()
+        errors: set[str] = set()
         url = get_url2(self.name, self.url_wfs, request, errors)
         return url.url() if url else "\n".join(errors)
 
 
-event.listen(OGCServer, "after_insert", cache_invalidate_cb, propagate=True)
-event.listen(OGCServer, "after_update", cache_invalidate_cb, propagate=True)
-event.listen(OGCServer, "after_delete", cache_invalidate_cb, propagate=True)
-
-
 class LayerWMS(DimensionLayer):
     """The layer_wms table representation."""
 
     __tablename__ = "layer_wms"
     __table_args__ = {"schema": _schema}
     __colanderalchemy_config__ = {
         "title": _("WMS Layer"),
         "plural": _("WMS Layers"),
-        "description": Literal(
+        "description": c2cgeoportal_commons.lib.literal.Literal(
             _(
                 """
             <div class="help-block">
                 <p>Definition of a <code>WMS Layer</code>.</p>
                 <p>Note: The layers named <code>wms-defaults</code> contains the values
                 used when we create a new <code>WMS layer</code>.</p>
                 <hr>
@@ -885,37 +885,37 @@
                 """
             )
         ),
     }
 
     __c2cgeoform_config__ = {"duplicate": True}
 
-    __mapper_args__ = {"polymorphic_identity": "l_wms"}
+    __mapper_args__ = {"polymorphic_identity": "l_wms"}  # type: ignore[dict-item]
 
-    id = Column(
+    id: Mapped[int] = mapped_column(
         Integer,
         ForeignKey(_schema + ".layer.id", ondelete="CASCADE"),
         primary_key=True,
         info={"colanderalchemy": {"missing": None, "widget": HiddenWidget()}},
     )
-    ogc_server_id = Column(
+    ogc_server_id: Mapped[int] = mapped_column(
         Integer,
         ForeignKey(_schema + ".ogc_server.id"),
         nullable=False,
         info={
             "colanderalchemy": {
                 "title": _("OGC server"),
                 "column": 2,
                 "widget": RelationSelect2Widget(
                     OGCServer, "id", "name", order_by="name", default_value=("", _("- Select -"))
                 ),
             }
         },
     )
-    layer = Column(
+    layer: Mapped[str] = mapped_column(
         Unicode,
         nullable=False,
         info={
             "colanderalchemy": {
                 "title": _("WMS layer name"),
                 "description": _(
                     """
@@ -925,63 +925,65 @@
                     metadata.
                     """
                 ),
                 "column": 2,
             }
         },
     )
-    style = Column(
+    style: Mapped[Optional[str]] = mapped_column(
         Unicode,
         info={
             "colanderalchemy": {
                 "title": _("Style"),
                 "description": _("The style to use for this layer, can be empty."),
                 "column": 2,
             }
         },
     )
-    valid = Column(
+    valid: Mapped[bool] = mapped_column(
         Boolean,
         info={
             "colanderalchemy": {
                 "title": _("Valid"),
                 "description": _("The status reported by latest synchronization (readonly)."),
                 "column": 2,
                 "widget": CheckboxWidget(readonly=True),
+                "missing": colander_null,
             }
         },
     )
-    invalid_reason = Column(
+    invalid_reason: Mapped[str] = mapped_column(
         Unicode,
         info={
             "colanderalchemy": {
                 "title": _("Reason why I am not valid"),
                 "description": _("The reason for status reported by latest synchronization (readonly)."),
                 "column": 2,
                 "widget": TextInputWidget(readonly=True),
+                "missing": "",
             }
         },
     )
-    time_mode = Column(
-        Enum("disabled", "value", "range", native_enum=False),
+    time_mode: Mapped[TimeMode] = mapped_column(
+        Enum(*get_args(TimeMode), native_enum=False),
         default="disabled",
         nullable=False,
         info={
             "colanderalchemy": {
                 "title": _("Time mode"),
                 "description": _("Used for the WMS time component."),
                 "column": 2,
                 "widget": SelectWidget(
                     values=(("disabled", _("Disabled")), ("value", _("Value")), ("range", _("Range")))
                 ),
             }
         },
     )
-    time_widget = Column(
-        Enum("slider", "datepicker", native_enum=False),
+    time_widget: Mapped[TimeWidget] = mapped_column(
+        Enum(*get_args(TimeWidget), native_enum=False),
         default="slider",
         nullable=False,
         info={
             "colanderalchemy": {
                 "title": _("Time widget"),
                 "description": _("The component type used for the WMS time."),
                 "column": 2,
@@ -1004,16 +1006,16 @@
     )
 
     def __init__(
         self,
         name: str = "",
         layer: str = "",
         public: bool = True,
-        time_mode: str = "disabled",
-        time_widget: str = "slider",
+        time_mode: TimeMode = "disabled",
+        time_widget: TimeWidget = "slider",
     ) -> None:
         super().__init__(name=name, public=public)
         self.layer = layer
         self.time_mode = time_mode
         self.time_widget = time_widget
 
     @staticmethod
@@ -1028,15 +1030,15 @@
     """The layer_wmts table representation."""
 
     __tablename__ = "layer_wmts"
     __table_args__ = {"schema": _schema}
     __colanderalchemy_config__ = {
         "title": _("WMTS Layer"),
         "plural": _("WMTS Layers"),
-        "description": Literal(
+        "description": c2cgeoportal_commons.lib.literal.Literal(
             _(
                 """
             <div class="help-block">
                 <p>Definition of a <code>WMTS Layer</code>.</p>
                 <p>Note: The layers named <code>wmts-defaults</code> contains the values used when
                     we create a new <code>WMTS layer</code>.</p>
 
@@ -1076,87 +1078,89 @@
                 <hr>
             </div>
                 """
             )
         ),
     }
     __c2cgeoform_config__ = {"duplicate": True}
-    __mapper_args__ = {"polymorphic_identity": "l_wmts"}
+    __mapper_args__ = {"polymorphic_identity": "l_wmts"}  # type: ignore[dict-item]
 
-    id = Column(
+    id: Mapped[int] = mapped_column(
         Integer,
         ForeignKey(_schema + ".layer.id"),
         primary_key=True,
         info={"colanderalchemy": {"missing": None, "widget": HiddenWidget()}},
     )
-    url = Column(
+    url: Mapped[str] = mapped_column(
         Unicode,
         nullable=False,
         info={
             "colanderalchemy": {
                 "title": _("GetCapabilities URL"),
                 "description": _("The URL to the WMTS capabilities."),
                 "column": 2,
             }
         },
     )
-    layer = Column(
+    layer: Mapped[str] = mapped_column(
         Unicode,
         nullable=False,
         info={
             "colanderalchemy": {
                 "title": _("WMTS layer name"),
                 "description": _("The name of the WMTS layer to use"),
                 "column": 2,
             }
         },
     )
-    style = Column(
+    style: Mapped[str] = mapped_column(
         Unicode,
         info={
             "colanderalchemy": {
                 "title": _("Style"),
                 "description": _("The style to use; if not present, the default style is used."),
                 "column": 2,
+                "missing": "",
             }
         },
     )
-    matrix_set = Column(
+    matrix_set: Mapped[str] = mapped_column(
         Unicode,
         info={
             "colanderalchemy": {
                 "title": _("Matrix set"),
                 "description": _(
                     "The matrix set to use; if there is only one matrix set in the capabilities, it can be"
                     "left empty."
                 ),
                 "column": 2,
+                "missing": "",
             }
         },
     )
-    image_type = Column(
-        Enum("image/jpeg", "image/png", native_enum=False),
+    image_type: Mapped[ImageType] = mapped_column(
+        Enum(*get_args(ImageType), native_enum=False),
         nullable=False,
         info={
             "colanderalchemy": {
                 "title": _("Image type"),
-                "description": Literal(
+                "description": c2cgeoportal_commons.lib.literal.Literal(
                     _(
                         """
                         The MIME type of the images (e.g.: <code>image/png</code>).
                         """
                     )
                 ),
                 "column": 2,
-                "widget": SelectWidget(values=(("image/jpeg", "image/jpeg"), ("image/png", "image/png"))),
+                "widget": SelectWidget(values=list((e, e) for e in get_args(ImageType))),
             }
         },
     )
 
-    def __init__(self, name: str = "", public: bool = True, image_type: str = "image/png") -> None:
+    def __init__(self, name: str = "", public: bool = True, image_type: ImageType = "image/png") -> None:
         super().__init__(name=name, public=public)
         self.image_type = image_type
 
     @staticmethod
     def get_default(dbsession: Session) -> Optional[DimensionLayer]:
         return cast(
             Optional[DimensionLayer],
@@ -1197,15 +1201,15 @@
     """The layer_vectortiles table representation."""
 
     __tablename__ = "layer_vectortiles"
     __table_args__ = {"schema": _schema}
     __colanderalchemy_config__ = {
         "title": _("Vector Tiles Layer"),
         "plural": _("Vector Tiles Layers"),
-        "description": Literal(
+        "description": c2cgeoportal_commons.lib.literal.Literal(
             _(
                 """
             <div class="help-block">
                 <p>Definition of a <code>Vector Tiles Layer</code>.</p>
                 <p>Note: The layers named <code>vector-tiles-defaults</code> contains the values used when
                     we create a new <code>Vector Tiles layer</code>.</p>
 
@@ -1231,24 +1235,24 @@
                 """
             )
         ),
     }
 
     __c2cgeoform_config__ = {"duplicate": True}
 
-    __mapper_args__ = {"polymorphic_identity": "l_mvt"}
+    __mapper_args__ = {"polymorphic_identity": "l_mvt"}  # type: ignore[dict-item]
 
-    id = Column(
+    id: Mapped[int] = mapped_column(
         Integer,
         ForeignKey(_schema + ".layer.id"),
         primary_key=True,
         info={"colanderalchemy": {"missing": None, "widget": HiddenWidget()}},
     )
 
-    style = Column(
+    style: Mapped[str] = mapped_column(
         Unicode,
         nullable=False,
         info={
             "colanderalchemy": {
                 "title": _("Style"),
                 "description": _(
                     """
@@ -1256,15 +1260,15 @@
                     """
                 ),
                 "column": 2,
             }
         },
     )
 
-    sql = Column(
+    sql: Mapped[str] = mapped_column(
         Unicode,
         nullable=True,
         info={
             "colanderalchemy": {
                 "title": _("SQL query"),
                 "description": _(
                     """
@@ -1273,15 +1277,15 @@
                 ),
                 "column": 2,
                 "widget": TextAreaWidget(rows=15),
             }
         },
     )
 
-    xyz = Column(
+    xyz: Mapped[str] = mapped_column(
         Unicode,
         nullable=True,
         info={
             "colanderalchemy": {
                 "title": _("Raster URL"),
                 "description": _(
                     """
@@ -1305,57 +1309,59 @@
             Optional[DimensionLayer],
             dbsession.query(LayerVectorTiles)
             .filter(LayerVectorTiles.name == "vector-tiles-defaults")
             .one_or_none(),
         )
 
     def style_description(self, request: pyramid.request.Request) -> str:
-        errors: Set[str] = set()
+        errors: set[str] = set()
         url = get_url2(self.name, self.style, request, errors)
         return url.url() if url else "\n".join(errors)
 
 
 class RestrictionArea(Base):  # type: ignore
     """The restrictionarea table representation."""
 
     __tablename__ = "restrictionarea"
     __table_args__ = {"schema": _schema}
     __colanderalchemy_config__ = {"title": _("Restriction area"), "plural": _("Restriction areas")}
     __c2cgeoform_config__ = {"duplicate": True}
-    id = Column(Integer, primary_key=True, info={"colanderalchemy": {"widget": HiddenWidget()}})
+    id: Mapped[int] = mapped_column(
+        Integer, primary_key=True, info={"colanderalchemy": {"widget": HiddenWidget()}}
+    )
 
-    name = Column(
+    name: Mapped[str] = mapped_column(
         Unicode,
         info={
             "colanderalchemy": {
                 "title": _("Name"),
                 "description": _("A name."),
             }
         },
     )
-    description = Column(
+    description: Mapped[Optional[str]] = mapped_column(
         Unicode,
         info={
             "colanderalchemy": {
                 "title": _("Description"),
                 "description": _("An optional description"),
             }
         },
     )
-    readwrite = Column(
+    readwrite: Mapped[bool] = mapped_column(
         Boolean,
         default=False,
         info={
             "colanderalchemy": {
                 "title": _("Read/write"),
                 "description": _("Allows the linked users to change the objects."),
             }
         },
     )
-    area = Column(
+    area = mapped_column(
         Geometry("POLYGON", srid=_srid),
         info={
             "colanderalchemy": {
                 "title": _("Area"),
                 "description": _("Active in the following area, if not defined, it is active everywhere."),
                 "typ": ColanderGeometry("POLYGON", srid=_srid, map_srid=_map_config["srid"]),
                 "widget": MapWidget(map_options=_map_config),
@@ -1392,15 +1398,15 @@
         "Layer",
         secondary=layer_ra,
         order_by=Layer.name,
         info={
             "colanderalchemy": {
                 "title": _("Layers"),
                 "exclude": True,
-                "description": Literal(
+                "description": c2cgeoportal_commons.lib.literal.Literal(
                     _(
                         """
                         <div class="help-block">
                             <p>This restriction area will grant access to the checked layers.</p>
                             <hr>
                         </div>
                         """
@@ -1421,17 +1427,17 @@
         ),
     )
 
     def __init__(
         self,
         name: str = "",
         description: str = "",
-        layers: Optional[List[Layer]] = None,
-        roles: Optional[List[Role]] = None,
-        area: Geometry = None,
+        layers: Optional[list[Layer]] = None,
+        roles: Optional[list[Role]] = None,
+        area: Optional[Geometry] = None,
         readwrite: bool = False,
     ) -> None:
         if layers is None:
             layers = []
         if roles is None:
             roles = []
         self.name = name
@@ -1477,25 +1483,27 @@
     """The interface table representation."""
 
     __tablename__ = "interface"
     __table_args__ = {"schema": _schema}
     __c2cgeoform_config__ = {"duplicate": True}
     __colanderalchemy_config__ = {"title": _("Interface"), "plural": _("Interfaces")}
 
-    id = Column(Integer, primary_key=True, info={"colanderalchemy": {"widget": HiddenWidget()}})
-    name = Column(
+    id: Mapped[int] = mapped_column(
+        Integer, primary_key=True, info={"colanderalchemy": {"widget": HiddenWidget()}}
+    )
+    name: Mapped[str] = mapped_column(
         Unicode,
         info={
             "colanderalchemy": {
                 "title": _("Name"),
                 "description": _("The name of the interface, as used in request URL."),
             }
         },
     )
-    description = Column(
+    description: Mapped[Optional[str]] = mapped_column(
         Unicode,
         info={
             "colanderalchemy": {
                 "title": _("Description"),
                 "description": _("An optional description."),
             }
         },
@@ -1549,46 +1557,50 @@
     __tablename__ = "metadata"
     __table_args__ = {"schema": _schema}
     __colanderalchemy_config__ = {
         "title": _("Metadata"),
         "plural": _("Metadatas"),
     }
 
-    id = Column(Integer, primary_key=True, info={"colanderalchemy": {"widget": HiddenWidget()}})
-    name = Column(
+    id: Mapped[int] = mapped_column(
+        Integer, primary_key=True, info={"colanderalchemy": {"widget": HiddenWidget()}}
+    )
+    name: Mapped[str] = mapped_column(
         Unicode,
         info={
             "colanderalchemy": {
                 "title": _("Name"),
-                "description": Literal(_("The type of <code>Metadata</code> we want to set.")),
+                "description": c2cgeoportal_commons.lib.literal.Literal(
+                    _("The type of <code>Metadata</code> we want to set.")
+                ),
             }
         },
     )
-    value = Column(
+    value: Mapped[str] = mapped_column(
         Unicode,
         info={
             "colanderalchemy": {
                 "title": _("Value"),
                 "exclude": True,
                 "description": _("The value of the metadata entry."),
             }
         },
     )
-    description = Column(
+    description: Mapped[Optional[str]] = mapped_column(
         Unicode,
         info={
             "colanderalchemy": {
                 "title": _("Description"),
                 "widget": TextAreaWidget(),
                 "description": _("An optional description."),
             }
         },
     )
 
-    item_id = Column(
+    item_id: Mapped[int] = mapped_column(
         "item_id",
         Integer,
         ForeignKey(_schema + ".treeitem.id"),
         nullable=False,
         info={"colanderalchemy": {"exclude": True}, "c2cgeoform": {"duplicate": False}},
     )
     item = relationship(
@@ -1597,15 +1609,15 @@
         backref=backref(
             "metadatas",
             cascade="save-update,merge,delete,delete-orphan,expunge",
             order_by="Metadata.name",
             info={
                 "colanderalchemy": {
                     "title": _("Metadatas"),
-                    "description": Literal(
+                    "description": c2cgeoportal_commons.lib.literal.Literal(
                         _(
                             """
         <div class="help-block">
             <p>You can associate metadata to all theme elements (tree items).
                 The purpose of this metadata is to trigger specific features, mainly UI features.
                 Each metadata entry has the following attributes:</p>
             <p>The available names are configured in the <code>vars.yaml</code>
@@ -1654,56 +1666,58 @@
     __tablename__ = "dimension"
     __table_args__ = {"schema": _schema}
     __colanderalchemy_config__ = {
         "title": _("Dimension"),
         "plural": _("Dimensions"),
     }
 
-    id = Column(Integer, primary_key=True, info={"colanderalchemy": {"widget": HiddenWidget()}})
-    name = Column(
+    id: Mapped[int] = mapped_column(
+        Integer, primary_key=True, info={"colanderalchemy": {"widget": HiddenWidget()}}
+    )
+    name: Mapped[str] = mapped_column(
         Unicode,
         info={
             "colanderalchemy": {
                 "title": _("Name"),
                 "description": _("The name of the dimension as it will be sent in requests."),
             }
         },
     )
-    value = Column(
+    value: Mapped[str] = mapped_column(
         Unicode,
         info={
             "colanderalchemy": {
                 "title": _("Value"),
                 "description": _("The default value for this dimension."),
             }
         },
     )
-    field = Column(
+    field: Mapped[Optional[str]] = mapped_column(
         Unicode,
         info={
             "colanderalchemy": {
                 "title": _("Field"),
                 "description": _(
                     "The name of the field to use for filtering (leave empty when not using OGC filters)."
                 ),
             }
         },
     )
-    description = Column(
+    description: Mapped[Optional[str]] = mapped_column(
         Unicode,
         info={
             "colanderalchemy": {
                 "title": _("Description"),
                 "description": _("An optional description."),
                 "widget": TextAreaWidget(),
             }
         },
     )
 
-    layer_id = Column(
+    layer_id: Mapped[int] = mapped_column(
         "layer_id",
         Integer,
         ForeignKey(_schema + ".layer.id"),
         nullable=False,
         info={"colanderalchemy": {"exclude": True}, "c2cgeoform": {"duplicate": False}},
     )
     layer = relationship(
@@ -1712,15 +1726,15 @@
         backref=backref(
             "dimensions",
             cascade="save-update,merge,delete,delete-orphan,expunge",
             info={
                 "colanderalchemy": {
                     "title": _("Dimensions"),
                     "exclude": True,
-                    "description": Literal(
+                    "description": c2cgeoportal_commons.lib.literal.Literal(
                         _(
                             """
         <div class="help-block">
             <p>The dimensions, if not provided default values are used.</p>
             <hr>
         </div>
                             """
@@ -1744,7 +1758,104 @@
         self.field = field
         if layer is not None:
             self.layer = layer
         self.description = description
 
     def __str__(self) -> str:
         return f"{self.name}={self.value}[{self.id}]"
+
+
+class LogAction(enum.Enum):
+    """The log action enumeration."""
+
+    INSERT = enum.auto()
+    UPDATE = enum.auto()
+    DELETE = enum.auto()
+    SYNCHRONIZE = enum.auto()
+    CONVERT_TO_WMTS = enum.auto()
+    CONVERT_TO_WMS = enum.auto()
+
+
+class AbstractLog(AbstractConcreteBase, Base):  # type: ignore
+    """The abstract log table representation."""
+
+    strict_attrs = True
+    __colanderalchemy_config__ = {
+        "title": _("Log"),
+        "plural": _("Logs"),
+    }
+
+    id: Mapped[int] = mapped_column(Integer, primary_key=True, info={"colanderalchemy": {}})
+    date: Mapped[datetime] = mapped_column(
+        DateTime(timezone=True),
+        nullable=False,
+        info={
+            "colanderalchemy": {
+                "title": _("Date"),
+            }
+        },
+    )
+    action: Mapped[LogAction] = mapped_column(
+        Enum(LogAction, native_enum=False),
+        nullable=False,
+        info={
+            "colanderalchemy": {
+                "title": _("Action"),
+            }
+        },
+    )
+    element_type: Mapped[str] = mapped_column(
+        String(50),
+        nullable=False,
+        info={
+            "colanderalchemy": {
+                "title": _("Element type"),
+            }
+        },
+    )
+    element_id: Mapped[int] = mapped_column(
+        Integer,
+        nullable=False,
+        info={
+            "colanderalchemy": {
+                "title": _("Element identifier"),
+            }
+        },
+    )
+    element_name: Mapped[str] = mapped_column(
+        Unicode,
+        nullable=False,
+        info={
+            "colanderalchemy": {
+                "title": _("Element name"),
+            }
+        },
+    )
+    element_url_table: Mapped[str] = mapped_column(
+        Unicode,
+        nullable=False,
+        info={
+            "colanderalchemy": {
+                "title": _("Table segment of the element URL"),
+            }
+        },
+    )
+    username: Mapped[str] = mapped_column(
+        Unicode,
+        nullable=False,
+        info={
+            "colanderalchemy": {
+                "title": _("Username"),
+            }
+        },
+    )
+
+
+class Log(AbstractLog):
+    """The main log table representation."""
+
+    __tablename__ = "log"
+    __table_args__ = {"schema": _schema}
+    __mapper_args__ = {
+        "polymorphic_identity": "main",
+        "concrete": True,
+    }
```

## c2cgeoportal_commons/models/sqlalchemy.py

```diff
@@ -1,8 +1,8 @@
-# Copyright (c) 2012-2021, Camptocamp SA
+# Copyright (c) 2012-2024, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -21,47 +21,47 @@
 # (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 # SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 
 # The views and conclusions contained in the software and documentation are those
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 import json
-from typing import Any, Dict, Optional, Type
+from typing import Any, Optional
 
 from sqlalchemy.engine import Dialect
 from sqlalchemy.types import VARCHAR, TypeDecorator, UserDefinedType
 
 
 # get from https://docs.sqlalchemy.org/en/latest/orm/extensions/
 # mutable.html#establishing-mutability-on-scalar-column-values
-class JSONEncodedDict(TypeDecorator):  # type: ignore
+class JSONEncodedDict(TypeDecorator[Any]):
     """Represent an immutable structure as a json-encoded string."""
 
     impl = VARCHAR
 
-    @staticmethod
-    def process_bind_param(value: Optional[Dict[str, Any]], _: Dialect) -> Optional[str]:
+    def process_bind_param(self, value: Optional[dict[str, Any]], _: Dialect) -> Optional[str]:
         return json.dumps(value) if value is not None else None
 
-    @staticmethod
-    def process_result_value(value: Optional[str], _: Dialect) -> Optional[Dict[str, Any]]:
+    def process_result_value(self, value: Optional[str], _: Dialect) -> Optional[dict[str, Any]]:
         return json.loads(value) if value is not None else None
 
     @property
-    def python_type(self) -> Type[Any]:
+    def python_type(self) -> type[Any]:
         return dict
 
-    @staticmethod
-    def process_literal_param(value: str, dialect: Any) -> str:
+    def process_literal_param(self, value: Optional[Any], dialect: Any) -> str:
+        assert isinstance(value, str)
         del dialect
         return json.dumps(value)
 
 
 class TsVector(UserDefinedType):  # type: ignore
     """A custom type for PostgreSQL's tsvector type."""
 
-    def get_col_spec(self) -> str:  # pylint: disable=no-self-use
+    cache_ok = True
+
+    def get_col_spec(self) -> str:
         return "TSVECTOR"
 
     @property
-    def python_type(self) -> Type[Any]:
+    def python_type(self) -> type[Any]:
         return dict
```

## c2cgeoportal_commons/models/static.py

```diff
@@ -1,8 +1,8 @@
-# Copyright (c) 2011-2021, Camptocamp SA
+# Copyright (c) 2011-2024, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -27,28 +27,28 @@
 
 
 import crypt
 import logging
 from datetime import datetime
 from hashlib import sha1
 from hmac import compare_digest as compare_hash
-from typing import Any, List, Optional
+from typing import Any, Optional
 
 import pytz
 import sqlalchemy.schema
 from c2c.template.config import config
 from sqlalchemy import Column, ForeignKey, Table
 from sqlalchemy.dialects.postgresql import HSTORE
 from sqlalchemy.ext.mutable import MutableDict
-from sqlalchemy.orm import backref, relationship
+from sqlalchemy.orm import Mapped, backref, mapped_column, relationship
 from sqlalchemy.types import Boolean, DateTime, Integer, String, Unicode
 
 from c2cgeoportal_commons.lib.literal import Literal
 from c2cgeoportal_commons.models import Base, _
-from c2cgeoportal_commons.models.main import Role
+from c2cgeoportal_commons.models.main import AbstractLog, Role
 
 try:
     from c2cgeoform.ext.deform_ext import RelationSelect2Widget
     from colander import Email, drop
     from deform.widget import DateTimeInputWidget, HiddenWidget
 except ModuleNotFoundError:
     drop = None
@@ -59,15 +59,15 @@
         def __init__(self, *args: Any, **kwargs: Any):
             pass
 
     Email = GenericClass
     HiddenWidget = GenericClass
     DateTimeInputWidget = GenericClass
     CollenderGeometry = GenericClass
-    RelationSelect2Widget = GenericClass
+    RelationSelect2Widget = GenericClass  # type: ignore[misc,assignment]
 
 
 LOG = logging.getLogger(__name__)
 
 _schema: str = config["schema_static"] or "static"
 
 # association table user <> role
@@ -119,61 +119,65 @@
                 <hr>
             </div>
                 """
             )
         ),
     }
     __c2cgeoform_config__ = {"duplicate": True}
-    item_type = Column(
+    item_type: Mapped[str] = mapped_column(
         "type", String(10), nullable=False, info={"colanderalchemy": {"widget": HiddenWidget()}}
     )
     __mapper_args__ = {"polymorphic_on": item_type, "polymorphic_identity": "user"}
 
-    id = Column(Integer, primary_key=True, info={"colanderalchemy": {"widget": HiddenWidget()}})
-    username = Column(
+    id: Mapped[int] = mapped_column(
+        Integer, primary_key=True, info={"colanderalchemy": {"widget": HiddenWidget()}}
+    )
+    username: Mapped[str] = mapped_column(
         Unicode,
         unique=True,
         nullable=False,
         info={
             "colanderalchemy": {
                 "title": _("Username"),
                 "description": _("Name used for authentication (must be unique)."),
             }
         },
     )
-    _password = Column("password", Unicode, nullable=False, info={"colanderalchemy": {"exclude": True}})
-    temp_password = Column(
+    _password: Mapped[str] = mapped_column(
+        "password", Unicode, nullable=False, info={"colanderalchemy": {"exclude": True}}
+    )
+    temp_password: Mapped[Optional[str]] = mapped_column(
         "temp_password", Unicode, nullable=True, info={"colanderalchemy": {"exclude": True}}
     )
-    tech_data = Column(MutableDict.as_mutable(HSTORE), info={"colanderalchemy": {"exclude": True}})
-    email = Column(
+    tech_data = mapped_column(MutableDict.as_mutable(HSTORE), info={"colanderalchemy": {"exclude": True}})  # type: ignore[arg-type]
+    email: Mapped[str] = mapped_column(
         Unicode,
         nullable=False,
         info={
             "colanderalchemy": {
                 "title": _("Email"),
                 "description": _(
                     "Used to send emails to the user, for example in case of password recovery."
                 ),
                 "validator": Email(),
             }
         },
     )
-    is_password_changed = Column(
+    is_password_changed: Mapped[bool] = mapped_column(
         Boolean,
         default=False,
         info={
             "colanderalchemy": {
                 "title": _("The user changed his password"),
                 "description": _("Indicates if user has changed his password."),
             }
         },
     )
 
-    settings_role_id = Column(
+    settings_role_id: Mapped[int] = mapped_column(
         Integer,
         info={
             "colanderalchemy": {
                 "title": _("Settings from role"),
                 "description": _("Used to get some settings for the user (not for permissions)."),
                 "widget": RelationSelect2Widget(
                     Role, "id", "name", order_by="name", default_value=("", _("- Select -"))
@@ -209,37 +213,37 @@
                 "title": _("Roles"),
                 "description": _("Roles granted to the user."),
                 "exclude": True,
             }
         },
     )
 
-    last_login = Column(
+    last_login: Mapped[datetime] = mapped_column(
         DateTime(timezone=True),
         info={
             "colanderalchemy": {
                 "title": _("Last login"),
                 "description": _("Date of the user's last login."),
                 "missing": drop,
                 "widget": DateTimeInputWidget(readonly=True),
             }
         },
     )
 
-    expire_on = Column(
+    expire_on: Mapped[Optional[datetime]] = mapped_column(
         DateTime(timezone=True),
         info={
             "colanderalchemy": {
                 "title": _("Expiration date"),
                 "description": _("After this date the user will not be able to login anymore."),
             }
         },
     )
 
-    deactivated = Column(
+    deactivated: Mapped[bool] = mapped_column(
         Boolean,
         default=False,
         info={
             "colanderalchemy": {
                 "title": _("Deactivated"),
                 "description": _("Deactivate a user without removing it completely."),
             }
@@ -249,15 +253,15 @@
     def __init__(  # nosec
         self,
         username: str = "",
         password: str = "",
         email: str = "",
         is_password_changed: bool = False,
         settings_role: Optional[Role] = None,
-        roles: Optional[List[Role]] = None,
+        roles: Optional[list[Role]] = None,
         expire_on: Optional[datetime] = None,
         deactivated: bool = False,
     ) -> None:
         self.username = username
         self.password = password
         self.tech_data = {}
         self.email = email
@@ -267,15 +271,15 @@
         self.roles = roles or []
         self.expire_on = expire_on
         self.deactivated = deactivated
 
     @property
     def password(self) -> str:
         """Get the password."""
-        return self._password  # type: ignore
+        return self._password
 
     @password.setter
     def password(self, password: str) -> None:
         """Encrypt password on the fly."""
         self._password = self.__encrypt_password(password)
 
     def set_temp_password(self, password: str) -> None:
@@ -332,97 +336,149 @@
 
 
 class Shorturl(Base):  # type: ignore
     """The shorturl table representation."""
 
     __tablename__ = "shorturl"
     __table_args__ = {"schema": _schema}
-    id = Column(Integer, primary_key=True)
-    url = Column(Unicode)
-    ref = Column(String(20), index=True, unique=True, nullable=False)
-    creator_email = Column(Unicode(200))
-    creation = Column(DateTime)
-    last_hit = Column(DateTime)
-    nb_hits = Column(Integer)
+    id: Mapped[int] = mapped_column(Integer, primary_key=True)
+    url: Mapped[str] = mapped_column(Unicode)
+    ref: Mapped[str] = mapped_column(String(20), index=True, unique=True, nullable=False)
+    creator_email: Mapped[str] = mapped_column(Unicode(200))
+    creation: Mapped[datetime] = mapped_column(DateTime)
+    last_hit: Mapped[datetime] = mapped_column(DateTime)
+    nb_hits: Mapped[int] = mapped_column(Integer)
 
 
 class OAuth2Client(Base):  # type: ignore
     """The oauth2_client table representation."""
 
     __tablename__ = "oauth2_client"
     __table_args__ = {"schema": _schema}
     __colanderalchemy_config__ = {"title": _("OAuth2 Client"), "plural": _("OAuth2 Clients")}
     __c2cgeoform_config__ = {"duplicate": True}
-    id = Column(Integer, primary_key=True, info={"colanderalchemy": {"widget": HiddenWidget()}})
-    client_id = Column(
+    id: Mapped[int] = mapped_column(
+        Integer, primary_key=True, info={"colanderalchemy": {"widget": HiddenWidget()}}
+    )
+    client_id: Mapped[str] = mapped_column(
         Unicode,
         unique=True,
         info={
             "colanderalchemy": {
                 "title": _("Client ID"),
                 "description": _("The client identifier as e.-g. 'qgis'."),
             }
         },
     )
-    secret = Column(
+    secret: Mapped[str] = mapped_column(
         Unicode,
         info={
             "colanderalchemy": {
                 "title": _("Secret"),
                 "description": _("The secret."),
             }
         },
     )
-    redirect_uri = Column(
+    redirect_uri: Mapped[str] = mapped_column(
         Unicode,
         info={
             "colanderalchemy": {
                 "title": _("Redirect URI"),
                 "description": _(
                     """
                     URI where user should be redirected after authentication
                     as e.-g. 'http://127.0.0.1:7070/' in case of QGIS desktop.
                     """
                 ),
             }
         },
     )
+    state_required: Mapped[bool] = mapped_column(
+        Boolean,
+        default=False,
+        info={
+            "colanderalchemy": {
+                "title": _("State required"),
+                "description": _(
+                    "The state is required for this client (see: "
+                    "https://auth0.com/docs/secure/attack-protection/state-parameters)."
+                ),
+            }
+        },
+    )
+    pkce_required: Mapped[bool] = mapped_column(
+        Boolean,
+        default=False,
+        info={
+            "colanderalchemy": {
+                "title": _("PKCE required"),
+                "description": _(
+                    "PKCE is required for this client (see: "
+                    "https://auth0.com/docs/get-started/authentication-and-authorization-flow/"
+                    "authorization-code-flow-with-proof-key-for-code-exchange-pkce)."
+                ),
+            }
+        },
+    )
 
 
 class OAuth2BearerToken(Base):  # type: ignore
     """The oauth2_bearertoken table representation."""
 
     __tablename__ = "oauth2_bearertoken"
     __table_args__ = (
         sqlalchemy.schema.UniqueConstraint("client_id", "user_id"),
         {
             "schema": _schema,
         },
     )
-    id = Column(Integer, primary_key=True)
-    client_id = Column(Integer, ForeignKey(_schema + ".oauth2_client.id", ondelete="CASCADE"), nullable=False)
+    id: Mapped[int] = mapped_column(Integer, primary_key=True)
+    client_id: Mapped[int] = mapped_column(
+        Integer, ForeignKey(_schema + ".oauth2_client.id", ondelete="CASCADE"), nullable=False
+    )
     client = relationship(OAuth2Client)
-    user_id = Column(Integer, ForeignKey(_schema + ".user.id", ondelete="CASCADE"), nullable=False)
+    user_id: Mapped[int] = mapped_column(
+        Integer, ForeignKey(_schema + ".user.id", ondelete="CASCADE"), nullable=False
+    )
     user = relationship(User)
-    access_token = Column(Unicode(100), unique=True)
-    refresh_token = Column(Unicode(100), unique=True)
-    expire_at = Column(DateTime(timezone=True))  # in one hour
+    access_token: Mapped[str] = mapped_column(Unicode(100), unique=True)
+    refresh_token: Mapped[str] = mapped_column(Unicode(100), unique=True)
+    expire_at: Mapped[datetime] = mapped_column(DateTime(timezone=True))  # in one hour
+    state = mapped_column(String)
 
 
 class OAuth2AuthorizationCode(Base):  # type: ignore
     """The oauth2_authorizationcode table representation."""
 
     __tablename__ = "oauth2_authorizationcode"
     __table_args__ = (
         sqlalchemy.schema.UniqueConstraint("client_id", "user_id"),
         {
             "schema": _schema,
         },
     )
-    id = Column(Integer, primary_key=True)
-    client_id = Column(Integer, ForeignKey(_schema + ".oauth2_client.id", ondelete="CASCADE"), nullable=False)
+    id: Mapped[int] = mapped_column(Integer, primary_key=True)
+    client_id: Mapped[int] = mapped_column(
+        Integer, ForeignKey(_schema + ".oauth2_client.id", ondelete="CASCADE"), nullable=False
+    )
     client = relationship(OAuth2Client)
-    user_id = Column(Integer, ForeignKey(_schema + ".user.id", ondelete="CASCADE"), nullable=False)
+    user_id: Mapped[int] = mapped_column(
+        Integer, ForeignKey(_schema + ".user.id", ondelete="CASCADE"), nullable=False
+    )
     user = relationship(User)
-    redirect_uri = Column(Unicode)
-    code = Column(Unicode(100), unique=True)
-    expire_at = Column(DateTime(timezone=True))  # in 10 minutes
+    redirect_uri: Mapped[str] = mapped_column(Unicode)
+    code: Mapped[str] = mapped_column(Unicode(100), unique=True)
+    state: Mapped[Optional[str]] = mapped_column(String)
+    challenge: Mapped[str] = mapped_column(String(128))
+    challenge_method: Mapped[str] = mapped_column(String(6))
+    expire_at: Mapped[datetime] = mapped_column(DateTime(timezone=True))  # in 10 minutes
+
+
+class Log(AbstractLog):
+    """The static log table representation."""
+
+    __tablename__ = "log"
+    __table_args__ = {"schema": _schema}
+    __mapper_args__ = {
+        "polymorphic_identity": "static",
+        "concrete": True,
+    }
```

## c2cgeoportal_commons/testing/__init__.py

```diff
@@ -1,8 +1,8 @@
-# Copyright (c) 2018-2021, Camptocamp SA
+# Copyright (c) 2018-2024, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -22,36 +22,39 @@
 # SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 
 # The views and conclusions contained in the software and documentation are those
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
 
-from typing import Any, Dict
+from typing import Any
 
 import zope.sqlalchemy
 from sqlalchemy import engine_from_config
 from sqlalchemy.engine import Engine
 from sqlalchemy.orm import Session, configure_mappers, sessionmaker
 from transaction import TransactionManager
 
 
-def get_engine(settings: Dict[str, Any], prefix: str = "sqlalchemy.") -> Engine:
+def get_engine(settings: dict[str, Any], prefix: str = "sqlalchemy.") -> Engine:
     """Get the engine."""
     return engine_from_config(settings, prefix)
 
 
-def get_session_factory(engine: Engine) -> sessionmaker:
+def get_session_factory(engine: Engine) -> sessionmaker[Session]:  # pylint: disable=unsubscriptable-object
     """Get the session factory."""
     factory = sessionmaker()
     factory.configure(bind=engine)
     return factory
 
 
-def get_tm_session(session_factory: sessionmaker, transaction_manager: TransactionManager) -> Session:
+def get_tm_session(
+    session_factory: sessionmaker[Session],  # pylint: disable=unsubscriptable-object
+    transaction_manager: TransactionManager,
+) -> Session:
     """
     Get a ``sqlalchemy.orm.Session`` instance backed by a transaction.
 
     This function will hook the session to the transaction manager which
     will take care of committing any changes.
 
     - When using pyramid_tm it will automatically be committed or aborted
@@ -64,31 +67,33 @@
 
           engine = get_engine(settings)
           session_factory = get_session_factory(engine)
           with transaction.manager:
               dbsession = get_tm_session(session_factory, transaction.manager)
     """
     dbsession = session_factory()
+    assert isinstance(dbsession, Session)
     zope.sqlalchemy.register(dbsession, transaction_manager=transaction_manager)
     return dbsession
 
 
 def generate_mappers() -> None:
     """Initialize the model for a Pyramid app."""
 
     # import or define all models here to ensure they are attached to the
     # Base.metadata prior to any initialization routines
-    import c2cgeoportal_commons.models.main  # noqa: ignore=F401
+    import c2cgeoportal_commons.models.main  # pylint: disable=unused-import,import-outside-toplevel
+    import c2cgeoportal_commons.models.static  # pylint: disable=import-outside-toplevel
 
     # run configure_mappers after defining all of the models to ensure
     # all relationships can be setup
     configure_mappers()
 
 
 def get_session(
-    settings: Dict[str, Any], transaction_manager: TransactionManager, prefix: str = "sqlalchemy."
+    settings: dict[str, Any], transaction_manager: TransactionManager, prefix: str = "sqlalchemy."
 ) -> Session:
     """Get the session."""
     configure_mappers()
     engine = get_engine(settings, prefix)
     session_factory = get_session_factory(engine)
     return get_tm_session(session_factory, transaction_manager)
```

## c2cgeoportal_commons/testing/initializedb.py

```diff
@@ -1,8 +1,8 @@
-# Copyright (c) 2017-2021, Camptocamp SA
+# Copyright (c) 2017-2024, Camptocamp SA
 # All rights reserved.
 
 # Redistribution and use in source and binary forms, with or without
 # modification, are permitted provided that the following conditions are met:
 
 # 1. Redistributions of source code must retain the above copyright notice, this
 #    list of conditions and the following disclaimer.
@@ -24,45 +24,46 @@
 # The views and conclusions contained in the software and documentation are those
 # of the authors and should not be interpreted as representing official policies,
 # either expressed or implied, of the FreeBSD Project.
 
 
 import os
 import sys
-from typing import List, cast
+from typing import cast
 
+import sqlalchemy
 from sqlalchemy.engine import Connection
 from sqlalchemy.orm import Session
 
 from c2cgeoportal_commons.models import Base
 
 
-def usage(argv: List[str]) -> None:
+def usage(argv: list[str]) -> None:
     """Get the usage."""
     cmd = os.path.basename(argv[0])
     print(f"usage: {cmd} <config_uri> [var=value]\n" '(example: "{cmd} development.ini")')
     sys.exit(1)
 
 
 def schema_exists(connection: Connection, schema_name: str) -> bool:
     """Get if the schema exist."""
     sql = f"""
 SELECT count(*) AS count
 FROM information_schema.schemata
 WHERE schema_name = '{schema_name}';
 """
-    result = connection.execute(sql)
+    result = connection.execute(sqlalchemy.text(sql))
     row = result.first()
-    return cast(bool, row[0] == 1)
+    return cast(bool, row[0] == 1)  # type: ignore[index]
 
 
 def truncate_tables(connection: Connection) -> None:
     """Truncate all the tables defined in the model."""
     for t in Base.metadata.sorted_tables:
-        connection.execute(f"TRUNCATE TABLE {t.schema}.{t.name} CASCADE;")
+        connection.execute(sqlalchemy.text(f"TRUNCATE TABLE {t.schema}.{t.name} CASCADE;"))
 
 
 def setup_test_data(dbsession: Session) -> None:
     """Initialize the testing data."""
     from c2cgeoportal_commons.models.main import Role  # pylint: disable=import-outside-toplevel
     from c2cgeoportal_commons.models.static import User  # pylint: disable=import-outside-toplevel
```

## tests/conftest.py

```diff
@@ -12,17 +12,17 @@
 
 
 @pytest.fixture(scope="session")
 @pytest.mark.usefixtures("settings")
 def dbsession(settings):
     generate_mappers()
     engine = get_engine(settings)
-    truncate_tables(engine)
     session_factory = get_session_factory(engine)
     session = get_tm_session(session_factory, transaction.manager)
+    truncate_tables(session)
     return session
 
 
 @pytest.fixture(scope="function")
 @pytest.mark.usefixtures("dbsession")
 def transact(dbsession):
     t = dbsession.begin_nested()
```

## Comparing `c2cgeoportal_commons-2.7.1.83.dist-info/METADATA` & `c2cgeoportal_commons-2.9.dist-info/METADATA`

 * *Files 8% similar despite different names*

```diff
@@ -1,36 +1,36 @@
 Metadata-Version: 2.1
 Name: c2cgeoportal-commons
-Version: 2.7.1.83
+Version: 2.9
 Summary: c2cgeoportal commons
 Home-page: https://github.com/camptocamp/c2cgeoportal/
 Author: Camptocamp
 Author-email: info@camptocamp.com
+License: UNKNOWN
 Keywords: web gis geoportail c2cgeoportal geocommune pyramid
+Platform: UNKNOWN
 Classifier: Development Status :: 6 - Mature
 Classifier: Environment :: Web Environment
 Classifier: Framework :: Pyramid
 Classifier: Intended Audience :: Other Audience
 Classifier: License :: OSI Approved :: BSD License
 Classifier: Operating System :: OS Independent
 Classifier: Programming Language :: Python
 Classifier: Programming Language :: Python :: 3
-Classifier: Programming Language :: Python :: 3.8
+Classifier: Programming Language :: Python :: 3.10
 Classifier: Topic :: Scientific/Engineering :: GIS
 Classifier: Typing :: Typed
+Requires-Python: >=3.10
 Description-Content-Type: text/markdown
-Requires-Dist: c2c.template
 Requires-Dist: GeoAlchemy2
 Requires-Dist: papyrus
 Requires-Dist: pyramid
 Requires-Dist: sqlalchemy
 Requires-Dist: transaction
 Requires-Dist: zope.event
-Requires-Dist: jinja2 (>=2.11.3)
-Requires-Dist: setuptools (>=65.5.1)
 Provides-Extra: broadcast
 Requires-Dist: c2cwsgiutils ; extra == 'broadcast'
 Provides-Extra: testing
 Requires-Dist: transaction ; extra == 'testing'
 Provides-Extra: upgrade
 Requires-Dist: alembic ; extra == 'upgrade'
 Requires-Dist: psycopg2 ; extra == 'upgrade'
@@ -61,7 +61,9 @@
 use `common/testing/initialized.py` to create the database (`development.ini` at admin side)
 
 ## Run the tests
 
 ```
 make test
 ```
+
+
```

## Comparing `c2cgeoportal_commons-2.7.1.83.dist-info/RECORD` & `c2cgeoportal_commons-2.9.dist-info/RECORD`

 * *Files 14% similar despite different names*

```diff
@@ -1,80 +1,83 @@
 c2cgeoportal_commons/__init__.py,sha256=lhrPRtwZVTucC_3OkwLp-tWAeb7eJ5TU097YK8hnoCM,2053
 c2cgeoportal_commons/py.typed,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-c2cgeoportal_commons/alembic/env.py,sha256=6YMKagQD-gicMHH74sXR139dWwwJKukSfO9D2GPfgD4,4940
-c2cgeoportal_commons/alembic/main/028477929d13_add_technical_roles.py,sha256=OP_jW1wptS-L663GzR_2vV_FqDDzL5BpwqL7cl5dhwA,2881
-c2cgeoportal_commons/alembic/main/04f05bfbb05e_remove_the_old_is_expanded_column.py,sha256=BfKFEKXkKlw89e0rM-16ryHdeYOKPzRQ_lNOD9dcm2U,2269
-c2cgeoportal_commons/alembic/main/116b9b79fc4d_internal_and_external_layer_tables_.py,sha256=L8zIpPUf7YPkEsLNwHWqYA2DFyHEM5JXqUaNhhUc33I,9071
-c2cgeoportal_commons/alembic/main/1418cb05921b_merge_1_6_and_master_branches.py,sha256=pdvd6iEK6NBdMXGDV_rdytg9rVEn7b5ngRsa_QPi0NA,2013
-c2cgeoportal_commons/alembic/main/164ac0819a61_add_image_format_to_wmts_layer.py,sha256=TcMe0NWEGL572O2eG_yszAGXAAWDHxaoPCZrqqEU5K0,2220
-c2cgeoportal_commons/alembic/main/166ff2dcc48d_create_database.py,sha256=lDOF1vYi63lq0ClAiq0wfVnONGwzgNGIO7agXj_h-vs,11246
+c2cgeoportal_commons/alembic/env.py,sha256=sFsOLZqKlREV6jxiQFkiQz7EpoS73eyUKgEs7rChU7Q,5144
+c2cgeoportal_commons/alembic/main/028477929d13_add_technical_roles.py,sha256=5y7OMIQxXYYFEvJZP5CacUb6bUz8UteQmmDj_kaW_vE,2848
+c2cgeoportal_commons/alembic/main/04f05bfbb05e_remove_the_old_is_expanded_column.py,sha256=9w4JATGWH1LwLojin6rYc0FEjBKPzUePzoaoDvXjmtA,2269
+c2cgeoportal_commons/alembic/main/116b9b79fc4d_internal_and_external_layer_tables_.py,sha256=1LpLiS4ebPIpaBs7TrhKqd4ivFHfZbg_qKrjgD-lHI0,8800
+c2cgeoportal_commons/alembic/main/1418cb05921b_merge_1_6_and_master_branches.py,sha256=0bcbm6NndoazzMJRsQvvwB9fvN3WWXZ2tqFyZeF9rkw,1959
+c2cgeoportal_commons/alembic/main/164ac0819a61_add_image_format_to_wmts_layer.py,sha256=dAfMFHVj6uSvjpTFOHsDS7cOip3U_iQLwaxEa23VTgc,2220
+c2cgeoportal_commons/alembic/main/166ff2dcc48d_create_database.py,sha256=58Lym1_rs8OUV5986aXNa9QEtRdUcfz8TF74SB4cqdc,11264
 c2cgeoportal_commons/alembic/main/16e43f8c0330_remove_old_metadata_column.py,sha256=KnTdHP8vuzKXf6FK5hWsStlKPuqXMGw1wDoQ5JlOXHs,2251
-c2cgeoportal_commons/alembic/main/1d5d4abfebd1_add_restricted_theme.py,sha256=1Fns_OZQfOUnLxCt6qnqE8T5kmYasyS5XFPvZEJEW90,2868
-c2cgeoportal_commons/alembic/main/1de20166b274_remove_v1_artifacts.py,sha256=EFCMLtM2UUBlnMkwwRytYEIqOfIaFOkbTLKELflAJuU,3397
-c2cgeoportal_commons/alembic/main/20137477bd02_update_icons_url.py,sha256=O06q3TEq30HaWhklV6bmbNnxU4yFd548riYDkqzP5MQ,3561
-c2cgeoportal_commons/alembic/main/21f11066f8ec_trigger_on_role_updates_user_in_static.py,sha256=HGwvzspdSH6wto7_w0zmpf3XQ8PsIqAK0BKLwm5YX8k,2794
-c2cgeoportal_commons/alembic/main/22e6dfb556de_add_description_tree_.py,sha256=7e5phwyY-2g1On3LuTS_AgSS-RDsgyc_olznXSYK2Nw,2416
-c2cgeoportal_commons/alembic/main/29f2a32859ec_merge_1_6_and_master_branches.py,sha256=3eMNIfGqDIxqDl1ZgEi1OH4i_x9OhipbzR9MzzE5XAc,2013
-c2cgeoportal_commons/alembic/main/2b8ed8c1df94_set_layergroup_treeitem_is_as_a_primary_.py,sha256=2aJeWCX57Nb7oU_XJWKE6vF-IsujB1JTYGTyllnX7vk,2278
-c2cgeoportal_commons/alembic/main/32527659d57b_move_exclude_properties_from_layerv1_to_.py,sha256=8wBk-xvOhy5P8icSAOjC0aYNBCznqXvHN5X4x4Ny7A0,2819
-c2cgeoportal_commons/alembic/main/32b21aa1d0ed_merge_e004f76e951a_and_e004f76e951a_.py,sha256=mOaJf07Rr-NLedN05XWMTZf7Rim_Kr7Z8yDMypgnXiw,2025
-c2cgeoportal_commons/alembic/main/338b57593823_remove_trigger_on_role_name_change.py,sha256=0RtdeADv65zVWmQK2MraJOGzbtB8_HzBmS24wU_5jOk,2798
-c2cgeoportal_commons/alembic/main/415746eb9f6_changes_for_v2.py,sha256=O0fug0hJu8o7poT1QETkrD6W_b_jcHTQCSxdVbusj1Q,16243
-c2cgeoportal_commons/alembic/main/5109242131ce_add_column_time_widget.py,sha256=tdKdMbYgQNEEZEyNMD5lVf-LR3ZYBdOX89j5Qy3JdKo,2518
-c2cgeoportal_commons/alembic/main/52916d8fde8b_add_sql_fields_to_vector_tiles.py,sha256=6OCg7ehK4cx0BQe8MKc_VAaqLuU_Ay3sItUtH0nOAus,2261
-c2cgeoportal_commons/alembic/main/53ba1a68d5fe_add_theme_to_fulltextsearch.py,sha256=zOniJybQWT7Pi1bAhUfJZvX9vKbK7oWyQqumijgIAQU,3005
-c2cgeoportal_commons/alembic/main/54645a535ad6_add_ordering_in_relation.py,sha256=aRF4RQtSYyr-SqeLLwTzwdhaOt7o5EF12RDtgNx1Nmk,3638
+c2cgeoportal_commons/alembic/main/1d5d4abfebd1_add_restricted_theme.py,sha256=_c4Nh5Wg5CNnjI84JpL4ebDFt0ZNC98Es-tjKj-PGFM,2852
+c2cgeoportal_commons/alembic/main/1de20166b274_remove_v1_artifacts.py,sha256=pV2__mqdgd4LZRzHOLXMR1wFgmGTvp8TSYg_LyirtzY,3397
+c2cgeoportal_commons/alembic/main/20137477bd02_update_icons_url.py,sha256=CDwPvT_UT7fqiOkyQtEk_hWBWLTJUvpkGDqPK8JSWPA,3561
+c2cgeoportal_commons/alembic/main/21f11066f8ec_trigger_on_role_updates_user_in_static.py,sha256=x4RLiISizjxzNfcoGF4tHRDqnSEc4G7Nqoh-kwVXUOY,2812
+c2cgeoportal_commons/alembic/main/22e6dfb556de_add_description_tree_.py,sha256=9WZoJJq2N7sSnfgASukkxnRSxPQYsI0jG1maf4snl7U,2416
+c2cgeoportal_commons/alembic/main/29f2a32859ec_merge_1_6_and_master_branches.py,sha256=82JKe68vr_91EJFxiNel2eviXATbwIkDuvdS-GrXmRk,1959
+c2cgeoportal_commons/alembic/main/2b8ed8c1df94_set_layergroup_treeitem_is_as_a_primary_.py,sha256=4FRBk079_3G7boTJuny88nW61VJVRP87BGUzN-B6mCk,2278
+c2cgeoportal_commons/alembic/main/32527659d57b_move_exclude_properties_from_layerv1_to_.py,sha256=CUWZt_1bvpZgPeRAsr0FM0CzWFR2XV5u4Z9ld5heA3g,2773
+c2cgeoportal_commons/alembic/main/32b21aa1d0ed_merge_e004f76e951a_and_e004f76e951a_.py,sha256=cF0FgsfXMhhP3Ig8xhn1neK3td92NGWvqAkeO-UAd1E,1971
+c2cgeoportal_commons/alembic/main/338b57593823_remove_trigger_on_role_name_change.py,sha256=LPKhERU4dkEV28h-_J62Ag91lpHBWo9B3_2qtwBd3ak,2796
+c2cgeoportal_commons/alembic/main/415746eb9f6_changes_for_v2.py,sha256=bvHs1Epd7XgVRB0XKYGS1042-TSkCkmKMx0-OjJjB6s,15960
+c2cgeoportal_commons/alembic/main/44c91d82d419_add_table_log.py,sha256=xAAQuyOo7qYslKZMNAa1-z3c591JbjgEGO4kX9WOiXM,2703
+c2cgeoportal_commons/alembic/main/5109242131ce_add_column_time_widget.py,sha256=o95InK87O-tZubLCCzrxlfog-0peqa_JyYR1wLGMzLQ,2553
+c2cgeoportal_commons/alembic/main/52916d8fde8b_add_sql_fields_to_vector_tiles.py,sha256=e-2hpIB1RcQDmBiNktoZejZPwXfOqppKz8SGR0esiYk,2275
+c2cgeoportal_commons/alembic/main/53ba1a68d5fe_add_theme_to_fulltextsearch.py,sha256=7njK74HCpJHyweP4_n9Vc2n0mgba4kX9zVJ_b8Qz9R8,3005
+c2cgeoportal_commons/alembic/main/54645a535ad6_add_ordering_in_relation.py,sha256=rbFisvb_W50x41a3uOEZRpCTafMLRdoLmOL8-cFdB24,3546
 c2cgeoportal_commons/alembic/main/56dc90838d90_fix_removing_layerv1.py,sha256=YfqkOtmVcDwNht0TVGgyU8D4NJdo1bEJtDjvbN04wD0,2336
-c2cgeoportal_commons/alembic/main/596ba21e3833_separate_local_internal.py,sha256=6yn_CfQ7OpcpN3u2eFdrOwHGitzKTfFDVCxI7Hdr1JY,2497
+c2cgeoportal_commons/alembic/main/596ba21e3833_separate_local_internal.py,sha256=0GPFSfMQEiAG5O9kan87ufmQQSKqYyq6rKbNMGWaxx8,2419
 c2cgeoportal_commons/alembic/main/678f88c7ad5e_add_vector_tiles_layers_table.py,sha256=AvEHJ9BKZMyFX9h0Uir0zSIOX5TXvc7b2vQO-TsOR1U,2448
-c2cgeoportal_commons/alembic/main/6a412d9437b1_rename_serverogc_to_ogcserver.py,sha256=ouFOVv6S_4w8xi4ls1Vs2pgHoB4F4VVaa3xEVLDjR8Q,2535
+c2cgeoportal_commons/alembic/main/6a412d9437b1_rename_serverogc_to_ogcserver.py,sha256=ipOt_EN5i7PYQL6Vl8Krf2qfj7MZXLdYcBcBfZimVaI,2503
 c2cgeoportal_commons/alembic/main/6d87fdad275a_convert_metadata_to_the_right_case.py,sha256=9RoQMZaaxm6_GzHgCuWlIOmtdIDNBCOR3gvXZSedX-g,2528
-c2cgeoportal_commons/alembic/main/7530011a66a7_trigger_on_role_updates_user_in_static.py,sha256=XilhxEBvLZJaSw1ZR8g58hfohdAB03_KFbDbV8vq9BM,2794
-c2cgeoportal_commons/alembic/main/78fd093c8393_add_api_s_intrfaces.py,sha256=P1Krd3JQHmhPN3oeLLF0fex7wyBMLHSQkuX86Kb82Rw,5235
-c2cgeoportal_commons/alembic/main/7d271f4527cd_add_layer_column_in_layerv1_table.py,sha256=-zrJ6YB78xdNVCppmru2HhbcfsrMfq4ZOZ-p0qma8hU,2453
-c2cgeoportal_commons/alembic/main/809650bd04c3_add_dimension_field.py,sha256=8zVKPzzivC3JxZL2Yt-ZoGfbd4hMaYV_CQtUtUFcASA,2260
-c2cgeoportal_commons/alembic/main/8117bb9bba16_use_dimension_on_all_the_layers.py,sha256=oFR0UuQYY8tkxzcUPpJAyBc0_lkAVvELS325DOzpI_U,3012
+c2cgeoportal_commons/alembic/main/7530011a66a7_trigger_on_role_updates_user_in_static.py,sha256=GO7j58FmclirTdqJJHRjzw1IieoldXytKEpt-WIsd8g,2812
+c2cgeoportal_commons/alembic/main/78fd093c8393_add_api_s_intrfaces.py,sha256=pjfUi5Mkm0I6xf_6Ep6UAlzEQUV_2QK_Be9kbgpg_wg,4878
+c2cgeoportal_commons/alembic/main/7d271f4527cd_add_layer_column_in_layerv1_table.py,sha256=VeL78xF1hiIx4UP3Y7HKczC1Hu5V8xMmQU4-mNGKLrQ,2453
+c2cgeoportal_commons/alembic/main/809650bd04c3_add_dimension_field.py,sha256=_vMYzgnVAaV1Has2og2Et8bQI0qWXhGRxs3P40hTKbM,2260
+c2cgeoportal_commons/alembic/main/8117bb9bba16_use_dimension_on_all_the_layers.py,sha256=3M3loOBlg84vwQC8oAGFEFz6BdSP2So0hL7Gx2aGVFs,2980
 c2cgeoportal_commons/alembic/main/87f8330ed64e_add_missing_delete_cascades.py,sha256=Sx2A-KRvZHd7Sa-VKL1W4V7wh8Eb8LdVgjSOUOrm1Zw,9368
-c2cgeoportal_commons/alembic/main/9268a1dffac0_add_trigger_to_be_able_to_correctly_.py,sha256=0djQsxzaiBNgyymoUEMciDdt2fg8BR1kKCTFIug0o98,2734
-c2cgeoportal_commons/alembic/main/94db7e7e5b21_merge_2_2_and_master_branches.py,sha256=kC1SFl8go0SN3MixuwC2BDTc_dM3MGgEnZlgnK9aN4U,2013
-c2cgeoportal_commons/alembic/main/951ff84bd8ec_be_able_to_delete_a_wms_layer_in_sql.py,sha256=uPh3pj-DMgURY1vrMLf3DGtoFuXpSt0lI9z_PdJptyM,6818
-c2cgeoportal_commons/alembic/main/a00109812f89_add_field_layer_wms_valid.py,sha256=z1fVfP54sNsxJqlrfeS8NFah8Brlqy2tt_Sum2F15A8,2413
-c2cgeoportal_commons/alembic/main/a4f1aac9bda_merge_1_6_and_master_branches.py,sha256=rB_9a36XeCNm7z8-nEfTc_gCDOk9w4X-DSNDoaDIbGo,2011
-c2cgeoportal_commons/alembic/main/b60f2a505f42_remame_uimetadata_to_metadata.py,sha256=s_-V3H0raDUvg-ibxy04aWPSrK95CaLdssI3fF-5Hu0,2199
+c2cgeoportal_commons/alembic/main/9268a1dffac0_add_trigger_to_be_able_to_correctly_.py,sha256=xE2xII69SUr7WuKCYUCoJXammduC6dEcM96yjJvx6IY,2734
+c2cgeoportal_commons/alembic/main/94db7e7e5b21_merge_2_2_and_master_branches.py,sha256=wNrJSXw6GY7NMNQY_rDeazSWdVLN6KXMFgBQdv_NaAs,1959
+c2cgeoportal_commons/alembic/main/951ff84bd8ec_be_able_to_delete_a_wms_layer_in_sql.py,sha256=SQMDF60qkxPF-FWJmhPkVUeh31oho6OQYqvLHGSIBhA,6818
+c2cgeoportal_commons/alembic/main/a00109812f89_add_field_layer_wms_valid.py,sha256=2wbb6RyCNzqtxqrbnDYkMgOR2uQET4k5a5oXBOT3EWg,2409
+c2cgeoportal_commons/alembic/main/a4f1aac9bda_merge_1_6_and_master_branches.py,sha256=fa8cVxfi4Pyq03o2Fu6kvgqvlSF1yoIFTwuIyscmWMM,1957
+c2cgeoportal_commons/alembic/main/b60f2a505f42_remame_uimetadata_to_metadata.py,sha256=rYIVwvPetrBdaOm8cClUWx8nG0wxUhE28H_l2ud_Xfg,2199
 c2cgeoportal_commons/alembic/main/c75124553bf3_remove_deprecated_columns.py,sha256=-xbcaMk2yQHBAoBOs3wTzOSfi1UIHlWwkSREAJTRHqU,2434
-c2cgeoportal_commons/alembic/main/d48a63b348f1_change_mapserver_url_for_docker.py,sha256=AA-JfvcFaMY1eQ4bL48ZIXW8jYV2MIcIRIsO0W-7DP8,2535
-c2cgeoportal_commons/alembic/main/d8ef99bc227e_be_able_to_delete_a_linked_functionality.py,sha256=KcFcoCdYL9hyf8E6zvuhF1GMKSSSP6t3X5J6PMxHKe4,3434
-c2cgeoportal_commons/alembic/main/daf738d5bae4_merge_2_0_and_master_branches.py,sha256=fbGK7HH0TkcRvgne4AOT5SKd7W81LCsmeXli8FYjmdw,2013
-c2cgeoportal_commons/alembic/main/dba87f2647f9_merge_2_2_on_2_3.py,sha256=k06btNcgKQ_N9IEh8EEWgSNni_bQPfy0uchSd-5NPiA,2000
-c2cgeoportal_commons/alembic/main/e004f76e951a_add_missing_not_null.py,sha256=MAeTIEgNGBiETtx4gH7v621PpBkhYNsC8E3Aq9PBQz0,4408
-c2cgeoportal_commons/alembic/main/e7e03dedade3_put_the_default_wms_server_in_the_.py,sha256=u7CZx3HRbuvfUgmFD4ztopJ0xaoereYBLNppwnPB5bI,3142
+c2cgeoportal_commons/alembic/main/d48a63b348f1_change_mapserver_url_for_docker.py,sha256=Yv3UjPXVb-mij0vdkPTL2ND0MQn-AkslyYuJpS5Soso,2457
+c2cgeoportal_commons/alembic/main/d8ef99bc227e_be_able_to_delete_a_linked_functionality.py,sha256=qXfu92yYhUoxUJNXUY83CL8nWzbk9qbf8DBJmqSuYXA,3434
+c2cgeoportal_commons/alembic/main/daf738d5bae4_merge_2_0_and_master_branches.py,sha256=ze5h3afczlkPs0XW4BwsfHKBcuODwvOYBp93QkIrHBc,1959
+c2cgeoportal_commons/alembic/main/dba87f2647f9_merge_2_2_on_2_3.py,sha256=Ty0XxeNQXJ6w5ROGcAziIv0j4T2p23BVU8pInPy8fdw,1946
+c2cgeoportal_commons/alembic/main/e004f76e951a_add_missing_not_null.py,sha256=rwkkJ9fDNFLIMpdMJ6ITLE-lClBENq8ngR7Ayg1-h2o,4180
+c2cgeoportal_commons/alembic/main/e7e03dedade3_put_the_default_wms_server_in_the_.py,sha256=YshAKRcWrd4TlWSW6F1d4mZWSKE__UW9NGmNyEBpPko,3064
 c2cgeoportal_commons/alembic/main/e85afd327ab3_cascade_deletes_to_tsearch.py,sha256=IN2_3oISNm_fWsEognF0P4-RxntU8yomJHt7X0CvBDw,3338
-c2cgeoportal_commons/alembic/main/ec82a8906649_add_missing_on_delete_cascade_on_layer_.py,sha256=9KvLFbXSIKqSd-PDfTyS4NRb8k64l3VrhVhgmY9OTCg,2977
-c2cgeoportal_commons/alembic/main/ee25d267bf46_main_interface_desktop.py,sha256=gQbrOG3sLQCGvZv8xxsWJZRbOgmbFhjLovoVxTnHdsU,2355
-c2cgeoportal_commons/alembic/main/eeb345672454_merge_2_4_and_master_branches.py,sha256=ZzF2D-7V0AZpBNyoEkLURdBoumqKuzfH0SAdT6nXDPU,2014
+c2cgeoportal_commons/alembic/main/ec82a8906649_add_missing_on_delete_cascade_on_layer_.py,sha256=39GRKhl532MOWeE7InJZn6VevyWZVD5Va5YCfXwQT74,2977
+c2cgeoportal_commons/alembic/main/ee25d267bf46_main_interface_desktop.py,sha256=VirA6bHHb5vHRwqFL0R28_d9Lb-KPXxGMZx4r9EoVxA,2263
+c2cgeoportal_commons/alembic/main/eeb345672454_merge_2_4_and_master_branches.py,sha256=1xM5XppS0awsXzkhCPh0hG5xXn-Abd74SAvyfCKoUJU,1960
 c2cgeoportal_commons/alembic/static/0c640a58a09a_add_opt_key_column.py,sha256=3hx7u8btKHCATk4MkECrV5pTHqxSGHqRWpGPtUTz8Pc,2315
 c2cgeoportal_commons/alembic/static/107b81f5b9fe_add_missing_delete_cascades.py,sha256=aKiyNB92_3HNTVGK0BJQfc2N63Q_wQjEl5_caOlBftM,2763
-c2cgeoportal_commons/alembic/static/1857owc78a07_add_last_login_and_expiration_date.py,sha256=2-VPN3KKYVv6sc6rzSPQHC3GFf3dV1GB3fTbPwFpub0,2660
-c2cgeoportal_commons/alembic/static/1da396a88908_move_user_table_to_static_schema.py,sha256=y2QN1-67EvGp8LCN_9OGzQh5SEkH0CgB_hZuheLmwgo,6242
-c2cgeoportal_commons/alembic/static/3f89a7d71a5e_alter_column_url_to_remove_limitation.py,sha256=-DeqDaGfaWjIi8bsNMo0iHfBGR8Qc7sdZXI4VkzGtRA,2100
-c2cgeoportal_commons/alembic/static/53d671b17b20_add_timezone_on_datetime_fields.py,sha256=pH3EB4qbJp4ZP1n0vmfQH9Z780gHWQtqFinH_dAPfqY,2727
-c2cgeoportal_commons/alembic/static/5472fbc19f39_add_temp_password_column.py,sha256=RPJ2dGTymN5yqaeHFXggvLZyJvuubeWsNEu6XZJQm4U,2280
-c2cgeoportal_commons/alembic/static/7ef947f30f20_add_oauth2_tables.py,sha256=YbMgCVhwxsFZQimTkbbZZHiHu-Ae80IGlpZgah4iPZw,4090
-c2cgeoportal_commons/alembic/static/ae5e88f35669_add_table_user_role.py,sha256=l3jMGUW1oWHQZ5GRxhSGFK42yadnzWH18-C2kT6s9F4,3633
+c2cgeoportal_commons/alembic/static/1857owc78a07_add_last_login_and_expiration_date.py,sha256=_ZJE4EBZnPz1fTkoBQU7qFwDPJdgJIUlo1ez3bFEKZQ,2660
+c2cgeoportal_commons/alembic/static/1da396a88908_move_user_table_to_static_schema.py,sha256=NkmArNnJ7Jrsnj_N0Gwl7V4LA5q_t89K7sbW0KoSNDs,6116
+c2cgeoportal_commons/alembic/static/3f89a7d71a5e_alter_column_url_to_remove_limitation.py,sha256=YKXuYWgsbfJ3MUMRVo4h8LbK3aS7n3dc4UJQMNz2ew4,2100
+c2cgeoportal_commons/alembic/static/44c91d82d419_add_table_log.py,sha256=-ySdbfa1gwtjh52w2tdBq8GJW6c1H9taC18FHM7h7_U,2745
+c2cgeoportal_commons/alembic/static/53d671b17b20_add_timezone_on_datetime_fields.py,sha256=ZVpGOA-aLaYyCIKAbe0Zm9VbejRf04tr_uWnrDg_U6g,2727
+c2cgeoportal_commons/alembic/static/5472fbc19f39_add_temp_password_column.py,sha256=UoeRaHCfY6VVbmd39ikJI7zsF_KM62CVfnxSXBDyRv4,2280
+c2cgeoportal_commons/alembic/static/76d72fb3fcb9_add_oauth2_pkce.py,sha256=BBHnJW7r6hob9QXfv5L4tzPZCHNLEKwji19Rwhx3es0,3134
+c2cgeoportal_commons/alembic/static/7ef947f30f20_add_oauth2_tables.py,sha256=Kw79_sekLXgG-xy907UKfJwn2D9qy1nteIXMaq1v-Os,4095
+c2cgeoportal_commons/alembic/static/ae5e88f35669_add_table_user_role.py,sha256=4v7UT-xINHvob9djWXn20lK5vorMBw4vNgmxq8uEe9U,3423
 c2cgeoportal_commons/alembic/static/bd029dbfc11a_fill_tech_data_column.py,sha256=F7ess8AZSp-D86IM8sFFmD0nKBTlwc5HMK28PrqAr5s,2119
 c2cgeoportal_commons/lib/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-c2cgeoportal_commons/lib/email_.py,sha256=VAtXpFhenezZopzcQI1e-QgcJihMu3R1kzjmUQO_Nos,3485
-c2cgeoportal_commons/lib/literal.py,sha256=450WdbYHt7tKd7t6nz7OB8D61BqyC1UdK12HvsrhvoQ,2036
-c2cgeoportal_commons/lib/url.py,sha256=kDnk67Rc8wFYrFb13K5STkT10-cCbGW0KfJlr5lZTf8,8304
-c2cgeoportal_commons/lib/validators.py,sha256=89-JXCNGTQxmzHbharaqObrbXHxp77sx6TZtCZTNjnM,1830
-c2cgeoportal_commons/models/__init__.py,sha256=JNrOgnHZRgE3ab6WvDzAuBP8jaTiAI8bGkk3tFy_AXA,2553
-c2cgeoportal_commons/models/main.py,sha256=ArEfgvpujTQ7Vsc0m4ejQhEoa4M_F2OPdmtA_jV4U_s,58452
-c2cgeoportal_commons/models/sqlalchemy.py,sha256=M-82eUvvqiW90UviNdRAXCPA2molfZU_vlVBS8LqXIs,2834
-c2cgeoportal_commons/models/static.py,sha256=S7hYpcCm5xtEh-XTvnRhuu0Ma2hPjLJSrcJyU5Jb7SU,15162
-c2cgeoportal_commons/testing/__init__.py,sha256=Nn2ky7JixbfYRTM1oJkZ0HKfZiW1IkvmkA8e6bHJl6M,3807
-c2cgeoportal_commons/testing/initializedb.py,sha256=mNBT_rPjxukWG5DIVX1rAmeNCZpCQvxICxigVuDr3_0,3155
+c2cgeoportal_commons/lib/email_.py,sha256=vGz7b-d3kssqMi0ZX3e2mUwkSpqiV_Map_qqolLIBQw,3473
+c2cgeoportal_commons/lib/literal.py,sha256=V68O7hzgfMMOZ-2CJAfTVrkmrGybyCn7m44UhrmW8DY,2036
+c2cgeoportal_commons/lib/url.py,sha256=k4uvvc1F2NDAU_3Tyz5itb1DOxOOcEFD3Wjhr5LPSnI,8293
+c2cgeoportal_commons/lib/validators.py,sha256=dF0Qlg6ghMrxwNqV675Juz5fIx9-58f4JimV7SC-sqc,1805
+c2cgeoportal_commons/models/__init__.py,sha256=STyWBQwgJnNYhMFHFkH-R9BbI_271dt1AGxIFWnoFu4,2765
+c2cgeoportal_commons/models/main.py,sha256=7_X5aeM9pYbdqO054Raph5yQY22BQrC4-uAzbRhkshs,63084
+c2cgeoportal_commons/models/sqlalchemy.py,sha256=UhF9X23myCsTT6nv8IXBCyICIeC6RG91t6dAYJyRV2I,2813
+c2cgeoportal_commons/models/static.py,sha256=oce9sm2StQoWgJ7fMUeBTONvEY9qk5zE-_FcYxCfWyE,17453
+c2cgeoportal_commons/testing/__init__.py,sha256=E_CJMEWjf87NZMNNp-2OhgcZD6LvxGHplZXNLZYSl3U,4081
+c2cgeoportal_commons/testing/initializedb.py,sha256=jsFzMimA_wPbp0DwniGiM_ekngDyX57mqoI6_ioNPUY,3224
 tests/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-tests/conftest.py,sha256=kxgBqWJQ3vEy7yoW-NBhBp8yLOVLiObC5O69gZLE9Ws,1449
-c2cgeoportal_commons-2.7.1.83.dist-info/METADATA,sha256=Jbl_Phd2EhtjT0U_JXV4SKg4Mge3d8_WTAIUvL4OVvM,1877
-c2cgeoportal_commons-2.7.1.83.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
-c2cgeoportal_commons-2.7.1.83.dist-info/top_level.txt,sha256=NWDBsLJav5VgJVX1XzTwUvFShioh9XSi5IaJU_9_YDc,27
-c2cgeoportal_commons-2.7.1.83.dist-info/RECORD,,
+tests/conftest.py,sha256=DdCNLXAzOwjztauMELLHQsdzcuQgx83Jfy-0JUu-OCs,1450
+c2cgeoportal_commons-2.9.dist-info/METADATA,sha256=2Pmw2wuEO7XDg9__hVoB-VOUzGrMBx2Mll-Dnmw6Po4,1836
+c2cgeoportal_commons-2.9.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
+c2cgeoportal_commons-2.9.dist-info/top_level.txt,sha256=NWDBsLJav5VgJVX1XzTwUvFShioh9XSi5IaJU_9_YDc,27
+c2cgeoportal_commons-2.9.dist-info/RECORD,,
```

